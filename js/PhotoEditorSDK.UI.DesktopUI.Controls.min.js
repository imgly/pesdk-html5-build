!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"],"photoeditorsdk"],e):"object"==typeof exports?exports._unexposedPESDK=e(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):t._unexposedPESDK=e(t.PhotoEditorSDK.UI.DesktopUI,t.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=81)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});for(var o="undefined"==typeof window?t:window,r=o.requestAnimationFrame,i=o.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],c=0;c<s.length&&!r;++c)r=o[s[c]+"RequestAnimationFrame"],i=o[s[c]+"CancelAnimationFrame"]||o[s[c]+"CancelRequestAnimationFrame"];r&&(r=r.bind(o)),i&&(i=i.bind(o)),r||(r=function(t,e){var n=(new Date).getTime(),o=Math.max(0,16-(n-a)),r=setTimeout(function(){t(n+o)},o);return a=n+o,r}),i||(i=function(t){clearTimeout(t)})}).call(e,n(4))},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),p=s.Math.Vector2,u=void 0;s.Operations.SpriteOperation&&(u=s.Operations.SpriteOperation.TextSprite);var h=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onSpriteUpdate","_onTakeToFront","_onFlipHorizontally","_onDuplicate","_onDelete"),s}return a(e,t),e.prototype.componentDidMount=function(){this.props.sprite.on("update",this._onSpriteUpdate)},e.prototype.componentWillUnmount=function(){this.props.sprite.off("update",this._onSpriteUpdate)},e.prototype.componentWillReceiveProps=function(t){this.props.sprite.off("update",this._onSpriteUpdate),t.sprite.on("update",this._onSpriteUpdate)},e.prototype._onSpriteUpdate=function(){this.forceUpdate()},e.prototype._onTakeToFront=function(t){t.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront(t)},e.prototype._onFlipHorizontally=function(t){t.stopPropagation(),this.props.onFlipHorizontally&&this.props.onFlipHorizontally(t)},e.prototype._onDelete=function(t){t.stopPropagation(),this.props.onDelete&&this.props.onDelete(t)},e.prototype._onDuplicate=function(t){t.stopPropagation(),this.props.onDuplicate&&this.props.onDuplicate(t)},e.prototype._onBeforeScale=function(){},e.prototype._onScale=function(t){},e.prototype._onRotateDragStart=function(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onRotateDrag=function(t,e){var n=this.context.editor,o=this.props.sprite,r=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),i=r.clone(),a=e.clone().subtract(this._containerOffset).subtract(i),s=Math.atan2(a.y,a.x)-Math.PI/2,c=this.props,l=c.snapRotation,p=c.snapRotationTolerance,u=Math.round(180*s/Math.PI),h=Math.round(u/l)*l,d=u-h;Math.abs(d)<p&&(s=h*Math.PI/180),o.setRotation(s),n.render(),this.forceUpdate()},e.prototype._onRotateDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onCornerDragStart=function(t,e,n,o){var r=this.context.editor,i=this.props.sprite,a=i.getDimensions(r.getSDK(),r.getOutputDimensions()),s=a.x;this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var c=i.getPivot(),l=i.getAnchor(),u=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),h=i.getDimensions(r.getSDK(),r.getOutputDimensions()),d=new p(h.width,h.height),f=u.clone().subtract(d.clone().multiply(l)).add(d.clone().multiply(c)).round(),m=o.clone().subtract(this._containerOffset).subtract(f);this._initialScaleSettings={width:s,mouseDistanceFromPivot:m},this._onBeforeScale(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onCornerDrag=function(t){var e=this.context.editor,n=this.props.sprite,o=n.getRotation(),r=this._initialScaleSettings,i=r.width,a=r.mouseDistanceFromPivot,s=a.clone().add(t),c=Math.cos(o),l=Math.sin(o),p=Math.max(Math.abs(2*(s.x*c+s.y*l)),this.constructor.MIN_WIDTH),u=p/i;e.render(),this._onScale(u)},e.prototype._onCornerDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._isDraggingDisabled=function(){return!this.props.selected},e.prototype._onDragStart=function(){var t=this.props.sprite;this._initialPosition=t.getPosition(),this.props.onBeforeChange&&this.props.onBeforeChange()},e.prototype._onDrag=function(t){var e=this.props.sprite,n=this.context.editor,o=n.getOutputDimensions(),r=this._initialPosition.clone().add(t.divide(o));e.setPosition(r),n.render(),this.forceUpdate()},e.prototype._onDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange()},e.prototype._getAbsoluteSpritePosition=function(){var t=this.context.editor,e=t.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(e)},e.prototype._getContainerStyle=function(){return{}},e.prototype._renderKnobs=function(){var t=this,e=[];return["top","bottom"].forEach(function(n){["left","right"].forEach(function(r){var i=n+"-"+r,a=o({},i,!0);e.push(c.React.createElement(c.DraggableComponent,{key:i,onStart:t._onCornerDragStart.bind(t,n,r),onDrag:t._onCornerDrag,onStop:t._onCornerDragStop},c.React.createElement(_,a)))})}),e},e.prototype._getSpriteDimensions=function(){var t=this.context.editor,e=this.props.sprite,n=t.getOutputDimensions();return e.getDimensions(t.getSDK(),n)},e.prototype._getOverlayPosition=function(){var t=this.context.editor,e=this.props.sprite,n=t.getOutputDimensions(),o=this._getSpriteDimensions(),r=e.getPosition().clone().multiply(n),i=e.getRotation(),a=Math.sin(i),s=Math.cos(i),c=new p(Math.abs(o.x*s)+Math.abs(o.y*a),Math.abs(o.x*a)+Math.abs(o.y*s));return new p(r.x,r.y-c.y/2-70).clamp(new p(80,20),n.clone().subtract(80,70))},e.prototype._renderOverlayControls=function(){if(this.props.selected)return c.React.createElement(c.CanvasOverlayControlsComponent,{takeToFront:!0,flipHorizontally:!(this.props.sprite instanceof u),duplicate:!0,delete:!0,position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete})},e.prototype._getItemControlsProps=function(){return{}},e.prototype.render=function(){var t=this,e=this.props,n=e.selected,o=e.sprite,r=this.state.editing,i=!r,a=[this._renderKnobs(),c.React.createElement(g,{key:"rotateControls"},c.React.createElement(c.DraggableComponent,{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},c.React.createElement(b,null)))],s=this._getItemControlsProps(),p=c.React.createElement(m,l({style:this._getContainerStyle()},s),a);return c.React.createElement(c.DraggableComponent,{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},c.React.createElement(d,{onClick:this.props.onClick,"data-type":o.constructor.type,"data-selected":n,className:void 0},this._renderOverlayControls(),c.React.createElement(f,{style:this._getContainerStyle(),editing:n&&r,innerRef:function(e){t._container=e},className:void 0},c.React.createElement(y,null,this._renderContent()),n&&!i&&a),n&&i&&p))},e}(c.BaseComponent);h.contextTypes=c.BaseComponent.contextTypes,h.MIN_WIDTH=1,h.defaultProps={snapRotation:90,snapRotationTolerance:5},e.a=h;var d=c.adonis.div("120drhm","OuterContainer"),f=c.adonis.div("bkf7u8",{editing:"64zghi"},"Container"),m=c.adonis.div("36haff","ItemControls"),y=c.adonis.div("120drhm","Content"),g=c.adonis.div("77tiy3","RotateControl"),v=c.adonis.div("mznefm","Knob"),b=Object(c.adonis)(v)("1en5760","RotateKnob"),_=Object(c.adonis)(v)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this;return function(){if(t.substr(0,5),!0)return Promise.resolve([t,t])}().then(function(t){var n=o(t,2),r=n[0],i=n[1];return e._createAndLoadImage(r,i)})},_createAndLoadImage:function(t,e){return new Promise(function(t,n){var o=new window.Image;o.addEventListener("load",function(){t(o)}),o.addEventListener("error",function(){n(new Error("Failed to load image at "+e))}),o.crossOrigin="Anonymous",o.src=e})},loadXHR:function(t,e){return new Promise(function(n,o){var r=void 0;window.XDomainRequest?(r=new window.XDomainRequest,e&&r.overrideMimeType(e),r.onload=function(){n(r)},r.onerror=function(t){o(t)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,e&&r.overrideMimeType(e),r.onreadystatechange=function(t){4===r.readyState&&(200===r.status?n(r):o(new Error("HTTP Status "+r.status)))}),r.open("GET",t,!0),r.send()})}}},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(7)),p=n(8),u=n(9),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},d=s.Math.Vector2,f=function(t){function e(){var n;r(this,e);for(var a=arguments.length,l=Array(a),p=0;p<a;p++)l[p]=arguments[p];var u=i(this,t.call.apply(t,[this].concat(l)));return u._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform"),u._events=(n={},o(n,c.Constants.EVENTS.ZOOM_DONE,u._onZoomDone),o(n,c.Constants.EVENTS.WINDOW_RESIZE,u._onWindowResize),o(n,c.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),o(n,c.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),n),u.state=s.Utils.extend(u.state,{visible:!1,canvasClickDisabled:!1}),u}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.forceUpdate()},e.prototype._onAfterTransform=function(t){var e="sprite-transform-"+t.getId();this.props.controls.addLocalHistorySnapshot(e,!0)},e.prototype._onHistoryChange=function(){var t=this.getSharedState("operation");if(t){var e=this.getSharedState("selectedSprite");-1===t.getSprites().indexOf(e)&&this._selectNextSprite()}},e.prototype._onWindowResize=function(){var t=this;this.context.editor.once("rendered",function(){t.forceUpdate()})},e.prototype._onZoomDone=function(){this.context.editor.render(),this.setState({visible:!0})},e.prototype._onItemBlur=function(){},e.prototype._onCanvasClick=function(t){if(!this.state.canvasClickDisabled){this._performHitTest(c.Utils.getEventPosition(t))||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.context.screen.switchToControls("default"))}},e.prototype._onSpriteDelete=function(t){this.getSharedState("operation").removeSprite(t),t.dispose(),this._selectNextSprite(),this.props.controls.addLocalHistorySnapshot("sprite-deletion",!1),this.context.editor.render()},e.prototype._onSpriteTakeToFront=function(t){this.getSharedState("operation").takeSpriteToFront(t),this.props.controls.addLocalHistorySnapshot("sprite-order",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteFlipHorizontally=function(t,e){e.stopPropagation(),t.setFlipHorizontally(!t.getFlipHorizontally()),this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteDuplicate=function(t,e){e.stopPropagation();var n=this.getSharedState("operation"),o=t.serializeOptions();delete o.id,delete o.type,t.hasOption("image")&&(o.image=t.getImage());var r=n.getInputDimensions();o.position.add(new d(10,10).divide(r));var i=this._createSprite(o);n.addSprite(i),this.setSharedState({selectedSprite:i}),this.props.controls.addLocalHistorySnapshot("sprite-creation",!1),this.context.editor.render()},e.prototype._selectNextSprite=function(){var t=this.getSharedState("operation"),e=t.getSprites(),n=e[e.length-1];n?this.setSharedState({selectedSprite:n}):(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default"))},e.prototype._getComponentTypeForSprite=function(t){var e=s.Operations.SpriteOperation;switch(t.constructor){case e.StickerSprite:return l.a;case e.TextSprite:return p.a;case e.BrushSprite:return u.a}},e.prototype._getPropsForSprite=function(t){var e={};return e.hideContent=!0,e},e.prototype._renderSpriteItems=function(t){var e=this,n=this.getSharedState("selectedSprite");return t.map(function(t){var o=e._getComponentTypeForSprite(t),r=e._getPropsForSprite(t),i=n===t;return c.React.createElement(o,h({sprite:t,selected:i,onClick:e._onCanvasClick,onAfterChange:e._onAfterTransform.bind(e,t),onCanvasClickDisabled:e._onCanvasClickDisabled,onCanvasClickEnabled:e._onCanvasClickEnabled,onDelete:e._onSpriteDelete.bind(e,t),onTakeToFront:e._onSpriteTakeToFront.bind(e,t),onFlipHorizontally:e._onSpriteFlipHorizontally.bind(e,t),onDuplicate:e._onSpriteDuplicate.bind(e,t),snapRotation:e.props.options.snapRotation,snapRotationTolerance:e.props.options.snapRotationTolerance,canvasControls:e,key:t.getId()},r))})},e.prototype._renderOverlayControls=function(){return null},e.prototype._renderControls=function(){var t=this;if(this.state.visible){var e=this.getSharedState("operation"),n=e.getSprites(),o=this._container&&this._getContainerStyle();return c.React.createElement(m,{className:void 0},c.React.createElement(y,{innerRef:function(e){t._innerContainer=e},style:o,className:void 0},!this.state.canvasClickDisabled&&c.React.createElement(g,{onClick:this._onCanvasClick}),c.React.createElement("div",null,this._renderSpriteItems(n),this._renderOverlayControls())))}},e}(c.CanvasControlsComponent);f.contextTypes=c.CanvasControlsComponent.contextTypes,e.a=f;var m=c.adonis.div("120drhm","CanvasControls"),y=c.adonis.div("1anj0of","Container"),g=c.adonis.div("o35414","ClickHandlerForInternetExplorer")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),c=n(5),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={renderAsSVG:!1,svgAttributes:{}},s}return i(e,t),e.prototype.componentDidMount=function(){var e=this;if(t.prototype.componentDidMount.call(this),this.props.hideContent)return null;var n=this.props.sprite;n.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&"none"!==n.getTintMode()&&c.a.loadXHR(n.getImage().src,"image/svg+xml").then(function(t){for(var n=t.responseXML.documentElement.attributes,o={},r=0;r<n.length;r++){var i=n[r],a=i.name,s=i.value;"xmlns:xlink"===a&&(a="xmlnsXlink"),o[a]=s}var c=t.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];c=c.replace(/\s+?fill=["'].*?["']/gi,""),e.setState({renderAsSVG:!0,svgContent:c,svgAttributes:o})})},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={dimensions:t.getDimensions().clone()}},e.prototype._onScale=function(t){var e=this.context.editor,n=this._initialOptions.dimensions;this.props.sprite.set({dimensions:n.clone().multiply(t/e.zoom.level)}),this.forceUpdate(),e.render()},e.prototype._getSpriteDimensions=function(){var t=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(t.zoom.level)},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.props.sprite,o=n.getPosition().clone().multiply(e),r=180*n.getRotation()/Math.PI,i="rotateZ("+r.toFixed(2)+"deg)",a=n.getDimensions().clone().multiply(t.zoom.level);return{width:a.x,height:a.y,left:o.x,top:o.y,marginLeft:-.5*a.x,marginTop:-.5*a.y,transform:i,MozTransform:i,msTransform:i,WebkitTransform:i,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getContentStyle=function(){var t=this.props.sprite,e="rotateY("+(t.getFlipHorizontally()?180:0)+"deg) rotateX("+(t.getFlipVertically()?180:0)+"deg)",n={opacity:t.getAlpha(),transform:e,MozTransform:e,msTransform:e,WebkitTransform:e};return this.state.renderAsSVG&&(n.fill=t.getTintColor().toRGBA()),n},e.prototype._renderContent=function(){if(this.props.hideContent)return null;var t=this.props.sprite,e=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(h,l({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},e)):React.createElement(u,{src:t.getImage().src,style:this._getContentStyle()})},e}(s.a);p.contextTypes=s.a.contextTypes,p.MIN_WIDTH=s.a.MIN_WIDTH,e.a=p;var u=a.adonis.img("1ssoezr","Image"),h=a.adonis.svg("1ssoezr","SVGImage")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(3)),p=s.Math.Vector2,u=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop"),s.state={editing:!1,updateBecauseIESucks:!1},s}return a(e,t),e.prototype._isDraggingDisabled=function(){return t.prototype._isDraggingDisabled.call(this)||this.state.editing},e.prototype.enterEditMode=function(){var t=this,e=this.context.editor,n=this.props.sprite;n.setVisible(!1),e.render(),this.setState({editing:!0},function(){n._edited||(n.setText(""),t._textField.value="",n._edited=!0,t.forceUpdate()),t._textField.focus(),t._textField.select()})},e.prototype.leaveEditMode=function(){var t=this.context.editor;this.props.sprite.setVisible(!0),t.render(),this.setState({editing:!1})},e.prototype.shouldComponentUpdate=function(){return!0},e.prototype._onTakeToFront=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=t.prototype._onTakeToFront).call.apply(e,[this].concat(o))},e.prototype._onFlipHorizontally=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=t.prototype._onFlipHorizontally).call.apply(e,[this].concat(o))},e.prototype._onDuplicate=function(){var e;this.leaveEditMode();for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=t.prototype._onDuplicate).call.apply(e,[this].concat(o))},e.prototype._onSpriteUpdate=function(e,n){var o=this;c.Utils.Browser.isIElte(10)&&n.alignment&&e.getAlignment()!==n.alignment&&this.setState({updateBecauseIESucks:!0},function(){Object(c.requestAnimationFrame)(function(){o.setState({updateBecauseIESucks:!1})})}),t.prototype._onSpriteUpdate.call(this)},e.prototype._onWidthDragStart=function(t,e,n){var o=this.context.editor,r=this.props.sprite,i=r.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var a=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),s=r.getDimensions(o.getSDK(),o.getOutputDimensions()),c=new p(s.width,s.height),l=a.clone().subtract(c.clone().multiply(i)).add(c.clone().multiply(.5)).round(),u=n.clone().subtract(this._containerOffset).subtract(l);this._initialScaleSettings={maxWidth:r.getMaxWidth(),mouseDistanceFromCenter:u},this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onWidthDrag=function(t){var e=this.props.sprite,n=e.getRotation(),o=this._initialScaleSettings.mouseDistanceFromCenter,r=o.clone().add(t),i=Math.cos(n),a=Math.sin(n),s=Math.max(Math.abs(2*(r.x*i+r.y*a)),50)/this._imageBoundingBox.width;e.setMaxWidth(s),this.context.editor.render()},e.prototype._onWidthDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onBlur=function(){this.leaveEditMode();var t=this.props.sprite;t&&""===t.getText()&&(t.setText(this._t("editor.controls.text.defaultText")),t._edited=!1)},e.prototype._onTextChange=function(t){this.props.sprite.setText(t.target.value),this.forceUpdate()},e.prototype._onItemDoubleClick=function(){this.props.selected&&this.enterEditMode()},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={maxWidth:t.getMaxWidth(),fontSize:t.getFontSize()}},e.prototype._onScale=function(t){var e=this._initialOptions,n=e.maxWidth,o=e.fontSize,r=this.props.sprite;r.set({maxWidth:n*t,fontSize:o*t}),this.context.mediator.emit(c.Constants.EVENTS.TEXT_SCALED,r),this.forceUpdate()},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this.props.sprite,o=n.getPosition().clone().multiply(e),r=180*n.getRotation()/Math.PI,i="rotateZ("+r.toFixed(2)+"deg)",a=n.getMaxWidth()*e.x,s=n.getDimensions(t.getSDK(),e).y;return{width:a,height:s,left:o.x,top:o.y,marginLeft:-.5*a,marginTop:-.5*s,transform:i,MozTransform:i,msTransform:i,WebkitTransform:i,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getTextStyle=function(){var t=this.context.editor,e=this.props.sprite,n=t.getSDK(),o=t.getOutputDimensions(),r=e.getDOMStyle(n,o),i=this._getAbsoluteSpritePosition(),a=e.getDimensions(n,o);return r.height=Math.min(a.y,o.y-i.y+a.y/2),r},e.prototype._renderKnobs=function(){var e=this,n=t.prototype._renderKnobs.call(this);return["left","right"].forEach(function(t){var r="width-"+t,i=o({},t,!0);n.push(c.React.createElement(c.DraggableComponent,{key:r,onStart:e._onWidthDragStart.bind(e,t),onDrag:e._onWidthDrag,onStop:e._onWidthDragStop},c.React.createElement(f,i)))}),n},e.prototype._getItemControlsProps=function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}},e.prototype._renderContent=function(){var t=this,e=this.props,n=e.sprite,o=e.selected,r=this.state,i=r.editing,a=r.updateBecauseIESucks,s=[];return this.props.hideContent&&!this.state.editing||s.push(c.React.createElement(h,{key:"text-field",editing:i,innerRef:function(e){t._textField=e},style:this._getTextStyle(),defaultValue:n.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:a})),this.state.editing||s.push(c.React.createElement(d,{key:"disabled-overlay",className:void 0,selected:o})),s},e}(l.a);u.contextTypes=l.a.contextTypes,u.MIN_WIDTH=100,e.a=u;var h=c.adonis.textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField"),d=c.adonis.div("8gacw5","DisabledOverlay"),f=c.adonis.div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.props.sprite.getCanvas();this._brush&&this._appendCanvas(e)},e.prototype.componentWillReceiveProps=function(t){if(t.sprite!==this.props.sprite){var e=this.props.sprite.getCanvas();if(e.parentNode.removeChild(e),this._brush){var n=t.sprite.getCanvas();this._appendCanvas(n)}}},e.prototype._appendCanvas=function(t){t.style.width="100%",t.style.height="100%",this._brush.appendChild(t)},e.prototype._renderOverlayControls=function(){return null},e.prototype.render=function(){var t=this;return this.props.hideContent?null:a.React.createElement(l,{innerRef:function(e){t._brush=e}})},e}(s.a);e.a=c;var l=a.adonis.div("8gacw5","BrushItem")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(2),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t),this._queue=[],this._pendingPromises=0,this._maxConcurrency=e,this._maxQueueLength=n,this._minDelay=i,this._tick=this._tick.bind(this),this._lastPromiseDone=Date.now(),this._running=!0,this._animationFrameRequest=null,Object(r.b)(this._tick)}return t.prototype._tick=function(){if(this._running){Date.now()-this._lastPromiseDone>this._minDelay&&this._pendingPromises<this._maxConcurrency&&this._queue.length&&this._dequeue(),this._animationFrameRequest=Object(r.b)(this._tick)}},t.prototype.add=function(t){var e=this;return new Promise(function(n,o){if(e._queue.length>=e._maxQueueLength)return o(new Error("Max queue length reached"));e._queue.push({fn:t,resolve:n,reject:o})})},t.prototype._promisify=function(t){return void 0!==t&&"function"==typeof t.then?t:Promise.resolve(t)},t.prototype._dequeue=function(){var t=this,e=this._queue.shift(),n=Date.now();this._pendingPromises++;try{this._promisify(e.fn()).then(function(o){t._lastPromiseDone=n,t._pendingPromises--,e.resolve(o)}).catch(function(o){t._lastPromiseDone=n,t._pendingPromises--,e.reject(o)})}catch(t){this._lastPromiseDone=n,this._pendingPromises--,e.reject(t)}return!0},t.prototype.dispose=function(){this._running=!1,this._animationFrameRequest&&Object(r.a)(this._animationFrameRequest)},t}();e.a=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItem),c=a.ControlsStyles.PlainControlItemBackground,l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),s._dragCounter=0,s.state={dropZoneHovered:!1},s}return i(e,t),e.prototype._onWebcamClick=function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()},e.prototype._onImage=function(t){this.props.onImage&&this.props.onImage(t)},e.prototype._onDropZoneClick=function(){this.refs.upload.open()},e.prototype._onDropZoneDragEnter=function(t){t.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})},e.prototype._onDropZoneDragLeave=function(t){t.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})},e.prototype._onDropZoneDragOver=function(t){t.preventDefault()},e.prototype._onDropZoneDrop=function(t){var e=this;t.stopPropagation(),t.preventDefault(),t=t.nativeEvent,t.returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(t.target||t.dataTransfer){var n=t.target.files||t.dataTransfer.files;if(n&&!(n.length<=0))return n[0].type.match(/^image\//i)?void e._handleFile(n[0]):a.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.invalidFileType.text",{fileType:n[0].type}))}})},e.prototype._handleFile=function(t){var e=this,n=new window.FileReader;n.onload=function(){return function(t){var n=t.target.result,o=new window.Image;o.addEventListener("load",function(){e._onImage(o)}),o.addEventListener("error",function(t){return a.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.imageLoadingError.text"))}),o.src=n}}(),n.readAsDataURL(t)},e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return a.React.createElement(p,null,a.React.createElement(a.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),a.React.createElement(u,null,a.React.createElement(h,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&a.React.createElement(d,{style:t,className:void 0,onClick:this._onWebcamClick})))},e}(a.BaseComponent);e.a=l;var p=Object(a.adonis)(s).li("fujban","Container"),u=Object(a.adonis)(c).div("17hsmc4","Background"),h=a.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),d=a.adonis.div("1y2fyfw","WebcamButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItem),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onStickerClick=function(t){this.props.onStickerClick&&this.props.onStickerClick(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.stickers,n=void 0,o=this.getSharedState("selectedSprite");return o&&(n=o.getIdentifier()),e.map(function(e){var o=a.StickerManager.getURLForSticker(e,"thumb"),r=t._getAssetPath(o),i={background:"url('"+r+"') no-repeat center center",backgroundSize:"contain"};return a.React.createElement(p,{selected:e.identifier===n,key:e.identifier,onClick:t._onStickerClick.bind(t,e),className:void 0,threeColumns:!0},a.React.createElement(u,{style:i}))})},e.prototype.render=function(){return a.React.createElement(l,null,this._renderListItems())},e}(a.SharedStateComponent);c.contextTypes=a.SharedStateComponent.contextTypes,e.a=c;var l=a.adonis.ul("18qztam","StickerList"),p=Object(a.adonis)(s).li("m4lnou","StickerListItem"),u=a.adonis.div("7r0ke8","StickerImage")},function(t,e,n){"use strict";var o=n(1),r=(n.n(o),o.Engine.Filters.OverlayFilter);e.a={normal:r.BLEND_MODES.NORMAL,overlay:r.BLEND_MODES.OVERLAY,hardLight:r.BLEND_MODES.HARD_LIGHT,softLight:r.BLEND_MODES.SOFT_LIGHT,multiply:r.BLEND_MODES.MULTIPLY,darken:r.BLEND_MODES.DARKEN,lighten:r.BLEND_MODES.LIGHTEN,screen:r.BLEND_MODES.SCREEN,colorBurn:r.BLEND_MODES.COLOR_BURN}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(15),l=n(21),p=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.shouldKeepChanges=function(){var t=this,e=this.context,n=e.editor,o=e.ui;return void 0===this.keepChanges&&!n.isShallow&&n.history.isUndoAvailable()?new Promise(function(e,n){a.ModalManager.instance.displayWarning(o.translate("warnings.discardChanges.title"),o.translate("warnings.discardChanges.text"),[o.translate("warnings.discardChanges.buttons.keep"),o.translate("warnings.discardChanges.buttons.discard")],!0).on("button",function(n){var o=0===n;t.keepChanges=o,e(o)})}):Promise.resolve(this.keepChanges)},e.prototype.onImage=function(t){var e=this;this.shouldKeepChanges().then(function(n){if(e._options.switchScreenOnImage)e.context.options.editor.image=t,e.context.appComponent.switchToScreen("editor");else{e.context.editor.setImage(t,!n)}e.sharedState.get("webcamEnabled")&&(e.sharedState.set({webcamEnabled:!1}),e.context.screen.switchToControls("default"))})},e.prototype._onEnter=function(){this.sharedState.set({webcamEnabled:!1})},e.hasLibraryProvider=function(t){var e=t.getOptions().editor.controlsOptions;if(void 0===e.library)return!0;var n=e.library;return!!(n.provider||n.enableWebcam||n.enableUpload)},e.isEnabled=function(t){return e.hasLibraryProvider(t)&&t.isToolEnabled("library")},e}(a.BaseControls);p.clickAtPosition=a.BaseControls.clickAtPosition,p.getPreloadAssets=a.BaseControls.getPreloadAssets,p.identifier="library",p.controlsComponent=c.a,p.canvasControlsComponent=l.a,p.iconPath="editor/controls/library/icon.png",p.activeIconPath="editor/controls/library/icon-active.png",p.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},e.default=p,s.a.Controls.LibraryControls=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(16)),c=n(18),l=n(20),p={ROOT:0,SEARCH:1},u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i))),c=s.props.options.provider;return c&&(s._library=new c),s._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),s.state.currentPanel=p.ROOT,s.state.searchQuery="",s}return i(e,t),e.prototype._onBackButtonClick=function(){this.setState({currentPanel:p.ROOT,searchQuery:"",backButton:!1})},e.prototype._onCategorySelect=function(t){this.setState({currentPanel:p.SEARCH,searchQuery:t.getName(),backButton:!0})},e.prototype._onImageSelect=function(t){var e=this;this.setSharedState({webcamEnabled:!1});var n=new window.Image,o=void 0,r=setTimeout(function(){o=a.ModalManager.instance.displayLoading(e._t("loading.loading"))},200);n.addEventListener("load",function(){o&&o.close(),r&&(clearTimeout(r),r=null),e.props.controls.onImage(n)}),n.addEventListener("error",function(){o&&o.close(),r&&(clearTimeout(r),r=null),a.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.imageLoadingError.text"))}),n.crossOrigin="Anonymous",n.src=t.getRawUrl()},e.prototype._onSearchQueryChange=function(t){this.setState({searchQuery:t,currentPanel:p.SEARCH})},e.prototype._onWebcamActivated=function(t){this.setSharedState({webcamEnabled:!0})},e.prototype.fixStyles=function(){var e=this;if(this._list)return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(a.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype._renderCurrentPanel=function(){var t=this;switch(this.state.currentPanel){case p.ROOT:return a.React.createElement(s.a,{controls:this.props.controls,innerRef:function(e){t._list=e},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case p.SEARCH:return a.React.createElement(c.a,{innerRef:function(e){t._list=e},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!1}},e.prototype._renderContent=function(){var t=[];return this._library&&t.push(a.React.createElement(l.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),t.push(this._renderCurrentPanel()),t},e}(a.ControlsComponent);u.contextTypes=a.ControlsComponent.contextTypes,u.propTypes=a.ControlsComponent.propTypes,u.RootElement=a.ControlsComponent.RootElement,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(17)),c=n(11),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onImage"),s.state={loading:!0,categories:[]},s}return i(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(a.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadCategories()},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0},e.prototype._onCategoryClick=function(t){this.props.onCategorySelect&&this.props.onCategorySelect(t)},e.prototype._onImage=function(t){this.props.controls.onImage(t)},e.prototype._loadCoverImages=function(t){var e=this,n=this.context.theme,o=t.map(function(t){return{fn:function(){return t.loadCoverImage()},index:t}});this._loadCoverImagesQueue=new a.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(t){e._disposed||(e.forceUpdate(),e._scrollbar.update())}),this._loadCoverImagesQueue.start()},e.prototype._loadCategories=function(){var t=this;return this.props.library?this.props.library.getCategories().then(function(e){t._loadCoverImages(e),t.setState({loading:!1,categories:e})}):(this.setState({loading:!1,categories:[]}),Promise.resolve())},e.prototype._renderListItems=function(){var t=this;return this.state.categories.map(function(e){return a.React.createElement(s.a,{key:e.getName(),category:e,visible:e.isCoverImageLoaded(),onClick:t._onCategoryClick.bind(t,e)})})},e.prototype.render=function(){var t=this;if(this.state.loading)return a.React.createElement(a.LoadingIndicatorComponent,null);var e=this.props.options,n=e.enableUpload,o=e.displayUploadInCanvas,r=this.props.innerRef;return a.React.createElement(p,{innerRef:function(e){r&&r(e),t._wrapper=e},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement(u,null,n&&!o&&a.React.createElement(c.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))},e}(a.BaseComponent);e.a=l;var p=a.adonis.div("rfecls","RootPanelWrapper"),u=a.adonis.ul("5jg0ou","CategoryList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.ControlItem),c=a.ControlsStyles.ControlItemTitle,l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.category,n=t.onClick,o=t.visible,r={backgroundImage:"url('"+e.getCoverImage()+"')"};return a.React.createElement(p,{animated:!0,style:r,visible:o,className:void 0,onClick:n},a.React.createElement(u,null,e.getName()))},e}(a.BaseComponent);e.a=l;var p=Object(a.adonis)(s).li("prcvvt","ListItem"),u=Object(a.adonis)(c).div("1ler8h7","ListItemTitle")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(19)),c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={loading:!0,images:[]},s}return i(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(a.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadImages(this.props.searchQuery)},e.prototype.componentWillReceiveProps=function(t){this.props.searchQuery!==t.searchQuery&&this._loadImages(t.searchQuery)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0},e.prototype._onImageClick=function(t){this.props.onImageSelect&&this.props.onImageSelect(t)},e.prototype._loadThumbs=function(t){var e=this,n=this.context.theme,o=t.map(function(t){return{fn:function(){return t.loadThumb()},index:t}});this._loadThumbsQueue=new a.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(t){e._disposed||(e.forceUpdate(),e._scrollbar&&e._scrollbar.update())}),this._loadThumbsQueue.start()},e.prototype._loadImages=function(t){var e=this;return t.trim()||this.setState({loading:!1,images:[]},function(){return e._scrollbar&&e._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(t).then(function(t){e._loadThumbs(t),e.setState({loading:!1,images:t},function(){return e._scrollbar.update()})})},e.prototype._renderListItems=function(){var t=this,e=this.context.editor,n=e.getImage();return 0===this.state.images.length?a.React.createElement(u,null,this._t("editor.controls.library.noResults")):this.state.images.map(function(e){return a.React.createElement(s.a,{key:e.getThumbUrl(),image:e,selected:e.getRawUrl()===(n&&n.src),visible:e.isThumbLoaded(),onClick:t._onImageClick.bind(t,e)})})},e.prototype.render=function(){var t=this;if(this.state.loading)return a.React.createElement(a.LoadingIndicatorComponent,null);var e=this.props.innerRef;return a.React.createElement(l,{innerRef:function(n){e&&e(n),t._wrapper=n},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement(p,null,this._renderListItems())))},e}(a.BaseComponent);e.a=c;var l=a.adonis.div("rfecls","RootPanelWrapper"),p=a.adonis.ul("5jg0ou","ImageList"),u=a.adonis.div("6kl290","NoResultsText")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.ControlItem),c=a.ControlsStyles.ControlItemActiveOverlay,l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={isPortrait:!1,hovered:!1},s}return i(e,t),e.prototype.componentWillReceiveProps=function(t){if(this.props.visible!==t.visible){var e=this.props.image.getThumbImage();e.height>e.width&&this.setState({isPortrait:!0})}},e.prototype.render=function(){var t=this,e=this.props,n=e.image,o=e.onClick,r=e.selected,i=e.visible,s={backgroundImage:"url('"+n.getThumbUrl()+"')"},c=n.getAuthorAvatar(),l=this.context.theme.transitionDuration,m=[void 0,r&&"is-selected"].filter(function(t){return t});return a.React.createElement(p,{animated:!0,style:s,selected:r,visible:i,className:m.join(" "),onClick:o,portrait:this.state.isPortrait,onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}},a.React.createElement(a.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},a.React.createElement(f,{selected:r},c&&a.React.createElement(h,{src:c}),a.React.createElement(d,null,n.getAuthorName()))),a.React.createElement(a.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},a.React.createElement(u,{selected:!0})))},e}(a.BaseComponent);e.a=l;var p=Object(a.adonis)(s).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),u=Object(a.adonis)(c).div("120drhm","ListItemOverlay"),h=a.adonis.img("1owxkzt","AuthorAvatar"),d=a.adonis.div("1jylqsv","AuthorName"),f=a.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),250),c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),c=0;c<n;c++)i[c]=arguments[c];var l=r(this,t.call.apply(t,[this].concat(i)));return l._bindAll("_onInputChange"),l._onDebouncedInputChange=a.Utils.debounce(l._onDebouncedInputChange,s),l.state={searchQueryInputValue:""},l}return i(e,t),e.prototype.componentWillReceiveProps=function(t){this.props.searchQuery!==t.searchQuery&&this.setState({searchQueryInputValue:t.searchQuery})},e.prototype.componentWillUnmount=function(){this._disposed=!0},e.prototype._onDebouncedInputChange=function(t){this._disposed||this.props.onChange&&this.props.onChange(t)},e.prototype._onInputChange=function(t){var e=t.target.value;this.setState({searchQueryInputValue:e}),this._onDebouncedInputChange(e)},e.prototype.render=function(){return a.React.createElement(l,{key:"header"},a.React.createElement(p,null,a.React.createElement(u,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))},e}(a.BaseComponent);e.a=c;var l=a.adonis.div("1tkmkv6","Header"),p=a.adonis.div("mz0a5q","InputContainer"),u=Object(a.adonis)(a.TextInputComponent)("py3uvl","TextInput")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(22)),c=n(34),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),s.state.displayHeader=!1,s}return i(e,t),e.prototype._onImage=function(t){this.props.controls.onImage(t)},e.prototype._onWebcamBack=function(){this.setSharedState({webcamEnabled:!1})},e.prototype._onWebcamActivated=function(t){this.setSharedState({webcamEnabled:!0})},e.prototype._renderControls=function(){var t=this.getSharedState("webcamEnabled"),e=this.props.options.displayUploadInCanvas;return t?a.React.createElement(s.a,{onImage:this._onImage,onBack:this._onWebcamBack}):e?a.React.createElement(p,null,a.React.createElement(c.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0},e}(a.CanvasControlsComponent);l.contextTypes=a.CanvasControlsComponent.contextTypes,e.a=l;var p=a.adonis.div("1up9ikz","LibraryUploadContainer")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),n(23)),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick"),s.state={webcamReady:!1},s}return i(e,t),e.prototype._onWebcamReady=function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})},e.prototype._onWebcamError=function(t){var e=this;s.ModalManager.instance.displayError(this._t("errors.title"),this._t("errors.webcamUnavailable.text",{error:t})).on("close",function(){return e.props.onBack()})},e.prototype._onButtonClick=function(t){t.preventDefault(),this._takePhoto()},e.prototype._onCancelClick=function(t){t.preventDefault(),this.props.onBack&&this.props.onBack()},e.prototype._takePhoto=function(){var t=this;this.state.webcamReady&&this._webcam.capture().then(function(e){t.props.onImage&&t.props.onImage(e)})},e.prototype.render=function(){var t=this;return s.React.createElement(p,null,s.React.createElement(u,null,s.React.createElement(h,{onClick:this._onCancelClick},this._t("editor.cancel"))),s.React.createElement(d,null,s.React.createElement(f,{innerRef:function(e){t._videoContainer=e}},s.React.createElement(c.a,{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function(e){t._webcam=e},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),s.React.createElement(m,{onClick:this._onButtonClick}))))},e}(s.BaseComponent);e.a=l;var p=s.adonis.div("dehn6v","Container"),u=s.adonis.div("4d756t","Gradient"),h=s.adonis.div("1p4kwwq","CancelButton"),d=s.adonis.div("1j41msh","OuterVideoContainer"),f=s.adonis.div("1g72uw9","VideoContainer"),m=(s.adonis.video("1btv3tg",{visible:"jsuk9w"},"Video"),s.adonis.div("1fkab7z","Button"))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(24),s=n.n(a),c=n(29),l=n.n(c),p=n(0),u=(n.n(p),function(t){function e(n){o(this,e);var i=r(this,t.call(this,n));return i._bindAll("_onLoadedMetadata"),i.state={webcamAvailable:!1,useFlashFallback:!1},i._getUserMedia=null,i._webcamStream=null,i}return i(e,t),e.prototype.componentDidMount=function(){var t=this;if(this._initGetUserMedia(),this._getUserMedia)this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:!1}).then(function(e){t._webcamStream=e;var n=t._videoElement;"srcObject"in n?n.srcObject=e:n.src=window.URL.createObjectURL(e)}).catch(function(e){t.props.onWebcamError&&t.props.onWebcamError(e)});else{var e=!1;window.Webcam||(window.Webcam={},e=!0),window.Webcam.flashNotify=function(n,o){switch(n){case"cameraLive":t.setState({webcamAvailable:!0},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()}),delete window.Webcam.flashNotify,e&&delete window.Webcam;break;case"error":t.props.onWebcamError&&t.props.onWebcamError(o),delete window.Webcam.flashNotify,e&&delete window.Webcam}}}},e.prototype.componentWillUnmount=function(){this._disposeWebcam()},e.prototype._initGetUserMedia=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),!this._getUserMedia){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t&&(this._getUserMedia=function(e){return new Promise(function(n,o){return t.call(navigator,e,n,o)})})}this._getUserMedia||this.setState({useFlashFallback:!0})},e.prototype._disposeWebcam=function(){if(this._webcamStream){var t=this._webcamStream,e=t.getTracks()[0];e?e.stop():t.stop&&t.stop()}else this._flashWebcam&&this._flashWebcam._releaseCamera()},e.prototype.capture=function(){var t=this;return this.state.webcamAvailable?this._videoElement&&!this._flashWebcam?new Promise(function(e,n){var o=t._videoElement;if(0===o.readyState)n(new Error("Webcam video not available"));else{var r=document.createElement("canvas");r.width=o.videoWidth,r.height=o.videoHeight;r.getContext("2d").drawImage(o,0,0);var i=new window.Image;i.addEventListener("load",function(){e(i)}),i.src=r.toDataURL("image/jpeg")}}):this._flashWebcam?new Promise(function(e,n){var o=t._flashWebcam._snap(),r=new Image;r.onload=function(){e(r)},r.src="data:image/jpeg;base64,"+o}):Promise.reject(new Error("Webcam video not available")):Promise.reject(new Error("Webcam video not available"))},e.prototype._getFlashFallbackComponent=function(){var t=this,e=this._container,n=e.offsetWidth,o=e.offsetHeight,r=640,i=480;o>n?(r=n||640,i=.75*n):(r=4/3*o,i=o||480);var a="width="+r+"&height="+i+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return l.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:r,height:i,ref:function(e){t._flashWebcam=e},align:"middle"},l.a.createElement("param",{name:"wmode",value:"transparent"}),l.a.createElement("param",{name:"allowScriptAccess",value:"always"}),l.a.createElement("param",{name:"allowFullScreen",value:"false"}),l.a.createElement("param",{name:"movie",value:this.props.flashURL}),l.a.createElement("param",{name:"loop",value:"false"}),l.a.createElement("param",{name:"menu",value:"false"}),l.a.createElement("param",{name:"quality",value:"best"}),l.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),l.a.createElement("param",{name:"flashvars",value:a}))},e.prototype._onLoadedMetadata=function(){var t=this;this.setState({webcamAvailable:!0},function(){t.props.onWebcamAvailable&&t.props.onWebcamAvailable()})},e.prototype.render=function(){var t=this,e=this.state.useFlashFallback?this._getFlashFallbackComponent():l.a.createElement(h,{autoPlay:!0,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function(e){t._videoElement=e},onLoadedMetadata:this._onLoadedMetadata});return l.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function(e){t._container=e}},e)},e}(p.BaseComponent));u.propTypes={flashURL:s.a.string,onWebcamAvailable:s.a.func,onWebcamError:s.a.func},e.a=u;var h=p.adonis.video("145pu2m",{visible:"jsuk9w"},"Video")},function(t,e,n){t.exports=n(25)()},function(t,e,n){"use strict";var o=n(26),r=n(27),i=n(28);t.exports=function(){function t(t,e,n,o,a,s){s!==i&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}},function(t,e,n){"use strict";function o(t){return function(){return t}}var r=function(){};r.thatReturns=o,r.thatReturnsFalse=o(!1),r.thatReturnsTrue=o(!0),r.thatReturnsNull=o(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";function o(t,e,n,o,i,a,s,c){if(r(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,o,i,a,s,c],u=0;l=new Error(e.replace(/%s/g,function(){return p[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(t){};t.exports=o},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";t.exports=n(30)},function(t,e,n){"use strict";function o(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,o=0;o<e;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);throw e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),e.name="Invariant Violation",e.framesToPop=1,e}function r(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||T}function i(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||T}function a(){}function s(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||T}function c(t,e,n){var o,r={},i=null,a=null;if(null!=e)for(o in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(i=""+e.key),e)I.call(e,o)&&!j.hasOwnProperty(o)&&(r[o]=e[o]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];r.children=c}if(t&&t.defaultProps)for(o in s=t.defaultProps)void 0===r[o]&&(r[o]=s[o]);return{$$typeof:C,type:t,key:i,ref:a,props:r,_owner:k.current}}function l(t){return"object"==typeof t&&null!==t&&t.$$typeof===C}function p(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function u(t,e,n,o){if(A.length){var r=A.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=o,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:o,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>A.length&&A.push(t)}function d(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case C:case O:case w:case E:a=!0}}if(a)return n(r,t,""===e?"."+f(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){i=t[s];var c=e+f(i,s);a+=d(i,c,n,r)}else if(null===t||void 0===t?c=null:(c=x&&t[x]||t["@@iterator"],c="function"==typeof c?c:null),"function"==typeof c)for(t=c.call(t),s=0;!(i=t.next()).done;)i=i.value,c=e+f(i,s++),a+=d(i,c,n,r);else"object"===i&&(n=""+t,o("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function f(t,e){return"object"==typeof t&&null!==t&&null!=t.key?p(t.key):e.toString(36)}function m(t,e){t.func.call(t.context,e,t.count++)}function y(t,e,n){var o=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?g(t,o,n,_.thatReturnsArgument):null!=t&&(l(t)&&(e=r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(M,"$&/")+"/")+n,t={$$typeof:C,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),o.push(t))}function g(t,e,n,o,r){var i="";null!=n&&(i=(""+n).replace(M,"$&/")+"/"),e=u(e,i,o,r),null==t||d(t,"",y,e),h(e)}/** @license React v16.2.0
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var v=n(31),b=n(32),_=n(33),S="function"==typeof Symbol&&Symbol.for,C=S?Symbol.for("react.element"):60103,O=S?Symbol.for("react.call"):60104,w=S?Symbol.for("react.return"):60105,E=S?Symbol.for("react.portal"):60106,R=S?Symbol.for("react.fragment"):60107,x="function"==typeof Symbol&&Symbol.iterator,T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&o("85"),this.updater.enqueueSetState(this,t,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},a.prototype=r.prototype;var D=i.prototype=new a;D.constructor=i,v(D,r.prototype),D.isPureReactComponent=!0;var P=s.prototype=new a;P.constructor=s,v(P,r.prototype),P.unstable_isAsyncReactComponent=!0,P.render=function(){return this.props.children};var k={current:null},I=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0},M=/\/+/g,A=[],B={Children:{map:function(t,e,n){if(null==t)return t;var o=[];return g(t,o,null,e,n),o},forEach:function(t,e,n){if(null==t)return t;e=u(null,null,e,n),null==t||d(t,"",m,e),h(e)},count:function(t){return null==t?0:d(t,"",_.thatReturnsNull,null)},toArray:function(t){var e=[];return g(t,e,null,_.thatReturnsArgument),e},only:function(t){return l(t)||o("143"),t}},Component:r,PureComponent:i,unstable_AsyncComponent:s,Fragment:R,createElement:c,cloneElement:function(t,e,n){var o=v({},t.props),r=t.key,i=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(i=e.ref,a=k.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)I.call(e,c)&&!j.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==s?s[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];o.children=s}return{$$typeof:C,type:t.type,key:r,ref:i,props:o,_owner:a}},createFactory:function(t){var e=c.bind(null,t);return e.type=t,e},isValidElement:l,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:k,assign:v}},F=Object.freeze({default:B}),U=F&&B||F;t.exports=U.default?U.default:U},function(t,e,n){"use strict";function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,c=o(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var p in n)i.call(n,p)&&(c[p]=n[p]);if(r){s=r(n);for(var u=0;u<s.length;u++)a.call(n,s[u])&&(c[s[u]]=n[s[u]])}}return c}},function(t,e,n){"use strict";var o={};t.exports=o},function(t,e,n){"use strict";function o(t){return function(){return t}}var r=function(){};r.thatReturns=o,r.thatReturnsFalse=o(!1),r.thatReturnsTrue=o(!0),r.thatReturnsNull=o(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(11)),c=a.ControlsStyles.PlainControlItem,l=a.ControlsStyles.PlainControlItemBackground,p=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return a.React.createElement(u,null,a.React.createElement(h,null,a.React.createElement(m,null,a.React.createElement(d,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},a.React.createElement(a.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&a.React.createElement(m,null,a.React.createElement(f,{style:t,className:void 0,onClick:this._onWebcamClick}))))},e}(s.a);e.a=p;var u=Object(a.adonis)(c).div("1xesje3","Container"),h=Object(a.adonis)(l).div("z914p5","Background"),d=a.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),f=a.adonis.div("1jg5y1q","WebcamButton"),m=a.adonis.div("15u7gri","Row")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(36),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("adjustments");this.sharedState.set({operation:e})},e.prototype._onOperationRemoved=function(t){t===this.sharedState.get("operation")&&this._onEnter()},e.isEnabled=function(t){return t.isToolAllowed("adjustment")&&t.isToolEnabled("adjustments")},e}(a.BaseControls);l.clickAtPosition=a.BaseControls.clickAtPosition,l.getPreloadAssets=a.BaseControls.getPreloadAssets,l.identifier="adjustments",l.controlsComponent=c.a,l.canvasControlsComponent=a.BaseControls.canvasControlsComponent,l.iconPath="editor/controls/adjustments/icon.png",l.activeIconPath="editor/controls/adjustments/icon-active.png",l.requiredOperations=["adjustments"],l.defaultOptions={availableAdjustments:null},e.default=l,s.a.Controls.AdjustmentsControls=l},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(37)),l=s.GroupedControlsStyles.ControlGroupList,p=[{identifier:"basics",items:["brightness","saturation","contrast","gamma"]},{identifier:"refinements",items:["clarity","exposure","shadows","highlights"]}],u=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var l=i(this,t.call.apply(t,[this].concat(a)));return l._bindAll("_onOperationUpdated","_onTabSwitch","_onResetDefaultClick"),l._events=o({},s.Constants.EVENTS.OPERATION_UPDATED,l._onOperationUpdated),l}return a(e,t),e.prototype._isAdjustmentAvailable=function(t){var e=this.props.options.availableAdjustments;return null===e||-1!==e.indexOf(t)},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onTabSwitch=function(){this._scrollbar.update()},e.prototype._onResetDefaultClick=function(){var t=this.getSharedState("operation");if(t.hasChanges()){t.resetOptions(),this.props.controls.addLocalHistorySnapshot();this.context.editor.render(),this.forceUpdate()}},e.prototype._onValueChange=function(t){this.props.controls.addLocalHistorySnapshot(t,!0)},e.prototype._renderAdjustmentsControls=function(){var t=this,e=function(e){return s.React.createElement(s.CollapseSectionComponent,{key:e.identifier,title:t._t("editor.controls.adjustments.sections."+e.identifier),alwaysExpanded:!0},s.React.createElement(d,{className:void 0+e.identifier},n(e.items)))},n=function(e){return e.filter(function(e){return t._isAdjustmentAvailable(e)}).map(function(e){return t._makeItem(e)})};return p.filter(function(e){return e.items.filter(function(e){return t._isAdjustmentAvailable(e)}).length>0}).map(e)},e.prototype._makeItem=function(t){var e=this.getSharedState("operation"),n=e.getOption(t);return s.React.createElement(c.a,{item:t,value:n,onValueChange:this._onValueChange.bind(this,t),className:void 0,key:t})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},s.React.createElement(h,null,s.React.createElement(f,null,s.React.createElement(s.ButtonComponent,{title:this._t("editor.controls.adjustments.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderAdjustmentsControls()))},e}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,e.a=u;var h=Object(s.adonis)(l).ul("x32ss4","SectionList"),d=s.adonis.ul("gz4y54","SectionItemList"),f=s.adonis.div("7abnmv","BottomSection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n.n(a),c=n(0),l=(n.n(c),s.a.Operations.AdjustmentsOperation),p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));s._bindAll("_onValueChange"),s._option=l.prototype.availableOptions[s.props.item];var c=s.getSharedState("operation");return s.state={value:c?c.getOption(s.props.item):s._option.default},s}return i(e,t),e.prototype.shouldComponentUpdate=function(t){return t.value!==this.props.value||t.value!==this.state.value},e.prototype._onValueChange=function(t){var e=this.getSharedState("operation"),n=this._option,o=n.minValue,r=n.midValue,i=n.maxValue;t=t<0?r+(r-o)*t/100:r+(i-r)*t/100,this.props.onBeforeValueChange&&this.props.onBeforeValueChange(t),e.setOption(this.props.item,t),this.context.editor.render(),this.setState({value:t}),this.props.onValueChange&&this.props.onValueChange(t),this.forceUpdate()},e.prototype.render=function(){var t=this.getSharedState("operation"),e=this._option,n=e.minValue,o=e.midValue,r=e.maxValue,i=t?t.getOption(this.props.item):o,a=100*(i<=o?(i-n)/(o-n)-1:(i-o)/(r-o));return i===n&&(a=-100),c.React.createElement(c.SliderControlComponent,{key:this.props.item,label:this._t("editor.controls.adjustments.items."+this.props.item),minValue:-100,maxValue:100,value:parseInt(a),onSliderValueChange:this._onValueChange,onValueChange:this._onValueChange,className:this.props.className,middleDot:!0})},e}(c.SharedStateComponent);p.contextTypes=c.SharedStateComponent.contextTypes,e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n.n(a),n(0)),c=n.n(s),l=n(39),p=n(41),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onEnter=function(){var t=this,e=this.context.editor,n=e.operations.getOrCreate("sprite"),o=n.createBrush();n.addSprite(o),e.zoom.auto(!1,!1,function(){e.features.disable("zoom","drag");var n=e.getOutputDimensions(),o=Math.max(.05*n.min(),1);t._options.widthPresets&&t._options.widthPresets.length>0&&(o=t._options.sizePresets[0]),t.sharedState.set({brushSize:Math.round(o)})}),this.sharedState.set({operation:n,brushSprite:o,brushColor:a.Color.WHITE,brushSize:.1,brushHardness:50})},e.prototype._onLeave=function(){var t=this.context.editor;t.features.enable("zoom","drag"),t.render()},e.prototype._onOperationRemoved=function(t){if(t===this.sharedState.get("operation")){var e=this.context.editor.operations.getOrCreate("sprite"),n=e.createBrush();e.addSprite(n),this.sharedState.set({operation:e,brushSprite:n})}},e.isEnabled=function(t){return t.isToolAllowed("brush")&&t.isToolEnabled("brush")},e}(s.BaseControls);u.clickAtPosition=s.BaseControls.clickAtPosition,u.getPreloadAssets=s.BaseControls.getPreloadAssets,u.identifier="brush",u.controlsComponent=l.a,u.canvasControlsComponent=p.a,u.iconPath="editor/controls/brush/icon.png",u.activeIconPath="editor/controls/brush/icon-active.png",u.requiredOperations=["sprite"],u.defaultOptions={brushes:[],replaceBrushes:!1,availableBrushes:null},e.default=u,c.a.Controls.BrushControls=u},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(40)),p=s.Operations.SpriteOperation,u=void 0;p&&(u=s.Operations.SpriteOperation.BrushSprite.Brush);var h=c.GroupedControlsStyles.ControlGroupTitle,d=c.GroupedControlsStyles.ControlGroup,f=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=i(this,t.call.apply(t,[this].concat(a)));return l._bindAll("_onBrushColorChanged","_onBrushHardnessChanged","_onBrushWidthChanged","_onOperationUpdated"),l._events=o({},c.Constants.EVENTS.OPERATION_UPDATED,l._onOperationUpdated),l._initBrushManager(),l}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._onBrushSelect(this._brushManager.getBrushes()[0])},e.prototype._initBrushManager=function(){this._brushManager=new c.BrushManager(this.context.ui,this.props.options)},e.prototype._onBrushColorChanged=function(t){var e=this.getSharedState("brushInstance").clone();e.setColor(t.clone()),this.setSharedState({brushInstance:e})},e.prototype._onBrushHardnessChanged=function(t){var e=this.getSharedState("brushInstance").clone();e.setHardness(t/100),this.setSharedState({brushInstance:e,brushHardness:Math.round(t)})},e.prototype.sharedStateDidChange=function(t,e){t.brushSize!==e.brushSize&&this._onBrushWidthChanged(e.brushSize)},e.prototype._onBrushWidthChanged=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this.getSharedState("brushInstance").clone();o.setSize(t/n.min()),this.setSharedState({brushInstance:o,brushSize:Math.round(t)})},e.prototype._onOperationUpdated=function(t){var e=this.context.editor;if(t===this.getSharedState("operation")){var n=this.getSharedState("brushSprite");if(n){var o=t.getSprites().filter(function(t){return t.getId()===n.getId()})[0];this.setSharedState({brushSprite:o})}e.render()}},e.prototype._onBrushSelect=function(t){var e=this,n=this.context.editor,o=n.getOutputDimensions(),c=this.getSharedState("brushSize")/o.min(),l=this.getSharedState("brushHardness")/100,p=this.getSharedState("brushColor"),h={size:c,color:p},d=void 0;if(t.prototype&&t.prototype instanceof u){d=new t(h)}else{var f=s.Utils.extend({},t);delete f.image;var m=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return a(e,t),e}(u);m.identifier=t.identifier,d=new m(s.Utils.extend({},f,h))}d.hasOption("hardness")&&d.setHardness(l),this._loadBrush(t,d).then(function(){e.setSharedState({brushInstance:d,brush:t})})},e.prototype._loadBrush=function(t,e){var n=this;return new Promise(function(o,r){if(t.constructor===Object){var i=new window.Image;i.addEventListener("load",function(){e.setImage(i),o()}),i.addEventListener("error",function(){r(new Error("Failed to load image at "+i.src))}),i.src=n._getAssetPath(t.image),i.crossOrigin="Anonymous"}else o()})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderBrushItems=function(){var t=this,e=this._brushManager.getBrushes();return e.length<=1?null:e.map(function(e){return c.React.createElement(l.a,{key:e.identifier,brush:e,selected:t.getSharedState("brush")===e,onClick:t._onBrushSelect.bind(t,e)})})},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("brushInstance");return c.React.createElement(c.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},c.React.createElement(y,null,c.React.createElement(g,null,this._t("editor.controls.brush.settings")),c.React.createElement(v,null,c.React.createElement(c.ColorSelectionComponent,{value:this.getSharedState("brushColor"),onChange:this._onBrushColorChanged})),c.React.createElement(m,{label:this._t("editor.controls.brush.width"),minValue:1,maxValue:100,value:this.getSharedState("brushSize"),onSliderValueChange:this._onBrushWidthChanged,onValueChange:this._onBrushWidthChanged,className:void 0}),c.React.createElement(m,{label:this._t("editor.controls.brush.hardness"),minValue:0,maxValue:100,disabled:!(e&&e.hasOption("hardness")),value:this.getSharedState("brushHardness"),onSliderValueChange:this._onBrushHardnessChanged,onValueChange:this._onBrushHardnessChanged})),c.React.createElement(b,null,c.React.createElement(c.ScrollbarComponent,{direction:"vertical"},c.React.createElement(_,null,this._renderBrushItems()))))},e}(c.ControlsComponent);f.contextTypes=c.ControlsComponent.contextTypes,f.RootElement=c.ControlsComponent.RootElement,e.a=f;var m=Object(c.adonis)(c.SliderControlComponent)("6vpx1b","SliderControl"),y=Object(c.adonis)(d).div("r92vc7","Settings"),g=Object(c.adonis)(h).div("120drhm","SettingsTitle"),v=c.adonis.div("yzsuxp","ColorSelection"),b=c.adonis.div("16dil83","Brushes"),_=c.adonis.ul("1lb1mg4","BrushList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),s.ControlsStyles.PlainControlItemBackground),l=a.Operations.SpriteOperation,p=void 0,u=void 0;l&&(p=l.BrushSprite.Brush,u=l.BrushSprite.Path);var h=a.Math.Vector2,d=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._loadBrush=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush;return new Promise(function(n,o){if(e.constructor===Object){var r=new window.Image;r.addEventListener("load",function(){t._brush.setImage(r),n()}),r.addEventListener("error",function(){o(new Error("Failed to load image at "+r.src))}),r.src=t._getAssetPath(e.image),r.crossOrigin="Anonymous"}else n()})},e.prototype._drawBrush=function(){var t=new u(null,{brush:this._brush},this._canvas);t.addControlPoint(new h(.1,.5)),t.addControlPoint(new h(.9,.5)),t.render(new h(this._canvas.width,this._canvas.height))},e.prototype._instantiateBrush=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush,e={color:a.Color.WHITE,size:.25};if(t.prototype&&t.prototype instanceof p){var n=t;this._brush=new n(e)}else{var s=a.Utils.extend({},t);delete s.image;var c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e}(p);c.identifier=t.identifier,this._brush=new c(a.Utils.extend({},s,e))}},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._instantiateBrush();var n=this._canvas,o=n.offsetWidth,r=n.offsetHeight;this._canvas.width=o,this._canvas.height=r,this._loadBrush().then(function(t){e._drawBrush()})},e.prototype.render=function(){var t=this;return s.React.createElement(f,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-selected":this.props.selected},s.React.createElement(m,{innerRef:function(e){t._canvas=e}}))},e}(s.BaseComponent);e.a=d;var f=Object(s.adonis)(c).li("8908c2",{selected:"120drhm"},"BrushListItem"),m=s.adonis.canvas("1ssoezr","Canvas")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),n(6)),l=a.Operations.SpriteOperation?a.Operations.SpriteOperation:{},p=l.BrushSprite,u=a.Math.Vector2,h=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var c=r(this,t.call.apply(t,[this].concat(i)));return c._bindAll("_onMouseEnter","_onMouseLeave","_onMouseMove","_onDrawStart","_onDraw","_onDrawStop"),c.state=a.Utils.extend(c.state,{cursorPosition:new u(0,0),canvasClickDisabled:!0}),c}return i(e,t),e.prototype._onDrawStart=function(t){var e=this.context.editor,n=e.getOutputDimensions();this._initialDrawPosition=t.clone();var o=this.getSharedState("brushSprite"),r=this.getSharedState("brushInstance"),i=this.getSharedState("operation");o||(o=i.createBrush(),i.addSprite(o),this.setSharedState({brushSprite:o})),this._currentPath=o.createPath(r),this._currentPath.addControlPoint(t.clone().divide(n)),this._lastDrawPosition=this._initialDrawPosition.clone(),this._lastCursorPosition=this._initialDrawPosition.clone()},e.prototype._onDraw=function(t,e,n){var o=this.context.editor,r=o.getOutputDimensions(),i=o.getOutputTextureDimensions(),a=this._lastCursorPosition.clone().add(n),s=o.zoom.level,c=this.getSharedState("brushSize");a.clone().subtract(this._lastDrawPosition).abs().len()/s>=c/10&&(this._currentPath.addControlPoint(a.clone().divide(r)),this.getSharedState("brushSprite").render(i),this._lastDrawPosition.copy(a)),this._lastCursorPosition.copy(a)},e.prototype._onDrawStop=function(){this._currentPath.setClosed(!0);var t=this.context.editor,e=t.getOutputTextureDimensions();this.getSharedState("brushSprite").render(e),this.props.controls.addLocalHistorySnapshot(),this._currentPath=null},e.prototype._onMouseEnter=function(){this.setState({cursorVisible:!0})},e.prototype._onMouseLeave=function(){this.setState({cursorVisible:!1})},e.prototype._onMouseMove=function(t){var e=s.Utils.getEventPosition(t),n=this._innerContainer.getBoundingClientRect();e.subtract(n.left,n.top),this.setState({cursorPosition:e})},e.prototype._getPropsForSprite=function(e){var n=t.prototype._getPropsForSprite.call(this,e);return e instanceof p&&(n.hideContent=!1),n},e.prototype._getCursorStyle=function(){return{width:this.getSharedState("brushSize")+8,height:this.getSharedState("brushSize")+8,left:this.state.cursorPosition.x,top:this.state.cursorPosition.y,marginLeft:-.5*(this.getSharedState("brushSize")+8),marginTop:-.5*(this.getSharedState("brushSize")+8)}},e.prototype._renderOverlayControls=function(){return s.React.createElement(s.DraggableComponent,{onStart:this._onDrawStart,onDrag:this._onDraw,onStop:this._onDrawStop},s.React.createElement(d,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,className:void 0},s.React.createElement(f,{style:this._getCursorStyle(),visible:this.state.cursorVisible})))},e}(c.a);h.contextTypes=c.a.contextTypes,e.a=h;var d=s.adonis.div("1sc5z35","BrushCanvasControls"),f=s.adonis.div("y4v90o",{visible:"2jlos"},"Cursor")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n.n(a),n(0)),c=n.n(s),l=n(43),p=n(47),u=a.Math.Vector2,h=void 0,d=void 0;a.Operations.SpriteOperation&&(h=a.Operations.SpriteOperation.TextSprite,d=a.Operations.SpriteOperation.BrushSprite);var f=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.createText=function(){var t=this.context.editor,e=this.sharedState.get("operation"),n=this.sharedState.get("fontManager"),o=n.getDefaultVariation(),r=t.getOutputDimensions(),i=t.getSDK(),s=i.getRenderer(),c=s.getMaxTextureSize(),l=e.createText({text:this.context.ui.translate("editor.controls.text.defaultText"),position:new u(.5,.5),maxWidth:.5,maxHeight:c?c/r.y:3,textMetrics:o.getTextMetrics(),fontIdentifier:o.getIdentifier(),fontSize:.08,fontFamily:o.getFontFamily(),fontWeight:o.getFontWeight(),fontStyle:o.getFontStyle(),color:a.Color.WHITE,alignment:"center"});return e.addSprite(l),this.addLocalHistorySnapshot(),this.sharedState.set({selectedSprite:l}),l},e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("sprite"),n=this._options,o=n.fonts,r=n.replaceFonts,i=n.availableVariations,a=new s.FontManager(this.context.ui,{fonts:o,replaceFonts:r,availableVariations:i});this.sharedState.set({operation:e,fontManager:a}),t.features.disable("zoom","drag"),t.zoom.auto(),this.sharedState.get("selectedSprite")||this.createText(),this.sharedState.set({operation:e}),t.render()},e.prototype._onLeave=function(){var t=this.context.editor;t.features.enable("zoom","drag"),t.render()},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var n=e.operations.getOrCreate("sprite"),o=n.getSpritesAtPosition(t,e.getOutputTextureDimensions()).filter(function(t){return!(t instanceof d)});return!!(o.length&&o[0]instanceof h)&&{selectedSprite:o[0]}},e.getPreloadAssets=function(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]},e.isEnabled=function(t){return t.isToolAllowed("text")&&t.isToolEnabled("text")},e}(s.BaseControls);f.identifier="text",f.controlsComponent=l.a,f.canvasControlsComponent=p.a,f.iconPath="editor/controls/text/icon.png",f.activeIconPath="editor/controls/text/icon-active.png",f.requiredOperations=["sprite"],f.defaultOptions={fonts:[],replaceFonts:!1,availableVariations:null,snapRotation:90,snapRotationTolerance:5},e.default=f,c.a.Controls.TextControls=f},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(44)),l=n(45),p=n(46),u=s.GroupedControlsStyles.ControlGroupList,h=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var l=i(this,t.call.apply(t,[this].concat(a)));return l._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onSelectedSpriteUpdate","_onAlignmentChanged","_onVariationChanged","_onTextScaled"),l._events=o({},s.Constants.EVENTS.TEXT_SCALED,l._onTextScaled),l._unavailableFontFamilies=[],l}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadFonts()},e.prototype.sharedStateDidChange=function(t,e){t.selectedSprite!==e.selectedSprite&&(this._lastLocalHistoryItem=null,t.selectedSprite.off("update",this._onSelectedSpriteUpdate),e.selectedSprite&&e.selectedSprite.on("update",this._onSelectedSpriteUpdate))},e.prototype._loadFonts=function(){var t=this,e=this.getSharedState("fontManager"),n=this.context.ui.getFontLoader();n.setFonts(e.getFonts());var o=void 0,r=window.setTimeout(function(){o=s.ModalManager.instance.displayLoading(t._t("loading.fonts"),!0)},200),i=this.getSharedState("selectedSprite");return n.load().then(function(){window.clearTimeout(r),o&&o.close(),i.emit("update"),t.context.editor.render()}).catch(function(e){window.clearTimeout(r),o&&o.close(),e.forEach(function(e){t._unavailableFontFamilies.push(e.font.getFontFamily())});var n=t._unavailableFontFamilies.join(", ");i.emit("update"),t.context.editor.render(),t.forceUpdate(),s.ModalManager.instance.displayError(t._t("errors.fontLoadingError.title"),t._t("errors.fontLoadingError.text",{fonts:n}))})},e.prototype._onSelectedSpriteUpdate=function(t,e){e&&e.fontSize&&this.forceUpdate()},e.prototype._onNewTextClick=function(){this.props.controls.createText(),this.context.editor.render(),this.forceUpdate()},e.prototype._onAlignmentChanged=function(t){var e=this.context.editor;this.getSharedState("selectedSprite").setAlignment(t),this.props.controls.addLocalHistorySnapshot("text-alignment",!0),this.forceUpdate(),e.render()},e.prototype._onVariationChanged=function(t){var e=this.context.editor,n=this.getSharedState("selectedSprite");n.setFontIdentifier(t.getIdentifier()),n.setFontFamily(t.getFontFamily()),n.setFontWeight(t.getFontWeight()),n.setFontStyle(t.getFontStyle()),n.setTextMetrics(t.getTextMetrics()),this.props.controls.addLocalHistorySnapshot("font-family",!0),this.forceUpdate(),e.render()},e.prototype._onFontChanged=function(t){var e=t.getVariations()[0];this._onVariationChanged(e),this.props.controls.addLocalHistorySnapshot("font-family",!0),this.forceUpdate(),this.context.editor.render()},e.prototype._onFontSizeChanged=function(t){var e=this.getSharedState("operation"),n=this.getSharedState("selectedSprite"),o=e.getInputDimensions();n.setFontSize(t/o.min()),this.props.controls.addLocalHistorySnapshot("font-size",!1),this.context.editor.render()},e.prototype._onColorChanged=function(t){this.getSharedState("selectedSprite").setColor(t.clone()),this.props.controls.addLocalHistorySnapshot("color",!0),this.context.editor.render()},e.prototype._onBackgroundColorChanged=function(t){this.getSharedState("selectedSprite").setBackgroundColor(t.clone()),this.props.controls.addLocalHistorySnapshot("background-color",!0),this.context.editor.render()},e.prototype._onCharacterSpacingChanged=function(t){this.getSharedState("selectedSprite").setCharacterSpacing(t),this.forceUpdate(),this.context.editor.render()},e.prototype._onLineSpacingChanged=function(t){this.getSharedState("selectedSprite").setLineHeight(t),this.props.controls.addLocalHistorySnapshot("line-spacing",!0),this.forceUpdate(),this.context.editor.render()},e.prototype._onTextScaled=function(){this.forceUpdate()},e.prototype._renderLegibilityPresets=function(){return[{title:"text shadow"},{title:"bg overlay"},{title:"bg blur"}].map(function(t){return s.React.createElement(p.a,{key:t.title,title:t.title})})},e.prototype._renderFontFamilyAndSizeComponent=function(){var t=this,e=this.getSharedState("selectedSprite"),n=this.getSharedState("fontManager"),o=this.getSharedState("operation"),r=o.getInputDimensions(),i=s.Utils.toFixed(e.getFontSize()*r.min(),1),a=Math.round(r.y),l=n.getFonts().filter(function(e){return t._unavailableFontFamilies.indexOf(e.getFontFamily())<0});return s.React.createElement(c.a,{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:l,dropdownValue:e.getFontFamily(),label:this._t("editor.controls.text.font"),inputLabel:this._t("editor.controls.text.size"),className:void 0,value:i,minValue:10,maxValue:a})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("selectedSprite");if(!e)return null;var n=this.getSharedState("fontManager"),o=n.getFontByFontFamily(e.getFontFamily()),r=n.getVariationByIdentifier(e.getFontIdentifier()),i=e.getColor().clone(),a=e.getBackgroundColor().clone();return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},s.React.createElement(d,{className:void 0},s.React.createElement(s.ButtonComponent,{title:this._t("editor.controls.text.new"),onClick:this._onNewTextClick,className:void 0}),s.React.createElement(m,null,this._renderFontFamilyAndSizeComponent(),s.React.createElement(l.a,{alignment:e.getAlignment(),variations:o.getVariations(),selectedVariation:r,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),s.React.createElement(s.ColorSelectionComponent,{value:i,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),s.React.createElement(f,null,s.React.createElement(s.CollapseSectionComponent,{key:"background",title:this._t("editor.controls.text.background"),alwaysExpanded:!0,className:void 0},s.React.createElement(s.ColorSelectionComponent,{value:a,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),s.React.createElement(s.CollapseSectionComponent,{key:"spacing",title:this._t("editor.controls.text.spacing"),alwaysExpanded:!0},s.React.createElement(s.SliderControlComponent,{label:this._t("editor.controls.text.line"),minValue:.5,maxValue:3,className:void 0,value:s.Utils.toFixed(e.getLineHeight(),1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))},e}(s.ControlsComponent);h.contextTypes=s.ControlsComponent.contextTypes,h.RootElement=s.ControlsComponent.RootElement,e.a=h;var d=s.adonis.div("1vnvjau","TopSection"),f=Object(s.adonis)(u).ul("mgrj1m","SectionList"),m=s.adonis.div("tymb4t","Details")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._updateFontsMap(),s}return i(e,t),e.prototype.componentWillReceiveProps=function(e){t.prototype.componentWillReceiveProps.call(this,e),e.fonts!==this.props.fonts&&this._updateFontsMap()},e.prototype._updateFontsMap=function(){var t=this;this._fontsMap={},this.props.fonts.forEach(function(e){t._fontsMap[e.getFontFamily()]=e})},e.prototype._renderLeftPart=function(){var t=this.getSharedState("selectedSprite"),e=t.getFontFamily(),n=this._fontsMap[e];return a.React.createElement("div",{ref:"root",className:void 0},a.React.createElement(a.DropdownComponent,{value:n,style:{fontFamily:e},className:void 0,onChange:this.props.onFontChange},this.props.fonts.map(function(t){return a.React.createElement(a.DropdownComponent.Item,{value:t,key:t.getFontFamily(),style:{fontFamily:t.getFontFamily()}},t.getFontFamily())})))},e}(a.ValueSelectionComponent));s.contextTypes=a.ValueSelectionComponent.contextTypes,e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onAlignmentItemClick=function(t){this.props.onAlignmentChange&&this.props.onAlignmentChange(t.title)},e.prototype._onStyleItemClick=function(t){switch(t.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic")}},e.prototype._renderAligmentItems=function(){var t=this,e=this.props.alignment;return[{title:"left",selected:"left"===e,iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:"center"===e,iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:"right"===e,iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}].map(function(e){var n=t._getAssetPath(e.iconPath,!0),o=t._getAssetPath(e.selectedIconPath,!0);return a.React.createElement(p,{key:e.title,className:void 0,"data-alignment":e.title,"data-selected":e.selected,onClick:t._onAlignmentItemClick.bind(t,e)},a.React.createElement(u,{visible:!0,src:n}),a.React.createElement(u,{visible:e.selected,src:o}))},this)},e.prototype._renderStylesDropdown=function(){var t=this.props,e=t.variations,n=t.selectedVariation;return a.React.createElement(a.DropdownComponent,{value:n,onChange:this.props.onVariationChange,className:void 0,enableMenu:e.length>1},e.map(function(t){return a.React.createElement(a.DropdownComponent.Item,{value:t,key:t.getIdentifier(),style:{fontFamily:t.getFontFamily(),fontStyle:t.getFontStyle(),fontWeight:t.getFontWeight()}},t.getLabel())}))},e.prototype.render=function(){return a.React.createElement(c,{className:void 0},a.React.createElement(l,null,this._renderStylesDropdown()),a.React.createElement(l,{right:!0},this._renderAligmentItems()))},e}(a.BaseComponent));s.contextTypes=a.BaseComponent.contextTypes,e.a=s;var c=a.adonis.div("1hzgwcr","TextControlsStyling"),l=a.adonis.div("64aub5",{right:"9ygmmm"},"Group"),p=a.adonis.div("tgbgl1",{selected:"zgbg08"},"ItemContainer"),u=a.adonis.img("7ni881",{visible:"zgbg08"},"ItemImage")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.ControlItem),c=a.ControlsStyles.ControlItemTitle,l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged"),s.state={selected:!1,hovering:!1,intensity:50},s}return i(e,t),e.prototype._onClick=function(){this.setState({selected:!0})},e.prototype._onMouseEnter=function(){this.setState({hovering:!0})},e.prototype._onMouseLeave=function(){this.setState({hovering:!1})},e.prototype._onIntensityChanged=function(t){this.setState({intensity:t})},e.prototype.render=function(){var t=this.state,e=t.selected,n=t.hovering,o=t.intensity;return a.React.createElement(p,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:e},!(e&&n)&&a.React.createElement(u,{selected:e},this.props.title),e&&n&&a.React.createElement(h,null,a.React.createElement(a.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:o,onChange:this._onIntensityChanged})))},e}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,e.a=l;var p=Object(a.adonis)(s).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem"),u=Object(a.adonis)(c).div("1hd9n2f",{selected:"186qcx6"},"Title"),h=a.adonis.div("8ekz81","Slider")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(6)),c=void 0;a.Operations.SpriteOperation&&(c=a.Operations.SpriteOperation.TextSprite);var l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._selectNextSprite=function(){for(var t=this.getSharedState("operation"),e=t.getSprites().slice(0).reverse(),n=void 0,o=void 0,r=0;r<e.length;r++)if((n=e[r])instanceof c){o=n;break}o||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:o})},e.prototype._createSprite=function(t){return this.getSharedState("operation").createText(t)},e}(s.a);l.contextTypes=s.a.contextTypes,e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n.n(a),n(0)),c=n.n(s),l=n(49),p=n(54),u=void 0,h=void 0;a.Operations.SpriteOperation&&(u=a.Operations.SpriteOperation.StickerSprite,h=a.Operations.SpriteOperation.BrushSprite);var d=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("sprite");t.zoom.auto(),t.features.disable("zoom","drag"),this.sharedState.set({operation:e})},e.prototype._onLeave=function(){var t=this.context.editor;t.features.enable("zoom","drag"),t.render()},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var n=e.operations.getOrCreate("sprite"),o=n.getSpritesAtPosition(t,e.getOutputTextureDimensions()).filter(function(t){return!(t instanceof h)});return!!(o.length&&o[0]instanceof u)&&{selectedSprite:o[0]}},e.getPreloadAssets=function(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]},e.isEnabled=function(t){return t.isToolAllowed("sticker")&&t.isToolEnabled("sticker")},e}(s.BaseControls);d.identifier="sticker",d.controlsComponent=l.a,d.canvasControlsComponent=p.a,d.iconPath="editor/controls/sticker/icon.png",d.activeIconPath="editor/controls/sticker/icon-active.png",d.requiredOperations=["sprite"],d.defaultOptions={categories:[],replaceCategories:!1,availableStickers:null,snapRotation:90,snapRotationTolerance:5},e.default=d,c.a.Controls.StickerControls=d},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),n(50)),l=n(52),p=n(53),u=a.Math.Vector2,h={ROOT:1,CATEGORY:2,OPTIONS:3},d=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));s._bindAll("_onCategoryClick","_onStickerClick","_onBackClick","_onNewStickerClick","_onReplaceClick"),s._initStickerManager(),s._needsStyleFixes=!0;var c=h.ROOT;return s.getSharedState("selectedSprite")&&(c=h.OPTIONS),s.state.currentPanel=c,s}return i(e,t),e.prototype.fixStyles=function(){var e=this;return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype.sharedStateDidChange=function(t,e){t.selectedSprite!==e.selectedSprite&&e.selectedSprite&&this.setState({currentPanel:h.OPTIONS})},e.prototype.componentDidUpdate=function(t,e){this.state.currentPanel!==e.currentPanel&&this.fixStyles()},e.prototype._initStickerManager=function(){var t=this.props.options,e=t.categories,n=t.replaceCategories,o=t.availableStickers;this._stickerManager=new s.StickerManager(this.context.ui,{categories:e,replaceCategories:n,availableStickers:o})},e.prototype._loadStickerImage=function(t){var e=this;return new Promise(function(n,o){var r=t.images.mediaBase,i=s.StickerManager.getURLForSticker(t,"base"),a=e._getAssetPath(i),c=new window.Image,l=void 0,p=setTimeout(function(){l=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);c.addEventListener("load",function(){l&&l.close(),p&&(clearTimeout(p),p=null),void 0!==r.width&&void 0!==r.height&&(c.width=r.width,c.height=r.height),n(c)}),c.addEventListener("error",function(){l&&l.close(),p&&(clearTimeout(p),p=null),s.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.stickerLoadingError.text",{path:c.src})),o(new Error("Loading sticker failed"))}),c.crossOrigin="Anonymous",c.src=a})},e.prototype._createSticker=function(t){var e=this;return this._loadStickerImage(t).then(function(n){var o=e.context.editor,r=e.getSharedState("operation"),i=r.getInputDimensions(!1),s=new u(n.width,n.height),c=new u(.5*i.min(),.5*i.min()),l=r.createSticker({identifier:t.identifier,image:n,position:new u(.5,.5),dimensions:a.Utils.resizeVectorToFit(s,c),rotation:0,smoothDownscaling:e.props.options.smoothDownscaling});return r.addSprite(l),e.props.controls.addLocalHistorySnapshot("sticker-creation",!0),o.render(function(){e.setSharedState({selectedSprite:l})}),l})},e.prototype._onReplaceClick=function(){this.setState({currentPanel:h.ROOT})},e.prototype._onNewStickerClick=function(){this.state.currentPanel=h.ROOT,this.setSharedState({selectedSprite:null})},e.prototype._onCategoryClick=function(t){this.setState({currentPanel:h.CATEGORY,category:t})},e.prototype._onBackClick=function(){this.setState({currentPanel:h.ROOT})},e.prototype._onStickerClick=function(t){var e=this,n=this.getSharedState("selectedSprite"),o=function(){e.setState({currentPanel:h.OPTIONS})},r=this.context.editor;n?this._loadStickerImage(t).then(function(i){var s=n.getDimensions().clone(),c=s.max(),l=new u(c,c),p=new u(i.width,i.height),h={image:i,identifier:t.identifier,dimensions:a.Utils.resizeVectorToFit(p,l)};"none"!==n.getTintMode()&&n.setTintMode(t.tintMode||"none"),n.set(h),n.setImage(i),e.props.controls.addLocalHistorySnapshot("sticker-image",!0),r.render(),o()}):this._createSticker(t).then(function(t){e.setSharedState({selectedSprite:t}),o()})},e.prototype._renderCurrentPanel=function(){var t=this,e=this.props.controls;switch(this.state.currentPanel){case h.ROOT:return s.React.createElement(c.a,{innerRef:function(e){t._list=e},stickerManager:this._stickerManager,onCategoryClick:this._onCategoryClick,onStickerClick:this._onStickerClick,controls:e,ref:"panel"});case h.CATEGORY:return s.React.createElement(l.a,{innerRef:function(e){t._list=e},category:this.state.category,stickerManager:this._stickerManager,onBackClick:this._onBackClick,onStickerClick:this._onStickerClick,controls:e,ref:"panel"});case h.OPTIONS:return s.React.createElement(p.a,{innerRef:function(e){t._list=e},stickerManager:this._stickerManager,onReplaceClick:this._onReplaceClick,onNewStickerClick:this._onNewStickerClick,controls:e,ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){return this._renderCurrentPanel()},e}(s.ControlsComponent);d.contextTypes=s.ControlsComponent.contextTypes,d.RootElement=s.ControlsComponent.RootElement,e.a=d},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(51)),c=n(12),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={category:"all"},s}return i(e,t),e.prototype._onCategoryClick=function(t,e){this.props.onCategoryClick&&this.props.onCategoryClick(t)},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(a.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype._renderListItems=function(){var t=this;return this.props.stickerManager.getCategories().map(function(e){return a.React.createElement(s.a,{key:e.identifier,category:e,onClick:t._onCategoryClick.bind(t,e)})})},e.prototype.render=function(){var t=this,e=this.props,n=e.stickerManager,o=e.innerRef;return a.React.createElement(p,{innerRef:function(e){o&&o(e),t._wrapper=e},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement(u,null,this._renderListItems()),a.React.createElement(c.a,{stickers:n.getStickersForCategory("all"),onStickerClick:this.props.onStickerClick})))},e}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,e.a=l;var p=a.adonis.div("rfecls","Wrapper"),u=a.adonis.ul("5jg0ou","CategoryList")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.ControlItem),c=a.ControlsStyles.ControlItemTitle,l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(){var t=this.props.category,e=this._getAssetPath(t.metaData.backgroundImage),n={backgroundImage:"url('"+e+"')"};return a.React.createElement(p,{onClick:this.props.onClick,style:n,className:void 0},a.React.createElement(h,null,this._t("editor.controls.sticker.stickerCategories."+t.identifier)||t.defaultName),a.React.createElement(u,null))},e}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,e.a=l;var p=Object(a.adonis)(s).li("1dc04zg","StickerCategoryItem"),u=a.adonis.div("1fxaw8w","Gradient"),h=Object(a.adonis)(c).div("120drhm","Title")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(12)),c=a.ControlsStyles.ControlItemTextStyles,l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(a.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.stickerManager,o=e.category,r=e.onBackClick,i=e.onStickerClick,c=e.innerRef,l=this._getAssetPath(o.metaData.backgroundImage),g={backgroundImage:"url('"+l+"')",backgroundSize:"cover"},v={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"},b=n.getStickersForCategory(o.identifier);return a.React.createElement(p,{innerRef:function(t){return c&&c(t)},className:void 0},a.React.createElement(u,{style:g},a.React.createElement(h,null,a.React.createElement(f,null,this._t("editor.controls.sticker.stickerCategories."+o.identifier)||o.defaultName),o.metaData.author&&a.React.createElement(m,null,a.React.createElement("span",null,"by "),o.metaData.author),a.React.createElement(y,{style:v,onClick:r.bind(this),className:void 0}))),a.React.createElement(d,{innerRef:function(e){t._wrapper=e}},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement(s.a,{stickers:b,onStickerClick:i}))))},e}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,e.a=l;var p=a.adonis.div("iauaz2","StickerCategoryPanel"),u=a.adonis.div("2j8ygm","Header"),h=a.adonis.div("3wd3qf","HeaderContent"),d=a.adonis.div("zb78lb","Content"),f=Object(a.adonis)(c).div("kswtk0","Title"),m=Object(a.adonis)(c).div("1qn5s6u","Subtitle"),y=a.adonis.button("1t2nim8","BackButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItemBackground),c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange"),s}return i(e,t),e.prototype._getStickerObject=function(){var t=this.props.stickerManager,e=this.getSharedState("selectedSprite"),n=e.getIdentifier();return t.getStickerByIdentifier(n)},e.prototype._onOpacityChange=function(t){this.getSharedState("selectedSprite").setAlpha(t/100),this.props.controls.addLocalHistorySnapshot("sticker-opacity",!0),this.context.editor.render(),this.forceUpdate()},e.prototype._onTintToggle=function(t){var e=this.getSharedState("selectedSprite"),n=this._getStickerObject();e.setTintMode(t?n.tintMode:"none"),this.props.controls.addLocalHistorySnapshot("sticker-tint-toggle",!0),this.context.editor.render(),this.forceUpdate()},e.prototype._onTintColorChange=function(t){this.getSharedState("selectedSprite").setTintColor(t.clone()),this.props.controls.addLocalHistorySnapshot("sticker-tint",!0),this.context.editor.render(),this.forceUpdate()},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(a.requestAnimationFrame)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.innerRef,o=e.onNewStickerClick,r=e.onReplaceClick,i=this.getSharedState("selectedSprite");if(!i)return null;var s=this._getStickerObject(),c={background:"url('"+i.getImage().src+"') center center / contain no-repeat"},v=!!s.tintMode&&"none"!==s.tintMode;return a.React.createElement(l,{innerRef:function(e){n&&n(e),t._wrapper=e},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement("div",null,a.React.createElement(p,null,a.React.createElement(a.ButtonComponent,{title:this._t("editor.controls.sticker.new"),className:void 0,onClick:o}),a.React.createElement(u,null,a.React.createElement(h,null,a.React.createElement(d,{onClick:r,style:c})),a.React.createElement(f,null,a.React.createElement(m,null,this._t("editor.controls.sticker.stickers."+s.identifier)||s.defaultName),a.React.createElement(y,{onClick:r,className:void 0},this._t("editor.controls.sticker.replace")))),a.React.createElement(a.SliderControlComponent,{minValue:0,value:Math.round(100*i.getAlpha()),maxValue:100,label:this._t("editor.controls.sticker.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0})),v&&a.React.createElement(a.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.sticker.fill"),expanded:"none"!==i.getTintMode(),className:void 0,onToggle:this._onTintToggle},a.React.createElement(g,{value:i.getTintColor(),onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},e}(a.SharedStateComponent);c.contextTypes=a.SharedStateComponent.contextTypes,e.a=c;var l=a.adonis.div("rfecls","Wrapper"),p=a.adonis.div("1vnvjau","TopSection"),u=a.adonis.div("aqfteq","Details"),h=Object(a.adonis)(s).div("6u8g0p","Thumbnail"),d=a.adonis.div("7r0ke8","ThumbnailImage"),f=a.adonis.div("1trlo6v","DetailsContainer"),m=a.adonis.div("w9mc0y","Title"),y=a.adonis.div("1rhky7p","ReplaceButton"),g=Object(a.adonis)(a.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(6)),c=a.Operations.SpriteOperation,l=void 0;c&&(l=a.Operations.SpriteOperation.StickerSprite);var p=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._renderSpriteItems=function(e){return t.prototype._renderSpriteItems.call(this,e.filter(function(t){return t instanceof l}))},e.prototype._selectNextSprite=function(){for(var t=this.getSharedState("operation"),e=t.getSprites().slice(0).reverse(),n=void 0,o=void 0,r=0;r<e.length;r++)if((n=e[r])instanceof l){o=n;break}o||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:o})},e.prototype._createSprite=function(t){return this.getSharedState("operation").createSticker(t)},e}(s.a);p.contextTypes=s.a.contextTypes,e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n.n(a),n(0)),c=n.n(s),l=n(56),p=void 0;a.Operations.FilterOperation&&(p=a.Operations.FilterOperation.Filters);var u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onOperationRemoved=function(t){t===this.sharedState.get("operation")&&this._onEnter()},e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("filter");this.sharedState.set({operation:e})},e.prototype._onLeave=function(){var t=this.context.editor,e=this.sharedState.state.operation;e.getFilter().constructor===p.IdentityFilter&&t.operations.remove(e,!1)},e.isEnabled=function(t){return t.isToolEnabled("filter")&&t.isToolAllowed("filter")},e.getPreloadAssets=function(t){var e=[],n=t.getOptions(),o=a.Utils.defaults(n.editor.controlsOptions.filter,this.defaultOptions);return new s.FilterManager(t.getUI(),o).getFiltersForCategory("all").forEach(function(t){void 0!==t.lutImage&&e.push([t.lutImage,!1])}),e},e}(s.BaseControls);u.clickAtPosition=s.BaseControls.clickAtPosition,u.identifier="filter",u.controlsComponent=l.a,u.canvasControlsComponent=s.BaseControls.canvasControlsComponent,u.iconPath="editor/controls/filter/icon.png",u.activeIconPath="editor/controls/filter/icon-active.png",u.requiredOperations=["filter","transform"],u.defaultOptions={categories:[],replaceCategories:!1,availableFilters:null},e.default=u,c.a.Controls.FilterControls=u},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=n.n(s),l=n(0),p=(n.n(l),n(10)),u=n(2),h=n(57),d=n(58),f=void 0;s.Operations.FilterOperation&&(f=s.Operations.FilterOperation.Filters.IdentityFilter);var m=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var u=i(this,t.call.apply(t,[this].concat(a)));u._bindAll("_onIntensityChanged","_onListScroll","_onOperationUpdated");var h=u.context,f=h.ui,m=h.editor,y=h.theme;u._loadedFilters=[],u._filterPreviewRenderer=new d.a(m),u._renderQueue=new p.a(1,1/0,y.listItemSlideInDelay),u._filterManager=new l.FilterManager(f,u.props.options),u._filterPreviewQueue=[],u._events=o({},l.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated);var g=u.getSharedState("operation");return u.state=s.Utils.extend(u.state,{intensity:100*g.getIntensity(),category:"all",filterPreviews:[]}),u}return a(e,t),e.prototype.fixStyles=function(){var e=this;return t.prototype.fixStyles.call(this).then(function(){e._onListScroll()})},e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._filterPreviewRenderer.init(),this._renderPreviewsAnimationFrame=Object(u.b)(function(){e._renderPreviews()})},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._renderPreviewsAnimationFrame&&Object(u.a)(this._renderPreviewsAnimationFrame),this._renderQueue.dispose(),this._filterPreviewRenderer.dispose(),this._disposed=!0,window.clearInterval(this._interval)},e.prototype.shouldComponentUpdate=function(t,e){return this.state.intensity!==e.intensity},e.prototype._renderPreviews=function(){var t=this,e=this.context.editor,n=e.getSDK().getRenderer(),o=this._getVisibleFilters().filter(function(e){return-1===t._loadedFilters.indexOf(e)});n.isOfType(c.a.RendererType.WEBGL)?o.forEach(function(e){t._loadedFilters.push(e),t._renderQueue.add(function(){return t._filterManager.instantiateFilterWithIdentifier(e.identifier).then(function(n){if(!t._disposed)return t._filterPreviewRenderer.render(n).then(function(n){t.state.filterPreviews[e.identifier]=n,t.forceUpdate()})})})}):(this._loadedFilters=this._loadedFilters.concat(o),o.forEach(function(e){t._renderQueue.add(function(){return new Promise(function(n){t.state.filterPreviews[e.identifier]=t._getAssetPath("editor/controls/filter/filters/"+e.identifier+".png",!0),t.forceUpdate(),n()})})}))},e.prototype._getVisibleFilters=function(){for(var t=[f].concat(this._filterManager.getFiltersForCategory(this.state.category)),e=[],n=this._container.getBoundingClientRect(),o=0,r=t.length;o<r;o++){var i=t[o],a=this.refs["filter-"+i.identifier].container,s=a.getBoundingClientRect();if(!(s.top>n.bottom+n.height||s.bottom<n.top))e.push(i);else if(e.length)break}return e},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onListScroll=function(t){this._renderPreviews()},e.prototype._onItemClick=function(t){var e=this,n=this.getSharedState("operation");n.getIdentifier()!==t&&this._filterManager.instantiateFilterWithIdentifier(t).then(function(o){n.set({filter:o,identifier:t,intensity:1}),e.context.editor.render(),e.forceUpdate(),e.setState({intensity:100})})},e.prototype._onIntensityChanged=function(t){var e=this.context.editor;this.getSharedState("operation").setIntensity(t/100),e.render(),this.setState({intensity:t})},e.prototype._renderListItems=function(){var t=this,e=this._filterManager.getFiltersForCategory(this.state.category),n=this.getSharedState("operation"),o=n.getIdentifier(),r=this.state.filterPreviews;return[f].concat(e).map(function(n,i){var a=n.identifier,s=!r[a]&&i===t._loadedFilters.length,c=a===o;return l.React.createElement(g,{key:a,"data-selected":c,"data-identifier":a,className:void 0},l.React.createElement(h.a,{ref:"filter-"+a,filter:n,identifier:a,lastChild:n===e[e.length-1],onClick:t._onItemClick.bind(t,a),selected:c,intensity:t.state.intensity,displaySlider:n!==f,onIntensityChanged:t._onIntensityChanged,visible:!!r[a],previewUrl:r[a]}),s&&l.React.createElement(v,null))})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return l.React.createElement(l.ScrollableListComponent,{direction:"vertical",onScroll:this._onListScroll,innerRef:function(e){t._scrollbar=e}},l.React.createElement(y,null,this._renderListItems()))},e}(l.ControlsComponent);m.contextTypes=l.ControlsComponent.contextTypes,m.propTypes=l.ControlsComponent.propTypes,m.RootElement=l.ControlsComponent.RootElement,e.a=m;var y=l.adonis.ul("9uviv9","List"),g=l.adonis.li("13hv8io","ListItemContainer"),v=Object(l.adonis)(l.LoadingIndicatorComponent)("11ztmqh","LoadingIndicator")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=a.ControlsStyles.ControlItem,p=a.ControlsStyles.ControlItemActiveOverlay,u=a.ControlsStyles.ControlItemTitle,h=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={hovered:!1},s}return i(e,t),e.prototype.shouldComponentUpdate=function(t,e){return this.props.previewUrl!==t.previewUrl||this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==e.hovered||this.props.filter!==t.filter||!(this.props.intensity===t.intensity||!t.selected)},e.prototype.render=function(){var t=this,e=this.props,n=e.lastChild,o=e.onClick,r=e.onIntensityChanged,i=e.selected,c=e.intensity,l=e.displaySlider,p=e.visible,u=e.filter,h=null;this.props.previewUrl&&(h=a.React.createElement(g,{src:this.props.previewUrl}));var b=this.context.theme.transitionDuration,_={lastChild:n,onClick:o,visible:p};return a.React.createElement(d,s({},_,{animated:!0,innerRef:function(e){t._container=e},onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}}),a.React.createElement(m,{selected:i},h,a.React.createElement(a.Transition,{active:i&&l,enterProp:"rendered",enterDuration:1e3*b,appearProp:"visible",appearDuration:1e3*b,leaveDuration:1e3*b},i&&l&&a.React.createElement(f,null,a.React.createElement(a.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:c,onChange:r}))),a.React.createElement(y,{hovered:this.state.hovered},this._t("editor.controls.filter.filters."+u.identifier)||u.defaultName),a.React.createElement(a.Transition,{active:i,enterProp:"rendered",enterDuration:1e3*b,appearProp:"visible",appearDuration:1e3*b,leaveDuration:1e3*b},a.React.createElement(v,{selected:i}))))},c(e,[{key:"container",get:function(){return this._container}}]),e}(a.BaseComponent);h.contextTypes=a.BaseComponent.contextTypes,e.a=h;var d=Object(a.adonis)(l).div("120drhm",{lastChild:"229bd5"},"Item"),f=a.adonis.div("19g9ike",{visible:"zgbg08",rendered:"2jlos"},"Slider"),m=a.adonis.div("rf12k1","ItemContainer"),y=Object(a.adonis)(u).span("hpn4lp","ItemTitle"),g=a.adonis.img("3x5zfy","Preview"),v=Object(a.adonis)(p).div("120drhm","Overlay")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(1),i=n.n(r),a=r.Math.Vector2,s=new a(180,80),c=function(){function t(e){o(this,t),this._editor=e,this._disposed=!1}return t.prototype.init=function(){this._initSDK()},t.prototype.render=function(t){var e=this;return this._filterOperation.setFilter(t),this._sdk.render().then(function(){return e._sdk.getCanvas().toDataURL("image/png")})},t.prototype._initSDK=function(){var t=this._editor.getOptions(),e=t.logLevel,n=t.debug,o=t.license,r=t.editor,a=r.smoothDownscaling,c=r.smoothUpscaling,l=r.preferredRenderer,p={logLevel:e,debug:n,pixelRatio:1,smoothDownscaling:a,smoothUpscaling:c,transparent:!0,license:o,image:this._editor.getSDK().getImage(),renderMode:"export",versionCheck:!1,displayWelcomeMessage:!1};this._sdk=new i.a(l,p),this._sdk.resizeTo(s),this._filterOperation=this._sdk.createOperation("filter"),this._transformOperation=this._sdk.createOperation("transform");var u=this._calculateTransformOptions(),h=u.start,d=u.end,f=u.textureScale;this._transformOperation.set({start:h,end:d,textureScale:f}),this._sdk.render()},t.prototype._calculateTransformOptions=function(){var t=this._transformOperation.getInputDimensions(),e=t.x/t.y,n=new a,o=new a,r=s.x/s.y;if(e<=r){var i=1/t.y*(t.x/r);n.set(0,(1-i)/2),o.set(1,1-n.y)}else{var c=1/t.x*(r*t.y);n.set((1-c)/2,0),o.set(1-n.x,1)}var l=o.clone().subtract(n),p=t.clone().multiply(l),u=s.x/p.x;return{dimensions:s,start:n,end:o,textureScale:u}},t.prototype.dispose=function(){this._sdk&&this._sdk.dispose()},t.prototype.isDisposed=function(){return this._disposed},t}();e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(60),l=n(62),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.getOperation=function(){var t=this.context.editor;return this.constructor.FOCUS_OPERATIONS.map(function(e){return t.operations.get(e)}).reduce(function(t,e){return t||e})},e.prototype.isFocusOperation=function(t){var e="object"===(void 0===t?"undefined":p(t))?t.constructor.identifier:t;return-1!==this.constructor.FOCUS_OPERATIONS.indexOf(e)},e.prototype._onEnter=function(){var t=this.context.editor,e=this.getOperation(),n=e&&e.getInputDimensions(!1);this.sharedState.set({selectedFocus:"none",operation:e,inputDimensions:n}),t.zoom.auto(!0,!1,function(){t.features.disable("zoom","drag")},!1)},e.prototype._onLeave=function(){this.context.editor.features.enable("zoom","drag")},e.getPreloadAssets=function(t){var e=[];return this.ITEMS.forEach(function(t){e.push(t.backgroundImagePath),e.push(t.activeBackgroundImagePath)}),e},e.prototype._onOperationRemoved=function(t){},e.isEnabled=function(t){return t.isToolAllowed("focus")&&t.isToolEnabled("focus")},e.getItemByIdentifier=function(t){return e.ITEMS.filter(function(e){return e.identifier===t})[0]},e}(a.BaseControls);u.clickAtPosition=a.BaseControls.clickAtPosition,u.ITEMS=[{identifier:"none",operationIdentifier:null,backgroundImagePath:"editor/controls/focus/none.png",activeBackgroundImagePath:"editor/controls/focus/none-active.png"},{identifier:"radial",operationIdentifier:"radial-focus",backgroundImagePath:"editor/controls/focus/radial.png",activeBackgroundImagePath:"editor/controls/focus/radial-active.png"},{identifier:"mirrored",operationIdentifier:"mirrored-focus",backgroundImagePath:"editor/controls/focus/mirrored.png",activeBackgroundImagePath:"editor/controls/focus/mirrored-active.png"},{identifier:"linear",operationIdentifier:"linear-focus",backgroundImagePath:"editor/controls/focus/linear.png",activeBackgroundImagePath:"editor/controls/focus/linear-active.png"},{identifier:"gaussian",operationIdentifier:"blur",backgroundImagePath:"editor/controls/focus/gaussian.png",activeBackgroundImagePath:"editor/controls/focus/gaussian-active.png"}],u.FOCUS_OPERATIONS=u.ITEMS.map(function(t){return t.operationIdentifier}).filter(function(t){return t}),u.identifier="focus",u.controlsComponent=c.a,u.canvasControlsComponent=l.a,u.iconPath="editor/controls/focus/icon.png",u.activeIconPath="editor/controls/focus/icon-active.png",u.requiredOperations=u.ITEMS.map(function(t){return t.operationIdentifier}).filter(function(t){return t}),u.defaultOptions={availableModes:null},e.default=u,s.a.Controls.FocusControls=u},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(61)),l=function(t){function e(){var n;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var p=i(this,t.call.apply(t,[this].concat(c)));return p._bindAll("_onBlurRadiusChanged","_onHistoryUndo","_onHistoryRedo"),p._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,p._onHistoryUndo),o(n,s.Constants.EVENTS.HISTORY_REDO,p._onHistoryRedo),n),p.state.selectedItem="none",p.state.intensity=50,p._autoSelectItem(!0),p}return a(e,t),e.prototype._isModeAvailable=function(t){var e=this.props.options.availableModes;return"none"===t||null===e||-1!==e.indexOf(t)},e.prototype._autoSelectItem=function(t,e){var n=this,o=this.props.controls,r=o.constructor.ITEMS;e=e||o.getOperation(),e?(r.forEach(function(o){o.operationIdentifier===e.constructor.identifier&&(n.setSharedState({selectedFocus:o.identifier},!1),n._setSelectedFocus(o,!t))}),t||this.setSharedState({operation:e})):this._setSelectedFocus(r[0],!t)},e.prototype._setSelectedFocus=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.props.controls,o=this.context.editor,r=t,i=r.identifier,a=r.operationIdentifier;if("string"==typeof t&&(i=t,t=n.constructor.getItemByIdentifier(i),a=t?t.operationIdentifier:null),i){if(i!==this.getSharedState("selectedFocus")){var s=this.getSharedState("operation");s&&o.operations.remove(s,!1)}if(this.setSharedState({selectedFocus:i},e),!a)return this.setSharedState({operation:null},e),void o.render();var c=o.operations.getOrCreate(a);o.render(),this.setSharedState({operation:c,inputDimensions:c.getInputDimensions(!1)},e)}},e.prototype._onItemClick=function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._setSelectedFocus(t)},e.prototype._onBlurRadiusChanged=function(t){var e=this.context.editor;this.getSharedState("operation").setBlurRadius(t),e.render()},e.prototype._onHistoryUndo=function(t,e){if("focus"===e.controls)return void this._autoSelectItem(!1);var n=this.getSharedState("selectedFocus");this._setSelectedFocus(n),this._autoSelectItem(!1)},e.prototype._onHistoryRedo=function(t){if("focus"===t.controls)return void this._autoSelectItem(!1);var e=this.getSharedState("selectedFocus");this._setSelectedFocus(e),this._autoSelectItem(!1)},e.prototype._renderListItems=function(){var t=this,e=this.props.controls,n=this.getSharedState("operation"),o=this.getSharedState("selectedFocus");return e.constructor.ITEMS.filter(function(e){return t._isModeAvailable(e.identifier)}).map(function(e){var r=t._getAssetPath(e.backgroundImagePath,!0),i=t._getAssetPath(e.activeBackgroundImagePath,!0),a=e.identifier===o;return s.React.createElement(c.a,{key:e.identifier,title:t._t("editor.controls.focus.items."+e.identifier),selected:a,showSlider:!!e.operationIdentifier,blurRadius:n&&n.getBlurRadius(),onBlurRadiusChanged:t._onBlurRadiusChanged,backgroundImagePath:r,activeBackgroundImagePath:i,onClick:t._onItemClick.bind(t,e,!0,!1)})},this)},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this;return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},s.React.createElement(p,null,this._renderListItems()))},e}(s.ControlsComponent);l.contextTypes=s.ControlsComponent.contextTypes,l.propTypes=s.ControlsComponent.propTypes,l.RootElement=s.ControlsComponent.RootElement,e.a=l;var p=s.adonis.ul("1snluvd","List")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.ControlItem),c=a.ControlsStyles.ControlItemTitle,l=a.ControlsStyles.ControlItemActiveOverlay,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onSliderValueChanged"),s}return i(e,t),e.prototype._onSliderValueChanged=function(t){var e=this.props.onBlurRadiusChanged,n=this.getSharedState("inputDimensions"),o=n.min();e&&e(t/o)},e.prototype._renderSlider=function(){var t=this.props,e=t.selected,n=t.showSlider,o=t.blurRadius;if(!e||!n)return null;var r=this.getSharedState("operation"),i=Math.min(180,Math.round(.1*r.getInputDimensions(!1).min())),s=this.getSharedState("inputDimensions"),c=s.min();return a.React.createElement(a.SliderComponent,{minValue:0,maxValue:i,valueUnit:"",middleDot:!1,value:o*c,onChange:this._onSliderValueChanged})},e.prototype.render=function(){var t=this.props,e=t.title,n=t.backgroundImagePath,o=t.activeBackgroundImagePath,r=t.selected,i=t.onClick,s=t.showSlider,c={backgroundImage:"url('"+(r?o:n)+"')"},l=this.context.theme.transitionDuration;return a.React.createElement(u,{selected:r,"data-selected":r,className:void 0,onClick:i,style:c},a.React.createElement(h,{selected:r,withSlider:r&&s},e),a.React.createElement(f,{visible:r&&s},this._renderSlider()),a.React.createElement(a.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},a.React.createElement(d,{selected:!0})))},e}(a.SharedStateComponent);p.contextTypes=a.SharedStateComponent.contextTypes,e.a=p;var u=Object(a.adonis)(s).li("19qom6j","ListItem"),h=Object(a.adonis)(c).div("1cwztpc",{selected:"2znik8",withSlider:"fsvvyb"},"ListItemTitle"),d=Object(a.adonis)(l).div("rctda3","ListItemOverlay"),f=a.adonis.div("chwlso",{visible:"vpr3tu"},"Slider")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(63)),p=n(64),u=n(65),h=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),l=0;l<n;l++)a[l]=arguments[l];var p=i(this,t.call.apply(t,[this].concat(a)));return p._bindAll("_onZoomDone"),p._events=o({},c.Constants.EVENTS.ZOOM_DONE,p._onZoomDone),p.state=s.Utils.extend(p.state,{zoomDone:!1}),p}return a(e,t),e.prototype._onZoomDone=function(){this.setState({zoomDone:!0})},e.prototype._renderControls=function(){var t=this.getSharedState("selectedFocus"),e=void 0;switch(t){case"radial":e=l.a;break;case"linear":e=p.a;break;case"mirrored":e=u.a;break;default:return c.React.createElement("div",null)}return c.React.createElement(e,{zoomDone:this.state.zoomDone})},e}(c.CanvasControlsComponent);h.contextTypes=c.CanvasControlsComponent.contextTypes,e.a=h},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(2)),p=c.ControlsStyles.Knob,u=c.ControlsStyles.FullContainer,h=s.Math.Vector2,d=s.Math.Rectangle,f=function(t){function e(){var n;r(this,e);for(var a=arguments.length,p=Array(a),u=0;u<a;u++)p[u]=arguments[u];var d=i(this,t.call.apply(t,[this].concat(p)));return d._bindAll("_onCircleDragStart","_onCircleDrag","_onKnobDragStart","_onKnobDrag","_onOperationUpdated","_onZoomDone"),d.state=s.Utils.extend(d.state,{circlePosition:new h,circleDimensions:new h,knobPosition:new h,visible:!1}),d._knobChangedManually=!1,d._operation=d.getSharedState("operation"),d._events=(n={},o(n,c.Constants.EVENTS.OPERATION_UPDATED,d._onOperationUpdated),o(n,c.Constants.EVENTS.ZOOM_DONE,d._onZoomDone),n),d.props.zoomDone&&Object(l.b)(function(){d._onZoomDone()}),d}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&(this._knobChangedManually=!1,this._updatePositionsAndDimensions())},e.prototype._onCircleDragStart=function(){this._initialPosition=this._operation.getPosition(),this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onCircleDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=t.clone().divide(n),r=this._initialPosition.clone().add(o),i=this._initialKnobPosition.clone().add(t);this._operation.set({position:r}),this.state.knobPosition=i,e.render(),this._updatePositionsAndDimensions()},e.prototype._onKnobDragStart=function(t){this._knobChangedManually=!0,this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=e.getOutputDimensions(),o=this._initialKnobPosition.clone().add(t).clamp(new h(0,0),n),r=this._operation.getPosition().clone().multiply(n),i=o.clone().subtract(r).abs().len(),a=i/2;this.setState({knobPosition:o,circleDimensions:new h(2*i,2*i)}),this._operation.set({radius:i/n.min(),gradientRadius:a/n.min()}),e.render()},e.prototype._updatePositionsAndDimensions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this._operation.getPosition().clone().multiply(e),o=this._operation.getRadius()*e.min(),r=2*o,i=new h(r,r),a={circleDimensions:i,circlePosition:n};this._knobChangedManually||(a.knobPosition=n.clone().add(o,0)),this.setState(a)},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),r=new d(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);c.Utils.styleElement(this._onCanvasControls,{left:r.x+"px",top:r.y+"px",width:r.width+"px",height:r.height+"px"}),this.forceUpdate()},e.prototype._getCircleStyles=function(){return{width:this.state.circleDimensions.x,height:this.state.circleDimensions.y,left:this.state.circlePosition.x,top:this.state.circlePosition.y,marginLeft:-.5*this.state.circleDimensions.x,marginTop:-.5*this.state.circleDimensions.y}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype.render=function(){var t=this;return c.React.createElement(m,{innerRef:function(e){t._container=e}},c.React.createElement(c.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},c.React.createElement(y,{innerRef:function(e){t._onCanvasControls=e}},c.React.createElement(c.DraggableComponent,{onStart:this._onCircleDragStart,onDrag:this._onCircleDrag},c.React.createElement(v,{className:void 0,style:this._getCircleStyles()})),c.React.createElement(c.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.React.createElement(g,{className:void 0,style:this._getKnobStyle()})))))},e}(c.SharedStateComponent);f.contextTypes=c.SharedStateComponent.contextTypes,e.a=f;var m=Object(c.adonis)(u).div("1rineb","CanvasControls"),y=c.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(c.adonis)(p).div("120drhm","Knob"),v=c.adonis.div("kgwi8g","Circle")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(2)),p=c.ControlsStyles.Knob,u=c.ControlsStyles.FullContainer,h=s.Math.Vector2,d=s.Math.Rectangle,f=function(t){function e(){var n;r(this,e);for(var a=arguments.length,p=Array(a),u=0;u<a;u++)p[u]=arguments[u];var h=i(this,t.call.apply(t,[this].concat(p)));return h._bindAll("_onKnobDragStart","_onKnobDrag","_onOperationUpdated","_onZoomDone"),h.state=s.Utils.extend(h.state,{visible:!1}),h._operation=h.getSharedState("operation"),h._events=(n={},o(n,c.Constants.EVENTS.OPERATION_UPDATED,h._onOperationUpdated),o(n,c.Constants.EVENTS.ZOOM_DONE,h._onZoomDone),n),h.props.zoomDone&&Object(l.b)(function(){h._onZoomDone()}),h}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls()},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onKnobDragStart=function(t,e){var n=this.getSharedState("operation");this._initialPosition=n.getOption("controlPoint"+t)},e.prototype._onKnobDrag=function(t,e){var n=this.context.editor,o=this.getSharedState("operation"),r=n.getSDK().getSprite().getBounds(),i=this._container.getBoundingClientRect(),a=this.context.appComponent.getBounds(),s=this._initialPosition.clone().multiply(r.width,r.height),c=s.add(e).clamp(new h(i.left-a.left-r.x,i.top-a.top-r.y),new h(i.width-(r.x-(i.left-a.left)),i.height-(r.y-(i.top-a.top)))),l=c.divide(r.width,r.height);o.setOption("controlPoint"+t,l),n.render(),this.forceUpdate()},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),r=new d(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);c.Utils.styleElement(this._onCanvasControls,{left:r.x+"px",top:r.y+"px",width:r.width+"px",height:r.height+"px"}),this.forceUpdate()},e.prototype._getKnobStyle=function(t){var e=this.context.editor,n=this.getSharedState("operation"),o=n.getOption("controlPoint"+t),r=e.getSDK().getSprite().getBounds(),i=o.clone().multiply(r.width,r.height);return{left:i.x,top:i.y}},e.prototype._getLineStyle=function(){var t=this.context.editor,e=this.getSharedState("operation"),n=t.getSDK().getSprite().getBounds(),o={1:e.getControlPoint1().clone().multiply(n.width,n.height),2:e.getControlPoint2().clone().multiply(n.width,n.height)},r=o[2].clone().subtract(o[1]),i=r.len(),a=Math.atan2(r.y,r.x);return{width:i+"px",left:o[1].x+"px",top:o[1].y+"px",transform:"rotate("+a+"rad) translateY(-50%)"}},e.prototype._renderKnobs=function(){for(var t=[],e=1;e<=2;e++)t.push(c.React.createElement(c.DraggableComponent,{onStart:this._onKnobDragStart.bind(this,e),onDrag:this._onKnobDrag.bind(this,e),key:e},c.React.createElement(g,{style:this._getKnobStyle(e),className:void 0})));return t},e.prototype.render=function(){var t=this;return c.React.createElement(m,{innerRef:function(e){t._container=e}},c.React.createElement(c.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},c.React.createElement(y,{innerRef:function(e){t._onCanvasControls=e}},this._renderKnobs(),c.React.createElement(v,{style:this._getLineStyle()}))))},e}(c.SharedStateComponent);f.contextTypes=c.SharedStateComponent.contextTypes,e.a=f;var m=Object(c.adonis)(u).div("1rineb","CanvasControls"),y=c.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(c.adonis)(p).div("120drhm","Knob"),v=c.adonis.div("1rrhaqy","Line")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(2)),p=c.ControlsStyles.Knob,u=c.ControlsStyles.FullContainer,h=s.Math.Vector2,d=s.Math.Rectangle,f=function(t){function e(){var n;r(this,e);for(var a=arguments.length,p=Array(a),u=0;u<a;u++)p[u]=arguments[u];var d=i(this,t.call.apply(t,[this].concat(p)));return d._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag","_onOperationUpdated","_onZoomDone"),d.state=s.Utils.extend(d.state,{areaPosition:new h,areaDimensions:new h,knobPosition:new h,visible:!1}),d._events=(n={},o(n,c.Constants.EVENTS.OPERATION_UPDATED,d._onOperationUpdated),o(n,c.Constants.EVENTS.ZOOM_DONE,d._onZoomDone),n),d._operation=d.getSharedState("operation"),d.props.zoomDone&&Object(l.b)(function(){d._onZoomDone()}),d}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype.sharedStateDidChange=function(t,e){this._operation&&e.operation&&this._operation!==e.operation&&this._operation.constructor===e.operation.constructor&&(e.operation.set(this._operation.serializeOptions()),this._operation=e.operation)},e.prototype._onZoomDone=function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()},e.prototype._onOperationUpdated=function(t){t===this._operation&&(this.forceUpdate(),this._updatePositionsAndDimensions())},e.prototype._onCenterDragStart=function(){var t=this._operation;this._initialStart=t.getStart(),this._initialEnd=t.getEnd(),this._initialDist=this._initialEnd.clone().subtract(this._initialStart)},e.prototype._onCenterDrag=function(t){var e=this.context.editor,n=this._operation,o=e.getOutputDimensions(),r=t.clone().divide(o),i=this._initialStart.clone().add(r).clamp(new h(0,0),new h(1,1).subtract(this._initialDist)),a=i.clone().add(this._initialDist);n.set({start:i,end:a}),e.render(),this._updatePositionsAndDimensions(),this.forceUpdate()},e.prototype._onKnobDragStart=function(t){this._initialKnobPosition=this.state.knobPosition.clone()},e.prototype._onKnobDrag=function(t){var e=this.context.editor,n=this._operation,o=e.getOutputDimensions(),r=this._initialKnobPosition.clone().add(t).clamp(new h(0,0),o),i=r.clone().subtract(this.state.areaPosition),a=this.state.areaPosition.clone().add(-i.y,i.x).divide(o),s=this.state.areaPosition.clone().add(i.y,-i.x).divide(o),c=2*i.len();n.set({start:a,end:s,size:c/o.min(),gradientSize:c/o.min()}),this.setState({knobPosition:r,areaDimensions:new h(this.state.areaDimensions.x,c)}),e.render()},e.prototype._getAreaStyle=function(){var t=this.state.knobPosition.clone().subtract(this.state.areaPosition),e=Math.atan2(t.x,t.y)*(180/Math.PI),n="rotate("+(-e).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:-.5*this.state.areaDimensions.x,marginTop:-.5*this.state.areaDimensions.y,transform:n,MozTransform:n,msTransform:n,WebkitTransform:n}},e.prototype._getKnobStyle=function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}},e.prototype._updatePositionsAndDimensions=function(){var t=this.context.editor,e=t.getOutputDimensions(),n=this._operation,o=n.getStart().clone().multiply(e),r=n.getEnd().clone().multiply(e),i=n.getSize()*e.min(),a=r.clone().subtract(o),s=o.clone().add(a.clone().divide(2)),c=new h(2*e.len(),i),l=a.len(),p=a.clone().divide(l).divide(2);this.setState({areaDimensions:c,areaPosition:s.clone(),knobPosition:s.clone().add(-i*p.y,i*p.x)})},e.prototype._updateOnCanvasControls=function(){var t=this.context.editor,e=t.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),o=this.context.appComponent.getBounds(),r=new d(Math.floor(e.x-(n.left-o.left)),Math.floor(e.y-(n.top-o.top)),Math.ceil(e.width)+1,Math.ceil(e.height)+1);c.Utils.styleElement(this._onCanvasControls,{left:r.x+"px",top:r.y+"px",width:r.width+"px",height:r.height+"px"}),this.forceUpdate()},e.prototype.render=function(){var t=this;return c.React.createElement(m,{innerRef:function(e){t._container=e}},c.React.createElement(c.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},c.React.createElement(y,{innerRef:function(e){t._onCanvasControls=e}},c.React.createElement(c.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},c.React.createElement(v,{className:void 0,style:this._getAreaStyle()})),c.React.createElement(c.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},c.React.createElement(g,{className:void 0,style:this._getKnobStyle()})))))},e}(c.SharedStateComponent);f.contextTypes=c.SharedStateComponent.contextTypes,e.a=f;var m=Object(c.adonis)(u).div("1rineb","CanvasControls"),y=c.adonis.div("aovk7s",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),g=Object(c.adonis)(p).div("120drhm","Knob"),v=c.adonis.div("36haff","Area")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(67),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.get("frame");this.sharedState.set({operation:e})},e.prototype._onOperationRemoved=function(t){},e.isEnabled=function(t){return t.isToolAllowed("frame")&&t.isToolEnabled("frame")},e}(a.BaseControls);l.clickAtPosition=a.BaseControls.clickAtPosition,l.getPreloadAssets=a.BaseControls.getPreloadAssets,l.identifier="frame",l.controlsComponent=c.a,l.canvasControlsComponent=a.BaseControls.canvasControlsComponent,l.iconPath="editor/controls/frame/icon.png",l.activeIconPath="editor/controls/frame/icon-active.png",l.requiredOperations=["frame"],l.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},e.default=l,s.a.Controls.FrameControls=l},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(68)),l=n(70),p={ROOT:1,CATEGORY:2,OPTIONS:3},u=function(t){function e(){var n;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var u=i(this,t.call.apply(t,[this].concat(c)));u._bindAll("_onFrameClick","_onReplaceClick","_onHistoryChange","_onOperationUpdated"),u._initFrameManager(),u._needsStyleFixes=!0;var h=p.ROOT,d=u.getSharedState("operation");return d&&d.getFrame()&&(h=p.OPTIONS),u.state={currentPanel:h},u._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),o(n,s.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),o(n,s.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),n),u}return a(e,t),e.prototype.fixStyles=function(){var e=this;return this._list.style.height="100%",t.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})},e.prototype.componentDidUpdate=function(t,e){this.state.currentPanel!==e.currentPanel&&this.fixStyles()},e.prototype._initFrameManager=function(){this._frameManager=new s.FrameManager(this.context.ui,this.props.options)},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onHistoryChange=function(){var t=this.context.editor,e=t.operations.get("frame");return!e||e&&!e.getFrame()?this.setState({currentPanel:p.ROOT}):this.setState({currentPanel:p.OPTIONS})},e.prototype._onReplaceClick=function(){this.setState({currentPanel:p.ROOT})},e.prototype._onCategoryClick=function(t){this.setState({currentPanel:p.CATEGORY,category:t})},e.prototype._onFrameClick=function(t){var e=this,n=this.context.editor;if(!t){var o=this.getSharedState("operation");return void(o&&(n.operations.remove(o),this.setSharedState({operation:null}),this.props.controls.addLocalHistorySnapshot("frame-image",!1),n.render()))}var r=new s.Frame(this.context.ui,t),i=n.operations.getOrCreate("frame"),a=void 0,c=setTimeout(function(){a=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);r.load().then(function(){a&&a.close(),c&&(clearTimeout(c),c=null),i.setFrame(r.getFrame()),e.props.controls.addLocalHistorySnapshot("frame-image",!1),n.render(),e.setSharedState({operation:i},!1),e.setState({currentPanel:p.OPTIONS})})},e.prototype._renderCurrentPanel=function(){var t=this,e=this.props.controls;switch(this.state.currentPanel){case p.ROOT:return s.React.createElement(c.a,{innerRef:function(e){t._list=e},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:e,ref:"panel"});case p.OPTIONS:return s.React.createElement(l.a,{innerRef:function(e){t._list=e},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:e,ref:"panel"})}},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){return this._renderCurrentPanel()},e}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(2)),c=n(69),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(s.b)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.frameManager,o=e.innerRef;return a.React.createElement(p,{innerRef:function(e){o&&o(e),t._wrapper=e},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},a.React.createElement(c.a,{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))},e}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,e.a=l;var p=a.adonis.div("rfecls","Wrapper")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItem),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onFrameClick=function(t){this.props.onFrameClick&&this.props.onFrameClick(t)},e.prototype._renderListItems=function(){var t=this,e=this.props.frames,n=void 0,o=this.getSharedState("operation");o&&o.getFrame()&&(n=o.getFrame().identifier);var r=this.getSharedState("selectedSprite");return r&&(n=r.getIdentifier()),e.map(function(e){var o=t._getAssetPath(e.thumbnail),r={background:"url('"+o+"') no-repeat center center",backgroundSize:"contain"};return a.React.createElement(p,{selected:e.identifier===n,key:e.identifier,onClick:t._onFrameClick.bind(t,e),className:void 0,twoColumns:!0},a.React.createElement(u,{style:r}))})},e.prototype.render=function(){var t=this.getSharedState("operation"),e=t&&t.getFrame();return a.React.createElement(l,null,a.React.createElement(p,{selected:!e,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},"None"),this._renderListItems())},e}(a.SharedStateComponent);c.contextTypes=a.SharedStateComponent.contextTypes,e.a=c;var l=a.adonis.ul("18qztam","FrameList"),p=Object(a.adonis)(s).li("u8nfgk","FrameListItem"),u=a.adonis.div("7r0ke8","FrameImage")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(2)),l=s.ControlsStyles.PlainControlItemBackground,p=function(t){function e(){var n;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var p=i(this,t.call.apply(t,[this].concat(c)));p._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange","_onHistoryChange"),p._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,p._onHistoryChange),o(n,s.Constants.EVENTS.HISTORY_REDO,p._onHistoryChange),n);var u=p.getSharedState("operation");return p.state={tintEnabled:u.getTintColor().a>0,tintColor:u.getTintColor()},p}return a(e,t),e.prototype._onTintToggle=function(t){var e=this.getSharedState("operation"),n=this.state.tintEnabled,o=e.getTintColor().clone();o.a=n?0:1,e.setTintColor(o),this.props.controls.addLocalHistorySnapshot("frame-tint-enabled"),this.context.editor.render(),this.setState({tintEnabled:!n})},e.prototype._onTintColorChange=function(t){this.getSharedState("operation").setTintColor(t.clone()),this.props.controls.addLocalHistorySnapshot("frame-tint-color",!0),this.context.editor.render(),this.forceUpdate()},e.prototype._onHistoryChange=function(){if(this.context.editor.operations.exists("frame")){var t=this.getSharedState("operation");t.getFrame()&&this.setState({tintEnabled:t.getTintColor().a>0,tintColor:t.getTintColor().clone()})}},e.prototype._onOpacityChange=function(t){this.getSharedState("operation").setAlpha(t/100),this.props.controls.addLocalHistorySnapshot("frame-opacity",!0),this.context.editor.render(),this.forceUpdate()},e.prototype._onWidthChange=function(t){var e=this.context.editor,n=this.getSharedState("operation"),o=n.getInputDimensions().min();n.setScale(t/o),this.props.controls.addLocalHistorySnapshot("frame-width",!0),e.render(),this.forceUpdate()},e.prototype.fixStyles=function(){var t=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(c.b)(function(){t._scrollbar.update()}):t._scrollbar.update()})},e.prototype.render=function(){var t=this,e=this.props,n=e.innerRef,o=e.onReplaceClick,r=this.getSharedState("operation"),i=r.getFrame(),a=r.getInputDimensions(),c=a.min(),l=i.tintable,p={background:"url('"+this._getAssetPath(i.thumbnail,!1)+"') center center / contain no-repeat"};return s.React.createElement(u,{innerRef:function(e){n&&n(e),t._wrapper=e},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement("div",null,s.React.createElement(h,null,s.React.createElement(d,null,s.React.createElement(f,null,s.React.createElement(m,{style:p,onClick:o})),s.React.createElement(y,null,s.React.createElement(g,null,this._t("editor.controls.frame.frames."+i.identifier)||i.defaultName),s.React.createElement(v,{onClick:o,className:void 0},this._t("editor.controls.frame.replace")))),s.React.createElement(s.SliderControlComponent,{minValue:0,value:Math.round(100*r.getAlpha()),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),s.React.createElement(s.SliderControlComponent,{minValue:.05*c,value:Math.round(r.getScale()*c),maxValue:.3*c,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),l&&s.React.createElement(s.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},s.React.createElement(b,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},e}(s.SharedStateComponent);p.contextTypes=s.SharedStateComponent.contextTypes,e.a=p;var u=s.adonis.div("rfecls","Wrapper"),h=s.adonis.div("1vnvjau","TopSection"),d=s.adonis.div("16woy02","Details"),f=Object(s.adonis)(l).div("6u8g0p","Thumbnail"),m=s.adonis.div("7r0ke8","ThumbnailImage"),y=s.adonis.div("1trlo6v","DetailsContainer"),g=s.adonis.div("w9mc0y","Title"),v=s.adonis.div("1rhky7p","ReplaceButton"),b=Object(s.adonis)(s.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(72),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onOperationRemoved=function(t){t===this.sharedState.get("operation")&&this._onEnter()},e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("overlay");this.sharedState.set({operation:e})},e.isEnabled=function(t){return t.isToolAllowed("overlay")&&t.isToolEnabled("overlay")},e}(a.BaseControls);l.clickAtPosition=a.BaseControls.clickAtPosition,l.getPreloadAssets=a.BaseControls.getPreloadAssets,l.identifier="overlay",l.controlsComponent=c.a,l.canvasControlsComponent=a.BaseControls.canvasControlsComponent,l.iconPath="editor/controls/overlay/icon.png",l.activeIconPath="editor/controls/overlay/icon-active.png",l.requiredOperations=["overlay"],l.defaultOptions={overlays:[],replaceOverlays:!1,availableOverlays:null},e.default=l,s.a.Controls.OverlayControls=l},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(5)),l=n(10),p=n(73),u=n(13),h=s.ControlsStyles.PlainControlItem,d=s.ControlsStyles.PlainControlItemBackground,f=s.ControlsStyles.ControlItemTitle,m=function(t){function e(){r(this,e);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var p=i(this,t.call.apply(t,[this].concat(a)));p._bindAll("_onOperationUpdated");var u=p.context,h=u.ui,d=u.theme;return p._thumbnailLoadQueue=new l.a(1,1/0,d.listItemSlideInDelay),p._thumbnailsLoaded={},p._overlayManager=new s.OverlayManager(h,p.props.options),p._events=o({},s.Constants.EVENTS.OPERATION_UPDATED,p._onOperationUpdated),p.state={},p}return a(e,t),e.prototype.componentDidMount=function(){var e=this;t.prototype.componentDidMount.call(this),this._overlayManager.getOverlays().forEach(function(t){e._thumbnailLoadQueue.add(function(){return c.a.load(e._getAssetPath(t.thumbnail)).then(function(n){e._thumbnailsLoaded[t.identifier]=n,e.forceUpdate()})})})},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._thumbnailLoadQueue.dispose()},e.prototype._onOperationUpdated=function(t){t===this.getSharedState("operation")&&this.forceUpdate()},e.prototype._onBlendModeChange=function(){this.props.controls.addLocalHistorySnapshot("overlay-blend-mode",!1)},e.prototype._onAlphaChange=function(){this.props.controls.addLocalHistorySnapshot("overlay-alpha",!0)},e.prototype._onItemClick=function(t){var e=this,n=this.context.editor,o=this.getSharedState("operation");if(!t)return o.set({image:null,identifier:null,alpha:1}),n.render(),this.forceUpdate();if(t.identifier!==o.getIdentifier()){var r=this._getAssetPath(t.image),i=u.a[t.blendMode],a=void 0,l=setTimeout(function(){a=s.ModalManager.instance.displayLoading(e._t("loading.loading"))},100);c.a.load(r).then(function(r){a&&a.close(),l&&(clearTimeout(l),l=null);var s={identifier:t.identifier,image:r,blendMode:i,alpha:void 0===t.intensity?1:t.intensity};o.set(s),e.props.controls.addLocalHistorySnapshot("overlay-image",!1),n.render(),e.forceUpdate()})}},e.prototype._renderListItems=function(){var t=this,e=this.getSharedState("operation");return this._overlayManager.getOverlays().map(function(n){return s.React.createElement(p.a,{key:n.identifier,overlay:n,selected:e.getIdentifier()===n.identifier,visible:!!t._thumbnailsLoaded[n.identifier],onClick:t._onItemClick.bind(t,n),onBlendModeChange:t._onBlendModeChange.bind(t),onAlphaChange:t._onAlphaChange.bind(t)})})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("operation"),n=!e.getIdentifier();return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(e){t._scrollbar=e}},s.React.createElement(y,null,s.React.createElement(g,{onClick:this._onItemClick.bind(this,null)},s.React.createElement(v,{selected:n},s.React.createElement(b,null,this._t("editor.controls.overlay.overlays.none")))),this._renderListItems()))},e}(s.ControlsComponent);m.contextTypes=s.ControlsComponent.contextTypes,m.propTypes=s.ControlsComponent.propTypes,m.RootElement=s.ControlsComponent.RootElement,e.a=m;var y=s.adonis.ul("9uviv9","List"),g=Object(s.adonis)(h).div("1sgdmny","NoneItem"),v=Object(s.adonis)(d).div("yogtp1","NoneItemBackground"),b=Object(s.adonis)(f).span("5krmrh","ItemTitle")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),c=(n.n(s),n(74)),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=s.ControlsStyles.ControlItem,h=s.ControlsStyles.ControlItemActiveOverlay,d=s.ControlsStyles.ControlItemTitle,f=function(t){function e(){var n;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var p=i(this,t.call.apply(t,[this].concat(c)));return p.state={hovered:!1},p._bindAll("_onBlendModeChange","_onAlphaChange","_onHistoryChange"),p._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,p._onHistoryChange),o(n,s.Constants.EVENTS.HISTORY_REDO,p._onHistoryChange),n),p}return a(e,t),e.prototype._onHistoryChange=function(){this.forceUpdate()},e.prototype._onBlendModeChange=function(t){this.props.onBeforeBlendModeChange&&this.props.onBeforeBlendModeChange();var e=this.context.editor;this.getSharedState("operation").setBlendMode(t),this.props.onBlendModeChange&&this.props.onBlendModeChange(),e.render(),this.forceUpdate()},e.prototype._onAlphaChange=function(t){this.props.onBeforeAlphaChange&&this.props.onBeforeAlphaChange();var e=this.context.editor;this.getSharedState("operation").setAlpha(t),this.props.onAlphaChange&&this.props.onAlphaChange(),e.render(),this.forceUpdate()},e.prototype.shouldComponentUpdate=function(t,e){return this.props.selected!==t.selected||this.props.visible!==t.visible||this.state.hovered!==e.hovered||this.props.overlay!==t.overlay||!(this.props.intensity===t.intensity||!t.selected)},e.prototype.render=function(){var t=this,e=this.props,n=e.lastChild,o=e.onClick,r=e.selected,i=e.visible,a=e.overlay,c=this.getSharedState("operation"),p=c.getAlpha(),u={lastChild:n,onClick:o,visible:i};return u.style={backgroundImage:"url('"+this._getAssetPath(a.thumbnail)+"')"},s.React.createElement(m,l({},u,{className:void 0,animated:!0,innerRef:function(e){t._container=e},onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})}}),s.React.createElement(g,{selected:r},s.React.createElement(s.Transition,{active:!r},s.React.createElement(_,null,s.React.createElement(v,{hovered:this.state.hovered},this._t("editor.controls.overlay.overlays."+a.identifier)||a.defaultName))),s.React.createElement(s.Transition,{active:r},s.React.createElement(_,null,s.React.createElement(b,null,"Blending"),s.React.createElement(C,{value:c.getBlendMode(),onChange:this._onBlendModeChange}),r&&s.React.createElement(y,null,s.React.createElement(s.SliderComponent,{minValue:0,maxValue:1,valueUnit:"",middleDot:!1,value:p,onChange:this._onAlphaChange})),s.React.createElement(S,{rendered:!0,visible:!0})))))},p(e,[{key:"container",get:function(){return this._container}}]),e}(s.SharedStateComponent);f.contextTypes=s.SharedStateComponent.contextTypes,e.a=f;var m=Object(s.adonis)(u).div("193vjnw",{lastChild:"229bd5"},"Item"),y=s.adonis.div("12dmntm","Slider"),g=s.adonis.div("1m161zg","ItemContainer"),v=Object(s.adonis)(d).span("120drhm","ItemTitle"),b=Object(s.adonis)(v)("1kbikta","BlendingLabel"),_=s.adonis.div("tj7k39",{rendered:"cuo4v2",visible:"82svov"},"ItemContent"),S=Object(s.adonis)(h).div("120drhm","Overlay"),C=Object(s.adonis)(c.a)("ii685b","BlendingControl")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),n(13)),l=s.ControlsStyles.ControlItemTitle,p=a.Utils.flipObject(c.a),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onPreviousClick","_onNextClick"),s}return i(e,t),e.prototype._onPreviousClick=function(t){t.preventDefault(),t.stopPropagation();var e=Object.keys(p),n=e.indexOf(this.props.value.toString()),o=(n+e.length-1)%e.length,r=parseInt(e[o],10);this.props.onChange&&this.props.onChange(r)},e.prototype._onNextClick=function(t){t.preventDefault(),t.stopPropagation();var e=Object.keys(p),n=e.indexOf(this.props.value.toString()),o=(n+e.length+1)%e.length,r=parseInt(e[o],10);this.props.onChange&&this.props.onChange(r)},e.prototype.render=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-left.png",!0)+"')"},e={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-right.png",!0)+"')"},n=this.props.value;return s.React.createElement(h,{styles:this.props.styles},s.React.createElement(f,{onClick:this._onPreviousClick,style:t}),s.React.createElement(d,null,this._t("editor.controls.overlay.blendModes."+p[n])),s.React.createElement(f,{onClick:this._onNextClick,style:e}))},e}(s.BaseComponent);u.contextTypes=s.BaseComponent.contextTypes,e.a=u;var h=s.adonis.div("15zte1z","BlendingControlContainer");u.RootElement=h;var d=Object(s.adonis)(l).div("1v7ogyl","Label"),f=s.adonis.div("1v32l0l","Arrow")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n.n(a),n(0)),c=n.n(s),l=n(76),p=n(78),u=a.Math.Vector2,h=new u(50,50),d=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.exists("transform"),n=t.operations.getOrCreate("transform");n.setEnabled(!1,!1);var o=t.operations.exists("orientation"),r=t.operations.getOrCreate("orientation"),i={end:new u(1,1),rotation:0,start:new u(0,0),textureScale:1},s=n.getInputDimensions(!1),c=n.getNewDimensions(s),l=i,p=l,h=p.start,d=p.end,f=p.textureScale,m=p.rotation;if(e){l=n.serializeOptions(),h=l.start,d=l.end,m=l.rotation,f=l.textureScale,delete l.enabled;var y=n.calculateScale(m),g=n.getInputDimensions(!1),v=Math.cos(m),b=Math.sin(m),_=d.clone().subtract(h).divide(2),S=h.clone().add(_).multiply(g),C=S.subtract(g.clone().multiply(.5)),O=new u(C.x*v-C.y*b,C.x*b+C.y*v).multiply(y),w=g.clone().multiply(.5).add(O),E=w.clone().divide(g),R=E.clone().subtract(_.clone().multiply(y)),x=E.clone().add(_.clone().multiply(y));h=R,d=x}t.broadcastTransform(n,i);var T=r.serializeOptions();t.setSpriteScale(n.calculateScale()),t.setRotation(m),n.set(i,e);var D=t.features.isEnabledByOptions("export");t.zoom.auto(!0,!1,function(){t.features.disable("zoom","drag","export")},!1),this.sharedState.set({transformOperation:n,initialTransformOptions:l,newTransformOptions:{start:h,end:d,rotation:m,textureScale:f},transformOperationExistedBeforeEntering:e,exportEnabled:D,orientationOperation:r,initialOrientationOptions:T,newOrientationOptions:a.Utils.cloneOptions(T),orientationOperationExistedBeforeEntering:o,start:u.fromObject(h),end:u.fromObject(d),rotation:m,orientationRotation:r.getRotation(),flipVertically:r.getFlipVertically(),flipHorizontally:r.getFlipHorizontally(),initialDimensions:c,initialRatio:n._ratio||null})},e.prototype._onBeforeLeave=function(){var t=this,e=this.context.ui.translate.bind(this.context.ui);return new Promise(function(n,o){var r=t.sharedState.get("changesDone"),i=t.sharedState.get("changesAccepted");if(r&&!i){return void s.ModalManager.instance.displayWarning(e("warnings.discardChanges.title"),e("warnings.discardChanges.text"),[e("warnings.discardChanges.buttons.cancel"),e("warnings.discardChanges.buttons.discard")]).on("button",function(t){return 0===t?n({leave:!1}):1===t?n({leave:!0,data:{discard:!0}}):void 0})}n({leave:!0})})},e.prototype._onLeave=function(t){var e=t.discard,n=this.context.editor,o=this.sharedState.get("transformOperation"),r=this.sharedState.get("orientationOperation");if(e){var i=this.sharedState.get("initialOrientationOptions");r.set(i);var a=this.sharedState.get("initialTransformOptions");n.broadcastTransform(o,a),o.set(a),o.setTextureScale(this._calculateTextureScale()),o.setEnabled(!0)}else{var s={rotation:0,flipVertically:!1,flipHorizontally:!1};r.optionsEqual(s)&&n.operations.remove(r,!1);var c=this.sharedState.get("newTransformOptions"),l=c.start,p=c.end,h=c.textureScale,d=c.rotation;h=this._calculateTextureScale(),l=l.clone(),p=p.clone();var f=o.calculateScale(d),m=o.getInputDimensions(!1),y=Math.cos(-d),g=Math.sin(-d),v=p.clone().subtract(l).divide(2),b=l.clone().add(v).multiply(m),_=b.subtract(m.clone().multiply(.5)),S=new u(_.x*y-_.y*g,_.x*g+_.y*y).divide(f),C=m.clone().multiply(.5).add(S),O=C.clone().divide(m),w=O.clone().subtract(v.clone().divide(f)),E=O.clone().add(v.clone().divide(f)),R={start:new u(0,0),end:new u(1,1),rotation:0,textureScale:1},x={start:w,end:E,textureScale:h,rotation:d};x.start.equals(R.start)&&x.end.equals(R.end)&&x.rotation===R.rotation&&x.textureScale===R.textureScale?n.operations.remove(o,!1):(n.broadcastTransform(o,x),o.set(x),o.setTextureScale(this._calculateTextureScale()),o.setEnabled(!0))}n.setRotation(0),n.setSpriteScale(1),n.features.enable("zoom","drag","export"),this.sharedState.get("exportEnabled")&&n.features.enable("export"),n.zoom.auto(!0)},e.prototype._getGlobalHistoryData=function(){return{ratio:this.sharedState.get("ratio")}},e.prototype._onOperationRemoved=function(t){},e.prototype._calculateTextureScale=function(){var t=this.sharedState.get("transformOperation"),e=this.sharedState.get("ratio");if(!e||!e.dimensions)return 1;var n=this.sharedState.get("start"),o=this.sharedState.get("end"),r=o.clone().subtract(n),i=t.getInputDimensions(!1).multiply(r);return e.dimensions.x/i.x},e.prototype.fixTransform=function(t,e,n,o){var r=this.context.editor,i=this.sharedState.get("transformOperation"),a=i.getInputDimensions(!1),c=this.sharedState.get("ratio"),l=c.ratio,p=c.dimensions;p&&!l&&(l=p.x/p.y);var d=void 0;"*"!==l&&(d=s.Utils.findIntegerFraction(l));var f=new u;f.x="left"===n?e.x:1-t.x,f.y="top"===o?e.y:1-t.y;var m=a.clone().multiply(f),y=e.clone().subtract(t),g=y.clone().multiply(a),v=h.clone().divide(r.zoom.targetLevel),b=new u(Math.min(v.x,.1*a.x),Math.min(v.y,.1*a.y));if("*"!==l&&b.divide(d).round().multiply(d),g.x=Math.min(Math.max(b.x,g.x),m.x),"*"!==l){var _=Math.floor(a.x/d.x);g.x=Math.max(1,Math.min(_,Math.round(g.x/d.x)))*d.x,g.y=g.x/l}g.y=Math.min(Math.max(b.y,g.y),m.y),"*"!==l&&(g.x=g.y*l);var S=g.divide(a);return"top"===o?t.y=e.y-S.y:e.y=t.y+S.y,"left"===n?t.x=e.x-S.x:e.x=t.x+S.x,"*"===l&&(t.multiply(a).round().divide(a),e.multiply(a).round().divide(a)),{start:t,end:e}},e.getPreloadAssets=function(t){var e=t.getOptions(),n=a.Utils.defaults(e.editor.controlsOptions.transform,this.defaultOptions),o=["editor/controls/transform/dimensions-cross.png","editor/controls/transform/degree-slider.png","editor/controls/transform/flip.png","editor/controls/transform/lock.png","editor/controls/transform/rotate.png"];return new s.TransformRatioManager(n).getCategories().forEach(function(t){t.ratios.forEach(function(t){var e=t.identifier;o.push("editor/controls/transform/ratios/"+e+"-default.png","editor/controls/transform/ratios/"+e+"-hover.png","editor/controls/transform/ratios/"+e+"-active.png")})}),o},e.isEnabled=function(t){return t.isToolAllowed("transform")&&t.isToolEnabled("transform")},e}(s.BaseControls);d.clickAtPosition=s.BaseControls.clickAtPosition,d.identifier="transform",d.controlsComponent=p.a,d.canvasControlsComponent=l.a,d.iconPath="editor/controls/transform/icon.png",d.activeIconPath="editor/controls/transform/icon-active.png",d.requiredOperations=["transform","orientation"],d.defaultOptions={categories:[],replaceCategories:!1,availableRatios:null,enableRotation:!0,enableStraighten:!0,enableFlip:!0},e.default=d,c.a.Controls.TransformControls=d},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(2)),p=n(77),u=s.Math.Vector2,h=function(t){function e(){var n;r(this,e);for(var a=arguments.length,l=Array(a),p=0;p<a;p++)l[p]=arguments[p];var u=i(this,t.call.apply(t,[this].concat(l)));return u._bindAll("_onZoomDone","_onCornerDrag","_onCenterDragStart","_onCenterDrag","_onRotationChange","_onOperationUpdated","_onOperationRemoved","_onAcceptClick","_onAcceptMouseDown"),u._events=(n={},o(n,c.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),o(n,c.Constants.EVENTS.OPERATION_REMOVED,u._onOperationRemoved),o(n,c.Constants.EVENTS.ZOOM_DONE,u._onZoomDone),n),u.state=s.Utils.extend(u.state,{visible:!1}),u}return a(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return!t.start.equals(e.start)||!t.end.equals(e.end)||t.orientationRotation!==e.orientationRotation||t.ratio!==e.ratio||t.changesDone!==e.changesDone},e.prototype.sharedStateDidChange=function(t,e){(t.ratio&&t.ratio.ratio)!==(e.ratio&&e.ratio.ratio)&&this._calculateRatioFraction()},e.prototype.sharedComponentWillUpdate=function(t,e){t.orientationRotation!==e.orientationRotation&&this._updateTransformAreaStyles()},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._updateTransformAreaStyles(),this._calculateRatioFraction(),this.forceUpdate()},e.prototype.componentWillUpdate=function(){this._updateTransformAreaStyles()},e.prototype.componentDidUpdate=function(){!this._transformContainerRect&&this.getSharedState("ratio")&&(this._updateTransformAreaStyles(),this.forceUpdate())},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this._zoomAFRequest&&(Object(l.a)(this._zoomAFRequest),this._zoomAFRequest=null)},e.prototype._calculateRatioFraction=function(){var t=this.getSharedState("ratio");t&&"*"!==t.ratio&&(this._ratioFraction=c.Utils.findIntegerFraction(t.ratio))},e.prototype._onCenterDragStart=function(t){var e=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),areaDimensions:this._transformContainerRect.getSize(),imageDimensions:e.getInputDimensions(!1)}},e.prototype._onCenterDrag=function(t){var e=this._dragOptions,n=e.initialStart,o=e.initialEnd,r=e.areaDimensions,i=e.imageDimensions,a=t.clone().divide(r),s=o.clone().subtract(n),c=new u(0,0),l=new u(1,1).subtract(s),p=n.clone().add(a).clamp(c,l),h=p.clone().add(s);p.multiply(i).floor().divide(i),h.multiply(i).floor().divide(i),this.props.controls.fixTransform(p,h,"right","bottom");var d=this.getSharedState("newTransformOptions");d.start=p,d.end=h,this.setSharedState({start:p,end:h,changesDone:this.getSharedState("changesDone")||!(n.equals(p)&&o.equals(h))})},e.prototype._onCornerDragStart=function(t,e,n){var o=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),verticalSide:t,horizontalSide:e,areaDimensions:this._transformContainerRect.getSize(),imageDimensions:o.getInputDimensions(!1)},this._currentCorner={vertical:t,horizontal:e}},e.prototype._onCornerDrag=function(t){var e=this._dragOptions,n=e.initialStart,o=e.initialEnd,r=e.verticalSide,i=e.horizontalSide,a=e.areaDimensions,s=t.clone().divide(a),l=n.clone(),p=o.clone();("top"===r?l:p).y+=s.y,("left"===i?l:p).x+=s.x,this.props.controls.fixTransform(l,p,i,r);var u=this.getSharedState("newTransformOptions");u.start=l,u.end=p,this.setSharedState({start:l,end:p,changesDone:!0}),this._emitEvent(c.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype._onRotationChange=function(t){var e=this.getSharedState("transformOperation"),n=this.context.editor;n.setRotation(t),n.setSpriteScale(e.calculateScale(t)),this.getSharedState("newTransformOptions").rotation=t,n.render(),this.setSharedState({rotation:t,changesDone:!0})},e.prototype._onAcceptClick=function(t){t.preventDefault(),t.stopPropagation(),this.getSharedState("changesDone")&&(this.setSharedState({changesAccepted:!0}),this.context.screen.switchToControls("default"))},e.prototype._onAcceptMouseDown=function(t){t.stopPropagation()},e.prototype._onZoomDone=function(){var t=this;this._zoomAFRequest=Object(l.b)(function(){t._updateTransformAreaStyles(),t.state.visible=!0,t.forceUpdate(),t._zoomAFRequest=null})},e.prototype._onOperationUpdated=function(t){if(t===this.getSharedState("transformOperation")){var e=this.context.editor,n=e.getSDK();n.setRotation(t.getRotation()),n.setSpriteScale(t.calculateScale()),e.render(),this.setSharedState({rotation:t.getRotation()}),this.forceUpdate()}},e.prototype._onOperationRemoved=function(t){"transform"!==t.constructor.identifier&&"orientation"!==t.constructor.identifier||this.forceUpdate()},e.prototype._onFlipClick=function(t){var e=this.context.editor,n=this.getSharedState("orientationOperation"),r=t.charAt(0).toUpperCase()+t.slice(1)+"ly",i=!this.getSharedState("flip"+r);this.setSharedState(o({},"flip"+r,i)),n.flip(t);var a=this.getSharedState("newTransformOptions"),s=-1*this.getSharedState("rotation");e.setRotation(s);var c=this.getSharedState("start").clone(),l=this.getSharedState("end").clone(),p=c.clone();"horizontal"===t?(c.set(1-l.x,c.y),l.set(1-p.x,l.y)):"vertical"===t&&(c.set(c.x,1-l.y),l.set(l.x,1-p.y)),a.start=c,a.end=l,a.rotation=s,this.setSharedState({start:c,end:l,rotation:s,changesDone:!0,newTransformOptions:a}),this.forceUpdate(),e.broadcastFlip(t),e.render()},e.prototype._onRotateClick=function(t){var e=this,n="cw"===t?90:-90,o=this.context.editor,r=this.getSharedState("orientationOperation"),i=(r.getRotation()+n)%360;r.set({rotation:i});var a={orientationRotation:i},s=this.getSharedState("newTransformOptions"),l=this.getSharedState("ratio");if(l)if(l.dimensions||"*"!==l.ratio)this._emitEvent(c.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO),this._emitEvent(c.Constants.EVENTS.TRANSFORM_RESIZE);else{var p=this.getSharedState("start").clone(),u=this.getSharedState("end").clone(),h=p.clone();"cw"===t?(p.set(1-u.y,h.x),u.set(1-h.y,u.x)):"ccw"===t&&(p.set(h.y,1-u.x),u.set(u.y,1-h.x)),a.start=p,a.end=u,s.start=p,s.end=u}this.setSharedState({changesDone:!0,newTransformOptions:s}),o.broadcastRotate(n),o.zoom.auto(!0,!0,function(){e.setSharedState(a)})},e.prototype._updateTransformAreaStyles=function(){this._transformContainerRect=this.getImageBoundingRect(),this._imageContainer&&c.Utils.styleElement(this._imageContainer,{left:this._transformContainerRect.x+"px",top:this._transformContainerRect.y+"px",width:this._transformContainerRect.width+"px",height:this._transformContainerRect.height+"px"})},e.prototype._getAreaStyles=function(){var t=void 0,e=void 0,n=void 0,o=void 0,r=void 0;this._transformContainer?(t=this._transformContainerRect.getSize(),r=this._transformContainerRect.getPosition(),e=this.getSharedState("start").clone().multiply(t),n=this.getSharedState("end").clone().multiply(t),o=n.clone().subtract(e)):(t=new u(0,0),e=new u(0,0),o=new u(0,0),r=new u(0,0));var i=this._getDimensionsStyles(o.x,o.y);return{topLeft:this._getDimensionsStyles(e.x+r.x,e.y+r.y),topCenter:this._getDimensionsStyles(o.x,e.y+r.y),centerLeft:this._getDimensionsStyles(e.x+r.x,o.y),center:{width:i.width},innerTransformContainer:i}},e.prototype._getDimensionsStyles=function(t,e){return{width:Math.max(1,t),height:Math.max(1,e)}},e.prototype._renderOnCanvasControls=function(){var t=this,e=this._getAreaStyles(),n=!this.getSharedState("ratio"),o={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/accept.png",!0)+"')"};return c.React.createElement(f,{innerRef:function(e){t._container=e}},c.React.createElement(v,{className:"js-imageContainer",innerRef:function(e){t._imageContainer=e}},c.React.createElement(P,{className:void 0,enabled:this.getSharedState("changesDone"),onClick:this._onAcceptClick,onMouseDown:this._onAcceptMouseDown,style:o})),c.React.createElement(b,{visible:this.state.visible,innerRef:function(e){t._transformContainer=e}},c.React.createElement(S,null,c.React.createElement(E,{style:e.topLeft}),c.React.createElement(E,{style:e.topCenter}),c.React.createElement(E,null)),c.React.createElement(S,null,c.React.createElement(E,{style:e.centerLeft}),c.React.createElement(c.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag,disabled:n},c.React.createElement(w,{style:e.center,className:void 0,undraggable:n},!n&&[c.React.createElement(c.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","left"),onDrag:this._onCornerDrag,key:"topLeft"},c.React.createElement(R,{top:!0,left:!0,className:void 0})),c.React.createElement(c.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","right"),onDrag:this._onCornerDrag,key:"topRight"},c.React.createElement(R,{top:!0,right:!0,className:void 0})),c.React.createElement(c.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","left"),onDrag:this._onCornerDrag,key:"bottomLeft"},c.React.createElement(R,{bottom:!0,left:!0,className:void 0})),c.React.createElement(c.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","right"),onDrag:this._onCornerDrag,key:"bottomRight"},c.React.createElement(R,{bottom:!0,right:!0,className:void 0})),c.React.createElement(_,{style:e.innerTransformContainer,className:void 0,key:"inner"},c.React.createElement(S,null,c.React.createElement(O,{right:!0,bottom:!0}),c.React.createElement(O,{right:!0,bottom:!0}),c.React.createElement(O,{bottom:!0})),c.React.createElement(S,null,c.React.createElement(O,{right:!0,bottom:!0}),c.React.createElement(O,{right:!0,bottom:!0}),c.React.createElement(O,{bottom:!0})),c.React.createElement(S,null,c.React.createElement(O,{right:!0}),c.React.createElement(O,{right:!0}),c.React.createElement(O,null)))])),c.React.createElement(E,null)),c.React.createElement(S,null,c.React.createElement(E,null),c.React.createElement(E,null),c.React.createElement(E,null))))},e.prototype._renderControls=function(){var t={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/flip.png",!0)+"')"},e={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/rotate.png",!0)+"')"},n=this.props.options,o=n.enableRotation,r=n.enableFlip,i=n.enableStraighten;return c.React.createElement(d,{className:void 0},this._renderOnCanvasControls(),c.React.createElement(m,null,c.React.createElement(y,{className:void 0},r&&[c.React.createElement(T,{style:t,key:"flip-h",onClick:this._onFlipClick.bind(this,"horizontal"),className:void 0}),c.React.createElement(T,{vertical:!0,style:t,key:"flip-v",onClick:this._onFlipClick.bind(this,"vertical"),className:void 0})],i&&c.React.createElement(p.a,{value:this.getSharedState("rotation"),onChange:this._onRotationChange}),o&&[c.React.createElement(D,{style:e,key:"rotate-ccw",onClick:this._onRotateClick.bind(this,"ccw"),className:void 0}),c.React.createElement(D,{clockwise:!0,style:e,key:"rotate-cw",onClick:this._onRotateClick.bind(this,"cw"),className:void 0})])))},e}(c.CanvasControlsComponent);h.contextTypes=c.CanvasControlsComponent.contextTypes,e.a=h;var d=c.adonis.div("120drhm","CanvasControls"),f=c.adonis.div("8gacw5",{draggable:"ovipzq"},"OnCanvasControls"),m=c.adonis.div("nmw377","BottomControlsContainer"),y=c.adonis.div("1gk061a","BottomControls"),g=c.adonis.div("1v9hd4r","TransformContainer"),v=c.adonis.div("15kzu1c","ImageContainer"),b=Object(c.adonis)(g)("1kjfwvf",{visible:"zgbg08"},"OuterTransformContainer"),_=Object(c.adonis)(g)("120drhm","InnerTransformContainer"),S=c.adonis.div("15u7gri","TransformRow"),C=c.adonis.div("1q481v0","TransformCell"),O=Object(c.adonis)(C)("1qh9j3j",{top:"1mup05p",right:"12l7t8k",bottom:"1ebuiz6",left:"txqhsl"},"BorderedTransformCell"),w=Object(c.adonis)(C)("52h18o",{undraggable:"16s6vgr"},"CenterTransformCell"),E=Object(c.adonis)(C)("17b4s67","DarkTransformCell"),R=c.adonis.div("1tai30v",{top:"1stnln8",right:"1wj5vxi",bottom:"17bojqc",left:"1a9ompl"},"Dragger"),x=c.adonis.button("127b6wl","Button"),T=Object(c.adonis)(x)("120drhm",{vertical:"12fqiy2"},"FlipButton"),D=Object(c.adonis)(x)("120drhm",{clockwise:"o7ss47"},"RotateButton"),P=c.adonis.div("sbdqjz",{enabled:"ro0g1e"},"AcceptButton")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onDragStart","_onDrag"),s._width=0,s.state={value:s.props.value||0},s}return i(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._degreesPerPixel=90/217},e.prototype.componentWillReceiveProps=function(t){this.state.value!==t.value&&this.setState({value:t.value})},e.prototype._onDragStart=function(){this._initialDegrees=180*this.state.value/Math.PI},e.prototype._onDrag=function(t){var e=this._initialDegrees+t.x*this._degreesPerPixel;e=Math.min(45,Math.max(e,-45));var n=e*Math.PI/180;this.setState({value:n}),this.props.onChange&&this.props.onChange(n)},e.prototype._getValue=function(){return Math.round(180*this.state.value/Math.PI)+""},e.prototype._getIndicatorPosition=function(){var t=45*Math.PI/180;return this._width/2+this.state.value/t*(this._width/2)},e.prototype._getIndicatorStyles=function(){var t=45*Math.PI/180;return{left:{left:108.5+this.state.value/t*108.5},right:{right:108.5-this.state.value/t*108.5}}},e.prototype.render=function(){var t=this._getIndicatorStyles(),e={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:t.left.left-4},n={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:t.left.left+35};return a.React.createElement(a.DraggableComponent,{onStart:this._onDragStart,onDrag:this._onDrag},a.React.createElement(c,{className:void 0},a.React.createElement(l,{style:e},a.React.createElement(p,{style:t.left})),a.React.createElement(u,{className:void 0},this._getValue()),a.React.createElement(l,{style:n},a.React.createElement(p,{style:t.right}))))},e}(a.BaseComponent));s.contextTypes=a.BaseComponent.contextTypes,e.a=s;var c=a.adonis.div("tix0xu","Wrapper"),l=a.adonis.div("6mdana","RotationSlider"),p=a.adonis.div("nxjpo","Indicator"),u=a.adonis.div("d97kws","Value")},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),c=(n.n(s),n(0)),l=(n.n(c),n(79)),p=n(80),u=c.GroupedControlsStyles.ControlGroupList,h=c.GroupedControlsStyles.ControlGroup,d=c.GroupedControlsStyles.ControlGroupTitle,f=s.Math.Vector2,m=function(t){function e(){var n;r(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var p=i(this,t.call.apply(t,[this].concat(s)));return p._bindAll("_reapplyRatio","_onHistoryChange","_onResetDefaultClick","_onOperationRemoved","_onOperationUpdated"),p._events=(n={},o(n,c.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO,p._reapplyRatio),o(n,c.Constants.EVENTS.OPERATION_REMOVED,p._onOperationRemoved),o(n,c.Constants.EVENTS.OPERATION_UPDATED,p._onOperationUpdated),o(n,c.Constants.EVENTS.HISTORY_UNDO,p._onHistoryChange),o(n,c.Constants.EVENTS.HISTORY_REDO,p._onHistoryChange),n),p._transformRatioManager=new c.TransformRatioManager(p.props.options),p.state.ratio=null,p._selectInitialRatio(!p.getSharedState("transformOperationExistedBeforeEntering")),p}return a(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return t.ratio!==e.ratio},e.prototype._onHistoryChange=function(t){var e=this.context.editor,n={},o=e.operations.get("transform");if(o){var r=this.getSharedState("newTransformOptions");r.start=o.getStart(),r.end=o.getEnd(),r.rotation=o.getRotation(),r.textureScale=o.getTextureScale(),n.newTransformOptions=r,t.data&&t.data.ratio&&(n.ratio=t.data.ratio),this.setSharedState(n)}},e.prototype._onOperationUpdated=function(t){var e=this.getSharedState("transformOperation");e===t&&this.setSharedState({rotation:e.getRotation(),start:e.getStart().clone(),end:e.getEnd().clone()})},e.prototype._onOperationRemoved=function(t){var e=this.context.editor;if(this.getSharedState("transformOperation")===t){var n=e.operations.getOrCreate("transform",{enabled:!1}),o=e.getSDK();o.setRotation(0),o.setSpriteScale(1),this.setSharedState({transformOperation:n,rotation:0,initialTransformOptions:n.serializeOptions(),transformOperationExistedBeforeEntering:!1}),n._ratio=null,this._selectInitialRatio(!0,!0)}if(this.getSharedState("orientationOperation")===t){var r=e.operations.getOrCreate("orientation");this.setSharedState({orientationOperation:r,rotation:0,flipVertically:!1,flipHorizontally:!1})}},e.prototype._onResetDefaultClick=function(){var t=this.context.editor,e=this.getSharedState("orientationOperation"),n=e.getRotation();e.set({flipHorizontally:!1,flipVertically:!1,rotation:0}),t.broadcastRotate(-n);var o=this.getSharedState("newTransformOptions");o.start=new f(0,0),o.end=new f(1,1),o.rotation=0,this.setSharedState({ratio:null,start:new f(0,0),end:new f(1,1),orientationRotation:0,rotation:0,flipVertically:!1,flipHorizontally:!1,changesDone:!0}),this._emitEvent(c.Constants.EVENTS.TRANSFORM_RESIZE),t.setRotation(0),t.setSpriteScale(1),t.zoom.auto(!0,!0)},e.prototype._reapplyRatio=function(){var t=this.getSharedState("ratio");this._selectRatio(t)},e.prototype._selectRatio=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.getSharedState("transformOperation");e&&t&&this._setDefaultOptionsForRatio(t,n),o._ratio=t,this.setSharedState({ratio:t},n),n&&this.setSharedState({changesDone:!0}),this._emitEvent(c.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype._setDefaultOptionsForRatio=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||{},o=n.ratio,r=n.dimensions,i=new f,a=new f;r&&!o&&(o=r.x/r.y);var s=o&&c.Utils.findIntegerFraction(o);if(o&&"*"!==o){var l=this.getSharedState("transformOperation"),p=l.getInputDimensions(!1),u=p.x/p.y,h=void 0,d=void 0;if(u<=o){var m=Math.floor(p.x/s.x)*s.y;d=Math.floor(Math.min(m,p.y)/s.y)*s.y,h=d*o,i.set((p.x-h)/2,(p.y-d)/2).floor()}else{var y=Math.floor(p.y/s.y)*s.x;h=Math.floor(Math.min(y,p.x)/s.x)*s.x,d=h/o,i.set((p.x-h)/2,(p.y-d)/2).floor()}a.copy(i).add(h,d),i.divide(p),a.divide(p)}else i=new f(0,0),a=new f(1,1);var g=this.getSharedState("newTransformOptions");g.start=i,g.end=a,this.setSharedState({start:i,end:a},e)},e.prototype._selectInitialRatio=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getSharedState("transformOperation"),o=null,r=this._transformRatioManager.getCategories(),i=r.map(function(t){return t.ratios}).reduce(function(t,e){return t.concat(e)}),a=n._ratio;if(a){o=i.filter(function(t){return t===a})[0]}if(!o){o=i.filter(function(t){return t.selected}).pop()}return o||(o=i[0]),this._selectRatio(o,t,e)},e.prototype._renderSections=function(){var t=this,e=function(e){return c.React.createElement(v,{key:e.identifier},c.React.createElement(b,null,t._t("editor.controls.transform.ratios."+e.identifier+".name")||e.defaultName),c.React.createElement(_,null,n(e)))},n=function(e){return t._transformRatioManager.getRatiosForCategory(e).map(function(n){var o=t.getSharedState("ratio")===n;return c.React.createElement(l.a,{key:n.identifier,defaultIconPath:"editor/controls/transform/ratios/"+n.identifier+"-default.png",hoverIconPath:"editor/controls/transform/ratios/"+n.identifier+"-hover.png",activeIconPath:"editor/controls/transform/ratios/"+n.identifier+"-active.png",onClick:t._selectRatio.bind(t,n),title:t._t("editor.controls.transform.ratios."+e.identifier+".ratios."+n.identifier)||n.defaultName,identifier:n.identifier,selected:o})})};return this._transformRatioManager.getCategories().map(function(t){return e(t)})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("ratio");return[c.React.createElement(c.ScrollableListComponent,{key:"list",direction:"vertical",innerRef:function(e){t._scrollbar=e}},c.React.createElement(g,null,c.React.createElement(y,null,c.React.createElement(c.ButtonComponent,{title:this._t("editor.controls.transform.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderSections())),c.React.createElement(p.a,{key:"transformDimensions",controls:this.props.controls,disabled:!e||!!e.dimensions})]},e}(c.ControlsComponent);m.contextTypes=c.ControlsComponent.contextTypes,m.RootElement=c.ControlsComponent.RootElement,e.a=m;var y=c.adonis.li("7abnmv","SectionListHeader"),g=Object(c.adonis)(u).ul("x32ss4","SectionList"),v=Object(c.adonis)(h).li("ber9o0","Section"),b=Object(c.adonis)(d).div("15ebqhq","SectionTitle"),_=c.adonis.ul("1klgjyq","SectionGrid")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItem),c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={hovered:!1},s}return i(e,t),e.prototype.render=function(){var t=this,e={backgroundImage:"url('"+this._getAssetPath(this.props.defaultIconPath,!0)+"')"},n={backgroundImage:"url('"+this._getAssetPath(this.props.hoverIconPath,!0)+"')"},o={backgroundImage:"url('"+this._getAssetPath(this.props.activeIconPath,!0)+"')"},r=this.props,i=r.selected,s=r.onClick,c=r.identifier,h=r.title,d=this.state.hovered;return a.React.createElement(l,{selected:i,onClick:s,"data-identifier":c,"data-selected":i,onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})},className:void 0},a.React.createElement(a.Transition,{active:!i},a.React.createElement(p,{style:e})),a.React.createElement(a.Transition,{active:!i&&d},a.React.createElement(p,{style:n})),a.React.createElement(a.Transition,{active:i},a.React.createElement(p,{style:o})),a.React.createElement(u,{selected:i},h))},e}(a.BaseComponent);c.contextTypes=a.BaseComponent.contextTypes,e.a=c;var l=Object(a.adonis)(s).li("71xi0n","TransformListItem"),p=a.adonis.div("u0ryhr",{rendered:"2jlos",visible:"82svov"},"Icon"),u=a.adonis.div("jpjwq7",{selected:"zgbg08"},"Title")},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=(n.n(a),n(0)),c=(n.n(s),function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i))),c=s._getTransformDimensions();return s.state={dimensions:c,x:c.x,y:c.y},s}return i(e,t),e.prototype.shouldSharedComponentUpdate=function(t,e){return!t.start.equals(e.start)||!t.end.equals(e.end)||t.ratio!==e.ratio},e.prototype.sharedComponentWillUpdate=function(t,e){if(e.transformOperation){var n=this._getTransformDimensions(),o=n.x,r=n.y;this.state.dimensions=n,this.state.x=o,this.state.y=r}},e.prototype._onInputLiveChange=function(t,e){var n=e.target.value;n.length&&!n.match(/\d+?/i)||(this.state[t]=n&&parseInt(n,10)||"",this.forceUpdate())},e.prototype._onInputChange=function(t,e){var n=this.state[t]||0,o=this.getSharedState("transformOperation"),r=o.getInputDimensions(!1),i=this.getSharedState("ratio"),c=i.ratio,l=this.getSharedState("start"),p=this.getSharedState("end"),u=p.clone().subtract(l),h=u.clone().multiply(r);if(h[t]=Math.min(r[t],n),"*"!==c){var d=s.Utils.findIntegerFraction(c);h[t]=Math.max(1,Math.round(h[t]/d[t]))*d[t],"x"===t?h.y=h.x/c:h.x=h.y*c}var f=h.clone();(h.x>r.x||h.y>r.y)&&(f=a.Utils.resizeVectorToFit(h,r));var m=this._getTransformDimensions(),y=m.x,g=m.y;this.state.dimensions=m,this.state.x=y,this.state.y=g,this._resizeTransformTo(f),this.forceUpdate()},e.prototype._getTransformDimensions=function(){var t=this.getSharedState("transformOperation"),e=this.getSharedState("ratio")||{ratio:"*"},n=void 0;if(e.dimensions)n=e.dimensions.clone();else{var o=t.getInputDimensions(!1),r=this.getSharedState("start");n=this.getSharedState("end").clone().subtract(r).multiply(o).round()}return n},e.prototype._resizeTransformTo=function(t){var e=this.getSharedState("transformOperation"),n=e.getInputDimensions(!1),o=this.getSharedState("start").clone(),r=this.getSharedState("end").clone(),i=t.divide(n);r.copy(o).add(i),r.x>1&&(o.x-=r.x-1,r.x=1),r.y>1&&(o.y-=r.y-1,r.y=1);var a=this.props.controls,c=a.fixTransform(o,r,"right","bottom"),l=c.start,p=c.end,u=this.getSharedState("newTransformOptions");u.start=l,u.end=p,this.setSharedState({start:l,end:p}),this._emitEvent(s.Constants.EVENTS.TRANSFORM_RESIZE)},e.prototype.render=function(){return s.React.createElement(u,{className:void 0},s.React.createElement(h,null,s.React.createElement(d,null,s.React.createElement(f,null,s.React.createElement(l,{suffix:this._t("editor.controls.transform.dimensions.width"),name:"width",disabled:this.props.disabled,value:this.state.x,onLiveChange:this._onInputLiveChange.bind(this,"x"),onChange:this._onInputChange.bind(this,"x")})),s.React.createElement(m,null,s.React.createElement(p,{src:this._getAssetPath("editor/controls/transform/dimensions-cross.png",!0)})),s.React.createElement(f,null,s.React.createElement(l,{suffix:this._t("editor.controls.transform.dimensions.height"),name:"height",disabled:this.props.disabled,value:this.state.y,onLiveChange:this._onInputLiveChange.bind(this,"y"),onChange:this._onInputChange.bind(this,"y")}))),s.React.createElement(s.Transition,{active:this.props.disabled,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},s.React.createElement(y,{className:void 0},s.React.createElement(g,{src:this._getAssetPath("editor/controls/transform/lock.png",!0)})))))},e}(s.SharedStateComponent));c.contextTypes=s.SharedStateComponent.contextTypes,e.a=c;var l=Object(s.adonis)(s.SuffixedTextInputComponent)("2jlos","DimensionInput"),p=s.adonis.img("1dew3s1","Cross"),u=s.adonis.div("1yz821h","TransformDimensions"),h=s.adonis.div("1dg9k0o","TransformDimensionsWrapper"),d=s.adonis.div("wlk9p6","Table"),f=s.adonis.div("1q481v0","Cell"),m=Object(s.adonis)(f)("13lk3i9","CrossCell"),y=s.adonis.div("943mx5",{rendered:"2jlos",visible:"rval4i"},"LockOverlay"),g=s.adonis.img("1hp46pm","Lock")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n.n(o),i=n(14),a=n(35),s=n(38),c=n(55),l=n(59),p=n(66),u=n(71),h=n(48),d=n(42),f=n(75),m=[i.default,a.default,s.default,c.default,l.default,p.default,u.default,h.default,d.default,f.default];r.a.AllControls=m,e.default=m}]).default});