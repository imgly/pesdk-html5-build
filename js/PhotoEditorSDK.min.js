!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PhotoEditorSDK=e():t.PhotoEditorSDK=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,e,r){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=245)}([function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(184),o=n(i),a=r(183),s=n(a),u=r(21),l=n(u);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l["default"])(e)));t.prototype=(0,s["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(21),o=n(i);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Licensing=e.Base64=e.GLUtils=e.Promise=e.Log=e.Constants=e.Color=e.Configurable=e.Utils=e.EventEmitter=e.Engine=e.cancelAnimationFrame=e.requestAnimationFrame=void 0;var o=r(182);Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return o.requestAnimationFrame}}),Object.defineProperty(e,"cancelAnimationFrame",{enumerable:!0,get:function(){return o.cancelAnimationFrame}});var a=r(64);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=r(12),u=i(s),l=r(9),f=n(l),d=r(25),p=i(d),c=r(26),h=i(c),_=r(19),g=i(_),y=r(14),v=i(y),m=r(11),x=i(m),b=r(27),T=i(b),C=r(7),w=i(C),O=r(74),R=i(O),E=r(112),M=i(E);e.Engine=u["default"],e.EventEmitter=h["default"],e.Utils=g["default"],e.Configurable=v["default"],e.Color=x["default"],e.Constants=f,e.Log=T["default"],e.Promise=w["default"],e.GLUtils=R["default"],e.Base64=p["default"],e.Licensing=M["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(146),p=n(d),c=r(14),h=n(c),_=f.Constants.OptionType,g=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this,r,{intensity:{type:_.NUMBER,"default":1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:_.BOOLEAN,"default":!0}}));return n._stack=new p["default"](n._options.intensity),n}return(0,l["default"])(e,t),e.prototype.render=function(t,e,r){var n=this;return this._stack.render(t,e,r).then(function(t){return n.setDirty(!1),t})},e.prototype.setDirtyForRenderer=function(t,e){this._stack.setDirtyForRenderer(t,e)},e.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures()},e.prototype.dispose=function(){this._stack.dispose()},e}(h["default"]);g.identifier=null,g.isIdentity=!1,g.displayName=null,g.PrimitivesStack=p["default"],e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(147);Object.defineProperty(e,"Brightness",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(149);Object.defineProperty(e,"Contrast",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(148);Object.defineProperty(e,"ColorMatrixPrimitive",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(150);Object.defineProperty(e,"Desaturation",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(151);Object.defineProperty(e,"Gamma",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(152);Object.defineProperty(e,"Glow",{enumerable:!0,get:function(){return n(l)["default"]}});var f=r(153);Object.defineProperty(e,"Gobblin",{enumerable:!0,get:function(){return n(f)["default"]}});var d=r(154);Object.defineProperty(e,"Grayscale",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(80);Object.defineProperty(e,"LookupTable",{enumerable:!0,get:function(){return n(p)["default"]}});var c=r(155);Object.defineProperty(e,"LookupTableImage",{enumerable:!0,get:function(){return n(c)["default"]}});var h=r(156);Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return n(h)["default"]}});var _=r(157);Object.defineProperty(e,"SoftColorOverlay",{enumerable:!0,get:function(){return n(_)["default"]}});var g=r(158);Object.defineProperty(e,"ToneCurve",{enumerable:!0,get:function(){return n(g)["default"]}});var y=r(159);Object.defineProperty(e,"X400",{enumerable:!0,get:function(){return n(y)["default"]}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}var o=r(27),a=i(o),s=r(11),u=i(s),l=r(75),f=i(l),d=r(76),p=i(d),c=r(20),h=i(c),_=r(26),g=i(_),y=r(19),v=i(y),m=r(74),x=i(m),b=r(9),T=n(b);e.BATCH_SIZE=2e3,e.VERTEX_SIZE=5,e.VERTEX_BYTE_SIZE=4*e.VERTEX_SIZE,e.Color=u["default"],e.Matrix=f["default"],e.Vector2=h["default"],e.Rectangle=p["default"],e.EventEmitter=g["default"],e.Log=a["default"],e.Utils=v["default"],e.Constants=T,e.GLUtils=x["default"]},function(t,e,r){"use strict";(function(n,i){function o(t){return t&&t.__esModule?t:{"default":t}}var a,s=r(21),u=o(s);/*!
 * Native Promise Only
 * v0.8.0-a (c) Kyle Simpson
 * MIT License: http://getify.mit-license.org
 * @license
 */
!function(n,i,o){i[n]=i[n]||o(),"undefined"!=typeof t&&t.exports?t.exports=i[n]:(a=function(){return i[n]}.call(e,r,e,t),!(void 0!==a&&(t.exports=a)))}("Promise","undefined"!=typeof n?n:void 0,function(){function t(t,e){h.add(t,e),c||(c=g(h.drain))}function e(t){var e,r="undefined"==typeof t?"undefined":(0,u["default"])(t);return null==t||"object"!=r&&"function"!=r||(e=t.then),"function"==typeof e&&e}function r(){for(var t=0;t<this.chain.length;t++)n(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function n(t,r,n){var i,o;try{r===!1?n.reject(t.msg):(i=r===!0?t.msg:r.call(void 0,t.msg),i===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,n.resolve,n.reject):n.resolve(i))}catch(a){n.reject(a)}}function o(n){var i,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(i=e(n))?t(function(){var t=new l(s);try{i.call(n,function(){o.apply(t,arguments)},function(){a.apply(t,arguments)})}catch(e){a.call(t,e)}}):(s.msg=n,s.state=1,s.chain.length>0&&t(r,s))}catch(u){a.call(new l(s),u)}}}function a(e){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=e,n.state=2,n.chain.length>0&&t(r,n))}function s(t,e,r,n){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){r(i,t)},n)}(i)}function l(t){this.def=t,this.triggered=!1}function f(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new f(this);this.then=function(e,i){var o={success:"function"!=typeof e||e,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),n.chain.push(o),0!==n.state&&t(r,n),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){o.call(n,t)},function(t){a.call(n,t)})}catch(i){a.call(n,i)}}var p,c,h,_=Object.prototype.toString,g="undefined"!=typeof i?function(t){return i(t)}:setTimeout;try{Object.defineProperty({},"x",{}),p=function(t,e,r,n){return Object.defineProperty(t,e,{value:r,writable:!0,configurable:n!==!1})}}catch(y){p=function(t,e,r){return t[e]=r,t}}h=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,r,n;return{add:function(i,o){n=new t(i,o),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var t=e;for(e=r=c=void 0;t;)t.fn.call(t.self),t=t.next}}}();var v=p({},"constructor",d,!1);return d.prototype=v,p(v,"__NPO__",0,!1),p(d,"resolve",function(t){var e=this;return t&&"object"==("undefined"==typeof t?"undefined":(0,u["default"])(t))&&1===t.__NPO__?t:new e(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");e(t)})}),p(d,"reject",function(t){return new this(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");r(t)})}),p(d,"all",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;s(e,t,function(t,e){o[t]=e,++a===i&&r(o)},n)})}),p(d,"race",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");s(e,t,function(t,e){r(e)},n)})}),d})}).call(e,r(95),r(63).setImmediate)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(14),d=n(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype.update=function(){},e.prototype.getFilter=function(){return this._filter},e.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},e}(d["default"]);e["default"]=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RenderType={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},e.ImageFormat={PNG:"image/png",JPEG:"image/jpeg"},e.Events={OPERATION_UPDATED:"operation:update"},e.OptionType={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",ALL:"*"},e.UniformType={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},e.RendererType={WEBGL:"webgl",CANVAS:"canvas"}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(9),d=r(7),p=n(d),c=r(27),h=n(c),_=r(12),g=n(_),y=r(14),v=n(y),m=r(77),x=n(m),b=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n,{enabled:{type:f.OptionType.BOOLEAN,"default":!0}}));return i._sdk=r,i._cacheEnabled=!1,i._dirtiness={},i._sprite=new g["default"].Sprite,i._container=new g["default"].Container,i._container.addChild(i._sprite),i}return(0,l["default"])(e,t),e.prototype._onOptionsChange=function(){this.setDirty(!0)},e.prototype.render=function(t){var e=this;if(!this.getEnabled())return h["default"].info(this.constructor.name,"Disabled - skipping"),p["default"].resolve(t);if(!this._renderTexture){var r=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new g["default"].RenderTexture(this._sdk.getRenderer(),r.width,r.height)}var n=this._sdk.getRenderer(),i=void 0,o=void 0;if(h["default"].canLog("info")&&(o=new x["default"](this.constructor.name,"Rendering")),this.isDirtyForRenderer(n)){this._sprite.setTexture(t);var a=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),i=this._render(t).then(function(){return e.setDirtyForRenderer(!1,n),e._renderTexture})}else h["default"].info(this.constructor.name,"Rendering from cache"),i=p["default"].resolve(this._renderTexture);return i.then(function(t){return o&&o.stop(),t})},e.prototype._render=function(t){var e=void 0;return(e=this._sdk.getRenderer().isOfType(f.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)},e.prototype._renderWebGL=function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")},e.prototype._renderCanvas=function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")},e.prototype.getNewDimensions=function(t){return t.clone()},e.prototype.reset=function(){this._dirty=!0,this._glslPrograms={}},e.prototype.isDirtyForRenderer=function(t){var e=this._dirtiness[t.id];return"undefined"==typeof e||e},e.prototype.setDirtyForRenderer=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in this._dirtiness)this.setDirtyForRenderer(t,{id:r},e)},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){var t=this,e=this._sdk.getInputDimensions(),r=void 0;return this._sdk.getOperationsStack().forEach(function(n){if(!r)return n===t?void(r=!0):void(e=n.getNewDimensions(e))}),e.floor()},e.prototype.disposeRenderTextures=function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null},e.prototype.dispose=function(){this.disposeRenderTextures(),this._sprite.dispose()},e}(v["default"]);b.identifier=null,e["default"]=b},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(37),s=n(a),u=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,o["default"])(this,t),this.r=e,this.g=r,this.b=n,this.a=i}return t.prototype.toRGBA=function(){var t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a];return"rgba("+t.join(",")+")"},t.prototype.toHex=function(){var t=[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))];return"#"+t.join("")},t.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},t.prototype.toArray=function(){return this.toGLColor()},t.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},t.prototype.toHSV=function(){var t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b),r=void 0,n=void 0,i=t,o=t-e;if(n=0===t?0:o/t,t===e)r=0;else{switch(t){case this.r:r=(this.g-this.b)/o,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/o+2;break;case this.b:r=(this.r-this.g)/o+4}r/=6}return[r,n,i]},t.fromHSV=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*e),f=6*e-l,d=n*(1-r),p=n*(1-f*r),c=n*(1-(1-f)*r);switch(l%6){case 0:a=n,s=c,u=d;break;case 1:a=p,s=n,u=d;break;case 2:a=d,s=n,u=c;break;case 3:a=d,s=p,u=n;break;case 4:a=c,s=d,u=n;break;case 5:a=n,s=d,u=p}return new t(a,s,u,i)},t.fromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},t.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},(0,s["default"])(t,null,[{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}}]),t}();e["default"]=u},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(101),a=i(o),s=r(103),u=i(s),l=r(45),f=i(l),d=r(46),p=i(d),c=r(43),h=i(c),_=r(68),g=i(_),y=r(31),v=i(y),m=r(71),x=i(m),b=r(106),T=i(b),C=r(33),w=i(C),O=r(32),R=i(O),E=r(105),M=i(E),F=r(104),S=i(F),P=r(47),A=i(P),k=r(44),D=i(k),B=r(99),L=n(B),I=r(73),U=i(I),j={WebGLRenderer:u["default"],CanvasRenderer:a["default"],WebGLFilterManager:p["default"],CanvasFilterManager:f["default"],DisplayObject:h["default"],Container:g["default"],BaseTexture:v["default"],Texture:x["default"],RenderTexture:T["default"],WebGLRenderTarget:w["default"],CanvasRenderTarget:R["default"],Sprite:M["default"],Shaders:S["default"],Shader:A["default"],Filter:D["default"],Filters:L,PixelArrayImage:U["default"],autoDetectRenderer:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u["default"].isSupported()?new u["default"](t,e,r):new a["default"](t,e,r)}};e["default"]=j},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(21),o=n(i),a=r(83),s=n(a),u=r(0),l=n(u),f=r(2),d=n(f),p=r(1),c=n(p),h=r(7),_=n(h),g=r(26),y=n(g),v=r(20),m=n(v),x=r(11),b=n(x),T=r(19),C=n(T),w=r(34),O=n(w),R=r(9),E=void 0;E=window.Image;var M=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l["default"])(this,e);var i=(0,d["default"])(this,t.call(this));return i.availableOptions=i.availableOptions||{},i.availableOptions=C["default"].extend(i.availableOptions,n),i._onConfigurableUpdate=i._onConfigurableUpdate.bind(i),i._initOptions(r),i}return(0,c["default"])(e,t),e.prototype._buildConfigError=function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)},e.prototype._onOptionsChange=function(){},e.prototype.validateSettings=function(){var t=this;return new _["default"](function(e,r){for(var n in t.availableOptions){var i=t.availableOptions[n];if(i.required&&"undefined"==typeof t._options[n])return r(t._buildConfigError("Option `"+n+"` is required."))}e()})},e.prototype._initOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var r,n,i,o=this;for(r in this.availableOptions){if(i=r.charAt(0).toUpperCase()+r.slice(1),n=this.availableOptions[r],[R.OptionType.STRING,R.OptionType.NUMBER,R.OptionType.BOOLEAN,R.OptionType.OBJECT,R.OptionType.VECTOR2,R.OptionType.COLOR,R.OptionType.CONFIGURABLE,R.OptionType.COLOR_MATRIX,R.OptionType.ARRAY,R.OptionType.IMAGE,R.OptionType.ALL].indexOf(n.type)===-1)throw this._buildConfigError("Unknown option type: `"+n.type+"`");var a=function(t,e){o["set"+i]=function(e,r,n){o.setOption(t,e,r,n)},o["get"+i]=function(){return o.getOption(t)}};if(a(r,n),n.type===R.OptionType.CONFIGURABLE&&(this._options[r]=new e((void 0),n.structure||{}),this._options[r].on("update",this._onConfigurableUpdate)),"undefined"!=typeof n["default"]&&!(r in t)){var s=n["default"];"function"==typeof n["default"]&&(s=n["default"]()),this["set"+i](s,!1,!0)}}for(r in t){if("undefined"==typeof this.availableOptions[r])throw new Error("Invalid option: "+r);"undefined"!=typeof t[r]&&(i=r.charAt(0).toUpperCase()+r.slice(1),this["set"+i](t[r],!1,!0))}},e.prototype.set=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.emit("update",this,t);for(var r in t)this.setOption(r,t[r],!1);this._onOptionsChange()},e.prototype.getOption=function(t){return this._options[t]},e.prototype.getOptionDefault=function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: "+t);return e["default"]},e.prototype.getOptions=function(){return this._options},e.prototype.getDefaultOptions=function(){var t={};for(var e in this.availableOptions){var r=this.availableOptions[e]["default"];"undefined"!=typeof r&&(t[e]=r)}return t},e.prototype.optionsEqual=function(t){for(var e in t){var r=t[e];if(!this._optionEquals(e,r))return!1}return!0},e.prototype._optionEquals=function(t,e){var r=this.availableOptions[t];if("undefined"==typeof r)throw new Error("Invalid option: "+t);var n=this.availableOptions[t].type,i=this._options[t];if(i===e)return!0;switch(n){case R.OptionType.STRING:case R.OptionType.NUMBER:case R.OptionType.BOOLEAN:case R.OptionType.OBJECT:case"*":return i===e;case R.OptionType.VECTOR2:return i.equals(e);case R.OptionType.COLOR:case R.OptionType.COLOR_MATRIX:return e.equals(i);case R.OptionType.CONFIGURABLE:return i.optionsEqual(e);case R.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case R.OptionType.IMAGE:return i.src===e.src}},e.prototype._arrayOptionEquals=function(t,r){for(var n=this._options[t],i=!0,o=0;o<n.length;o++){var a=n[o],s=r[o];if(a instanceof e){if("undefined"==typeof s||!a.optionsEqual(s)){i=!1;break}}else if(s!==a){i=!1;break}}return i},e.prototype.serializeOptions=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return e.forEach(function(e){n[e]=t._serializeOption(e,r)}),n},e.prototype._serializeOption=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.availableOptions[t].type,n=this._options[t];if(!n)return n;switch(r){case R.OptionType.STRING:case R.OptionType.NUMBER:case R.OptionType.BOOLEAN:case R.OptionType.OBJECT:case R.OptionType.ALL:return n;case R.OptionType.VECTOR2:return e?n.toObject():n.clone();case R.OptionType.COLOR:case R.OptionType.COLOR_MATRIX:return e?n.toArray():n.clone();case R.OptionType.CONFIGURABLE:return n.serializeOptions(void 0,e);case R.OptionType.ARRAY:return n.slice(0);case R.OptionType.IMAGE:return n.src}},e.prototype.setOption=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r&&this.emit("update",this,(0,s["default"])({},t,e));var i=this.availableOptions[t];if(!i)throw new Error("Invalid option: "+t);if("undefined"!=typeof i.setter&&(e=i.setter.call(this,e,n)),"undefined"!=typeof i.validation&&i.validation(e),null===e){if(i.required)throw this._buildConfigError("Option `"+t+"` is required.");this._options[t]=e}else switch(i.type){case R.OptionType.STRING:if(("undefined"==typeof e?"undefined":(0,o["default"])(e))!==R.OptionType.STRING)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=i.available;if("undefined"!=typeof a&&a.indexOf(e)===-1)throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+i.available.join(", ")+")");this._options[t]=e;break;case R.OptionType.NUMBER:if(("undefined"==typeof e?"undefined":(0,o["default"])(e))!==R.OptionType.NUMBER)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=e;break;case R.OptionType.BOOLEAN:if(("undefined"==typeof e?"undefined":(0,o["default"])(e))!==R.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=e;break;case R.OptionType.VECTOR2:if(!(e instanceof m["default"]||"object"===("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"x"in e&&"y"in e))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2 or an Object holding x and y values.");e instanceof m["default"]?this._options[t]=e.clone():this._options[t]=m["default"].fromObject(e);break;case R.OptionType.COLOR:if(!(e instanceof b["default"]))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=e;break;case R.OptionType.COLOR_MATRIX:if(!(e instanceof O["default"]))throw this._buildConfigError("Option `"+t+"` has to be an instance of ColorMatrix.");this._options[t]=e.clone();break;case R.OptionType.OBJECT:case"*":this._options[t]=e;break;case R.OptionType.IMAGE:if("string"==typeof e){var u=new E;u.src=e,this._options[t]=u}else{if(!(e instanceof E||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `"+t+"` has to be an Image or String.");this._options[t]=e}break;case R.OptionType.CONFIGURABLE:this._options[t].set(e);break;case R.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+i.type+"`")}r&&(this._onOptionsChange(),this.emit("update",this,(0,s["default"])({},t,e)))},e.prototype._onConfigurableUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.emit.apply(this,["update"].concat(e))},e}(y["default"]);e["default"]=M},function(t,e,r){t.exports=!r(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(28),i=r(87),o=r(59),a=Object.defineProperty;e.f=r(15)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(197),i=r(49);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(21),o=n(i),a=r(0),s=n(a),u=r(25),l=n(u),f=function(){function t(){(0,s["default"])(this,t)}return t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isMobile=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},t.values=function e(t){var e=[];for(var r in t)e.push(t[r]);return e},t.isDOMElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":(0,o["default"])(HTMLElement))?t instanceof HTMLElement:t&&"object"===("undefined"==typeof t?"undefined":(0,o["default"])(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},t.isTouchEvent=function(t){return t.type.indexOf("touch")!==-1},t.resizeVectorToFit=function(t,e){var r=Math.min(e.x/t.x,e.y/t.y),n=t.clone().multiply(r);return n},t.isExtendable=function(t){return"undefined"!=typeof t&&null!==t&&("object"===("undefined"==typeof t?"undefined":(0,o["default"])(t))||"function"==typeof t)},t.defaults=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)"undefined"==typeof e[u]&&(e[u]=s[u])}return e},t.deepDefaults=function(e){var r={};for(var n in e)r[n]=e[n];for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var s=0;s<o.length;s++){var u=o[s];for(var l in u)t.isExtendable(r[l])&&t.isExtendable(u[l])?r[l]=t.deepDefaults(r[l],u[l]):"undefined"==typeof r[l]&&(r[l]=u[l])}return r},t.extend=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)e[u]=s[u]}return e},t.clone=function(t){return this.extend({},t)},t.createBlobURIFromDataURI=function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=l["default"].decode(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e[o];var a=new window.Blob([n],{type:r});return window.URL.createObjectURL(a)},t.requestAnimationFrame=function(t){var e=function(t){setTimeout(t,1e3/60)};return"undefined"==typeof window?e(t):(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||e)(t)},t.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,r="x"===t?e:3&e|8;return r.toString(16)})},t.flatten=function(e){return e.reduce(function(e,r){return e.concat(Array.isArray(r)?t.flatten(r):r)},[])},t.createCanvas=function(){return document.createElement("canvas")},t.isPowerOfTwo=function(t){return 0===(t.x&t.x-1)&&0===(t.y&t.y-1)},t.nextLowestPOT=function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)},t.nextHighestPOT=function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},t.moveArrayItem=function(t,e,r){if(r>=t.length)for(var n=r-t.length;n--+1;)t.push(void 0);t.splice(r,0,t.splice(e,1)[0])},t.ensureCanvasDimensions=function(t,e){t.width===e.x&&t.height===e.y||(t.width=e.x,t.height=e.y)},t.byteArrayToString=function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")},t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(37),s=n(a),u=function(){function t(e,r){(0,o["default"])(this,t),this.x=e,this.y=r,"undefined"==typeof this.x&&(this.x=0),"undefined"==typeof this.y&&(this.y=0)}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clamp=function(e,r){var n=null!==e&&"undefined"!=typeof e,i=null!==r&&"undefined"!=typeof r;return e instanceof t||!n||(e=new t(e,e)),r instanceof t||!i||(r=new t(r,r)),n&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(r.x,this.x),this.y=Math.min(r.y,this.y)),this},t.prototype.divide=function(e,r){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/="undefined"==typeof r?e:r),this},t.prototype.subtract=function(e,r){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-="undefined"==typeof r?e:r),this},t.prototype.multiply=function(e,r){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*="undefined"==typeof r?e:r),this},t.prototype.add=function(e,r){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+="undefined"==typeof r?e:r),this},t.prototype.equals=function(e,r){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&r===this.y},t.prototype.flip=function(){var t=this.x;return this.x=this.y,this.y=t,this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.floor=function(){return this.x=0|this.x,this.y=0|this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.min=function(){return Math.min(this.x,this.y)},t.prototype.max=function(){return Math.max(this.x,this.y)},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.toString=function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"},t.prototype.roundDecimal=function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this},t.fromObject=function(e){return new t(e.x,e.y)},(0,s["default"])(t,null,[{key:"NULL",get:function(){return new t(0,0)}}]),t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(186),o=n(i),a=r(185),s=n(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(17),i=r(40);t.exports=r(15)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(57)("wks"),i=r(41),o=r(13).Symbol,a="function"==typeof o,s=t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});/*!
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 */
var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={encode:function(t){var e="",n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,f=0;do n=t[f++],i=t[f++],o=t[f++],a=n>>2,s=(3&n)<<4|i>>4,u=(15&i)<<2|o>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),e=e+r.charAt(a)+r.charAt(s)+r.charAt(u)+r.charAt(l),n=i=o="",a=s=u=l="";while(f<t.length);return e},decode:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=0,f=[],d=/[^A-Za-z0-9\+\/=]/g;if(d.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do o=r.indexOf(t.charAt(l++)),a=r.indexOf(t.charAt(l++)),s=r.indexOf(t.charAt(l++)),u=r.indexOf(t.charAt(l++)),e=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|u,f.push(e),64!==s&&f.push(n),64!==u&&f.push(i),e=n=i="",o=a=s=u="";while(l<t.length);return f}};e["default"]=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(27),s=n(a),u=12,l=function(){function t(){(0,o["default"])(this,t),this._maxListeners=u,this._events={},this._pipeDestinations=[]}return t.prototype.pipeEvents=function(t){this._pipeDestinations.push(t)},t.prototype.unpipeEvents=function(t){var e=this._pipeDestinations.indexOf(t);e!==-1&&this._pipeDestinations.splice(e,1)},t.prototype.on=function(t,e){if("function"!=typeof e)throw new TypeError;var r=this._events[t]||(this._events[t]=[]);return r.indexOf(e)!==-1?this:(r.push(e),this._maxListeners&&r.length>this._maxListeners&&(s["default"].warn("EventEmitter","Possible memory leak detected, added "+r.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),console.trace()),this)},t.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(null,arguments)}var n=this;return this.on(t,r)},t.prototype.off=function(t){if(0===(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var r=this._events[t];if(!r||!r.length)return this;var n=r.indexOf(e);return n===-1?this:(r.splice(n,1),this)},t.prototype.emit=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(r))});var i=this._events[t];return!(!i||!i.length)&&(i.forEach(function(t){return t.apply(null,r)}),!0)},t.prototype.setMaxListeners=function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t},t}();e["default"]=l},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r="warn",n=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],i=n.map(function(t){return t.type}),o={};o.setLevel=function(t){r=t},o.canLog=function(t){if(null===r)return!1;var e=i.indexOf(t),n=i.indexOf(r);return!(e<n)},o.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},o.printError=function(t){var e=t.stack.split("\n");e.forEach(function(t){o.error("Error",t)})},n.forEach(function(t){var e=t.type,r=t.background,n=t.color;o[e]=function(t){if(o.canLog(e)){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var u=a.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");return o.hasColorfulOutput()?void console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+u+"  %c  ","background: #43ADEB; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #43ADEB; line-height: 20px; padding: 4px 0","background: "+r+"; color: "+n+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #43ADEB; line-height: 20px; padding: 4px 0"):console.log("PhotoEditorSDK | "+t+" | "+u)}}}),e["default"]=o}).call(e,r(62))},function(t,e,r){var n=r(30);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(13),i=r(22),o=r(85),a=r(23),s="prototype",u=function(t,e,r){var l,f,d,p=t&u.F,c=t&u.G,h=t&u.S,_=t&u.P,g=t&u.B,y=t&u.W,v=c?i:i[e]||(i[e]={}),m=v[s],x=c?n:h?n[e]:(n[e]||{})[s];c&&(r=e);for(l in r)f=!p&&x&&void 0!==x[l],f&&l in v||(d=f?x[l]:r[l],v[l]=c&&"function"!=typeof x[l]?r[l]:g&&f?o(d,n):y&&x[l]==d?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[s]=t[s],e}(d):_&&"function"==typeof d?o(Function.call,d):d,_&&((v.virtual||(v.virtual={}))[l]=d,t&u.R&&m&&!m[l]&&a(m,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=function(t){function e(r){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n.id=e.id++,n._onSourceLoaded=n._onSourceLoaded.bind(n),n._renderers=[],n._glTextures={},n._source=r,n._dirty=!0,n._glUnit=0,n._mipMapping=!1,n._magFilter=e.DefaultMagFilter,n._minFilter=e.DefaultMinFilter,n._repeatX=e.ClampToEdge,n._repeatY=e.ClampToEdge,n._pixelRatio=1,n._loaded=!1,n._frame=new f.Rectangle(0,0,100,100),r&&n._loadSource(),n}return(0,l["default"])(e,t),e.prototype.resizeTo=function(t){this._frame.width=t.x,this._frame.height=t.y},e.prototype._loadSource=function(){var t=this._source,e=t.complete,r="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();return e||r?this._onSourceLoaded():void t.addEventListener("load",this._onSourceLoaded)},e.prototype._onSourceLoaded=function(){this._loaded=!0,this._updateGLFilters(),this.emit("loaded"),this.update()},e.prototype._updateGLFilters=function(){var t=new f.Vector2(this._source.width,this._source.height);f.Utils.isPowerOfTwo(t)&&(f.Log.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.TrilinearFilter,this._mipMapping=!0)},e.prototype.update=function(){this._frame=new f.Rectangle(0,0,this._source.width,this._source.height),this.emit("update")},e.prototype.getGLFilter=function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}},e.getGLFilter=function(t,r){switch(r){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}},e.prototype.isLoaded=function(){return this._loaded},e.prototype.setLoaded=function(t){this._loaded=t},e.prototype.getSource=function(){return this._source},e.prototype.setSource=function(t){this._source=t},e.prototype.getGLTextureForRenderer=function(t){return this._glTextures[t.id]},e.prototype.setGLTextureForRenderer=function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t},e.prototype.getDimensions=function(){return new f.Vector2(this._frame.width,this._frame.height)},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t},e.prototype.getGLUnit=function(){return this._glUnit},e.prototype.setGLUnit=function(t){this._glUnit=t},e.prototype.setMinFilter=function(t){this._minFilter=t},e.prototype.getMinFilter=function(){return this._minFilter},e.prototype.setMagFilter=function(t){this._magFilter=t},e.prototype.getMagFilter=function(){return this._magFilter},e.prototype.setRepeatX=function(t){this._repeatX=t},e.prototype.getRepeatX=function(){return this._repeatX},e.prototype.setRepeatY=function(t){this._repeatY=t},e.prototype.getRepeatY=function(){return this._repeatY},e.prototype.getGLRepeat=function(t,r){var n="x"===r?this.getRepeatX():this.getRepeatY();switch(n){case e.ClampToEdge:return t.CLAMP_TO_EDGE;case e.Repeat:return t.REPEAT;case e.MirroredRepeat:return t.MIRRORED_REPEAT}},e.prototype.isDirty=function(){return this._dirty},e.prototype.setDirty=function(t){this._dirty=t},e.prototype.disposeGLTextures=function(){for(var t in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[t])},e.prototype.disposeGLTexturesForRenderer=function(t){if(this._glTextures[t.id]){var e=t.getContext();e.deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id]}},e.prototype.isMipMappingEnabled=function(){return this._mipMapping},e.prototype.dispose=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.disposeGLTextures()},e}(f.EventEmitter);d.NearestFilter=0,d.LinearFilter=1,d.BilinearFilter=2,d.TrilinearFilter=3,d.DefaultMagFilter=d.NearestFilter,d.DefaultMinFilter=d.LinearFilter,d.ClampToEdge=0,d.Repeat=1,d.MirroredRepeat=2,d.id=0,e["default"]=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(e,r,n,i,a){(0,o["default"])(this,t),this._width=e,this._height=r,this._pixelRatio=n,this._canvas=i||this._createCanvas(),this._context=a||this._canvas.getContext("2d"),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return t.prototype._createCanvas=function(){return a.Utils.createCanvas()},t.prototype.clear=function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},t.prototype.resizeTo=function(t){this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)},t.prototype.getCanvas=function(){return this._canvas},t.prototype.getContext=function(){return this._context},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t},t.prototype.getDimensions=function(){return new a.Vector2(this._width,this._height)},t.prototype.dispose=function(){this._canvas=null,this._context=null},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=r(31),u=n(s),l=function(){function t(e,r,n,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,o["default"])(this,t),this._renderer=e,this._gl=e.getContext(),this._width=r,this._height=n,this._frame=null,this._pixelRatio=i,this._projectionMatrix=new a.Matrix,this._mipMapping=!1,this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return t.prototype.resizeTo=function(t){this._width=0|t.x,this._height=0|t.y,this._isRoot||this._resizeTexture(),this._calculateProjectionMatrix()},t.prototype._setTexParameters=function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var e=u["default"].DefaultMinFilter,r=u["default"].DefaultMagFilter,n=new a.Vector2(this._width,this._height);a.Utils.isPowerOfTwo(n)&&(a.Log.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0,this.updateMipMap(),e=u["default"].BilinearFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,u["default"].getGLFilter(t,e)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,u["default"].getGLFilter(t,r))},t.prototype.updateMipMap=function(){if(!this._mipMapping)return!1;var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture),t.generateMipmap(t.TEXTURE_2D)},t.prototype._resizeTexture=function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture);var e=this._width*this._pixelRatio,r=this._height*this._pixelRatio;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null),this._setTexParameters()},t.prototype.activate=function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)},t.prototype.clear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Color.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),a.GLUtils.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)},t.prototype._calculateProjectionMatrix=function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new a.Rectangle(0,0,this._width,this._height),r=e.x,n=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-r*t.a,t.ty=1-n*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-r*t.a,t.ty=-1-n*t.d)},t.prototype._initFrameBuffer=function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),this._setTexParameters(),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this.resizeTo(new a.Vector2(this._width,this._height)),a.GLUtils.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)},t.prototype.getProjectionMatrix=function(){return this._projectionMatrix},t.prototype.getTexture=function(){return this._texture},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(t){this._frame=t},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()},t.prototype.dispose=function(){var t=this._gl;t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(37),s=n(a),u=r(11),l=n(u),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;(0,o["default"])(this,t),this.set(e,r,n,i,a,s,u,l,f,d,p,c,h,_,g,y,v,m,x,b)}return t.prototype.set=function(t,e,r,n,i,o,a,s,u,l,f,d,p,c,h,_,g,y,v,m){this.a=t,this.b=e,this.c=r,this.d=n,this.e=i,this.f=o,this.g=a,this.h=s,this.i=u,this.j=l,this.k=f,this.l=d,this.m=p,this.n=c,this.o=h,this.p=_,this.q=g,this.r=y,this.s=v,this.t=m},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0},t.prototype.apply=function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+255*this.e,r=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+255*this.j,n=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+255*this.o,i=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+255*this.t;return new l["default"](e,r,n,i)},t.prototype.multiply=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,f=void 0,d=void 0,p=void 0,c=void 0,h=void 0,_=void 0,g=void 0,y=void 0,v=void 0,m=void 0,x=void 0,b=t,T=this;return e=b.a*T.a+b.b*T.f+b.c*T.k+b.d*T.p,r=b.a*T.b+b.b*T.g+b.c*T.l+b.d*T.q,n=b.a*T.c+b.b*T.h+b.c*T.m+b.d*T.r,i=b.a*T.d+b.b*T.i+b.c*T.n+b.d*T.s,a=b.f*T.a+b.g*T.f+b.h*T.k+b.i*T.p,s=b.f*T.b+b.g*T.g+b.h*T.l+b.i*T.q,u=b.f*T.c+b.g*T.h+b.h*T.m+b.i*T.r,l=b.f*T.d+b.g*T.i+b.h*T.n+b.i*T.s,d=b.k*T.a+b.l*T.f+b.m*T.k+b.n*T.p,p=b.k*T.b+b.l*T.g+b.m*T.l+b.n*T.q,c=b.k*T.c+b.l*T.h+b.m*T.m+b.n*T.r,h=b.k*T.d+b.l*T.i+b.m*T.n+b.n*T.s,g=b.p*T.a+b.q*T.f+b.r*T.k+b.s*T.p,y=b.p*T.b+b.q*T.g+b.r*T.l+b.s*T.q,v=b.p*T.c+b.q*T.h+b.r*T.m+b.s*T.r,m=b.p*T.d+b.q*T.i+b.r*T.n+b.s*T.s,o=b.a*T.e+b.b*T.j+b.c*T.o+b.d*T.t+b.e,f=b.f*T.e+b.g*T.j+b.h*T.o+b.i*T.t+b.j,_=b.k*T.e+b.l*T.j+b.m*T.o+b.n*T.t+b.o,x=b.p*T.e+b.q*T.j+b.r*T.o+b.s*T.t+b.t,this.a=e,this.b=r,this.c=n,this.d=i,this.e=o,this.f=a,this.g=s,this.h=u,this.i=l,this.j=f,this.k=d,this.l=p,this.m=c,this.n=h,this.o=_,this.p=g,this.q=y,this.r=v,this.s=m,this.t=x,this},t.prototype.clone=function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t},t.prototype.toString=function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"},t.prototype.toArray=function(){var t=this;return"abcdefghijklmnopqrst".split("").map(function(e){return t[e]})},t.createBrightnessMatrix=function(e){var r=new t;return r.e=e,r.j=e,r.o=e,r},t.createContrastMatrix=function(e){var r=new t,n=(1-e)/2;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r},t.createSaturationMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=new t,n=1-e,i=.213*n,o=.715*n,a=.072*n;return r.a=i+e,r.b=o,r.c=a,r.f=i,r.g=o+e,r.h=a,r.k=i,r.l=o,r.m=a+e,r},t.createLinearMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new t;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n},(0,s["default"])(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=f.Constants.RendererType,p=function(t){function e(r,n){(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n));return i._operation=r,i._dirtiness={},i.id=f.Utils.getUUID(),i._renderTextures={},i._identitySprite=new f.Engine.Sprite,i._sprite=new f.Engine.Sprite,i._renderers=[],i}return(0,l["default"])(e,t),e.prototype.applyRotation=function(t){var e=this._operation.getInputDimensions(),r=180*this.getRotation()/Math.PI;r+=t,this.setRotation(r*Math.PI/180);var n=(t+360)%360,i=n*Math.PI/180,o=Math.cos(i),a=Math.sin(i),s=this._options.position.clone().subtract(.5).multiply(e),u=new f.Vector2(s.x*o-s.y*a,s.x*a+s.y*o).divide(e.clone().flip());this.setPosition(new f.Vector2(.5,.5).add(u))},e.prototype.applyFlip=function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)},e.prototype.applyCrop=function(t,e){var r=t.getInputDimensions(),n=e.rotation-t.getRotation(),i=t.getEnd().clone().subtract(t.getStart()).multiply(r),o=e.end.clone().subtract(e.start).multiply(r),a=t.getStart().clone().subtract(e.start).multiply(r),s=e.scale/t.getScale(),u=t.getStart().clone().multiply(r),l=this.getPosition().clone().multiply(i).add(u),d=l.clone().subtract(r.clone().multiply(.5)),p=Math.cos(n),c=Math.sin(n),h=new f.Vector2(d.x*p-d.y*c,d.x*c+d.y*p);h.multiply(s);var _=r.clone().multiply(.5).add(h).subtract(u).add(a).divide(o);if(this._options.dimensions){var g=this.getDimensions().clone().multiply(s);e.textureScale&&g.multiply(e.textureScale/t.getTextureScale()),this.set({dimensions:g},!1)}var y=180*n/Math.PI,v=180*this.getRotation()/Math.PI+y;this.set({rotation:v*Math.PI/180,position:_},!1)},e.prototype.getDisplayObject=function(){return this._sprite},e.prototype._getTexture=function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")},e.prototype._prepareRenderTexture=function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new f.Engine.Container,this._renderTextureSprite=new f.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}},e.prototype._rendersToRenderTexture=function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(d.WEBGL)},e.prototype.update=function(t,e){return this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t),this._updateSprite(e),this._rendersToRenderTexture(t)&&this._renderToRenderTexture(t),f.Promise.resolve()},e.prototype._updateSprite=function(t){this._sprite.setAnchor(this._options.anchor),this._sprite.setPosition(this._options.position.clone().multiply(t));var e=this._options.dimensions;e&&(e=e.clone().multiply(this._operation.getSDK().getTextureScale()),this._sprite.setWidth(e.x),this._sprite.setHeight(e.y)),this._sprite.updateTransform();var r=this._sprite.getTexture().getFrame(),n=new f.Vector2(r.width,r.height);this._sprite.setPivot(this._options.pivot.clone().multiply(n)),this._sprite.setRotation(this._options.rotation),this._sprite.updateTransform()},e.prototype._renderToRenderTexture=function(t){var e=this._getTexture().getDimensions(),r=this._getRenderTexture(t.getRenderer(),e),n=e.clone();if(this._options.smoothDownscaling&&(n.x=f.Utils.nextHighestPOT(n.x),n.y=f.Utils.nextHighestPOT(n.y)),this._renderTexture.resizeTo(n),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=n.clone().subtract(e.x,e.y).divide(n),o=r.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-i.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-i.y}this._sprite.setTexture(r)},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])},e.prototype._getRenderTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.Vector2(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new f.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]},e.prototype.dispose=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()},e}(f.Configurable);e["default"]=p},function(t,e){"use strict";function r(t,e,r,a,s,u){if(!(isNaN(u)||u<1)){u|=0;var l,f,d,p,c,h,_,g,y,v,m,x,b,T,C,w,O,R,E,M,F,S,P,A,k,D=t.data,B=u+u+1,L=a-1,I=s-1,U=u+1,j=U*(U+1)/2,N=new n,G=N;for(d=1;d<B;d++)G=G.next=new n,d==U&&(k=G);G.next=N;var z=null,V=null;_=h=0;var W=i[u],H=o[u];for(f=0;f<s;f++){for(w=O=R=E=g=y=v=m=0,x=U*(M=D[h]),b=U*(F=D[h+1]),T=U*(S=D[h+2]),C=U*(P=D[h+3]),g+=j*M,y+=j*F,v+=j*S,m+=j*P,G=N,d=0;d<U;d++)G.r=M,G.g=F,G.b=S,G.a=P,G=G.next;for(d=1;d<U;d++)p=h+((L<d?L:d)<<2),g+=(G.r=M=D[p])*(A=U-d),y+=(G.g=F=D[p+1])*A,v+=(G.b=S=D[p+2])*A,m+=(G.a=P=D[p+3])*A,w+=M,O+=F,R+=S,E+=P,G=G.next;for(z=N,V=k,l=0;l<a;l++)D[h+3]=P=m*W>>H,0!==P?(P=255/P,D[h]=(g*W>>H)*P,D[h+1]=(y*W>>H)*P,D[h+2]=(v*W>>H)*P):D[h]=D[h+1]=D[h+2]=0,g-=x,y-=b,v-=T,m-=C,x-=z.r,b-=z.g,T-=z.b,C-=z.a,p=_+((p=l+u+1)<L?p:L)<<2,w+=z.r=D[p],O+=z.g=D[p+1],R+=z.b=D[p+2],E+=z.a=D[p+3],g+=w,y+=O,v+=R,m+=E,z=z.next,x+=M=V.r,b+=F=V.g,T+=S=V.b,C+=P=V.a,w-=M,O-=F,R-=S,E-=P,V=V.next,h+=4;_+=a}for(l=0;l<a;l++){for(O=R=E=w=y=v=m=g=0,h=l<<2,x=U*(M=D[h]),b=U*(F=D[h+1]),T=U*(S=D[h+2]),C=U*(P=D[h+3]),g+=j*M,y+=j*F,v+=j*S,m+=j*P,G=N,d=0;d<U;d++)G.r=M,G.g=F,G.b=S,G.a=P,G=G.next;for(c=a,d=1;d<=u;d++)h=c+l<<2,g+=(G.r=M=D[h])*(A=U-d),y+=(G.g=F=D[h+1])*A,v+=(G.b=S=D[h+2])*A,m+=(G.a=P=D[h+3])*A,w+=M,O+=F,R+=S,E+=P,G=G.next,d<I&&(c+=a);for(h=l,z=N,V=k,f=0;f<s;f++)p=h<<2,D[p+3]=P=m*W>>H,P>0?(P=255/P,D[p]=(g*W>>H)*P,D[p+1]=(y*W>>H)*P,D[p+2]=(v*W>>H)*P):D[p]=D[p+1]=D[p+2]=0,g-=x,y-=b,v-=T,m-=C,x-=z.r,b-=z.g,T-=z.b,C-=z.a,p=l+((p=f+U)<I?p:I)*a<<2,g+=w+=z.r=D[p],y+=O+=z.g=D[p+1],v+=R+=z.b=D[p+2],m+=E+=z.a=D[p+3],z=z.next,x+=M=V.r,b+=F=V.g,T+=S=V.b,C+=P=V.a,w-=M,O-=F,R-=S,E-=P,V=V.next,h+=a}}}function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!

StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/
var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:r}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(82),o=n(i);e["default"]=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o["default"])(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,r){var n=r(92),i=r(50);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(25),s=n(a),u=r(110),l=n(u),f={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},d="data:image/jpeg;base64,",p=new RegExp("^"+d,"i"),c=function(){function t(e){(0,o["default"])(this,t),this._buf=e,this._stream=new l["default"](this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifBuffer=this._getExifBuffer(),this._exifStream=new l["default"](this._exifBuffer),this._parseExif()}return t.prototype.restoreExifTags=function(t){var e=t.replace(d,""),r=s["default"].decode(e),n=this._sliceIntoSegments(r),i=n[1][0],o=r.slice(0,i),a=r.slice(i),u=o.concat(this._exifBuffer);return u=u.concat(a),d+s["default"].encode(u)},t.prototype.setOrientation=function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._exifStream.setHead(e+8),this._exifStream.writeInt16(t)}},t.isJPEG=function(t){return p.test(t)},t.fromBase64String=function(e){var r=e.replace(d,""),n=s["default"].decode(r);return new t(n)},t.prototype._parseExif=function(){this._exifStream.setHead(0),this._exifStream.readInt16(),this._exifStream.readInt16();var t=this._exifStream.readString(4);if("Exif"===t){this._exifStream.readInt16();var e=this._exifStream.getHead(),r=!1,n=this._exifStream.readInt16();if(18761===n)r=!1;else{if(19789!==n)throw new Error("Invalid TIFF data: No endian type found");r=!0}if(42!==this._exifStream.readInt16(!r))throw new Error("Invalid TIFF data: No 0x002A");var i=this._exifStream.readInt32(!r);if(i<8)throw new Error("Invalid TIFF data: First IFD offset < 8");var o=e+i,a=this._readTags(this._exifStream,e,o,r);this._tags=a.tags,this._tagData=a.tagData}},t.prototype._readTags=function(t,e,r,n){t.setHead(r);for(var i=t.readInt16(!n),o={},a=[],s=0;s<i;s++){var u=r+12*s+2;t.setHead(u);var l=t.readInt16(!n),d=void 0,p=void 0,c=void 0;if(f[l]){l=f[l],d=t.readInt16(!n),p=t.readInt32(!n),c=t.readInt32(!n)+e;var h=null;switch(d){case 1:case 7:if(1===p)h=t.readInt8(!n);else{h=[];for(var _=0;_<p;_++)h.push(t.readInt8(!n))}break;case 2:t.setHead(p>4?c:u+8),h=t.readString(p);break;case 3:if(t.setHead(p>2?c:u+8),1===p)h=t.readInt16(!n);else{h=[];for(var g=0;g<p;g++)h.push(t.readInt16(!n))}break;case 4:case 9:if(t.setHead(p>1?c:u+8),1===p)h=t.readInt32(!n);else{h=[];for(var y=0;y<p;y++)h.push(t.readInt32(!n))}break;case 5:case 10:if(t.setHead(c),1===p){var v=t.readInt32(!n),m=t.readInt32(!n);h=v/m}else{h=[];for(var x=0;x<p;x++){var b=t.readInt32(!n),T=t.readInt32(!n),C=b/T;h.push(C)}}}o[l]=h,a[l]={value:h,numValues:p,entryOffset:u,valueOffset:c,type:d}}}return{tags:o,tagData:a}},t.prototype._getExifBuffer=function(){for(var t=this._segments,e=0;e<t.length;e++){var r=t[e][0],n=t[e][1];this._stream.setHead(r);var i=this._stream.peekInt16();if(65505===i)return this._buf.slice(r,n)}return!1},t.prototype._sliceIntoSegments=function(t){for(var e=new l["default"](t),r=[];e.getHead()<t.length;){var n=e.readInt16();if(65496!==n){if(65498===n)break;if(!(n>=65280&&n<=65535))throw new Error("Invalid marker: 0x"+n.toString(16));var i=e.readInt16(),o=e.getHead()+i-2;r.push([e.getHead()-4,o]),e.setHead(o)}}return this._stream.setHead(0),r},t.prototype.getTags=function(){return this._tags},t.prototype.getTagData=function(){return this._tagData},t.prototype.dispose=function(){this._buf=[],this._exifBuffer=[],this._segments=[]},t}();e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(){(0,o["default"])(this,t),this._position=new a.Vector2(0,0),this._scale=new a.Vector2(1,1),this._pivot=new a.Vector2(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new a.Matrix,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new a.Rectangle(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new a.Rectangle(0,0,1,1),this._tint=16777215,this._filterRectangle=new a.Rectangle(0,0,0,0)}return t.prototype.renderWebGL=function(t){a.Log.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")},t.prototype.renderCanvas=function(t){a.Log.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")},t.prototype.updateTransform=function(){var t=this._parent?this._parent.getWorldTransform():a.Matrix.IDENTITY,e=this._worldTransform,r=this._rotation!==this._lastRotation;r&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.tx|=0,e.ty|=0,e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.addShader=function(t){this._shaders.push(t)},t.prototype.removeShader=function(t){var e=this._shaders.indexOf(t);return e!==-1&&(this._shaders.splice(e,1),!0)},t.prototype.removeShaderAt=function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)},t.prototype.getBounds=function(){return this._bounds.clone()},t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(t,e){t instanceof a.Vector2?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getScale=function(){return this._scale},t.prototype.setScale=function(t,e){t instanceof a.Vector2?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getPivot=function(){return this._pivot},t.prototype.setPivot=function(t,e){t instanceof a.Vector2?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotation=function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getAlpha=function(){return this._alpha},t.prototype.setAlpha=function(t){this._alpha=t},t.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},t.prototype.getWorldTransform=function(){return this._worldTransform},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(t){this._parent=t},t.prototype.getFilterRectangle=function(){return this._filterRectangle},t.prototype.setFilterRectangle=function(t){this._filterRectangle.copy(t)},t.prototype.getTint=function(){return this._tint},t.prototype.setTint=function(t){this._tint=t},t.prototype.isVisible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(14),p=n(d),c=r(47),h=n(c),_=r(48),g=n(_),y=f.Constants.OptionType,v=f.Constants.UniformType,m=f.Constants.RendererType,x=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._initOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=g["default"].defaultUniforms,this._attributes=g["default"].defaultAttributes,this._vertexSource=g["default"].defaultVertexSource,this._fragmentSource=g["default"].defaultFragmentSource,this._initUniforms(),t.prototype._initOptions.call(this,e)},e.prototype._initUniforms=function(){this._uniforms={};for(var t in this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e["default"]||null}}for(var r in this.availableOptions){var n=this.availableOptions[r];n.uniformType?this._uniforms["u_"+r]={type:n.uniformType,value:n["default"]||null}:f.Log.trace(this.constructor.name,"Option `"+r+"` is missing a `uniformType`!")}},e.prototype.setOption=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,r,n);var i=r,o=this.availableOptions[e];if(o.uniformType){var a="u_"+e;switch(o.type){case y.COLOR:o.uniformType===v.FLOAT4?i=r.toGLColor():o.uniformType===v.FLOAT3&&(i=r.toRGBGLColor());break;case y.VECTOR2:i=[r.x,r.y];break;case y.COLOR_MATRIX:i=[r.a,r.b,r.c,r.d,r.f,r.g,r.h,r.i,r.k,r.l,r.m,r.n,r.p,r.q,r.r,r.s];var s=[r.e,r.j,r.o,r.t];this._uniforms[a+"_vec"]={value:s,type:v.FLOAT4}}this.setUniform(a,i)}},e.prototype.setUniform=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e},e.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},e.prototype.syncUniform=function(t){this._shaders.forEach(function(e){e.syncUniform(t)})},e.prototype.syncUniforms=function(){this._shaders.forEach(function(t){t.syncUniforms()})},e.prototype.getShaderForRenderer=function(t){var e=t.getContext(),r=this._shaders[e.id];return r||(r=new h["default"](t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=r),r},e.prototype.apply=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(m.WEBGL)?this._applyWebGL(t,e,r,n):t.isOfType(m.CANVAS)&&this._applyCanvas(t,e,r,n)},e.prototype._applyWebGL=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(r),n&&r.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)},e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=r.getContext();f.Log.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),i.clearRect(0,0,n.width,n.height),i.drawImage(n,0,0)},e.prototype.dispose=function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]},e}(p["default"]);e["default"]=x},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=r(32),u=n(s),l=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new a.Rectangle(0,0,e.getWidth(),e.getHeight())}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),this._filterStack.push({renderTarget:n,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;return 1===e.length?(e[0].apply(this._renderer,i,o),this._textures.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){var s=t===a;if(s)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var u=i;i=o,o=u}}),this._textures.push(i),this._textures.push(o)},t.prototype._getOrCreateRenderTarget=function(t){var e=this._textures.pop();return e||(e=new u["default"](this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype.dispose=function(){},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=r(33),u=n(s),l=r(107),f=n(l),d=a.Constants.RendererType,p=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new a.Rectangle(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach(function(e){return e.resizeTo(t)})},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype._getOrCreateRenderTarget=function(t){var e=this._renderTargets.pop();return e||(e=new u["default"](this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=t.getFilterRectangle();n.width>0&&n.height>0&&(this._currentFrame=n);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;this._quad.map(this._textureFrame,i.getFrame());var a=e[0].getShaderForRenderer(this._renderer),s=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),l=this._renderer.getContext();l.bindBuffer(l.ARRAY_BUFFER,s),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,u);var f=a.getAttributeLocations();return l.vertexAttribPointer(f.a_position,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(f.a_texCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(f.a_color,4,l.FLOAT,!1,0,64),1===e.length?(e[0].apply(this._renderer,i,o),this._renderTargets.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){var s=t===a;if(s)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var u=i;i=o,o=u}}),this._renderTargets.push(i),this._renderTargets.push(o)},t.prototype._onContextChange=function(){this._renderTargets.length=0,this._renderer.isOfType(d.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new f["default"](this._renderer))},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(t){t.dispose()})},t}();e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=n(a),u=r(9),l=s["default"].Log,f=s["default"].Utils,d=function(){function t(e,r,n,i,a){(0,o["default"])(this,t),this._renderer=e,this._vertexSource=r,this._fragmentSource=n,this._uniforms=i||{},this._uniformLocations={},this._attributes=a||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return t.prototype._init=function(){this._compile();var t=this._renderer.getContext();t.useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()},t.prototype._onContextChange=function(){this._init()},t.prototype.setupBuffers=function(t,e){var r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,!1,s["default"].VERTEX_BYTE_SIZE,0),r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,!1,s["default"].VERTEX_BYTE_SIZE,8),r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,!0,s["default"].VERTEX_BYTE_SIZE,16)},t.prototype.syncUniforms=function(){var t=this;Object.keys(this._uniforms).forEach(function(e){t.syncUniform(e)})},t.prototype.syncUniform=function(t){var e=this._renderer.getContext(),r=this._uniforms[t],n=this._uniformLocations[t];switch(r.type){case u.UniformType.SAMPLER2D:case u.UniformType.INT:case u.UniformType.INT1:e.uniform1i(n,r.value);break;case u.UniformType.FLOAT:case u.UniformType.FLOAT1:e.uniform1f(n,r.value);break;case u.UniformType.FLOAT2:e.uniform2f(n,r.value[0],r.value[1]);break;case u.UniformType.FLOAT3:e.uniform3f(n,r.value[0],r.value[1],r.value[2]);break;case u.UniformType.FLOAT4:e.uniform4f(n,r.value[0],r.value[1],r.value[2],r.value[3]);break;case u.UniformType.FLOAT_VECTOR2:e.uniform2fv(n,r.value);break;case u.UniformType.MAT3:case u.UniformType.MAT3FV:e.uniformMatrix3fv(n,!1,r.value);break;case u.UniformType.MAT4:e.uniformMatrix4fv(n,!1,r.value);break;default:l.warn(this.constructor.name,"Unknown uniform type: "+r.type)}},t.prototype._cacheAttributeLocations=function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(r){t._attributeLocations[r]=e.getAttribLocation(t._program,r)})},t.prototype._cacheUniformLocations=function(){var t=this,e=this._renderer.getContext(),r=Object.keys(this._uniforms);r.forEach(function(r){t._uniformLocations[r]=e.getUniformLocation(t._program,r)})},t.prototype._addPrecisionToSource=function(t){var e=this._renderer.getMaxFloatPrecision(),r="mediump";return f.isMobile()&&"highp"===e&&(r="highp"),"precision "+r+" float;\n"+t},t.prototype._compile=function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var r=this._addPrecisionToSource(this._fragmentSource),n=this._compileShader(t.FRAGMENT_SHADER,r);this._fragmentShader=n;var i=t.createProgram();t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i);var o=t.getProgramParameter(i,t.LINK_STATUS);if(!o){var a=t.getProgramInfoLog(i);t.isContextLost()&&(a="WebGL context lost"),t.deleteProgram(i),l.error(this.constructor.name,"WebGL program linking error: "+a)}this._program=i},t.prototype._compileShader=function(t,e){var r=this._renderer.getContext(),n=r.createShader(t);r.shaderSource(n,e),r.compileShader(n);var i=r.getShaderParameter(n,r.COMPILE_STATUS);if(!i){var o=r.getShaderInfoLog(n);r.isContextLost()&&(o="WebGL context lost"),r.deleteShader(n),l.error(this.constructor.name,"WebGL shader compilation error: "+o)}return n},t.prototype.setUniform=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,r&&this.syncUniform(t)},t.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},t.prototype.getUniforms=function(){return this._uniforms},t.prototype.getAttributes=function(){return this._attributes},t.prototype.getAttributeLocations=function(){return this._attributeLocations},t.prototype.getProgram=function(){return this._program},t.prototype.dispose=function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)},t}();e["default"]=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(47),p=n(d),c=f.Constants.UniformType,h=function(t){function e(r,n,i){return(0,o["default"])(this,e),n=n||e.defaultVertexSource,i=i||e.defaultFragmentSource,(0,s["default"])(this,t.call(this,r,n,i,e.defaultUniforms,e.defaultAttributes))}return(0,l["default"])(e,t),e}(p["default"]);h.defaultVertexSource=r(224),h.defaultFragmentSource=r(223);var _=new f.Matrix;h.defaultUniforms={u_image:{type:c.SAMPLER2D,value:0},u_projMatrix:{type:c.MAT3,value:_.toArray()}},h.defaultAttributes=["a_position","a_texCoord","a_color"],e["default"]=h},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e,r){var n=r(28),i=r(203),o=r(50),a=r(56)("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=r(86)("iframe"),n=o.length,i="<",a=">";for(e.style.display="none",r(196).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),l=t.F;n--;)delete l[u][o[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[u]=n(t),r=new s,s[u]=null,r[a]=t):r=l(),void 0===e?r:i(r,e)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(17).f,i=r(16),o=r(24)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(57)("keys"),i=r(41);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(13),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(30);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(13),i=r(22),o=r(52),a=r(61),s=r(17).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,r){e.f=r(24)},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(d===clearTimeout)return clearTimeout(t);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){_&&c&&(_=!1,c.length?h=c.concat(h):g=-1,h.length&&s())}function s(){if(!_){var t=i(a);_=!0;for(var e=h.length;e;){for(c=h,h=[];++g<e;)c&&c[g].run();g=-1,e=h.length}c=null,_=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(t){d=n}}();var c,h=[],_=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new u(t,e)),1!==h.length||_||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(62).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=l++,n=!(arguments.length<2)&&s.call(arguments,1);return u[r]=!0,o(function(){u[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(e,r(63).setImmediate,r(63).clearImmediate)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorMatrix=e.Matrix=e.Rectangle=e.Vector2=void 0;var i=r(20),o=n(i),a=r(76),s=n(a),u=r(75),l=n(u),f=r(34),d=n(f);e.Vector2=o["default"],e.Rectangle=s["default"],e.Matrix=l["default"],e.ColorMatrix=d["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(7),p=n(d),c=r(26),h=n(c),_=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._cacheEnabled=!0,n._stack=r,n._stack.forEach(function(t){t.on("update",n._onOperationUpdate)}),n}return(0,l["default"])(e,t),e.prototype.clear=function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]},e.prototype._onOperationUpdate=function(t,e){this.emit(f.Constants.Events.OPERATION_UPDATED,t,e)},e.prototype.enableCache=function(){this._cacheEnabled=!0},e.prototype.disableCache=function(){this._cacheEnabled=!1},e.prototype.forEach=function(t){return this._stack.filter(function(t){return!!t}).forEach(t)},e.prototype.render=function(t,e){var r=this,n=e,i=this._stack.filter(function(t){return!!t}).filter(function(t){return t.getEnabled()});i.reverse();var o=i.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],a=i.indexOf(o);i.reverse();var s=0;a!==-1&&(s=i.length-a-1);for(var u=0;u<s;u++)f.Log.info(this.constructor.name,"Skipping "+i[u].constructor.name);for(var l=p["default"].resolve(n),d=function(t){var e=i[t];l=l.then(function(n){return e.render(n).then(function(e){return t>0&&!r._cacheEnabled&&i[t-1].disposeRenderTextures(),e})})},c=s;c<i.length;c++)d(c);return l},e.prototype.validateSettings=function(){return p["default"].all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))},e.prototype.setAllToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(e){return e.setDirty(!0,t)})},e.prototype.updateDirtinessForRenderer=function(t){for(var e=!1,r=0;r<this._stack.length;r++){var n=this._stack[r];n&&(n.isDirtyForRenderer(t)&&(e=!0),e&&n.setDirtyForRenderer(!0,t))}},e.prototype.push=function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)},e.prototype.unshift=function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)},e.prototype.clone=function(){return new e(this._stack.slice(0))},e.prototype.get=function(t){return this._stack[t]},e.prototype.set=function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)},e.prototype.remove=function(t){var e=this._stack.indexOf(t);e!==-1&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))},e.prototype.removeAt=function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]},e.prototype.getStack=function(){return this._stack},e.prototype.dispose=function(){this.forEach(function(t){t.dispose()})},e}(h["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(120);Object.defineProperty(e,"FilterOperation",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(118);Object.defineProperty(e,"CropOperation",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(169);Object.defineProperty(e,"OrientationOperation",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(116);Object.defineProperty(e,"AdjustmentsOperation",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(168);
Object.defineProperty(e,"LinearFocusOperation",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(170);Object.defineProperty(e,"RadialFocusOperation",{enumerable:!0,get:function(){return n(l)["default"]}});var f=r(167);Object.defineProperty(e,"FrameOperation",{enumerable:!0,get:function(){return n(f)["default"]}});var d=r(174);Object.defineProperty(e,"SpriteOperation",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(181);Object.defineProperty(e,"WatermarkOperation",{enumerable:!0,get:function(){return n(p)["default"]}});var c=r(119);Object.defineProperty(e,"ExifOrientationOperation",{enumerable:!0,get:function(){return n(c)["default"]}});var h=r(171);Object.defineProperty(e,"SelectiveBlurOperation",{enumerable:!0,get:function(){return n(h)["default"]}})},function(t,e){t.exports={name:"photoeditorsdk",version:"3.6.1",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"Photo Editor SDK <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",scripts:{"render-filter-previews":"babel-node scripts/render-filter-previews",release:"ENV=production node_modules/.bin/gulp release","release:test":"ENV=test node_modules/.bin/gulp release","release:dev":"ENV=development node_modules/.bin/gulp release",test:"ENV=test node_modules/.bin/mocha --require test/support/node test/sdk test/ui","test:client":"ENV=test REMOTE=true gulp test:client","test:client:local":"ENV=test node --stack-size=65500 node_modules/.bin/gulp test:client","test:webgl":"node_modules/.bin/mocha test-webgl",coveralls:"npm run coverage && cat ./coverage/lcov.info | node_modules/.bin/coveralls && rm -rf ./coverage",coverage:"NODE_ENV=test node_modules/.bin/istanbul cover node_modules/.bin/_mocha --require test/support/node test/sdk test/ui"},devDependencies:{ajv:"^4.4.0","babel-core":"^6.6.4","babel-loader":"^6.2.4","babel-plugin-external-helpers-2":"^6.3.13","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-runtime":"^6.6.0","babel-preset-es2015":"^6.6.0","babel-preset-react":"^6.5.0","babel-register":"^6.6.0","babel-runtime":"^6.6.1",chai:"^3.4.0","chai-as-promised":"^5.1.0",chromedriver:"^2.23.1",classnames:"^2.1.3","compass-mixins":"^0.12.8",coveralls:"^2.11.2",del:"^2.0.0",gulp:"^3.8.10","gulp-9e-sass-lint":"0.0.8","gulp-changed":"^1.3.0","gulp-jsdoc3":"^0.2.0","gulp-mocha":"^2.2.0","gulp-notify":"^1.3.1","gulp-rename":"~1.2.0","gulp-sass":"^2.0.4","gulp-sequence":"^0.4.1","gulp-sourcemaps":"^1.5.2","gulp-standard":"^8.0.2","gulp-uglify":"^1.4.2","gulp-util":"~2.2.16","gulp-watch":"^4.3.5","gulp-webserver":"^0.9.1","gulp-yuicompressor":"0.0.3",inquirer:"^0.11.4","inquirer-path":"^1.0.0-alpha5",istanbul:"^1.1.0-alpha.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"git://github.com/jsdoc3/jsdoc.git#master","json-loader":"^0.5.2",mocha:"^2.3.3","mocha-lcov-reporter":"0.0.1",nightwatch:"git://github.com/saschagehlich/nightwatch.git#feature/upload-file","performance-now":"^0.2.0","preprocess-loader":"^0.2.0","pretty-error":"^2.0.0",prompt:"^1.0.0","raw-loader":"^0.5.1",react:"^15.1.0","react-dom":"^15.1.0",rembrandt:"^0.0.8","require-dir":"^0.3.0","run-sequence":"~0.3.6","selenium-server-standalone-jar":"^2.53.1",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.8.0","stats.js":"^0.16.0","term-img2":"^2.0.1","transform-loader":"^0.2.2","vinyl-source-stream":"0.1.1",webpack:"2.1.0-beta.25","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"]},dependencies:{request:"^2.79.0",canvas:"^1.3.12",gl:"^3.0.3"}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(43),p=n(d),c=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._children=[],a._filters=[],a}return(0,l["default"])(e,t),e.prototype.addFilter=function(t){this._filters.push(t)},e.prototype.removeFilter=function(t){var e=this._filters.indexOf(t);return e!==-1&&(this._filters.splice(e,1),!0)},e.prototype.setFilters=function(t){this._filters=t},e.prototype.addChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)},e.prototype.prependChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)},e.prototype.hasChild=function(t){var e=this._children.indexOf(t);return e!==-1},e.prototype.removeChild=function(t){var e=this._children.indexOf(t);e!==-1?(this._children.splice(e,1),t.setParent(null)):f.Log.info(this.constructor.name,"Tried to remove a child that does not exist")},e.prototype.clearChildren=function(){this._children=[]},e.prototype.renderWebGL=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}},e.prototype._renderWebGL=function(t){},e.prototype.renderCanvas=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}},e.prototype._renderCanvas=function(t){},e.prototype.updateTransform=function(){t.prototype.updateTransform.call(this),this._children.forEach(function(t){t.updateTransform()})},e.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},e.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},e.prototype.getChildren=function(){return this._children},e.prototype.getFilters=function(){return this._filters},e.prototype.dispose=function(){},e}(p["default"]);e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(109),p=n(d),c=function(t){function e(r,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._options=p["default"].defaults(i,{pixelRatio:1,transparent:!1,clearColor:f.Color.BLACK,debug:!1}),a.setMaxListeners(0),a._width=r||800,a._height=n||600,a._dimensions=new f.Vector2(a._width,a._height),a._maxTextureSize=null,a._pixelRatio=a._options.pixelRatio,a._clearColor=a._options.transparent?f.Color.TRANSPARENT:a._options.clearColor||f.Color.BLACK,a}return(0,l["default"])(e,t),e.prototype.setCanvas=function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new f.Vector2(this._width,this._height))},e.prototype.getCanvas=function(){return this._canvas},e.prototype._onBeforeContext=function(){},e.prototype.resizeTo=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()},e.prototype._createContext=function(){f.Log.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")},e.prototype._setupContext=function(){f.Log.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")},e.prototype.render=function(t){f.Log.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")},e.prototype.getMaxDimensions=function(){return null},e.prototype.getContext=function(){return this._context},e.prototype.getWidth=function(){return this._dimensions.x},e.prototype.getHeight=function(){return this._dimensions.y},e.prototype.getDimensions=function(){return this._dimensions},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)},e.prototype.getMaxTextureSize=function(){return this._maxTextureSize},e.prototype.getFilterManager=function(){return this._filterManager},e.prototype.setFilterManager=function(t){this._filterManager=t},e.isSupported=function(){return!0},e.prototype.isOfType=function(t){return this._type===t},e.prototype.dispose=function(){f.Log.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")},e}(f.EventEmitter);e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return t.prototype._onContextChange=function(){},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._renderer=null},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(31),p=n(d),c=r(108),h=n(c),_=function(t){function e(r,n){(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this));if(!(r instanceof p["default"]))throw new Error("`baseTexture` should be an instance of BaseTexture");if(i._baseTexture=r,i._uvs=new h["default"],i._frame=n?n.clone():null,i._frameLocked=!!n,i._onBaseTextureLoaded=i._onBaseTextureLoaded.bind(i),i._onBaseTextureUpdated=i._onBaseTextureUpdated.bind(i),i._frame||(i._frame=new f.Rectangle(0,0,1,1)),i._baseTexture.isLoaded()){var a=r.getFrame(),u=a.width,l=a.height;i._frameLocked||(i._frame=new f.Rectangle(0,0,u,l)),i._onBaseTextureLoaded()}else i._baseTexture.once("loaded",i._onBaseTextureLoaded);return i}return(0,l["default"])(e,t),e.fromImage=function(t){var r=new p["default"](t);return new e(r)},e.fromCanvas=function(t){var r=new p["default"](t);return new e(r)},e.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)},e.prototype._onBaseTextureUpdated=function(){var t=this._baseTexture.getFrame(),e=t.width,r=t.height;this._frame.width=e,this._frame.height=r,this.emit("update")},e.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.setBaseTexture=function(t){this._baseTexture=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t,this._updateUVs()},e.prototype.getWidth=function(){return this._frame.width},e.prototype.getHeight=function(){return this._frame.height},e.prototype.getUVs=function(){return this._uvs},e.prototype.getDimensions=function(){return new f.Vector2(this._frame.width,this._frame.height)},e}(f.EventEmitter);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(94),u=function(){function t(e){var r=this;(0,o["default"])(this,t),this._context=e,this._tracking=!1;var n=this,i=function(t){var i=e[t];"function"==typeof i?r[t]=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=e[t];if(!n._tracking)return a.apply(e,i);var u=s(),l=a.apply(e,i),f=s()-u,d={functionName:t,arguments:i,duration:f};return n._trackedCalls.push(d),l}:r._makePropertyWrapper(t)};for(var a in e)i(a)}return t.prototype._makePropertyWrapper=function(t){var e=["_context","_trackedCalls","_tracking"];if(e.indexOf(t)===-1){var r=this._context;this.__defineGetter__(t,function(){return r[t]}),this.__defineSetter__(t,function(e){r[t]=e})}},t.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[]},t.prototype.endFrame=function(){var t="Rendering";a.Log.log(t,"Frame rendering results:"),a.Log.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var r=t.functionName,n=t.duration;e[r]=e[r]||{totalDuration:0,calls:0},e[r].totalDuration+=n,e[r].calls++});var r=[];for(var n in e){var i=e[n];i.averageDuration=i.totalDuration/i.calls,r.push({functionName:n,data:i})}r.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),r=r.slice(0,3),r.forEach(function(e){a.Log.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})},t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e,r,n){(0,o["default"])(this,t),this.width=e,this.height=r,this.data=n}return t.fromNodeCanvasImage=function(e){var r=new Canvas(e.width,e.height),n=r.getContext("2d");n.drawImage(e,0,0);var i=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,i.data)},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(83),o=n(i),a=r(27),s=n(a);e["default"]={checkFramebufferStatus:function(t,e){var r,n=e.checkFramebufferStatus(e.FRAMEBUFFER),i=(r={},(0,o["default"])(r,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),(0,o["default"])(r,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),(0,o["default"])(r,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),(0,o["default"])(r,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),r);n!==e.FRAMEBUFFER_COMPLETE&&s["default"].warn(t,"Framebuffer incomplete: "+i[n])}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(37),s=n(a),u=r(20),l=n(u),f=function(){function t(){(0,o["default"])(this,t),this.reset()}return t.prototype.multiply=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0;return e=this.a*t.a+this.b*t.c,r=this.a*t.b+this.b*t.d,n=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=a,this},t.prototype.applyToVector=function(t){var e=t,r=e.x,n=e.y;return t=t.clone(),t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.tx,t},t.prototype.applyInverseToVector=function(t){var e=1/(this.a*this.d+this.c*-this.b),r=t,n=r.x,i=r.y;return t=t.clone(),t.x=this.d*e*n+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,t},t.prototype.rectangleToCoordinates=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l["default"](0,0),r=t.width*(1-e.x),n=t.width*-e.x,i=t.height*(1-e.y),o=t.height*-e.y,a=[];return a.push(new l["default"](this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),a.push(new l["default"](this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),a.push(new l["default"](this.a*r+this.c*i+this.tx,this.d*i+this.b*r+this.ty)),a.push(new l["default"](this.a*n+this.c*i+this.tx,this.d*i+this.b*n+this.ty)),a},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.prototype.toArray=function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)},t.prototype.toString=function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"},(0,s["default"])(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,o["default"])(this,t),this.x=e,this.y=r,this.width=n,this.height=i}return t.prototype.set=function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.equals=function(e,r,n,i){if(e instanceof t)return e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height;var o=e;return o===this.x&&r===this.y&&n===this.width&&i===this.height},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(3),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(94),u=function(){function t(e,r){(0,o["default"])(this,t),this._tag=e,this._name=r,this._start=s()}return t.prototype.stop=function(){var t=s(),e=t-this._start,r=Math.round(1e3/e);a.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+r+" FPS)")},t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=f.Constants.UniformType,p=f.Constants.OptionType,c=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(227),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options,u=s.brightness,l=s.saturation,f=s.contrast,d=s.gamma,p=s.exposure,c=s.shadows,h=s.highlights,_=0!==u,g=1!==l,y=1!==f,v=0!==p,m=1!==d,x=0!==c||1!==h,b=Math.pow(2,p);u=255*u;for(var T=0;T<n.width*n.height;T++){var C=4*T,w=a.data[C],O=a.data[C+1],R=a.data[C+2];if(m&&(w=255*Math.pow(w/255,1/d),O=255*Math.pow(O/255,1/d),R=255*Math.pow(R/255,1/d)),(v||x)&&(w/=255,O/=255,R/=255),v&&(w*=b,O*=b,R*=b),x){var E=.2125*w+.7154*O+.0721*R,M=Math.pow(E,1/(c+1))+-.76*Math.pow(E,2/(c+1))-E;M=Math.max(M,0),M=Math.min(M,1);var F=1-(Math.pow(1-E,1/(2-h))+-.8*Math.pow(1-E,2/(2-h)))-E;F=Math.max(F,-1),F=Math.min(F,0);var S=E+M+F;w=S*w/E,O=S*O/E,R=S*R/E}if((v||x)&&(w*=255,O*=255,R*=255),_&&(w+=u,O+=u,R+=u),g){var P=.2125*w+.7154*O+.0721*R;w=P*(1-l)+w*l,O=P*(1-l)+O*l,R=P*(1-l)+R*l}y&&(w=(w-127)*f+127,O=(O-127)*f+127,R=(R-127)*f+127),a.data[C]=w,a.data[C+1]=O,a.data[C+2]=R}o.putImageData(a,0,0)},e}(f.Engine.Filter);c.prototype.availableOptions={brightness:{type:p.NUMBER,"default":0,uniformType:d.FLOAT},saturation:{type:p.NUMBER,"default":1,uniformType:d.FLOAT},contrast:{type:p.NUMBER,"default":1,uniformType:d.FLOAT},gamma:{type:p.NUMBER,"default":1,uniformType:d.FLOAT},exposure:{type:p.NUMBER,"default":0,uniformType:d.FLOAT},shadows:{type:p.NUMBER,"default":0,uniformType:d.FLOAT},highlights:{type:p.NUMBER,"default":1,uniformType:d.FLOAT}},e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(4),p=n(d),c=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype.render=function(t,e){return f.Promise.resolve()},e}(p["default"]);c.isIdentity=!0,c.displayName="Original",c.identifier="identity",e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(12),d=n(f),p=r(8),c=n(p),h=r(9),_=3,g=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(241),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.lookupTableData,u=0;u<n.width*n.height;u++){var l=4*u,f=a.data[l];a.data[l]=s[4*f];var d=a.data[l+1];a.data[l+1]=s[1+4*d];var p=a.data[l+2];a.data[l+2]=s[2+4*p]}o.putImageData(a,0,0)},e}(d["default"].Filter);g.prototype.availableOptions={lookupTable:{type:h.OptionType.NUMBER,"default":_,uniformType:h.UniformType.INT},lookupTableData:{type:h.OptionType.ARRAY,"default":[]}};var y=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new g,a._textures={},a._renderers={},a}return(0,l["default"])(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(h.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(h.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)},e.prototype._updateWebGLTexture=function(t){if("undefined"==typeof this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),r=t.getRenderer(),n=r.id;this._renderers[n]=r,this._textures[n]||(this._textures[n]=new d["default"].BaseTexture);var i=this._textures[n],o=new d["default"].PixelArrayImage(256,1,e);i.setSource(o),i.setGLUnit(_),r.isOfType(h.RendererType.WEBGL)&&r.updateTexture(i)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data},e}(c["default"]);e["default"]=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(176),p=n(d),c=r(35),h=n(c),_=f.Constants.OptionType,g=f.Constants.RendererType,y=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._persistedPaths=[],a._outputCanvasDirty=!0,a._outputCanvas=f.Utils.createCanvas(),a._outputContext=a._outputCanvas.getContext("2d"),a._persistCanvas=f.Utils.createCanvas(),a._persistContext=a._persistCanvas.getContext("2d"),a._nextCanvas=f.Utils.createCanvas(),a._texture=f.Engine.Texture.fromCanvas(a._outputCanvas),a._sprite.setTexture(a._texture),a._onPathUpdate=a._onPathUpdate.bind(a),a}return(0,l["default"])(e,t),e.prototype.applyFlip=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var r=e.getPosition().clone();switch(t){case"horizontal":r.x=1-r.x;break;case"vertical":r.y=1-r.y}e.setPosition(r)}),e.setDirty(!0)}),this._reset()},e.prototype.applyRotation=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var r=e.getPosition().clone();90===t?(r.flip(),r.x=1-r.x):t===-90&&(r.flip(),r.y=1-r.y),e.setPosition(r)}),e.setDirty(!0)}),this._reset()},e.prototype.applyCrop=function(t,e){this._reset();var r=t.getInputDimensions(),n=e.rotation-t.getRotation(),i=t.getEnd().clone().subtract(t.getStart()).multiply(r),o=e.end.clone().subtract(e.start).multiply(r),a=t.getStart().clone().subtract(e.start).multiply(r),s=e.scale/t.getScale(),u=t.getStart().clone().multiply(r);this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var e=t.getPosition().clone().multiply(i).add(u),l=e.clone().subtract(r.clone().multiply(.5)),d=Math.cos(n),p=Math.sin(n),c=new f.Vector2(l.x*d-l.y*p,l.x*p+l.y*d);c.multiply(s);var h=r.clone().multiply(.5).add(c).subtract(u).add(a).divide(o);t.setPosition(h)});var e=t.getThickness()*i.min()/o.min();t.setThickness(e*s),t.setDirty(!0)}),this._reset()},e.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,r=t.height;this._outputContext.clearRect(0,0,e,r)}},e.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,r=t.height;this._persistContext.clearRect(0,0,e,r)}},e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="brush"),n},e.prototype.createPath=function(t,e,r){var n=new p["default"](this._operation,{thickness:t,hardness:e,color:r},this._nextCanvas);return n.on("update",this._onPathUpdate),this._options.paths.push(n),this.setDirty(!0),n},e.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0)},e.prototype._onPathPersist=function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas();var e=this._nextCanvas.getContext("2d");e.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)},e.prototype._getTexture=function(){return this._texture},e.prototype.setDirtyForRenderer=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.prototype.setDirtyForRenderer.call(this,e,r,n),e&&n&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[r],e)},e.prototype.render=function(t){var e=this,r=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(r)&&(f.Utils.ensureCanvasDimensions(this._outputCanvas,t),f.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(r){r.render(t),r.getClosed()&&e._persistedPaths.indexOf(r)===-1&&e._onPathPersist(r)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,r))},e.prototype.update=function(e,r){r&&(f.Utils.ensureCanvasDimensions(this._outputCanvas,r),f.Utils.ensureCanvasDimensions(this._persistCanvas,r),this._texture.getBaseTexture().update()),this.render(r);var n=e.getRenderer();return n.isOfType(g.WEBGL)&&n.updateTexture(this._texture.getBaseTexture()),t.prototype.update.call(this,e,r)},e.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()},e.prototype.getCanvas=function(){return this._outputCanvas},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._texture.getBaseTexture().dispose()},e}(h["default"]);y.prototype.availableOptions={id:{type:_.STRING,"default":function(){return f.Utils.getUUID()}},position:{type:_.VECTOR2,"default":new f.Vector2(0,0)},scale:{type:_.VECTOR2,"default":new f.Vector2(1,1)},anchor:{type:_.VECTOR2,"default":new f.Vector2(0,0)},pivot:{type:_.VECTOR2,"default":new f.Vector2(0,0)},rotation:{type:_.NUMBER,"default":0},paths:{type:_.ARRAY,"default":[],setter:function(t){return t.forEach(function(t){t.setDirty(!0)}),this._reset(),t}}},e["default"]=y},function(t,e,r){t.exports={"default":r(188),__esModule:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(82),o=n(i);e["default"]=function(t,e,r){return e in t?(0,o["default"])(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(192);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(30),i=r(13).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){t.exports=!r(15)&&!r(38)(function(){return 7!=Object.defineProperty(r(86)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var n=r(52),i=r(29),o=r(93),a=r(23),s=r(16),u=r(51),l=r(199),f=r(55),d=r(205),p=r(24)("iterator"),c=!([].keys&&"next"in[].keys()),h="@@iterator",_="keys",g="values",y=function(){return this};t.exports=function(t,e,r,v,m,x,b){l(r,e,v);var T,C,w,O=function(t){if(!c&&t in F)return F[t];switch(t){case _:return function(){return new r(this,t)};case g:return function(){return new r(this,t)}}return function(){return new r(this,t)}},R=e+" Iterator",E=m==g,M=!1,F=t.prototype,S=F[p]||F[h]||m&&F[m],P=S||O(m),A=m?E?O("entries"):P:void 0,k="Array"==e?F.entries||S:S;if(k&&(w=d(k.call(new t)),w!==Object.prototype&&(f(w,R,!0),n||s(w,p)||a(w,p,y))),E&&S&&S.name!==g&&(M=!0,P=function(){return S.call(this)}),n&&!b||!c&&!M&&F[p]||a(F,p,P),u[e]=P,u[R]=y,m)if(T={values:E?P:O(g),keys:x?P:O(_),entries:A},b)for(C in T)C in F||o(F,C,T[C]);else i(i.P+i.F*(c||M),e,T);return T}},function(t,e,r){var n=r(54),i=r(40),o=r(18),a=r(59),s=r(16),u=r(87),l=Object.getOwnPropertyDescriptor;e.f=r(15)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(r){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(92),i=r(50).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(16),i=r(18),o=r(194)(!1),a=r(56)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){t.exports=r(23)},function(t,e,r){(function(e){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-i)/1e6},n=e.hrtime,r=function(){var t;return t=n(),1e9*t[0]+t[1]},i=r()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,r(62))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(79);Object.defineProperty(e,"IdentityFilter",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(121);Object.defineProperty(e,"A15Filter",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(122);Object.defineProperty(e,"BreezeFilter",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(123);Object.defineProperty(e,"BWFilter",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(124);Object.defineProperty(e,"BWHardFilter",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(125);Object.defineProperty(e,"CelsiusFilter",{enumerable:!0,get:function(){
return n(l)["default"]}});var f=r(126);Object.defineProperty(e,"ChestFilter",{enumerable:!0,get:function(){return n(f)["default"]}});var d=r(127);Object.defineProperty(e,"FixieFilter",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(128);Object.defineProperty(e,"FoodFilter",{enumerable:!0,get:function(){return n(p)["default"]}});var c=r(129);Object.defineProperty(e,"FridgeFilter",{enumerable:!0,get:function(){return n(c)["default"]}});var h=r(130);Object.defineProperty(e,"FrontFilter",{enumerable:!0,get:function(){return n(h)["default"]}});var _=r(131);Object.defineProperty(e,"GlamFilter",{enumerable:!0,get:function(){return n(_)["default"]}});var g=r(132);Object.defineProperty(e,"GobblinFilter",{enumerable:!0,get:function(){return n(g)["default"]}});var y=r(133);Object.defineProperty(e,"K1Filter",{enumerable:!0,get:function(){return n(y)["default"]}});var v=r(134);Object.defineProperty(e,"K2Filter",{enumerable:!0,get:function(){return n(v)["default"]}});var m=r(135);Object.defineProperty(e,"K6Filter",{enumerable:!0,get:function(){return n(m)["default"]}});var x=r(136);Object.defineProperty(e,"KDynamicFilter",{enumerable:!0,get:function(){return n(x)["default"]}});var b=r(137);Object.defineProperty(e,"LeninFilter",{enumerable:!0,get:function(){return n(b)["default"]}});var T=r(138);Object.defineProperty(e,"LomoFilter",{enumerable:!0,get:function(){return n(T)["default"]}});var C=r(140);Object.defineProperty(e,"MellowFilter",{enumerable:!0,get:function(){return n(C)["default"]}});var w=r(141);Object.defineProperty(e,"MetalFilter",{enumerable:!0,get:function(){return n(w)["default"]}});var O=r(142);Object.defineProperty(e,"MorningFilter",{enumerable:!0,get:function(){return n(O)["default"]}});var R=r(143);Object.defineProperty(e,"OrchidFilter",{enumerable:!0,get:function(){return n(R)["default"]}});var E=r(144);Object.defineProperty(e,"PolaFilter",{enumerable:!0,get:function(){return n(E)["default"]}});var M=r(145);Object.defineProperty(e,"Pola669Filter",{enumerable:!0,get:function(){return n(M)["default"]}});var F=r(160);Object.defineProperty(e,"QuoziFilter",{enumerable:!0,get:function(){return n(F)["default"]}});var S=r(161);Object.defineProperty(e,"SemiredFilter",{enumerable:!0,get:function(){return n(S)["default"]}});var P=r(162);Object.defineProperty(e,"SunnyFilter",{enumerable:!0,get:function(){return n(P)["default"]}});var A=r(163);Object.defineProperty(e,"TexasFilter",{enumerable:!0,get:function(){return n(A)["default"]}});var k=r(164);Object.defineProperty(e,"X400Filter",{enumerable:!0,get:function(){return n(k)["default"]}});var D=r(139);Object.defineProperty(e,"LUTFilter",{enumerable:!0,get:function(){return n(D)["default"]}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(3),p=n(d),c=r(66),h=n(c),_=r(65),g=i(_),y=r(115),v=i(y),m=r(42),x=i(m),b=r(111),T=i(b),C=r(77),w=i(C),O=p.Rectangle,R=p.Constants,E=p.Engine,M=p.Utils,F=p.EventEmitter,S=p.Vector2,P=p.Log,A=p.Base64,k=function(t){return M.byteArrayToString(A.decode(t))},D=R.RenderType,B=R.ImageFormat,L=R.Events,I=R.RendererType,U=function(t){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a["default"])(this,e);var o=(0,u["default"])(this,t.call(this));o._onOperationUpdate=o._onOperationUpdate.bind(o),o._onContextRestored=o._onContextRestored.bind(o);var s=r(67),l=s.version;if(o.version=l,o[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,o._preferredRenderer=n,o._options=M.defaults(i,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),o._options.smoothUpscaling&&(E.BaseTexture.DefaultMagFilter=E.BaseTexture.LinearFilter),o._options.extensions=M.defaults(o._options.extensions,{operations:[],controls:[],languages:[]}),P.setLevel(o._options.logLevel),!o._v())return(0,u["default"])(o);o._defaultRenderMode=o._options.renderMode,o._renderMode=o._options.renderMode,o._textureQuality=o._options.textureQuality,o._offset=new S,o._zoom=o._options.zoom,o._spriteScale=o._options.spriteScale,o._rotation=o._options.rotation,o._operations={},o._operationsStack=null,o.setOperationsStack(new g["default"]),o._container=new E.Container,o._sprite=new E.Sprite,o._container.addChild(o._sprite),o.setSmoothDownscaling(o._options.smoothDownscaling),o._inputBaseTexture=null,o._inputTexture=null,o._currentInputTexture=null,o._currentTexture=null,o._resizedTexture=null,o._resizedContainer=new E.Container,o._resizedSprite=new E.Sprite,o._resizedContainer.addChild(o._resizedSprite),o._checkForUpdates(),o._registerOperations(),o._initRenderer();var f=o._renderer.constructor.type;return o._options.displayWelcomeMessage&&P.log("Yo!","Version: "+o.version+" ("+f+") - https://www.photoeditorsdk.com"),o._options.image&&o.setImage(o._options.image),o}return(0,f["default"])(e,t),e.prototype._v=function(){var t=this;if(!this[k("X29wdGlvbnM=")][k("YXBpS2V5")])return P.error(k("YXBpS2V5"),k("Tm8gYGFwaUtleWAgb3B0aW9uIGdpdmVuLg==")),P.error(k("YXBpS2V5"),k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhbiBBUEkga2V5IHlldCwgcGxlYXNlIGNvbnRhY3Qgb3VyIHNhbGVzIHN0YWZmIGF0IHNhbGVzQHBob3RvZWRpdG9yc2RrLmNvbSB0byBvYnRhaW4gYSBsaWNlbnNlIG9yIGxvZyBpbiB0byB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZC4=")),!1;var e=p[k("TGljZW5zaW5n")];return this._lic=new e(this[k("X29wdGlvbnM=")][k("YXBpS2V5")]),this._lic.c()["catch"](function(e){t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1,P.error(k("TGljZW5zaW5n"),k("SW52YWxpZCBsaWNlbnNlIGtleQ==")),P.error(k("TGljZW5zaW5n"),k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhbiBBUEkga2V5IHlldCwgcGxlYXNlIGNvbnRhY3Qgb3VyIHNhbGVzIHN0YWZmIGF0IHNhbGVzQHBob3RvZWRpdG9yc2RrLmNvbSB0byBvYnRhaW4gYSBsaWNlbnNlIG9yIGxvZyBpbiB0byB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZC4="))}),!0},e.prototype._cv=function(){var t=this;return new Promise(function(e,r){return t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]?void e():r(new Error(k("SW52YWxpZCBsaWNlbnNlIGtleQ==")))})},e.prototype._t=function(){this._lic.t()},e.prototype._onOperationUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.emit.apply(this,[L.OPERATION_UPDATED].concat(e))},e.prototype._onContextRestored=function(){P.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTextures()}),this.render()},e.prototype["export"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.DATAURL,e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.PNG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv().then(function(){e._t();var i=new T["default"](e,{renderType:t,imageFormat:r,quality:n});return i["export"]()})},e.prototype.render=function(){var t=this;if(!this._image)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var e=this._renderer.getContext();e.startFrame&&e.startFrame();var r=void 0;P.canLog("info")&&(r=new w["default"]("","Frame rendering")),P.info("","Rendering starts");var n=this._operationsStack;return n.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()}).then(function(){return n.validateSettings()}).then(function(){return n.render(t,t._currentTexture)}).then(function(e){switch(t._currentTexture=e,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var r=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(r),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0)}return t._renderer.render(t._container),e}).then(function(t){return r&&r.stop(),e.endFrame&&e.endFrame(),t})},e.prototype.getTextureScale=function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)},e.prototype._prepareTexture=function(){var t=this;return new Promise(function(e,r){var n=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i=t.getInputDimensions().multiply(n).floor(),o=void 0;t._resizedTexture?t._resizedTexture.getDimensions().equals(i)||(t._resizedTexture.resizeTo(i),o=!0):(t._resizedTexture=new E.RenderTexture(t._renderer,i.x,i.y),o=!0),o&&(t._resizedSprite.setScale(n,n),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)})},e.prototype._registerOperations=function(){this._operations={};for(var t in h){var e=h[t];this._operations[e.identifier]=e}this._operations=M.extend(this._operations,this._options.extensions.operations)},e.prototype.setAllOperationsToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)},e.prototype.createOperation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this._operations[t];if(!n)throw new Error("No operation with identifier `"+t+"` found.");var i=new n(this,e);return r&&this.addOperation(i),i},e.prototype.addOperation=function(t){this._operationsStack.push(t)},e.prototype.removeOperation=function(t){this._operationsStack.remove(t)},e.prototype.getInputDimensions=function(){var t=this._inputTexture.getFrame();return new S(t.width,t.height)},e.prototype.getFinalDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions(),r=this._operationsStack;return r.forEach(function(t){t.getEnabled()&&(e=t.getNewDimensions(e))}),t&&e.multiply(this._spriteScale),e.floor()},e.prototype.getOutputDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()},e.prototype.getOutputTextureDimensions=function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getTextureScale()),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(t){e=t.getNewDimensions(e)}),e},e.prototype._checkForUpdates=function(){this._options.versionCheck&&(this._versionChecker=new v["default"](this.version))},e.prototype._initRenderer=function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},e=void 0,r=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var n=this._options.canvas;e=n.width,r=n.height}else if(this._image){var i=this.getFinalDimensions();e=i.x,r=i.y}switch(this._preferredRenderer){case I.WEBGL:this._renderer=E.autoDetectRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;case I.CANVAS:this._renderer=new E.CanvasRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;default:P.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=E.autoDetectRenderer(e,r,t)}},e.prototype.resizeTo=function(t){this._renderer.resizeTo(t,!0)},e.prototype.reset=function(){this._operationsStack.clear()},e.prototype.parseExif=function(t){if(t){var e=t.src;if(x["default"].isJPEG(e)){var r=null;try{r=x["default"].fromBase64String(e)}catch(n){}if(!r)return;return r}}},e.prototype._handleExifOrientation=function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,r=[2,4,5,7].indexOf(t.Orientation)!==-1;(e||r)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t),this._exif.setOrientation(1))}},e.prototype.hasImage=function(){return null!==this._image&&"undefined"!=typeof this._image},e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var n=new E.BaseTexture(this._image),i=new O(0,0,this._image.width,this._image.height);r&&(i.width=r.x,i.height=r.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new E.Texture(n,i),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)},e.prototype.getCanvas=function(){return this._renderer.getCanvas()},e.prototype.setCanvas=function(t){this._renderer.setCanvas(t)},e.prototype.getSprite=function(){return this._sprite},e.prototype.getContainer=function(){return this._container},e.prototype.getOperationsStack=function(){return this._operationsStack},e.prototype.setOperationsStack=function(t){this._operationsStack&&this._operationsStack.off(L.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(L.OPERATION_UPDATED,this._onOperationUpdate)},e.prototype.getOperations=function(){return this._operations},e.prototype.getRenderer=function(){return this._renderer},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t,e){t instanceof S?this._offset.copy(t):this._offset.set(t,e)},e.prototype.getRenderMode=function(){return this._renderMode},e.prototype.setRenderMode=function(t){this._renderMode=t},e.prototype.getZoom=function(){return this._zoom},e.prototype.setZoom=function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()},e.prototype.getTextureQuality=function(){return"export"===this._renderMode?1:this._textureQuality},e.prototype.setTextureQuality=function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)},e.prototype.getSpriteScale=function(){return this._spriteScale},e.prototype.setSpriteScale=function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()},e.prototype.getPixelRatio=function(){return this._options.pixelRatio},e.prototype.getExif=function(){return this._exif},e.prototype.getOptions=function(){return this._options},e.prototype.getInputTexture=function(){return this._inputTexture},e.prototype.setSmoothDownscaling=function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t)},e.prototype.setRotation=function(t){this._rotation=t},e.prototype.getRotation=function(){return this._rotation},e.prototype.dispose=function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()},e}(F);e["default"]=U},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(44),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(221),u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=r.getContext();i.drawImage(n,0,0)},e}(p["default"]);_.prototype.availableOptions={color:{type:c.COLOR,"default":f.Color.WHITE,uniformType:h.FLOAT4}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(100);Object.defineProperty(e,"UnpremultiplyFilter",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(98);Object.defineProperty(e,"ColorOverlayFilter",{enumerable:!0,get:function(){return n(o)["default"]}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(44),d=n(f),p=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(222),n}return(0,l["default"])(e,t),e}(d["default"]);e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(72),p=n(d),c=r(69),h=n(c),_=r(32),g=n(_),y=r(45),v=n(y),m=f.Constants.RendererType,x=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._type=m.CANVAS,a.setCanvas(a._options.canvas||a._createCanvas()),a}return(0,l["default"])(e,t),e.prototype._createCanvas=function(){return f.Utils.createCanvas()},e.prototype._createContext=function(){var t=this._canvas,r=t.getContext("2d");return this._options.debug&&(r=new p["default"](r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new g["default"](this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new v["default"](this)},e.prototype.render=function(t){var e=this._renderTarget.getContext(),r=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(r),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var n=this._canvas,i=n.width,o=n.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)},e.prototype.renderDisplayObject=function(t,e){var r=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(r)},e.prototype.getCurrentRenderTarget=function(){return this._renderTarget},e.prototype.setRenderTarget=function(t){this._renderTarget=t},e.prototype.getContext=function(){return this._renderTarget.getContext()},e.prototype.dispose=function(){this._filterManager.dispose()},e}(h["default"]);x.contextId=0,x.type="Canvas2D",e["default"]=x},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=n(f),p=r(70),c=n(p),h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));a._maxBatchSize=d["default"].BATCH_SIZE,a._vertices=new ArrayBuffer(4*d["default"].BATCH_SIZE*d["default"].VERTEX_BYTE_SIZE),a._positions=new Float32Array(a._vertices),a._colors=new Uint32Array(a._vertices),a._indices=new Uint16Array(6*d["default"].BATCH_SIZE);for(var u=0,l=0;u<6*d["default"].BATCH_SIZE;u+=6,l+=4)a._indices[u+0]=l+0,a._indices[u+1]=l+1,a._indices[u+2]=l+2,a._indices[u+3]=l+0,a._indices[u+4]=l+2,a._indices[u+5]=l+3;return a._shaders=[],a._sprites=[],a._currentBatchSize=0,a._currentBaseTexture=null,a._onContextChange(),a}return(0,l["default"])(e,t),e.prototype.render=function(t){var e=t.getTexture(),r=e.getFrame(),n=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=n);var i=e.getUVs();if(i){var o=this._currentBatchSize*d["default"].VERTEX_BYTE_SIZE;this._addVertexCoordinates(t,o,r),this._addTextureUVs(t,o,i),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}},e.prototype._addColors=function(t,e){var r=this._colors,n=t.getTint(),i=(n>>16)+(65280&n)+((255&n)<<16)+(255*t.getWorldAlpha()<<24);r[e+4]=r[e+9]=r[e+14]=r[e+19]=i},e.prototype._addTextureUVs=function(t,e,r){var n=this._positions,i=r.getUVsAt(0);n[e+2]=i.x,n[e+3]=i.y,i=r.getUVsAt(1),n[e+7]=i.x,n[e+8]=i.y,i=r.getUVsAt(2),n[e+12]=i.x,n[e+13]=i.y,i=r.getUVsAt(3),n[e+17]=i.x,n[e+18]=i.y},e.prototype._addVertexCoordinates=function(t,e,r){for(var n=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(r,o),s=5,u=0;u<4;u++)n[e+u*s]=a[u].x,n[e+u*s+1]=a[u].y},e.prototype._onContextChange=function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders["default"],this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)},e.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},e.prototype.flush=function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*d["default"].BATCH_SIZE)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var r=this._positions.subarray(0,this._currentBatchSize*d["default"].VERTEX_BYTE_SIZE);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var n=0,i=null,o=null,a=null,s=null,u=!1,l=!1,f=null,p=0,c=0,h=this._currentBatchSize;c<h;c++){if(f=this._sprites[c],o=f.getTexture().getBaseTexture(),s=f.getShader()||this._shader,u=a!==s,l=i!==o,(l||u)&&(this._renderBatch(i,n,p),p=c,n=0,i=o,u)){a=s,t.setShader(a);var _=t.getCurrentRenderTarget(),g=_.getProjectionMatrix().toArray();a.setUniform("u_projMatrix",g),a.syncUniforms(),e.activeTexture(e.TEXTURE0)}n++}this._renderBatch(i,n,p),this._currentBatchSize=0,this._sprites=[]}},e.prototype._renderBatch=function(t,e,r){if(0!==e){var n=this._renderer,i=n.getContext(),o=t.getGLTextureForRenderer(n);o||(o=n.getOrCreateGLTexture(t)),t.isDirty()&&(n.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*r*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}},e.prototype.dispose=function(){var e=this._renderer,r=e.getContext();r.deleteBuffer(this._vertexBuffer),r.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,t.prototype.dispose.call(this)},e}(c["default"]);e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(69),p=n(d),c=r(33),h=n(c),_=r(70),g=n(_),y=r(102),v=n(y),m=r(48),x=n(m),b=r(43),T=n(b),C=r(46),w=n(C),O=r(72),R=n(O),E=r(73),M=n(E),F=f.Constants.RendererType,S=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._type=F.WEBGL,a._textures=[],a._fakeObject=new T["default"],a._onContextLost=a._onContextLost.bind(a),a._onContextRestored=a._onContextRestored.bind(a),a.setCanvas(a._options.canvas||f.Utils.createCanvas()),a.shaders=a._initShaders(),a.renderers=a._initRenderers(),a}return(0,l["default"])(e,t),e.prototype._onContextLost=function(t){t.preventDefault(),f.Log.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")},e.prototype._onContextCreationError=function(t){t.preventDefault(),f.Log.warn(this.constructor.name,"Failed to create WebGL context: "+(t.statusMessage||"Unknown error"))},e.prototype._onContextRestored=function(){var t=this;f.Log.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")},e.prototype._onBeforeContext=function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new w["default"](this),this._currentObjectRenderer=new g["default"](this)},e.prototype.setShader=function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)},e.prototype.setCanvas=function(e){this._canvas&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)),e.addEventListener&&(e.addEventListener("webglcontextlost",this._onContextLost),e.addEventListener("webglcontextrestored",this._onContextRestored),e.addEventListener("webglcontextcreationerror",this._onContextCreationError)),t.prototype.setCanvas.call(this,e)},e.prototype._setAttributesForShader=function(t){var e=this._context,r=t.getAttributes(),n=t.getAttributeLocations();r.forEach(function(t){var r=n[t];e.enableVertexAttribArray(r)})},e.prototype._initShaders=function(){return{"default":new x["default"](this)}},e.prototype._initRenderers=function(){return{sprite:new v["default"](this)}},e.prototype._createContext=function(){var t=this._canvas,r=null,n={preserveDrawingBuffer:!0};if(r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var i=function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")};r=window.WebGLDebugUtils.makeDebugContext(r,null,i)}return this._options.debug&&(r=new R["default"](r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this._maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new h["default"](this,this._width,this._height,this._pixelRatio,(!0)),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()},e.prototype._getMaxPrecision=function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==r.rangeMax?"highp":"lowp"},e.prototype.resizeTo=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prototype.resizeTo.call(this,e,r),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e)},e.prototype.setRenderTarget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()},e.prototype.setObjectRenderer=function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()},e.prototype.render=function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)},e.prototype.renderDisplayObject=function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()},e.prototype.clear=function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)},e.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}},e.prototype.restore=function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer},e.prototype.getOrCreateGLTexture=function(t){var e=this._context,r=t.getGLTextureForRenderer(this);return r||(r=e.createTexture(),t.setGLTextureForRenderer(r,this),this._textures.push(t)),r},e.prototype.updateTexture=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.getSource(),n=!!r,i=this._context,o=t.getGLUnit(),a=this.getOrCreateGLTexture(t);i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,a),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&n&&("undefined"!=typeof Image&&r instanceof Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement||"Canvas"===r.constructor.name||r.tagName&&"CANVAS"===r.tagName.toUpperCase()||r.tagName&&"IMG"===r.tagName.toUpperCase()?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r):("undefined"!=typeof NodeCanvasImage&&r instanceof NodeCanvasImage&&(r=M["default"].fromNodeCanvasImage(r)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.width,r.height,0,i.RGBA,i.UNSIGNED_BYTE,r.data))),t.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)},e.prototype.getMaxDimensions=function(){var t=f.Utils.createCanvas(),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(e){var r=e.getParameter(e.MAX_TEXTURE_SIZE),n=e.getExtension("WEBGL_lose_context");return n&&n.loseContext(),r}return null},e.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},e.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},e.isSupported=function(){var t=f.Utils.createCanvas();t.addEventListener("webglcontextcreationerror",this._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl");return t.removeEventListener("webglcontextcreationerror",this._onContextCreationError),!!e},e.prototype.getMaxFloatPrecision=function(){return this._maxFloatPrecision},e.prototype.getMaxIntPrecision=function(){return this._maxIntPrecision},e.prototype.dispose=function(){var t=this;this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)});for(var e in this.shaders)this.shaders[e].dispose(),delete this.shaders[e]},e}(p["default"]);S.contextId=0,S.type="WebGL",e["default"]=S},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(48),o=n(i);e["default"]={TextureShader:o["default"]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(68),p=n(d),c=r(114),h=n(c),_=function(t){function e(r){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=r,n._shader=null,n._width=0,n._height=0,n._anchor=new f.Vector2(0,0),n.setTexture(r),n}return(0,l["default"])(e,t),e.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype._renderWebGL=function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new h["default"]),this._potRenderer.render(t,this,this._texture)),
t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)},e.prototype._renderCanvas=function(t){var e=this._worldTransform,r=this._texture.getFrame(),n=r.width,i=r.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-n|0,s=this._anchor.y*-i|0,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),f=l.getPixelRatio(),d=l.getSource();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,(d.naturalWidth||n)*f,(d.naturalHeight||i)*f,a*o,s*o,n*o,i*o)},e.prototype.isAtPosition=function(t){var e=this._worldTransform.applyInverseToVector(t),r=this._texture.getFrame(),n=r.width,i=r.height,o=new f.Vector2((-n),(-i));o.multiply(this._anchor);var a=o.clone().add(n,i);return!(e.x<o.x||e.x>a.x||e.y<o.y||e.y>a.y)},e.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},e.prototype.getBounds=function(){var t=this;return this._boundsNeedUpdate&&!function(){var e=t._bounds,r=t._texture.getFrame(),n=t._worldTransform,i=t._anchor,o=n.rectangleToCoordinates(r,i),a=o[0].x,s=o[0].y,u=a,l=s;o.forEach(function(t){var e=t.x,r=t.y;a=Math.min(a,e),s=Math.min(s,r),u=Math.max(u,e),l=Math.max(l,r)}),e.x=a,e.width=Math.abs(u-a),e.y=s,e.height=Math.abs(l-s),t._boundsNeedUpdate=!1}(),this._bounds.clone()},e.prototype.getTexture=function(){return this._texture},e.prototype.setTexture=function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))},e.prototype.getShader=function(){return this._shader},e.prototype.setShader=function(t){this._shader=t},e.prototype.getWidth=function(){return this._width},e.prototype.setWidth=function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getHeight=function(){return this._height},e.prototype.setHeight=function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getDimensions=function(){return new f.Vector2(this._width,this._height)},e.prototype.getAnchor=function(){return this._anchor},e.prototype.setAnchor=function(t,e){t instanceof f.Vector2?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling},e.prototype.setSmoothDownscaling=function(t){this._smoothDownscaling=t},e.prototype.dispose=function(){this._texture&&this._texture.off("update",this._onTextureUpdate)},e}(p["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),d=r(71),p=n(d),c=r(31),h=n(c),_=r(33),g=n(_),y=r(32),v=n(y),m=r(46),x=n(m),b=r(45),T=n(b),C=f.Constants.RendererType,w=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,o["default"])(this,e);var u=new h["default"],l=u.getFrame();l.width=n,l.height=i,u.setPixelRatio(a),u.setLoaded(!0);var d=(0,s["default"])(this,t.call(this,u,new f.Rectangle(0,0,n,i)));return d._loaded=!0,d._width=n,d._height=i,d._pixelRatio=a,d._renderer=r,d._setupFilterManager(),d._setupBuffer(),d._updateUVs(),d}return(0,l["default"])(e,t),e.prototype._setupFilterManager=function(){this._renderer.isOfType(C.WEBGL)?this._filterManager=new x["default"](this._renderer):this._renderer.isOfType(C.CANVAS)&&(this._filterManager=new T["default"](this._renderer)),this._filterManager.resizeTo(new f.Vector2(this._width,this._height))},e.prototype._setupBuffer=function(){this._renderer.isOfType(C.WEBGL)?this._setupWebGLBuffer():this._renderer.isOfType(C.CANVAS)&&this._setupCanvasRenderTarget()},e.prototype._setupWebGLBuffer=function(){this._renderTarget=new g["default"](this._renderer,this._width,this._height,this._pixelRatio),this._baseTexture.setGLTextureForRenderer(this._renderTarget.getTexture(),this._renderer)},e.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new v["default"](this._width,this._height,this._pixelRatio),this._baseTexture.setSource(this._renderTarget.getCanvas())},e.prototype.clear=function(t){this._renderTarget.clear(t)},e.prototype.resizeTo=function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._baseTexture.resizeTo(t),this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))},e.prototype.render=function(t){if(this._renderer.isOfType(C.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(C.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}},e.prototype._renderWebGL=function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderTarget.updateMipMap(),this._renderer.setFilterManager(e)},e.prototype._renderCanvas=function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.dispose=function(){this._baseTexture.disposeGLTexturesForRenderer(this._renderer),this._renderTarget.dispose(),this._filterManager.dispose()},e}(p["default"]);e["default"]=w},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return t.prototype.map=function(t,e){var r=e.x,n=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=r,this._vertices[1]=n,this._vertices[2]=r+e.width,this._vertices[3]=n,this._vertices[4]=this._vertices[2],this._vertices[5]=n+e.height,this._vertices[6]=r,this._vertices[7]=this._vertices[5],this._uploadBuffers()},t.prototype._initBuffers=function(){var t=this._context;this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t.prototype._uploadBuffers=function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)},t.prototype.getVertexBuffer=function(){return this._vertexBuffer},t.prototype.getIndexBuffer=function(){return this._indexBuffer},t.prototype.dispose=function(){var t=this._context;t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(){(0,o["default"])(this,t),this._uvs=[new a.Vector2(0,0),new a.Vector2(1,0),new a.Vector2(1,1),new a.Vector2(0,1)]}return t.prototype.update=function(t,e){var r=this._uvs[0];r.x=t.x/e.width,r.y=t.y/e.height,r=this._uvs[1],r.x=(t.x+t.width)/e.width,r.y=t.y/e.height,r=this._uvs[2],r.x=(t.x+t.width)/e.width,r.y=(t.y+t.height)/e.height,r=this._uvs[3],r.x=t.x/e.width,r.y=(t.y+t.height)/e.height},t.prototype.getUVsAt=function(t){return this._uvs[t]},t.prototype.getUVs=function(){return this._uvs},t}();e["default"]=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={defaults:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)"undefined"==typeof i[u]&&(i[u]=s[u])}return i},extend:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)i[u]=s[u]}return i}};e["default"]=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._head=0,this._buf=e}return t.prototype.peekInt8=function(){return this._buf[this._head]},t.prototype.peekInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1];return t?(r<<8)+e:(e<<8)+r},t.prototype.peekInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2];return t?(n<<16)+(r<<8)+e:(e<<16)+(r<<8)+n},t.prototype.peekInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(n<<16)+(r<<8)+e:(e<<32)+(r<<16)+(n<<8)+i},t.prototype.writeInt16=function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t},t.prototype.readInt8=function(){var t=this.peekInt8();return this._head+=1,t},t.prototype.readInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e},t.prototype.readInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e},t.prototype.readInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e},t.prototype.readString=function(t){for(var e="",r=0;r<t;r++){var n=this.readInt8();e+=String.fromCharCode(n)}return e},t.prototype.getHead=function(){return this._head},t.prototype.setHead=function(t){this._head=t},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(9),d=r(12),p=n(d),c=r(19),h=n(c),_=r(42),g=n(_),y=r(113),v=n(y),m=r(14),x=n(m),b=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n));return i._sdk=r,i}return(0,l["default"])(e,t),e.prototype["export"]=function(){var t=this,e=this._sdk.getRenderer(),r=this._options,n=r.renderType,i=r.imageFormat,o=r.quality;return this.validateSettings().then(function(){return t._prepareSDK()}).then(function(r){var a=e.getCanvas();e.isOfType(f.RendererType.WEBGL)&&(a=t._createCanvasFromTexture(r));var s=void 0;if(n===f.RenderType.IMAGE||n===f.RenderType.DATAURL){s="undefined"==typeof window?a.toDataURL(i):a.toDataURL(i,o);var u=t._sdk.getImage();if(g["default"].isJPEG(u.src)&&g["default"].isJPEG(s)){var l=t._sdk.getExif();l&&(s=l.restoreExifTags(s))}}if(e.isOfType(f.RendererType.WEBGL)&&"undefined"!=typeof Canvas&&a instanceof Canvas&&v["default"].renderContextToCanvas(e.getContext(),a),n===f.RenderType.IMAGE){var d=void 0;return d=new Image,d.src=s,d}return n===f.RenderType.DATAURL?s:n===f.RenderType.BUFFER?a.toBuffer():n===f.RenderType.MSBLOB?a.msToBlob():n===f.RenderType.BLOB?new Promise(function(t,e){a.toBlob(function(e){t(e)},i,o)}):void 0}).then(function(e){return t._restoreSDK().then(function(){return e})})},e.prototype._prepareSDK=function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(f.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var r=this._sdk.getOperationsStack();return r.forEach(function(t){t.disposeRenderTextures()}),r.disableCache(),this._sdk.render()},e.prototype._restoreSDK=function(){var t=this._sdk.getOperationsStack();t.enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var e=this._sdk.getRenderer(),r=e.isOfType(f.RendererType.CANVAS);return e.setPixelRatio(this._sdkSettings.pixelRatio),e.resizeTo(this._sdkSettings.dimensions,r),this._sdk.setTextureQuality(this._sdkSettings.pixelRatio),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()},e.prototype._createCanvasFromTexture=function(t){var e=this._sdk.getRenderer(),r=this._sdk.getFinalDimensions(),n=this._sdk.getRenderer().getContext(),i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i);var o=t.getBaseTexture().getGLTextureForRenderer(e);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var a=new Uint8Array(r.x*r.y*4);n.readPixels(0,0,r.x,r.y,n.RGBA,n.UNSIGNED_BYTE,a);var s=this._checkPixelsForTransparency(a),u=void 0;if(s){var l=new p["default"].Sprite(t);l.setFilters([new p["default"].Filters.UnpremultiplyFilter]);var f=new p["default"].Container;f.addChild(l),u=new p["default"].RenderTexture(e,r.x,r.y),u.render(f);var d=u.getBaseTexture().getGLTextureForRenderer(e);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,d,0),n.readPixels(0,0,r.x,r.y,n.RGBA,n.UNSIGNED_BYTE,a),e.setRenderTarget(),u.dispose()}var c=h["default"].createCanvas();c.width=r.x,c.height=r.y;var _=c.getContext("2d"),g=_.createImageData(r.x,r.y);return g.data.set(a),_.putImageData(g,0,0),n.deleteFramebuffer(i),c},e.prototype._checkPixelsForTransparency=function(t){for(var e=this._sdk.getFinalDimensions(),r=e.x*e.y*4,n=void 0,i=3;i<r;i+=4)if(n=t[i],255!==n)return!0;return!1},e}(x["default"]);b.prototype.availableOptions={renderType:{type:f.OptionType.STRING,available:h["default"].values(f.RenderType),"default":f.RenderType.IMAGE},imageFormat:{type:f.OptionType.STRING,available:h["default"].values(f.ImageFormat),"default":f.ImageFormat.PNG},quality:{type:f.OptionType.NUMBER,"default":.8}},e["default"]=b},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(25),s=n(a),u=r(19),l=n(u),f=function(t){return l["default"].byteArrayToString(s["default"].decode(t))},d={development:"aHR0cHM6Ly9zdGFnaW5nLmFwaS5waG90b2VkaXRvcnNkay5jb20=",production:"aHR0cHM6Ly9hcGkucGhvdG9lZGl0b3JzZGsuY29t",test:"aHR0cHM6Ly9zdGFnaW5nLmFwaS5waG90b2VkaXRvcnNkay5jb20="},p="TDJGMWRHZy9ZWEJwUzJWNVBRPT0=",c="Sm1OaGJHeGlZV05yUFE9PQ==",h="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=",_="YXV0aG9yaXplZA==",g="ZXJyb3I=",y=function(){function t(e){(0,o["default"])(this,t),this._YXBpS2V5=e}return t.prototype._loadJSON=function(t){return this._loadJSONBrowser(t)},t.prototype._loadJSONBrowser=function(t){return new Promise(function(e,r){var n=document.createElement("script"),i="pesdk"+Math.floor(999999*Math.random());window[i]=function(t){n.parentNode.removeChild(n),e(t),delete window[i]},n.src=t+f(f(c))+i,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)})},t.prototype._loadJSONNode=function(t){return new Promise(function(t,e){})},t.prototype.c=function(){return this._loadJSON(f(d.production)+f(f(p))+this._YXBpS2V5).then(function(t){if(!t[f(_)])throw new Error(t[f(g)])})},t.prototype.t=function(){return this._loadJSON(f(d.production)+f(f(h))+this._YXBpS2V5).then(function(t){if(!t[f(_)])throw new Error(t[f(g)])})},t}();e["default"]=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(){(0,o["default"])(this,t)}return t.renderContextToCanvas=function(t,e){var r=e.width,n=e.height,i=new Uint8Array(r*n*4);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,i);var o=e.getContext("2d"),a=new Canvas.ImageData(r,n),s=0;i.forEach(function(){a.data[s]=i[s],s++}),o.putImageData(a,0,0)},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(3),s=function(){function t(){(0,o["default"])(this,t),this._container=new a.Engine.Container,this._sprite=new a.Engine.Sprite,this._container.addChild(this._sprite)}return t.prototype.render=function(t,e,r){this._renderTexture||(this._renderTexture=new a.Engine.RenderTexture(t));var n=r.getDimensions();this._resizeRenderTexture(n);var i=this._renderTexture.getDimensions();this._sprite.setTexture(r),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(t,e,n,i)},t.prototype._updateSprite=function(t,e,r,n){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new a.Rectangle(0,0,r.x,r.y))},t.prototype._resizeRenderTexture=function(t){this._renderTexture.resizeTo(new a.Vector2(a.Utils.nextHighestPOT(t.x),a.Utils.nextHighestPOT(t.y)))},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(3),s="imglySDKVersionCallback",u="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback="+s,l=function(){function t(e){(0,o["default"])(this,t),this._version=e,this._check()}return t.prototype._check=function(){var t=this;if("undefined"==typeof document)return a.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window[s]=function(r){r.outdated&&a.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+r.version+".")};var r=document.createElement("script");r.src=u+"&version="+this._version,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r)},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),d=n(f),p=r(10),c=n(p),h=r(78),_=n(h),g=r(117),y=n(g),v=r(9),m=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._clarityFilter=new y["default"],a._filter=new _["default"],a._sprite.setFilters([a._clarityFilter,a._filter]),a}return(0,l["default"])(e,t),e.prototype._render=function(t){var e=t.getDimensions();return e.x=1/e.x,e.y=1/e.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:e}),this._filter.set({brightness:this._options.brightness,saturation:this._options.saturation,contrast:this._options.contrast,gamma:this._options.gamma,exposure:this._options.exposure,shadows:this._options.shadows,highlights:this._options.highlights}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),d["default"].resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose()},e}(c["default"]);m.identifier="adjustments",m.prototype.availableOptions={brightness:{type:v.OptionType.NUMBER,"default":0},saturation:{type:v.OptionType.NUMBER,"default":1},contrast:{type:v.OptionType.NUMBER,"default":1},gamma:{type:v.OptionType.NUMBER,"default":1},exposure:{type:v.OptionType.NUMBER,"default":0},shadows:{type:v.OptionType.NUMBER,"default":0},highlights:{type:v.OptionType.NUMBER,"default":1},clarity:{type:v.OptionType.NUMBER,"default":0}},e["default"]=m},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(36),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(230),n._lastClarity=null,n._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new f.Engine.RenderTexture(t,e.getWidth(),e.getHeight(),e.getPixelRatio())),i&&this._blurImage(e),this._applyClarity(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=r.getImageData(0,0,e.width,e.height);p["default"].stackBlurCanvasRGBA(n,0,0,e.width,e.height,1);var i=this._blurredRenderTarget.getContext();i.putImageData(n,0,0)},e.prototype._applyClarity=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._options.clarity,s=i.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,f=Math.max(.2*this._options.clarity,0),d=1-f,p=1+a,c=1-(1+a),h=0;h<n.width*n.height*4;h+=4){var _=l[h]*c+u[h]*p,g=l[h+1]*c+u[h+1]*p,y=l[h+2]*c+u[h+2]*p,v=.2125*_+.7154*g+.0721*y,m=v*f;u[h]=_*d+m,u[h+1]=g*d+m,u[h+2]=y*d+m}r.putImageData(s,0,0)},e}(f.Engine.Filter);_.prototype.availableOptions={clarity:{type:c.NUMBER,"default":0,uniformType:h.FLOAT},texSize:{type:c.VECTOR2,"default":new f.Vector2(100,100),uniformType:h.FLOAT2}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(7),h=n(c),_=f.Constants.OptionType,g=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._render=function(t){this._sprite.setRotation(0);var e=t.getDimensions(),r=this._options,n=r.start,i=r.rotation,o=r.scale,a=r.textureScale,s=o*a,u=e.clone().multiply(a);return this._sprite.setAnchor(.5,.5),this._sprite.setRotation(i),this._sprite.setScale(s,s),this._sprite.setPosition(u.clone().divide(2).subtract(n.clone().multiply(u))),this._renderTexture.render(this._container),h["default"].resolve()},e.prototype.getNewDimensions=function(t){var e=this._options,r=e.start,n=e.end,i=e.textureScale;return t.clone().multiply(i).multiply(n.clone().subtract(r)).ceil()},e.prototype.flip=function(t){var e=this._options,r=e.start,n=e.end,i=r.clone();"horizontal"===t?(r.set(1-n.x,r.y),n.set(1-i.x,n.y)):"vertical"===t&&(r.set(r.x,1-n.y),n.set(n.x,1-i.y))},e.prototype.rotate=function(t){var e=this._options,r=e.start,n=e.end,i=(t+360)%360,o=r.clone();90===i?(r.set(1-n.y,o.x),n.set(1-o.y,n.x)):270===i&&(r.set(o.y,1-n.x),n.set(n.y,1-o.x))},e}(p["default"]);g.identifier="crop",g.prototype.availableOptions={start:{type:_.VECTOR2,"default":new f.Vector2(0,0)},end:{type:_.VECTOR2,"default":new f.Vector2(1,1)},scale:{type:_.NUMBER,"default":1},textureScale:{type:_.NUMBER,"default":1},rotation:{type:_.NUMBER,"default":0}},e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(7),p=n(d),c=r(20),h=n(c),_=r(10),g=n(_),y=f.Constants.OptionType,v=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._getRotation=function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t},e.prototype._getFlipVertically=function(){var t=this.getTags(),e=t.Orientation;return[5,7].indexOf(e)!==-1},e.prototype._getFlipHorizontally=function(){var t=this.getTags(),e=t.Orientation;return[2,4].indexOf(e)!==-1},e.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}},e.prototype._render=function(t){var e=this._getFinalOptions(),r=e.rotation%360,n=r*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new h["default"](i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),p["default"].resolve()},e.prototype.getNewDimensions=function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t},e}(g["default"]);v.identifier="exif-orientation",v.prototype.availableOptions={tags:{type:y.OBJECT,"default":{}}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(79),h=n(c),_=f.Constants.OptionType,g=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._render=function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)},e.prototype.render=function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?f.Promise.resolve(e):t.prototype.render.call(this,e)},e.prototype.setDirtyForRenderer=function(e,r){t.prototype.setDirtyForRenderer.call(this,e,r),this._selectedFilter.setDirtyForRenderer(e,r)},e.prototype.disposeRenderTextures=function(){t.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose()},e}(p["default"]);g.identifier="filter",g.prototype.availableOptions={intensity:{type:_.NUMBER,"default":1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:_.OBJECT,"default":new h["default"],setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,"undefined"!=typeof this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},e["default"]=g},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Contrast({contrast:.63})),o._stack.push(new h.Brightness({brightness:.12})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="a15",_.displayName="15",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.5})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="breeze",_.displayName="Breeze",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Grayscale),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="bw",_.displayName="B&W",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Grayscale),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="bwhard",_.displayName="1920",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="celsius",_.displayName="Celsius",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],
blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="chest",_.displayName="Chest",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="fixie",_.displayName="Fixie",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Saturation({saturation:1.35})),o._stack.push(new h.Contrast({contrast:1.1})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="food",_.displayName="Food",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="fridge",_.displayName="Fridge",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="front",_.displayName="Front",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Contrast({contrast:1.1})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="glam",_.displayName="Glam",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Gobblin),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="gobblin",_.displayName="Gobblin",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new h.Saturation({saturation:.9})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="k1",_.displayName="K1",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=r(11),g=i(_),y=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new h.SoftColorOverlay({color:new g["default"](40/255,40/255,40/255)})),o}return(0,f["default"])(e,t),e}(p["default"]);y.identifier="k2",y.displayName="K2",e["default"]=y},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Saturation({saturation:.5})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="k6",_.displayName="K6",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new h.Saturation({saturation:.7})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="kdynamic",_.displayName="KDynamic",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.4})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="lenin",_.displayName="Lenin",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="lomo",_.displayName="Lomo",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(3),p=r(4),c=i(p),h=r(5),_=n(h),g=d.Constants.OptionType,y=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._lutPrimitive=new _.LookupTableImage({image:o._options.image}),o._stack.push(o._lutPrimitive),o}return(0,f["default"])(e,t),e}(c["default"]);y.prototype.availableOptions={image:{type:g.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},y.identifier="lut",y.displayName="Lookup Table",e["default"]=y},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="mellow",_.displayName="Mellow",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=r(34),g=i(_),y=r(11),v=i(y),m=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n))),s=new g["default"](.8158218291630716,0,0,0,(-.01779810181190647),0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);o._stack.push(new h.ColorMatrixPrimitive({colormatrix:s}));var l=new v["default"](.8,.6,.9);return o._stack.push(new h.Gamma({gamma:l})),o}return(0,f["default"])(e,t),e}(p["default"]);m.identifier="metal",m.displayName="Metal",e["default"]=m},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new h.Glow),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="morning",_.displayName="Morning",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]}})),o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]]})),o._stack.push(new h.Desaturation({desaturation:.65})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="orchid",_.displayName="Orchid",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new h.Saturation({saturation:.8})),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="pola",_.displayName="Pola SX",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new h.Saturation({saturation:.8})),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="pola669",_.displayName="Pola 669",e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(7),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=f.Constants.RendererType,g=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(228),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=r.getContext(),o=this._options.filteredCanvas;i.save(),i.drawImage(n,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()},e}(f.Engine.Filter);g.prototype.availableOptions={filteredImage:{type:c.NUMBER,"default":1,uniformType:h.INT},filteredCanvas:{type:c.OBJECT,"default":null},intensity:{type:c.NUMBER,"default":1,uniformType:h.FLOAT}};var y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,o["default"])(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new f.Engine.Container,this._sprite=new f.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new g}return t.prototype.push=function(t){this._stack.push(t)},t.prototype.clear=function(){this._stack=[]},t.prototype.render=function(t,e,r){if(0===this._stack.length)return p["default"].resolve();var n=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[n.id];if(!i){var o=t.getSprite().getTexture().getFrame();i=new f.Engine.RenderTexture(t.getRenderer(),o.width,o.height),this._renderTextures[n.id]=i}var a=r.getDimensions();i.resizeTo(a);var s=this.isDirtyForRenderer(n);if(s){this._stack.forEach(function(e){e.update(t)});var u=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(u),i.render(this._container),this.setDirtyForRenderer(!1,n)}if(this._blendFilter.setIntensity(this._intensity),n.isOfType(_.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(n.isOfType(_.WEBGL)){var l=i.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),n.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),r.clear(f.Color.TRANSPARENT),r.render(this._container),s&&this.disposeRenderTextures(),p["default"].resolve(r)},t.prototype.setIntensity=function(t){this._intensity=t},t.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},t.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},t.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},t.prototype.disposeRenderTextures=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]},t.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},t}();e["default"]=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(8),p=n(d),c=r(9),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(232),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.brightness;if(0!==s){s=255*s;for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}},e}(f.Engine.Filter);h.prototype.availableOptions={brightness:{type:c.OptionType.NUMBER,"default":0,uniformType:c.UniformType.FLOAT}};var _=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},e}(p["default"]);_.prototype.availableOptions=h.prototype.availableOptions,e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(8),p=n(d),c=r(11),h=n(c),_=r(34),g=n(_),y=f.Constants.OptionType,v=f.Constants.UniformType,m=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(233),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.colormatrix,u=new h["default"](0,0,0,0),l=0;l<n.width*n.height;l++){var f=4*l;u.r=a.data[f],u.g=a.data[f+1],u.b=a.data[f+2],u.a=a.data[f+3],u=s.apply(u),a.data[f]=u.r,a.data[f+1]=u.g,a.data[f+2]=u.b,a.data[f+3]=u.a}o.putImageData(a,0,0)},e}(f.Engine.Filter);m.prototype.availableOptions={colormatrix:{type:y.COLOR_MATRIX,"default":new g["default"],uniformType:v.MAT4}};var x=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new m,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setColormatrix(this._options.colormatrix)},e}(p["default"]);x.prototype.availableOptions=m.prototype.availableOptions,e["default"]=x},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(8),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(234),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.contrast;if(1!==s){for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}},e}(f.Engine.Filter);_.prototype.availableOptions={contrast:{type:c.NUMBER,"default":1,uniformType:h.FLOAT}};var g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new _,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setContrast(this._options.contrast)},e}(p["default"]);g.prototype.availableOptions=_.prototype.availableOptions,e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(12),d=n(f),p=r(8),c=n(p),h=r(9),_=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(235),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.desaturation,u=0;u<n.width*n.height;u++){var l=4*u,f=.3*a.data[l]+.59*a.data[l+1]+.11*a.data[l+2];a.data[l]=f*(1-s)+a.data[l]*s,a.data[l+1]=f*(1-s)+a.data[l+1]*s,a.data[l+2]=f*(1-s)+a.data[l+2]*s}o.putImageData(a,0,0)},e}(d["default"].Filter);_.prototype.availableOptions={desaturation:{type:h.OptionType.NUMBER,"default":1,uniformType:h.UniformType.FLOAT}};var g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new _,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},e}(c["default"]);g.prototype.availableOptions=_.prototype.availableOptions,e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(8),p=n(d),c=r(11),h=n(c),_=f.Constants.OptionType,g=f.Constants.UniformType,y=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(236),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,s.r);for(var f=new Float32Array(256),d=0;d<256;d++)f[d]=255*Math.pow(d/255,s.g);for(var p=new Float32Array(256),c=0;c<256;c++)p[c]=255*Math.pow(c/255,s.b);for(var h=0;h<n.width*n.height;h++){var _=4*h;a.data[_]=u[a.data[_]],a.data[_+1]=f[a.data[_+1]],a.data[_+2]=p[a.data[_+2]]}o.putImageData(a,0,0)},e}(f.Engine.Filter);y.prototype.availableOptions={gamma:{type:_.COLOR,"default":h["default"].WHITE,uniformType:g.FLOAT3}};var v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new y,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setGamma(this._options.gamma)},e}(p["default"]);v.prototype.availableOptions=y.prototype.availableOptions,e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(8),d=n(f),p=r(11),c=n(p),h=r(3),_=h.Constants.OptionType,g=h.Constants.UniformType,y=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(237),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n,i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),o=e.getContext(),a=r.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options.color,l=0;l<i.width;l++)for(var f=0;f<i.height;f++){var d=4*(i.width*f+l),p=l/i.width,c=f/i.height,h=(p-.5)/.75,_=(c-.5)/.75,g=h*h,y=_*_;n=1-(g+y),n=Math.min(Math.max(n,.1),1),s.data[d]=s.data[d]*(n*u.r),s.data[d+1]=s.data[d+1]*(n*u.g),s.data[d+2]=s.data[d+2]*(n*u.b),s.data[d+3]=255}a.putImageData(s,0,0)},e}(h.Engine.Filter);y.prototype.availableOptions={color:{type:_.COLOR,"default":c["default"].WHITE,uniformType:g.FLOAT3}};var v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new y,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(d["default"]);v.prototype.availableOptions=y.prototype.availableOptions,e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(12),d=n(f),p=r(8),c=n(p),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(238),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)},e}(d["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(c["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(12),d=n(f),p=r(8),c=n(p),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(239),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s),f=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=f,a.data[l+1]=f,a.data[l+2]=f}o.putImageData(a,0,0)},e}(d["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(c["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(12),p=n(d),c=r(8),h=n(c),_=r(9),g=3,y=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._precomputeQuads(),n._fragmentSource=r(240),n}return(0,l["default"])(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,r=new f.Vector2;r.y=.125*(0|e)|0,r.x=(0|e)-8*r.y,this._quads.push(r)}},e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a),u=s.getContext("2d"),l=i.getImageData(0,0,n.width,n.height),d=u.getImageData(0,0,a.width,a.height),p=new f.Vector2,c=0;c<n.width*n.height*4;c+=4){var h=l.data[c],_=l.data[c+1],g=l.data[c+2],y=l.data[c+3]/255,v=this._quads[g],m=64;p.x=v.x*m,p.y=v.y*m,p.x+=Math.floor(h/4),p.y+=Math.floor(_/4);var x=4*(a.width*p.y+p.x)|0,b=d.data[x];b=h*(1-y)+b*y;var T=d.data[x+1];T=_*(1-y)+T*y;var C=d.data[x+2];C=g*(1-y)+C*y,l.data[c]=b,l.data[c+1]=T,l.data[c+2]=C}o.putImageData(l,0,0)},e.prototype._createImageCanvas=function(t){var e=f.Utils.createCanvas();e.width=t.width,e.height=t.height;var r=e.getContext("2d");return r.drawImage(t,0,0),e},e}(p["default"].Filter);y.prototype.availableOptions={lookupTable:{type:_.OptionType.NUMBER,"default":g,uniformType:_.UniformType.INT},lookupTableImage:{type:_.OptionType.IMAGE,uniformType:null}};var v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new y,a._textures={},a}return(0,l["default"])(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(_.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(_.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),r=e.id;this._textures[r]||(this._textures[r]=new p["default"].BaseTexture);
var n=this._textures[r];n.setSource(this._options.image),n.setGLUnit(g),e.updateTexture(n)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(h["default"]);v.prototype.availableOptions={image:{type:_.OptionType.IMAGE}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(8),d=n(f),p=r(3),c=p.Constants.OptionType,h=p.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(242),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.saturation,u=0;u<n.width;u++)for(var l=0;l<n.height;l++){var f=4*(n.width*l+u),d=.2125*a.data[f]+.7154*a.data[f+1]+.0721*a.data[f+2];a.data[f]=d*(1-s)+a.data[f]*s,a.data[f+1]=d*(1-s)+a.data[f+1]*s,a.data[f+2]=d*(1-s)+a.data[f+2]*s}o.putImageData(a,0,0)},e}(p.Engine.Filter);_.prototype.availableOptions={saturation:{type:c.NUMBER,"default":0,uniformType:h.FLOAT}};var g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new _,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},e}(d["default"]);g.prototype.availableOptions=_.prototype.availableOptions,e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(8),d=n(f),p=r(11),c=n(p),h=r(3),_=h.Constants.OptionType,g=h.Constants.UniformType,y=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(243),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)},e}(h.Engine.Filter);y.prototype.availableOptions={color:{type:_.COLOR,"default":c["default"].WHITE,uniformType:g.FLOAT3}};var v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new y,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(d["default"]);v.prototype.availableOptions=y.prototype.availableOptions,e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(80),d=n(f),p=r(3),c=p.Constants.OptionType,h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._options.rgbControlPoints||(a._options.rgbControlPoints={red:a._options.controlPoints,green:a._options.controlPoints,blue:a._options.controlPoints}),a._updateLookupTable(),a}return(0,l["default"])(e,t),e.prototype._updateLookupTable=function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,r)},e.prototype._buildLookupTable=function(t,e,r){for(var n=[],i=0;i<256;i++)n.push(Math.min(Math.max(i+t[i],0),255)),n.push(Math.min(Math.max(i+e[i],0),255)),n.push(Math.min(Math.max(i+r[i],0),255)),n.push(255);return n},e.prototype._calculateSplineCurve=function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,r=this._getSplineCurve(t),n=r[0];if(n[0]>0)for(e=0;e<n[0];e++)r.unshift([0,0]);var i=[];for(e=0;e<r.length;e++){var o=r[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i},e.prototype._getSplineCurve=function(t){var e,r=this._secondDerivative(t),n=r.length,i=[];for(e=0;e<n;e++)i[e]=r[e];var o=[];for(e=0;e<n-1;e++)for(var a=t[e],s=t[e+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),f=1-l,d=l,p=s[0]-a[0],c=f*a[1]+d*s[1]+p*p/6*((f*f*f-f)*i[e]+(d*d*d-d)*i[e+1]);c>255?c=255:c<0&&(c=0),o.push([u,c])}return 255===o.length&&o.push(t[t.length-1]),o},e.prototype._secondDerivative=function(t){var e=t.length;if(e<=0||1===e)return null;var r,n,i=[],o=[];for(i[0]=[0,1,0],r=1;r<e-1;r++){var a=t[r-1],s=t[r],u=t[r+1];i[r]=i[r]||[],i[r][0]=(s[0]-a[0])/6,i[r][1]=(u[0]-a[0])/3,i[r][2]=(u[0]-s[0])/6,o[r]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],r=1;r<e;r++)n=i[1][0]/i[r-1][1],i[r][1]-=n*i[r-1][2],i[r][0]=0,o[r]-=n*o[r-1];for(r=e-2;r>0;r--)n=i[r][2]/i[r+1][1],i[r][1]-=n*i[r+1][0],i[r][2]=0,o[r]-=n*o[r+1];var l=[];for(r=0;r<e;r++)l[r]=o[r]/i[r][1];return l},e}(d["default"]);h.prototype.availableOptions={rgbControlPoints:{type:c.OBJECT},controlPoints:{type:c.ARRAY,"default":[]}},e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(12),d=n(f),p=r(8),c=n(p),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(244),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s),f=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;f-=.2,f=Math.max(0,Math.min(1,f)),f+=.15,f*=1.4,f*=255,a.data[l]=f,a.data[l+1]=f,a.data[l+2]=f}o.putImageData(a,0,0)},e}(d["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(c["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.65})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="quozi",_.displayName="Quozi",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new h.Glow),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="semired",_.displayName="Semired",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]}})),o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]]})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="sunny",_.displayName="Sunny",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="texas",_.displayName="Texas",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),d=r(4),p=i(d),c=r(5),h=n(c),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.X400),o}return(0,f["default"])(e,t),e}(p["default"]);_.identifier="x400",_.displayName="X400",e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(36),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(225),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastStart=new f.Vector2,u._lastEnd=new f.Vector2,u._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new f.Engine.RenderTexture(t,e.getWidth(),e.getHeight(),e.getPixelRatio())),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!i||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new f.Vector2(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);p["default"].stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min());var o=this._blurredRenderTarget.getContext();o.putImageData(i,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=this._maskRenderTarget.getPixelRatio(),n=new f.Vector2(t.width,t.height),i=this._options.size*n.min()*r,o=this._options.gradientSize*n.min()*r,a=this._options.start.clone().multiply(n),s=this._options.end.clone().multiply(n),u=s.clone().subtract(a),l=a.clone().add(u.clone().divide(2)),d=u.len(),p=u.clone().divide(d),c=l.clone().add((i+o)*p.y,-(i+o)*p.x),h=l.clone().add(-(i+o)*p.y,(i+o)*p.x),_=e.createLinearGradient(c.x,c.y,h.x,h.y),g=h.clone().subtract(c).len();_.addColorStop(0,"#000000"),_.addColorStop(o/2/g,"#FFFFFF"),_.addColorStop(1-o/2/g,"#FFFFFF"),_.addColorStop(1,"#000000"),e.fillStyle=_,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,f=a.getImageData(0,0,n.width,n.height).data,d=void 0,p=0;p<n.width*n.height*4;p+=4)d=f[p]/255,u[p]=d*u[p]+(1-d)*l[p],u[p+1]=d*u[p+1]+(1-d)*l[p+1],u[p+2]=d*u[p+2]+(1-d)*l[p+2];r.putImageData(s,0,0)},e}(f.Engine.Filter);_.prototype.availableOptions={blurRadius:{type:c.NUMBER,"default":30,uniformType:h.FLOAT},size:{type:c.NUMBER,"default":50,uniformType:h.FLOAT},gradientSize:{type:c.NUMBER,"default":50,uniformType:h.FLOAT},start:{type:c.VECTOR2,"default":new f.Vector2(0,.5),uniformType:h.FLOAT2},end:{type:c.VECTOR2,"default":new f.Vector2(1,.5),uniformType:h.FLOAT2},delta:{type:c.VECTOR2,"default":new f.Vector2(1,1),uniformType:h.FLOAT2},texSize:{type:c.VECTOR2,"default":new f.Vector2(100,100),uniformType:h.FLOAT2}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(36),p=n(d),c=f.Constants.UniformType,h=f.Constants.OptionType,_=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(226),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastPosition=new f.Vector2,u._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new f.Engine.RenderTexture(t,e.getWidth(),e.getHeight(),e.getPixelRatio())),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!i||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new f.Vector2(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);p["default"].stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min());var o=this._blurredRenderTarget.getContext();o.putImageData(i,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=new f.Vector2(t.width,t.height),n=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(r),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var u=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*n);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,r.x,r.y)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,f=a.getImageData(0,0,n.width,n.height).data,d=void 0,p=0;p<n.width*n.height*4;p+=4)d=f[p]/255,u[p]=d*u[p]+(1-d)*l[p],u[p+1]=d*u[p+1]+(1-d)*l[p+1],u[p+2]=d*u[p+2]+(1-d)*l[p+2];r.putImageData(s,0,0)},e}(f.Engine.Filter);_.prototype.availableOptions={blurRadius:{type:h.NUMBER,"default":30,uniformType:c.FLOAT},radius:{type:h.NUMBER,"default":50,uniformType:c.FLOAT},gradientRadius:{type:h.NUMBER,"default":25,uniformType:c.FLOAT},position:{type:h.VECTOR2,"default":new f.Vector2(.5,.5),uniformType:c.FLOAT2},delta:{type:h.VECTOR2,"default":new f.Vector2(1,1),uniformType:c.FLOAT2},texSize:{type:h.VECTOR2,"default":new f.Vector2(100,100),uniformType:c.FLOAT2}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(21),o=n(i),a=r(0),s=n(a),u=r(2),l=n(u),f=r(1),d=n(f),p=r(3),c=r(10),h=n(c),_=p.Constants.OptionType,g=p.Constants.RendererType,y=void 0;y=window.Image;var v=function(t){function e(){(0,s["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(0,l["default"])(this,t.call.apply(t,[this].concat(n)));return o._colorOverlayFilter=new p.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new p.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return(0,d["default"])(e,t),e.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}},e.prototype._createSpritesForFrame=function(t){var e=this;if(!t)return this._disposeSprites();var r=t.imageGroups,n=t.layoutMode;this._layoutMode=n||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){"undefined"!=typeof r[t]&&["start","mid","end"].forEach(function(n){if("undefined"!=typeof r[t][n]){var i=r[t][n];"image"in i&&(i=i.image);var o=p.Engine.Texture.fromImage(i),a=new p.Engine.Sprite(o);e._spriteGroups[t][n]=a,e._sprites.push(a),e._frameContainer.addChild(a)}})})},e.prototype._render=function(t){var e=this._renderTexture.getDimensions();this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new p.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new p.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite));var r=this._sdk.getRenderer().isOfType(g.WEBGL);return r&&(this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([])),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),p.Promise.resolve(this._renderTexture)},e.prototype._updateSprites=function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)},e.prototype._updateHorizontalSpriteGroup=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getDimensions(),i="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,f=void 0,d=void 0;if(o){f=o.getTexture().getDimensions(),d=f.y/f.x,u=Math.floor(this._frameWidth/d);var c=new p.Vector2(0,r);c.x=i?this._frameWidth:0,o.setPosition(c),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){f=s.getTexture().getDimensions(),d=f.y/f.x,l=Math.floor(this._frameWidth*d);var h=new p.Vector2(n.x-l,r);h.x-=i?this._frameWidth:0,s.setPosition(h),s.setHeight(this._frameWidth),s.setWidth(l)}if(a){f=a.getTexture().getDimensions(),d=f.y/f.x;var _=new p.Vector2(u,r),g=n.x-u-l;if(i&&(_.x+=this._frameWidth,g-=2*this._frameWidth),a.setPosition(_),a.setWidth(g),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var y=this._frameWidth/d,v=Math.ceil(g/y),m=0;if(v!==-1){var x=Math.round(g/v);a.setWidth(x),m+=x,this._ensureRepeatSpritesExist(v-1,e,a);for(var b=0;b<v-1;b++){x=Math.round((g-m)/(v-b-1));var T=this._repeatSprites[e][b],C=_.clone().add(m,0).floor();T.setPosition(C),T.setWidth(x),T.setHeight(this._frameWidth),m+=x}}}}},e.prototype._ensureRepeatSpritesExist=function(t,e,r){var n=this;r.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var o=t-i,a=0;a<o;a++){var s=new p.Engine.Sprite(r.getTexture());this._repeatSprites[e].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else if(t<i){var u=this._repeatSprites[e].splice(t);u.forEach(function(t){var e=n._sprites.indexOf(t);e!==-1&&(n._sprites.splice(e,1),n._frameContainer.removeChild(t),t.dispose())})}},e.prototype._updateVerticalSpriteGroup=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getDimensions(),i="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,f=void 0,d=void 0;if(o){f=o.getTexture().getDimensions(),d=f.y/f.x,u=Math.floor(this._frameWidth*d);var c=new p.Vector2(r,0);c.y=i?this._frameWidth:0,o.setPosition(c),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){f=s.getTexture().getDimensions(),d=f.y/f.x,l=Math.floor(this._frameWidth*d);var h=new p.Vector2(r,n.y-l);h.y-=i?this._frameWidth:0,s.setPosition(h),s.setWidth(this._frameWidth),s.setHeight(l)}if(a){f=a.getTexture().getDimensions(),d=f.y/f.x;var _=new p.Vector2(r,u),g=n.y-u-l;if(i&&(_.y+=this._frameWidth,g-=2*this._frameWidth),a.setPosition(_),a.setHeight(g),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var y=this._frameWidth*d,v=Math.ceil(g/y),m=0;if(v!==-1){var x=Math.round(g/v);a.setHeight(x),m+=x,this._ensureRepeatSpritesExist(v-1,e,a);for(var b=0;b<v-1;b++){x=Math.round((g-m)/(v-b-1));var T=this._repeatSprites[e][b],C=_.clone().add(0,m).floor();T.setPosition(C),T.setHeight(x),T.setWidth(this._frameWidth),m+=x}}}}},e.prototype._disposeSprites=function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e);var r=e.getTexture().getBaseTexture();r.dispose(),e.dispose()}),this._resetSprites()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeSprites()},e.validateFrame=function(t){if(t){var e=t.imageGroups,r=t.layoutMode;if("string"!=typeof t.name)throw new Error("Frame needs a property `name` of type String.");if("string"!=typeof t.label)throw new Error("Frame needs a property `label` of type String.");if("object"!==(0,o["default"])(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var n=function(t){var r=e[t],n=r.start,i=r.end,a=r.mid;if("undefined"!=typeof e[t]){if("object"!==(0,o["default"])(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if("undefined"!=typeof n&&!(n instanceof y||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if("undefined"!=typeof a&&!(n instanceof y||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement)&&"object"!==("undefined"==typeof a?"undefined":(0,o["default"])(a)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if("undefined"!=typeof i&&!(i instanceof y||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if("undefined"!=typeof r&&["vertical-inside","horizontal-inside"].indexOf(r)===-1)throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");n("top"),n("left"),n("right"),n("bottom")}},e}(h["default"]);v.identifier="frame",v.prototype.availableOptions={frame:{type:_.OBJECT,validation:v.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t}},tintColor:{type:_.COLOR,"default":new p.Color(1,1,1,0)},scale:{type:_.NUMBER,"default":.1}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(7),h=n(c),_=r(165),g=n(_),y=f.Constants.OptionType,v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._lastBlurRadius=a._options.blurRadius,a._lastSize=a._options.size,a._lastGradientSize=a._options.gradientSize,a._horizontalFilter=new g["default"],a._verticalFilter=new g["default"],a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f.Vector2(1,1)),a._verticalFilter.setDelta(new f.Vector2((-1),1)),a._filter=new g["default"],a}return(0,l["default"])(e,t),e.prototype.rotate=function(t){var e=this._options.start,r=this._options.end;90===t?(e.flip(),e.x=1-e.x,r.flip(),r.x=1-r.x):t===-90&&(e.flip(),e.y=1-e.y,r.flip(),r.y=1-r.y),this.set({start:e,end:r})},e.prototype.flip=function(t){var e=this._options.start,r=this._options.end;switch(t){case"horizontal":e.x=1-e.x,r.x=1-r.x;break;case"vertical":e.y=1-e.y,r.y=1-r.y}this.set({start:e,end:r})},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options.start.clone(),i=this._options.end.clone(),o=this._options,a=o.blurRadius,s=o.size,u=o.gradientSize,l={blurRadius:a*r,size:s*r,gradientSize:u*r,start:n.clone().multiply(e),end:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),h["default"].resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),r=this._options,n=r.blurRadius,i=r.size,o=r.gradientSize,a=r.start,s=r.end;return this._filter.set({blurRadius:n,gradientSize:o,size:i,start:a.clone(),end:s.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),h["default"].resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e}(p["default"]);v.identifier="linear-focus",v.prototype.availableOptions={start:{type:y.VECTOR2,"default":new f.Vector2(0,.5)},end:{type:y.VECTOR2,"default":new f.Vector2(1,.5)},blurRadius:{type:y.NUMBER,"default":.025},size:{type:y.NUMBER,"default":.1},gradientSize:{type:y.NUMBER,"default":.1}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(7),p=n(d),c=r(20),h=n(c),_=r(10),g=n(_),y=f.Constants.OptionType,v=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._render=function(t){var e=this._options.rotation%360,r=e*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var n=this._sprite.getBounds();return this._renderTexture.resizeTo(new h["default"](n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),p["default"].resolve()},e.prototype.getNewDimensions=function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t},e.prototype.flip=function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}},e}(g["default"]);v.identifier="orientation",v.prototype.availableOptions={rotation:{type:y.NUMBER,"default":0,validation:function(t){if(t%90!==0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:y.BOOLEAN,"default":!1},flipHorizontally:{type:y.BOOLEAN,"default":!1}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(7),h=n(c),_=r(166),g=n(_),y=f.Constants.OptionType,v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._lastBlurRadius=a._options.blurRadius,a._lastGradientRadius=a._options.gradientRadius,a._horizontalFilter=new g["default"],a._verticalFilter=new g["default"],a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f.Vector2(1,1)),a._verticalFilter.setDelta(new f.Vector2((-1),1)),a._filter=new g["default"],a}return(0,l["default"])(e,t),e.prototype.rotate=function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):t===-90&&(e.flip(),e.y=1-e.y),this.set({position:e})},e.prototype.flip=function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options,i=n.position,o=n.blurRadius,a=n.radius,s=n.gradientRadius,u={blurRadius:o*r,radius:a*r,gradientRadius:s*r,position:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),h["default"].resolve()},e.prototype._renderCanvas=function(t){var e=this._options,r=e.blurRadius,n=e.radius,i=e.gradientRadius,o=e.position,a=t.getDimensions();return this._filter.set({blurRadius:r,radius:n,gradientRadius:i,position:o,texSize:a}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),h["default"].resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e}(p["default"]);v.identifier="radial-focus",v.prototype.availableOptions={position:{type:y.VECTOR2,"default":new f.Vector2(.5,.5)},radius:{type:y.NUMBER,"default":.25},gradientRadius:{type:y.NUMBER,"default":.125
},blurRadius:{type:y.NUMBER,"default":.025}},e["default"]=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(81),h=n(c),_=r(7),g=n(_),y=r(172),v=n(y),m=r(173),x=n(m),b=f.Constants.OptionType,T=f.Constants.RendererType,C=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n))),u=a._sdk.getRenderer();a._lastBlurRadius=null,a._blurredRenderTexture=new f.Engine.RenderTexture(u,100,100,1),a._maskRenderTexture=new f.Engine.RenderTexture(u,100,100,1),a._brush=new h["default"](a),a._brushContainer=new f.Engine.Container;var l=a._brush.getDisplayObject();if(a._brushContainer.addChild(l),a._outputSprite=new f.Engine.Sprite,a._outputContainer=new f.Engine.Container,a._outputContainer.addChild(a._outputSprite),a._maskFilter=new x["default"],u.isOfType(T.WEBGL)){a._horizontalFilter=new v["default"],a._verticalFilter=new v["default"],a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f.Vector2(1,1)),a._verticalFilter.setDelta(new f.Vector2((-1),1));var d=a._maskRenderTexture.getBaseTexture();d.setGLUnit(a._maskFilter.getMaskImage()),u.updateTexture(d,!1),d=a._blurredRenderTexture.getBaseTexture(),d.setGLUnit(a._maskFilter.getFilterImage()),u.updateTexture(d,!1)}else u.isOfType(T.CANVAS)&&(a._blurFilter=new v["default"],a._sprite.setFilters([a._blurFilter]),a._maskFilter.setMaskCanvas(a._maskRenderTexture.getRenderTarget().getCanvas()),a._maskFilter.setFilterCanvas(a._blurredRenderTexture.getRenderTarget().getCanvas()));return a._outputSprite.setFilters([a._maskFilter]),a}return(0,l["default"])(e,t),e.prototype.flip=function(t){this._brush.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.rotate=function(t){this._brush.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.crop=function(t,e){this._brush.applyCrop(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype._render=function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),g["default"].resolve()},e.prototype._renderMask=function(t){var e=t.getDimensions(),r=this._maskRenderTexture.getDimensions();r.equals(e)||this._maskRenderTexture.resizeTo(e),this._brush.update(this._sdk,e),this._maskRenderTexture.clear(f.Color.BLACK),this._maskRenderTexture.render(this._brushContainer);var n=this._sdk.getRenderer();n.isOfType(T.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)},e.prototype._renderBlur=function(t){var e=t.getDimensions(),r=this._blurredRenderTexture.getDimensions();r.equals(e)||this._blurredRenderTexture.resizeTo(e);var n=this._options.blurRadius;if(this._lastBlurRadius!==n||!r.equals(e)){var i=this._sdk.getRenderer(),o=void 0;if(i.isOfType(T.WEBGL)){var a=e.min();o={blurRadius:n*a,texSize:e},this._horizontalFilter.set(o),this._verticalFilter.set(o)}else i.isOfType(T.CANVAS)&&(o={blurRadius:n},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=n}},e.prototype.getBrush=function(){return this._brush},e.prototype.createPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._brush.createPath(t,e,f.Color.WHITE);return this._options.paths.push(r),this.setDirty(!0),r},e.prototype.setDirtyForRenderer=function(e,r,n){t.prototype.setDirtyForRenderer.call(this,e,r,n),this._brush.setDirtyForRenderer(e,r,n)},e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this._sdk.getRenderer();e.isOfType(T.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brush.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()},e}(p["default"]);C.identifier="selective-blur",C.prototype.availableOptions={blurRadius:{type:b.NUMBER,"default":.05},paths:{type:b.ARRAY,"default":[],setter:function(t){return this._brush&&this._brush.setPaths(t),t}}},e["default"]=C},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(36),p=n(d),c=f.Constants.OptionType,h=f.Constants.UniformType,_=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(229),u._lastBlurRadius=null,u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!r.getDimensions().equals(n);r.setPixelRatio(e.getPixelRatio()),r.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e,r),this._lastBlurRadius=this._options.blurRadius)},e.prototype._blurImage=function(t,e){var r=t.getCanvas(),n=t.getContext(),i=new f.Vector2(r.width,r.height),o=n.getImageData(0,0,r.width,r.height);p["default"].stackBlurCanvasRGBA(o,0,0,r.width,r.height,this._options.blurRadius*i.min());var a=e.getContext();a.putImageData(o,0,0)},e}(f.Engine.Filter);_.prototype.availableOptions={blurRadius:{type:c.NUMBER,"default":30,uniformType:h.FLOAT},delta:{type:c.VECTOR2,"default":new f.Vector2(1,1),uniformType:h.FLOAT2},texSize:{type:c.VECTOR2,"default":new f.Vector2(100,100),uniformType:h.FLOAT2}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=f.Constants.OptionType,p=f.Constants.UniformType,c=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(231),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,l=s.getContext("2d"),f=u.getContext("2d"),d=l.getImageData(0,0,n.width,n.height).data,p=i.getImageData(0,0,n.width,n.height),c=p.data,h=f.getImageData(0,0,n.width,n.height).data,_=void 0,g=0;g<n.width*n.height*4;g+=4)_=d[g]/255,c[g]=_*h[g]+(1-_)*c[g],c[g+1]=_*h[g+1]+(1-_)*c[g+1],c[g+2]=_*h[g+2]+(1-_)*c[g+2];o.putImageData(p,0,0)},e}(f.Engine.Filter);c.prototype.availableOptions={maskImage:{type:d.NUMBER,"default":1,uniformType:p.INT},maskCanvas:{type:d.OBJECT,"default":null},filterImage:{type:d.NUMBER,"default":2,uniformType:p.INT},filterCanvas:{type:d.OBJECT,"default":null}},e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=r(35),h=n(c),_=r(177),g=n(_),y=r(178),v=n(y),m=r(81),x=n(m),b=f.Constants.OptionType,T=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));a._onSpriteUpdate=a._onSpriteUpdate.bind(a);var u=a._options.sprites.slice();return u.forEach(function(t){a.removeSprite(t),a.addSprite(t)}),a}return(0,l["default"])(e,t),e.prototype.getSpritesOfType=function(t){return this._options.sprites.filter(function(e){return e instanceof t})},e.prototype.rotate=function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})},e.prototype.flip=function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})},e.prototype._onSpriteUpdate=function(t,e){this.setDirty(!0)},e.prototype._applyRotation=function(t,e){this._options.sprites.forEach(function(r){return r.applyRotation(t,e)})},e.prototype.crop=function(t,e){this._options.sprites.forEach(function(r){return r.applyCrop(t,e)})},e.prototype._serializeOption=function(e){return"sprites"===e?this._options.sprites.map(function(t){return t.serializeOptions()}):t.prototype._serializeOption.call(this,e)},e.prototype.createSticker=function(t){return new g["default"](this,t)},e.prototype.createText=function(t){return new v["default"](this,t)},e.prototype.createBrush=function(t){return new x["default"](this,t)},e.prototype.addSprite=function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate)},e.prototype.removeSprite=function(t){var e=this._options.sprites,r=e.indexOf(t);return r!==-1&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(r,1),this.setDirty(!0),!0)},e.prototype._render=function(t){var e=this,r=this._container,n=this._options.sprites,i=t.getDimensions().clone().floor();return f.Promise.all(n.map(function(t){return t.validateSettings()})).then(function(){n.forEach(function(t){t.update(e._sdk,i)}),e._renderTexture.clear(),e._renderTexture.render(r)})},e.prototype.takeSpriteToFront=function(t){var e=this._options.sprites,r=e.indexOf(t);if(r!==-1){f.Utils.moveArrayItem(e,r,e.length-1);var n=t.getDisplayObject();this._container.removeChild(n),this._container.addChild(n),this.setDirty(!0)}},e.prototype.getSpritesAtPosition=function(t,e){var r=this,n=[];this._options.sprites.forEach(function(t){return t.update(r._sdk,e)});var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,u=a.height,l=i.getAnchor().clone().multiply(-s,-u);o.subtract(l);for(var f=this._options.sprites.slice(0).reverse(),d=0,p=f.length;d<p;d++){var c=f[d];c.getDisplayObject().isAtPosition(o)&&n.push(c)}return n},e.prototype.setDirtyForRenderer=function(e,r,n){t.prototype.setDirtyForRenderer.call(this,e,r,n),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,r,n)})},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._options.sprites.forEach(function(t){t.dispose()})},e}(p["default"]);T.Sticker=g["default"],T.Text=v["default"],T.Brush=x["default"],T.identifier="sprite",T.prototype.availableOptions={sprites:{type:b.ARRAY,"default":[],setter:function(t,e){var r=this;if(t=t.map(function(t,e){if(t instanceof h["default"])return t;var n=t.type;switch(delete t.type,n){case"text":return new v["default"](r,t);case"sticker":return new g["default"](r,t);case"brush":return new x["default"](r,t);default:f.Log.error(r.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){var n=this._options.sprites.slice();n.forEach(function(t){t.dispose(),r.removeSprite(t)})}t.forEach(function(t){r.addSprite(t)})}return t}}},e["default"]=T},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(3),s=function(){function t(e,r){(0,o["default"])(this,t),this._path=e,this._drawnCanvases=[],this._position=r}return t.prototype.renderToCanvas=function(t,e,r){if(this._drawnCanvases.indexOf(e)===-1){for(var n=new a.Vector2(e.width,e.height),i=e.getContext("2d"),o=this._position.clone().multiply(n),s=r.getPosition().clone().multiply(n),u=o.clone().subtract(s).len(),l=t.width/10,f=0;f<=u;){var d=Math.max(0,Math.min(1,f/u)),p=s.x+(o.x-s.x)*d,c=s.y+(o.y-s.y)*d;i.drawImage(t,p-t.width/2,c-t.height/2),f+=l}this._drawnCanvases.push(e)}},t.prototype.setPosition=function(t){this._position=t},t.prototype.getPosition=function(){return this._position.clone()},t.prototype.setDirty=function(){this._drawnCanvases=[]},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(175),p=n(d),c=f.Constants.OptionType,h=function(t){function e(r,n,i){(0,o["default"])(this,e);var a=(0,s["default"])(this,t.call(this,n));return a._operation=r,a._canvas=i||f.Utils.createCanvas(),a._context=a._canvas.getContext("2d"),a}return(0,l["default"])(e,t),e.prototype.render=function(t){var e=this._options,r=e.controlPoints,n=e.thickness;if(!(r.length<2)){f.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushThickness===n&&t.equals(this._brushInputDimensions)||(this._brush=this._createBrush(t),this._brushInputDimensions=t.clone(),this._lastBrushThickness=n);for(var i=r[0],o=i,a=1;a<r.length;a++)o=r[a],o.renderToCanvas(this._brush,this._canvas,i),i=o}},e.prototype._createBrush=function(t){var e=this._options,r=e.thickness,n=e.hardness,i=e.color,o=f.Utils.createCanvas();o.width=o.height=Math.ceil(r*t.min());var a=o.getContext("2d");if(i=i.clone(),i.a=1,1===o.width)a.fillStyle=i.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*n),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o},e.prototype.addControlPoint=function(t){var e=new p["default"](this,t);this._options.controlPoints.push(e),this.emit("update",this)},e.prototype.getCanvas=function(){return this._canvas},e.prototype.setCanvas=function(t){this._canvas=t,this._context=t.getContext("2d")},e.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})},e.prototype.forEachControlPoint=function(t){this._options.controlPoints.forEach(t)},e.prototype.renderToCanvas=function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.color.a,e.drawImage(this._canvas,0,0),e.restore()},e.prototype.getCanvasDimensions=function(){return this._canvasDimensions},e}(f.Configurable);h.prototype.availableOptions={id:{type:c.STRING,"default":function(){return f.Utils.getUUID()}},color:{type:c.COLOR,"default":f.Color.RED},hardness:{type:c.NUMBER,"default":1},thickness:{type:c.NUMBER,"default":.05},controlPoints:{type:c.ARRAY,"default":[]},closed:{type:c.BOOLEAN,"default":!1}},e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(35),p=n(d),c=r(78),h=n(c),_=f.Constants.OptionType,g=f.Constants.RendererType,y=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._options.image&&a._onImageUpdate(),a._adjustmentsFilter=new h["default"],a._onOptionsChange=a._onOptionsChange.bind(a),a._options.adjustments.on("updated",a._onOptionsChange),a}return(0,l["default"])(e,t),e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="sticker"),n},e.prototype._rendersToRenderTexture=function(t){var e=this._options.smoothDownscaling&&t.getRenderer().isOfType(g.WEBGL);return e||this._hasAdjustments()},e.prototype._getTexture=function(){return this._inputTexture},e.prototype.update=function(t,e){var r=this._options,n=r.dimensions,i=r.image;if(n.equals(f.Vector2.NULL)&&n.set(i.width,i.height),this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t),this._hasAdjustments()){this._renderTextureSprite.setFilters([this._adjustmentsFilter]);var o=this._options.adjustments;this._adjustmentsFilter.set({brightness:o.getBrightness(),saturation:o.getSaturation(),contrast:o.getContrast()})}return this._updateSprite(e),this._rendersToRenderTexture(t)&&this._renderToRenderTexture(t),this._applyFlip(),f.Promise.resolve()},e.prototype._applyFlip=function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var r={rotation:this._options.rotation},n=r.rotation/Math.PI*180,i=n*-1;switch(r.rotation=i*Math.PI/180,e){case"horizontal":r.flipHorizontally=!this._options.flipHorizontally,this.set(r);break;case"vertical":r.flipVertically=!this._options.flipVertically,this.set(r)}},e.prototype._hasAdjustments=function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()},e.prototype._onImageUpdate=function(){this._inputTexture=f.Engine.Texture.fromImage(this._options.image),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this.setDirty(!0)},e.prototype.setOption=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,r,n),"image"===e&&this._identitySprite&&this._onImageUpdate()},e.prototype._onOptionsChange=function(){var t=this._dirtiness;for(var e in t)t[e]=!0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)},e}(p["default"]);y.prototype.availableOptions={id:{type:_.STRING,"default":function(){return f.Utils.getUUID()}},name:{type:_.STRING,"default":""},image:{type:_.OBJECT,required:!0},position:{type:_.VECTOR2,"default":f.Vector2.NULL},dimensions:{type:_.VECTOR2,"default":f.Vector2.NULL},anchor:{type:_.VECTOR2,"default":new f.Vector2(0,0)},pivot:{type:_.VECTOR2,"default":new f.Vector2(.5,.5)},rotation:{type:_.NUMBER,"default":0},flipHorizontally:{type:_.BOOLEAN,"default":!1},flipVertically:{type:_.BOOLEAN,"default":!1},smoothDownscaling:{type:_.BOOLEAN,"default":!1},adjustments:{type:_.CONFIGURABLE,structure:{brightness:{type:_.NUMBER,"default":0},saturation:{type:_.NUMBER,"default":1},contrast:{type:_.NUMBER,"default":1}}}},e["default"]=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(35),p=n(d),c=r(179),h=n(c),_=f.Constants.OptionType,g=f.Constants.RendererType,y=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._textRenderer=new h["default"](a,a._operation),a._sprite.setTexture(a._textRenderer.getTexture()),a}return(0,l["default"])(e,t),e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="text"),n},e.prototype.getDOMStyle=function(t,e){var r=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:Math.round(r)+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:Math.round(r*this.getLineHeight())+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},e.prototype.getBoundingBox=function(t,e){return this._textRenderer.getBoundingBox(t,e)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var r=this._options.rotation;switch(e){case"horizontal":r+=2*(Math.PI-r),this.setRotation(r);break;case"vertical":r+=2*(Math.PI/2-r),this.setRotation(r)}},e.prototype.applyCrop=function(e,r){t.prototype.applyCrop.call(this,e,r);var n=e.getEnd().clone().subtract(e.getStart()),i=r.end.clone().subtract(r.start),o=i.clone().divide(n),a=r.scale/e.getScale();this.setFontSize(this.getFontSize()/o.y*a),this.setMaxWidth(this.getMaxWidth()/o.x*a)},e.prototype.applyRotation=function(e){t.prototype.applyRotation.call(this,e);var r=this._operation.getInputDimensions();this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x)},e.prototype.update=function(e,r){this._textRenderer.update(e,r);var n=this._textRenderer.getTexture(),i=n.getBaseTexture();i.update();var o=e.getRenderer();return o.isOfType(g.WEBGL)&&o.updateTexture(n.getBaseTexture()),t.prototype.update.call(this,e,r),Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textRenderer.dispose()},e}(p["default"]);y.prototype.availableOptions={id:{type:_.STRING,"default":function(){return f.Utils.getUUID()}},fontSize:{type:_.NUMBER,"default":.1},lineHeight:{type:_.NUMBER,"default":1.1},fontFamily:{type:_.STRING,"default":"Times New Roman"},fontWeight:{type:_.ALL,"default":"normal"},fontStyle:{type:_.STRING,"default":"normal"},outlineWidth:{type:_.NUMBER,"default":0},outlineColor:{type:_.COLOR,"default":f.Color.BLACK},alignment:{type:_.STRING,"default":"left",available:["left","center","right"]},verticalAlignment:{type:_.STRING,"default":"top",available:["top","center","bottom"]},color:{type:_.COLOR,"default":new f.Color(1,0,0,1)},backgroundColor:{type:_.COLOR,"default":f.Color.TRANSPARENT},position:{type:_.VECTOR2,"default":new f.Vector2(.5,.5)},anchor:{type:_.VECTOR2,"default":new f.Vector2(0,0)},pivot:{type:_.VECTOR2,"default":new f.Vector2(.5,0)},rotation:{type:_.NUMBER,"default":0},text:{type:_.STRING,required:!0},maxWidth:{type:_.NUMBER,"default":.5},maxHeight:{type:_.NUMBER,"default":0}},e["default"]=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(3),s=r(180),u=n(s),l=function(){function t(e,r){(0,o["default"])(this,t),this._text=e,this._operation=r,this._textOptions={},this._createCanvas(),this._createMeasurementCanvas(),this._createTexture()}return t.prototype._createCanvas=function(){this._canvas=a.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new u["default"](this._context)},t.prototype._createMeasurementCanvas=function(){this._measurementCanvas=a.Utils.createCanvas(),this._measurementContext=this._measurementCanvas.getContext("2d")},t.prototype._createTexture=function(){this._texture=a.Engine.Texture.fromCanvas(this._canvas)},t.prototype._applyTextOptions=function(t,e){e.font=this._text.getFontWeight()+" "+t.fontSize+"px "+this._text.getFontFamily(),e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var r=this._text.getOutlineWidth();r>0&&(e.lineWidth=r)},t.prototype._buildOutputLines=function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()},t.prototype._renderTextLine=function(t,e){var r=this._text.getAlignment(),n=new a.Vector2(0,e);switch(r){case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width}this._context.fillText(t,n.x,n.y);var i=this._text.getOutlineWidth();i>0&&(this._context.miterLimit=2,this._context.strokeText(t,n.x,n.y))},t.prototype.update=function(t,e){var r=this.calculateFontStyles(t,e),n=this._calculateText(t,r,e),i=n.boundingBox,o=n.lines;return this._renderText(t,i,o,r,e)},t.prototype._renderText=function(t,e,r,n,i){var o=this;return new a.Promise(function(t,a){o._canvas.width=e.x,o._canvas.height=e.y,o._text.getMaxHeight()&&(o._canvas.height=Math.min(o._text.getMaxHeight()*i.y,o._canvas.height)),o._context=o._canvas.getContext("2d"),o._context.fillStyle=o._text.getBackgroundColor().toRGBA(),o._context.fillRect(0,0,e.x,e.y),o._applyTextOptions(n,o._context);for(var s=0;s<r.length;s++){var u=r[s];o._renderTextLine(u,n.lineHeight*s)}t()})},t.prototype.calculateFontStyles=function(t,e){var r=this._text.getFontFamily(),n=Math.round(this._text.getFontSize()*e.y),i=Math.round(this._text.getLineHeight()*n),o={fontFamily:r,fontSize:n,lineHeight:i};return this._textOptions.fontFamily===r&&this._textOptions.fontSize===n&&this._textOptions.lineHeight===i||(this._maxTextHeight=null,this._textOptions=o),o},t.prototype._calculateText=function(t,e,r){var n=this._text.getMaxWidth()*r.x;this._applyTextOptions(e,this._context);var i=new a.Vector2,o=this._text.getText().split("\n");if("undefined"!=typeof n)i.x=n,o=this._buildOutputLines(n);else for(var s=0;s<o.length;s++){var u=o[s];i.x=Math.max(i.x,this._context.measureText(u).width)}var l=e.lineHeight,f=1.1*this._getMaxTextHeight(t,e,r);return i.y+=o.length*l+(f-l),{boundingBox:i,lines:o}},t.prototype._getMaxTextHeight=function(t,e,r){return this._maxTextHeight?this._maxTextHeight:(this._maxTextHeight=this._getMaxTextHeightUsingDOM(t,e,r),this._maxTextHeight)},t.prototype._getMaxTextHeightUsingDOM=function(t,e,r){var n=document.createElement("span"),i=this._text.getDOMStyle(t,r),o=["lineHeight"];for(var a in i)o.indexOf(a)===-1&&(n.style[a]=i[a]);n.style.position="absolute",n.style.left="-9999px",n.style.top="-9999px",n.style.whiteSpace="nowrap",document.body.appendChild(n),n.innerText="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";var s=n.offsetHeight;return document.body.removeChild(n),s},t.prototype._getMaxTextHeightUsingCanvas=function(t,e,r){var n=this._measurementCanvas,i=this._measurementContext,o=e.fontSize;n.width=10*o,n.height=2*o,this._applyTextOptions(e,this._measurementContext),i.textBaseline="middle",i.textAlign="center",i.fillStyle="black",i.clearRect(0,0,n.width,n.height);for(var a="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",s=a.length,u=0;u<s;){var l=a.substr(u,5);u+=5,i.fillText(l,n.width/2,n.height/2)}var f=i.getImageData(0,0,n.width,n.height),d=f.data,p=void 0,c=null;for(p=0;p<n.height;p++){for(var h=!1,_=0;_<n.width;_++){var g=4*(p*n.width+_),y=d[g]+d[g+1]+d[g+2]+d[g+3];if(y>0){h=!0;break}}if(h)break;c++}var v=n.height;for(p=n.height-1;p>=0;p--){for(var m=!1,x=0;x<n.width;x++){var b=4*(p*n.width+x),T=d[b]+d[b+1]+d[b+2]+d[b+3];if(T>0){m=!0;break}}if(m)break;v--}return this._maxTextHeight=v-c,this._maxTextHeight},t.prototype.getTexture=function(){return this._texture},t.prototype.getBoundingBox=function(t,e){var r=this.calculateFontStyles(t,e),n=this._calculateText(t,r,e),i=n.boundingBox;return i},t.prototype.dispose=function(){this._texture.getBaseTexture().dispose(),this._texture=null},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._context=e,this._lastFontStyle={}}return t.prototype.getLines=function(){for(var t=[],e=[],r=this._lines.length,n=0;n<r;n++){for(var i=this._lines[n],o=this._buildWords(i),a=o.length,s=0;s<a;s++){var u=o[s],l=e.concat(u).join("").replace(/\s+$/i,""),f=this._getWidth(l);if(f>this._maxWidth){e.length>0&&(t.push(e.join("")),e=[u]);var d=u.replace(/\s+$/i,"");if(this._getWidth(d)>this._maxWidth){var p=this._splitWord(u);t=t.concat(p.lines),p.rest&&(e=[p.rest])}}else e.push(u)}t.push(e.join("")),e=[]}return t},t.prototype._buildWords=function(t){for(var e=[],r="",n=t.length,i=0;i<n;i++){var o=t[i];r+=o," "!==o&&"-"!==o&&i!==n-1||(e.push(r),r="")}return e},t.prototype._splitWord=function(t){for(var e={lines:[],rest:null},r=t.length,n=[],i=0;i<r;i++){var o=t[i];this._getWidth(n.concat(o).join(""))>this._maxWidth?(n.length>0&&e.lines.push(n.join("")),n=[o]):n.push(o),i===r-1&&n.length>0&&(e.rest=n.join(""))}return e},t.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)},t.prototype._getWidth=function(t){return this._context.measureText(t).width},t.prototype.setText=function(t){this._text=t,this._lines=t.split("\n")},t.prototype.setMaxWidth=function(t){this._maxWidth=t},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(3),d=r(10),p=n(d),c=f.Constants.OptionType,h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._watermarkSprite=new f.Engine.Sprite,a._watermarkSprite.setAnchor(.5,.5),a._container.addChild(a._watermarkSprite),a}return(0,l["default"])(e,t),e.prototype._render=function(t){this._watermarkTexture||(this._watermarkTexture=f.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),r=this._options.image,n=r.width,i=r.height,o=f.Utils.resizeVectorToFit(new f.Vector2(n,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),f.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._watermarkSprite.dispose()},e}(p["default"]);h.identifier="watermark",h.prototype.availableOptions={image:{type:c.OBJECT,required:!0}},e["default"]=h},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});for(var r="undefined"==typeof window?t:window,n=r.requestAnimationFrame,i=r.cancelAnimationFrame,o=0,a=["ms","moz","webkit","o"],s=0;s<a.length&&!n;++s)e.requestAnimationFrame=n=r[a[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=i=r[a[s]+"CancelAnimationFrame"]||r[a[s]+"CancelRequestAnimationFrame"];n||(e.requestAnimationFrame=n=function(t,e){var r=(new Date).getTime(),n=Math.max(0,16-(r-o)),i=setTimeout(function(){t(r+n)},n);return o=r+n,i}),i||(e.cancelAnimationFrame=i=function(t){clearTimeout(t)}),e.requestAnimationFrame=n,e.cancelAnimationFrame=i}).call(e,r(95))},function(t,e,r){t.exports={"default":r(187),__esModule:!0}},function(t,e,r){t.exports={"default":r(189),__esModule:!0}},function(t,e,r){t.exports={"default":r(190),__esModule:!0}},function(t,e,r){t.exports={"default":r(191),__esModule:!0}},function(t,e,r){r(212);var n=r(22).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(213);var n=r(22).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(214),t.exports=r(22).Object.setPrototypeOf},function(t,e,r){r(217),r(215),r(218),r(219),t.exports=r(22).Symbol},function(t,e,r){r(216),r(220),t.exports=r(61).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(18),i=r(209),o=r(208);t.exports=function(t){return function(e,r,a){var s,u=n(e),l=i(u.length),f=o(a,l);if(t&&r!=r){for(;l>f;)if(s=u[f++],s!=s)return!0}else for(;l>f;f++)if((t||f in u)&&u[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var n=r(39),i=r(91),o=r(54);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,s=r(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,r){t.exports=r(13).document&&document.documentElement},function(t,e,r){var n=r(84);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(84);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(53),i=r(40),o=r(55),a={};r(23)(a,r(24)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(39),i=r(18);t.exports=function(t,e){for(var r,o=i(t),a=n(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===e)return r}},function(t,e,r){var n=r(41)("meta"),i=r(30),o=r(16),a=r(17).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(38)(function(){return u(Object.preventExtensions({}))}),f=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},d=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[n].i},p=function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[n].w},c=function(t){return l&&h.NEED&&u(t)&&!o(t,n)&&f(t),t},h=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:p,
onFreeze:c}},function(t,e,r){var n=r(17),i=r(28),o=r(39);t.exports=r(15)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),s=a.length,u=0;s>u;)n.f(t,r=a[u++],e[r]);return t}},function(t,e,r){var n=r(18),i=r(90).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(n(t))}},function(t,e,r){var n=r(16),i=r(210),o=r(56)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(30),i=r(28),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(85)(Function.call,r(89).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){var n=r(58),i=r(49);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,r){var n=r(58),i=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(58),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(49);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";var n=r(193),i=r(200),o=r(51),a=r(18);t.exports=r(88)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(29);n(n.S,"Object",{create:r(53)})},function(t,e,r){var n=r(29);n(n.S+n.F*!r(15),"Object",{defineProperty:r(17).f})},function(t,e,r){var n=r(29);n(n.S,"Object",{setPrototypeOf:r(206).set})},function(t,e){},function(t,e,r){"use strict";var n=r(207)(!0);r(88)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(13),i=r(16),o=r(15),a=r(29),s=r(93),u=r(202).KEY,l=r(38),f=r(57),d=r(55),p=r(41),c=r(24),h=r(61),_=r(60),g=r(201),y=r(195),v=r(198),m=r(28),x=r(18),b=r(59),T=r(40),C=r(53),w=r(204),O=r(89),R=r(17),E=r(39),M=O.f,F=R.f,S=w.f,P=n.Symbol,A=n.JSON,k=A&&A.stringify,D="prototype",B=c("_hidden"),L=c("toPrimitive"),I={}.propertyIsEnumerable,U=f("symbol-registry"),j=f("symbols"),N=f("op-symbols"),G=Object[D],z="function"==typeof P,V=n.QObject,W=!V||!V[D]||!V[D].findChild,H=o&&l(function(){return 7!=C(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=M(G,e);n&&delete G[e],F(t,e,r),n&&t!==G&&F(G,e,n)}:F,q=function(t){var e=j[t]=C(P[D]);return e._k=t,e},X=z&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},Y=function(t,e,r){return t===G&&Y(N,e,r),m(t),e=b(e,!0),m(r),i(j,e)?(r.enumerable?(i(t,B)&&t[B][e]&&(t[B][e]=!1),r=C(r,{enumerable:T(0,!1)})):(i(t,B)||F(t,B,T(1,{})),t[B][e]=!0),H(t,e,r)):F(t,e,r)},Z=function(t,e){m(t);for(var r,n=y(e=x(e)),i=0,o=n.length;o>i;)Y(t,r=n[i++],e[r]);return t},J=function(t,e){return void 0===e?C(t):Z(C(t),e)},K=function(t){var e=I.call(this,t=b(t,!0));return!(this===G&&i(j,t)&&!i(N,t))&&(!(e||!i(this,t)||!i(j,t)||i(this,B)&&this[B][t])||e)},Q=function(t,e){if(t=x(t),e=b(e,!0),t!==G||!i(j,e)||i(N,e)){var r=M(t,e);return!r||!i(j,e)||i(t,B)&&t[B][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=S(x(t)),n=[],o=0;r.length>o;)i(j,e=r[o++])||e==B||e==u||n.push(e);return n},tt=function(t){for(var e,r=t===G,n=S(r?N:x(t)),o=[],a=0;n.length>a;)!i(j,e=n[a++])||r&&!i(G,e)||o.push(j[e]);return o};z||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(r){this===G&&e.call(N,r),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),H(this,t,T(1,r))};return o&&W&&H(G,t,{configurable:!0,set:e}),q(t)},s(P[D],"toString",function(){return this._k}),O.f=Q,R.f=Y,r(90).f=w.f=$,r(54).f=K,r(91).f=tt,o&&!r(52)&&s(G,"propertyIsEnumerable",K,!0),h.f=function(t){return q(c(t))}),a(a.G+a.W+a.F*!z,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)c(et[rt++]);for(var et=E(c.store),rt=0;et.length>rt;)_(et[rt++]);a(a.S+a.F*!z,"Symbol",{"for":function(t){return i(U,t+="")?U[t]:U[t]=P(t)},keyFor:function(t){if(X(t))return g(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!z,"Object",{create:J,defineProperty:Y,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),A&&a(a.S+a.F*(!z||l(function(){var t=P();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&v(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!X(e))return e}),n[1]=e,k.apply(A,n)}}}),P[D][L]||r(23)(P[D],L,P[D].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(t,e,r){r(60)("asyncIterator")},function(t,e,r){r(60)("observable")},function(t,e,r){r(211);for(var n=r(13),i=r(23),o=r(51),a=r(24)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],f=n[l],d=f&&f.prototype;d&&!d[a]&&i(d,a,l),o[l]=o.Array}},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\nuniform float u_saturation;\nuniform float u_contrast;\nuniform float u_gamma;\nuniform float u_exposure;\nuniform float u_shadows;\nuniform float u_highlights;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec4 color = texColor;\n\n  // Apply gamma\n  color.rgb = pow(color.rgb, vec3(1.0 / u_gamma));\n\n  // Apply shadows and highlights\n  float luminance = dot(color.rgb, luminanceWeighting);\n  float shadow = clamp((pow(luminance, 1.0/(u_shadows+1.0)) + (-0.76)*pow(luminance, 2.0/(u_shadows+1.0))) - luminance, 0.0, 1.0);\n  float highlight = clamp((1.0 - (pow(1.0-luminance, 1.0/(2.0-u_highlights)) + (-0.8)*pow(1.0-luminance, 2.0/(2.0-u_highlights)))) - luminance, -1.0, 0.0);\n  color.rgb = (luminance + shadow + highlight) * (color.rgb / luminance );\n\n  // Apply exposure\n  color.rgb = color.rgb * pow(2.0, u_exposure);\n\n  // Apply brightness\n  color.rgb = (color.rgb + u_brightness);\n\n  // Apply saturation\n  vec3 greyScaleColor = vec3(luminance);\n  color.rgb = mix(greyScaleColor, color.rgb, u_saturation);\n\n  // Apply contrast\n  color.rgb = (color.rgb - 0.5) * u_contrast + 0.5;\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colormatrix;\nuniform vec4 u_colormatrix_vec;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colormatrix + u_colormatrix_vec;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}var o=r(97),a=i(o),s=r(64),u=n(s),l=r(66),f=n(l),d=r(96),p=n(d),c=r(5),h=n(c),_=r(12),g=i(_),y=r(11),v=i(y),m=r(4),x=i(m),b=r(10),T=i(b),C=r(26),w=i(C),O=r(19),R=i(O),E=r(65),M=i(E),F=r(42),S=i(F),P=r(7),A=i(P),k=r(14),D=i(k),B=r(9),L=r(25),I=i(L);a["default"].version=r(67).version,/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
a["default"].Math=u,a["default"].Operations=f,a["default"].Filters=p,a["default"].FilterPrimitives=h,a["default"].Engine=g["default"],a["default"].Color=v["default"],a["default"].Filter=x["default"],a["default"].Operation=T["default"],a["default"].EventEmitter=w["default"],a["default"].Utils=R["default"],a["default"].OperationsStack=M["default"],a["default"].EXIF=S["default"],a["default"].Promise=A["default"],a["default"].Configurable=D["default"],a["default"].RenderType=B.RenderType,a["default"].ImageFormat=B.ImageFormat,a["default"].OptionType=B.OptionType,a["default"].Base64=I["default"],t.exports=a["default"]}])});