!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PhotoEditorSDK=e():t.PhotoEditorSDK=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=56)}([function(t,e,r){t.exports=r(57).default},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(114)),u=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);var o=i(this,t.call(this,r,{intensity:{type:a.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:a.OptionType.BOOLEAN,default:!0}}));return o._stack=new s.a(o._options.intensity),o}return o(e,t),e.prototype.render=function(t,e,r){var n=this;return this._stack.render(t,e,r).then(function(t){return n.setDirty(!1),t})},e.prototype.setDirtyForRenderer=function(t,e){this._stack.setDirtyForRenderer(t,e)},e.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures()},e.prototype.dispose=function(){this._stack.dispose()},e}(a.Configurable);u.identifier=null,u.isIdentity=!1,u.displayName=null,u.PrimitivesStack=s.a,e.a=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(116);r.d(e,"Brightness",function(){return n.a});var i=r(118);r.d(e,"Contrast",function(){return i.a});var o=r(120);r.d(e,"ColorMatrixPrimitive",function(){return o.a});var a=r(122);r.d(e,"Desaturation",function(){return a.a});var s=r(124);r.d(e,"Gamma",function(){return s.a});var u=r(126);r.d(e,"Glow",function(){return u.a});var p=r(128);r.d(e,"Gobblin",function(){return p.a});var c=r(130);r.d(e,"Grayscale",function(){return c.a});var h=r(53);r.d(e,"LookupTable",function(){return h.a});var l=r(133);r.d(e,"LookupTableImage",function(){return l.a});var f=r(135);r.d(e,"Saturation",function(){return f.a});var d=r(137);r.d(e,"SoftColorOverlay",function(){return d.a});var y=r(139);r.d(e,"ToneCurve",function(){return y.a});var _=r(140);r.d(e,"X400",function(){return _.a});var g=r(142);r.d(e,"ThreeDLookupTableImage",function(){return g.a})},function(t,e,r){"use strict";r.d(e,"a",function(){return l}),r.d(e,"j",function(){return f});var n=r(6),i=r(12),o=r(32),a=r(33),s=r(11),u=r(13),p=r(5),c=r(34),h=r(8);r.d(e,"b",function(){return i.a}),r.d(e,"g",function(){return o.a}),r.d(e,"k",function(){return s.a}),r.d(e,"h",function(){return a.a}),r.d(e,"d",function(){return u.a}),r.d(e,"f",function(){return n.a}),r.d(e,"i",function(){return p.a}),r.d(e,"c",function(){return h}),r.d(e,"e",function(){return c.a});var l=2e3,f=20},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.update=function(){},e.prototype.getFilter=function(){return this._filter},e.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},e}(a.Configurable));e.a=s},function(t,e,r){"use strict";(function(t){function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=r(14),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(){i(this,t)}return t.head=function(t){return t[0]},t.tail=function(t){return t.slice(1)},t.last=function(t){return t[t.length-1]},t.init=function(t){return t.slice(0,t.length-1)},t.remove=function(t,e){return t.filter(function(t,r,n){return!e(t,r,n)})},t}(),p=function(){function e(){i(this,e)}return e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isPlainObject=function(t){if("object"!==(void 0===t?"undefined":s(t))||!t)return!1;if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)},e.isMobile=function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},e.isBrowser=function(){return"undefined"!=typeof window},e.isNode=function(){return"undefined"==typeof window&&void 0!==t},e.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},e.isDOMElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":s(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},e.isTouchEvent=function(t){return-1!==t.type.indexOf("touch")},e.resizeVectorToFit=function(t,e){var r=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(r)},e.resizeVectorToFill=function(t,e){var r=t.x/t.y;return r>e.x/e.y?e.clone().set(e.y*r,e.y):e.clone().set(e.x,e.x/r)},e.isExtendable=function(t){return void 0!==t&&null!==t&&("object"===(void 0===t?"undefined":s(t))||"function"==typeof t)},e.defaults=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)void 0===e[u]&&(e[u]=s[u])}return e},e.deepMerge=function(t){for(var r=function t(r,i){if(void 0===i)return t(null,r);if(Array.isArray(i))return[].concat(n(i));if(!e.isPlainObject(i))return i;if(!e.isPlainObject(r))return a({},i);var o=a({},r);return Object.keys(i).forEach(function(e){var n=i[e];void 0!==n&&(o[e]=t(r[e],n))}),o},i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o.reduce(r,t)},e.deepDefaults=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=[].concat(i).reverse();return e.deepMerge.apply(e,n(a).concat([t]))},e.deepClone=function(t){var r={};for(var n in t)e.isExtendable(t[n])?r[n]=e.deepClone(t[n]):r[n]=t[n];return r},e.getDeepProperty=function(t,e){if("string"==typeof e)return t[e];if(Array.isArray(e)){var r=function(t,e){var r=void 0;try{r=e(t)}catch(t){if(!(t instanceof TypeError))throw t}return r};return e.reduce(function(t,e){return t?"function"==typeof e?r(t,e):t[e]:null},t)}},e.extend=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)e[u]=s[u]}return e},e.clone=function(t){return this.extend({},t)},e.createBlobURIFromDataURI=function(e){var r="undefined"==typeof window?t:window;if(!(r.Blob&&r.URL&&ArrayBuffer&&Uint8Array))return e;for(var n=o.a.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(n.length),s=new Uint8Array(a),u=0;u<n.length;u++)s[u]=n[u];var p=new r.Blob([a],{type:i});return r.URL.createObjectURL(p)},e.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.flatten=function(t){return t.reduce(function(t,r){return t.concat(Array.isArray(r)?e.flatten(r):r)},[])},e.createCanvas=function(){return document.createElement("canvas")},e.isPowerOfTwo=function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)},e.nextLowestPOT=function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)},e.nextHighestPOT=function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},e.moveArrayItem=function(t,e,r){if(r>=t.length)for(var n=r-t.length;1+n--;)t.push(void 0);t.splice(r,0,t.splice(e,1)[0])},e.ensureCanvasDimensions=function(t,e){t.width===e.x&&t.height===e.y||(t.width=e.x,t.height=e.y)},e.byteArrayToString=function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")},e.clamp=function(t,e,r){return Math.max(e,Math.min(t,r))},e.wildCardMatch=function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)},e.flipObject=function(t){var e={};for(var r in t)e[t[r]]=r;return e},e.cloneOptions=function(t){var e={};for(var r in t){var n=t[r];Array.isArray(n)?n=n.slice():n.clone&&(n=n.clone()),e[r]=n}return e},e.ISODateString=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"},e.shallowEqual=function(t,e){if(t===e)return!0;if("object"!==(void 0===t?"undefined":s(t))||null===t||"object"!==(void 0===e?"undefined":s(e))||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(var i=hasOwnProperty.bind(e),o=0;o<r.length;o++)if(!i(r[o])||t[r[o]]!==e[r[o]])return!1;return!0},e.enableIf=function(t,e){return t?e:void 0},e.invariant=function(t,e){if(!t){throw new Error(e)}},e.executePromises=function(t){var e=t.length,r=0,n=[],i=[];return new Promise(function(o,a){var s=function(){++r>=e&&(i.length<=0?o(n):a(i))},u=function(t){n.push(t),s()},p=function(t){i.push(t),s()};t.forEach(function(t){t.then(u).catch(p)})})},e}();p.Array=u,e.a=p}).call(e,r(7))},function(t,e,r){"use strict";(function(t){var r="warn",n=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],i=n.map(function(t){return t.type}),o={};o.setLevel=function(t){r=t},o.canLog=function(t){return null!==r&&!(i.indexOf(t)<i.indexOf(r))},o.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},o.printError=function(t){t.stack.split("\n").forEach(function(t){o.error("Error",t)})},n.forEach(function(t){var e=t.type,r=t.background,n=t.color;o[e]=function(t){if("undefined"!=typeof console&&o.canLog(e)){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var u=a.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");if(!o.hasColorfulOutput())return console.log("PhotoEditorSDK | "+t+" | "+u);console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+u+"  %c  ","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+r+"; color: "+n+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0")}}}),e.a=o}).call(e,r(23))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"RenderType",function(){return n}),r.d(e,"ImageFormat",function(){return i}),r.d(e,"Events",function(){return o}),r.d(e,"OptionType",function(){return a}),r.d(e,"UniformType",function(){return s}),r.d(e,"RendererType",function(){return u});var n={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},i={PNG:"image/png",JPEG:"image/jpeg"},o={OPERATION_UPDATED:"operation:update"},a={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},s={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},u={WEBGL:"webgl",CANVAS:"canvas"}},function(t,e,r){"use strict";(function(t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=void 0===r?window:r,o="undefined"!=typeof Promise?Promise:function(){function e(t,e){d.add(t,e),f||(f=_(d.drain))}function r(t){var e,r=void 0===t?"undefined":n(t);return null==t||"object"!=r&&"function"!=r||(e=t.then),"function"==typeof e&&e}function i(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,e,n){var i,o;try{!1===e?n.reject(t.msg):(i=!0===e?t.msg:e.call(void 0,t.msg),i===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=r(i))?o.call(i,n.resolve,n.reject):n.resolve(i))}catch(t){n.reject(t)}}function a(t){var n,o=this;if(!o.triggered){o.triggered=!0,o.def&&(o=o.def);try{(n=r(t))?e(function(){var e=new p(o);try{n.call(t,function(){a.apply(e,arguments)},function(){s.apply(e,arguments)})}catch(t){s.call(e,t)}}):(o.msg=t,o.state=1,o.chain.length>0&&e(i,o))}catch(t){s.call(new p(o),t)}}}function s(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(i,r))}function u(t,e,r,n){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){r(i,t)},n)}(i)}function p(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new c(this);this.then=function(t,n){var o={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&e(i,r),o.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,function(t){a.call(r,t)},function(t){s.call(r,t)})}catch(t){s.call(r,t)}}var l,f,d,y=Object.prototype.toString,_=void 0!==t?function(e){return t(e)}:setTimeout;try{Object.defineProperty({},"x",{}),l=function(t,e,r,n){return Object.defineProperty(t,e,{value:r,writable:!0,configurable:!1!==n})}}catch(t){l=function(t,e,r){return t[e]=r,t}}d=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,r,n;return{add:function(i,o){n=new t(i,o),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var t=e;for(e=r=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=l({},"constructor",h,!1);return h.prototype=g,l(g,"__NPO__",0,!1),l(h,"resolve",function(t){var e=this;return t&&"object"==(void 0===t?"undefined":n(t))&&1===t.__NPO__?t:new e(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");e(t)})}),l(h,"reject",function(t){return new this(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");r(t)})}),l(h,"all",function(t){var e=this;return"[object Array]"!=y.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;u(e,t,function(t,e){o[t]=e,++a===i&&r(o)},n)})}),l(h,"race",function(t){var e=this;return"[object Array]"!=y.call(t)?e.reject(TypeError("Not an array")):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");u(e,t,function(t,e){r(e)},n)})}),h}();i.Promise=i.Promise||o,e.a=o}).call(e,r(71).setImmediate,r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18),i=r(8),o=r(14),a=r(13),s=r(5),u=r(17),p=r(12),c=r(6),h=r(9),l=r(34),f=r(82),d=r(92);r.d(e,"requestAnimationFrame",function(){return d.b}),r.d(e,"cancelAnimationFrame",function(){return d.a}),r.d(e,"Engine",function(){return n.a}),r.d(e,"EventEmitter",function(){return a.a}),r.d(e,"Utils",function(){return s.a}),r.d(e,"Configurable",function(){return u.a}),r.d(e,"Color",function(){return p.a}),r.d(e,"Constants",function(){return i}),r.d(e,"Log",function(){return c.a}),r.d(e,"Promise",function(){return h.a}),r.d(e,"GLUtils",function(){return l.a}),r.d(e,"Base64",function(){return o.a}),r.d(e,"LicenseChecker",function(){return f.a});var y=r(44);r.d(e,"Vector2",function(){return y.Vector2}),r.d(e,"Vector3",function(){return y.Vector3}),r.d(e,"Rectangle",function(){return y.Rectangle}),r.d(e,"Matrix",function(){return y.Matrix}),r.d(e,"ColorMatrix",function(){return y.ColorMatrix})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){n(this,t),this.x=e,this.y=r,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clamp=function(e,r){var n=null!==e&&void 0!==e,i=null!==r&&void 0!==r;return e instanceof t||!n||(e=new t(e,e)),r instanceof t||!i||(r=new t(r,r)),n&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(r.x,this.x),this.y=Math.min(r.y,this.y)),this},t.prototype.divide=function(e,r){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===r?e:r),this},t.prototype.subtract=function(e,r){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===r?e:r),this},t.prototype.multiply=function(e,r){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===r?e:r),this},t.prototype.add=function(e,r){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===r?e:r),this},t.prototype.equals=function(e,r){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&r===this.y},t.prototype.flip=function(){var t=this.x;return this.x=this.y,this.y=t,this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.floor=function(){return this.x=0|this.x,this.y=0|this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.min=function(){return Math.min(this.x,this.y)},t.prototype.max=function(){return Math.max(this.x,this.y)},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.toString=function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"},t.prototype.roundDecimal=function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this},t.fromObject=function(e){return new t(e.x,e.y)},i(t,null,[{key:"NULL",get:function(){return new t(0,0)}}]),t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n(this,t),this.r=e,this.g=r,this.b=i,this.a=o}return t.prototype.toRGBA=function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"},t.prototype.set=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=r,this.a=n,this},t.prototype.toRGB=function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]},t.prototype.toHex=function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")},t.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},t.prototype.toArray=function(){return this.toGLColor()},t.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},t.prototype.toHSV=function(){var t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b),r=void 0,n=void 0,i=t,o=t-e;if(n=0===t?0:o/t,t===e)r=0;else{switch(t){case this.r:r=(this.g-this.b)/o,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/o+2;break;case this.b:r=(this.r-this.g)/o+4}r/=6}return[r,n,i]},t.prototype.fromHSV=function(e,r,n){return this.copy(t.fromHSV(e,r,n)),this},t.fromHSV=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],p=Math.floor(6*e),c=6*e-p,h=n*(1-r),l=n*(1-c*r),f=n*(1-(1-c)*r);switch(p%6){case 0:a=n,s=f,u=h;break;case 1:a=l,s=n,u=h;break;case 2:a=h,s=n,u=f;break;case 3:a=h,s=l,u=n;break;case 4:a=f,s=h,u=n;break;case 5:a=n,s=h,u=l}return new t(a,s,u,i)},t.fromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.fromHex=function(e){var r=e.match(/.{1,2}/g),n=i(r,3),o=n[0],a=n[1],s=n[2];return new t(parseInt(o,16)/255,parseInt(a,16)/255,parseInt(s,16)/255,1)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},t.prototype.minus=function(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this},t.prototype.multiplyScalar=function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this},t.prototype.divideScalar=function(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this},t.prototype.clamp=function(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this},t.prototype.copy=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},t.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},o(t,null,[{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(6),o=12,a=function(){function t(){n(this,t),this._maxListeners=o,this._events={},this._pipeDestinations=[]}return t.prototype.pipeEvents=function(t){this._pipeDestinations.push(t)},t.prototype.unpipeEvents=function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)},t.prototype.on=function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var r=this._events[t]||(this._events[t]=[]);return-1!==r.indexOf(e)?this:(r.push(e),this._maxListeners&&r.length>this._maxListeners&&(i.a.warn("EventEmitter","Possible memory leak detected, added "+r.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)},t.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(null,arguments)}if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var n=this;return this.on(t,r)},t.prototype.off=function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var r=this._events[t];if(!r||!r.length)return this;var n=r.indexOf(e);return-1===n?this:(r.splice(n,1),this)},t.prototype.emit=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(r))});var i=this._events[t];return!(!i||!i.length)&&(i.slice(0).forEach(function(t){return t.apply(null,r)}),!0)},t.prototype.setMaxListeners=function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t},t}();e.a=a},function(t,e,r){"use strict";/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={encode:function(t){var e="",r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,p=void 0,c=0;do{r=t[c++],i=t[c++],o=t[c++],a=r>>2,s=(3&r)<<4|i>>4,u=(15&i)<<2|o>>6,p=63&o,isNaN(i)?u=p=64:isNaN(o)&&(p=64),e=e+n.charAt(a)+n.charAt(s)+n.charAt(u)+n.charAt(p),r=i=o="",a=s=u=p=""}while(c<t.length);return e},decode:function(t){var e=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,p=0,c=[];if(/[^A-Za-z0-9+\/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+\/=]/g,"");do{o=n.indexOf(t.charAt(p++)),a=n.indexOf(t.charAt(p++)),s=n.indexOf(t.charAt(p++)),u=n.indexOf(t.charAt(p++)),e=o<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|u,c.push(e),64!==s&&c.push(r),64!==u&&c.push(i),e=r=i="",o=a=s=u=""}while(p<t.length);return c}};e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=function(t){function e(r){n(this,e);var o=i(this,t.call(this));return o.id=e.id++,o._onSourceLoaded=o._onSourceLoaded.bind(o),o._renderers=[],o._glTextures={},o._source=r,o._dirty=!0,o._glUnit=0,o._mipMapping=!1,o._magFilter=e.DefaultMagFilter,o._minFilter=e.DefaultMinFilter,o._repeatX=e.ClampToEdge,o._repeatY=e.ClampToEdge,o._pixelRatio=1,o._loaded=!1,o._frame=new a.h(0,0,100,100),r&&o._loadSource(),o}return o(e,t),e.prototype.resizeTo=function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)},e.prototype._loadSource=function(){var t=this._source,e=t.complete,r="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||r)return this._onSourceLoaded();t.addEventListener("load",this._onSourceLoaded)},e.prototype._onSourceLoaded=function(){this._loaded=!0,this.emit("loaded"),this.update()},e.prototype._updateGLFilters=function(){var t=new a.k(this._source.width,this._source.height);a.i.isPowerOfTwo(t)?(a.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.TrilinearFilter,this._mipMapping=!0):(this._minFilter=e.LinearFilter,this._mipMapping=!1)},e.prototype.update=function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new a.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")},e.prototype.getGLFilter=function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}},e.getGLFilter=function(t,r){switch(r){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}},e.prototype.isLoaded=function(){return this._loaded},e.prototype.setLoaded=function(t){this._loaded=t},e.prototype.getSource=function(){return this._source},e.prototype.setSource=function(t){this._source=t},e.prototype.getGLTextureForRenderer=function(t){return this._glTextures[t.id]},e.prototype.setGLTextureForRenderer=function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t},e.prototype.getDimensions=function(){return new a.k(this._frame.width,this._frame.height)},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t},e.prototype.getGLUnit=function(){return this._glUnit},e.prototype.setGLUnit=function(t){this._glUnit=t},e.prototype.setMinFilter=function(t){this._minFilter=t},e.prototype.getMinFilter=function(){return this._minFilter},e.prototype.setMagFilter=function(t){this._magFilter=t},e.prototype.getMagFilter=function(){return this._magFilter},e.prototype.setRepeatX=function(t){this._repeatX=t},e.prototype.getRepeatX=function(){return this._repeatX},e.prototype.setRepeatY=function(t){this._repeatY=t},e.prototype.getRepeatY=function(){return this._repeatY},e.prototype.getGLRepeat=function(t,r){switch("x"===r?this.getRepeatX():this.getRepeatY()){case e.ClampToEdge:return t.CLAMP_TO_EDGE;case e.Repeat:return t.REPEAT;case e.MirroredRepeat:return t.MIRRORED_REPEAT}},e.prototype.isDirty=function(){return this._dirty},e.prototype.setDirty=function(t){this._dirty=t},e.prototype.disposeGLTextures=function(){for(var t in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[t])},e.prototype.disposeGLTexturesForRenderer=function(t){if(this._glTextures[t.id]){t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id]}},e.prototype.isMipMappingEnabled=function(){return this._mipMapping},e.prototype.setMipMappingEnabled=function(t){this._mipMapping=t},e.prototype.dispose=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposeGLTextures()},e}(a.d);s.NearestFilter=0,s.LinearFilter=1,s.BilinearFilter=2,s.TrilinearFilter=3,s.DefaultMagFilter=s.NearestFilter,s.DefaultMinFilter=s.LinearFilter,s.ClampToEdge=0,s.Repeat=1,s.MirroredRepeat=2,s.id=0,e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(17),u=r(26),p=r(25),c=a.c.OptionType,h=a.c.UniformType,l=a.c.RendererType,f=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype._initOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=p.a.defaultUniforms,this._attributes=p.a.defaultAttributes,this._vertexSource=p.a.defaultVertexSource,this._fragmentSource=p.a.defaultFragmentSource,this._initUniforms(),t.prototype._initOptions.call(this,e)},e.prototype._initUniforms=function(){this._uniforms={};for(var t in this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var r in this.availableOptions){var n=this.availableOptions[r];n.uniformType?this._uniforms["u_"+r]={type:n.uniformType,value:n.default||null}:a.f.trace(this.constructor.name,"Option `"+r+"` is missing a `uniformType`!")}},e.prototype.setOption=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,r,n);var i=r,o=this.availableOptions[e];if(o.uniformType){var a="u_"+e;switch(o.type){case c.COLOR:o.uniformType===h.FLOAT4?i=r.toGLColor():o.uniformType===h.FLOAT3&&(i=r.toRGBGLColor());break;case c.VECTOR2:i=[r.x,r.y];break;case c.COLOR_MATRIX:i=[r.a,r.b,r.c,r.d,r.f,r.g,r.h,r.i,r.k,r.l,r.m,r.n,r.p,r.q,r.r,r.s];var s=[r.e,r.j,r.o,r.t];this._uniforms[a+"_vec"]={value:s,type:h.FLOAT4}}this.setUniform(a,i)}},e.prototype.setUniform=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e},e.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},e.prototype.syncUniform=function(t){this._shaders.forEach(function(e){e.syncUniform(t)})},e.prototype.syncUniforms=function(){this._shaders.forEach(function(t){t.syncUniforms()})},e.prototype.getShaderForRenderer=function(t){var e=t.getContext(),r=this._shaders[e.id];return r||(r=new u.a(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=r),r},e.prototype.apply=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(l.WEBGL)?this._applyWebGL(t,e,r,n):t.isOfType(l.CANVAS)&&this._applyCanvas(t,e,r,n)},e.prototype._applyWebGL=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(r),n&&r.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)},e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=r.getContext();a.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),i.clearRect(0,0,n.width,n.height),i.drawImage(n,0,0)},e.prototype.dispose=function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]},e}(s.a);e.a=f},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=r(9),u=r(6),p=r(13),c=r(11),h=r(12),l=r(5),f=r(42),d=r(8),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=void 0;_=window.Image;var g=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var a=o(this,t.call(this));return a.availableOptions=a.availableOptions||{},a.availableOptions=l.a.extend(a.availableOptions,n),a._onConfigurableUpdate=a._onConfigurableUpdate.bind(a),a._initOptions(r),a}return a(e,t),e.prototype._buildConfigError=function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)},e.prototype._onOptionsChange=function(){},e.prototype.validateSettings=function(){var t=this;return new s.a(function(e,r){for(var n in t.availableOptions){if(t.availableOptions[n].required&&void 0===t._options[n])return r(t._buildConfigError("Option `"+n+"` is required."))}e()})},e.prototype._initOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var r,n,i,o=this;for(r in this.availableOptions){if(i=r.charAt(0).toUpperCase()+r.slice(1),n=this.availableOptions[r],-1===[d.OptionType.STRING,d.OptionType.NUMBER,d.OptionType.BOOLEAN,d.OptionType.OBJECT,d.OptionType.VECTOR2,d.OptionType.COLOR,d.OptionType.CONFIGURABLE,d.OptionType.COLOR_MATRIX,d.OptionType.ARRAY,d.OptionType.IMAGE,d.OptionType.FUNCTION,d.OptionType.ALL].indexOf(n.type))throw this._buildConfigError("Unknown option type: `"+n.type+"`");if(function(t,e){o["set"+i]=function(e,r,n){o.setOption(t,e,r,n)},o["get"+i]=function(){return o.getOption(t)}}(r),n.type===d.OptionType.CONFIGURABLE&&(this._options[r]=new e(void 0,n.structure||{}),this._options[r].on("update",this._onConfigurableUpdate)),!(r in t)||void 0===t[r])if(void 0!==n.default){var a=n.default;"function"==typeof n.default&&(a=n.default()),this["set"+i](a,!1,!0)}else n.type!==d.OptionType.CONFIGURABLE&&(this._options[r]=void 0)}for(r in t){if(void 0===this.availableOptions[r])throw new Error("Invalid option: "+r);void 0!==t[r]&&(i=r.charAt(0).toUpperCase()+r.slice(1),this["set"+i](t[r],!1,!0))}},e.prototype.set=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var r in t)this.setOption(r,t[r],!1);this._onOptionsChange(),e&&this.emit("update",this,t)},e.prototype.getOption=function(t){return this._options[t]},e.prototype.hasOption=function(t){return!!this.availableOptions[t]},e.prototype.getOptionDefault=function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: "+t);return e.default},e.prototype.resetOptions=function(){this.set(this.getDefaultOptions())},e.prototype.getDefaultOptions=function(){var t={};for(var e in this.availableOptions){var r=this.availableOptions[e].default;void 0!==r&&(t[e]=r)}return t},e.prototype.optionsEqual=function(t){for(var e in t){var r=t[e];if(!this._optionEquals(e,r))return!1}return!0},e.prototype._optionEquals=function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: "+t);var r=this.availableOptions[t].type,n=this._options[t];if(n===e)return!0;if(void 0===e||void 0===n)return!1;switch(r){case d.OptionType.OBJECT:return"function"==typeof n.optionsEqual?n.optionsEqual(e._options):n===e;case d.OptionType.STRING:case d.OptionType.NUMBER:case d.OptionType.BOOLEAN:case d.OptionType.FUNCTION:case"*":return n===e;case d.OptionType.VECTOR2:return n.equals(e);case d.OptionType.COLOR:case d.OptionType.COLOR_MATRIX:return e.equals(n);case d.OptionType.CONFIGURABLE:return n.optionsEqual(e);case d.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case d.OptionType.IMAGE:return n.src===e.src}},e.prototype._arrayOptionEquals=function(t,r){var n=this._options[t];if(r.length!==n.length)return!1;for(var i=!0,o=0;o<n.length;o++){var a=n[o],s=r[o];if(a instanceof e){if(void 0===s||!a.optionsEqual(s)){i=!1;break}}else if(s!==a){i=!1;break}}return i},e.prototype.serializeOptions=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return e.forEach(function(e){if(void 0===t.availableOptions[e])return u.a.warn("Trying to serialize a key that does not exist: "+e);!1!==t.availableOptions[e].serializable&&(n[e]=t.serializeOption(e,r))}),n},e.prototype.serializeOption=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.availableOptions[t],n=r.type,i=this._options[t];if(!i)return i;if(!1===r.serializable)throw new Error("Option `"+t+"` is not serializable.");switch(n){case d.OptionType.STRING:case d.OptionType.NUMBER:case d.OptionType.BOOLEAN:case d.OptionType.OBJECT:case d.OptionType.FUNCTION:case d.OptionType.ALL:return i;case d.OptionType.VECTOR2:return e?i.toObject():i.clone();case d.OptionType.COLOR:case d.OptionType.COLOR_MATRIX:return e?i.toArray():i.clone();case d.OptionType.CONFIGURABLE:return i.serializeOptions(void 0,e);case d.OptionType.ARRAY:return i.slice(0);case d.OptionType.IMAGE:return e?i.src:i}},e.prototype.setOption=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.availableOptions[t];if(!o)throw new Error("Invalid option: "+t);if(void 0!==o.setter&&(e=o.setter.call(this,e,i)),void 0!==o.validation&&o.validation(e),null===e||void 0===e){if(o.required)throw this._buildConfigError("Option `"+t+"` is required.");this._options[t]=e}else switch(o.type){case d.OptionType.STRING:if((void 0===e?"undefined":y(e))!==d.OptionType.STRING)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(e))throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+o.available.join(", ")+")");this._options[t]=e;break;case d.OptionType.NUMBER:if((void 0===e?"undefined":y(e))!==d.OptionType.NUMBER)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=e;break;case d.OptionType.BOOLEAN:if((void 0===e?"undefined":y(e))!==d.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=e;break;case d.OptionType.VECTOR2:if(!(e instanceof c.a||"object"===(void 0===e?"undefined":y(e))&&"x"in e&&"y"in e))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2 or an Object holding x and y values.");e instanceof c.a?this._options[t]=e.clone():this._options[t]=c.a.fromObject(e);break;case d.OptionType.COLOR:if(!(e instanceof h.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=e;break;case d.OptionType.COLOR_MATRIX:if(!(e instanceof f.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of ColorMatrix.");this._options[t]=e.clone();break;case d.OptionType.FUNCTION:if("function"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a function.");this._options[t]=e;break;case d.OptionType.OBJECT:case"*":this._options[t]=e;break;case d.OptionType.IMAGE:if("string"==typeof e){var s=new _;s.src=e,this._options[t]=s}else{if(!(e instanceof _||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `"+t+"` has to be an Image or String.");this._options[t]=e}break;case d.OptionType.CONFIGURABLE:this._options[t].set(e);break;case d.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}r&&(this._onOptionsChange(),this.emit("update",this,n({},t,e)))},e.prototype._onConfigurableUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.emit.apply(this,["update"].concat(e))},e.prototype.hasChanges=function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)},e}(p.a);e.a=g},function(t,e,r){"use strict";var n=r(59),i=r(61),o=r(24),a=r(28),s=r(27),u=r(40),p=r(15),c=r(41),h=r(67),l=r(20),f=r(19),d=r(68),y=r(70),_=r(26),g=r(16),v=r(73),m=r(39),b={WebGLRenderer:i.a,CanvasRenderer:n.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:u.a,BaseTexture:p.a,Texture:c.a,RenderTexture:h.a,WebGLRenderTarget:l.a,CanvasRenderTarget:f.a,Sprite:d.a,Shaders:y.a,Shader:_.a,Filter:g.a,Filters:v,PixelArrayImage:m.a,autoDetectRenderer:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.a.isSupported()?new i.a(t,e,r):new n.a(t,e,r)}};e.a=b},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=r(15),a=function(){function t(e,r,i,a,s){n(this,t),this._width=e,this._height=r,this._pixelRatio=i,this._baseTexture=new o.a,this._canvas=a||this._createCanvas(),this._context=s||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return t.prototype._createCanvas=function(){return i.i.createCanvas()},t.prototype.clear=function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},t.prototype.resizeTo=function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)},t.prototype.getCanvas=function(){return this._canvas},t.prototype.getContext=function(){return this._context},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t},t.prototype.getDimensions=function(){return new i.k(this._width,this._height)},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.dispose=function(){this._canvas=null,this._context=null},t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=r(15),a=function(){function t(e,r,a,s){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,t),this._renderer=e,this._gl=e.getContext(),this._width=r,this._height=a,this._frame=null,this._pixelRatio=s,this._projectionMatrix=new i.g,this._mipMapping=!1,this._baseTexture=new o.a;var p=this._baseTexture.getFrame();p.width=r,p.height=a,this._baseTexture.setPixelRatio(s),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=u,this._filterStack=[{renderTarget:this,filter:[]}],u||this._initFrameBuffer()}return t.prototype.resizeTo=function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()},t.prototype._getMinFilter=function(){var t=o.a.DefaultMinFilter;return this._mipMapping&&(t=o.a.TrilinearFilter),t},t.prototype._getMagFilter=function(){return o.a.DefaultMagFilter},t.prototype._resizeTexture=function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture);var e=this._width*this._pixelRatio,r=this._height*this._pixelRatio;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);var n=new i.k(this._width,this._height);i.i.isPowerOfTwo(n)?(i.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)},t.prototype.activate=function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)},t.prototype.clear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.b.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),i.e.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)},t.prototype._calculateProjectionMatrix=function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new i.h(0,0,this._width,this._height),r=e.x,n=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-r*t.a,t.ty=1-n*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-r*t.a,t.ty=-1-n*t.d)},t.prototype._initFrameBuffer=function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new i.k(this._width,this._height)),i.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)},t.prototype.getProjectionMatrix=function(){return this._projectionMatrix},t.prototype.getTexture=function(){return this._texture},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(t){this._frame=t},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.dispose=function(){var t=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)},t}();e.a=a},function(t,e,r){"use strict";function n(t,e,r,n,s,u){if(!(isNaN(u)||u<1)){u|=0;var p,c,h,l,f,d,y,_,g,v,m,b,x,T,w,O,C,E,R,S,F,D,A,M,P,j=t.data,B=u+u+1,I=n-1,k=s-1,L=u+1,U=L*(L+1)/2,N=new i,z=N;for(h=1;h<B;h++)z=z.next=new i,h==L&&(P=z);z.next=N;var G=null,V=null;y=d=0;var W=o[u],q=a[u];for(c=0;c<s;c++){for(O=C=E=R=_=g=v=m=0,b=L*(S=j[d]),x=L*(F=j[d+1]),T=L*(D=j[d+2]),w=L*(A=j[d+3]),_+=U*S,g+=U*F,v+=U*D,m+=U*A,z=N,h=0;h<L;h++)z.r=S,z.g=F,z.b=D,z.a=A,z=z.next;for(h=1;h<L;h++)l=d+((I<h?I:h)<<2),_+=(z.r=S=j[l])*(M=L-h),g+=(z.g=F=j[l+1])*M,v+=(z.b=D=j[l+2])*M,m+=(z.a=A=j[l+3])*M,O+=S,C+=F,E+=D,R+=A,z=z.next;for(G=N,V=P,p=0;p<n;p++)j[d+3]=A=m*W>>q,0!==A?(A=255/A,j[d]=(_*W>>q)*A,j[d+1]=(g*W>>q)*A,j[d+2]=(v*W>>q)*A):j[d]=j[d+1]=j[d+2]=0,_-=b,g-=x,v-=T,m-=w,b-=G.r,x-=G.g,T-=G.b,w-=G.a,l=y+((l=p+u+1)<I?l:I)<<2,O+=G.r=j[l],C+=G.g=j[l+1],E+=G.b=j[l+2],R+=G.a=j[l+3],_+=O,g+=C,v+=E,m+=R,G=G.next,b+=S=V.r,x+=F=V.g,T+=D=V.b,w+=A=V.a,O-=S,C-=F,E-=D,R-=A,V=V.next,d+=4;y+=n}for(p=0;p<n;p++){for(C=E=R=O=g=v=m=_=0,d=p<<2,b=L*(S=j[d]),x=L*(F=j[d+1]),T=L*(D=j[d+2]),w=L*(A=j[d+3]),_+=U*S,g+=U*F,v+=U*D,m+=U*A,z=N,h=0;h<L;h++)z.r=S,z.g=F,z.b=D,z.a=A,z=z.next;for(f=n,h=1;h<=u;h++)d=f+p<<2,_+=(z.r=S=j[d])*(M=L-h),g+=(z.g=F=j[d+1])*M,v+=(z.b=D=j[d+2])*M,m+=(z.a=A=j[d+3])*M,O+=S,C+=F,E+=D,R+=A,z=z.next,h<k&&(f+=n);for(d=p,G=N,V=P,c=0;c<s;c++)l=d<<2,j[l+3]=A=m*W>>q,A>0?(A=255/A,j[l]=(_*W>>q)*A,j[l+1]=(g*W>>q)*A,j[l+2]=(v*W>>q)*A):j[l]=j[l+1]=j[l+2]=0,_-=b,g-=x,v-=T,m-=w,b-=G.r,x-=G.g,T-=G.b,w-=G.a,l=p+((l=c+L)<k?l:k)*n<<2,_+=O+=G.r=j[l],g+=C+=G.g=j[l+1],v+=E+=G.b=j[l+2],m+=R+=G.a=j[l+3],G=G.next,b+=S=V.r,x+=F=V.g,T+=D=V.b,w+=A=V.a,O-=S,C-=F,E-=D,R-=A,V=V.next,d+=n}}}function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:n}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),a.Math.Vector2),u=function(t){function e(r,o){n(this,e);var s=i(this,t.call(this,o));return s._operation=r,s._dirtiness={},s.id=a.Utils.getUUID(),s._renderTextures={},s._identitySprite=new a.Engine.Sprite,s._sprite=new a.Engine.Sprite,s._dummyImage={addEventListener:function(){},removeEventListener:function(){}},s._hitTestSprite=new a.Engine.Sprite,s._renderers=[],s}return o(e,t),e.prototype.applyScale=function(t){},e.prototype.applyRotation=function(t){var e=this._operation.getInputDimensions(),r=180*this.getRotation()/Math.PI;r+=t,this.setRotation(r*Math.PI/180);var n=(t+360)%360,i=n*Math.PI/180,o=Math.cos(i),a=Math.sin(i),u=this._options.position.clone().subtract(.5).multiply(e),p=new s(u.x*o-u.y*a,u.x*a+u.y*o).divide(e.clone().flip());this.setPosition(new s(.5,.5).add(p))},e.prototype.applyFlip=function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)},e.prototype.applyTransform=function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)},e.prototype.getDisplayObject=function(){return this._sprite},e.prototype.getHitTestDisplayObject=function(){return this._sprite},e.prototype._getTexture=function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")},e.prototype._prepareRenderTexture=function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new a.Engine.Container,this._renderTextureSprite=new a.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}},e.prototype._rendersToRenderTexture=function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(a.RendererType.WEBGL)},e.prototype._optionEquals=function(e,r){return"type"===e||t.prototype._optionEquals.call(this,e,r)},e.prototype.update=function(t,e){this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e)},e.prototype._updateSprite=function(t){var e=this;[this._sprite,this._hitTestSprite].forEach(function(r){if(r.getTexture()){r.setAnchor(e._options.anchor),r.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&r.setAlpha(e._options.alpha);var n=e._options.dimensions;n&&(n=n.clone().multiply(e._operation.getSDK().getTextureScale()),r.setWidth(n.x),r.setHeight(n.y)),r.updateTransform();var i=r.getTexture().getFrame(),o=new s(i.width,i.height);r.setPivot(e._options.pivot.clone().multiply(o)),r.setRotation(e._options.rotation),r.updateTransform()}})},e.prototype._renderToRenderTexture=function(t){var e=this._getTexture().getDimensions(),r=this._getRenderTexture(t.getRenderer(),e),n=e.clone();if(this._options.smoothDownscaling&&(n.x=a.Utils.nextHighestPOT(n.x),n.y=a.Utils.nextHighestPOT(n.y)),this._renderTexture.resizeTo(n),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=n.clone().subtract(e.x,e.y).divide(n),o=r.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-i.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-i.y}this._sprite.setTexture(r)},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])},e.prototype._getRenderTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new a.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]},e.prototype.dispose=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()},e}(a.Configurable);e.a=u},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){y&&f&&(y=!1,f.length?d=f.concat(d):_=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(f=d,d=[];++_<e;)f&&f[_].run();_=-1,e=d.length}f=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function p(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var f,d=[],y=!1,_=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=p,l.addListener=p,l.once=p,l.off=p,l.removeListener=p,l.removeAllListeners=p,l.emit=p,l.prependListener=p,l.prependOnceListener=p,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=r(19),a=function(){function t(e){n(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new i.h(0,0,e.getWidth(),e.getHeight())}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),this._filterStack.push({renderTarget:n,filters:e}),n.clear()},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;return 1===e.length?(e[0].apply(this._renderer,i,o),this._textures.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var s=i;i=o,o=s}}),this._textures.push(i),this._textures.push(o)},t.prototype._getOrCreateRenderTarget=function(t){var e=this._textures.pop();return e||(e=new o.a(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype.dispose=function(){},t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(26),u=a.c.UniformType,p=function(t){function e(r,o,a){return n(this,e),o=o||e.defaultVertexSource,a=a||e.defaultFragmentSource,i(this,t.call(this,r,o,a,e.defaultUniforms,e.defaultAttributes))}return o(e,t),e}(s.a);p.defaultVertexSource=r(63),p.defaultFragmentSource=r(64);var c=new a.g;p.defaultUniforms={u_image:{type:u.SAMPLER2D,value:0},u_projMatrix:{type:u.MAT3,value:c.toArray()}},p.defaultAttributes=["a_position","a_texCoord","a_color"],e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=r(8),a=i.f,s=i.i,u=function(){function t(e,r,i,o,a){n(this,t),this._renderer=e,this._vertexSource=r,this._fragmentSource=i,this._uniforms=o||{},this._uniformLocations={},this._attributes=a||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return t.prototype._init=function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()},t.prototype._onContextChange=function(){this._init()},t.prototype.setupBuffers=function(t,e){var r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,!1,i.j,0),r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,!1,i.j,8),r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,!0,i.j,16)},t.prototype.syncUniforms=function(){var t=this;Object.keys(this._uniforms).forEach(function(e){t.syncUniform(e)})},t.prototype.syncUniform=function(t){var e=this._renderer.getContext(),r=this._uniforms[t],n=this._uniformLocations[t];switch(r.type){case o.UniformType.SAMPLER2D:e.uniform1i(n,r.value);break;case o.UniformType.INT:case o.UniformType.INT1:e.uniform1i(n,r.value);break;case o.UniformType.FLOAT:case o.UniformType.FLOAT1:e.uniform1f(n,r.value);break;case o.UniformType.FLOAT2:e.uniform2f(n,r.value[0],r.value[1]);break;case o.UniformType.FLOAT3:e.uniform3f(n,r.value[0],r.value[1],r.value[2]);break;case o.UniformType.FLOAT4:e.uniform4f(n,r.value[0],r.value[1],r.value[2],r.value[3]);break;case o.UniformType.FLOAT_VECTOR2:e.uniform2fv(n,r.value);break;case o.UniformType.MAT3:case o.UniformType.MAT3FV:e.uniformMatrix3fv(n,!1,r.value);break;case o.UniformType.MAT4:e.uniformMatrix4fv(n,!1,r.value);break;default:a.warn(this.constructor.name,"Unknown uniform type: "+r.type)}},t.prototype._cacheAttributeLocations=function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(r){t._attributeLocations[r]=e.getAttribLocation(t._program,r)})},t.prototype._cacheUniformLocations=function(){var t=this,e=this._renderer.getContext();Object.keys(this._uniforms).forEach(function(r){t._uniformLocations[r]=e.getUniformLocation(t._program,r)})},t.prototype._addPrecisionToSource=function(t){var e=this._renderer.getMaxFloatPrecision(),r="mediump";return s.isMobile()&&"highp"===e&&(r="highp"),"precision "+r+" float;\n"+t},t.prototype._compile=function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var r=this._addPrecisionToSource(this._fragmentSource),n=this._compileShader(t.FRAGMENT_SHADER,r);this._fragmentShader=n;var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var o=t.getProgramInfoLog(i);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(i),a.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=i},t.prototype._compileShader=function(t,e){var r=this._renderer.getContext(),n=r.createShader(t);if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){var i=r.getShaderInfoLog(n);r.isContextLost()&&(i="WebGL context lost"),r.deleteShader(n),a.error(this.constructor.name,"WebGL shader compilation error: "+i)}return n},t.prototype.setUniform=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,r&&this.syncUniform(t)},t.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},t.prototype.getUniforms=function(){return this._uniforms},t.prototype.getAttributes=function(){return this._attributes},t.prototype.getAttributeLocations=function(){return this._attributeLocations},t.prototype.getProgram=function(){return this._program},t.prototype.dispose=function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)},t}();e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=function(){function t(){n(this,t),this._position=new i.k(0,0),this._scale=new i.k(1,1),this._pivot=new i.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new i.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new i.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new i.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new i.h(0,0,0,0)}return t.prototype.renderWebGL=function(t){i.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")},t.prototype.renderCanvas=function(t){i.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")},t.prototype.updateTransform=function(){var t=this._parent?this._parent.getWorldTransform():i.g.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.tx|=0,e.ty|=0,e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.addShader=function(t){this._shaders.push(t)},t.prototype.removeShader=function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)},t.prototype.removeShaderAt=function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)},t.prototype.getBounds=function(){return this._bounds.clone()},t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(t,e){t instanceof i.k?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getScale=function(){return this._scale},t.prototype.setScale=function(t,e){t instanceof i.k?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getPivot=function(){return this._pivot},t.prototype.setPivot=function(t,e){t instanceof i.k?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotation=function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getAlpha=function(){return this._alpha},t.prototype.setAlpha=function(t){this._alpha=t},t.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},t.prototype.getWorldTransform=function(){return this._worldTransform},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(t){this._parent=t},t.prototype.getFilterRectangle=function(){return this._filterRectangle},t.prototype.setFilterRectangle=function(t){this._filterRectangle.copy(t)},t.prototype.getTint=function(){return this._tint},t.prototype.setTint=function(t){this._tint=t},t.prototype.isVisible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=r(20),a=r(65),s=i.c.RendererType,u=function(){function t(e){n(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new i.h(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach(function(e){return e.resizeTo(t)})},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype._getOrCreateRenderTarget=function(t){var e=this._renderTargets.pop();return e||(e=new o.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=t.getFilterRectangle();n.width>0&&n.height>0&&(this._currentFrame=n);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;this._quad.map(this._textureFrame,i.getFrame());var a=e[0].getShaderForRenderer(this._renderer),s=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),p=this._renderer.getContext();p.bindBuffer(p.ARRAY_BUFFER,s),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u);var c=a.getAttributeLocations();return p.vertexAttribPointer(c.a_position,2,p.FLOAT,!1,0,0),p.vertexAttribPointer(c.a_texCoord,2,p.FLOAT,!1,0,32),p.vertexAttribPointer(c.a_color,4,p.FLOAT,!1,0,64),this._renderer.updateTexture(i.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,i,o),this._renderTargets.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var s=i;i=o,o=s}}),this._renderTargets.push(i),this._renderTargets.push(o)},t.prototype._onContextChange=function(){this._renderTargets.length=0,this._renderer.isOfType(s.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new a.a(this._renderer))},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(t){t.dispose()})},t}();e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(14),o=r(30),a=r(5),s=r(31),u=r(96),p=r(97),c=a.a.invariant,h=s.a.MARKERS,l=new RegExp("^data:image/jpeg;base64,","i"),f=function(){function t(e){n(this,t),this._buf=e,this._stream=new o.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new p.a(this._getMarkerBuffer(h.EXIF)),this._jfifData=new u.a(this._getMarkerBuffer(h.JFIF))}return t.toDataURL=function(t){return"data:image/jpeg;base64,"+i.a.encode(t)},t.fromDataURL=function(t){var e=t.replace("data:image/jpeg;base64,","");return i.a.decode(e)},t.prototype.restoreSegments=function(e){var r=t.fromDataURL(e);return r=this.restoreExifTagsToImageData(r),r=this.restoreJfifSegmentToImageData(r),t.toDataURL(r)},t.prototype.restoreExifTagsToImageData=function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t),r=e[1][0],n=t.slice(0,r),i=t.slice(r),o=n.concat(this._exifData.getBuffer());return o=o.concat(i)},t.prototype.restoreJfifSegmentToImageData=function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),r=this._findSegment(h.JFIF,e);c(r,"JFIF Data Error: Segment not found");var n=r[0],i=r[1],o=t.slice(0,n),a=t.slice(n,i),s=t.slice(i),p=new u.a(a);p.setDensityX(this._jfifData.getDensityX()),p.setDensityY(this._jfifData.getDensityY()),p.setUnitDensity(this._jfifData.getUnitDensity());var l=o.concat(a);return l=l.concat(s)},t.prototype.restoreExifTags=function(e){var r=t.fromDataURL(e),n=this.restoreExifTagsToImageData(r);return t.toDataURL(n)},t.prototype.restoreJfifSegment=function(e){if(!this._jfifData.isValid())return e;var r=t.fromDataURL(e),n=this.restoreJfifSegmentToImageData(r);return t.toDataURL(n)},t.prototype.setOrientation=function(t){return this._exifData.setOrientation(t)},t.isJPEG=function(t){return l.test(t)},t.bufferIsJPEG=function(t){return"JFIF"===t.slice(6,10).toString()},t.fromBase64String=function(e){var r=e.replace("data:image/jpeg;base64,","");return new t(i.a.decode(r))},t.prototype._findSegment=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,r=0;r<e.length;r++){var n=e[r][0],i=e[r][1];this._stream.setHead(n);if(this._stream.peekInt16()===t)return[n,i]}return!1},t.prototype._getMarkerBuffer=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,r=this._findSegment(t,e);if(r){var n=r[0],i=r[1];return this._buf.slice(n,i)}return!1},t.prototype._sliceIntoSegments=function(t){for(var e=new o.a(t),r=[];e.getHead()<t.length;){var n=e.readInt16();if(n!==h.SOI){if(n===h.SOS)break;if(!(n>=65280&&n<=65535))throw new Error("Invalid marker: 0x"+n.toString(16));var i=e.readInt16(),a=e.getHead()+i-2;r.push([e.getHead()-4,a]),e.setHead(a)}}return this._stream.setHead(0),r},t.prototype.getTags=function(){return this._exifData.getTags()},t.prototype.getTagData=function(){return this._exifData.getTagData()},t.prototype.dispose=function(){this._buf=[],this._segments=[]},t}();e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){n(this,t),this._head=0,this._buf=e}return t.prototype.peekInt8=function(){return this._buf[this._head]},t.prototype.peekInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1];return t?(r<<8)+e:(e<<8)+r},t.prototype.peekInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2];return t?(n<<16)+(r<<8)+e:(e<<16)+(r<<8)+n},t.prototype.peekInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(n<<16)+(r<<8)+e:(e<<32)+(r<<16)+(n<<8)+i},t.prototype.writeInt8=function(t){this._buf[this._head]=255&t},t.prototype.writeInt16=function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t},t.prototype.readInt8=function(){var t=this.peekInt8();return this._head+=1,t},t.prototype.readInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e},t.prototype.readInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e},t.prototype.readInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e},t.prototype.readString=function(t){for(var e="",r=0;r<t;r++){var n=this.readInt8();e+=String.fromCharCode(n)}return e},t.prototype.getHead=function(){return this._head},t.prototype.setHead=function(t){this._head=t},t}();e.a=i},function(t,e,r){"use strict";var n={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},i={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};e.a={MARKERS:n,EXIF_TAGS:i}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(11),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.reset()}return t.prototype.multiply=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0;return e=this.a*t.a+this.b*t.c,r=this.a*t.b+this.b*t.d,n=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=a,this},t.prototype.applyToVector=function(t){var e=t,r=e.x,n=e.y;return t=t.clone(),t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.tx,t},t.prototype.applyInverseToVector=function(t){var e=1/(this.a*this.d+this.c*-this.b),r=t,n=r.x,i=r.y;return t=t.clone(),t.x=this.d*e*n+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,t},t.prototype.rectangleToCoordinates=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.a(0,0),r=t.width*(1-e.x),n=t.width*-e.x,o=t.height*(1-e.y),a=t.height*-e.y,s=[];return s.push(new i.a(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new i.a(this.a*r+this.c*a+this.tx,this.d*a+this.b*r+this.ty)),s.push(new i.a(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new i.a(this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),s},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.prototype.toArray=function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)},t.prototype.toString=function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"},o(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(11),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=r,this.width=i,this.height=o}return t.prototype.set=function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.equals=function(e,r,n,i){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&r===this.y&&n===this.width&&i===this.height},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.prototype.getPosition=function(){return new i.a(this.x,this.y)},t.prototype.getSize=function(){return new i.a(this.width,this.height)},t.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"},t}();e.a=o},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(6);e.a={checkFramebufferStatus:function(t,e){var r,o=e.checkFramebufferStatus(e.FRAMEBUFFER),a=(r={},n(r,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),n(r,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),n(r,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),n(r,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),r);o!==e.FRAMEBUFFER_COMPLETE&&i.a.warn(t,"Framebuffer incomplete: "+a[o])}}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(36),a=function(){function t(e){var r=this;n(this,t),this._context=e,this._tracking=!1;var i=this;for(var a in e)!function(t){"function"==typeof e[t]?r[t]=function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=e[t];if(!i._tracking)return s.apply(e,n);var u=o(),p=s.apply(e,n),c=o()-u,h={functionName:t,arguments:n,duration:c};return i._trackedCalls.push(h),p}:r._makePropertyWrapper(t)}(a)}return t.prototype._makePropertyWrapper=function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,function(){return e[t]}),this.__defineSetter__(t,function(r){e[t]=r})}},t.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[]},t.prototype.endFrame=function(){var t="Rendering";i.f.log(t,"Frame rendering results:"),i.f.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var r=t.functionName,n=t.duration;e[r]=e[r]||{totalDuration:0,calls:0},e[r].totalDuration+=n,e[r].calls++});var r=[];for(var n in e){var o=e[n];o.averageDuration=o.totalDuration/o.calls,r.push({functionName:n,data:o})}r.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),r=r.slice(0,3),r.forEach(function(e){i.f.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})},t}();e.a=a},function(t,e,r){(function(e){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-i)/1e6},n=e.hrtime,r=function(){var t;return t=n(),1e9*t[0]+t[1]},i=r()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,r(23))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(60),u=function(t){function e(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e);var p=i(this,t.call(this));return p._options=s.a.defaults(u,{pixelRatio:1,transparent:!1,clearColor:a.b.BLACK,debug:!1}),p.setMaxListeners(0),p._width=r||800,p._height=o||600,p._dimensions=new a.k(p._width,p._height),p._maxTextureSize=null,p._pixelRatio=p._options.pixelRatio,p._clearColor=p._options.transparent?a.b.TRANSPARENT:p._options.clearColor||a.b.BLACK,p}return o(e,t),e.prototype.setCanvas=function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new a.k(this._width,this._height))},e.prototype.getCanvas=function(){return this._canvas},e.prototype._onBeforeContext=function(){},e.prototype.resizeTo=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()},e.prototype._createContext=function(){a.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")},e.prototype._setupContext=function(){a.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")},e.prototype.render=function(t){a.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")},e.prototype.getMaxDimensions=function(){return null},e.prototype.getContext=function(){return this._context},e.prototype.getWidth=function(){return this._dimensions.x},e.prototype.getHeight=function(){return this._dimensions.y},e.prototype.getDimensions=function(){return this._dimensions},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)},e.prototype.getMaxTextureSize=function(){return this._maxTextureSize},e.prototype.getFilterManager=function(){return this._filterManager},e.prototype.setFilterManager=function(t){this._filterManager=t},e.isSupported=function(){return!0},e.prototype.isOfType=function(t){return this._type===t},e.prototype.dispose=function(){a.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")},e}(a.d);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){n(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return t.prototype._onContextChange=function(){},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._renderer=null},t}();e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,r,i){n(this,t),this.width=e,this.height=r,this.data=i}return t.fromNodeCanvasImage=function(e){var r=new Canvas(e.width,e.height),n=r.getContext("2d");n.drawImage(e,0,0);var i=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,i.data)},t}();e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(27),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._children=[],s._filters=[],s}return o(e,t),e.prototype.addFilter=function(t){this._filters.push(t)},e.prototype.removeFilter=function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)},e.prototype.setFilters=function(t){this._filters=t},e.prototype.addChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)},e.prototype.prependChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)},e.prototype.hasChild=function(t){return-1!==this._children.indexOf(t)},e.prototype.removeChild=function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):a.f.info(this.constructor.name,"Tried to remove a child that does not exist")},e.prototype.clearChildren=function(){this._children=[]},e.prototype.renderWebGL=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}},e.prototype._renderWebGL=function(t){},e.prototype.renderCanvas=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}},e.prototype._renderCanvas=function(t){},e.prototype.updateTransform=function(){t.prototype.updateTransform.call(this),this._children.forEach(function(t){t.updateTransform()})},e.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},e.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},e.prototype.getChildren=function(){return this._children},e.prototype.getFilters=function(){return this._filters},e.prototype.dispose=function(){},e}(s.a);e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(15),u=r(66),p=function(t){function e(r,o){n(this,e);var p=i(this,t.call(this));if(!(r instanceof s.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return p._uvs=new u.a,p._frame=o?o.clone():null,p._frameLocked=!!o,p._onBaseTextureLoaded=p._onBaseTextureLoaded.bind(p),p._onBaseTextureUpdated=p._onBaseTextureUpdated.bind(p),p._frame||(p._frame=new a.h(0,0,1,1)),p.setBaseTexture(r),p}return o(e,t),e.fromImage=function(t){return new e(new s.a(t))},e.fromCanvas=function(t){return new e(new s.a(t))},e.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)},e.prototype._onBaseTextureUpdated=function(){var t=this._baseTexture.getFrame(),e=t.width,r=t.height;this._frame.width=e,this._frame.height=r,this.emit("update")},e.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.setBaseTexture=function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),r=e.width,n=e.height;this._frameLocked||(this._frame=new a.h(0,0,r,n)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t,this._updateUVs()},e.prototype.getWidth=function(){return this._frame.width},e.prototype.getHeight=function(){return this._frame.height},e.prototype.getUVs=function(){return this._uvs},e.prototype.getDimensions=function(){return new a.k(this._frame.width,this._frame.height)},e.prototype.dispose=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()},e}(a.d);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(12),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,y=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,_=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,x=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;n(this,t),this.set(e,r,i,o,a,s,u,p,c,h,l,f,d,y,_,g,v,m,b,x)}return t.prototype.set=function(t,e,r,n,i,o,a,s,u,p,c,h,l,f,d,y,_,g,v,m){this.a=t,this.b=e,this.c=r,this.d=n,this.e=i,this.f=o,this.g=a,this.h=s,this.i=u,this.j=p,this.k=c,this.l=h,this.m=l,this.n=f,this.o=d,this.p=y,this.q=_,this.r=g,this.s=v,this.t=m},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0},t.prototype.apply=function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,r=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,n=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,o=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new i.a(e,r,n,o)},t.prototype.multiply=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,p=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0,y=void 0,_=void 0,g=void 0,v=void 0,m=void 0,b=void 0,x=t,T=this;return e=x.a*T.a+x.b*T.f+x.c*T.k+x.d*T.p,r=x.a*T.b+x.b*T.g+x.c*T.l+x.d*T.q,n=x.a*T.c+x.b*T.h+x.c*T.m+x.d*T.r,i=x.a*T.d+x.b*T.i+x.c*T.n+x.d*T.s,a=x.f*T.a+x.g*T.f+x.h*T.k+x.i*T.p,s=x.f*T.b+x.g*T.g+x.h*T.l+x.i*T.q,u=x.f*T.c+x.g*T.h+x.h*T.m+x.i*T.r,p=x.f*T.d+x.g*T.i+x.h*T.n+x.i*T.s,h=x.k*T.a+x.l*T.f+x.m*T.k+x.n*T.p,l=x.k*T.b+x.l*T.g+x.m*T.l+x.n*T.q,f=x.k*T.c+x.l*T.h+x.m*T.m+x.n*T.r,d=x.k*T.d+x.l*T.i+x.m*T.n+x.n*T.s,_=x.p*T.a+x.q*T.f+x.r*T.k+x.s*T.p,g=x.p*T.b+x.q*T.g+x.r*T.l+x.s*T.q,v=x.p*T.c+x.q*T.h+x.r*T.m+x.s*T.r,m=x.p*T.d+x.q*T.i+x.r*T.n+x.s*T.s,o=x.a*T.e+x.b*T.j+x.c*T.o+x.d*T.t+x.e,c=x.f*T.e+x.g*T.j+x.h*T.o+x.i*T.t+x.j,y=x.k*T.e+x.l*T.j+x.m*T.o+x.n*T.t+x.o,b=x.p*T.e+x.q*T.j+x.r*T.o+x.s*T.t+x.t,this.a=e,this.b=r,this.c=n,this.d=i,this.e=o,this.f=a,this.g=s,this.h=u,this.i=p,this.j=c,this.k=h,this.l=l,this.m=f,this.n=d,this.o=y,this.p=_,this.q=g,this.r=v,this.s=m,this.t=b,this},t.prototype.clone=function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t},t.prototype.getOffsets=function(){return[this.e,this.j,this.o,this.t]},t.prototype.toString=function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"},t.prototype.toArray=function(){var t=this;return"abcdefghijklmnopqrst".split("").map(function(e){return t[e]})},t.createBrightnessMatrix=function(e){var r=new t;return r.e=e,r.j=e,r.o=e,r},t.createContrastMatrix=function(e){var r=new t,n=(1-e)/2;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r},t.createSaturationMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=new t,n=1-e,i=.213*n,o=.715*n,a=.072*n;return r.a=i+e,r.b=o,r.c=a,r.f=i,r.g=o+e,r.h=a,r.k=i,r.l=o,r.m=a+e,r},t.createExposureMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=Math.pow(2,e);return new t(r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0)},t.createLinearMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new t;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n},o(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=a},function(t,e,r){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(9),o=r(84),a=r.n(o),s="undefined"!=typeof window?window:t,u=function(){function t(e){n(this,t),this._url=e,this._parsedUrl=a.a.parse(this._url,!0)}return t.prototype._isJSONPRequest=function(){var t=this._parsedUrl.query;for(var e in t){if("?"===t[e])return!0}return!1},t.prototype.load=function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()},t.prototype._loadJSON=function(){var t=this;return new i.a(function(e,r){var n=void 0;s.XDomainRequest?(n=new s.XDomainRequest,n.onload=function(){var t=JSON.parse(n.responseText);e(t)},n.onerror=function(t){r(t)},n.open("GET",t._url,!0),n.send()):s.XMLHttpRequest&&(n=new XMLHttpRequest,n.onreadystatechange=function(t){if(4===n.readyState)if(200===n.status){var i=JSON.parse(n.responseText);e(i)}else r(new Error("HTTP Status "+n.status))},n.open("GET",t._url,!0),n.send())})},t.prototype._loadJSONP=function(){var t=this,e=!1,r=!1,n="pesdk"+Math.round(99999999999999*Math.random());return new i.a(function(i,o){var a=t._createJSONPNode(n);s[n]=function(n){t._removeJSONPNode(a),e||(r=!0,i(n))},s.setTimeout(function(){r||(t._removeJSONPNode(a),e=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})},t.prototype._createJSONPNode=function(t){var e=this._buildJSONPUrl(t),r=document.querySelector("head"),n=document.createElement("script");return n.src=e,r.appendChild(n),n},t.prototype._removeJSONPNode=function(t){t.parentNode.removeChild(t)},t.prototype._buildJSONPUrl=function(t){var e=this._parsedUrl.query,r=null;for(var n in e)if("?"===e[n]){r=n;break}return delete this._parsedUrl.search,e[r]=t,a.a.format(this._parsedUrl)},t}();e.a=u}).call(e,r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),i=r(93),o=r(33),a=r(32),s=r(42);r.d(e,"Vector2",function(){return n.a}),r.d(e,"Vector3",function(){return i.a}),r.d(e,"Rectangle",function(){return o.a}),r.d(e,"Matrix",function(){return a.a}),r.d(e,"ColorMatrix",function(){return s.a})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(94);r.d(e,"ExifOrientationOperation",function(){return n.a})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(8),s=r(9),u=r(6),p=r(18),c=r(17),h=r(47),l=function(t){function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var s=i(this,t.call(this,o,{enabled:{type:a.OptionType.BOOLEAN,default:!0,serializable:!1}}));return s._sdk=r,s._cacheEnabled=!1,s._dirtiness={},s._sprite=new p.a.Sprite,s._container=new p.a.Container,s._container.addChild(s._sprite),s}return o(e,t),e.prototype._onOptionsChange=function(){this.setDirty(!0)},e.prototype.render=function(t){var e=this;if(!this.getEnabled())return u.a.info(this.constructor.name,"Disabled - skipping"),s.a.resolve(t);if(!this._renderTexture){var r=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new p.a.RenderTexture(this._sdk.getRenderer(),r.width,r.height)}var n=this._sdk.getRenderer(),i=void 0,o=void 0;if(u.a.canLog("info")&&(o=new h.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(n)){this._sprite.setTexture(t);var a=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),i=this._render(t).then(function(){return e.setDirtyForRenderer(!1,n),e._renderTexture})}else u.a.info(this.constructor.name,"Rendering from cache"),i=s.a.resolve(this._renderTexture);return i.then(function(t){return o&&o.stop(),t})},e.prototype._render=function(t){return(this._sdk.getRenderer().isOfType(a.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)},e.prototype._renderWebGL=function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")},e.prototype._renderCanvas=function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")},e.prototype.getNewDimensions=function(t){return t.clone()},e.prototype.reset=function(){this._dirty=!0,this._glslPrograms={}},e.prototype.isDirtyForRenderer=function(t){var e=this._dirtiness[t.id];return void 0===e||e},e.prototype.setDirtyForRenderer=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in this._dirtiness)this.setDirtyForRenderer(t,{id:r},e)},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this._sdk.getInputDimensions();e&&r.multiply(this._sdk.getZoom()).floor();var n=void 0;return this._sdk.getOperationsStack().forEach(function(e){if(!n)return e===t?void(n=!0):void(r=e.getNewDimensions(r))}),r.floor()},e.prototype.clone=function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())},e.prototype.disposeRenderTextures=function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null},e.prototype.dispose=function(){this.disposeRenderTextures(),this._sprite.dispose()},e}(c.a);l.identifier=null,e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(10),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):r(36),a=function(){function t(e,r){n(this,t),this._tag=e,this._name=r,this._start=o()}return t.prototype.stop=function(){var t=o(),e=t-this._start,r=Math.round(1e3/e);i.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+r+" FPS)")},t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(10),s=r(9),u=r(13),p=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,e);var o=i(this,t.call(this));return o._onOperationUpdate=o._onOperationUpdate.bind(o),o._cacheEnabled=!0,o._stack=r,o._stack.forEach(function(t){t.on("update",o._onOperationUpdate)}),o}return o(e,t),e.prototype.clear=function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]},e.prototype.hasChanges=function(){return this._stack.filter(function(t){return!!t}).some(function(t){return t.hasChanges()})},e.prototype._onOperationUpdate=function(t,e){this.emit(a.Constants.Events.OPERATION_UPDATED,t,e)},e.prototype.enableCache=function(){this._cacheEnabled=!0},e.prototype.disableCache=function(){this._cacheEnabled=!1},e.prototype.forEach=function(t){return this._stack.filter(function(t){return!!t}).forEach(t)},e.prototype.render=function(t,e){var r=this,n=e,i=this._stack.filter(function(t){return!!t}).filter(function(t){return t.getEnabled()});i.reverse();var o=i.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],u=i.indexOf(o);i.reverse();var p=0;-1!==u&&(p=i.length-u-1);for(var c=0;c<p;c++)a.Log.info(this.constructor.name,"Skipping "+i[c].constructor.name);for(var h=s.a.resolve(n),l=p;l<i.length;l++)!function(t){var e=i[t],n=void 0,o=void 0;h=h.then(function(t){return e.render(t).then(function(t){return n&&t!==n&&!r._cacheEnabled&&o.disposeRenderTextures(),n=t,o=e,t})})}(l);return h},e.prototype.validateSettings=function(){return s.a.all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))},e.prototype.setAllToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(e){return e.setDirty(!0,t)})},e.prototype.updateDirtinessForRenderer=function(t){for(var e=!1,r=0;r<this._stack.length;r++){var n=this._stack[r];n&&(n.isDirtyForRenderer(t)&&(e=!0),e&&n.setDirtyForRenderer(!0,t))}},e.prototype.push=function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)},e.prototype.unshift=function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)},e.prototype.clone=function(){return new e(this._stack.slice(0))},e.prototype.get=function(t){return this._stack[t]},e.prototype.set=function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)},e.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))},e.prototype.removeAt=function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]},e.prototype.getStack=function(){return this._stack},e.prototype.dispose=function(){this.forEach(function(t){t.dispose()})},e}(u.a);e.a=p},function(t,e){t.exports={name:"photoeditorsdk",version:"4.4.0",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (9elements GmbH) <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:ui":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/ui","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.min.*'  | sed 's/.min././' | xargs -n1 rm && npm run jsdoc:server",precommit:"true",prepush:"npm run lint"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.0","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chromedriver:"^2.33.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.3.0","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.10.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2",husky:"^0.14.3",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7",lodash:"^4.17.4",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.7.2","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.2.2","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.2.0","react-dom":"^16.2.0",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^0.4.6","vinyl-source-stream":"0.1.1",webpack:"^3.10.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"git://github.com/imgly/node-canvas.git#v2.0.0-alpha.9",gl:"^4.0.4",request:"^2.83.0"}}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),a.Math.ColorMatrix),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(108),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),s=i.getImageData(0,0,n.width,n.height),u=this._options,p=u.colorMatrix,c=u.gamma,h=u.shadows,l=u.highlights,f=1!==c,d=0!==h||0!==l,y=new a.Color(0,0,0,0),_=0;_<n.width*n.height;_++){var g=4*_;if(y.r=s.data[g]/255,y.g=s.data[g+1]/255,y.b=s.data[g+2]/255,f&&(y.r=Math.pow(y.r,1/Math.max(c,1e-7)),y.g=Math.pow(y.g,1/Math.max(c,1e-7)),y.b=Math.pow(y.b,1/Math.max(c,1e-7))),d){var v=.2125*y.r+.7154*y.g+.0721*y.b,m=h>=0?a.Utils.clamp(Math.pow(v,1/(h+1))+-.76*Math.pow(v,2/(h+1))-v,0,Math.max(h,1)):-a.Utils.clamp(Math.pow(v,1/(1-h))+-.76*Math.pow(v,2/(1-h))-v,0,Math.max(-h,1)),b=l<0?a.Utils.clamp(1-Math.pow(1-v,1/(1-l))- -.8*Math.pow(1-v,2/(1-l))-v,-1,0):-a.Utils.clamp(1-Math.pow(1-v,1/(1+l))- -.8*Math.pow(1-v,2/(1+l))-v,-1,0),x=m*v*v,T=m-x,w=v+x+b;y.r=a.Utils.clamp(w*((y.r+T)/Math.max(v,1e-7)),0,1),y.g=a.Utils.clamp(w*((y.g+T)/Math.max(v,1e-7)),0,1),y.b=a.Utils.clamp(w*((y.b+T)/Math.max(v,1e-7)),0,1)}y=p.apply(y),s.data[g]=255*y.r,s.data[g+1]=255*y.g,s.data[g+2]=255*y.b}o.putImageData(s,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={gamma:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT},shadows:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT},highlights:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT},colorMatrix:{type:a.OptionType.COLOR_MATRIX,default:new s,uniformType:a.UniformType.MAT4},colorOffset:{type:a.OptionType.ARRAY,default:[],uniformType:a.UniformType.FLOAT4}},e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(21)),u=r.n(s),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=i(this,t.call.apply(t,[this].concat(s)));return c._fragmentSource=r(112),c._lastBlurRadius=null,c._lastDimensions=new p(0,0),c._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),r.setPixelRatio(e.getPixelRatio()),r.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),r.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(n)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new p(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);u.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._blurredRenderTarget.dispose()},e}(a.Engine.Filter);c.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},delta:{type:a.OptionType.VECTOR2,default:new p(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new p(100,100),uniformType:a.UniformType.FLOAT2}},e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(1)),u=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.render=function(t,e,r){return a.Promise.resolve(r)},e.prototype.hasChanges=function(){return!1},e}(s.a);u.isIdentity=!0,u.identifier="identity",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(a)));return u._fragmentSource=r(132),u}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.lookupTableData,u=0;u<n.width*n.height;u++){var p=4*u,c=a.data[p];a.data[p]=s[4*c];var h=a.data[p+1];a.data[p+1]=s[1+4*h];var l=a.data[p+2];a.data[p+2]=s[2+4*l]}o.putImageData(a,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},lookupTableData:{type:a.OptionType.ARRAY,default:[]}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u({lookupTable:s._options.textureGLUnit}),s._textures={},s._renderers={},s}return o(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)},e.prototype._updateWebGLTexture=function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),r=t.getRenderer(),n=r.id;this._renderers[n]=r,this._textures[n]||(this._textures[n]=new a.Engine.BaseTexture);var i=this._textures[n],o=new a.Engine.PixelArrayImage(256,1,e);i.setSource(o),i.setGLUnit(this._options.textureGLUnit),r.isOfType(a.RendererType.WEBGL)&&r.updateTexture(i)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data},e}(s.a);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(189)),u=r(22),p=r(55),c=r(191),h=a.Math.Vector2,l=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._persistedPaths=[],u._outputCanvasDirty=!0,u._outputCanvas=a.Utils.createCanvas(),u._outputContext=u._outputCanvas.getContext("2d"),u._persistCanvas=a.Utils.createCanvas(),u._persistContext=u._persistCanvas.getContext("2d"),u._nextCanvas=a.Utils.createCanvas(),u._texture=a.Engine.Texture.fromCanvas(u._outputCanvas),u._sprite.setTexture(u._texture),u._onPathUpdate=u._onPathUpdate.bind(u),u}return o(e,t),e.prototype.applyFlip=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var r=e.getPosition().clone();switch(t){case"horizontal":r.x=1-r.x;break;case"vertical":r.y=1-r.y}e.setPosition(r)}),e.setDirty(!0)}),this._reset()},e.prototype.applyRotation=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var r=e.getPosition().clone();90===t?(r.flip(),r.x=1-r.x):-90===t&&(r.flip(),r.y=1-r.y),e.setPosition(r)}),e.setDirty(!0)}),this._reset()},e.prototype.applyTransform=function(t){var e=null;this._options.paths.forEach(function(r){r.forEachControlPoint(function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))});var n=r.getBrush();n!==e&&(n.setSize(t.applyToRelativeSize(n.getSize())),e=n),r.setDirty(!0)}),this._reset()},e.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,r=t.height;this._outputContext.clearRect(0,0,e,r)}},e.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,r=t.height;this._persistContext.clearRect(0,0,e,r)}},e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="brush"),n},e.prototype.serializeOption=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map(function(t){return t.serializeOptions(void 0,r)}):t.prototype.serializeOption.call(this,e,r)},e.prototype.createPath=function(t){var e=new s.a(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e},e.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0)},e.prototype._onPathPersist=function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)},e.prototype._getTexture=function(){return this._texture},e.prototype.setDirtyForRenderer=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.prototype.setDirtyForRenderer.call(this,e,r,n),e&&n&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[r],e)},e.prototype.render=function(t){var e=this,r=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(r)&&(a.Utils.ensureCanvasDimensions(this._outputCanvas,t),a.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(r){r.render(t),r.getClosed()&&-1===e._persistedPaths.indexOf(r)&&e._onPathPersist(r)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,r))},e.prototype.update=function(e,r){r&&(a.Utils.ensureCanvasDimensions(this._outputCanvas,r),a.Utils.ensureCanvasDimensions(this._persistCanvas,r),this._texture.getBaseTexture().update()),this.render(r);var n=e.getRenderer();n.isOfType(a.RendererType.WEBGL)&&n.updateTexture(this._texture.getBaseTexture()),t.prototype.update.call(this,e,r)},e.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()},e.prototype.getCanvas=function(){return this._outputCanvas},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._texture.getBaseTexture().dispose()},e}(u.a);l.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},position:{type:a.OptionType.VECTOR2,default:new h(0,0)},scale:{type:a.OptionType.VECTOR2,default:new h(1,1)},anchor:{type:a.OptionType.VECTOR2,default:new h(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new h(0,0)},rotation:{type:a.OptionType.NUMBER,default:0},paths:{type:a.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map(function(t){if(t instanceof s.a)return t;var r=t.brush,n=t.closed,i=new s.a(e._operation,{brush:r,closed:n},e._nextCanvas);return t.controlPoints.forEach(function(t){i.addControlPoint(t)}),i}),this._reset(),t}}},l.type="brush",l.Brush=p.a,l.Path=s.a,l.Brushes={RadialBrush:c.a},e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),a.Math.Vector2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._lastOptions={},u._lastInputDimensions=new s(0,0),u._brush=null,u}return o(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,r=e.image,n=e.size;r.width=r.height=Math.ceil(n*t.min());var i=a.Utils.createCanvas();i.width=r.width,i.height=r.height;var o=i.getContext("2d");o.drawImage(r,0,0,i.width,i.height);var s=this._tintImageData(o.getImageData(0,0,i.width,i.height),i.width,i.height);return o.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=t.clone(),i},e.prototype._tintImageData=function(t){for(var e=this._options.color,r=0;r<t.data.length;r+=4)t.data[r]+=(255*e.r-t.data[r])*e.a,t.data[r+1]+=(255*e.g-t.data[r+1])*e.a,t.data[r+2]+=(255*e.b-t.data[r+2])*e.a;return t},e.prototype.clone=function(){return new(0,this.constructor)(this._options)},e}(a.Configurable);e.a=u,u.prototype.availableOptions={identifier:{type:a.OptionType.STRING},image:{type:a.OptionType.IMAGE},size:{type:a.OptionType.NUMBER,default:.05},color:{type:a.OptionType.COLOR,default:a.Color.RED}}},function(t,e,r){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
t.exports=r(0),r(106)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(58),i=r(44),o=r(45),a=r(18),s=r(12),u=r(46),p=r(13),c=r(5),h=r(103),l=r(48),f=r(29),d=r(9),y=r(17),_=r(6),g=r(104),v=r(8),m=r(14);/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
n.a.version=r(49).version,n.a.Math=i,n.a.Operations=o,n.a.Engine=a.a,n.a.Color=s.a,n.a.Operation=u.a,n.a.EventEmitter=p.a,n.a.Utils=c.a,n.a.Env=h.a,n.a.OperationsStack=l.a,n.a.EXIF=f.a,n.a.Promise=d.a,n.a.Configurable=y.a,n.a.Log=_.a,n.a.Loaders=g,n.a.RenderType=v.RenderType,n.a.ImageFormat=v.ImageFormat,n.a.OptionType=v.OptionType,n.a.RendererType=v.RendererType,n.a.UniformType=v.UniformType,n.a.Base64=m.a,n.a.UI={},e.default=n.a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(10),s=r(45),u=r(48),p=r(95),c=r(29),h=r(98),l=r(47),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t){return v.byteArrayToString(T.decode(t))},y=a.Rectangle,_=a.Constants,g=a.Engine,v=a.Utils,m=a.EventEmitter,b=a.Vector2,x=a.Log,T=a.Base64,w=_.RenderType,O=_.ImageFormat,C=_.Events,E=_.RendererType,R=function(t){function e(o){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var p=i(this,t.call(this));p._onOperationUpdate=p._onOperationUpdate.bind(p),p._onContextRestored=p._onContextRestored.bind(p);var c=r(49),h=c.version;if(p.version=h,p[d("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,p._preferredRenderer=o,p._options=v.defaults(s,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),p._options.smoothUpscaling&&(g.BaseTexture.DefaultMagFilter=g.BaseTexture.LinearFilter),p._options.extensions=v.defaults(p._options.extensions,{operations:[],controls:[],languages:[]}),x.setLevel(p._options.logLevel),!p._v())return i(p);var l=a[d("TGljZW5zZUNoZWNrZXI=")];p._l=new l(p[d("X29wdGlvbnM=")][d("bGljZW5zZQ==")]),p._cv(!0).then(function(){p._ct()}).catch(function(t){x.error(d("TGljZW5zaW5n"),t.message)}),p._defaultRenderMode=p._options.renderMode,p._renderMode=p._options.renderMode,p._textureQuality=p._options.textureQuality,p._offset=new b,p._zoom=p._options.zoom,p._spriteScale=p._options.spriteScale,p._rotation=p._options.rotation,p._operations={},p._operationsStack=null,p.setOperationsStack(new u.a),p._container=new g.Container,p._sprite=new g.Sprite,p._container.addChild(p._sprite),p._inputTexture=p._options.inputTexture,p._currentInputTexture=null,p._currentTexture=null,p._resizedTexture=null,p._resizedContainer=new g.Container,p._resizedSprite=new g.Sprite,p._resizedContainer.addChild(p._resizedSprite),p.setSmoothDownscaling(p._options.smoothDownscaling),p._checkForUpdates(),p._registerOperations(),p._initRenderer();var f=p._renderer.constructor.type;return p._options.displayWelcomeMessage&&x.log("Version:",p.version+" ("+f+") - https://www.photoeditorsdk.com"),p._options.image&&p.setImage(p._options.image),p}return o(e,t),e.prototype._v=function(){return!!this[d("X29wdGlvbnM=")][d("bGljZW5zZQ==")]||(x.error(d("TGljZW5zaW5n"),d("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),x.error(d("TGljZW5zaW5n"),d("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)},e.prototype._ct=function(){if(this._l.exp()){this._l.isExp()?x.error(d("TGljZW5zaW5n"),d("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):x.warn(d("TGljZW5zaW5n"),d("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}},e.prototype._cv=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(r){t[d("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var n=d("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(n="ELICEXP"===r.code?d("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===r.code?d("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===r.code?d("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===r.code?d("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",f(t._options.license)):d("ELICINV"===r.code?"SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu":"SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),r.message=n,new Error(r)})},e.prototype._t=function(){this._l.t()},e.prototype._onOperationUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.emit.apply(this,[C.OPERATION_UPDATED].concat(e))},e.prototype._onContextRestored=function(){x.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTextures()}),this.render()},e.prototype.export=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.DATAURL,e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.PNG,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return e.hasChanges()&&e._t(),new h.a(e,{renderType:t,imageFormat:r,quality:n}).export()})},e.prototype.render=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var r=this._renderer.getContext();r.startFrame&&r.startFrame();var n=void 0;x.canLog("info")&&(n=new l.a("","Frame rendering")),x.info("","Rendering starts");var i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()}).then(function(){return i.validateSettings()}).then(function(){return i.render(t,t._currentTexture)}).then(function(r){switch(t._currentTexture=r,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var n=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(n),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),r}).then(function(t){return n&&n.stop(),r.endFrame&&r.endFrame(),t})},e.prototype.getTextureScale=function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)},e.prototype._prepareTexture=function(){var t=this;return new Promise(function(e,r){var n=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i=t.getInputDimensions().multiply(n).floor(),o=void 0;t._resizedTexture?t._resizedTexture.getDimensions().equals(i)||(t._resizedTexture.resizeTo(i),o=!0):(t._resizedTexture=new g.RenderTexture(t._renderer,i.x,i.y),o=!0),o&&(t._resizedSprite.setScale(n,n),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)})},e.prototype._registerOperations=function(){this._operations={};for(var t in s){var e=s[t];this._operations[e.identifier]=e}this._operations=v.extend(this._operations,this._options.extensions.operations)},e.prototype.registerOperations=function(t){var e=this;t.forEach(function(t){e._operations[t.identifier]=t})},e.prototype.setAllOperationsToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)},e.prototype.createOperation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this._operations[t];if(!n)throw new Error("No operation with identifier `"+t+"` found.");var i=new n(this,e);return r&&this.addOperation(i),i},e.prototype.addOperation=function(t){this._operationsStack.push(t)},e.prototype.removeOperation=function(t){this._operationsStack.remove(t)},e.prototype.getInputDimensions=function(){var t=this._inputTexture.getFrame();return new b(t.width,t.height)},e.prototype.getFinalDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions();return this._operationsStack.forEach(function(t){t.getEnabled()&&(e=t.getNewDimensions(e))}),t&&e.multiply(this._spriteScale),e.floor()},e.prototype.getOutputDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()},e.prototype.getOutputTextureDimensions=function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getTextureScale()),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(t){e=t.getNewDimensions(e)}),e},e.prototype._checkForUpdates=function(){this._l.isENT()||(this._versionChecker=new p.a(this.version))},e.prototype._initRenderer=function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},e=void 0,r=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var n=this._options.canvas;e=n.width,r=n.height}else if(this._inputTexture){var i=this.getFinalDimensions();e=i.x,r=i.y}else e=1,r=1;switch(this._preferredRenderer){case E.WEBGL:this._renderer=g.autoDetectRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;case E.CANVAS:this._renderer=new g.CanvasRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;default:x.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=g.autoDetectRenderer(e,r,t)}},e.prototype.resizeTo=function(t){this._renderer.resizeTo(t,!0)},e.prototype.reset=function(){this._operationsStack.clear()},e.prototype.parseExif=function(t){if(t){var e=t.src,r=!1,n=null;if(r=c.a.isJPEG(e),n=e,r){var i=null;try{i=c.a.fromBase64String(n)}catch(t){}if(!i)return;return i}}},e.prototype._handleExifOrientation=function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,r=-1!==[2,4,5,7].indexOf(t.Orientation);(e||r)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t),this._exif.setOrientation(1))}},e.prototype.hasImage=function(){return null!==this._image&&void 0!==this._image},e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var n=new g.BaseTexture(this._image),i=new y(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);r&&(i.width=r.x,i.height=r.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new g.Texture(n,i),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)},e.prototype.setInputTexture=function(t){this._inputTexture=t},e.prototype.getCanvas=function(){return this._renderer.getCanvas()},e.prototype.setCanvas=function(t){this._renderer.setCanvas(t)},e.prototype.getSprite=function(){return this._sprite},e.prototype.getContainer=function(){return this._container},e.prototype.getOperationsStack=function(){return this._operationsStack},e.prototype.setOperationsStack=function(t){this._operationsStack&&this._operationsStack.off(C.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(C.OPERATION_UPDATED,this._onOperationUpdate)},e.prototype.getOperations=function(){return this._operations},e.prototype.getRenderer=function(){return this._renderer},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t,e){t instanceof b?this._offset.copy(t):this._offset.set(t,e)},e.prototype.getRenderMode=function(){return this._renderMode},e.prototype.setRenderMode=function(t){this._renderMode=t},e.prototype.getZoom=function(){return this._zoom},e.prototype.setZoom=function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()},e.prototype.getTextureQuality=function(){return"export"===this._renderMode?1:this._textureQuality},e.prototype.setTextureQuality=function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)},e.prototype.getSpriteScale=function(){return this._spriteScale},e.prototype.setSpriteScale=function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()},e.prototype.getPixelRatio=function(){return this._options.pixelRatio},e.prototype.getExif=function(){return this._exif},e.prototype.getOptions=function(){return this._options},e.prototype.getInputTexture=function(){return this._inputTexture},e.prototype.setSmoothDownscaling=function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)},e.prototype.setRotation=function(t){this._rotation=t},e.prototype.getRotation=function(){return this._rotation},e.prototype.hasChanges=function(){return this.getOperationsStack().hasChanges()},e.prototype.dispose=function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()},e}(m);e.a=R},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(35),u=r(37),p=r(19),c=r(24),h=a.c.RendererType,l=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._type=h.CANVAS,s.setCanvas(s._options.canvas||s._createCanvas()),s}return o(e,t),e.prototype._createCanvas=function(){return a.i.createCanvas()},e.prototype._createContext=function(){var t=this._canvas,r=t.getContext("2d");return this._options.debug&&(r=new s.a(r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new p.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new c.a(this)},e.prototype.render=function(t){var e=this._renderTarget.getContext(),r=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(r),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var n=this._canvas,i=n.width,o=n.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)},e.prototype.renderDisplayObject=function(t,e){var r=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(r)},e.prototype.getCurrentRenderTarget=function(){return this._renderTarget},e.prototype.setRenderTarget=function(t){this._renderTarget=t},e.prototype.getContext=function(){return this._renderTarget.getContext()},e.prototype.dispose=function(){this._filterManager.dispose()},e}(u.a);l.contextId=0,l.type="Canvas2D",e.a=l},function(t,e,r){"use strict";var n={defaults:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)void 0===i[u]&&(i[u]=s[u])}return i},extend:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)i[u]=s[u]}return i}};e.a=n},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(37),u=r(20),p=r(38),c=r(62),h=r(25),l=r(27),f=r(28),d=r(35),y=r(39),_=a.c.RendererType,g=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._type=_.WEBGL,u._textures=[],u._fakeObject=new l.a,u._onContextLost=u._onContextLost.bind(u),u._onContextRestored=u._onContextRestored.bind(u),u.setCanvas(u._options.canvas||a.i.createCanvas()),u.shaders=u._initShaders(),u.renderers=u._initRenderers(),u}return o(e,t),e.prototype._onContextLost=function(t){t.preventDefault(),a.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")},e.prototype._onContextCreationError=function(t){t.preventDefault(),a.f.warn(this.constructor.name,"Failed to create WebGL context: "+(t.statusMessage||"Unknown error"))},e.prototype._onContextRestored=function(){var t=this;a.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")},e.prototype._onBeforeContext=function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new f.a(this),this._currentObjectRenderer=new p.a(this)},e.prototype.setShader=function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)},e.prototype.setCanvas=function(e){this._canvas&&this._removeContextEventListeners(),t.prototype.setCanvas.call(this,e),this._canvas.addEventListener&&this._addContextEventListeners()},e.prototype._addContextEventListeners=function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)},e.prototype._removeContextEventListeners=function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)},e.prototype._setAttributesForShader=function(t){var e=this._context,r=t.getAttributes(),n=t.getAttributeLocations();r.forEach(function(t){var r=n[t];e.enableVertexAttribArray(r)})},e.prototype._initShaders=function(){return{default:new h.a(this)}},e.prototype._initRenderers=function(){return{sprite:new c.a(this)}},e.prototype._createContext=function(){var t=this._canvas,r=null,n={preserveDrawingBuffer:!0};if(r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var i=function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")};r=window.WebGLDebugUtils.makeDebugContext(r,null,i)}return this._options.debug&&(r=new d.a(r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this._maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new u.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()},e.prototype._getMaxPrecision=function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==r.rangeMax?"highp":"lowp"},e.prototype.resizeTo=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prototype.resizeTo.call(this,e,r),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e)},e.prototype.setRenderTarget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()},e.prototype.setObjectRenderer=function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()},e.prototype.render=function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)},e.prototype.renderDisplayObject=function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()},e.prototype.clear=function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)},e.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}},e.prototype.restore=function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer},e.prototype.getOrCreateGLTexture=function(t){var e=this._context,r=t.getGLTextureForRenderer(this);return r||(r=e.createTexture(),t.setGLTextureForRenderer(r,this),this._textures.push(t)),r},e.prototype.updateTexture=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.getSource(),n=!!r,i=this._context,o=t.getGLUnit(),a=this.getOrCreateGLTexture(t);i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,a),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&n&&(r instanceof y.a?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,r.width,r.height,0,i.RGBA,i.UNSIGNED_BYTE,r.data):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r)),t.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)},e.prototype.getMaxDimensions=function(){var t=a.i.createCanvas(),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(e){var r=e.getParameter(e.MAX_TEXTURE_SIZE),n=e.getExtension("WEBGL_lose_context");return n&&n.loseContext(),r}return null},e.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},e.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},e.isSupported=function(){var t=a.i.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl");return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),!!e},e.prototype.getMaxFloatPrecision=function(){return this._maxFloatPrecision},e.prototype.getMaxIntPrecision=function(){return this._maxIntPrecision},e.prototype.dispose=function(){var t=this;this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)});for(var e in this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var r=this._context,n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()},e}(s.a);g.contextId=0,g.type="WebGL",e.a=g},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(38),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));u._maxBatchSize=a.a,u._vertices=new ArrayBuffer(4*a.a*a.j),u._positions=new Float32Array(u._vertices),u._colors=new Uint32Array(u._vertices),u._indices=new Uint16Array(6*a.a);for(var p=0,c=0;p<6*a.a;p+=6,c+=4)u._indices[p+0]=c+0,u._indices[p+1]=c+1,u._indices[p+2]=c+2,u._indices[p+3]=c+0,u._indices[p+4]=c+2,u._indices[p+5]=c+3;return u._shaders=[],u._sprites=[],u._currentBatchSize=0,u._currentBaseTexture=null,u._onContextChange(),u}return o(e,t),e.prototype.render=function(t){var e=t.getTexture(),r=e.getFrame(),n=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=n);var i=e.getUVs();if(i){var o=this._currentBatchSize*a.j;this._addVertexCoordinates(t,o,r),this._addTextureUVs(t,o,i),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}},e.prototype._addColors=function(t,e){var r=this._colors,n=t.getTint(),i=(n>>16)+(65280&n)+((255&n)<<16)+(255*t.getWorldAlpha()<<24);r[e+4]=r[e+9]=r[e+14]=r[e+19]=i},e.prototype._addTextureUVs=function(t,e,r){var n=this._positions,i=r.getUVsAt(0);n[e+2]=i.x,n[e+3]=i.y,i=r.getUVsAt(1),n[e+7]=i.x,n[e+8]=i.y,i=r.getUVsAt(2),n[e+12]=i.x,n[e+13]=i.y,i=r.getUVsAt(3),n[e+17]=i.x,n[e+18]=i.y},e.prototype._addVertexCoordinates=function(t,e,r){for(var n=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(r,o),s=0;s<4;s++)n[e+5*s]=a[s].x,n[e+5*s+1]=a[s].y},e.prototype._onContextChange=function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)},e.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},e.prototype.flush=function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*a.a)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var r=this._positions.subarray(0,this._currentBatchSize*a.j);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var n=0,i=null,o=null,s=null,u=null,p=!1,c=null,h=0,l=0,f=this._currentBatchSize;l<f;l++){if(c=this._sprites[l],o=c.getTexture().getBaseTexture(),u=c.getShader()||this._shader,p=s!==u,(i!==o||p)&&(this._renderBatch(i,n,h),h=l,n=0,i=o,p)){s=u,t.setShader(s);var d=t.getCurrentRenderTarget(),y=d.getProjectionMatrix().toArray();s.setUniform("u_projMatrix",y),s.syncUniforms(),e.activeTexture(e.TEXTURE0)}n++}this._renderBatch(i,n,h),this._currentBatchSize=0,this._sprites=[]}},e.prototype._renderBatch=function(t,e,r){if(0!==e){var n=this._renderer,i=n.getContext(),o=t.getGLTextureForRenderer(n);o||(o=n.getOrCreateGLTexture(t)),t.isDirty()&&(n.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*r*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}},e.prototype.dispose=function(){var e=this._renderer,r=e.getContext();r.deleteBuffer(this._vertexBuffer),r.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,t.prototype.dispose.call(this)},e}(s.a);e.a=u},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){n(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return t.prototype.map=function(t,e){var r=e.x,n=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=r,this._vertices[1]=n,this._vertices[2]=r+e.width,this._vertices[3]=n,this._vertices[4]=this._vertices[2],this._vertices[5]=n+e.height,this._vertices[6]=r,this._vertices[7]=this._vertices[5],this._uploadBuffers()},t.prototype._initBuffers=function(){var t=this._context;this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t.prototype._uploadBuffers=function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)},t.prototype.getVertexBuffer=function(){return this._vertexBuffer},t.prototype.getIndexBuffer=function(){return this._indexBuffer},t.prototype.dispose=function(){var t=this._context;t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)},t}();e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(3),o=function(){function t(){n(this,t),this._uvs=[new i.k(0,0),new i.k(1,0),new i.k(1,1),new i.k(0,1)]}return t.prototype.update=function(t,e){var r=this._uvs[0];r.x=t.x/e.width,r.y=t.y/e.height,r=this._uvs[1],r.x=(t.x+t.width)/e.width,r.y=t.y/e.height,r=this._uvs[2],r.x=(t.x+t.width)/e.width,r.y=(t.y+t.height)/e.height,r=this._uvs[3],r.x=t.x/e.width,r.y=(t.y+t.height)/e.height},t.prototype.getUVsAt=function(t){return this._uvs[t]},t.prototype.getUVs=function(){return this._uvs},t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(41),u=r(15),p=r(20),c=r(19),h=r(28),l=r(24),f=a.c.RendererType,d=function(t){function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n(this,e);var c=i(this,t.call(this,new u.a,new a.h(0,0,o,s)));return c._loaded=!0,c._width=o,c._height=s,c._pixelRatio=p,c._renderer=r,c._setupFilterManager(),c._setupBuffer(),c.setBaseTexture(c._renderTarget.getBaseTexture()),c._updateUVs(),c}return o(e,t),e.prototype._setupFilterManager=function(){this._renderer.isOfType(f.WEBGL)?this._filterManager=new h.a(this._renderer):this._renderer.isOfType(f.CANVAS)&&(this._filterManager=new l.a(this._renderer)),this._filterManager.resizeTo(new a.k(this._width,this._height))},e.prototype._setupBuffer=function(){this._renderer.isOfType(f.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(f.CANVAS)&&this._setupCanvasRenderTarget()},e.prototype._setupWebGLRenderTarget=function(){this._renderTarget=new p.a(this._renderer,this._width,this._height,this._pixelRatio)},e.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new c.a(this._width,this._height,this._pixelRatio)},e.prototype.clear=function(t){this._renderTarget.clear(t)},e.prototype.resizeTo=function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))},e.prototype.render=function(t){if(this._renderer.isOfType(f.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(f.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}},e.prototype._renderWebGL=function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype._renderCanvas=function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.dispose=function(){this._renderTarget.dispose(),this._filterManager.dispose()},e}(s.a);e.a=d},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(40),u=r(69),p=function(t){function e(r){n(this,e);var o=i(this,t.call(this));return o._onTextureUpdate=o._onTextureUpdate.bind(o),o._texture=r,o._shader=null,o._width=0,o._height=0,o._anchor=new a.k(0,0),o.setTexture(r),o}return o(e,t),e.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype._renderWebGL=function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new u.a),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)},e.prototype._renderCanvas=function(t){var e=this._worldTransform,r=this._texture.getFrame(),n=r.width,i=r.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-n|0,s=this._anchor.y*-i|0,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var p=this._texture.getBaseTexture(),c=p.getPixelRatio(),h=p.getSource();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,(h.naturalWidth||n)*c,(h.naturalHeight||i)*c,a*o,s*o,n*o,i*o)},e.prototype.isAtPosition=function(t){var e=this._worldTransform.applyInverseToVector(t),r=this._texture.getFrame(),n=r.width,i=r.height,o=new a.k(-n,-i);o.multiply(this._anchor);var s=o.clone().add(n,i);return!(e.x<o.x||e.x>s.x||e.y<o.y||e.y>s.y)},e.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},e.prototype.getBounds=function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),r=this._worldTransform,n=this._anchor,i=r.rectangleToCoordinates(e,n),o=i[0].x,a=i[0].y,s=o,u=a;i.forEach(function(t){var e=t.x,r=t.y;o=Math.min(o,e),a=Math.min(a,r),s=Math.max(s,e),u=Math.max(u,r)}),t.x=o,t.width=Math.abs(s-o),t.y=a,t.height=Math.abs(u-a),this._boundsNeedUpdate=!1}return this._bounds.clone()},e.prototype.getTexture=function(){return this._texture},e.prototype.setTexture=function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))},e.prototype.getShader=function(){return this._shader},e.prototype.setShader=function(t){this._shader=t},e.prototype.getWidth=function(){return this._width},e.prototype.setWidth=function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getHeight=function(){return this._height},e.prototype.setHeight=function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getDimensions=function(){return new a.k(this._width,this._height)},e.prototype.getAnchor=function(){return this._anchor},e.prototype.setAnchor=function(t,e){t instanceof a.k?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling},e.prototype.setSmoothDownscaling=function(t){this._smoothDownscaling=t},e.prototype.dispose=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()},e}(s.a);e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(10),o=function(){function t(){n(this,t),this._container=new i.Engine.Container,this._sprite=new i.Engine.Sprite,this._container.addChild(this._sprite)}return t.prototype.render=function(t,e,r){var n=r.getDimensions(),o=this._getNextHighestPOT(n);this._renderTexture?this._renderTexture.resizeTo(o):this._renderTexture=new i.Engine.RenderTexture(t,o.x,o.y);var a=this._renderTexture.getDimensions();this._sprite.setTexture(r),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(t,e,n,a)},t.prototype._updateSprite=function(t,e,r,n){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new i.Rectangle(0,0,r.x,r.y))},t.prototype._getNextHighestPOT=function(t){return new i.Vector2(i.Utils.nextHighestPOT(t.x),i.Utils.nextHighestPOT(t.y))},t.prototype.getRenderTexture=function(){return this._renderTexture},t.prototype.dispose=function(){this._renderTexture.dispose(),this._renderTexture=null},t}();e.a=o},function(t,e,r){"use strict";var n=r(25);e.a={TextureShader:n.a}},function(t,e,r){function n(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(72),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return p[u]=n,s(u),u++}function i(t){delete p[t]}function o(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function a(t){if(c)setTimeout(a,0,t);else{var e=p[t];if(e){c=!0;try{o(e)}finally{i(t),c=!1}}}}if(!t.setImmediate){var s,u=1,p={},c=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&a(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;s=function(e){var r=h.createElement("script");r.onreadystatechange=function(){a(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function(){s=function(t){setTimeout(a,0,t)}}(),l.setImmediate=n,l.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(7),r(23))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(74);r.d(e,"UnpremultiplyFilter",function(){return n.a});var i=r(76);r.d(e,"ColorOverlayFilter",function(){return i.a});var o=r(78);r.d(e,"TintFilter",function(){return o.a});var a=r(80);r.d(e,"OverlayFilter",function(){return a.a})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(16),s=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(75),o}return o(e,t),e}(a.a);e.a=s},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(16),u=a.c.OptionType,p=a.c.UniformType,c=function(t){function e(){n(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(a)));return u._fragmentSource=r(77),u}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),s=this._options.color,u=i.getImageData(0,0,n.width,n.height),p=o.getImageData(0,0,n.width,n.height),c=n.width*n.height,h=new a.b,l=new a.b,f=0;f<4*c;f+=4){h.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255),l.set(p.data[f]/255,p.data[f+1]/255,p.data[f+2]/255,p.data[f+3]/255);var d=l.r+h.a*(h.r-l.r);p.data[f]=255*(d+h.a*(s.r-d));var y=l.g+h.a*(h.g-l.g);p.data[f+1]=255*(y+h.a*(s.g-y));var _=l.b+h.a*(h.b-l.b);p.data[f+2]=255*(_+h.a*(s.b-_))}o.putImageData(p,0,0)},e}(s.a);c.prototype.availableOptions={color:{type:u.COLOR,default:a.b.WHITE,uniformType:p.FLOAT4}},e.a=c},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(16),u=a.c.OptionType,p=a.c.UniformType,c=function(t){function e(){n(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(a)));return u._fragmentSource=r(79),u}return o(e,t),e.prototype._applyCanvas=function(t,r,n){var i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],r.getCanvas()),o=r.getContext(),s=n.getContext(),u=o.getImageData(0,0,i.width,i.height),p=this._options,c=p.mode,h=p.color,l=h.r,f=h.g,d=h.b,y=h.a,_=[.2125,.7154,.0721];switch(c){case e.MODES.SOLID:for(var g=0;g<i.width*i.height;g++){var v=4*g;u.data[v]+=(255*l-u.data[v])*y,u.data[v+1]+=(255*f-u.data[v+1])*y,u.data[v+2]+=(255*d-u.data[v+2])*y}break;case e.MODES.COLORIZED:for(var m=0;m<i.width*i.height;m++){var b=4*m,x=u.data[b]/255*_[0]+u.data[b+1]/255*_[1]+u.data[b+2]/255*_[2],T=new a.b(x*l,x*f,x*d);u.data[b]+=(255*T.r-u.data[b])*y,u.data[b+1]+=(255*T.g-u.data[b+1])*y,u.data[b+2]+=(255*T.b-u.data[b+2])*y}}s.putImageData(u,0,0)},e}(s.a);c.MODES={NONE:0,SOLID:1,COLORIZED:2},c.prototype.availableOptions={color:{type:u.COLOR,default:a.b.WHITE,uniformType:p.FLOAT4},mode:{type:u.NUMBER,default:c.MODES.NONE,uniformType:p.INT}},e.a=c},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(3),s=r(16),u=a.c.OptionType,p=a.c.UniformType,c=function(t){function e(){n(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(a)));return u._fragmentSource=r(81),u._lastImage=null,u}return o(e,t),e.prototype._applyCanvas=function(t,r,n){for(var i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options.overlayTexture.getRenderTarget().getContext()),o=r.getCanvas(),s=r.getContext(),u=n.getContext(),p=s.getImageData(0,0,o.width,o.height),c=i.getImageData(0,0,o.width,o.height),h=this._options,l=h.blendMode,f=h.alpha,d=new a.b,y=new a.b,_=new a.b,g=0;g<o.width*o.height*4;g+=4){d.set(p.data[g]/255,p.data[g+1]/255,p.data[g+2]/255,p.data[g+3]/255),y.set(c.data[g]/255,c.data[g+1]/255,c.data[g+2]/255,c.data[g+3]/255);var v=void 0,m=void 0,b=void 0,x=void 0,T=void 0,w=void 0,O=void 0,C=void 0,E=void 0;switch(l){case e.BLEND_MODES.NORMAL:_.set(d.r+y.a*f*(y.r-d.r),d.g+y.a*f*(y.g-d.g),d.b+y.a*f*(y.b-d.b),d.a);break;case e.BLEND_MODES.OVERLAY:v=1-2*(1-d.r)*(1-y.r),m=2*d.r*y.r,b=v+(d.r<.5?1:0)*(m-v),x=1-2*(1-d.g)*(1-y.g),T=2*d.g*y.g,w=x+(d.g<.5?1:0)*(T-x),O=1-2*(1-d.b)*(1-y.b),C=2*d.b*y.b,E=O+(d.b<.5?1:0)*(C-O),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.HARD_LIGHT:v=1-2*(1-y.r)*(1-d.r),m=2*y.r*d.r,b=v+(y.r<.5?1:0)*(m-v),x=1-2*(1-y.g)*(1-d.g),T=2*y.g*d.g,w=x+(y.g<.5?1:0)*(T-x),O=1-2*(1-y.b)*(1-d.b),C=2*y.b*d.b,E=O+(y.b<.5?1:0)*(C-O),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.SOFT_LIGHT:v=2*d.r*(1-y.r)+(2*y.r-1)*Math.sqrt(d.r),m=2*d.r*y.r+d.r*d.r*(1-2*y.r),b=v+(y.r<.5?1:0)*(m-v),x=2*d.g*(1-y.g)+(2*y.g-1)*Math.sqrt(d.g),T=2*d.g*y.g+d.g*d.g*(1-2*y.g),w=x+(y.g<.5?1:0)*(T-x),O=2*d.b*(1-y.b)+(2*y.b-1)*Math.sqrt(d.b),C=2*d.b*y.b+d.b*d.b*(1-2*y.b),E=O+(y.b<.5?1:0)*(C-O),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.MULTIPLY:b=d.r*y.r,w=d.g*y.g,E=d.b*y.b,_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.DARKEN:b=Math.min(d.r,y.r),w=Math.min(d.g,y.g),E=Math.min(d.b,y.b),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.LIGHTEN:b=Math.max(d.r,y.r),w=Math.max(d.g,y.g),E=Math.max(d.b,y.b),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.SCREEN:b=1-(1-d.r)*(1-y.r),w=1-(1-d.g)*(1-y.g),E=1-(1-d.b)*(1-y.b),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a);break;case e.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(y.r,1e-6))),w=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(y.g,1e-6))),E=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(y.b,1e-6))),_.set(d.r+y.a*f*(b-d.r),d.g+y.a*f*(w-d.g),d.b+y.a*f*(E-d.b),d.a)}p.data[g]=255*_.r,p.data[g+1]=255*_.g,p.data[g+2]=255*_.b,p.data[g+3]=255*_.a}u.putImageData(p,0,0)},e}(s.a);c.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},c.prototype.availableOptions={blendMode:{type:u.NUMBER,default:c.BLEND_MODES.NORMAL,uniformType:p.INT},overlayImage:{type:u.NUMBER,required:!0,uniformType:p.SAMPLER2D},overlayTexture:{type:u.OBJECT,required:!0},alpha:{type:u.NUMBER,default:1,uniformType:p.FLOAT}},e.a=c},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), 1.0);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t.map(function(t){return("0"+(255&t).toString(16)).slice(-2)}).join("")}var o=r(5),a=r(83),s=r(14),u=r(43),p=r(91),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(t){return o.a.byteArrayToString(s.a.decode(t))},l=function(){function t(e){n(this,t),this._version="2.0",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return t.prototype.v=function(){return this._sigValid()&&!this.isExp()},t.prototype._jsonValid=function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0},t.prototype._hostnameValid=function(){if("undefined"==typeof window)return!0;if(!this._decLic[h("YXBwX2lkZW50aWZpZXJz")].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[h("YXBwX2lkZW50aWZpZXJz")].forEach(function(r){o.a.wildCardMatch(t,r)&&(e=!0)}),e},t.prototype._platformValid=function(){return"HTML5"===this._decLic[h("cGxhdGZvcm0=")]},t.prototype.c=function(){var t=this;return new Promise(function(e,r){if("string"!==c(t._l)||!t._jsonValid()){var n=new Error;return n.code="ELICINVFMT",r(n)}if(!t._sigValid()){var i=new Error;return i.code="ELICINV",r(i)}if(!t._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",r(o)}if(!t._platformValid()){var a=new Error;return a.code="ELICINVPLAT",r(a)}if(t.isExp()){var s=new Error;return s.code="ELICEXP",r(s)}e()})},t.prototype.isToolAllowed=function(t){return this._decLic[h("ZmVhdHVyZXM=")]&&-1!==this._decLic[h("ZmVhdHVyZXM=")].indexOf(t)},t.prototype.t=function(){if(this._decLic.enterprise_license)return Promise.resolve();var t=this._decLic[h("ZG9tYWlucw==")][0]+h(h("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[h("YXBpX3Rva2Vu")];return new u.a(t).load()},t.prototype.isENT=function(){return!!this._decLic&&this._decLic[h("ZW50ZXJwcmlzZV9saWNlbnNl")]},t.prototype._sigValid=function(){return this._verify(this._message,this._sig)},t.prototype.exp=function(){return!!this._decLic[h("ZXhwaXJlc19hdA==")]},t.prototype.dl=function(){return Math.ceil((this._expAt()-Date.now())/864e5)},t.prototype.isExp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[h("ZXhwaXJlc19hdA==")]&&t>this._expAt()},t.prototype._expAt=function(){return 1e3*this._decLic[h("ZXhwaXJlc19hdA==")]},t.prototype._verify=function(t,e){var r=void 0,n=void 0;return n=this._encodeMessage(t),r=this._decodeSignature(e),r=r.substr(-64),n===r},t.prototype._encodeMessage=function(t){return Object(p.a)(t)},t.prototype._decodeSignature=function(t){var e=void 0;return t=s.a.decode(t),t=i(t),t=this._parseBigInt(t,16),e=t.modPowInt(this._e,this._n),e=e.toString(16)},t.prototype._parseBigInt=function(t,e){return new a.a(t,e)},t.prototype._parseLicense=function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[h("c2lnbmF0dXJl")]||"",delete this._decLic[h("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+\/=]/g,""),this._message=this._l.replace(new RegExp(',"'+h("c2lnbmF0dXJl")+'":"([^"]*)"'),""))},t}();e.a=l},function(t,e,r){"use strict";function n(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new n(null)}function o(t,e,r,n,i,o){for(;--o>=0;){var a=e*this[t++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i}function a(t,e,r,n,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this[t],p=this[t++]>>15,c=s*u+p*a;u=a*u+((32767&c)<<15)+r[n]+(1073741823&i),i=(u>>>30)+(c>>>15)+s*p+(i>>>30),r[n++]=1073741823&u}return i}function s(t,e,r,n,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],p=this[t++]>>14,c=s*u+p*a;u=a*u+((16383&c)<<14)+r[n]+i,i=(u>>28)+(c>>14)+s*p,r[n++]=268435455&u}return i}function u(t){return oe.charAt(t)}function p(t,e){var r=ae[t.charCodeAt(e)];return null==r?-1:r}function c(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function h(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function l(t){var e=i();return e.fromInt(t),e}function f(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var s=8==r?255&t[i]:p(t,i);s<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&n.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function y(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(r=this[a]>>s)>0&&(i=!0,o=u(r));a>=0;)s<e?(r=(this[a]&(1<<s)-1)<<e-s,r|=this[--a]>>(s+=this.DB-e)):(r=this[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),r>0&&(i=!0),i&&(o+=u(r));return i?o:"0"}function _(){var t=i();return n.ZERO.subTo(this,t),t}function g(){return this.s<0?this.negate():this}function v(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0}function m(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function b(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function x(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function T(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function w(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+a+1]=this[r]>>i|s,s=(this[r]&o)<<n;for(r=a-1;r>=0;--r)e[r]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function O(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(e.t=0);var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)e[a-r-1]|=(this[a]&o)<<i,e[a-r]=this[a]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function C(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()}function E(t,e){var r=this.abs(),i=t.abs(),o=r.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+r.t]=r.am(0,i[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)}function R(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function S(t,e,r){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=i());var s=i(),u=this.s,p=t.s,c=this.DB-m(o[o.t-1]);c>0?(o.lShiftTo(c,s),a.lShiftTo(c,r)):(o.copyTo(s),a.copyTo(r));var h=s.t,l=s[h-1];if(0!=l){var f=l*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),d=this.FV/f,y=(1<<this.F1)/f,_=1<<this.F2,g=r.t,v=g-h,b=null==e?i():e;for(s.dlShiftTo(v,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),n.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--v>=0;){var x=r[--g]==l?this.DM:Math.floor(r[g]*d+(r[g-1]+_)*y);if((r[g]+=s.am(0,x,r,v,0,h))<x)for(s.dlShiftTo(v,b),r.subTo(b,r);r[g]<--x;)r.subTo(b,r)}null!=e&&(r.drShiftTo(h,e),u!=p&&n.ZERO.subTo(e,e)),r.t=h,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&n.ZERO.subTo(r,r)}}}function F(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e}function D(t){this.m=t}function A(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function M(t){return t}function P(t){t.divRemTo(this.m,null,t)}function j(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function B(t,e){t.squareTo(e),this.reduce(e)}function I(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function L(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e}function U(t){var e=i();return t.copyTo(e),this.reduce(e),e}function N(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function z(t,e){t.squareTo(e),this.reduce(e)}function G(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function V(){return 0==(this.t>0?1&this[0]:this.s)}function W(t,e){if(t>4294967295||t<1)return n.ONE;var r=i(),o=i(),a=e.convert(this),s=m(t)-1;for(a.copyTo(r);--s>=0;)if(e.sqrTo(r,o),(t&1<<s)>0)e.mulTo(o,a,r);else{var u=r;r=o,o=u}return e.revert(r)}function q(t,e){var r;return r=t<256||e.isEven()?new D(e):new k(e),this.exp(t,r)}function H(){var t=i();return this.copyTo(t),t}function Y(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function X(){return 0==this.t?this.s:this[0]<<24>>24}function Z(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=l(r),o=i(),a=i(),s="";for(this.divRemTo(n,o,a);o.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,a);return a.intValue().toString(t)+s}function $(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),o=!1,a=0,s=0,u=0;u<t.length;++u){var c=p(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+c,++a>=r&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&n.ZERO.subTo(this,this)}function tt(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function et(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}function rt(t){return 0==this.compareTo(t)}function nt(t){return this.compareTo(t)<0?this:t}function it(t){return this.compareTo(t)>0?this:t}function ot(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function at(t,e){return t&e}function st(t){var e=i();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t|e}function pt(t){var e=i();return this.bitwiseTo(t,ut,e),e}function ct(t,e){return t^e}function ht(t){var e=i();return this.bitwiseTo(t,ct,e),e}function lt(t,e){return t&~e}function ft(t){var e=i();return this.bitwiseTo(t,lt,e),e}function dt(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function yt(t){var e=i();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function _t(t){var e=i();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function gt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function vt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+gt(this[t]);return this.s<0?this.t*this.DB:-1}function mt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=mt(this[r]^e);return t}function xt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Tt(t,e){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function wt(t){return this.changeBit(t,ut)}function Ot(t){return this.changeBit(t,lt)}function Ct(t){return this.changeBit(t,ct)}function Et(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()}function Rt(t){var e=i();return this.addTo(t,e),e}function St(t){var e=i();return this.subTo(t,e),e}function Ft(t){var e=i();return this.multiplyTo(t,e),e}function Dt(){var t=i();return this.squareTo(t),t}function At(t){var e=i();return this.divRemTo(t,e,null),e}function Mt(t){var e=i();return this.divRemTo(t,null,e),e}function Pt(t){var e=i(),r=i();return this.divRemTo(t,e,r),new Array(e,r)}function jt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Bt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function It(){}function kt(t){return t}function Lt(t,e,r){t.multiplyTo(e,r)}function Ut(t,e){t.squareTo(e)}function Nt(t){return this.exp(t,new It)}function zt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()}function Gt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Vt(t){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Wt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function qt(t){return t}function Ht(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Yt(t,e){t.squareTo(e),this.reduce(e)}function Xt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Zt(t,e){var r,n,o=t.bitLength(),a=l(1);if(o<=0)return a;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new D(e):e.isEven()?new Vt(e):new k(e);var s=new Array,u=3,p=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var h=i();for(n.sqrTo(s[1],h);u<=c;)s[u]=i(),n.mulTo(h,s[u-2],s[u]),u+=2}var f,d,y=t.t-1,_=!0,g=i();for(o=m(t[y])-1;y>=0;){for(o>=p?f=t[y]>>o-p&c:(f=(t[y]&(1<<o+1)-1)<<p-o,y>0&&(f|=t[y-1]>>this.DB+o-p)),u=r;0==(1&f);)f>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),_)s[f].copyTo(a),_=!1;else{for(;u>1;)n.sqrTo(a,g),n.sqrTo(g,a),u-=2;u>0?n.sqrTo(a,g):(d=a,a=g,g=d),n.mulTo(g,s[f],a)}for(;y>=0&&0==(t[y]&1<<o);)n.sqrTo(a,g),d=a,a=g,g=d,--o<0&&(o=this.DB-1,--y)}return n.revert(a)}function Jt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Kt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r}function Qt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return n.ZERO;for(var r=t.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),u=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(r,i),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(n.ONE)?n.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function $t(t){var e,r=this.abs();if(1==r.t&&r[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(r[0]==se[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<se.length;){for(var n=se[e],i=e+1;i<se.length&&n<ue;)n*=se[i++];for(n=r.modInt(n);e<i;)if(n%se[e++]==0)return!1}return r.millerRabin(t)}function te(t){var e=this.subtract(n.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var o=e.shiftRight(r);(t=t+1>>1)>se.length&&(t=se.length);for(var a=i(),s=0;s<t;++s){a.fromInt(se[Math.floor(Math.random()*se.length)]);var u=a.modPow(o,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(e)){for(var p=1;p++<r&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(n.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
var ee,re=re||{};"Microsoft Internet Explorer"==re.appName?(n.prototype.am=a,ee=30):"Netscape"!=re.appName?(n.prototype.am=o,ee=26):(n.prototype.am=s,ee=28),n.prototype.DB=ee,n.prototype.DM=(1<<ee)-1,n.prototype.DV=1<<ee;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-ee,n.prototype.F2=2*ee-52;var ne,ie,oe="0123456789abcdefghijklmnopqrstuvwxyz",ae=new Array;for(ne="0".charCodeAt(0),ie=0;ie<=9;++ie)ae[ne++]=ie;for(ne="a".charCodeAt(0),ie=10;ie<36;++ie)ae[ne++]=ie;for(ne="A".charCodeAt(0),ie=10;ie<36;++ie)ae[ne++]=ie;D.prototype.convert=A,D.prototype.revert=M,D.prototype.reduce=P,D.prototype.mulTo=j,D.prototype.sqrTo=B,k.prototype.convert=L,k.prototype.revert=U,k.prototype.reduce=N,k.prototype.mulTo=G,k.prototype.sqrTo=z,n.prototype.copyTo=c,n.prototype.fromInt=h,n.prototype.fromString=f,n.prototype.clamp=d,n.prototype.dlShiftTo=x,n.prototype.drShiftTo=T,n.prototype.lShiftTo=w,n.prototype.rShiftTo=O,n.prototype.subTo=C,n.prototype.multiplyTo=E,n.prototype.squareTo=R,n.prototype.divRemTo=S,n.prototype.invDigit=I,n.prototype.isEven=V,n.prototype.exp=W,n.prototype.toString=y,n.prototype.negate=_,n.prototype.abs=g,n.prototype.compareTo=v,n.prototype.bitLength=b,n.prototype.mod=F,n.prototype.modPowInt=q,n.ZERO=l(0),n.ONE=l(1),It.prototype.convert=kt,It.prototype.revert=kt,It.prototype.mulTo=Lt,It.prototype.sqrTo=Ut,Vt.prototype.convert=Wt,Vt.prototype.revert=qt,Vt.prototype.reduce=Ht,Vt.prototype.mulTo=Xt,Vt.prototype.sqrTo=Yt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/se[se.length-1];n.prototype.chunkSize=J,n.prototype.toRadix=Q,n.prototype.fromRadix=$,n.prototype.fromNumber=tt,n.prototype.bitwiseTo=ot,n.prototype.changeBit=Tt,n.prototype.addTo=Et,n.prototype.dMultiply=jt,n.prototype.dAddOffset=Bt,n.prototype.multiplyLowerTo=zt,n.prototype.multiplyUpperTo=Gt,n.prototype.modInt=Kt,n.prototype.millerRabin=te,n.prototype.clone=H,n.prototype.intValue=Y,n.prototype.byteValue=X,n.prototype.shortValue=Z,n.prototype.signum=K,n.prototype.toByteArray=et,n.prototype.equals=rt,n.prototype.min=nt,n.prototype.max=it,n.prototype.and=st,n.prototype.or=pt,n.prototype.xor=ht,n.prototype.andNot=ft,n.prototype.not=dt,n.prototype.shiftLeft=yt,n.prototype.shiftRight=_t,n.prototype.getLowestSetBit=vt,n.prototype.bitCount=bt,n.prototype.testBit=xt,n.prototype.setBit=wt,n.prototype.clearBit=Ot,n.prototype.flipBit=Ct,n.prototype.add=Rt,n.prototype.subtract=St,n.prototype.multiply=Ft,n.prototype.divide=At,n.prototype.remainder=Mt,n.prototype.divideAndRemainder=Pt,n.prototype.modPow=Zt,n.prototype.modInverse=Qt,n.prototype.pow=Nt,n.prototype.gcd=Jt,n.prototype.isProbablePrime=$t,n.prototype.square=Dt,e.a=n},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&p.isObject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return p.isString(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=r(85),p=r(87);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=n;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),y=["'"].concat(d),_=["%","/","?",";","#"].concat(y),g=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=r(88);n.prototype.parse=function(t,e,r){if(!p.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(i);var s=t;if(s=s.trim(),!r&&1===t.split("#").length){var h=l.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?w.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,s=s.substr(f.length)}if(r||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===s.substr(0,2);!O||f&&x[f]||(s=s.substr(2),this.slashes=!0)}if(!x[f]&&(O||f&&!T[f])){for(var C=-1,E=0;E<g.length;E++){var R=s.indexOf(g[E]);-1!==R&&(-1===C||R<C)&&(C=R)}var S,F;F=-1===C?s.lastIndexOf("@"):s.lastIndexOf("@",C),-1!==F&&(S=s.slice(0,F),s=s.slice(F+1),this.auth=decodeURIComponent(S)),C=-1;for(var E=0;E<_.length;E++){var R=s.indexOf(_[E]);-1!==R&&(-1===C||R<C)&&(C=R)}-1===C&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var A=this.hostname.split(/\./),E=0,M=A.length;E<M;E++){var P=A[E];if(P&&!P.match(v)){for(var j="",B=0,I=P.length;B<I;B++)P.charCodeAt(B)>127?j+="x":j+=P[B];if(!j.match(v)){var k=A.slice(0,E),L=A.slice(E+1),U=P.match(m);U&&(k.push(U[1]),L.unshift(U[2])),L.length&&(s="/"+L.join(".")+s),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var N=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+N,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[d])for(var E=0,M=y.length;E<M;E++){var G=y[E];if(-1!==s.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),s=s.split(G).join(V)}}var W=s.indexOf("#");-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),e&&(this.query=w.parse(this.query)),s=s.slice(0,q)):e&&(this.search="",this.query={}),s&&(this.pathname=s),T[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",H=this.search||"";this.path=N+H}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(p.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(r[c]=t[c])}return T[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!T[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var f=h[l];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||x[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",_=r.search||"";r.path=y+_}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=v||g||r.host&&t.pathname,b=m,w=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],O=r.protocol&&!T[r.protocol];if(O&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),m=m&&(""===d[0]||""===w[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),r.search=t.search,r.query=t.query;else if(!p.isNullOrUndefined(t.search)){if(O){r.hostname=r.host=w.shift();var C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return r.search=t.search,r.query=t.query,p.isNull(r.pathname)&&p.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=w.slice(-1)[0],R=(r.host||t.host||w.length>1)&&("."===E||".."===E)||""===E,S=0,F=w.length;F>=0;F--)E=w[F],"."===E?w.splice(F,1):".."===E?(w.splice(F,1),S++):S&&(w.splice(F,1),S--);if(!m&&!b)for(;S--;S)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),R&&"/"!==w.join("/").substr(-1)&&w.push("");var D=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(O){r.hostname=r.host=D?"":w.length?w.shift():"";var C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return m=m||r.host&&w.length,m&&!D&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),p.isNull(r.pathname)&&p.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,n){var i;!function(o){function a(t){throw new RangeError(M[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function u(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(A,"."),n+s(t.split("."),e).join(".")}function p(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function c(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,r){var n=0;for(t=r?j(t/C):t>>1,t+=j(t/e);t>P*w>>1;n+=x)t=j(t/P);return j(n+(P+1)*t/(t+O))}function d(t){var e,r,n,i,o,s,u,p,l,d,y=[],_=t.length,g=0,v=R,m=E;for(r=t.lastIndexOf(S),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&a("not-basic"),y.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<_;){for(o=g,s=1,u=x;i>=_&&a("invalid-input"),p=h(t.charCodeAt(i++)),(p>=x||p>j((b-g)/s))&&a("overflow"),g+=p*s,l=u<=m?T:u>=m+w?w:u-m,!(p<l);u+=x)d=x-l,s>j(b/d)&&a("overflow"),s*=d;e=y.length+1,m=f(g-o,e,0==o),j(g/e)>b-v&&a("overflow"),v+=j(g/e),g%=e,y.splice(g++,0,v)}return c(y)}function y(t){var e,r,n,i,o,s,u,c,h,d,y,_,g,v,m,O=[];for(t=p(t),_=t.length,e=R,r=0,o=E,s=0;s<_;++s)(y=t[s])<128&&O.push(B(y));for(n=i=O.length,i&&O.push(S);n<_;){for(u=b,s=0;s<_;++s)(y=t[s])>=e&&y<u&&(u=y);for(g=n+1,u-e>j((b-r)/g)&&a("overflow"),r+=(u-e)*g,e=u,s=0;s<_;++s)if(y=t[s],y<e&&++r>b&&a("overflow"),y==e){for(c=r,h=x;d=h<=o?T:h>=o+w?w:h-o,!(c<d);h+=x)m=c-d,v=x-d,O.push(B(l(d+m%v,0))),c=j(m/v);O.push(B(l(c,0))),o=f(r,g,n==i),r=0,++n}++r,++e}return O.join("")}function _(t){return u(t,function(t){return F.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return u(t,function(t){return D.test(t)?"xn--"+y(t):t})}var v=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof n&&n);var m,b=2147483647,x=36,T=1,w=26,O=38,C=700,E=72,R=128,S="-",F=/^xn--/,D=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=x-T,j=Math.floor,B=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:p,encode:c},decode:d,encode:y,toASCII:g,toUnicode:_},void 0!==(i=function(){return m}.call(e,r,e,t))&&(t.exports=i)}()}).call(e,r(86)(t),r(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(89),e.encode=e.stringify=r(90)},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var p=t.length;u>0&&p>u&&(p=u);for(var c=0;c<p;++c){var h,l,f,d,y=t[c].replace(s,"%20"),_=y.indexOf(r);_>=0?(h=y.substr(0,_),l=y.substr(_+1)):(h=y,l=""),f=decodeURIComponent(h),d=decodeURIComponent(l),n(a,f)?i(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),function(a){var s=encodeURIComponent(i(a))+r;return o(t[a])?n(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function n(t){function e(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function r(t,e){return t>>>e|t<<32-e}function n(t,e){return t>>>e}function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function a(t){return r(t,2)^r(t,13)^r(t,22)}function s(t){return r(t,6)^r(t,11)^r(t,25)}function u(t){return r(t,7)^r(t,18)^n(t,3)}function p(t){return r(t,17)^r(t,19)^n(t,10)}var c=8,h=0;return t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t),function(t){for(var e=h?"0123456789ABCDEF":"0123456789abcdef",r="",n=0;n<4*t.length;n++)r+=e.charAt(t[n>>2]>>8*(3-n%4)+4&15)+e.charAt(t[n>>2]>>8*(3-n%4)&15);return r}(function(t,r){var n,c,h,l,f,d,y,_,g,v,m,b,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),w=new Array(64);t[r>>5]|=128<<24-r%32,t[15+(r+64>>9<<4)]=r;for(var g=0;g<t.length;g+=16){n=T[0],c=T[1],h=T[2],l=T[3],f=T[4],d=T[5],y=T[6],_=T[7];for(var v=0;v<64;v++)w[v]=v<16?t[v+g]:e(e(e(p(w[v-2]),w[v-7]),u(w[v-15])),w[v-16]),m=e(e(e(e(_,s(f)),i(f,d,y)),x[v]),w[v]),b=e(a(n),o(n,c,h)),_=y,y=d,d=f,f=e(l,m),l=h,h=c,c=n,n=e(m,b);T[0]=e(n,T[0]),T[1]=e(c,T[1]),T[2]=e(h,T[2]),T[3]=e(l,T[3]),T[4]=e(f,T[4]),T[5]=e(d,T[5]),T[6]=e(y,T[6]),T[7]=e(_,T[7])}return T}(function(t){for(var e=Array(),r=(1<<c)-1,n=0;n<t.length*c;n+=c)e[n>>5]|=(t.charCodeAt(n/c)&r)<<24-n%32;return e}(t),t.length*c))}r.d(e,"a",function(){return n})},function(t,e,r){"use strict";(function(t){r.d(e,"b",function(){return i}),r.d(e,"a",function(){return o});for(var n="undefined"==typeof window?t:window,i=n.requestAnimationFrame,o=n.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],u=0;u<s.length&&!i;++u)i=n[s[u]+"RequestAnimationFrame"],o=n[s[u]+"CancelAnimationFrame"]||n[s[u]+"CancelRequestAnimationFrame"];i&&(i=i.bind(n)),o&&(o=o.bind(n)),i||(i=function(t,e){var r=(new Date).getTime(),n=Math.max(0,16-(r-a)),i=setTimeout(function(){t(r+n)},n);return a=r+n,i}),o||(o=function(t){clearTimeout(t)})}).call(e,r(7))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r,i){n(this,t),this.x=e,this.y=r,this.z=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return t.prototype.set=function(t,e,r){return this.x=t,this.y=e,this.z=r,this},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t.prototype.clamp=function(e,r){var n=null!==e&&void 0!==e,i=null!==r&&void 0!==r;return e instanceof t||!n||(e=new t(e,e,e)),r instanceof t||!i||(r=new t(r,r,r)),n&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(r.x,this.x),this.y=Math.min(r.y,this.y),this.z=Math.min(r.z,this.z)),this},t.prototype.divide=function(e){return e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this},t.prototype.subtract=function(e){return e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this},t.prototype.multiply=function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this},t.prototype.add=function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this},t.prototype.equals=function(e){return e instanceof t?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},t.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},t.prototype.fract=function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this},t.prototype.toInt=function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.min=function(){return Math.min(Math.min(this.x,this.y),this.z)},t.prototype.max=function(){return Math.max(Math.max(this.x,this.y),this.z)},t.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},t.prototype.toString=function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"},t.prototype.roundDecimal=function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this},t.fromObject=function(e){return new t(e.x,e.y,e.z)},i(t,null,[{key:"NULL",get:function(){return new t(0,0,0)}}]),t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(10),s=r(9),u=r(11),p=r(46),c=a.Constants.OptionType,h=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype._getRotation=function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t},e.prototype._getFlipVertically=function(){return-1!==[5,7].indexOf(this.getTags().Orientation)},e.prototype._getFlipHorizontally=function(){return-1!==[2,4].indexOf(this.getTags().Orientation)},e.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}},e.prototype._render=function(t){var e=this._getFinalOptions(),r=e.rotation%360,n=r*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new u.a(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),s.a.resolve()},e.prototype.getNewDimensions=function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t},e}(p.a);h.identifier="exif-orientation",h.prototype.availableOptions={tags:{type:c.OBJECT,default:{}}},e.a=h},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(10),o=function(){function t(e){n(this,t),this._version=e,this._check()}return t.prototype._check=function(){var t=this;if("undefined"==typeof document)return i.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window.imglySDKVersionCallback=function(r){r.outdated&&i.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+r.version+".")};var r=document.createElement("script");r.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r)},t}();e.a=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(30),o=r(31),a=o.a.MARKERS,s=function(){function t(e){n(this,t),this._buf=e,this._stream=new i.a(this._buf),this._stream.setHead(0)}return t.prototype.isValid=function(){if(this._stream.setHead(0),this._stream.readInt16()!==a.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e},t.prototype.setUnitDensity=function(t){this._stream.setHead(11),this._stream.writeInt8(t)},t.prototype.setDensityX=function(t){this._stream.setHead(12),this._stream.writeInt16(t)},t.prototype.setDensityY=function(t){this._stream.setHead(13),this._stream.writeInt16(t)},t.prototype.getUnitDensity=function(){return this._stream.setHead(11),this._stream.readInt8()},t.prototype.getDensityX=function(){return this._stream.setHead(12),this._stream.readInt16()},t.prototype.getDensityY=function(){return this._stream.setHead(14),this._stream.readInt16()},t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(30),o=r(31),a=r(5),s=a.a.invariant,u=o.a.MARKERS,p=o.a.EXIF_TAGS,c=function(){function t(e){n(this,t),this._buf=e,this._stream=new i.a(this._buf),this._stream.setHead(0),this._parse()}return t.prototype.isValid=function(){return this._stream.setHead(0),this._stream.readInt16()===u.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))},t.prototype._parse=function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead(),e=!1,r=this._stream.readInt16();18761===r?e=!1:19789===r?e=!0:s(!1,"Invalid TIFF data: No endian type found"),s(42===this._stream.readInt16(!e),"Invalid TIFF data: No 0x002A");var n=this._stream.readInt32(!e);s(n>=8,"Invalid TIFF data: First IFD offset < 8");var i=t+n,o=this._readTags(this._stream,t,i,e);this._tags=o.tags,this._tagData=o.tagData}},t.prototype.getTags=function(){return this._tags},t.prototype.getTagData=function(){return this._tagData},t.prototype.setOrientation=function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(t)}},t.prototype._readTags=function(t,e,r,n){t.setHead(r);for(var i=t.readInt16(!n),o={},a=[],s=0;s<i;s++){var u=r+12*s+2;t.setHead(u);var c=t.readInt16(!n),h=void 0,l=void 0,f=void 0;if(p[c]){c=p[c],h=t.readInt16(!n),l=t.readInt32(!n),f=t.readInt32(!n)+e;var d=null;switch(h){case 1:case 7:if(1===l)d=t.readInt8(!n);else{d=[];for(var y=0;y<l;y++)d.push(t.readInt8(!n))}break;case 2:t.setHead(l>4?f:u+8),d=t.readString(l);break;case 3:if(t.setHead(l>2?f:u+8),1===l)d=t.readInt16(!n);else{d=[];for(var _=0;_<l;_++)d.push(t.readInt16(!n))}break;case 4:case 9:if(t.setHead(l>1?f:u+8),1===l)d=t.readInt32(!n);else{d=[];for(var g=0;g<l;g++)d.push(t.readInt32(!n))}break;case 5:case 10:if(t.setHead(f),1===l){d=t.readInt32(!n)/t.readInt32(!n)}else{d=[];for(var v=0;v<l;v++){var m=t.readInt32(!n),b=t.readInt32(!n),x=m/b;d.push(x)}}}o[c]=d,a[c]={value:d,numValues:l,entryOffset:u,valueOffset:f,type:h}}}return{tags:o,tagData:a}},t.prototype.getBuffer=function(){return this._buf},t}();e.a=c},function(t,e,r){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(8),s=r(18),u=r(5),p=r(29),c=r(17),h=function(e){function r(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,r);var a=i(this,e.call(this,o));return a._sdk=t,a}return o(r,e),r.prototype.export=function(){var e=this,r=this._sdk.getRenderer(),n=this._options,i=n.renderType,o=n.imageFormat,s=n.quality;return this.validateSettings().then(function(){return e._prepareSDK()}).then(function(n){var u=r.getCanvas();r.isOfType(a.RendererType.WEBGL)&&(u=e._createCanvasFromTexture(n));var c=void 0;if(i===a.RenderType.IMAGE||i===a.RenderType.DATAURL){c="undefined"==typeof window?u.toDataURL(o):u.toDataURL(o,s);var h=e._sdk.getImage(),l=p.a.isJPEG(h.src),f=p.a.isJPEG(c);if(l&&f){var d=e._sdk.getExif();d&&(c=d.restoreSegments(c))}}if(i===a.RenderType.IMAGE){var y=void 0;return y=new Image,y.src=c,y}if(i===a.RenderType.DATAURL)return c;if(i===a.RenderType.BUFFER)switch(o){case a.ImageFormat.JPEG:return new Promise(function(e,r){var n=u.createJPEGStream({bufsize:2048,quality:100*s|0}),i=[];n.on("data",function(t){return i.push(t)}),n.on("end",function(){return e(t.concat(i))})});case a.ImageFormat.PNG:return Promise.resolve(u.toBuffer());default:return Promise.reject(new Error("Invalid ImageFormat: "+o))}else{if(i===a.RenderType.MSBLOB)return u.msToBlob();if(i===a.RenderType.BLOB)return new Promise(function(t,e){u.toBlob(function(e){t(e)},o,s)})}}).then(function(t){return e._restoreSDK().then(function(){return t})})},r.prototype._prepareSDK=function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(a.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var r=this._sdk.getOperationsStack();return r.forEach(function(t){t.disposeRenderTextures()}),r.disableCache(),this._sdk.render()},r.prototype._restoreSDK=function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(a.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()},r.prototype._createCanvasFromTexture=function(t){var e=this._sdk.getRenderer(),r=this._sdk.getFinalDimensions(),n=this._sdk.getRenderer().getContext(),i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i);var o=t.getBaseTexture().getGLTextureForRenderer(e);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var a=new Uint8Array(r.x*r.y*4);n.readPixels(0,0,r.x,r.y,n.RGBA,n.UNSIGNED_BYTE,a);var p=this._checkPixelsForTransparency(a),c=void 0;if(p){var h=new s.a.Sprite(t);h.setFilters([new s.a.Filters.UnpremultiplyFilter]);var l=new s.a.Container;l.addChild(h),c=new s.a.RenderTexture(e,r.x,r.y),c.render(l);var f=c.getBaseTexture().getGLTextureForRenderer(e);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,f,0),n.readPixels(0,0,r.x,r.y,n.RGBA,n.UNSIGNED_BYTE,a),e.setRenderTarget(),c.dispose()}var d=u.a.createCanvas();d.width=r.x,d.height=r.y;var y=d.getContext("2d"),_=y.createImageData(r.x,r.y);return _.data.set(a),y.putImageData(_,0,0),n.deleteFramebuffer(i),d},r.prototype._checkPixelsForTransparency=function(t){for(var e=this._sdk.getFinalDimensions(),r=e.x*e.y*4,n=3;n<r;n+=4)if(255!==t[n])return!0;return!1},r}(c.a);h.prototype.availableOptions={renderType:{type:a.OptionType.STRING,available:u.a.values(a.RenderType),default:a.RenderType.IMAGE},imageFormat:{type:a.OptionType.STRING,available:u.a.values(a.ImageFormat),default:a.ImageFormat.PNG},quality:{type:a.OptionType.NUMBER,default:.8}},e.a=h}).call(e,r(99).Buffer)},function(t,e,r){"use strict";(function(t){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return a(this,t,e,r)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?l(t,e,r,n):"string"==typeof e?c(t,e,r):f(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function p(t,e){if(s(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,r);t=i(t,n);var a=t.write(e,r);return a!==n&&(t=t.slice(0,a)),t}function h(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function l(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=h(t,e),t}function f(t,e){if(o.isBuffer(e)){var r=0|d(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Z(e.length)?i(t,0):h(t,e);if("Buffer"===e.type&&Q(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function _(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(n)return W(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return A(this,e,r);case"base64":return R(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}var p;if(i){var c=-1;for(p=r;p<s;p++)if(o(t,p)===o(e,-1===c?0:p-c)){if(-1===c&&(c=p),p-c+1===u)return c*a}else-1!==c&&(p-=p-c),c=-1}else for(r+u>s&&(r=s-u),p=r;p>=0;p--){for(var h=!0,l=0;l<u;l++)if(o(t,p+l)!==o(e,l)){h=!1;break}if(h)return p}return-1}function x(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function T(t,e,r,n){return X(W(e,t.length-r),t,r,n)}function w(t,e,r,n){return X(q(e),t,r,n)}function O(t,e,r,n){return w(t,e,r,n)}function C(t,e,r,n){return X(Y(e),t,r,n)}function E(t,e,r,n){return X(H(e,t.length-r),t,r,n)}function R(t,e,r){return 0===e&&r===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,p,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128==(192&u)&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=t[i+1],p=t[i+2],128==(192&u)&&128==(192&p)&&(h=(15&o)<<12|(63&u)<<6|63&p)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=t[i+1],p=t[i+2],c=t[i+3],128==(192&u)&&128==(192&p)&&128==(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&p)<<6|63&c)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return F(n)}function F(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function M(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=V(t[o]);return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function j(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||L(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,i){return i||L(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function z(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function H(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Y(t){return J.toByteArray(z(t))}function X(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Z(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var J=r(100),K=r(101),Q=r(102);e.Buffer=o,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,r){return a(null,t,e,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,r){return u(null,t,e,r)},o.allocUnsafe=function(t){return p(null,t)},o.allocUnsafeSlow=function(t){return p(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,s=r-e,u=Math.min(a,s),p=this.slice(n,i),c=t.slice(e,r),h=0;h<u;++h)if(p[h]!==c[h]){a=p[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,t,e,r);case"utf8":case"utf-8":return T(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return O(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){B(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){B(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,a=n-r;if(this===t&&r<e&&e<n)for(i=a-1;i>=0;--i)t[i+e]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=o.isBuffer(t)?t:W(new o(t,n).toString()),u=s.length;for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(7))},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function o(t){var e,r,i,o,a,s,u=t.length;a=n(t),s=new h(3*u/4-a),i=a>0?u-4:u;var p=0;for(e=0,r=0;e<i;e+=4,r+=3)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[p++]=o>>16&255,s[p++]=o>>8&255,s[p++]=255&o;return 2===a?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[p++]=255&o):1===a&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[p++]=o>>8&255,s[p++]=255&o),s}function a(t){return p[t>>18&63]+p[t>>12&63]+p[t>>6&63]+p[63&t]}function s(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(n));return i.join("")}function u(t){for(var e,r=t.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(s(t,a,a+16383>u?u:a+16383));return 1===n?(e=t[r-1],i+=p[e>>2],i+=p[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=p[e>>10],i+=p[e>>4&63],i+=p[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=u;for(var p=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=l.length;f<d;++f)p[f]=l[f],c[l.charCodeAt(f)]=f;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,p=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,f=t[e+h];for(h+=l,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=l,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=l,c-=8);if(0===o)o=1-p;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=p}return(f?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,p=8*o-i-1,c=(1<<p)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,p+=i;p>0;t[r+f]=255&a,f+=d,a/=256,p-=8);t[r+f-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){n(this,t)}return t.current=function(){return"production"},t.isTest=function(){return!1},t.isDevelopment=function(){return!1},t.isProduction=function(){return!0},t}();e.a=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(105);r.d(e,"ImageLoader",function(){return n.a});var i=r(43);r.d(e,"JSONLoader",function(){return i.a})},function(t,e,r){"use strict";var n=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this;return function(){if(t.substr(0,5),!0)return Promise.resolve([t,t])}().then(function(t){var r=n(t,2),i=r[0],o=r[1];return e._createAndLoadImage(i,o)})},_createAndLoadImage:function(t,e){return new Promise(function(t,r){var n=new window.Image;n.addEventListener("load",function(){t(n)}),n.addEventListener("error",function(){r(new Error("Failed to load image at "+e))}),n.crossOrigin="Anonymous",n.src=e})},loadXHR:function(t,e){return new Promise(function(r,n){var i=void 0;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){r(i)},i.onerror=function(t){n(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?r(i):n(new Error("HTTP Status "+i.status)))}),i.open("GET",t,!0),i.send()})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r.n(n),o=r(107),a=r(111),s=r(113),u=r(176),p=r(177),c=r(180),h=r(183),l=r(184),f=r(185),d=r(188),y=r(194),_=r(199),g=r(201),v=[o.a,a.a,s.a,u.a,p.a,c.a,h.a,l.a,f.a,d.a,y.a,_.a,g.a];i.a.AllOperations=v,e.default=v},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(50),p=r(109),c=a.Math.ColorMatrix,h=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._clarityFilter=new p.a,s._filter=new u.a,s._sprite.setFilters([s._clarityFilter,s._filter]),s}return o(e,t),e.prototype._render=function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;var r=new c;r.multiply(c.createSaturationMatrix(-.3*this._options.clarity+1)),r.multiply(c.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:r,colorOffset:r.getOffsets()});var n=new c;return n.multiply(c.createExposureMatrix(this._options.exposure)),n.multiply(c.createSaturationMatrix(this._options.saturation+1)),n.multiply(c.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),n.multiply(c.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:n,colorOffset:n.getOffsets()}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose()},e}(a.Operation);h.identifier="adjustments",h.prototype.availableOptions={brightness:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:a.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:a.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},s.a.Operations.AdjustmentsOperation=h,e.a=h},function(t,e){t.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  color.rgb *= color.a; // Do premultiplie alpha\n\n  gl_FragColor = color;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),a.Math.Vector2),u=a.Math.ColorMatrix,p=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(110),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],r.getContext()),i=e.getCanvas(),o=e.getContext(),s=this._options.clarity,u=this._options.colorMatrix,p=new a.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),c=i.width,h=i.height,l=o.getImageData(0,0,c,h),f=n.createImageData(c,h);this.canvasShader(l,f,s,u,p),n.putImageData(f,0,0)},e.prototype.canvasShader=function(t,e,r,n,i){for(var o=function(t,e,r){return Math.min(Math.max(t,e),r)},s=function(t,e,r){var n=o((r-t)/(e-t),0,1);return n*n*(3-2*n)},u=4*t.width,p=t.data.length,c=p-1,h=t.data,l=e.data,f=new a.Color,d=function(t){return t=t<0?0:t,t=t>c?c:t,h[t]},y=0;y<p;y+=4){var _=d(y+0),g=d(y+1),v=d(y+2),m=d(y+3),b=(_+d(y-4-u+0)+d(y-4+0)+d(y-4+u+0)+d(y-u+0)+d(y+u+0)+d(y+4-u+0)+d(y+4+0)+d(y+4+u))/2295,x=(g+d(y-4-u+1)+d(y-4+1)+d(y-4+u+1)+d(y-u+1)+d(y+u+1)+d(y+4-u+1)+d(y+4+1)+d(y+4+u+1))/2295,T=(v+d(y-4-u+2)+d(y-4+2)+d(y-4+u+2)+d(y-u+2)+d(y+u+2)+d(y+4-u+2)+d(y+4+2)+d(y+4+u+2))/2295,w=(m+d(y-4-u+3)+d(y-4+3)+d(y-4+u+3)+d(y-u+3)+d(y+u+3)+d(y+4-u+3)+d(y+4+3)+d(y+4+u+3))/2295;_/=255,g/=255,v/=255,m/=255;var O=o(.3*_+.59*g+.1*v,.111111,.999999),C=Math.min(s(1-O,0,.11),s(O,0,.11)),E=3.7*r*C,R=Math.pow(2,.27*r*C),S=o(_+o((_-b)*E,0,10),0,1)*R,F=o(g+o((g-x)*E,0,10),0,1)*R,D=o(v+o((v-T)*E,0,10),0,1)*R,A=o(m+o((m-w)*E,0,10),0,1);f.set(S,F,D,A);var M=n.apply(f).add(i);l[y+0]=255*M.r,l[y+1]=255*M.g,l[y+2]=255*M.b,l[y+3]=255*M.a}},e}(a.Engine.Filter);p.prototype.availableOptions={clarity:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT},pixelDimension:{type:a.OptionType.VECTOR2,default:new s(100,100),uniformType:a.UniformType.FLOAT2},colorMatrix:{type:a.OptionType.COLOR_MATRIX,default:new u,uniformType:a.UniformType.MAT4},colorOffset:{type:a.OptionType.ARRAY,default:[],uniformType:a.UniformType.FLOAT4}},e.a=p},function(t,e){t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n\n    vec4 mergedColor = color;\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor /= 9.0;\n\n    color.rgb /= max(color.a, EPSILON);       // Revert premultiplied alpha\n    mergedColor.rgb /= max(mergedColor.a, EPSILON); // Revert premultiplied alpha\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0);\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n\n\n    color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n    color.rgb *= color.a; // Do premultiplie alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(51),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._horizontalFilter=new u.a,s._verticalFilter=new u.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new p(.5,.5)),s._verticalFilter.setDelta(new p(-.5,.5)),s._filter=new u.a,s}return o(e,t),e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options.blurRadius,i={blurRadius:n*r,texSize:e};return this._horizontalFilter.set(i),this._verticalFilter.set(i),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options.blurRadius,r=t.getDimensions();return this._filter.set({blurRadius:e,texSize:r}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.transform=function(t){var e=this.getBlurRadius(),r=t.applyToRelativeSize(e);this.set({blurRadius:r},!1)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);c.identifier="blur",c.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.BlurOperation=c,e.a=c},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(52),p=r(2),c=r(144),h=r(1),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype._render=function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)},e.prototype.render=function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?a.Promise.resolve(e):t.prototype.render.call(this,e)},e.prototype.setDirtyForRenderer=function(e,r){t.prototype.setDirtyForRenderer.call(this,e,r),this._selectedFilter.setDirtyForRenderer(e,r)},e.prototype.disposeRenderTextures=function(){t.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose()},e.prototype.restoreSnapshot=function(t){var e=l({},t);if(delete e.filter,t.filter){var r=t.filter.constructor;"3d-lut"===r.identifier?this.setFilter(new r({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):this.setFilter(new r)}this.set(e)},e}(a.Operation);f.identifier="filter",f.prototype.availableOptions={identifier:{type:a.OptionType.STRING,default:"identity"},intensity:{type:a.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:a.OptionType.OBJECT,default:new u.a,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},f.FilterPrimitives=p,f.Filters=c,f.Filter=h.a,s.a.Operations.FilterOperation=f,e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(115),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=r.getContext(),o=this._options.filteredCanvas;i.save(),i.drawImage(n,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()},e}(a.Engine.Filter));s.prototype.availableOptions={filteredImage:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},filteredCanvas:{type:a.OptionType.OBJECT,default:null},intensity:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new a.Engine.Container,this._sprite=new a.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new s}return t.prototype.push=function(t){this._stack.push(t)},t.prototype.clear=function(){this._stack=[]},t.prototype.render=function(t,e,r){if(0===this._stack.length)return a.Promise.resolve();var n=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[n.id];if(!i){var o=t.getSprite().getTexture().getFrame();i=new a.Engine.RenderTexture(t.getRenderer(),o.width,o.height),this._renderTextures[n.id]=i}var s=r.getDimensions();i.resizeTo(s);var u=this.isDirtyForRenderer(n);if(u){this._stack.forEach(function(e){e.update(t)});var p=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(p),i.render(this._container),this.setDirtyForRenderer(!1,n)}if(this._blendFilter.setIntensity(this._intensity),n.isOfType(a.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(n.isOfType(a.RendererType.WEBGL)){var c=i.getBaseTexture();c.setGLUnit(this._blendFilter.getFilteredImage()),n.updateTexture(c,!1)}return this._sprite.setFilters([this._blendFilter]),r.clear(a.Color.TRANSPARENT),r.render(this._container),u&&this.disposeRenderTextures(),a.Promise.resolve(r)},t.prototype.setIntensity=function(t){this._intensity=t},t.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},t.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},t.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},t.prototype.disposeRenderTextures=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]},t.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},t}();e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(117),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.brightness;if(0!==s){s*=255;for(var u=0;u<n.width*n.height;u++){var p=4*u;a.data[p]+=s,a.data[p+1]+=s,a.data[p+2]+=s}o.putImageData(a,0,0)}},e}(a.Engine.Filter);u.prototype.availableOptions={brightness:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(119),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.contrast;if(1!==s){for(var u=0;u<n.width*n.height;u++){var p=4*u;a.data[p]=(a.data[p]-127)*s+127,a.data[p+1]=(a.data[p+1]-127)*s+127,a.data[p+2]=(a.data[p+2]-127)*s+127}o.putImageData(a,0,0)}},e}(a.Engine.Filter);u.prototype.availableOptions={contrast:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setContrast(this._options.contrast)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=a.Math.ColorMatrix,p=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(121),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),s=i.getImageData(0,0,n.width,n.height),u=this._options.colorMatrix,p=new a.Color(0,0,0,0),c=0;c<n.width*n.height;c++){var h=4*c;p.r=s.data[h]/255,p.g=s.data[h+1]/255,p.b=s.data[h+2]/255,p=u.apply(p),s.data[h]=255*p.r,s.data[h+1]=255*p.g,s.data[h+2]=255*p.b}o.putImageData(s,0,0)},e}(a.Engine.Filter);p.prototype.availableOptions={colorMatrix:{type:a.OptionType.COLOR_MATRIX,default:new u,uniformType:a.UniformType.MAT4},colorMatrixOffset:{type:a.OptionType.ARRAY,default:[],uniformType:a.UniformType.FLOAT4}};var c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new p,s}return o(e,t),e.prototype.update=function(){this._filter.setColorMatrix(this._options.colorMatrix)},e}(s.a);c.prototype.availableOptions=p.prototype.availableOptions,e.a=c},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(123),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=[.3,.59,.11],u=this._options.desaturation,p=0;p<n.width*n.height;p++){var c=4*p,h=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*h-a.data[c])*u,a.data[c+1]+=(255*h-a.data[c+1])*u,a.data[c+2]+=(255*h-a.data[c+2])*u}o.putImageData(a,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={desaturation:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(125),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.gamma,u=new Float32Array(256),p=0;p<256;p++)u[p]=255*Math.pow(p/255,s.r);for(var c=new Float32Array(256),h=0;h<256;h++)c[h]=255*Math.pow(h/255,s.g);for(var l=new Float32Array(256),f=0;f<256;f++)l[f]=255*Math.pow(f/255,s.b);for(var d=0;d<n.width*n.height;d++){var y=4*d;a.data[y]=u[a.data[y]],a.data[y+1]=c[a.data[y+1]],a.data[y+2]=l[a.data[y+2]]}o.putImageData(a,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={gamma:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setGamma(this._options.gamma)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(127),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n,i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),o=e.getContext(),a=r.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options.color,p=0;p<i.width;p++)for(var c=0;c<i.height;c++){var h=4*(i.width*c+p),l=p/i.width,f=c/i.height,d=(l-.5)/.75,y=(f-.5)/.75,_=d*d,g=y*y;n=1-(_+g),n=Math.min(Math.max(n,.1),1),s.data[h]=s.data[h]*(n*u.r),s.data[h+1]=s.data[h+1]*(n*u.g),s.data[h+2]=s.data[h+2]*(n*u.b),s.data[h+3]=255}a.putImageData(s,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={color:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(129),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var p=4*(n.width*u+s);a.data[p+2]=.33*a.data[p+1],a.data[p]=.6*a.data[p],a.data[p+2]+=.33*a.data[p],a.data[p+1]=.7*a.data[p+1],a.data[p+3]=255}o.putImageData(a,0,0)},e}(a.Engine.Filter),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e}(s.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(131),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var p=4*(n.width*u+s),c=.2125*a.data[p]+.7154*a.data[p+1]+.0721*a.data[p+2];a.data[p]=c,a.data[p+1]=c,a.data[p+2]=c}o.putImageData(a,0,0)},e}(a.Engine.Filter),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e}(s.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=a.Math.Vector2,p=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._precomputeQuads(),o._fragmentSource=r(134),o}return o(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,r=new u;r.y=.125*(0|e)|0,r.x=(0|e)-8*r.y,this._quads.push(r)}},e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a),p=s.getContext("2d"),c=i.getImageData(0,0,n.width,n.height),h=p.getImageData(0,0,a.width,a.height),l=new u,f=0;f<n.width*n.height*4;f+=4){var d=c.data[f],y=c.data[f+1],_=c.data[f+2],g=c.data[f+3]/255,v=this._quads[_];l.x=64*v.x,l.y=64*v.y,l.x+=Math.floor(d/4),l.y+=Math.floor(y/4);var m=4*(a.width*l.y+l.x)|0,b=h.data[m];b=d*(1-g)+b*g;var x=h.data[m+1];x=y*(1-g)+x*g;var T=h.data[m+2];T=_*(1-g)+T*g,c.data[f]=b,c.data[f+1]=x,c.data[f+2]=T}o.putImageData(c,0,0)},e.prototype._createImageCanvas=function(t){var e=a.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(a.Engine.Filter);p.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:3,uniformType:a.UniformType.INT},lookupTableImage:{type:a.OptionType.IMAGE,uniformType:null}};var c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new p,s._textures={},s}return o(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),r=e.id;this._textures[r]||(this._textures[r]=new a.Engine.BaseTexture);var n=this._textures[r];n.setSource(this._options.image),n.setGLUnit(3),e.updateTexture(n)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(s.a);c.prototype.availableOptions={image:{type:a.OptionType.IMAGE}},e.a=c},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(136),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.saturation,u=0;u<n.width;u++)for(var p=0;p<n.height;p++){var c=4*(n.width*p+u),h=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=h*(1-s)+a.data[c]*s,a.data[c+1]=h*(1-s)+a.data[c+1]*s,a.data[c+2]=h*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={saturation:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(138),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var p=4*(n.width*u+s);a.data[p]=Math.max(255*this._options.color.r,a.data[p]),a.data[p+1]=Math.max(255*this._options.color.g,a.data[p+1]),a.data[p+2]=Math.max(255*this._options.color.b,a.data[p+2])}o.putImageData(a,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={color:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(53)),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._options.rgbControlPoints||(s._options.rgbControlPoints={red:s._options.controlPoints,green:s._options.controlPoints,blue:s._options.controlPoints}),s._updateLookupTable(),s}return o(e,t),e.prototype._updateLookupTable=function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,r)},e.prototype._buildLookupTable=function(t,e,r){for(var n=[],i=0;i<256;i++)n.push(Math.min(Math.max(i+t[i],0),255)),n.push(Math.min(Math.max(i+e[i],0),255)),n.push(Math.min(Math.max(i+r[i],0),255)),n.push(255);return n},e.prototype._calculateSplineCurve=function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,r=this._getSplineCurve(t),n=r[0];if(n[0]>0)for(e=0;e<n[0];e++)r.unshift([0,0]);var i=[];for(e=0;e<r.length;e++){var o=r[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i},e.prototype._getSplineCurve=function(t){var e,r=this._secondDerivative(t),n=r.length,i=[];for(e=0;e<n;e++)i[e]=r[e];var o=[];for(e=0;e<n-1;e++)for(var a=t[e],s=t[e+1],u=a[0];u<s[0];u++){var p=(u-a[0])/(s[0]-a[0]),c=1-p,h=p,l=s[0]-a[0],f=c*a[1]+h*s[1]+l*l/6*((c*c*c-c)*i[e]+(h*h*h-h)*i[e+1]);f>255?f=255:f<0&&(f=0),o.push([u,f])}return 255===o.length&&o.push(t[t.length-1]),o},e.prototype._secondDerivative=function(t){var e=t.length;if(e<=0||1===e)return null;var r,n,i=[],o=[];for(i[0]=[0,1,0],r=1;r<e-1;r++){var a=t[r-1],s=t[r],u=t[r+1];i[r]=i[r]||[],i[r][0]=(s[0]-a[0])/6,i[r][1]=(u[0]-a[0])/3,i[r][2]=(u[0]-s[0])/6,o[r]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],r=1;r<e;r++)n=i[1][0]/i[r-1][1],i[r][1]-=n*i[r-1][2],i[r][0]=0,o[r]-=n*o[r-1];for(r=e-2;r>0;r--)n=i[r][2]/i[r+1][1],i[r][1]-=n*i[r+1][0],i[r][2]=0,o[r]-=n*o[r+1];var p=[];for(r=0;r<e;r++)p[r]=o[r]/i[r][1];return p},e}(s.a);u.prototype.availableOptions={rgbControlPoints:{type:a.OptionType.OBJECT},controlPoints:{type:a.OptionType.ARRAY,default:[]},textureGLUnit:{type:a.OptionType.NUMBER,default:1}},e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(141),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var p=4*(n.width*u+s),c=a.data[p]/255*.3+a.data[p+1]/255*.3+a.data[p+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[p]=c,a.data[p+1]=c,a.data[p+2]=c}o.putImageData(a,0,0)},e}(a.Engine.Filter),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new u,s}return o(e,t),e}(s.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(4)),u=a.Math.Vector2,p=a.Math.Vector3,c=function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._precomputeQuads(),o._fragmentSource=r(143),o}return o(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,r=new u;r.y=.125*(0|e)|0,r.x=(0|e)-8*r.y,this._quads.push(r)}},e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options),i=n.resolution,o=n.horizontalTileCount,s=n.verticalTileCount,c=e.getCanvas(),h=e.getContext(),l=r.getContext(),f=this._options.lookupTableImage,d=this._createImageCanvas(f),y=d.getContext("2d"),_=h.getImageData(0,0,c.width,c.height),g=y.getImageData(0,0,f.width,f.height),v=new p(i/o-1|0,i/s-1|0,o*s-1|0),m=new a.Color,b=new a.Color,x=new a.Color,T=new a.Color,w=new a.Color,O=new a.Color,C=new a.Color,E=new a.Color,R=new u,S=new u,F=function(t,e,r,n){t.r=e.r*(1-n)+r.r*n,t.g=e.g*(1-n)+r.g*n,t.b=e.b*(1-n)+r.b*n},D=function(t,e,r){e=.5+e|0,r=.5+r|0;var n=4*(r*i+e);t.r=g.data[n]/255,t.g=g.data[n+1]/255,t.b=g.data[n+2]/255,t.a=g.data[n+3]/255},A=new a.Color,M=new a.Color,P=function(t,e,r,n,i,o,a){F(A,e,n,o),F(M,r,i,o),F(t,A,M,a)},j=new u(i,i).divide(o,s).floor(),B=0;B<c.width*c.height*4;B+=4){m.set(_.data[B]/255,_.data[B+1]/255,_.data[B+2]/255,_.data[B+3]/255);var I=new p(m.r*v.x,m.g*v.y,m.b*v.z),k=I.clone().floor().toInt(),L=I.clone().ceil().toInt(),U=I.clone().fract();R.y=k.z/o|0,R.x=k.z-R.y*o|0,S.y=L.z/o|0,S.x=L.z-S.y*o|0,R.multiply(j),S.multiply(j),D(w,R.x+k.x,R.y+k.y),D(O,R.x+k.x,R.y+L.y),D(C,R.x+L.x,R.y+k.y),D(E,R.x+L.x,R.y+L.y),P(x,w,O,C,E,U.x,U.y),D(w,S.x+k.x,S.y+k.y),D(O,S.x+k.x,S.y+L.y),D(C,S.x+L.x,S.y+k.y),D(E,S.x+L.x,S.y+L.y),P(T,w,O,C,E,U.x,U.y),F(b,x,T,U.z),_.data[B]=Math.ceil(255*b.r),_.data[B+1]=Math.ceil(255*b.g),_.data[B+2]=Math.ceil(255*b.b)}l.putImageData(_,0,0)},e.prototype._createImageCanvas=function(t){var e=a.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(a.Engine.Filter);c.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:3,uniformType:a.UniformType.INT},lookupTableImage:{type:a.OptionType.IMAGE,uniformType:null},resolution:{type:a.OptionType.NUMBER,default:128,uniformType:a.UniformType.FLOAT},horizontalTileCount:{type:a.OptionType.NUMBER,default:5,uniformType:a.UniformType.FLOAT},verticalTileCount:{type:a.OptionType.NUMBER,default:5,uniformType:a.UniformType.FLOAT}};var h=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._filter=new c,s._textures={},s}return o(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var r=this._options,n=r.resolution,i=r.verticalTileCount,o=r.horizontalTileCount;this._filter.set({resolution:n,verticalTileCount:i,horizontalTileCount:o})},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),r=e.id;this._textures[r]||(this._textures[r]=new a.Engine.BaseTexture);var n=this._textures[r];n.setSource(this._options.image),n.setGLUnit(3),n.setMinFilter(a.Engine.BaseTexture.NearestFilter),e.updateTexture(n)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(s.a);h.prototype.availableOptions={image:{type:a.OptionType.IMAGE},resolution:{type:a.OptionType.NUMBER,default:128},horizontalTileCount:{type:a.OptionType.NUMBER,default:5},verticalTileCount:{type:a.OptionType.NUMBER,default:5}},e.a=h},function(t,e){t.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(52);r.d(e,"IdentityFilter",function(){return n.a});var i=r(145);r.d(e,"A15Filter",function(){return i.a});var o=r(146);r.d(e,"BreezeFilter",function(){return o.a});var a=r(147);r.d(e,"BWFilter",function(){return a.a});var s=r(148);r.d(e,"BWHardFilter",function(){return s.a});var u=r(149);r.d(e,"CelsiusFilter",function(){return u.a});var p=r(150);r.d(e,"ChestFilter",function(){return p.a});var c=r(151);r.d(e,"FixieFilter",function(){return c.a});var h=r(152);r.d(e,"FoodFilter",function(){return h.a});var l=r(153);r.d(e,"FridgeFilter",function(){return l.a});var f=r(154);r.d(e,"FrontFilter",function(){return f.a});var d=r(155);r.d(e,"GlamFilter",function(){return d.a});var y=r(156);r.d(e,"GobblinFilter",function(){return y.a});var _=r(157);r.d(e,"K1Filter",function(){return _.a});var g=r(158);r.d(e,"K2Filter",function(){return g.a});var v=r(159);r.d(e,"K6Filter",function(){return v.a});var m=r(160);r.d(e,"KDynamicFilter",function(){return m.a});var b=r(161);r.d(e,"LeninFilter",function(){return b.a});var x=r(162);r.d(e,"LomoFilter",function(){return x.a});var T=r(163);r.d(e,"MellowFilter",function(){return T.a});var w=r(164);r.d(e,"MetalFilter",function(){return w.a});var O=r(165);r.d(e,"MorningFilter",function(){return O.a});var C=r(166);r.d(e,"OrchidFilter",function(){return C.a});var E=r(167);r.d(e,"PolaFilter",function(){return E.a});var R=r(168);r.d(e,"Pola669Filter",function(){return R.a});var S=r(169);r.d(e,"QuoziFilter",function(){return S.a});var F=r(170);r.d(e,"SemiredFilter",function(){return F.a});var D=r(171);r.d(e,"SunnyFilter",function(){return D.a});var A=r(172);r.d(e,"TexasFilter",function(){return A.a});var M=r(173);r.d(e,"X400Filter",function(){return M.a});var P=r(174);r.d(e,"LUTFilter",function(){return P.a});var j=r(175);r.d(e,"ThreeDLUTFilter",function(){return j.a})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Contrast({contrast:.63})),u._stack.push(new s.Brightness({brightness:.12})),u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),u}return o(e,t),e}(a.a);u.identifier="a15",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Desaturation({desaturation:.5})),u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),u}return o(e,t),e}(a.a);u.identifier="breeze",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Grayscale),u}return o(e,t),e}(a.a);u.identifier="bw",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Grayscale),u._stack.push(new s.Contrast({contrast:1.5})),u}return o(e,t),e}(a.a);u.identifier="bwhard",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),u}return o(e,t),e}(a.a);u.identifier="celsius",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),u}return o(e,t),e}(a.a);u.identifier="chest",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),u}return o(e,t),e}(a.a);u.identifier="fixie",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Saturation({saturation:1.35})),u._stack.push(new s.Contrast({contrast:1.1})),u}return o(e,t),e}(a.a);u.identifier="food",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),u}return o(e,t),e}(a.a);u.identifier="fridge",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),u}return o(e,t),e}(a.a);u.identifier="front",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Contrast({contrast:1.1})),u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),u}return o(e,t),e}(a.a);u.identifier="glam",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Gobblin),u}return o(e,t),e}(a.a);u.identifier="gobblin",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),u._stack.push(new s.Saturation({saturation:.9})),u}return o(e,t),e}(a.a);u.identifier="k1",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(1)),u=r(2),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var p=i(this,t.call.apply(t,[this].concat(o)));return p._stack.push(new u.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),p._stack.push(new u.SoftColorOverlay({color:new a.Color(40/255,40/255,40/255)})),p}return o(e,t),e}(s.a);p.identifier="k2",e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Saturation({saturation:.5})),u}return o(e,t),e}(a.a);u.identifier="k6",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),u._stack.push(new s.Saturation({saturation:.7})),u}return o(e,t),e}(a.a);u.identifier="kdynamic",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Desaturation({desaturation:.4})),u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),u}return o(e,t),e}(a.a);u.identifier="lenin",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),u}return o(e,t),e}(a.a);u.identifier="lomo",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),u}return o(e,t),e}(a.a);u.identifier="mellow",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(1)),u=r(2),p=a.Math.ColorMatrix,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=i(this,t.call.apply(t,[this].concat(o))),h=new p(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);c._stack.push(new u.ColorMatrixPrimitive({colorMatrix:h}));var l=new a.Color(.8,.6,.9);return c._stack.push(new u.Gamma({gamma:l})),c}return o(e,t),e}(s.a);c.identifier="metal",e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),u._stack.push(new s.Glow),u}return o(e,t),e}(a.a);u.identifier="morning",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),u._stack.push(new s.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),u._stack.push(new s.Desaturation({desaturation:.65})),u}return o(e,t),e}(a.a);u.identifier="orchid",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),u._stack.push(new s.Saturation({saturation:.8})),u._stack.push(new s.Contrast({contrast:1.5})),u}return o(e,t),e}(a.a);u.identifier="pola",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),u._stack.push(new s.Saturation({saturation:.8})),u._stack.push(new s.Contrast({contrast:1.5})),u}return o(e,t),e}(a.a);u.identifier="pola669",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.Desaturation({desaturation:.65})),u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),u}return o(e,t),e}(a.a);u.identifier="quozi",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),u._stack.push(new s.Glow),u}return o(e,t),e}(a.a);u.identifier="semired",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),u._stack.push(new s.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),u}return o(e,t),e}(a.a);u.identifier="sunny",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),u}return o(e,t),e}(a.a);u.identifier="texas",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(1),s=r(2),u=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=i(this,t.call.apply(t,[this].concat(o)));return u._stack.push(new s.X400),u}return o(e,t),e}(a.a);u.identifier="x400",e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(1)),u=r(2),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._lutPrimitive=new u.LookupTableImage({image:s._options.image}),s._stack.push(s._lutPrimitive),s}return o(e,t),e}(s.a);p.prototype.availableOptions={image:{type:a.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},p.identifier="lut",e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(1)),u=r(2),p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o))),p=s._options,c=p.image,h=p.resolution,l=p.verticalTileCount,f=p.horizontalTileCount;return s._lutPrimitive=new u.ThreeDLookupTableImage({image:c,resolution:h,verticalTileCount:l,horizontalTileCount:f}),s._stack.push(s._lutPrimitive),s}return o(e,t),e}(s.a);p.prototype.availableOptions={image:{type:a.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:a.OptionType.NUMBER,default:128},horizontalTileCount:{type:a.OptionType.NUMBER,default:5},verticalTileCount:{type:a.OptionType.NUMBER,default:5}},p.identifier="3d-lut",e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=a.Math.Vector2,c=void 0;c=window.Image;var h=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._colorOverlayFilter=new a.Engine.Filters.ColorOverlayFilter({color:u.getTintColor()}),u._frameContainer=new a.Engine.Container,u._resetSprites(),u._options.frame&&u._createSpritesForFrame(u._options.frame),u}return o(e,t),e.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}},e.prototype._createSpritesForFrame=function(t){var e=this;if(!t)return this._disposeSprites();var r=t.imageGroups,n=t.layoutMode;this._layoutMode=n||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){void 0!==r[t]&&["start","mid","end"].forEach(function(n){if(void 0!==r[t][n]){var i=r[t][n];"image"in i&&(i=i.image);var o=a.Engine.Texture.fromImage(i),s=new a.Engine.Sprite(o);e._spriteGroups[t][n]=s,e._sprites.push(s),e._frameContainer.addChild(s)}})})},e.prototype._render=function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new a.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new a.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),a.Promise.resolve(this._renderTexture)},e.prototype._updateSprites=function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)},e.prototype._updateHorizontalSpriteGroup=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getDimensions(),i="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,c=0,h=void 0,l=void 0;if(o){h=o.getTexture().getDimensions(),l=h.y/h.x,u=Math.floor(this._frameWidth/l);var f=new p(0,r);f.x=i?this._frameWidth:0,o.setPosition(f),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){h=s.getTexture().getDimensions(),l=h.y/h.x,c=Math.floor(this._frameWidth*l);var d=new p(n.x-c,r);d.x-=i?this._frameWidth:0,s.setPosition(d),s.setHeight(this._frameWidth),s.setWidth(c)}if(a){h=a.getTexture().getDimensions(),l=h.y/h.x;var y=new p(u,r),_=n.x-u-c;if(i&&(y.x+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(y),a.setWidth(_),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth/l,v=Math.ceil(_/g),m=0;if(-1!==v){var b=Math.round(_/v);a.setWidth(b),m+=b,this._ensureRepeatSpritesExist(v-1,e,a);for(var x=0;x<v-1;x++){b=Math.round((_-m)/(v-x-1));var T=this._repeatSprites[e][x],w=y.clone().add(m,0).floor();T.setPosition(w),T.setWidth(b),T.setHeight(this._frameWidth),m+=b}}}}},e.prototype._ensureRepeatSpritesExist=function(t,e,r){var n=this;r.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var o=t-i,s=0;s<o;s++){var u=new a.Engine.Sprite(r.getTexture());this._repeatSprites[e].push(u),this._frameContainer.addChild(u),this._sprites.push(u)}else if(t<i){var p=this._repeatSprites[e].splice(t);p.forEach(function(t){var e=n._sprites.indexOf(t);-1!==e&&(n._sprites.splice(e,1),n._frameContainer.removeChild(t),t.dispose())})}},e.prototype._updateVerticalSpriteGroup=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getDimensions(),i="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,c=0,h=void 0,l=void 0;if(o){h=o.getTexture().getDimensions(),l=h.y/h.x,u=Math.floor(this._frameWidth*l);var f=new p(r,0);f.y=i?this._frameWidth:0,o.setPosition(f),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){h=s.getTexture().getDimensions(),l=h.y/h.x,c=Math.floor(this._frameWidth*l);var d=new p(r,n.y-c);d.y-=i?this._frameWidth:0,s.setPosition(d),s.setWidth(this._frameWidth),s.setHeight(c)}if(a){h=a.getTexture().getDimensions(),l=h.y/h.x;var y=new p(r,u),_=n.y-u-c;if(i&&(y.y+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(y),a.setHeight(_),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth*l,v=Math.ceil(_/g),m=0;if(-1!==v){var b=Math.round(_/v);a.setHeight(b),m+=b,this._ensureRepeatSpritesExist(v-1,e,a);for(var x=0;x<v-1;x++){b=Math.round((_-m)/(v-x-1));var T=this._repeatSprites[e][x],w=y.clone().add(0,m).floor();T.setPosition(w),T.setHeight(b),T.setWidth(this._frameWidth),m+=b}}}}},e.prototype._disposeSprites=function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e),e.getTexture().getBaseTexture().dispose(),e.dispose()}),this._resetSprites()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeSprites()},e.validateFrame=function(t){if(t){var e=t.imageGroups,r=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==u(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var n=function(t){var r=e[t],n=r.start,i=r.end,o=r.mid;if(void 0!==e[t]){if("object"!==u(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if(void 0!==n&&!(n instanceof c||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if(void 0!==o&&!(n instanceof c||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":u(o)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if(void 0!==i&&!(i instanceof c||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if(void 0!==r&&-1===["vertical-inside","horizontal-inside"].indexOf(r))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");n("top"),n("left"),n("right"),n("bottom")}},e}(a.Operation);h.identifier="frame",h.prototype.availableOptions={frame:{type:a.OptionType.OBJECT,validation:h.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t}},alpha:{type:a.OptionType.NUMBER,default:1},tintColor:{type:a.OptionType.COLOR,default:new a.Color(1,1,1,0)},scale:{type:a.OptionType.NUMBER,default:.1}},s.a.Operations.FrameOperation=h,e.a=h},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(178),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastControlPoint1=s._options.controlPoint1.clone(),s._lastControlPoint2=s._options.controlPoint2.clone(),s._horizontalFilter=new u.a,s._verticalFilter=new u.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new p(.5,.5)),s._verticalFilter.setDelta(new p(-.5,.5)),s._filter=new u.a,s}return o(e,t),e.prototype.rotate=function(t){var e=this._options.controlPoint1,r=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,r.flip(),r.x=1-r.x):-90===t&&(e.flip(),e.y=1-e.y,r.flip(),r.y=1-r.y),this.set({controlPoint1:e,controlPoint2:r})},e.prototype.flip=function(t){var e=this._options.controlPoint1,r=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,r.x=1-r.x;break;case"vertical":e.y=1-e.y,r.y=1-r.y}this.set({controlPoint1:e,controlPoint2:r})},e.prototype.transform=function(t){var e=this,r={};["controlPoint1","controlPoint2"].forEach(function(n){var i=e.getOption(n);r[n]=t.applyToRelativePoint(i)}),["blurRadius"].forEach(function(n){var i=e.getOption(n);r[n]=t.applyToRelativeSize(i)}),this.set(r,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options,i=n.blurRadius,o=n.controlPoint1,s=n.controlPoint2,u={blurRadius:i*r,controlPoint1:o,controlPoint2:s,texSize:e};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),r=this._options,n=r.blurRadius,i=r.controlPoint1,o=r.controlPoint2;return this._filter.set({blurRadius:n,controlPoint1:i.clone(),controlPoint2:o.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);c.identifier="linear-focus",c.prototype.availableOptions={controlPoint1:{type:a.OptionType.VECTOR2,default:new p(0,.5)},controlPoint2:{type:a.OptionType.VECTOR2,default:new p(1,.5)},blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.LinearFocusOperation=c,e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(21)),u=r.n(s),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=i(this,t.call.apply(t,[this].concat(s)));return c._fragmentSource=r(179),c._lastBlurRadius=null,c._lastControlPoint1=new p,c._lastControlPoint2=new p,c._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!i||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new p(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);u.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=new p(t.width,t.height),n=this._options.controlPoint1.clone().multiply(r),i=this._options.controlPoint2.clone().multiply(r),o=e.createLinearGradient(n.x,n.y,i.x,i.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,p=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,h=void 0,l=0;l<n.width*n.height*4;l+=4)h=c[l]/255,u[l]=h*u[l]+(1-h)*p[l],u[l+1]=h*u[l+1]+(1-h)*p[l+1],u[l+2]=h*u[l+2]+(1-h)*p[l+2];r.putImageData(s,0,0)},e}(a.Engine.Filter);c.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},controlPoint1:{type:a.OptionType.VECTOR2,default:new p(0,.5),uniformType:a.UniformType.FLOAT2},controlPoint2:{type:a.OptionType.VECTOR2,default:new p(1,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new p(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new p(100,100),uniformType:a.UniformType.FLOAT2}},e.a=c},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(181),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastSize=s._options.size,s._lastGradientSize=s._options.gradientSize,s._horizontalFilter=new u.a,s._verticalFilter=new u.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new p(.5,.5)),s._verticalFilter.setDelta(new p(-.5,.5)),s._filter=new u.a,s}return o(e,t),e.prototype.rotate=function(t){var e=this._options.start,r=this._options.end;90===t?(e.flip(),e.x=1-e.x,r.flip(),r.x=1-r.x):-90===t&&(e.flip(),e.y=1-e.y,r.flip(),r.y=1-r.y),this.set({start:e,end:r})},e.prototype.flip=function(t){var e=this._options.start,r=this._options.end;switch(t){case"horizontal":e.x=1-e.x,r.x=1-r.x;break;case"vertical":e.y=1-e.y,r.y=1-r.y}this.set({start:e,end:r})},e.prototype.transform=function(t){var e=this,r={};["start","end"].forEach(function(n){var i=e.getOption(n);r[n]=t.applyToRelativePoint(i)}),["blurRadius","size","gradientSize"].forEach(function(n){var i=e.getOption(n);r[n]=t.applyToRelativeSize(i)}),this.set(r,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options.start.clone(),i=this._options.end.clone(),o=this._options,s=o.blurRadius,u=o.size,p=o.gradientSize,c={blurRadius:s*r,size:u*r,gradientSize:p*r,start:n.clone().multiply(e),end:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(c),this._verticalFilter.set(c),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),r=this._options,n=r.blurRadius,i=r.size,o=r.gradientSize,s=r.start,u=r.end;return this._filter.set({blurRadius:n,gradientSize:o,size:i,start:s.clone(),end:u.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);c.identifier="mirrored-focus",c.prototype.availableOptions={start:{type:a.OptionType.VECTOR2,default:new p(0,.5)},end:{type:a.OptionType.VECTOR2,default:new p(1,.5)},blurRadius:{type:a.OptionType.NUMBER,default:.025},size:{type:a.OptionType.NUMBER,default:.1},gradientSize:{type:a.OptionType.NUMBER,default:.1}},s.a.Operations.MirroredFocusOperation=c,e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(21)),u=r.n(s),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=i(this,t.call.apply(t,[this].concat(s)));return c._fragmentSource=r(182),c._lastBlurRadius=null,c._lastGradientRadius=null,c._lastStart=new p,c._lastEnd=new p,c._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!i||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new p(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);u.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=this._maskRenderTarget.getPixelRatio(),n=new p(t.width,t.height),i=this._options.size*n.min()*r,o=this._options.gradientSize*n.min()*r,a=this._options.start.clone().multiply(n),s=this._options.end.clone().multiply(n),u=s.clone().subtract(a),c=a.clone().add(u.clone().divide(2)),h=u.len(),l=u.clone().divide(h),f=c.clone().add((i+o)*l.y,-(i+o)*l.x),d=c.clone().add(-(i+o)*l.y,(i+o)*l.x),y=e.createLinearGradient(f.x,f.y,d.x,d.y),_=d.clone().subtract(f).len();y.addColorStop(0,"#000000"),y.addColorStop(o/2/_,"#FFFFFF"),y.addColorStop(1-o/2/_,"#FFFFFF"),y.addColorStop(1,"#000000"),e.fillStyle=y,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,p=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,h=void 0,l=0;l<n.width*n.height*4;l+=4)h=c[l]/255,u[l]=h*u[l]+(1-h)*p[l],u[l+1]=h*u[l+1]+(1-h)*p[l+1],u[l+2]=h*u[l+2]+(1-h)*p[l+2];r.putImageData(s,0,0)},e}(a.Engine.Filter);c.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},size:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},gradientSize:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},start:{type:a.OptionType.VECTOR2,default:new p(0,.5),uniformType:a.UniformType.FLOAT2},end:{type:a.OptionType.VECTOR2,default:new p(1,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new p(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new p(100,100),uniformType:a.UniformType.FLOAT2}},e.a=c},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=a.Math.Vector2,p=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype._render=function(t){var e=this._options.rotation%360,r=e*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var n=this._sprite.getBounds();return this._renderTexture.resizeTo(new u(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.getNewDimensions=function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t},e.prototype.flip=function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}},e}(a.Operation);p.identifier="orientation",p.prototype.availableOptions={rotation:{type:a.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:a.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:a.OptionType.BOOLEAN,default:!1}},s.a.Operations.OrientationOperation=p,e.a=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=a.Engine.Filters.OverlayFilter,p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._overlayTexture=a.Engine.Texture.fromImage(u._options.image),u._overlayContainer=new a.Engine.Container,u._overlaySprite=new a.Engine.Sprite,u._overlaySprite.setTexture(u._overlayTexture),u._overlaySprite.setAnchor(0,0),u._overlayContainer.addChild(u._overlaySprite),u._overlayFilter=new a.Engine.Filters.OverlayFilter({overlayImage:u._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:u._overlayTexture}),u._sprite.setFilters([u._overlayFilter]),u._renderedOverlaySprite=new a.Engine.Sprite,u._renderedOverlayContainer=new a.Engine.Container,u._renderedOverlayContainer.addChild(u._renderedOverlaySprite),u._overlayRendered=!1,u._lastInputDimensions=new p(0,0),u}return o(e,t),e.prototype.setOption=function(e,r){if(t.prototype.setOption.call(this,e,r),"image"===e&&r&&this._sdk){var n=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(r),n.isOfType(a.RendererType.WEBGL)&&n.updateTexture(i),this._overlayRendered=!1}},e.prototype._render=function(t){var e=t.getDimensions(),r=this._options,n=r.image,i=r.alpha,o=r.blendMode;return n?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),a.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),a.Promise.resolve())},e.prototype._renderOverlayToRenderTexture=function(t){var e=this._sdk.getRenderer(),r=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new a.Engine.RenderTexture(e,r.x,r.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var n=this._options.image,i=n.width,o=n.height,s=a.Utils.resizeVectorToFill(new p(i,o),r);this._overlaySprite.setWidth(s.x),this._overlaySprite.setHeight(s.y);var u=this._overlayRenderTexture.getBaseTexture();e.isOfType(a.RendererType.WEBGL)&&(u.setGLUnit(4),e.updateTexture(u,!1)),this._overlayRenderTexture.resizeTo(r),this._overlayRenderTexture.render(this._overlayContainer)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._overlaySprite.dispose()},e}(a.Operation);c.identifier="overlay",c.BLEND_MODES=u.BLEND_MODES,c.prototype.availableOptions={identifier:{type:a.OptionType.STRING},image:{type:a.OptionType.IMAGE},blendMode:{type:a.OptionType.NUMBER,default:u.BLEND_MODES.MULTIPLY,available:Object.keys(u.BLEND_MODES).map(function(t){return u.BLEND_MODES[t]})},alpha:{type:a.OptionType.NUMBER,default:1}},s.a.Operations.OverlayOperation=c,e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(186),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastGradientRadius=s._options.gradientRadius,s._horizontalFilter=new u.a,s._verticalFilter=new u.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new p(.5,.5)),s._verticalFilter.setDelta(new p(-.5,.5)),s._filter=new u.a,s}return o(e,t),e.prototype.rotate=function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})},e.prototype.flip=function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})},e.prototype.transform=function(t){var e=this,r={},n=this.getPosition();r.position=t.applyToRelativePoint(n),["radius","blurRadius","gradientRadius"].forEach(function(n){var i=e.getOption(n);r[n]=t.applyToRelativeSize(i)}),this.set(r,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),r=e.min(),n=this._options,i=n.position,o=n.blurRadius,s=n.radius,u=n.gradientRadius,p={blurRadius:o*r,radius:s*r,gradientRadius:u*r,position:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(p),this._verticalFilter.set(p),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options,r=e.blurRadius,n=e.radius,i=e.gradientRadius,o=e.position,s=t.getDimensions();return this._filter.set({blurRadius:r,radius:n,gradientRadius:i,position:o,texSize:s}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);c.identifier="radial-focus",c.prototype.availableOptions={position:{type:a.OptionType.VECTOR2,default:new p(.5,.5)},radius:{type:a.OptionType.NUMBER,default:.25},gradientRadius:{type:a.OptionType.NUMBER,default:.125},blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.RadialFocusOperation=c,e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(21)),u=r.n(s),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];var c=i(this,t.call.apply(t,[this].concat(s)));return c._fragmentSource=r(187),c._lastBlurRadius=null,c._lastGradientRadius=null,c._lastPosition=new p,c._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),c}return o(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!i||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=new p(e.width,e.height),i=r.getImageData(0,0,e.width,e.height);u.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*n.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=new p(t.width,t.height),n=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(r),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var u=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*n);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,r.x,r.y)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,p=o.getImageData(0,0,n.width,n.height).data,c=a.getImageData(0,0,n.width,n.height).data,h=void 0,l=0;l<n.width*n.height*4;l+=4)h=c[l]/255,u[l]=h*u[l]+(1-h)*p[l],u[l+1]=h*u[l+1]+(1-h)*p[l+1],u[l+2]=h*u[l+2]+(1-h)*p[l+2];r.putImageData(s,0,0)},e}(a.Engine.Filter);c.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},radius:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},gradientRadius:{type:a.OptionType.NUMBER,default:25,uniformType:a.UniformType.FLOAT},position:{type:a.OptionType.VECTOR2,default:new p(.5,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new p(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new p(100,100),uniformType:a.UniformType.FLOAT2}},e.a=c},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(54),p=r(51),c=r(192),h=a.Math.Vector2,l=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var l=i(this,t.call.apply(t,[this].concat(o))),f=l._sdk.getRenderer();l._lastBlurRadius=null,l._blurredRenderTexture=new a.Engine.RenderTexture(f,100,100,1),l._maskRenderTexture=new a.Engine.RenderTexture(f,100,100,1),l._brushSprite=new u.a(l),l._brushSpriteContainer=new a.Engine.Container;var d=l._brushSprite.getDisplayObject();if(l._brushSpriteContainer.addChild(d),l._outputSprite=new a.Engine.Sprite,l._outputContainer=new a.Engine.Container,l._outputContainer.addChild(l._outputSprite),l._maskFilter=new c.a,f.isOfType(a.RendererType.WEBGL)){l._horizontalFilter=new p.a,l._verticalFilter=new p.a,l._sprite.setFilters([l._horizontalFilter,l._verticalFilter]),l._horizontalFilter.setDelta(new h(1,1)),l._verticalFilter.setDelta(new h(-1,1));var y=l._maskRenderTexture.getBaseTexture();y.setGLUnit(l._maskFilter.getMaskImage()),f.updateTexture(y,!1),y=l._blurredRenderTexture.getBaseTexture(),y.setGLUnit(l._maskFilter.getFilterImage()),f.updateTexture(y,!1)}else f.isOfType(a.RendererType.CANVAS)&&(l._blurFilter=new p.a,l._sprite.setFilters([l._blurFilter]),l._maskFilter.setMaskCanvas(l._maskRenderTexture.getRenderTarget().getCanvas()),l._maskFilter.setFilterCanvas(l._blurredRenderTexture.getRenderTarget().getCanvas()));return l._outputSprite.setFilters([l._maskFilter]),l}return o(e,t),e.prototype.flip=function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.rotate=function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.transform=function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype._render=function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),a.Promise.resolve()},e.prototype._renderMask=function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(a.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var r=this._sdk.getRenderer();r.isOfType(a.RendererType.WEBGL)&&r.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)},e.prototype._renderBlur=function(t){var e=t.getDimensions(),r=this._blurredRenderTexture.getDimensions();r.equals(e)||this._blurredRenderTexture.resizeTo(e);var n=this._options.blurRadius;if(this._lastBlurRadius!==n||!r.equals(e)){var i=this._sdk.getRenderer(),o=void 0;if(i.isOfType(a.RendererType.WEBGL)){o={blurRadius:n*e.min(),texSize:e},this._horizontalFilter.set(o),this._verticalFilter.set(o)}else i.isOfType(a.RendererType.CANVAS)&&(o={blurRadius:n},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=n}},e.prototype.getBrush=function(){return this._brushSprite},e.prototype.createPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new u.a.Brushes.RadialBrush({size:t,hardness:e,color:a.Color.WHITE}),n=this._brushSprite.createPath(r);return this._options.paths.push(n),this.setDirty(!0),n},e.prototype.setDirtyForRenderer=function(e,r,n){t.prototype.setDirtyForRenderer.call(this,e,r,n),this._brushSprite.setDirtyForRenderer(e,r,n)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._sdk.getRenderer().isOfType(a.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);l.identifier="selective-blur",l.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:.05},paths:{type:a.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},s.a.Operations.SelectiveBlurOperation=l,e.a=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(190)),u=function(t){function e(r,o,s){n(this,e);var u=i(this,t.call(this,o));return u._operation=r,u._canvas=s||a.Utils.createCanvas(),u._context=u._canvas.getContext("2d"),u}return o(e,t),e.prototype.serializeOption=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map(function(t){var e=t.getPosition();return r?e.toObject():e.clone()}):t.prototype.serializeOption.call(this,e,r)},e.prototype._optionEquals=function(e,r){if("controlPoints"===e){for(var n=this._options.controlPoints,i=0,o=n.length;i<o;i++)if(!n[i].getPosition().equals(r[i]))return!1;return!0}return t.prototype._optionEquals.call(this,e,r)},e.prototype.render=function(t){var e=this._options,r=e.controlPoints,n=e.size;if(!(r.length<2)){a.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===n&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=n);for(var i=r[0],o=i,s=1;s<r.length;s++)o=r[s],o.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,i),i=o}},e.prototype._createBrush=function(t){var e=this._options,r=e.size,n=e.hardness,i=e.color,o=a.Utils.createCanvas();o.width=o.height=Math.ceil(r*t.min());var s=o.getContext("2d");if(i=i.clone(),i.a=1,1===o.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var u=s.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*n),o.width/2,o.height/2,o.width/2);u.addColorStop(0,i.toRGBA());var p=i.clone();p.a=0,u.addColorStop(1,p.toRGBA()),s.fillStyle=u,s.fillRect(0,0,o.width,o.height)}return o},e.prototype.addControlPoint=function(t){var e=new s.a(this,t);this._options.controlPoints.push(e),this.emit("update",this)},e.prototype.getCanvas=function(){return this._canvas},e.prototype.setCanvas=function(t){this._canvas=t,this._context=t.getContext("2d")},e.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})},e.prototype.forEachControlPoint=function(t){this._options.controlPoints.forEach(t)},e.prototype.renderToCanvas=function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()},e.prototype.getCanvasDimensions=function(){return this._canvasDimensions},e}(a.Configurable);u.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},brush:{type:a.OptionType.OBJECT,required:!0},controlPoints:{type:a.OptionType.ARRAY,default:[]},closed:{type:a.OptionType.BOOLEAN,default:!1}},e.a=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(0),o=(r.n(i),i.Math.Vector2),a=function(){function t(e,r){n(this,t),this._path=e,this._drawnCanvases=[],this._position=r}return t.prototype.renderToCanvas=function(t,e,r){if(-1===this._drawnCanvases.indexOf(e)){for(var n=new o(e.width,e.height),i=e.getContext("2d"),a=this._position.clone().multiply(n),s=r.getPosition().clone().multiply(n),u=a.clone().subtract(s).len(),p=t.width/10,c=0;c<=u;){var h=Math.max(0,Math.min(1,c/u)),l=s.x+(a.x-s.x)*h,f=s.y+(a.y-s.y)*h;i.drawImage(t,l-t.width/2,f-t.height/2,t.width,t.height),c+=p}this._drawnCanvases.push(e)}},t.prototype.setPosition=function(t){this._position=t},t.prototype.getPosition=function(){return this._position.clone()},t.prototype.setDirty=function(){this._drawnCanvases=[]},t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(55)),u=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,r=e.size,n=e.hardness,i=e.color,o=a.Utils.createCanvas();o.width=o.height=Math.ceil(r*t.min());var s=o.getContext("2d");if(i=i.clone(),i.a=1,1===o.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var u=s.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*n),o.width/2,o.height/2,o.width/2);u.addColorStop(0,i.toRGBA());var p=i.clone();p.a=0,u.addColorStop(1,p.toRGBA()),s.fillStyle=u,s.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=t.clone(),o},e}(s.a);e.a=u,u.identifier="imgly_brush_radial",u.prototype.availableOptions=a.Utils.extend(s.a.prototype.availableOptions,{hardness:{type:a.OptionType.NUMBER,default:1}})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),function(t){function e(){n(this,e);var o=i(this,t.call(this));return o._fragmentSource=r(193),o}return o(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,p=s.getContext("2d"),c=u.getContext("2d"),h=p.getImageData(0,0,n.width,n.height).data,l=i.getImageData(0,0,n.width,n.height),f=l.data,d=c.getImageData(0,0,n.width,n.height).data,y=void 0,_=0;_<n.width*n.height*4;_+=4)y=h[_]/255,f[_]=y*d[_]+(1-y)*f[_],f[_+1]=y*d[_+1]+(1-y)*f[_+1],f[_+2]=y*d[_+2]+(1-y)*f[_+2];o.putImageData(l,0,0)},e}(a.Engine.Filter));s.prototype.availableOptions={maskImage:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},maskCanvas:{type:a.OptionType.OBJECT,default:null},filterImage:{type:a.OptionType.NUMBER,default:2,uniformType:a.UniformType.INT},filterCanvas:{type:a.OptionType.OBJECT,default:null}},e.a=s},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(22),p=r(195),c=r(196),h=r(54),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._onSpriteUpdate=s._onSpriteUpdate.bind(s),s._options.sprites.slice().forEach(function(t){s.removeSprite(t),s.addSprite(t)}),s}return o(e,t),e.prototype.getSpritesOfType=function(t){return this._options.sprites.filter(function(e){return e instanceof t})},e.prototype.rotate=function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})},e.prototype.flip=function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})},e.prototype._onSpriteUpdate=function(t,e){this.emit("update",this),this.setDirty(!0)},e.prototype._applyRotation=function(t,e){this._options.sprites.forEach(function(r){return r.applyRotation(t,e)})},e.prototype.transform=function(t){this._options.sprites.forEach(function(e){return e.applyTransform(t)})},e.prototype.scale=function(t){this._options.sprites.forEach(function(e){return e.applyScale(t)})},e.prototype.serializeOption=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(function(t){return t.serializeOptions(void 0,r)}):t.prototype.serializeOption.call(this,e,r)},e.prototype.createSticker=function(t){return new p.a(this,t)},e.prototype.createText=function(t){return new c.a(this,t)},e.prototype.createBrush=function(t){return new h.a(this,t)},e.prototype.addSprite=function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)},e.prototype.removeSprite=function(t){var e=this._options.sprites,r=e.indexOf(t);return-1!==r&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(r,1),this.setDirty(!0),!0)},e.prototype._render=function(t){var e=this,r=this._container,n=this._options.sprites,i=t.getDimensions().clone().floor();return a.Promise.all(n.map(function(t){return t.validateSettings()})).then(function(){n.forEach(function(t){return t.update(e._sdk,i)})}).then(function(){e._renderTexture.clear(),e._renderTexture.render(r)})},e.prototype.takeSpriteToFront=function(t){var e=this._options.sprites,r=e.indexOf(t);if(-1!==r){a.Utils.moveArrayItem(e,r,e.length-1);var n=t.getDisplayObject();this._container.removeChild(n),this._container.addChild(n),this.setDirty(!0)}},e.prototype.getSpritesAtPosition=function(t,e){var r=this,n=[];this._options.sprites.forEach(function(t){return t.update(r._sdk,e)});var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,u=a.height,p=i.getAnchor().clone().multiply(-s,-u);o.subtract(p);for(var c=this._options.sprites.slice(0).reverse(),h=0,l=c.length;h<l;h++){var f=c[h];f.getHitTestDisplayObject().isAtPosition(o)&&n.push(f)}return n},e.prototype.setDirtyForRenderer=function(e,r,n){t.prototype.setDirtyForRenderer.call(this,e,r,n),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,r,n)})},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._options.sprites.forEach(function(t){t.dispose()})},e}(a.Operation);f.StickerSprite=p.a,f.TextSprite=c.a,f.BrushSprite=h.a,f.identifier="sprite",f.prototype.availableOptions={sprites:{type:a.OptionType.ARRAY,default:[],setter:function(t,e){var r=this;if(t=t.map(function(t,e){if(t instanceof u.a)return t;var n=l({},t);switch(delete n.type,t.type){case"text":return new c.a(r,n);case"sticker":return new p.a(r,n);case"brush":return new h.a(r,n);default:a.Log.error(r.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){this._options.sprites.slice().forEach(function(t){t.dispose(),r.removeSprite(t)})}t.forEach(function(t){r.addSprite(t)})}return t}}},s.a.Operations.SpriteOperation=f,e.a=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(22)),u=r(50),p=a.Math.Vector2,c=a.Math.ColorMatrix,h=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=i(this,t.call.apply(t,[this].concat(o))),h=c._options.image,l=h.src||h.filePath;return c._isSVG=l&&!!l.match(/\w+\.svg(?=\?|$)/i),c._isSVG&&(c._canvas=a.Utils.createCanvas(),c._context=c._canvas.getContext("2d")),h&&c._onImageUpdate(),c._tintFilter=new a.Engine.Filters.TintFilter,c._adjustmentsFilter=new u.a,c._lastRenderedDimensions=p.NULL,c._lastRenderedInputDimensions=p.NULL,c._onOptionsChange=c._onOptionsChange.bind(c),c._options.adjustments.on("update",c._onOptionsChange),c}return o(e,t),e.prototype.applyScale=function(t){this.setDimensions(this.getDimensions().multiply(t))},e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="sticker"),n},e.prototype._rendersToRenderTexture=function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(a.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode},e.prototype._getTexture=function(){return this._inputTexture},e.prototype.update=function(t,e){var r=this._options,n=r.dimensions,i=r.image;if(n.equals(p.NULL)&&n.set(i.width,i.height),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(n)||this._lastRenderedImage!==i)&&this._isSVG&&t.getRenderer().isOfType(a.RendererType.WEBGL)){var o=t.getOutputDimensions();if(n.x>o.x||n.y>o.y){var s=a.Utils.resizeVectorToFit(n,o);i.width=s.x,i.height=s.y}else i.width=n.x,i.height=n.y;this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var u=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){u.push(this._adjustmentsFilter);var h=this._options.adjustments,l=new c;l.multiply(c.createBrightnessMatrix(h.getBrightness())),l.multiply(c.createSaturationMatrix(h.getSaturation())),l.multiply(c.createContrastMatrix(h.getContrast())),this._adjustmentsFilter.set({colorMatrix:l})}this._options.tintMode&&"none"!==this._options.tintMode&&(u.push(this._tintFilter),this._tintFilter.set({mode:a.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(u)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(n),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=i},e.prototype._applyFlip=function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var r={rotation:this._options.rotation},n=r.rotation/Math.PI*180,i=-1*n;switch(r.rotation=i*Math.PI/180,e){case"horizontal":r.flipHorizontally=!this._options.flipHorizontally,this.set(r);break;case"vertical":r.flipVertically=!this._options.flipVertically,this.set(r)}},e.prototype._hasAdjustments=function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()},e.prototype._onImageUpdate=function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(a.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture=a.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)},e.prototype.setOption=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,r,n),"image"===e&&this._identitySprite&&this._onImageUpdate()},e.prototype._onOptionsChange=function(){var t=this._dirtiness;for(var e in t)t[e]=!0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)},e}(s.a);h.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},identifier:{type:a.OptionType.STRING,default:""},image:{type:a.OptionType.IMAGE,required:!0},position:{type:a.OptionType.VECTOR2,default:p.NULL},dimensions:{type:a.OptionType.VECTOR2,default:p.NULL},anchor:{type:a.OptionType.VECTOR2,default:new p(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new p(.5,.5)},rotation:{type:a.OptionType.NUMBER,default:0},flipHorizontally:{type:a.OptionType.BOOLEAN,default:!1},flipVertically:{type:a.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:a.OptionType.BOOLEAN,default:!1},tintColor:{type:a.OptionType.COLOR,default:a.Color.WHITE},tintMode:{type:a.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:a.OptionType.NUMBER,default:1},adjustments:{type:a.OptionType.CONFIGURABLE,structure:{brightness:{type:a.OptionType.NUMBER,default:0},saturation:{type:a.OptionType.NUMBER,default:1},contrast:{type:a.OptionType.NUMBER,default:1}}}},h.type="sticker",e.a=h},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=(r.n(a),r(22)),u=r(197),p=a.Math.Vector2,c=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(o)));return s._textRenderer=new u.a(s,s._operation),s._textRenderer.rotation=s.getRotation(),s._sprite.setTexture(s._textRenderer.getFinalTexture()),s._hitTestSprite.setTexture(s._textRenderer.getTexture()),s}return o(e,t),e.prototype.serializeOptions=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.prototype.serializeOptions.call(this,e,r);return e||(n.type="text"),n},e.prototype.getDOMStyle=function(t,e){var r=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:r+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},e.prototype.getAbsoluteTextHeight=function(t){var e=this.getFontSize()*t.y,r=this.getTextMetrics();if(r){var n=1/r.unitsPerEm*e,i=r.ascender*n,o=r.descender*n;return i+Math.abs(o)}return e*this.getLineHeight()*1.1},e.prototype.getDimensions=function(t,e){return this._textRenderer.getDimensions(t,e)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var r=this._options.rotation;switch(e){case"horizontal":r+=2*(Math.PI-r),this.setRotation(r);break;case"vertical":r+=2*(Math.PI/2-r),this.setRotation(r)}},e.prototype.applyTransform=function(e){t.prototype.applyTransform.call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)},e.prototype.applyRotation=function(e){t.prototype.applyRotation.call(this,e);var r=(e+360)%360,n=this._operation.getInputDimensions();90!==r&&270!==r||(this.setMaxWidth(this.getMaxWidth()/n.x*n.y),this.setFontSize(this.getFontSize()/n.y*n.x))},e.prototype.setOption=function(e,r){if("rotation"===e)return this._options.rotation=r,this._textRenderer&&(this._textRenderer.rotation=r),this._rotation=r,void this.emit("update");t.prototype.setOption.call(this,e,r)},e.prototype.getOption=function(e){return"rotation"===e?this._rotation:t.prototype.getOption.call(this,e)},e.prototype.getHitTestDisplayObject=function(){return this._hitTestSprite},e.prototype.update=function(e,r){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,r);var n=this._textRenderer.getFinalTexture();n.getBaseTexture().update();var i=e.getRenderer();i.isOfType(a.RendererType.WEBGL)&&i.updateTexture(n.getBaseTexture()),t.prototype.update.call(this,e,r),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}},e.prototype._getTexture=function(){return this._textRenderer.getFinalTexture()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textRenderer.dispose()},e}(s.a);c.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},fontSize:{type:a.OptionType.NUMBER,default:.1},characterSpacing:{type:a.OptionType.NUMBER,default:0},lineHeight:{type:a.OptionType.NUMBER,default:1.1},fontIdentifier:{type:a.OptionType.STRING},fontFamily:{type:a.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:a.OptionType.ALL,default:"normal"},fontStyle:{type:a.OptionType.STRING,default:"normal"},textMetrics:{type:a.OptionType.OBJECT,default:null},outlineWidth:{type:a.OptionType.NUMBER,default:0},outlineColor:{type:a.OptionType.COLOR,default:a.Color.BLACK},alignment:{type:a.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:a.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:a.OptionType.COLOR,default:new a.Color(1,0,0,1)},backgroundColor:{type:a.OptionType.COLOR,default:a.Color.TRANSPARENT},position:{type:a.OptionType.VECTOR2,default:new p(.5,.5)},anchor:{type:a.OptionType.VECTOR2,default:new p(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new p(.5,.5)},rotation:{type:a.OptionType.NUMBER,default:0},text:{type:a.OptionType.STRING,required:!0},maxWidth:{type:a.OptionType.NUMBER,default:.5},maxHeight:{type:a.OptionType.NUMBER,default:0},visible:{type:a.OptionType.BOOLEAN,default:!0}},c.type="text",e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(0),o=(r.n(i),r(198)),a=i.Math.Vector2,s=function(){function t(e,r){n(this,t),this._text=e,this._operation=r,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return t.prototype._createCanvas=function(){this._canvas=i.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new o.a(this._context),this._finalCanvas=i.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")},t.prototype._createTexture=function(){this._texture=i.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=i.Engine.Texture.fromCanvas(this._finalCanvas)},t.prototype._applyTextOptions=function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var r=this._text.getOutlineWidth();r>0&&(e.lineWidth=r)},t.prototype._buildOutputLines=function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()},t.prototype._renderTextLine=function(t,e){var r=this._text.getAlignment(),n=new a(0,e);switch(r){case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width}this._context.fillText(t,n.x,n.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,n.x,n.y))},t.prototype.update=function(t,e){var r=this.calculateFontStyles(t,e);if(r){var n=this._calculateText(t,r,e),i=n.dimensions,o=n.lines;this._renderText(t,i,o,r,e),this._updateFinalTexture()}},t.prototype._updateFinalTexture=function(){var t=this._canvas,e=t.width,r=t.height,n=this.rotation,i=Math.cos(n),o=Math.sin(n),s=new a(Math.abs(e*i)+Math.abs(r*o),Math.abs(e*o)+Math.abs(r*i));this._finalCanvas.width=s.x,this._finalCanvas.height=s.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(n),this._finalContext.drawImage(this._canvas,-e/2,-r/2),this._finalContext.restore()},t.prototype._renderText=function(t,e,r,n,i){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*i.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(n,this._context);for(var o=0;o<r.length;o++){var a=r[o];this._renderTextLine(a,n.topPadding+n.lineHeight*o)}},t.prototype.calculateFontStyles=function(t,e){var r=this._text.getFontFamily(),n=this._text.getFontSize()*e.y,i=this._text.getAbsoluteTextHeight(e),o=i*this._text.getLineHeight(),a=i*(this._text.getLineHeight()-1)/2,s={fontFamily:r,fontSize:n,lineHeight:o,topPadding:a};return this._textOptions.fontFamily===r&&this._textOptions.fontSize===n&&this._textOptions.lineHeight===o||(this._textOptions=s),s},t.prototype._calculateText=function(t,e,r){var n=this._text.getMaxWidth()*r.x;this._applyTextOptions(e,this._context);var i=new a,o=this._text.getText().split("\n");if(void 0!==n)i.x=n,o=this._buildOutputLines(n);else for(var s=0;s<o.length;s++){var u=o[s];i.x=Math.max(i.x,this._context.measureText(u).width)}var p=e.lineHeight;return i.y=o.length*p,{dimensions:i,lines:o}},t.prototype.getTexture=function(){return this._texture},t.prototype.getFinalTexture=function(){return this._finalTexture},t.prototype.getDimensions=function(t,e){var r=this.calculateFontStyles(t,e);return this._calculateText(t,r,e).dimensions},t.prototype.dispose=function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null},t}();e.a=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){n(this,t),this._context=e,this._lastFontStyle={}}return t.prototype.getLines=function(){for(var t=this,e=[],r=[],n=this._lines.length,i=0;i<n;i++){for(var o=this._lines[i],a=this._buildWords(o),s=a.length,u=0;u<s;u++){var p=a[u],c=r.concat(p).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){r.length>0&&(e.push(r.join("")),r=[p]);var h=p.replace(/\s+$/i,"");if(this._getWidth(h)>this._maxWidth){var l=this._splitWord(p);e=e.concat(l.lines),l.rest&&(r=[l.rest])}}else r.push(p)}e.push(r.join("")),r=[]}return e.map(function(e){return t._trimLine(e,t._context.textAlign)})},t.prototype._trimLine=function(t,e){return t},t.prototype._buildWords=function(t){for(var e=[],r="",n=t.length,i=0;i<n;i++){var o=t[i];r+=o," "!==o&&"-"!==o&&i!==n-1||(e.push(r),r="")}return e},t.prototype._splitWord=function(t){for(var e={lines:[],rest:null},r=t.length,n=[],i=0;i<r;i++){var o=t[i];this._getWidth(n.concat(o).join(""))>this._maxWidth?(n.length>0&&e.lines.push(n.join("")),n=[o]):n.push(o),i===r-1&&n.length>0&&(e.rest=n.join(""))}return e},t.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)},t.prototype._getWidth=function(t){return this._context.measureText(t).width},t.prototype.setText=function(t){this._text=t,this._lines=t.split("\n")},t.prototype.setMaxWidth=function(t){this._maxWidth=t},t}();e.a=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=r(200),p=a.Math.Vector2,c=function(t){function e(){return n(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype._render=function(t){this._sprite.setRotation(0);var e=t.getDimensions(),r=this._options,n=r.start,i=r.end,o=r.rotation,s=r.textureScale,u=n.clone().add(i.clone().subtract(n).divide(2)),p=this.calculateScale(),c=p*s,h=this.getNewDimensions(e);return this._sprite.setAnchor(u),this._sprite.setRotation(o),this._sprite.setScale(c,c),this._sprite.setPosition(h.clone().multiply(.5)),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.calculateScale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),r=new p(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),n=e.clone().multiply(.5);n.subtract(r.clone().divide(2)),n.abs();return n.y>n.x?2*n.y/e.y+1:2*n.x/e.x+1},e.prototype.getNewDimensions=function(t){var e=this._options,r=e.start,n=e.end,i=e.textureScale,o=this.calculateScale();return t.clone().multiply(i*o).multiply(n.clone().subtract(r)).round()},e.prototype.flip=function(t){var e=this._options,r=e.start,n=e.end,i=r.clone();"horizontal"===t?(r.set(1-n.x,r.y),n.set(1-i.x,n.y)):"vertical"===t&&(r.set(r.x,1-n.y),n.set(n.x,1-i.y))},e.prototype.rotate=function(t){for(var e=this._options,r=e.start,n=e.end,i=(t+360)%360,o=Math.floor(i/90),a=0;a<o;a++){var s=r.clone();r.set(1-n.y,s.x),n.set(1-s.y,n.x)}},e}(a.Operation);c.identifier="transform",c.prototype.availableOptions={start:{type:a.OptionType.VECTOR2,default:new p(0,0)},end:{type:a.OptionType.VECTOR2,default:new p(1,1)},textureScale:{type:a.OptionType.NUMBER,default:1},rotation:{type:a.OptionType.NUMBER,default:0}},c.TransformChange=u.a,s.a.Operations.TransformOperation=c,e.a=c},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(0),o=(r.n(i),i.Math.Vector2),a=function(){function t(e,r){n(this,t),this._operation=e,this._options=r,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=r.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=r.end.clone().subtract(r.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(r.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(r.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return t.prototype.applyToRelativePoint=function(t){var e=this._operation.getStart(),r=this._operation.getEnd(),n=e.clone().add(r.clone().subtract(e).divide(2)),i=n.multiply(this._inputDimensions),a=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),s=i.clone().add(a),u=s.clone().subtract(this._inputDimensions.clone().divide(2)),p=new o(u.x*this._deltaCos-u.y*this._deltaSin,u.x*this._deltaSin+u.y*this._deltaCos),c=this._inputDimensions.clone().divide(2).add(p),h=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(h).divide(this._newAbsoluteSize)},t.prototype.applyToRelativeSize=function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()},t.prototype.applyToDimensions=function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t},t.prototype.scaleSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]},t.prototype.applyToRotation=function(t){return(t+this._rotationDelta)%(2*Math.PI)},t}();e.a=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=r(0),s=r.n(a),u=a.Math.Vector2,p=function(t){function e(){n(this,e);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._watermarkSprite=new a.Engine.Sprite,u._watermarkSprite.setAnchor(.5,.5),u._container.addChild(u._watermarkSprite),u}return o(e,t),e.prototype._render=function(t){this._watermarkTexture||(this._watermarkTexture=a.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),r=this._options.image,n=r.width,i=r.height,o=a.Utils.resizeVectorToFit(new u(n,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._watermarkSprite.dispose()},e}(a.Operation);p.identifier="watermark",p.prototype.availableOptions={image:{type:a.OptionType.OBJECT,required:!0}},s.a.Operations.WatermarkOperation=p,e.a=p}])});