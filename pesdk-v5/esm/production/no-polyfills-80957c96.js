import t,{keyframes as e,css as n,ThemeProvider as r}from"styled-components";import i,{forwardRef as o,Component as a,PureComponent as s,createElement as l,Children as u}from"react";import c,{unstable_batchedUpdates as f,findDOMNode as p}from"react-dom";import{renderToStaticMarkup as h}from"react-dom/server";var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function g(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(null==e&&n.path)}},n.exports),n.exports}var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function v(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function b(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function w(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function x(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function O(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function S(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(k(arguments[e]));return t}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=function(){function t(t,e,n){void 0===e&&(e={x:1,y:1}),void 0===n&&(n=0),this.position=t,this.scale=e,this.rotation=n}return Object.defineProperty(t,"IDENTITY",{get:function(){return new t({x:0,y:0})},enumerable:!0,configurable:!0}),t}(),R=function(){function t(t,e){"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)}return t.fromSize=function(e){return new t(e.width,e.height)},t.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.lerp=function(e,n,r){var i=Math.min(Math.max(r,0),1);return new t(e.x*i+n.x*(1-i),e.y*i+n.y*(1-i))},t.lerpUnclamped=function(e,n,r){return new t(e.x*r+n.x*(1-r),e.y*r+n.y*(1-r))},t.proportionalFit=function(t,e){return t.x/t.y>e.x/e.y?e.multiply(t.y/e.y):e.multiply(t.x/e.x)},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalized",{get:function(){var e=this.magnitude;return new t(this.x/e,this.y/e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floored",{get:function(){return new t(Math.floor(this.x),Math.floor(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rounded",{get:function(){return new t(Math.round(this.x),Math.round(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return Math.min(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return Math.max(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"abs",{get:function(){return new t(Math.abs(this.x),Math.abs(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swapped",{get:function(){return new t(this.y,this.x)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(e,n){return"number"==typeof e?new t(this.x+e,this.y+n):new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e,n){return"number"==typeof e?new t(this.x-e,this.y-n):new t(this.x-e.x,this.y-e.y)},t.prototype.multiply=function(e,n){return"number"==typeof e?new t(this.x*e,this.y*(void 0===n?e:n)):new t(this.x*e.x,this.y*e.y)},t.prototype.divide=function(e,n){return"number"==typeof e?new t(this.x/e,this.y/(void 0===n?e:n)):new t(this.x/e.x,this.y/e.y)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.clamp=function(e,n){return new t(Math.max(e.x,Math.min(n.x,this.x)),Math.max(e.y,Math.min(n.y,this.y)))},t.ZERO=new t(0,0),t.ONE=new t(1,1),t.UP=new t(0,1),t.DOWN=new t(0,-1),t.RIGHT=new t(1,0),t.LEFT=new t(-1,0),t}(),D=function(){function t(t,e,n,r){if("number"==typeof t){if("number"!=typeof e||void 0===n||void 0===r)throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");this.origin={x:t,y:e},this.size={width:n||0,height:r||0}}else{if(this.origin=t,"number"==typeof e)throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=e}}return t.contains=function(t,e){return e.x>=t.minX&&e.x<=t.maxX&&e.y>=t.minY&&e.y<=t.maxY},Object.defineProperty(t.prototype,"minX",{get:function(){return this.origin.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.origin.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midX",{get:function(){return this.origin.x+.5*this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midY",{get:function(){return this.origin.y+.5*this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.origin.x+this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.origin.y+this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),t.ZERO=new t({x:0,y:0},{width:0,height:0}),t}(),P=function(){function t(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.fromScale=function(e,n){return new t(e,0,0,n,0,0)},t.fromRotation=function(e){var n=Math.cos(e),r=Math.sin(e);return new t(n,-r,r,n,0,0)},t.fromRotationDeg=function(t){var e=Math.PI*t/180;return this.fromRotation(e)},t.fromTranslation=function(e,n){return new t(1,0,0,1,e,n)},t.fromTRS=function(e,n,r,i,o){var a=Math.cos(r),s=Math.sin(r);return new t(i*a,-o*s,i*s,o*a,e,n)},t.multiply=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.a*n.tx+e.b*n.ty+e.tx,e.c*n.tx+e.d*n.ty+e.ty)},t.transformPoint=function(t,e){return{x:t.a*e.x+t.b*e.y+t.tx,y:t.c*e.x+t.d*e.y+t.ty}},t.getInverted=function(e){var n=e.a*e.d-e.b*e.c;if(0===n)return e;var r=1/n;return new t(r*e.d,-r*e.b,-r*e.c,r*e.a,r*(e.b*e.ty-e.d*e.tx),r*(e.c*e.tx-e.a*e.ty))},t.IDENTITY=t.fromScale(1,1),t}();function I(t){return"number"==typeof t}function A(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}window.performance.now.bind(window.performance);var F,j,M,B,z,L=function(){function t(t){this.text=t,this.lastOffsetWidth=-1;var e="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=e,this.expandable.style.cssText=e,this.expandableInner.style.cssText=e,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return t.prototype.getElement=function(){return this.element},t.prototype.setFont=function(t){this.element.style.cssText="max-width:none;\n      min-width:20px;\n      min-height:20px;\n      display:inline-block;\n      overflow:hidden;\n      position:absolute;\n      width:auto;\n      margin:0;\n      padding:0;\n      top:-999px;\n      white-space:nowrap;\n      font-synthesis:none;\n      font:"+t+";"},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(t){this.element.style.width=t+"px"},t.prototype.onResize=function(t){var e=this,n=function(){e.onScroll(t)};this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()},t.prototype.reset=function(){var t=this.getWidth(),e=t+100;return this.expandableInner.style.width=e+"px",this.expandable.scrollLeft=e,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==t&&(this.lastOffsetWidth=t,!0)},t.prototype.onScroll=function(t){this.reset()&&null!==this.element.parentNode&&t(this.lastOffsetWidth)},t}(),N=function(){function t(t){this.font=_({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},t)}return t.getUserAgent=function(){return window.navigator.userAgent},t.getNavigatorVendor=function(){return window.navigator.vendor},t.hasWebKitFallbackBug=function(){if(null===t.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(t.getUserAgent());t.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return t.HAS_WEBKIT_FALLBACK_BUG},t.hasSafari10Bug=function(){if(null===t.HAS_SAFARI_10_BUG)if(t.supportsNativeFontLoading()&&/Apple/.test(t.getNavigatorVendor())){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(t.getUserAgent());t.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else t.HAS_SAFARI_10_BUG=!1;return t.HAS_SAFARI_10_BUG},t.supportsNativeFontLoading=function(){return null===t.SUPPORTS_NATIVE_FONT_LOADING&&(t.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),t.SUPPORTS_NATIVE_FONT_LOADING},t.supportsStretch=function(){if(null===t.SUPPORTS_STRETCH){var e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch(e){t.SUPPORTS_STRETCH=!1}t.SUPPORTS_STRETCH=""!==e.style.font}return t.SUPPORTS_STRETCH},t.prototype.load=function(e,n){var r=this,i=null,o=n||t.DEFAULT_TIMEOUT,a=this.getTime();return new Promise((function(e,n){if(t.supportsNativeFontLoading()&&!t.hasSafari10Bug()){var s=new Promise((function(t,e){var i=function(){r.getTime()-a>=o?e(new Error(o+"ms timeout exceeded")):document.fonts.load(r.getStyle('"'+r.font.fontFamily+'"'),"BESbswy").then((function(e){e.length>=1?t():setTimeout(i,25)}),n)};i()})),l=new Promise((function(t,e){i=setTimeout((function(){e(new Error(o+" ms timeout exceeded"))}),o)}));Promise.race([l,s]).then((function(){clearTimeout(i),e(r)}),n)}else{var u=new L("BESbswy"),c=new L("BESbswy"),f=new L("BESbswy"),p=-1,h=-1,d=-1,y=-1,g=-1,m=-1,v=document.createElement("div"),_=function(){null!==v.parentNode&&v.parentNode.removeChild(v)},b=function(){if((-1!==p&&-1!==h||-1!==p&&-1!==d||-1!==h&&-1!==d)&&(p===h||p===d||h===d)){if(t.hasWebKitFallbackBug()&&(p===y&&h===y&&d===y||p===g&&h===g&&d===g||p===m&&h===m&&d===m))return;_(),clearTimeout(i),e(r)}};v.dir="ltr",u.setFont(r.getStyle("sans-serif")),c.setFont(r.getStyle("serif")),f.setFont(r.getStyle("monospace")),v.appendChild(u.getElement()),v.appendChild(c.getElement()),v.appendChild(f.getElement()),document.body.appendChild(v),y=u.getWidth(),g=c.getWidth(),m=f.getWidth();var w=function(){if(r.getTime()-a>=o)_(),n(new Error(o+" ms timeout exceeded"));else{var t=document.hidden;!0!==t&&void 0!==t||(p=u.getWidth(),h=c.getWidth(),d=f.getWidth(),b()),i=setTimeout(w,50)}};w(),u.onResize((function(t){p=t,b()})),u.setFont(r.getStyle('"'+r.font.fontFamily+'",sans-serif')),c.onResize((function(t){h=t,b()})),c.setFont(r.getStyle('"'+r.font.fontFamily+'",serif')),f.onResize((function(t){d=t,b()})),f.setFont(r.getStyle('"'+r.font.fontFamily+'",monospace'))}}))},t.prototype.getStyle=function(e){return[this.font.fontStyle,this.font.fontWeight,t.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")},t.prototype.getTime=function(){return(new Date).getTime()},t.HAS_WEBKIT_FALLBACK_BUG=null,t.HAS_SAFARI_10_BUG=null,t.SUPPORTS_STRETCH=null,t.SUPPORTS_NATIVE_FONT_LOADING=null,t.DEFAULT_TIMEOUT=3e3,t}();function U(t){return!Object.prototype.hasOwnProperty.call(t,"name")}function W(t){return!Object.prototype.hasOwnProperty.call(t,"name")}!function(t){t.UNDO="undo",t.REDO="redo",t.DELETE="delete",t.BRING_TO_FRONT="bringtofront",t.EDIT="edit",t.DUPLICATE="duplicate",t.ADD="add",t.FLIP="flip",t.INVERT="invert",t.CLOSE="close",t.EXPORT="export"}(F||(F={})),function(t){t.LIBRARY="library",t.ART_FILTER="artFilter",t.TRANSFORM="transform",t.FILTER="filter",t.ADJUSTMENT="adjustment",t.FOCUS="focus",t.STICKER="sticker",t.TEXT="text",t.TEXT_DESIGN="textdesign",t.OVERLAY="overlay",t.FRAME="frame",t.BRUSH="brush"}(j||(j={})),function(t){t.TEXT="text",t.CARD="card"}(M||(M={})),function(t){t.LARGE="large",t.MEDIUM="medium",t.SMALL="small"}(B||(B={})),function(t){t.ERROR="error",t.WARNING="warning",t.INFO="info",t.TEXT_EDIT="textEdit"}(z||(z={}));var H,G=function(){this.enabled=!0,this.threshold=20,this.snapToHorizontalCenter=!0,this.snapToVerticalCenter=!0,this.snapToLeft=.1,this.snapToRight=.1,this.snapToTop=.1,this.snapToBottom=.1},V=function(){this.enabled=!0,this.threshold=20,this.angles=[0,45,90,135,180,225,270,315]},Z=function(){this.position=new G,this.rotation=new V};!function(t){t.OBJECT="object"}(H||(H={}));var X,Y,q=function(){};!function(t){t.IMAGE="image",t.DATA_URL="data-url",t.BLOB="blob",t.MSBLOB="ms-blob"}(X||(X={})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.RAW="raw"}(Y||(Y={}));var K,Q=function(){this.order="default",this.language="en",this.theme="dark",this.assetBaseUrl="assets/",this.displayResizeWarning=!0,this.displayCloseWarning=!0,this.displayCanvasRendererWarning=!0,this.displayToolControlBarTitle=!0,this.forceCrop=!1,this.enableZoom=!0,this.defaultTool=j.FILTER};j.FILTER,j.FOCUS,j.ADJUSTMENT,j.LIBRARY,j.OVERLAY,j.STICKER,j.TEXT,j.TEXT_DESIGN,j.FRAME,j.BRUSH,j.TRANSFORM,function(t){t.BRIGHTNESS="brightness",t.CONTRAST="contrast",t.SATURATION="saturation",t.CLARITY="clarity",t.SHADOWS="shadows",t.HIGHLIGHTS="highlights",t.EXPOSURE="exposure",t.GAMMA="gamma",t.BLACKS="blacks",t.WHITES="whites",t.TEMPERATURE="temperature",t.SHARPNESS="sharpness"}(K||(K={}));var J=function(){this.categories=[],this.flattenCategories=!1},$=function(){this.categories=[],this.flattenCategories=!1,this.categoryHeaderType=M.CARD,this.enablePreviewThumbnails=!1};function tt(t){return void 0!==t.lightColor}function et(t){return void 0!==t.lutURI}var nt,rt=function(){this.items=[]};!function(t){t.RADIAL="radial",t.LINEAR="linear",t.MIRRORED="mirrored",t.GAUSSIAN="gaussian"}(nt||(nt={}));var it,ot=function(){this.items=[]},at=function(){function t(t){this.name=t.name,this.coverImageUrl=t.coverImageUrl}return t.prototype.loadCoverImage=function(t){var e=this;return void 0===t&&(t="anonymous"),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at "+e.coverImage))})),i.crossOrigin=t,i.src=e.coverImageUrl,e.coverImage=i}))},t}(),st=function(){function t(t){this.category=t.title,this.thumbUrl=t.thumbUrl,this.rawUrl=t.rawUrl}return t.prototype.loadThumbImage=function(t){var e=this;return void 0===t&&(t="anonymous"),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at "+e.thumbUrl))})),i.crossOrigin=t,i.src=e.thumbUrl,e.thumbImage=i}))},t.prototype.getThumbImage=function(){return this.thumbUrl},t}(),lt=function(){this.enableWebcam=!1,this.enableUpload=!1,this.flattenCategories=!1,this.categoryHeaderType=M.CARD},ut=function(){function t(){}return t.prototype.getData=function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="json",r.onload=function(){var t=r.status;200===t?e(r.response):n(new Error("HTTP Status "+t))},r.send()}))},t}(),ct=function(){function t(t){this.data={},this.data=t}return t.prototype.loadJSON=function(t){return(new ut).getData(t)},t.prototype.getCategories=function(){return Promise.resolve([])},t.prototype.searchImages=function(t){return Promise.resolve([])},t}(),ft=function(){this.items=[]};!function(t){t.NORMAL="normal",t.OVERLAY="overlay",t.SOFT_LIGHT="softLight",t.HARD_LIGHT="hardLight",t.MULTIPLY="multiply",t.DARKEN="darken",t.COLOR_BURN="colorBurn",t.SCREEN="screen",t.LIGHTEN="lighten"}(it||(it={}));var pt=function(){this.categories=[],this.canvasActions=[F.BRING_TO_FRONT,F.FLIP,F.DUPLICATE,F.DELETE],this.flattenCategories=!1,this.categoryHeaderType=M.CARD,this.enableCustomUpload=!0,this.customStickerTintMode="none"};function ht(t){return void 0!==t.sticker}function dt(t){return void 0!==t.thumbnail}var yt=function(){this.fonts=[],this.canvasActions=[F.EDIT,F.BRING_TO_FRONT,F.DUPLICATE,F.DELETE],this.disableAutoScaling=!1};function gt(t){return void 0===t.provider||"file"===t.provider}function mt(t){return"google"===t.provider}var vt,_t,bt=function(){this.defaultSize=.05,this.defaultHardness=.5},wt=function(){this.items=[],this.canvasActions=[F.EDIT,F.BRING_TO_FRONT,F.INVERT,F.DUPLICATE,F.DELETE]},xt=function(){this.categories=[],this.enableRotation=!0,this.enableFlip=!0,this.flattenCategories=!1,this.categoryHeaderType=M.TEXT};!function(t){t.CommonCategory="imgly_transforms_common",t.FacebookCategory="imgly_transforms_facebook",t.TwitterCategory="imgly_transforms_twitter",t.InstagramCategory="imgly_transforms_instagram",t.Custom="imgly_transform_common_custom",t.Square="imgly_transform_common_square",t.ThreeByFour="imgly_transform_common_3",t.FourByThree="imgly_transform_common_4",t.NineBySixteen="imgly_transform_common_9",t.SixteenByNine="imgly_transform_common_16",t.FacebookPost="imgly_transform_facebook_post",t.FacebookProfile="imgly_transform_facebook_profile",t.FacebookTitle="imgly_transform_facebook_title",t.InstagramLandscape="imgly_transform_instagram_landscape",t.InstagramPortrait="imgly_transform_instagram_portrait",t.InstagramSquare="imgly_transform_instagram_square",t.InstagramStory="imgly_transform_instagram_story",t.TwitterPost="imgly_transform_twitter_post",t.TwitterProfile="imgly_transform_twitter_profile",t.TwitterTitle="imgly_transform_twitter_title"}(vt||(vt={})),function(t){t.EXPORT="export",t.CLOSE="close",t.HISTORY_CHANGE="historyChange",t.EDITOR_READY="editorReady",t.ERROR_IMAGE_LOADING="errorImageLoading"}(_t||(_t={}));var Ot,St=function(){function t(){this.events={}}return t.prototype.addListener=function(t,e){return(this.events[t]||(this.events[t]=[])).push(e),this},t.prototype.removeListener=function(t,e){var n=this.events[t];if(!n)return this;var r=n.lastIndexOf(e);return-1===r||n.splice(r,1),this},t.prototype.removeAllListeners=function(t){return this.events[t]=void 0,this},t.prototype.on=function(t,e){return this.addListener(t,e)},t.prototype.off=function(t,e){return this.removeListener(t,e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.events[t];return!(!r||!r.length)&&(r.slice(0).forEach((function(t){return t.apply(null,e)})),!0)},t}();!function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(Ot||(Ot={}));var kt=function(t){function e(e,n){var r=t.call(this)||this;return r.image=e,r.options=n,r}return v(e,t),e.prototype.needsResize=function(){var t=this.resizedDimensions();return t.x<this.image.width||t.y<this.image.height},e.prototype.resizedDimensions=function(){var t=this.options,e={width:this.image.width,height:this.image.height},n=R.fromSize(e),r=R.fromSize(e),i=t.maxMegaPixels;if(i){var o=1e6*(function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}()?i.mobile:i.desktop),a=e.width/e.height,s=e.height/e.width,l=new R(Math.floor(Math.sqrt(o*a)),Math.floor(Math.sqrt(o*s)));l.x<=e.width&&l.y<=e.height&&(n=l)}var u=t.maxDimensions;u&&(u.height<e.height||u.width<e.width)&&(r=new R(u.width,u.height));var c=new R(Math.min(n.x,r.x),Math.min(n.y,r.y));return R.proportionalFit(c,R.fromSize(e)).floored},e.prototype.downscaleIfNecessary=function(){var t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return this.image;this.emit(Ot.BEGAN_IMAGE_DOWNSCALING,this.image);var e=document.createElement("canvas");e.width=t.x,e.height=t.y;var n=e.getContext("2d"),r=this.image;return n.drawImage(r,0,0,r.width,r.height,0,0,t.x,t.y),this.emit(Ot.IMAGE_DOWNSCALED),e},e.prototype.downscaleImageIfNecessary=function(){var t=this.image,e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return t;this.emit(Ot.BEGAN_IMAGE_DOWNSCALING,t);var n=new Image;return n.width=e.x,n.height=e.y,n.src=t.src,this.emit(Ot.IMAGE_DOWNSCALED),n},e}(St),Tt=function(t){return function(e){(function(t){return"Escape"===t.key})(e)&&t(e)}},Ct=function(t,e,n,r){var i=k(n,2),o=i[0],a=i[1];void 0===r&&(r=0);var s=t[e];if(s){if(s<o)return console.error(e+" must be greater than or equal to "+o),o;if(s>a)return console.error(e+" must be less than or equal to "+a),a}return s||r},Et={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},Rt=function(t,e){return void 0===e&&(e=!1),Et[t]?(e&&console.warn("Font "+t+" was deprecated. Please use "+Et[t]+" instead."),Et[t]):t};function Dt(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var Pt=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,It=function(t){return Pt.exec(t).slice(1)};function At(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=Dt(Bt(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function Ft(t){var e=jt(t),n="/"===Lt(t,-1);return(t=Dt(Bt(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function jt(t){return"/"===t.charAt(0)}var Mt={extname:function(t){return It(t)[3]},basename:function(t,e){var n=It(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},dirname:function(t){var e=It(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},sep:"/",delimiter:":",relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=At(t).substr(1),e=At(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},join:function(){var t=Array.prototype.slice.call(arguments,0);return Ft(Bt(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},isAbsolute:jt,normalize:Ft,resolve:At};function Bt(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var zt,Lt="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},Nt=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:it.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:it.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:it.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:it.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:it.DARKEN,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:it.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:it.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:it.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:it.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:it.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:it.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:it.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:it.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:it.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:it.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:it.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:it.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],Ut=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],Wt=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}},{identifier:"imgly_font_amaticsc",fontFamily:"Amaticsc",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-225}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}],Ht=[{identifier:nt.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:nt.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:nt.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:nt.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}],Gt=[{identifier:"basics",name:"Basics",items:[{identifier:K.BRIGHTNESS},{identifier:K.CONTRAST},{identifier:K.SATURATION},{identifier:K.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:K.CLARITY},{identifier:K.SHADOWS},{identifier:K.HIGHLIGHTS},{identifier:K.EXPOSURE},{identifier:K.BLACKS},{identifier:K.WHITES},{identifier:K.TEMPERATURE},{identifier:K.SHARPNESS}]}],Vt=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],Zt=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],Xt=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],Yt=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],qt=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],Kt=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],Qt=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"],Jt=function(){return window&&window.navigator&&window.navigator.userAgent||""},$t=function(t){return void 0===t&&(t=Jt()),-1!==t.indexOf("Edge")},te=function(t){return void 0===t&&(t=Jt()),!!t.match(/msie|trident/i)},ee=function(t){try{return new URL(t),!0}catch(t){return!1}},ne=function(){function t(t){this.assetManager=t,this.injectedFonts={},this.loadedFonts={}}return t.createFontFacesCSS=function(t,e){return t.map((function(t){var n=e(t.fontURI);return'@font-face {\n        font-family: "'+t.fontFamily+"\";\n        src: url('"+n+"') format('"+(t.format||"woff")+"');\n        font-weight: "+(t.fontWeight||"normal")+";\n        font-style: "+(t.fontStyle||"normal")+";\n      }"}))},t.prototype.getFontWithId=function(t){var e=this.assetManager.getFontAsset(t);if(!e)throw new Error("The requested font does not exist as an asset.");return e},t.prototype.isFontLoaded=function(t){return void 0!==this.loadedFonts[t]},t.prototype.injectAllFonts=function(){var t=this.assetManager.getFontAssets();this.injectFonts(t)},t.prototype.loadAllFonts=function(){return x(this,void 0,void 0,(function(){var t;return O(this,(function(e){return t=this.assetManager.getFontAssets(),[2,this.loadFonts(t)]}))}))},t.prototype.loadFontsWithIdentifiers=function(t){return x(this,void 0,void 0,(function(){var e,n=this;return O(this,(function(r){return e=t.map((function(t){return n.getFontWithId(t)})),[2,this.loadFonts(e)]}))}))},t.prototype.loadFonts=function(t){return x(this,void 0,void 0,(function(){var e,n=this;return O(this,(function(r){return this.injectFonts(t),e=new Array,t.forEach((function(t){e.push(n.loadFont(t,!1))})),[2,new Promise((function(t,n){Promise.all(e).then((function(){return t()})).catch((function(t){return n(t)}))}))]}))}))},t.prototype.loadFont=function(t,e){return void 0===e&&(e=!0),x(this,void 0,void 0,(function(){var n=this;return O(this,(function(r){return[2,new Promise((function(r,i){n.isFontLoaded(t.identifier)&&r(),e&&n.injectFonts([t]),new N(t).load().then((function(){n.loadedFonts[t.identifier]=t,r()})).catch((function(){i(t.identifier)}))}))]}))}))},t.prototype.loadFontWithIdentifier=function(t,e){return void 0===e&&(e=!0),x(this,void 0,void 0,(function(){var n;return O(this,(function(r){if(!(n=this.assetManager.getFontAsset(t)))throw new Error("The requested font asset with identifier "+t+" does not exist!");return[2,this.loadFont(n,e)]}))}))},t.prototype.injectFonts=function(t,e){void 0===e&&(e=this.assetManager.getPathForCategory("font"));var n=t.filter(mt),r=t.filter(gt);n.length>0&&this.addGoogleFontLinks(n),r.length>0&&this.addWebFontCSS(r,e)},t.prototype.addGoogleFontLinks=function(t){var e=this,n=t.filter((function(t){return!e.injectedFonts[t.identifier]}));if(0!==n.length){var r=document.createElement("link");r.rel="stylesheet",r.href="https://fonts.googleapis.com/css?family="+n.map((function(t){return t.fontFamily})).join(","),document.getElementsByTagName("head")[0].appendChild(r),t.forEach((function(t){e.injectedFonts[t.identifier]=t}))}},t.prototype.addWebFontCSS=function(e,n){var r=this,i=e.filter((function(t){return!r.injectedFonts[t.identifier]}));if(0!==i.length){var o="\n      /* Injected by PhotoEditorSDK */\n      "+t.createFontFacesCSS(i,n).join("\n")+"\n    ",a=document.createElement("style");a.innerHTML=o,document.head.appendChild(a),e.forEach((function(t){r.injectedFonts[t.identifier]=t}))}},t}(),re=function(){function t(t,e){var n=this;void 0===e&&(e=!1),this.basePath="assets/",this.areCustomAssetsAllowed=!1,this.getAssets=function(t){switch(t){case"overlay":return n.overlayAssets;case"filter":return n.filterCategories;case"font":return n.fontAssets;case"focus":return n.focusAssets;case"adjustment":return n.adjustmentCategories;case"sticker":return n.stickerCategories;case"textdesign":return n.textDesignAssets;case"frame":return n.frameAssets;case"transform":return n.transformCategories}return[]},this.getPath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Mt.join.apply(Mt,T([t],e));if(e&&0!==e.length&&ee(Mt.join.apply(Mt,T(e))))return Mt.join.apply(Mt,T(e));if((!e||0===e.length)&&ee(t))return t;if(n.basePath.match(/(ftp|http|https):\/\//)){var o=n.basePath.length;return"/"!==n.basePath[o-1]&&(n.basePath=n.basePath+"/"),n.basePath+i}return Mt.join(n.basePath,i)},this.getPathForCategory=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.getPath.apply(n,T([t],e))}},this.addCustomStickerAsset=function(t,e,r){t.forEach((function(t){var i=t.thumbnailURI,o=t.name,a=t.sticker,s=t.identifier,l=t.tintMode,u=t.resizeMode,c=n.stickerCategories.find((function(t){return t.identifier===e})),f={identifier:s,name:o,thumbnailURI:i,sticker:a,tintMode:l,resizeMode:u};if(c&&dt(c))c.items.push(f);else{var p={identifier:e,name:r,thumbnail:i,items:[f]};n.stickerCategories=T([p],n.stickerCategories)}})),n.stickerAssets=n.stickerCategories.reduce(n.allOptions,[])},this.getItemPath=function(t,e,n){var r=t.find((function(t){return t.identifier===e}));return r&&(r[n]||r.path)||""},this.isNonExistingFont=function(t){return!Wt.find((function(e){return e.identifier===t.identifier}))&&!Et[t.identifier]},this.replaceDeprecatedFont=function(t){return Et[t.identifier]?Wt.find((function(e){return e.identifier===Rt(t.identifier,!0)})):t},t&&t.basePath&&(this.basePath=t.basePath),this.areCustomAssetsAllowed=e;var r=Ut.reduce(this.allOptions,[]);t&&t.filter?this.filterCategories=this.configuredCategory(Ut,t.filter,r):this.filterCategories=Ut,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(t){return et(t)})),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(t){return tt(t)}));var i=Gt.reduce(this.allOptions,[]);t&&t.adjustment?this.adjustmentCategories=this.configuredCategory(Gt,t.adjustment,i):this.adjustmentCategories=Gt,this.fontAssets=Wt.reduce(this.allOptions,[]);var o=Kt.map((function(t){return n.getFontAsset(t)}));if(t&&t.text&&t.text.fonts&&t.text.fonts.length>0){var a=t.text.fonts.filter(this.isNonExistingFont),s=t.text.fonts.filter((function(t){return!n.isNonExistingFont(t)})).map((function(t){return n.replaceDeprecatedFont(t)})).map((function(t){return n.getFontAsset(t.identifier)}));o=t.text.fonts?T(s,a):o,this.fontAssets=t.text.fonts?T(this.fontAssets,a):this.fontAssets}this.textToolFontAssets=o;var l=t&&t.focus&&t.focus.items&&t.focus.items.length?t.focus.items.map((function(t){return Ht.find((function(e){return e.identifier===t.identifier}))})):Ht;this.focusAssets=l,t&&t.overlay&&t.overlay.items?this.overlayAssets=this.configuredItem(t.overlay.items,Nt,Nt):this.overlayAssets=Nt,t&&t.frame&&t.frame.items?this.frameAssets=this.configuredItem(t.frame.items,Yt,Yt):this.frameAssets=Yt;var u=Vt.reduce(this.allOptions,[]);t&&t.sticker?this.stickerCategories=this.configuredCategory(Vt,t.sticker,u):this.stickerCategories=Vt,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);var c=Zt;t&&"light"===t.theme&&(c=Xt),this.textDesignAssets=t&&t.textdesign&&t.textdesign.items&&t.textdesign.items.length?t.textdesign.items.map((function(t){return c.find((function(e){return e.identifier===t.identifier}))})):c,this.textDesignToolFontAssets=Qt.map((function(t){return n.getFontAsset(t)}));var f=qt.reduce(this.allOptions,[]);t&&t.transform?this.transformCategories=this.configuredCategory(qt,t.transform,f):this.transformCategories=qt,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new ne(this)}return t.prototype.getFontManager=function(){return this.fontManager},t.prototype.getAssetSource=function(t,e){switch(t){case"filter":if(this.getLUTFilterAsset(e))return this.getPath(t,this.getItemPath(this.lutFilterAssets,e,"lutURI"));break;case"overlay":return this.getPath(t,this.getItemPath(this.overlayAssets,e,"overlayURI"));case"font":return this.getPath(t,this.getItemPath(this.fontAssets,e,"fontURI"));case"sticker":var n=this.stickerAssets.find((function(t){return t.identifier===e}));if(n){if(ht(n))return n.sticker;if(e.includes("imgly_sticker")&&n.stickerURI.includes(".svg")&&te()){var r=this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI")).split("/");return r.splice(r.length-1,0,"base"),r[r.length-1]=r[r.length-1].replace(".svg",".png"),r.join("/")}return this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(t,"engine",e);case"frame":return this.getPath(t,e)}throw new Error("Cannot resolve this type of asset yet")},t.prototype.getDuotoneFilterAsset=function(t){return this.duoToneFilterAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getLUTFilterAsset=function(t){return this.lutFilterAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getOverlayAsset=function(t){return this.overlayAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getStickerAsset=function(t){return this.stickerAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFontAsset=function(t){return this.fontAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getTextDesignAssets=function(t){return this.textDesignAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFrameAsset=function(t){return this.frameAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFontAssets=function(){return this.fontAssets},t.prototype.getFontAssetsForText=function(){return this.textToolFontAssets},t.prototype.getFontAssetsForTextDesign=function(){return this.textDesignToolFontAssets},t.prototype.getFrameAssets=function(){return this.frameAssets},t.prototype.allOptions=function(t,e){return Object.prototype.hasOwnProperty.call(e,"items")?T(t,e.items):T(t,[e])},t.prototype.configuredCategory=function(t,e,n){var r=this;return e.categories&&e.categories.length?e.categories.reduce((function(e,i){var o=t.find((function(t){return t.identifier===i.identifier}));return o?e.push(_(_(_({},o),i),{items:r.configuredItem(i.items,n,o.items).filter(Boolean)})):r.areCustomAssetsAllowed&&e.push(_(_({},i),{items:r.configuredItem(i.items,n,i.items).filter(Boolean)})),e}),[]):t},t.prototype.configuredItem=function(t,e,n){var r=this;return t&&t.length?t.reduce((function(t,n){var i=e.find((function(t){return t.identifier===n.identifier}));return i?t.push(_(_({},i),n)):r.areCustomAssetsAllowed&&t.push(n),t}),[]).filter(Boolean):n},t}(),ie=y(g((function(t,e){
/*! For license information please see PhotoEditorSDK.Engine.js.LICENSE.txt */
self,t.exports=(()=>{var t={7945:(t,e,n)=>{t.exports=n(1602)},7857:(t,e,n)=>{n.d(e,{JD:()=>x,cQ:()=>c,FM:()=>C,xx:()=>O,vp:()=>w,gT:()=>m,Il:()=>b,DS:()=>_,y2:()=>S,Bq:()=>T,Zb:()=>o.Z,D3:()=>k,yO:()=>f.Z,S3:()=>v.Z});var r=n(6982),i=n.n(r),o=n(3678);const a={getIEVersion:function(){var t=navigator,e=t.userAgent,n=t.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==e.indexOf("Trident")&&e.match(/rv:([0-9]+)/i)[1]}};var s=n(9706),l=i().Utils,u=i().Math.Vector2;const c={getInnerDimensionsForElement:function(t){var e=new u(t.offsetWidth,t.offsetHeight),n=window.getComputedStyle(t,null);return e.x-=parseInt(n.getPropertyValue("padding-left"),10),e.x-=parseInt(n.getPropertyValue("padding-right"),10),e.y-=parseInt(n.getPropertyValue("padding-top"),10),e.y-=parseInt(n.getPropertyValue("padding-bottom"),10),e},getEventPosition:function(t){var e=t.clientX,n=t.clientY;if(-1!==t.type.indexOf("touch")){if(!t.touches.length)return;e=t.touches[0].clientX,n=t.touches[0].clientY}return new u(e,n)},createTransparentPatternCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.fetch(t,e);if(!r)return o.Z.info("Utils#translate","Unable to translate `".concat(e,"`")),null;for(var i in n)r=r.replace("${".concat(i,"}"),n[i]);return r},fetch:function(t,e,n){for(var r=(e=(e=e.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<r.length&&(t=t[r[i]]);i++);return void 0!==t&&t},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(t){return t});var r=[];return e.forEach((function(e){t.forEach((function(t){n(t)===e&&r.push(t)}))})),r},getJSONP:function(t){return new s.Z(t).load()},cloneCategories:function(t,e){return t.map((function(t){return(t=l.clone(t))[e]=t[e].slice(0),t}))},mergeCategories:function(t,e,n){t=this.cloneCategories(t,n);var r=null;return e.forEach((function(e){t.forEach((function(t){e.identifier===t.identifier&&(r=t)})),r?r[n]=r[n].concat(e[n]):t.push(e)})),t},wrapFiltersInCategories:function(t,e){return t.map((function(t){var n,r,i,o=t;return e in o||(n={identifier:"imgly_filters_wrapped-".concat(t.identifier),displayFlat:!0},i=[t],(r=e)in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,o=n),o}))},getStyleObject:function(t){var e=window.getComputedStyle(t),n={};for(var r in e){var i=e.getPropertyValue(r),o=r.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));""!==i&&(n[o]=i)}return n},styleElement:function(t,e){for(var n in e)t.style[n]=e[n]},debounce:function(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(this,o)}},getScrollbarWidth:function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var r=n.offsetWidth;return t.parentNode.removeChild(t),e-r},findIntegerFraction:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,r=0,i=0,o=1,a=1,s=0;s<e;s++){var l=o/a-t;if(l<0)o++;else{if(!(l>0))return new u(o,a);a++}var c=Math.abs(o/a-t);c<n&&(n=c,r=o,i=a)}return new u(r,i)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toFixed(e);return parseFloat(n)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},flipObject:function(t){var e={};for(var n in t)e[t[n]]=n;return e},Browser:a};var f=n(3596);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const y=h(h({},f.z),{},{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"});var g=[];void 0!==i().Operations.SpriteOperation&&g.push(i().Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush);const m={EVENTS:y,DEFAULTS:{TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}],FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-225}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}],TEXT_DESIGN_FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"text-design/fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"text-design/fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}]}],BRUSHES:g}};var v=n(4696),_=i().Base64,b=i().Color,w=(i().Math.ColorMatrix,i().EventEmitter),x=(i().EXIF,i().OptionType,i().Promise),O=i().Utils,S=i().RenderType,k=i().ImageFormat,T=i(),C=(i().UniformType,i().Math.Vector2);i().Math.Rectangle,i().Math.Range,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930)},6675:(t,e,n)=>{n.r(e),n.d(e,{Color:()=>r.Il,Constants:()=>r.gT,EngineWrapper:()=>E,JSONLoader:()=>m.Z,PhotoEditorSDK:()=>r.Bq,Utils:()=>r.cQ});var r=n(7857),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"downloadDataURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(t),r=this.getExtensionFromDataURL(t),i=document.createElement("a");i.download="".concat(e,".").concat(r),i.href=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{key:"downloadMSBlob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob&&navigator.msSaveBlob(t,"".concat(e,".png"))}},{key:"getExtensionFromDataURL",value:function(t){return t.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=r.DS.decode(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),o=new Uint8Array(i),a=0;a<e.length;a++)o[a]=e[a];var s=new window.Blob([i],{type:n});return window.URL.createObjectURL(s)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}(),o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sdk=e,this._options=n,this._download=r}var e;return(e=[{key:"export",value:function(){var t=this,e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then((function(n){return t._download&&t._downloadData(e,n),n}))}},{key:"_downloadData",value:function(t,e){switch(t){case r.y2.DATAURL:i.downloadDataURL(e,this._options.fileBasename);break;case r.y2.MSBLOB:i.downloadMSBlob(e,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var t=this._options;return t.type===r.y2.IMAGE&&this._download?r.cQ.supportsMSBlob()?r.y2.MSBLOB:r.y2.DATAURL:t.type}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),a=n(7288),s=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._image=e,this._maxPixels=n,this._maxDimensions=r}var e;return(e=[{key:"needsResize",value:function(){var t=new r.FM(this._image.width,this._image.height),e=t.x*t.y>this._maxPixels,n=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return e||n}},{key:"resize",value:function(){var t=this,e=null,n=null,i=this._maxDimensions;return new r.JD((function(o,a){window.setTimeout((function(){var a=new r.FM(t._image.width,t._image.height).clone();if(a.x*a.y>t._maxPixels&&(a.copy(t._getDimensionsByMaxPixels()),e="maxMegaPixels"),null!==i&&(a.x>i||a.y>i)){var s=Math.min(i/a.x,i/a.y);a.multiply(s),e="maxDimensions"}a.floor(),n=t._createResizedImageCanvas(a),o({canvas:n,dimensions:a,reason:e})}),1e3)}))}},{key:"_createResizedImageCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this._image,r=document.createElement("canvas");r.width=t.x,r.height=t.y;var i=t.clone().subtract(e).divide(2),o=r.getContext("2d");return o.drawImage(n,0,0,n.width,n.height,i.x,i.y,e.x,e.y),r}},{key:"_getDimensionsByMaxPixels",value:function(){var t=this._image,e=this._maxPixels,n=t.width/t.height,i=t.height/t.width;return new r.FM(Math.sqrt(e*n),Math.sqrt(e*i)).floor()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e,this._sdk=n,this._mediator=r,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}var e;return(e=[{key:"exists",value:function(t){return!!this._map[t]}},{key:"add",value:function(t){var e=this,n=t.constructor.identifier;t.on("update",(function(){e._mediator.emit(r.gT.EVENTS.OPERATION_UPDATED,t)}));var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `".concat(n,"` does not appear in `operationsOrder`"));this._stack.set(i,t),this._map[n]=t,this._mediator.emit(r.gT.EVENTS.OPERATION_CREATED,t)}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===l(t)?t.constructor.identifier:t,i=this._stack.getStack();t=this.get(n),delete this._map[n];var o=i.map((function(t){return t.constructor.identifier})).indexOf(n);if(-1!==o){this._stack.removeAt(o);for(var a=o+1;a<i.length;a++){var s=i[a];s&&s.setDirty(!0)}e&&this._mediator.emit(r.gT.EVENTS.OPERATION_REMOVED,t)}}},{key:"get",value:function(t){return this._map[t]}},{key:"getOrCreate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[t]){var n=this._map[t];return n.set(e,!1),n}var r=this._available[t],i=new r(this._sdk,e);return this.add(i),i}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var t=this,e=this._stack.getStack().slice();this._stack.clear(),e.forEach((function(e){t.add(e)}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(m,t);var e,l,c,g=(l=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(l);if(c){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function m(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return f(this,m),(r=g.call(this))._ui=t,r._options=e,r._mediator=n,r._shallow=i,i||(r._initSDK(),r.operations=new u(d(r),r._sdk,r._mediator)),r}return(e=[{key:"_initFonts",value:function(){var t=r.xx.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new a.Z(this._ui,t);var e=this._fontManager.getFonts(),n=this._ui.getFontLoader();n.setFonts(e),n.load()}},{key:"setImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.reset();var n=null;n=this._sdk.parseExif(t),this._setImage(t,n),this._initWatermark()}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var t,e=this._options,n=e.logLevel,i=e.displayWelcomeMessage,o=e.debug,a=e.license,s=e.crossOrigin,l=this._options.editor,u=l.smoothDownscaling,c=l.smoothUpscaling,f=l.preferredRenderer,p=l.pixelRatio,h=l.transparent,d=l.clearColor;Array.isArray(d)?t=r.Il.fromArray(d):"string"==typeof d?t=r.Il.fromHex(d):d instanceof r.Il&&(t=d.clone());var y={logLevel:n,debug:o,displayWelcomeMessage:i,pixelRatio:p,smoothDownscaling:u,smoothUpscaling:c,transparent:h,crossOrigin:s,clearColor:t,license:a};this._sdk=new r.Bq(f,y)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getCrossOrigin",value:function(){return r.xx.getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(t)}},{key:"getOutputTextureDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(t)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(t)}},{key:"_setImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e)}},{key:"_ensureImageIsResized",value:function(){var t=this,e=this._sdk.getImage(),n=this._sdk.getRenderer(),i=this.getMaxMegapixels(),o=i?1e6*i:null,a=n.getMaxDimensions(),l=new s(e,o,a);return!this._resizedImage&&l.needsResize()?l.resize().then((function(e){var n=e.canvas;return e.dimensions,e.reason,t._resizedImage=n,t._sdk.setImage(n),n})):r.JD.resolve(e)}},{key:"export",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then((function(n){var i=t._options.editor.export;return new o(t._sdk,i,e).export().then((function(e){return t.emit("export",e),t._mediator.emit(r.gT.EVENTS.EXPORT,e,t),t._watermarkOperation&&(t._watermarkOperation.setEnabled(!0),t._sdk.render()),t._sdk.setAllOperationsToDirty(),e}))}))}},{key:"broadcastTransform",value:function(t,e){var n=this,i=new r.Bq.Operations.TransformOperation.TransformChange(t,e);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach((function(t){var e=n.operations.get(t);e&&e.transform(i)}))}},{key:"broadcastFlip",value:function(t){var e=this;["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach((function(n){var r=e.operations.get(n);r&&r.flip(t)}))}},{key:"broadcastRotate",value:function(t){var e=this;["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach((function(n){var r=e.operations.get(n);r&&r.rotate(t)}))}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":n(1233).Z,"1.0.1":n(463).Z,"2.0.0":n(9608).Z,"3.0.0":n(9879).Z,"3.1.0":n(7309).Z,"3.2.0":n(7362).Z,"3.4.0":n(6021).Z,"3.5.0":n(3102).Z,"3.6.0":n(4146).Z,"3.7.0":n(9848).Z,"3.8.0":n(5699).Z,"3.9.0":n(8481).Z}}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.9.0",n=this._serializers[e];if(!n)return r.JD.reject(new Error("No serializer for version ".concat(e," found.")));var i=new n(this);return i.serialize(t)}},{key:"deserialize",value:function(t){var e=this._serializers[t.version];return e?new e(this).deserialize(t):r.JD.reject(new Error("No serializer for version ".concat(t.version," found.")))}},{key:"save",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._options.editor.save;return this.serialize({image:e}).then((function(e){var r=JSON.stringify(e,null,2);if(t){var o="data:text/json;charset=utf-8;base64,"+window.encodeURI(window.btoa(r));i.downloadDataURL(o,n.fileBasename)}return r}))}},{key:"reset",value:function(){this._sdk.reset(),this.operations.reset()}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._sdk.getImage()}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(m.prototype,e),m}(r.vp);var m=n(9706),v=n(4340),_=n(6312),b=n(4923);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){return r.xx.byteArrayToString(r.DS.decode(t))},E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(s,t);var e,n,i,o=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(i){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return S(this,t)});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,s),(t=o.call(this))._mediator=new r.vp,t._fontLoader=new v.Z(k(t)),t._options=e,t._initOptions(),t._initEvents(),t._disposed=!1,t._isReady=!1,t._editor=new g(k(t),t._options,t._mediator),t._options.editor.image&&t._editor.setImage(t._options.editor.image),t._mediator.once(r.gT.EVENTS.EDITOR_READY,(function(){t._isReady=!0})),r.Zb.setLevel(t._options.logLevel),t._v(),t}return(e=[{key:"export",value:function(){var t;return(t=this._editor).export.apply(t,arguments)}},{key:"serialize",value:function(){var t;return(t=this._editor).serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return this._editor.deserialize(t)}},{key:"getEditor",value:function(){return this._editor}},{key:"isReady",value:function(){return this._isReady}},{key:"onReady",value:function(t){this._isReady?t():this._mediator.once(r.gT.EVENTS.EDITOR_READY,t)}},{key:"createFilter",value:function(t){return new _.Z(this,this._getOptions("filter")).instantiateFilterWithIdentifier(t)}},{key:"getTextDesignLayoutByID",value:function(t){return new(new b.Z(this,this._getOptions("textDesign")).getLayoutByIdentifier(t))}},{key:"getTextDesignAssetManager",value:function(){return r.Bq.Operations.SpriteOperation.TextDesignSprite.AssetManager}},{key:"getTextDesignFontManager",value:function(){return new a.Z(this,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}},{key:"_getOptions",value:function(t){var e=this.getEditor(),n=e.controls,i={};n&&n.get(t)&&(i=n.get(t).defaultOptions);var o=e.getOptions();return r.xx.deepDefaults({},o.editor.controlsOptions[t]||{},i)}},{key:"_initOptions",value:function(){if(this._options=r.xx.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=r.xx.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=r.xx.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=r.xx.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=r.xx.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=r.xx.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=r.xx.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=r.xx.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=r.xx.defaults(this._options.editor.export||{},{format:"image/png",type:r.y2.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=r.xx.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=r.xx.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=r.xx.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){var t=new window.Image;this._options.editor.image&&(t.src=this._options.editor.image,this._options.editor.image=t)}}},{key:"_v",value:function(){return!!this[C("X29wdGlvbnM=")][C("bGljZW5zZQ==")]||(r.Zb.error(C("TGljZW5zaW5n"),C("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),r.Zb.error(C("TGljZW5zaW5n"),C("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"setImage",value:function(t){this._editor.setImage(t)}},{key:"getAssetPath",value:function(t){var e=this._options.assets,n=e.baseUrl,r=e.resolver,i="".concat(n,"/").concat(t);r=r||function(t){return t},t.match(/(ftp|http|https):\/\//)&&(i=t);var o=t.replace(/assets\//,"").split("/");switch(o[0]){case"art-filters":return r("art-filter",{identifier:o[1],type:o[2].split(".")[0]});case"filters":return r("filter",{identifier:o[1].replace(/\.png$/g,"")});case"fonts":return r("font",{identifier:o[1].replace(/\.(woff|otf|ttf)$/g,"")});case"frames":return r("frame",{identifier:o[1],filename:o[2]});case"overlays":return r("overlay",{identifier:o[1].replace(/\.(png|jpg|jpeg)$/g,"")});case"stickers":var a=o[3].endsWith(".svg"),s="thumbs"===o[3];return r("sticker",{category:o[1],identifier:(a?o[3]:o[4]).replace(/\.(png|svg)$/g,""),variant:a?"svg":s?"thumb":"base"});case"text-design":return r("text-design",{type:"fonts"===o[1]?"font":"image",identifier:o[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")})}return null!=r&&(i=r(i)),i}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(t){var e=this;return this.deserialize(t).then((function(){return e.export()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(r.vp);E.prototype.identifier="engine-wrapper",E.Constants=r.gT,E.Events=r.gT.EVENTS,E.Utils=r.cQ,E.JSONLoader=m.Z,E.SDK=r.Bq},4340:(t,e,n)=>{n.d(e,{Z:()=>S});var r=n(1512),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._fontVariation=e||new r.Z({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}var e;return(e=[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: ".concat(this._fontVariation.getFontStyle()," ").concat(this._fontVariation.getFontWeight()," ").concat(30,"px ").concat(this._fontVariation.getFontFamily(),";\n    ")}},{key:"setFontVariation",value:function(t){this._fontVariation=t,this._setRulerStyle()}},{key:"getWidth",value:function(){return this._ruler?this._ruler.offsetWidth:-1}},{key:"dispose",value:function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._fontVariation=e,this._defaultFontRuler=new i,this._customFontRuler=new i(this._fontVariation)}var e;return(e=[{key:"observe",value:function(){var t=this,e=o();return new Promise((function(n,r){var i=window.setInterval((function(){if(t._defaultFontRuler.getWidth()!==t._customFontRuler.getWidth())return window.clearInterval(i),n();if(o()-e>=5e3){var a=new Error("Failed to load font ".concat(t._fontVariation.getFontFamily(),"."));return a.font=t._fontVariation,r(a)}}),50)}))}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=n(6982),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._fonts=[],this._observers=[]}var e;return(e=[{key:"add",value:function(t){this._fonts.push(t)}},{key:"load",value:function(){var t=this;return 0===this._fonts.length?Promise.resolve():(this._observers=[],this._fonts.forEach((function(e){t._observers.push(new a(e))})),s.Utils.executePromises(this._observers.map((function(t){return t.observe()}))))}},{key:"dispose",value:function(){this._observers.forEach((function(t){return t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y={italic:"i"},g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return h(this,t)});function o(){return c(this,o),i.apply(this,arguments)}return(e=[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),f(d(o.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var t=this._getFamiliesString(),e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css?family=".concat(t),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_getFamiliesString",value:function(){var t={};this._fonts.forEach((function(e){var n=e.getFontFamily(),r=e.getFontStyle(),i=e.getFontWeight();t[n]=t[n]||[],void 0!==i?t[n].push("".concat(i).concat(y[r]||"")):t[n].push(400)}));var e=[];for(var n in t){var r=t[n],i=r.length?":".concat(r.join(",")):"",o=n.replace(" ","+")+i;e.push(o)}return e.join("|")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(l);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(n);if(r){var i=w(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return b(this,t)});function o(){return v(this,o),i.apply(this,arguments)}return(e=[{key:"load",value:function(){return Promise.resolve()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(l);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._fonts=n,this._loadedFonts=[]}var e;return(e=[{key:"setFonts",value:function(t){this._fonts=t}},{key:"needsToLoad",value:function(){for(var t=this,e=function(e){var n=void 0;return t._fonts[e].getVariations().forEach((function(t){n=n||t.getProvider()})),n?{v:!0}:"continue"},n=0;n<this._fonts.length;n++){var r=e(n);if("continue"!==r&&"object"===O(r))return r.v}}},{key:"fontLoaded",value:function(t){var e=t.getFontFamily();return-1!==this._loadedFonts.indexOf(e)}},{key:"setFontLoaded",value:function(t){if(!this.fontLoaded(t)){var e=t.getFontFamily();this._loadedFonts.push(e)}}},{key:"load",value:function(){var t=this,e=this._fonts,n={google:new g(this._ui),file:new x(this._ui)},r=function(){for(var t in n)n[t].dispose()};e.filter((function(e){return!t.fontLoaded(e)})).forEach((function(t){t.getVariations().forEach((function(t){var e=t.getProvider();e&&n[e].add(t)}))}));var i=[];for(var o in n)i.push(n[o].load());return Promise.all(i).then((function(){r(),e.forEach((function(e){t.setFontLoaded(e)}))})).catch((function(t){throw r(),t}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},5030:(t,e,n)=>{n.r(e),n.d(e,{RenderType:()=>r,ImageFormat:()=>i,OptionType:()=>o,UniformType:()=>a,RendererType:()=>s});var r={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},i={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},o={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",INT2:"2i",INT3:"3i",INT4:"4i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},s={WEBGL:"webgl",CANVAS:"canvas"}},1385:(t,e,n)=>{n.d(e,{uO:()=>p,FN:()=>h,Il:()=>i.Z,y3:()=>o.Z,FM:()=>s.Z,Ae:()=>a.Z,vp:()=>l.Z,Zb:()=>r.Z,cQ:()=>u.Z,gT:()=>f,L6:()=>c.Z});var r=n(3678),i=n(8882),o=n(688),a=n(9385),s=n(6903),l=n(4842),u=n(3779),c=n(3066),f=n(5030),p=2e3,h=20},332:(t,e,n)=>{n.d(e,{Z:()=>We});var r={};n.r(r),n.d(r,{ColorOverlayFilter:()=>xe,OverlayFilter:()=>Ue,TintFilter:()=>Pe,UnpremultiplyFilter:()=>he});var i=n(1385),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930);const a=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._tracking=!1;var r=this,i=function(t){"function"==typeof e[t]?n[t]=function(){for(var n=e[t],i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(!r._tracking)return n.apply(e,a);var l=o(),u=n.apply(e,a),c=o()-l,f={functionName:t,arguments:a,duration:c};return r._trackedCalls.push(f),u}:n._makePropertyWrapper(t)};for(var a in e)i(a)}var e;return(e=[{key:"_makePropertyWrapper",value:function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,(function(){return e[t]})),this.__defineSetter__(t,(function(n){e[t]=n}))}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var t="Rendering";i.Zb.log(t,"Frame rendering results:"),i.Zb.log(t,"Context calls: ".concat(this._trackedCalls.length));var e={};this._trackedCalls.forEach((function(t){var n=t.functionName,r=t.duration;e[n]=e[n]||{totalDuration:0,calls:0},e[n].totalDuration+=r,e[n].calls++}));var n=[];for(var r in e){var o=e[r];o.averageDuration=o.totalDuration/o.calls,n.push({functionName:r,data:o})}n.sort((function(t,e){return e.data.totalDuration-t.data.totalDuration})),(n=n.slice(0,3)).forEach((function(e){i.Zb.log(t,"".concat(e.functionName,": ").concat(e.data.calls," calls, ").concat(e.data.totalDuration.toFixed(2),"ms"))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)void 0===e[o]&&(e[o]=i[o])}return e};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,o,a,l=(o=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(o);if(a){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return p(this,t)});function d(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this,d),(n=l.call(this))._options=s(r,{pixelRatio:1,transparent:!1,clearColor:i.Il.BLACK,debug:!1}),n.setMaxListeners(0),n._width=t||800,n._height=e||600,n._dimensions=new i.FM(n._width,n._height),n._maxTextureSize=null,n._pixelRatio=n._options.pixelRatio,n._clearColor=n._options.transparent?i.Il.TRANSPARENT:n._options.clearColor||i.Il.BLACK,n}return e=d,r=[{key:"isSupported",value:function(){return!0}}],(n=[{key:"setCanvas",value:function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new i.FM(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width="".concat(this._width/this._pixelRatio,"px"),this._canvas.style.height="".concat(this._height/this._pixelRatio,"px"))),this._dimensions=t.clone()}},{key:"_createContext",value:function(){i.Zb.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){i.Zb.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(t){i.Zb.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(t){this._filterManager=t}},{key:"isOfType",value:function(t){return this._type===t}},{key:"dispose",value:function(){i.Zb.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}])&&c(e.prototype,n),r&&c(e,r),d}(i.vp);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(l,t);var e,n,r,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(o);if(a){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this)).id=l.id++,e._onSourceLoaded=e._onSourceLoaded.bind(b(e)),e._renderers=[],e._glTextures={},e._source=t,e._dirty=!0,e._glUnit=0,e._mipMapping=!1,e._magFilter=l.DefaultMagFilter,e._minFilter=l.DefaultMinFilter,e._repeatX=l.ClampToEdge,e._repeatY=l.ClampToEdge,e._pixelRatio=1,e._loaded=!1,e._frame=new i.Ae(0,0,100,100),t&&e._loadSource(),e}return e=l,r=[{key:"getGLFilter",value:function(t,e){switch(e){case l.LinearFilter:return t.LINEAR;case l.NearestFilter:return t.NEAREST;case l.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case l.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}}}],(n=[{key:"resizeTo",value:function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var t=this._source,e=t.complete,n="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||n)return this._onSourceLoaded();t.addEventListener&&t.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var t=new i.FM(this._source.width,this._source.height);i.cQ.isPowerOfTwo(t)?(i.Zb.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=l.TrilinearFilter,this._mipMapping=!0):(this._minFilter=l.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new i.Ae(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return function(t){if(Array.isArray(t))return g(t)}(t=this._renderers)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}},{key:"getGLFilter",value:function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(t){this._loaded=t}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(t){this._source=t}},{key:"getGLTextureForRenderer",value:function(t){return this._glTextures[t.id]}},{key:"setGLTextureForRenderer",value:function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getDimensions",value:function(){return new i.FM(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(t){this._glUnit=t}},{key:"setMinFilter",value:function(t){this._minFilter=t}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(t){this._magFilter=t}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(t){this._repeatX=t}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(t){this._repeatY=t}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(t,e){switch("x"===e?this.getRepeatX():this.getRepeatY()){case l.ClampToEdge:return t.CLAMP_TO_EDGE;case l.Repeat:return t.REPEAT;case l.MirroredRepeat:return t.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(t){this._dirty=t}},{key:"disposeGLTextures",value:function(){var t=this;this._renderers.forEach((function(e){t.disposeGLTexturesForRenderer(e)}))}},{key:"disposeGLTexturesForRenderer",value:function(t){this._glTextures[t.id]&&(t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(t){this._mipMapping=t}},{key:"dispose",value:function(){this.disposeGLTextures(),this._source=void 0}}])&&m(e.prototype,n),r&&m(e,r),l}(i.vp);x.NearestFilter=0,x.LinearFilter=1,x.BilinearFilter=2,x.TrilinearFilter=3,x.DefaultMagFilter=x.NearestFilter,x.DefaultMinFilter=x.LinearFilter,x.ClampToEdge=0,x.Repeat=1,x.MirroredRepeat=2,x.id=0;const O=x,S=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._width=e,this._height=n,this._pixelRatio=r,this._baseTexture=new O,this._canvas=i||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}var e;return(e=[{key:"_createCanvas",value:function(){return i.cQ.createCanvas()}},{key:"clear",value:function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getDimensions",value:function(){return new i.FM(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null,this._baseTexture.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new i.Ae(0,0,e.getWidth(),e.getHeight())}var e;return(e=[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach((function(e){return e.resizeTo(t)}))}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:e}),r.clear()}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;return 1===e.length?(e[0].apply(this._renderer,n,r),this._textures.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach((function(t,e){if(t===a)t.apply(r._renderer,i,n);else{t.apply(r._renderer,i,o);var s=i;i=o,o=s}})),this._textures.push(i),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._textures.pop();return e||(e=new S(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"dispose",value:function(){}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=i.gT.RendererType,I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(s,t);var e,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(n);if(r){var i=D(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return R(this,t)});function s(){var t;C(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n)))._type=P.CANVAS,t.setCanvas(t._options.canvas||t._createCanvas()),t}return(e=[{key:"_createCanvas",value:function(){return i.cQ.createCanvas()}},{key:"_createContext",value:function(){var t=this._canvas.getContext("2d");return this._options.debug&&(t=new a(t)),this.id=t.id=s.contextId++,this._context=t,t.renderer=this,this.emit("context",t),t}},{key:"_setupContext",value:function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach((function(e){t[e]&&(t[e]=!0)})),this._defaultRenderTarget=new S(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new k(this)}},{key:"render",value:function(t){var e=this._renderTarget.getContext(),n=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(n),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var r=this._canvas,i=r.width,o=r.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)}},{key:"renderDisplayObject",value:function(t,e){var n=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(t){this._renderTarget=t}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(d);I.contextId=0,I.type="Canvas2D";const A=I;var F=n(16);function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const M=function(){function t(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];j(this,t),this._renderer=e,this._gl=e.getContext(),this._width=n,this._height=r,this._frame=null,this._pixelRatio=o,this._projectionMatrix=new i.y3,this._mipMapping=!1,this._baseTexture=new O;var s=this._baseTexture.getFrame();s.width=n,s.height=r,this._baseTexture.setPixelRatio(o),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=a,this._filterStack=[{renderTarget:this,filter:[]}],a||this._initFrameBuffer()}var e;return(e=[{key:"resizeTo",value:function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var t=O.DefaultMinFilter;return this._mipMapping&&(t=O.TrilinearFilter),t}},{key:"_getMagFilter",value:function(){return O.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var t=this._gl,e=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t);var r=new i.FM(this._width,this._height);i.cQ.isPowerOfTwo(r)?(i.Zb.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Il.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new i.Ae(0,0,this._width,this._height),n=e.x,r=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-n*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-n*t.a,t.ty=-1-r*t.d)}},{key:"_initFrameBuffer",value:function(){var t=this._gl;this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new i.FM(this._width,this._height)),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var t=this._gl;this._baseTexture.dispose(),this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}var e;return(e=[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(n);if(r){var i=H(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return W(this,t)});function a(){var t;L(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=o.call.apply(o,[this].concat(n)))._maxBatchSize=i.uO,t._vertices=new ArrayBuffer(4*i.uO*i.FN),t._positions=new Float32Array(t._vertices),t._colors=new Uint32Array(t._vertices),t._indices=new Uint16Array(6*i.uO);for(var s=0,l=0;s<6*i.uO;s+=6,l+=4)t._indices[s+0]=l+0,t._indices[s+1]=l+1,t._indices[s+2]=l+2,t._indices[s+3]=l+0,t._indices[s+4]=l+2,t._indices[s+5]=l+3;return t._shaders=[],t._sprites=[],t._currentBatchSize=0,t._onContextChange(),t}return(e=[{key:"render",value:function(t){var e=t.getTexture(),n=e.getFrame();e.getBaseTexture(),this._currentBatchSize>=this._maxBatchSize&&this.flush();var r=e.getUVs();if(r){var o=this._currentBatchSize*i.FN;this._addVertexCoordinates(t,o,n),this._addTextureUVs(t,o,r),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}}},{key:"_addColors",value:function(t,e){var n=this._colors,r=t.getTint(),i=(r>>16)+(65280&r)+((255&r)<<16)+(255*t.getWorldAlpha()<<24);n[e+4]=n[e+9]=n[e+14]=n[e+19]=i}},{key:"_addTextureUVs",value:function(t,e,n){var r=this._positions,i=n.getUVsAt(0);r[e+2]=i.x,r[e+3]=i.y,i=n.getUVsAt(1),r[e+7]=i.x,r[e+8]=i.y,i=n.getUVsAt(2),r[e+12]=i.x,r[e+13]=i.y,i=n.getUVsAt(3),r[e+17]=i.x,r[e+18]=i.y}},{key:"_addVertexCoordinates",value:function(t,e,n){for(var r=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(n,o),s=0;s<4;s++)r[e+5*s]=a[s].x,r[e+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*i.uO)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*i.FN);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r=0,o=null,a=null,s=null,l=null,u=!1,c=null,f=0,p=0,h=this._currentBatchSize;p<h;p++){if(a=(c=this._sprites[p]).getTexture().getBaseTexture(),u=s!==(l=c.getShader()||this._shader),(o!==a||u)&&(this._renderBatch(o,r,f),f=p,r=0,o=a,u)){s=l,t.setShader(s);var d=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",d),s.syncUniforms(),e.activeTexture(e.TEXTURE0)}r++}this._renderBatch(o,r,f),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(t,e,n){if(0!==e){var r=this._renderer,i=r.getContext(),o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*n*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var t=this._renderer.getContext();for(var e in this._sprites)e.dispose();this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,N(H(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(B);var V=n(5030),Z=i.Zb,X=i.cQ;const Y=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._vertexSource=n,this._fragmentSource=r,this._uniforms=i||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}var e;return(e=[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(t,e){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,t),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,i.FN,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,i.FN,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,i.FN,16)}},{key:"syncUniforms",value:function(){var t=this;Object.keys(this._uniforms).forEach((function(e){t.syncUniform(e)}))}},{key:"syncUniform",value:function(t){var e=this._renderer.getContext(),n=this._uniforms[t],r=this._uniformLocations[t];switch(n.type){case V.UniformType.SAMPLER2D:e.uniform1i(r,n.value);break;case V.UniformType.INT:case V.UniformType.INT1:e.uniform1i(r,n.value);break;case V.UniformType.INT2:e.uniform2i(r,n.value[0],n.value[1]);break;case V.UniformType.INT3:e.uniform3i(r,n.value[0],n.value[1],n.value[2]);break;case V.UniformType.INT4:e.uniform4i(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case V.UniformType.FLOAT:case V.UniformType.FLOAT1:e.uniform1f(r,n.value);break;case V.UniformType.FLOAT2:e.uniform2f(r,n.value[0],n.value[1]);break;case V.UniformType.FLOAT3:e.uniform3f(r,n.value[0],n.value[1],n.value[2]);break;case V.UniformType.FLOAT4:e.uniform4f(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case V.UniformType.FLOAT_VECTOR2:e.uniform2fv(r,n.value);break;case V.UniformType.MAT3:case V.UniformType.MAT3FV:e.uniformMatrix3fv(r,!1,n.value);break;case V.UniformType.MAT4:e.uniformMatrix4fv(r,!1,n.value);break;default:Z.warn(this.constructor.name,"Unknown uniform type: ".concat(n.type))}}},{key:"_cacheAttributeLocations",value:function(){var t=this,e=this._renderer.getContext();this._attributes.forEach((function(n){t._attributeLocations[n]=e.getAttribLocation(t._program,n)}))}},{key:"_cacheUniformLocations",value:function(){var t=this,e=this._renderer.getContext();Object.keys(this._uniforms).forEach((function(n){t._uniformLocations[n]=e.getUniformLocation(t._program,n)}))}},{key:"_addPrecisionToSource",value:function(t){var e=this._renderer.getMaxFloatPrecision(),n="mediump";return X.isMobile()&&"highp"===e&&(n="highp"),"precision ".concat(n," float;\n").concat(t)}},{key:"_compile",value:function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var n=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,n);this._fragmentShader=r;var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))this._program=i;else{var o=t.getProgramInfoLog(i);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(i),Z.error(this.constructor.name,"WebGL program linking error: ".concat(o))}}},{key:"_compileShader",value:function(t,e){var n=this._renderer.getContext(),r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);n.isContextLost()&&(i="WebGL context lost"),n.deleteShader(r),Z.error(this.constructor.name,"WebGL shader compilation error: ".concat(i))}return r}},{key:"setUniform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,n&&this.syncUniform(t)}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=i.gT.UniformType,tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=J(e);if(n){var i=J(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Q(this,t)});function i(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||i.defaultVertexSource,n=n||i.defaultFragmentSource,r.call(this,t,e,n,i.defaultUniforms,i.defaultAttributes)}return i}(Y);tt.defaultVertexSource=n(5209),tt.defaultFragmentSource=n(9059);var et=new i.y3;tt.defaultUniforms={u_image:{type:$.SAMPLER2D,value:0},u_projMatrix:{type:$.MAT3,value:et.toArray()}},tt.defaultAttributes=["a_position","a_texCoord","a_color"];const nt=tt,rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._position=new i.FM(0,0),this._scale=new i.FM(1,1),this._pivot=new i.FM(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new i.y3,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new i.Ae(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new i.Ae(0,0,1,1),this._tint=16777215,this._filterRectangle=new i.Ae(0,0,0,0)}var e;return(e=[{key:"renderWebGL",value:function(t){i.Zb.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(t){i.Zb.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var t=this._parent?this._parent.getWorldTransform():i.y3.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(t){this._shaders.push(t)}},{key:"removeShader",value:function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)}},{key:"removeShaderAt",value:function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(t,e){t instanceof i.FM?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(t,e){t instanceof i.FM?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(t,e){t instanceof i.FM?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(t){this._alpha=t}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(t){this._parent=t}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(t){this._filterRectangle.copy(t)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(t){this._tint=t}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(t){this._visible=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var it=n(2861),ot=i.gT.RendererType;const at=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new i.Ae(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}var e;return(e=[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach((function(e){return e.resizeTo(t)}))}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._renderTargets.pop();return e||(e=new M(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,n.getFrame());var i=e[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var l=i.getAttributeLocations();return s.vertexAttribPointer(l.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(l.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(l.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,n,r),this._renderTargets.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=t[t.length-1];t.forEach((function(t,e){if(t===a)t.apply(r._renderer,i,n,!0);else{t.apply(r._renderer,i,o,!0);var s=i;i=o,o=s}})),this._renderTargets.push(i),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(ot.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new it.Z(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var st=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=n,this.data=r}var e;return(e=[{key:"fromNodeCanvasImage",value:function(e){var n=new Canvas(e.width,e.height).getContext("2d");n.drawImage(e,0,0);var r=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,r.data)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e,n){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?dt(t):e}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=i.gT.RendererType,mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(u,t);var e,n,r,o,s,l=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yt(o);if(s){var n=yt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ht(this,t)});function u(){var t;ut(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=l.call.apply(l,[this].concat(n)))._type=gt.WEBGL,t._fakeObject=new rt,t._onContextLost=t._onContextLost.bind(dt(t)),t._onContextRestored=t._onContextRestored.bind(dt(t)),t.setCanvas(t._options.canvas||i.cQ.createCanvas()),t._cachedBlitCanvas=i.cQ.createCanvas(),t.shaders=t._initShaders(),t.renderers=t._initRenderers(),t}return e=u,r=[{key:"isSupported",value:function(){var t=i.cQ.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl"),n=!!e;if(n){var r=i.L6.determineGPUName(e);n&=!i.L6.isGPUBlacklisted(r)}return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),n}}],(n=[{key:"_onContextLost",value:function(t){t.preventDefault(),i.Zb.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(t){t.preventDefault(),i.Zb.warn(this.constructor.name,"Failed to create WebGL context: ".concat(t.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){i.Zb.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new at(this),this._currentObjectRenderer=new B(this)}},{key:"setShader",value:function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)}},{key:"setCanvas",value:function(t){this._canvas&&this._removeContextEventListeners(),ft(yt(u.prototype),"setCanvas",this).call(this,t),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(t){var e=this._context,n=t.getAttributes(),r=t.getAttributeLocations();n.forEach((function(t){var n=r[t];e.enableVertexAttribArray(n)}))}},{key:"_initShaders",value:function(){return{default:new nt(this)}}},{key:"_initRenderers",value:function(){return{sprite:new G(this)}}},{key:"_createContext",value:function(){var t=this._canvas,e=null,n={preserveDrawingBuffer:!0};return e=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug&&(e=window.WebGLDebugUtils.makeDebugContext(e,null,(function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")}))),this._options.debug&&(e=new a(e)),this.id=e.id=u.contextId++,this._context=e,e.renderer=this,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}},{key:"_setupContext",value:function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new M(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ft(yt(u.prototype),"resizeTo",this).call(this,t,e),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t)}},{key:"setRenderTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()}},{key:"render",value:function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer}},{key:"getOrCreateGLTexture",value:function(t){var e=this._context,n=t.getGLTextureForRenderer(this);return n||(n=e.createTexture(),t.setGLTextureForRenderer(n,this)),n}},{key:"updateTexture",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getSource(),r=!!n,o=this._context,a=t.getGLUnit(),s=this.getOrCreateGLTexture(t);if(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,s),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&r)if(n instanceof st)o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width,n.height,0,o.RGBA,o.UNSIGNED_BYTE,n.data);else{var l=i.cQ.convertHtmlImageToRGBACanvas(n,this._cachedBlitCanvas);o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l)}t.isMipMappingEnabled()?o.generateMipmap(o.TEXTURE_2D):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t.getGLRepeat(o,"x")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t.getGLRepeat(o,"y"))),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t.getGLFilter(o,"min")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t.getGLFilter(o,"mag")),o.activeTexture(o.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var t=this.maxTextureDimensions;if(void 0===t){var e=i.cQ.createCanvas(),n=e.getContext("webgl")||e.getContext("experimental-webgl");if(n){var r=n.getParameter(n.MAX_TEXTURE_SIZE),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),t=r}else t=null;this.maxTextureDimensions=t}return t}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){for(var t in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this.shaders)this.shaders[t].dispose(),delete this.shaders[t];this._removeContextEventListeners();var e=this._context.getExtension("WEBGL_lose_context");e&&e.loseContext()}}])&&ct(e.prototype,n),r&&ct(e,r),u}(d);mt.contextId=0,mt.type="WebGL";const vt=mt;var _t=n(3990),bt=n(3638),wt=n.n(bt);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e,n){return(St="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ct(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ct(n);if(r){var i=Ct(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tt(this,t)});function a(){var t;Ot(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n)))._children=[],t._filters=[],t}return(e=[{key:"addFilter",value:function(t){this._filters.push(t)}},{key:"removeFilter",value:function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)}},{key:"setFilters",value:function(t){this._filters=t}},{key:"addChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)}},{key:"prependChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)}},{key:"hasChild",value:function(t){return-1!==this._children.indexOf(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):i.Zb.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach((function(e){e.renderWebGL(t)})),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(t){}},{key:"renderCanvas",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach((function(e){e.renderCanvas(t)})),this._filters&&this._filters.length&&e.popFilters()}}},{key:"_renderCanvas",value:function(t){}},{key:"updateTransform",value:function(){St(Ct(a.prototype),"updateTransform",this).call(this),this._children.forEach((function(t){t.updateTransform()}))}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(rt),Rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uvs=[new i.FM(0,0),new i.FM(1,0),new i.FM(1,1),new i.FM(0,1)]}var e;return(e=[{key:"update",value:function(t,e){var n=this._uvs[0];n.x=t.x/e.width,n.y=t.y/e.height,(n=this._uvs[1]).x=(t.x+t.width)/e.width,n.y=t.y/e.height,(n=this._uvs[2]).x=(t.x+t.width)/e.width,n.y=(t.y+t.height)/e.height,(n=this._uvs[3]).x=t.x/e.width,n.y=(t.y+t.height)/e.height}},{key:"getUVsAt",value:function(t){return this._uvs[t]}},{key:"getUVs",value:function(){return this._uvs}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function At(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?Ft(t):e}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(l,t);var e,n,r,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jt(o);if(a){var n=jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return At(this,t)});function l(t,e){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=s.call(this),!(t instanceof O))throw new Error("`baseTexture` should be an instance of BaseTexture");return n._uvs=new Rt,n._frame=e?e.clone():null,n._frameLocked=!!e,n._onBaseTextureLoaded=n._onBaseTextureLoaded.bind(Ft(n)),n._onBaseTextureUpdated=n._onBaseTextureUpdated.bind(Ft(n)),n._frame||(n._frame=new i.Ae(0,0,1,1)),n.setBaseTexture(t),n}return e=l,r=[{key:"fromImage",value:function(t){return new l(new O(t))}},{key:"fromCanvas",value:function(t){return new l(new O(t))}}],(n=[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var t=this._baseTexture.getFrame(),e=t.width,n=t.height;this._frame.width=e,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),n=e.width,r=e.height;this._frameLocked||(this._frame=new i.Ae(0,0,n,r)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new i.FM(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this._baseTexture.dispose()}}])&&Pt(e.prototype,n),r&&Pt(e,r),l}(i.vp);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lt(t,e,n){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ht=i.gT.RendererType;const Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wt(n);if(r){var i=Wt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ut(this,t)});function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return zt(this,a),(e=o.call(this,new O,new i.Ae(0,0,n,r)))._loaded=!0,e._width=n,e._height=r,e._pixelRatio=s,e._renderer=t,e._setupFilterManager(),e._setupBuffer(),e.setBaseTexture(e._renderTarget.getBaseTexture()),e._updateUVs(),e}return(e=[{key:"_setupFilterManager",value:function(){this._filterManager&&this._filterManager.dispose(),this._renderer.isOfType(Ht.WEBGL)?this._filterManager=new at(this._renderer):this._renderer.isOfType(Ht.CANVAS)&&(this._filterManager=new k(this._renderer)),this._filterManager.resizeTo(new i.FM(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(Ht.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(Ht.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new M(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new S(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(t){this._renderTarget.clear(t)}},{key:"resizeTo",value:function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))}},{key:"render",value:function(t){if(this._renderer.isOfType(Ht.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(Ht.CANVAS))throw new Error("RenderTexture does not support rendering via ".concat(this._renderer.constructor.name));this._renderCanvas(t)}}},{key:"_renderWebGL",value:function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach((function(t){t.updateTransform()}));var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"_renderCanvas",value:function(t){t.getWorldTransform().reset(),t.getChildren().forEach((function(t){t.updateTransform()}));var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose(),Lt(Wt(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Mt);var Vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=new F.Engine.Container,this._sprite=new F.Engine.Sprite,this._container.addChild(this._sprite)}var e;return(e=[{key:"render",value:function(t,e,n){var r=n.getDimensions(),i=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(i):this._renderTexture=new F.Engine.RenderTexture(t,i.x,i.y);var o=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,o)}},{key:"_updateSprite",value:function(t,e,n,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new F.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(t){return new F.Vector2(F.Utils.nextHighestPOT(t.x),F.Utils.nextHighestPOT(t.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?qt(t):e}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(n);if(r){var i=Kt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Yt(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this))._onTextureUpdate=e._onTextureUpdate.bind(qt(e)),e._texture=t,e._shader=null,e._width=0,e._height=0,e._anchor=new i.FM(0,0),e._canvasSmoothingEnabled=!0,e.setTexture(t),e}return(e=[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new Vt),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(t){var e=this._worldTransform,n=this._texture.getFrame(),r=n.width,i=n.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-r|0,s=this._anchor.y*-i|0,l=t.getContext();l.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),l.globalAlpha=this.getWorldAlpha();var u=this._texture.getBaseTexture(),c=u.getPixelRatio(),f=u.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,t.beforeDraw&&t.beforeDraw(l),l.drawImage(f,0,0,(f.naturalWidth||r)*c,(f.naturalHeight||i)*c,a*o,s*o,r*o,i*o)}},{key:"isAtPosition",value:function(t){var e=this._worldTransform.applyInverseToVector(t),n=this._texture.getFrame(),r=n.width,o=n.height,a=new i.FM(-r,-o);a.multiply(this._anchor);var s=a.clone().add(r,o);return!(e.x<a.x||e.x>s.x||e.y<a.y||e.y>s.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),n=this._worldTransform,r=this._anchor,i=n.rectangleToCoordinates(e,r),o=i[0].x,a=i[0].y,s=o,l=a;i.forEach((function(t){var e=t.x,n=t.y;o=Math.min(o,e),a=Math.min(a,n),s=Math.max(s,e),l=Math.max(l,n)})),t.x=o,t.width=Math.abs(s-o),t.y=a,t.height=Math.abs(l-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),t&&this._texture.dispose(),this._texture=null,this._potRenderer&&(t&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(t){this._shader=t}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new i.FM(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(t,e){t instanceof i.FM?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(t){this._smoothDownscaling=t}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Et),Jt={TextureShader:nt};function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e,n){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ie(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=i.gT.OptionType,ae=i.gT.UniformType,se=i.gT.RendererType;const le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ie(n);if(r){var i=ie(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return re(this,t)});function a(){return te(this,a),o.apply(this,arguments)}return(e=[{key:"_initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=nt.defaultUniforms,this._attributes=nt.defaultAttributes,this._vertexSource=nt.defaultVertexSource,this._fragmentSource=nt.defaultFragmentSource,this._initUniforms(),ee(ie(a.prototype),"_initOptions",this).call(this,t)}},{key:"_initUniforms",value:function(){for(var t in this._uniforms={},this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var n in this.availableOptions){var r=this.availableOptions[n];r.uniformType?this._uniforms["u_".concat(n)]={type:r.uniformType,value:r.default||null}:i.Zb.trace(this.constructor.name,"Option `".concat(n,"` is missing a `uniformType`!"))}}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];ee(ie(a.prototype),"setOption",this).call(this,t,e,n);var r=e,i=this.availableOptions[t];if(i.uniformType){var o="u_".concat(t);switch(i.type){case oe.COLOR:i.uniformType===ae.FLOAT4?r=e.toGLColor():i.uniformType===ae.FLOAT3&&(r=e.toRGBGLColor());break;case oe.VECTOR2:r=[e.x,e.y];break;case oe.COLOR_MATRIX:r=[e.a,e.b,e.c,e.d,e.f,e.g,e.h,e.i,e.k,e.l,e.m,e.n,e.p,e.q,e.r,e.s];var s=[e.e,e.j,e.o,e.t];this._uniforms[o+"_vec"]={value:s,type:ae.FLOAT4}}this.setUniform(o,r)}}},{key:"setUniform",value:function(t,e){this._uniforms[t].value=e}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"syncUniform",value:function(t){this._shaders.forEach((function(e){e.syncUniform(t)}))}},{key:"syncUniforms",value:function(){this._shaders.forEach((function(t){t.syncUniforms()}))}},{key:"getShaderForRenderer",value:function(t){var e=t.getContext(),n=this._shaders[e.id];return n||(n=new Y(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=n),n}},{key:"apply",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(se.WEBGL)?this._applyWebGL(t,e,n,r):t.isOfType(se.CANVAS)&&this._applyCanvas(t,e,n,r)}},{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(n),r&&n.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),o=n.getContext();i.Zb.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),o.clearRect(0,0,r.width,r.height),o.drawImage(r,0,0)}},{key:"dispose",value:function(){this._shaders.forEach((function(t){return t.dispose()})),this._shaders=[]}},{key:"_blurImage",value:function(t,e,n){var r=t.getCanvas(),o=Math.min(1,10/(n*Math.min(r.width,r.height))),a=i.cQ.createCanvas();a.width=Math.round(r.width*o),a.height=Math.round(r.height*o);var s=a.getContext("2d");s.drawImage(r,0,0,r.width,r.height,0,0,a.width,a.height);var l=n*Math.min(a.width,a.height),u=s.getImageData(0,0,a.width,a.height);wt().stackBlurCanvasRGBA(u,0,0,a.width,a.height,l),s.putImageData(u,0,0),e.getContext().drawImage(a,0,0,a.width,a.height,0,0,r.width,r.height)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(_t.Z);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fe(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var he=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(o,t);var e,r,i=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=pe(e);if(r){var i=pe(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return fe(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this))._fragmentSource=n(8737),t}return o}(le);function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _e=i.gT.OptionType,be=i.gT.UniformType,we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ve(r);if(o){var n=ve(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return me(this,t)});function s(){var t;ye(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(5994),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=this._options.color,l=o.getImageData(0,0,r.width,r.height),u=a.getImageData(0,0,r.width,r.height),c=r.width*r.height,f=new i.Il,p=new i.Il,h=0;h<4*c;h+=4){f.set(l.data[h]/255,l.data[h+1]/255,l.data[h+2]/255,l.data[h+3]/255),p.set(u.data[h]/255,u.data[h+1]/255,u.data[h+2]/255,u.data[h+3]/255);var d=p.r+f.a*(f.r-p.r);u.data[h]=255*(d+f.a*(s.r-d));var y=p.g+f.a*(f.g-p.g);u.data[h+1]=255*(y+f.a*(s.g-y));var g=p.b+f.a*(f.b-p.b);u.data[h+2]=255*(g+f.a*(s.b-g))}a.putImageData(u,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);we.prototype.availableOptions={color:{type:_e.COLOR,default:i.Il.WHITE,uniformType:be.FLOAT4}};const xe=we;function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=i.gT.OptionType,Re=i.gT.UniformType,De=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ce(r);if(o){var n=Ce(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Te(this,t)});function s(){var t;Se(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(2426),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),o=e.getContext(),a=n.getContext(),l=o.getImageData(0,0,r.width,r.height),u=this._options,c=u.mode,f=u.color,p=f.r,h=f.g,d=f.b,y=f.a,g=[.2125,.7154,.0721];switch(c){case s.MODES.SOLID:for(var m=0;m<r.width*r.height;m++){var v=4*m;l.data[v]+=(255*p-l.data[v])*y,l.data[v+1]+=(255*h-l.data[v+1])*y,l.data[v+2]+=(255*d-l.data[v+2])*y}break;case s.MODES.COLORIZED:for(var _=0;_<r.width*r.height;_++){var b=4*_,w=l.data[b]/255*g[0]+l.data[b+1]/255*g[1]+l.data[b+2]/255*g[2],x=new i.Il(w*p,w*h,w*d);l.data[b]+=(255*x.r-l.data[b])*y,l.data[b+1]+=(255*x.g-l.data[b+1])*y,l.data[b+2]+=(255*x.b-l.data[b+2])*y}}a.putImageData(l,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);De.MODES={NONE:0,SOLID:1,COLORIZED:2},De.prototype.availableOptions={color:{type:Ee.COLOR,default:i.Il.WHITE,uniformType:Re.FLOAT4},mode:{type:Ee.NUMBER,default:De.MODES.NONE,uniformType:Re.INT}};const Pe=De;function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=i.gT.OptionType,ze=i.gT.UniformType,Le=1e-6,Ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Me(r);if(o){var n=Me(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return je(this,t)});function s(){var t;Ae(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(888),t._lastImage=null,t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=this._options.overlayTexture.getRenderTarget().getContext(),o=e.getCanvas(),a=e.getContext(),l=n.getContext(),u=a.getImageData(0,0,o.width,o.height),c=r.getImageData(0,0,o.width,o.height),f=this._options,p=f.blendMode,h=f.alpha,d=new i.Il,y=new i.Il,g=new i.Il,m=0;m<o.width*o.height*4;m+=4){d.set(u.data[m]/255,u.data[m+1]/255,u.data[m+2]/255,u.data[m+3]/255),y.set(c.data[m]/255,c.data[m+1]/255,c.data[m+2]/255,c.data[m+3]/255);var v=void 0,_=void 0,b=void 0,w=void 0,x=void 0,O=void 0,S=void 0,k=void 0,T=void 0;switch(p){case s.BLEND_MODES.NORMAL:g.set(d.r+y.a*h*(y.r-d.r),d.g+y.a*h*(y.g-d.g),d.b+y.a*h*(y.b-d.b),d.a);break;case s.BLEND_MODES.OVERLAY:v=1-2*(1-d.r)*(1-y.r),_=2*d.r*y.r,b=v+(d.r<.5?1:0)*(_-v),w=1-2*(1-d.g)*(1-y.g),x=2*d.g*y.g,O=w+(d.g<.5?1:0)*(x-w),S=1-2*(1-d.b)*(1-y.b),k=2*d.b*y.b,T=S+(d.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.HARD_LIGHT:v=1-2*(1-y.r)*(1-d.r),_=2*y.r*d.r,b=v+(y.r<.5?1:0)*(_-v),w=1-2*(1-y.g)*(1-d.g),x=2*y.g*d.g,O=w+(y.g<.5?1:0)*(x-w),S=1-2*(1-y.b)*(1-d.b),k=2*y.b*d.b,T=S+(y.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.SOFT_LIGHT:v=2*d.r*(1-y.r)+(2*y.r-1)*Math.sqrt(d.r),_=2*d.r*y.r+d.r*d.r*(1-2*y.r),b=v+(y.r<.5?1:0)*(_-v),w=2*d.g*(1-y.g)+(2*y.g-1)*Math.sqrt(d.g),x=2*d.g*y.g+d.g*d.g*(1-2*y.g),O=w+(y.g<.5?1:0)*(x-w),S=2*d.b*(1-y.b)+(2*y.b-1)*Math.sqrt(d.b),k=2*d.b*y.b+d.b*d.b*(1-2*y.b),T=S+(y.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.MULTIPLY:b=d.r*y.r,O=d.g*y.g,T=d.b*y.b,g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.DARKEN:b=Math.min(d.r,y.r),O=Math.min(d.g,y.g),T=Math.min(d.b,y.b),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.LIGHTEN:b=Math.max(d.r,y.r),O=Math.max(d.g,y.g),T=Math.max(d.b,y.b),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.SCREEN:b=1-(1-d.r)*(1-y.r),O=1-(1-d.g)*(1-y.g),T=1-(1-d.b)*(1-y.b),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(y.r,Le))),O=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(y.g,Le))),T=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(y.b,Le))),g.set(d.r+y.a*h*(b-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a)}u.data[m]=255*g.r,u.data[m+1]=255*g.g,u.data[m+2]=255*g.b,u.data[m+3]=255*g.a}l.putImageData(u,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);Ne.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},Ne.prototype.availableOptions={blendMode:{type:Be.NUMBER,default:Ne.BLEND_MODES.NORMAL,uniformType:ze.INT},overlayImage:{type:Be.NUMBER,required:!0,uniformType:ze.SAMPLER2D},overlayTexture:{type:Be.OBJECT,required:!0},alpha:{type:Be.NUMBER,default:1,uniformType:ze.FLOAT}};const Ue=Ne,We={WebGLRenderer:vt,CanvasRenderer:A,WebGLFilterManager:at,CanvasFilterManager:k,DisplayObject:rt,Container:Et,BaseTexture:O,Texture:Mt,RenderTexture:Gt,WebGLRenderTarget:M,CanvasRenderTarget:S,Sprite:Qt,Shaders:Jt,Shader:Y,Filter:le,Filters:r,PixelArrayImage:st,autoDetectRenderer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return vt.isSupported()?new vt(t,e,n):new A(t,e,n)}}},2861:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}var e;return(e=[{key:"map",value:function(t,e){var n=e.x,r=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=r,this._vertices[2]=n+e.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+e.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var t=this._context;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var t=this._context;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},4182:(t,e,n)=>{n.d(e,{default:()=>x});var r=n(5034),i=(n(5236),n(2537)),o=n(9082),a=n(332),s=n(8882),l=n(2009),u=n(8513),c=n(4842),f=n(3779);const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();var h=n(7365),d=n(2578),y=n(4518),g=n(9313),m=n(3990),v=n(3678),_=n(1207),b=n(5030),w=n(2293);r.Z.version=n(9719).version,r.Z.Math=i,r.Z.Operations=o,r.Z.Engine=a.Z,r.Z.Color=s.Z,r.Z.LicenseChecker=l.Z,r.Z.Operation=u.Z,r.Z.EventEmitter=c.Z,r.Z.Utils=f.Z,r.Z.Env=p,r.Z.OperationsStack=h.Z,r.Z.EXIF=d.Z,r.Z.Image=y.Z,r.Z.Promise=g.Z,r.Z.Configurable=m.Z,r.Z.Log=v.Z,r.Z.Loaders=_,r.Z.RenderType=b.RenderType,r.Z.ImageFormat=b.ImageFormat,r.Z.OptionType=b.OptionType,r.Z.RendererType=b.RendererType,r.Z.UniformType=b.UniformType,r.Z.Base64=w.Z,r.Z.UI={};const x=r.Z},16:(t,e,n)=>{n.r(e),n.d(e,{requestAnimationFrame:()=>g,cancelAnimationFrame:()=>m,Engine:()=>r.Z,EventEmitter:()=>a.Z,Events:()=>s.z,Utils:()=>l.Z,Configurable:()=>u.Z,Color:()=>c.Z,Constants:()=>i,Log:()=>f.Z,Promise:()=>p.Z,GLUtils:()=>h.Z,Base64:()=>o.Z,LicenseChecker:()=>d.Z,FreeLicenseChecker:()=>d.v,ColorMatrix:()=>w.ColorMatrix,CubicBezierCurve:()=>w.CubicBezierCurve,Matrix:()=>w.Matrix,Range:()=>w.Range,Rectangle:()=>w.Rectangle,Vector2:()=>w.Vector2,Vector3:()=>w.Vector3});for(var r=n(332),i=n(5030),o=n(2293),a=n(4842),s=n(3596),l=n(3779),u=n(3990),c=n(8882),f=n(3678),p=n(9313),h=n(3066),d=n(2009),y="undefined"==typeof window?n.g:window,g=y.requestAnimationFrame,m=y.cancelAnimationFrame,v=0,_=["ms","moz","webkit","o"],b=0;b<_.length&&!g;++b)g=y[_[b]+"RequestAnimationFrame"],m=y[_[b]+"CancelAnimationFrame"]||y[_[b]+"CancelRequestAnimationFrame"];g&&(g=g.bind(y)),m&&(m=m.bind(y)),g||(g=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-v)),i=setTimeout((function(){t(n+r)}),r);return v=n+r,i}),m||(m=function(t){clearTimeout(t)});var w=n(2537)},787:(t,e,n)=>{t.exports=n(4182).default},2293:(t,e,n)=>{n.d(e,{Z:()=>i});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const i={encode:function(t){var e,n,i,o,a,s,l,u="",c=0;do{o=(e=t[c++])>>2,a=(3&e)<<4|(n=t[c++])>>4,s=(15&n)<<2|(i=t[c++])>>6,l=63&i,isNaN(n)?s=l=64:isNaN(i)&&(l=64),u=u+r.charAt(o)+r.charAt(a)+r.charAt(s)+r.charAt(l),e=n=i="",o=a=s=l=""}while(c<t.length);return u},decode:function(t){var e,n,i,o,a,s,l=0,u=[];if(/[^A-Za-z0-9+/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+/=]/g,"");do{e=r.indexOf(t.charAt(l++))<<2|(o=r.indexOf(t.charAt(l++)))>>4,n=(15&o)<<4|(a=r.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(s=r.indexOf(t.charAt(l++))),u.push(e),64!==a&&u.push(n),64!==s&&u.push(i),e=n=i="",o=a=s=""}while(l<t.length);return u}}},8882:(t,e,n)=>{function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>a});const a=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t),this.r=e,this.g=n,this.b=r,this.a=o}var e,n,a;return e=t,a=[{key:"fromHSV",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],l=o[2],u=Math.floor(6*e),c=6*e-u,f=r*(1-n),p=r*(1-c*n),h=r*(1-(1-c)*n);switch(u%6){case 0:a=r,s=h,l=f;break;case 1:a=p,s=r,l=f;break;case 2:a=f,s=r,l=h;break;case 3:a=f,s=p,l=r;break;case 4:a=h,s=f,l=r;break;case 5:a=r,s=f,l=p}return new t(a,s,l,i)}},{key:"fromArray",value:function(e){return new t(e[0],e[1],e[2],e[3])}},{key:"fromHex",value:function(e){var n,i=function(t){if(Array.isArray(t))return t}(n=e.match(/[0-9A-fa-f]{1,2}/g))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),3!==n.length);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(n)||function(t,e){if(t){if("string"==typeof t)return r(t,3);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,3):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i[1],s=i[2];return new t(parseInt(o,16)/255,parseInt(a,16)/255,parseInt(s,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}},{key:"RED",get:function(){return new t(1,0,0,1)}},{key:"BLUE",get:function(){return new t(0,0,1,1)}},{key:"GREEN",get:function(){return new t(0,1,0,1)}}],(n=[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=n,this.a=r,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var t,e,n=Math.max(this.r,this.g,this.b),r=Math.min(this.r,this.g,this.b),i=n,o=n-r;if(e=0===n?0:o/n,n===r)t=0;else{switch(n){case this.r:t=(this.g-this.b)/o,this.g<this.b&&(t+=6);break;case this.g:t=(this.b-this.r)/o+2;break;case this.b:t=(this.r-this.g)/o+4}t/=6}return[t,e,i]}},{key:"fromHSV",value:function(e,n,r){return this.copy(t.fromHSV(e,n,r)),this}},{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.a)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}},{key:"minus",value:function(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}},{key:"divideScalar",value:function(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this}},{key:"clamp",value:function(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this}},{key:"mix",value:function(t,e){return this.r=(1-e)*this.r+e*t.r,this.g=(1-e)*this.g+e*t.g,this.b=(1-e)*this.b+e*t.b,this.a=(1-e)*this.a+e*t.a,this}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"equals",value:function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}},{key:"_componentToHex",value:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},{key:"toString",value:function(){return"Color(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}}])&&o(e.prototype,n),a&&o(e,a),t}()},3990:(t,e,n)=>{n.d(e,{Z:()=>b});var r=n(9313),i=n(3678),o=n(4842),a=n(6903),s=n(8882),l=n(3779),u=n(4518),c=n(9698),f=n(5030);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(w,t);var e,n,o,b=(n=w,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(n);if(o){var r=_(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return m(this,t)});function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,w),(t=b.call(this)).availableOptions=t.availableOptions||{},t.availableOptions=l.Z.extend(t.availableOptions,n),t._onConfigurableUpdate=t._onConfigurableUpdate.bind(v(t)),t._initOptions(e),t}return(e=[{key:"_buildConfigError",value:function(t){var e="";return this.constructor.name&&(e="".concat(this.constructor.name,": ")),e+=t,new Error(e)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var t=this;return new r.Z((function(e,n){for(var r in t.availableOptions)if(t.availableOptions[r].required&&void 0===t._options[r])return n(t._buildConfigError("Option `".concat(r,"` is required.")));e()}))}},{key:"_initOptions",value:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var i=this;for(t in this.availableOptions){if(n=t.charAt(0).toUpperCase()+t.slice(1),e=this.availableOptions[t],-1===[f.OptionType.STRING,f.OptionType.NUMBER,f.OptionType.BOOLEAN,f.OptionType.OBJECT,f.OptionType.VECTOR2,f.OptionType.COLOR,f.OptionType.CONFIGURABLE,f.OptionType.COLOR_MATRIX,f.OptionType.ARRAY,f.OptionType.IMAGE,f.OptionType.FUNCTION,f.OptionType.ALL].indexOf(e.type))throw this._buildConfigError("Unknown option type: `".concat(e.type,"`"));var o=function(t,e){i["set"+n]=function(e,n,r){i.setOption(t,e,n,r)},i["get"+n]=function(){return i.getOption(t)}};if(o(t,e),e.type===f.OptionType.CONFIGURABLE&&(this._options[t]=new w(void 0,e.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in r)||void 0===r[t])if(void 0!==e.default){var a=e.default;"function"==typeof e.default&&(a=e.default()),this["set"+n](a,!1,!0)}else e.type!==f.OptionType.CONFIGURABLE&&(this._options[t]=void 0)}for(t in r){if(void 0===this.availableOptions[t])throw new Error("Invalid option: ".concat(t));void 0!==r[t]&&this["set"+(n=t.charAt(0).toUpperCase()+t.slice(1))](r[t],!1,!0)}}},{key:"set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in t)this.setOption(n,t[n],!1);this._onOptionsChange(),e&&this.emit("update",this,t)}},{key:"getOption",value:function(t){return this._options[t]}},{key:"hasOption",value:function(t){return!!this.availableOptions[t]}},{key:"getOptionDefault",value:function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: ".concat(t));return e.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var t={};for(var e in this.availableOptions){var n=this.availableOptions[e].default;void 0!==n&&(t[e]=n)}return t}},{key:"getOptions",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this._options)}},{key:"equals",value:function(t){var e=t.getOptions();return this.optionsEqual(e)}},{key:"optionsEqual",value:function(t){for(var e in t){var n=t[e];if(!this._optionEquals(e,n))return!1}return!0}},{key:"_optionEquals",value:function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: ".concat(t));var n=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e||void 0===r)return!1;switch(n){case f.OptionType.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case f.OptionType.STRING:case f.OptionType.NUMBER:case f.OptionType.BOOLEAN:case f.OptionType.FUNCTION:case"*":return r===e;case f.OptionType.VECTOR2:return r.equals(e);case f.OptionType.COLOR:case f.OptionType.COLOR_MATRIX:return e.equals(r);case f.OptionType.CONFIGURABLE:return r.optionsEqual(e);case f.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case f.OptionType.IMAGE:return r.src===e.src}}},{key:"_arrayOptionEquals",value:function(t,e){var n=this._options[t];if(e.length!==n.length)return!1;for(var r=!0,i=0;i<n.length;i++){var o=n[i],a=e[i];if(o instanceof w){if(void 0===a||!o.optionsEqual(a)){r=!1;break}}else if(a!==o){r=!1;break}}return r}},{key:"serializeOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return e.forEach((function(e){if(void 0===t.availableOptions[e])return i.Z.warn("Trying to serialize a key that does not exist: ".concat(e));!1!==t.availableOptions[e].serializable&&(r[e]=t.serializeOption(e,n))})),r}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[t],r=n.type,i=this._options[t];if(!i)return i;if(!1===n.serializable)throw new Error("Option `".concat(t,"` is not serializable."));switch(r){case f.OptionType.STRING:case f.OptionType.NUMBER:case f.OptionType.BOOLEAN:case f.OptionType.OBJECT:case f.OptionType.FUNCTION:case f.OptionType.ALL:return i;case f.OptionType.VECTOR2:return e?i.toObject():i.clone();case f.OptionType.COLOR:case f.OptionType.COLOR_MATRIX:return e?i.toArray():i.clone();case f.OptionType.CONFIGURABLE:return i.serializeOptions(void 0,e);case f.OptionType.ARRAY:return i.slice(0);case f.OptionType.IMAGE:return e?i.src:i}}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.availableOptions[t];if(!i)throw new Error("Invalid option: ".concat(t));if(void 0!==i.setter&&(e=i.setter.call(this,e,r)),void 0!==i.validation&&i.validation(e),null==e){if(i.required)throw this._buildConfigError("Option `".concat(t,"` is required."));this._options[t]=e}else switch(i.type){case f.OptionType.STRING:if(p(e)!==f.OptionType.STRING)throw this._buildConfigError("Option `".concat(t,"` has to be a string."));var o=i.available;if(void 0!==o&&-1===o.indexOf(e))throw this._buildConfigError("Invalid value for `".concat(t,"` (valid values are: ").concat(i.available.join(", "),")"));this._options[t]=e;break;case f.OptionType.NUMBER:if(p(e)!==f.OptionType.NUMBER)throw this._buildConfigError("Option `".concat(t,"` has to be a number."));this._options[t]=e;break;case f.OptionType.BOOLEAN:if(p(e)!==f.OptionType.BOOLEAN)throw this._buildConfigError("Option `".concat(t,"` has to be a boolean."));this._options[t]=e;break;case f.OptionType.VECTOR2:if(!(e instanceof a.Z||"object"===p(e)&&"x"in e&&"y"in e))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of Vector2 or an Object holding x and y values."));e instanceof a.Z?this._options[t]=e.clone():this._options[t]=a.Z.fromObject(e);break;case f.OptionType.COLOR:if(!(e instanceof s.Z))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of Color."));this._options[t]=e;break;case f.OptionType.COLOR_MATRIX:if(!(e instanceof c.Z))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of ColorMatrix."));this._options[t]=e.clone();break;case f.OptionType.FUNCTION:if("function"!=typeof e)throw this._buildConfigError("Option `".concat(t,"` has to be a function."));this._options[t]=e;break;case f.OptionType.OBJECT:case"*":this._options[t]=e;break;case f.OptionType.IMAGE:if("string"==typeof e){var h=new u.Z;h.crossOrigin=l.Z.getCrossOriginValue(i.crossOrigin),h.src=e,this._options[t]=h}else{if(!(e instanceof u.Z||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `".concat(t,"` has to be an Image, Canvas or String."));this._options[t]=e}break;case f.OptionType.CONFIGURABLE:e instanceof w?this._options[t]=e:this._options[t].set(e);break;case f.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `".concat(t,"` has to be an Array."));this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `".concat(i.type,"`"))}n&&(this._onOptionsChange(),this.emit("update",this,d({},t,e)))}},{key:"_onConfigurableUpdate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,["update"].concat(e))}},{key:"hasChanges",value:function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(w.prototype,e),w}(o.Z)},4842:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3678);const i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._maxListeners=12,this._events={},this._pipeDestinations=[]}var e;return(e=[{key:"pipeEvents",value:function(t){this._pipeDestinations.push(t)}},{key:"unpipeEvents",value:function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)}},{key:"on",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var n=this._events[t]||(this._events[t]=[]);return-1!==n.indexOf(e)||(n.push(e),this._maxListeners&&n.length>this._maxListeners&&(r.Z.warn("EventEmitter","Possible memory leak detected, added ".concat(n.length," `").concat(t,"` listeners (current limit is ").concat(this._maxListeners,")")),"undefined"!=typeof console&&console.trace())),this}},{key:"once",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var n=this;return this.on(t,(function r(){n.off(t,r),e.apply(null,arguments)}))}},{key:"off",value:function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var n=this._events[t];if(!n||!n.length)return this;var r=n.indexOf(e);return-1===r||n.splice(r,1),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach((function(e){e.emit.apply(e,[t].concat(n))}));var i=this._events[t];return!(!i||!i.length||(i.slice(0).forEach((function(t){return t.apply(null,n)})),0))}},{key:"setMaxListeners",value:function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},2578:(t,e,n)=>{n.d(e,{Z:()=>m});var r=n(2293);const i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=0,this._buf=e}var e;return(e=[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1];return t?(n<<8)+e:(e<<8)+n}},{key:"peekInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(n<<8)+e:(e<<16)+(n<<8)+r}},{key:"peekInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(r<<16)+(n<<8)+e:(e<<32)+(n<<16)+(r<<8)+i}},{key:"writeInt8",value:function(t){this._buf[this._head]=255&t}},{key:"writeInt16",value:function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t}},{key:"readInt8",value:function(){var t=this.peekInt8();return this._head+=1,t}},{key:"readInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e}},{key:"readInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e}},{key:"readInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e}},{key:"readString",value:function(t){for(var e="",n=0;n<t;n++){var r=this.readInt8();e+=String.fromCharCode(r)}return e}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(t){this._head=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var o=n(3779);const a={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505};var s=a;const l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0)}var e;return(e=[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==s.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e}},{key:"setUnitDensity",value:function(t){this._stream.setHead(11),this._stream.writeInt8(t)}},{key:"setDensityX",value:function(t){this._stream.setHead(12),this._stream.writeInt16(t)}},{key:"setDensityY",value:function(t){this._stream.setHead(14),this._stream.writeInt16(t)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var u=o.Z.invariant,c=a,f={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};const p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}var e;return(e=[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&this._stream.readInt16()>0&&"Exif"===this._stream.readString(4)}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead();this._bigEndian=!1;var e=this._stream.readInt16();18761===e?this._bigEndian=!1:19789===e?this._bigEndian=!0:u(!1,"Invalid TIFF data: No endian type found"),u(42===this._stream.readInt16(!this._bigEndian),"Invalid TIFF data: No 0x002A");var n=this._stream.readInt32(!this._bigEndian);u(n>=8,"Invalid TIFF data: First IFD offset < 8");var r=t+n,i=this._readTags(this._stream,t,r,this._bigEndian);this._tags=i.tags,this._tagData=i.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(this._bigEndian?t:(255&t)<<8|t>>8&255)}}},{key:"_readTags",value:function(t,e,n,r){t.setHead(n);for(var i=t.readInt16(!r),o={},a=[],s=0;s<i;s++){var l=n+12*s+2;t.setHead(l);var u=t.readInt16(!r),c=void 0,p=void 0,h=void 0;if(f[u]){u=f[u],c=t.readInt16(!r),p=t.readInt32(!r),h=t.readInt32(!r)+e;var d=null;switch(c){case 1:case 7:if(1===p)d=t.readInt8(!r);else{d=[];for(var y=0;y<p;y++)d.push(t.readInt8(!r))}break;case 2:t.setHead(p>4?h:l+8),d=t.readString(p);break;case 3:if(t.setHead(p>2?h:l+8),1===p)d=t.readInt16(!r);else{d=[];for(var g=0;g<p;g++)d.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(p>1?h:l+8),1===p)d=t.readInt32(!r);else{d=[];for(var m=0;m<p;m++)d.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(h),1===p)d=t.readInt32(!r)/t.readInt32(!r);else{d=[];for(var v=0;v<p;v++){var _=t.readInt32(!r)/t.readInt32(!r);d.push(_)}}}o[u]=d,a[u]={value:d,numValues:p,entryOffset:l,valueOffset:h,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o.Z.invariant;var d=a,y="data:image/jpeg;base64,",g=new RegExp("^".concat(y),"i");const m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new p(this._getMarkerBuffer(d.EXIF)),this._jfifData=new l(this._getMarkerBuffer(d.JFIF))}var e,n,o;return e=t,o=[{key:"toDataURL",value:function(t){return y+r.Z.encode(t)}},{key:"fromDataURL",value:function(t){var e=t.replace(y,"");return r.Z.decode(e)}},{key:"isJPEG",value:function(t){return g.test(t)}},{key:"bufferIsJPEG",value:function(t){return 255===t[0]&&216===t[1]&&255===t[2]}},{key:"fromBase64String",value:function(e){var n=e.replace(y,"");return new t(r.Z.decode(n))}}],(n=[{key:"restoreSegmentsInArray",value:function(t){return t=this.restoreExifTagsToImageData(t),this.restoreJfifSegmentToImageData(t)}},{key:"restoreSegments",value:function(e){var n=t.fromDataURL(e);return n=this.restoreSegmentsInArray(n),t.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t)[1][0],n=t.slice(0,e),r=t.slice(e);return n.concat(this._exifData.getBuffer()).concat(r)}},{key:"restoreJfifSegmentToImageData",value:function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),n=this._findSegment(d.JFIF,e);if(!n)return t;var r=n[0],i=n[1],o=t.slice(0,r),a=t.slice(r,i),s=t.slice(i),u=new l(a);return u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(e){var n=t.fromDataURL(e),r=this.restoreExifTagsToImageData(n);return t.toDataURL(r)}},{key:"restoreJfifSegment",value:function(e){if(!this._jfifData.isValid())return e;var n=t.fromDataURL(e),r=this.restoreJfifSegmentToImageData(n);return t.toDataURL(r)}},{key:"setOrientation",value:function(t){return this._exifData.setOrientation(t)}},{key:"_findSegment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];this._stream.setHead(r);var o=this._stream.peekInt16();if(o===t)return[r,i]}return!1}},{key:"_getLastSegment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return t[t.length-1]}},{key:"_getMarkerBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(t,e);if(n){var r=n[0],i=n[1];return this._buf.slice(r,i)}return!1}},{key:"_sliceIntoSegments",value:function(t){for(var e=new i(t),n=[];e.getHead()<t.length;){var r=e.readInt16();if(r!==d.SOI){if(r===d.SOS)break;if(!(r>=65280&&r<=65535))throw new Error("Invalid marker: 0x"+r.toString(16));var o=e.readInt16(),a=e.getHead()+o-2;n.push([e.getHead()-4,a]),e.setHead(a)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}])&&h(e.prototype,n),o&&h(e,o),t}()},3066:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(3678);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o={checkFramebufferStatus:function(t,e){var n,o=e.checkFramebufferStatus(e.FRAMEBUFFER),a=(i(n={},e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),i(n,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),i(n,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),i(n,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);o!==e.FRAMEBUFFER_COMPLETE&&r.Z.warn(t,"Framebuffer incomplete: ".concat(a[o]))},determineGPUName:function(t){var e=null,n=null;t||(t=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var r=t&&t.getExtension("WEBGL_debug_renderer_info");return r&&(e=t.getParameter(r.UNMASKED_RENDERER_WEBGL),n&&n.remove()),e},isGPUBlacklisted:function(t){return!1}}},4518:(t,e,n)=>{n.d(e,{Z:()=>r});const r=window.Image},2009:(t,e,n)=>{n.d(e,{v:()=>Y,Z:()=>q});var r=n(3779);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var s,l=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,u=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t);var r=n?u:l,o=r.exec(e);r.lastIndex=0,this._major=o[1],this._minor=o[2],this._patch=o[3]||0}return a(t,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}}]),a(t,[{key:"equals",value:function(t){return this._major===t._major&&this._minor===t._minor&&this._patch===t._patch}},{key:"isMoreRecentThan",value:function(t){return!(this._major<t.major)&&(this._major>t.major||!(this._minor<t.minor)&&(this._minor>t.minor||!(this._patch<=t.patch)&&(this._patch>t.patch||void 0)))}}]),t}(),f=f||{};function p(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function h(){return new p(null)}"Microsoft Internet Explorer"==f.appName?(p.prototype.am=function(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],u=this[t++]>>15,c=s*l+u*a;i=((l=a*l+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*u+(i>>>30),n[r++]=1073741823&l}return i},s=30):"Netscape"!=f.appName?(p.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},s=26):(p.prototype.am=function(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],u=this[t++]>>14,c=s*l+u*a;i=((l=a*l+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*u,n[r++]=268435455&l}return i},s=28),p.prototype.DB=s,p.prototype.DM=(1<<s)-1,p.prototype.DV=1<<s,p.prototype.FV=Math.pow(2,52),p.prototype.F1=52-s,p.prototype.F2=2*s-52;var d,y,g=new Array;for(d="0".charCodeAt(0),y=0;y<=9;++y)g[d++]=y;for(d="a".charCodeAt(0),y=10;y<36;++y)g[d++]=y;for(d="A".charCodeAt(0),y=10;y<36;++y)g[d++]=y;function m(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function v(t,e){var n=g[t.charCodeAt(e)];return null==n?-1:n}function _(t){var e=h();return e.fromInt(t),e}function b(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function w(t){this.m=t}function x(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t,e){return t&e}function S(t,e){return t|e}function k(t,e){return t^e}function T(t,e){return t&~e}function C(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function E(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function R(){}function D(t){return t}function P(t){this.r2=h(),this.q3=h(),p.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}w.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},w.prototype.revert=function(t){return t},w.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},w.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},w.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},x.prototype.convert=function(t){var e=h();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(p.ZERO)>0&&this.m.subTo(e,e),e},x.prototype.revert=function(t){var e=h();return t.copyTo(e),this.reduce(e),e},x.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},p.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},p.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=8==n?255&t[r]:v(t,r);a<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&p.ZERO.subTo(this,this)},p.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},p.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},p.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},p.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},p.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},p.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},p.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&p.ZERO.subTo(e,e)},p.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},p.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=h());var o=h(),a=this.s,s=t.s,l=this.DB-b(r[r.t-1]);l>0?(r.lShiftTo(l,o),i.lShiftTo(l,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var f=c*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),d=this.FV/f,y=(1<<this.F1)/f,g=1<<this.F2,m=n.t,v=m-u,_=null==e?h():e;for(o.dlShiftTo(v,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),p.ONE.dlShiftTo(u,_),_.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--v>=0;){var w=n[--m]==c?this.DM:Math.floor(n[m]*d+(n[m-1]+g)*y);if((n[m]+=o.am(0,w,n,v,0,u))<w)for(o.dlShiftTo(v,_),n.subTo(_,n);n[m]<--w;)n.subTo(_,n)}null!=e&&(n.drShiftTo(u,e),a!=s&&p.ZERO.subTo(e,e)),n.t=u,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&p.ZERO.subTo(n,n)}}},p.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},p.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},p.prototype.exp=function(t,e){if(t>4294967295||t<1)return p.ONE;var n=h(),r=h(),i=e.convert(this),o=b(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)},p.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=m(n));a>=0;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=m(n));return i?o:"0"},p.prototype.negate=function(){var t=h();return p.ZERO.subTo(this,t),t},p.prototype.abs=function(){return this.s<0?this.negate():this},p.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},p.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+b(this[this.t-1]^this.s&this.DM)},p.prototype.mod=function(t){var e=h();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(p.ZERO)>0&&t.subTo(e,e),e},p.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new w(e):new x(e),this.exp(t,n)},p.ZERO=_(0),p.ONE=_(1),R.prototype.convert=D,R.prototype.revert=D,R.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},R.prototype.sqrTo=function(t,e){t.squareTo(e)},P.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=h();return t.copyTo(e),this.reduce(e),e},P.prototype.revert=function(t){return t},P.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},P.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/I[I.length-1];p.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},p.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=_(n),i=h(),o=h(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a},p.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,s=0;s<t.length;++s){var l=v(t,s);l<0?"-"==t.charAt(s)&&0==this.signum()&&(i=!0):(a=e*a+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&p.ZERO.subTo(this,this)},p.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(p.ONE.shiftLeft(t-1),S,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(p.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},p.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},p.prototype.changeBit=function(t,e){var n=p.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},p.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},p.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},p.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},p.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},p.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},p.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},p.prototype.millerRabin=function(t){var e=this.subtract(p.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>I.length&&(t=I.length);for(var i=h(),o=0;o<t;++o){i.fromInt(I[Math.floor(Math.random()*I.length)]);var a=i.modPow(r,this);if(0!=a.compareTo(p.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<n&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(p.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},p.prototype.clone=function(){var t=h();return this.copyTo(t),t},p.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},p.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},p.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},p.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},p.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},p.prototype.equals=function(t){return 0==this.compareTo(t)},p.prototype.min=function(t){return this.compareTo(t)<0?this:t},p.prototype.max=function(t){return this.compareTo(t)>0?this:t},p.prototype.and=function(t){var e=h();return this.bitwiseTo(t,O,e),e},p.prototype.or=function(t){var e=h();return this.bitwiseTo(t,S,e),e},p.prototype.xor=function(t){var e=h();return this.bitwiseTo(t,k,e),e},p.prototype.andNot=function(t){var e=h();return this.bitwiseTo(t,T,e),e},p.prototype.not=function(){for(var t=h(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},p.prototype.shiftLeft=function(t){var e=h();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},p.prototype.shiftRight=function(t){var e=h();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},p.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+C(this[t]);return this.s<0?this.t*this.DB:-1},p.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=E(this[n]^e);return t},p.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},p.prototype.setBit=function(t){return this.changeBit(t,S)},p.prototype.clearBit=function(t){return this.changeBit(t,T)},p.prototype.flipBit=function(t){return this.changeBit(t,k)},p.prototype.add=function(t){var e=h();return this.addTo(t,e),e},p.prototype.subtract=function(t){var e=h();return this.subTo(t,e),e},p.prototype.multiply=function(t){var e=h();return this.multiplyTo(t,e),e},p.prototype.divide=function(t){var e=h();return this.divRemTo(t,e,null),e},p.prototype.remainder=function(t){var e=h();return this.divRemTo(t,null,e),e},p.prototype.divideAndRemainder=function(t){var e=h(),n=h();return this.divRemTo(t,e,n),new Array(e,n)},p.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),o=_(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new w(e):e.isEven()?new P(e):new x(e);var a=new Array,s=3,l=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){var c=h();for(r.sqrTo(a[1],c);s<=u;)a[s]=h(),r.mulTo(c,a[s-2],a[s]),s+=2}var f,p,d=t.t-1,y=!0,g=h();for(i=b(t[d])-1;d>=0;){for(i>=l?f=t[d]>>i-l&u:(f=(t[d]&(1<<i+1)-1)<<l-i,d>0&&(f|=t[d-1]>>this.DB+i-l)),s=n;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),y)a[f].copyTo(o),y=!1;else{for(;s>1;)r.sqrTo(o,g),r.sqrTo(g,o),s-=2;s>0?r.sqrTo(o,g):(p=o,o=g,g=p),r.mulTo(g,a[f],o)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(o,g),p=o,o=g,g=p,--i<0&&(i=this.DB-1,--d)}return r.revert(o)},p.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return p.ZERO;for(var n=t.clone(),r=this.clone(),i=_(1),o=_(0),a=_(0),s=_(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(s,o)):(r.subTo(n,r),e&&a.subTo(i,a),s.subTo(o,s))}return 0!=r.compareTo(p.ONE)?p.ZERO:s.compareTo(t)>=0?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s},p.prototype.pow=function(t){return this.exp(t,new R)},p.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},p.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(n[0]==I[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<I.length;){for(var r=I[e],i=e+1;i<I.length&&r<A;)r*=I[i++];for(r=n.modInt(r);e<i;)if(r%I[e++]==0)return!1}return n.millerRabin(t)},p.prototype.square=function(){var t=h();return this.squareTo(t),t};const F=p;var j=n(2293),M=n(9706);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t}var U=function(t){return r.Z.byteArrayToString(j.Z.decode(t))},W="YXBwX2lkZW50aWZpZXJz",H="ZmVhdHVyZXM=",G="ZXhwaXJlc19hdA==",V="c2lnbmF0dXJl",Z="dmVyc2lvbg==",X=function(){function t(e){z(this,t),this._version="2.4",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return N(t,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[U(W)].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[U(W)].forEach((function(n){r.Z.wildCardMatch(t,n)&&(e=!0)})),e}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[U("cGxhdGZvcm0=")]}},{key:"c",value:function(){var t=this;return new Promise((function(e,n){var r=t._validateError();null!==r&&n(r),e()}))}},{key:"validate",value:function(){return null===this._validateError()}},{key:"_validateError",value:function(){if("string"!==B(this._l)||!this._jsonValid()){var t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){var e=new Error;return e.code="ELICINV",e}if(!this._hostnameValid()){var n=new Error;return n.code="ELICINVHOST",n}if(!this._platformValid()){var r=new Error;return r.code="ELICINVPLAT",r}if(this.isExp()){var i=new Error;return i.code="ELICEXP",i}return null}},{key:"isToolAllowed",value:function(t){return this._includesFeature(t)}},{key:"isWhiteLabel",value:function(){return this._includesFeature("whitelabel",new c("2.4",!0))}},{key:"areCustomAssetsAllowed",value:function(){return this._includesFeature("customassets",new c("2.4",!0))}},{key:"t",value:function(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new c("2.4",!0)))return Promise.resolve();var t=this._decLic[U("ZG9tYWlucw==")][0]+U(U("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[U("YXBpX3Rva2Vu")];return new M.Z(t).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[U("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[U(G)]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[U(G)]&&t>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[U(G)]}},{key:"_verify",value:function(t,e){return this._encodeMessage(t)===this._decodeSignature(e).substr(-64)}},{key:"_encodeMessage",value:function(t){return function(t){function e(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function n(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t){return n(t,2)^n(t,13)^n(t,22)}function s(t){return n(t,6)^n(t,11)^n(t,25)}function l(t){return n(t,7)^n(t,18)^r(t,3)}return function(t){for(var e="0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return n}(function(t,u){var c,f,p,h,d,y,g,m,v,_,b,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),O=new Array(64);t[u>>5]|=128<<24-u%32,t[15+(u+64>>9<<4)]=u;for(var S=0;S<t.length;S+=16){c=x[0],f=x[1],p=x[2],h=x[3],d=x[4],y=x[5],g=x[6],m=x[7];for(var k=0;k<64;k++)O[k]=k<16?t[k+S]:e(e(e(n(b=O[k-2],17)^n(b,19)^r(b,10),O[k-7]),l(O[k-15])),O[k-16]),v=e(e(e(e(m,s(d)),i(d,y,g)),w[k]),O[k]),_=e(a(c),o(c,f,p)),m=g,g=y,y=d,d=e(h,v),h=p,p=f,f=c,c=e(v,_);x[0]=e(c,x[0]),x[1]=e(f,x[1]),x[2]=e(p,x[2]),x[3]=e(h,x[3]),x[4]=e(d,x[4]),x[5]=e(y,x[5]),x[6]=e(g,x[6]),x[7]=e(m,x[7])}return x}(function(t){for(var e=Array(),n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),8*t.length))}(t)}},{key:"_decodeSignature",value:function(t){return t=(t=j.Z.decode(t)).map((function(t){return("0"+(255&t).toString(16)).slice(-2)})).join(""),(t=this._parseBigInt(t,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(t,e){return new F(t,e)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[U(V)]||"",delete this._decLic[U(V)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'.concat(U(V),'":"([^"]*)"')),""))}},{key:"_includesFeature",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c("1.0",!0),n=new c(this._decLic[U(Z)],!0);return!!e.isMoreRecentThan(n)||this._decLic[U(H)]&&-1!==this._decLic[U(H)].indexOf(t)}}]),t}(),Y=function(){function t(){z(this,t)}return N(t,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return Promise.resolve()}},{key:"isToolAllowed",value:function(t){return!0}},{key:"isWhiteLabel",value:function(){return!1}},{key:"areCustomAssetsAllowed",value:function(){return!0}},{key:"t",value:function(){return Promise.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){return!1}}]),t}();const q=X},9698:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(8882);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,y=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,_=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,w=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;i(this,t),this.set(e,n,r,o,a,s,l,u,c,f,p,h,d,y,g,m,v,_,b,w)}var e,n,a;return e=t,a=[{key:"createBrightnessMatrix",value:function(e){var n=new t;return n.e=e,n.j=e,n.o=e,n}},{key:"createContrastMatrix",value:function(e){var n=new t,r=(1-e)/2;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n}},{key:"createSaturationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new t,r=1-e,i=.213*r,o=.715*r,a=.072*r;return n.a=i+e,n.b=o,n.c=a,n.f=i,n.g=o+e,n.h=a,n.k=i,n.l=o,n.m=a+e,n}},{key:"createExposureMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,e);return new t(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r}},{key:"IDENTITY",get:function(){return new t}}],(n=[{key:"set",value:function(t,e,n,r,i,o,a,s,l,u,c,f,p,h,d,y,g,m,v,_){this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this.g=a,this.h=s,this.i=l,this.j=u,this.k=c,this.l=f,this.m=p,this.n=h,this.o=d,this.p=y,this.q=g,this.r=m,this.s=v,this.t=_}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,n=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,i=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,o=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new r.Z(e,n,i,o)}},{key:"multiply",value:function(t){var e,n,r,i,o,a,s,l,u,c,f,p,h,d,y,g,m,v,_,b,w=t,x=this;return e=w.a*x.a+w.b*x.f+w.c*x.k+w.d*x.p,n=w.a*x.b+w.b*x.g+w.c*x.l+w.d*x.q,r=w.a*x.c+w.b*x.h+w.c*x.m+w.d*x.r,i=w.a*x.d+w.b*x.i+w.c*x.n+w.d*x.s,a=w.f*x.a+w.g*x.f+w.h*x.k+w.i*x.p,s=w.f*x.b+w.g*x.g+w.h*x.l+w.i*x.q,l=w.f*x.c+w.g*x.h+w.h*x.m+w.i*x.r,u=w.f*x.d+w.g*x.i+w.h*x.n+w.i*x.s,f=w.k*x.a+w.l*x.f+w.m*x.k+w.n*x.p,p=w.k*x.b+w.l*x.g+w.m*x.l+w.n*x.q,h=w.k*x.c+w.l*x.h+w.m*x.m+w.n*x.r,d=w.k*x.d+w.l*x.i+w.m*x.n+w.n*x.s,g=w.p*x.a+w.q*x.f+w.r*x.k+w.s*x.p,m=w.p*x.b+w.q*x.g+w.r*x.l+w.s*x.q,v=w.p*x.c+w.q*x.h+w.r*x.m+w.s*x.r,_=w.p*x.d+w.q*x.i+w.r*x.n+w.s*x.s,o=w.a*x.e+w.b*x.j+w.c*x.o+w.d*x.t+w.e,c=w.f*x.e+w.g*x.j+w.h*x.o+w.i*x.t+w.j,y=w.k*x.e+w.l*x.j+w.m*x.o+w.n*x.t+w.o,b=w.p*x.e+w.q*x.j+w.r*x.o+w.s*x.t+w.t,this.a=e,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a,this.g=s,this.h=l,this.i=u,this.j=c,this.k=f,this.l=p,this.m=h,this.n=d,this.o=y,this.p=g,this.q=m,this.r=v,this.s=_,this.t=b,this}},{key:"clone",value:function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}},{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( ".concat(this.a,", ").concat(this.b,", ").concat(this.c,", ").concat(this.d,", ").concat(this.e,",\n      ").concat(this.f,", ").concat(this.g,", ").concat(this.h,", ").concat(this.i,", ").concat(this.j,",\n      ").concat(this.k,", ").concat(this.l,", ").concat(this.m,", ").concat(this.n,", ").concat(this.o,",\n      ").concat(this.p,", ").concat(this.q,", ").concat(this.r,", ").concat(this.s,", ").concat(this.t," )")}},{key:"toArray",value:function(){var t=this;return"abcdefghijklmnopqrst".split("").map((function(e){return t[e]}))}}])&&o(e.prototype,n),a&&o(e,a),t}()},2537:(t,e,n)=>{n.r(e),n.d(e,{Vector2:()=>r.Z,Vector3:()=>o,Range:()=>s,Rectangle:()=>l.Z,Matrix:()=>u.Z,ColorMatrix:()=>c.Z,CubicBezierCurve:()=>p});var r=n(6903);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.z=r,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}var e,n,r;return e=t,r=[{key:"fromObject",value:function(e){return new t(e.x,e.y,e.z)}},{key:"NULL",get:function(){return new t(0,0,0)}}],(n=[{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"clamp",value:function(e,n){var r=null!=e,i=null!=n;return e instanceof t||!r||(e=new t(e,e,e)),n instanceof t||!i||(n=new t(n,n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(e){return e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}},{key:"subtract",value:function(e){return e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}},{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}},{key:"equals",value:function(e){return e instanceof t?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: ".concat(this.x,", y: ").concat(this.y,", z: ").concat(this.z," })")}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this}}])&&i(e.prototype,n),r&&i(e,r),t}();var a=n(3678);const s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.min=e,this.max=n}var e;return(e=[{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getLength",value:function(){return this.max-this.min}},{key:"contains",value:function(t){return this.min<=t&&t<=this.max}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var l=n(9385),u=n(688),c=n(9698);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Z(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(1,1),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z(2,-1),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.Z(2,0);f(this,t),this._p0=e.clone(),this._p1=n.clone(),this._p2=i.clone(),this._p3=o.clone(),this._segments=[],this._length=-1,this._sample=[]}var e;return(e=[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Z(0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z(2,1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.Z(2,0);this._p0=t.clone(),this._p1=e.clone(),this._p2=n.clone(),this._p3=i.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=0,n=0,r=[],i=1/t,o=this._p0.clone(),a=1;a<=t;a++){var s=[];s.push({t:e,s:n,point:o}),e+=i,e=Math.min(e,1);var l=this.evalAt(e),u=l.clone().subtract(o);n+=u.len(),s.push({t:e,s:n,point:l}),r.push(s),o=l}return this._segments=r,this._length=n,n}},{key:"evalAt",value:function(t){t=this.normalizeParameter(t);var e=this._p0.clone().multiply(Math.pow(1-t,3)),n=this._p1.clone().multiply(3*(1-t)*(1-t)*t),r=this._p2.clone().multiply(3*(1-t)*t*t),i=this._p3.clone().multiply(t*t*t);return e.add(n).add(r).add(i)}},{key:"isInSegment",value:function(t,e){return(t=this.normalizeArcLength(t))>=e[0].s&&t<=e[1].s}},{key:"getArcLengthSegment",value:function(t){t=this.normalizeArcLength(t);for(var e=0;e<this._segments.length;e++){var n=this._segments[e];if(this.isInSegment(t,n))return n}return null}},{key:"normalizeArcLength",value:function(t){return Math.max(Math.min(this._length,t),0)}},{key:"normalizeParameter",value:function(t){return Math.max(Math.min(1,t),0)}},{key:"getParameterForArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return a.Z.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return r*n[0].t+(1-r)*n[1].t}},{key:"evalAtArcLength",value:function(t){return this.evalAt(this.getParameterForArcLength(t))}},{key:"approximateAtArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(r).add(n[1].point.clone().multiply(1-r))}},{key:"parameterSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=1/t,n=[],r=0,i=0;i<=t+1;i++)n.push(this.evalAt(r)),r+=e;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._length/t,i=[],o=0,a=e?1:0;a<t+1;a++)i.push(this.approximateAtArcLength(o)),o+=r;return n&&i.pop(),this._sample=i,[].concat(i)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},688:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(6903);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}var e,n,o;return e=t,o=[{key:"IDENTITY",get:function(){return new t}}],(n=[{key:"multiply",value:function(t){var e,n,r,i,o,a;return e=this.a*t.a+this.b*t.c,n=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(t){var e=t,n=e.x,r=e.y;return(t=t.clone()).x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.tx,t}},{key:"applyInverseToVector",value:function(t){var e=1/(this.a*this.d+this.c*-this.b),n=t,r=n.x,i=n.y;return(t=t.clone()).x=this.d*e*r+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t}},{key:"rectangleToCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(0,0),n=t.width*(1-e.x),i=t.width*-e.x,o=t.height*(1-e.y),a=t.height*-e.y,s=[];return s.push(new r.Z(this.a*i+this.c*a+this.tx,this.d*a+this.b*i+this.ty)),s.push(new r.Z(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new r.Z(this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),s.push(new r.Z(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)}},{key:"toString",value:function(){return"Matrix({ a: ".concat(this.a,", b: ").concat(this.b,", c: ").concat(this.c,", d: ").concat(this.d,", tx: ").concat(this.tx,", ty: ").concat(this.ty," })")}}])&&i(e.prototype,n),o&&i(e,o),t}()},9385:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(6903);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=r,this.height=o}var e,n,a;return e=t,a=[{key:"FromDiagonalPoints",value:function(e,n){var r=!1;n.x-e.x<0&&(r=!0);var i=r?n:e,o=r?e:n,a=o.x-i.x,s=o.y-i.y;return new t(i.x,i.y,a,s)}}],(n=[{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"equals",value:function(e,n,r,i){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&n===this.y&&r===this.width&&i===this.height}},{key:"translate",value:function(t,e){return t instanceof r.Z&&(e=t.y,t=t.x),this.x+=t,this.y+=e,this}},{key:"scale",value:function(t,e){return t instanceof r.Z?(e=t.y,t=t.x):void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new r.Z(this.x,this.y)}},{key:"getSize",value:function(){return new r.Z(this.width,this.height)}},{key:"insetBy",value:function(t,e){return this.x+=t,this.y+=e,this.width-=2*t,this.height-=2*e,this}},{key:"intersects",value:function(t){var e=new r.Z(this.x,this.y),n=new r.Z(this.x+this.width,this.y+this.height),i=new r.Z(t.x,t.y),o=new r.Z(t.x+t.width,t.y+t.height);return!(i.x>n.x||e.x>o.x||o.y<e.y||n.y<i.y)}},{key:"toString",value:function(){return"Rectangle({ x: ".concat(this.x,", y: ").concat(this.y,", width: ").concat(this.width,", height: ").concat(this.height," })")}}])&&o(e.prototype,n),a&&o(e,a),t}()},6903:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>i});const i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}var e,n,i;return e=t,i=[{key:"fromObject",value:function(e){return new t(e.x,e.y)}},{key:"NULL",get:function(){return new t(0,0)}}],(n=[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"clamp",value:function(e,n){var r=null!=e,i=null!=n;return e instanceof t||!r||(e=new t(e,e)),n instanceof t||!i||(n=new t(n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(e,n){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===n?e:n),this}},{key:"subtract",value:function(e,n){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===n?e:n),this}},{key:"multiply",value:function(e,n){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===n?e:n),this}},{key:"add",value:function(e,n){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===n?e:n),this}},{key:"dot",value:function(e,n){return e instanceof t?this.x*e.x+this.y*e.y:this.x*e+this.y*(void 0===n?e:n)}},{key:"equals",value:function(e,n){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&n===this.y}},{key:"flip",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: ".concat(this.x,", y: ").concat(this.y," })")}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?[this.y,this.x]:[this.x,this.y]}}])&&r(e.prototype,n),i&&r(e,i),t}()},7365:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(16),i=n(9313);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,o,f=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(o){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function p(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a(this,p),(t=f.call(this))._onOperationUpdate=t._onOperationUpdate.bind(u(t)),t._cacheEnabled=!0,t._stack=e,t._stack.forEach((function(e){e.on("update",t._onOperationUpdate)})),t}return(e=[{key:"clear",value:function(){var t=this;this.forEach((function(e){return t.remove(e)})),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter((function(t){return!!t})).some((function(t){return t.hasChanges()}))}},{key:"_onOperationUpdate",value:function(t,e){this.emit(r.Events.OPERATION_UPDATED,t,e)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(t){return this._stack.filter((function(t){return!!t})).forEach(t)}},{key:"render",value:function(t,e){var n=this,o=e,a=this._stack.filter((function(t){return!!t})).filter((function(t){return t.getEnabled()}));a.reverse();var s=a.filter((function(e){return!e.isDirtyForRenderer(t.getRenderer())}))[0],l=a.indexOf(s);a.reverse();var u=0;-1!==l&&(u=a.length-l-1);for(var c=0;c<u;c++)r.Log.info(this.constructor.name,"Skipping ".concat(a[c].constructor.name));for(var f=i.Z.resolve(o),p=function(t){var e=a[t],r=void 0,i=void 0;f=f.then((function(t){return e.render(t).then((function(t){return r&&t!==r&&!n._cacheEnabled&&i.disposeRenderTextures(),r=t,i=e,t}))}))},h=u;h<a.length;h++)p(h);return f.then((function(e){return{outputTexture:e,renderDone:!a.some((function(e){return e.isDirtyForRenderer(t.getRenderer())}))}}))}},{key:"validateSettings",value:function(){return i.Z.all(this._stack.filter((function(t){return!!t})).map((function(t){return t.validateSettings()})))}},{key:"setAllToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach((function(e){return e.setDirty(!0,t)}))}},{key:"updateDirtinessForRenderer",value:function(t){for(var e=!1,n=0;n<this._stack.length;n++){var r=this._stack[n];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}}},{key:"push",value:function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var t=this._stack.pop();t&&(t.off("update",this._onOperationUpdate),t.dispose())}},{key:"unshift",value:function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new p(this._stack.slice(0))}},{key:"get",value:function(t){return this._stack[t]}},{key:"getByIdentifier",value:function(t){return r.Utils.Array.find(this._stack,(function(e){return e&&e.constructor.identifier===t}))}},{key:"getIndexByIdentifier",value:function(t){return r.Utils.Array.findIndex(this._stack,(function(e){return e&&e.constructor.identifier===t}))}},{key:"moveToTop",value:function(t){var e=r.Utils.Array.findIndex(this._stack,(function(e){return e&&e.constructor.identifier===t}));if(!(e<0||e===this._stack.length-1)){var n=this.getByIdentifier(t);this._stack.splice(e,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)}},{key:"remove",value:function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))}},{key:"removeAt",value:function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(n(4842).Z)},3155:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(16),i="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930);const o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tag=e,this._name=n,this._start=i()}var e;return(e=[{key:"stop",value:function(){var t=i()-this._start,e=Math.round(1e3/t);r.Log.info(this._tag,"".concat(this._name," took ").concat(t.toFixed(2),"ms (").concat(e," FPS)"))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},5236:()=>{Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1},configurable:!0,writable:!0})},3779:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(2293);const i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"head",value:function(t){return t[0]}},{key:"tail",value:function(t){return t.slice(1)}},{key:"last",value:function(t){return t[t.length-1]}},{key:"init",value:function(t){return t.slice(0,t.length-1)}},{key:"remove",value:function(t,e){return t.filter((function(t,n,r){return!e(t,n,r)}))}},{key:"findIndex",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}},{key:"find",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}},{key:"flatten",value:function(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t.flatten(n):n)}),[])}},{key:"range",value:function(t,e){var n=[];if(e>t)for(var r=t;r<e;r++)n.push(r);return n}},{key:"repeat",value:function(t,e){for(var n=[],r=0;r<e;r++)n[r]=t;return n}},{key:"zip",value:function(t,e){for(var n=Math.min(t.length,e.length),r=[],i=0;i<n;i++)r[i]=[t[i],e[i]];return r}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"mapRange",value:function(t,e,n){return(t-e.getMin())*n.getLength()/e.getLength()+n.getMin()}},{key:"isPlainObject",value:function(t){if("object"!==u(t)||!t)return!1;if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==n.g}},{key:"values",value:function(t){var e=[];for(var n in t)e.push(t[n]);return e}},{key:"generateUUID",value:function(){var t=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}},{key:"isDOMElement",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":u(HTMLElement))?t instanceof HTMLElement:t&&"object"===u(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},{key:"isTouchEvent",value:function(t){return-1!==t.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(t,e){var n=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(t,e){var n=t.x/t.y;return n>e.x/e.y?e.clone().set(e.y*n,e.y):e.clone().set(e.x,e.x/n)}},{key:"isExtendable",value:function(t){return null!=t&&("object"===u(t)||"function"==typeof t)}},{key:"defaults",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)void 0===e[o]&&(e[o]=i[o])}return e}},{key:"deepMerge",value:function(e){for(var n=function e(n,r){if(void 0===r)return e(null,n);if(Array.isArray(r))return s(r);if(!t.isPlainObject(r))return r;if(!t.isPlainObject(n))return a({},r);var i=a({},n);return Object.keys(r).forEach((function(t){var o=r[t];void 0!==o&&(i[t]=e(n[t],o))})),i},r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce(n,e)}},{key:"deepDefaults",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=[].concat(r).reverse();return t.deepMerge.apply(t,s(o).concat([e]))}},{key:"deepClone",value:function(e){var n={};for(var r in e)t.isExtendable(e[r])?n[r]=t.deepClone(e[r]):n[r]=e[r];return n}},{key:"getDeepProperty",value:function(t,e){return"string"==typeof e?t[e]:Array.isArray(e)?e.reduce((function(t,e){return t?"function"==typeof e?function(t,e){var n;try{n=e(t)}catch(t){if(!(t instanceof TypeError))throw t}return n}(t,e):t[e]:null}),t):void 0}},{key:"extend",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)e[o]=i[o]}return e}},{key:"clone",value:function(t){return this.extend({},t)}},{key:"createBlobURIFromDataURI",value:function(t){var e="undefined"==typeof window?n.g:window;if(!(e.Blob&&e.URL&&ArrayBuffer&&Uint8Array))return t;for(var i=r.Z.decode(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(i.length),s=new Uint8Array(a),l=0;l<i.length;l++)s[l]=i[l];var u=new e.Blob([a],{type:o});return e.URL.createObjectURL(u)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(e,n){var r=n||t.createCanvas();r.width=e.width,r.height=e.height;var i=r.getContext("2d");return i.clearRect(0,0,r.width,r.height),i.drawImage(e,0,0,e.width,e.height),r}},{key:"isPowerOfTwo",value:function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)}},{key:"nextLowestPOT",value:function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)}},{key:"nextHighestPOT",value:function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1}},{key:"moveArrayItem",value:function(t,e,n){if(n>=t.length)for(var r=n-t.length;1+r--;)t.push(void 0);t.splice(n,0,t.splice(e,1)[0])}},{key:"ensureCanvasDimensions",value:function(t,e){return(t.width!==e.x||t.height!==e.y)&&(t.width=e.x,t.height=e.y,!0)}},{key:"byteArrayToString",value:function(t){return t.map((function(t){return String.fromCharCode(t)})).join("")}},{key:"clamp",value:function(t,e,n){return Math.max(e,Math.min(t,n))}},{key:"wildCardMatch",value:function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)}},{key:"flipObject",value:function(t){var e={};for(var n in t)e[t[n]]=n;return e}},{key:"cloneOptions",value:function(t){var e={};for(var n in t){var r=t[n];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),e[n]=r}return e}},{key:"ISODateString",value:function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(t){return t?"none"!==t?t:void 0:"anonymous"}},{key:"shallowEqual",value:function(t,e){if(t===e)return!0;if("object"!==u(t)||null===t||"object"!==u(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=hasOwnProperty.bind(e),o=0;o<n.length;o++)if(!i(n[o])||t[n[o]]!==e[n[o]])return!1;return!0}},{key:"enableIf",value:function(t,e){return t?e:void 0}},{key:"invariant",value:function(t,e){if(!t)throw new Error(e)}},{key:"executePromises",value:function(t){var e=t.length,n=0,r=[],i=[];return new Promise((function(o,a){var s=function(){++n>=e&&(i.length<=0?o(r):a(i))},l=function(t){r.push(t),s()},u=function(t){i.push(t),s()};t.forEach((function(t){t.then(l).catch(u)}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();c(f,"Array",i);const p=f},9082:(t,e,n)=>{n.r(e),n.d(e,{ExifOrientationOperation:()=>d});var r=n(16),i=n(9313),o=n(6903),a=n(8513);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=r.Constants.OptionType,h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,a,s=(n=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(a){var r=f(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return c(this,t)});function p(){return l(this,p),s.apply(this,arguments)}return(e=[{key:"getRotation",value:function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t}},{key:"_getFlipVertically",value:function(){var t=this.getTags().Orientation;return-1!==[5,7].indexOf(t)}},{key:"_getFlipHorizontally",value:function(){var t=this.getTags().Orientation;return-1!==[2,4].indexOf(t)}},{key:"_getFinalOptions",value:function(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(t){var e=this._getFinalOptions(),n=e.rotation%360*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var r=this._sprite.getBounds();return this._renderTexture.resizeTo(new o.Z(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),i.Z.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t}},{key:"applyTo",value:function(t){var e=this._getFinalOptions(),n=r.Utils.createCanvas();90===Math.abs(e.rotation%180)?(n.width=t.height,n.height=t.width):(n.width=t.width,n.height=t.height);var i=n.getContext("2d"),o=e.rotation*Math.PI/180,a=.5*(n.width-t.width),s=.5*(n.height-t.height);return i.translate(a,s),i.translate(.5*t.width,.5*t.height),i.rotate(o),i.translate(-.5*t.width,-.5*t.height),e.flipVertically&&(i.translate(0,t.height),i.scale(1,-1)),e.flipHorizontally&&(i.translate(t.width,0),i.scale(-1,1)),i.drawImage(t,0,0),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(a.Z);h.identifier="exif-orientation",h.prototype.availableOptions={tags:{type:p.OBJECT,default:{}}};const d=h},8513:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(5030),i=n(9313),o=n(3678),a=n(332),s=n(3990),l=n(3155);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,s,u=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(s){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function d(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,d),(e=u.call(this,n,{enabled:{type:r.OptionType.BOOLEAN,default:!0,serializable:!1}}))._sdk=t,e._cacheEnabled=!1,e._dirtiness={},e._sprite=new a.Z.Sprite,e._container=new a.Z.Container,e._container.addChild(e._sprite),e}return(e=[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(t){var e=this;if(!this.getEnabled())return o.Z.info(this.constructor.name,"Disabled - skipping"),i.Z.resolve(t);if(!this._renderTexture){var n=t.getDimensions().floor();this._renderTexture=new a.Z.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}var r,s,u=this._sdk.getRenderer();if(o.Z.canLog("info")&&(s=new l.Z(this.constructor.name,"Rendering")),this.isDirtyForRenderer(u)){this._sprite.setTexture(t);var c=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(c),this._renderTexture.clear(),r=this._render(t).then((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.setDirtyForRenderer(t,u),e._renderTexture}))}else o.Z.info(this.constructor.name,"Rendering from cache"),r=i.Z.resolve(this._renderTexture);return r.then((function(t){return s&&s.stop(),t}))}},{key:"_render",value:function(t){return(this._sdk.getRenderer().isOfType(r.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)}},{key:"_renderWebGL",value:function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(t){return t.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(t,e){this._tempTransformChange=t,this._tempInverseTransformChange=e}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(t){var e=this._dirtiness[t.id];return void 0===e||e}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,{id:n},e)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var t,e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this._sdk.getInputDimensions();return n&&r.multiply(this._sdk.getZoom()).floor(),this._sdk.getOperationsStack().forEach((function(n){t||(n!==e?r=n.getNewDimensions(r):t=!0)})),r.floor()}},{key:"clone",value:function(){return new this.constructor(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(d.prototype,e),d}(s.Z);d.identifier=null;const y=d},5034:(t,e,n)=>{n.d(e,{Z:()=>L});var r=n(5030),i=n(16),o=n(332),a=n(9082),s=n(3779),l=n(7365),u=n(4518),c=n(2578);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(n);if(i){var r=y(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return d(this,t)});function l(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,l),(e=a.call(this,n))._sdk=t,e}return(e=[{key:"export",value:function(){var t=this,e=this._options.imageFormat,n=function e(n){return n.renderDone?n:t._sdk.render().then((function(t){return e(t)}))};return this.validateSettings().then((function(){return t._prepareSDK().then((function(t){return n(t)}))})).then((function(e){var n=e.outputTexture,i=(e.renderDone,t._sdk.getRenderer()),o=i.getCanvas();return i.isOfType(r.RendererType.WEBGL)&&(o=t._createCanvasFromTexture(n)),t._encodeImageFormat(o)})).then((function(n){return t._restoreExifMetadata(n,e)})).then((function(e){return t._restoreSDK().then((function(){return e}))}))}},{key:"_restoreExifMetadata",value:function(t,e,n){if(e===r.ImageFormat.JPEG){var i=this._sdk.getExif();i&&("string"==typeof t?t=i.restoreSegments(t):this._options.renderType)}return Promise.resolve(t)}},{key:"_encodeAsDataURL",value:function(t,e,n){return s.Z.isBrowser?Promise.resolve(t.toDataURL(e,n)):new Promise((function(r,i){t.toDataURL(e,n,(function(t,e){t?i(t):r(e)}))}))}},{key:"_encodeAsHTMLImage",value:function(t,e,n){return this._encodeAsDataURL(t,e,n).then((function(t){var e=new u.Z;return e.src=t,Promise.resolve(e)}))}},{key:"_encodeAsBuffer",value:function(t,e,n){return Promise.reject(new Error("Unsupported platform for RenderType"))}},{key:"_encodeAsMSBlob",value:function(t,e,n){return Promise.resolve(t.msToBlob())}},{key:"_encodeAsBLOB",value:function(t,e,n){return new Promise((function(r,i){t.toBlob((function(t){r(t)}),e,n)}))}},{key:"_encodeImageFormat",value:function(t){var e=this._options,n=e.imageFormat,i=e.quality,o=this._options.renderType;switch(o===r.RenderType.BLOB&&t.msToBlob&&!t.toBlob&&(o=r.RenderType.MSBLOB),o){case r.RenderType.IMAGE:return this._encodeAsHTMLImage(t,n,i);case r.RenderType.DATAURL:return this._encodeAsDataURL(t,n,i);case r.RenderType.BUFFER:return this._encodeAsBuffer(t,n,i);case r.RenderType.MSBLOB:return this._encodeAsMSBlob(t,n,i);case r.RenderType.BLOB:return this._encodeAsBLOB(t,n,i)}return Promise.reject(new Error("Unsupported RenderType: ".concat(o,"!")))}},{key:"_prepareSDK",value:function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(r.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach((function(t){t.disposeRenderTextures()})),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(r.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(t){var e=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i);var a=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var l,u=new Uint8Array(n.x*n.y*4);if(r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,u),this._checkPixelsForTransparency(u)){var c=new o.Z.Sprite(t);c.setFilters([new o.Z.Filters.UnpremultiplyFilter]);var f=new o.Z.Container;f.addChild(c),(l=new o.Z.RenderTexture(e,n.x,n.y)).render(f);var p=l.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,p,0),r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,u),e.setRenderTarget(),l.dispose()}var h=s.Z.createCanvas();h.width=n.x,h.height=n.y;var d=h.getContext("2d"),y=d.createImageData(n.x,n.y);return y.data.set(u),d.putImageData(y,0,0),r.deleteFramebuffer(i),h}},{key:"_checkPixelsForTransparency",value:function(t){for(var e=this._sdk.getFinalDimensions(),n=e.x*e.y*4,r=3;r<n;r+=4)if(255!==t[r])return!0;return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(n(3990).Z);g.prototype.availableOptions={renderType:{type:r.OptionType.STRING,available:s.Z.values(r.RenderType),default:r.RenderType.IMAGE},imageFormat:{type:r.OptionType.STRING,available:s.Z.values(r.ImageFormat),default:r.ImageFormat.PNG},quality:{type:r.OptionType.NUMBER,default:.8}};const m=g;var v=n(3155);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){return R.byteArrayToString(F.decode(t))},T=i.Rectangle,C=i.Constants,E=i.Engine,R=i.Utils,D=i.EventEmitter,P=i.Events,I=i.Vector2,A=i.Log,F=i.Base64,j=i.Color,M=C.RenderType,B=C.ImageFormat,z=C.RendererType;const L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(u,t);var e,r,o,s=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return x(this,t)});function u(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,u),(e=s.call(this))._onOperationUpdate=e._onOperationUpdate.bind(O(e)),e._onContextRestored=e._onContextRestored.bind(O(e));var o=n(9719),a=o.version;if(e.version=a,e[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,e._preferredRenderer=t,e._options=R.defaults(r,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:j.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),e._options.smoothUpscaling&&(E.BaseTexture.DefaultMagFilter=E.BaseTexture.LinearFilter),e._options.extensions=R.defaults(e._options.extensions,{operations:[],controls:[],languages:[]}),A.setLevel(e._options.logLevel),e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,e[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]){if(!e._v())return x(e);var c=i[k("TGljZW5zZUNoZWNrZXI=")];e._l=new c(e[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]),e._cv(!0).then((function(){e._ct()})).catch((function(t){A.error(k("TGljZW5zaW5n"),t.message)}))}else e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,e._l=new(i[k("RnJlZUxpY2Vuc2VDaGVja2Vy")]);return e._defaultRenderMode=e._options.renderMode,e._renderMode=e._options.renderMode,e._textureQuality=e._options.textureQuality,e._offset=new I,e._zoom=e._options.zoom,e._spriteScale=e._options.spriteScale,e._rotation=e._options.rotation,e._operations={},e._operationsStack=null,e.setOperationsStack(new l.Z),e._container=new E.Container,e._sprite=new E.Sprite,e._container.addChild(e._sprite),e._inputTexture=e._options.inputTexture,e._currentInputTexture=null,e._currentTexture=null,e._resizedTexture=null,e._resizedContainer=new E.Container,e._resizedSprite=new E.Sprite,e._resizedContainer.addChild(e._resizedSprite),e._texturesToDispose=[],e.setSmoothDownscaling(e._options.smoothDownscaling),e._registerOperations(),e._initRenderer(),e._renderer.constructor.type,e._options.displayWelcomeMessage,e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&A.log(k("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),e._options.image&&e.setImage(e._options.image,e._options.exif),e}return(e=[{key:"_v",value:function(){return!!this[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]||(A.error(k("TGljZW5zaW5n"),k("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),A.error(k("TGljZW5zaW5n"),k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?A.error(k("TGljZW5zaW5n"),k("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):A.warn(k("TGljZW5zaW5n"),k("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch((function(n){t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var r=k("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(r="ELICEXP"===n.code?k("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?k("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?k("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?k("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",_(t._options.license)):"ELICINV"===n.code?k("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=r,new Error(n)}))}},{key:"_t",value:function(){this._l.t()}},{key:"_fl",value:function(){return this[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}},{key:"_onOperationUpdate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,[P.OPERATION_UPDATED].concat(e))}},{key:"_onContextRestored",value:function(){A.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach((function(t){t.disposeRenderTextures()})),this.render()}},{key:"export",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.DATAURL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.PNG,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then((function(){return t.hasChanges()&&t._t(),t._operationsStack.forEach((function(t){t.onBeforeExport()})),new m(t,{renderType:e,imageFormat:n,quality:r}).export().then((function(e){return t._operationsStack.forEach((function(t){t.onAfterExport()})),Promise.resolve(e)}))}))}},{key:"render",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n,r=this._renderer.getContext();r.startFrame&&r.startFrame(),A.canLog("info")&&(n=new v.Z("","Frame rendering")),A.info("","Rendering starts");var i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then((function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()})).then((function(){return i.validateSettings()})).then((function(){return!t._fl()&&t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]||(i.getByIdentifier("license-watermark")?i.moveToTop("license-watermark"):t.createOperation("license-watermark")),i.render(t,t._currentTexture)})).then((function(n){var r=n.outputTexture;switch(t._currentTexture=r,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var i=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(i),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0);break;case"adapter":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(1,1),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),n})).then((function(e){return n&&n.stop(),r.endFrame&&r.endFrame(),t._disposeTextures(),e}))}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var t=this;return new Promise((function(e,n){var r=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i,o=t.getInputDimensions().multiply(r).floor();t._resizedTexture?t._resizedTexture.getDimensions().equals(o)||(t._resizedTexture.resizeTo(o),i=!0):(t._resizedTexture=new E.RenderTexture(t._renderer,o.x,o.y),i=!0),i&&(t._resizedSprite.setScale(r,r),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)}))}},{key:"_registerOperations",value:function(){for(var t in this._operations={},a){var e=a[t];this._operations[e.identifier]=e}this._operations=R.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(t){var e=this;t.forEach((function(t){e._operations[t.identifier]=t}))}},{key:"setAllOperationsToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)}},{key:"createOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._operations[t];if(!r)throw new Error("No operation with identifier `".concat(t,"` found."));var i=new r(this,e);return n&&this.addOperation(i),i}},{key:"addOperation",value:function(t){this._operationsStack.push(t)}},{key:"removeOperation",value:function(t){this._operationsStack.remove(t)}},{key:"getInputDimensions",value:function(){var t=this._inputTexture.getFrame();return new I(t.width,t.height)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions(),n=this._operationsStack;return n.forEach((function(t){t.getEnabled()&&(e=t.getNewDimensions(e))})),t&&e.multiply(this._spriteScale),e.floor()}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){var t=this.getTextureScale(),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach((function(t){e=t.getNewDimensions(e)})),e}},{key:"getCrossOrigin",value:function(){return R.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_initRenderer",value:function(){var t,e,n={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};if("export"!==this._renderMode&&this._options.canvas){var r=this._options.canvas;t=r.width,e=r.height}else if(this._inputTexture){var i=this.getFinalDimensions();t=i.x,e=i.y}else t=1,e=1;switch(this._preferredRenderer){case z.WEBGL:this._renderer=E.autoDetectRenderer(t,e,n),this._renderer.on("context-restored",this._onContextRestored);break;case z.CANVAS:this._renderer=new E.CanvasRenderer(t,e,n),this._renderer.on("context-restored",this._onContextRestored);break;default:A.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `".concat(this._preferredRenderer,"` not supported. Falling back to automatically detected renderer.")),this._renderer=E.autoDetectRenderer(t,e,n)}}},{key:"resizeTo",value:function(t){this._renderer.resizeTo(t,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(t){if(t){var e,n=t.src;if(e=n,c.Z.isJPEG(n)){var r=null;try{r=c.Z.fromBase64String(e)}catch(t){}if(!r)return;return r}}}},{key:"_handleExifOrientation",value:function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,n=-1!==[2,4,5,7].indexOf(t.Orientation);if(e||n){if("undefined"==typeof navigator)this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t);else{var r=window&&window.navigator&&window.navigator.userAgent||"";!r.match(/msie|trident/i)&&-1===r.indexOf("Edge")&&CSS.supports("image-orientation","from-image")||(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t))}this._exif.setOrientation(1)}}}},{key:"correctExifOrientation",value:function(t){var e=this.parseExif(t);if(!e)return t;var n=e.getTags();if(n&&n.Orientation){var r=1!==n.Orientation&&2!==n.Orientation,i=-1!==[2,4,5,7].indexOf(n.Orientation);if(r||i){if("undefined"==typeof navigator){var o=this.createOperation("exif-orientation",{},!1);o.setTags(n),t=o.applyTo(t)}else{var a=window&&window.navigator&&window.navigator.userAgent||"";if(a.match(/msie|trident/i)||-1!==a.indexOf("Edge")||!CSS.supports("image-orientation","from-image")){var s=this.createOperation("exif-orientation",{},!1);s.setTags(n),t=s.applyTo(t)}}return e.setOrientation(1),n.Orientation=1,t}}return t}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(t){this._texturesToDispose.push(t)}},{key:"_disposeTextures",value:function(){for(var t=0;t<this._texturesToDispose.length;t++)this._texturesToDispose[t].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var r=new E.BaseTexture(this._image),i=new T(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(i.width=n.x,i.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new E.Texture(r,i),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(t){this._inputTexture=t}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(t){this._renderer.setCanvas(t)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(t){this._operationsStack&&this._operationsStack.off(P.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(P.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t,e){t instanceof I?this._offset.copy(t):this._offset.set(t,e)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(t){this._renderMode=t}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)}},{key:"setRotation",value:function(t){this._rotation=t}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(D)},6982:(t,e,n)=>{t.exports=n(787),n(3538)},3538:(t,e,n)=>{n.r(e),n.d(e,{default:()=>WO});var r={};n.r(r),n.d(r,{Brightness:()=>Yt,ColorMatrixPrimitive:()=>me,Contrast:()=>oe,Desaturation:()=>Ee,DuoTone:()=>Le,Gamma:()=>Ke,Glow:()=>ln,Gobblin:()=>gn,Grayscale:()=>Sn,LookupTable:()=>jn,LookupTableImage:()=>Yn,Saturation:()=>or,SoftColorOverlay:()=>gr,ThreeDLookupTableImage:()=>Vr,ToneCurve:()=>Or,X400:()=>Pr});var i={};n.r(i),n.d(i,{A15Filter:()=>ai,BWFilter:()=>bi,BWHardFilter:()=>Ci,BreezeFilter:()=>hi,CelsiusFilter:()=>Fi,ChestFilter:()=>Ui,DuoToneFilter:()=>Yi,FixieFilter:()=>eo,FoodFilter:()=>lo,FridgeFilter:()=>go,FrontFilter:()=>Oo,GlamFilter:()=>Do,GobblinFilter:()=>Bo,IdentityFilter:()=>$r,K1Filter:()=>Go,K2Filter:()=>Qo,K6Filter:()=>ia,KDynamicFilter:()=>fa,LUTFilter:()=>nl,LeninFilter:()=>va,LomoFilter:()=>ka,MellowFilter:()=>Ia,MetalFilter:()=>Na,MorningFilter:()=>Xa,OrchidFilter:()=>ts,Pola669Filter:()=>ds,PolaFilter:()=>ss,QuoziFilter:()=>ws,SemiredFilter:()=>Es,SunnyFilter:()=>js,TexasFilter:()=>Ws,ThreeDLUTFilter:()=>ul,X400Filter:()=>qs});var o=n(787),a=n.n(o),s=n(7945),l=n.n(s);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=o.Math.ColorMatrix,d=1e-7;function y(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r}var g=function(t){return(Math.max(t.r,t.g,t.b)+Math.min(t.r,t.g,t.b))/2},m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(i){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this))._fragmentSource=n(7761),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options,u=l.colorMatrix,c=l.gamma,f=l.shadows,p=l.highlights,h=l.whites,m=l.blacks,v=1!==c,_=0!==f||0!==p,b=new o.Color(0,0,0,0),w=0;w<r.width*r.height;w++){var x=4*w;if(b.r=s.data[x]/255,b.g=s.data[x+1]/255,b.b=s.data[x+2]/255,v&&(b.r=Math.pow(b.r,1/Math.max(c,d)),b.g=Math.pow(b.g,1/Math.max(c,d)),b.b=Math.pow(b.b,1/Math.max(c,d))),_){var O=g(b),S=f>=0?o.Utils.clamp(Math.pow(O,1/(f+1))+-.76*Math.pow(O,2/(f+1))-O,0,Math.max(f,1)):-o.Utils.clamp(Math.pow(O,1/(1-f))+-.76*Math.pow(O,2/(1-f))-O,0,Math.max(-f,1)),k=S*O*O,T=S-k,C=O+k+(p<0?o.Utils.clamp(1-Math.pow(1-O,1/(1-p))- -.8*Math.pow(1-O,2/(1-p))-O,-1,0):-o.Utils.clamp(1-Math.pow(1-O,1/(1+p))- -.8*Math.pow(1-O,2/(1+p))-O,-1,0));b.r=o.Utils.clamp(C*((b.r+T)/Math.max(O,d)),0,1),b.g=o.Utils.clamp(C*((b.g+T)/Math.max(O,d)),0,1),b.b=o.Utils.clamp(C*((b.b+T)/Math.max(O,d)),0,1)}(b=u.apply(b).clamp(0,1)).r=y(b.r,0,1,m/2,1+h/2),b.g=y(b.g,0,1,m/2,1+h/2),b.b=y(b.b,0,1,m/2,1+h/2),s.data[x]=255*b.r,s.data[x+1]=255*b.g,s.data[x+2]=255*b.b}a.putImageData(s,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);m.prototype.availableOptions={gamma:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT},shadows:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},highlights:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT},whites:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},blacks:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new h,uniformType:o.UniformType.MAT4},colorOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};const v=m;function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=o.Math.Vector2,S=o.Math.ColorMatrix,k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(i){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this))._fragmentSource=n(1995),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),a=e.getContext(),s=this._options.clarity,l=this._options.colorMatrix,u=new o.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),c=i.width,f=i.height,p=a.getImageData(0,0,c,f),h=r.createImageData(c,f);this.canvasShader(p,h,s,l,u),r.putImageData(h,0,0)}},{key:"canvasShader",value:function(t,e,n,r,i){for(var a=function(t,e,n){return Math.min(Math.max(t,e),n)},s=function(t,e,n){var r=a((n-t)/(e-t),0,1);return r*r*(3-2*r)},l=4*t.width,u=t.data.length,c=u-1,f=t.data,p=e.data,h=new o.Color,d=2295,y=function(t){return f[t=(t=t<0?0:t)>c?c:t]},g=0;g<u;g+=4){var m=y(g+0),v=y(g+1),_=y(g+2),b=y(g+3),w=(m+y(g-4-l+0)+y(g-4+0)+y(g-4+l+0)+y(g-l+0)+y(g+l+0)+y(g+4-l+0)+y(g+4+0)+y(g+4+l))/d,x=(v+y(g-4-l+1)+y(g-4+1)+y(g-4+l+1)+y(g-l+1)+y(g+l+1)+y(g+4-l+1)+y(g+4+1)+y(g+4+l+1))/d,O=(_+y(g-4-l+2)+y(g-4+2)+y(g-4+l+2)+y(g-l+2)+y(g+l+2)+y(g+4-l+2)+y(g+4+2)+y(g+4+l+2))/d,S=(b+y(g-4-l+3)+y(g-4+3)+y(g-4+l+3)+y(g-l+3)+y(g+l+3)+y(g+4-l+3)+y(g+4+3)+y(g+4+l+3))/d;b/=255;var k=a(.3*(m/=255)+.59*(v/=255)+.1*(_/=255),.111111,.999999),T=Math.min(s(1-k,0,.11),s(k,0,.11)),C=3.7*n*T,E=Math.pow(2,.27*n*T),R=a(m+a((m-w)*C,0,10),0,1)*E,D=a(v+a((v-x)*C,0,10),0,1)*E,P=a(_+a((_-O)*C,0,10),0,1)*E,I=a(b+a((b-S)*C,0,10),0,1);h.set(R,D,P,I);var A=r.apply(h).clamp(0,1);p[g+0]=255*A.r,p[g+1]=255*A.g,p[g+2]=255*A.b,p[g+3]=255*A.a}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);k.prototype.availableOptions={clarity:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},pixelDimension:{type:o.OptionType.VECTOR2,default:new O(100,100),uniformType:o.UniformType.FLOAT2},colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new S,uniformType:o.UniformType.MAT4},colorOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};const T=k;function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o.Math.Vector3;var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(i){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(5024),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.temperature,s=i.width,l=i.height,u=o.getImageData(0,0,s,l),c=r.createImageData(s,l);this.canvasShader(u,c,a),r.putImageData(c,0,0)}},{key:"canvasShader",value:function(t,e,n){for(var r,i=function(t,e,n){return t*(1-n)+e*n},o=function(t,e){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]]},a=t.data.length,s=a-1,l=t.data,u=e.data,c=function(t){return l[t=(t=t<0?0:t)>s?s:t]},f=[.93,.54,0],p=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],h=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],d=0;d<a;d+=4){var y=c(d+0)/255,g=c(d+1)/255,m=c(d+2)/255,v=c(d+3)/255,_=o(p,[y,g,m]);_.z=(r=_.z+0,Math.min(Math.max(r,-.5226),.5226));var b=o(h,_),w=[b[0]<.5?2*b[0]*f[0]:1-2*(1-b[0])*(1-f[0]),b[1]<.5?2*b[1]*f[1]:1-2*(1-b[1])*(1-f[1]),b[2]<.5?2*b[2]*f[2]:1-2*(1-b[2])*(1-f[2])];u[d+0]=255*i(b[0],w[0],n),u[d+1]=255*i(b[1],w[1],n),u[d+2]=255*i(b[2],w[2],n),u[d+3]=255*v}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);P.prototype.availableOptions={temperature:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};const I=P;function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=o.Math.Vector2,z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(i){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(2511),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.sharpness,s=i.width,l=i.height,u=o.getImageData(0,0,s,l),c=r.createImageData(s,l);this.canvasShader(u,c,a),r.putImageData(c,0,0)}},{key:"canvasShader",value:function(t,e,n){for(var r=function(t,e,n){return Math.min(Math.max(t,e),n)},i=t.width,o=t.height,a=t.data,s=e.data,l=function(t,e,n){return t*(1-n)+e*n},u=function(t){return r(a[t]/255,0,1)},c=function(t,e){var n=r(t,0,i-1),a=r(e,0,o-1);return 4*(n+i*a)},f=[],p=[],h=[-1,0,0,1],d=[0,-1,1,0],y=n>0?-1:.2,g=n>0?5:.2,m=Math.abs(n),v=0;v<i;v++)for(var _=0;_<o;_++){var b=c(v,_);f[0]=u(b+0),f[1]=u(b+1),f[2]=u(b+2),f[3]=u(b+3),p[0]=g*f[0]*f[3],p[1]=g*f[1]*f[3],p[2]=g*f[2]*f[3],p[3]=g*f[3];for(var w=0;w<4;w++){var x=c(v+h[w],_+d[w]),O=u(x+3);p[3]+=y*O;for(var S=0;S<3;S++)p[S]+=y*u(x+S)*O}for(var k=0;k<3;k++)p[k]/=Math.max(p[3],1e-6),p[k]=r(p[k],0,1);p[3]=r(p[3],0,1);for(var T=0;T<4;T++)f[T]=r(l(f[T],p[T],m),0,1),s[b+T]=255*f[T]}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);z.prototype.availableOptions={sharpness:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},pixelDimension:{type:o.OptionType.VECTOR2,default:new B(100,100),uniformType:o.UniformType.FLOAT2}};const L=z;function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=o.Math.ColorMatrix,X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(n);if(r){var i=V(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return G(this,t)});function a(){var t;U(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._clarityFilter=new T,t._temperatureFilter=new I,t._sharpnessFilter=new L,t._filter=new v,t._sprite.setFilters([t._clarityFilter,t._temperatureFilter,t._filter]),t}return(e=[{key:"_render",value:function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;var n=new Z;n.multiply(Z.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(Z.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:e});var r=new Z;r.multiply(Z.createExposureMatrix(this._options.exposure)),r.multiply(Z.createSaturationMatrix(this._options.saturation+1)),r.multiply(Z.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),r.multiply(Z.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:r,colorOffset:r.getOffsets()});var i=[];return 0!==this._options.clarity&&i.push(this._clarityFilter),0!==this._options.sharpness&&i.push(this._sharpnessFilter),0!==this._options.temperature&&i.push(this._temperatureFilter),i.push(this._filter),this._sprite.setFilters(i),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){W(V(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);X.identifier="adjustments",X.prototype.availableOptions={brightness:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:o.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:o.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},a().Operations.AdjustmentsOperation=X;const Y=X;n(3638);var q=n(16);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(5034);var et=o.Math.Vector2,nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(r);if(i){var n=tt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return $(this,t)});function s(){var t;Q(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(9018),t._lastBlurRadius=null,t._lastDimensions=new et(0,0),t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=e.getCanvas(),a=e.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var l=a.getImageData(0,0,o.width,o.height),u=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,f=this._options.delta,p=30,h=0;h<o.width;h++)for(var d=0;d<o.height;d++){var y=h+d*o.width,g=4*y,m=0,v=0,_=0,b=0,w=0;i&&(c=i(h/o.width,d/o.height));for(var x=this._random(h,1-d/o.height),O=-p;O<=p;O++){var S=(O+x-.5)/p,k=1-Math.abs(S),T=f.x*S*c,C=f.y*S*c,E=Math.max(Math.min(h+T,o.width-1),0),R=Math.max(Math.min(d+C,o.height-1),0),D=4*(Math.round(R)*o.width+Math.round(E)),P=l.data[D+3],I=P*l.data[D],A=P*l.data[D+1],F=P*l.data[D+2];m+=I*k,v+=A*k,_+=F*k,b+=P*k,w+=k}m/=w,v/=w,_/=w,b/=w,u.data[g]=m/b,u.data[g+1]=v/b,u.data[g+2]=_/b,u.data[g+3]=b}s.putImageData(u,0,0),this._lastDimensions.copy(new et(o.width,o.height))}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n,r){var i=e.getDimensions(),o=!this._lastDimensions.equals(i);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n.setPixelRatio(e.getPixelRatio()),n.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(i)}},{key:"_random",value:function(t,e){var n=12.9898*t+78.233*e,r=n-3.14*Math.floor(n/3.14),i=43758.5453*Math.sin(r);return i-Math.floor(i)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);nt.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},delta:{type:o.OptionType.VECTOR2,default:new et(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new et(100,100),uniformType:o.UniformType.FLOAT2},blurQuality:{type:o.OptionType.STRING,default:"low"}};const rt=nt;function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=o.Math.Vector2,ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ut(n);if(r){var i=ut(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lt(this,t)});function a(){var t;ot(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new rt({},s),t._verticalFilter=new rt({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new ct(.5,.5)),t._verticalFilter.setDelta(new ct(-.5,.5)),t._filter=new rt({},s),t}return(e=[{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r={blurRadius:this._options.blurRadius*n,texSize:e,blurQuality:"high"};return this._horizontalFilter.set(r),this._verticalFilter.set(r),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options.blurRadius,n=t.getDimensions();return this._filter.set({blurRadius:e,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"transform",value:function(t){var e=this.getBlurRadius(),n=t.applyToRelativeSize(e);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){at(ut(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);ft.identifier="blur",ft.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.BlurOperation=ft;const pt=ft;function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return e&&yt(t.prototype,e),n&&yt(t,n),t}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(o,t);var e,r,i=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=_t(e);if(r){var i=_t(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return vt(this,t)});function o(){var t;return dt(this,o),(t=i.call(this))._fragmentSource=n(71),t}return gt(o,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=n.getContext(),o=this._options.filteredCanvas;i.save(),i.globalAlpha=1-this._options.intensity,i.drawImage(r,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()}}]),o}(o.Engine.Filter);bt.prototype.availableOptions={filteredImage:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},filteredCanvas:{type:o.OptionType.OBJECT,default:null},intensity:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};const wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;dt(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new bt}return gt(t,[{key:"push",value:function(t){this._stack.push(t)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(t,e,n){if(this.isEmpty())return o.Promise.resolve();var r=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[r.id];if(!i){var a=t.getSprite().getTexture().getFrame();i=new o.Engine.RenderTexture(t.getRenderer(),a.width,a.height),this._renderTextures[r.id]=i}var s=n.getDimensions();i.resizeTo(s);var l=this.isDirtyForRenderer(r);if(l){this._stack.forEach((function(e){e.update(t)}));var u=this._stack.map((function(t){return t.getFilter()}));this._sprite.setFilters(u),i.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(o.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(r.isOfType(o.RendererType.WEBGL)){var c=i.getBaseTexture();c.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(c,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(o.Color.TRANSPARENT),n.render(this._container),l&&this.disposeRenderTextures(),o.Promise.resolve()}},{key:"setIntensity",value:function(t){this._intensity=t}},{key:"isEmpty",value:function(){return 0===this._stack.length}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this._dirtiness[e]=t}},{key:"disposeRenderTextures",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach((function(t){return t.dispose()})),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),t}();function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(n);if(r){var i=Rt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Et(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tt(this,a),(t=i.call(this,e,St({intensity:{type:o.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:o.OptionType.BOOLEAN,default:!0}},n)))._stack=new wt(t._options.intensity),t}return(e=[{key:"render",value:function(t,e,n){var r=this;return this._stack.render(t,e,n).then((function(t){return r.setDirty(!1),t}))}},{key:"setDirtyForRenderer",value:function(t,e){this._stack.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);Dt.identifier=null,Dt.isIdentity=!1,Dt.displayName=null,Dt.PrimitivesStack=wt;const Pt=Dt;function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(n);if(r){var i=Mt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jt(this,t)});function o(){return At(this,o),i.apply(this,arguments)}return(e=[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ut(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}function Wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vt(t);if(e){var i=Vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gt(this,n)}}function Gt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt=function(t){Wt(r,t);var e=Ht(r);function r(){var t;return Lt(this,r),(t=e.call(this))._fragmentSource=n(8234),t}return Ut(r,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.brightness;if(0!==s){s*=255;for(var l=0;l<r.width*r.height;l++){var u=4*l;a.data[u]+=s,a.data[u+1]+=s,a.data[u+2]+=s}o.putImageData(a,0,0)}else o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Zt.prototype.availableOptions={brightness:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var Xt=function(t){Wt(n,t);var e=Ht(n);function n(){var t;Lt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Zt,t}return Ut(n,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),n}(Bt);Xt.prototype.availableOptions=Zt.prototype.availableOptions;const Yt=Xt;function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),t}function $t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ne(t);if(e){var i=ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){$t(r,t);var e=te(r);function r(){var t;return Kt(this,r),(t=e.call(this))._fragmentSource=n(8171),t}return Jt(r,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.contrast;if(1!==s){for(var l=0;l<r.width*r.height;l++){var u=4*l;a.data[u]=(a.data[u]-127)*s+127,a.data[u+1]=(a.data[u+1]-127)*s+127,a.data[u+2]=(a.data[u+2]-127)*s+127}o.putImageData(a,0,0)}}}]),r}(o.Engine.Filter);re.prototype.availableOptions={contrast:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var ie=function(t){$t(n,t);var e=te(n);function n(){var t;Kt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new re,t}return Jt(n,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),n}(Bt);ie.prototype.availableOptions=re.prototype.availableOptions;const oe=ie;function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),t}function ce(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=he(t);if(e){var i=he(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var de=o.Math.ColorMatrix,ye=function(t){ce(r,t);var e=fe(r);function r(){var t;return se(this,r),(t=e.call(this))._fragmentSource=n(1689),t}return ue(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options.colorMatrix,u=new o.Color(0,0,0,0),c=0;c<r.width*r.height;c++){var f=4*c;u.r=s.data[f]/255,u.g=s.data[f+1]/255,u.b=s.data[f+2]/255,u=l.apply(u),s.data[f]=255*u.r,s.data[f+1]=255*u.g,s.data[f+2]=255*u.b}a.putImageData(s,0,0)}}]),r}(o.Engine.Filter);ye.prototype.availableOptions={colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new de,uniformType:o.UniformType.MAT4},colorMatrixOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};var ge=function(t){ce(n,t);var e=fe(n);function n(){var t;se(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new ye,t}return ue(n,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),n}(Bt);ge.prototype.availableOptions=ye.prototype.availableOptions;const me=ge;function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function we(t,e,n){return e&&be(t.prototype,e),n&&be(t,n),t}function xe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var i=ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Te=function(t){xe(r,t);var e=Oe(r);function r(){var t;return _e(this,r),(t=e.call(this))._fragmentSource=n(8715),t}return we(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=[.3,.59,.11],l=this._options.desaturation,u=0;u<r.width*r.height;u++){var c=4*u,f=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*f-a.data[c])*l,a.data[c+1]+=(255*f-a.data[c+1])*l,a.data[c+2]+=(255*f-a.data[c+2])*l}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Te.prototype.availableOptions={desaturation:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var Ce=function(t){xe(n,t);var e=Oe(n);function n(){var t;_e(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Te,t}return we(n,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),n}(Bt);Ce.prototype.availableOptions=Te.prototype.availableOptions;const Ee=Ce;function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ie(t,e,n){return e&&Pe(t.prototype,e),n&&Pe(t,n),t}function Ae(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);if(e){var i=Me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return je(this,n)}}function je(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){Ae(r,t);var e=Fe(r);function r(){var t;return De(this,r),(t=e.call(this))._fragmentSource=n(74),t}return Ie(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options,u=l.lightColor,c=l.darkColor,f=l.intensity,p=0;p<r.width*r.height;p++){var h=4*p,d=s.data[h]/255,y=s.data[h+1]/255,g=s.data[h+2]/255,m=s.data[h+3]/255,v=new o.Color(d,y,g,m),_=this._duoToneKernel(v,u,c,f);s.data[h]=255*_.r,s.data[h+1]=255*_.g,s.data[h+2]=255*_.b,s.data[h+3]=255*_.a}a.putImageData(s,0,0)}},{key:"_duoToneKernel",value:function(t,e,n,r){if(t.clone().clamp(0,1),r>0){var i=Math.max(r+1,1e-7);t.r=1-Math.pow(1-t.r,i),t.g=1-Math.pow(1-t.g,i),t.b=1-Math.pow(1-t.b,i)}else{var o=Math.max(1-r,1e-7);t.r=Math.pow(t.r,o),t.g=Math.pow(t.g,o),t.b=Math.pow(t.b,o)}var a=.2126*t.r+.7152*t.g+.0722*t.b,s=Math.min(Math.max(a,0),1),l=n.clone().mix(e,s);return l.a*=t.a,l}}]),r}(o.Engine.Filter);Be.prototype.availableOptions={lightColor:{type:o.OptionType.COLOR,default:o.Color.RED,uniformType:o.UniformType.FLOAT4},darkColor:{type:o.OptionType.COLOR,default:o.Color.BLACK,uniformType:o.UniformType.FLOAT4},intensity:{type:o.OptionType.NUMBER,default:.5,uniformType:o.UniformType.FLOAT}};var ze=function(t){Ae(n,t);var e=Fe(n);function n(){var t;De(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Be,t}return Ie(n,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var t=2*this._options.intensity-1;this._filter.setIntensity(t)}}]),n}(Bt);ze.prototype.availableOptions=Be.prototype.availableOptions;const Le=ze;function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function He(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),t}function Ge(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xe(t);if(e){var i=Xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ye=function(t){Ge(r,t);var e=Ve(r);function r(){var t;return Ue(this,r),(t=e.call(this))._fragmentSource=n(5119),t}return He(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.gamma,l=new Float32Array(256),u=0;u<256;u++)l[u]=255*Math.pow(u/255,s.r);for(var c=new Float32Array(256),f=0;f<256;f++)c[f]=255*Math.pow(f/255,s.g);for(var p=new Float32Array(256),h=0;h<256;h++)p[h]=255*Math.pow(h/255,s.b);for(var d=0;d<r.width*r.height;d++){var y=4*d;a.data[y]=l[a.data[y]],a.data[y+1]=c[a.data[y+1]],a.data[y+2]=p[a.data[y+2]]}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Ye.prototype.availableOptions={gamma:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var qe=function(t){Ge(n,t);var e=Ve(n);function n(){var t;Ue(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Ye,t}return He(n,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),n}(Bt);qe.prototype.availableOptions=Ye.prototype.availableOptions;const Ke=qe;function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tn(t,e,n){return e&&$e(t.prototype,e),n&&$e(t,n),t}function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=on(t);if(e){var i=on(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rn(this,n)}}function rn(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var an=function(t){en(r,t);var e=nn(r);function r(){var t;return Je(this,r),(t=e.call(this))._fragmentSource=n(5285),t}return tn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r,i=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=o.getImageData(0,0,i.width,i.height),l=this._options.color,u=0;u<i.width;u++)for(var c=0;c<i.height;c++){var f=4*(i.width*c+u),p=(u/i.width-.5)/.75,h=(c/i.height-.5)/.75;r=1-(p*p+h*h),r=Math.min(Math.max(r,.1),1),s.data[f]=s.data[f]*(r*l.r),s.data[f+1]=s.data[f+1]*(r*l.g),s.data[f+2]=s.data[f+2]*(r*l.b),s.data[f+3]=255}a.putImageData(s,0,0)}}]),r}(o.Engine.Filter);an.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var sn=function(t){en(n,t);var e=nn(n);function n(){var t;Je(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new an,t}return tn(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(Bt);sn.prototype.availableOptions=an.prototype.availableOptions;const ln=sn;function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dn(t);if(e){var i=dn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hn(this,n)}}function hn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yn=function(t){fn(i,t);var e,r=pn(i);function i(){var t;return cn(this,i),(t=r.call(this))._fragmentSource=n(175),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s);a.data[u+2]=.33*a.data[u+1],a.data[u]=.6*a.data[u],a.data[u+2]+=.33*a.data[u],a.data[u+1]=.7*a.data[u+1],a.data[u+3]=255}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const gn=function(t){fn(n,t);var e=pn(n);function n(){var t;cn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new yn,t}return n}(Bt);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xn(t);if(e){var i=xn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var On=function(t){_n(i,t);var e,r=bn(i);function i(){var t;return vn(this,i),(t=r.call(this))._fragmentSource=n(3841),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s),c=.2125*a.data[u]+.7154*a.data[u+1]+.0721*a.data[u+2];a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const Sn=function(t){_n(n,t);var e=bn(n);function n(){var t;vn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new On,t}return n}(Bt);function kn(t,e,n){return(kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rn(t,e,n){return e&&En(t.prototype,e),n&&En(t,n),t}function Dn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=An(t);if(e){var i=An(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return In(this,n)}}function In(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fn=function(t){Dn(r,t);var e=Pn(r);function r(){var t;Cn(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o)))._fragmentSource=n(5193),t}return Rn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.lookupTableData,l=0;l<r.width*r.height;l++){var u=4*l,c=a.data[u];a.data[u]=s[4*c];var f=a.data[u+1];a.data[u+1]=s[1+4*f];var p=a.data[u+2];a.data[u+2]=s[2+4*p]}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Fn.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},lookupTableData:{type:o.OptionType.ARRAY,default:[]}};const jn=function(t){Dn(n,t);var e=Pn(n);function n(){var t;Cn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Fn({lookupTable:t._options.textureGLUnit}),t._textures={},t._renderers={},t}return Rn(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),n=t.getRenderer(),r=n.id;this._renderers[r]=n,this._textures[r]||(this._textures[r]=new o.Engine.BaseTexture);var i=this._textures[r],a=new o.Engine.PixelArrayImage(256,1,e);i.setSource(a),i.setGLUnit(this._options.textureGLUnit),n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(i)}},{key:"dispose",value:function(){for(var t in kn(An(n.prototype),"dispose",this).call(this),this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data}}]),n}(Bt);function Mn(t,e,n){return(Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nn(t,e,n){return e&&Ln(t.prototype,e),n&&Ln(t,n),t}function Un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gn(t);if(e){var i=Gn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vn=o.Math.Vector2,Zn=function(t){Un(r,t);var e=Wn(r);function r(){var t;return zn(this,r),(t=e.call(this))._precomputeQuads(),t._fragmentSource=n(7165),t}return Nn(r,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new Vn;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),l=i.getImageData(0,0,r.width,r.height),u=s.getImageData(0,0,a.width,a.height),c=new Vn,f=0;f<r.width*r.height*4;f+=4){var p=l.data[f],h=l.data[f+1],d=l.data[f+2],y=l.data[f+3]/255,g=this._quads[d];c.x=64*g.x,c.y=64*g.y,c.x+=Math.floor(p/4),c.y+=Math.floor(h/4);var m=4*(a.width*c.y+c.x)|0,v=u.data[m];v=p*(1-y)+v*y;var _=u.data[m+1];_=h*(1-y)+_*y;var b=u.data[m+2];b=d*(1-y)+b*y,l.data[f]=v,l.data[f+1]=_,l.data[f+2]=b}o.putImageData(l,0,0)}},{key:"_createImageCanvas",value:function(t){var e=o.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),r}(o.Engine.Filter);Zn.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:3,uniformType:o.UniformType.INT},lookupTableImage:{type:o.OptionType.IMAGE,uniformType:null}};var Xn=function(t){Un(n,t);var e=Wn(n);function n(){var t;zn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Zn,t._textures={},t}return Nn(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new o.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in Mn(Gn(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),n}(Bt);Xn.prototype.availableOptions={image:{type:o.OptionType.IMAGE}};const Yn=Xn;function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e,n){return e&&Qn(t.prototype,e),n&&Qn(t,n),t}function $n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nr(t);if(e){var i=nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return er(this,n)}}function er(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rr=function(t){$n(r,t);var e=tr(r);function r(){var t;return Kn(this,r),(t=e.call(this))._fragmentSource=n(2519),t}return Jn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.saturation,l=0;l<r.width;l++)for(var u=0;u<r.height;u++){var c=4*(r.width*u+l),f=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=f*(1-s)+a.data[c]*s,a.data[c+1]=f*(1-s)+a.data[c+1]*s,a.data[c+2]=f*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);rr.prototype.availableOptions={saturation:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var ir=function(t){$n(n,t);var e=tr(n);function n(){var t;Kn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new rr,t}return Jn(n,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),n}(Bt);ir.prototype.availableOptions=rr.prototype.availableOptions;const or=ir;function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e,n){return e&&lr(t.prototype,e),n&&lr(t,n),t}function cr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var i=hr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pr(this,n)}}function pr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dr=function(t){cr(r,t);var e=fr(r);function r(){var t;return sr(this,r),(t=e.call(this))._fragmentSource=n(6188),t}return ur(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s);a.data[u]=Math.max(255*this._options.color.r,a.data[u]),a.data[u+1]=Math.max(255*this._options.color.g,a.data[u+1]),a.data[u+2]=Math.max(255*this._options.color.b,a.data[u+2])}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);dr.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var yr=function(t){cr(n,t);var e=fr(n);function n(){var t;sr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new dr,t}return ur(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(Bt);yr.prototype.availableOptions=dr.prototype.availableOptions;const gr=yr;function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _r(t,e){return(_r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function br(t,e){return!e||"object"!==mr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_r(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wr(n);if(r){var i=wr(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return br(this,t)});function o(){var t;vr(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._options.rgbControlPoints||(t._options.rgbControlPoints={red:t._options.controlPoints,green:t._options.controlPoints,blue:t._options.controlPoints}),t._updateLookupTable(),t}return(e=[{key:"_updateLookupTable",value:function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,n)}},{key:"_buildLookupTable",value:function(t,e,n){for(var r=[],i=0;i<256;i++)r.push(Math.min(Math.max(i+t[i],0),255)),r.push(Math.min(Math.max(i+e[i],0),255)),r.push(Math.min(Math.max(i+n[i],0),255)),r.push(255);return r}},{key:"_calculateSplineCurve",value:function(t){t=t.sort((function(t,e){return t[0]>e[0]}));var e,n=this._getSplineCurve(t),r=n[0];if(r[0]>0)for(e=0;e<r[0];e++)n.unshift([0,0]);var i=[];for(e=0;e<n.length;e++){var o=n[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i}},{key:"_getSplineCurve",value:function(t){var e,n=this._secondDerivative(t),r=n.length,i=[];for(e=0;e<r;e++)i[e]=n[e];var o=[];for(e=0;e<r-1;e++)for(var a=t[e],s=t[e+1],l=a[0];l<s[0];l++){var u=(l-a[0])/(s[0]-a[0]),c=1-u,f=u,p=s[0]-a[0],h=c*a[1]+f*s[1]+p*p/6*((c*c*c-c)*i[e]+(f*f*f-f)*i[e+1]);h>255?h=255:h<0&&(h=0),o.push([l,h])}return 255===o.length&&o.push(t[t.length-1]),o}},{key:"_secondDerivative",value:function(t){var e=t.length;if(e<=0||1===e)return null;var n,r,i=[],o=[];for(i[0]=[0,1,0],n=1;n<e-1;n++){var a=t[n-1],s=t[n],l=t[n+1];i[n]=i[n]||[],i[n][0]=(s[0]-a[0])/6,i[n][1]=(l[0]-a[0])/3,i[n][2]=(l[0]-s[0])/6,o[n]=(l[1]-s[1])/(l[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],n=1;n<e;n++)r=i[1][0]/i[n-1][1],i[n][1]-=r*i[n-1][2],i[n][0]=0,o[n]-=r*o[n-1];for(n=e-2;n>0;n--)r=i[n][2]/i[n+1][1],i[n][1]-=r*i[n+1][0],i[n][2]=0,o[n]-=r*o[n+1];var u=[];for(n=0;n<e;n++)u[n]=o[n]/i[n][1];return u}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(jn);xr.prototype.availableOptions={rgbControlPoints:{type:o.OptionType.OBJECT},controlPoints:{type:o.OptionType.ARRAY,default:[]},textureGLUnit:{type:o.OptionType.NUMBER,default:1}};const Or=xr;function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var i=Rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Er(this,n)}}function Er(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dr=function(t){Tr(i,t);var e,r=Cr(i);function i(){var t;return kr(this,i),(t=r.call(this))._fragmentSource=n(9532),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s),c=a.data[u]/255*.3+a.data[u+1]/255*.3+a.data[u+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const Pr=function(t){Tr(n,t);var e=Cr(n);function n(){var t;kr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Dr,t}return n}(Bt);function Ir(t,e,n){return(Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e,n){return e&&jr(t.prototype,e),n&&jr(t,n),t}function Br(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nr(t);if(e){var i=Nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nr(t){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ur=o.Math.Vector2,Wr=o.Math.Vector3,Hr=function(t){Br(r,t);var e=zr(r);function r(){var t;return Fr(this,r),(t=e.call(this))._precomputeQuads(),t._fragmentSource=n(7705),t}return Mr(r,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new Ur;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){var r=this._options,i=r.resolution,a=r.horizontalTileCount,s=r.verticalTileCount,l=e.getCanvas(),u=e.getContext(),c=n.getContext(),f=this._options.lookupTableImage,p=this._createImageCanvas(f).getContext("2d"),h={width:128,height:128};i?h={width:i,height:i}:f.width&&f.height&&(h={width:f.width,height:f.height});for(var d=u.getImageData(0,0,l.width,l.height),y=p.getImageData(0,0,h.width,h.height),g=new Wr(h.width/a-1|0,h.height/s-1|0,a*s-1|0),m=new o.Color,v=new o.Color,_=new o.Color,b=new o.Color,w=new o.Color,x=new o.Color,O=new o.Color,S=new o.Color,k=new Ur,T=new Ur,C=function(t,e,n,r){t.r=e.r*(1-r)+n.r*r,t.g=e.g*(1-r)+n.g*r,t.b=e.b*(1-r)+n.b*r},E=function(t,e,n){e=.5+e|0;var r=4*((n=.5+n|0)*h.width+e);t.r=y.data[r]/255,t.g=y.data[r+1]/255,t.b=y.data[r+2]/255,t.a=y.data[r+3]/255},R=new o.Color,D=new o.Color,P=function(t,e,n,r,i,o,a){C(R,e,r,o),C(D,n,i,o),C(t,R,D,a)},I=new Ur(h.width,h.height).divide(a,s).floor(),A=0;A<l.width*l.height*4;A+=4){m.set(d.data[A]/255,d.data[A+1]/255,d.data[A+2]/255,d.data[A+3]/255);var F=new Wr(m.r*g.x,m.g*g.y,m.b*g.z),j=F.clone().floor().toInt(),M=F.clone().ceil().toInt(),B=F.clone().fract();k.y=j.z/a|0,k.x=j.z-k.y*a|0,T.y=M.z/a|0,T.x=M.z-T.y*a|0,k.multiply(I),T.multiply(I),E(w,k.x+j.x,k.y+j.y),E(x,k.x+j.x,k.y+M.y),E(O,k.x+M.x,k.y+j.y),E(S,k.x+M.x,k.y+M.y),P(_,w,x,O,S,B.x,B.y),E(w,T.x+j.x,T.y+j.y),E(x,T.x+j.x,T.y+M.y),E(O,T.x+M.x,T.y+j.y),E(S,T.x+M.x,T.y+M.y),P(b,w,x,O,S,B.x,B.y),C(v,_,b,B.z),d.data[A]=Math.ceil(255*v.r),d.data[A+1]=Math.ceil(255*v.g),d.data[A+2]=Math.ceil(255*v.b)}c.putImageData(d,0,0)}},{key:"_createImageCanvas",value:function(t){var e=o.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),r}(o.Engine.Filter);Hr.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:3,uniformType:o.UniformType.INT},lookupTableImage:{type:o.OptionType.IMAGE,uniformType:null},resolution:{type:o.OptionType.NUMBER,uniformType:o.UniformType.FLOAT},horizontalTileCount:{type:o.OptionType.NUMBER,default:5,uniformType:o.UniformType.FLOAT},verticalTileCount:{type:o.OptionType.NUMBER,default:5,uniformType:o.UniformType.FLOAT}};var Gr=function(t){Br(n,t);var e=zr(n);function n(){var t;Fr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Hr,t._textures={},t}return Mr(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,r=n.resolution,i=n.verticalTileCount,a=n.horizontalTileCount,s=n.image;this._filter.set({resolution:r||s.width,verticalTileCount:i,horizontalTileCount:a})}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new o.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(o.Engine.BaseTexture.NearestFilter),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in Ir(Nr(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),n}(Bt);Gr.prototype.availableOptions={image:{type:o.OptionType.IMAGE},resolution:{type:o.OptionType.NUMBER},horizontalTileCount:{type:o.OptionType.NUMBER,default:5},verticalTileCount:{type:o.OptionType.NUMBER,default:5}};const Vr=Gr;function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(t,e,n){return(Yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kr(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qr(t){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qr(n);if(r){var i=Qr(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Kr(this,t)});function o(){var t;Xr(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._stack.push(new Yt({brightness:0})),t}return(e=[{key:"render",value:function(t,e,n){return this._stack.isEmpty()&&this._stack.push(new Yt({brightness:0})),Yr(Qr(o.prototype),"render",this).call(this,t,e,n)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Pt);Jr.isIdentity=!0,Jr.identifier="identity";const $r=Jr;function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ri(t,e){return!e||"object"!==ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ii(e);if(n){var i=ii(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ri(this,t)});function i(){var t;ei(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new oe({contrast:.63})),t._stack.push(new Yt({brightness:.12})),t._stack.push(new Or({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),t}return i}(Pt);oi.identifier="a15";const ai=oi;function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ci(t,e){return!e||"object"!==si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=fi(e);if(n){var i=fi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ci(this,t)});function i(){var t;li(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ee({desaturation:.5})),t._stack.push(new Or({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),t}return i}(Pt);pi.identifier="breeze";const hi=pi;function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(t,e){return(gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mi(t,e){return!e||"object"!==di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vi(t){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _i=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=vi(e);if(n){var i=vi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return mi(this,t)});function i(){var t;yi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Sn),t}return i}(Pt);_i.identifier="bw";const bi=_i;function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Si(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ti=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ki(e);if(n){var i=ki(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Si(this,t)});function i(){var t;xi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Sn),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);Ti.identifier="bwhard";const Ci=Ti;function Ei(t){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pi(t,e){return!e||"object"!==Ei(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ai=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ii(e);if(n){var i=Ii(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Pi(this,t)});function i(){var t;Ri(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),t}return i}(Pt);Ai.identifier="celsius";const Fi=Ai;function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bi(t,e){return(Bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zi(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Li(e);if(n){var i=Li(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return zi(this,t)});function i(){var t;Mi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),t}return i}(Pt);Ni.identifier="chest";const Ui=Ni;function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vi(t,e){return!e||"object"!==Wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Zi(e);if(n){var i=Zi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Vi(this,t)});function i(){var t;Hi(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n,[{intensity:{type:o.OptionType.NUMBER,default:.5,required:!0,setter:function(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}}])))._filterPrimitive=new Le({lightColor:t._options.lightColor||o.Color.WHITE,darkColor:t._options.darkColor||o.Color.BLACK,intensity:t._options.intensity||.5}),t._stack.push(t._filterPrimitive),t}return i}(Pt);Xi.prototype.availableOptions={lightColor:{type:o.OptionType.COLOR,default:o.Color.WHITE,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setLightColor(t),this.setDirty&&this.setDirty(!0),t}},darkColor:{type:o.OptionType.COLOR,default:o.Color.BLACK,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(t),this.setDirty&&this.setDirty(!0),t}},intensity:{type:o.OptionType.NUMBER,default:.5,required:!0}},Xi.identifier="duotone";const Yi=Xi;function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ji(t,e){return!e||"object"!==qi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $i(t){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var to=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=$i(e);if(n){var i=$i(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ji(this,t)});function i(){var t;Ki(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),t}return i}(Pt);to.identifier="fixie";const eo=to;function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oo(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ao(e);if(n){var i=ao(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return oo(this,t)});function i(){var t;ro(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new or({saturation:1.35})),t._stack.push(new oe({contrast:1.1})),t}return i}(Pt);so.identifier="food";const lo=so;function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function po(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ho(e);if(n){var i=ho(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return po(this,t)});function i(){var t;co(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),t}return i}(Pt);yo.identifier="fridge";const go=yo;function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){return(_o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bo(t,e){return!e||"object"!==mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_o(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=wo(e);if(n){var i=wo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return bo(this,t)});function i(){var t;vo(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),t}return i}(Pt);xo.identifier="front";const Oo=xo;function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function To(t,e){return(To=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Co(t,e){return!e||"object"!==So(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&To(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Eo(e);if(n){var i=Eo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Co(this,t)});function i(){var t;ko(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new oe({contrast:1.1})),t._stack.push(new Or({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),t}return i}(Pt);Ro.identifier="glam";const Do=Ro;function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ao(t,e){return(Ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fo(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ao(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=jo(e);if(n){var i=jo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Fo(this,t)});function i(){var t;Io(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new gn),t}return i}(Pt);Mo.identifier="gobblin";const Bo=Mo;function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uo(t,e){return!e||"object"!==zo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ho=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Wo(e);if(n){var i=Wo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Uo(this,t)});function i(){var t;Lo(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),t._stack.push(new or({saturation:.9})),t}return i}(Pt);Ho.identifier="k1";const Go=Ho;function Vo(t){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xo(t,e){return(Xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yo(t,e){return!e||"object"!==Vo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xo(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=qo(e);if(n){var i=qo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Yo(this,t)});function i(){var t;Zo(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),t._stack.push(new gr({color:new o.Color(40/255,40/255,40/255)})),t}return i}(Pt);Ko.identifier="k2";const Qo=Ko;function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){return(ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ea(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function na(t){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ta(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=na(e);if(n){var i=na(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ea(this,t)});function i(){var t;$o(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new or({saturation:.5})),t}return i}(Pt);ra.identifier="k6";const ia=ra;function oa(t){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sa(t,e){return(sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function la(t,e){return!e||"object"!==oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ca=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sa(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ua(e);if(n){var i=ua(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return la(this,t)});function i(){var t;aa(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),t._stack.push(new or({saturation:.7})),t}return i}(Pt);ca.identifier="kdynamic";const fa=ca;function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function da(t,e){return(da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ya(t,e){return!e||"object"!==pa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ga(t){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ma=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&da(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ga(e);if(n){var i=ga(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ya(this,t)});function i(){var t;ha(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ee({desaturation:.4})),t._stack.push(new Or({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),t}return i}(Pt);ma.identifier="lenin";const va=ma;function _a(t){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wa(t,e){return(wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xa(t,e){return!e||"object"!==_a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oa(t){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wa(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Oa(e);if(n){var i=Oa(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return xa(this,t)});function i(){var t;ba(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),t}return i}(Pt);Sa.identifier="lomo";const ka=Sa;function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ea(t,e){return(Ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t,e){return!e||"object"!==Ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ea(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Da(e);if(n){var i=Da(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ra(this,t)});function i(){var t;Ca(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),t}return i}(Pt);Pa.identifier="mellow";const Ia=Pa;function Aa(t){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ja(t,e){return(ja=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ma(t,e){return!e||"object"!==Aa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ba(t){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var za=o.Math.ColorMatrix,La=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ja(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ba(e);if(n){var i=Ba(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ma(this,t)});function i(){var t;Fa(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t=r.call.apply(r,[this].concat(n));var s=new za(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);t._stack.push(new me({colorMatrix:s}));var l=new o.Color(.8,.6,.9);return t._stack.push(new Ke({gamma:l})),t}return i}(Pt);La.identifier="metal";const Na=La;function Ua(t){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ha(t,e){return(Ha=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ga(t,e){return!e||"object"!==Ua(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Va(t){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Za=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ha(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Va(e);if(n){var i=Va(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ga(this,t)});function i(){var t;Wa(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),t._stack.push(new ln),t}return i}(Pt);Za.identifier="morning";const Xa=Za;function Ya(t){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ka(t,e){return(Ka=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qa(t,e){return!e||"object"!==Ya(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ja(t){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ka(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ja(e);if(n){var i=Ja(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Qa(this,t)});function i(){var t;qa(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),t._stack.push(new Or({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),t._stack.push(new Ee({desaturation:.65})),t}return i}(Pt);$a.identifier="orchid";const ts=$a;function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){return(rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function is(t,e){return!e||"object"!==es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var as=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=os(e);if(n){var i=os(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return is(this,t)});function i(){var t;ns(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),t._stack.push(new or({saturation:.8})),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);as.identifier="pola";const ss=as;function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(t,e){return(cs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fs(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ps(e);if(n){var i=ps(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return fs(this,t)});function i(){var t;us(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),t._stack.push(new or({saturation:.8})),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);hs.identifier="pola669";const ds=hs;function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ms(t,e){return(ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vs(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ms(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_s(e);if(n){var i=_s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return vs(this,t)});function i(){var t;gs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ee({desaturation:.65})),t._stack.push(new Or({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),t}return i}(Pt);bs.identifier="quozi";const ws=bs;function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Os(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(t,e){return(Ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ks(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ss(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ts(e);if(n){var i=Ts(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ks(this,t)});function i(){var t;Os(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),t._stack.push(new ln),t}return i}(Pt);Cs.identifier="semired";const Es=Cs;function Rs(t){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ds(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){return(Ps=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Is(t,e){return!e||"object"!==Rs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ps(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=As(e);if(n){var i=As(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Is(this,t)});function i(){var t;Ds(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),t._stack.push(new Or({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),t}return i}(Pt);Fs.identifier="sunny";const js=Fs;function Ms(t){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zs(t,e){return(zs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ls(t,e){return!e||"object"!==Ms(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ns(t){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ns(e);if(n){var i=Ns(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ls(this,t)});function i(){var t;Bs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),t}return i}(Pt);Us.identifier="texas";const Ws=Us;function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vs(t,e){return(Vs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zs(t,e){return!e||"object"!==Hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ys=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Xs(e);if(n){var i=Xs(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Zs(this,t)});function i(){var t;Gs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Pr),t}return i}(Pt);Ys.identifier="x400";const qs=Ys;function Ks(t){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(t,e){return(Js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $s(t,e){return!e||"object"!==Ks(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tl(t){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var el=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Js(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=tl(e);if(n){var i=tl(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return $s(this,t)});function i(){var t;Qs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._lutPrimitive=new Yn({image:t._options.image}),t._stack.push(t._lutPrimitive),t}return i}(Pt);el.prototype.availableOptions={image:{type:o.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},el.identifier="lut";const nl=el;function rl(t){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ol(t,e){return(ol=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function al(t,e){return!e||"object"!==rl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sl(t){return(sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ll=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ol(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=sl(e);if(n){var i=sl(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return al(this,t)});function i(){var t;il(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=(t=r.call.apply(r,[this].concat(n)))._options,s=a.image,l=a.resolution,u=a.verticalTileCount,c=a.horizontalTileCount;return t._lutPrimitive=new Vr({image:s,resolution:l,verticalTileCount:u,horizontalTileCount:c}),t._stack.push(t._lutPrimitive),t}return i}(Pt);ll.prototype.availableOptions={image:{type:o.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:o.OptionType.NUMBER},horizontalTileCount:{type:o.OptionType.NUMBER,default:5},verticalTileCount:{type:o.OptionType.NUMBER,default:5}},ll.identifier="3d-lut";const ul=ll;function cl(t){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dl(t,e,n){return(dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ml(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gl(t,e){return!e||"object"!==cl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ml(t){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yl(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ml(n);if(r){var i=ml(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return gl(this,t)});function a(){return hl(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}},{key:"render",value:function(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?dl(ml(a.prototype),"render",this).call(this,t):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),o.Promise.resolve(t))}},{key:"setDirtyForRenderer",value:function(t,e){dl(ml(a.prototype),"setDirtyForRenderer",this).call(this,t,e),this._selectedFilter.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){dl(ml(a.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){dl(ml(a.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(n),!0).forEach((function(e){pl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);if(delete e.filter,t.filter){var n=t.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:t.filter.getLightColor(),darkColor:t.filter.getDarkColor(),intensity:t.filter.getIntensity()})):this.setFilter(new n)}this.set(e)}},{key:"resetToDefaultFilterIntensity",value:function(){var t=this._selectedFilter&&this._selectedFilter.availableOptions,e=t&&t.intensity.default;this.setIntensity(e||1)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);vl.identifier="filter",vl.prototype.availableOptions={identifier:{type:o.OptionType.STRING,default:"identity"},intensity:{type:o.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:o.OptionType.OBJECT,default:new $r,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},vl.FilterPrimitives=r,vl.Filters=i,vl.Filter=Pt,a().Operations.FilterOperation=vl;const _l=vl;var bl=n(5030);function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ol(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sl(t,e,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kl(t,e){return(kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tl(t,e){return!e||"object"!==wl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var El=o.Math.Vector2,Rl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kl(t,e)}(l,t);var e,n,r,i,a,s=(i=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cl(i);if(a){var n=Cl(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Tl(this,t)});function l(){var t;xl(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=s.call.apply(s,[this].concat(n)))._colorOverlayFilter=new o.Engine.Filters.ColorOverlayFilter({color:t.getTintColor()}),t._frameContainer=new o.Engine.Container,t._resetSprites(),t._options.frame&&t._createSpritesForFrame(t._options.frame),t}return e=l,r=[{key:"validateFrame",value:function(t){if(t){var e=t.imageGroups,n=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==wl(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var r=function(t){var n=e[t],r=n.start,i=n.end,a=n.mid;if(void 0!==e[t]){if("object"!==wl(e[t]))throw new Error("Frame: `imageGroups.".concat(t,"` needs to be of type Object."));if(void 0!==r&&!(r instanceof o.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(t,".start` needs to be of type Image."));if(void 0!==a&&!(r instanceof o.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&"object"!==wl(a))throw new Error("Frame: `imageGroups.".concat(t,".mid` needs to be of type Image or Object."));if(void 0!==i&&!(i instanceof o.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(t,".end` needs to be of type Image."))}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}}}],(n=[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(t){var e=this;if(!t)return this._disposeSprites();var n=t.imageGroups,r=t.layoutMode;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach((function(t){void 0!==n[t]&&["start","mid","end"].forEach((function(r){if(void 0!==n[t][r]){var i=n[t][r];"image"in i&&(i=i.image);var a=o.Engine.Texture.fromImage(i),s=new o.Engine.Sprite(a);e._spriteGroups[t][r]=s,e._sprites.push(s),e._frameContainer.addChild(s)}}))}))}},{key:"_render",value:function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new o.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new o.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_updateSprites",value:function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),a="vertical-inside"===this._layoutMode,s=this._spriteGroups[e].start,l=this._spriteGroups[e].mid,u=this._spriteGroups[e].end,c=0,f=0;if(s){r=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth/r);var p=new El(0,i);p.x=a?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(c)}if(u){r=(n=u.getTexture().getDimensions()).y/n.x,f=Math.floor(this._frameWidth*r);var h=new El(o.x-f,i);h.x-=a?this._frameWidth:0,u.setPosition(h),u.setHeight(this._frameWidth),u.setWidth(f)}if(l){r=(n=l.getTexture().getDimensions()).y/n.x;var d=new El(c,i),y=o.x-c-f;if(a&&(d.x+=this._frameWidth,y-=2*this._frameWidth),l.setPosition(d),l.setWidth(y),l.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth/r,m=Math.ceil(y/g),v=0;if(-1!==m){var _=Math.round(y/m);l.setWidth(_),v+=_,this._ensureRepeatSpritesExist(m-1,e,l);for(var b=0;b<m-1;b++){_=Math.round((y-v)/(m-b-1));var w=this._repeatSprites[e][b],x=d.clone().add(v,0).floor();w.setPosition(x),w.setWidth(_),w.setHeight(this._frameWidth),v+=_}}}}}},{key:"_ensureRepeatSpritesExist",value:function(t,e,n){var r=this;n.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var a=t-i,s=0;s<a;s++){var l=new o.Engine.Sprite(n.getTexture());this._repeatSprites[e].push(l),this._frameContainer.addChild(l),this._sprites.push(l)}else t<i&&this._repeatSprites[e].splice(t).forEach((function(t){var e=r._sprites.indexOf(t);-1!==e&&(r._sprites.splice(e,1),r._frameContainer.removeChild(t),t.dispose())}))}},{key:"_updateVerticalSpriteGroup",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),a="horizontal-inside"===this._layoutMode,s=this._spriteGroups[e].start,l=this._spriteGroups[e].mid,u=this._spriteGroups[e].end,c=0,f=0;if(s){r=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth*r);var p=new El(i,0);p.y=a?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(c)}if(u){r=(n=u.getTexture().getDimensions()).y/n.x,f=Math.floor(this._frameWidth*r);var h=new El(i,o.y-f);h.y-=a?this._frameWidth:0,u.setPosition(h),u.setWidth(this._frameWidth),u.setHeight(f)}if(l){r=(n=l.getTexture().getDimensions()).y/n.x;var d=new El(i,c),y=o.y-c-f;if(a&&(d.y+=this._frameWidth,y-=2*this._frameWidth),l.setPosition(d),l.setHeight(y),l.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth*r,m=Math.ceil(y/g),v=0;if(-1!==m){var _=Math.round(y/m);l.setHeight(_),v+=_,this._ensureRepeatSpritesExist(m-1,e,l);for(var b=0;b<m-1;b++){_=Math.round((y-v)/(m-b-1));var w=this._repeatSprites[e][b],x=d.clone().add(0,v).floor();w.setPosition(x),w.setHeight(_),w.setWidth(this._frameWidth),v+=_}}}}}},{key:"_disposeSprites",value:function(){var t=this;this._sprites.forEach((function(e){t._frameContainer.removeChild(e),e.getTexture().dispose(),e.dispose()})),this._resetSprites()}},{key:"dispose",value:function(){Sl(Cl(l.prototype),"dispose",this).call(this),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}}])&&Ol(e.prototype,n),r&&Ol(e,r),l}(o.Operation);Rl.identifier="frame",Rl.prototype.availableOptions={frame:{type:o.OptionType.OBJECT,validation:Rl.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t},default:null},alpha:{type:o.OptionType.NUMBER,default:1},tintColor:{type:o.OptionType.COLOR,default:new o.Color(1,1,1,0)},scale:{type:o.OptionType.NUMBER,default:.1}},a().Operations.FrameOperation=Rl;const Dl=Rl;function Pl(t){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Al(t,e){return(Al=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fl(t,e){return!e||"object"!==Pl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jl(t){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ml=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Al(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jl(r);if(i){var n=jl(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Fl(this,t)});function s(){var t;Il(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(2603),t}return(e=[{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),a=(i.canvas,this.getShaderForRenderer(t)),s=e.getFrame(),l=this._watermarkCanvas;l&&s.width===l.width&&s.height===l.height||this._createWatermarkCanvas(s.width,s.height);var u=o.Engine.Texture.fromCanvas(this._watermarkCanvas),c=u.getBaseTexture();t.updateTexture(c),c.setGLUnit(1),t.setRenderTarget(n),r&&n.clear(),t.setShader(a);var f=t.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",f),a.syncUniforms(),i.uniform1i(i.getUniformLocation(a.getProgram(),"u_watermarkTex"),1),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,c.getGLTextureForRenderer(t)),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),u.dispose()}},{key:"_createWatermarkCanvas",value:function(t,e){var n=this._options.watermarkImage,r=o.Utils.createCanvas();r.width=t,r.height=e;var i,a,s,l=r.getContext("2d");t>e?(i=t/n.width,s=(e-n.height*i)/2,a=0):(i=e/n.height,s=0,a=(t-n.width*i)/2),l.drawImage(n,0,0,n.width,n.height,a,s,n.width*i,n.height*i),this._watermarkCanvas=r,this._watermarkContext=l}},{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),a=n.getContext();this._options.watermarkImage,this._createWatermarkCanvas(r.width,r.height);for(var s=i.getImageData(0,0,r.width,r.height),l=this._watermarkContext.getImageData(0,0,r.width,r.height),u=new o.Color,c=new o.Color,f=new o.Color,p=0;p<r.width*r.height*4;p+=4)u.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),c.set(l.data[p]/255,l.data[p+1]/255,l.data[p+2]/255,l.data[p+3]/255),c.r>.8?f.copy(u.clone().mix(c,.3)):f.copy(u),s.data[p]=255*f.r,s.data[p+1]=255*f.g,s.data[p+2]=255*f.b,s.data[p+3]=255*f.a;a.putImageData(s,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);Ml.prototype.availableOptions={watermarkImage:{type:o.OptionType.OBJECT,required:!0}};const Bl=Ml,zl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg==";function Ll(t){return(Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ul(t,e,n){return(Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wl(t,e){return(Wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hl(t,e){return!e||"object"!==Ll(e)&&"function"!=typeof e?Gl(t):e}function Gl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vl(t){return(Vl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wl(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vl(n);if(r){var i=Vl(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Hl(this,t)});function a(){var t;Nl(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Zl(Gl(t=i.call.apply(i,[this].concat(n))),"_applyWatermarkFilter",(function(){return t._watermarkFilter||(t._watermarkFilter=new Bl({watermarkImage:t._watermarkImage})),t._sprite.setFilters([t._watermarkFilter]),t._renderTexture.render(t._container),o.Promise.resolve()})),Zl(Gl(t),"_loadWatermarkImage",(function(){return t._watermarkImage?o.Promise.resolve():new o.Promise((function(e,n){t._watermarkImage=new o.Image,t._watermarkImage.onload=e,t._watermarkImage.src=zl}))})),t._watermarkFilter=null,t._watermarkImage=null,t}return(e=[{key:"_render",value:function(t){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}},{key:"dispose",value:function(){this._watermarkFilter&&this._watermarkFilter.dispose(),Ul(Vl(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Xl.identifier="license-watermark",Xl.prototype.availableOptions={},a().Operations.LicenseWatermarkOperation=Xl;const Yl=Xl;function ql(t){return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ql(t,e,n){return(Ql="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Jl(t,e){return(Jl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $l(t,e){return!e||"object"!==ql(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eu=o.Math.Vector2,nu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jl(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tu(r);if(i){var n=tu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return $l(this,t)});function s(){var t;Kl(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(1898),t._lastBlurRadius=null,t._lastControlPoint1=new eu,t._lastControlPoint2=new eu,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o),s=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a;if(s){var l=new eu(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);var u={blurRadius:this._options.blurRadius,texSize:o},c=function(t,e,n){return Math.min(Math.max(t,e),n)},f=function(t,e,n){var r=c((n-t)/(e-t),0,1);return r*r*(3-2*r)},p=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),h=this._options.blurRadius,d=function(t,e){return f(0,1,Math.abs(c(new eu(t,e).subtract(r._options.controlPoint1).dot(p)/p.dot(p),0,1)))*h};this._blurFilter.set(u),this._blurFilter._applyCanvas(t,e,n,i,d),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new eu(t.width,t.height),r=this._options.controlPoint1.clone().multiply(n),i=this._options.controlPoint2.clone().multiply(n),o=e.createLinearGradient(r.x,r.y,i.x,i.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){Ql(tu(s.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);nu.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},controlPoint1:{type:o.OptionType.VECTOR2,default:new eu(0,.5),uniformType:o.UniformType.FLOAT2},controlPoint2:{type:o.OptionType.VECTOR2,default:new eu(1,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new eu(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new eu(100,100),uniformType:o.UniformType.FLOAT2}};const ru=nu;function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function au(t,e,n){return(au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function su(t,e){return(su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lu(t,e){return!e||"object"!==iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cu=o.Math.Vector2,fu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&su(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uu(n);if(r){var i=uu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lu(this,t)});function a(){var t;ou(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastControlPoint1=t._options.controlPoint1.clone(),t._lastControlPoint2=t._options.controlPoint2.clone();var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new ru({},s),t._verticalFilter=new ru({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new cu(.5,.5)),t._verticalFilter.setDelta(new cu(-.5,.5)),t._filter=new ru({},s),t}return(e=[{key:"rotate",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:e,controlPoint2:n})}},{key:"flip",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({controlPoint1:e,controlPoint2:n})}},{key:"transform",value:function(t){var e=this,n={};["controlPoint1","controlPoint2"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)})),["blurRadius"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.blurRadius,a=r.controlPoint1,s=r.controlPoint2,l={blurRadius:i*n,controlPoint1:a.clone(),controlPoint2:s.clone(),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.controlPoint1,a=n.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:a.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){au(uu(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);fu.identifier="linear-focus",fu.prototype.availableOptions={controlPoint1:{type:o.OptionType.VECTOR2,default:new cu(0,.5)},controlPoint2:{type:o.OptionType.VECTOR2,default:new cu(1,.5)},blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.LinearFocusOperation=fu;const pu=fu;function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yu(t,e,n){return(yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gu(t,e){return(gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mu(t,e){return!e||"object"!==hu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _u=o.Math.Vector2,bu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gu(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vu(r);if(i){var n=vu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return mu(this,t)});function s(){var t;du(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(9478),t._lastBlurRadius=null,t._lastGradientRadius=null,t._lastStart=new _u,t._lastEnd=new _u,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var i=e.getDimensions(),o=!n.getDimensions().equals(i),a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;if(a){var s=new _u(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var l={blurRadius:this._options.blurRadius,texSize:i},u=function(t,e,n){return Math.min(Math.max(t,e),n)},c=function(t,e,n){var r=u((n-t)/(e-t),0,1);return r*r*(3-2*r)},f=this._options,p=f.blurRadius,h=f.gradientSize,d=f.size,y=f.start,g=f.end,m=f.texSize,v=new _u(y.y-g.y,g.x-y.x);v.divide(v.len());var _=function(t,e){return c(0,1,(Math.abs(m.clone().multiply(t,e).subtract(y).dot(v))-d)/h)*p};this._blurFilter.set(l),this._blurFilter._applyCanvas(t,e,n,r,_),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),r=new _u(t.width,t.height),i=this._options.size*r.min()*n,o=this._options.gradientSize*r.min()*n,a=this._options.start.clone().multiply(r),s=this._options.end.clone().multiply(r).clone().subtract(a),l=a.clone().add(s.clone().divide(2)),u=s.len(),c=s.clone().divide(u),f=l.clone().add((i+o)*c.y,-(i+o)*c.x),p=l.clone().add(-(i+o)*c.y,(i+o)*c.x),h=e.createLinearGradient(f.x,f.y,p.x,p.y),d=p.clone().subtract(f).len();h.addColorStop(0,"#000000"),h.addColorStop(o/2/d,"#FFFFFF"),h.addColorStop(1-o/2/d,"#FFFFFF"),h.addColorStop(1,"#000000"),e.fillStyle=h,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){yu(vu(s.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);bu.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},size:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},gradientSize:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},start:{type:o.OptionType.VECTOR2,default:new _u(0,.5),uniformType:o.UniformType.FLOAT2},end:{type:o.OptionType.VECTOR2,default:new _u(1,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new _u(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new _u(100,100),uniformType:o.UniformType.FLOAT2}};const wu=bu;function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Su(t,e,n){return(Su="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Eu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ku(t,e){return(ku=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tu(t,e){return!e||"object"!==xu(e)&&"function"!=typeof e?Cu(t):e}function Cu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eu(t){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ru=o.Math.Vector2,Du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ku(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Eu(n);if(r){var i=Eu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tu(this,t)});function a(){var t;Ou(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastSize=t._options.size,t._lastGradientSize=t._options.gradientSize;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new wu({},s),t._verticalFilter=new wu({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new Ru(.5,.5)),t._verticalFilter.setDelta(new Ru(-.5,.5)),t._filter=new wu({},s),t._renderBlur.bind(Cu(t)),t}return(e=[{key:"rotate",value:function(t){var e=this._options.start,n=this._options.end;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({start:e,end:n})}},{key:"flip",value:function(t){var e=this._options.start,n=this._options.end;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({start:e,end:n})}},{key:"transform",value:function(t){var e=this,n={};["start","end"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)})),["blurRadius","size","gradientSize"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options.start.clone(),i=this._options.end.clone(),a=this._options,s={blurRadius:a.blurRadius*n,size:a.size*n,gradientSize:a.gradientSize*n,start:r.clone().multiply(e),end:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.size,a=n.gradientSize,s=n.start,l=n.end;return this._filter.set({blurRadius:r,gradientSize:a,size:i,start:s.clone(),end:l.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){Su(Eu(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Du.identifier="mirrored-focus",Du.prototype.availableOptions={start:{type:o.OptionType.VECTOR2,default:new Ru(0,.5)},end:{type:o.OptionType.VECTOR2,default:new Ru(1,.5)},blurRadius:{type:o.OptionType.NUMBER,default:.025},size:{type:o.OptionType.NUMBER,default:.1},gradientSize:{type:o.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.MirroredFocusOperation=Du;const Pu=Du;var Iu=n(1385);function Au(t){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ju(t,e){return(ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mu(t,e){return!e||"object"!==Au(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bu(t){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zu=o.Math.Vector2,Lu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ju(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bu(n);if(r){var i=Bu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Mu(this,t)});function a(){return Fu(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){var e=this._options.rotation%360,n=e*(Math.PI/180),r=90===e||270===e,i=this._options.flipHorizontally!==this._options.flipVertically,a=r&&i?!this._options.flipVertically:this._options.flipVertically,s=r&&i?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(s?-1:1,a?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var l=this._sprite.getBounds();return this._renderTexture.resizeTo(new zu(l.width,l.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"getNewDimensions",value:function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t}},{key:"flip",value:function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Lu.identifier="orientation",Lu.prototype.availableOptions={rotation:{type:o.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.OrientationOperation=Lu;const Nu=Lu;var Uu=n(2861);function Wu(t){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gu(t,e,n){return(Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vu(t,e){return(Vu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zu(t,e){return!e||"object"!==Wu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xu(t){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yu=o.Engine.Filters.OverlayFilter,qu=o.Math.Vector2,Ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vu(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xu(n);if(r){var i=Xu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Zu(this,t)});function a(){var t;Hu(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._overlayTexture=o.Engine.Texture.fromImage(t._options.image),t._overlayContainer=new o.Engine.Container,t._overlaySprite=new o.Engine.Sprite,t._overlaySprite.setTexture(t._overlayTexture),t._overlaySprite.setAnchor(0,0),t._overlayContainer.addChild(t._overlaySprite),t._overlayFilter=new o.Engine.Filters.OverlayFilter({overlayImage:t._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:t._overlayTexture}),t._sprite.setFilters([t._overlayFilter]),t._renderedOverlaySprite=new o.Engine.Sprite,t._renderedOverlayContainer=new o.Engine.Container,t._renderedOverlayContainer.addChild(t._renderedOverlaySprite),t._overlayRendered=!1,t._lastInputDimensions=new qu(0,0),t}return(e=[{key:"setOption",value:function(t,e){if(Gu(Xu(a.prototype),"setOption",this).call(this,t,e),"image"===t&&e&&this._sdk){var n=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(e),n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(t){var e=t.getDimensions(),n=this._options,r=n.image,i=n.alpha,a=n.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:a,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),o.Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),o.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(t){var e=this._sdk.getRenderer(),n=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new o.Engine.RenderTexture(e,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,i=r.width,a=r.height,s=o.Utils.resizeVectorToFill(new qu(i,a),n),l=this._options,u=l.flipHorizontally?-1:1,c=l.flipVertically?-1:1;this._overlaySprite.setWidth(s.x*u),this._overlaySprite.setHeight(s.y*c),this._overlaySprite.setPosition(n.x*(1-u)*.5,n.y*(1-c)*.5);var f=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(n),e.isOfType(o.RendererType.WEBGL)&&(f.setGLUnit(4),e.updateTexture(f,!1)),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){Gu(Xu(a.prototype),"dispose",this).call(this),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Ku.identifier="overlay",Ku.BLEND_MODES=Yu.BLEND_MODES,Ku.prototype.availableOptions={identifier:{type:o.OptionType.STRING},image:{type:o.OptionType.IMAGE},blendMode:{type:o.OptionType.NUMBER,default:Yu.BLEND_MODES.MULTIPLY,available:Object.keys(Yu.BLEND_MODES).map((function(t){return Yu.BLEND_MODES[t]}))},alpha:{type:o.OptionType.NUMBER,default:1},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.OverlayOperation=Ku;const Qu=Ku;function Ju(t){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tc(t,e,n){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ec(t,e){return(ec=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nc(t,e){return!e||"object"!==Ju(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rc(t){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ic=o.Math.Vector2,oc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ec(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rc(r);if(i){var n=rc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return nc(this,t)});function s(){var t;$u(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(3488),t._lastBlurRadius=null,t._lastGradientRadius=null,t._lastPosition=new ic,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,l=s.blurRadius,u=s.position,c=s.texSize,f=s.gradientRadius,p=e.getBaseTexture().isDirty()||this._lastBlurRadius!==l||a;if(p){var h=new ic(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(h);var d={blurRadius:l,texSize:o},y=function(t,e,n){return Math.min(Math.max(t,e),n)},g=function(t,e,n){var r=y((n-t)/(e-t),0,1);return r*r*(3-2*r)},m=function(t,e){return g(0,1,(Math.abs(c.clone().multiply(t,e).subtract(u).len())-r._options.radius)/(2*f))*l};this._blurFilter.set(d),this._blurFilter._applyCanvas(t,e,n,i,m),this._lastBlurRadius=l}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new ic(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var l=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*r);l.addColorStop(0,"#FFFFFF"),l.addColorStop(a/(a+s),"#FFFFFF"),l.addColorStop(1,"#000000"),e.fillStyle=l,e.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){tc(rc(s.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);oc.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},radius:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},gradientRadius:{type:o.OptionType.NUMBER,default:25,uniformType:o.UniformType.FLOAT},position:{type:o.OptionType.VECTOR2,default:new ic(.5,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new ic(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new ic(100,100),uniformType:o.UniformType.FLOAT2}};const ac=oc;function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uc(t,e,n){return(uc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cc(t,e){return(cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fc(t,e){return!e||"object"!==sc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pc(t){return(pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hc=o.Math.Vector2,dc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pc(n);if(r){var i=pc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return fc(this,t)});function a(){var t;lc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastGradientRadius=t._options.gradientRadius;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new ac({},s),t._verticalFilter=new ac({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new hc(.5,.5)),t._verticalFilter.setDelta(new hc(-.5,.5)),t._filter=new ac({},s),t}return(e=[{key:"rotate",value:function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})}},{key:"flip",value:function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})}},{key:"transform",value:function(t){var e=this,n={},r=this.getPosition();n.position=t.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.position,a={blurRadius:r.blurRadius*n,radius:r.radius*n,gradientRadius:r.gradientRadius*n,position:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options,n=e.blurRadius,r=e.radius,i=e.gradientRadius,a=e.position,s=t.getDimensions();return this._filter.set({blurRadius:n,radius:r,gradientRadius:i,position:a,texSize:s,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){uc(pc(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);dc.identifier="radial-focus",dc.prototype.availableOptions={position:{type:o.OptionType.VECTOR2,default:new hc(.5,.5)},radius:{type:o.OptionType.NUMBER,default:.25},gradientRadius:{type:o.OptionType.NUMBER,default:.125},blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.RadialFocusOperation=dc;const yc=dc;function gc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mc=o.Math.Vector2,vc=o.Math.CubicBezierCurve;const _c=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;gc(this,t),this._path=e,this._drawnCanvases=[],this._position=n,this._smooth=r}var e;return(e=[{key:"getBezierCurve",value:function(t,e,n,r){if(!e)return null;var i,o,a,s;r?(i=(r.x-e.x)/this._smooth,o=(r.y-e.y)/this._smooth):(i=(n.x-e.x)/this._smooth,o=(n.y-e.y)/this._smooth),t?(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth):(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth);var l=e.clone().add(a,s),u=n.clone().subtract(i,o);return new vc(e,l,u,n)}},{key:"renderToCanvas",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(e)){var a,s=new mc(e.width,e.height),l=e.getContext("2d"),u=this._position.clone().multiply(s),c=r?r.getPosition().clone().multiply(s):null,f=n?n.getPosition().clone().multiply(s):null,p=i?i.getPosition().clone().multiply(s):null,h=(u.clone().subtract(c).len(),t.width/10),d=this.getBezierCurve(f,c,u,p);if(d){d.calculateSegments(20);var y=d.getLength();a=d.arcLengthApproxSample(Math.ceil(y/h))}else a=[u];for(var g=0;g<a.length;g++){var m=a[g],v=.5*t.width/(2*h);v=1/(1+(v*=1-o)),l.globalAlpha=v,l.drawImage(t,m.x-t.width/2,m.y-t.height/2,t.width,t.height)}l.globalAlpha=1,this._drawnCanvases.push(e)}}},{key:"setPosition",value:function(t){this._position=t}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function bc(t){return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wc(t,e,n){return(wc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xc(t,e){return(xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oc(t,e){return!e||"object"!==bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sc(t){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sc(n);if(r){var i=Sc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Oc(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._operation=t,r._canvas=n||o.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r}return(e=[{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===t?this._options.controlPoints.map((function(t){var n=t.getPosition();return e?n.toObject():n.clone()})):wc(Sc(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"_optionEquals",value:function(t,e){if("controlPoints"===t){for(var n=this._options.controlPoints,r=0,i=n.length;r<i;r++)if(!n[r].getPosition().equals(e[r]))return!1;return!0}return wc(Sc(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"render",value:function(t){var e=this._options,n=e.controlPoints,r=e.size;if(!(n.length<2)){var i,a,s,l,u=this.getBrush(),c=u&&u.getHardness?u.getHardness():1;o.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===r&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=r);for(var f=0;f<n.length;f++)i=n[f-2],a=n[f-1],s=n[f],l=n[f+1],s.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,i,a,l,c)}}},{key:"_createBrush",value:function(t){var e=this._options,n=e.size,r=e.hardness,i=e.color,a=o.Utils.createCanvas();a.width=a.height=Math.ceil(n*t.min());var s=a.getContext("2d");if((i=i.clone()).a=1,1===a.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(a.width/2,a.height/2,Math.min(a.width/2-1,a.width/2*r),a.width/2,a.height/2,a.width/2);l.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,a.width,a.height)}return a}},{key:"addControlPoint",value:function(t){var e=new _c(this,t);this._options.controlPoints.push(e),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(t){this._canvas=t,this._context=t.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach((function(t){t.setDirty()}))}},{key:"forEachControlPoint",value:function(t){this._options.controlPoints.forEach(t)}},{key:"renderToCanvas",value:function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);kc.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},brush:{type:o.OptionType.OBJECT,required:!0},controlPoints:{type:o.OptionType.ARRAY,default:[]},closed:{type:o.OptionType.BOOLEAN,default:!1}};const Tc=kc;function Cc(t){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ec(t,e,n){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rc(t,e){return(Rc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t,e){return!e||"object"!==Cc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ic=o.Math.Vector2;const Ac=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pc(n);if(r){var i=Pc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Dc(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._isDisposed=!1,n._operation=t,n._dirtiness={},n.id=o.Utils.getUUID(),n._renderTextures={},n._identitySprite=new o.Engine.Sprite,n._sprite=new o.Engine.Sprite,n._hitTestSprite=new o.Engine.Sprite,n._renderers=[],n}return(e=[{key:"applyScale",value:function(t){}},{key:"applyRotation",value:function(t){var e=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=t,this.setRotation(n*Math.PI/180);var r=(t+360)%360*Math.PI/180,i=Math.cos(r),o=Math.sin(r),a=this._options.position.clone().subtract(.5).multiply(e),s=new Ic(a.x*i-a.y*o,a.x*o+a.y*i).divide(e.clone().flip());this.setPosition(new Ic(.5,.5).add(s))}},{key:"applyFlip",value:function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)}},{key:"applyTransform",value:function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new o.Engine.Container,this._renderTextureSprite=new o.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(o.RendererType.WEBGL)}},{key:"_optionEquals",value:function(t,e){return"type"===t||Ec(Pc(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"update",value:function(t,e){this._isDisposed||(this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e))}},{key:"_updateSprite",value:function(t){var e=this;[this._sprite,this._hitTestSprite].forEach((function(n){if(n.getTexture()){n.setAnchor(e._options.anchor),n.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&n.setAlpha(e._options.alpha);var r=e._options.dimensions;r&&(r=r.clone().multiply(e._operation.getSDK().getTextureScale()),n.setWidth(r.x),n.setHeight(r.y)),n.updateTransform();var i=n.getTexture().getFrame(),o=new Ic(i.width,i.height);n.setPivot(e._options.pivot.clone().multiply(o)),n.setRotation(e._options.rotation),n.updateTransform()}}))}},{key:"_renderToRenderTexture",value:function(t){var e=this._getTexture().getDimensions(),n=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=o.Utils.nextHighestPOT(r.x),r.y=o.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=r.clone().subtract(e.x,e.y).divide(r),a=n.getUVs().getUVs();a[0].x=a[3].x=0,a[1].x=a[2].x=1-i.x,a[0].y=a[1].y=0,a[2].y=a[3].y=1-i.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])}},{key:"_getRenderTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ic(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new o.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]}},{key:"dispose",value:function(){for(var t in this._isDisposed=!0,this._renderTextures)this._renderTextures[t].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Fc(t){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mc(t,e){return(Mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bc(t,e){return!e||"object"!==Fc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zc(t){return(zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lc=o.Math.Vector2,Nc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zc(n);if(r){var i=zc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Bc(this,t)});function a(){var t;jc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._lastOptions={},t._lastInputDimensions=new Lc(0,0),t._brush=null,t}return(e=[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.image,r=e.size;n.width=n.height=Math.ceil(r*t.min());var i=o.Utils.createCanvas();i.width=n.width,i.height=n.height;var a=i.getContext("2d");a.drawImage(n,0,0,i.width,i.height);var s=this._tintImageData(a.getImageData(0,0,i.width,i.height),i.width,i.height);return a.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=t.clone(),i}},{key:"_tintImageData",value:function(t){for(var e=this._options.color,n=0;n<t.data.length;n+=4)t.data[n]+=(255*e.r-t.data[n])*e.a,t.data[n+1]+=(255*e.g-t.data[n+1])*e.a,t.data[n+2]+=(255*e.b-t.data[n+2])*e.a;return t}},{key:"clone",value:function(){return new this.constructor(this._options)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Uc(t){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hc(t,e){return(Hc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gc(t,e){return!e||"object"!==Uc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vc(t){return(Vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Nc.prototype.availableOptions={identifier:{type:o.OptionType.STRING},image:{type:o.OptionType.IMAGE},size:{type:o.OptionType.NUMBER,default:.05},color:{type:o.OptionType.COLOR,default:o.Color.RED}};var Zc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vc(n);if(r){var i=Vc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Gc(this,t)});function a(){return Wc(this,a),i.apply(this,arguments)}return(e=[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.size,r=e.hardness,i=e.color,a=o.Utils.createCanvas();a.width=a.height=Math.ceil(n*t.min());var s=a.getContext("2d");if((i=i.clone()).a=1,1===a.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(a.width/2,a.height/2,Math.min(a.width/2-1,a.width/2*r),a.width/2,a.height/2,a.width/2);l.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,a.width,a.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=a,this._lastInputDimensions=t.clone(),a}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Nc);function Xc(t){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qc(t,e,n){return(qc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Kc(t,e){return(Kc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qc(t,e){return!e||"object"!==Xc(e)&&"function"!=typeof e?Jc(t):e}function Jc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $c(t){return($c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Zc.identifier="imgly_brush_radial",Zc.prototype.availableOptions=o.Utils.extend(Nc.prototype.availableOptions,{hardness:{type:o.OptionType.NUMBER,default:1}});var tf=o.Math.Vector2,ef=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$c(n);if(r){var i=$c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Qc(this,t)});function a(){var t;Yc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._persistedPaths=[],t._outputCanvasDirty=!0,t._outputCanvas=o.Utils.createCanvas(),t._outputContext=t._outputCanvas.getContext("2d"),t._persistCanvas=o.Utils.createCanvas(),t._persistContext=t._persistCanvas.getContext("2d"),t._nextCanvas=o.Utils.createCanvas(),t._texture=o.Engine.Texture.fromCanvas(t._outputCanvas),t._sprite.setTexture(t._texture),t._onPathUpdate=t._onPathUpdate.bind(Jc(t)),t}return(e=[{key:"applyFlip",value:function(t){this._options.paths.forEach((function(e){e.forEachControlPoint((function(e){var n=e.getPosition().clone();switch(t){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}e.setPosition(n)})),e.setDirty(!0)})),this._reset()}},{key:"applyRotation",value:function(t){this._options.paths.forEach((function(e){e.forEachControlPoint((function(e){var n=e.getPosition().clone();90===t?(n.flip(),n.x=1-n.x):-90===t&&(n.flip(),n.y=1-n.y),e.setPosition(n)})),e.setDirty(!0)})),this._reset()}},{key:"applyTransform",value:function(t){var e=null;this._options.paths.forEach((function(n){n.forEachControlPoint((function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))}));var r=n.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),n.setDirty(!0)})),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,n=t.height;this._outputContext.clearRect(0,0,e,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,n=t.height;this._persistContext.clearRect(0,0,e,n)}}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=qc($c(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="brush"),n}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===t?this._options.paths.map((function(t){return t.serializeOptions(void 0,e)})):qc($c(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"createPath",value:function(t){var e=new Tc(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];qc($c(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),t&&n&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach((function(t){t.setDirty(!0)})))}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[n],e)}},{key:"render",value:function(t){var e=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(o.Utils.ensureCanvasDimensions(this._outputCanvas,t),o.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach((function(n){n.render(t),n.getClosed()&&-1===e._persistedPaths.indexOf(n)&&e._onPathPersist(n)})),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach((function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)})),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(t,e){e&&(o.Utils.ensureCanvasDimensions(this._outputCanvas,e),o.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._texture.getBaseTexture().update()),this.render(e);var n=t.getRenderer();n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(this._texture.getBaseTexture()),qc($c(a.prototype),"update",this).call(this,t,e)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"_createRadialBrush",value:function(){return new Zc}},{key:"_getTempCanvas",value:function(){return this._nextCanvas}},{key:"dispose",value:function(){qc($c(a.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);ef.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},position:{type:o.OptionType.VECTOR2,default:new tf(0,0)},scale:{type:o.OptionType.VECTOR2,default:new tf(1,1)},anchor:{type:o.OptionType.VECTOR2,default:new tf(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new tf(0,0)},rotation:{type:o.OptionType.NUMBER,default:0},paths:{type:o.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map((function(t){if(t instanceof Tc)return t;var n=t.brush,r=t.closed,i=new Tc(e._operation,{brush:n,closed:r},e._nextCanvas);return t.controlPoints.forEach((function(t){i.addControlPoint(t)})),i})),this._reset(),t}}},ef.type="brush",ef.Brush=Nc,ef.Path=Tc,ef.Brushes={RadialBrush:Zc};const nf=ef;function rf(t){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function of(t,e){return(of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function af(t,e){return!e||"object"!==rf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sf(t){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&of(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=sf(r);if(i){var n=sf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return af(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(9367),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r,i=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=this._options,l=s.maskCanvas,u=s.filterCanvas,c=l.getContext("2d"),f=u.getContext("2d"),p=c.getImageData(0,0,i.width,i.height).data,h=o.getImageData(0,0,i.width,i.height),d=h.data,y=f.getImageData(0,0,i.width,i.height).data,g=0;g<i.width*i.height*4;g+=4)r=p[g]/255,d[g]=r*y[g]+(1-r)*d[g],d[g+1]=r*y[g+1]+(1-r)*d[g+1],d[g+2]=r*y[g+2]+(1-r)*d[g+2];a.putImageData(h,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);lf.prototype.availableOptions={maskImage:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},maskCanvas:{type:o.OptionType.OBJECT,default:null},filterImage:{type:o.OptionType.NUMBER,default:2,uniformType:o.UniformType.INT},filterCanvas:{type:o.OptionType.OBJECT,default:null}};const uf=lf;function cf(t){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ff(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pf(t,e,n){return(pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hf(t,e){return(hf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function df(t,e){return!e||"object"!==cf(e)&&"function"!=typeof e?yf(t):e}function yf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gf(t){return(gf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mf=o.Math.Vector2,vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hf(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gf(n);if(r){var i=gf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return df(this,t)});function a(){var t;ff(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=(t=i.call.apply(i,[this].concat(n)))._sdk.getRenderer();t._lastBlurRadius=null,t._blurredRenderTexture=new o.Engine.RenderTexture(s,100,100,1),t._maskRenderTexture=new o.Engine.RenderTexture(s,100,100,1),t._brushSprite=new nf(yf(t)),t._brushSpriteContainer=new o.Engine.Container;var l=t._brushSprite.getDisplayObject();if(t._brushSpriteContainer.addChild(l),t._outputSprite=new o.Engine.Sprite,t._outputContainer=new o.Engine.Container,t._outputContainer.addChild(t._outputSprite),t._maskFilter=new uf,s.isOfType(o.RendererType.WEBGL)){t._horizontalFilter=new rt,t._verticalFilter=new rt,t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new mf(1,1)),t._verticalFilter.setDelta(new mf(-1,1));var u=t._maskRenderTexture.getBaseTexture();u.setGLUnit(t._maskFilter.getMaskImage()),s.updateTexture(u,!1),(u=t._blurredRenderTexture.getBaseTexture()).setGLUnit(t._maskFilter.getFilterImage()),s.updateTexture(u,!1)}else s.isOfType(o.RendererType.CANVAS)&&(t._blurFilter=new rt,t._sprite.setFilters([t._blurFilter]),t._maskFilter.setMaskCanvas(t._maskRenderTexture.getRenderTarget().getCanvas()),t._maskFilter.setFilterCanvas(t._blurredRenderTexture.getRenderTarget().getCanvas()));return t._outputSprite.setFilters([t._maskFilter]),t}return(e=[{key:"flip",value:function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),o.Promise.resolve()}},{key:"_renderMask",value:function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(o.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(e)||this._blurredRenderTexture.resizeTo(e);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!n.equals(e)){var i,a=this._sdk.getRenderer();a.isOfType(o.RendererType.WEBGL)?(i={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(i),this._verticalFilter.set(i)):a.isOfType(o.RendererType.CANVAS)&&(i={blurRadius:r},this._blurFilter.set(i)),this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}var s=this._sdk.getRenderer();s.isOfType(o.RendererType.WEBGL)&&s.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new nf.Brushes.RadialBrush({size:t,hardness:e,color:o.Color.WHITE}),r=this._brushSprite.createPath(n);return this._options.paths.push(r),this.setDirty(!0),r}},{key:"setDirtyForRenderer",value:function(t,e,n){pf(gf(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),this._brushSprite.setDirtyForRenderer(t,e,n)}},{key:"dispose",value:function(){pf(gf(a.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(o.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);vf.identifier="selective-blur",vf.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:.05},paths:{type:o.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},a().Operations.SelectiveBlurOperation=vf;const _f=vf;function bf(t){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xf(t,e,n){return(xf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Of(t,e){return(Of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sf(t,e){return!e||"object"!==bf(e)&&"function"!=typeof e?kf(t):e}function kf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tf(t){return(Tf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cf=o.Math.Vector2,Ef=o.Math.ColorMatrix,Rf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Of(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tf(n);if(r){var i=Tf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Sf(this,t)});function a(){var t;wf(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=(t=i.call.apply(i,[this].concat(n)))._options.image,l=s.src||s.filePath||s.toDataUrl&&s.toDataURL();return t._isSVG=l&&!!l.match(/\w+\.svg(?=\?|$)/i),t._isSVG&&(t._canvas=o.Utils.createCanvas(),t._context=t._canvas.getContext("2d"),t._options.smoothDownscaling=!1),s&&t._onImageUpdate(),t._tintFilter=new o.Engine.Filters.TintFilter,t._adjustmentsFilter=new v,t._lastRenderedDimensions=Cf.NULL,t._lastRenderedInputDimensions=Cf.NULL,t._onOptionsChange=t._onOptionsChange.bind(kf(t)),t._options.adjustments.on("update",t._onOptionsChange),t}return(e=[{key:"applyScale",value:function(t){this.setDimensions(this.getDimensions().multiply(t))}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=xf(Tf(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="sticker"),n}},{key:"_rendersToRenderTexture",value:function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(o.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(t,e){var n=this._options,r=n.dimensions,i=n.image;if(r.equals(Cf.NULL)&&r.set(i.width,i.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i)&&this._isSVG&&t.getRenderer().isOfType(o.RendererType.WEBGL)){i.width=Math.round(r.x),i.height=Math.round(r.y);var a=4096,s=i.width/i.height;i.width>a&&(i.width=a,i.height=Math.round(i.width/s)),i.height>a&&(i.height=a,i.width=Math.round(i.height*s)),this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var l=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){l.push(this._adjustmentsFilter);var u=this._options.adjustments,c=new Ef;c.multiply(Ef.createBrightnessMatrix(u.getBrightness())),c.multiply(Ef.createSaturationMatrix(u.getSaturation())),c.multiply(Ef.createContrastMatrix(u.getContrast())),this._adjustmentsFilter.set({colorMatrix:c})}this._options.tintMode&&"none"!==this._options.tintMode&&(l.push(this._tintFilter),this._tintFilter.set({mode:o.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(l)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=i}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}},{key:"applyFlip",value:function(t){xf(Tf(a.prototype),"applyFlip",this).call(this,t);var e={rotation:this._options.rotation},n=e.rotation/Math.PI*180*-1;switch(e.rotation=n*Math.PI/180,t){case"horizontal":e.flipHorizontally=!this._options.flipHorizontally,this.set(e);break;case"vertical":e.flipVertically=!this._options.flipVertically,this.set(e)}}},{key:"_hasAdjustments",value:function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()}},{key:"_onImageUpdate",value:function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(o.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=o.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"scalesUniformly",value:function(){return"keepAspect"===this._options.resizeMode}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xf(Tf(a.prototype),"setOption",this).call(this,t,e,n),"image"===t&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var t=this._dirtiness;for(var e in t)t[e]=!0}},{key:"dispose",value:function(){xf(Tf(a.prototype),"dispose",this).call(this),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Rf.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},identifier:{type:o.OptionType.STRING,default:""},image:{type:o.OptionType.IMAGE,required:!0},position:{type:o.OptionType.VECTOR2,default:Cf.NULL},dimensions:{type:o.OptionType.VECTOR2,default:Cf.NULL},anchor:{type:o.OptionType.VECTOR2,default:new Cf(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new Cf(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:o.OptionType.BOOLEAN,default:!1},tintColor:{type:o.OptionType.COLOR,default:o.Color.WHITE},tintMode:{type:o.OptionType.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:o.OptionType.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:o.OptionType.NUMBER,default:1},adjustments:{type:o.OptionType.CONFIGURABLE,structure:{brightness:{type:o.OptionType.NUMBER,default:0},saturation:{type:o.OptionType.NUMBER,default:1},contrast:{type:o.OptionType.NUMBER,default:1}}}},Rf.type="sticker";const Df=Rf,Pf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._lastFontStyle={}}var e;return(e=[{key:"getLines",value:function(){for(var t=this,e=[],n=[],r=this._lines.length,i=0;i<r;i++){for(var o=this._lines[i],a=this._buildWords(o),s=a.length,l=0;l<s;l++){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(e.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){var p=this._splitWord(u);e=e.concat(p.lines),p.rest&&(n=[p.rest])}}else n.push(u)}e.push(n.join("")),n=[]}return e.map((function(e){return t._trimLine(e,t._context.textAlign)}))}},{key:"_trimLine",value:function(t,e){return t}},{key:"_buildWords",value:function(t){for(var e=[],n="",r=t.length,i=0;i<r;i++){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e}},{key:"_splitWord",value:function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i++){var o=t[i];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(t){return this._context.measureText(t).width}},{key:"setText",value:function(t){this._text=t,this._lines=t.split("\n")}},{key:"setMaxWidth",value:function(t){this._maxWidth=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var If=o.Math.Vector2;const Af=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._text=e,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}var e;return(e=[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Pf(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(e.lineWidth=n)}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines().map((function(t){return t.replace(/\s+$/i,"")}))}},{key:"_renderTextLine",value:function(t,e){var n=this._text.getAlignment(),r=new If(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,r.x,r.y))}},{key:"update",value:function(t,e){var n=this.calculateFontStyles(t,e);if(n){var r=this._calculateText(t,n,e),i=r.dimensions,o=r.lines;this._renderText(t,i,o,n,e),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var t=this._canvas,e=t.width,n=t.height,r=this.rotation,i=Math.cos(r),o=Math.sin(r),a=new If(Math.abs(e*i)+Math.abs(n*o),Math.abs(e*o)+Math.abs(n*i));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(t,e,n,r,i){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*i.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,r.topPadding+r.lineHeight*o)}}},{key:"calculateFontStyles",value:function(t,e){var n=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,i=this._text.getAbsoluteTextHeight(e),o=i*this._text.getLineHeight(),a={fontFamily:n,fontSize:r,lineHeight:o,topPadding:i*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===r&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(t,e,n){var r=this._text.getMaxWidth()*n.x;this._applyTextOptions(e,this._context);var i=new If,o=this._text.getText().split("\n");if(void 0!==r)i.x=r,o=this._buildOutputLines(r);else for(var a=0;a<o.length;a++){var s=o[a];i.x=Math.max(i.x,this._context.measureText(s).width)}var l=e.lineHeight;return i.y=o.length*l,{dimensions:i,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(t,e){var n=this.calculateFontStyles(t,e);return this._calculateText(t,n,e).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Ff(t){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mf(t,e,n){return(Mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bf(t,e){return(Bf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zf(t,e){return!e||"object"!==Ff(e)&&"function"!=typeof e?Lf(t):e}function Lf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nf(t){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uf=o.Math.Vector2,Wf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bf(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nf(n);if(r){var i=Nf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return zf(this,t)});function a(){var t;jf(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._textRenderer=new Af(Lf(t),t._operation),t._textRenderer.rotation=t.getRotation(),t._sprite.setTexture(t._textRenderer.getFinalTexture()),t._hitTestSprite.setTexture(t._textRenderer.getTexture()),t}return(e=[{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Mf(Nf(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="text"),n}},{key:"getDOMStyle",value:function(t,e){var n=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(t){var e=this.getFontSize()*t.y,n=this.getTextMetrics();if(n){var r=1/n.unitsPerEm*e,i=n.ascender*r,o=n.descender*r;return i+Math.abs(o)}return e*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(t,e){return this._textRenderer.getDimensions(t,e)}},{key:"applyFlip",value:function(t){Mf(Nf(a.prototype),"applyFlip",this).call(this,t);var e=this._options.rotation;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}},{key:"applyTransform",value:function(t){Mf(Nf(a.prototype),"applyTransform",this).call(this,t),this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(t){Mf(Nf(a.prototype),"applyRotation",this).call(this,t);var e=(t+360)%360,n=this._operation.getInputDimensions();90!==e&&270!==e||(this.setMaxWidth(this.getMaxWidth()/n.x*n.y),this.setFontSize(this.getFontSize()/n.y*n.x))}},{key:"setOption",value:function(t,e){var n=this._options,r=n.flipHorizontally,i=n.flipVertically;if("rotation"===t){var o=e;return r&&(o=2*Math.PI-o),i&&(o=2*Math.PI-o),this._options.rotation=o,this._textRenderer&&(this._textRenderer.rotation=o),this._rotation=o,void this.emit("update")}Mf(Nf(a.prototype),"setOption",this).call(this,t,e)}},{key:"getOption",value:function(t){return"rotation"===t?this._rotation:Mf(Nf(a.prototype),"getOption",this).call(this,t)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(t,e){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(t,e);var n=this._textRenderer.getFinalTexture();n.getBaseTexture().update();var r=t.getRenderer();r.isOfType(o.RendererType.WEBGL)&&r.updateTexture(n.getBaseTexture()),Mf(Nf(a.prototype),"update",this).call(this,t,e),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1,this.setRotation(this._rotation)),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(t)}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){Mf(Nf(a.prototype),"dispose",this).call(this),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Wf.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},fontSize:{type:o.OptionType.NUMBER,default:.1},characterSpacing:{type:o.OptionType.NUMBER,default:0},lineHeight:{type:o.OptionType.NUMBER,default:1.1},fontIdentifier:{type:o.OptionType.STRING},fontFamily:{type:o.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:o.OptionType.ALL,default:"normal"},fontStyle:{type:o.OptionType.STRING,default:"normal"},textMetrics:{type:o.OptionType.OBJECT,default:null},outlineWidth:{type:o.OptionType.NUMBER,default:0},outlineColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:o.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:o.OptionType.COLOR,default:new o.Color(1,0,0,1)},backgroundColor:{type:o.OptionType.COLOR,default:o.Color.TRANSPARENT},position:{type:o.OptionType.VECTOR2,default:new Uf(.5,.5)},anchor:{type:o.OptionType.VECTOR2,default:new Uf(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new Uf(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},text:{type:o.OptionType.STRING,required:!0},maxWidth:{type:o.OptionType.NUMBER,default:.5},maxHeight:{type:o.OptionType.NUMBER,default:0},visible:{type:o.OptionType.BOOLEAN,default:!0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},Wf.type="text";const Hf=Wf;function Gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._seed=void 0===e?t.TimeSeed():e}var e,n,r;return e=t,r=[{key:"TimeSeed",value:function(){return Date.now()}}],(n=[{key:"seed",value:function(e){this._seed=void 0===e?t.TimeSeed():e}},{key:"next",value:function(){var e=0|this._seed,n=e/t.SEED_DIVIDER|0,r=e%t.SEED_DIVIDER|0;return(e=t.SEED_LOW_MULTIPLY*r-t.SEED_HIGH_MULTIPLY*n)<=0&&(e+=t.MAX),-1===e&&(e=t.MAX-1),this._seed=e,e}},{key:"nextInRange",value:function(t,e){return void 0===e&&(e=t,t=0),t+this.next()%(e-t+1)}},{key:"nextBool",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(t+e-1)>=t}},{key:"pickNext",value:function(t){return Array.isArray(t)?t[this.next()%t.length]:null}}])&&Gf(e.prototype,n),r&&Gf(e,r),t}();function Xf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Vf(Zf,"MAX",2147483647),Vf(Zf,"SEED_DIVIDER",127773),Vf(Zf,"SEED_LOW_MULTIPLY",16807),Vf(Zf,"SEED_HIGH_MULTIPLY",2836);var Qf=o.Math.Rectangle,Jf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;qf(this,t),this.top=e,this.left=n,this.bottom=r,this.right=i}var e,n,r;return e=t,r=[{key:"ZERO",get:function(){return new t(0,0,0,0)}}],(n=[{key:"multiply",value:function(t){this.top*=t,this.left*=t,this.bottom*=t,this.right*=t}},{key:"toObject",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xf(Object(n),!0).forEach((function(e){Yf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(t.top-this.top)<=e&&Math.abs(t.left-this.left)<=e&&Math.abs(t.bottom-this.bottom)<=e&&Math.abs(t.right-this.right)<=e}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;return void 0===e&&(e=t),this.top*=e,this.bottom*=e,this.left*=t,this.right*=t,this}},{key:"clone",value:function(){return new t(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(t){return new Qf(t.x+this.left,t.y+this.top,t.width-this.left-this.right,t.height-this.top-this.bottom)}}])&&Kf(e.prototype,n),r&&Kf(e,r),t}();function $f(t){return function(t){if(Array.isArray(t))return tp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tp(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ep(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var np=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.words=[],e&&this.splitIntoWords(e)}var e,n,r;return e=t,r=[{key:"fromWords",value:function(e){var n=new t;return n.words=$f(e),n}}],(n=[{key:"splitIntoWords",value:function(t){return this.words=t.match(/\S+/g)||[],$f(this.words)}},{key:"get",value:function(){return $f(this.words)}},{key:"getWord",value:function(t){return this.words[t]}},{key:"set",value:function(t){return this.words=$f(t),this}},{key:"slice",value:function(e,n){return t.fromWords(this.words.slice(e,n))}},{key:"getLowerCase",value:function(){return this.words.map((function(t){return t.toLowerCase()}))}},{key:"getUpperCase",value:function(){return this.words.map((function(t){return t.toUpperCase()}))}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce((function(t,e){return t+e.length}),0)}},{key:"joined",value:function(t){var e=this,n=this.size(),r=Math.floor(n/t),i=n%t,a=0,s=0;return o.Utils.Array.range(0,t).map((function(t){a=s;var l=r+(t<i?1:0);return s=Math.min(a+l,n),o.Utils.Array.range(a,s).reduce((function(t,n){return t+(n===a?"":" ")+e.words[n]}),"")}))}}])&&ep(e.prototype,n),r&&ep(e,r),t}();function rp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ip(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var op=o.Math.Rectangle,ap=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;rp(this,t),this.width=e,this.height=n}var e,n,r;return e=t,r=[{key:"fitTwoInWidth",value:function(e,n,r){var i=n.width*r.height+n.height*r.width,o=r.height*e/i,a=n.width*o,s=n.height*o;return[new t(a,s),new t(e-a,s)]}}],(n=[{key:"set",value:function(t,e){this.width=t,this.height=e}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(t,e){return new op(t,e,this.width,this.height)}},{key:"clone",value:function(){return new t(this.width,this.height)}},{key:"scale",value:function(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this}},{key:"fitInWidthWithOther",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t;return this.copy(t.fitTwoInWidth(e,this,n)[0]),this}}])&&ip(e.prototype,n),r&&ip(e,r),t}();function sp(t){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function up(t,e){return(up=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cp(t,e){return!e||"object"!==sp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fp(t){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&up(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fp(n);if(r){var i=fp(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cp(this,t)});function o(){return lp(this,o),i.apply(this,arguments)}return(e=[{key:"getSize",value:function(){var t=this.getRows(),e=this.getWidth(),n=t.length-1,r=t.reduce((function(t,e){return t+e.getSize().height}),0);r+=(n+1)*this.getRelativeLineSpacing()*e;var i=this.getRelativeInsets().clone().scale(e);return r+=i.top+i.bottom,new ap(e,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function hp(t){return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yp(t,e){return(yp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gp(t,e){return!e||"object"!==hp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mp(t){return(mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}pp.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},lines:{type:o.OptionType.ARRAY,default:[]},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf},relativeLineSpacing:{type:o.OptionType.NUMBER,default:0},rows:{type:o.OptionType.OBJECT,default:[]},background:{type:o.OptionType.OBJECT,default:null},width:{type:o.OptionType.NUMBER,default:0}};var vp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yp(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=mp(e);if(n){var i=mp(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return gp(this,t)});function i(){return dp(this,i),r.apply(this,arguments)}return i}(o.Configurable);function _p(t){return(_p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bp(t,e){return(bp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wp(t,e){return!e||"object"!==_p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xp(t){return(xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vp.prototype.availableOptions={tintColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},textColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:o.OptionType.NUMBER,default:1},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"}};var Op=o.Math.Rectangle,Sp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bp(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xp(n);if(r){var i=xp(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return wp(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).setSize(new ap(e.getWidth(),0)),e.serverImageSmoothingFix=!1,e}return(e=[{key:"_getFrame",value:function(){var t=this.getSize();return new Op(0,0,t.width,t.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(t){return t.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){o.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(t){return o.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(t,e){return t.getFrame().clone()}},{key:"willRender",value:function(t){}},{key:"didRender",value:function(t){}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach((function(n){var r=n.serializeOptions(),i=(r.text,r.frame),o=r.font,a=e.getAttributes();o.draw(t,i.x,i.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})})),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function kp(t){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Cp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ep(t,e){return(Ep=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rp(t,e){return!e||"object"!==kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dp(t){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Sp.prototype.availableOptions={words:{type:o.OptionType.OBJECT,default:null},width:{type:o.OptionType.NUMBER,default:100},attributes:{type:o.OptionType.CONFIGURABLE,default:new vp},shearingAngle:{type:o.OptionType.NUMBER,default:0},elements:{type:o.OptionType.ARRAY,default:[]},size:{type:o.OptionType.OBJECT,default:null}};var Pp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ep(t,e)}(c,t);var e,n,r,i,a,s,u=(a=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dp(a);if(s){var n=Dp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Rp(this,t)});function c(){return Cp(this,c),u.apply(this,arguments)}return e=c,(n=[{key:"loadImages",value:(r=l().mark((function t(e){var n,r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=0;case 2:if(!(r<e.length)){t.next=10;break}return i=e[r],t.next=6,this.addImage(i.path,i.fullPath,i.image);case 6:n.push(i);case 7:r++,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function a(t){Tp(o,n,i,a,s,"next",t)}function s(t){Tp(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"addImage",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",i=this.getImages();return n?(i[t]={fullPath:e,image:n},Promise.resolve({fullPath:e,image:n})):new Promise((function(a,s){(n=new o.Image).onload=function(){i[t]={fullPath:e,image:n},a({fullPath:e,image:n})},n.crossOrigin=o.Utils.getCrossOriginValue(r),n.onerror=s,n.src=e}))}},{key:"getImage",value:function(t){var e=this.getImages()[t];return e?e.image:null}},{key:"getVariation",value:function(t){return this.getFonts()[t]}},{key:"addFont",value:function(t,e){return this.getFonts()[t]=e,e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),c}(o.Configurable);Pp.prototype.availableOptions={images:{type:o.OptionType.OBJECT,default:{}},fonts:{type:o.OptionType.OBJECT,default:{}}};var Ip=new Pp;function Ap(t){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fp(Object(n),!0).forEach((function(e){Mp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bp(t,e,n){return(Bp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Np(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zp(t,e){return(zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lp(t,e){return!e||"object"!==Ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Np(t){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Up=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zp(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Np(n);if(r){var i=Np(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Lp(this,t)});function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,t);var n=Ip.getVariation(e.getFontIdentifier());return n||o.Log.warn("TextDesignFont: Unable to find font '".concat(e._fontIdentifier,"'")),e.set({fontVariation:n}),e._metrics=null,e._canvas=o.Utils.createCanvas(),e._context=e._canvas.getContext("2d"),e._isDirty=!0,e}return(e=[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Bp(Np(a.prototype),"setOption",this).call(this,t,e,n,r),"fontIdentifier"!==t||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=Ip.getVariation(this.getFontIdentifier());return t||o.Log.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(t),t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=jp(jp({},this._options),t),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=jp(jp({},this._options),e),r=n.fontSize,i=n.fontVariation,o=n.lineHeight,a=n.textColor,s=n.alignment,l=i.serializeOptions(),u=l.fontStyle,c=l.fontWeight,f=l.fontFamily;t.font="".concat(u," ").concat(c," ").concat(r,"px / ").concat(o," ").concat(f),t.fillStyle=a,t.textBaseline="alphabetic",t.textAlign=s||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),jp({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new ap(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(t){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var e=t/this._context.measureText(this.getText()).width,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}o.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(t){if(this.getFontVariation()){var e=t/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}o.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._canvas,n=this._context,r=jp(jp({},this._options),t),i=this.getText();this._applyTextOptions(n,r);var o=Math.ceil(n.measureText(i).width),a=Math.floor(o+2*r.fontSize),s=Math.floor(3*r.fontSize);e.width=a,e.height=s;var l=Math.floor(r.fontSize),u=Math.floor(.6*s);this._applyTextOptions(n,r),n.fillText(i,l,u);var c=n.getImageData(0,0,e.width,e.height).data,f=Zp(c,a,s,u,this._options.excludeAccents),p=Vp(c,a,s,u,this._options.excludeAccents),h=o,d=f+p;return this._metrics={width:h,height:d,ascender:f,descender:p},this._isDirty=!1,jp({},this._metrics)}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(t,r),t.fillText(this.getText(),e,n+this._metrics.ascender),i&&(qp(t,e,n,this._metrics.width,this._metrics.height),Yp(t,n+this._metrics.ascender,e,e+this._metrics.width)),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable),Wp=function(t,e,n,r){var i=n*(4*r)+4*e;return{r:t[i],g:t[i+1],b:t[i+2],a:t[i+3]}},Hp=function(t){return t.a<=254},Gp=function(t,e,n){for(var r=!0,i=0;i<n;i++){var o=Wp(t,i,e,n);if(!Hp(o)){r=!1;break}}return r},Vp=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r+1;a<n;a++)if(Gp(t,a,e)){if(i)break}else o=a-r+1;return o},Zp=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r-1;a>=0;a--)if(Gp(t,a,e)){if(i)break}else o=r-a;return o},Xp=function(t,e,n,r,i){t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke()},Yp=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";t.save(),t.strokeStyle=i,Xp(t,n,e,r,e),t.restore()},qp=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";t.save(),t.strokeStyle=o,t.strokeRect(e,n,r,i),t.restore()};function Kp(t){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jp(t,e){return(Jp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $p(t,e){return!e||"object"!==Kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Up.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:o.OptionType.OBJECT,default:null},lineHeight:{type:o.OptionType.NUMBER,default:1},fontSize:{type:o.OptionType.NUMBER,default:22},textColor:{type:o.OptionType.STRING,default:"black"},strokeStyle:{type:o.OptionType.STRING,default:"black"},outlineWidth:{type:o.OptionType.NUMBER,default:0},textBaseline:{type:o.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:o.OptionType.BOOLEAN,default:!1}};var eh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jp(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=th(e);if(n){var i=th(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return $p(this,t)});function i(){return Qp(this,i),r.apply(this,arguments)}return i}(o.Configurable);function nh(t){return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rh(Object(n),!0).forEach((function(e){oh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ah(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sh(t,e){return(sh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lh(t,e){return!e||"object"!==nh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uh(t){return(uh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}eh.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},frame:{type:o.OptionType.OBJECT,default:null},font:{type:o.OptionType.OBJECT,default:null}};var ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sh(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uh(n);if(r){var i=uh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lh(this,t)});function o(){return ah(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){var t=this.serializeOptions(),e=t.attributes,n=t.imageInsets,r=t.size,i=(t.width,this.getWords().joined(1)[0]||""),o=e.fontIdentifier,a=new Up({text:i,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;r.height=s;var l=this._getTextFrame();return[new eh({text:i,frame:l,font:a})]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function fh(t){return(fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t){return function(t){if(Array.isArray(t))return hh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hh(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dh(t,e){return(dh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yh(t,e){return!e||"object"!==fh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gh(t){return(gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ch.prototype.availableOptions=ih(ih({},Sp.prototype.availableOptions),{},{imageInsets:{type:o.OptionType.OBJECT,default:new Jf}});var vh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dh(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gh(n);if(r){var i=gh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return yh(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._relativeInsets=new Jf,e._background=null,e._fontRandomizer=new Zf(0),e._lineNumberRandomizer=new Zf(0),e._wordsPerLineRandomizer=new Zf(0),e._seedPool=[e._fontRandomizer,e._lineNumberRandomizer,e._wordsPerLineRandomizer],e}return(e=[{key:"seed",value:function(t){this._seedPool.forEach((function(e){return e.seed(t)}))}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(t,e){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(t){return t.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(t){return Math.ceil(Math.sqrt(t.size()))}},{key:"_maximumNumberOfLines",value:function(t){return t.size()}},{key:"_calculatedNumberOfLines",value:function(t){var e=this._minimumNumberOfLines(t);if(t.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,e*this.getRandomAdditionalLinePercentage()));e+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(e,this._maximumNumberOfLines(t))}},{key:"_randomizedNumberOfWordsPerLine",value:function(t,e){var n=this;if(t>e)return o.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),e;var r=o.Utils.Array.repeat(1,t);return o.Utils.Array.range(t,e).forEach((function(e){var i=n._wordsPerLineRandomizer.nextInRange(0,t-1);r[i]+=1})),r}},{key:"_textLines",value:function(t){var e=new np(t),n=this._calculatedNumberOfLines(e);return this._randomizedNumberOfWordsPerLine(n,e.size()).reduce((function(t,n){return{index:t.index+n,lines:[].concat(ph(t.lines),[e.slice(t.index,Math.min(t.index+n,e.size()))])}}),{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(t){var e=this._textLines(t),n=0;do{if((n=o.Utils.Array.findIndex(e,(function(t){return t.countNumberOfCharacters()<3})))>=0){var r=e[n-1],i=e[n+1];(r?r.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)<(i?i.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)&&r?(r.words=[].concat(ph(r.words),ph(e[n].words)),e=[].concat(ph(e.slice(0,n)),ph(e.slice(n+1)))):i&&(i.words=[].concat(ph(e[n].words),ph(i.words)),e=[].concat(ph(e.slice(0,n)),ph(e.slice(n+1))))}}while(n>-1&&e.length>1);return e}},{key:"_modifiedLines",value:function(t){return t}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(t,e){var n=this._modifiedText(t),r=this._modifiedLines(this._validTextLines(n)),i=e*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(r,i);return new pp({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:r,rows:o,width:e})}},{key:"_layoutRows",value:function(t,e){var n=this;return t.map((function(t,r){return n._randomLayoutRow(t,r,e,new vp({fontIdentifier:n._fontForRow(r,t)})).layout()}))}},{key:"_randomLayoutRow",value:function(t,e,n,r){return new ch({words:t,width:n,attributes:r})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function _h(t){return(_h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bh(Object(n),!0).forEach((function(e){Th(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oh(t,e){return(Oh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sh(t,e){return!e||"object"!==_h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kh(t){return(kh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Th(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mh(vh,"defaultFontIdentifiers",[]),mh(vh,"identifier","textdesign"),vh.prototype.availableOptions={fontIdentifiers:{type:o.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:o.OptionType.NUMBER,default:0}};var Ch=o.Math.Rectangle,Eh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oh(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kh(n);if(r){var i=kh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Sh(this,t)});function a(){return xh(this,a),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var t=this.serializeOptions(),e=t.orientation,n=t.width,r=t.size,i=t.relativeRowOffset,s=t.attributes.fontIdentifier,l=this.getWords().joined(3),u=e===a.Orientations.Left?[l[0],l[1],l[2]]:[l[1],l[2],l[0]],c=o.Utils.Array.range(0,2).map((function(t){return new Up({text:u[t],fontIdentifier:s,fontSize:60})})),f=c.map((function(t){return t.getSizeValue()})),p=f[0].width>f[1].width?0:1,h=(p+1)%2;c[h].fitWidth(f[p].width),f[h]=c[h].getSizeValue();var d=(f[h].height+f[p].height)/(1-i),y=new Up({text:u[2],fontIdentifier:s});y.fitHeight(d);var g=y.getSizeValue().width,m=f[p].width,v=n/(g+m),_=v*g,b=v*m,w=v*d,x=i*w;r.set(n,w);var O=o.Utils.Array.range(0,3).map((function(t){return new Up({text:u[t],fontIdentifier:s})}));O[0].fitWidth(b),O[1].fitWidth(b),O[2].fitWidth(_);var S=e===a.Orientations.Left?0:_,k=[S,S,e===a.Orientations.Left?b:0],T=[0,O[0].getSizeValue().height+x,0],C=O.map((function(t,e){return new Ch(k[e],T[e],t.getSizeValue().width,t.getSizeValue().height)}));return O.map((function(t,e){return new eh({text:u[e],font:O[e],frame:C[e]})}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Sp);function Rh(t){return(Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ph(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ah(t,e){return!e||"object"!==Rh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fh(t){return(Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Th(Eh,"Orientations",{Right:"RIGHT",Left:"LEFT"}),Eh.prototype.availableOptions=wh(wh({},Sp.prototype.availableOptions),{},{orientation:{type:o.OptionType.STRING,default:Eh.Orientations.Left,available:[Eh.Orientations.Right,Eh.Orientations.Left]},relativeRowOffset:{type:o.OptionType.NUMBER,default:.05}});var jh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(s,t);var e,n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fh(i);if(o){var n=Fh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ah(this,t)});function s(){return Dh(this,s),a.apply(this,arguments)}return e=s,r=[{key:"Small",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Jf(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Jf(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Jf(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Jf(.05,.2,.05,.2)})}}],(n=[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}])&&Ph(e.prototype,n),r&&Ph(e,r),s}(o.Configurable);function Mh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Bh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bh(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}jh.prototype.availableOptions={image:{type:o.OptionType.IMAGE,default:null},imagePath:{type:o.OptionType.STRING,default:null},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:o.OptionType.BOOLEAN,default:!1}};var zh=o.Math.Rectangle,Lh=o.Math.Vector2,Nh=function(t,e,n,r){t.drawImage(e,n.x,n.y,n.width,n.height,r.x,r.y,r.width,r.height)},Uh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r,t.fillRect(e.x,e.y,e.width,e.height),i&&(t.strokeStyle=n.toRGBA(),t.strokeWith=1,t.strokeRect(e.x,e.y,e.width,e.height)),t.restore()},Wh=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-over",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t.save(),t.fillStyle=r.toRGBA(),t.globalCompositeOperation=i,n=Math.min(Math.max(n,0),.5*Math.min(e.height,e.width));var a=e.x,s=e.x+e.width,l=e.y,u=e.y+e.height;t.beginPath(),t.moveTo(a+n,l),t.arcTo(s,l,s,u,n),t.arcTo(s,u,a,u,n),t.arcTo(a,u,a,l,n),t.arcTo(a,l,s,l,n),t.closePath(),t.fill(),o&&t.stroke(),t.restore()},Hh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;t.save(),t.strokeStyle=n.toRGBA(),t.lineWidth=r,t.strokeRect(e.x,e.y,e.width,e.height),t.restore()},Gh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";t.save();var i=e.height/2,o=e.y+i,a=e.x+i,s=e.x+e.width;for(t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r;a<s;)t.beginPath(),t.arc(a,o,i,0,2*Math.PI),t.fill(),a+=4*i;t.restore()},Vh=function(t,e){var n=e.applyToRectangle(t),r=t.x,i=t.y,o=t.width,a=t.height;return{corners:[zh.FromDiagonalPoints(new Lh(0,0),new Lh(n.x,n.y)),zh.FromDiagonalPoints(new Lh(0,n.y+n.height),new Lh(n.x,a)),zh.FromDiagonalPoints(new Lh(n.x+n.width,n.y+n.height),new Lh(o,a)),zh.FromDiagonalPoints(new Lh(n.x+n.width,0),new Lh(o,n.y))].map((function(t){return t.translate(r,i)})),bars:[zh.FromDiagonalPoints(new Lh(n.x,0),new Lh(n.x+n.width,n.y)),zh.FromDiagonalPoints(new Lh(0,n.y),new Lh(n.x,n.y+n.height)),zh.FromDiagonalPoints(new Lh(n.x,n.y+n.height),new Lh(n.x+n.width,a)),zh.FromDiagonalPoints(new Lh(n.x+n.width,n.y),new Lh(o,n.y+n.height))].map((function(t){return t.translate(r,i)})),center:n}},Zh=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(t.save(),r&&(t.globalAlpha=r.a),t.drawImage(e,n.x,n.y,n.width,n.height),r&&(t.globalAlpha=1),r){var o=r.clone();o.a=1,Uh(t,n,o,i)}t.restore()};function Xh(t){return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yh(Object(n),!0).forEach((function(e){Kh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jh(t,e,n){return(Jh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ed(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $h(t,e){return($h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function td(t,e){return!e||"object"!==Xh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ed(t){return(ed=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$h(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ed(n);if(r){var i=ed(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return td(this,t)});function a(){return Qh(this,a),i.apply(this,arguments)}return(e=[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(o.Color.WHITE)?o.Color.BLACK:o.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(t){var e=Jh(ed(a.prototype),"_getTextFrameForElement",this).call(this,t),n=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(e.y-=n.top),e}},{key:"willRender",value:function(t){this.getAttributes().setTextColor(this._getTextColor());var e=this.getImage();if(e){var n=this.getCapInsets(),r=this._getFrame();n&&!n.equals(Jf.ZERO)?function(t,e,n,r){var i=e.naturalWidth||e.width,a=e.naturalHeight||e.height,s=Vh(new zh(0,0,i,a),r),l=Vh(n,r);Nh(t,e,s.center,l.center),o.Utils.Array.zip(s.corners,l.corners).forEach((function(n){var r=Mh(n,2),i=r[0],o=r[1];return Nh(t,e,i,o)})),o.Utils.Array.zip(s.bars,l.bars).forEach((function(n){var r=Mh(n,2),i=r[0],o=r[1];return Nh(t,e,i,o)}))}(t,e,r,n):t.drawImage(e,r.x,r.y,r.width,r.height),Uh(t,r,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e&&(t.save(),t.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(t){Jh(ed(a.prototype),"didRender",this).call(this,t),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(ch);function rd(t){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function id(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function od(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?id(Object(n),!0).forEach((function(e){dd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ad(t){return function(t){if(Array.isArray(t))return sd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return sd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sd(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ld(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ud(t,e,n){return(ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cd(t,e){return(cd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fd(t,e){return!e||"object"!==rd(e)&&"function"!=typeof e?pd(t):e}function pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hd(t){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nd.prototype.availableOptions=qh(qh({},ch.prototype.availableOptions),{},{image:{type:o.OptionType.IMAGE,default:null},capInsets:{type:o.OptionType.OBJECT,default:new Jf},backgroundColor:{type:o.OptionType.COLOR,default:o.Color.WHITE},autoAdjustTextColor:{type:o.OptionType.BOOLEAN,default:!0},isMasked:{type:o.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:o.OptionType.BOOLEAN,default:!1}});var yd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cd(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hd(n);if(r){var i=hd(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return fd(this,t)});function a(){var t;ld(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return dd(pd(t=i.call.apply(i,[this].concat(n))),"getImagePaths",(function(){var e=t.getBanderoles();return e&&e.map((function(t){return t.getImagePath()}))||[]})),dd(pd(t),"onImagesLoaded",(function(){var e=t.getBanderoles();e&&e.forEach((function(t){var e=Ip.getImage(t.getImagePath());e?t.setImage(e):o.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(t.getImagePath(),"'"))}))})),t._rowTypeLessThan3WordsRandomizer=new Zf(0),t._rowTypeMoreThan3WordsRandomizer=new Zf(0),t._banderolesRandomizer=new Zf(0),t._seedPool=[].concat(ad(t._seedPool),[t._rowTypeLessThan3WordsRandomizer,t._rowTypeMoreThan3WordsRandomizer,t._banderolesRandomizer]),t}return(e=[{key:"_modifiedText",value:function(t){return ud(hd(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"generateLayoutData",value:function(t,e){return this._options.hasMaskedText=!1,ud(hd(a.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_randomLayoutRow",value:function(t,e,n,r){if(t.size()<3){var i=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(t,n,r,i)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new Eh({words:t,width:n,attributes:r,orientation:Eh.Orientations.Left});case 1:return new Eh({words:t,width:n,attributes:r,orientation:Eh.Orientations.Right});case 2:return this._layoutRow(t,n,r,!0);case 3:return new ch({words:t,width:n,attributes:r});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ".concat(o,"."))}}},{key:"_layoutRow",value:function(t,e,n,r){if(this.getHasMaskedText()&&(r=!1),r){this.setHasMaskedText(!0);var i=this._banderolesRandomizer.pickNext(this.getBanderoles()),a=new nd({words:t,width:e,attributes:new vp({alignment:"left",fontIdentifier:i.getFontIdentifier()}),image:i.getImage(),imageInsets:i.insetsForWidth(e),capInsets:null,backgroundColor:o.Color.WHITE});return i.getNeedsImageSmoothingFix()&&(a.serverImageSmoothingFix=!0),a}return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function gd(t){return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function md(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?md(Object(n),!0).forEach((function(e){Sd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bd(t,e,n){return(bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Od(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wd(t,e){return(wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xd(t,e){return!e||"object"!==gd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Od(t){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}dd(yd,"defaultFontIdentifiers",["imgly_font_campton_bold"]),dd(yd,"identifier","imgly_text_design_blocks"),dd(yd,"defaultBanderoles",[jh.Rectangle,jh.Small]),yd.prototype.availableOptions=od(od({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:yd.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:o.OptionType.BOOLEAN,default:!1},banderoles:{type:o.OptionType.ARRAY,default:yd.defaultBanderoles}});var kd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Od(n);if(r){var i=Od(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return xd(this,t)});function o(){var t;_d(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._exclusiveFont=null,t}return(e=[{key:"generateLayoutData",value:function(t,e){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),bd(Od(o.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_fontForRow",value:function(t,e){return this._exclusiveFont||bd(Od(o.prototype),"_fontForRow",this).call(this,t,e)}},{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(yd);function Td(t){return(Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ed(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cd(Object(n),!0).forEach((function(e){Ad(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dd(t,e){return(Dd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pd(t,e){return!e||"object"!==Td(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Id(t){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ad(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Sd(kd,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),Sd(kd,"identifier","imgly_text_design_blocks_condensed"),kd.prototype.availableOptions=vd(vd({},yd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:kd.defaultFontIdentifiers}});var Fd=o.Math.Rectangle,jd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Id(n);if(r){var i=Id(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Pd(this,t)});function o(){var t;Rd(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).setSize(new ap(t.getWidth(),t.getHeight())),t}return(e=[{key:"_calculateLayoutElements",value:function(){return[new eh({frame:this._getTextFrame()})]}},{key:"render",value:function(t){var e=this._getFrame(),n=this.getType(),r=this.getAttributes().getTextColor(),i=e.height/3,a=new Fd(e.x,e.y,e.width,i),s=new Fd(e.x,e.y+2*i,e.width,i);switch(n){case o.FormType.Rect:Uh(t,e,r);break;case o.FormType.DoubleRect:Uh(t,a,r),Uh(t,s,r);break;case o.FormType.DoubleRectFirstPunctuated:Gh(t,a,r),Uh(t,s,r);break;case o.FormType.DoubleRectSecondPunctuated:Uh(t,a,r),Gh(t,s,r);break;case o.FormType.LongLine:var l=e.height/2,u=new Fd(e.x,e.y,e.width,l);Wh(t,u,.5*u.height,r);break;case o.FormType.LongAndShortLine:var c=.2*e.height,f=.75*c;a=new Fd(e.x,e.y+c,e.width,c);var p=e.x+.25*e.width,h=e.y+e.height-f;s=new Fd(p,h,.5*e.width,f),Wh(t,a,.5*a.height,r),Wh(t,s,.5*s.height,r)}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function Md(t){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bd(Object(n),!0).forEach((function(e){Vd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ld(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ud(t,e,n){return(Ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wd(t,e){return(Wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hd(t,e){return!e||"object"!==Md(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gd(t){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ad(jd,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"}),jd.prototype.availableOptions=Ed(Ed({},Sp.prototype.availableOptions),{},{height:{type:o.OptionType.NUMBER,default:100},type:{type:o.OptionType.STRING,default:jd.FormType.Rect,available:o.Utils.values(jd.FormType)}});var Zd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gd(n);if(r){var i=Gd(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Hd(this,t)});function o(){return Nd(this,o),i.apply(this,arguments)}return(e=[{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}},{key:"_layoutRows",value:function(t,e){var n=Ud(Gd(o.prototype),"_layoutRows",this).call(this,t,e),r=.08*e,i=new jd({width:e,height:.032*e,type:jd.FormType.LongLine,shearingAngle:0}).layout(),a=new jd({width:e,height:r,type:jd.FormType.LongAndShortLine,shearingAngle:0}).layout();return[i].concat(function(t){return function(t){if(Array.isArray(t))return Ld(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ld(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[a])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(yd);function Xd(t){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yd(Object(n),!0).forEach((function(e){ty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qd(t,e){return(Qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jd(t,e){return!e||"object"!==Xd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Vd(Zd,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),Vd(Zd,"identifier","imgly_text_design_blocks_light"),Zd.prototype.availableOptions=zd(zd({},yd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Zd.defaultFontIdentifiers}});var ey=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$d(n);if(r){var i=$d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Jd(this,t)});function o(){return Kd(this,o),i.apply(this,arguments)}return(e=[{key:"_layoutRows",value:function(t,e){var n=this;return t.map((function(t,r){return n._randomLayoutRow(t,r,e,new vp({fontIdentifier:n._fontForRow(r,t)})).layout()}))}},{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Zd);function ny(t){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ry(Object(n),!0).forEach((function(e){cy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ry(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ay(t,e,n){return(ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sy(t,e){return(sy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ly(t,e){return!e||"object"!==ny(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uy(t){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ty(ey,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),ty(ey,"identifier","imgly_text_design_blocks_light-v3_1_0"),ey.prototype.availableOptions=qd(qd({},Zd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:ey.defaultFontIdentifiers}});var fy=o.Math.Rectangle,py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sy(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uy(n);if(r){var i=uy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return ly(this,t)});function o(){return oy(this,o),i.apply(this,arguments)}return(e=[{key:"getImageSize",value:function(){var t=this.getLeftImage(),e=this.getRightImage(),n=this.getWords(),r=this.getAttributes().getFontIdentifier(),i=t?new ap(t.width,t.height):new ap,o=n.joined(1)[0];if(!o)return i;var a=new Up({text:o,fontIdentifier:r,fontSize:50}).getSizeValue(),s=e?2:1;i.scale(s,1);var l=i.clone().fitInWidthWithOther(this._getFrame().width,a);return l.scale(1/s,1),l}},{key:"_getTextFrame",value:function(){var t=ay(uy(o.prototype),"_getTextFrame",this).call(this).clone(),e=this.getImageSize(),n=this.getRightImage(),r=this.getImagePosition();return n?(t.x+=e.width,t.width-=2*e.width):r===o.ImagePosition.Left&&(t.x+=e.width),t}},{key:"_calculateLayoutElements",value:function(){var t=ay(uy(o.prototype),"_calculateLayoutElements",this).call(this),e=this._getFrame(),n=this.getRightImage(),r=this.getImageSize(),i=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),l=new Up({text:"stickerClock",fontIdentifier:s});l.fitWidth(this._getTextFrame().width);var u=(new fy).set(e.x,e.y,r.width,r.height);if(n||i!==o.ImagePosition.Right||(u.x+=a.width),t.push(new eh({text:"stickerClock",frame:u,font:l})),n){var c=t[0];if(c){var f=u.clone();f.translate(c.getFrame().width+f.width,0),t.push(new eh({text:"stickerClock",frame:f,font:l}))}}return t}},{key:"render",value:function(t){var e=this._getLayoutElements(),n=this.getAttributes(),r=n.getTextColor(),i=this.getLeftImage(),o=this.getRightImage(),a=e[0],s=e[1],l=a.serializeOptions().font,u=this._getTextFrameForElement(a);if(l.draw(t,u.x,u.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),i){var c=s.getFrame();t.drawImage(i,c.x,c.y,c.width,c.height),Uh(t,c,r,"source-atop")}if(e.length>2){var f=e[2].getFrame().clone();t.drawImage(o,f.x,f.y,f.width,f.height),Uh(t,f,r,"source-atop")}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(ch);function hy(t){return(hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dy(Object(n),!0).forEach((function(e){wy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function my(t,e,n){return(my="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=by(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vy(t,e){return(vy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _y(t,e){return!e||"object"!==hy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function by(t){return(by=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}cy(py,"ImagePosition",{Left:"LEFT",right:"RIGHT"}),py.prototype.availableOptions=iy(iy({},ch.prototype.availableOptions),{},{leftImage:{type:o.OptionType.IMAGE,default:null},rightImage:{type:o.OptionType.IMAGE,default:null},imagePosition:{type:o.OptionType.STRING,default:py.ImagePosition.Left,available:[py.ImagePosition.Left,py.ImagePosition.Right]}});var xy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vy(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=by(n);if(r){var i=by(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _y(this,t)});function a(){return gy(this,a),i.apply(this,arguments)}return(e=[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%n.length]}},{key:"_minimumNumberOfLines",value:function(t){return Math.max(Math.floor(.7*my(by(a.prototype),"_minimumNumberOfLines",this).call(this,t)),1)}},{key:"_maximumNumberOfLines",value:function(t){return Math.max(Math.floor(t.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(t,e,n,r){return this._createSingleRow(a.RowType.Single,t,n,r)}},{key:"_createSingleRow",value:function(t,e,n,r){var i=r.getFontIdentifier(),s="imgly_font_amberlight"===i||"imgly_font_handycheera_regular"===i?(new np).set(e.getLowerCase()):e;switch(t){case a.RowType.Single:return new ch({words:s,width:n,attributes:r});case a.RowType.SingleImage:return new py({words:s,width:n,attributes:r});default:return o.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '".concat(t,"'")),null}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(yd);function Oy(t){return(Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ky(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sy(Object(n),!0).forEach((function(e){Dy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ty(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cy(t,e){return(Cy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ey(t,e){return!e||"object"!==Oy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ry(t){return(Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}wy(xy,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),wy(xy,"defaultBanderoles",[jh.Celebrate1,jh.Celebrate2]),wy(xy,"identifier","imgly_text_design_celebrate"),wy(xy,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"}),xy.prototype.availableOptions=yy(yy({},yd.prototype.availableOptions),{},{relativeLineSpacing:{type:o.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:o.OptionType.ARRAY,default:xy.defaultFontIdentifiers},banderoles:{type:o.OptionType.ARRAY,default:xy.defaultBanderoles}});var Py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cy(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ry(n);if(r){var i=Ry(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ey(this,t)});function o(){var t;Ty(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).setSize(new ap(t.getWidth(),t.getHeight())),t}return(e=[{key:"_getImageFrame",value:function(){var t=this._getTextFrame().clone(),e=this.getImage();if(this.getDrawingModeAspectFit()&&e){var n=Math.min(t.width/e.width,t.height/e.height),r=e.width*n,i=e.height*n;t.x+=(t.width-r)/2,t.y+=(t.height-i)/2,t.width=r,t.height=i}return t}},{key:"_calculateLayoutElements",value:function(){return[new eh({text:"",frame:this._getImageFrame(),font:new Up})]}},{key:"render",value:function(t){var e=this.getImage(),n=this._getImageFrame(),r=this.getAttributes().getTextColor();Zh(t,e,n,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function Iy(t){return(Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ay(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ay(Object(n),!0).forEach((function(e){Hy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jy(t){return function(t){if(Array.isArray(t))return My(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return My(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?My(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function My(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function By(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zy(t,e,n){return(zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ly(t,e){return(Ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ny(t,e){return!e||"object"!==Iy(e)&&"function"!=typeof e?Uy(t):e}function Uy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wy(t){return(Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Dy(Py,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"}),Py.prototype.availableOptions=ky(ky({},Sp.prototype.availableOptions),{},{words:{type:o.OptionType.OBJECT,default:new np},height:{type:o.OptionType.NUMBER,default:0},image:{type:o.OptionType.IMAGE,default:null},imagePath:{type:o.OptionType.STRING,default:Py.RowImages.decorative1},drawingModeAspectFit:{type:o.OptionType.BOOLEAN,default:!1},attributes:{type:o.OptionType.CONFIGURABLE,default:new vp}});var Gy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ly(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wy(n);if(r){var i=Wy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ny(this,t)});function a(){var t;By(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Hy(Uy(t=i.call.apply(i,[this].concat(n))),"getImagePaths",(function(){var e=t.getBanderoles();return[].concat(jy(e&&e.map((function(t){return t.getImagePath()}))||[]),jy(t._celebrateTypes))})),Hy(Uy(t),"onImagesLoaded",(function(){var e=t.getBanderoles();e&&e.forEach((function(t){var e=Ip.getImage(t.getImagePath());e?t.setImage(e):o.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(t.getImagePath(),"'"))}))})),t._celebrateTypes=[Py.RowImages.celebrate1,Py.RowImages.celebrate2,Py.RowImages.celebrate3],t._exclusiveFont=null,t._typeRandomizer=new Zf(0),t._useMaskedRandomizer=new Zf(0),t._seedPool.push(t._typeRandomizer),t._seedPool.push(t._useMaskedRandomizer),t}return(e=[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%(n.length-1)]}},{key:"_layoutRows",value:function(t,e){var n=this._typeRandomizer.pickNext(this._celebrateTypes),r=Ip.getImage(n);r||o.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '".concat(n,"'"));var i=new Py({width:e,height:.5*e,drawingModeAspectFit:!0,image:r}).layout(),s=zy(Wy(a.prototype),"_layoutRows",this).call(this,t,e);return[i].concat(jy(s))}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=t.countNumberOfCharacters();i<4&&r.setFontIdentifier("imgly_font_rasa_regular");var o=this._useMaskedRandomizer.nextBool(2,1);return i<13&&o&&!this.getHasMaskedText()?this._layoutRow(t,n,r,!0):zy(Wy(a.prototype),"_randomLayoutRow",this).call(this,t,e,n,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(xy);function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xy(t,e){return(Xy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yy(t,e){return!e||"object"!==Vy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Hy(Gy,"identifier","imgly_text_design_celebrate_simple"),Hy(Gy,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]),Gy.prototype.availableOptions=Fy(Fy({},xy.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Gy.defaultFontIdentifiers}});var Ky=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qy(n);if(r){var i=qy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Yy(this,t)});function a(){return Zy(this,a),i.apply(this,arguments)}return(e=[{key:"render",value:function(t,e,n,r,i){o.Log.warn("TextDesignBackground#render: Abstract class")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $y(t,e){return($y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tg(t,e){return!e||"object"!==Qy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eg(t){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ky.prototype.availableOptions={};var ng=o.Math.Rectangle,rg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$y(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=eg(n);if(r){var i=eg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tg(this,t)});function o(){return Jy(this,o),i.apply(this,arguments)}return(e=[{key:"getImagePaths",value:function(){var t=this._options;return[t.topImagePath,t.bottomImagePath,t.leftImagePath,t.rightImagePath].filter((function(t){return""!==t}))}},{key:"render",value:function(t,e,n,r,i){var o=n.clone().scale(e.width),a=e.rectangle(0,0),s=Ip.getImage(this.getTopImagePath()),l=Ip.getImage(this.getLeftImagePath()),u=Ip.getImage(this.getRightImagePath()),c=Ip.getImage(this.getBottomImagePath());if(s){var f=s.width/s.height,p=o.top*this.getTopImageFillRate(),h=p*f,d=a.width/2,y=new ng(d-h/2,0,h,p);Zh(t,s,y,r)}if(c){var g=c.width/c.height,m=o.bottom*this.getBottomImageFillRate(),v=m*g,_=a.width/2,b=new ng(_-v/2,a.height-m,v,m);Zh(t,c,b,r)}if(l){var w=l.width/l.height,x=o.left*this.getLeftImageFillRate(),O=x/w,S=a.height/2,k=new ng(0,S-O/2,x,O);Zh(t,l,k,r)}if(u){var T=u.width/u.height,C=o.right*this.getRightImageFillRate(),E=C/T,R=a.height/2-E/2,D=new ng(a.width-C,R,C,E);Zh(t,u,D,r)}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Ky);function ig(t){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function og(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ag(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?og(Object(n),!0).forEach((function(e){pg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lg(t,e,n){return(lg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ug(t,e){return(ug=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cg(t,e){return!e||"object"!==ig(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fg(t){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}rg.prototype.availableOptions={topImagePath:{type:o.OptionType.STRING,default:""},leftImagePath:{type:o.OptionType.STRING,default:""},bottomImagePath:{type:o.OptionType.STRING,default:""},rightImagePath:{type:o.OptionType.STRING,default:""},topImageFillRate:{type:o.OptionType.NUMBER,default:1},leftImageFillRate:{type:o.OptionType.NUMBER,default:1},bottomImageFillRate:{type:o.OptionType.NUMBER,default:1},rightImageFillRate:{type:o.OptionType.NUMBER,default:1}},rg.Backgrounds=[new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new rg({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})];var hg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ug(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fg(n);if(r){var i=fg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cg(this,t)});function a(){var t;sg(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.1,.1,.1,.1),t._alreadyContainsARowWithScriptFont=!1,t._backgroundsRandomizer=new Zf(0),t._seedPool.push(t._backgroundsRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return o.Utils.Array.flatten(rg.Backgrounds.map((function(t){return t.getImagePaths()})))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(rg.Backgrounds)}},{key:"generateLayoutData",value:function(t,e){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),lg(fg(a.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_modifiedText",value:function(t){return lg(fg(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_fontForRow",value:function(t,e){var n=lg(fg(a.prototype),"_fontForRow",this).call(this,t,e);return"imgly_font_petit_formal_script"===n&&(this._alreadyContainsARowWithScriptFont&&(n="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),n}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i="imgly_font_petit_formal_script"===r.getFontIdentifier();return new ch({words:i?(new np).set(t.getLowerCase()):t,width:n,attributes:r})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function dg(t){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yg(Object(n),!0).forEach((function(e){wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vg(t,e){return(vg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _g(t,e){return!e||"object"!==dg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bg(t){return(bg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pg(hg,"identifier","imgly_text_design_equal_width"),pg(hg,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]),hg.prototype.availableOptions=ag(ag({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:hg.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025}});var xg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bg(n);if(r){var i=bg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _g(this,t)});function o(){var t;mg(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf,t}return(e=[{key:"_getBackground",value:function(){return null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(hg);function Og(t){return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kg(t,e){return(kg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tg(t,e){return!e||"object"!==Og(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cg(t){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}wg(xg,"defaultFontIdentifiers",["imgly_font_ultra"]),wg(xg,"identifier","imgly_text_design_equal_width_fat"),xg.prototype.availableOptions=gg(gg({},hg.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:xg.defaultFontIdentifiers}});var Eg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cg(n);if(r){var i=Cg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tg(this,t)});function o(){return Sg(this,o),i.apply(this,arguments)}return(e=[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function Rg(t){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dg(Object(n),!0).forEach((function(e){Ig(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ig(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ag(t,e,n){return(Ag="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Fg(t,e){return(Fg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jg(t,e){return!e||"object"!==Rg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mg(t){return(Mg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Eg.prototype.availableOptions={imagePath:{type:o.OptionType.STRING,default:""},minimumHeightRatio:{type:o.OptionType.NUMBER,default:0},sizeToFitContent:{type:o.OptionType.BOOLEAN,default:!0},capInsets:{type:o.OptionType.OBJECT,default:new Jf},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf}},Eg.Box=new Eg({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new Jf(.1,.1,.1,.1)}),Eg.Badge1=new Eg({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Eg.Badge2=new Eg({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Eg.Badge3=new Eg({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Eg.Badge4=new Eg({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Eg.SpeechBubble1=new Eg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new Jf(.04,.07,.12,.07),capInsets:new Jf(57,171,123,51)}),Eg.SpeechBubble2=new Eg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new Jf(.04,.07,.12,.07),capInsets:new Jf(6,105,87,15)}),Eg.SpeechBubble3=new Eg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new Jf(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),Eg.SpeechBubble4=new Eg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new Jf(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),Eg.SpeechBubble5=new Eg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new Jf(.114892823,.27,.15984926,.27)}),Eg.Watercolor1=new Eg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new Jf(.2,.25,.2,.25)}),Eg.Watercolor2=new Eg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new Jf(.08,.25,.3,.25)}),Eg.Watercolor3=new Eg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new Jf(.1,.2,.15,.2)});var Bg=o.Math.Vector2,zg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fg(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mg(n);if(r){var i=Mg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jg(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._textOptions={},e._createCanvas(),e}return(e=[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Pf(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ag(Mg(a.prototype),"setOption",this).call(this,t,e,n,r),"fontIdentifier"!==t||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=Ip.getVariation(this.getFontIdentifier());return t||o.Log.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(t),t}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=Pg(Pg({},this._options),t),r=n.fontSize,i=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=i.serializeOptions(),l=s.fontStyle,u=s.fontWeight,c=s.fontFamily;e.font=l+" "+u+" "+r+'px "'+c+'"',e.fillStyle=o,e.textBaseline="top",e.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(t,e){var n=this.getAlignment(),r=new Bg(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y)}},{key:"update",value:function(){var t=this.calculateFontStyles();if(t){var e=this._calculateText(t),n=e.dimensions,r=e.lines;this._dimensions=n,this._renderText(n,r,t)}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),t.drawImage(this._canvas,e,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(t,e,n){this._canvas.width=t.x,this._canvas.height=t.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var r=0;r<e.length;r++){var i=e[r];this._renderTextLine(i,n.topPadding+n.lineHeight*r)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var t=this.getFontFamily(),e=this.getFontSize(),n=this.getAbsoluteTextHeight(),r={fontFamily:t,fontSize:e,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=Pg({},r),r}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var t=this.getFontSize(),e=this.getTextMetrics();if(e){var n=1/e.unitsPerEm*t,r=e.ascender*n,i=e.descender*n;return r+Math.abs(i)}return t*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(t){this._applyTextOptions(t,this._context);for(var e=new Bg,n=this.getText().split("\n"),r=0;r<n.length;r++){var i=n[r];e.x=Math.max(e.x,this._context.measureText(i).width)}var o=t.lineHeight;return e.y=n.length*o,{dimensions:e,lines:n}}},{key:"getDimensions",value:function(){var t=this.calculateFontStyles();return this._calculateText(t).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var t=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),t.y}},{key:"fitMaxWidth",value:function(){var t=this.getDimensions().x,e=this.getMaxWidth()/t;this.setFontSize(this.getFontSize()*e),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(t){this.setMaxWidth(t.width),this.setMaxHeight(t.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var t=this.getDimensions();return new ap(t.x,t.y)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Lg(t){return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ug(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ng(Object(n),!0).forEach((function(e){Wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ng(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gg(t,e){return(Gg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vg(t,e){return!e||"object"!==Lg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zg(t){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}zg.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:o.OptionType.OBJECT,default:null},lineHeight:{type:o.OptionType.NUMBER,default:1},fontSize:{type:o.OptionType.NUMBER,default:22},textColor:{type:o.OptionType.STRING,default:"black"},strokeStyle:{type:o.OptionType.STRING,default:"black"},outlineWidth:{type:o.OptionType.NUMBER,default:0},textBaseline:{type:o.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:o.OptionType.BOOLEAN,default:!0},maxWidth:{type:o.OptionType.NUMBER,default:100},maxHeight:{type:o.OptionType.NUMBER,default:0},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]}};var Xg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zg(n);if(r){var i=Zg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Vg(this,t)});function o(){return Hg(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){var t=this.getWords(),e=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),r=this.getImageInsets(),i=new Up({text:t.getWord(0),fontIdentifier:n});i.fitWidth(e.width);var o=new eh({text:t.getWord(0),frame:e,font:i});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=r.top+o.getFrame().height+r.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(t){var e=this.getWords().getWord(0),n=this.getAttributes(),r=n.getFontIdentifier(),i=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new zg({text:e,fontIdentifier:r,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var l=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(l+=i.top+i.bottom);var u=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=u.height/2-l/2+i.top;else switch(c){case"left":o.y=u.height-l-i.bottom;break;case"center":o.y=u.height/2-l/2+l*this.getCenterOffset(),o.x=(u.width-o.width)/2;break;case"right":o.x=u.width-o.width-i.right}return o}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach((function(n){var r=n.serializeOptions(),i=r.text,o=r.frame,a=e.getAttributes(),s=a.getFontIdentifier(),l=new zg({text:i,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=e._getTextFrameForElement(n),l.fitInFrame(o),l.draw(t,o.x,o.y)})),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(nd);function Yg(t){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qg(Object(n),!0).forEach((function(e){nm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jg(t,e,n){return(Jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=em(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $g(t,e){return($g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tm(t,e){return!e||"object"!==Yg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function em(t){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xg.prototype.availableOptions=Ug(Ug({},nd.prototype.availableOptions),{},{centerOffset:{type:o.OptionType.NUMBER,default:0},sizeToFitContent:{type:o.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:o.OptionType.NUMBER,default:.95},rowScaleFactor:{type:o.OptionType.NUMBER,default:1},minimumHeight:{type:o.OptionType.NUMBER,default:0},centeredVertically:{type:o.OptionType.BOOLEAN,default:!1}});var rm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$g(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=em(n);if(r){var i=em(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tm(this,t)});function a(){var t;Qg(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._rowType=Eg.Box,t._alignmentRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._alignmentRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[Eg.Box.getImagePath()]}},{key:"_modifiedText",value:function(t){return Jg(em(a.prototype),"_modifiedText",this).call(this,t).toLowerCase()}},{key:"_modifiedLines",value:function(t){var e=new np;return e.set([t.reduce((function(t,e){return"".concat(t).concat(""===t?"":"\n").concat(e.joined(1)[0])}),"")]),[e]}},{key:"_layoutRows",value:function(t,e){var n=Jg(em(a.prototype),"_layoutRows",this).call(this,t,e),r=n[0];if(r&&this.getSquareLayout()){var i=r.getSize();i.height=i.width}return n}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||a.ValidAlignments)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this.getAlignment(),a=this._rowType,s=Ip.getImage(a.getImagePath());r.setAlignment(i);var l=new Xg({words:t,width:n,attributes:r,image:s,imageInsets:a.insetsForWidth(n),capInsets:a.getCapInsets(),backgroundColor:o.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===Eg.Box&&(l.serverImageSmoothingFix=!0);var u=l.getSize();return this.getSquareLayout()?u.height=u.width:u.height=Math.max(u.height,u.width*a.getMinimumHeightRatio()),l}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function im(t){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function om(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function am(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?om(Object(n),!0).forEach((function(e){pm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lm(t,e,n){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function um(t,e){return(um=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cm(t,e){return!e||"object"!==im(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fm(t){return(fm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nm(rm,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),nm(rm,"Alignment",{Left:"left",Center:"center",Right:"right"}),nm(rm,"ValidAlignments",[rm.Alignment.Left,rm.Alignment.Center,rm.Alignment.Right]),nm(rm,"identifier","imgly_text_design_masked"),rm.prototype.availableOptions=Kg(Kg({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:rm.defaultFontIdentifiers},squareLayout:{type:o.OptionType.BOOLEAN,default:!0}});var hm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&um(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fm(n);if(r){var i=fm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cm(this,t)});function o(){var t;sm(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Eg.Badge1,Eg.Badge2,Eg.Badge3,Eg.Badge4],t._rowTypesRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._rowTypesRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(t){return t.getImagePath()}))}},{key:"_randomLayoutRow",value:function(t,e,n,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);var i=lm(fm(o.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.set({textScaleFactor:.9}),i}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(rm);function dm(t){return(dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ym(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ym(Object(n),!0).forEach((function(e){xm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ym(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vm(t,e,n){return(vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _m(t,e){return(_m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bm(t,e){return!e||"object"!==dm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wm(t){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pm(hm,"defaultFontIdentifiers",["imgly_font_campton_bold"]),pm(hm,"identifier","imgly_text_design_masked_badge"),pm(hm,"ValidAlignments",[rm.Alignment.Center]),hm.prototype.availableOptions=am(am({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:hm.defaultFontIdentifiers}});var Om=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_m(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wm(n);if(r){var i=wm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return bm(this,t)});function o(){var t;mm(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Eg.SpeechBubble1,Eg.SpeechBubble3],t._rowTypesRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._rowTypesRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(t){return t.getImagePath()}))}},{key:"_rowTypes",value:function(t){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(t,e,n,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(t)),r.setLineSpacing(.9);var i=vm(wm(o.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.set({textScaleFactor:1,minimumHeight:n*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),i}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(rm);function Sm(t){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function km(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?km(Object(n),!0).forEach((function(e){Pm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):km(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Em(t,e){return(Em=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rm(t,e){return!e||"object"!==Sm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dm(t){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}xm(Om,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),xm(Om,"identifier","imgly_text_design_masked_speech_bubble"),Om.prototype.availableOptions=gm(gm({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Om.defaultFontIdentifiers},squareLayout:{type:o.OptionType.BOOLEAN,default:!1},alignment:{type:o.OptionType.STRING,default:"left",available:rm.ValidAlignments}});var Im=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Em(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dm(n);if(r){var i=Dm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Rm(this,t)});function o(){var t;Cm(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Eg.SpeechBubble2,Eg.SpeechBubble4,Eg.SpeechBubble2,Eg.SpeechBubble4,Eg.SpeechBubble5],t._possibleRowTypesForMin15=t._possibleRowTypes.slice(0,2),t._possibleRowTypesForMax14=t._possibleRowTypes.slice(2),t}return(e=[{key:"_rowTypes",value:function(t){return t.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Om);function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fm(Object(n),!0).forEach((function(e){Um(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bm(t,e,n){return(Bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zm(t,e){return(zm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lm(t,e){return!e||"object"!==Am(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Um(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Pm(Im,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),Pm(Im,"identifier","imgly_text_design_masked_speech_bubble_comic"),Im.prototype.availableOptions=Tm(Tm({},Om.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Im.defaultFontIdentifiers}});var Wm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zm(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nm(n);if(r){var i=Nm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Lm(this,t)});function a(){return Mm(this,a),i.apply(this,arguments)}return(e=[{key:"_modifiedText",value:function(t){return Bm(Nm(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this._alignmentRandomizer.pickNext(rm.ValidAlignments);return r.setAlignment(i),new Xg({words:t,width:n,attributes:r,image:null,backgroundColor:o.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(rm);function Hm(t){return(Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gm(Object(n),!0).forEach((function(e){Km(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xm(t,e){return(Xm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ym(t,e){return!e||"object"!==Hm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qm(t){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Km(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Um(Wm,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),Um(Wm,"identifier","imgly_text_design_multiline"),Wm.prototype.availableOptions=jm(jm({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Wm.defaultFontIdentifiers}});var Qm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xm(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=qm(e);if(n){var i=qm(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ym(this,t)});function i(){var t;Zm(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._possibleRowTypes=[Eg.Watercolor1,Eg.Watercolor2,Eg.Watercolor3],t}return i}(Om);function Jm(t){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$m(Object(n),!0).forEach((function(e){uv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ev(t){return function(t){if(Array.isArray(t))return rv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||nv(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nv(t,e){if(t){if("string"==typeof t)return rv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rv(t,e):void 0}}function rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ov(t,e,n){return(ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function av(t,e){return(av=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sv(t,e){return!e||"object"!==Jm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lv(t){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Km(Qm,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),Km(Qm,"identifier","imgly_text_design_watercolor"),Qm.prototype.availableOptions=Vm(Vm({},Om.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Qm.defaultFontIdentifiers},alignment:{type:o.OptionType.STRING,default:rm.Alignment.Center,available:rm.ValidAlignments}});var cv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&av(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lv(n);if(r){var i=lv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return sv(this,t)});function o(){var t;iv(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(0,0,0,0),t._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],t._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],t._lineCount=0,t._decorativeRowCreated=!1,t._useImageRowRandomizer=new Zf(0),t._rowTypeRandomizer=new Zf(0),t._lineDecorativeTypeRandomizer=new Zf(0),t._seedPool.push(t._useImageRowRandomizer),t._seedPool.push(t._rowTypeRandomizer),t._seedPool.push(t._lineDecorativeTypeRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[].concat(ev(o.DecoratorImages),ev(o.RowImages))}},{key:"_fontForRow",value:function(t,e){var n=this,r=e.countNumberOfCharacters(),i=this.getFontIdentifiers();return r<4?i=i.filter((function(t){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(t)<0})):r<5&&(i=i.filter((function(t){return n._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(t)<0}))),i[t%i.length]}},{key:"_modifiedText",value:function(t){return ov(lv(o.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_modifiedLines",value:function(t){return this._lineCount=t.length,t}},{key:"generateLayoutData",value:function(t,e){return this._decorativeRowCreated=!1,ov(lv(o.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=t;switch(r.getFontIdentifier()){case"imgly_font_wolesbro":i=(new np).set(t.getLowerCase());break;case"imgly_font_permanent_marker":i=(new np).set(t.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===e||e===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new ch({words:i,width:n,attributes:r});this._decorativeRowCreated=!0;var a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),2!==n.length);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t)||nv(t,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._randomDecoratorImages()),s=a[0],l=a[1];return new py({words:t,width:n,attributes:r,leftImage:s,rightImage:l})}},{key:"_layoutRows",value:function(t,e){var n=ov(lv(o.prototype),"_layoutRows",this).call(this,t,e);if(!this.getDecorationsVisible())return n;var r=.0625*e,i=new Py({width:e,height:r,image:Ip.getImage(this._rowTypeRandomizer.pickNext(o.RowImages))}).layout(),a=new Py({width:e,height:r,image:Ip.getImage(this._rowTypeRandomizer.pickNext(o.RowImages))}).layout();return[i].concat(ev(n),[a])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?o.DecoratorImages.slice(0,2).map((function(t){return Ip.getImage(t)})):o.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(vh);function fv(t){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dv(t,e,n){return(dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yv(t,e){return(yv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gv(t,e){return!e||"object"!==fv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}uv(cv,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),uv(cv,"identifier","imgly_text_design_sunshine"),uv(cv,"RowImages",[Py.RowImages.decorative1,Py.RowImages.decorative2,Py.RowImages.decorative3,Py.RowImages.decorative4]),uv(cv,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]),cv.prototype.availableOptions=tv(tv({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:cv.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:o.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:o.OptionType.BOOLEAN,default:!1}});var vv,_v,bv,wv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mv(n);if(r){var i=mv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return gv(this,t)});function o(){var t;hv(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(0,.3,0,.3),t}return(e=[{key:"_layoutRows",value:function(t,e){var n=dv(mv(o.prototype),"_layoutRows",this).call(this,t,e);if(!this.getDecorationsVisible())return n;var r=new Py({width:e,height:25,image:Ip.getImage(this._rowTypeRandomizer.pickNext(cv.RowImages))}).layout(),i=new Py({width:e,height:25,image:Ip.getImage(this._rowTypeRandomizer.pickNext(cv.RowImages))}).layout();return[r].concat(function(t){return function(t){if(Array.isArray(t))return pv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[i])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(cv);function xv(t){return(xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ov(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sv(t,e){return(Sv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t,e){return!e||"object"!==xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tv(t){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}bv="imgly_text_design_sunshine-v3_1_0",(_v="identifier")in(vv=wv)?Object.defineProperty(vv,_v,{value:bv,enumerable:!0,configurable:!0,writable:!0}):vv[_v]=bv;var Cv=o.Math.Rectangle,Ev=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tv(n);if(r){var i=Tv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return kv(this,t)});function o(){return Ov(this,o),i.apply(this,arguments)}return(e=[{key:"getContentFrame",value:function(){var t=this.getFrame().clone(),e=.1*t.width;return t.insetBy(e,e)}},{key:"intersects",value:function(t){return this.getFrame().intersects(t.getFrame())}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dv(Object(n),!0).forEach((function(e){Iv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Iv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Av(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fv(t,e){return(Fv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jv(t,e){return!e||"object"!==Rv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mv(t){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ev.prototype.availableOptions={frame:{type:o.OptionType.OBJECT,default:new Cv}};var Bv=o.Math.Rectangle,zv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mv(n);if(r){var i=Mv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jv(this,t)});function o(){var t;Av(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._MAX_TRIES=1e3,t._PRECISION=1e3,t}return(e=[{key:"render",value:function(t,e,n,r,i){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var l=e.width/e.height,u=new Bv(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*l),this._PRECISION,this._PRECISION);u.width-=u.x+Math.round(n.right*this._PRECISION),u.height-=u.y+Math.round(n.bottom*this._PRECISION*l);for(var c=[],f=0,p=0;f<this.getParticleCount()&&p<this._MAX_TRIES;){var h=s/2,d=Math.round(h*this._PRECISION),y=Math.round(h*this._PRECISION*l),g=Math.floor(this._PRECISION)-d,m=Math.floor(this._PRECISION)-y,v=i.nextInRange(d,g),_=i.nextInRange(y,m),b=new Bv(v-d,_-y,2*d,2*y);b.intersects(u)||this.hasCollision(c,b)||(c.push(new Ev({frame:b})),f+=1),p+=1}for(var w=0;w<c.length;w++){var x=c[w],O=i.pickNext(a),S=Ip.getImage(O),k=i.nextInRange(140,230)/255,T=e.width/this._PRECISION,C=e.height/this._PRECISION,E=x.getContentFrame();E.x*=T,E.y*=C,E.width*=T,E.height*=C;var R=r.clone();R.a=k,Zh(t,S,E,R,"source-atop")}}}},{key:"hasCollision",value:function(t,e){for(var n=0;n<t.length;n++)if(e.intersects(t[n].getFrame()))return!0;return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Ky);function Lv(t){return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uv(Object(n),!0).forEach((function(e){Xv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gv(t,e){return(Gv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vv(t,e){return!e||"object"!==Lv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zv(t){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}zv.prototype.availableOptions=Pv(Pv({},Ky.prototype.availableOptions),{},{particleCount:{type:o.OptionType.NUMBER,default:50},relativeParticleSize:{type:o.OptionType.NUMBER,default:.08},imagePaths:{type:o.OptionType.ARRAY,default:[]}});var Yv,qv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gv(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Zv(e);if(n){var i=Zv(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Vv(this,t)});function i(){return Hv(this,i),r.apply(this,arguments)}return i}(zv);function Kv(t){return(Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jv(Object(n),!0).forEach((function(e){i_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function t_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e_(t,e){return(e_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n_(t,e){return!e||"object"!==Kv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r_(t){return(r_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xv(qv,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]),qv.prototype.availableOptions=Wv(Wv({},zv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:(Yv=qv.Images,function(t){if(Array.isArray(t))return Nv(t)}(Yv)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(Yv)||function(t,e){if(t){if("string"==typeof t)return Nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nv(t,e):void 0}}(Yv)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},relativeParticleSize:{type:o.OptionType.NUMBER,default:.12}});var o_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&e_(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=r_(e);if(n){var i=r_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return n_(this,t)});function i(){return t_(this,i),r.apply(this,arguments)}return i}(zv);function a_(t){return(a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l_(Object(n),!0).forEach((function(e){d_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f_(t,e){return(f_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p_(t,e){return!e||"object"!==a_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h_(t){return(h_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}i_(o_,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]),o_.prototype.availableOptions=$v($v({},zv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:function(t){return function(t){if(Array.isArray(t))return Qv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Qv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o_.Images)},relativeParticleSize:{type:o.OptionType.NUMBER,default:.12}});var y_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f_(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=h_(e);if(n){var i=h_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return p_(this,t)});function i(){return c_(this,i),r.apply(this,arguments)}return i}(zv);function g_(t){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m_(Object(n),!0).forEach((function(e){k_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function __(t){return function(t){if(Array.isArray(t))return b_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return b_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b_(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x_(t,e){return(x_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O_(t,e){return!e||"object"!==g_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S_(t){return(S_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}d_(y_,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]),y_.prototype.availableOptions=u_(u_({},zv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:function(t){return function(t){if(Array.isArray(t))return s_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s_(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(y_.Images)}});var T_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S_(n);if(r){var i=S_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return O_(this,t)});function a(){var t;w_(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.3,.3,.3,.3),t._backgroundRandomizer=new Zf(0),t._decoTypeRandomizer=new Zf(0),t._seedPool.push(t._backgroundRandomizer),t._seedPool.push(t._decoTypeRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[].concat(__(cv.RowImages),__(o.Utils.Array.flatten(a.Backgrounds.map((function(t){return t.getImagePaths()})))),__(a.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(a.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return a.DecoratorImages.slice(0,2).map((function(t){return Ip.getImage(t)}));case 1:case 2:return a.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}));default:return o.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),a.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}))}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(cv);function C_(t){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E_(Object(n),!0).forEach((function(e){M_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I_(t,e,n){return(I_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function A_(t,e){return(A_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F_(t,e){return!e||"object"!==C_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j_(t){return(j_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}k_(T_,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),k_(T_,"identifier","imgly_text_design_particles"),k_(T_,"Backgrounds",[new qv,new o_,new y_]),k_(T_,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]),T_.prototype.availableOptions=v_(v_({},cv.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:T_.defaultFontIdentifiers},decorationsVisible:{type:o.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:o.OptionType.BOOLEAN,default:!0}});var B_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j_(n);if(r){var i=j_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return F_(this,t)});function a(){var t;P_(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.1,0,0,0),t._rowTypeRandomizer=new Zf(0),t._seedPool.push(t._rowTypeRandomizer),t}return(e=[{key:"_modifiedText",value:function(t){return I_(j_(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=I_(j_(a.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.setShearingAngle(this.getShearingAngle()),i}},{key:"_layoutRows",value:function(t,e){var n=I_(j_(a.prototype),"_layoutRows",this).call(this,t,e),r=o.Utils.values(jd.FormType),i=new jd({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),s=new jd({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout();return[i].concat(function(t){return function(t){if(Array.isArray(t))return D_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return D_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D_(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[s])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);M_(B_,"defaultFontIdentifiers",["imgly_font_campton_bold"]),M_(B_,"identifier","imgly_text_design_rotated"),B_.prototype.availableOptions=R_(R_({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:B_.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3},shearingAngle:{type:o.OptionType.NUMBER,default:-.1}});var z_=o.Math.Rectangle,L_=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Zf}var e;return(e=[{key:"createLayout",value:function(t,e,n){this._layout=t,this._text=e,this._seed=n,t.seed(n),this._layoutData=t.generateLayoutData(e,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(o.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(t,e,n,r){var i=this,a=this._layoutData;if(this._layoutData){var s=new ap(1e3,1e3/e.aspect()),l=e.width/1e3,u=a.getRelativeInsets().clone().scale(s.width),c=a.getRelativeLineSpacing()*s.width,f=u.top;t.save(),this.randomizer.seed(this._seed);var p=a.getBackground();p&&p.render(t,e,a.getRelativeInsets(),r?o.Color.WHITE:n,this.randomizer),t.scale(l,l),a.getRows().forEach((function(e){t.save();var a=e.getAttributes();if(t.transform(1,e.getShearingAngle(),0,1,u.left,f),a.setTextColor(r?o.Color.WHITE:n.clone()),a.setTintColor(r?o.Color.WHITE:n.clone()),(e instanceof nd||e instanceof Xg)&&(e.setBackgroundColor(r?o.Color.WHITE:n.clone()),e.setIsUsedInInvertedLayout(r)),i._debugMode&&(e._debugMode=!0),e.willRender(t),e.render(t),e.didRender(t),i._debugMode){var s=e._getFrame(),l=e._getTextFrame();Hh(t,s,o.Color.GREEN),Hh(t,l,o.Color.BLUE),e._getLayoutElements().forEach((function(n){var r=n.getFrame(),i=e._getTextFrameForElement(n);Hh(t,r,new o.Color(1,1,0)),Hh(t,i,new o.Color(0,1,1))}))}f+=e.getSize().height+c,t.restore()})),this._debugMode&&Hh(t,new z_(0,0,s.width,s.height),o.Color.RED),t.restore()}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function N_(t){return(N_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U_(t,e,n){return(U_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function W_(t,e){return(W_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H_(t,e){return!e||"object"!==N_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G_(t){return(G_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V_=o.Math.Vector2,Z_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G_(n);if(r){var i=G_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return H_(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,e))._isDisposed=!1,n._renderer=new L_,n._canvas=o.Utils.createCanvas(),n._context=n._canvas.getContext("2d"),n._texture=o.Engine.Texture.fromCanvas(n._canvas),n._sprite.setTexture(n._texture),n._aspect=1,n._isLayoutDirty=!0,n.getSeed()<0&&n.setSeed(Zf.TimeSeed()),n}return(e=[{key:"seed",value:function(t){this.setSeed(t||Zf.TimeSeed()),this._isLayoutDirty=!0}},{key:"_updateLayout",value:function(){var t=this.getLayout();return t?(this._renderer.createLayout(t,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(t){U_(G_(a.prototype),"applyTransform",this).call(this,t);var e={};this._options.dimensions&&(e.width=t.applyToRelativeSize(this.getWidth())),this.set(e,!1)}},{key:"applyFlip",value:function(t){U_(G_(a.prototype),"applyFlip",this).call(this,t);var e=this._options.rotation;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}},{key:"update",value:function(t,e){var n=this._isLayoutDirty;if(!(this._isDisposed||n&&!this._updateLayout())){var r=this.getWidth()*e.min()/t.getTextureScale(),i=r/this._aspect,s=new V_(r,i),l=new V_(Math.round(2*r),Math.round(2*i)).clamp(new V_(1,1),new V_(1/0,1/0)),u=t.getRenderer(),c=u.getMaxDimensions()||1/0;l.x>c&&(l.x=c,l.y=Math.round(l.x/this._aspect)),l.y>c&&(l.y=c,l.x=Math.round(l.y*this._aspect));var f=o.Utils.ensureCanvasDimensions(this._canvas,l);(n||f)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new ap(l.x,l.y),this.getColor(),this.getInverted()),this.setDimensions(s),this._texture.getBaseTexture().update(),u.isOfType(o.RendererType.WEBGL)&&u.updateTexture(this._texture.getBaseTexture())),U_(G_(a.prototype),"update",this).call(this,t,e),this._applyFlip()}}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}},{key:"_optionEquals",value:function(t,e){if("layout"===t){var n=this._options.layout;return!(!n&&e||!e&&n||!e.constructor||!n.constructor||n.constructor.identifier!==e.constructor.identifier)}return U_(G_(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&this.getPadding()<0){var n=t.indexOf("padding");n>-1&&t.splice(n,1)}var r=U_(G_(a.prototype),"serializeOptions",this).call(this,t,e);return t||(r.type="textdesign"),r}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}},{key:"dispose",value:function(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Z_.Layouts={TextDesignBlocks:yd,TextDesignBlocksCondensed:kd,TextDesignBlocksLight:Zd,TextDesignCelebrate:xy,TextDesignCelebrateSimple:Gy,TextDesignEqualWidth:hg,TextDesignEqualWidthFat:xg,TextDesignMasked:rm,TextDesignMaskedBadge:hm,TextDesignMaskedSpeechBubble:Om,TextDesignMaskedSpeechBubbleComic:Im,TextDesignMultiline:Wm,TextDesignWatercolor:Qm,TextDesignSunshine:cv,TextDesignParticles:T_,TextDesignRotated:B_},Z_.LegacyLayouts={TextDesignBlocksLightV310:ey,TextDesignSunshineV310:wv},Z_.AssetManager=Ip,Z_.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},position:{type:o.OptionType.VECTOR2,default:new V_(.5,.5)},dimensions:{type:o.OptionType.VECTOR2,default:V_.NULL},anchor:{type:o.OptionType.VECTOR2,default:new V_(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new V_(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},layout:{type:o.OptionType.OBJECT,default:null,setter:function(t){return this._isLayoutDirty=!0,t}},text:{type:o.OptionType.STRING,default:"",setter:function(t){return this._isLayoutDirty=!0,t}},color:{type:o.OptionType.COLOR,default:o.Color.BLACK,setter:function(t){return this._isLayoutDirty=!0,t}},padding:{type:o.OptionType.NUMBER,default:.01,minValue:.01},width:{type:o.OptionType.NUMBER,default:.8},inverted:{type:o.OptionType.BOOLEAN,default:!1,setter:function(t){return this._isLayoutDirty=!0,t}},seed:{type:o.OptionType.NUMBER,default:-1}};const X_=Z_;function Y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K_(t){return(K_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J_(t,e,n){return(J_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $_(t,e){return($_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tb(t,e){return!e||"object"!==K_(e)&&"function"!=typeof e?eb(t):e}function eb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nb(t){return(nb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rb=o.Math.Vector2,ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nb(n);if(r){var i=nb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tb(this,t)});function a(){var t;Q_(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n))).setSmoothDownscaling(t._sdk.getOptions().smoothDownscaling),t._onSpriteUpdate=t._onSpriteUpdate.bind(eb(t)),t._maskCanvas=o.Utils.createCanvas();var s=t._options.sprites.slice();return s.forEach((function(e){t.removeSprite(e),t.addSprite(e)})),t}return(e=[{key:"getSpritesOfType",value:function(t){return this._options.sprites.filter((function(e){return e instanceof t}))}},{key:"rotate",value:function(t){this._options.sprites.forEach((function(e){e.applyRotation(t)}))}},{key:"flip",value:function(t){this._options.sprites.forEach((function(e){e.applyFlip(t)}))}},{key:"_onSpriteUpdate",value:function(t,e){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(t,e){this._options.sprites.forEach((function(n){return n.applyRotation(t,e)}))}},{key:"transform",value:function(t){this._options.sprites.forEach((function(e){return e.applyTransform(t)}))}},{key:"scale",value:function(t){this._options.sprites.forEach((function(e){return e.applyScale(t)}))}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===t?this._options.sprites.map((function(t){return t.serializeOptions(void 0,e)})):J_(nb(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"createSticker",value:function(t){return new Df(this,t)}},{key:"createText",value:function(t){return new Hf(this,t)}},{key:"createBrush",value:function(t){return new nf(this,t)}},{key:"createTextDesign",value:function(t){return new X_(this,t)}},{key:"addSprite",value:function(t){this._options.sprites.push(t);var e=this.getSmoothDownscaling();t.setSmoothDownscaling&&t.setSmoothDownscaling(e),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(t){var e=this._options.sprites,n=e.indexOf(t);return-1!==n&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var t=this._sdk.getSprite().getTexture().getFrame(),e=this._sdk.getOperationsStack().getByIdentifier("orientation");if(e){var n=e?e.getRotation():0;return 270===n||90===n?new rb(t.height,t.width):new rb(t.width,t.height)}var r=this._sdk.getOperationsStack().getByIdentifier("output");return r?r.getOutputResolution():new rb(t.width,t.height)}},{key:"_render",value:function(t){var e=this,n=this._container,r=this._options.sprites,i=t.getDimensions().clone().floor(),a=new o.Engine.Container;return a.addChild(this._sprite),o.Promise.all(r.map((function(t){return t.validateSettings()}))).then((function(){r.forEach((function(t){return t.update(e._sdk,i)}))})).then((function(){e._renderTexture.clear(),r.forEach((function(t){t.getInverted&&t.getInverted()?(e._renderTexture.render(a),e._renderTexture.render(e._renderMaskedSprite(t.getDisplayObject(),t.getColor?t.getColor():o.Color.WHITE,t.getPadding?t.getPadding():-1)),a=new o.Engine.Container):a.addChild(t.getDisplayObject())})),e._renderTexture.render(a),n.addChild(e._sprite),r.forEach((function(t){return n.addChild(t.getDisplayObject())}))}))}},{key:"_renderMaskedSprite",value:function(t,e,n){var r=this._maskCanvas,i=t.getWorldTransform(),a=this._getOrientatedStageSize();o.Utils.ensureCanvasDimensions(r,a);var s=r.getContext("2d");if(s.clearRect(0,0,r.width,r.height),s.save(),s.fillStyle=e.toRGBA(),n<0)s.fillRect(0,0,a.x,a.y);else{var l=Math.abs(t.getWidth()/t.getScale().x),u=Math.abs(t.getHeight()/t.getScale().y),c=l*n;s.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),s.fillRect(-c,-c,l+2*c,u+2*c)}s.restore(),s.save(),s.globalCompositeOperation="destination-out",t._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},beforeDraw:function(e){var n=t.getWidth(),r=t.getHeight(),i=t.getScale(),o=i.x<0,a=i.y<0;e.translate(n,r),e.scale(o?-1:1,a?-1:1),e.translate(-n,-r)},getContext:function(){return s}}),s.restore();var f=new o.Engine.Container,p=new o.Engine.Sprite(o.Engine.Texture.fromCanvas(r));return f.addChild(p),f}},{key:"takeSpriteToFront",value:function(t){var e=this._options.sprites,n=e.indexOf(t);if(-1!==n){o.Utils.moveArrayItem(e,n,e.length-1);var r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(t,e){var n=this,r=[];this._options.sprites.forEach((function(t){return t.update(n._sdk,e)}));var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,l=a.height,u=i.getAnchor().clone().multiply(-s,-l);o.subtract(u);for(var c=this._options.sprites.slice(0).reverse(),f=0,p=c.length;f<p;f++){var h=c[f];h.getHitTestDisplayObject().isAtPosition(o)&&r.push(h)}return r}},{key:"setDirtyForRenderer",value:function(t,e,n){J_(nb(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),this._options.sprites.forEach((function(r){r.setDirtyForRenderer(t,e,n)}))}},{key:"dispose",value:function(){J_(nb(a.prototype),"dispose",this).call(this),this._options.sprites.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);ib.StickerSprite=Df,ib.TextSprite=Hf,ib.BrushSprite=nf,ib.TextDesignSprite=X_,ib.identifier="sprite",ib.prototype.availableOptions={sprites:{type:o.OptionType.ARRAY,default:[],setter:function(t,e){var n=this;return t=t.map((function(t,e){if(t instanceof Ac)return t;var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y_(Object(n),!0).forEach((function(e){q_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);switch(delete r.type,t.type){case"text":return new Hf(n,r);case"sticker":return new Df(n,r);case"brush":return new nf(n,r);case"textdesign":return new X_(n,r);default:o.Log.error(n.constructor.name,"Invalid sprite type: "+t.type)}})),e||(this._options.sprites&&this._options.sprites.slice().forEach((function(t){t.dispose(),n.removeSprite(t)})),t.forEach((function(t){n.addSprite(t)}))),t}},smoothDownscaling:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.SpriteOperation=ib;const ob=ib;var ab=o.Math.Vector2;const sb=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=n.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(n.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}var e;return(e=[{key:"applyToRelativePoint",value:function(t){var e=this._oldOptions.start,n=this._oldOptions.end,r=e.clone().add(n.clone().subtract(e).divide(2)).multiply(this._inputDimensions),i=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=r.clone().add(i).clone().subtract(this._inputDimensions.clone().divide(2)),a=new ab(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),s=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return s.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t}},{key:"scaleSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]}},{key:"applyToRotation",value:function(t){return(t+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var t=this._options.start.clone(),e=this._options.end.clone(),n=this._inputDimensions,r=-this._rotationDelta,i=Math.cos(r),o=Math.sin(r),a=this._oldAbsoluteSize,s=this._newAbsoluteSize,l=t.clone().subtract(e).multiply(n),u=1/this._scaleRatio,c=new ab(1/this._sizeFactor.x,1/this._sizeFactor.y),f=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=n,this._rotationDelta=r,this._deltaCos=i,this._deltaSin=o,this._oldAbsoluteSize=s,this._newAbsoluteSize=a,this._absoluteStartDiff=l,this._scaleRatio=u,this._sizeFactor=c,this._textureScaleFactor=f,this}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function lb(t){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ub(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cb(t,e){return(cb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fb(t,e){return!e||"object"!==lb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pb(t){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hb=o.Math.Vector2,db=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cb(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pb(n);if(r){var i=pb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return fb(this,t)});function a(){return ub(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){this._sprite.setRotation(0);var e=t.getDimensions(),n=this._options,r=n.start,i=n.end,a=n.rotation,s=n.textureScale,l=i.clone().subtract(r).clone().divide(2),u=r.clone().add(l),c=this.calculateScale()*s,f=e.clone().multiply(c).multiply(l);return this._sprite.setAnchor(u),this._sprite.setRotation(a),this._sprite.setScale(c,c),this._sprite.setPosition(f),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"calculateScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),n=new hb(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().subtract(n.clone()).divide(2).abs();return r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1}},{key:"getNewDimensions",value:function(t){var e=this._options,n=e.start,r=e.end,i=e.textureScale,o=this.calculateScale();return t.clone().multiply(i*o).multiply(r.clone().subtract(n)).round()}},{key:"flip",value:function(t){var e=this._options,n=e.start,r=e.end,i=n.clone();"horizontal"===t?(n.set(1-r.x,n.y),r.set(1-i.x,r.y)):"vertical"===t&&(n.set(n.x,1-r.y),r.set(r.x,1-i.y))}},{key:"rotate",value:function(t){for(var e=this._options,n=e.start,r=e.end,i=(t+360)%360,o=Math.floor(i/90),a=0;a<o;a++){var s=n.clone();n.set(1-r.y,s.x),r.set(1-s.y,r.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);db.identifier="transform",db.prototype.availableOptions={start:{type:o.OptionType.VECTOR2,default:new hb(0,0)},end:{type:o.OptionType.VECTOR2,default:new hb(1,1)},textureScale:{type:o.OptionType.NUMBER,default:1},rotation:{type:o.OptionType.NUMBER,default:0}},db.TransformChange=sb,a().Operations.TransformOperation=db;const yb=db;function gb(t){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vb(t,e,n){return(vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _b(t,e){return(_b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bb(t,e){return!e||"object"!==gb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wb(t){return(wb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xb=o.Math.Vector2,Ob=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_b(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wb(n);if(r){var i=wb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return bb(this,t)});function a(){var t;mb(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._watermarkSprite=new o.Engine.Sprite,t._watermarkSprite.setAnchor(.5,.5),t._container.addChild(t._watermarkSprite),t}return(e=[{key:"_render",value:function(t){this._watermarkTexture||(this._watermarkTexture=o.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),n=this._options.image,r=n.width,i=n.height,a=o.Utils.resizeVectorToFit(new xb(r,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(a.x),this._watermarkSprite.setHeight(a.y),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){vb(wb(a.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Ob.identifier="watermark",Ob.prototype.availableOptions={image:{type:o.OptionType.OBJECT,required:!0}},a().Operations.WatermarkOperation=Ob;const Sb=Ob;var kb=n(1207);function Tb(t){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eb(t,e,n){return(Eb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ib(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rb(t,e){return(Rb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Db(t,e){return!e||"object"!==Tb(e)&&"function"!=typeof e?Pb(t):e}function Pb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ib(t){return(Ib=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ab(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rb(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ib(r);if(i){var n=Ib(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Db(this,t)});function s(){var t;Cb(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ab(Pb(t=a.call.apply(a,[this].concat(n))),"_fragmentSource",null),t._inputTextureSizeMap={},t._inputLogicalSizeMap={},t._inputShapeMap={},t}return(e=[{key:"requiresFloatTextures",value:function(){return!0}},{key:"setTargetTextureSize",value:function(t){this._targetTextureSize=t}},{key:"setTargetLogicalSize",value:function(t){this._targetSize=t}},{key:"setTextureSizeForInputWithName",value:function(t,e){this._inputTextureSizeMap[e]=t}},{key:"setLogicalSizeForInputWithName",value:function(t,e){this._inputLogicalSizeMap[e]=t}},{key:"getShaderForRenderer",value:function(t){return this._fragmentSource||(this._fragmentSource=this._buildFragmentShader()),Eb(Ib(s.prototype),"getShaderForRenderer",this).call(this,t)}},{key:"outputLogicalShape",value:function(){if(!this._options.outputLogicalShape){var t=this._calculateOutputShape();this._options.outputLogicalShape=t}return this._options.outputLogicalShape}},{key:"_applyWebGL",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=o;a||(a=this.getShaderForRenderer(t));var s=t.getContext(),l={},u=t.getCurrentRenderTarget().getProjectionMatrix().toArray();l.u_projMatrix=u,l.output_texRC=this._targetTextureSize,l.output_sizeRC=this._targetSize,l.output_shape=this.outputLogicalShape(),this._options.inputs.forEach((function(t){try{l["".concat(t.name,"_texRC")]=r._inputTextureSizeMap[t.name],l["".concat(t.name,"_sizeRC")]=r._inputLogicalSizeMap[t.name],l["".concat(t.name,"_shape")]=t.logicalShape}catch(e){throw new Error("Missing texture or logical size for input ".concat(t.name," in filter ").concat(r.constructor.name,"."))}}),this),this._updateAdditionalUniforms(a),a.setUniforms(l),a.syncUniforms();var c=e.getBaseTexture(),f=t.getOrCreateGLTexture(c);s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,f),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,c.getGLRepeat(s,"x")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,c.getGLRepeat(s,"y")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,c.getGLFilter(s,"min")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c.getGLFilter(s,"mag")),s.bindFramebuffer(s.FRAMEBUFFER,n._framebuffer),i&&s.clear(s.COLOR_BUFFER_BIT),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)}},{key:"getShaderIdentifier",value:function(){var t=this.outputLogicalShape().length,e=this.getInputs().map((function(t){return"".concat(t.name,"_").concat(t.logicalShape.length)})).join("");return this.constructor.name+"_"+t+"_"+e+"_"+this._getTensorOperationSource()}},{key:"_updateAdditionalUniforms",value:function(t){}},{key:"_calculateOutputShape",value:function(){return this.getInputs()[0].logicalShape}},{key:"prepareUniforms",value:function(){var t=this;this._uniforms.output_texRC={type:o.UniformType.FLOAT2,value:[0,0]},this._uniforms.output_sizeRC={type:o.UniformType.FLOAT2,value:[0,0]};var e=this._calculateOutputShape();this._uniforms.output_shape={type:2===e.length?o.UniformType.INT2:o.UniformType.INT4,value:e};var n=1,r=[];this.getInputs().forEach((function(e){if(-1!==r.indexOf(e.name))throw new Error("Input names must be unique.");var i="".concat(e.name,"_texRC"),a="".concat(e.name,"_sizeRC"),s="".concat(e.name,"_shape");switch(t._uniforms[i]={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms[a]={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms[s]={type:2===e.logicalShape.length?o.UniformType.INT2:o.UniformType.INT4,value:e.logicalShape},e.type){case jb.PREVIOUS:t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:0};break;case jb.DATA:t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:n++}}})),this.getInputs().forEach((function(e){e.type===jb.INDEX&&(t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:n++})})),delete this._availableUniforms.u_image,delete this._uniforms.u_image}},{key:"_getTensorOperationSource",value:function(){return"\n      void main () {\n        setOutput(0.0);\n      }\n    "}},{key:"_buildFragmentShader",value:function(){var t=this,e=n(9960),r=this.outputLogicalShape();return 2===r.length?e+=this._create2DOutputInterfaceSnippet():4===r.length&&(e+=this._create4DOutputInterfaceSnippet()),this._options.inputs.forEach((function(n){e+=t._createInputInterfaceSnippet(n)})),e+=this._createOutputSnippet(),e+=this._getTensorOperationSource()}},{key:"_createOutputSnippet",value:function(){return"\n      void setOutput(float val) {\n        gl_FragColor = vec4(val, 0, 0, 0);\n      }\n    "}},{key:"_create2DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec2 output_shape;\n      ivec2 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n        int r = index / output_shape[1];\n        int c = index - r * output_shape[1];\n\n        return ivec2(r, c);\n      }\n    "}},{key:"_create4DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec4 output_shape;\n      ivec4 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n\n        int stride2 = output_shape[3];\n        int stride1 = output_shape[2] * stride2;\n        int stride0 = output_shape[1] * stride1;\n\n        int r = index / stride0;\n        index -= r * stride0;\n\n        int c = index / stride1;\n        index -= c * stride1;\n\n        int d = index / stride2;\n        int d2 = index - d * stride2;\n\n        return ivec4(r, c, d, d2);\n      }\n    "}},{key:"_createInputInterfaceSnippet",value:function(t){var e="",n=t.name,r=t.logicalShape,i="".concat(n,"_texRC"),o="".concat(n,"_sizeRC"),a="".concat(n,"_shape"),s=2===r.length?"ivec2":"ivec4";e+="\n      uniform sampler2D ".concat(n,";\n      uniform vec2 ").concat(i,";\n      uniform vec2 ").concat(o,";\n      uniform ").concat(s," ").concat(a,";\n    ");var l="get".concat(this._capitalize(n),"Flat");return e+="\n      float ".concat(l,"(int index) {\n        vec2 uv = UVfrom1D(").concat(i,", ").concat(o,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "),2===r.length?e+="\n        float get".concat(this._capitalize(n),"(int row, int col) {\n          vec2 uv = UVfrom2D(").concat(i,", ").concat(o,", ").concat(a,"[1], row, col);\n          return sampleTexture(").concat(n,", uv);\n        }\n      "):4===r.length&&(e+="\n      float get".concat(this._capitalize(n),"(int row, int col, int depth, int depth2) {\n        int stride2 = ").concat(a,"[3];\n        int stride1 = ").concat(a,"[2] * stride2;\n        int stride0 = ").concat(a,"[1] * stride1;\n\n        vec2 uv = UVfrom4D(").concat(i,", ").concat(o,", stride0, stride1, stride2, row, col, depth, depth2);\n        return sampleTexture(").concat(n,", uv);\n      }\n\n      float get").concat(this._capitalize(n),"(ivec4 coords) {\n        return get").concat(this._capitalize(n),"(coords.x, coords.y, coords.z, coords.w);\n      }\n    ")),e}},{key:"_capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"_getInputWithName",value:function(t){return o.Utils.Array.find(this._options.inputs,(function(e){return e.name===t}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter),jb={PREVIOUS:"previous",INDEX:"index",DATA:"data"};Fb.prototype.availableOptions={inputs:{type:o.OptionType.ARRAY},outputLogicalShape:{type:o.OptionType.ARRAY},outputTextureDimensions:{type:o.OptionType.ARRAY}};const Mb=Fb;function Bb(t){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lb(t,e){return(Lb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nb(t,e){return!e||"object"!==Bb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ub(t){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Wb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lb(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ub(n);if(r){var i=Ub(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Nb(this,t)});function o(){return zb(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape;if(2!==t.length)throw new Error("UnpackRGBAFilter expects 2D inputs");return[1,t[0],t[1],3]}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        //       x, y, z, w\n        // e.g. [0, 4, 3, 2] (which is the blue channel of the pixel at x: 3, y: 4)\n        ivec4 outputCoords = getOutputCoords();\n        \n        int row = outputCoords.y;\n        int col = outputCoords.z;\n        int offset = outputCoords.w;\n\n        int index = row * int(x_sizeRC.y) + col;\n        int logR = index / int(x_sizeRC.y);\n        int logC = index - logR * int(x_sizeRC.y);\n        vec2 uv = (vec2(logC, logR) + halfCR) / x_texRC.yx;\n        vec4 color = texture2D(x, uv);\n\n        float component = 0.0;\n        if (offset == 0) {\n          component = color.r;\n        } else if (offset == 1) {\n          component = color.g;\n        } else if (offset == 2) {\n          component = color.b;\n        }\n        gl_FragColor = vec4(component, 0.0, 0.0, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb),Hb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"getSizeOfLogicalShape",value:function(t){for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}},{key:"getTextureDimensionsForLogicalShape",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,r=t.getSizeOfLogicalShape(e);if(e.length<=1&&r<=n)return[r,1];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];for(var i=Math.floor(Math.sqrt(r));i>1;--i)if(r%i==0)return[i,r/i];return[1,r]}},{key:"isSameShape",value:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function Gb(t){return(Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zb(t,e){return(Zb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xb(t,e){return!e||"object"!==Gb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yb(t){return(Yb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zb(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yb(n);if(r){var i=Yb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Xb(this,t)});function o(){return Vb(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape;if(4!==t.length)throw new Error("UnpackRGBAFilter expects 4D inputs");var e=t[0];if(3!==t[3])throw new Error("Expected RGB values");if(1!==e)throw new Error("PackRGBAFilter does not support batches of images.");var n=this._options.outputSize;if(2!==n.length)throw new Error("Expected outputSize of length 2");if(n[0]*n[1]!=Hb.getSizeOfLogicalShape(t)/3)throw new Error("Input shape ".concat(t," can't be broken up into 3 channels."));return n}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec2 outputCoords = getOutputCoords();\n        int row = outputCoords.x;\n        int col = outputCoords.y;\n        float r = getX(0, row, col, 0);\n        float g = getX(0, row, col, 1);\n        float b = getX(0, row, col, 2);\n        gl_FragColor = vec4(r, g, b, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);qb.prototype.availableOptions=Object.assign({outputSize:{type:o.OptionType.ARRAY}},Mb.prototype.availableOptions);const Kb=qb;function Qb(t){return(Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $b(t,e){return($b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tw(t,e){return!e||"object"!==Qb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ew(t){return(ew=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$b(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ew(n);if(r){var i=ew(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tw(this,t)});function a(){var t;Jb(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._uniforms.blendLeftTopRightBottom={type:o.UniformType.FLOAT4,value:t.availableOptions.blendLeftTopRightBottom.default},t._uniforms.blendRadius={type:o.UniformType.FLOAT,value:t.availableOptions.blendRadius.default},t.prepareUniforms(),t}return(e=[{key:"requiresFloatTextures",value:function(){return!1}},{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x"),e=this._getInputWithName("y");if(t.logicalShape[0]!==e.logicalShape[0]||t.logicalShape[1]!==e.logicalShape[1])throw new Error("X and Y inputs of ".concat(this.constructor.name," must have same shape."));return t.logicalShape}},{key:"_updateAdditionalUniforms",value:function(t){t.setUniform("blendLeftTopRightBottom",this.getBlendLeftTopRightBottom()),t.setUniform("blendRadius",this.getBlendRadius())}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec4 blendLeftTopRightBottom;\n      uniform float blendRadius;\n\n      void main() {\n        vec2 coords = vec2(getOutputCoords());\n\n        vec2 blendVertical = vec2(coords.x, x_sizeRC.x - coords.x) / vec2(x_sizeRC.x * blendRadius); // topBlend, bottomBlend\n        vec2 blendHorizontal = vec2(coords.y, x_sizeRC.y - coords.y) / vec2(x_sizeRC.y * blendRadius); // leftBlend, rightBlend\n        vec4 factorLeftTopRightBottom = clamp(vec4(blendHorizontal.x, blendVertical.x, blendHorizontal.y, blendVertical.y), vec4(0.0), vec4(1.0));\n        vec4 maskVector = (vec4(1.0) - blendLeftTopRightBottom) * vec4(2.0); // [0, 1, 1, 1] becomes [2, 0, 0, 0]\n        vec4 maskedFactorLeftTopRightBottom = factorLeftTopRightBottom + maskVector; // [0.25, 0.5, 1.0, 1.0] becomes [2.25, 1.0, 1.0]\n        float factor = min(min(maskedFactorLeftTopRightBottom.x, maskedFactorLeftTopRightBottom.y), min(maskedFactorLeftTopRightBottom.z, maskedFactorLeftTopRightBottom.w)); // Choose the smallest blending factor\n        \n        vec2 uv = UVfrom2D(x_texRC, x_sizeRC, int(x_sizeRC.y), int(coords.x), int(coords.y));\n        vec4 xColor = texture2D(x, uv);\n        vec4 yColor = texture2D(y, uv);\n\n        gl_FragColor = mix(yColor, xColor, factor);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Mb);nw.prototype.availableOptions=Object.assign({blendLeftTopRightBottom:{type:o.OptionType.ARRAY,default:[1,1,1,1]},blendRadius:{type:o.OptionType.NUMBER,default:.2}},Mb.prototype.availableOptions);const rw=nw;function iw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ow=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),iw(this,"_targetTextureFormatMap",new Map),iw(this,"_floatTargetPool",[]),iw(this,"_intTargetPool",[]),this._renderer=e,this._internalFloatType=n.renderTextureType,this._internalFloatTextureFormat=n.renderTextureFormat}var e;return(e=[{key:"prebuildRenderTargets",value:function(t,e,n){for(var r=this,i=[],o=0;o<t;o++)i.push(new Promise((function(t){var i=r._createRenderTarget(e,n),o=r._uniqueIDForTarget(i);r._targetTextureFormatMap.set(o,n),r.pushRenderTarget(i),t()})));return Promise.all(i)}},{key:"pushRenderTarget",value:function(t){var e=this._uniqueIDForTarget(t),n=this._targetTextureFormatMap.get(e);if(n)switch(n){case aw.FLOAT:this._floatTargetPool.push(t);break;case aw.INT:this._intTargetPool.push(t)}}},{key:"popRenderTarget",value:function(t,e){var n=null;e===aw.FLOAT?n=this._extractTargetFromPool(this._floatTargetPool,t):e===aw.INT&&(n=this._extractTargetFromPool(this._intTargetPool,t)),n||(n=this._createRenderTarget(t,e));var r=this._uniqueIDForTarget(n);return this._targetTextureFormatMap.set(r,e),n}},{key:"getFormatOfRenderTarget",value:function(t){return null===t?null:this._targetTextureFormatMap.get(t._baseTexture.id)}},{key:"dispose",value:function(){this._targetTextureFormatMap.clear(),this._floatTargetPool.forEach((function(t){t.dispose()})),this._floatTargetPool=null,this._intTargetPool.forEach((function(t){t.dispose()})),this._intTargetPool=null}},{key:"_uniqueIDForTarget",value:function(t){return null===t?null:null!==t.getBaseTexture()?t.getBaseTexture().id:null}},{key:"_extractTargetFromPool",value:function(t,e){var n=t.filter((function(t){var n=t.getFrame().getSize();return n.x===e.x&&n.y&&e.y})).shift();if(n){var r=t.indexOf(n);t.splice(r,1)}return n}},{key:"_createRenderTarget",value:function(t,e){var n=new o.Engine.WebGLRenderTarget(this._renderer,t.x,t.y,1);n.getBaseTexture().setMinFilter(o.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMagFilter(o.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMipMappingEnabled(!1),n.setFrame(new q.Rectangle(0,0,t.x,t.y));var r=this._renderer.getContext();r.bindTexture(r.TEXTURE_2D,n.getBaseTexture().getGLTextureForRenderer(this._renderer));var i=e===aw.FLOAT?this._internalFloatType:r.UNSIGNED_BYTE,a=e===aw.FLOAT?this._internalFloatTextureFormat:r.RGBA;return r.texImage2D(r.TEXTURE_2D,0,a,t.x,t.y,0,a,i,null),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),aw={FLOAT:"float",INT:"int"};const sw=ow,lw=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_filterInputToTextureMap",new Map),this._renderer=e;var r=this._renderer.getContext();this._internalFloatType=n.weightTextureType,this._internalFloatTextureFormat=n.weightTextureFormat,this._numChannels=n.weightTextureFormat===r.RGBA?4:1,this._internalFloatType!==r.FLOAT&&this._prepareFloatConversionTables()}var e;return(e=[{key:"createAndLoadTexturesForFilter",value:function(t,e){var n=this;return new Promise((function(r){t.getInputs().forEach((function(r,i){if(r.type===jb.DATA){var o=r.data,a=r.logicalShape,s=n._createTexture(),l=n._uploadDataToTexture(s,o,a,n._numChannels),u="".concat(e,"_").concat(r.name);n._filterInputToTextureMap.set(u,l),n._renderer.getContext().flush(),t.getInputs()[i].data=null}})),r()}))}},{key:"bindTexturesForFilter",value:function(t,e,n){var r=this,i=this._renderer.getContext(),o=0;return t.getInputs().forEach((function(a,s){if(a.type===jb.DATA){var l=r._filterInputToTextureMap.get("".concat(e,"_").concat(a.name)),u=l.texture,c=l.size;if(!u)throw new Error("Missing texture for filter ".concat(s,"."));i.activeTexture(i.TEXTURE0+n+o),i.bindTexture(i.TEXTURE_2D,u),t.setTextureSizeForInputWithName(c,a.name),t.setLogicalSizeForInputWithName(c,a.name),o++}})),o}},{key:"updateTexturesForFilter",value:function(t,e){var n=this;t.getInputs().forEach((function(t){if(t.type===jb.DATA&&null!==t.data){var r=n._filterInputToTextureMap.get("".concat(e,"_").concat(t.name)).texture;n._uploadDataToTexture(r,t.data,t.logicalShape,n._numChannels)}}),this)}},{key:"dispose",value:function(){var t=this._renderer.getContext();this._filterInputToTextureMap.forEach((function(e){"undefined"!==e&&t.deleteTexture(e.texture)})),this._filterInputToTextureMap.clear()}},{key:"_createTexture",value:function(){var t=this._renderer.getContext(),e=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}},{key:"_uploadDataToTexture",value:function(t,e,n,r){var i=Hb.getTextureDimensionsForLogicalShape(n),o=Hb.getSizeOfLogicalShape(n);if(e.length!==o)throw new Error("Not enough or too many values (".concat(e.length,") for shape ").concat(n,"."));var a=this._renderer.getContext(),s=this._internalFloatType!==a.FLOAT,l=this._createArrayBufferForUpload(e,i,r,s);return a.bindTexture(a.TEXTURE_2D,t),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),1===r&&a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this._internalFloatTextureFormat,i[1],i[0],0,this._internalFloatTextureFormat,this._internalFloatType,l),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.pixelStorei(a.UNPACK_ALIGNMENT,4),{texture:t,size:i}}},{key:"_createArrayBufferForUpload",value:function(t,e,n,r){if(1===n&&!1===r)return t;for(var i=e[0]*e[1]*n,o=r?new Uint16Array(i):new Float32Array(i),a=4===n,s=0,l=0;l<t.length;l++)o[s]=r?this._toHalfFloat(t[l]):t[l],a&&(o[s+3]=1),s+=n;return o}},{key:"_prepareFloatConversionTables",value:function(){var t=new ArrayBuffer(4);this._floatView=new Float32Array(t),this._uint32View=new Uint32Array(t);for(var e=new Uint32Array(512),n=new Uint32Array(512),r=0;r<256;++r){var i=r-127;i<-27?(e[0|r]=0,e[256|r]=32768,n[0|r]=24,n[256|r]=24):i<-14?(e[0|r]=1024>>-i-14,e[256|r]=1024>>-i-14|32768,n[0|r]=-i-1,n[256|r]=-i-1):i<=15?(e[0|r]=i+15<<10,e[256|r]=i+15<<10|32768,n[0|r]=13,n[256|r]=13):i<128?(e[0|r]=31744,e[256|r]=64512,n[0|r]=24,n[256|r]=24):(e[0|r]=31744,e[256|r]=64512,n[0|r]=13,n[256|r]=13)}this._baseTable=e,this._shiftTable=n}},{key:"_toHalfFloat",value:function(t){this._floatView[0]=t;var e=this._uint32View[0],n=e>>23&511;return this._baseTable[n]+((8388607&e)>>this._shiftTable[n])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),uw=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"determineSupportedConfiguration",value:function(e){var n=!1;if(t._cachedConfigs||(t._cachedConfigs={},n=!0),t._cachedConfigs[e.id])return t._cachedConfigs[e.id];var r=e.getExtension("OES_texture_float"),i=e.FLOAT,a=e.getExtension("OES_texture_half_float"),s=null!==a?a.HALF_FLOAT_OES:null,l=null!==r,u=t._canCreateTexture(e,i,e.LUMINANCE),c=null!==a&&t._canCreateTexture(e,s,e.RGBA),f=t._canCreateTexture(e,s,e.LUMINANCE),p=l&&(e.getExtension("WEBGL_color_buffer_float")||t._canBindBuffer(e,i,e.RGBA)),h=t._canBindBuffer(e,i,e.LUMINANCE),d=t._canBindBuffer(e,s,e.LUMINANCE),y=e.FLOAT,g=e.RGBA,m="?";f?(m="Float16 Luminance",y=s,g=e.LUMINANCE):c?(m="Float16 RGBA",y=s):u?(m="Float32 Luminance",g=e.LUMINANCE):m="Float32 RGBA";var v=i,_=e.RGBA,b="?";d?(b="Float16 Luminance",v=s,_=e.LUMINANCE):h?(b="Float32 Luminance",v=i,_=e.LUMINANCE):b="Float32 RGBA",n&&o.Log.info("\nArt Filter configuration:\nWeight Textures: ".concat(m,"\nRender Textures: ").concat(b));var w={environmentSupported:p,weightTextureType:y,weightTextureFormat:g,renderTextureType:v,renderTextureFormat:_};return t._cachedConfigs[e.id]=w,w}},{key:"_canCreateTexture",value:function(t,e,n){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=n===t.RGBA?4:1,o=new Uint16Array(i);e===t.FLOAT&&(o=new Float32Array(i)),1===i&&t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,n,e,o),t.pixelStorei(t.UNPACK_ALIGNMENT,4);var a=t.isTexture(r),s=t.getError()!==t.NO_ERROR;return t.deleteTexture(r),a&&!s}},{key:"_canBindBuffer",value:function(t,e,n){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,n,e,null);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.deleteTexture(r),t.deleteFramebuffer(i),o===t.FRAMEBUFFER_COMPLETE}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function cw(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function fw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const pw=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fw(this,"_measurePerformance",!1),fw(this,"_filterStack",[]),fw(this,"_intermediateReadDependencies",[]),fw(this,"_intermediateWriteDependencies",[]),fw(this,"_finished",!1),this._renderer=e,this._gl=e.getContext();var o=uw.determineSupportedConfiguration(this._gl);this._renderTargetManager=new sw(e,o),this._textureManager=new lw(e,o),this._weightMap=n,this._shaderCache=new Map,this._inputTileDimensions=r,this._inferenceEdgeLength=i,this._featheredMaskFilter=new rw({inputs:[{name:"x",type:jb.PREVIOUS,logicalShape:[r.y,r.x]},{name:"y",type:jb.INDEX,logicalShape:[r.y,r.x]}]}),this._setupRGBAUnpackFilter()}var e,n,r,i;return e=t,(n=[{key:"addFilter",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._finished)throw new Error("Can't add filters to an already finished graph.");var r=this._filterStack.length,i=r-1,o=this._filterStack[i];return this._filterStack.push(t),this._intermediateReadDependencies.push([]),this._intermediateWriteDependencies.push([]),t.getInputs().forEach((function(a,s,l){switch(a.type){case jb.PREVIOUS:n&&(a.logicalShape=o.outputLogicalShape());break;case jb.INDEX:if(a.data===i)throw new Error("Accessing the previous filter through indexing is not supported. Use InputType.PREVIOUS instead.");var u=e._filterStack[a.data];if(!u)throw new Error("Indexed input does not exist: ".concat(a.data," for input ").concat(a.name," in ").concat(t.constructor.name," at ").concat(r,"."));n&&(a.logicalShape=u.outputLogicalShape()),e._intermediateReadDependencies[r].push(a),e._intermediateWriteDependencies[a.data].push(r);break;case jb.DATA:var c=a.data,f=e._weightMap[c];l[s].logicalShape=f.logicalShape,l[s].data=new Float32Array(f.data),l[s].key=c,delete e._weightMap[c]}}),this),t.prepareUniforms(),r}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._measurePerformance;this._renderer=t,this._gl=t.getContext();var r=this._gl,i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this._maxRequiredTextureDimensions=this._calculateMaximumIntermediateTextureDimensions();var o=this;return Promise.resolve().then((function(){return o._loadTextures(n)})).then((function(){return o._compileShaders(t,i,n)})).then((function(){return o._prepareRenderTargets(n)})).then((function(){return o._intermediateResults=o._filterStack.map((function(){return null})),o._quad=new Uu.Z(t),e._weightMap=null,o._finished=!0,o})).then((function(){n&&(performance.measure("texture_loading","begin_texture_loading","finish_texture_loading"),performance.measure("shader_compilation","begin_shader_compilation","finish_shader_compilation"),performance.measure("target_preparation","begin_target_preparation","finish_target_preparation"),performance.getEntriesByType("measure").forEach((function(t){console.log("".concat(t.name,": ").concat(t.duration,"ms")),performance.clearMarks(),performance.clearMeasures()})))}))}},{key:"dispose",value:function(){this._disposed||(this._textureManager.dispose(),this._renderTargetManager.dispose(),this._shaderCache.forEach((function(t){t.dispose()})),this._textureManager=null,this._renderTargetManager=null,this._shaderCache=null,this._intermediateReadDependencies=null,this._intermediateWriteDependencies=null,this._filterStack=null,this._disposed=!0)}},{key:"_loadTextures",value:function(t){var e=this;t&&performance.mark("begin_texture_loading");var n=[];return this._filterStack.forEach((function(t,r){n.push(e._textureManager.createAndLoadTexturesForFilter(t,r))}),this),Promise.all(n).then((function(){t&&performance.mark("finish_texture_loading")}))}},{key:"_compileShaders",value:function(t,e,n){var r=this;n&&performance.mark("begin_shader_compilation");var i=[];return this._filterStack.concat([this._featheredMaskFilter]).forEach((function(n,o){if(o<r._filterStack.length){var a=1+n.getInputs().filter((function(t){return t.type===jb.DATA})).length+r._intermediateReadDependencies[o].length;if(a>e)throw new Error("This environment does only offer support for ".concat(e,", but filter ").concat(n.constructor.name," requires ").concat(a,"."))}var s=n.getShaderIdentifier(),l=r;r._shaderCache.has(s)||i.push(new Promise((function(e){var r=n.getShaderForRenderer(t);if(!r)throw new Error("Could not compile filter: ".concat(n.constructor.name,"!"));l._shaderCache.set(s,r),t.getContext().finish(),e(r)})))})),Promise.all(i).then((function(){n&&performance.mark("finish_shader_compilation")}))}},{key:"_prepareRenderTargets",value:function(t){var e=this;t&&performance.mark("begin_target_preparation");var n=this._maxRequiredTextureDimensions,r=this._inputTileDimensions;return Promise.resolve().then((function(t){return e._renderTargetManager.prebuildRenderTargets(5,n,aw.FLOAT)})).then((function(t){return e._renderTargetManager.prebuildRenderTargets(3,r,aw.INT)})).then((function(e){t&&performance.mark("finish_target_preparation")}))}},{key:"isFinished",value:function(){return this._finished}},{key:"updateWeights",value:function(t){var e=this;return this._finished?(this._filterStack.forEach((function(n,r,i){var o=!1;n.getInputs().forEach((function(e,n){if(e.type===jb.DATA&&e.key){var a=t[e.key];if(!a)return;i[r].getInputs()[n].data=new Float32Array(a.data),o=!0,delete t[e.key]}})),o&&e._textureManager.updateTexturesForFilter(n,r)})),0===!Object.keys(t).length&&Promise.reject(new Error("Not all weights in the given weight map were in use.")),Promise.resolve()):Promise.reject(new Error("Graph hasn't been loaded. Unable to update weights."))}},{key:"render",value:(r=l().mark((function t(e,n,r,i,o,a){var s,u,c,f,p,h,d,y,g,m,v,_,b,w,x=this,O=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=O.length>6&&void 0!==O[6]?O[6]:this._measurePerformance,!this._disposed){t.next=3;break}return t.abrupt("return",Promise.resolve(r));case 3:if(s&&performance.mark("begin_render"),u=this._gl,s&&performance.mark("begin_preparation"),this._featheredMaskFilter.setBlendLeftTopRightBottom(o),this._featheredMaskFilter.setBlendRadius(.5*a),c=this._maxRequiredTextureDimensions,f=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),p=this._renderTargetManager.popRenderTarget(c,aw.FLOAT),h=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),this._copyTextureContents(n,f,i,q.Vector2.NULL),this._copyTextureContents(r,h,i,q.Vector2.NULL),d=this._filterStack[0],y=d.getInputs()[0].name,g=i.height,m=i.width,v=[g,m],d.setTextureSizeForInputWithName(this._inputTileDimensions.asArray(!0),y),d.setLogicalSizeForInputWithName(v,y),s&&performance.mark("finish_preparation"),_=new Iu.Ae,b=new Iu.Ae,this._filterStack.forEach((function(t,n){var r=1;s&&performance.mark("begin_conversion_".concat(n));var i=t.requiresFloatTextures()?aw.FLOAT:aw.INT,o=n===x.getLastIndex()?x._inputTileDimensions:x._maxRequiredTextureDimensions,a=x._renderTargetManager.getFormatOfRenderTarget(p);null===p?p=x._renderTargetManager.popRenderTarget(o,i):a!==i&&(x._renderTargetManager.pushRenderTarget(p),p=x._renderTargetManager.popRenderTarget(o,i)),s&&performance.mark("finish_conversion_".concat(n));var l=f.getFrame().getSize().asArray(!0),c=p.getFrame().getSize().asArray(!0),h=q.Utils.Array.find(t.getInputs(),(function(t){return t.type===jb.PREVIOUS}));void 0!==h&&(t.setTextureSizeForInputWithName(l,h.name),t.setLogicalSizeForInputWithName(v,h.name)),s&&performance.mark("begin_suppl_".concat(n,"_prep")),r+=x._textureManager.bindTexturesForFilter(t,n,r),s&&performance.mark("finish_suppl_".concat(n,"_prep")),s&&performance.mark("begin_intermediate_".concat(n,"_prep"));var d=x._intermediateReadDependencies[n];x._bindIntermediateReadDependencies(t,d,r),s&&performance.mark("finish_intermediate_".concat(n,"_prep"));var y=f.getFrame(),g=p.getFrame();y.equals(_)&&g.equals(b)||(x._quad.map(y,g),x._configureVertexAttributesForShader(t.getShaderForRenderer(e)),_=y,b=g),e.setRenderTarget(p);var m=Hb.getTextureDimensionsForLogicalShape(t.outputLogicalShape());t.setTargetTextureSize(c),t.setTargetLogicalSize(m),u.viewport(0,0,m[1],m[0]),s&&performance.mark("begin_filter_".concat(n));var w=x._shaderCache.get(t.getShaderIdentifier());u.useProgram(w.getProgram()),t._applyWebGL(e,f,p,!0,w),s&&performance.mark("finish_filter_".concat(n)),s&&performance.mark("begin_postprocess_".concat(n)),x._storeIntermediateResultsIfNeeded(f,n,v,l)&&(f=null),d.forEach((function(t){var e=x._intermediateResults[t.data];e&&0===e.pendingReads&&(x._renderTargetManager.pushRenderTarget(e.target),x._intermediateResults.slice(t.data,1))}),x);var O=p;p=f,f=O,v=m,s&&performance.mark("finish_postprocess_".concat(n))}),this),s&&performance.mark("begin_masking"),this._renderTargetManager.pushRenderTarget(p),p=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),this._applyFeatheredMasking(e,f,h,p,[g,m],o),s&&performance.mark("finish_masking"),s&&performance.mark("begin_out_copy"),this._copyTextureContents(p,r,new Iu.Ae(0,0,m,g),i.getPosition()),s&&performance.mark("finish_out_copy"),this._renderTargetManager.pushRenderTarget(f),this._renderTargetManager.pushRenderTarget(p),this._renderTargetManager.pushRenderTarget(h),s&&performance.mark("finish_render"),s){for(performance.measure("total","begin_render","finish_render"),performance.measure("preparation","begin_preparation","finish_preparation"),performance.measure("masking","begin_masking","finish_masking"),performance.measure("out_copy","begin_out_copy","finish_out_copy"),w=0;w<this._filterStack.length;w++)performance.measure("conversion_".concat(w),"begin_conversion_".concat(w),"finish_conversion_".concat(w)),performance.measure("suppl_".concat(w,"_prep"),"begin_suppl_".concat(w,"_prep"),"finish_suppl_".concat(w,"_prep")),performance.measure("intermediate_".concat(w,"_prep"),"begin_intermediate_".concat(w,"_prep"),"finish_intermediate_".concat(w,"_prep")),performance.measure("filter_".concat(w,"_").concat(this._filterStack[w].constructor.name),"begin_filter_".concat(w),"finish_filter_".concat(w)),performance.measure("postprocess_".concat(w),"begin_postprocess_".concat(w),"finish_postprocess_".concat(w));performance.getEntriesByType("measure").forEach((function(t){t.duration>50&&console.log("".concat(t.name,": ").concat(t.duration,"ms"))})),performance.clearMarks(),performance.clearMeasures()}return t.abrupt("return",Promise.resolve(r));case 38:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function a(t){cw(o,n,i,a,s,"next",t)}function s(t){cw(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a){return i.apply(this,arguments)})},{key:"_applyFeatheredMasking",value:function(t,e,n,r,i){var o=this._gl;o.activeTexture(o.TEXTURE0+1),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=r.getFrame().getSize().asArray(!0);this._featheredMaskFilter.setTargetTextureSize(a),this._featheredMaskFilter.setTargetLogicalSize(i),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"x"),this._featheredMaskFilter.setLogicalSizeForInputWithName(i,"x"),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"y"),this._featheredMaskFilter.setLogicalSizeForInputWithName(i,"y");var s=this._featheredMaskFilter.getShaderIdentifier(),l=this._shaderCache.get(s);o.useProgram(l.getProgram()),this._featheredMaskFilter._applyWebGL(t,e,r,!0,l)}},{key:"_copyTextureContents",value:function(t,e,n,r){var i=this._gl;t.activate(),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.copyTexSubImage2D(i.TEXTURE_2D,0,r.x,r.y,n.x,n.y,n.width,n.height)}},{key:"_bindIntermediateReadDependencies",value:function(t,e,n){var r=this,i=this._gl,o=n;e.forEach((function(e){var n=r._intermediateResults[e.data];i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,n.target.getTexture()),t.setTextureSizeForInputWithName(n.textureSize,e.name),t.setLogicalSizeForInputWithName(n.logicalSize,e.name),n.pendingReads--,o++}))}},{key:"_configureVertexAttributesForShader",value:function(t){var e=this._gl,n=this._quad.getVertexBuffer(),r=this._quad.getIndexBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r);var i=t.getAttributeLocations();e.vertexAttribPointer(i.a_position,2,e.FLOAT,!1,0,0),e.vertexAttribPointer(i.a_texCoord,2,e.FLOAT,!1,0,32),e.vertexAttribPointer(i.a_color,4,e.FLOAT,!1,0,64)}},{key:"_storeIntermediateResultsIfNeeded",value:function(t,e,n,r){var i=e-1;return i>=0&&this._intermediateWriteDependencies[i].length>0&&(this._intermediateResults[i]={target:t,pendingReads:this._intermediateWriteDependencies[i].length,textureSize:r,logicalSize:n},!0)}},{key:"getInitialInputLogicalShape",value:function(){return this._filterStack[0].outputLogicalShape()}},{key:"getLastFilterLogicalShape",value:function(){return this.getLogicalShapeAtIndex(this._filterStack.length-1)}},{key:"getFilterCount",value:function(){return this._filterStack.length}},{key:"getLastIndex",value:function(){return this._filterStack.length-1}},{key:"getLogicalShapeAtIndex",value:function(t){return this._filterStack[t].outputLogicalShape()}},{key:"getDebugDescription",value:function(){var t=this,e="",n=0,r=0;return this._filterStack.forEach((function(i,o){var a=i.constructor.name,s=i._options.inputs.map((function(t){return"".concat(t.name,": [").concat(t.logicalShape,"]")})).join(", "),l="Out: [".concat(i.outputLogicalShape(),"]"),u="[".concat(t._supplementaryTextures[o].map((function(t){return"".concat(t.loadedTexture.getGLUnit(),": ").concat(t.loadedTexture.id)})).join(", "),"]"),c="R: [".concat(t._intermediateReadDependencies[o].map((function(t){return t.data})).join(", "),"] | W: [").concat(t._intermediateWriteDependencies[o].join(", "),"]");e+="[".concat(o,"] - ").concat(a," | ").concat(s," | ").concat(l," | ").concat(u," | ").concat(c,"\n"),n+=t._intermediateReadDependencies[o].length,r+=t._supplementaryTextures[o].length})),e+="Max intermediate texture size: ".concat(this._maxRequiredTextureDimensions,"\n"),e+="Required render targets: ".concat(n+2,"\n"),e+="Required weight textures: ".concat(r)}},{key:"_setupRGBAUnpackFilter",value:function(){var t=this._inputTileDimensions,e=[t.y,t.x],n=new Wb({inputs:[{name:"x",logicalShape:e,type:jb.PREVIOUS}]});this.addFilter(n,!1)}},{key:"_removeLastFilter",value:function(){this._filterStack.pop(),this._supplementaryTextures.pop(),this._intermediateReadDependencies.pop(),this._intermediateWriteDependencies.pop()}},{key:"_calculateMaximumIntermediateTextureDimensions",value:function(){var t=new q.Vector2(this._inputTileDimensions.x,this._inputTileDimensions.y);return this._filterStack.forEach((function(e){var n=Hb.getTextureDimensionsForLogicalShape(e.outputLogicalShape());n[1]>t.x&&(t.x=n[1]),n[0]>t.y&&(t.y=n[0])})),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();function hw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yw=o.Math.Vector2;const gw=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4;hw(this,t),dw(this,"_renderedTileIndices",[]),dw(this,"_unrenderedTileIndices",[]),this._originalInputDimensions=e,this._tilingConfiguration=this._calculateTilingConfiguration(e,n,r),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._maskCache={}}var e;return(e=[{key:"_generateRandomTileIndices",value:function(t){for(var e=this,n=t.totalTileCount,r=function(){return Math.floor(Math.random()*e._tilingConfiguration.totalTileCount)},i=[];i.length<n;){for(var o=r();i.indexOf(o)>-1;)o=r();i.push(o)}return i}},{key:"_generateSpiralingTileIndices",value:function(t){var e=t.numHorizontalTiles,n=t.numVerticalTiles;return this._generateSpiralingIndicies(e,n)}},{key:"_generateSpiralingIndicies",value:function(t,e){for(var n=[],r=0,i=0,o=[0,-1],a=t%2==0,s=e%2==0,l=Math.floor(t/2)-a,u=Math.floor(e/2)-s,c=Math.pow(Math.max(t,e),2);c>0;c--)-t/2<r&&r<=t/2&&-e/2<i&&i<=e/2&&n.push((u+i)*t+(l+r)),(r===i||r<0&&r===-i||r>0&&r===1-i)&&(o=[-o[1],o[0]]),r+=o[0],i+=o[1];return n.reverse()}},{key:"calculateMaximumTileDimensions",value:function(){for(var t=this._tilingConfiguration.totalTileCount,e=new yw(0,0),n=0;n<t;n++){var r=this.getOriginalInputCoordinatesForTileAtIndex(n).getSize();e.x=Math.max(r.x,e.x),e.y=Math.max(r.y,e.y)}return e}},{key:"reset",value:function(){var t=this._tilingConfiguration,e=t.tileEdgeLength,n=t.overlappingFactor;this._tilingConfiguration=this._calculateTilingConfiguration(this._originalInputDimensions,e,n),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._renderedTileIndices=[],this._nextTileIndex=null}},{key:"getOriginalInputDimensions",value:function(){return this._originalInputDimensions}},{key:"getNextTileIndex",value:function(){return this.hasRenderedAllTiles()?-1:(this._nextTileIndex||(this._nextTileIndex=this._unrenderedTileIndices.pop()),this._nextTileIndex)}},{key:"getTilingConfiguration",value:function(){return this._tilingConfiguration}},{key:"getRenderedTileCount",value:function(){return this._renderedTileIndices.length}},{key:"getRenderingProgress",value:function(){return this.getRenderedTileCount()/this._tilingConfiguration.totalTileCount}},{key:"getTileCoordinates",value:function(t){return{rowIndex:Math.floor(t/this._tilingConfiguration.numHorizontalTiles),columnIndex:Math.floor(t%this._tilingConfiguration.numHorizontalTiles)}}},{key:"getOriginalInputCoordinatesForTileAtIndex",value:function(t){var e=this._tilingConfiguration,n=e.tileEdgeLength,r=e.overlappingFactor,i=e.fittedInputDimensions,a=e.numHorizontalTiles,s=e.numVerticalTiles,l=this.getTileCoordinates(t),u=l.rowIndex,c=l.columnIndex,f=Math.ceil(u*(n*(1-r))),p=Math.ceil(c*(n*(1-r))),h=this._originalInputDimensions.x/i.x,d=this._originalInputDimensions.y/i.y,y=Math.ceil(f*d),g=Math.ceil(p*h),m=Math.ceil(n*d),v=Math.ceil(n*h);return u===s-1&&y+m<this._originalInputDimensions.y&&(y+=this._originalInputDimensions.y-(y+m)),c===a-1&&g+v<this._originalInputDimensions.x&&(g+=this._originalInputDimensions.x-(g+v)),new o.Math.Rectangle(g,y,v,m)}},{key:"hasRenderedAllTiles",value:function(){return!(!this._tilingConfiguration||!this._renderedTileIndices)&&this._tilingConfiguration.totalTileCount-this._renderedTileIndices.length==0}},{key:"markTileAsRendered",value:function(){null!==this._nextTileIndex&&(!this._renderedTileIndices.indexOf(this._nextTileIndex)>-1&&this._renderedTileIndices.push(this._nextTileIndex),this._nextTileIndex=null)}},{key:"_calculateTilingConfiguration",value:function(t,e,n){var r=Math.ceil((1-n)*e),i=Math.ceil((t.x-e)/r)*r,a=e+i,s=Math.ceil((t.y-e)/r)*r,l=e+s,u=new o.Math.Vector2(a,l),c=Math.max(1,1+Math.round(s/r)),f=Math.max(1,1+Math.round(i/r));return{tileEdgeLength:e,overlappingFactor:n,fittedInputDimensions:u,numVerticalTiles:c,numHorizontalTiles:f,totalTileCount:c*f}}},{key:"getBlendLeftTopRightBottomForTile",value:function(t){var e=this.getTileCoordinates(t),n=e.rowIndex,r=e.columnIndex,i=this._tilingConfiguration,o=i.numVerticalTiles;return[0!==r?1:0,0!==n?1:0,r!==i.numHorizontalTiles-1?1:0,n!==o-1?1:0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function mw(t){return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _w(t,e){return(_w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bw(t,e){return!e||"object"!==mw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ww(t){return(ww=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const xw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_w(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ww(n);if(r){var i=ww(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return bw(this,t)});function o(){return vw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("AddFilter requires two inputs: x and y.");var t=this._getInputWithName("x"),e=this._getInputWithName("y");if(!Hb.isSameShape(t.logicalShape,e.logicalShape))throw Error("AddFilter inputs must have matching input shapes (".concat(t.logicalShape," vs. ").concat(e.logicalShape,")."));return t.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n        float yVal = getY(coords.x, coords.y, coords.z, coords.w);\n        \n        float result = xVal + yVal;\n        setOutput(result);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);function Ow(t){return(Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kw(t,e){return(kw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tw(t,e){return!e||"object"!==Ow(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cw(t){return(Cw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ew=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cw(n);if(r){var i=Cw(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tw(this,t)});function o(){return Sw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // WebGL doesn't offer tanh, taken from TFJS\n        float e2x = exp(-2.0 * abs(x));\n        float tanh = sign(x) * (1.0 - e2x) / (1.0 + e2x);\n\n        float rgbValue = (tanh * 150.0) + 127.5;\n        float clamped = clamp(rgbValue, 0.0, 255.0);\n        setOutput(clamped / 255.0);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);var Rw=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"calculatePadding",value:function(t,e,n,r,i,o,a){var s,l,u;if("same"===t){var c=((s=Math.ceil(e/r))-1)*r+o-e,f=((l=Math.ceil(n/i))-1)*i+a-n,p=Math.floor(c/2),h=c-p,d=Math.floor(f/2);u={top:p,bottom:h,left:d,right:f-d,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: ".concat(t));u={top:0,bottom:0,left:0,right:0,type:"VALID"},s=Math.ceil((e-o+1)/r),l=Math.ceil((n-a+1)/i)}return{padInfo:u,outHeight:s,outWidth:l}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function Dw(t){return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Iw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fw(t,e){return(Fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jw(t,e){return!e||"object"!==Dw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mw(t){return(Mw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mw(n);if(r){var i=Mw(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jw(this,t)});function o(){return Aw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this._options.inputs.length)throw Error("Conv2DFilter requires two inputs: x and w.");var t=this._getInputWithName("x"),e=this._getInputWithName("w"),n=Pw(t.logicalShape,4),r=n[0],i=n[1],o=n[2],a=(n[3],Pw(e.logicalShape,4)),s=a[0],l=a[1],u=a[3],c=this._options.stride,f=this._options.stride,p=Rw.calculatePadding(this._options.padding,i,o,c,f,s,l),h=p.padInfo,d=p.outHeight,y=p.outWidth;return this._outChannels=u,this._padInfo=h,[r,d,y,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var t=this._getInputWithName("x").logicalShape[3],e=this._padInfo.top,n=this._padInfo.left,r=4*Math.floor(t/4),i=t%4,o=this._options.stride;return"\n    const ivec2 strides = ivec2(".concat(o,", ").concat(o,");\n    const ivec2 pads = ivec2(").concat(e,", ").concat(n,");\n\n    const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int batch = coords[0];\n      int d2 = coords[3];\n\n      ivec2 xRCCorner = coords.yz * strides - pads;\n      int xRCorner = xRCCorner.x;\n      int xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (int wR = 0; wR < max_filter_iterations; wR++) {\n        if (wR >= w_shape[0]) { break; }\n        int xR = xRCorner + wR;\n        if (xR < 0 || xR >= x_shape[1]) {\n          continue;\n        }\n\n        for (int wC = 0; wC < max_filter_iterations; wC++) {\n          if (wC >= w_shape[1]) { break; }\n          int xC = xCCorner + wC;\n\n          if (xC < 0 || xC >= x_shape[2]) {\n            continue;\n          }\n\n          for (int d1 = 0; d1 < ").concat(r,"; d1 += 4) {\n            vec4 xValues = vec4(\n              getX(batch, xR, xC, d1),\n              getX(batch, xR, xC, d1 + 1),\n              getX(batch, xR, xC, d1 + 2),\n              getX(batch, xR, xC, d1 + 3)\n            );\n            vec4 wValues = vec4(\n              getW(wR, wC, d1, d2),\n              getW(wR, wC, d1 + 1, d2),\n              getW(wR, wC, d1 + 2, d2),\n              getW(wR, wC, d1 + 3, d2)\n            );\n\n            dotProd += dot(xValues, wValues);\n          }\n\n          if (").concat(1===i,") {\n            dotProd +=\n              getX(batch, xR, xC, ").concat(r,") *\n              getW(wR, wC, ").concat(r,", d2);\n          } else if (").concat(2===i,") {\n            vec2 xValues = vec2(\n              getX(batch, xR, xC, ").concat(r,"),\n              getX(batch, xR, xC, ").concat(r," + 1)\n            );\n            vec2 wValues = vec2(\n              getW(wR, wC, ").concat(r,", d2),\n              getW(wR, wC, ").concat(r," + 1, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          } else if (").concat(3===i,") {\n            vec3 xValues = vec3(\n              getX(batch, xR, xC, ").concat(r,"),\n              getX(batch, xR, xC, ").concat(r," + 1),\n              getX(batch, xR, xC, ").concat(r," + 2)\n            );\n            vec3 wValues = vec3(\n              getW(wR, wC, ").concat(r,", d2),\n              getW(wR, wC, ").concat(r," + 1, d2),\n              getW(wR, wC, ").concat(r," + 2, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          }\n        }\n      }\n      setOutput(dotProd);\n    }")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);Bw.prototype.availableOptions=Object.assign({stride:{type:o.OptionType.NUMBER,default:1},padding:{type:o.OptionType.STRING,default:"same"}},Mb.prototype.availableOptions);const zw=Bw;function Lw(t){return(Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ww(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hw(t,e){return(Hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gw(t,e){return!e||"object"!==Lw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vw(t){return(Vw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vw(n);if(r){var i=Vw(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Gw(this,t)});function o(){return Ww(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("DepthwiseConv2DFilter requires two inputs: x and w.");var t=this._getInputWithName("x"),e=this._getInputWithName("w"),n=Nw(t.logicalShape,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Nw(e.logicalShape,4),l=s[0],u=s[1],c=s[3];if(l>9||u>9)throw new Error("Filter heights are limited to 9. Change shader source if larger ones are required.");var f=this._options.stride,p=this._options.stride,h=Rw.calculatePadding(this._options.padding,i,o,f,p,l,u),d=h.padInfo,y=h.outHeight,g=h.outWidth;return this._outChannels=c*a,this._padInfo=d,[r,y,g,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var t,e=this._padInfo.top,n=this._padInfo.left,r=this._options,i=r.stride,o=r.padMethod;switch(o){case"zero":t="return coords;";break;case"edge":t="return ivec4(clamp(vec4(coords), vec4(0.0), vec4(x_shape - 1)));"}var a="\n    ivec4 convertCoordinatesForPadding(ivec4 coords) {\n      ".concat(t,"\n    }\n    "),s="zero"===o?"if (xR < 0 || xR >= x_shape[1]) { continue; }":"",l="zero"===o?"if (xC < 0 || xC >= x_shape[2]) { continue; }":"";return"\n      const ivec2 strides = ivec2(".concat(i,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(e,", ").concat(n,");\n      const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n      ").concat(a,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads; // current coordinates in x\n        int d2 = coords.w; // current channel index\n        int outChannels = w_shape[3] * x_shape[3];\n        int d1 = d2; // currently probed channel\n        int q = d2 - d1; // current filter index\n\n        int xRCorner = xRCCorner.x; // row index\n        int xCCorner = xRCCorner.y; // column index\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < max_filter_iterations; wR++) {\n          if (wR >= w_shape[0]) { break; }\n\n          int xR = xRCorner + wR; // x row index = current index + offset * y dilation\n          ").concat(s,"\n\n          for (int wC = 0; wC < max_filter_iterations; wC++) {\n            if (wC >= w_shape[1]) { break; }\n\n            int xC = xCCorner + wC; // x column index = current index + offset * x dilation\n            ").concat(l,"\n\n            float xVal = getX(convertCoordinatesForPadding(ivec4(batch, xR, xC, d1))); // Get value at current [batch, y, x, channel]\n            float wVal = getW(wR, wC, d1, q); // Get kernel value at current \n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);Zw.prototype.availableOptions=Object.assign({stride:{type:o.OptionType.NUMBER},padding:{type:o.OptionType.STRING,default:"same"},padMethod:{type:o.OptionType.STRING,default:"zero"}},Mb.prototype.availableOptions);const Xw=Zw;function Yw(t){return(Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $w(t,e){return($w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tx(t,e){return!e||"object"!==Yw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ex(t){return(ex=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$w(t,e)}(s,t);var e,n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ex(i);if(o){var n=ex(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tx(this,t)});function s(){return Qw(this,s),a.apply(this,arguments)}return e=s,r=[{key:"addFiltersForReduceSumOperationToGraph",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,2],r=t.getLogicalShapeAtIndex(e),i=s._computeOutAndReduceShape(r,n),o=qw(i,2),a=(o[0],o[1]),l=Hb.getSizeOfLogicalShape(a),u=Hb.getSizeOfLogicalShape(r)/l,c=[l,u],f=e===t.getLastIndex(),p={name:"x",logicalShape:c,type:f?jb.PREVIOUS:jb.INDEX};f||(p.data=e);var h=s._buildReduceFilter(p);t.addFilter(h,!1);for(var d=h.outputLogicalShape();1!==d[0];){var y={name:"x",type:jb.PREVIOUS,logicalShape:h.outputLogicalShape()};d=(h=s._buildReduceFilter(y)).outputLogicalShape(),t.addFilter(h)}return t.getLastIndex()}},{key:"_buildReduceFilter",value:function(t){var e=qw(t.logicalShape,2),n=e[0],r=e[1],i=s._computeWindowSize(n);return new s({inputs:[t],windowSize:i,batchSize:r})}},{key:"_computeWindowSize",value:function(t){if(t<=30)return t;for(var e=Math.floor(Math.sqrt(t));e<t;++e)if(t%e==0)return e;return t}},{key:"_computeOutAndReduceShape",value:function(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map((function(e){return t[e]}))]}}],(n=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape[0],e=this._options,n=e.batchSize,r=e.windowSize;return[Math.ceil(t/r),n]}},{key:"_getTensorOperationSource",value:function(){var t=this._options.windowSize,e=this._getInputWithName("x").logicalShape[0],n=4*Math.floor(t/4),r=t%4,i="";return e%t>0&&(i="\n      if (inIdx < 0 || inIdx >= x_shape[0]) {\n        return initalizationValue;\n      }\n      "),"\n      const float initializationValue = 0.0;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(i,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        // row, col\n        ivec2 coords = getOutputCoords();\n        int batch = coords[1];\n        int outIdx = coords[0];\n        int inOffset = outIdx * ").concat(t,";\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(n,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            // row, col\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            getValue(inIdx + 3, batch)\n          );\n\n          sumValue += dot(values, ones);\n        }\n\n        int inIdx = inOffset + ").concat(n,";\n        if (").concat(1===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if (").concat(2===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if (").concat(3===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        }\n        setOutput(sumValue);\n      }\n    ")}}])&&Jw(e.prototype,n),r&&Jw(e,r),s}(Mb);nx.prototype.availableOptions=Object.assign({axes:{type:o.OptionType.ARRAY,default:[1,2]},windowSize:{type:o.OptionType.NUMBER},batchSize:{type:o.OptionType.NUMBER}},Mb.prototype.availableOptions);const rx=nx;function ix(t){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ax(t,e){return(ax=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sx(t,e){return!e||"object"!==ix(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lx(t){return(lx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ux=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ax(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lx(n);if(r){var i=lx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return sx(this,t)});function o(){return ox(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec4 coords = getOutputCoords();\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n\n        // 'Sum' input consists of a single value which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n\n        // 'X' is a 4D tensor holding arbitrary float values\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // Calculate the mean\n        float mean = xSum / numValuesPerChannel;\n\n        // Calculate a single variance component (x_i - mean)^2\n        float result = pow((x - mean), 2.0);\n        setOutput(result);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);function cx(t){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function px(t,e){return(px=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hx(t,e){return!e||"object"!==cx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dx(t){return(dx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&px(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dx(n);if(r){var i=dx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return hx(this,t)});function o(){return fx(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x"),e=this._getInputWithName("variance"),n=this._getInputWithName("sum"),r=t.logicalShape[3];if(e.logicalShape[1]!==r||n.logicalShape[1]!==r)throw new Error("Variance and sum input depth must match x inputs channels for InstanceNormReluFilter.");return t.logicalShape}},{key:"_getTensorOperationSource",value:function(){var t=this.getAddRelu()?"\n      if (isNaN(result)) {\n        setOutput(result);\n      } else {\n        float relu = (result < 0.0) ? 0.0 : result;\n        setOutput(relu);\n      }\n    ":"setOutput(result);";return"\n      void main ()\n      {\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // 'variance' input consists of a single value per channel which holds the sum of all values in x reduced by it's mean and squared afterwards\n        float nonMeanedVariance = getVarianceFlat(coords.w);\n        float variance = nonMeanedVariance / numValuesPerChannel;\n\n        // 'sum' input consists of a single value per channel which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n        float mean = xSum / numValuesPerChannel;\n\n        float netmu = x - mean;\n        float sigmaEpsilonSqrt = sqrt(variance + 0.001);\n\n        float normalized = netmu / sigmaEpsilonSqrt;\n        \n        // Calculate the instance normalized value of x\n        float shift = getShiftFlat(coords.w);\n        float scale = getScaleFlat(coords.w);\n        float result = (scale * normalized) + shift;\n\n        // If it's not NaN, calculate relu\n        ".concat(t,"\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);yx.prototype.availableOptions=Object.assign({shift:{type:o.OptionType.NUMBER},scale:{type:o.OptionType.NUMBER},addRelu:{type:o.OptionType.BOOLEAN,default:!0}},Mb.prototype.availableOptions);const gx=yx;function mx(t){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wx(t,e){return(wx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xx(t,e){return!e||"object"!==mx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ox(t){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wx(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ox(n);if(r){var i=Ox(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return xx(this,t)});function a(){var t;bx(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._uniforms.sourceSizeRC={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms.targetSizeRC={type:o.UniformType.FLOAT2,value:[0,0]},t}return(e=[{key:"_calculateOutputShape",value:function(){var t=vx(this._getInputWithName("x").logicalShape,4),e=t[0],n=t[3],r=vx(this._options.size,2);return[e,r[0],r[1],n]}},{key:"_updateAdditionalUniforms",value:function(t){var e=vx(this._getInputWithName("x").logicalShape,3),n=(e[0],e[1]),r=e[2],i={targetSizeRC:this.getSize(),sourceSizeRC:[n,r]};t.setUniforms(i)}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec2 sourceSizeRC;\n      uniform vec2 targetSizeRC;\n\n      void main() {\n        vec2 effectiveInSize = sourceSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveOutSize = targetSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveInputOverOutputRatioRC = effectiveInSize / effectiveOutSize;\n\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(min(sourceSizeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Mb);Sx.prototype.availableOptions=Object.assign({size:{type:o.OptionType.ARRAY,required:!0},alignCorners:{type:o.OptionType.BOOLEAN,default:!0}},Mb.prototype.availableOptions);const kx=Sx;function Tx(t){return(Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ex(t,e){return(Ex=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rx(t,e){return!e||"object"!==Tx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dx(t){return(Dx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Px=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ex(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dx(n);if(r){var i=Dx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Rx(this,t)});function o(){return Cx(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var e=this.getInputs()[0].logicalShape;if(t.length!==e.length)throw new Error("Not enough or too many paddings for input shape ".concat(e));return t.map((function(t,n){return t[0]+e[n]+t[1]}))}},{key:"_getTensorOperationSource",value:function(){var t=this.getInputs()[0].logicalShape.length,e=this._options.paddings.map((function(t){return t[0]})).join(","),n="vec".concat(t),r=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t).join(",");return"\n      i".concat(n," start = i").concat(n,"(").concat(e,");\n\n      void main () {\n        i").concat(n," outC = getOutputCoords();\n        ").concat(n," coordsInInput = ").concat(n,"(outC - start);\n        i").concat(n," coords = i").concat(n,"(clamp(coordsInInput, ").concat(n,"(0.0), ").concat(n,"(x_shape - 1)));\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);Px.prototype.availableOptions=Object.assign({paddings:{type:o.OptionType.ARRAY,required:!0}},Mb.prototype.availableOptions);const Ix=Px;function Ax(t){return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jx(t,e){return(jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mx(t,e){return!e||"object"!==Ax(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bx(t){return(Bx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const zx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jx(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bx(n);if(r){var i=Bx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Mx(this,t)});function o(){return Fx(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      float kernel[9];\n      vec2 offset[9];\n      float factor = 0.1;\n    \n      void main ()\n      {\n        kernel[0] = 0.;\n        kernel[1] = -1. * factor;\n        kernel[2] = 0.;\n        kernel[3] = -1. * factor;\n        kernel[4] = 1. + 4. * factor;\n        kernel[5] = -1. * factor;\n        kernel[6] = 0.;\n        kernel[7] = -1. * factor;\n        kernel[8] = 0.;\n\n        float step_w = 1.0 / float(x_sizeRC.y);\n        float step_h = 1.0 / float(x_sizeRC.x);\n\n        offset[0] = vec2(-step_w, -step_h);\n        offset[1] = vec2(0.0, -step_h);\n        offset[2] = vec2(step_w, -step_h);\n        offset[3] = vec2(-step_w, 0.0);\n        offset[4] = vec2(0.0, 0.0);\n        offset[5] = vec2(step_w, 0.0);\n        offset[6] = vec2(-step_w, step_h);\n        offset[7] = vec2(0.0, step_h);\n        offset[8] = vec2(step_w, step_h);\n\n        vec2 uv = (gl_FragCoord.xy + halfCR) / x_texRC.yx;\n        vec4 sum = vec4(0.0);\n        for (int i = 0; i < 9; i++) {\n          vec4 color = texture2D(x, uv.xy + offset[i]);\n          sum += color * kernel[i];\n        }\n\n        gl_FragColor = sum;\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);function Lx(t){return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ux(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ux(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ux(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wx(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Hx(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Wx(o,r,i,a,s,"next",t)}function s(t){Wx(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Gx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zx(t,e,n){return e&&Vx(t.prototype,e),n&&Vx(t,n),t}function Xx(t,e){return(Xx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yx(t,e){return!e||"object"!==Lx(e)&&"function"!=typeof e?qx(t):e}function qx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kx(t){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xx(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kx(r);if(i){var n=Kx(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Yx(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Gx(this,a),Qx(qx(t=o.call(this,e)),"_onWeightsUpdatedCallback",null),Qx(qx(t),"_finalConvIndex",-1),t._tilingController=n,t._disposed=!1,t}return Zx(a,[{key:"isDirty",value:function(){return!this._tilingController||!this._tilingController.hasRenderedAllTiles()}},{key:"isDisposed",value:function(){return null===this._graph}},{key:"isReady",value:function(){return!this.isDisposed()&&this._graph.isFinished()}},{key:"getTilingController",value:function(){return this._tilingController}},{key:"onWeightsUpdated",value:function(t){this._onWeightsUpdatedCallback=t}}],[{key:"createWithOptions",value:function(t,e,n){var r=t.tileEdgeLength||a.prototype.availableOptions.tileEdgeLength.default,i=t.overlappingFactor||a.prototype.availableOptions.overlappingFactor.default,o=new a(t,new gw(e,r,i));return o.initGraph(n).then((function(){return o}))}}]),Zx(a,[{key:"updateInputDimensions",value:function(t){var e=this._options.tileEdgeLength||a.prototype.availableOptions.tileEdgeLength.default,n=this._options.overlappingFactor||a.prototype.availableOptions.overlappingFactor.default;this._tilingController=new gw(t,e,n)}},{key:"updateWithWeightsFromURL",value:(n=Hx(l().mark((function t(e){var n,r,i,o,a,s,u,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new kb.JSONLoader(e),t.next=3,n.load();case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(new Error("Could not load weight map from ".concat(e))));case 6:for(i=0;r["transform/residual/res_".concat(i+1,"/conv1/depthwise_weights")];)i++;if(o=r["transform/expand/final_conv/depthwise_weights"].logicalShape,a=this._graph._filterStack[this._finalConvIndex]._getInputWithName("w").logicalShape,s=Hb.isSameShape(a,o),u=this._residualBlockCount===i,c=this,!s||!u){t.next=17;break}return t.abrupt("return",this._graph.updateWeights(r).then((function(){c._onWeightsUpdatedCallback&&c._onWeightsUpdatedCallback(),c.getTilingController().reset()})));case 17:return t.abrupt("return",Promise.reject(new Error("Model architectures differ.")));case 18:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"execute",value:function(t,e,n){var r=this._tilingController,i=this._graph,o=r.getNextTileIndex();if(!i.isFinished())throw new Error("Can't execute an unfinished graph.");var a=this._tilingController.getOriginalInputCoordinatesForTileAtIndex(o),s=a.x,l=a.y,u=a.height,c=a.width,f=new q.Rectangle(s,l,c,u),p=this._tilingController.getBlendLeftTopRightBottomForTile(o),h=this._tilingController.getTilingConfiguration().overlappingFactor;return i.render(t,e,n,f,p,h).then((function(){r.markTileAsRendered(o)}))}},{key:"initGraph",value:(e=Hx(l().mark((function t(e){var n,r,i,o,a,s,u,c,f,p=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._options,r=n.weightURL,i=n.tileEdgeLength,o=this.getTilingController(),a=o.calculateMaximumTileDimensions(),s=o.getOriginalInputCoordinatesForTileAtIndex(0).getSize(),u=new kb.JSONLoader(r),t.next=7,u.load();case 7:for(c=t.sent,f=0;c["transform/residual/res_".concat(f+1,"/conv1/depthwise_weights")];)f++;return this._residualBlockCount=f,this._graph=new pw(e,c,a,i),this._graph.addFilter(new kx({inputs:[{name:"x",type:jb.PREVIOUS}],size:[i,i]})),this._addStyleTransferOperationsToGraph(this._graph,c,s),t.abrupt("return",this._graph.load(e).then((function(){p._tilingController.reset()})));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_addStyleTransferOperationsToGraph",value:function(t,e,n){this._weightMap=e;for(var r=this._addDepthwiseSeparableConvolution("transform/contract/conv1",t,1,1,"same"),i=this._addDepthwiseSeparableConvolution("transform/contract/conv2",t,r,2,"same"),o=this._addDepthwiseSeparableConvolution("transform/contract/conv3",t,i,2,"same"),a=1;a<=this._residualBlockCount;a++){var s="transform/residual/res_".concat(a);o=this._addResidualBlock(s,t,o)}var l=this._addUpsampling("transform/expand/up_1",t,o),u=this._addUpsampling("transform/expand/up_2",t,l);this._addDepthwiseSeparableConvolution("transform/expand/final_conv",t,u,1,"same",!1),t.addFilter(new Ew({inputs:[{name:"x",type:jb.PREVIOUS}]}));var c=t.addFilter(new kx({inputs:[{name:"x",type:jb.PREVIOUS}],size:[n.y,n.x]})),f=this._addEdgePadding(t,c,3,1),p=this._addPackFilterToStack(t,f);this._addSharpening(t,p),this._weightMap=null}},{key:"_addDepthwiseSeparableConvolution",value:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=t+"/depthwise_weights",s=t+"/pointwise_weights",l=e.getLastIndex()===n,u=e.addFilter(new Xw({inputs:[{name:"x",type:l?jb.PREVIOUS:jb.DATA,data:n},{name:"w",type:jb.DATA,data:a}],stride:r,padding:"same",padMethod:"edge"}));a.indexOf("final_conv")>=0&&(this._finalConvIndex=u);var c=e.addFilter(new zw({inputs:[{name:"x",type:jb.PREVIOUS},{name:"w",type:jb.DATA,data:s}],stride:1,padding:"valid"})),f=rx.addFiltersForReduceSumOperationToGraph(e,c,[1,2]),p=e.addFilter(new ux({inputs:[{name:"sum",type:jb.PREVIOUS},{name:"x",type:jb.INDEX,data:c}]}));rx.addFiltersForReduceSumOperationToGraph(e,p,[1,2]);var h=t+"/instance_norm/shift",d=t+"/instance_norm/scale";return e.addFilter(new gx({inputs:[{name:"variance",type:jb.PREVIOUS},{name:"sum",type:jb.INDEX,data:f},{name:"x",type:jb.INDEX,data:c},{name:"shift",type:jb.DATA,data:h},{name:"scale",type:jb.DATA,data:d}],addRelu:o})),e.getLastIndex()}},{key:"_addResidualBlock",value:function(t,e,n){var r=this._addDepthwiseSeparableConvolution(t+"/conv1",e,n,1,"same"),i=this._addDepthwiseSeparableConvolution(t+"/conv2",e,r,1,"same",!1),o=e.getLastIndex()===i;return e.addFilter(new xw({inputs:[{name:"x",type:jb.INDEX,data:n},{name:"y",type:o?jb.PREVIOUS:jb.INDEX,data:i}]})),e.getLastIndex()}},{key:"_addUpsampling",value:function(t,e,n){var r=Nx(e.getLogicalShapeAtIndex(n),3),i=(r[0],r[1]),o=r[2],a=e.getLastIndex()===n,s=e.addFilter(new kx({inputs:[{name:"x",type:a?jb.PREVIOUS:jb.INDEX,data:n}],size:[2*i,2*o]}));return this._addDepthwiseSeparableConvolution(t+"/conv",e,s,1,"same")}},{key:"_addEdgePadding",value:function(t,e,n,r){var i=Nx(t.getLogicalShapeAtIndex(e),4),o=i[1],a=i[2],s=(i[3],t.getLastIndex()===e),l=Rw.calculatePadding("same",o,a,r,r,n,n).padInfo,u=[[0,0],[l.top,l.bottom],[l.left,l.right],[0,0]];return t.addFilter(new Ix({inputs:[{name:"x",type:s?jb.PREVIOUS:jb.INDEX,data:e}],paddings:u}))}},{key:"_addPackFilterToStack",value:function(t,e){var n=t.getLogicalShapeAtIndex(e),r=t.getLastIndex()===e,i=new Kb({inputs:[{name:"x",type:r?jb.PREVIOUS:jb.INDEX,data:e}],outputSize:n.slice(1,3)});if(3===n[3])return t.addFilter(i);throw new Error("Couldn't add pack filter due to channel count mismatch (expected RGB output).")}},{key:"_addSharpening",value:function(t,e){var n=t.getLastIndex()===e;t.addFilter(new zx({inputs:[{name:"x",type:n?jb.PREVIOUS:jb.INDEX,data:e}]}))}},{key:"dispose",value:function(){this._graph&&this._graph.dispose(),this._graph=null}}]),a}(o.Configurable);Jx.prototype.availableOptions={weightURL:{type:o.OptionType.STRING,required:!0},tileEdgeLength:{type:o.OptionType.NUMBER,default:256},overlappingFactor:{type:o.OptionType.NUMBER,default:.4}};const $x=Jx;function tO(t){return(tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nO(t,e){return(nO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rO(t,e){return!e||"object"!==tO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function iO(t){return(iO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const oO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nO(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=iO(n);if(r){var i=iO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return rO(this,t)});function o(){return eO(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._options.inputs[0].logicalShape}},{key:"_getTensorOperationSource",value:function(){var t="\nconst float FLOAT_MAX = 1.70141184e38;\nconst float FLOAT_MIN = 1.17549435e-38;\n\nlowp vec4 encode_float(highp float v) {\n  if (isNaN(v)) {\n    return vec4(255, 255, 255, 255);\n  }\n\n  highp float av = abs(v);\n\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  highp float e = floor(log2(av));\n  highp float m = exp2(fract(log2(av))) - 1.0;\n\n  c[2] = floor(128.0 * m);\n  m -= c[2] / 128.0;\n  c[1] = floor(32768.0 * m);\n  m -= c[1] / 32768.0;\n  c[0] = floor(8388608.0 * m);\n\n  highp float ebias = e + 127.0;\n  c[3] = floor(ebias / 2.0);\n  ebias -= c[3] * 2.0;\n  c[2] += floor(ebias) * 128.0;\n\n  c[3] += 128.0 * step(0.0, -v);\n\n  return c / 255.0;\n}\n    ";return 4===this._options.inputs[0].logicalShape.length?t+="\nvoid main ()\n{\n  ivec4 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n  gl_FragColor = encode_float(xVal);\n}\n    ":t+="\nvoid main ()\n{\n  ivec2 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y);\n  gl_FragColor = encode_float(xVal);\n}\n    ",t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);function aO(t){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lO(t,e){return(lO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uO(t,e){return!e||"object"!==aO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cO(t){return(cO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lO(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cO(n);if(r){var i=cO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return uO(this,t)});function o(){return sO(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var e=this.getInputs()[0].logicalShape;if(t.length!==e.length)throw new Error("Not enough or too many paddings for input shape ".concat(e));return t.map((function(t,n){return t[0]+e[n]+t[1]}))}},{key:"_getTensorOperationSource",value:function(){var t=this.getInputs()[0].logicalShape.length,e=this._options.paddings.map((function(t){return t[0]})).join(","),n=this._options.paddings.map((function(t){return t[1]})).join(","),r="\n      int reflectedIndexInInputForPadBefore(int coord, int start) {\n        return int(abs(float(start - coord)));\n      }\n\n      int reflectedIndexInInputForPadAfter(int coord, int start,\n        int length, int afterPad) {\n        int indexInPad = coord - start - length;\n        int index = length - indexInPad - 2;\n        return index;\n      }\n    ",i="\n      ivec2 get2DCoordinates(\n        ivec2 outC,\n        ivec2 coords,\n        ivec2 start,\n        ivec2 end,\n        ivec2 afterPad,\n        int height,\n        int width) {\n\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          // Select non-padding rows\n          if (outC.x >= start.x && outC.x < start.x + height) {\n            // Select before pad columns\n            if (outC.y < start.y) {\n              int yIndex =\n                reflectedIndexInInputForPadBefore(outC.y, start.y);\n              return ivec2(coords.x, yIndex);\n            // Select after pad columns\n            } else if (outC.y >= start.y + width) {\n              int yIndex =\n                reflectedIndexInInputForPadAfter(outC.y, start.y,\n                  width, afterPad.y);\n              return ivec2(coords.x, yIndex);\n            }\n\n          // Select top and bottom rows, but only non-padding columns\n          } else if (outC.y >= start.y && outC.y < start.y + height) {\n            // Select top padding rows\n            if (outC.x < start.x) {\n              int xIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              return ivec2(xIndex, coords.y);\n            // Select bottom padding rows\n            } else {\n              int xIndex =\n                reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                  afterPad.x);\n              return ivec2(xIndex, coords.y);\n            }\n\n          // Handle diagonal corner cases\n          } else if (outC.x < start.x && outC.y < end.y) { // Top Left\n            ivec2 index = outC - start;\n            vec2 absIndex = vec2(abs(float(index.x)), abs(float(index.y)));\n            return ivec2(int(absIndex.x), int(absIndex.y));\n          } else if (outC.x < start.x && outC.y >= end.y) { // Top Right\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            int targetRow =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y < end.y) { // Bottom Left\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadBefore(outC.y, start.y);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y >= end.y) { // Bottom Right\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            return ivec2(targetRow, targetCol);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ";return 1===t?"\n        int start = ".concat(e,";\n        int end = start + x_shape;\n        int width = x_shape[0];\n        int afterPad = ").concat(n,";\n\n        ").concat(r,"\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            int index = reflectedIndexInInputForPadBefore(outC, start);\n            setOutput(getX(index));\n          } else if (outC >= end) {\n            int index =\n            reflectedIndexInInputForPadAfter(outC, start, width, afterPad);\n            setOutput(getX(index));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "):2===t?"\n        ivec2 start = ivec2(".concat(e,");\n        ivec2 end = start + x_shape;\n        ivec2 afterPad = ivec2(").concat(n,");\n        int height = x_shape[0];\n        int width = x_shape[1];\n\n        ").concat(r,"\n        ").concat(i,"\n\n        void main() {\n          ivec2 outC = getOutputCoords();\n          ivec2 coords = outC - start;\n          ivec2 coordsInSrcVec = get2DCoordinates(\n            outC,\n            coords,\n            start,\n            end,\n            afterPad,\n            height,\n            width\n          );\n          setOutput(getX(coordsInSrcVec.x, coordsInSrcVec.y));\n        }\n      "):4===t?"\n        ivec4 start = ivec4(".concat(e,");\n        ivec4 end = start + x_shape;\n        ivec4 afterPad = ivec4(").concat(n,");\n        int length = x_shape[0];\n\n        ").concat(r,"\n        ").concat(i,"\n        ").concat("\n      ivec3 get3DCoordinates(\n        ivec3 outC,\n        ivec3 coords,\n        ivec3 start,\n        ivec3 end,\n        ivec3 afterPad,\n        int length,\n        int height,\n        int width) {\n        if (any(lessThan(outC, start))\n          || any(greaterThanEqual(outC, end))) {\n\n          // Calculate the current positions inner indices in the original\n          // input tensor\n          ivec2 innerIndices = get2DCoordinates(\n            ivec2(outC.y, outC.z),\n            ivec2(coords.y, coords.z),\n            ivec2(start.y, start.z),\n            ivec2(end.y, end.z),\n            ivec2(afterPad.y, afterPad.z),\n            height,\n            width\n          );\n\n          if (outC.x < start.x) {\n            int outerIndex =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else if (outC.x >= end.x) {\n            int outerIndex = reflectedIndexInInputForPadAfter(\n              outC.x, start.x, length, afterPad.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else {\n            return ivec3(coords.x, innerIndices.x, innerIndices.y);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ","\n\n        void main() {\n          ivec4 outC = getOutputCoords();\n          ivec4 coords = outC - start; // Coords in input\n\n          if (any(lessThan(outC, start))\n              || any(greaterThanEqual(outC, end))) {\n\n            ivec3 innerIndices = get3DCoordinates(\n              ivec3(outC.y, outC.z, outC.w),\n              ivec3(coords.y, coords.z, coords.w),\n              ivec3(start.y, start.z, start.w),\n              ivec3(end.y, end.z, end.w),\n              ivec3(afterPad.y, afterPad.z, afterPad.w),\n              x_shape[1],\n              x_shape[2],\n              x_shape[3]\n            );\n\n            if (outC.x < start.x) {\n              int outerIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              setOutput(getX(\n                  outerIndex,\n                  innerIndices.x,\n                  innerIndices.y,\n                  innerIndices.z\n                ));\n            } else if (outC.x >= end.x) {\n              int outerIndex = reflectedIndexInInputForPadAfter(\n                outC.x, start.x, length, afterPad.x);\n              setOutput(getX(\n                outerIndex,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z\n              ));\n            } else {\n              setOutput(getX(\n                coords.x,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z));\n            }\n          } else {\n            setOutput(getX(coords.x, coords.y, coords.z, coords.w));\n          }\n        }\n      "):void 0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Mb);fO.prototype.availableOptions=Object.assign({paddings:{type:o.OptionType.ARRAY,required:!0}},Mb.prototype.availableOptions);const pO={AddFilter:xw,Conv2DDepthwiseFilter:Xw,Conv2DFilter:zw,EdgePadFilter:Ix,EncodeFloatFilter:oO,FeatheredMaskingFilter:rw,FinalizeStyleFilter:Ew,InstanceNormReluFilter:gx,PackRGBAFilter:Kb,ReduceSumFilter:rx,ReflectionPadFilter:fO,ResizeBilinearFilter:kx,SharpenFilter:zx,TensorFilter:Mb,UnpackRGBAFilter:Wb,VariancePreparationFilter:ux};function hO(t){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dO(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function yO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gO(t,e,n){return(gO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vO(t,e,n){return e&&mO(t.prototype,e),n&&mO(t,n),t}function _O(t,e){return(_O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bO(t,e){return!e||"object"!==hO(e)&&"function"!=typeof e?wO(t):e}function wO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xO(t){return(xO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var SO=o.Engine.Filters.OverlayFilter,kO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_O(t,e)}(s,t);var e,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xO(r);if(i){var n=xO(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return bO(this,t)});function s(){var t;yO(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return OO(wO(t=a.call.apply(a,[this].concat(n))),"_renderStart",null),t._renderedOverlaySprite=new o.Engine.Sprite,t._renderedOverlayContainer=new o.Engine.Container,t._renderedOverlayContainer.addChild(t._renderedOverlaySprite),t._overlayFilter=new SO,t._overlayFilter.getShaderForRenderer(t._sdk.getRenderer()),t._sdk.on("new-image",t._onNewImage.bind(wO(t))),t._prepareRenderTargets(),t}return vO(s,null,[{key:"isSupported",value:function(t){if(t.getRenderer().isOfType(bl.RendererType.WEBGL)){var e=t.getRenderer().getContext(),n=uw.determineSupportedConfiguration(e).environmentSupported,r=!o.Utils.isMobile();return n&&r}return!1}}]),vO(s,[{key:"setOption",value:function(t,e){var n=this;if("styleTransferModel"===t){var r=this._options.styleTransferModel;r&&r!==e&&this._renderInputImageIntoOverlayTarget()}if(gO(xO(s.prototype),"setOption",this).call(this,t,e),"identifier"===t||"styleTransferModel"===t){var i=this._options.styleTransferModel;i&&i.onWeightsUpdated((function(){n._renderInputImageIntoOverlayTarget()}))}}},{key:"_onNewImage",value:function(){this.dispose(),this._prepareRenderTargets();var t=this.getStyleTransferModel();t&&t.updateInputDimensions(this._exifAdjustedInputDimensions)}},{key:"_prepareRenderTargets",value:function(){var t=this._sdk.getRenderer(),e=t.getContext(),n=this._sdk.getInputTexture(),r=n.getDimensions(),i=this._sdk.getOperationsStack().getByIdentifier("exif-orientation");if(i){r=i.getNewDimensions(r);var a=new o.Engine.WebGLRenderTarget(t,r.x,r.y,1);a.setFrame(new o.Math.Rectangle(0,0,r.x,r.y));var s=t.getOrCreateGLTexture(a.getBaseTexture()),l=i.applyTo(this._sdk.getImage());e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),this._modelInputTarget=a}else{var u=new o.Engine.WebGLRenderTarget(t,r.x,r.y,1);u.setFrame(new o.Math.Rectangle(0,0,r.x,r.y)),u._baseTexture=n.getBaseTexture();var c=u._baseTexture.getGLTextureForRenderer(t);c||(c=e.createTexture(),u._baseTexture.setGLTextureForRenderer(c,t)),u._texture=c,e.bindTexture(e.TEXTURE_2D,c),e.bindFramebuffer(e.FRAMEBUFFER,u._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c,0),this._modelInputTarget=u}this._overlayRenderTexture=new o.Engine.RenderTexture(t,r.x,r.y);var f=this._overlayRenderTexture.getBaseTexture();f.setGLUnit(5),this._sdk.getRenderer().updateTexture(f,!1),this._overlayRenderTarget=this._overlayRenderTexture.getRenderTarget(),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture),this._exifAdjustedInputDimensions=r,this._renderInputImageIntoOverlayTarget()}},{key:"_renderInputImageIntoOverlayTarget",value:function(){var t=this._sdk.getRenderer().getContext(),e=this._modelInputTarget.getFrame().getSize();this._modelInputTarget.activate(),t.bindTexture(t.TEXTURE_2D,this._overlayRenderTarget.getTexture()),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,e.x,e.y,0)}},{key:"_render",value:(e=l().mark((function t(e){var n,r,i,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._options,r=n.intensity,i=n.blendMode,a=this.getStyleTransferModel()){t.next=6;break}return this._sprite.setFilters([]),this._renderTexture.render(this._container),t.abrupt("return",o.Promise.resolve());case 6:if(!a.isDisposed()){t.next=9;break}return t.next=9,a.initGraph(this._sdk.getRenderer());case 9:if(!a.isDirty()){t.next=12;break}return t.next=12,a.execute(this._sdk.getRenderer(),this._modelInputTarget,this._overlayRenderTarget);case 12:return this._overlayFilter.set({blendMode:i,overlayImage:this._overlayRenderTarget.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),t.abrupt("return",o.Promise.resolve(a.isDirty()));case 16:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(t){dO(o,r,i,a,s,"next",t)}function s(t){dO(o,r,i,a,s,"throw",t)}a(void 0)}))},function(t){return n.apply(this,arguments)})},{key:"dispose",value:function(){if(gO(xO(s.prototype),"dispose",this).call(this),this._renderedOverlaySprite.dispose(),this._overlayFilter.dispose(),this._overlayRenderTarget.dispose(),this._modelInputTarget){var t=this._modelInputTarget._framebuffer;this._sdk.getRenderer().getContext().deleteFramebuffer(t),this._modelInputTarget=null}var e=this._options.styleTransferModel;e&&e.dispose()}}]),s}(o.Operation);kO.identifier="artfilter",kO.prototype.availableOptions={identifier:{type:o.OptionType.STRING,default:""},styleTransferModel:{type:o.OptionType.OBJECT,default:null},intensity:{type:o.OptionType.NUMBER,default:1},blendMode:{type:o.OptionType.NUMBER,default:SO.BLEND_MODES.NORMAL,available:Object.keys(SO.BLEND_MODES).map((function(t){return SO.BLEND_MODES[t]}))}},kO.StyleTransferModel=$x,kO.TensorFilters=pO,a().Operations.ArtFilterOperation=kO;const TO=kO;function CO(t){return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RO(t,e){return(RO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DO(t,e){return!e||"object"!==CO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PO(t){return(PO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IO=o.Math.Vector2,AO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RO(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=PO(n);if(r){var i=PO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return DO(this,t)});function a(){var t;EO(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._flipContainer=new o.Engine.Container,t}return(e=[{key:"_render",value:function(t){var e=this._options,n=e.position,r=e.rotation,i=e.scale,a=e.pivot,s=e.outputResolution,l=this._sdk.getTextureScale(),u=s.clone().multiply(l).ceil();return this._renderTexture.resizeTo(u),this._sprite.setRotation(r),this._sprite.setPosition(n),this._sprite.setPivot(a),this._sprite.setScale(i),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(e).ceil()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);AO.identifier="output",AO.prototype.availableOptions={position:{type:o.OptionType.VECTOR2,default:new IO(0,0)},rotation:{type:o.OptionType.NUMBER,default:0},scale:{type:o.OptionType.VECTOR2,default:new IO(1,1)},pivot:{type:o.OptionType.VECTOR2,default:new IO(0,0)},outputResolution:{type:o.OptionType.VECTOR2,default:new IO(100,100)}},a().Operations.OutputOperation=AO;const FO=AO;function jO(t){return(jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BO(t,e){return(BO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zO(t,e){return!e||"object"!==jO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function LO(t){return(LO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o.Math.Vector2;var NO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BO(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=LO(n);if(r){var i=LO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return zO(this,t)});function a(){var t;MO(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._flipContainer=new o.Engine.Container,t}return(e=[{key:"_render",value:function(t){var e=this._options,n=(e.outputResolution,e.flipHorizontally),r=e.flipVertically;if(n||r){var i=t.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(i):(this._flipRenderTexture=new o.Engine.RenderTexture(this._sdk.getRenderer(),i.x,i.y),this._flipSprite=new o.Engine.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));var a=n?-1:1,s=r?-1:1;this._flipSprite.setScale(a,s),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(i.x*(1-a)*.5,i.y*(1-s)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return o.Promise.resolve()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);NO.identifier="flip",NO.prototype.availableOptions={flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.FlipOperation=NO;var UO=[Y,pt,_l,Dl,Yl,pu,Pu,Nu,Qu,yc,_f,ob,yb,Sb,TO,FO,NO];a().AllOperations=UO;const WO=UO},3638:t=>{var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}t.exports={stackBlurCanvasRGBA:function(t,i,o,a,s,l){if(!(isNaN(l)||l<1)){l|=0;var u,c,f,p,h,d,y,g,m,v,_,b,w,x,O,S,k,T,C,E,R,D,P,I,A,F=t.data,j=l+l+1,M=a-1,B=s-1,z=l+1,L=z*(z+1)/2,N=new r,U=N;for(f=1;f<j;f++)U=U.next=new r,f==z&&(A=U);U.next=N;var W=null,H=null;y=d=0;var G=e[l],V=n[l];for(c=0;c<s;c++){for(S=k=T=C=g=m=v=_=0,b=z*(E=F[d]),w=z*(R=F[d+1]),x=z*(D=F[d+2]),O=z*(P=F[d+3]),g+=L*E,m+=L*R,v+=L*D,_+=L*P,U=N,f=0;f<z;f++)U.r=E,U.g=R,U.b=D,U.a=P,U=U.next;for(f=1;f<z;f++)p=d+((M<f?M:f)<<2),g+=(U.r=E=F[p])*(I=z-f),m+=(U.g=R=F[p+1])*I,v+=(U.b=D=F[p+2])*I,_+=(U.a=P=F[p+3])*I,S+=E,k+=R,T+=D,C+=P,U=U.next;for(W=N,H=A,u=0;u<a;u++)F[d+3]=P=_*G>>V,0!==P?(P=255/P,F[d]=(g*G>>V)*P,F[d+1]=(m*G>>V)*P,F[d+2]=(v*G>>V)*P):F[d]=F[d+1]=F[d+2]=0,g-=b,m-=w,v-=x,_-=O,b-=W.r,w-=W.g,x-=W.b,O-=W.a,p=y+((p=u+l+1)<M?p:M)<<2,g+=S+=W.r=F[p],m+=k+=W.g=F[p+1],v+=T+=W.b=F[p+2],_+=C+=W.a=F[p+3],W=W.next,b+=E=H.r,w+=R=H.g,x+=D=H.b,O+=P=H.a,S-=E,k-=R,T-=D,C-=P,H=H.next,d+=4;y+=a}for(u=0;u<a;u++){for(k=T=C=S=m=v=_=g=0,b=z*(E=F[d=u<<2]),w=z*(R=F[d+1]),x=z*(D=F[d+2]),O=z*(P=F[d+3]),g+=L*E,m+=L*R,v+=L*D,_+=L*P,U=N,f=0;f<z;f++)U.r=E,U.g=R,U.b=D,U.a=P,U=U.next;for(h=a,f=1;f<=l;f++)d=h+u<<2,g+=(U.r=E=F[d])*(I=z-f),m+=(U.g=R=F[d+1])*I,v+=(U.b=D=F[d+2])*I,_+=(U.a=P=F[d+3])*I,S+=E,k+=R,T+=D,C+=P,U=U.next,f<B&&(h+=a);for(d=u,W=N,H=A,c=0;c<s;c++)F[3+(p=d<<2)]=P=_*G>>V,P>0?(P=255/P,F[p]=g*G>>V,F[p+1]=m*G>>V,F[p+2]=v*G>>V):F[p]=F[p+1]=F[p+2]=0,g-=b,m-=w,v-=x,_-=O,b-=W.r,w-=W.g,x-=W.b,O-=W.a,p=u+((p=c+z)<B?p:B)*a<<2,g+=S+=W.r=F[p],m+=k+=W.g=F[p+1],v+=T+=W.b=F[p+2],_+=C+=W.a=F[p+3],W=W.next,b+=E=H.r,w+=R=H.g,x+=D=H.b,O+=P=H.a,S-=E,k-=R,T-=D,C-=P,H=H.next,d+=a}}}}},1512:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),i.apply(this,arguments)}return(e=[{key:"getLabel",value:function(){var t=u[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic"}return t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(r.Configurable);c.prototype.availableOptions={identifier:{type:r.OptionType.STRING,required:!0},fontFamily:{type:r.OptionType.STRING,required:!0},fontWeight:{type:r.OptionType.ALL,default:400},fontStyle:{type:r.OptionType.STRING,default:"normal"},textMetrics:{type:r.OptionType.OBJECT,default:null},provider:{type:r.OptionType.STRING,available:["google","file"]},filePath:{type:r.OptionType.STRING},default:{type:r.OptionType.BOOLEAN,default:!1},font:{type:r.OptionType.OBJECT}}},5576:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){return o(this,i),r.apply(this,arguments)}return i}(r.Configurable);u.prototype.availableOptions={identifier:{type:r.OptionType.STRING,required:!0},defaultName:{type:r.OptionType.STRING,required:!0},ratio:{type:r.OptionType.ALL,required:!1,default:null},selected:{type:r.OptionType.BOOLEAN,required:!1},dimensions:{type:r.OptionType.VECTOR2,required:!1},lockDimensions:{type:r.OptionType.BOOLEAN,required:!1,default:null},forceDimensions:{type:r.OptionType.BOOLEAN,required:!1,default:null}}},3596:(t,e,n)=>{n.d(e,{z:()=>r,Z:()=>i});var r={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};const i={DEFAULTS:{ART_FILTERS:[{defaultName:"Natasha Wescoat",identifier:"imgly_art_filter_june_tree",rootPath:"art-filters/imgly_june_tree",thumbnail:"art-filters/imgly_june_tree/thumbnail.jpg"},{defaultName:"Hive",identifier:"imgly_art_filter_hive",rootPath:"art-filters/imgly_hive",thumbnail:"art-filters/imgly_hive/thumbnail.jpg"},{defaultName:"Udnie",identifier:"imgly_art_filter_udnie",rootPath:"art-filters/imgly_udnie",thumbnail:"art-filters/imgly_udnie/thumbnail.jpg"},{defaultName:"Vince Low",identifier:"imgly_art_filter_vince_low",rootPath:"art-filters/imgly_vince_low",thumbnail:"art-filters/imgly_vince_low/thumbnail.jpg"},{defaultName:"Mosaic",identifier:"imgly_art_filter_mosaic",rootPath:"art-filters/imgly_mosaic",thumbnail:"art-filters/imgly_mosaic/thumbnail.jpg"},{defaultName:"Wave",identifier:"imgly_art_filter_wave",rootPath:"art-filters/imgly_wave",thumbnail:"art-filters/imgly_wave/thumbnail.jpg"},{defaultName:"Malikova Darya",identifier:"imgly_art_filter_watercolor",rootPath:"art-filters/imgly_watercolor",thumbnail:"art-filters/imgly_watercolor/thumbnail.jpg"}],FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},4696:(t,e,n)=>{function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:()=>o});const o={load:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"},i=function(){return t.substr(0,5),Promise.resolve([t,t])};return i().then((function(t){var i=r(t,2),o=i[0],a=i[1];return e._createAndLoadImage(o,a,n)}))},loadImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return this._loadWithoutExif(t,e)},_loadWithoutExif:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,r){var i=new window.Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at ".concat(t)))})),e.cors&&(i.crossOrigin=e.value),i.src=t}))},_createAndLoadImage:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new Promise((function(t,i){var o=n._loadWithoutExif(e,r).then((function(e){return t(e)})),a=new Promise((function(t,i){n._loadAsDataURL(e,r).then((function(e){var n=new window.Image;n.addEventListener("load",(function(){t(n)})),n.src=e,n.rawSource=e})).catch((function(e){o.then((function(e){return t(e)}))}))}));return n._stringEndsWith(e,".svg")?o.then((function(e){return t(e)})):a.then((function(e){return t(e)}))}))},_stringEndsWith:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e},_loadAsDataURL:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,r){var i=new XMLHttpRequest;i.onload=function(){var t=new FileReader;t.onloadend=function(){t.error&&r(t.error),n(t.result)},t.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.withCredentials=e.cors&&"use-credentials"===e.value,i.send()}))},loadXHR:function(t,e){return new Promise((function(n,r){var i;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){n(i)},i.onerror=function(t){r(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?n(i):r(new Error("HTTP Status ".concat(i.status))))}),i.open("GET",t,!0),i.send()}))}}},1207:(t,e,n)=>{n.r(e),n.d(e,{ImageLoader:()=>r.Z,JSONLoader:()=>i.Z});var r=n(4696),i=n(9706)},9706:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(9313),i=n(1662),o="undefined"!=typeof window?window:n.g,a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e,this._parsedUrl=i.Qc(this._url,!0)}var e;return(e=[{key:"_isJSONPRequest",value:function(){var t=this._parsedUrl.query;for(var e in t)if("?"===t[e])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var t=this;return new r.Z((function(e,n){var r;o.XDomainRequest?((r=new o.XDomainRequest).onload=function(){var t=JSON.parse(r.responseText);e(t)},r.onerror=function(t){n(t)},r.open("GET",t._url,!0),r.send()):o.XMLHttpRequest&&((r=new XMLHttpRequest).onreadystatechange=function(t){if(4===r.readyState)if(200===r.status){var i=JSON.parse(r.responseText);e(i)}else n(new Error("HTTP Status ".concat(r.status)))},r.open("GET",t._url,!0),r.send())}))}},{key:"_loadJSONP",value:function(){var t=this,e=!1,n=!1,i="pesdk"+Math.round(99999999999999*Math.random());return new r.Z((function(r,a){var s=t._createJSONPNode(i);o[i]=function(i){t._removeJSONPNode(s),e||(n=!0,r(i))},o.setTimeout((function(){n||(t._removeJSONPNode(s),e=!0,a(new Error("Timeout of 5 seconds exceeded.")))}),5e3)}))}},{key:"_createJSONPNode",value:function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),r=document.createElement("script");return r.src=e,n.appendChild(r),r}},{key:"_removeJSONPNode",value:function(t){t.parentNode.removeChild(t)}},{key:"_buildJSONPUrl",value:function(t){var e=this._parsedUrl.query,n=null;for(var r in e)if("?"===e[r]){n=r;break}return delete this._parsedUrl.search,e[n]=t,i.WU(this._parsedUrl)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3678:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(3779);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],l=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},u=function(){return(!process||process&&process.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},c=function(t,e){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: ".concat(t,"; color: ").concat(e,"; line-height: 20px; padding: 4px 0; font-weight: bold"),"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]},f=new(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;a(this,t),this._levels=i(r),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var t,e;l()?((t=console).groupCollapsed.apply(t,arguments),console.trace(),console.groupEnd()):(e=console).trace.apply(e,arguments)}},this._levels.forEach((function(t){var n=t.name;e[n]=function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e._log.apply(e,[n,t].concat(i))}}))}var e;return(e=[{key:"getLevelIndexByName",value:function(t){return r.Z.Array.findIndex(this._levels,(function(e){return e.name===t}))}},{key:"getLevelObjectByName",value:function(t){return r.Z.Array.find(this._levels,(function(e){return e.name===t}))}},{key:"canLog",value:function(t){var e=this.getLevelIndexByName(t);return!(e<0)&&e>=this._maxLevel}},{key:"setLevel",value:function(t){var e=this.getLevelIndexByName(t);e<0||(this._maxLevel=e)}},{key:"_log",value:function(t,e){var n=this.getLevelObjectByName(t);if(n&&this.canLog(t)){n.name;for(var o=n.type,a=n.background,s=n.color,f=arguments.length,p=new Array(f>2?f-2:0),h=2;h<f;h++)p[h-2]=arguments[h];var d,y=p.filter((function(t){return void 0!==t})).map((function(t){return t.toObject?JSON.parse(JSON.stringify(t.toObject())):t})),g=this._consoleFuncs[o]||console[o]?function(){var t;return(t=console)[o].apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)},m=y.length,v=c(a,s);if(!u()){var _=y.length;return _<=0?void g("PhotoEditorSDK | ".concat(e," ")):1===_&&"string"==typeof y[0]?void g("PhotoEditorSDK | ".concat(e," | ").concat(y[0])):void g.apply(void 0,["PhotoEditorSDK | ".concat(e," | ")].concat(i(y)))}m<=0?g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c %c  ")].concat(i(v))):1!==m||"string"!=typeof y[0]?l()?((d=console).groupCollapsed.apply(d,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c")].concat(i(r.Z.Array.init(v)))),g.apply(void 0,i(y)),console.groupEnd()):g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c")].concat(i(r.Z.Array.init(v)),i(y))):g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c  ").concat(y[0],"  %c  ")].concat(i(v)))}}},{key:"image",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=new window.Image,r=function(){var e=n.width,r=n.height;t&&console.log(t),console.log("%c+","\n        font-size: 1px;\n        padding: 0px ".concat(Math.floor(e/2),"px;\n        line-height: ").concat(r,"px;\n        background: url(").concat(n.src,");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: ").concat(e,"px ").concat(r,"px;"))};return n.onload=r,e instanceof window.HTMLCanvasElement?n.src=e.toDataURL():e instanceof window.Image?(n=e,r()):"string"==typeof e?n.src=e:this.log(t,e),n}},{key:"texture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(e){var n=e.getBaseTexture(),i=n.getRenderers(),o=r.Z.Array.find(i,(function(t){return t&&"WebGL"===t.constructor.type})),a=n.getFrame(),s=a.width,l=a.height;if(o){var u=o.getContext(),c=n.getGLTextureForRenderer(o);this.logGlTexture(u,c,s,l,t)}else f.image(t,n.getSource())}else this.log(t,"texture: null or undefined")}},{key:"logGlTexture",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,i=arguments.length>4?arguments[4]:void 0;t.bindTexture(t.TEXTURE_2D,e);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o);var s=document.createElement("canvas");s.width=n,s.height=r;var l=s.getContext("2d"),u=l.createImageData(n,r);return u.data.set(a),l.putImageData(u,0,0),f.image(i,s)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}())("warn");const p=f},6312:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(7857);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,l=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this._ui=e,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:r.Bq.Operations.FilterOperation.Filters.IdentityFilter},this._categories=r.cQ.wrapFiltersInCategories(r.yO.DEFAULTS.FILTERS.slice(0),t.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=o||e.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=r.cQ.wrapFiltersInCategories(this._options.categories,t.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}var e;return(e=[{key:"instantiateFilterWithIdentifier",value:function(t){var e=this,n={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(t);if(!i)return Promise.reject(new Error("Unknown filter with identifier `".concat(t,"`!")));if(i.prototype instanceof r.Bq.Operations.FilterOperation.Filter)return Promise.resolve(new i);var o,a=i.lutImage,s=i.resolution,l=i.horizontalTileCount,u=i.verticalTileCount,c=i.lightColor,f=i.darkColor;return c&&f?(c=r.Il.fromHex(c),f=r.Il.fromHex(f),Promise.resolve(new r.Bq.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:c,darkColor:f}))):(this._ui.getPreloader&&(o=this._ui.getPreloader().getAsset(a)),(o?Promise.resolve(o):r.S3.loadImage(this._ui.getAssetPath(a),n)).then((function(){return r.S3.loadImage(e._ui.getAssetPath(a),n).then((function(t){return new r.Bq.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:t,resolution:s,horizontalTileCount:l,verticalTileCount:u})}))})))}},{key:"_initCategories",value:function(){var e=this;if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=r.cQ.wrapFiltersInCategories(this._options.categories,t.CATEGORY_ITEMS_PROPERTY):this._categories=r.cQ.mergeCategories(this._categories,this._options.categories,t.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){var n=[];this._categories.forEach((function(t){var r=t.filters.filter((function(t){return-1!==e._options.availableFilters.indexOf(t.identifier)}));r.length>0&&n.push({identifier:t.identifier,defaultName:t.defaultName,filters:r})})),this._categories=n}var i={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map((function(t){return t.filters})).reduce((function(t,e){return t.concat(e)}))};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach((function(t){e._categoriesById[t.identifier]=t})),i.filters.forEach((function(t){e._filtersByIdentifier[t.identifier]=t}))}},{key:"getFiltersForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown filter category '".concat(t,"'"));return this._categoriesById[t].filters}},{key:"getItemsByCategory",value:function(t){return this.getFiltersForCategory(t)}},{key:"getFilterByIdentifier",value:function(t){return this._filtersByIdentifier[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(t){return this._categoriesById[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();s="filters",(a="CATEGORY_ITEMS_PROPERTY")in(o=l)?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s},7288:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(6982),i=n(7857);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return l(this,t)});function i(){return a(this,i),r.apply(this,arguments)}return i}(r.Configurable);c.prototype.availableOptions={fontFamily:{type:r.OptionType.STRING,required:!0},variations:{type:r.OptionType.ARRAY,required:!0}};var f=n(3678),p=n(1512);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}var e;return(e=[{key:"_initFonts",value:function(){var t,e=this,n=this._options,r=n.fonts,o=n.replaceFonts,a=n.availableVariations,s=n.isTextDesign;t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();var l,u=s?i.gT.DEFAULTS.TEXT_DESIGN_FONTS:i.gT.DEFAULTS.FONTS;t&&(u=o?r:u.concat(r||[])),u=u.map((function(n){var r=n.fontFamily,i=n.variations;if(t&&a&&(i=i.filter((function(t){return-1!==a.indexOf(t.identifier)}))),0===i.length)return null;var o=new c({fontFamily:r});return i=i.map((function(t){var n=new p.Z(t);return n.setFontFamily(r),n.setFont(o),t.default&&!l&&(l=n),null==n.getTextMetrics()&&f.Z.warn("Missing font metrics for ".concat(n.getIdentifier(),". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.")),e._variationsByIdentifier[n.getIdentifier()]=n,n})),o.setVariations(i),e._fontsByFontFamily[r]=o,o})).filter((function(t){return t})),l||(l=u[0].getVariations()[0]),this._defaultVariation=l,this._fonts=u}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(t){return this._fontsByFontFamily[t]}},{key:"getVariationByIdentifier",value:function(t){return this._variationsByIdentifier[t]}},{key:"getVariationsByIdentifier",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3045:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(6982),i=n(7857),o=n(3596),a=n(9706);const s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._assetsByGroupId={}}var e;return(e=[{key:"addAsset",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assetsByGroupId[t]?n?this._assetsByGroupId[t].unshift(e):this._assetsByGroupId[t].push(e):this._assetsByGroupId[t]=[e]}},{key:"setAssets",value:function(t,e){this._assetsByGroupId[t]=e}},{key:"getAssets",value:function(t){return this._assetsByGroupId[t]=this._assetsByGroupId[t]||[],this._assetsByGroupId[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f="imgly_sticker_custom",p=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new s,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=r.Utils.createCanvas(),this.reload()}var e,n,u;return e=t,u=[{key:"getURLForSticker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=t.images,r="base"===e&&n.mediaBase||n.mediaThumb,o=r.uris||[r.uri];if(void 0===i.cQ.Browser||i.cQ.Browser.getIEVersion()){var a=o.filter((function(t){return!/\.svg$/i.test(t)}));return a.length?a[0]:o[0]}var s=o.filter((function(t){return/\.svg$/i.test(t)}));return s.length?s[0]:o[0]}}],(n=[{key:"reload",value:function(){this._categoriesById={},this._categories=[],this._stickersById={};var t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(o.Z.DEFAULTS.STICKER_CATEGORIES);var e=this._options,n=e.categories,r=e.replaceCategories;if(t&&this._options.categories?this._addCategories(n,r):(this._updateCategoriesMap(),this._updateAllCategory()),t){var i=this._dynamicAssetsLibrary.getAssets("sticker");if(i.length>0){var a=this._createCustomStickerCategory(i);this._addCategories([a],!1,!0)}}}},{key:"loadExternal",value:function(t){var e=this;return new a.Z(t).load().then((function(t){e._addCategories(t.categories,e._options.replaceCategories)}))}},{key:"_addCategories",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._categories=e?t.slice(0):n?this._mergeCategories(t,this._categories):this._mergeCategories(this._categories,t),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_mergeCategories",value:function(t,e){t=i.cQ.cloneCategories(t,"stickers");var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,s=!1,u=l(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(a.identifier===c.identifier){var f,p=l(a.stickers);try{for(p.s();!(f=p.n()).done;){var h,d=f.value,y=!1,g=l(c.stickers);try{for(g.s();!(h=g.n()).done;){var m=h.value;if(d.identifier===m.identifier){Object.assign(m,d),y=!0;break}}}catch(t){g.e(t)}finally{g.f()}y||c.stickers.push(d)}}catch(t){p.e(t)}finally{p.f()}s=!0;break}}}catch(t){u.e(t)}finally{u.f()}s||t.push(a)}}catch(t){r.e(t)}finally{r.f()}return t}},{key:"_updateCategoriesMap",value:function(){var t=this;this._categoriesById={},this._categories.forEach((function(e){t._categoriesById[e.identifier]=e})),this._categories.forEach((function(e){e.stickers.forEach((function(e){t._stickersById[e.identifier]=e}))})),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach((function(e){e.identifier!==f&&(e.stickers=e.stickers.filter((function(e){return-1!==t._options.availableStickers.indexOf(e.identifier)})))})),this._categories=this._categories.filter((function(t){return t.stickers.length>0}))),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map((function(t){return t.stickers})).reduce((function(t,e){return t.concat(e)}),[])},this._categoriesById.all=this._allCategory}},{key:"renderStickerThumbnailFromImage",value:function(t){var e=this._customStickerCanvas,n=e.getContext("2d");n.save();var r=62/t.width,i=r*t.height;e.width=62,e.height=62,n.clearRect(0,0,t.width,t.height),n.translate(0,.5*(e.height-i)),n.scale(r,r),n.drawImage(t,0,0);var o=e.toDataURL("image/png");return n.restore(),{data:o,width:62,height:i}}},{key:"addCustomStickerFromImage",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",a=function(t){var e=n._ui.getEditor().getSDK().getRenderer(),r=new i.FM(t.width,t.height),o=1e6*n._ui.getEditor().getMaxMegapixels(),a=e.getMaxDimensions(),s=r.x*r.y>o,l=null!==a&&(r.x>a||r.y>a);if(s){var u=t.width/t.height,c=t.height/t.width;a=new i.FM(Math.sqrt(o*u),Math.sqrt(o*c)).floor().max()}var f=r.clone();return(s||l)&&(r.x/r.y>1?(f.x=a,f.y=a/r.x*r.y):(f.x=a/r.y*r.x,f.y=a)),f},s=function(t,e){var n=t.x/t.y;return n>1?new i.FM(e,e/n):new i.FM(e*n,e)},l="data:image/svg"===t.src.substring(0,14),u=this._ui.getEditor().getSDK();t=u.correctExifOrientation(t);var c=s(new i.FM(t.width,t.height),2048),p=l?c:a(t),h=this._customStickerCanvas,d=h.getContext("2d");d.save();var y=this.renderStickerThumbnailFromImage(t);l?(t.width>t.height?(h.width=2048,h.height=2048/t.width*t.height):(h.height=2048,h.width=2048/t.height*t.width),t.width=h.width,t.height=h.height):(h.width=p.x,h.height=p.y,d.scale(p.x/t.width,p.y/t.height)),d.drawImage(t,0,0,t.width,t.height);var g=h.toDataURL();d.restore();var m={identifier:r.Utils.generateUUID(),defaultName:e||"",tintMode:o,images:{mediaThumb:{uris:[y.data],rawData:!0,width:y.width,height:y.height},mediaBase:{uris:l?[g,t.src]:[g],rawData:!0,isSVG:l,width:p.x,height:p.y}}},v=this._dynamicAssetsLibrary;v.addAsset("sticker",m,!0);var _=v.getAssets("sticker");if(1===_.length){var b=this._createCustomStickerCategory(_);this._addCategories([b],!1,!0)}else this.getCategory(f).stickers=_,this._updateAllCategory();this._updateCategoriesMap()}},{key:"_createCustomStickerCategory",value:function(t){return{identifier:f,defaultName:"Custom",metaData:{backgroundImage:t[t.length-1].images.mediaBase.uris[0],rawData:!0},stickers:t}}},{key:"getStickersForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown sticker category '".concat(t,"'"));return this._categoriesById[t].stickers}},{key:"getStickerByIdentifier",value:function(t){return this._stickersById[t]}},{key:"getCategories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(t){return this._categoriesById[t]}}])&&c(e.prototype,n),u&&c(e,u),t}()},4923:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),this._ui=e,this._options=n,this._defaultLayouts=r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}var e;return(e=[{key:"_init",value:function(){var t=this._options.availableLayouts,e=s(s({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(e).map((function(t){return{identifier:e[t].identifier,layout:e[t]}})),t&&(t.push.apply(t,i(Object.values(this._legacyLayouts).map((function(t){return t.identifier})))),this._layouts=this._layouts.filter((function(e){return t.indexOf(e.identifier)>=0})))}},{key:"getLayoutByIdentifier",value:function(t){var e=r.xx.Array.find(this._layouts,(function(e){return e.identifier===t}));return e&&e.layout}},{key:"getLayouts",value:function(){return i(this._layouts)}},{key:"getDefaultLayout",value:function(){return this.getLayouts()[0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3996:(t,e,n)=>{n.d(e,{Z:()=>v});var r,i=n(7857),o=n(7945),a=n.n(o),s=n(6312),l=n(3045),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(i.gT.DEFAULTS.BRUSHES);var r=this._options,o=r.brushes,a=r.replaceBrushes,s=r.availableBrushes;this._options.brushes&&this._addBrushes(o,a),s&&(this._brushes=this._brushes.filter((function(t){return-1!==s.indexOf(t.identifier)})))}var e;return(e=[{key:"_addBrushes",value:function(t,e){var n=this;e&&(this._brushes=[],this._brushesById={}),t.forEach((function(t){n._brushes.push(t),n._brushesById[t.identifier]=t}))}},{key:"getBrushByIdentifier",value:function(t){return this._brushesById[t]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),c=n(7288),f=n(4340);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}void 0!==i.Bq.Operations.SpriteOperation&&(r=i.Bq.Operations.SpriteOperation.BrushSprite);var v=function(){function t(e,n){m(this,t),this._editor=e,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new s.Z(this._ui,this._getOptions("filter")),this._stickerManager=new l.Z(this._ui,this._getOptions("sticker")),this._brushManager=new u(this._ui,this._getOptions("brush")),this._fontManager=new c.Z(this._ui,this._getOptions("text"))}var e,n,o,p;return e=t,(n=[{key:"_getOptions",value:function(t){var e=this._editor.controls,n={};e&&e.get(t)&&(n=e.get(t).defaultOptions);var r=this._editor.getOptions();return i.xx.deepDefaults({},r.editor.controlsOptions[t]||{},n)}},{key:"deserialize",value:function(){var t=this;return this._validateVersion().then((function(){return t._deserializeInputImage()})).then((function(){return t._deserializeOperations()}))}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?Promise.reject(new Error("Invalid version ".concat(this._data.version,", expected ").concat(this.constructor.version))):Promise.resolve()}},{key:"_deserializeInputImage",value:function(){var t=this;return new Promise((function(e,n){var r=t._data.inputImage,i=r.data,o=r.type;if(i&&o){var a=new window.Image;a.addEventListener("load",(function(){t._editor.setImage(a),e()})),a.src="data:".concat(o,";base64,").concat(i)}else e()}))}},{key:"_deserializeOperations",value:(o=a().mark((function t(){var e,n,r,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this._data.operations,n=[],r=0;case 3:if(!(r<e.length)){t.next=12;break}return i=e[r],t.next=7,this._deserializeOperation(i);case 7:o=t.sent,n.push(o);case 9:r++,t.next=3;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})),p=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){g(i,n,r,a,s,"next",t)}function s(t){g(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return p.apply(this,arguments)})},{key:"_deserializeOperation",value:function(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}}},{key:"_deserializeCropOperation",value:function(t){var e=t.options,n=e.rotation,r=i.FM.fromObject(e.start),o=i.FM.fromObject(e.end);n>Math.PI&&(n-=2*Math.PI);var a={start:r,end:o};void 0!==n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,a),s.set(a),Promise.resolve(s)}},{key:"_deserializeOrientationOperation",value:function(t){var e=t.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(e),Promise.resolve(n)):Promise.resolve()}},{key:"_deserializeFilterOperation",value:function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then((function(t){var r=e._editor.operations.getOrCreate("filter");return r.set({identifier:n.name,filter:t,intensity:n.intensity}),r})):(i.Zb.warn("Deserializer","Unknown filter `".concat(n.name,"`")),Promise.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(t){var e=i.Bq.Operations.AdjustmentsOperation,n=t.options,r={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(t){if(void 0!==n[t]){var i=e.prototype.availableOptions[t],o=i.minValue,a=i.midValue,s=i.maxValue,l=n[t];l=l<0?a+(a-o)*l:a+(s-a)*l,r[t]=l}})),Promise.resolve(this._editor.operations.getOrCreate("adjustments",r))}},{key:"_deserializeSpriteOperation",value:function(t){var e=this,n=t.options,r=this._editor.operations.getOrCreate("sprite");if(!r)return Promise.resolve();var i=n.sprites.map((function(t){return e._deserializeSprite(r,t)})).filter((function(t){return t}));return Promise.all(i).then((function(t){return r.setSprites(t.filter((function(t){return t}))),r}))}},{key:"_deserializeSprite",value:function(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(t,e)}}},{key:"_deserializeSticker",value:function(t,e){var n=this,r=i.Bq.Operations.SpriteOperation,o=e.options,a=this._stickerManager.getStickerByIdentifier(o.name),s=this._stickerManager.getURLForSticker(a);return a?new Promise((function(e,a){var l=new window.Image;l.addEventListener("load",(function(){var n=r.StickerSprite.prototype.availableOptions.adjustments.structure,a=o.rotation,s=o.flipHorizontally,u=o.flipVertically,c={identifier:o.name,image:l,position:i.FM.fromObject(o.position),dimensions:i.FM.fromObject(o.dimensions),rotation:a,flipHorizontally:s,flipVertically:u,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==o.adjustments[t]&&(c.adjustments[t]=o.adjustments[t]+n[t].default)})),e(t.createSticker(c))})),l.crossOrigin=n._editor.getCrossOrigin(),l.src=n._editor.getUI().getAssetPath(s)})):(i.Zb.warn("Deserializer","Unknown sticker '".concat(o.name,"'. Skipping sprite.")),Promise.resolve())}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,o=n.lineHeight,a=n.fontFamily,s=n.fontWeight,l=n.alignment,u=n.rotation,c=n.maxWidth,p=n.color,h=n.backgroundColor,d=new f.Z(this._ui),y=this._fontManager.getFontByFontFamily(a);return y||(y=this._fontManager.getDefaultFont()),d.setFonts([y]),d.load().then((function(){var e=t.createText({fontSize:r,lineHeight:o,fontFamily:a,fontWeight:s,alignment:l,rotation:u,maxWidth:c,text:n.text,color:i.Il.fromArray(p),backgroundColor:i.Il.fromArray(h),position:i.FM.fromObject(n.position)});return e._edited=!0,e}))}},{key:"_deserializeBrush",value:function(t,e){var n=this,r=e.options.paths,i=t.createBrush();return r.forEach((function(t){n._deserializeBrushPath(i,t)})),Promise.resolve(i)}},{key:"_deserializeBrushPath",value:function(t,e){var n=e.points,r=this._createBrushForPath(e),o=t.createPath(r);o.setClosed(!0),n.forEach((function(t){o.addControlPoint(i.FM.fromObject(t))}))}},{key:"_createBrushForPath",value:function(t){var e=t.color,n=t.size,o={color:i.Il.fromArray(e),size:n},a=this._brushManager.getFirstBrush();if(a.prototype&&a.prototype instanceof r)return new a(o);var s=i.xx.extend({},a);delete s.image;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var i=y(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d(this,t)});function i(){return m(this,i),r.apply(this,arguments)}return i}(r);return l.identifier=a.identifier,new l(i.xx.extend({},s,o))}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options.options;switch(t.options.type){case"radial":var n=e.position,r=e.radius,o=e.gradientRadius,a=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:i.FM.fromObject(n),radius:r,gradientRadius:o,blurRadius:a}));case"linear":var s=e.start,l=e.end,u=e.size,c=e.gradientSize,f=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:i.FM.fromObject(s),end:i.FM.fromObject(l),size:u,gradientSize:c,blurRadius:f}))}}},{key:"_getInputDimensionsForOperation",value:function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(r){r===t&&(e=!0),e||(n=r.getNewDimensions(n))})),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();v.version="1.0.0"},1233:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(4441),i=n(3996),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.0"},4441:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(7857),i=2*Math.PI,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}var e;return(e=[{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=r.xx.defaults(t,{image:!0});var e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(t){var e=this._editor.getImage(),n=e.width,i=e.height;if(!this._options.image)return t.inputImage={width:n,height:i},Promise.resolve(t);var o=r.xx.createCanvas();o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0);var a=o.toDataURL(r.D3.PNG);return t.inputImage={type:r.D3.PNG,data:a.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},Promise.resolve(t)}},{key:"_serializeOperations",value:function(t){var e=this,n=[];return this._editor.operations.getStack().forEach((function(t){var r=e._serializeOperation(t,n);r&&n.push(r)})),t.operations=n.filter((function(t){return t})),Promise.resolve(t)}},{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:r.Zb.warn("Unable to serialize operation of type ".concat(t.constructor.identifier))}}},{key:"_serializeTransformOperation",value:function(t){var e=t.serializeOptions(["start","end","rotation"],!0);return e.rotation=(e.rotation+i)%i,{type:"crop",options:e}}},{key:"_serializeOrientationOperation",value:function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(t){return"identity"===t.getIdentifier()?null:{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(t){var e=t.availableOptions,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(r){var i=e[r],o=t.getOption(r),a=i.minValue,s=i.midValue,l=i.maxValue;n[r]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),{type:"adjustments",options:n}}},{key:"_serializeSpriteOperation",value:function(t,e){var n,r=this,i=e.filter((function(t){return"sprite"===t.type})),o=!0;if(i.length?(n=i.pop(),o=!1):n={type:"sprite",options:{sprites:[]}},t.getSprites().forEach((function(e){var i=null;e instanceof t.constructor.StickerSprite?i=r._serializeSticker(t,e):e instanceof t.constructor.TextSprite?i=r._serializeText(t,e):e instanceof t.constructor.BrushSprite?i=r._serializeBrush(t,e):e instanceof t.constructor.TextDesignSprite&&(i=r._serializeTextDesign&&r._serializeTextDesign(t,e)),i&&n.options.sprites.push(i)})),o)return n}},{key:"_serializeSticker",value:function(t,e){var n=e.getAdjustments(),r=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);r.name=r.identifier,delete r.identifier,r.rotation=(r.rotation+i)%i;var o=n.availableOptions;return r.adjustments={brightness:n.getBrightness()-o.brightness.default,saturation:n.getSaturation()-o.saturation.default,contrast:n.getContrast()-o.contrast.default},{type:"sticker",options:r}}},{key:"_serializeText",value:function(t,e){var n=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+i)%i,{type:"text",options:n}}},{key:"_serializeBrush",value:function(t,e){var n=this;return{type:"brush",options:{paths:e.getPaths().map((function(t){return n._serializePath(t)}))}}}},{key:"_serializePath",value:function(t){var e=t.getBrush().serializeOptions(["color","size"],!0);return e.points=t.getControlPoints().map((function(t){return t.getPosition().toObject()})),e}},{key:"_serializeRadialFocusOperation",value:function(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(r){r===t&&(e=!0),e||(n=r.getNewDimensions(n))})),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.0"},6638:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,i,c=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function f(){return o(this,f),c.apply(this,arguments)}return(e=[{key:"_deserializeOperation",value:function(t){return"selective-blur"===t.type?this._deserializeSelectiveBlurOperation(t):a(u(f.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeCropOperation",value:function(t){var e=t.options,n=e.rotation,i=r.FM.fromObject(e.start),o=r.FM.fromObject(e.end),a=e.dimensions?r.FM.fromObject(e.dimensions):null;if(o.x-i.x<=0||o.y-i.y<=0)throw new Error("A crop should not result in negative or zero dimensions - start: ".concat(i," - end: ").concat(o));n>Math.PI&&(n-=2*Math.PI);var s={start:i,end:o};void 0!==n&&(s.rotation=n);var l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();if(this._editor.broadcastTransform(l,s),l.set(s),a){var u=o.clone().subtract(i),c=l.getInputDimensions(!1).multiply(u);l.setTextureScale(a.x/c.x)}return Promise.resolve(l)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(n(3996).Z);c.version="1.0.1"},463:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1047),i=n(6638),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.1"},1047:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(4441);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=2*Math.PI,c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),i.apply(this,arguments)}return(e=[{key:"_serializeTransformOperation",value:function(t){var e=t.serializeOptions(["start","end","rotation","textureScale"],!0);return e.rotation=(e.rotation+u)%u,1!==e.textureScale&&(e.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete e.textureScale,{type:"crop",options:e}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(r.Z);c.version="1.0.1"},9944:(t,e,n)=>{var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>a});var o=n(7857).Bq.Engine.Filters.OverlayFilter;const a=(i(r={},o.BLEND_MODES.NORMAL,"normal"),i(r,o.BLEND_MODES.OVERLAY,"overlay"),i(r,o.BLEND_MODES.HARD_LIGHT,"hard light"),i(r,o.BLEND_MODES.SOFT_LIGHT,"soft light"),i(r,o.BLEND_MODES.MULTIPLY,"multiply"),i(r,o.BLEND_MODES.DARKEN,"darken"),i(r,o.BLEND_MODES.LIGHTEN,"lighten"),i(r,o.BLEND_MODES.SCREEN,"screen"),i(r,o.BLEND_MODES.COLOR_BURN,"color burn"),r)},1071:(t,e,n)=>{n.d(e,{Z:()=>k});var r=n(7857),i=n(4696),o=n(6638),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(r.yO.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();var i=this._options,o=i.categories,a=i.replaceCategories;this._customAssetsAllowed&&this._options.categories?this._addCategories(o,a):this._updateAllCategory()}var e;return(e=[{key:"_addCategories",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?t.slice(0):r.cQ.mergeCategories(this._categories,t,"frames"),this._categoriesById={},this._categories.forEach((function(t){e._categoriesById[t.identifier]=t}));var i=this._options.availableFrames;this._customAssetsAllowed&&i&&this._categories.forEach((function(t){t.frames=t.frames.filter((function(t){return-1!==i.indexOf(t.identifier)}))})),this._categories.forEach((function(t){t.frames.forEach((function(t){e._framesById[t.identifier]=t}))})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map((function(t){return t.frames})).reduce((function(t,e){return t.concat(e)}),[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown frame category '".concat(t,"'"));return this._categoriesById[t].frames}},{key:"getFrameByIdentifier",value:function(t){return this._framesById[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(t){return this._categoriesById[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._overlays=r.yO.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};var o=e.getEditor().getSDK()._l.areCustomAssetsAllowed();o&&n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),o&&n.availableOverlays&&(this._overlays=this._overlays.filter((function(t){return-1!==n.availableOverlays.indexOf(t.identifier)}))),this._overlays.forEach((function(t){i._overlaysByIdentifier[t.identifier]=t}))}var e;return(e=[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(t){return this._overlaysByIdentifier[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),l=n(3045);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=r.Bq.OptionType,y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,n,o,a=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(o){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,s),(e=a.call(this,n))._loaded=!1,e._loading=!1,e._ui=t,e._frame=r.Bq.Utils.deepClone(e._options),e}return(e=[{key:"load",value:function(){var t=this;if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var e=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach((function(r){if(r in e){var i=e[r];["start","mid","end"].forEach((function(e){e in i&&n.push(t._loadPart(r,e))}))}})),Promise.all(n).then((function(){t._loaded=!0,t._loading=!1})).catch((function(e){t._loaded=!1,t._loading=!1}))}},{key:"_loadPart",value:function(t,e){var n=this,r=this._frame.imageGroups[t][e],o=r;return"string"!=typeof r&&"image"in r&&(o=r.image),i.Z.load(this._ui.getAssetPath(o)).then((function(i){return"string"!=typeof r?n._frame.imageGroups[t][e].image=i:n._frame.imageGroups[t][e]=i,i}))}},{key:"getFrame",value:function(){return this._frame}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(r.Bq.Configurable);y.prototype.availableOptions={identifier:{type:d.STRING,required:!0},defaultName:{type:d.STRING},thumbnail:{type:d.STRING},tintable:{type:d.BOOLEAN,default:!1},layoutMode:{type:d.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:d.OBJECT,required:!0}};var g=n(4340),m=n(9944);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=r.xx.flipObject(m.Z),k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(c,t);var e,n,o,u=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(n);if(o){var r=O(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return x(this,t)});function c(){var t;_(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=u.call.apply(u,[this].concat(n)))._frameManager=new a(t._ui,t._getOptions("frame"));var i=t._getOptions("overlay");return i&&(t._overlayManager=new s(t._ui,i)),t}return(e=[{key:"_deserializeSprite",value:function(t,e){return"frame"===e.type?this._deserializeFrame(t,e):"overlay"===e.type?this._deserializeOverlay(t,e):b(O(c.prototype),"_deserializeSprite",this).call(this,t,e)}},{key:"_deserializeOperation",value:function(t){return"transform"===t.type?this._deserializeTransformOperation(t):b(O(c.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeOrientationOperation",value:function(t){if(this._data.meta&&"html5"!==this._data.meta.platform)return b(O(c.prototype),"_deserializeOrientationOperation",this).call(this,t);var e=t.options,n=e.rotation,r=e.flipHorizontally,i=e.flipVertically,o=90===n&&!r&&!i;return o|=90===n&&r&&i,o|=270===n&&!r&&!i,(o|=270===n&&r&&i)&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),b(O(c.prototype),"_deserializeOrientationOperation",this).call(this,t)}},{key:"_deserializeTransformOperation",value:function(t){var e=this;return b(O(c.prototype),"_deserializeCropOperation",this).call(this,t).then((function(t){if(t){var n=r.xx.Array.find(e._data.operations,(function(t){return"orientation"===t.type}));if(n){var i=n.options,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically;90!==o&&270!==o||(!a&&s||a&&!s)&&(a=!a,s=!s),t.rotate(i.rotation),a&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),s&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t}}))}},{key:"_deserializeFrame",value:function(t,e){var n=this,i=e.options.identifier,o=this._frameManager.getFrameByIdentifier(i);if(!o)return r.Zb.warn("Deserializer","Unknown frame `".concat(i,"`. Skipping frame.")),Promise.resolve();var a=new y(this._ui,o);return a.load().then((function(){n._editor.operations.getOrCreate("frame",{frame:a.getFrame()})}))}},{key:"_deserializeOverlay",value:function(t,e){var n=this,o=e.options,a=o.blendMode,s=o.intensity,l=o.identifier,u=this._overlayManager.getOverlayByIdentifier(l);if(!u)return r.Zb.warn("Deserializer","Unknown overlay `".concat(l,"`. Skipping overlay.")),Promise.resolve();var c=this._editor.getUI().getAssetPath(u.image);return i.Z.load(c).then((function(t){n._editor.operations.getOrCreate("overlay",{alpha:s,identifier:l,blendMode:parseInt(S[a||u.blendMode],10),image:t})}))}},{key:"_createBrushForPath",value:function(t){var e=b(O(c.prototype),"_createBrushForPath",this).call(this,t);return void 0!==t.hardness&&e.hasOption("hardness")&&e.setHardness(t.hardness),e}},{key:"_deserializeSticker",value:function(t,e){var n=this,i=r.Bq.Operations.SpriteOperation,o=e.options,a=this._stickerManager.getStickerByIdentifier(o.identifier),s=l.Z.getURLForSticker(a,"base");if(!a)return r.Zb.warn("Deserializer","Unknown sticker `".concat(o.identifier,"`. Skipping sprite.")),Promise.resolve();var u=t.getInputDimensions(!1);return new Promise((function(e,l){var c=new window.Image;c.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,s=o.rotation,l=o.flipHorizontally,f=o.flipVertically,p={identifier:o.identifier,image:c,position:r.FM.fromObject(o.position),dimensions:r.FM.fromObject(o.dimensions).multiply(u.min()),rotation:s,flipHorizontally:l,flipVertically:f,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==o.adjustments[t]&&(p.adjustments[t]=o.adjustments[t]+n[t].default)})),void 0!==o.tintColor&&void 0!==a.tintMode&&(p.tintColor=r.Il.fromArray(o.tintColor),p.tintMode=a.tintMode),e(t.createSticker(p))})),c.crossOrigin=n._editor.getCrossOrigin(),c.src=n._editor.getUI().getAssetPath(s)}))}},{key:"_deserializeFilterOperation",value:function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then((function(t){var r=e._editor.operations.getOrCreate("filter");if(r)return r.set({identifier:n.identifier,filter:t,intensity:n.intensity}),r})):(r.Zb.warn("Deserializer","Unknown filter `".concat(n.identifier,"`")),Promise.resolve())}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options,n=e.options;if("radial"!==e.type)return b(O(c.prototype),"_deserializeFocusOperation",this).call(this,t);var i=this._editor.getImage(),o=i.width/i.height,a=n.start,s=n.end,l=n.gradientRadius,u=n.blurRadius,f=r.FM.fromObject(s).subtract(r.FM.fromObject(a)).multiply(o,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:r.FM.fromObject(a),radius:f,gradientRadius:l,blurRadius:u}))}},{key:"_deserializeText",value:function(t,e){var n=e.options,i=n.fontSize,o=n.lineHeight,a=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,p=new g.Z(this._ui),h=this._fontManager.getVariationByIdentifier(a);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),p.load().then((function(){var e=t.getInputDimensions(!1),a=u*e.min()/e.x,p=t.createText({fontSize:i,lineHeight:o,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:s,rotation:l,maxWidth:a,text:n.text,color:r.Il.fromArray(c),backgroundColor:r.Il.fromArray(f),position:r.FM.fromObject(n.position)});return p._edited=!0,p}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(o.Z);k.version="2.0.0"},9608:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(429),i=n(1071),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="2.0.0"},429:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(1047),i=n(9944);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function f(){return a(this,f),o.apply(this,arguments)}return(e=[{key:"_serializeSticker",value:function(t,e){var n=t.getInputDimensions(!1),r=s(c(f.prototype),"_serializeSticker",this).call(this,t,e);return"none"!==e.getTintMode()&&(r.options.tintColor=e.serializeOption("tintColor",!0)),r.options.dimensions=e.getDimensions().clone().divide(n.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(t){var e=s(c(f.prototype),"_serializePath",this).call(this,t),n=t.getBrush();return n.hasOption("hardness")&&(e.hardness=n.getOption("hardness")),e}},{key:"_serializeOperation",value:function(t,e){return"frame"===t.constructor.identifier?(this._serializeFrameOperation(t,e),null):"overlay"===t.constructor.identifier?(this._serializeOverlayOperation(t,e),null):s(c(f.prototype),"_serializeOperation",this).call(this,t,e)}},{key:"_serializeFrameOperation",value:function(t,e){var n,r=e.filter((function(t){return"sprite"===t.type}));r.length?n=r.pop():(n={type:"sprite",options:{sprites:[]}},e.push(n)),n.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})}},{key:"_serializeOverlayOperation",value:function(t,e){if(t.getIdentifier()){var n,r=e.filter((function(t){return"sprite"===t.type}));r.length?n=r.pop():(n={type:"sprite",options:{sprites:[]}},e.push(n)),n.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:i.Z[t.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(t){return{identifier:t.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(t){var e=s(c(f.prototype),"_serializeOrientationOperation",this).call(this,t);return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),e}},{key:"_serializeTransformOperation",value:function(t){var e=this._editor.operations;if(e.exists("orientation")){t=t.clone();var n=e.get("orientation");t.rotate(-n.getRotation()),n.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),n.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation()))}var r=s(c(f.prototype),"_serializeTransformOperation",this).call(this,t);return r.type="transform",r}},{key:"_serializeText",value:function(t,e){var n=s(c(f.prototype),"_serializeText",this).call(this,t,e),r=t.getInputDimensions(!1);return n.options.fontIdentifier=e.getFontIdentifier(),n.options.maxWidth=n.options.maxWidth*r.x/r.min(),delete n.options.fontFamily,n}},{key:"_serializeFilterOperation",value:function(t){var e=s(c(f.prototype),"_serializeFilterOperation",this).call(this,t);return e?(e.options.identifier=e.options.name,delete e.options.name,e):null}},{key:"_serializeRadialFocusOperation",value:function(t){var e=s(c(f.prototype),"_serializeRadialFocusOperation",this).call(this,t),n=e.options.options;return n.start=n.position,delete n.position,n.end={x:n.start.x+n.radius,y:n.start.y},delete n.radius,e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(r.Z);f.version="2.0.0"},1346:(t,e,n)=>{n.d(e,{Z:()=>b});var r,i=n(7857),o=n(1071),a=n(3045),s=n(4923),l=n(4696),u=n(7288);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}void 0!==i.Bq.Operations.SpriteOperation&&(r=i.Bq.Operations.SpriteOperation.BrushSprite.Brush);var b=function(t){g(o,t);var e,n=m(o);function o(){return d(this,o),n.apply(this,arguments)}return(e=[{key:"_deserializeSticker",value:function(t,e){var n=i.Bq.Operations.SpriteOperation,r=e.options,o=this._stickerManager.getStickerByIdentifier(r.identifier);if(!o)return i.Zb.warn("Deserializer","Unknown sticker `".concat(r.identifier,"`. Skipping sprite.")),Promise.resolve();var s=o.images.mediaBase,u=a.Z.getURLForSticker(o,"base"),c=s.rawData?s.uris[0]:this._editor.getUI().getAssetPath(u),f=t.getInputDimensions(!1);return l.Z.load(c).then((function(e){var a=n.StickerSprite.prototype.availableOptions.adjustments.structure,s=r.rotation,l=r.flipHorizontally,u=r.flipVertically,c={identifier:r.identifier,image:e,position:i.FM.fromObject(r.position),dimensions:i.FM.fromObject(r.dimensions).multiply(f.min()),rotation:s||0,flipHorizontally:l,flipVertically:u,resizeMode:o.resizeMode||"keepAspect",adjustments:{}};return void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==r.adjustments[t]&&(c.adjustments[t]=r.adjustments[t]+a[t].default)})),void 0!==r.tintMode&&void 0!==r.tintColor?(c.tintColor=i.Il.fromArray(r.tintColor.rgba),c.tintMode=r.tintMode):void 0!==r.tintColor&&void 0!==o.tintMode&&(c.tintColor=i.Il.fromArray(r.tintColor.rgba),c.tintMode=o.tintMode),void 0!==r.alpha&&(c.alpha=r.alpha),t.createSticker(c)}))}},{key:"_deserializeTransformOperation",value:function(t){return y(_(o.prototype),"_deserializeTransformOperation",this).call(this,t).then((function(t){if(t)return t._ratio=null,t}))}},{key:"_deserializeInputImage",value:function(){var t=this,e=this._data.image,n=e.data,r=e.type,i=e.uri;return n&&r&&(i="data:".concat(r,";base64,").concat(n)),i?l.Z.load(i).then((function(e){t._editor.setImage(e)})):Promise.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(t){var e=i.Bq.Operations.AdjustmentsOperation;return y(_(o.prototype),"_deserializeAdjustmentsOperation",this).call(this,t).then((function(n){if(!n)return null;var r=t.options,i={};return["gamma","whites","blacks","temperature"].forEach((function(t){if(void 0!==r[t]){var n=e.prototype.availableOptions[t],o=n.minValue,a=n.midValue,s=n.maxValue,l=r[t];l=l<0?a+(a-o)*l:a+(s-a)*l,i[t]=l}})),n.set(i),n}))}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options.options;switch(t.options.type){case"radial":return y(_(o.prototype),"_deserializeFocusOperation",this).call(this,t);case"linear":var n=e.start,r=e.end,a=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:i.FM.fromObject(n),controlPoint2:i.FM.fromObject(r),blurRadius:a}));case"mirrored":var s=e.start,l=e.end,u=e.size,c=e.gradientSize,f=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:i.FM.fromObject(s),end:i.FM.fromObject(l),size:u,gradientSize:c,blurRadius:f}));case"gaussian":var p=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:p}))}}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,o=n.lineHeight,a=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,p=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(a);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),p.load().then((function(){var e=t.getInputDimensions(!1),a=u*e.min()/e.x,p=t.createText({fontSize:r,lineHeight:o,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:s,rotation:l,maxWidth:a,text:n.text,color:i.Il.fromArray(c.rgba),backgroundColor:i.Il.fromArray(f.rgba),position:i.FM.fromObject(n.position)});return p._edited=!0,p}))}},{key:"_createBrushForPath",value:function(t){var e=t.brush,n=e.identifier,o=e.color,a=e.size,s=e.hardness,l={color:i.Il.fromArray(o.rgba),size:a};void 0!==s&&(l.hardness=s);var u=this._brushManager.getBrushByIdentifier(n);if(u||(u=this._brushManager.getFirstBrush()),u.prototype&&u.prototype instanceof r)return new u(l);var c=i.xx.extend({},u);delete c.image;var f=function(t){g(n,t);var e=m(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(r);return f.identifier=u.identifier,new f(i.xx.extend({},c,l))}},{key:"_deserializeFrame",value:function(t,e){var n=this;return y(_(o.prototype),"_deserializeFrame",this).call(this,t,e).then((function(){var t=n._editor.operations.get("frame"),r=e.options,o=r.size,a=r.alpha,s=r.tintColor,l={};void 0!==o&&(l.scale=o),void 0!==a&&(l.alpha=a),void 0!==s&&(l.tintColor=i.Il.fromArray(s.rgba)),t.set(l)}))}},{key:"_deserializeTextDesign",value:function(t,e){var n=this,r=e.options,o=r.position,a=r.rotation,l=r.flipHorizontally,c=r.flipVertically,f=r.text,h=r.color,d=r.width,y=r.seed,g=r.inverted,m=r.identifier;m===i.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=i.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===i.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=i.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v=new s.Z(this._ui,this._getOptions("textdesign")),_=new u.Z(this._ui,{fonts:i.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),b=t.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(m));return w.setFonts(_.getFonts()),b.setFonts(p(p({},b.getFonts()),_.getVariationsByIdentifier())),w.load().then((function(){var e=x.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return b.loadImages(e).then((function(){return x.onImagesLoaded(),t.createTextDesign({position:o,rotation:a,flipHorizontally:l,flipVertically:c,text:f,color:i.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:x})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Z);b.version="3.0.0"},9879:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(6690),i=n(1346),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.0.0"},6690:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(429),o=n(5576);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(s,t);var e,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function s(){return c(this,s),a.apply(this,arguments)}return(e=[{key:"serialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(d(s.prototype),"serialize",this).call(this,e).then((function(e){return e.meta={platform:"html5",version:t._editor.getSDK().version,createdAt:r.xx.ISODateString(new Date)},e.image=e.inputImage,delete e.inputImage,e}))}},{key:"_serializeSticker",value:function(t,e){var n=f(d(s.prototype),"_serializeSticker",this).call(this,t,e);return n.options.alpha=e.getAlpha(),n.options.tintColor&&(n.options.tintColor={rgba:n.options.tintColor}),n}},{key:"_serializeText",value:function(t,e){var n=f(d(s.prototype),"_serializeText",this).call(this,t,e);return n.options.color={rgba:n.options.color},n.options.backgroundColor={rgba:n.options.backgroundColor},n.options.flipHorizontally=!1,n.options.flipVertically=!1,delete n.options.fontWeight,n}},{key:"_serializePath",value:function(t){var e=f(d(s.prototype),"_serializePath",this).call(this,t);delete e.hardness,delete e.size,delete e.color;var n=t.getBrush();e.brush=n.serializeOptions(["identifier","size","color"],!0),void 0===e.brush.identifier&&delete e.brush.identifier,e.brush.color={rgba:e.brush.color};var r=n.getOption("hardness");return"undefined"!==r&&(e.brush.hardness=r),e}},{key:"_serializeFrameOperation",value:function(t,e){f(d(s.prototype),"_serializeFrameOperation",this).call(this,t,e);var n=e.filter((function(t){return"sprite"===t.type}));if(n.length){var i=n.pop().options.sprites.filter((function(t){return"frame"===t.type}))[0];t.getTintColor().equals(new r.Il(1,1,1,0))||(i.options.tintColor={rgba:t.serializeOption("tintColor",!0)});var o=t.serializeOptions(["scale","alpha"],!0);i.options=r.xx.extend(i.options,o),i.options.size=i.options.scale,delete i.options.scale}}},{key:"_serializeTransformOperation",value:function(t){var e,n=f(d(s.prototype),"_serializeTransformOperation",this).call(this,t);return t._ratio&&(e=t._ratio instanceof o.Z?t._ratio.getIdentifier():t._ratio.identifier,n.options.meta={identifier:e}),delete n.options.scale,n}},{key:"_serializeAdjustmentsOperation",value:function(t){var e=f(d(s.prototype),"_serializeAdjustmentsOperation",this).call(this,t),n=t.availableOptions,r={};return["gamma","whites","blacks","temperature"].forEach((function(e){var i=n[e],o=t.getOption(e),a=i.minValue,s=i.midValue,l=i.maxValue;r[e]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),e.options=l(l({},e.options),r),e}},{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(t);case"linear-focus":return this._serializeLinearFocusOperation(t);case"blur":return this._serializeBlurOperation(t);default:return f(d(s.prototype),"_serializeOperation",this).call(this,t,e)}}},{key:"_serializeMirroredFocusOperation",value:function(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(t){var e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return e.start=e.controlPoint1,delete e.controlPoint1,e.end=e.controlPoint2,delete e.controlPoint2,{type:"focus",options:{type:"linear",options:e}}}},{key:"_serializeBlurOperation",value:function(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],!0)}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(i.Z);y.version="3.0.0"},6252:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(1346),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier;m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v=new o.Z(this._ui,this._getOptions("textdesign")),_=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),b=t.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(m));return w.setFonts(_.getFonts()),b.setFonts(u(u({},b.getFonts()),_.getVariationsByIdentifier())),w.load().then((function(){var e=x.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return b.loadImages(e).then((function(){return x.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:x})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.1.0"},7309:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(9149),i=n(6252),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.1.0"},9149:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l}),n(7857);var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r,l=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(){return i(this,u),l.apply(this,arguments)}return(e=[{key:"_serializeTextDesign",value:function(t,e){var n=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);n.color={rgba:n.color};var r=e.getLayout();return r&&(n.identifier=r.constructor.identifier),{type:"textdesign",options:n}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(n(6690).Z);l.version="3.1.0"},3646:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(6252),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier;m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v="padding"in i?i.padding/d:-1,_=new o.Z(this._ui,this._getOptions("textdesign")),b=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=t.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),O=new(_.getLayoutByIdentifier(m));return x.setFonts(b.getFonts()),w.setFonts(u(u({},w.getFonts()),b.getVariationsByIdentifier())),x.load().then((function(){var e=O.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return w.loadImages(e).then((function(){return O.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:O,padding:v})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.2.0"},7362:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1943),i=n(3646),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.2.0"},1943:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r,l=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(){return i(this,u),l.apply(this,arguments)}return(e=[{key:"_serializeTextDesign",value:function(t,e){var n=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);n.color={rgba:n.color};var r=e.getLayout();return r&&(n.identifier=r.constructor.identifier),n.padding*=n.width,{type:"textdesign",options:n}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(n(9149).Z);l.version="3.2.0"},542:(t,e,n)=>{n.d(e,{Z:()=>g});var r=n(7857),i=n(3646);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(4923),n(7288);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._categoriesByIdentifier={},this._categories=[],this._artFiltersByIdentifier={},this._initCategories()}var e;return(e=[{key:"_initCategories",value:function(){var t=this,e={identifier:"standard",defaultName:"Standard",artFilters:r.yO.DEFAULTS.ART_FILTERS||[]};if(this._categories=[e],this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=r.cQ.mergeCategories(this._categories,this._options.categories,"artFilters")),this._options.availableArtFilters){var n=[];this._categories.forEach((function(e){var r=e.artFilters.filter((function(e){return-1!==t._options.availableArtFilters.indexOf(e.identifier)}));r.length>0&&n.push({identifier:e.identifier,defaultName:e.defaultName,artFilters:r})})),this._categories=n}var i={identifier:"all",defaultName:"All",artFilters:this._categories.length<=0?[]:this._categories.map((function(t){return t.artFilters})).reduce((function(t,e){return t.concat(e)}))};this._categories.unshift(i),this._categoriesByIdentifier.all=i,this._categories.forEach((function(e){t._categoriesByIdentifier[e.identifier]=e})),i.artFilters.forEach((function(e){t._artFiltersByIdentifier[e.identifier]=e}))}},{key:"instantiateStyleTransferModelForArtFilterWithIdentifier",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getArtFilterByIdentifier(t);if(!n)return Promise.reject(new Error("Unknown style with identifier `".concat(t,"`!")));var i=n.rootPath,o=this._ui.getEditor().getSDK(),a=o.getRenderer();e.weightURL=this._ui.getAssetPath(i+"/weights.json");var s=o.getInputTexture().getDimensions(),l=o.getOperationsStack().getByIdentifier("exif-orientation");return l&&(s=l.getNewDimensions(s)),r.Bq.Operations.ArtFilterOperation.StyleTransferModel.createWithOptions(e,s,a)}},{key:"updateLoadedModelWithWeightsForIdentifier",value:function(t,e){var n=this.getArtFilterByIdentifier(e);if(!n)return Promise.reject(new Error("Unknown style with identifier `".concat(e,"`!")));var r=n.rootPath,i=this._ui.getAssetPath(r+"/weights.json");return t.updateWithWeightsFromURL(i)}},{key:"getArtFiltersForCategory",value:function(t){if(!this._categoriesByIdentifier[t])throw new Error("Unknown art filter category '".concat(t,"'"));return this._categoriesByIdentifier[t].artFilters}},{key:"getArtFilterByIdentifier",value:function(t){return this._artFiltersByIdentifier[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getArtFilters",value:function(){var t=this,e=[];return this._categories.map((function(n){var r;e.push.apply(e,function(t){if(Array.isArray(t))return o(t)}(r=t.getArtFiltersForCategory(n.identifier))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e}},{key:"getCategoryByIdentifier",value:function(t){return this._categoriesByIdentifier[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=n(9944);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=r.xx.flipObject(s.Z),y=r.Bq.Operations.ArtFilterOperation,g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,n,i,o=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(i){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function s(){return u(this,s),o.apply(this,arguments)}return(e=[{key:"_deserializeOperation",value:function(t){return"artFilter"===t.type?this._deserializeStyle(t):c(h(s.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeOrientationOperation",value:function(t){var e=t.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(e),Promise.resolve(n)):Promise.resolve()}},{key:"_deserializeStyle",value:function(t){var e=this,n=t.options,i=n.identifier,o=n.intensity,s=n.blendMode,l=n.tileEdgeLength,u=n.overlappingFactor;return i?y.isSupported(this._editor.getSDK())?new a(this._ui,this._getOptions("artfilter")).instantiateStyleTransferModelForArtFilterWithIdentifier(i,{tileEdgeLength:l,overlappingFactor:u}).catch((function(t){r.Zb.warn("Could not deserialize art filter: ".concat(t))})).then((function(t){e._editor.operations.getOrCreate("artfilter",{identifier:i,styleTransferModel:t,intensity:o,blendMode:parseInt(d[s||s],10)})})):(r.Zb.warn("Can't restore Art Filters, as they're not supported on this platform."),Promise.resolve()):(r.Zb.warn("Found invalid Art Filter serialization."),Promise.resolve())}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(i.Z);g.version="3.4.0"},6021:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(4284),i=n(542),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.4.0"},4284:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(1943),i=n(9944);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function f(){return a(this,f),o.apply(this,arguments)}return(e=[{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"artfilter":return this._serializeStyle(t);default:return s(c(f.prototype),"_serializeOperation",this).call(this,t,e)}}},{key:"_serializeOrientationOperation",value:function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeStyle",value:function(t){var e=t.getOptions(),n=e.identifier,r=e.intensity,o=e.blendMode,a=t.getStyleTransferModel().getOptions(),s=a.tileEdgeLength,l=a.overlappingFactor;return{type:"artFilter",options:{identifier:n,intensity:r,blendMode:i.Z[o],tileEdgeLength:s,overlappingFactor:l}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(r.Z);f.version="3.4.0"},3167:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(542),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier,v="padding"in i?i.padding/d:-1,_=new o.Z(this._ui,this._getOptions("textdesign")),b=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=t.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),O=new(_.getLayoutByIdentifier(m));return x.setFonts(b.getFonts()),w.setFonts(u(u({},w.getFonts()),b.getVariationsByIdentifier())),x.load().then((function(){var e=O.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return w.loadImages(e).then((function(){return O.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:O,padding:v})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.5.0"},3102:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(2527),i=n(3167),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.5.0"},2527:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,r=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function l(){return i(this,l),r.apply(this,arguments)}return l}(n(4284).Z);l.version="3.5.0"},9030:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,i,c=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function f(){return o(this,f),c.apply(this,arguments)}return(e=[{key:"_deserializeAdjustmentsOperation",value:function(t){var e=r.Bq.Operations.AdjustmentsOperation;return a(u(f.prototype),"_deserializeAdjustmentsOperation",this).call(this,t).then((function(n){if(!n)return null;var r=t.options,i={};if(void 0!==r.sharpness){var o=e.prototype.availableOptions.sharpness,a=o.minValue,s=o.midValue,l=o.maxValue,u=r.sharpness;return u=u<0?s+(s-a)*u:s+(l-s)*u,i.sharpness=u,n.set(i),n}}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(n(3167).Z);c.version="3.6.0"},4146:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(3903),i=n(9030),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.6.0"},3903:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>p});var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(r){var i=f(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return c(this,t)});function a(){return s(this,a),i.apply(this,arguments)}return(e=[{key:"_serializeAdjustmentsOperation",value:function(t){var e=l(f(a.prototype),"_serializeAdjustmentsOperation",this).call(this,t),n={},r=t.availableOptions.sharpness,i=t.getOption("sharpness"),s=r.minValue,u=r.midValue,c=r.maxValue;return n.sharpness=i<=u?(i-s)/(u-s)-1:(i-u)/(c-u),e.options=o(o({},e.options),n),e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(n(2527).Z);p.version="3.6.0"},5474:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,i,u=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(i){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),u.apply(this,arguments)}return(e=[{key:"deserialize",value:function(){var t=this;return this._validateVersion().then((function(){return t._deserializeAssetLibrary()})).then((function(){return t._deserializeInputImage()})).then((function(){return t._deserializeOperations()}))}},{key:"_deserializeAssetLibrary",value:function(){var t=this;return new Promise((function(e,n){var r=t._data;if(r.assetLibrary){var i=r.assetLibrary.assets,o=[];for(var a in i)o.push(t._deserializeCustomAssets(a,i[a]));return Promise.all(o).then((function(){e()})).catch((function(t){console.error(t),n(t)}))}e()}))}},{key:"_deserializeCustomAssets",value:function(t,e){switch(t){case"stickers":return this._deserializeCustomStickerAssets(e);default:return Promise.reject(new Error("Unknown asset type: ".concat(t)))}}},{key:"_deserializeCustomStickerAssets",value:function(t){var e=this,n="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(n=i.controlsOptions.sticker.customStickerTintMode||"none");var o=t.map((function(t){return new Promise((function(i,o){var a=t.identifier,s=t.raster,l=void 0!==t.svg,u="data:".concat(s.type,";base64,").concat(s.data),c=new r.Image;c.onload=function(){var r,o=e._editor.getSDK();(c=o.correctExifOrientation(c)).toDataURL&&(u=c.toDataURL()),r=e._stickerManager.renderStickerThumbnailFromImage(c);var s={identifier:a,defaultName:t.name||"",tintMode:n,images:{mediaBase:{uris:[u],rawData:!0,isSVG:l,width:c.width,height:c.height},mediaThumb:{uris:[r.data],rawData:!0,width:r.width,height:r.height}}};if(l){var f="data:image/svg+xml;base64,".concat(t.svg.data);s.images.mediaBase.uris.push(f)}i(s)},c.onerror=function(){o(new Error("Invalid base64 data: ".concat(u)))},c.src=u}))}));return Promise.all(o).then((function(t){e._editor.getDynamicAssetsLibrary().setAssets("sticker",t),e._stickerManager.reload()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(9030).Z);u.version="3.7.0"},9848:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(8629),i=n(5474),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.7.0"},8629:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,u=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return i(this,c),u.apply(this,arguments)}return(e=[{key:"serialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(l(c.prototype),"serialize",this).call(this,e).then((function(e){return t._serializeAssetLibrary(e).then((function(t){return t}))}))}},{key:"_serializeAssetLibrary",value:function(t){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(t);var e=this._editor.getDynamicAssetsLibrary(),n=this._serializeCustomStickerAssets(t,e);return 0===n.length||(t.assetLibrary={assets:{stickers:n}}),Promise.resolve(t)}},{key:"_serializeCustomStickerAssets",value:function(t,e){var n=e.getAssets("sticker");if(0===n.length)return[];var r=t.operations.filter((function(t){return"sprite"===t.type})).flatMap((function(t){return t.options.sprites})).filter((function(t){return"sticker"===t.type})).map((function(t){return t.options.identifier})),i={};return r.forEach((function(t){i[t]=!0})),n.filter((function(t){return i[t.identifier]})).map((function(t){var e=t.identifier,n=t.defaultName,r=t.images,i=r.mediaBase.uris[0],o=r.mediaBase.isSVG,a=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(i),s={identifier:e,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:r.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(3903).Z);u.version="3.7.0"},2574:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,r=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function l(){return i(this,l),r.apply(this,arguments)}return l}(n(5474).Z);l.version="3.8.0"},5699:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(9786),i=n(2574),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.8.0"},9786:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,u=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return i(this,c),u.apply(this,arguments)}return(e=[{key:"_serializeSticker",value:function(t,e){var n=o(l(c.prototype),"_serializeSticker",this).call(this,t,e);return n.options.tintMode=e.getTintMode(),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(8629).Z);u.version="3.8.0"},8481:(t,e,n)=>{n.d(e,{Z:()=>w});var r=n(9786),i=n(5576);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=2*Math.PI,p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,o=(n=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function p(){return a(this,p),o.apply(this,arguments)}return(e=[{key:"_serializeTransformOperation",value:function(t){var e=this._editor.operations;if(e.exists("orientation")){t=t.clone();var n=e.get("orientation");n.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),n.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),t.rotate(-n.getRotation())}var r=t.serializeOptions(["start","end","rotation","textureScale"],!0);r.rotation=(r.rotation+f)%f,1!==r.textureScale&&(r.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete r.textureScale;var o,a={type:"transform",options:r};return t._ratio&&(o=t._ratio instanceof i.Z?t._ratio.getIdentifier():t._ratio.identifier,a.options.meta={identifier:o}),delete a.options.scale,a}},{key:"_serializeText",value:function(t,e){var n=t.getInputDimensions(!1),r=s(c(p.prototype),"_serializeText",this).call(this,t,e);return r.options.fontSize=r.options.fontSize*n.y/n.min(),r}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(r.Z);p.version="3.9.0";var h=n(7857);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(n);if(r){var i=_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return v(this,t)});function o(){return y(this,o),i.apply(this,arguments)}return(e=[{key:"_deserializeTransformOperation",value:function(t){var e=this;return g(_(o.prototype),"_deserializeCropOperation",this).call(this,t).then((function(t){if(t){var n=h.xx.Array.find(e._data.operations,(function(t){return"orientation"===t.type}));if(n){var r=n.options;t.rotate(r.rotation),r.flipHorizontally&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),r.flipVertically&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t._ratio=null,t}}))}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,i=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=this._ui.getFontLoader(),p=this._fontManager.getVariationByIdentifier(o);return p?f.setFonts([p.getFont()]):p=this._fontManager.getDefaultVariation(),f.load().then((function(){var e=t.getInputDimensions(!1),o=e.min(),f=e.x,d=e.y,y=l*o/f,g=r*o/d,m=t.createText({fontSize:g,lineHeight:i,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),textMetrics:p.getTextMetrics(),alignment:a,rotation:s,maxWidth:y,text:n.text,color:h.Il.fromArray(u.rgba),backgroundColor:h.Il.fromArray(c.rgba),position:h.FM.fromObject(n.position)});return m._edited=!0,m}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(n(2574).Z);b.version="3.9.0";var w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new p(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new b(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();w.version="3.9.0"},9313:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,{Z:()=>a});var i=void 0===n.g?window:n.g,o="undefined"!=typeof Promise?Promise:function(){var t,e,n,i=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(t,e,n){return t[e]=n,t}}function a(t,r){n.add(t,r),e||(e=o(n.drain))}function s(t){var e,n=r(t);return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function l(){for(var t=0;t<this.chain.length;t++)u(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function u(t,e,n){var r,i;try{!1===e?n.reject(t.msg):(r=!0===e?t.msg:e.call(void 0,t.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=s(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(t){n.reject(t)}}function c(t){var e,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(e=s(t))?a((function(){var r=new h(n);try{e.call(t,(function(){c.apply(r,arguments)}),(function(){f.apply(r,arguments)}))}catch(t){f.call(r,t)}})):(n.msg=t,n.state=1,n.chain.length>0&&a(l,n))}catch(t){f.call(new h(n),t)}}}function f(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&a(l,e))}function p(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then((function(t){n(i,t)}),r)}(i)}function h(t){this.def=t,this.triggered=!1}function d(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function y(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new d(this);this.then=function(t,n){var r={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");r.resolve=t,r.reject=e})),e.chain.push(r),0!==e.state&&a(l,e),r.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,(function(t){c.call(e,t)}),(function(t){f.call(e,t)}))}catch(t){f.call(e,t)}}n=function(){var t,n,r;function i(t,e){this.fn=t,this.self=e,this.next=void 0}return{add:function(e,o){r=new i(e,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var r=t;for(t=n=e=void 0;r;)r.fn.call(r.self),r=r.next}}}();var g=t({},"constructor",y,!1);return y.prototype=g,t(g,"__NPO__",0,!1),t(y,"resolve",(function(t){return t&&"object"==r(t)&&1===t.__NPO__?t:new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)}))})),t(y,"reject",(function(t){return new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)}))})),t(y,"all",(function(t){var e=this;return"[object Array]"!=i.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;p(e,t,(function(t,e){o[t]=e,++a===i&&n(o)}),r)}))})),t(y,"race",(function(t){var e=this;return"[object Array]"!=i.call(t)?e.reject(TypeError("Not an array")):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");p(e,t,(function(t,e){n(e)}),r)}))})),y}();i.Promise=i.Promise||o;const a=o},2930:function(t){(function(){var e,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-r)/1e6},n=process.hrtime,r=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})()):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},3456:t=>{function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=t.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,f,p,h,d=t[u].replace(a,"%20"),y=d.indexOf(r);y>=0?(c=d.substr(0,y),f=d.substr(y+1)):(c=d,f=""),p=decodeURIComponent(c),h=decodeURIComponent(f),e(o,p)?Array.isArray(o[p])?o[p].push(h):o[p]=[o[p],h]:o[p]=h}return o}},4514:t=>{var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[i]))})).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},7526:(t,e,n)=>{e.decode=e.parse=n(3456),e.encode=e.stringify=n(4514)},5994:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},888:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},2426:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},8737:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},9059:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},5209:t=>{t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},9960:t=>{t.exports="varying vec2 v_texCoord;\n\n// Added to the calculated (x,y) texture coordinates, to actually sample the 'center' of a pixel\nconst vec2 halfCR = vec2(0.5, 0.5);\n\n// A uniform holding the dimensions (height/rows, width/cols) of the texture we're rendering to\nuniform vec2 output_texRC;\n\n// A uniform holding the virtual output dimensions when rendering to larger textures. This allows\n// making use of the viewport and only two very large textures to perform all tensor rendering.\nuniform vec2 output_sizeRC;\n\nbool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n}\n\nbool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n}\n\nfloat getNaN(vec4 values) {\n    return dot(vec4(1), values);\n}\n\nint round(float value) {\n    return int(floor(value + 0.5));\n}\n\nint imod(int x, int y) {\n    return x - y * (x / y);\n}\n\n//Based on the work of Dave Hoskins\n//https://www.shadertoy.com/view/4djSRW\n#define HASHSCALE1 443.8975\nfloat random(float seed){\n    vec2 p = v_texCoord * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 UVfrom1D(vec2 texNumRC, vec2 sizeRC, int index) {\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom2D(vec2 texNumRC, vec2 sizeRC, int numC, int row, int col) {\n  // Calculate x & y in logical size\n  int index = row * numC + col;\n  int logR = index / int(sizeRC.y);\n  int logC = index - logR * int(sizeRC.y);\n\n  // Return relative positions of row & col in texture size\n  return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom4D(vec2 texNumRC, vec2 sizeRC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nfloat sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n}\n"},2603:t=>{t.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},1898:t=>{t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},9478:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},3488:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"},7761:t=>{t.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},1995:t=>{t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},2511:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"},5024:t=>{t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},71:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},9018:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},9367:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},7705:t=>{t.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},8234:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},1689:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},8171:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},8715:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},74:t=>{t.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},5119:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},5285:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},175:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},3841:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},7165:t=>{t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},5193:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},2519:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},6188:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},9532:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},1602:t=>{var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?d:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function g(){}function m(){}function v(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(R([])));w&&w!==n&&r.call(w,o)&&(_=w);var x=v.prototype=g.prototype=Object.create(_);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function R(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:e,done:!0}}return m.prototype=x.constructor=v,v.constructor=m,m.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,s,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},7333:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,u=/^xn--/,c=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,d=String.fromCharCode;function y(t){throw RangeError(p[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(f,".")).split("."),e).join(".")}function v(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function _(t){return g(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;r+=l)t=h(t/35);return h(r+36*t/(t+38))}function x(t){var e,n,r,i,o,a,u,c,f,p,d,g=[],m=t.length,v=0,b=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,u=l;i>=m&&y("invalid-input"),((c=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||c>h((s-v)/a))&&y("overflow"),v+=c*a,!(c<(f=u<=x?1:u>=x+26?26:u-x));u+=l)a>h(s/(p=l-f))&&y("overflow"),a*=p;x=w(v-o,e=g.length+1,0==o),h(v/e)>s-b&&y("overflow"),b+=h(v/e),v%=e,g.splice(v++,0,b)}return _(g)}function O(t){var e,n,r,i,o,a,u,c,f,p,g,m,_,x,O,S=[];for(m=(t=v(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(g=t[a])<128&&S.push(d(g));for(r=i=S.length,i&&S.push("-");r<m;){for(u=s,a=0;a<m;++a)(g=t[a])>=e&&g<u&&(u=g);for(u-e>h((s-n)/(_=r+1))&&y("overflow"),n+=(u-e)*_,e=u,a=0;a<m;++a)if((g=t[a])<e&&++n>s&&y("overflow"),g==e){for(c=n,f=l;!(c<(p=f<=o?1:f>=o+26?26:f-o));f+=l)O=c-p,x=l-p,S.push(d(b(p+O%x,0))),c=h(O/x);S.push(d(b(c,0))),o=w(n,_,r==i),n=0,++r}++n,++e}return S.join("")}a={version:"1.3.2",ucs2:{decode:v,encode:_},decode:x,encode:O,toASCII:function(t){return m(t,(function(t){return c.test(t)?"xn--"+O(t):t}))},toUnicode:function(t){return m(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()},1662:(t,e,n)=>{var r=n(7333),i=n(9597);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=_,e.WU=function(t){return i.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),f=["%","/","?",";","#"].concat(c),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(7526);function _(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(s);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(s);if(_=_.trim(),!n&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(_);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,_=_.substr(w.length)}if(n||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===_.substr(0,2);!O||w&&g[w]||(_=_.substr(2),this.slashes=!0)}if(!g[w]&&(O||w&&!m[w])){for(var S,k,T=-1,C=0;C<p.length;C++)-1!==(E=_.indexOf(p[C]))&&(-1===T||E<T)&&(T=E);for(-1!==(k=-1===T?_.lastIndexOf("@"):_.lastIndexOf("@",T))&&(S=_.slice(0,k),_=_.slice(k+1),this.auth=decodeURIComponent(S)),T=-1,C=0;C<f.length;C++){var E;-1!==(E=_.indexOf(f[C]))&&(-1===T||E<T)&&(T=E)}-1===T&&(T=_.length),this.host=_.slice(0,T),_=_.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var D=this.hostname.split(/\./),P=(C=0,D.length);C<P;C++){var I=D[C];if(I&&!I.match(h)){for(var A="",F=0,j=I.length;F<j;F++)I.charCodeAt(F)>127?A+="x":A+=I[F];if(!A.match(h)){var M=D.slice(0,C),B=D.slice(C+1),z=I.match(d);z&&(M.push(z[1]),B.unshift(z[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var L=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+L,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!y[x])for(C=0,P=c.length;C<P;C++){var U=c[C];if(-1!==_.indexOf(U)){var W=encodeURIComponent(U);W===U&&(W=escape(U)),_=_.split(U).join(W)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,G)):e&&(this.search="",this.query={}),_&&(this.pathname=_),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var V=this.search||"";this.path=L+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=t[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),p=0;p<f.length;p++){var h=f[p];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||n.host&&t.pathname,x=w,O=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===O[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return S&&(n.hostname=n.host=O.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=O.slice(-1)[0],T=(n.host||t.host||O.length>1)&&("."===k||".."===k)||""===k,C=0,E=O.length;E>=0;E--)"."===(k=O[E])?O.splice(E,1):".."===k?(O.splice(E,1),C++):C&&(O.splice(E,1),C--);if(!w&&!x)for(;C--;C)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),T&&"/"!==O.join("/").substr(-1)&&O.push("");var R,D=""===O[0]||O[0]&&"/"===O[0].charAt(0);return S&&(n.hostname=n.host=D?"":O.length?O.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(w=w||n.host&&O.length)&&!D&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},9597:t=>{t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},9719:t=>{t.exports=JSON.parse('{"name":"engine-wrapper","version":"4.22.3","description":"The most comprehensive photo editor SDK for HTML5","repository":"http://github.com/imgly/pesdk-html5","author":"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>","license":"SEE LICENSE IN LICENSE.md","bin":{},"scripts":{"prebuild":"node ../scripts/prebuild-server.js","build":"yarn && yarn run build:prod","build:prod":"cross-env ENV=production webpack","build:dev":"cross-env ENV=development webpack"},"devDependencies":{"@babel/cli":"^7.11.5","@babel/core":"^7.11.5","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-proposal-object-rest-spread":"^7.11.0","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","babel-loader":"^8.1.0","cross-env":"^7.0.2","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master","jsdoc":"^3.6.3","performance-now":"^0.2.0","preprocess-loader":"^0.3.0","raw-loader":"^4.0.1","rimraf":"^2.6.2","stats.js":"^0.16.0","url":"^0.11.0","webpack":"^5.0.0-beta.29","webpack-cli":"3.3.12"},"standard":{"globals":["describe","context","before","beforeEach","after","afterEach","it","expect"],"parser":"babel-eslint"},"dependencies":{"@babel/runtime":"^7.11.2","can-use-dom":"^0.1.0","canvas":"^2.6.0","gl":"^4.1.1","lodash.debounce":"^4.0.8","lodash.memoize":"^4.1.2","lodash.throttle":"^4.1.1","opn":"^5.3.0","request":"^2.88.0","resize-observer-polyfill":"^1.5.1"},"devEngines":{"node":"8.x || 9.x || 10.x || 11.x || 12.x"}}')}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(6675)})()})));function oe(t){return void 0!==t.x}function ae(t){return P.fromTRS(t.position.x,t.position.y,t.rotation,t.scale.x,t.scale.y)}function se(t){var e=t.getParent(),n=function(t){return t.getBaseLocalToParentMatrix?t.getBaseLocalToParentMatrix():ae(t.getTransform())}(t);if(void 0===e)return n;var r=se(e);return P.multiply(r,n)}function le(t){var e=t.getParent(),n=function(t){return t.getLocalToParentMatrix?t.getLocalToParentMatrix():ae(t.getTransform())}(t);if(void 0===e)return n;var r=le(e);return P.multiply(r,n)}function ue(t,e,n,r){void 0===r&&(r=!1);var i="output"===e.type&&r?se(e):le(e),o="output"===n.type&&r?se(n):le(n),a=P.getInverted(o);return P.transformPoint(a,P.transformPoint(i,t))}function ce(t,e,n){var r=new R(t,0),i=new R(ue(r,e,n)),o=new R(ue(R.ZERO,e,n));return R.distance(o,i)}function fe(t,e){var n=le(e);return P.transformPoint(n,t)}function pe(t){var e=le(t),n=t.getBounds(),r={x:n.width,y:0},i={x:0,y:n.height},o=new R(P.transformPoint(e,R.ZERO)),a=new R(P.transformPoint(e,r)),s=new R(P.transformPoint(e,i));return{width:R.distance(o,a),height:R.distance(o,s)}}function he(t,e,n){void 0===n&&(n=!0);var r=e.getBounds();return{x:t.x*r.width+(n?0:r.minX),y:t.y*r.height+(n?0:r.minY)}}function de(t,e,n){void 0===n&&(n=!0);var r=e.getBounds();return{x:(t.x-(n?0:r.minX))/r.width,y:(t.y-(n?0:r.minY))/r.height}}function ye(t,e){var n=ue({x:1,y:0},t,e,!0),r=ue(R.ZERO,t,e,!0);return Math.atan2(n.y-r.y,n.x-r.x)}function ge(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0===t.a}function me(t){return"string"!=typeof t&&Array.isArray(t)&&3===t.length}function ve(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0!==t.a}function _e(t){return"string"!=typeof t&&Array.isArray(t)&&4===t.length}!function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(zt||(zt={}));var be=function(){function t(t,e){this.engine=e,this.transform=E.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=t}return Object.defineProperty(t.prototype,"quality",{get:function(){return this.previewQuality},enumerable:!0,configurable:!0}),t.prototype.setQuality=function(t){this.previewQuality=Math.min(Math.max(t,.01),1)},t.prototype.getTransform=function(){return this.transform},t.prototype.setTransform=function(t){this.transform=t},t.prototype.getPosition=function(){return this.transform.position},t.prototype.setPosition=function(t,e){var n;n="number"==typeof t?{x:t,y:void 0===e?t:e}:t;var r=this.transform.scale,i=this.transform.rotation;this.setTransform(new E(n,r,i))},t.prototype.getScale=function(){return this.transform.scale},t.prototype.setScale=function(t,e){var n;n="number"!=typeof t?t:{x:t,y:void 0===e?t:e};var r=this.transform.position,i=this.transform.rotation;this.setTransform(new E(r,n,i))},t.prototype.getRotation=function(){return this.transform.rotation},t.prototype.setRotation=function(t){var e=this.transform.position,n=this.transform.scale;this.setTransform(new E(e,n,t))},t.prototype.getCanvasPivot=function(){return this.canvasPivot},t.prototype.setCanvasPivot=function(t,e){this.canvasPivot="number"==typeof t?{x:t,y:void 0===typeof e?t:e}:t},t.prototype.getCanvasBounds=function(){var t=this.canvasPivot,e=this.canvas,n=e.width,r=e.height;return new D(-t.x*n,-t.y*r,n,r)},t}();function we(t){return void 0!==t.getTransform}var xe=function(t){function e(e){var n=t.call(this)||this;return n.config=e,n}return v(e,t),e.prototype.getOutputDimensions=function(){var t=this.getOutputContainer();return t?t.getResolution():{width:0,height:0}},e.prototype.getSmallerOutputSide=function(){var t=this.getOutputContainer();if(!t)return 0;var e=t.getResolution();return Math.min(e.width,e.height)},e.prototype.convertPointFromPreviewIntoOutputSpace=function(t,e){var n=P.getInverted(ae(e));return P.transformPoint(n,t)},e.prototype.convertPointFromPreviewIntoWorldSpace=function(t,e,n){var r=P.getInverted(ae(e)),i=n?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=P.multiply(i,r);return P.transformPoint(o,t)},e.prototype.convertPointFromPreviewIntoFlippedPreviewSpace=function(t){var e=this.getOutputContainer().getFlipTransformMatrix();return P.transformPoint(e,t)},e.prototype.convertPointFromWorldIntoPreviewSpace=function(t,e){var n=ae(e),r=P.getInverted(this.getOutputContainer().getLocalToParentMatrix()),i=P.multiply(n,r);return P.transformPoint(i,t)},e.prototype.convertPointFromOutputIntoPreviewSpace=function(t,e){var n=ae(e);return P.transformPoint(n,t)},e.prototype.getContainersAtPreviewPoint=function(t,e){var n,r,i=new Array,o=this.convertPointFromPreviewIntoWorldSpace(t,e),a=this.getRootContainers();try{for(var s=S(a),l=s.next();!l.done;l=s.next()){var u=l.value;this.accumulateContainersAtWorldPointInHierarchy(o,u,i)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},e.prototype.isPreviewPointInContainer=function(t,e,n){var r=this.convertPointFromPreviewIntoWorldSpace(t,n);return this.isWorldPointInContainer(r,e)},e.prototype.isWorldPointInContainer=function(t,e){var n=le(e),r=P.getInverted(n),i=P.transformPoint(r,t);return D.contains(e.getBounds(),i)},e.prototype.accumulateContainersAtWorldPointInHierarchy=function(t,e,n){var r,i;this.isWorldPointInContainer(t,e)&&n.push(e);var o=e.getChildren();try{for(var a=S(o),s=a.next();!s.done;s=a.next()){var l=s.value;we(l)&&this.accumulateContainersAtWorldPointInHierarchy(t,l,n)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e}(St),Oe=function(){function t(t){this.engine=t,this.id=A()}return t.prototype.getID=function(){return this.id},t.prototype.getContainer=function(){return this.engine.getRootContainers()[0]},t.prototype.getIndexInParent=function(){for(var t=this.engine.rootOperations,e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1},t.prototype.setIndexInParent=function(t){this.engine.moveIndex(this,t)},t.prototype.isValid=function(){return-1!==this.getIndexInParent()},t}(),Se=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.operation=r,i.type="adjustments",i.setProperties(e),i}return v(e,t),e.prototype.getProperties=function(){var t=this.operation.getOptions(),e=t.gamma-1;return{brightness:t.brightness||0,saturation:t.saturation||0,contrast:t.contrast||0,gamma:(e<0?2*e:e)||0,clarity:t.clarity||0,exposure:t.exposure||0,shadows:.5*t.shadows||0,highlights:t.highlights||0,whites:t.whites||0,blacks:t.blacks||0,temperature:t.temperature||0,sharpness:t.sharpness||0}},e.prototype.setProperties=function(t){void 0!==t.gamma&&(t.gamma=1+(t.gamma<0?.5*t.gamma:t.gamma)),t.shadows&&(t.shadows=2*t.shadows),this.operation.set(t)},e.prototype.getOperation=function(){return this.operation},e.prototype.getTypeIdentifier=function(){return"adjustments"},e}(Oe),ke=function(t){if(ve(t))return new ie.PhotoEditorSDK.Color(t.r,t.g,t.b,t.a);if(_e(t))return new ie.PhotoEditorSDK.Color(t[0],t[1],t[2],t[3]);if(ge(t))return new ie.PhotoEditorSDK.Color(t.r,t.g,t.b,1);if(me(t))return new ie.PhotoEditorSDK.Color(t[0],t[1],t[2],1);if(function(t){return"string"==typeof t}(t)){var e=k(t.match(/[0-9A-fa-f]{1,2}/g),3),n=e[0],r=e[1],i=e[2];return new ie.PhotoEditorSDK.Color(parseInt(n,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")},Te=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){return this._x=t,this._y=e,this},t.prototype.clone=function(){return new t(this._x,this._y)},t.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this},t.prototype.clamped=function(t,e){void 0===t&&(t=this),void 0===e&&(e=this);var n="number"==typeof t?{x:t,y:t}:t,r="number"==typeof e?{x:e,y:e}:e;return this._x=Math.max(n.x,this._x),this._y=Math.max(n.y,this._y),this._x=Math.min(r.x,this._x),this._y=Math.min(r.y,this._y),this},t.prototype.divide=function(t,e){return"number"==typeof t||null===t?(this._x/=t,this._y/=void 0===e?t:e):(this._x/=t.x,this._y/=t.y),this},t.prototype.subtract=function(t,e){return"number"==typeof t||null===t?(this._x-=t,this._y-=void 0===e?t:e):(this._x-=t.x,this._y-=t.y),this},t.prototype.multiply=function(t,e){return"number"==typeof t||null===t?(this._x*=t,this._y*=void 0===e?t:e):(this._x*=t.x,this._y*=t.y),this},t.prototype.add=function(t,e){return"number"==typeof t||null===t?(this._x+=t,this._y+=void 0===e?t:e):(this._x+=t.x,this._y+=t.y),this},t.prototype.dot=function(t,e){return"number"==typeof t||null===t?this._x*t+this._y*(void 0===e?t:e):this._x*t.x+this._y*t.y},t.prototype.equals=function(t,e){return"number"==typeof t||null===t?t===this._x&&e===this._y:t.x===this._x&&t.y===this._y},t.prototype.flip=function(){var t=this._x;return this._x=this._y,this._y=t,this},t.prototype.round=function(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this},t.prototype.ceil=function(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this},t.prototype.floor=function(){return this._x=0|this._x,this._y=0|this._y,this},t.prototype.abs=function(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this},t.prototype.len=function(){return Math.sqrt(this._x*this._x+this._y*this._y)},t.prototype.min=function(){return Math.min(this._x,this._y)},t.prototype.max=function(){return Math.max(this._x,this._y)},t.prototype.toObject=function(){return{x:this._x,y:this._y}},t.prototype.toString=function(){return"Vector2({ x: "+this._x+", y: "+this._y+" })"},t.prototype.roundDecimal=function(t){return this._x=parseFloat(this._x.toFixed(t)),this._y=parseFloat(this._y.toFixed(t)),this},t.prototype.asArray=function(t){return void 0===t&&(t=!1),t?[this._y,this._x]:[this._x,this._y]},t.fromObject=function(e){return new t(e.x,e.y)},t.fromSize=function(e){return new t(e.width,e.height)},Object.defineProperty(t,"NULL",{get:function(){return new t(0,0)},enumerable:!0,configurable:!0}),t}(),Ce=function(){function t(t){this.engine=t,this.id=A(),this.transform=E.IDENTITY,this.bounds=D.ZERO}return t.prototype.getID=function(){return this.id},t.prototype.getParent=function(){var t=this.engine.getRootContainers();if(0!==t.length&&this.id!==t[0].id)return t[0]},t.prototype.getIndexInParent=function(){for(var t=this.engine.rootOperations,e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1},t.prototype.setIndexInParent=function(t){this.engine.moveIndex(this,t)},t.prototype.getChildren=function(){var t=this.engine.getRootContainers();return t.length>0&&(this.id===t[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]},t.prototype.getBounds=function(){return this.bounds},t.prototype.setPivotOnSelfAndSprite=function(t,e,n){"number"==typeof e?(this.setPivotInternal(e,n),t.setPivot(new Te(e,n))):(this.setPivotInternal(e),t.setPivot(Te.fromObject(e)))},t.prototype.setPivot=function(t,e){this.setPivotInternal(t,e)},t.prototype.getPivot=function(){var t=this.getBounds();return{x:-t.minX/t.width,y:-t.minY/t.height}},t.prototype.getTransform=function(){return this.transform},t.prototype.setTransform=function(t){this.transform=t},t.prototype.updateTransform=function(){this.setTransform(this.transform)},t.prototype.getPosition=function(){return this.transform.position},t.prototype.setPosition=function(t,e){var n;n="number"==typeof t?{x:t,y:void 0===e?t:e}:t;var r=this.transform.scale,i=this.transform.rotation;this.setTransform(new E(n,r,i))},t.prototype.getScale=function(){return this.transform.scale},t.prototype.setScale=function(t,e){var n;n="number"!=typeof t?t:{x:t,y:void 0===e?t:e};var r=this.transform,i=r.position,o=r.rotation;this.setTransform(new E(i,n,o))},t.prototype.getRotation=function(){return this.transform.rotation},t.prototype.setRotation=function(t){var e=this.transform,n=e.position,r=e.scale;this.setTransform(new E(n,r,t))},t.prototype.getSizeInWorldSpace=function(){return pe(this)},t.prototype.getSizeInOutputSpace=function(){return t=this,e=this.engine.getOutputContainer(),n=pe(t),r=e.getTransform().scale,i=1/r.x,o=1/r.y,{width:n.width*i,height:n.height*o};var t,e,n,r,i,o},t.prototype.setSizeInWorldSpace=function(t){var e=this.getBounds();this.setScale(t.width/e.width,t.height/e.height)},t.prototype.setSizeInOutputSpace=function(t){var e=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:t.width/e.x,height:t.height/e.y})},t.prototype.isValid=function(){return-1!==this.getIndexInParent()},t.prototype.setPivotInternal=function(t,e){var n=this.getBounds();"number"==typeof t?this.setBoundsFromSize(n.width,n.height,{x:t,y:e}):this.setBoundsFromSize(n.width,n.height,t)},t.prototype.setBoundsFromSize=function(t,e,n){void 0===n&&(n=this.getPivot()),this.bounds=new D(-n.x*t,-n.y*e,t,e)},t}(),Ee=function(t){function e(e,n){var r=t.call(this,n)||this;r.type="drawing",r.drawing=e,r.operation=n.createSpriteOperation(),r.sprite=r.operation.createBrush({}),r.operation.addSprite(r.sprite),r.radialBrush=r.sprite._createRadialBrush();var i=n.getRootContainers()[0].getBounds();return r.bounds=new D(0,0,i.width,i.height),r.setTransform(E.IDENTITY),r.operation.setDirty(!0),r.setData(e),r}return v(e,t),e.prototype.beginStroke=function(t){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if("imgly_brush_radial"!==t.id)throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=t,this.currentStroke={brush:t,path:{controlPoints:[]}},this.radialBrush.setColor(ke(t.color)),this.radialBrush.setHardness(t.hardness),this.radialBrush.setSize(t.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())},e.prototype.addPointToCurrentStroke=function(t,e){if(void 0===e&&(e=!0),!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){var n=this.currentStroke.path.controlPoints,r=n[n.length-1],i=this.currentBrush.size/10;if(Math.sqrt(t.x-Math.pow(r.x,2)+(t.y-Math.pow(r.y,2)))<i)return}var o=this.engine.getOutputContainer(),a=de(ue(t,this.engine.getRootContainers()[0],o,!0),o,!1),s=o.getBounds();this.currentPath.addControlPoint(Te.fromObject(a)),this.currentStroke.path.controlPoints.push(t),e&&this.sprite.render(Te.fromObject({x:s.width,y:s.height}))},e.prototype.endStroke=function(){if(this.currentStroke&&this.currentPath&&this.currentBrush){this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);var t=this.engine.getOutputContainer().getBounds();this.sprite.render(Te.fromObject({x:t.width,y:t.height})),this.currentPath=void 0}},e.prototype.setData=function(t){this.drawing=_(_({},this.drawing),t),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(t.strokes)},e.prototype.getData=function(){return this.drawing},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.getOperation=function(){return this.operation},e.prototype.drawStrokes=function(t){var e=this;t.forEach((function(t){e.beginStroke(t.brush),t.path.controlPoints.forEach((function(t){e.addPointToCurrentStroke(t,!0)})),e.endStroke()}))},e}(Ce),Re=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.filterOperation=n,o.type="duotone-filter",n.set({intensity:r.colorIntensity}),n.set({filter:e}),i.pesdk.setAllOperationsToDirty(),o}return v(e,t),e.prototype.getProperties=function(){return{colorIntensity:this.filterOperation.getOptions().intensity}},e.prototype.setProperties=function(t){var e=this.filterOperation.getOptions().intensity;void 0!==t.colorIntensity&&(e=Math.min(Math.max(t.colorIntensity,0),1)),this.filterOperation.set({intensity:e})},e.prototype.getOperation=function(){return this.filterOperation},e.prototype.getTypeIdentifier=function(){return"filter"},e}(Oe),De=function(){function t(t,e){this.engine=e,this.loaded=!1,this.loading=!1,this.asset=_({},t)}return t.prototype.load=function(){return x(this,void 0,void 0,(function(){var t,e,n=this;return O(this,(function(r){return this.loaded?[2,Promise.resolve()]:this.loading?[2,Promise.reject(new Error("Called Frame#load while it's already loading"))]:(this.loading=!0,t=this.asset.imageGroups,e=[],["top","left","right","bottom"].forEach((function(r){if(t[r]){var i=t[r];["start","mid","end"].forEach((function(t){t in i&&e.push(n.loadPart(r,t))}))}})),[2,Promise.all(e).then((function(){n.loaded=!0,n.loading=!1})).catch((function(){n.loaded=!1,n.loading=!1}))])}))}))},t.prototype.getFrame=function(){return _(_({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})},t.prototype.getIdentifier=function(){return this.asset.identifier},t.prototype.getDefaultName=function(){return this.asset.name},t.prototype.getThumbnail=function(){return this.asset.thumbnailURI},t.prototype.getTintable=function(){return this.asset.tintable||!1},t.prototype.getLayoutMode=function(){return this.asset.layoutMode},t.prototype.getImageGroups=function(){return this.asset.imageGroups},t.prototype.loadPart=function(t,e){return x(this,void 0,void 0,(function(){var n=this;return O(this,(function(r){return[2,new Promise((function(r,i){var o=n.asset.imageGroups[t][e],a=o;"string"!=typeof o&&"image"in o&&(a=o.image);var s=new Image;s.addEventListener("load",(function(){"string"!=typeof o?n.asset.imageGroups[t][e].image=s:n.asset.imageGroups[t][e]=s,r(s)})),s.addEventListener("error",(function(){i(new Error("Failed to load image at "+s.src))})),s.crossOrigin=n.engine.configuration.crossOrigin||"anonymus",s.src=n.engine.assetProvider.getAssetSource("frame",a)}))]}))}))},t}(),Pe=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.frameOperation=e,i.type="frame",i.setProperties(n),r.pesdk.setAllOperationsToDirty(),i}return v(e,t),e.prototype.setProperties=function(t){if(this.props=_(_({},this.props),t),"number"==typeof t.opacity&&this.frameOperation.set({alpha:t.opacity}),t.tintColor&&this.frameOperation.set({tintColor:ke(t.tintColor)}),t.width){var e=this.engine.getOutputContainer().getBounds(),n=Math.min(e.width,e.height),r=t.width/n;this.frameOperation.set({scale:r})}this.frameOperation.setDirty(!0)},e.prototype.getProperties=function(){return this.props},e.prototype.getOperation=function(){return this.frameOperation},e.prototype.getTypeIdentifier=function(){return"frame"},e}(Oe),Ie=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.blurOperation=r,i.type="gaussian-blur",i.setProperties(e),i}return v(e,t),e.prototype.getProperties=function(){var t=this.engine.getOutputContainer(),e=t.getBounds(),n=Math.min(e.size.width,e.size.height);return{blurRadius:ce(this.blurOperation.getOptions().blurRadius*n,t,this.getContainer())}},e.prototype.setProperties=function(t){if(void 0!==t.blurRadius){var e=this.engine.pesdk.getOutputDimensions(),n=Math.min(e.x,e.y),r=this.getContainer(),i=this.engine.getOutputContainer(),o=ce(t.blurRadius,r,i)/n;this.blurOperation.set({blurRadius:o})}},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"blur"},e}(Oe),Ae=function(t){function e(e,n){var r=t.call(this,n)||this;r.data=e,r.type="image";var i=n.configuration.downscaleOptions;if(i){var o=i.maxDimensions;r.downscaleOptions={maxMegaPixels:i.maxMegaPixels,maxDimensions:{width:Math.min(n.maxTextureDimension,o?o.width:Number.MAX_VALUE),height:Math.min(n.maxTextureDimension,o?o.height:Number.MAX_VALUE)}}}else r.downscaleOptions={maxDimensions:{width:n.maxTextureDimension,height:n.maxTextureDimension}};r.setData(e);var a=r.data.image;return r.bounds=new D(R.ZERO,{width:a.width,height:a.height}),r}return v(e,t),e.prototype.setData=function(t){var e=this;if(this.data=_(_({},this.data),t),t.image){var n=t.image,r=void 0;if(n instanceof HTMLImageElement&&(r=this.engine.pesdk.parseExif(n))){var i=r.getTags();if(i&&i.Orientation){var o=1!==i.Orientation&&2!==i.Orientation,a=-1!==[2,4,5,7].indexOf(i.Orientation);if(o||a){if(te()||$t()||!CSS.supports("image-orientation","from-image")){var s=this.engine.pesdk.createOperation("exif-orientation",{},!1);s.setTags(i),n=s.applyTo(n)}r.setOrientation(1),i.Orientation=1}}}var l=new kt(n,this.downscaleOptions);l.on(Ot.IMAGE_DOWNSCALED,(function(){e.engine.emit(zt.IMAGE_DOWNSCALED)})),l.on(Ot.BEGAN_IMAGE_DOWNSCALING,(function(){e.engine.emit(zt.BEGAN_IMAGE_DOWNSCALING)})),n=l.downscaleIfNecessary(),this.data.image=n,this.engine.pesdk.setImage(n,r),this.setBoundsFromSize(n.width,n.height)}},e.prototype.getData=function(){return this.data},e.prototype.setPivot=function(t,e){throw new Error("This container does not support modifying the pivot")},e.prototype.getOperation=function(){throw new Error("This container has no associated operation")},e}(Ce),Fe=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="linear-blur",i.setProperties(e),i}return v(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=_(_({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=se(i),s=P.multiply(P.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=ce(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.start){var c=de(P.transformPoint(s,t.start),n,!1);e.controlPoint1=c}if(void 0!==t.end){var f=de(P.transformPoint(s,t.end),n,!1);e.controlPoint2=f}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"linear-focus"},e}(Oe),je=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.filter=e,o.filterOperation=n,o.props=r,o.type="lut-filter",n.set({intensity:r.intensity}),n.set({filter:e}),i.pesdk.setAllOperationsToDirty(),o}return v(e,t),e.prototype.getProperties=function(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}},e.prototype.setProperties=function(t){var e=this.filterOperation.getOptions(),n="number"==typeof t.intensity?t.intensity:e.intensity;this.filterOperation.set({intensity:n})},e.prototype.getOperation=function(){return this.filterOperation},e.prototype.getTypeIdentifier=function(){return"filter"},e}(Oe),Me=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="mirrored-blur",i.setProperties(e),i}return v(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=_(_({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=se(i),s=P.multiply(P.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=ce(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.gradientSize){var c=ce(t.gradientSize,i,n)/l;e.gradientSize=c}if(void 0!==t.clearAreaWidth){var f=ce(t.clearAreaWidth,i,n)/l;e.size=.5*f}if(void 0!==t.mirrorAxisOrigin){var p=de(P.transformPoint(s,t.mirrorAxisOrigin),n,!1);e.start=p}if(void 0!==t.mirrorAxisDirection){var h=de(P.transformPoint(s,t.mirrorAxisDirection),n,!1);e.end=h}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"mirrored-focus"},e}(Oe),Be=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.settings=e,o.operation=n,o.flipOperation=r,o.type="output",o.flipTransform=P.IDENTITY,o.blockTransformUpdate=!1,o.transformUpdateWhileBlock=!1,o.bounds=new D({x:0,y:0},o.settings.resolution),o.setData(e),o}return v(e,t),e.prototype.pauseChildrenUpdates=function(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0},e.prototype.resumeChildrenUpdates=function(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()},e.prototype.setData=function(t){if(this.settings=_(_({},this.settings),t),t.resolution&&(this.setBoundsFromSize(t.resolution.width,t.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new Te(t.resolution.width,t.resolution.height)})),void 0!==t.flipHorizontally){var e=t.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:e})}if(void 0!==t.flipVertically){e=t.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:e})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)},e.prototype.getData=function(){return this.settings},e.prototype.setResolution=function(t){this.setData({resolution:t})},e.prototype.getResolution=function(){return this.getData().resolution},e.prototype.setTransform=function(t){if(this.transform.rotation!==t.rotation||this.transform.position!==t.position||this.transform.scale!==t.scale){this.transform=t;var e=this.flipTransform;this.flipTransform=P.IDENTITY;var n=ue({x:0,y:0},this.engine.getRootContainers()[0],this),r=-t.rotation,i=Te.fromObject(n).clone().subtract(Te.fromObject(this.getBounds().origin));this.operation.set({pivot:new Te(0,0),position:i,scale:new Te(1/t.scale.x,1/t.scale.y),rotation:r}),this.flipTransform=e,this.operation.setDirty(!0),this.updateChildrenContainers()}},e.prototype.rotate90=function(t){void 0===t&&(t=!1);var e=t?.5*-Math.PI:.5*Math.PI,n=this.getResolution(),r=this.getPivot(),i=this.getBounds(),o=fe({x:i.midX,y:i.midY},this);this.setPivot(.5,.5),this.setPosition(o),this.setRotation(this.getRotation()-e);var a={width:n.height,height:n.width};this.setResolution(a);var s=fe({x:-a.width*(.5-r.x),y:-a.height*(.5-r.y)},this);this.setPivot(r),this.setPosition(s),this.updateChildrenContainers()},e.prototype.setPivot=function(e,n){t.prototype.setPivotInternal.call(this,e,n),this.setTransform(this.transform)},e.prototype.getTransform=function(){return this.transform},e.prototype.getBaseLocalToParentMatrix=function(){return ae(this.getTransform())},e.prototype.getLocalToParentMatrix=function(){var t=ae(this.getTransform());return P.multiply(t,this.flipTransform)},e.prototype.getFlipTransformMatrix=function(){return this.flipTransform},e.prototype.isValid=function(){return!0},e.prototype.getOperation=function(){return this.operation},e.prototype.updateFlipTransform=function(){var t=this.settings,e=t.flipHorizontally,n=t.flipVertically;if(e||n){var r=this.getPivot(),i=this.getBounds(),o=e?-1:1,a=e?-2*(r.x-.5)*i.width:0,s=n?-1:1,l=n?-2*(r.y-.5)*i.height:0;this.flipTransform=new P(o,0,0,s,a,l)}else this.flipTransform=P.IDENTITY},e.prototype.updateChildrenContainers=function(){this.blockTransformUpdate?this.transformUpdateWhileBlock=!0:this.engine.rootOperations.forEach((function(t){we(t)?(t.updateTransform(),"updateData"in t&&t.updateData()):"updateProperties"in t&&t.updateProperties()}))},e}(Ce),ze=function(t){function e(e,n,r){var i=t.call(this,r)||this;i.overlayOperation=e,i.type="overlay";var o=n.blendMode||r.mapBlendMode(e.getBlendMode());return e.set({blendMode:r.reverseMapBlendMode(o)}),e.set({image:n.image}),r.pesdk.setAllOperationsToDirty(),i}return v(e,t),e.prototype.getProperties=function(){var t=this.overlayOperation.getOptions();return{image:t.image,blendMode:this.engine.mapBlendMode(t.blendMode),opacity:t.alpha}},e.prototype.setProperties=function(t){var e=this.overlayOperation.getOptions();"number"==typeof t.opacity&&(e.alpha=t.opacity),void 0!==t.blendMode&&(e.blendMode=this.engine.reverseMapBlendMode(t.blendMode)),this.overlayOperation.set(e),this.overlayOperation.setDirty(!0)},e.prototype.getOperation=function(){return this.overlayOperation},e.prototype.getTypeIdentifier=function(){return"overlay"},e.prototype.setFlipHorizontally=function(t){this.overlayOperation.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.overlayOperation.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.overlayOperation.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.overlayOperation.getFlipVertically()},e}(Oe),Le=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="radial-blur",i.setProperties(e),i}return v(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=_(_({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=se(i),s=P.multiply(P.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=ce(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.center){var c=de(P.transformPoint(s,t.center),n,!1);e.position=c}if(void 0!==t.radius){var f=ce(t.radius,i,n)/l;e.radius=f}if(void 0!==t.gradientSize){var p=ce(t.gradientSize,i,n)/l;e.gradientRadius=p}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"radial-focus"},e}(Oe),Ne=function(t){function e(e,n){var r=t.call(this,n)||this;r.data=e,r.type="sticker";var i=e.image,o=r.engine.pesdk.parseExif(e.image);if(o){var a=o.getTags();if(a&&a.Orientation){var s=1!==a.Orientation&&2!==a.Orientation,l=-1!==[2,4,5,7].indexOf(a.Orientation);if(s||l){var u=r.engine.pesdk.createOperation("exif-orientation",{},!1);u.setTags(a),i=u.applyTo(e.image),o.setOrientation(1),a.Orientation=1}}}return i=new kt(i,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),r.operation=n.createSpriteOperation(),r.sprite=r.operation.createSticker({identifier:"",image:i,position:new Te(0,0),dimensions:new Te(1,1),rotation:0,smoothDownscaling:!1}),r.operation.addSprite(r.sprite),r.bounds=new D({x:0,y:0},{width:i.width,height:i.height}),r.setTransform(E.IDENTITY),r.sprite.setPivot(new Te(0,0)),r.operation.setDirty(!0),r.setData(e),r}return v(e,t),e.prototype.setData=function(t){this.data=_(_({},this.data),t),t.id&&(this.id=t.id),t.opacity&&this.sprite.setAlpha(t.opacity),t.tintColor&&this.sprite.setTintColor(ke(t.tintColor)),t.tintMode&&this.sprite.setTintMode(t.tintMode),this.operation.setDirty(!0)},e.prototype.getData=function(){return this.data},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent(),i=function(t,e,n){var r=oe(t)?t.x:t.width,i=oe(t)?t.y:t.height;return{width:ce(r,e,n),height:ce(i,e,n)}}({width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},r,n);this.sprite.setDimensions(Te.fromSize(i));var o=de(ue(e.position,r,n,!0),n,!1);this.sprite.setPosition(new Te(o.x,o.y));var a=ye(r,n),s=e.rotation+a;this.sprite.setRotation(s),this.operation.setDirty(!0)},e.prototype.setPivot=function(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)},e.prototype.getOperation=function(){return this.operation},e.prototype.setFlipHorizontally=function(t){this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e}(Ce);var Ue=function(){function t(t){this.context=t,this.sourceLines=[],this.maxWidth=100}return t.buildWords=function(t){for(var e=[],n="",r=t.length,i=0;i<r;i+=1){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e},t.prototype.getLines=function(){for(var e=[],n=[],r=this.sourceLines.length,i=0;i<r;i+=1){for(var o=this.sourceLines[i],a=t.buildWords(o),s=a.length,l=0;l<s;l+=1){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this.getWidth(c)>this.maxWidth){n.length>0&&(e.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this.getWidth(f)>this.maxWidth){var p=this.splitWord(u);e=e.concat(p.lines),p.rest&&(n=[p.rest])}}else n.push(u)}e.push(n.join("")),n=[]}return e},t.prototype.splitWord=function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i+=1){var o=t[i];this.getWidth(r.concat(o).join(""))>this.maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e},t.prototype.getWidth=function(t){return this.context.measureText(t).width},t.prototype.setText=function(t){this.sourceLines=t.split("\n")},t.prototype.setMaxWidth=function(t){this.maxWidth=t},t}();function We(t,e,n,r,i,o,a){t.font=(n.fontStyle||"normal")+" "+(n.fontWeight||"normal")+" "+r+'px "'+n.fontFamily+'"';var s=new Ue(t);s.setText(e),s.setMaxWidth(o);var l=s.getLines().map((function(t){return t.replace(/\s+$/i,"")})),u=function(t,e){var n=1/e.unitsPerEm*t,r=e.ascender*n,i=e.descender*n;return r+Math.abs(i)}(r,a)*i;return{width:o,height:l.length*u}}var He,Ge,Ve,Ze=function(t){return 2*Math.PI-t},Xe=function(t){var e=t.rotation,n=t.flipHorizontally,r=t.flipVertically,i=e;return n&&(i=Ze(i)),r&&(i=function(t){return-t}(i)),i},Ye=function(t){function e(n,r){var i=t.call(this,r)||this;if(i.text=n,i.type="text",!e.measureContext){var o=document.createElement("canvas");e.measureContext=o.getContext("2d")}i.operation=r.createSpriteOperation();var a=i.engine.getOutputContainer(),s=i.getParent(),l=a.getBounds();i.sprite=i.operation.createText({text:n.text,position:new Te(0,0),rotation:0,fontSize:ce(n.fontSize/l.height,s,a),lineHeight:n.lineHeight,fontIdentifier:n.fontIdentifier,alignment:n.alignment,color:ke(n.textColor),backgroundColor:ke(n.backgroundColor),maxWidth:ce(n.width/l.width,s,a)});var u=r.assetProvider.getFontManager().getFontWithId(n.fontIdentifier);i.sprite.setFontFamily(u.fontFamily),i.sprite.setFontWeight(u.fontWeight||"normal"),i.sprite.setFontStyle(u.fontStyle||"normal"),i.sprite.setFontIdentifier(u.identifier),i.sprite.setTextMetrics(u.textMetrics),i.sprite.setPivot(new Te(0,0)),i.operation.addSprite(i.sprite);var c=We(e.measureContext,n.text,u,n.fontSize,n.lineHeight,n.width,u.textMetrics);return i.bounds=new D(0,0,c.width,c.height),i.setTransform(E.IDENTITY),i.operation.setDirty(!0),i}return v(e,t),e.prototype.setData=function(t){this.text=_(_({},this.text),t);var n=this.engine.assetProvider.getFontManager().getFontWithId(t.fontIdentifier||this.text.fontIdentifier);if(t.fontIdentifier&&(this.sprite.setFontFamily(n.fontFamily),this.sprite.setFontWeight(n.fontWeight||"normal"),this.sprite.setFontStyle(n.fontStyle||"normal"),this.sprite.setFontIdentifier(n.identifier),this.sprite.setTextMetrics(n.textMetrics)),t.id&&(this.id=t.id),t.text&&this.sprite.setText(t.text),t.fontSize){var r=this.engine.getOutputContainer(),i=this.getParent(),o=ce(t.fontSize,i,r),a=r.getBounds();this.sprite.setFontSize(o/a.height)}if(t.alignment&&this.sprite.setAlignment(t.alignment),t.lineHeight&&this.sprite.setLineHeight(t.lineHeight),t.textColor&&this.sprite.setColor(ke(t.textColor)),t.backgroundColor&&this.sprite.setBackgroundColor(ke(t.backgroundColor)),t.width){r=this.engine.getOutputContainer(),i=this.getParent();var s=ce(t.width,i,r);a=r.getBounds();this.sprite.setMaxWidth(s/a.width)}var l=We(e.measureContext,this.text.text,n,this.text.fontSize,this.text.lineHeight,this.text.width,n.textMetrics);this.setBoundsFromSize(l.width,l.height),this.operation.setDirty(!0)},e.prototype.getData=function(){return this.text},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent(),i=de(ue(e.position,r,n,!0),n,!1);this.sprite.setPosition(new Te(i.x,i.y));var o=ye(r,n);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)},e.prototype.setPivot=function(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)},e.prototype.getOperation=function(){return this.operation},e.prototype.setFlipHorizontally=function(t){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:t})),this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setRotation(this.getFlippedRotation({flipVertically:t})),this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e.prototype.getFlippedRotation=function(t){var e=t.flipVertically,n=t.flipHorizontally,r=e||this.getFlipVertically(),i=n||this.getFlipHorizontally(),o=this.getRotation();return(r||i)&&(o=Ze(o)),o},e}(Ce),qe=function(t){function e(e,n,r){var i=t.call(this,r)||this;i.textDesign=e,i.layout=n,i.type="text-design",i.currentLayoutSize=void 0,i.layoutID=n.identifier,i.operation=r.createSpriteOperation();var o=i.engine.getOutputContainer(),a=i.getParent(),s=o.getBounds(),l=Math.min(s.width,s.height);n.seed(e.seed),i.bounds=i.calculateBounds(i.textDesign,i.layout);var u=e.width;return i.sprite=i.operation.createTextDesign({text:e.text,layout:n,inverted:e.inverted,color:ke(e.color),width:ce(e.width/l,a,o),padding:e.padding/u,seed:e.seed}),i.updatePivot(),i.operation.addSprite(i.sprite),i.setTransform(E.IDENTITY),i.operation.setDirty(!0),i}return v(e,t),e.stringify=function(t){return JSON.stringify(t,e.serializer())},e.serializer=function(){var t=[],e=[],n=function(n,r){return t[0]===r?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(r)).join(".")+"]"};return function(r,i){if(t.length>0){var o=t.indexOf(this);~o?(t.splice(o+1),e.splice(o,1/0,r)):(t.push(this),e.push(r)),~t.indexOf(i)&&(i=n.call(this,r,i))}else t.push(i);return i}},e.prototype.calculateBounds=function(t,e,n){void 0===n&&(n=!0);var r=t.inverted&&n?Math.max(0,2*t.padding):0,i=t.width/1e3;if(void 0===this.currentLayoutSize){e.seed(t.seed);var o=e.generateLayoutData(t.text,1e3);this.currentLayoutData=o,this.currentLayoutSize=o.getSize()}return new D(0,0,this.currentLayoutSize.width*i+r,this.currentLayoutSize.height*i+r)},e.prototype.findNextUniqueSeed=function(t,n,r){for(var i,o=r,a=this.currentLayoutData?e.stringify(this.currentLayoutData.getRows()):"",s=0;s<20&&(n.seed(o),i=n.generateLayoutData(t.text,1e3),a===e.stringify(i.getRows()));s+=1)o+=1;return n.seed(o),this.currentLayoutData=i,o},e.prototype.setData=function(t){if(this.textDesign=_(_({},this.textDesign),t),t.id&&(this.id=t.id),void 0!==t.padding){var e=this.textDesign.width;this.sprite.setPadding(t.padding/e)}else t.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(void 0!==t.seed&&(t.seed<0&&(t.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=t.seed),this.currentLayoutSize=void 0,this.layout.seed(t.seed),this.sprite.setSeed(t.seed),this.sprite.setLayout(this.layout)),t.color&&this.sprite.setColor(ke(t.color)),void 0!==t.inverted&&this.sprite.setInverted(t.inverted),t.text&&(this.currentLayoutSize=void 0,this.sprite.setText(t.text)),t.width){var n=this.engine.getOutputContainer(),r=this.getParent(),i=n.getBounds(),o=Math.min(i.width,i.height),a=ce(t.width/o,r,n);this.sprite.setWidth(a)}if(void 0!==t.padding||void 0!==t.seed||void 0!==t.inverted||t.text||t.width){var s=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(s.width,s.height),this.updatePivot()}this.operation.setDirty(!0)},e.prototype.getData=function(){return this.textDesign},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent();if(1!==e.scale.x||1!==e.scale.y)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");var i=de(ue(e.position,r,n,!0),n,!1);this.sprite.setPosition(new Te(i.x,i.y));var o=ye(r,n);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)},e.prototype.setPivot=function(e,n){"number"==typeof e?t.prototype.setPivot.call(this,e,n):t.prototype.setPivot.call(this,e),this.updatePivot()},e.prototype.getOperation=function(){return this.operation},e.prototype.getLayoutID=function(){return this.layoutID},e.prototype.setFlipHorizontally=function(t){this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e.prototype.updatePivot=function(){var t=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,e=new R(this.bounds.width-2*t,this.bounds.height-2*t),n=this.getPivot(),r=new R(n.x*this.bounds.width,n.y*this.bounds.height),i=new R(t,t),o=r.subtract(i).divide(e);this.sprite.setPivot(new Te(o.x,o.y))},e}(Ce),Ke=ie.PhotoEditorSDK.Operations.OverlayOperation.BLEND_MODES,Qe="imgly_font_open_sans_bold",Je=function(t){function e(e){var n=t.call(this,e)||this;if(n.previews=Array(),n.rootOperationStack=[],n.deferredRenderQueue=[],n.operationStackOffset=1,n.enforceOperationOrder=function(){n.refreshFlipIndex(),n.refreshFrameIndex()},n.assetProvider=e.assetProvider||new re,n.wrapper=new ie.EngineWrapper({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:function(t,e){return n.resolveAssetForSDK(t,e)}},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1}}),n.editor=n.wrapper.getEditor(),n.sdk=n.editor.getSDK(),n.sdk.setRenderMode("adapter"),n.tempCanvas=document.createElement("canvas"),n.sdk.setCanvas(n.tempCanvas),"webgl"===e.preferredRenderer){var r=document.createElement("canvas"),i=r.getContext("webgl")||r.getContext("experimental-webgl");n.maxTextureDimension=i.getParameter(i.MAX_TEXTURE_SIZE)}else n.maxTextureDimension=1/0;return n}return v(e,t),Object.defineProperty(e.prototype,"configuration",{get:function(){return this.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pesdk",{get:function(){return this.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootOperations",{get:function(){return this.rootOperationStack},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.pesdk.dispose(),this.wrapper.dispose()},e.prototype.render=function(t){var e=this;return new Promise((function(n){var r=function(){return new Promise((function(r){var i=t.canvas,o=t.getTransform(),a=e.outputContainer.getPivot(),s=t.getCanvasBounds(),l=t.quality,u=e.tempCanvas;e.sdk.setTextureQuality(l);var c=e.sdk.getOutputDimensions();return u.width=c.x,u.height=c.y,e.sdk.getRenderer().resizeTo(new Te(u.width,u.height)),e.sdk.render(!0).then((function(){var l=i.getContext("2d");l.clearRect(0,0,i.width,i.height),l.save(),l.translate(-s.minX,-s.minY),l.translate(o.position.x,o.position.y),l.rotate(o.rotation),l.scale(o.scale.x,o.scale.y),l.translate(-a.x*u.width,-a.y*u.height),l.scale(1/t.quality,1/t.quality),l.drawImage(u,0,0),l.restore(),n(),e.deferredRenderQueue.shift(),e.deferredRenderQueue.length?(e.sdk.setAllOperationsToDirty(),Promise.resolve(e.deferredRenderQueue[0]().then(r))):r()}))}))};e.deferredRenderQueue.push(r),1===e.deferredRenderQueue.length&&r()}))},e.prototype.createPreview=function(t){var e=new be(t,this);return this.previews.push(e),e},e.prototype.export=function(t,e,n){return void 0===t&&(t=X.IMAGE),void 0===e&&(e=Y.PNG),void 0===n&&(n=1),x(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){return[2,new Promise((function(i){var o=function(){return new Promise((function(o){return r.sdk.export(r.mapToRenderType(t),r.mapToImageFormat(e),n).then((function(t){i(t),r.deferredRenderQueue.shift(),r.deferredRenderQueue.length?Promise.resolve(r.deferredRenderQueue[0]().then(o)):o()}))}))};r.deferredRenderQueue.push(o),1===r.deferredRenderQueue.length&&o()}))]}))}))},e.prototype.getRootContainers=function(){return[this.rootContainer]},e.prototype.getOutputContainer=function(){return this.outputContainer},e.prototype.findContainerByID=function(t){return t===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find((function(e){return e.getID()===t}))},e.prototype.findEffectByID=function(t){return this.rootOperationStack.find((function(e){return e.getID()===t}))},e.prototype.addImage=function(t,e,n){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");var r=new Ae(t,this);if(this.rootContainer=r,!this.outputContainer){var i=r.getBounds(),o={resolution:{width:i.width,height:i.height},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),s=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(s,this.operationStackOffset),this.outputContainer=new Be(o,a,s,this)}return r},e.prototype.addSticker=function(t,e,n){if(!e)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(e);var r=new Ne(t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addStickerFromAssets=function(t,e,n){var r=this;if(!e)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(e),new Promise((function(e,i){var o=new Image;o.onload=function(){var t=new Ne({image:o,opacity:1},r);r.addToStackAtIndex(t,n),e(t)},o.onerror=function(t){i(t)},o.crossOrigin=r.config.crossOrigin||null,o.src=r.assetProvider.getAssetSource("sticker",t)}))},e.prototype.addText=function(t,e,n){if(!e)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(t.fontIdentifier||Qe))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(e);var r=_({text:"",fontIdentifier:Qe,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),i=new Ye(r,this);return this.addToStackAtIndex(i,n),i},e.prototype.addTextWithFontLoading=function(t,e,n){var r=this;if(!e)throw new Error("This engine does not support adding text as root elements.");var i=this.assetProvider.getFontManager(),o=t.fontIdentifier||Qe;return new Promise((function(a,s){i.loadFontWithIdentifier(o).then((function(){r.ensureContainerIsRoot(e);var i=_({text:"",fontIdentifier:Qe,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),o=new Ye(i,r);r.addToStackAtIndex(o,n),a(o)})).catch(s)}))},e.prototype.addTextDesignAsync=function(t,e,n,r){return void 0===t&&(t="imgly_text_design_blocks"),x(this,void 0,void 0,(function(){var i,o,a,s,l,u,c,f=this;return O(this,(function(p){switch(p.label){case 0:if(!n)throw new Error("This engine does not support adding TextDesign as a root element.");if(i=_({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},e),!(o=this.wrapper.getTextDesignLayoutByID(t)))throw new Error("The layout could not be loaded for the given id: "+t);return a=o.getImagePaths().map((function(t){var e=t.split("/").pop()||"";return{path:t,fullPath:f.assetProvider.getAssetSource("textdesign",e)}})),s=this.wrapper.getTextDesignAssetManager(),l=this.wrapper.getTextDesignFontManager(),u=l.getVariationsByIdentifier(),s.setFonts(u),[4,s.loadImages(a)];case 1:return p.sent(),o.onImagesLoaded(),c=Object.keys(u),[2,this.assetProvider.getFontManager().loadFontsWithIdentifiers(c).then((function(){f.ensureContainerIsRoot(n);var t=new qe(i,o,f);return f.addToStackAtIndex(t,r),Promise.resolve(t)}))]}}))}))},e.prototype.addDrawing=function(t,e,n){if(!e)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(e);var r=new Ee(t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addGaussianBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new Ie(t,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addRadialBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new Le(t,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addMirroredBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new Me(t,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addLinearBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new Fe(t,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addDuoToneFilter=function(t,e,n){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")},e.prototype.addDuoToneFilterFromAssets=function(t,e,n){var r=this;this.ensureContainerIsRoot(e);var i=this.sdk.getOperationsStack().getByIdentifier("filter");if(i&&i.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types of filter operations at once!");var o=i||this.sdk.createOperation("filter",{},!1);return new Promise((function(e,i){try{var a=r.assetProvider.getDuotoneFilterAsset(t),s={colorIntensity:a.defaultIntensity||0},l=new ie.PhotoEditorSDK.Operations.FilterOperation.Filters.DuoToneFilter({intensity:s.colorIntensity,lightColor:ie.PhotoEditorSDK.Color.fromHex(a.lightColor),darkColor:ie.PhotoEditorSDK.Color.fromHex(a.darkColor)}),u=new Re(l,o,s,r);r.addToStackAtIndex(u,n),e(u)}catch(t){t&&i(t)}}))},e.prototype.addLUTFilter=function(t,e,n){throw new Error("Not supported! Use addLUTFilterFromAssets instead")},e.prototype.addLUTFilterFromAssets=function(t,e,n){var r=this;this.ensureContainerIsRoot(e);var i=this.sdk.getOperationsStack().getByIdentifier("filter");if(i&&i.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types filter operations at once!");var o=i||this.sdk.createOperation("filter",{},!1);return new Promise((function(e,i){var a=new Image;a.addEventListener("load",(function(){var i=r.assetProvider.getLUTFilterAsset(t),s={horizontalTileCount:i.horizontalTileCount||5,verticalTileCount:i.verticalTileCount||5,intensity:i.defaultIntensity||1},l=new ie.PhotoEditorSDK.Operations.FilterOperation.Filters.ThreeDLUTFilter(_(_({},s),{image:a})),u=_(_({},s),{lutImage:new Image}),c=new je(l,o,u,r);r.addToStackAtIndex(c,n),e(c)})),a.addEventListener("error",(function(t){i(t)})),a.crossOrigin=r.config.crossOrigin||null,a.src=r.assetProvider.getAssetSource("filter",t)}))},e.prototype.addAdjustments=function(t,e,n){this.ensureContainerIsRoot(e);var r=new Se(t,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addOverlay=function(t,e,n){this.ensureContainerIsRoot(e);var r=new ze(this.sdk.createOperation("overlay",{},!1),t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addOverlayFromAssets=function(t,e,n){var r=this;return this.ensureContainerIsRoot(e),new Promise((function(e,i){var o=r.sdk.getOperationsStack(),a=o.getByIdentifier("overlay");a&&a.getIdentifier()!==t&&o.remove(a);var s=a||r.sdk.createOperation("overlay",{},!1),l=new Image;l.onload=function(){var t={image:l,opacity:1,blendMode:it.NORMAL},i=new ze(s,t,r);r.addToStackAtIndex(i,n),e(i)},l.onerror=function(t){i(t)},l.crossOrigin=r.config.crossOrigin||null,l.src=r.assetProvider.getAssetSource("overlay",t)}))},e.prototype.addFrame=function(t,e,n){throw new Error("Not supported!")},e.prototype.addFrameFromAssets=function(t,e,n){return x(this,void 0,void 0,(function(){var r,i,o,a,s,l,u;return O(this,(function(c){switch(c.label){case 0:if(this.ensureContainerIsRoot(e),!(r=this.assetProvider.getFrameAsset(t)))throw new Error("The requested asset does not exist! "+t);return[4,(i=new De(r,this)).load()];case 1:return c.sent(),o=this.getOutputContainer().getBounds(),a=Math.min(o.width,o.height),(s=this.sdk.createOperation("frame",{},!1)).setFrame(i.getFrame()),l={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*a),imageGroups:i.getFrame().imageGroups},u=new Pe(s,l,this),this.addToStackAtIndex(u,n),[2,Promise.resolve(u)]}}))}))},e.prototype.removeEffect=function(t){if(t.isValid()){var e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}},e.prototype.removeContainer=function(t){if(t.isValid()&&"output"!==t.type){var e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}},e.prototype.refreshOutputIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(t,this.operationStackOffset-1)},e.prototype.refreshFlipIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),e=this.sdk.getOperationsStack().getStack().length-1;t!==e&&this.moveInOperationsStack(t,e)},e.prototype.refreshFrameIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),e=this.sdk.getOperationsStack().getStack().length-1;-1!==t&&t!==e&&this.moveInOperationsStack(t,e)},e.prototype.mapToRenderType=function(t){switch(t){case X.IMAGE:return"image";case X.DATA_URL:return"data-url";case X.BLOB:return"blob";case X.MSBLOB:return"ms-blob";default:return"image"}},e.prototype.mapToImageFormat=function(t){switch(t){case Y.PNG:return"image/png";case Y.JPEG:return"image/jpeg";default:return null}},e.prototype.mapBlendMode=function(t){switch(t){case Ke.NORMAL:return it.NORMAL;case Ke.OVERLAY:return it.OVERLAY;case Ke.HARD_LIGHT:return it.HARD_LIGHT;case Ke.SOFT_LIGHT:return it.SOFT_LIGHT;case Ke.MULTIPLY:return it.MULTIPLY;case Ke.DARKEN:return it.DARKEN;case Ke.LIGHTEN:return it.LIGHTEN;case Ke.SCREEN:return it.SCREEN;case Ke.COLOR_BURN:return it.COLOR_BURN;default:return it.NORMAL}},e.prototype.reverseMapBlendMode=function(t){switch(t){case it.NORMAL:return Ke.NORMAL;case it.OVERLAY:return Ke.OVERLAY;case it.HARD_LIGHT:return Ke.HARD_LIGHT;case it.SOFT_LIGHT:return Ke.SOFT_LIGHT;case it.MULTIPLY:return Ke.MULTIPLY;case it.DARKEN:return Ke.DARKEN;case it.LIGHTEN:return Ke.LIGHTEN;case it.SCREEN:return Ke.SCREEN;case it.COLOR_BURN:return Ke.COLOR_BURN;default:return Ke.NORMAL}},e.prototype.createSpriteOperation=function(){return this.sdk.createOperation("sprite",{},!1)},e.prototype.moveIndex=function(t,e){var n=this.getSiblingIndex(t);if(-1===n)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,n,e);var r=this.operationStackOffset;this.moveInOperationsStack(n+r,e+r),this.enforceOperationOrder()},e.prototype.ensureContainerIsRoot=function(t){if(t.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")},e.prototype.addToStackAtIndex=function(t,e){if(e&&e<0)throw new Error("The given index may not be negative: "+e);void 0===e?this.rootOperationStack.push(t):this.rootOperationStack.splice(e,0,t);var n=this.rootOperationStack.length-1,r=void 0!==e?e:n;r+=this.operationStackOffset,t.getContainer,this.insertIntoOperationsStack(t.getOperation(),r),this.sdk.setAllOperationsToDirty()},e.prototype.insertIntoOperationsStack=function(t,e){for(var n=this.sdk.getOperationsStack().getStack(),r=n.length,i=Math.max(Math.min(e,r),0),o=r-1;o>=i;o-=1){var a=n[o];n[o+1]=a}n[i]=t,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()},e.prototype.moveInStack=function(t,e,n){var r=t.length,i=Math.max(Math.min(e,r-1),0),o=Math.max(Math.min(n,r-1),0);if(i!==o){var a=t[i];if(i<o)for(var s=i+1;s<=o;s+=1)t[s-1]=t[s];else for(s=i-1;s>=o;s-=1)t[s+1]=t[s];t[o]=a}},e.prototype.moveInOperationsStack=function(t,e){var n=this.sdk.getOperationsStack().getStack(),r=n.length,i=Math.min(Math.max(0,t),r-1),o=Math.min(Math.max(0,e),r-1);if(i!==o){var a=n[i];if(i<o)for(var s=i+1;s<=o;s+=1)n[s-1]=n[s];else for(s=i-1;s>=o;s-=1)n[s+1]=n[s];n[o]=a,this.sdk.getOperationsStack().setAllToDirty()}},e.prototype.getSiblingIndex=function(t){return t.getIndexInParent()},e.prototype.resolveAssetForSDK=function(t,e){switch(e=e,t){case"filter":return this.assetProvider.getAssetSource("filter",e.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",e.identifier);case"font":return this.assetProvider.getAssetSource("font",e.identifier)}return""},e}(xe),$e=function(){function t(t){var e=this;this.isValid=!1,this.isWhiteLabel=function(){return e.isValid&&e.licenseChecker.isWhiteLabel()},this.areCustomAssetsAllowed=function(){return e.isValid&&e.licenseChecker.areCustomAssetsAllowed()},t&&0!==t.length&&(this.licenseChecker=new ie.PhotoEditorSDK.LicenseChecker(t),this.isValid=this.licenseChecker.validate())}return t.prototype.isToolAllowed=function(t){return!this.licenseChecker||!this.isValid||this.licenseChecker.isToolAllowed(t)},t}(),tn=function(t){var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e},en=function(t,e,n){return"#"+tn(255*t)+tn(255*e)+tn(255*n)},nn=function(t){if(_e(t)){var e=k(t,4);return"rgba("+255*(r=e[0])+", "+255*(i=e[1])+", "+255*(o=e[2])+", "+e[3]+")"}if(ve(t))return"rgba("+255*(r=t.r)+", "+255*(i=t.g)+", "+255*(o=t.b)+", "+t.a+")";if(me(t)){var n=k(t,3),r=n[0],i=n[1],o=n[2];return en(r,i,o)}if(ge(t)){r=t.r,i=t.g,o=t.b;return en(r,i,o)}return t},rn=function(t){return t.map((function(t){return{identifier:t.name,color:t.color,colorString:nn(t.color)}}))},on={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},an={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},sn=[j.LIBRARY,[j.TRANSFORM,j.FILTER,j.ADJUSTMENT],[j.FOCUS,j.FRAME,j.OVERLAY],[j.TEXT,j.TEXT_DESIGN,j.STICKER,j.BRUSH]],ln={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[F.UNDO,F.REDO,F.EXPORT,F.CLOSE],displayResizeWarning:!0,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:(He=document.createElement("canvas"),Ge=He.getContext("webgl")||He.getContext("experimental-webgl"),Ge&&Ge instanceof WebGLRenderingContext?"webgl":"canvas")},enableZoom:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:j.FILTER,tools:sn,snapping:new Z,filter:new $,focus:new rt,adjustment:new J,library:new lt,overlay:new ft,sticker:new pt,text:new yt,textdesign:new wt,frame:new ot,brush:new bt,transform:new xt,export:{image:{exportType:X.IMAGE,format:Y.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}},un=((Ve={})[K.BRIGHTNESS]=0,Ve[K.SATURATION]=0,Ve[K.CONTRAST]=0,Ve[K.GAMMA]=0,Ve[K.CLARITY]=0,Ve[K.EXPOSURE]=0,Ve[K.SHADOWS]=0,Ve[K.HIGHLIGHTS]=0,Ve[K.WHITES]=0,Ve[K.BLACKS]=0,Ve[K.TEMPERATURE]=0,Ve[K.SHARPNESS]=0,Ve),cn=function(t,e){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function fn(t,e){function n(){this.constructor=t}cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var pn=function(){return(pn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function hn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function dn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hn(arguments[e]));return t}var yn=[];Object.freeze(yn);var gn={};Object.freeze(gn);var mn={};function vn(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:mn}function _n(){return++Nr.mobxGuid}function bn(t){throw wn(!1,t),"X"}function wn(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is an production build."))}function xn(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var On=function(){};function Sn(t){return null!==t&&"object"==typeof t}function kn(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function Tn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Cn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function En(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return Sn(t)&&!0===t[n]}}function Rn(t){return void 0!==vn().Map&&t instanceof vn().Map}function Dn(t){return t instanceof Set}function Pn(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function In(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function An(t){return null===t?null:"object"==typeof t?""+t:t}function Fn(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function jn(t,e){Cn(t,Fn(),e)}function Mn(t){return t[Fn()]=zn,t}function Bn(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function zn(){return this}var Ln=function(){function t(t){void 0===t&&(t="Atom@"+_n()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=cr.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Zr(this)},t.prototype.reportChanged=function(){Gr(),function(t){if(t.lowestObserverState===cr.STALE)return;t.lowestObserverState=cr.STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===cr.UP_TO_DATE&&(r.isTracing!==fr.NONE&&Xr(r,t),r.onBecomeStale()),r.dependenciesState=cr.STALE}}(this),Vr()},t.prototype.toString=function(){return this.name},t}(),Nn=En("Atom",Ln);function Un(t,e,n){void 0===e&&(e=On),void 0===n&&(n=On);var r,i=new Ln(t);return di("onBecomeObserved",i,e,r),hi(i,n),i}function Wn(t,e){return t===e}var Hn={identity:Wn,structural:function(t,e){return co(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||Wn(t,e)},shallow:function(t,e){return co(t,e,1)}},Gn={},Vn={};function Zn(t,e){var n=e?Gn:Vn;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return Xn(this),this[t]},set:function(e){Xn(this),this[t]=e}})}function Xn(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in Tn(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function Yn(t,e){return function(){var n,r=function(r,i,o,a){if(!0===a)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s=r.__mobxDecorators;Tn(r,"__mobxDecorators",pn({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},Zn(i,t)};return qn(arguments)?(n=yn,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function qn(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function Kn(t,e,n){return _i(t)?t:Array.isArray(t)?lr.array(t,{name:n}):kn(t)?lr.object(t,void 0,{name:n}):Rn(t)?lr.map(t,{name:n}):Dn(t)?lr.set(t,{name:n}):t}function Qn(t){return t}function Jn(t){var e=Yn(!0,(function(e,n,r,i,o){!function(t,e,n,r){var i=eo(t);if(Ti(i)){var o=Ei(i,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}var a=i.values[e]=new Ar(n,r,i.name+"."+e,!1);n=a.value,Object.defineProperty(t,e,function(t){return no[t]||(no[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e);!function(t,e,n,r){var i=Ri(t),o=ti(),a=i||o?{type:"add",object:e,name:n,newValue:r}:null;o&&ni(pn({},a,{name:t.name,key:n}));i&&Pi(t,a);o&&ii()}(i,t,e,n)}(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)})),n=("undefined"!=typeof process&&process.env,e);return n.enhancer=t,n}var $n={deep:!0,name:void 0,defaultDecorator:void 0},tr={deep:!1,name:void 0,defaultDecorator:void 0};function er(t){return null==t?$n:"string"==typeof t?{name:t,deep:!0}:t}function nr(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Qn:Kn}Object.freeze($n),Object.freeze(tr);var rr=Jn(Kn),ir=Jn((function(t,e,n){return null==t||ao(t)||Zi(t)||Ki(t)||$i(t)?t:Array.isArray(t)?lr.array(t,{name:n,deep:!1}):kn(t)?lr.object(t,void 0,{name:n,deep:!1}):Rn(t)?lr.map(t,{name:n,deep:!1}):Dn(t)?lr.set(t,{name:n,deep:!1}):bn(!1)})),or=Jn(Qn),ar=Jn((function(t,e,n){return co(t,e)?e:t}));var sr={box:function(t,e){arguments.length>2&&ur("box");var n=er(e);return new Ar(t,nr(n),n.name,!0,n.equals)},shallowBox:function(t,e){return arguments.length>2&&ur("shallowBox"),lr.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&ur("array");var n=er(e);return new Ni(t,nr(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&ur("shallowArray"),lr.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&ur("map");var n=er(e);return new Yi(t,nr(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&ur("shallowMap"),lr.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&ur("set");var n=er(e);return new Ji(t,nr(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&ur("object");var r=er(n);return gi({},t,e,r)},shallowObject:function(t,e){return"string"==typeof arguments[1]&&ur("shallowObject"),lr.object(t,{},{name:e,deep:!1})},ref:or,shallow:ir,deep:rr,struct:ar},lr=function(t,e,n){if("string"==typeof arguments[1])return rr.apply(null,arguments);if(_i(t))return t;var r=kn(t)?lr.object(t,e,n):Array.isArray(t)?lr.array(t,e):Rn(t)?lr.map(t,e):Dn(t)?lr.set(t,e):t;if(r!==t)return r;bn(!1)};function ur(t){bn("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(sr).forEach((function(t){return lr[t]=sr[t]}));var cr,fr,pr=Yn(!1,(function(t,e,n,r,i){var o=n.get,a=n.set,s=i[0]||{};!function(t,e,n){var r=eo(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new jr(n),Object.defineProperty(t,e,function(t){return ro[t]||(ro[t]={configurable:Nr.computedConfigurable,enumerable:!1,get:function(){return io(this).read(this,t)},set:function(e){io(this).write(this,t,e)}})}(e))}(t,e,pn({get:o,set:a},s))})),hr=pr({equals:Hn.structural}),dr=function(t,e,n){if("string"==typeof e)return pr.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return pr.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new jr(r)};dr.struct=hr,function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(cr||(cr={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(fr||(fr={}));var yr=function(t){this.cause=t};function gr(t){return t instanceof yr}function mr(t){switch(t.dependenciesState){case cr.UP_TO_DATE:return!1;case cr.NOT_TRACKING:case cr.STALE:return!0;case cr.POSSIBLY_STALE:for(var e=xr(),n=t.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(Mr(o)){if(Nr.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return Or(e),!0}if(t.dependenciesState===cr.STALE)return Or(e),!0}}return Tr(t),Or(e),!1}}function vr(t){var e=t.observers.length>0;Nr.computationDepth>0&&e&&bn(!1),Nr.allowStateChanges||!e&&"strict"!==Nr.enforceActions||bn(!1)}function _r(t,e,n){var r=Sr(!0);Tr(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Nr.runId;var i,o=Nr.trackingDerivation;if(Nr.trackingDerivation=t,!0===Nr.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new yr(t)}return Nr.trackingDerivation=o,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=cr.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=i,t.newObserving=null,o=e.length;for(;o--;){0===(s=e[o]).diffValue&&Wr(s,t),s.diffValue=0}for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,Ur(s,t))}r!==cr.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,kr(r),i}function br(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)Wr(e[n],t);t.dependenciesState=cr.NOT_TRACKING}function wr(t){var e=xr(),n=t();return Or(e),n}function xr(){var t=Nr.trackingDerivation;return Nr.trackingDerivation=null,t}function Or(t){Nr.trackingDerivation=t}function Sr(t){var e=Nr.allowStateReads;return Nr.allowStateReads=t,e}function kr(t){Nr.allowStateReads=t}function Tr(t){if(t.dependenciesState!==cr.UP_TO_DATE){t.dependenciesState=cr.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=cr.UP_TO_DATE}}var Cr=0,Er=1;function Rr(t,e){var n=function(){return Dr(t,e,this,arguments)};return n.isMobxAction=!0,n}function Dr(t,e,n,r){var i=function(t,e,n){var r=ti()&&!!t,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];ni({type:"action",name:t,object:e,arguments:a})}var l=xr();Gr();var u=Pr(!0),c=Sr(!0),f={prevDerivation:l,prevAllowStateChanges:u,prevAllowStateReads:c,notifySpy:r,startTime:i,actionId:Er++,parentActionId:Cr};return Cr=f.actionId,f}(t,n,r);try{return e.apply(n,r)}catch(t){throw i.error=t,t}finally{!function(t){Cr!==t.actionId&&bn("invalid action stack. did you forget to finish an action?");Cr=t.parentActionId,void 0!==t.error&&(Nr.suppressReactionErrors=!0);Ir(t.prevAllowStateChanges),kr(t.prevAllowStateReads),Vr(),Or(t.prevDerivation),t.notifySpy&&ii({time:Date.now()-t.startTime});Nr.suppressReactionErrors=!1}(i)}}function Pr(t){var e=Nr.allowStateChanges;return Nr.allowStateChanges=t,e}function Ir(t){Nr.allowStateChanges=t}var Ar=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+_n()),void 0===i&&(i=!0),void 0===o&&(o=Hn.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),i&&ti()&&ei({type:"create",name:a.name,newValue:""+a.value}),a}return fn(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==Nr.UNCHANGED){var n=ti();n&&ni({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&ii()}},e.prototype.prepareNewValue=function(t){if(vr(this),Ti(this)){var e=Ei(this,{object:this,type:"update",newValue:t});if(!e)return Nr.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Nr.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),Ri(this)&&Pi(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Ci(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Di(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return An(this.get())},e}(Ln);Ar.prototype[In()]=Ar.prototype.valueOf;var Fr=En("ObservableValue",Ar),jr=function(){function t(t){this.dependenciesState=cr.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=cr.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+_n(),this.value=new yr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=fr.NONE,this.derivation=t.get,this.name=t.name||"ComputedValue@"+_n(),t.set&&(this.setter=Rr(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?Hn.structural:Hn.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState!==cr.UP_TO_DATE)return;t.lowestObserverState=cr.POSSIBLY_STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===cr.UP_TO_DATE&&(r.dependenciesState=cr.POSSIBLY_STALE,r.isTracing!==fr.NONE&&Xr(r,t),r.onBecomeStale())}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&bn("Cycle detected in computation "+this.name+": "+this.derivation),0!==Nr.inBatch||0!==this.observers.length||this.keepAlive?(Zr(this),mr(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState===cr.STALE)return;t.lowestObserverState=cr.STALE;var e=t.observers,n=e.length;for(;n--;){var r=e[n];r.dependenciesState===cr.POSSIBLY_STALE?r.dependenciesState=cr.STALE:r.dependenciesState===cr.UP_TO_DATE&&(t.lowestObserverState=cr.UP_TO_DATE)}}(this)):mr(this)&&(this.warnAboutUntrackedRead(),Gr(),this.value=this.computeValue(!1),Vr());var t=this.value;if(gr(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(gr(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){wn(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else wn(!1,!1)},t.prototype.trackAndCompute=function(){ti()&&ei({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===cr.NOT_TRACKING,n=this.computeValue(!0),r=e||gr(t)||gr(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Nr.computationDepth++,t)e=_r(this,this.derivation,this.scope);else if(!0===Nr.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new yr(t)}return Nr.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(br(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return function(t,e){void 0===e&&(e=gn);var n,r=e&&e.name||t.name||"Autorun@"+_n();if(e.scheduler||e.delay){var i=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:pi}(e),o=!1;n=new Yr(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(a)})))}),e.onError,e.requiresObservable)}else n=new Yr(r,(function(){this.track(a)}),e.onError,e.requiresObservable);function a(){t(n)}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||e){var a=xr();t({type:"update",object:n,newValue:o,oldValue:i}),Or(a)}r=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return An(this.get())},t}();jr.prototype[In()]=jr.prototype.valueOf;var Mr=En("ComputedValue",jr),Br=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},zr=!0,Lr=!1,Nr=function(){var t=vn();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(zr=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Br).version&&(zr=!1),zr?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Br):(setTimeout((function(){Lr||bn("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Br)}();function Ur(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Wr(t,e){if(1===t.observers.length)t.observers.length=0,Hr(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var o=r[e.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[e.__mapid]}}function Hr(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Nr.pendingUnobservations.push(t))}function Gr(){Nr.inBatch++}function Vr(){if(0==--Nr.inBatch){Kr();for(var t=Nr.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof jr&&n.suspend())}Nr.pendingUnobservations=[]}}function Zr(t){var e=Nr.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&Nr.inBatch>0&&Hr(t),!1)}function Xr(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===fr.BREAK){var n=[];!function t(e,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,n,r+1)}))}((r=t,mi(so(r,i))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof jr?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r,i}var Yr=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+_n()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=cr.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+_n(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=fr.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Nr.pendingReactions.push(this),Kr())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Gr(),this._isScheduled=!1,mr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&ti()&&ei({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Vr()}},t.prototype.track=function(t){Gr();var e,n=ti();n&&(e=Date.now(),ni({name:this.name,type:"reaction"})),this._isRunning=!0;var r=_r(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&br(this),gr(r)&&this.reportExceptionInDerivation(r.cause),n&&ii({time:Date.now()-e}),Vr()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Nr.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Nr.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),ti()&&ei({type:"error",name:this.name,message:n,error:""+t}),Nr.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Gr(),br(this),Vr()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=Si(t);if(!r)return bn(!1);r.isTracing===fr.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled");r.isTracing=n?fr.BREAK:fr.LOG}(this,t)},t}(),qr=function(t){return t()};function Kr(){Nr.inBatch>0||Nr.isRunningReactions||qr(Qr)}function Qr(){Nr.isRunningReactions=!0;for(var t=Nr.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Nr.isRunningReactions=!1}var Jr=En("Reaction",Yr);function $r(t){var e=qr;qr=function(n){return t((function(){return e(n)}))}}function ti(){return!!Nr.spyListeners.length}function ei(t){if(Nr.spyListeners.length)for(var e=Nr.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function ni(t){ei(pn({},t,{spyReportStart:!0}))}var ri={spyReportEnd:!0};function ii(t){ei(t?pn({},t,{spyReportEnd:!0}):ri)}function oi(t){return Nr.spyListeners.push(t),xn((function(){Nr.spyListeners=Nr.spyListeners.filter((function(e){return e!==t}))}))}function ai(){bn(!1)}function si(t){return function(e,n,r){if(r){if(r.value)return{value:Rr(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Rr(t,i.call(this))}}}return li(t).apply(this,arguments)}}function li(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){Tn(this,n,ui(t,e))}})}}var ui=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?Rr(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?Rr(t,e):1===arguments.length&&"string"==typeof t?si(t):!0!==r?si(e).apply(null,arguments):void(t[e]=Rr(t.name||e,n.value))};function ci(t,e){return Dr("string"==typeof t?t:t.name||"<unnamed action>","function"==typeof t?t:e,this,void 0)}function fi(t,e,n){Tn(t,e,Rr(e,n.bind(t)))}ui.bound=function(t,e,n,r){return!0===r?(fi(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return fi(this,e,n.value||n.initializer.call(this)),this[e]},set:ai}:{enumerable:!1,configurable:!0,set:function(t){fi(this,e,t)},get:function(){}}};var pi=function(t){return t()};function hi(t,e,n){return di("onBecomeUnobserved",t,e,n)}function di(t,e,n,r){var i="function"==typeof r?so(e,n):so(e),o="function"==typeof r?r:n,a=i[t];return"function"!=typeof a?bn(!1):(i[t]=function(){a.call(this),o.call(this)},function(){i[t]=a})}function yi(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.computedConfigurable,i=t.disableErrorBoundaries,o=t.arrayBuffer,a=t.reactionScheduler,s=t.reactionRequiresObservable,l=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((Nr.pendingReactions.length||Nr.inBatch||Nr.isRunningReactions)&&bn("isolateGlobalState should be called before MobX is running any reactions"),Lr=!0,zr&&(0==--vn().__mobxInstanceCount&&(vn().__mobxGlobals=void 0),Nr=new Br)),void 0!==e){var u=void 0;switch(e){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:bn("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Nr.enforceActions=u,Nr.allowStateChanges=!0!==u&&"strict"!==u}void 0!==n&&(Nr.computedRequiresReaction=!!n),void 0!==s&&(Nr.reactionRequiresObservable=!!s),void 0!==l&&(Nr.observableRequiresReaction=!!l,Nr.allowStateReads=!Nr.observableRequiresReaction),void 0!==r&&(Nr.computedConfigurable=!!r),void 0!==i&&(!0===i&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Nr.disableErrorBoundaries=!!i),"number"==typeof o&&Gi(o),a&&$r(a)}function gi(t,e,n,r){var i=(r=er(r)).defaultDecorator||(!1===r.deep?or:rr);Xn(t),eo(t,r.name,i.enhancer),Gr();try{for(var o in e){var a=Object.getOwnPropertyDescriptor(e,o);0;var s=n&&o in n?n[o]:a.get?pr:i;0;var l=s(t,o,a,!0);l&&Object.defineProperty(t,o,l)}}finally{Vr()}return t}function mi(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n).map(mi)),r}function vi(t,e){if(null==t)return!1;if(void 0!==e){if(ao(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return ao(t)||!!t.$mobx||Nn(t)||Jr(t)||Mr(t)}function _i(t){return 1!==arguments.length&&bn(!1),vi(t)}var bi={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function wi(t,e,n,r){return r.detectCycles&&t.set(e,n),n}function xi(t,e,n){if(!e.recurseEverything&&!_i(t))return t;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return t;if(Fr(t))return xi(t.get(),e,n);var r;if(_i(t)&&(ao(r=t)?r.$mobx.getKeys():Ki(r)?r._keys.slice():$i(r)?Pn(r.keys()):Zi(r)?r.map((function(t,e){return e})):bn(!1)),!0===e.detectCycles&&null!==t&&n.has(t))return n.get(t);if(Zi(t)||Array.isArray(t)){var i=wi(n,t,[],e),o=t.map((function(t){return xi(t,e,n)}));i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if($i(t)||Object.getPrototypeOf(t)===Set.prototype){if(!1===e.exportMapsAsObjects){var l=wi(n,t,new Set,e);return t.forEach((function(t){l.add(xi(t,e,n))})),l}var u=wi(n,t,[],e);return t.forEach((function(t){u.push(xi(t,e,n))})),u}if(Ki(t)||Object.getPrototypeOf(t)===Map.prototype){if(!1===e.exportMapsAsObjects){var c=wi(n,t,new Map,e);return t.forEach((function(t,r){c.set(r,xi(t,e,n))})),c}var f=wi(n,t,{},e);return t.forEach((function(t,r){f[r]=xi(t,e,n)})),f}var p=wi(n,t,{},e);for(var h in t)p[h]=xi(t[h],e,n);return p}function Oi(t,e){var n;return"boolean"==typeof e&&(e={detectCycles:e}),e||(e=bi),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(n=new Map),xi(t,e,n)}function Si(t){switch(t.length){case 0:return Nr.trackingDerivation;case 1:return so(t[0]);case 2:return so(t[0],t[1])}}function ki(t,e){void 0===e&&(e=void 0),Gr();try{return t.apply(e)}finally{Vr()}}function Ti(t){return void 0!==t.interceptors&&t.interceptors.length>0}function Ci(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),xn((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Ei(t,e){var n=xr();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(wn(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{Or(n)}}function Ri(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function Di(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),xn((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Pi(t,e){var n=xr(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);Or(n)}}var Ii,Ai,Fi,ji,Mi=(Ii=!1,Ai={},Object.defineProperty(Ai,"0",{set:function(){Ii=!0}}),Object.create(Ai)[0]=1,!1===Ii),Bi=0,zi=function(){};Fi=zi,ji=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Fi.prototype,ji):void 0!==Fi.prototype.__proto__?Fi.prototype.__proto__=ji:Fi.prototype=ji,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(t){Object.defineProperty(zi.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})}));var Li=function(){function t(t,e,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new Ln(t||"ObservableArray@"+_n()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return Ci(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Di(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>Bi&&Gi(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var r=this;vr(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=yn),Ti(this)){var o=Ei(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!o)return yn;e=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}))).length-e;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,dn([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&ti(),i=Ri(this),o=i||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;r&&ni(pn({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&Pi(this,o),r&&ii()},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&ti(),i=Ri(this),o=i||r?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;r&&ni(pn({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&Pi(this,o),r&&ii()},t}(),Ni=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableArray@"+_n()),void 0===i&&(i=!1);var o=t.call(this)||this,a=new Li(r,n,o,i);if(Cn(o,"$mobx",a),e&&e.length){var s=Pr(!0);o.spliceWithArray(0,0,e),Ir(s)}return Mi&&Object.defineProperty(a.array,"0",Ui),o}return fn(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map((function(t){return Zi(t)?t.peek():t})))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(n.call(this,t),n.call(this,e),t!==e){var r,i=this.$mobx.values;r=t<e?dn(i.slice(0,t),i.slice(t+1,e+1),[i[t]],i.slice(e+1)):dn(i.slice(0,e),[i[t]],i.slice(e,t),i.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,r=n.values;if(t<r.length){vr(n.atom);var i=r[t];if(Ti(n)){var o=Ei(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}},e}(zi);jn(Ni.prototype,(function(){this.$mobx.atom.reportObserved();var t=this,e=0;return Mn({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Ni.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),Tn(Ni.prototype,Bn(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(t){var e=Array.prototype[t];wn("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),Tn(Ni.prototype,t,(function(){return e.apply(this.peek(),arguments)}))})),function(t,e){for(var n=0;n<e.length;n++)Tn(t,e[n],t[e[n]])}(Ni.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Ui=Wi(0);function Wi(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Hi(t){Object.defineProperty(Ni.prototype,""+t,Wi(t))}function Gi(t){for(var e=Bi;e<t;e++)Hi(e);Bi=t}Gi(1e3);var Vi=En("ObservableArrayAdministration",Li);function Zi(t){return Sn(t)&&Vi(t.$mobx)}var Xi={},Yi=function(){function t(t,e,n){if(void 0===e&&(e=Kn),void 0===n&&(n="ObservableMap@"+_n()),this.enhancer=e,this.name=n,this.$mobx=Xi,this._keys=new Ni(void 0,Qn,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Nr.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new Ar(this._has(t),Qn,this.name+"."+qi(t)+"?",!1);this._hasMap.set(t,r),hi(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(Ti(this)){var r=Ei(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(Ti(this)&&!(i=Ei(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=ti(),r=Ri(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&ni(pn({},i,{name:this.name,key:t})),ki((function(){e._keys.remove(t),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&Pi(this,i),n&&ii(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==Nr.UNCHANGED){var r=ti(),i=Ri(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;r&&ni(pn({},o,{name:this.name,key:t})),n.setNewValue(e),i&&Pi(this,o),r&&ii()}},t.prototype._addValue=function(t,e){var n=this;ki((function(){var r=new Ar(e,n.enhancer,n.name+"."+qi(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keys.push(t)}));var r=ti(),i=Ri(this),o=i||r?{type:"add",object:this,name:t,newValue:e}:null;r&&ni(pn({},o,{name:this.name,key:t})),i&&Pi(this,o),r&&ii()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keys[Fn()]()},t.prototype.values=function(){var t=this,e=0;return Mn({next:function(){return e<t._keys.length?{value:t.get(t._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var t=this,e=0;return Mn({next:function(){if(e<t._keys.length){var n=t._keys[e++];return{value:[n,t.get(n)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(t,e){var n=this;this._keys.forEach((function(r){return t.call(e,n.get(r),r,n)}))},t.prototype.merge=function(t){var e=this;return Ki(t)&&(t=t.toJS()),ki((function(){kn(t)?Object.keys(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=hn(t,2),r=n[0],i=n[1];return e.set(r,i)})):Rn(t)?t.constructor!==Map?bn("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach((function(t,n){return e.set(n,t)})):null!=t&&bn("Cannot initialize map from "+t)})),this},t.prototype.clear=function(){var t=this;ki((function(){wr((function(){t._keys.slice().forEach((function(e){return t.delete(e)}))}))}))},t.prototype.replace=function(t){var e=this;return ki((function(){for(var n,r=Rn(n=t)||Ki(n)?n:Array.isArray(n)?new Map(n):kn(n)?new Map(Object.entries(n)):bn("Cannot convert to map from '"+n+"'"),i=e._keys,o=Array.from(r.keys()),a=!1,s=0;s<i.length;s++){var l=i[s];i.length===o.length&&l!==o[s]&&(a=!0),r.has(l)||(a=!0,e.delete(l))}r.forEach((function(t,n){e._data.has(n)||(a=!0),e.set(n,t)})),a&&e._keys.replace(o)})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this._keys.forEach((function(n){return e["symbol"==typeof n?n:qi(n)]=t.get(n)})),e},t.prototype.toJS=function(){var t=this,e=new Map;return this._keys.forEach((function(n){return e.set(n,t.get(n))})),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+this._keys.map((function(e){return qi(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return Di(this,t)},t.prototype.intercept=function(t){return Ci(this,t)},t}();function qi(t){return t&&t.toString?t.toString():new String(t).toString()}jn(Yi.prototype,(function(){return this.entries()})),Cn(Yi.prototype,Bn(),"Map");var Ki=En("ObservableMap",Yi),Qi={},Ji=function(){function t(t,e,n){if(void 0===e&&(e=Kn),void 0===n&&(n="ObservableSet@"+_n()),this.name=n,this.$mobx=Qi,this._data=new Set,this._atom=Un(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ki((function(){wr((function(){t._data.forEach((function(e){t.delete(e)}))}))}))},t.prototype.forEach=function(t,e){var n=this;this._data.forEach((function(r){t.call(e,r,r,n)}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if((vr(this._atom),Ti(this))&&!(i=Ei(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ki((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var n=ti(),r=Ri(this),i=r||n?{type:"add",object:this,newValue:t}:null;0,r&&Pi(this,i)}return this},t.prototype.delete=function(t){var e=this;if(Ti(this)&&!(i=Ei(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=ti(),r=Ri(this),i=r||n?{type:"delete",object:this,oldValue:t}:null;return ki((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&Pi(this,i),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Pn(this.keys()),n=Pn(this.values());return Mn({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t,e=this,n=0;return void 0!==this._data.values?t=Pn(this._data.values()):(t=[],this._data.forEach((function(e){return t.push(e)}))),Mn({next:function(){return n<t.length?{value:e.dehanceValue(t[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return $i(t)&&(t=t.toJS()),ki((function(){Array.isArray(t)||Dn(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&bn("Cannot initialize set from "+t)})),this},t.prototype.observe=function(t,e){return Di(this,t)},t.prototype.intercept=function(t){return Ci(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Pn(this.keys()).join(", ")+" ]"},t}();jn(Ji.prototype,(function(){return this.values()})),Cn(Ji.prototype,Bn(),"Set");var $i=En("ObservableSet",Ji),to=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t||(this.illegalAccess(t,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(t,e,n){var r=this.target;r!==t&&this.illegalAccess(t,e);var i=this.values[e];if(i instanceof jr)i.set(n);else{if(Ti(this)){if(!(s=Ei(this,{type:"update",object:r,name:e,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==Nr.UNCHANGED){var o=Ri(this),a=ti(),s=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:n}:null;a&&ni(pn({},s,{name:this.name,key:e})),i.setNewValue(n),o&&Pi(this,s),a&&ii()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(Ti(this))if(!(o=Ei(this,{object:e,name:t,type:"remove"})))return;try{Gr();var n=Ri(this),r=ti(),i=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||r?{type:"remove",object:e,oldValue:i,name:t}:null;r&&ni(pn({},o,{name:this.name,key:t})),n&&Pi(this,o),r&&ii()}finally{Vr()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return Di(this,t)},t.prototype.intercept=function(t){return Ci(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new Ni(Object.keys(this.values).filter((function(e){return t.values[e]instanceof Ar})),Qn,"keys("+this.name+")",!0)),this.keys.slice()},t}();function eo(t,e,n){void 0===e&&(e=""),void 0===n&&(n=Kn);var r=t.$mobx;return r||(kn(t)||(e=(t.constructor.name||"ObservableObject")+"@"+_n()),e||(e="ObservableObject@"+_n()),Cn(t,"$mobx",r=new to(t,e,n)),r)}var no=Object.create(null),ro=Object.create(null);function io(t){var e=t.$mobx;return e||(Xn(t),t.$mobx)}var oo=En("ObservableObjectAdministration",to);function ao(t){return!!Sn(t)&&(Xn(t),oo(t.$mobx))}function so(t,e){if("object"==typeof t&&null!==t){if(Zi(t))return void 0!==e&&bn(!1),t.$mobx.atom;if($i(t))return t.$mobx;if(Ki(t)){var n=t;return void 0===e?so(n._keys):((r=n._data.get(e)||n._hasMap.get(e))||bn(!1),r)}var r;if(Xn(t),e&&!t.$mobx&&t[e],ao(t))return e?((r=t.$mobx.values[e])||bn(!1),r):bn(!1);if(Nn(t)||Mr(t)||Jr(t))return t}else if("function"==typeof t&&Jr(t.$mobx))return t.$mobx;return bn(!1)}function lo(t,e){return(void 0!==e?so(t,e):ao(t)||Ki(t)||$i(t)?function t(e,n){return e||bn("Expecting some object"),void 0!==n?t(so(e,n)):Nn(e)||Mr(e)||Jr(e)||Ki(e)||$i(e)?e:(Xn(e),e.$mobx?e.$mobx:void bn(!1))}(t):so(t)).name}var uo=Object.prototype.toString;function co(t,e,n){return void 0===n&&(n=-1),function t(e,n,r,i,o){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof n)return!1;e=fo(e),n=fo(n);var s=uo.call(e);if(s!==uo.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var l="[object Array]"===s;if(!l){if("object"!=typeof e||"object"!=typeof n)return!1;var u=e.constructor,c=n.constructor;if(u!==c&&!("function"==typeof u&&u instanceof u&&"function"==typeof c&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}if(0===r)return!1;r<0&&(r=-1);o=o||[];var f=(i=i||[]).length;for(;f--;)if(i[f]===e)return o[f]===n;if(i.push(e),o.push(n),l){if((f=e.length)!==n.length)return!1;for(;f--;)if(!t(e[f],n[f],r-1,i,o))return!1}else{var p=Object.keys(e),h=void 0;if(f=p.length,Object.keys(n).length!==f)return!1;for(;f--;)if(h=p[f],!po(n,h)||!t(e[h],n[h],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(t,e,n)}function fo(t){return Zi(t)?t.peek():Rn(t)||Ki(t)||Dn(t)||$i(t)?Pn(t.entries()):t}function po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:oi,extras:{getDebugName:lo},$mobx:"$mobx"});var ho,yo=function(){function t(t,e){this.from=t,this.to=e}return t.prototype.contains=function(t){return this.from<=t&&t<=this.to},t.prototype.clamp=function(t){return Math.min(Math.max(this.from,t),this.to)},t}(),go=new yo(-1,1),mo=function(){function t(t){this.engineMediator=t,this.state=un}return t.prototype.editAdjustments=function(t){var e=t.type,n=t.value,r=go.clamp(n);this.state[e]=r},t.prototype.reset=function(){var t=this;ci((function(){-1===t.indexInContainer&&(Object.keys(un).forEach((function(e){t.state[e]=un[e]})),t.orderHelper.removeIndex(j.ADJUSTMENT))}))},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),t.prototype.setAdjustmentEffect=function(t){var e=this.orderHelper.addIndex(j.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e),this.effect.getProperties()},t.prototype.removeAdjustmentEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"editAdjustments",null),w([ui],t.prototype,"reset",null),t}(),vo=function(){function t(e,n){var r=this;this.assets=[],this.withoutItems=function(t){t.items;return b(t,["items"])},this.entityMapper=function(e,n){return t.isCategory(e)?r.categoryMapper(e,n):r.itemMapper(e,n)},this.categoryMapper=function(t,e){return t?_(_({},t),{thumbnailURI:r.getCategoryURI(t),type:B.LARGE,delay:.08*e,name:r.config.locale[t.identifier]||t.name,items:t.items.map(r.itemMapper)}):null},this.itemMapper=function(t,e){return t?_(_({},t),{thumbnailURI:r.getItemURI(t),type:B.MEDIUM,delay:.08*e,name:r.config.locale[t.identifier]||t.name}):null},this.getCategoryURI=function(t){return dt(t)&&r.config.categoryDynamicKey?t[r.config.categoryDynamicKey]:t.thumbnailURI&&ee(t.thumbnailURI)?t.thumbnailURI:r.config.getAssetPath(t[r.config.categoryKey]||"")},this.getItemURI=function(t){return ht(t)&&r.config.itemDynamicKey?t[r.config.itemDynamicKey]:t.thumbnailURI&&ee(t.thumbnailURI)?t.thumbnailURI:r.config.getAssetPath(t[r.config.itemKey]||"")},this.config=n,this.assets=e.map(this.entityMapper).filter(Boolean)}return t.isCategory=function(t){return Object.prototype.hasOwnProperty.call(t,"items")},Object.defineProperty(t.prototype,"categories",{get:function(){return this.assets.reduce((function(e,n){if(t.isCategory(n))return T(e,[n])}),[]).filter(Boolean)},enumerable:!0,configurable:!0}),t.prototype.getCategories=function(t){this.assets.findIndex((function(e){return e.identifier===t}));return this.categories},Object.defineProperty(t.prototype,"items",{get:function(){return this.assets.reduce((function(e,n){return t.isCategory(n)?T(e,n.items):T(e,[n])}),[]).filter(Boolean)},enumerable:!0,configurable:!0}),t.prototype.itemsOfCategory=function(t){var e=this.assets.findIndex((function(e){return e.identifier===t}));return-1!==e?this.categories[e].items:[]},t.prototype.getEntities=function(t){if(this.config.flattenCategories)return this.items;if(t){var e=this.assets.findIndex((function(e){return e.identifier===t}));if(-1!==e){var n=this.categories[e].items;return T(this.categories.slice(0,e+1),n,this.categories.slice(e+1)).map(this.withoutItems)}}return this.categories.map(this.withoutItems)},t}(),_o=function(){function t(){this.snapshots=[],this.observeIndex=lr.box(-1)}return t.prototype.addSnapshot=function(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=T(this.snapshots.slice(0,this.index+1),[JSON.stringify(t)]),this.observeIndex.set(this.snapshots.length-1)},t.prototype.getCurrentState=function(){return this.snapshots[this.index]},t.prototype.reset=function(){this.snapshots=[],this.observeIndex.set(-1)},t.prototype.undo=function(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null},t.prototype.redo=function(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null},t.prototype.discardSnapshotsfromIndex=function(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))},Object.defineProperty(t.prototype,"index",{get:function(){return this.observeIndex.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.index>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){return this.snapshots.length-1>this.index},enumerable:!0,configurable:!0}),w([dr],t.prototype,"index",null),w([dr],t.prototype,"canUndo",null),w([dr],t.prototype,"canRedo",null),t}();!function(t){t.ADD="add",t.EDIT="edit",t.DELETE="delete"}(ho||(ho={}));var bo=function(){function t(t){var e=this;this.localTransformStartIndex=null,this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=function(){return x(e,void 0,void 0,(function(){var t;return O(this,(function(e){switch(e.label){case 0:return this.awaitHistoryChange?[3,2]:(this.awaitHistoryChange=!0,t=this.appHistoryManager.undo(),[4,this.applyState(t)]);case 1:e.sent(),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1),e.label=2;case 2:return[2]}}))}))},this.redo=function(){return x(e,void 0,void 0,(function(){var t;return O(this,(function(e){switch(e.label){case 0:return this.awaitHistoryChange?[3,2]:(this.awaitHistoryChange=!0,t=this.appHistoryManager.redo(),[4,this.applyState(t)]);case 1:e.sent(),this.awaitHistoryChange=!1,e.label=2;case 2:return[2]}}))}))},this.editor=t,this.appHistoryManager=new _o}return Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.appHistoryManager.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){return this.appHistoryManager.canRedo},enumerable:!0,configurable:!0}),t.prototype.getHistoryState=function(){var t,e=Oi(this.editor.adjustmentsToolStore.state),n=Oi(this.editor.filterToolStore.state),r=this.editor.focusToolStore.getFocusStateForHistory(),i=Oi(this.editor.overlayToolStore.state),o=Oi(this.editor.frameToolStore.state),a=this.editor.brushToolStore.strokes||{strokes:[]},s=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return(t={})[j.ADJUSTMENT]=e,t[j.FILTER]=n,t[j.FOCUS]=r,t[j.OVERLAY]=i,t[j.FRAME]=o,t[j.BRUSH]=a,t.sprite=s,t[j.TRANSFORM]=l,t},t.prototype.addInitialSnapshot=function(){var t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:ho.ADD,description:"Initial State"})},t.prototype.addSnapshot=function(t,e,n){void 0===t&&(t=this.getHistoryState()),t&&((t.sprite||t.transform)&&(t=_(_({},this.getHistoryState()),t)),this.appHistoryManager.addSnapshot({state:t,type:e,description:n}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0))},t.prototype.saveTransformLocalSnapshotIndex=function(){null===this.localTransformStartIndex&&(this.localTransformStartIndex=this.appHistoryManager.snapshots.length)},t.prototype.removeTransformLocalSnapshots=function(){null!==this.localTransformStartIndex&&(this.appHistoryManager.discardSnapshotsfromIndex(this.localTransformStartIndex-1),this.localTransformStartIndex=null)},t.prototype.applyState=function(t){var e=t.state;return x(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,l;return O(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,28,,29]),!e)return[3,27];t=Object.keys(e),u.label=1;case 1:u.trys.push([1,23,24,25]),n=S(t),r=n.next(),u.label=2;case 2:if(r.done)return[3,22];switch(i=r.value,i){case j.FILTER:return[3,3];case j.ADJUSTMENT:return[3,5];case j.OVERLAY:return[3,7];case j.FRAME:return[3,9];case j.FOCUS:return[3,11];case j.BRUSH:return[3,13];case"sprite":return[3,15];case"localTransform":return[3,17];case j.TRANSFORM:return[3,19]}return[3,21];case 3:return[4,this.editor.filterToolStore.updateStateFromHistory(e[i])];case 4:return u.sent(),[3,21];case 5:return[4,this.editor.adjustmentsToolStore.updateStateFromHistory(e[i])];case 6:return u.sent(),[3,21];case 7:return[4,this.editor.overlayToolStore.updateStateFromHistory(e[i])];case 8:return u.sent(),[3,21];case 9:return[4,this.editor.frameToolStore.updateStateFromHistory(e[i])];case 10:return u.sent(),[3,21];case 11:return[4,this.editor.focusToolStore.updateStateFromHistory(e[i],this.editor.canvasStore.sizeVector)];case 12:return u.sent(),[3,21];case 13:return[4,this.editor.brushToolStore.updateStateFromHistory(e[i])];case 14:return u.sent(),[3,21];case 15:return[4,this.editor.spriteStore.updateStateFromHistory(e[i])];case 16:return u.sent(),[3,21];case 17:return[4,this.editor.transformToolStore.updateLocalStateFromHistory(e.localTransform)];case 18:return u.sent(),[3,21];case 19:return this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e[i],!1),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),[4,this.editor.wait()];case 20:return u.sent(),[3,21];case 21:return r=n.next(),[3,2];case 22:return[3,25];case 23:return o=u.sent(),s={error:o},[3,25];case 24:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(s)throw s.error}return[7];case 25:return[4,this.editor.renderPromise()];case 26:u.sent(),u.label=27;case 27:return[3,29];case 28:return a=u.sent(),console.error(a),this.editor.modalStore.showActionModal({type:z.ERROR,identifier:"unexpectedError",error:a,handleConfirm:function(){window.location.reload()}}),[3,29];case 29:return[2]}}))}))},t.prototype.isDirty=function(){return this.appHistoryManager.snapshots.length>1},t.prototype.reset=function(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1},w([ui],t.prototype,"undo",void 0),w([ui],t.prototype,"redo",void 0),w([dr],t.prototype,"canUndo",null),w([dr],t.prototype,"canRedo",null),t}(),wo=function(){function t(t){var e=this;this.dirty=lr.box(!1),this.reset=function(){e.pureReset(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.adjustmentsStore=new mo(this.editor.engineMediator),this.selectedOption="";var n=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new vo(n,_(_({},this.config),{categoryKey:"",itemKey:"thumbnailURI",locale:_(_({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}return t.prototype.editAdjustments=function(t){var e=t.type,n=t.value;this.pureSetAdjustment({type:e,value:n}),this.editor.render()},t.prototype.toolSnapshot=function(){this.dirty.set(!0),this.addSnapshot(ho.EDIT,j.ADJUSTMENT)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.toggleOptionSelection=function(t){this.selectedOption=t},t.prototype.pureSetAdjustment=function(t){var e,n=t.type,r=t.value,i=this.adjustmentsStore.setAdjustmentEffect(((e={})[n]=r,e));this.adjustmentsStore.editAdjustments({type:n,value:i[n]})},t.prototype.pureReset=function(){this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},t.prototype.updateStateFromHistory=function(t){var e=this;ci((function(){Object.keys(t).forEach((function(n){e.pureSetAdjustment({type:n,value:t[n]})}))}))},t.prototype.updateStateFromSerialization=function(t){this.updateStateFromHistory(t)},Object.defineProperty(t.prototype,"selectedAdjustmentType",{get:function(){return this.selectedOption},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.dirty.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.adjustmentsStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedOptionLabel",{get:function(){var t=this,e=this.items.find((function(e){return!!e&&e.identifier===t.selectedOption}));return e?e.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.state.brightness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.state.saturation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.state.contrast},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gamma",{get:function(){return this.state.gamma},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clarity",{get:function(){return this.state.clarity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exposure",{get:function(){return this.state.exposure},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadows",{get:function(){return this.state.shadows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlights",{get:function(){return this.state.highlights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"whites",{get:function(){return this.state.whites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blacks",{get:function(){return this.state.blacks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"temperature",{get:function(){return this.state.temperature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharpness",{get:function(){return this.state.sharpness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.entityManager.categories.reduce((function(t,e){return T(t,vo.isCategory(e)?e.items:[e])}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.ADJUSTMENT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.ADJUSTMENT]},enumerable:!0,configurable:!0}),w([lr],t.prototype,"selectedOption",void 0),w([lr],t.prototype,"dirty",void 0),w([ui],t.prototype,"editAdjustments",null),w([ui],t.prototype,"toggleOptionSelection",null),w([ui],t.prototype,"pureSetAdjustment",null),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"updateStateFromSerialization",null),w([dr],t.prototype,"selectedAdjustmentType",null),w([dr],t.prototype,"isDirty",null),w([dr],t.prototype,"state",null),w([dr],t.prototype,"selectedOptionLabel",null),w([dr],t.prototype,"brightness",null),w([dr],t.prototype,"saturation",null),w([dr],t.prototype,"contrast",null),w([dr],t.prototype,"gamma",null),w([dr],t.prototype,"clarity",null),w([dr],t.prototype,"exposure",null),w([dr],t.prototype,"shadows",null),w([dr],t.prototype,"highlights",null),w([dr],t.prototype,"whites",null),w([dr],t.prototype,"blacks",null),w([dr],t.prototype,"temperature",null),w([dr],t.prototype,"sharpness",null),w([dr],t.prototype,"categories",null),w([dr],t.prototype,"items",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),t}(),xo={identifier:"identity",intensity:1,isDuotone:!1},Oo=new yo(0,1),So=function(){function t(t){var e=this;this.setEffectProperties=function(t){var n=t.intensity;return e.effect?(e.state.isDuotone?e.effect.setProperties({colorIntensity:n}):e.effect.setProperties({intensity:n}),e.effect.getProperties()):null},this.engineMediator=t,this.state=xo}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeIfDuotone=function(t){this.state.isDuotone=t},t.prototype.changeIntensity=function(t){var e=Oo.clamp(t);this.state.intensity=e},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=xo.identifier,this.state.intensity=xo.intensity,this.removeIndex())},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.setFilterEffect=function(t){var e=this,n=t.identifier,r=t.intensity,i=t.isDuotone,o=this.state;this.changeIdentifier(n),this.changeIntensity(r),this.changeIfDuotone(i),this.removeFilterEffect();var a=this.engineMediator.orderHelper.addIndex(j.FILTER);return new Promise(i?function(t,i){e.engineMediator.engine.addDuoToneFilterFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({colorIntensity:r}),t()})).catch((function(t){e.fallbackOnError(o),i(t)}))}:function(t,i){e.engineMediator.engine.addLUTFilterFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({intensity:r}),t()})).catch((function(t){e.fallbackOnError(o),i(t)}))})},t.prototype.removeFilterEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(j.FILTER)},t.prototype.fallbackOnError=function(t){this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),"identity"===t.identifier&&this.removeIndex()},w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"changeIdentifier",null),w([ui],t.prototype,"changeIfDuotone",null),w([ui],t.prototype,"changeIntensity",null),w([ui],t.prototype,"reset",null),t}(),ko=function(){function t(t){var e=this;this.changeIntensity=function(t){var n=e.isOptionDuoTone(e.identifier),r=e.filterStore.setEffectProperties({intensity:t});if(r){var i=n?r.colorIntensity:r.intensity;e.filterStore.changeIntensity(i),e.editor.render()}},this.reset=function(){e.pureReset(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.selectedCategory="identity",this.filterStore=new So(this.editor.engineMediator);var n=this.config,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new vo(r,_(_({},n),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}return t.prototype.selectFilter=function(t,e){return void 0===e&&(e=1),x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:[4,this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)})];case 1:n.sent(),this.editor.render(),this.addSnapshot(ho.ADD,j.FILTER),n.label=2;case 2:return[2]}}))}))},t.prototype.setImageAndGetPreviews=function(){return x(this,void 0,void 0,(function(){var t;return O(this,(function(e){switch(e.label){case 0:return t=this.editor.activeStore.state.image,[4,this.editor.previewThumbnails.addImageToContainer(t)];case 1:return e.sent(),[4,this.getAllFilterPreview()];case 2:return e.sent(),[2]}}))}))},t.prototype.getAllFilterPreview=function(){return x(this,void 0,void 0,(function(){var t,e,n,r,i=this;return O(this,(function(o){switch(o.label){case 0:return t=this.entityManager.items.map((function(t){return{identifier:t.identifier,isDuotone:i.isOptionDuoTone(t.identifier)}})),[4,this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t)];case 1:return e=o.sent(),[4,this.editor.wait()];case 2:return o.sent(),n=this.config,r=this.editor.configStore.assetProvider.getAssets("filter").map((function(t){return _(_({},t),{items:t.items.map((function(t){return _(_({},t),{thumbnail:e[t.identifier]})}))})})),this.entityManager=new vo(r,_(_({},n),{categoryKey:"thumbnailURI",itemDynamicKey:"thumbnail",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})),[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(ho.EDIT,this.locale.controls.sliderIntensity)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.pureReset=function(){this.selectedCategory="identity",this.filterStore.removeFilterEffect(),this.filterStore.reset()},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.updateStateFromSerialization=function(t){var e=t.identifier,n=t.intensity,r=this.doesFilterAssetExist(e);if(r){var i=tt(r);return this.filterStore.setFilterEffect({identifier:e,intensity:n,isDuotone:i})}return new Promise((function(t,n){n(new Error("Filter Asset "+e+" doesn't exist"))}))},t.prototype.updateStateFromHistory=function(t){return x(this,void 0,void 0,(function(){return O(this,(function(e){return"identity"===t.identifier?(this.pureReset(),[2,new Promise((function(t){t()}))]):[2,this.filterStore.setFilterEffect(t)]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.filterStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this.state.intensity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDuotone",{get:function(){return this.state.isDuotone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.getCategories(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),t.prototype.doesFilterAssetExist=function(t){return this.entityManager.items.find((function(e){return t===e.identifier}))},t.prototype.isOptionDuoTone=function(t){var e=this.doesFilterAssetExist(t);return!!e&&tt(e)},w([lr],t.prototype,"selectedCategory",void 0),w([lr],t.prototype,"entityManager",void 0),w([ui],t.prototype,"selectFilter",null),w([ui],t.prototype,"changeIntensity",void 0),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"toggleCategorySelection",null),w([ui],t.prototype,"updateStateFromSerialization",null),w([ui],t.prototype,"updateStateFromHistory",null),w([dr],t.prototype,"state",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"intensity",null),w([dr],t.prototype,"isDuotone",null),w([dr],t.prototype,"selectedCategoryIdentifier",null),w([dr],t.prototype,"isOptionSelected",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"categories",null),w([dr],t.prototype,"entities",null),t}(),To={blurRadius:40,gradientSize:.2},Co={identifier:"identity",linear:_({start:{x:0,y:0},end:{x:0,y:0}},To),radial:_({center:{x:0,y:0},radius:0},To),mirrored:_({origin:{x:0,y:0},rotation:0,size:0},To),gaussian:To},Eo=function(){function t(t){this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=Co}return t.prototype.selectFocus=function(t,e){var n=this;ci((function(){n.state.identifier=t,e&&(n.state[t].blurRadius=e)}))},t.prototype.changeBlurRadius=function(t,e){"identity"!==t&&(this.state[t].blurRadius=e)},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Co.identifier,"identity"!==this.state.identifier&&(this.state[this.state.identifier].blurRadius=Co[this.state.identifier].blurRadius))},t.prototype.setLinear=function(t){var e=t.start,n=t.end;this.state.linear.start.x=e.x,this.state.linear.start.y=e.y,this.state.linear.end.x=n.x,this.state.linear.end.y=n.y},t.prototype.setLinearStart=function(t){this.state.linear.start.x=t.x,this.state.linear.start.y=t.y},t.prototype.setLinearEnd=function(t){this.state.linear.end.x=t.x,this.state.linear.end.y=t.y},t.prototype.setRadialCenter=function(t){this.state.radial.center.x=t.x,this.state.radial.center.y=t.y},t.prototype.setRadialRadius=function(t){this.state.radial.radius=t},t.prototype.setMirroredOrigin=function(t){this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y},t.prototype.setMirroredRotation=function(t){this.state.mirrored.rotation=t},t.prototype.setMirroredSize=function(t){this.state.mirrored.size=t},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.engineMediator.orderHelper.addIndex(j.FOCUS)},enumerable:!0,configurable:!0}),t.prototype.getEffectProperties=function(){return this.effect?this.effect.getProperties():null},t.prototype.setLinearFocus=function(t){this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())},t.prototype.setGaussianFocus=function(t){this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())},t.prototype.setRadialFocus=function(t){this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())},t.prototype.setMirroredFocus=function(t){this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())},t.prototype.updateFromEngineState=function(t){var e=this.getEffectProperties();if(e&&"identity"!==t)switch(t){case nt.LINEAR:this.updateLinearState(e);break;case nt.RADIAL:this.updateRadialState(e);break;case nt.MIRRORED:this.updateMirroredState(e)}},t.prototype.updateGaussianState=function(t){this.changeBlurRadius(nt.GAUSSIAN,t.blurRadius)},t.prototype.updateMirroredState=function(t){var e=this.editor.worldToPreview(t.mirrorAxisOrigin),n=new R(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(e),r=Math.atan2(n.y,n.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(r),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(nt.MIRRORED,t.blurRadius)},t.prototype.updateRadialState=function(t){this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(nt.RADIAL,t.blurRadius)},t.prototype.updateLinearState=function(t){this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(nt.LINEAR,t.blurRadius)},t.prototype.setEffectProperties=function(t){return this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.removeFocus=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(j.FOCUS))},Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"selectFocus",null),w([ui],t.prototype,"changeBlurRadius",null),w([ui],t.prototype,"reset",null),w([ui],t.prototype,"setLinear",null),w([ui],t.prototype,"setLinearStart",null),w([ui],t.prototype,"setLinearEnd",null),w([ui],t.prototype,"setRadialCenter",null),w([ui],t.prototype,"setRadialRadius",null),w([ui],t.prototype,"setMirroredOrigin",null),w([ui],t.prototype,"setMirroredRotation",null),w([ui],t.prototype,"setMirroredSize",null),w([ui],t.prototype,"updateFromEngineState",null),t}();function Ro(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function Do(t,e){var n;return e&&!0===e.clone&&Ro(t)?Po((n=t,Array.isArray(n)?[]:{}),t,e):t}function Po(t,e,n){return Array.isArray(e)?Array.isArray(t)?e:Do(e,n):function(t,e,n){var r={};return Ro(t)&&Object.keys(t).forEach((function(e){r[e]=Do(t[e],n)})),Object.keys(e).forEach((function(i){var o=Ro(e[i])&&t[i];r[i]=o?Po(t[i],e[i],n):Do(e[i],n)})),r}(t,e,n)}function Io(t,e){if(void 0===e&&(e=null),!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return Po(t,n,e)}))}var Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.onExport=function(t){this.emit(_t.EXPORT,t)},e.prototype.onClose=function(){this.emit(_t.CLOSE)},e.prototype.onHistoryChange=function(){this.emit(_t.HISTORY_CHANGE)},e.prototype.onEditorReady=function(){this.emit(_t.EDITOR_READY)},e.prototype.onErrorImageLoading=function(t){this.emit(_t.ERROR_IMAGE_LOADING,t)},e}(St),Fo={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image has been resized to ${width}x${height} pixels"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlieen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}}},jo={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"Rckgngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlieen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Grnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht untersttzt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlieen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlieen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlieen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Das Bild wurde es auf ${width}x${height} Pixel verkleinert"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die nderungen verwerfen wollen?",buttonYes:"nderungen verwerfen",buttonNo:"nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlieen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und knnten anders aussehen",buttonYes:"nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten fhren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam ffnen",buttonWebcamClose:"Webcam Schlieen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zurcksetzen",sliderIntensity:"Filter Intensitt"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zurcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"Sttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Schrfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zurcksetzen",sliderIntensity:"Focus Intensitt"},items:{radial:"Kreisfrmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gausch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gre"}},overlay:{title:"Overlays",controls:{buttonReset:"Zurcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"berblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgre",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenhhe",tabFontSize:"Schriftgre"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlieen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zurcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zurcksetzen",sliderSize:"Dicke",sliderHardness:"Hrte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"Hrte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zurcksetzen",checkboxKeepResolution:"Fixiere Auflsung",inputCropSize:"Bildgre",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Auflsung",tabCropSize:"Bildgre"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}}},Mo=function(t){return"de"===t?jo:Fo},Bo=function(){function t(){}return t.addScrollStyles=function(e){void 0===e&&(e="rgba(255, 255, 255, 0.2)");var n="\n    /* Injected by PhotoEditorSDK */\n    "+t.styles(e)+"\n  ",r=document.createElement("style");r.innerHTML=n,document.head.appendChild(r)},t.styles=function(t){return"\n    [data-simplebar] {\n      position: relative;\n      flex-direction: column;\n      flex-wrap: wrap;\n      justify-content: flex-start;\n      align-content: flex-start;\n      align-items: flex-start;\n    }\n\n    .photoeditorsdk-simplebar-wrapper {\n      overflow: hidden;\n      width: inherit;\n      height: inherit;\n      max-width: inherit;\n      max-height: inherit;\n    }\n\n    .photoeditorsdk-simplebar-mask {\n      direction: inherit;\n      position: absolute;\n      padding: 0;\n      margin: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      width: auto !important;\n      height: auto !important;\n      z-index: 0;\n    }\n\n    .photoeditorsdk-simplebar-offset {\n      direction: inherit !important;\n      box-sizing: inherit !important;\n      resize: none !important;\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      padding: 0;\n      margin: 0;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .photoeditorsdk-simplebar-content-wrapper {\n      direction: inherit;\n      box-sizing: border-box !important;\n      position: relative;\n      display: block;\n      height: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */\n      width: auto;\n      visibility: visible;\n      overflow: auto; /* Scroll on this element otherwise element can't have a padding applied properly */\n      max-width: 100%; /* Not required for horizontal scroll to trigger */\n      max-height: 100%; /* Needed for vertical scroll to trigger */\n    }\n\n    .photoeditorsdk-simplebar-content:before,\n    .photoeditorsdk-simplebar-content:after {\n      content: ' ';\n      display: table;\n    }\n\n    .photoeditorsdk-simplebar-placeholder {\n      max-height: 100%;\n      max-width: 100%;\n      width: 100%;\n      pointer-events: none;\n    }\n\n    .photoeditorsdk-simplebar-height-auto-observer-wrapper {\n      box-sizing: inherit !important;\n      height: 100%;\n      width: 100%;\n      max-width: 1px;\n      position: relative;\n      float: left;\n      max-height: 1px;\n      overflow: hidden;\n      z-index: -1;\n      padding: 0;\n      margin: 0;\n      pointer-events: none;\n      flex-grow: inherit;\n      flex-shrink: 0;\n      flex-basis: 0;\n    }\n\n    .photoeditorsdk-simplebar-height-auto-observer {\n      box-sizing: inherit;\n      display: block;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1000%;\n      width: 1000%;\n      min-height: 1px;\n      min-width: 1px;\n      overflow: hidden;\n      pointer-events: none;\n      z-index: -1;\n    }\n\n    .photoeditorsdk-simplebar-track {\n      z-index: 1;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      pointer-events: none;\n      overflow: hidden;\n    }\n\n    [data-simplebar].photoeditorsdk-simplebar-dragging .photoeditorsdk-simplebar-track {\n      pointer-events: all;\n    }\n\n    .photoeditorsdk-simplebar-scrollbar {\n      position: absolute;\n      right: 2px;\n      width: 7px;\n      min-height: 10px;\n    }\n\n    .photoeditorsdk-simplebar-scrollbar:before {\n      position: absolute;\n      content: '';\n      background: "+t+";\n      border-radius: 7px;\n      left: 0;\n      right: 0;\n      opacity: 0;\n      transition: opacity 0.2s linear;\n    }\n\n    .photoeditorsdk-simplebar-track .photoeditorsdk-simplebar-scrollbar.photoeditorsdk-simplebar-visible:before {\n      /* When hovered, remove all transitions from drag handle */\n      opacity: 0.5;\n      transition: opacity 0s linear;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical {\n      top: 0;\n      width: 11px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical .photoeditorsdk-simplebar-scrollbar:before {\n      top: 2px;\n      bottom: 2px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical .photoeditorsdk-simplebar-scrollbar {\n      right: 0px;\n      width: 4px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal {\n      left: 0;\n      height: 11px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal .photoeditorsdk-simplebar-scrollbar:before {\n      height: 100%;\n      left: 2px;\n      right: 2px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal .photoeditorsdk-simplebar-scrollbar {\n      right: auto;\n      left: 0;\n      min-height: 0;\n      min-width: 10px;\n      width: auto;\n      top: 7px;\n      height: 4px;\n    }\n\n    /* Rtl support */\n    [data-simplebar-direction='rtl'] .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical {\n      right: auto;\n      left: 0;\n    }\n\n    .photoeditorsdk-hs-dummy-scrollbar-size {\n      direction: rtl;\n      position: fixed;\n      opacity: 0;\n      visibility: hidden;\n      height: 500px;\n      width: 500px;\n      overflow-y: hidden;\n      overflow-x: scroll;\n    }\n  "},t}(),zo=function(t){var e=void 0===t?{primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"}:t,n=e.primary,r=void 0===n?"#365afc":n,i=e.background,o=void 0===i?"#0B0B0B":i,a=e.foreground,s=void 0===a?"#FFFFFF":a,l="rgba(255, 255, 255, 0.90)",u="rgba(255, 255, 255, 0.60)",c="rgba(255, 255, 255, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:o,foreground:s,primary:r,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:"#333333",activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:l,outlinedPrimaryBackground:"#242424",outlinedPrimaryForeground:l,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:u,textPrimaryForeground:r,textSecondaryForeground:u,outlinedInactiveOverlayColor:"rgba(0, 0, 0, 0.3)",textInactiveOpacity:"0.5",hoverOverlayColor:"rgba(255, 255, 255, 0.08)"},checkbox:{background:"#333333",foreground:s,activeForeground:s,activeBackground:r,inactiveOpacity:"0.3",hoverOpacity:"0.8"},modal:{background:"#242424",bodyForeground:l,headerForeground:u,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#333333",foreground:l,activeBorderColor:r,activeOverlayColor:"rgba(89, 121, 252, 0.20)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:l,inactiveOverlayColor:"rgba(0, 0, 0, 0.3)",hoverOverlayColor:"rgba(255, 255, 255, 0.08)"},tabTitle:{foreground:u,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverBorderColor:u,borderColor:"#333333",caretColor:c,listBackground:"#333333",listBorderColor:"#333333",listItemHoverBackground:"#424242",listForeground:u,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",inactiveOpacity:"0.3"},textInput:{foreground:l,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:"#333333",inactiveOpacity:"0.3"},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:r,thumbBackground:"#171717",thumbBorderColor:r,inactiveOpacity:"0.3",hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:"0.3"},toolbar:{foreground:l,background:"#242424",activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:"#424242",foreground:l},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:"#333333",titleForeground:u,inputLabelForeground:u,inputLabelInactiveOpacity:"0.3"},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:l,borderColor:"none"},canvasActionBar:{background:"#424242",foreground:l,separatorColor:c},canvas:{background:"#0B0B0B",controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:"#333333",listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:"#424242"},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:s,background:"#0B0B0B"},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},Lo=function(t){var e=void 0===t?{primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"}:t,n=e.primary,r=void 0===n?"#1e47fb":n,i=e.background,o=void 0===i?"#FBFBFB":i,a=e.foreground,s=void 0===a?"#000000":a,l="rgba(0, 0, 0, 0.90)",u="rgba(0, 0, 0, 0.60)",c="rgba(0, 0, 0, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:o,foreground:s,primary:r,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:"#D4D4D4",activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:"#E6E6E6",outlinedPrimaryForeground:l,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:u,textPrimaryForeground:r,textSecondaryForeground:u,outlinedInactiveOverlayColor:"rgba(0, 0, 0, 0.3)",textInactiveOpacity:"0.5",hoverOverlayColor:"rgba(125, 125, 125, 0.12)"},checkbox:{background:"#D4D4D4",foreground:s,activeForeground:s,activeBackground:r,inactiveOpacity:"0.3",hoverOpacity:"0.8"},modal:{background:"#E6E6E6",bodyForeground:l,headerForeground:u,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#D4D4D4",foreground:l,activeBorderColor:r,activeOverlayColor:"rgba(30, 71, 251, 0.2)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:"rgba(0, 0, 0, 0.3)",hoverOverlayColor:"rgba(125, 125, 125, 0.12)"},tabTitle:{foreground:u,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverBorderColor:u,borderColor:"#D4D4D4",listBackground:"#D4D4D4",caretColor:c,listForeground:u,listBorderColor:"#D4D4D4",listItemHoverBackground:"#CCCCCC",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",inactiveOpacity:"0.3"},textInput:{foreground:l,hoverBorderColor:l,background:"transparent",borderColor:"#D4D4D4",inactiveOpacity:"0.3"},slider:{trackColor:"#CCCCCC",activeTrackColor:r,thumbBackground:"#EEEEEE",thumbBorderColor:r,inactiveOpacity:"0.3",hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:"0.3"},toolbar:{foreground:l,background:"#D4D4D4",activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:"#CCCCCC",foreground:l},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:"#EEEEEE",shadow:"none",separatorColor:"#D4D4D4",titleForeground:u,inputLabelForeground:u,inputLabelInactiveOpacity:"0.3"},mainCanvasActionBar:{background:"transparent",foreground:l,borderColor:"none"},canvasActionBar:{background:"#CCCCCC",foreground:l,separatorColor:c},canvas:{background:"#FBFBFB",controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:"#D4D4D4",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:"#CCCCCC"},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:s,background:"#FBFBFB"},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},No={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},Uo={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},Wo=function(){return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:230,padding:"16px 24px",marginBottom:0},advancedCard:{small:{height:166/3,width:166/3},medium:{height:87,width:87},large:{height:86,width:182}},advancedSpacer:8,basicCanvasOffset:23,basicUIToolbar:{openHeight:88,closeHeight:35},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:111,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:No,zIndex:Uo}},Ho=zo(),Go=Wo(),Vo=_(_({},Ho),{measurements:Go}),Zo=function(t,e){var n=function(t){return"light"===t?Lo:zo}(t);if(e&&e[t]){var r=e[t],i={primary:r.primary,background:r.background,foreground:r.foreground};return Io([n(Object.keys(i).reduce((function(t,e){var n;return i[e]?_(_({},t),((n={})[e]=i[e],n)):t}),{})),e[t]])}return n()||Ho},Xo=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],Yo={config:ln,locale:Fo,theme:Ho,measurements:Go},qo=function(){function t(){this.checkDefaultToolAvailability=function(t,e){return-1!==e.indexOf(t)},this.state=lr(Yo),this.events=new Ao,this.licenseChecker=null}return t.prototype.saveConfig=function(t){var e,n=this;t.mainCanvasActions&&4!==t.mainCanvasActions.length&&(t.mainCanvasActions.length=4);var r=Io([ln,t]);this.licenseChecker=new $e(r.license),this.licenseChecker.areCustomAssetsAllowed()||(r.sticker.enableCustomUpload=!1);var i,o,a=(i=r.language,(o=r.custom.languages)&&o[i]?Io([Mo(i),o[i]]):Mo(i)||Fo),s=Zo(r.theme,r.custom.themes),l=function(t){var e=Wo();if(t){var n={};return Object.keys(t).forEach((function(e){-1!==Xo.indexOf(e)&&(n[e]=t[e])})),Io([e,n])}return e}(r.custom.measurements),u=r.library.provider;delete r.language,delete r.custom.languages,delete r.custom.themes,delete r.library.provider;var c=r.tools.reduce((function(t,e){return T(t,"object"==typeof e?e:[e])}),[]);c.length||(console.error("Empty list input for tools"),c=sn.reduce((function(t,e){return T(t,"object"==typeof e?e:[e])}),[])),c=c.filter((function(t){return n.licenseChecker.isToolAllowed(t)})),this.checkDefaultToolAvailability(r.defaultTool,c)||(this.licenseChecker.isToolAllowed(r.defaultTool)&&console.warn("Configured default tool "+r.defaultTool+" is not a part of configured list of tools: ["+c.join(" ")+"]"),e=k(c,1),r.defaultTool=e[0]),r.tools=c,this.state.config=r,this.state.locale=a,this.state.theme=s,this.state.measurements=l,Bo.addScrollStyles(this.state.theme.scrollbar.handleColor);var f=this.buildCustomAssetsConfig();return this.assetProvider=new re(f,this.licenseChecker.areCustomAssetsAllowed()),this.loadThemeFont(),u},Object.defineProperty(t.prototype,"config",{get:function(){return this.state.config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.state.locale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.state.theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measurements",{get:function(){return this.state.measurements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tools",{get:function(){return this.config.tools.reduce((function(t,e){return"string"==typeof e?T(t,[e]):T(t,[""],e)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTool",{get:function(){return this.config.defaultTool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOrderDefault",{get:function(){return"default"===this.config.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLayoutAdvanced",{get:function(){return"advanced"===this.config.layout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayCloseButton",{get:function(){return-1!==this.config.mainCanvasActions.indexOf(F.CLOSE)},enumerable:!0,configurable:!0}),t.prototype.loadThemeFont=function(){var t=this.theme.typography;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])},t.prototype.buildCustomAssetsConfig=function(){var t=this.tools,e=Oi(this.state.config),n=this.state.config.assetBaseUrl,r=this.state.theme,i=-1!==t.indexOf(j.FILTER)?e[j.FILTER]:void 0,o=-1!==t.indexOf(j.FOCUS)?e[j.FOCUS]:void 0,a=-1!==t.indexOf(j.ADJUSTMENT)?e[j.ADJUSTMENT]:void 0;return{basePath:n,theme:r,filter:i,focus:o,sticker:-1!==t.indexOf(j.STICKER)?e[j.STICKER]:void 0,frame:-1!==t.indexOf(j.FRAME)?e[j.FRAME]:void 0,overlay:-1!==t.indexOf(j.OVERLAY)?e[j.OVERLAY]:void 0,transform:-1!==t.indexOf(j.TRANSFORM)?e[j.TRANSFORM]:void 0,text:-1!==t.indexOf(j.TEXT)?e[j.TEXT]:void 0,adjustment:a,textdesign:-1!==t.indexOf(j.TEXT_DESIGN)?e[j.TEXT_DESIGN]:void 0}},w([ui],t.prototype,"saveConfig",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"theme",null),w([dr],t.prototype,"measurements",null),w([dr],t.prototype,"tools",null),w([dr],t.prototype,"defaultTool",null),w([dr],t.prototype,"isOrderDefault",null),w([dr],t.prototype,"isLayoutAdvanced",null),w([dr],t.prototype,"displayCloseButton",null),t}(),Ko=function(){function t(t){this.editor=t}return t.prototype.setBackgroundImage=function(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:it.NORMAL,opacity:1})},t.prototype.getchildren=function(){return this.container.getChildren()},t.prototype.addImageToContainer=function(){var t=this;return new Promise((function(e,n){var r=t.editor.activeStore.image;if(function(t){return t instanceof HTMLImageElement}(r))t.setBackgroundImage(r),e();else{var i=t.editor.libraryStore.getRawUrl(r);t.getImageElement(i).then((function(n){t.setBackgroundImage(n),e()})).catch((function(t){n({identifier:"imageLoading",message:t.message})}))}}))},t.prototype.getImageElement=function(t){var e=this;return new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(t){r(t)})),i.crossOrigin=e.editor.configStore.config.engine.crossOrigin,i.src=t}))},t.prototype.getImgageContainerId=function(){return this.container?this.container.getID():""},Object.defineProperty(t.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),t}(),Qo=function(){function t(t){var e=this;this.applyNewImageTransform=function(){var t=e.editor.engineMediator.image.container.getBounds(),n=t.size,r=t.width,i=t.height,o=e.container;o.setTransform(E.IDENTITY),o.setResolution(n),o.setPivot(.5,.5),o.setPosition({x:r/2,y:i/2})},this.editor=t}return Object.defineProperty(t.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.engine.getOutputContainer()},enumerable:!0,configurable:!0}),t}(),Jo=/^\s+|\s+$/g,$o=/^[-+]0x[0-9a-f]+$/i,ta=/^0b[01]+$/i,ea=/^0o[0-7]+$/i,na=parseInt,ra="object"==typeof d&&d&&d.Object===Object&&d,ia="object"==typeof self&&self&&self.Object===Object&&self,oa=ra||ia||Function("return this")(),aa=Object.prototype.toString,sa=Math.max,la=Math.min,ua=function(){return oa.Date.now()};function ca(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function d(t){return u=t,s=setTimeout(g,e),c?h(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=ua();if(y(t))return m(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?la(n,o-(t-u)):n}(t))}function m(t){return s=void 0,p&&r?h(t):(r=i=void 0,a)}function v(){var t=ua(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return d(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=pa(e)||0,fa(n)&&(c=!!n.leading,o=(f="maxWait"in n)?sa(pa(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:m(ua())},v}function fa(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function pa(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==aa.call(t)}(t))return NaN;if(fa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=fa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Jo,"");var n=ta.test(t);return n||ea.test(t)?na(t.slice(2),n?2:8):$o.test(t)?NaN:+t}var ha=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return fa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ca(t,e,{leading:r,maxWait:e,trailing:i})},da=/^\s+|\s+$/g,ya=/^[-+]0x[0-9a-f]+$/i,ga=/^0b[01]+$/i,ma=/^0o[0-7]+$/i,va=parseInt,_a="object"==typeof d&&d&&d.Object===Object&&d,ba="object"==typeof self&&self&&self.Object===Object&&self,wa=_a||ba||Function("return this")(),xa=Object.prototype.toString,Oa=Math.max,Sa=Math.min,ka=function(){return wa.Date.now()};function Ta(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ca(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==xa.call(t)}(t))return NaN;if(Ta(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ta(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(da,"");var n=ga.test(t);return n||ma.test(t)?va(t.slice(2),n?2:8):ya.test(t)?NaN:+t}var Ea=function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function d(t){return u=t,s=setTimeout(g,e),c?h(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=ka();if(y(t))return m(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?Sa(n,o-(t-u)):n}(t))}function m(t){return s=void 0,p&&r?h(t):(r=i=void 0,a)}function v(){var t=ka(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return d(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Ca(e)||0,Ta(n)&&(c=!!n.leading,o=(f="maxWait"in n)?Oa(Ca(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:m(ka())},v},Ra=/^\[object .+?Constructor\]$/,Da="object"==typeof d&&d&&d.Object===Object&&d,Pa="object"==typeof self&&self&&self.Object===Object&&self,Ia=Da||Pa||Function("return this")();var Aa,Fa=Array.prototype,ja=Function.prototype,Ma=Object.prototype,Ba=Ia["__core-js_shared__"],za=(Aa=/[^.]+$/.exec(Ba&&Ba.keys&&Ba.keys.IE_PROTO||""))?"Symbol(src)_1."+Aa:"",La=ja.toString,Na=Ma.hasOwnProperty,Ua=Ma.toString,Wa=RegExp("^"+La.call(Na).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ha=Fa.splice,Ga=Ja(Ia,"Map"),Va=Ja(Object,"create");function Za(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xa(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ya(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qa(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function Ka(t){return!(!ts(t)||(e=t,za&&za in e))&&(function(t){var e=ts(t)?Ua.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?Wa:Ra).test(function(t){if(null!=t){try{return La.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function Qa(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ja(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ka(n)?n:void 0}function $a(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new($a.Cache||Ya),n}function ts(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}Za.prototype.clear=function(){this.__data__=Va?Va(null):{}},Za.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Za.prototype.get=function(t){var e=this.__data__;if(Va){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Na.call(e,t)?e[t]:void 0},Za.prototype.has=function(t){var e=this.__data__;return Va?void 0!==e[t]:Na.call(e,t)},Za.prototype.set=function(t,e){return this.__data__[t]=Va&&void 0===e?"__lodash_hash_undefined__":e,this},Xa.prototype.clear=function(){this.__data__=[]},Xa.prototype.delete=function(t){var e=this.__data__,n=qa(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ha.call(e,n,1),!0)},Xa.prototype.get=function(t){var e=this.__data__,n=qa(e,t);return n<0?void 0:e[n][1]},Xa.prototype.has=function(t){return qa(this.__data__,t)>-1},Xa.prototype.set=function(t,e){var n=this.__data__,r=qa(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Ya.prototype.clear=function(){this.__data__={hash:new Za,map:new(Ga||Xa),string:new Za}},Ya.prototype.delete=function(t){return Qa(this,t).delete(t)},Ya.prototype.get=function(t){return Qa(this,t).get(t)},Ya.prototype.has=function(t){return Qa(this,t).has(t)},Ya.prototype.set=function(t,e){return Qa(this,t).set(t,e),this},$a.Cache=Ya;var es,ns=$a,rs=[],is="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(es||(es={}));var os,as=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),ss=function(t){return t instanceof SVGElement&&"getBBox"in t},ls=function(t){if(ss(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},us=function(t){var e,n,r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},cs="undefined"!=typeof window?window:{},fs=new Map,ps=/auto|scroll/,hs=/^tb|vertical/,ds=/msie|trident/i.test(cs.navigator&&cs.navigator.userAgent),ys=function(t){return parseFloat(t||"0")},gs=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?e:t)||0,blockSize:(n?t:e)||0})},ms=Object.freeze({devicePixelContentBoxSize:gs(),borderBoxSize:gs(),contentBoxSize:gs(),contentRect:new as(0,0,0,0)}),vs=function(t){if(fs.has(t))return fs.get(t);if(ls(t))return fs.set(t,ms),ms;var e=getComputedStyle(t),n=ss(t)&&t.ownerSVGElement&&t.getBBox(),r=!ds&&"border-box"===e.boxSizing,i=hs.test(e.writingMode||""),o=!n&&ps.test(e.overflowY||""),a=!n&&ps.test(e.overflowX||""),s=n?0:ys(e.paddingTop),l=n?0:ys(e.paddingRight),u=n?0:ys(e.paddingBottom),c=n?0:ys(e.paddingLeft),f=n?0:ys(e.borderTopWidth),p=n?0:ys(e.borderRightWidth),h=n?0:ys(e.borderBottomWidth),d=c+l,y=s+u,g=(n?0:ys(e.borderLeftWidth))+p,m=f+h,v=a?t.offsetHeight-m-t.clientHeight:0,_=o?t.offsetWidth-g-t.clientWidth:0,b=r?d+g:0,w=r?y+m:0,x=n?n.width:ys(e.width)-b-_,O=n?n.height:ys(e.height)-w-v,S=x+d+_+g,k=O+y+v+m,T=Object.freeze({devicePixelContentBoxSize:gs(Math.round(x*devicePixelRatio),Math.round(O*devicePixelRatio),i),borderBoxSize:gs(S,k,i),contentBoxSize:gs(x,O,i),contentRect:new as(c,s,x,O)});return fs.set(t,T),T},_s=function(t,e){var n=vs(t),r=n.borderBoxSize,i=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case es.DEVICE_PIXEL_CONTENT_BOX:return o;case es.BORDER_BOX:return r;default:return i}},bs=function(t){var e=vs(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},ws=function(t){if(ls(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},xs=function(){var t=1/0,e=[];rs.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new bs(e.target),i=ws(e.target);r.push(n),e.lastReportedSize=_s(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++){(0,r[n])()}return t},Os=function(t){fs.clear(),rs.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(ws(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},Ss=function(){var t,e=0;for(Os(e);rs.some((function(t){return t.activeTargets.length>0}));)e=xs(),Os(e);return rs.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:is}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=is),window.dispatchEvent(t)),e>0},ks=[],Ts=function(t){if(!os){var e=0,n=document.createTextNode("");new MutationObserver((function(){return ks.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),os=function(){n.textContent=""+(e?e--:e++)}}ks.push(t),os()},Cs=0,Es={attributes:!0,characterData:!0,childList:!0,subtree:!0},Rs=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ds=!1,Ps=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e,n=this;Ds||(Ds=!0,e=function(){var e=!1;try{e=Ss()}finally{if(Ds=!1,!Cs)return;e?n.run(60):t?n.run(t-1):n.start()}},Ts((function(){requestAnimationFrame(e)})))},t.prototype.schedule=function(){this.stop(),this.run(12)},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Es)};document.body?e():cs.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Rs.forEach((function(e){return cs.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Rs.forEach((function(e){return cs.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),Is=function(t){!Cs&&t>0&&Ps.start(),!(Cs+=t)&&Ps.stop()},As=function(){function t(t,e){this.target=t,this.observedBox=e||es.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=_s(this.target,this.observedBox);return t=this.target,ss(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Fs=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},js=new Map,Ms=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Bs=function(){function t(){}return t.connect=function(t,e){var n=new Fs(t,e);rs.push(n),js.set(t,n)},t.observe=function(t,e,n){if(js.has(t)){var r=js.get(t);Ms(r.observationTargets,e)<0&&(r.observationTargets.push(new As(e,n&&n.box)),Is(1),Ps.schedule())}},t.unobserve=function(t,e){if(js.has(t)){var n=js.get(t),r=Ms(n.observationTargets,e);r>=0&&(n.observationTargets.splice(r,1),Is(-1))}},t.disconnect=function(t){if(js.has(t)){var e=js.get(t);rs.splice(rs.indexOf(e),1),js.delete(t),Is(-e.observationTargets.length)}},t}(),zs=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Bs.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!us(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Bs.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!us(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Bs.unobserve(this,t)},t.prototype.disconnect=function(){Bs.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Ls=!("undefined"==typeof window||!window.document||!window.document.createElement),Ns=function(){if("undefined"==typeof document)return 0;if(te())return window.innerWidth-document.documentElement.clientWidth;var t=document.body,e=document.createElement("div"),n=e.style;n.position="fixed",n.left="0",n.visibility="hidden",n.overflowY="scroll",t.appendChild(e);var r=e.getBoundingClientRect().right;return t.removeChild(e),r},Us="photoeditorsdk-simplebar",Ws=function(){function t(e,n){var r=this;this.minScrollbarWidth=20,this.initDOM=function(){if(Array.prototype.filter.call(r.el.children,(function(t){return t.classList.contains(r.classNames.wrapper)})).length)r.wrapperEl=r.el.querySelector("."+r.classNames.wrapper),r.contentWrapperEl=r.el.querySelector("."+r.classNames.contentWrapper),r.offsetEl=r.el.querySelector("."+r.classNames.offset),r.maskEl=r.el.querySelector("."+r.classNames.mask),r.contentEl=r.el.querySelector("."+r.classNames.contentEl),r.placeholderEl=r.el.querySelector("."+r.classNames.placeholder),r.heightAutoObserverWrapperEl=r.el.querySelector("."+r.classNames.heightAutoObserverWrapperEl),r.heightAutoObserverEl=r.el.querySelector("."+r.classNames.heightAutoObserverEl),r.axis.x.track.el=r.el.querySelector("."+r.classNames.track+"."+r.classNames.horizontal),r.axis.y.track.el=r.el.querySelector("."+r.classNames.track+"."+r.classNames.vertical);else{for(r.wrapperEl=document.createElement("div"),r.contentWrapperEl=document.createElement("div"),r.offsetEl=document.createElement("div"),r.maskEl=document.createElement("div"),r.contentEl=document.createElement("div"),r.placeholderEl=document.createElement("div"),r.heightAutoObserverWrapperEl=document.createElement("div"),r.heightAutoObserverEl=document.createElement("div"),r.wrapperEl.classList.add(r.classNames.wrapper),r.contentWrapperEl.classList.add(r.classNames.contentWrapper),r.offsetEl.classList.add(r.classNames.offset),r.maskEl.classList.add(r.classNames.mask),r.contentEl.classList.add(r.classNames.contentEl),r.placeholderEl.classList.add(r.classNames.placeholder),r.heightAutoObserverWrapperEl.classList.add(r.classNames.heightAutoObserverWrapperEl),r.heightAutoObserverEl.classList.add(r.classNames.heightAutoObserverEl);r.el.firstChild;)r.contentEl.appendChild(r.el.firstChild);r.contentWrapperEl.appendChild(r.contentEl),r.offsetEl.appendChild(r.contentWrapperEl),r.maskEl.appendChild(r.offsetEl),r.heightAutoObserverWrapperEl.appendChild(r.heightAutoObserverEl),r.wrapperEl.appendChild(r.heightAutoObserverWrapperEl),r.wrapperEl.appendChild(r.maskEl),r.wrapperEl.appendChild(r.placeholderEl),r.el.appendChild(r.wrapperEl)}if(!r.axis.x.track.el||!r.axis.y.track.el){var t=document.createElement("div"),e=document.createElement("div");t.classList.add(r.classNames.track),e.classList.add(r.classNames.scrollbar),t.appendChild(e),r.axis.x.track.el=t.cloneNode(!0),r.axis.x.track.el.classList.add(r.classNames.horizontal),r.axis.y.track.el=t.cloneNode(!0),r.axis.y.track.el.classList.add(r.classNames.vertical),r.el.appendChild(r.axis.x.track.el),r.el.appendChild(r.axis.y.track.el)}r.axis.x.scrollbar.el=r.axis.x.track.el.querySelector("."+r.classNames.scrollbar),r.axis.y.scrollbar.el=r.axis.y.track.el.querySelector("."+r.classNames.scrollbar),r.options.autoHide||(r.axis.x.scrollbar.el.classList.add(r.classNames.visible),r.axis.y.scrollbar.el.classList.add(r.classNames.visible)),r.el.setAttribute("data-simplebar","init")},this.initListeners=function(){r.options.autoHide&&r.el.addEventListener("mouseenter",r.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(t){r.el.addEventListener(t,r.onPointerEvent,{capture:!0,passive:!0})})),r.el.addEventListener("mousemove",r.onMouseMove),r.el.addEventListener("mouseleave",r.onMouseLeave),r.contentWrapperEl.addEventListener("scroll",r.onScroll),window.addEventListener("resize",r.onWindowResize),r.resizeObserver=new zs(r.recalculate),r.resizeObserver.observe(r.el),r.resizeObserver.observe(r.contentEl)},this.recalculate=function(){var t=r.heightAutoObserverEl.offsetHeight<=1,e=r.heightAutoObserverEl.offsetWidth<=1;r.elStyles=window.getComputedStyle(r.el),r.isRtl="rtl"===r.elStyles.direction,r.contentEl.style.padding=r.elStyles.paddingTop+" "+r.elStyles.paddingRight+" "+r.elStyles.paddingBottom+" "+r.elStyles.paddingLeft,r.wrapperEl.style.margin="-"+r.elStyles.paddingTop+" -"+r.elStyles.paddingRight+" -"+r.elStyles.paddingBottom+" -"+r.elStyles.paddingLeft,r.contentWrapperEl.style.height=t?"auto":"100%",r.placeholderEl.style.width=e?r.contentEl.offsetWidth+"px":"auto",r.placeholderEl.style.height=r.contentEl.scrollHeight+"px",r.axis.x.isOverflowing=r.contentWrapperEl.scrollWidth>r.contentWrapperEl.offsetWidth,r.axis.y.isOverflowing=r.contentWrapperEl.scrollHeight>r.contentWrapperEl.offsetHeight,r.axis.x.isOverflowing="hidden"!==r.elStyles.overflowX&&r.axis.x.isOverflowing,r.axis.y.isOverflowing="hidden"!==r.elStyles.overflowY&&r.axis.y.isOverflowing,r.axis.x.forceVisible="x"===r.options.forceVisible||!0===r.options.forceVisible,r.axis.y.forceVisible="y"===r.options.forceVisible||!0===r.options.forceVisible,r.hideNativeScrollbar(),r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.axis.x.scrollbar.size=r.getScrollbarSize("x"),r.axis.y.scrollbar.size=r.getScrollbarSize("y"),r.axis.x.scrollbar.el.style.width=r.axis.x.scrollbar.size+"px",r.axis.y.scrollbar.el.style.height=r.axis.y.scrollbar.size+"px",r.positionScrollbar("x"),r.positionScrollbar("y"),r.toggleTrackVisibility("x"),r.toggleTrackVisibility("y")},this.getScrollbarSize=function(t){void 0===t&&(t="y");var e,n=r.scrollbarWidth?r.contentWrapperEl[r.axis[t].scrollSizeAttr]:r.contentWrapperEl[r.axis[t].scrollSizeAttr]-r.minScrollbarWidth,i=r.axis[t].track.rect[r.axis[t].sizeAttr];if(r.axis[t].isOverflowing){var o=i/n;return e=Math.max(~~(o*i),r.options.scrollbarMinSize),r.options.scrollbarMaxSize&&(e=Math.min(e,r.options.scrollbarMaxSize)),e}},this.positionScrollbar=function(e){void 0===e&&(e="y");var n=r.contentWrapperEl[r.axis[e].scrollSizeAttr],i=r.axis[e].track.rect[r.axis[e].sizeAttr],o=parseInt(r.elStyles[r.axis[e].sizeAttr],10),a=r.axis[e].scrollbar,s=r.contentWrapperEl[r.axis[e].scrollOffsetAttr],l=(s="x"===e&&r.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-s:s)/(n-o),u=~~((i-a.size)*l);u="x"===e&&r.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?u+(i-a.size):u,a.el.style.transform="x"===e?"translate3d("+u+"px, 0, 0)":"translate3d(0, "+u+"px, 0)"},this.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=r.axis[t].track.el,n=r.axis[t].scrollbar.el;r.axis[t].isOverflowing||r.axis[t].forceVisible?(e.style.visibility="visible",r.contentWrapperEl.style[r.axis[t].overflowAttr]="scroll"):(e.style.visibility="hidden",r.contentWrapperEl.style[r.axis[t].overflowAttr]="hidden"),n.style.display=r.axis[t].isOverflowing?"block":"none"},this.onScroll=function(){r.scrollXTicking||(window.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(window.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0)},this.scrollX=function(){r.axis.x.isOverflowing&&(r.showScrollbar("x"),r.positionScrollbar("x")),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&(r.showScrollbar("y"),r.positionScrollbar("y")),r.scrollYTicking=!1},this.onMouseEnter=function(){r.showScrollbar("x"),r.showScrollbar("y")},this.onMouseMove=function(t){r.mouseX=t.clientX,r.mouseY=t.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseMoveForAxis=function(t){void 0===t&&(t="y"),r.axis[t].track.rect=r.axis[t].track.el.getBoundingClientRect(),r.axis[t].scrollbar.rect=r.axis[t].scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis[t].scrollbar.rect)?r.axis[t].scrollbar.el.classList.add(r.classNames.hover):r.axis[t].scrollbar.el.classList.remove(r.classNames.hover),r.isWithinBounds(r.axis[t].track.rect)?(r.showScrollbar(t),r.axis[t].track.el.classList.add(r.classNames.hover)):r.axis[t].track.el.classList.remove(r.classNames.hover)},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this.onWindowResize=function(){r.scrollbarWidth=Ns(),r.hideNativeScrollbar()},this.hideScrollbars=function(){r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.track.rect)||(r.axis.y.scrollbar.el.classList.remove(r.classNames.visible),r.axis.y.isVisible=!1),r.isWithinBounds(r.axis.x.track.rect)||(r.axis.x.scrollbar.el.classList.remove(r.classNames.visible),r.axis.x.isVisible=!1)},this.onPointerEvent=function(t){var e,n;r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(n=r.isWithinBounds(r.axis.x.scrollbar.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(e=r.isWithinBounds(r.axis.y.scrollbar.rect)),(e||n)&&(t.preventDefault(),t.stopPropagation(),"mousedown"===t.type&&(e&&r.onDragStart(t,"y"),n&&r.onDragStart(t,"x")))},this.drag=function(e){var n=r.axis[r.draggedAxis],i=n.track,o=n.scrollbar,a=i.rect[r.axis[r.draggedAxis].sizeAttr];e.preventDefault(),e.stopPropagation();var s=(("y"===r.draggedAxis?e.pageY:e.pageX)-i.rect[r.axis[r.draggedAxis].offsetAttr]-r.axis[r.draggedAxis].dragOffset)/i.rect[r.axis[r.draggedAxis].sizeAttr]*r.contentWrapperEl[r.axis[r.draggedAxis].scrollSizeAttr];"x"===r.draggedAxis&&(s=r.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?s-(a+o.size):s,s=r.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-s:s),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=s},this.onEndDrag=function(t){t.preventDefault(),t.stopPropagation(),r.el.classList.remove(r.classNames.dragging),document.removeEventListener("mousemove",r.drag,!0),document.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=window.setTimeout((function(){document.removeEventListener("click",r.preventClick,!0),document.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null}))},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=e,this.options=_(_({},t.defaultOptions),n),this.classNames=_(_({},t.defaultOptions.classNames),this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,this.el.SimpleBar||(this.recalculate=ha(this.recalculate,64),this.onMouseMove=ha(this.onMouseMove,64),this.hideScrollbars=Ea(this.hideScrollbars,this.options.timeout),this.onWindowResize=Ea(this.onWindowResize,64,{leading:!0}),t.getRtlHelpers=ns(t.getRtlHelpers),this.init())}return t.getRtlHelpers=function(){var e=document.createElement("div");e.innerHTML='<div class="photoeditorsdk-hs-dummy-scrollbar-size"><div style="height: 200% width: 200% margin: 10px 0"></div></div>';var n=e.firstElementChild;document.body.appendChild(n);var r=n.firstElementChild;n.scrollLeft=0;var i=t.getOffset(n),o=t.getOffset(r);n.scrollLeft=999;var a=t.getOffset(r);return{isRtlScrollingInverted:i.left!==o.left&&o.left-a.left!=0,isRtlScrollbarInverted:i.left!==o.left}},t.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver((function(e){e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")&&!e.SimpleBar?new t(e,t.getElOptions(e)):Array.prototype.forEach.call(e.querySelectorAll("[data-simplebar]"),(function(e){e.SimpleBar||new t(e,t.getElOptions(e))})))})),Array.prototype.forEach.call(e.removedNodes,(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")&&t.SimpleBar?t.SimpleBar.unMount():Array.prototype.forEach.call(t.querySelectorAll("[data-simplebar]"),(function(t){t.SimpleBar&&t.SimpleBar.unMount()})))}))}))})),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.scroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},t.getElOptions=function(t){return Array.prototype.reduce.call(t.attributes,(function(t,e){var n=e.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,(function(t,e){return e.toUpperCase()}));switch(e.value){case"true":t[r]=!0;break;case"false":t[r]=!1;break;case void 0:t[r]=!0;break;default:t[r]=e.value}}return t}),{})},t.removeObserver=function(){this.globalObserver.disconnect()},t.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(e){e.SimpleBar||new t(e,t.getElOptions(e))}))},t.getOffset=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft)}},t.prototype.init=function(){this.el.SimpleBar=this,Ls&&(this.initDOM(),this.scrollbarWidth=Ns(),this.recalculate(),this.initListeners())},t.prototype.hideNativeScrollbar=function(){if(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,!this.scrollbarWidth){var t=this.isRtl?"paddingLeft":"paddingRight";this.contentWrapperEl.style[t]=this.axis.y.isOverflowing||this.axis.y.forceVisible?this.minScrollbarWidth+"px":0,this.contentWrapperEl.style.paddingBottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?this.minScrollbarWidth+"px":0}},t.prototype.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.el.classList.remove(this.classNames.hover),this.axis[t].scrollbar.el.classList.remove(this.classNames.hover)},t.prototype.showScrollbar=function(t){void 0===t&&(t="y");var e=this.axis[t].scrollbar.el;this.axis[t].isVisible||(e.classList.add(this.classNames.visible),this.axis[t].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},t.prototype.onDragStart=function(t,e){void 0===e&&(e="y");var n=this.axis[e].scrollbar.el,r="y"===e?t.pageY:t.pageX;this.axis[e].dragOffset=r-n.getBoundingClientRect()[this.axis[e].offsetAttr],this.draggedAxis=e,this.el.classList.add(this.classNames.dragging),document.addEventListener("mousemove",this.drag,!0),document.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(document.addEventListener("click",this.preventClick,!0),document.addEventListener("dblclick",this.preventClick,!0)):(window.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var t=this;this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(e){t.el.removeEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})})),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},t.prototype.unMount=function(){this.removeListeners(),this.el.SimpleBar=null},t.prototype.isChildNode=function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))},t.prototype.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},t.defaultOptions={autoHide:!0,forceVisible:!1,classNames:{contentEl:Us+"-content",contentWrapper:Us+"-content-wrapper",offset:Us+"-offset",mask:Us+"-mask",wrapper:Us+"-wrapper",placeholder:Us+"-placeholder",scrollbar:Us+"-scrollbar",track:Us+"-track",heightAutoObserverWrapperEl:Us+"-height-auto-observer-wrapper",heightAutoObserverEl:Us+"-height-auto-observer",visible:Us+"-visible",horizontal:Us+"-horizontal",vertical:Us+"-vertical",hover:Us+"-hover",dragging:Us+"-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},t}();Ls&&Ws.initHtmlApi();var Hs,Gs=function(){function t(t){var e=t.license,n=t.assetProvider,r=t.crossOrigin;this.crossOrigin=r,this.engine=new Je({license:e,crossOrigin:r,assetProvider:n,downscaleOptions:{maxDimensions:{width:100,height:100}}})}return t.isImageElement=function(t){return t instanceof HTMLImageElement},t.prototype.getAllFilterPreviewThumbnails=function(t){var e=this;return new Promise((function(n,r){var i={};t.reduce((function(t,n){return x(e,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return(e=r.sent()).identifier&&(i[e.identifier]=e.imageData),[2,this.getFilterPreviewThumbnail(n)]}}))}))}),Promise.resolve({identifier:"",imageData:""})).then((function(t){i[t.identifier]=t.imageData,n(i)})).catch((function(t){r(t)}))}))},t.prototype.getFilterPreviewThumbnail=function(t){var e=this,n=t.identifier,r=t.isDuotone;return""!==n?(this.effect&&(this.engine.removeEffect(this.effect),this.effect.getIndexInParent()||(this.effect=void 0)),new Promise(r?function(t,r){e.engine.addDuoToneFilterFromAssets(n,e.container).then((function(i){i.setProperties({colorIntensity:.5}),e.effect=i,e.engine.export(X.DATA_URL,Y.PNG,.2).then((function(e){t({identifier:n,imageData:e})})).catch((function(t){r(t)}))})).catch((function(t){r(t)}))}:function(t,r){e.engine.addLUTFilterFromAssets(n,e.container).then((function(i){i.setProperties({intensity:1}),e.effect=i,e.engine.export(X.DATA_URL,Y.PNG,.2).then((function(e){t({identifier:n,imageData:e})})).catch((function(t){r(t)}))})).catch((function(t){r(t)}))})):new Promise((function(t){return t({identifier:"",imageData:""})}))},t.prototype.addImageToContainer=function(e){var n=this;return new Promise((function(r,i){var o;t.isImageElement(e)?(o=e,n.setBackgroundImage(o),r()):n.getImageElement(e).then((function(t){o=t,n.setBackgroundImage(o),r()})).catch((function(t){i({identifier:"imageLoading",message:t.message})}))}))},t.prototype.getImageElement=function(t){var e=this;return new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(t){r(t)})),i.crossOrigin=e.crossOrigin,i.src=t}))},t.prototype.setBackgroundImage=function(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:it.NORMAL,opacity:1});var e=this.container.getBounds().size;this.engine.getOutputContainer().setResolution(e)},t}(),Vs=function(t,e){return new Promise((function(n,r){var i=new Image;i.onload=function(){n(i)},i.onerror=function(){r(new Error("Failed to load image with src:"+t))},i.crossOrigin=e,i.src=t}))},Zs=function(t,e){return new Promise((function(n,r){(function(t,e){return new Promise((function(n,r){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){"string"==typeof e.result&&"data:image"===e.result.substr(0,10)?n(e.result):r(new Error("The image could not be loaded from "+t))},e.onerror=function(t){r(t)},e.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.withCredentials="use-credentials"===e,i.send()}))})(t,e).then((function(t){var e=new Image;e.addEventListener("load",(function(){n(e)})),e.src=t})).catch((function(){Vs(t,e).then((function(t){return n(t)})).catch((function(t){r(t)}))}))}))},Xs=function(t){var e=t.url,n=t.image,r=t.crossOrigin,i=void 0===r?"anonymous":r;return x(void 0,void 0,void 0,(function(){return O(this,(function(t){try{return n&&n.src&&"data:"===n.src.substr(0,5)||n&&n.src&&n.src.includes(".svg")?[2,n]:"string"==typeof e&&"data:"===e.substr(0,5)||"string"==typeof e&&e.includes(".svg")?[2,Vs(e,i)]:[2,Zs(e||n.src,i)]}catch(t){throw new Error(t)}return[2]}))}))},Ys={tool:null,isWebcam:!1,image:""},qs=function(){function t(t){var e=this;this.setImage=function(t){return x(e,void 0,void 0,(function(){var e,n,r;return O(this,(function(i){switch(i.label){case 0:return e=this.editor.configStore.config.engine.crossOrigin,"string"!=typeof t?[3,2]:(n=this.state,[4,Xs({url:ee(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})]);case 1:n.image=i.sent(),i.label=2;case 2:return t instanceof HTMLImageElement?(r=this.state,[4,Xs({image:t,crossOrigin:e})]):[3,4];case 3:r.image=i.sent(),i.label=4;case 4:return this.isWebcam&&(this.state.isWebcam=!1),[2]}}))}))},this.newImage=function(t){e.editor.init(t)},this.editor=t,this.state=lr(Ys)}return t.prototype.selectTool=function(t,e){void 0===e&&(e=!1);var n=this.editor.configStore.licenseChecker;if(t=this.state.tool===t&&e?null:t,n&&n.isToolAllowed(t))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,t){case j.TEXT:this.editor.spriteStore.textToolStore.addOrselect();break;case j.TEXT_DESIGN:this.editor.spriteStore.textDesignToolStore.addOrselect();break;case j.BRUSH:this.editor.brushToolStore.initSize();break;case j.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop()}},t.prototype.selectWebcam=function(t){this.state.isWebcam=t},Object.defineProperty(t.prototype,"webcamLabel",{get:function(){return this.editor.libraryStore.locale.controls.buttonWebcamClose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tool",{get:function(){return this.state.tool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWebcam",{get:function(){return this.state.isWebcam},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.state.image},enumerable:!0,configurable:!0}),w([ui],t.prototype,"selectTool",null),w([ui],t.prototype,"selectWebcam",null),w([ui],t.prototype,"setImage",void 0),w([ui],t.prototype,"newImage",void 0),w([dr],t.prototype,"webcamLabel",null),w([dr],t.prototype,"tool",null),w([dr],t.prototype,"isWebcam",null),w([dr],t.prototype,"image",null),t}(),Ks={height:150,width:150},Qs=function(){function t(e){this.canvasClickDisabled=lr.box(!1),this.editor=e,this.state=lr(t.initialState)}return t.prototype.setCanvasElement=function(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.updateCanvasDimensions(),this.editor.init(this.editor.configStore.config.image)},t.prototype.updateCanvasDimensions=function(){var t=Nl.devicePixelRatio;this.canvas.width=this.canvasSize.width*t,this.canvas.height=this.canvasSize.height*t,this.canvas.style.width=this.canvasSize.width+"px",this.canvas.style.height=this.canvasSize.height+"px"},t.prototype.saveDimensions=function(t){var e=t.height,n=t.width,r=t.render,i=this.editor.configStore.isLayoutAdvanced?0:this.editor.configStore.measurements.basicCanvasOffset;e-i>Ks.height&&n>Ks.width&&(this.state.canvasSize.height=e-i,this.state.canvasSize.width=n,r&&this.editor.resize())},t.prototype.disableCanvasClick=function(){this.canvasClickDisabled.set(!0)},t.prototype.enableCanvasClick=function(){this.canvasClickDisabled.set(!1)},Object.defineProperty(t.prototype,"isCanvasClickable",{get:function(){return!this.canvasClickDisabled.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasSize",{get:function(){return this.state.canvasSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeVector",{get:function(){return R.fromSize(this.state.canvasSize)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeVectorMagnitude",{get:function(){return this.sizeVector.magnitude},enumerable:!0,configurable:!0}),t.prototype.getContainersAtPreviewPoint=function(t){var e=this,n=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((function(t){return t.getID()})).filter((function(t){return t!==e.editor.engineMediator.image.getImgageContainerId()}));this.editor.spriteStore.onCanvasClick(n)},t.initialState={canvasSize:Ks},w([ui],t.prototype,"setCanvasElement",null),w([ui],t.prototype,"updateCanvasDimensions",null),w([ui],t.prototype,"saveDimensions",null),w([ui],t.prototype,"disableCanvasClick",null),w([ui],t.prototype,"enableCanvasClick",null),w([dr],t.prototype,"isCanvasClickable",null),w([dr],t.prototype,"canvasSize",null),w([dr],t.prototype,"sizeVector",null),w([dr],t.prototype,"sizeVectorMagnitude",null),t}(),Js={type:null,identifier:null,isVisible:!1,error:""},$s=function(){function t(t){var e=this;this.showActionModal=function(t){var n=t.type,r=t.identifier,i=t.error,o=t.handleConfirm,a=t.handleDismiss;e.resetHandlers(),e.state.isVisible=!0,e.state.identifier=r,e.state.type=n,e.state.error=i||"",e.handleConfirm=o,e.handleDismiss=a},this.hideModal=function(){e.state.isVisible=!1,e.state.type=null,e.state.error="",e.state.identifier=null,e.resetHandlers()},this.resetHandlers=function(){e.handleConfirm=null,e.handleDismiss=null},this.configStore=t.configStore,this.state=lr(Js)}return t.prototype.showInfoModal=function(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=z.INFO,this.state.identifier=t,this.state.error=""},t.prototype.showTextEditModal=function(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=z.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""},Object.defineProperty(t.prototype,"modalProps",{get:function(){var t=this.state.isVisible,e=this.getModalLocale();if(e){var n=e.bodyLabel;return{headerLabel:e.headerLabel,bodyLabel:n,confirmLabel:e.buttonYes,dismissLabel:e.buttonNo,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.state.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionOffset",{get:function(){var t=this.configStore,e=t.isLayoutAdvanced,n=t.measurements,r=n.basicCanvasOffset,i=n.advancedUIToolControlBar,o=n.advancedUIToolbar,a=t.isOrderDefault,s=(i.width+o.width)*(a?1:-1);return e?{x:s/2,y:0}:{x:0,y:-r}},enumerable:!0,configurable:!0}),t.prototype.getModalLocale=function(){var t=this.state,e=t.identifier,n=t.error,r=t.type,i=this.configStore.locale;if(!r||!e||r===z.TEXT_EDIT)return null;if(r&&e&&i[r+"Modals"]&&i[r+"Modals"][e]){var o=i[r+"Modals"][e],a=o.body;a&&(a=a.replace("${error}",n));var s=o.heading;if(r===z.ERROR||r===z.WARNING){var l={error:i.common.error,warning:i.common.warning};s=""+("error"===r?l.error:l.warning)+o.headingDelimiter+" "+(o.header||"")}return{bodyLabel:a,headerLabel:s,buttonYes:o.buttonYes,buttonNo:o.buttonNo}}return null},w([ui],t.prototype,"showActionModal",void 0),w([ui],t.prototype,"showInfoModal",null),w([ui],t.prototype,"showTextEditModal",null),w([ui],t.prototype,"hideModal",void 0),w([dr],t.prototype,"modalProps",null),w([dr],t.prototype,"isVisible",null),w([dr],t.prototype,"type",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"positionOffset",null),t}(),tl=function(){function t(t){var e=this;this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((function(t){return t/100})),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=function(){e.canZoomIn&&(e.state.scaleIndex+=1,e.scaleRender())},this.out=function(){if(e.canZoomOut){e.state.scaleIndex-=1;var t=e.checkOffset({x:0,y:0}),n=t.canDragX,r=t.canDragY,i=t.maxOffsetX,o=t.maxOffsetY;r||(e.offset.y=o),n||(e.offset.x=i),e.savePosition(),e.scaleRender()}},this.setOffset=function(t){var n=e.checkOffset(t),r=n.canDragX,i=n.canDragY;r&&(e.offset.x=t.x),i&&(e.offset.y=t.y),e.scaleRender()},this.editor=t}return t.prototype.setInitialTransform=function(t){var e=this;void 0===t&&(t=0);var n=this.editor.engineMediator.preview.transform;ci((function(){e.setDefaultScale(Math.abs(t||n.scale.x)),e.setPosition(n.position)}))},t.prototype.resetScale=function(){this.state.scaleIndex=-1},t.prototype.resetPosition=function(){var t=this.editor.canvasStore.canvas,e=t.width,n=t.height;this.setPosition({x:e/2,y:n/2})},t.prototype.resetOffset=function(){this.offset={x:0,y:0}},t.prototype.setPosition=function(t){this.state.position.x=t.x,this.state.position.y=t.y},t.prototype.savePosition=function(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}},t.prototype.setDefaultScale=function(t){var e=this;1!==this.defaultScale&&(-1!==(n=this.SCALE_LEVELS.findIndex((function(t){return t===e.defaultScale})))&&(this.SCALE_LEVELS=T(this.SCALE_LEVELS.slice(0,n),this.SCALE_LEVELS.slice(n+1))));var n,r=this.SCALE_LEVELS.findIndex((function(n,r){return 0===r?t<n:r===e.SCALE_LEVELS.length-1?n<t:e.SCALE_LEVELS[r-1]<t&&t<n}));-1!==r?(this.SCALE_LEVELS=T(this.SCALE_LEVELS.slice(0,r),[t],this.SCALE_LEVELS.slice(r)),r===this.state.scaleIndex&&this.resetScale(),this.state.scaleIndex=r,this.defaultScale=t):((n=this.SCALE_LEVELS.findIndex((function(e){return e===t})))===this.state.scaleIndex&&this.resetScale(),-1!==n&&(this.state.scaleIndex=n,this.defaultScale=t))},t.prototype.setScaleToDefault=function(){this.state.scaleIndex=this.defaultIndex},t.prototype.checkOffset=function(t){var e=window.devicePixelRatio||1,n=this.scaledSize,r=this.previewSize,i=this.editor.engineMediator.preview.initialTransform.position,o=this.getPositionWithOffset(t),a=(n.width-r.width)*e/2,s=(n.height-r.height)*e/2,l=i.x-o.x,u=i.y-o.y,c=Math.abs(l)-a,f=Math.abs(u)-s;return{canDragX:c<0,canDragY:f<0,maxOffsetX:l>0?-c:c,maxOffsetY:u>0?-f:f}},t.prototype.calculateScale=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=this.previewSize),void 0===n&&(n=this.defaultScale);var r=e.width,i=e.height,o=new R({x:r,y:i}),a=new R(Math.abs(o.x*Math.cos(t))+Math.abs(o.y*Math.sin(t)),Math.abs(o.x*Math.sin(t))+Math.abs(o.y*Math.cos(t))),s=o.subtract(a).divide(2).multiply(n).abs;return s.y>s.x?2*s.y/o.y+n:2*s.x/o.x+n},Object.defineProperty(t.prototype,"defaultIndex",{get:function(){var t=this;return this.SCALE_LEVELS.findIndex((function(e){return e===t.defaultScale}))},enumerable:!0,configurable:!0}),t.prototype.getPositionWithOffset=function(t){void 0===t&&(t=this.offset);var e=this.position;return{x:e.x-t.x,y:e.y-t.y}},t.prototype.scaleRender=function(t){void 0===t&&(t=!1);var e=this.editor.scale.getPositionWithOffset(),n=t?this.defaultScale:this.scale,r={x:n,y:n};this.editor.engineMediator.preview.container.setScale(r),this.editor.engineMediator.preview.container.setPosition(e),this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0}),t||this.editor.render()},Object.defineProperty(t.prototype,"scale",{get:function(){var t=this.state.scaleIndex;return-1!==t?this.SCALE_LEVELS[t]:this.defaultScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevel",{get:function(){var t=window.devicePixelRatio||1;return(this.scale/t*100).toFixed(1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canDrag",{get:function(){return this.defaultScale<this.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomOut",{get:function(){return this.state.scaleIndex>this.defaultIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomIn",{get:function(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.state.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledSize",{get:function(){var t=this.state.scaleIndex,e=-1!==t?this.SCALE_LEVELS[t]:this.defaultScale,n=this.previewSize;return{width:n.width*e/this.defaultScale,height:n.height*e/this.defaultScale}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewSize",{get:function(){return this.editor.getPreviewSize()},enumerable:!0,configurable:!0}),w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"in",void 0),w([ui],t.prototype,"out",void 0),w([ui],t.prototype,"setInitialTransform",null),w([ui],t.prototype,"resetScale",null),w([ui],t.prototype,"resetPosition",null),w([ui],t.prototype,"setPosition",null),w([ui],t.prototype,"savePosition",null),w([ui],t.prototype,"setDefaultScale",null),w([ui],t.prototype,"setScaleToDefault",null),w([dr],t.prototype,"scale",null),w([dr],t.prototype,"zoomLevel",null),w([dr],t.prototype,"canDrag",null),w([dr],t.prototype,"canZoomOut",null),w([dr],t.prototype,"canZoomIn",null),w([dr],t.prototype,"position",null),w([dr],t.prototype,"scaledSize",null),t}(),el=/^data:image\/(.+?);base64,/,nl=function(){function t(t){var e=this;this.applySerialization=function(t,n,r,i){return x(e,void 0,void 0,(function(){var e,o,a,s,l,u,c;return O(this,(function(f){switch(f.label){case 0:return this.editor.resetToolStates(),(e=this.editor.activeStore.tool===j.TRANSFORM)||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),e||this.editor.transformToolStore.onLeave(),o=new n(this.editor),a="Unexpected error occured",(s=n.deserializeImage(t)).image&&s.image.data?(l=s.image.data,[4,this.editor.setImage(l)]):[3,3];case 1:return f.sent(),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(l),[4,this.editor.engineMediator.image.addImageToContainer()];case 2:f.sent(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms(),f.label=3;case 3:return(u=o.deserializeTransformation(t))?[4,this.applyStateOnUI(u)]:[3,9];case 4:return f.sent(),(c=o.deserialize(t))?[4,this.applyStateOnUI(c)]:[3,7];case 5:return f.sent(),[4,this.editor.render()];case 6:return f.sent(),"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),r(),[3,8];case 7:i(a),f.label=8;case 8:return[3,10];case 9:i(a),f.label=10;case 10:return[2]}}))}))},this.editor=t}return t.prototype.serialize=function(e){var n=this,r=(void 0===e?{image:!1}:e).image,i=this.editor.activeStore.tool===j.TRANSFORM;return this.editor.modalStore.showInfoModal("saving"),new Promise((function(e,o){import("./index-8c3a5ec2.js").then((function(a){var s=a.Serializer;return x(n,void 0,void 0,(function(){var n,a,l,u,c,f,p,h,d,y,g,m,v;return O(this,(function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),i&&this.editor.transformToolStore.onLeave(),[4,this.editor.wait()];case 1:return _.sent(),this.editor.transformToolStore.applyDefaultCrop(!1),n=this.editor.imageContainer.getData().originalImage,a=this.editor.engineMediator.output.container.getResolution(),l={width:n.width,height:n.height},u=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,a,l,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),(v={})[j.ADJUSTMENT]=Oi(this.editor.adjustmentsToolStore.state),v[j.FILTER]=Oi(this.editor.filterToolStore.state),v[j.FOCUS]=Oi(this.editor.focusToolStore.serializableState),v[j.OVERLAY]=Oi(this.editor.overlayToolStore.state),v[j.FRAME]=Oi(this.editor.frameToolStore.state),v[j.BRUSH]=this.editor.brushToolStore.strokes||{strokes:[]},c=v,f=this.editor.spriteStore.serializableState,p=f.sprite,h=f.customStickers,p.spriteIdList=p.spriteIdList.sort((function(t,e){return p.common[t].order-p.common[e].order})),c.sprite=p,c.customStickers=h,c.transform=this.editor.transformToolStore.serializableState,d=void 0,y=void 0,r&&(g=t.getDataURL(n),y=function(t){return t.match(/^data:([^;]+)/)[1]}(g),d=function(t){return t.replace(el,"")}(g)),this.editor.modalStore.hideModal(),e(u.serialise(c,d,y)),i&&this.editor.transformToolStore.onEnter(),[3,3];case 2:return m=_.sent(),this.editor.modalStore.hideModal(),o(m),[3,3];case 3:return[2]}}))}))}))}))},t.prototype.deserialize=function(t){var e=this;return this.editor.modalStore.showInfoModal("loading"),new Promise((function(n,r){try{import("./index-8c3a5ec2.js").then((function(i){var o=i.Deserializer;o.checkIsSerialisationValid(t)?e.applySerialization(t,o,n,r):(e.editor.modalStore.hideModal(),e.editor.modalStore.showActionModal({type:z.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:function(){return e.applySerialization(t,o,n,r)}}))}))}catch(t){"loading"===e.editor.modalStore.identifier&&e.editor.modalStore.hideModal(),r(t)}}))},t.getDataURL=function(t){if(t instanceof HTMLCanvasElement)return t.toDataURL(Y.PNG);var e,n=t.src;if(e=n,el.test(e))return n;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r.toDataURL(Y.PNG)},t.prototype.applyStateOnUI=function(t){return x(this,void 0,void 0,(function(){var e,n;return O(this,(function(r){switch(r.label){case 0:e=this.editor.activeStore.tool===j.TRANSFORM,r.label=1;case 1:return r.trys.push([1,15,,16]),t.transform?(e||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform,!0),[4,this.editor.wait()]):[3,4];case 2:return r.sent(),e?[3,4]:(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),[4,this.editor.wait()]);case 3:r.sent(),this.editor.transformToolStore.onLeave(),r.label=4;case 4:return t.filter?[4,this.editor.filterToolStore.updateStateFromSerialization(t.filter)]:[3,6];case 5:r.sent(),r.label=6;case 6:return t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus?[4,this.editor.focusToolStore.updateStateFromSerialization(t.focus)]:[3,8];case 7:r.sent(),r.label=8;case 8:return t.overlay?[4,this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)]:[3,10];case 9:r.sent(),r.label=10;case 10:return t.sprite?(t.sprite.spriteIdList=t.sprite.spriteIdList.sort((function(e,n){return t.sprite.common[e].order-t.sprite.common[n].order})),[4,this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers)]):[3,12];case 11:r.sent(),r.label=12;case 12:return t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame?[4,this.editor.frameToolStore.updateStateFromSerialization(t.frame)]:[3,14];case 13:r.sent(),r.label=14;case 14:return this.editor.outputContainer.updateChildrenContainers(),[3,16];case 15:return n=r.sent(),console.error(n),this.editor.modalStore.showActionModal({type:z.ERROR,identifier:"unexpectedError",error:n,handleConfirm:function(){window.location.reload()}}),[3,16];case 16:return[2]}}))}))},t}(),rl={identifier:"identity",opacity:1,width:0,color:on.white},il=new yo(0,1),ol=function(){function t(t){this.engineMediator=t,this.state=rl}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeOpacity=function(t){var e=il.clamp(t);this.state.opacity=e},t.prototype.changeWidth=function(t){this.state.width=t},t.prototype.changeColor=function(t){this.state.color=t},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=rl.identifier,this.state.opacity=rl.opacity,this.state.width=rl.width,this.state.color=rl.color,this.removeIndex())},Object.defineProperty(t.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.removeFrameEffect=function(){this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},t.prototype.setEffectProperties=function(t){return this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.setFrameEffect=function(t){var e=this,n=t.identifier,r=t.width,i=t.opacity,o=t.color,a=_({},this.state);this.changeIdentifier(n),this.changeWidth(r),this.changeOpacity(i),this.changeColor(o),this.removeFrameEffect();var s=this.engineMediator.orderHelper.addSprite(n);return new Promise((function(t,l){e.engine.addFrameFromAssets(n,e.engineMediator.image.container,s).then((function(n){e.effect=n,e.effect.setProperties({tintColor:o,opacity:i,width:r}),t()})).catch((function(t){e.changeIdentifier(a.identifier),e.changeOpacity(a.opacity),e.changeWidth(a.width),e.changeColor(a.color),"identity"===a.identifier&&e.removeIndex(),l(t)}))}))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeSprite(this.state.identifier)},w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"changeIdentifier",null),w([ui],t.prototype,"changeOpacity",null),w([ui],t.prototype,"changeWidth",null),w([ui],t.prototype,"changeColor",null),w([ui],t.prototype,"reset",null),t}(),al=function(){function t(t){var e=this;this.colorList=Nl.defaultColors,this.changeOpacity=function(t){var n=e.frameStore.setEffectProperties({opacity:t});n&&(e.frameStore.changeOpacity(n.opacity),e.editor.render())},this.changeWidth=function(t){var n=e.frameStore.setEffectProperties({width:t});n&&(e.frameStore.changeWidth(n.width),e.editor.render())},this.changeColor=function(t){var n=e.frameStore.setEffectProperties({tintColor:t});n&&(e.frameStore.changeColor(n.tintColor),e.editor.render())},this.colorSnapshot=function(){e.addSnapshot(ho.EDIT,e.locale.controls.selectColor)},this.reset=function(){e.pureReset(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.frameStore=new ol(this.editor.engineMediator);var n=this.editor.assetProvider.getAssets("frame"),r=this.config;this.entityManager=new vo([{identifier:"",name:"",items:n}],_(_({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),this.config.colors&&this.config.colors.length>0&&(this.colorList=rn(Oi(this.config.colors)))}return t.prototype.selectFrame=function(t){return x(this,void 0,void 0,(function(){var e;return O(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:(e=.1*this.editor.shortestOutputSide,[4,this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:rl.color})]);case 1:n.sent(),this.editor.render(),this.addSnapshot(ho.ADD,j.FRAME),n.label=2;case 2:return[2]}}))}))},t.prototype.toolSnapshot=function(t){this.addSnapshot(ho.EDIT,t)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.pureReset=function(){this.frameStore.removeFrameEffect(),this.frameStore.reset()},t.prototype.updateStateFromHistory=function(t){return"identity"===t.identifier?(this.pureReset(),new Promise((function(t){t()}))):this.frameStore.setFrameEffect(t)},t.prototype.updateStateFromSerialization=function(t){return x(this,void 0,void 0,(function(){return O(this,(function(e){return this.entityManager.items.find((function(e){return e.identifier===t.identifier}))?[2,this.frameStore.setFrameEffect(t)]:[2,new Promise((function(t,e){e(new Error("Frame Asset doesn't exist"))}))]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.frameStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.state.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintable",{get:function(){var t=this,e=this.entityManager.items.find((function(e){return e.identifier===t.identifier}));return e&&e.tintable||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{get:function(){return.05*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return.3*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),w([ui],t.prototype,"selectFrame",null),w([ui],t.prototype,"changeOpacity",void 0),w([ui],t.prototype,"changeWidth",void 0),w([ui],t.prototype,"changeColor",void 0),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"updateStateFromSerialization",null),w([dr],t.prototype,"state",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"color",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"tintable",null),w([dr],t.prototype,"opacity",null),w([dr],t.prototype,"minSize",null),w([dr],t.prototype,"maxSize",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"localeColor",null),w([dr],t.prototype,"entities",null),w([dr],t.prototype,"isOptionSelected",null),t}(),sl={options:[],query:""},ll=function(){function t(t){var e=this;this.initProvider=function(t){t&&(e.libraryProvider=new t)},this.addOptionsToSelectedCategory=function(t,e,n){var r=t.findIndex((function(t){return t.identifier===e}));return-1!==r?T(t.slice(0,r+1),n,t.slice(r+1)):t},this.configStore=t.configStore,this.state=lr(sl),this.selectedCategory=""}return t.prototype.saveScrollbar=function(t){this.scrollbar=t},t.prototype.recalculateScrollContainer=function(){var t=this;setTimeout((function(){return t.scrollbar.recalculate()}),0)},t.prototype.fetchImages=function(t){return void 0===t&&(t=""),x(this,void 0,void 0,(function(){var e,n,r,i,o,a=this;return O(this,(function(s){switch(s.label){case 0:return this.libraryProvider?(e=[this.libraryProvider.getCategories(),this.libraryProvider.searchImages(t)],[4,Promise.all(e)]):[3,2];case 1:n=k.apply(void 0,[s.sent(),2]),r=n[0],i=n[1],o=r.map((function(t){var e=i.filter((function(e){return e.category===t.name}));return{identifier:t.name,name:t.name,coverImage:t.coverImageUrl,options:e.map((function(e,n){return{name:e.title||"image"+n,identifier:t.name+"-"+(e.title||"image"+n),coverImage:e.thumbUrl,rawUrl:e.rawUrl}}))}})).filter((function(t){return t.options.length})),ci((function(){a.state.query=t,a.state.options=o})),s.label=2;case 2:return[2]}}))}))},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory!==t?t:""},Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return this.state.options.map((function(t){return t.options})).reduce((function(t,e){return T(t,e)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return this.state.query},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.configStore.config[j.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.configStore.locale[j.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.state.options.map((function(t,e){return{type:B.LARGE,identifier:t.name,name:t.name,coverImage:t.coverImage,delay:.08*e,items:t.options.map((function(t,e){return _({type:B.MEDIUM,delay:.08*e},t)}))}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){var t=this.selectedCategory,e=this.state.options.findIndex((function(e){return e.name===t}));return-1!==e?this.state.options[e].options.map((function(t,e){return _({type:B.MEDIUM,delay:.08*e},t)})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categoriesAndOptions",{get:function(){return this.addOptionsToSelectedCategory(this.categories,this.selectedCategory,this.options)},enumerable:!0,configurable:!0}),t.prototype.getRawUrl=function(t){var e=this.images.findIndex((function(e){return e.identifier===t}));return-1!==e?this.images[e].rawUrl:t},w([lr],t.prototype,"selectedCategory",void 0),w([ui],t.prototype,"saveScrollbar",null),w([ui],t.prototype,"recalculateScrollContainer",null),w([ui],t.prototype,"initProvider",void 0),w([ui],t.prototype,"fetchImages",null),w([ui],t.prototype,"toggleCategorySelection",null),w([dr],t.prototype,"selectedCategoryIdentifier",null),w([dr],t.prototype,"images",null),w([dr],t.prototype,"query",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"categories",null),w([dr],t.prototype,"options",null),w([dr],t.prototype,"categoriesAndOptions",null),t}(),ul={identifier:"identity",opacity:1,blendMode:it.LIGHTEN},cl=new yo(0,1),fl=function(){function t(t,e){var n=this;this.correctOverlayFlip=function(){var t=n.editor.outputContainer.getData(),e=t.flipHorizontally,r=t.flipVertically;n.effect&&(n.effect.setFlipHorizontally(e),n.effect.setFlipVertically(r))},this.engineMediator=t,this.editor=e,this.state=ul}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeOpacity=function(t){var e=cl.clamp(t);this.state.opacity=e},t.prototype.changeBlendMode=function(t){this.state.blendMode=t},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=ul.identifier,this.state.opacity=ul.opacity,this.state.blendMode=ul.blendMode,this.removeIndex())},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.removeOverlayEffect=function(){this.effect&&(this.removeIndex(),this.engineMediator.engine.removeEffect(this.effect),this.effect=void 0)},t.prototype.setEffectProperties=function(t){return this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.setOverlayEffect=function(t){var e=this,n=t.identifier,r=t.blendMode,i=t.opacity,o=_({},this.state);this.changeIdentifier(n),this.changeOpacity(i),this.changeBlendMode(r),this.removeOverlayEffect();var a=this.engineMediator.orderHelper.addIndex(j.OVERLAY);return new Promise((function(t,s){e.engineMediator.engine.addOverlayFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({blendMode:r,opacity:i}),e.correctOverlayFlip(),t()})).catch((function(t){e.changeIdentifier(o.identifier),e.changeOpacity(o.opacity),e.changeBlendMode(o.blendMode),"identity"===o.identifier&&e.removeIndex(),s(t)}))}))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(j.OVERLAY)},w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"changeIdentifier",null),w([ui],t.prototype,"changeOpacity",null),w([ui],t.prototype,"changeBlendMode",null),w([ui],t.prototype,"reset",null),w([ui],t.prototype,"correctOverlayFlip",void 0),t}(),pl=function(){function t(t){var e=this;this.changeOpacity=function(t){var n=e.overlayStore.setEffectProperties({opacity:t});n&&(e.overlayStore.changeOpacity(n.opacity),e.editor.render())},this.reset=function(){e.pureReset(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.correctOverlayFlip=function(){e.overlayStore.correctOverlayFlip()},this.editor=t,this.overlayStore=new fl(this.editor.engineMediator,t);var n=this.editor.assetProvider.getAssets("overlay"),r=this.config;this.entityManager=new vo([{identifier:"",name:"",items:n}],_(_({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}return t.prototype.selectOverlay=function(t){return x(this,void 0,void 0,(function(){var e;return O(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:(e=this.defaultBlendModeForIdentifier(t),[4,this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e})]);case 1:n.sent(),this.addSnapshot(ho.ADD,j.OVERLAY),this.editor.render(),n.label=2;case 2:return[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(ho.EDIT,this.locale.controls.sliderOpacity)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.changeBlendMode=function(t){var e=this.overlayStore.setEffectProperties({blendMode:t});e&&(this.overlayStore.changeBlendMode(e.blendMode),this.addSnapshot(ho.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())},t.prototype.pureReset=function(){this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},t.prototype.updateStateFromSerialization=function(t){return x(this,void 0,void 0,(function(){return O(this,(function(e){return this.entityManager.items.find((function(e){return e.identifier===t.identifier}))?[2,this.overlayStore.setOverlayEffect(t)]:[2,new Promise((function(e,n){n(new Error("Overlay Asset "+t.identifier+" doesn't exist"))}))]}))}))},t.prototype.updateStateFromHistory=function(t){return x(this,void 0,void 0,(function(){return O(this,(function(e){return"identity"===t.identifier?(this.pureReset(),[2,new Promise((function(t){t()}))]):[2,this.overlayStore.setOverlayEffect(t)]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.overlayStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.overlayStore.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.overlayStore.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.overlayStore.state.blendMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allBlendModes",{get:function(){var t=this.locale.controls;return Object.keys(it).map((function(e){var n=it[e],r="blendMode"+n.charAt(0).toUpperCase()+n.slice(1);return{identifier:n,value:t[r]}}))},enumerable:!0,configurable:!0}),t.prototype.defaultBlendModeForIdentifier=function(t){var e=this.entityManager.items.findIndex((function(e){return e.identifier===t}));return-1!==e?this.entityManager.items[e].defaultBlendMode:it.LIGHTEN},w([ui],t.prototype,"selectOverlay",null),w([ui],t.prototype,"changeOpacity",void 0),w([ui],t.prototype,"changeBlendMode",null),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"updateStateFromSerialization",null),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"correctOverlayFlip",void 0),w([dr],t.prototype,"state",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"opacity",null),w([dr],t.prototype,"blendMode",null),w([dr],t.prototype,"isOptionSelected",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"entities",null),w([dr],t.prototype,"allBlendModes",null),t}(),hl=function(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o+=1)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})},dl={size:0,color:on.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0},yl=function(){function t(t){var e=this;this.colorList=Nl.defaultColors,this.dirty=lr.box(!1),this.id="",this.containerId=function(){return e.id},this.initSize=function(){var t=e.state,n=t.minimumSize,r=t.maximumSize;0===e.size&&e.changeSize(Ct(e.config,"defaultSize",[n,r]))},this.changeColor=function(t){e.state.color=t},this.changeSize=function(t){e.state.size=t},this.changeRelativeSize=function(t){var n=e.state,r=n.maximumSize,i=n.minimumSize;e.state.size=(r-i)*t/100+i},this.changeHardness=function(t){e.state.hardness=t},this.reset=function(){e.pureReset(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.state=_(_({},dl),{hardness:Ct(this.config,"defaultHardness",[dl.minimumHardness,dl.maximumHardness])}),this.config.colors&&this.config.colors.length>0&&(this.colorList=rn(Oi(this.config.colors)))}return t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.beginStroke=function(t){if(void 0===t&&(t=[]),!this.drawingContainer){var e=this.editor.orderHelper.addSprite(j.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:Oi(this.state.color),size:this.state.size,hardness:this.state.hardness})},t.prototype.strokePosition=function(t){if(this.drawingContainer){var e=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(e),this.editor.render()}},t.prototype.endStroke=function(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(ho.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))},t.prototype.updateStateFromHistory=function(t){if(t=t||{strokes:[]},this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length)return;this.strokes=t,this.drawingContainer.setData(this.strokes),0!==t.strokes.length&&this.dirty.set(!0)}else{var e=this.editor.orderHelper.addSprite(j.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e),this.strokes=this.drawingContainer.getData()}this.id=this.drawingContainer.getID()},t.prototype.pureReset=function(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)},Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.state.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeSize",{get:function(){var t=this.state,e=t.size,n=t.maximumSize,r=t.minimumSize;return 100*(e-r)/(n-r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeOnScreenSpace",{get:function(){var t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hardness",{get:function(){return this.state.hardness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.dirty.get()},enumerable:!0,configurable:!0}),w([lr],t.prototype,"state",void 0),w([lr],t.prototype,"dirty",void 0),w([ui],t.prototype,"initSize",void 0),w([ui],t.prototype,"changeColor",void 0),w([ui],t.prototype,"changeSize",void 0),w([ui],t.prototype,"changeRelativeSize",void 0),w([ui],t.prototype,"changeHardness",void 0),w([ui],t.prototype,"clickableCanvas",null),w([ui],t.prototype,"beginStroke",null),w([ui],t.prototype,"strokePosition",null),w([ui],t.prototype,"endStroke",null),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"reset",void 0),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"localeColor",null),w([dr],t.prototype,"color",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"relativeSize",null),w([dr],t.prototype,"sizeOnScreenSpace",null),w([dr],t.prototype,"hardness",null),w([dr],t.prototype,"isDirty",null),t}();!function(t){t.LEADING="leading",t.CENTER="center",t.TRAILING="trailing"}(Hs||(Hs={}));var gl={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},ml=function(){function t(t){var e=this;this.previewTopLeftPosition={x:0,y:0},this.getGuideValue=function(t,n){var r=e.editor.getPreviewSize(),i=r.height,o=r.width,a=e.configStore.config.snapping.position,s=a.snapToLeft,l=a.snapToRight,u=a.snapToTop,c=a.snapToBottom,f=Math.min(i,o),p=0;return"bottom"===n?p=Math.round(i-f*c):"top"===n?p=Math.round(f*u):"right"===n?p=Math.round(o-f*l):"left"===n?p=Math.round(f*s):"vertical"===t&&"center"===n?p=Math.round(o/2):"horizontal"===t&&"center"===n&&(p=Math.round(i/2)),p},this.getVerticalGuidesFromConfig=function(){var t=e.configStore.config.snapping.position,n=t.snapToVerticalCenter,r=t.snapToLeft,i=t.snapToRight,o=[];return n&&o.push({value:e.getGuideValue("vertical","center"),edge:Hs.CENTER,isVisible:!1,direction:"vertical"}),r&&o.push({value:e.getGuideValue("vertical","left"),edge:Hs.LEADING,isVisible:!1,direction:"vertical"}),i&&o.push({value:e.getGuideValue("vertical","right"),edge:Hs.TRAILING,isVisible:!1,direction:"vertical"}),o},this.getHorizontalGuidesFromConfig=function(){var t=e.configStore.config.snapping.position,n=t.snapToHorizontalCenter,r=t.snapToTop,i=t.snapToBottom,o=[];return n&&o.push({value:e.getGuideValue("horizontal","center"),edge:Hs.CENTER,isVisible:!1,direction:"horizontal"}),r&&o.push({value:e.getGuideValue("horizontal","top"),edge:Hs.LEADING,isVisible:!1,direction:"horizontal"}),i&&o.push({value:e.getGuideValue("horizontal","bottom"),edge:Hs.TRAILING,isVisible:!1,direction:"horizontal"}),o},this.getRotationGuidesFromConfig=function(){var t=e.configStore.config.snapping.rotation.angles,n=[];return t.forEach((function(t){n.push(t),n.push(t+360),n.push(t-360)})),n.filter((function(t,e){return n.indexOf(t)===e})).map((function(t){return{value:t*Math.PI/180,edge:Hs.CENTER,isVisible:!1,position:{x:0,y:0}}}))},this.getSpriteDimensions=function(t){var e=t.leftTop,n=t.leftBottom,r=t.rightTop,i=t.rightBottom,o=Math.min(e.y,r.y,n.y,i.y),a=Math.max(e.y,r.y,n.y,i.y),s=Math.min(e.x,r.x,n.x,i.x),l=Math.max(e.x,r.x,n.x,i.x);return{height:Math.round(a-o),width:Math.round(l-s)}},this.mapRange=function(t){var e=t.value,n=t.fromMin,r=t.fromLength,i=t.toMin;return(e-n)*t.toLength/r+i},this.updateGuides=function(){e.state.horizontalGuides=e.getHorizontalGuidesFromConfig(),e.state.verticalGuides=e.getVerticalGuidesFromConfig()},this.mapToSnapSystem=function(t,n,r,i){if(0===n.length)return t;if(n[0]>t)return t-r;for(var o=0;o<n.length-1;o+=1){var a=n[o],s=n[o+1],l=a+r,u=s-r,c=0;i&&(l+=c=o*r*2,u+=c+2*r);if(a<=t&&t<=s)return t<=a+1e-5?a+c:t>=s-1e-5?s+c+(i?2*r:0):e.mapRange({value:t,fromMin:a,fromLength:s-a,toMin:l,toLength:u-l})}return i?t+(n.length-1)*r*2+r:t},this.mapFromSnapSystem=function(t,n,r,i){if(0===n.length)return t;if(n[0]>t)return t>=n[0]-r?n[0]:t+r;for(var o=t,a=0;a<n.length-1;a+=1){var s=n[a],l=n[a+1],u=s+r,c=l-r,f=l;if(i&&(c+=2*r,f+=2*r,o=t-a*r*2),s<=o&&o<=f)return u<=o&&o<=c?e.mapRange({value:o,fromMin:u,fromLength:c-u,toMin:s,toLength:l-s}):o<u?s:l}o-=3*r;var p=n[n.length-1];return o<=p?p:o},this.centerSnapValue=function(t,e){var n=.5*e,r=t.value,i=t.edge,o=r;return i===Hs.LEADING?o+=n:i===Hs.TRAILING&&(o-=n),o},this.mapSnappingGuidesToCenter=function(t,n){var r=[];return t.forEach((function(t){r.push(e.centerSnapValue(t,n))})),r},this.calcSnapThresholdInRadians=function(t,e){return 0===t?0:e/t},this.calculatePreviewTopLeftPosition=function(){var t=e.editor.engineMediator.preview.container.getPosition(),n=e.editor.getPreviewSize(),r=Nl.devicePixelRatio;e.previewTopLeftPosition={x:t.x/r-n.width/2,y:t.y/r-n.height/2}},this.snapToRotation=function(t,n,r){var i=e.state.rotationGuides,o=e.configStore.config.snapping.rotation,a=o.enabled,s=o.threshold,l=e.previewTopLeftPosition,u=l.x,c=l.y,f=e.editor.getPreviewSize().width,p=(t+2*Math.PI)%(2*Math.PI);if(a){var h=new R(n).magnitude,d=i.map((function(t){return t.value})).sort((function(t,e){return t-e})),y=e.calcSnapThresholdInRadians(h,s);if(!e.rotationOffset){var g=e.mapToSnapSystem(t,d,y,!1);e.rotationOffset=g-p}p=e.mapFromSnapSystem(p+e.rotationOffset,d,y,!1);var m={x:r.position.x-u-f,y:r.position.y-c};return i.forEach((function(t){t.isVisible=t.value===p,t.position=m})),p}return t},this.snapToPosition=function(t,n){var r=e.state,i=r.horizontalGuides,o=r.verticalGuides,a=e.configStore.config.snapping.position,s=a.enabled,l=a.threshold,u=new R(e.previewTopLeftPosition),c=e.getSpriteDimensions(n),f=c.height,p=c.width,h=new R(t).subtract(u),d=h.x,y=h.y;if(s){var g=e.mapSnappingGuidesToCenter(i,f).sort((function(t,e){return t-e})),m=e.mapSnappingGuidesToCenter(o,p).sort((function(t,e){return t-e}));if(!e.positionOffset){var v=e.mapToSnapSystem(d,m,l,!0),_=e.mapToSnapSystem(y,g,l,!0);e.positionOffset=new R(v,_).subtract(new R(d,y))}var b=e.mapFromSnapSystem(d+e.positionOffset.x,m,l,!0),w=e.mapFromSnapSystem(y+e.positionOffset.y,g,l,!0);return b=Math.round(b),w=Math.round(w),i.forEach((function(t){var n=Math.round(e.centerSnapValue(t,f));t.isVisible=n===w})),o.forEach((function(t){var n=Math.round(e.centerSnapValue(t,p));t.isVisible=n===b})),new R(b,w).add(u)}return{x:d,y:y}},this.editor=t,this.configStore=t.configStore,this.state=lr(gl),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}return t.prototype.hidePositionGuides=function(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((function(t){return _(_({},t),{isVisible:!1})})),this.state.horizontalGuides=this.state.horizontalGuides.map((function(t){return _(_({},t),{isVisible:!1})}))},t.prototype.hideRotationGuides=function(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map((function(t){return _(_({},t),{isVisible:!1})}))},Object.defineProperty(t.prototype,"positionGuides",{get:function(){var t=this.state;return T(t.verticalGuides,t.horizontalGuides)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationGuides",{get:function(){return this.state.rotationGuides},enumerable:!0,configurable:!0}),w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"snapToRotation",void 0),w([ui],t.prototype,"snapToPosition",void 0),w([ui],t.prototype,"hidePositionGuides",null),w([ui],t.prototype,"hideRotationGuides",null),w([dr],t.prototype,"positionGuides",null),w([dr],t.prototype,"rotationGuides",null),t}();function vl(t,e){return void 0===e&&(e=!1),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){var r=null;if(e){var o=document.createElement("canvas"),a=o.getContext("2d"),s=150*i.height/i.width;o.width=150,o.height=s,a.drawImage(i,0,0,150,s),r=o.toDataURL()}n({image:t,smallImage:r})})),i.addEventListener("error",(function(){r()})),i.src=t}))}function _l(t,e){var n=this;return void 0===e&&(e=!1),new Promise((function(r,i){var o=new FileReader;o.onload=function(o){return x(n,void 0,void 0,(function(){return O(this,(function(n){return vl(o.target.result,e).then((function(e){r(_(_({},e),{name:t.name||"",type:t.type,id:A()}))})).catch((function(t){i(t)})),[2]}))}))},o.readAsDataURL(t)}))}var bl={identifier:"identity",opacity:1,tintColor:on.white,tintMode:"none",resizeMode:"keepAspect"},wl={},xl=function(){function t(t){var e=this;this.state=lr.map(wl),this.customStickerIds=[],this.colorList=Nl.defaultColors,this.changeOpacity=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{opacity:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.opacity=r.opacity,e.state.set(e.id,n)}}},this.changeTintColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){var r=e.entityManager.items.find((function(t){return t.identifier===e.identifier})).tintMode;e.editor.spriteStore.setContainerProperties(e.id,{tintColor:t,tintMode:r});var i=e.editor.spriteStore.getContainerProperties(e.id);n.tintColor=i.tintColor,n.tintMode=i.tintMode||bl.tintMode,e.state.set(e.id,n)}}},this.tintColorSnapshot=function(){e.addSnapshot(ho.EDIT,e.locale.history.color)},this.editor=t,this.selectedCategory="identity";var n=this.config,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new vo(r,_(_({},n),{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemKey:"stickerURI",itemDynamicKey:"sticker",locale:_(_({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),this.config.colors&&this.config.colors.length>0&&(this.colorList=rn(Oi(this.config.colors)))}return t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.doesStickerAssetExist=function(t){return-1!==this.entityManager.items.findIndex((function(e){return e.identifier===t}))},t.prototype.add=function(t){var e=this.entityManager.items.find((function(e){return e.identifier===t})),n=e?e.tintMode:bl.tintMode,r=e?e.resizeMode:bl.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:n,tintColor:bl.tintColor,opacity:bl.opacity,resizeMode:r}})},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),e=this.editor.spriteStore.getDuplicateContainerFlip(this.id),n=this.editor.outputContainer.getData(),r=n.flipHorizontally,i=n.flipVertically;this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:Oi(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:r!==e.flipHorizontally,flipVertically:i!==e.flipVertically},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.flipHorizontally=function(){this.id&&this.editor.spriteStore.flipHorizontally(this.id)},t.prototype.delete=function(){if(this.id){var t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},t.prototype.updateStateFromHistory=function(t,e){this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},t.prototype.setState=function(t,e){var n=this.state.get(t);n?("opacity"in e&&(n.opacity=e.opacity),e.tintColor&&(n.tintColor=e.tintColor),e.tintMode&&(n.tintMode=e.tintMode),e.resizeMode&&(n.resizeMode=e.resizeMode),this.state.set(t,n)):this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:bl.tintColor})},t.prototype.addFiles=function(t){return x(this,void 0,void 0,(function(){var e,n,r;return O(this,(function(i){switch(i.label){case 0:if(this.editor.modalStore.showInfoModal("loading"),!t.length)return[3,4];for(e=0,n=[],e=0;e<t.length;e+=1)n.push(_l(t[e],!0));i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return r=i.sent(),this.addCustomStickerAsset(r),[3,4];case 3:return i.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading"),[3,4];case 4:return[2]}}))}))},t.prototype.addCustomStickerAsset=function(t){return x(this,void 0,void 0,(function(){var e,n,r,i,o=this;return O(this,(function(a){switch(a.label){case 0:return e=t.map((function(t){return{sticker:t.image,thumbnailURI:t.smallImage,name:t.name,tintMode:o.customStickerTintMode,resizeMode:"keepAspect",identifier:t.id,type:t.type}})),this.customStickerIds=this.customStickerIds.concat(e.map((function(t){return{identifier:t.identifier,type:t.type}}))),n=this.locale.categories.imgly_sticker_custom,this.editor.assetProvider.addCustomStickerAsset(e,"imgly_sticker_custom",n),r=this.editor.assetProvider.getAssets("sticker"),i=this.config,this.entityManager=new vo(r,_(_({},i),{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemDynamicKey:"thumbnailURI",itemKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=bl.identifier,[4,this.editor.wait()];case 1:return a.sent(),this.selectedCategory="imgly_sticker_custom",this.editor.modalStore.hideModal(),[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(ho.EDIT,this.locale.history.opacity)},t.prototype.addSnapshot=function(t,e){this.currentSticker&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.pureReset=function(){this.state=lr.map(wl)},Object.defineProperty(t.prototype,"isStickerSelected",{get:function(){return this.editor.spriteStore.isSpriteSticker},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomStickerEnabled",{get:function(){return this.config.enableCustomUpload},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customStickerTintMode",{get:function(){return this.config.customStickerTintMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSticker",{get:function(){if(this.isStickerSelected){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){if(this.isStickerSelected){var t=this.state.get(this.id);if(t)return t.identifier}return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isStickerSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.currentSticker?this.currentSticker.opacity:bl.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintMode",{get:function(){return this.currentSticker?this.currentSticker.tintMode:bl.tintMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeMode",{get:function(){return this.currentSticker?this.currentSticker.resizeMode:bl.resizeMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintable",{get:function(){return!!this.currentSticker&&("solid"===this.currentSticker.tintMode||"colorized"===this.currentSticker.tintMode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintColor",{get:function(){return this.currentSticker?this.currentSticker.tintColor:bl.tintColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.getCategories(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),w([lr],t.prototype,"selectedCategory",void 0),w([ui],t.prototype,"selectLast",null),w([ui],t.prototype,"add",null),w([ui],t.prototype,"duplicate",null),w([ui],t.prototype,"bringToFront",null),w([ui],t.prototype,"flipHorizontally",null),w([ui],t.prototype,"delete",null),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"setState",null),w([ui],t.prototype,"changeOpacity",void 0),w([ui],t.prototype,"changeTintColor",void 0),w([ui],t.prototype,"addFiles",null),w([ui],t.prototype,"addCustomStickerAsset",null),w([ui],t.prototype,"toggleCategorySelection",null),w([ui],t.prototype,"pureReset",null),w([dr],t.prototype,"isStickerSelected",null),w([dr],t.prototype,"isCustomStickerEnabled",null),w([dr],t.prototype,"customStickerTintMode",null),w([dr],t.prototype,"currentSticker",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"id",null),w([dr],t.prototype,"opacity",null),w([dr],t.prototype,"tintMode",null),w([dr],t.prototype,"resizeMode",null),w([dr],t.prototype,"tintable",null),w([dr],t.prototype,"tintColor",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"localeColor",null),w([dr],t.prototype,"selectedCategoryIdentifier",null),w([dr],t.prototype,"entities",null),w([dr],t.prototype,"categories",null),t}(),Ol={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:on.white,backgroundColor:on.transparent||[0,0,0,0],width:0},Sl={},kl={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},Tl=function(){function t(t){var e=this;this.state=lr.map(Sl),this.colorList=Nl.defaultColors,this.backgroundColorList=Nl.defaultBackgroundColors,this.loadingObservable=lr.box(!1),this.validFontWithConfig=function(t){return e.fonts.find((function(e){return e.identifier===t}))||e.fonts[0]},this.add=function(){e.loadfonts((function(){e.editor.spriteStore.addText({state:{identifier:Ol.identifier,text:Ol.text,textColor:Ol.textColor,backgroundColor:Ol.backgroundColor,lineHeight:Ol.lineHeight,alignment:Ol.alignment,fontSize:0}})}))},this.setEditMode=function(t){e.editor.spriteStore.setEditMode(t)},this.changeFont=function(t){var n=e.fonts.find((function(e){return e.identifier===t}));e.changeIdentifier(n,e.id),e.id&&e.addSnapshot(ho.EDIT,e.locale.history.fontFamily)},this.changeIdentifier=function(t,n){ci((function(){if(t&&n){var r=e.state.get(n);if(r){e.editor.spriteStore.setContainerProperties(n,{fontIdentifier:t.identifier},!0);var i=e.editor.spriteStore.getContainerProperties(n);r.identifier=i.fontIdentifier,r.fontFamily=t.fontFamily,r.fontStyle=t.fontStyle,r.fontWeight=t.fontWeight,r.fontSize=i.fontSize,r.width=i.width,r.defaultFontSize=r.fontSize,e.state.set(n,r)}}}))},this.changeFontSize=function(t,n){if(void 0===n&&(n=!1),e.id){var r=e.state.get(e.id);r&&(r.fontSize=t,n&&(r.defaultFontSize=t),e.state.set(e.id,r))}},this.updateDefaultFontSize=function(){if(e.id){var t=e.state.get(e.id);t&&(t.defaultFontSize=t.fontSize,e.state.set(e.id,t))}},this.changeSize=function(t,n){var r=e.state.get(t);r&&(r.width=n.width,r.fontSize=n.fontSize,r.defaultFontSize=n.fontSize,e.state.set(t,r))},this.changeWidth=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.width=t,e.state.set(e.id,n))}},this.changeText=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{text:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id),i=e.editor.outputContainer.getSizeInOutputSpace(),o=e.editor.spriteStore.getSize(e.id);e.config.disableAutoScaling||o.height>i.height&&e.editor.spriteStore.setContainerProperties(e.id,{fontSize:e.calculateFitFontSize(e.id,i.height)},!0),r=e.editor.spriteStore.getContainerProperties(e.id),n.text=r.text,n.fontSize=r.fontSize,n.defaultFontSize=r.fontSize,e.state.set(e.id,n),e.addSnapshot(ho.EDIT,e.locale.history.edit)}}},this.changeLineHeight=function(t){if(e.id){var n=e.state.get(e.id);if(n&&t){e.editor.spriteStore.setContainerProperties(e.id,{lineHeight:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.lineHeight=r.lineHeight,e.state.set(e.id,n)}}},this.changeColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{textColor:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.textColor=r.textColor,e.state.set(e.id,n)}}},this.changeBackgroundColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{backgroundColor:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.backgroundColor=r.backgroundColor,e.state.set(e.id,n)}}},this.colorSnapshot=function(){e.addSnapshot(ho.EDIT,e.locale.history.textColor)},this.backgroundColorSnapshot=function(){e.addSnapshot(ho.EDIT,e.locale.history.backgroundColor)},this.changeAlignment=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{alignment:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.alignment=r.alignment,e.state.set(e.id,n),e.addSnapshot(ho.EDIT,e.locale.history.alignment)}}},this.setFontSize=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{fontSize:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.fontSize=r.fontSize,n.defaultFontSize=r.fontSize,e.state.set(e.id,n)}}},this.editor=t,this.fonts.find((function(t){return t.identifier===Ol.identifier}))||(Ol.identifier=this.fonts[0].identifier),Ol.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=rn(Oi(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=rn(Oi(this.config.backgroundColors)))}return t.defaultText=function(){return Ol.text},t.getDisplayFontStyle=function(t){var e=t.fontWeight&&"regular"!==kl[t.fontWeight].toLowerCase()?kl[t.fontWeight]:"",n=t.fontStyle&&"normal"!==t.fontStyle.toLowerCase()?t.fontStyle:"";return((t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e)+" "+n).trim()},t.prototype.loadfonts=function(t){var e=this;if(this.fontsLoaded)t();else{var n=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForText().map((function(t){return t.identifier}));n.loadFontsWithIdentifiers(r).then((function(){e.loadingObservable.set(!0),t()})).catch((function(t){console.error(t),e.editor.modalStore.showActionModal({type:z.ERROR,identifier:"fontLoading",error:t})}))}},t.prototype.doesTextAssetExist=function(t){return-1!==this.editor.assetProvider.getFontAssets().findIndex((function(e){return e.identifier===t}))},t.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:Oi(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:Oi(this.backgroundColor),width:this.width},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.delete=function(){if(this.id){var t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},t.prototype.calculateFitFontSize=function(e,n){if(!t.measureContext){var r=document.createElement("canvas");t.measureContext=r.getContext("2d")}for(var i=this.editor.spriteStore.getContainerProperties(e),o=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),a=this.config.minFontSizeForAutoScaling,s=We(t.measureContext,i.text,o,i.fontSize,i.lineHeight,i.width,o.textMetrics),l=Math.min(Math.floor(i.fontSize*(n/s.height)),1),u=Math.round(i.fontSize),c=0,f=u-l,p=Math.floor(2*(u-l)),h=f;c<=p;){f=c+Math.floor((p-c)/2);var d=We(t.measureContext,i.text,o,f,i.lineHeight,i.width,o.textMetrics);if(n<d.height)p=f-1,h=f-1;else{if(!(n>d.height)){h=f;break}if(c=f+1,l+f>=u)return u}}return a&&h<a?a:h},t.prototype.toolSnapshot=function(){this.addSnapshot(ho.EDIT,this.locale.history.lineSpacing)},t.prototype.addSnapshot=function(t,e){this.currentText&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.updateStateFromHistory=function(t,e){this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},t.prototype.setState=function(t,e){var n=this.state.get(t);if(n)e.alignment&&(n.alignment=e.alignment),e.text&&(n.text=e.text),e.lineHeight&&(n.lineHeight=e.lineHeight),e.textColor&&(n.textColor=e.textColor),e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.fontIdentifier&&(n.identifier=e.fontIdentifier),e.fontSize&&(n.fontSize=e.fontSize,n.defaultFontSize=e.fontSize),e.width&&(n.width=e.width);else{var r=this.validFontWithConfig(e.fontIdentifier);r&&this.state.set(t,{text:e.text,identifier:r.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:Ol.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:Ol.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:e.fontSize,fontWeight:r.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}},t.prototype.pureReset=function(){this.state=lr.map(Sl)},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTextSelected",{get:function(){return this.editor.spriteStore.isSpriteText},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontsLoaded",{get:function(){return this.loadingObservable.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentText",{get:function(){if(this.isTextSelected){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.currentText?this.currentText.text:Ol.text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.currentText?this.currentText.fontSize:Ol.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultFontSize",{get:function(){return this.currentText?this.currentText.defaultFontSize:Ol.defaultFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.currentText?this.currentText.width:Ol.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.currentText?this.currentText.fontFamily:Ol.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.currentText?this.currentText.fontStyle:Ol.fontStyle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.currentText?this.currentText.fontWeight:Ol.fontWeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.currentText?this.currentText.lineHeight:Ol.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.currentText?this.currentText.identifier:Ol.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isTextSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this.currentText?this.currentText.alignment:Ol.alignment},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this.currentText?this.currentText.textColor:Ol.textColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.currentText?this.currentText.backgroundColor:Ol.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawOptions",{get:function(){return this.editor.assetProvider.getFontAssetsForText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fonts",{get:function(){var t=this;return this.rawOptions.reduce((function(e,n){return t.rawOptions.find((function(t){return t.identifier===n.identifier}))?T(e,[{identifier:n.identifier,fontFamily:n.fontFamily,fontStyle:n.fontStyle||"",fontWeight:n.fontWeight||""}]):e}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamilies",{get:function(){return T(new Set(this.fonts))},enumerable:!0,configurable:!0}),w([ui],t.prototype,"addOrselect",null),w([ui],t.prototype,"selectLast",null),w([ui],t.prototype,"add",void 0),w([ui],t.prototype,"duplicate",null),w([ui],t.prototype,"bringToFront",null),w([ui],t.prototype,"delete",null),w([ui],t.prototype,"setEditMode",void 0),w([ui],t.prototype,"changeFont",void 0),w([ui],t.prototype,"changeIdentifier",void 0),w([ui],t.prototype,"changeFontSize",void 0),w([ui],t.prototype,"updateDefaultFontSize",void 0),w([ui],t.prototype,"changeSize",void 0),w([ui],t.prototype,"changeWidth",void 0),w([ui],t.prototype,"changeText",void 0),w([ui],t.prototype,"changeLineHeight",void 0),w([ui],t.prototype,"changeColor",void 0),w([ui],t.prototype,"changeBackgroundColor",void 0),w([ui],t.prototype,"changeAlignment",void 0),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"setState",null),w([ui],t.prototype,"setFontSize",void 0),w([ui],t.prototype,"pureReset",null),w([dr],t.prototype,"isEditMode",null),w([dr],t.prototype,"isTextSelected",null),w([dr],t.prototype,"fontsLoaded",null),w([dr],t.prototype,"currentText",null),w([dr],t.prototype,"text",null),w([dr],t.prototype,"fontSize",null),w([dr],t.prototype,"defaultFontSize",null),w([dr],t.prototype,"width",null),w([dr],t.prototype,"fontFamily",null),w([dr],t.prototype,"fontStyle",null),w([dr],t.prototype,"fontWeight",null),w([dr],t.prototype,"lineHeight",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"id",null),w([dr],t.prototype,"alignment",null),w([dr],t.prototype,"textColor",null),w([dr],t.prototype,"backgroundColor",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"localeColor",null),w([dr],t.prototype,"rawOptions",null),w([dr],t.prototype,"fonts",null),w([dr],t.prototype,"fontFamilies",null),t}(),Cl={identifier:"imgly_text_design_blocks",color:on.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},El={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},Rl={},Dl=function(){function t(t){var e=this;this.state=lr.map(Rl),this.colorList=Nl.defaultColors,this.fontsLoaded=!1,this.add=function(){e.loadfonts((function(){e.editor.spriteStore.addTextDesign({state:{identifier:Cl.identifier,text:Cl.text,color:Cl.color,isInverted:Cl.isInverted,seed:El[Cl.identifier]||Cl.seed,padding:0}})}))},this.changeText=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{text:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.text=r.text,e.state.set(e.id,n),e.addSnapshot(ho.EDIT,e.locale.history.edit)}}},this.setEditMode=function(t){e.editor.spriteStore.setEditMode(t)},this.changeSeed=function(){if(e.id){var t=e.state.get(e.id);if(t){e.editor.spriteStore.setContainerProperties(e.id,{seed:-1},!0);var n=e.editor.spriteStore.getContainerProperties(e.id);t.seed=n.seed,e.state.set(e.id,t),e.addSnapshot(ho.EDIT,e.locale.history.shuffle)}}},this.changeIdentifier=function(t,n,r,i){if(void 0===n&&(n=!0),void 0===r&&(r=null),void 0===i&&(i=e.id),i&&t!==e.identifier){var o=e.state.get(i),a=e.editor.spriteStore.getContainerTransform(i);e.editor.spriteStore.addTextDesign({spriteId:i,state:{identifier:t,text:o.text,color:Oi(o.color),isInverted:o.isInverted,seed:r||El[t]||o.seed,padding:o.padding,width:o.width},transform:a},n,!0)}},this.changeColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{color:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.color=r.color,e.state.set(e.id,n)}}},this.colorSnapshot=function(){e.addSnapshot(ho.EDIT,e.locale.history.color)},this.invertBackground=function(){if(e.id){var t=e.state.get(e.id);if(t){e.editor.spriteStore.setContainerProperties(e.id,{inverted:!t.isInverted},!0);var n=e.editor.spriteStore.getContainerProperties(e.id);t.isInverted=n.inverted,e.state.set(e.id,t),e.addSnapshot(ho.EDIT,e.locale.history.invert)}}},this.changeWidth=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.width=t,e.state.set(e.id,n))}},this.changePadding=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.padding=t,e.state.set(e.id,n))}},this.editor=t,this.entityManager=new vo([{identifier:"",name:"",items:this.editor.assetProvider.getAssets("textdesign")}],_(_({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find((function(t){return t.identifier===Cl.identifier}))||(Cl.identifier=this.entityManager.items[0].identifier),Cl.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=rn(Oi(this.config.colors)))}return t.defaultText=function(){return Cl.text},t.prototype.loadfonts=function(t){var e=this;if(this.fontsLoaded)t();else{var n=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForTextDesign().map((function(t){return t.identifier}));n.loadFontsWithIdentifiers(r).then((function(){e.fontsLoaded=!0,t()})).catch((function(t){console.error(t),e.editor.modalStore.showActionModal({type:z.ERROR,identifier:"fontLoading",error:r[0]})}))}},t.prototype.doesTextDesignAssetExist=function(t){return-1!==this.entityManager.items.findIndex((function(e){return e.identifier===t}))},t.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.updateStateFromHistory=function(t,e){var n=this.state.get(t);e.identifier===n.identifier?(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)):this.changeIdentifier(e.identifier,!1,e.seed,t)},t.prototype.setState=function(t,e){var n=this.state.get(t);n?(e.inverted&&(n.isInverted=e.inverted),e.seed&&(n.seed=e.seed),e.color&&(n.color=e.color),e.padding&&(n.padding=e.padding),e.width&&(n.width=e.width)):this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:Cl.color,padding:e.padding})},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:Oi(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.addSnapshot=function(t,e){this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.delete=function(t){void 0===t&&(t=this.id),t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())},t.prototype.pureReset=function(){this.state=lr.map(Rl)},Object.defineProperty(t.prototype,"isTextDesignSelected",{get:function(){return this.editor.spriteStore.isSpriteTextDesign},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTextDesign",{get:function(){if(this.isTextDesignSelected&&this.id){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isTextDesignSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.currentTextDesign?this.currentTextDesign.text:Cl.text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.currentTextDesign?this.currentTextDesign.seed:Cl.seed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.currentTextDesign?this.currentTextDesign.padding:Cl.padding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.currentTextDesign?this.currentTextDesign.width:Cl.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.currentTextDesign?this.currentTextDesign.identifier:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInverted",{get:function(){return this.currentTextDesign?this.currentTextDesign.isInverted:Cl.isInverted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.currentTextDesign?this.currentTextDesign.color:Cl.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),w([ui],t.prototype,"addOrselect",null),w([ui],t.prototype,"selectLast",null),w([ui],t.prototype,"add",void 0),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"setState",null),w([ui],t.prototype,"changeText",void 0),w([ui],t.prototype,"setEditMode",void 0),w([ui],t.prototype,"duplicate",null),w([ui],t.prototype,"bringToFront",null),w([ui],t.prototype,"delete",null),w([ui],t.prototype,"changeSeed",void 0),w([ui],t.prototype,"changeIdentifier",void 0),w([ui],t.prototype,"changeColor",void 0),w([ui],t.prototype,"invertBackground",void 0),w([ui],t.prototype,"changeWidth",void 0),w([ui],t.prototype,"changePadding",void 0),w([ui],t.prototype,"pureReset",null),w([dr],t.prototype,"isTextDesignSelected",null),w([dr],t.prototype,"isEditMode",null),w([dr],t.prototype,"currentTextDesign",null),w([dr],t.prototype,"id",null),w([dr],t.prototype,"text",null),w([dr],t.prototype,"seed",null),w([dr],t.prototype,"padding",null),w([dr],t.prototype,"width",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"isInverted",null),w([dr],t.prototype,"color",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"localeColor",null),w([dr],t.prototype,"entities",null),t}(),Pl=function(t){return{height:t.y,width:t.x}},Il={},Al={x:0,y:0},Fl=function(){function t(t){var e=this;this.state=lr.map(Il),this.selectedId=lr.box("none"),this.editMode=lr.box(!1),this.dragMode=lr.box(!1),this.minLength=0,this.setEditMode=function(t){e.currentSprite&&-1!==[j.TEXT,j.TEXT_DESIGN].indexOf(e.tool)&&(t?e.editor.modalStore.showTextEditModal():e.editor.modalStore.hideModal(),e.editMode.set(t))},this.onWidthDrag=function(t){var n=t.x,r=t.y,i=new R(e.currentSprite.position),o=new R(n,r).subtract(i).magnitude,a=e.editor.previewToWorld(2*o);if(a>e.minLength&&(e.setContainerProperties(e.id,{width:a},!0),e.isSpriteText)){var s=e.getContainerProperties(e.id);e.textToolStore.changeWidth(s.width)}},this.onPaddingDrag=function(t){var n=t.x,r=t.y;if(e.isSpriteTextDesign){var i=e.getContainerProperties(e.id),o=new R(e.currentSprite.position),a=new R(n,r).subtract(o).magnitude,s=Math.max(e.editor.previewToWorld(a)-i.width/2,0);e.setContainerProperties(e.id,{padding:s},!0),e.isSpriteTextDesign&&(i=e.getContainerProperties(e.id),e.textDesignToolStore.changePadding(i.padding))}},this.correctTextFlip=function(){var t=e.editor.outputContainer.getData(),n=t.flipHorizontally,r=t.flipVertically;Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||(t.setFlipHorizontally(n),t.setFlipVertically(r))}))},this.reverseTextHorizontally=function(){Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||t.setFlipHorizontally(!t.getFlipHorizontally())}))},this.reverseTextVertically=function(){Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||t.setFlipVertically(!t.getFlipVertically())}))},this.updatePositionAndSize=function(t,n){void 0===t&&(t=e.id),void 0===n&&(n=!1);var r=e.getSizePositionFromContainer(t),i=r.position,o=r.size,a=e.state.get(t);if(a){if(a.position.x=i.x,a.position.y=i.y,a.size.width=o.width,a.size.height=o.height,n){var s=e.container[t].getRotation();e.container[t].setRotation(s),a.rotation=e.container[t].getRotation()}e.state.set(t,a)}},this.getSize=function(t){void 0===t&&(t=e.id);var n=e.container[t];return n?e.editor.worldSizeToPreview(n.getSizeInWorldSpace()):{width:0,height:0}},this.editor=t,this.container={},this.stickerToolStore=new xl(t),this.textToolStore=new Tl(t),this.textDesignToolStore=new Dl(t),this.rect=new Kl(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}return t.magnitude=function(t,e){return new R(t,e||t).magnitude},t.sizeMagnitude=function(t){return Math.sqrt(t.width*t.width+t.height*t.height)},t.prototype.addSticker=function(t,e){return void 0===e&&(e=!0),x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this.addStickerAsync(t,e)];case 1:return n.sent(),[2]}}))}))},t.prototype.addStickerAsync=function(e,n){var r=e.spriteId,i=e.state,o=e.transform;return void 0===n&&(n=!0),x(this,void 0,void 0,(function(){var e=this;return O(this,(function(a){return[2,new Promise((function(a,s){o=e.getInitialTransform(o);var l=i.identifier,u=e.editor.orderHelper.addSprite(l);e.editor.engine.addStickerFromAssets(l,e.editor.engineMediator.image.container,u).then((function(s){return x(e,void 0,void 0,(function(){var e,u,c,f,p,h,d,y,g;return O(this,(function(m){switch(m.label){case 0:return r&&s.setData({id:r}),e=s.getID(),this.container[e]=s,this.editor.orderHelper.renameSprite(l,e),(u=this.getSize(e)).width*=s.getScale().x,u.height*=s.getScale().y,s.setPivot(.5,.5),o.scale?c=o.scale:o.size?c={x:o.size.width/u.width,y:o.size.height/u.height}:(f=.4*this.editor.shortestOutputSide,p=t.magnitude(f)/t.sizeMagnitude(s.getSizeInWorldSpace()),c={x:p,y:p}),h=this.editor.outputContainer.getData(),d=h.flipHorizontally,y=h.flipVertically,s.setFlipHorizontally(d),s.setFlipVertically(y),s.setTransform({position:o.position,scale:c,rotation:o.rotation}),void 0!==i.flipHorizontally&&s.setFlipHorizontally(i.flipHorizontally!==d),void 0!==i.flipVertically&&s.setFlipVertically(i.flipVertically!==y),this.setContainerProperties(e,_({},i)),g=s.getData(),this.setInitialSpriteState(e,j.STICKER),this.stickerToolStore.setState(e,_(_({},g),{identifier:l})),[4,this.editor.renderPromise()];case 1:return m.sent(),n&&(this.selectedId.set(e),this.addSnapshot(ho.ADD,this.stickerLocale.add)),a(),[2]}}))}))})).catch((function(t){console.error(t),s()}))}))]}))}))},t.prototype.addText=function(t,e){return void 0===e&&(e=!0),x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this.addTextAsync(t,e)];case 1:return n.sent(),[2]}}))}))},t.prototype.addTextAsync=function(t,e){var n=this,r=t.spriteId,i=t.state,o=t.transform;return void 0===e&&(e=!0),new Promise((function(t,a){o=n.getInitialTransform(o);var s=n.editor.orderHelper.addSprite(i.identifier),l=n.editor.shortestOutputSide,u={fontIdentifier:i.identifier,text:i.text,width:i.width||.6*l,fontSize:i.fontSize||.1*l,lineHeight:i.lineHeight,alignment:i.alignment,textColor:i.textColor,backgroundColor:i.backgroundColor};i.backgroundColor===Ol.backgroundColor&&delete u.backgroundColor,n.editor.engine.addTextWithFontLoading(u,n.editor.engineMediator.image.container,s).then((function(a){return x(n,void 0,void 0,(function(){var n,s,l,u,c;return O(this,(function(f){switch(f.label){case 0:return r&&a.setData({id:r}),n=a.getID(),this.container[n]=a,this.editor.orderHelper.renameSprite(i.identifier,this.id),s=this.editor.outputContainer.getData(),l=s.flipHorizontally,u=s.flipVertically,a.setFlipHorizontally(l),a.setFlipVertically(u),a.setPivot(.5,.5),a.setPosition(o.position),a.setRotation(o.rotation),this.setInitialSpriteState(n,j.TEXT),c=a.getData(),this.textToolStore.setState(n,_({},c)),[4,this.editor.renderPromise()];case 1:return f.sent(),e&&(this.selectedId.set(n),this.addSnapshot(ho.ADD,this.textLocale.add)),t(),[2]}}))}))})).catch((function(t){console.error(t),a()}))}))},t.prototype.addTextDesign=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!1),x(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this.addTextDesignAsync(t,e,n)];case 1:return r.sent(),[2]}}))}))},t.prototype.addTextDesignAsync=function(t,e,n){var r=this,i=t.spriteId,o=t.state,a=t.transform;return void 0===e&&(e=!0),void 0===n&&(n=!1),new Promise((function(t,s){a=r.getInitialTransform(a);var l=r.editor.orderHelper.addSprite(o.identifier),u=r.editor.shortestOutputSide,c={width:o.width||.6*u,text:o.text,color:o.color,inverted:o.isInverted,seed:o.seed,padding:o.padding};r.editor.engine.addTextDesignAsync(o.identifier,c,r.editor.engineMediator.image.container,l).then((function(s){return x(r,void 0,void 0,(function(){var r,l,u,c,f;return O(this,(function(p){switch(p.label){case 0:return i&&(n&&(this.pureRemoveSprite(i),this.textDesignToolStore.state.delete(i)),s.setData({id:i})),r=s.getID(),this.container[r]=s,this.editor.orderHelper.renameSprite(o.identifier,this.id),l=this.editor.outputContainer.getData(),u=l.flipHorizontally,c=l.flipVertically,s.setFlipHorizontally(u),s.setFlipVertically(c),s.setPivot(.5,.5),s.setPosition(a.position),s.setRotation(a.rotation),this.setInitialSpriteState(r,j.TEXT_DESIGN),f=s.getData(),this.textDesignToolStore.setState(r,_(_({},f),{identifier:o.identifier})),[4,this.editor.renderPromise()];case 1:return p.sent(),e&&(this.selectedId.set(r),this.addSnapshot(ho.ADD,this.textDesignLocale.add)),t(),[2]}}))}))})).catch((function(t){console.error(t),s()}))}))},t.prototype.spriteLocalTransform=function(){return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.setContainerProperties=function(t,e,n){void 0===n&&(n=!1),this.container[t].setData(e),n&&this.updatePositionAndSize(),this.editor.render()},t.prototype.setContainerPosition=function(t,e){this.container[t].setPosition(e)},t.prototype.pureRemoveSprite=function(t){return this.editor.engine.removeContainer(this.container[t]),-1===this.container[t].getIndexInParent()&&(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0)},t.prototype.deleteSprite=function(t){void 0===t&&(t=this.id);var e=this.state.get(t);e.tool===j.STICKER?this.stickerToolStore.delete():e.tool===j.TEXT?this.textToolStore.delete():e.tool===j.TEXT_DESIGN&&this.textDesignToolStore.delete()},t.prototype.removeSprite=function(t){this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.spriteSnapshot=function(t){this.addSnapshot(ho.EDIT,this.historyLocale[t])},t.prototype.updateStateFromHistory=function(t){return x(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,l,u,c,f,p=this;return O(this,(function(h){switch(h.label){case 0:if(e=Object.keys(this.container),(n=t.spriteIdList).length===e.length)return[3,9];r=e.filter((function(t){return-1===n.indexOf(t)})),i=n.filter((function(t){return-1===e.indexOf(t)})),r.forEach((function(t){p.pureRemoveSprite(t)})),o=0,h.label=1;case 1:return o<i.length?(a=i[o],s=t.common?t.common[a]:void 0,l=t.text?t.text[a]:void 0,u=t.sticker?t.sticker[a]:void 0,c=t.textdesign?t.textdesign[a]:void 0,s?(f={spriteId:a,transform:{size:s.size?Pl(R.fromSize(s.size)):void 0,position:new R(s.position),rotation:s.rotation}},l?[4,this.addNewText(f,l)]:[3,3]):[3,7]):[3,8];case 2:return h.sent(),[3,7];case 3:return c?[4,this.addNewTextDesign(f,c)]:[3,5];case 4:return h.sent(),[3,7];case 5:return u?[4,this.addNewSticker(f,_(_({},u),{flipHorizontally:s.flipHorizontally,flipVertically:s.flipVertically}))]:[3,7];case 6:h.sent(),h.label=7;case 7:return o+=1,[3,1];case 8:return[3,10];case 9:this.updateSpriteStateFromHistory(t),h.label=10;case 10:return[2]}}))}))},t.prototype.addNewText=function(t,e){return x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this.textToolStore.doesTextAssetExist(e.identifier)?[4,this.addTextAsync(_(_({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("Text identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.addNewTextDesign=function(t,e){return x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this.textDesignToolStore.doesTextDesignAssetExist(e.identifier)?[4,this.addTextDesignAsync(_(_({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("TextDesign identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.addNewSticker=function(t,e){return x(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this.stickerToolStore.doesStickerAssetExist(e.identifier)?[4,this.addStickerAsync(_(_({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("Sticker identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.updateSpriteStateFromHistory=function(t){return x(this,void 0,void 0,(function(){var e=this;return O(this,(function(n){return Object.keys(this.container).forEach((function(n){var r=t.common?t.common[n]:void 0,i=t.sticker?t.sticker[n]:void 0,o=t.text?t.text[n]:void 0,a=t.textdesign?t.textdesign[n]:void 0,s=e.state.get(n);if(s&&r){e.state.set(n,s);var l=e.container[n];l.setPosition(new R(r.position)),l.setRotation(r.rotation),s.rotation=l.getRotation(),void 0!==r.flipHorizontally&&l.setFlipHorizontally(r.flipHorizontally),void 0!==r.flipVertically&&l.setFlipVertically(r.flipVertically),i?(l.setSizeInWorldSpace(r.size),e.stickerToolStore.updateStateFromHistory(n,i)):o?e.textToolStore.updateStateFromHistory(n,_(_({},o),{fontIdentifier:o.identifier})):a&&e.textDesignToolStore.updateStateFromHistory(n,_(_({},a),{inverted:a.isInverted})),e.updatePositionAndSize(n)}})),[2]}))}))},t.prototype.getSpriteHistoryState=function(){var t,e=this,n=Oi(this.state),r=Oi(this.textToolStore.state),i=Oi(this.textDesignToolStore.state),o=((t={common:n})[j.STICKER]=Oi(this.stickerToolStore.state),t[j.TEXT]=r,t[j.TEXT_DESIGN]=i,t.spriteIdList=Object.keys(this.container),t);return Object.keys(o.common).forEach((function(t){o.common[t].size=e.container[t].getSizeInWorldSpace(),o.common[t].position=e.container[t].getPosition(),o.common[t].order=e.container[t].getIndexInParent()})),o},t.prototype.updateStateFromSerialization=function(t,e){return x(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,f,p,h,d,y,g,m,v;return O(this,(function(b){switch(b.label){case 0:if(!e||!e.length)return[3,5];b.label=1;case 1:return b.trys.push([1,4,,5]),n=e.map((function(t){return vl(t.raster.data,!0)})),[4,Promise.all(n)];case 2:return r=b.sent(),[4,this.stickerToolStore.addCustomStickerAsset(e.map((function(t,e){return{image:r[e].image,smallImage:r[e].smallImage,name:t.name,type:t.raster.type,id:t.identifier}})))];case 3:return b.sent(),[3,5];case 4:return b.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading"),[3,5];case 5:i=0,b.label=6;case 6:return i<t.spriteIdList.length?(o=t.spriteIdList[i],a=t.common?t.common[o]:void 0,s=t.sticker?t.sticker[o]:void 0,l=t.text?t.text[o]:void 0,u=t.textdesign?t.textdesign[o]:void 0,a?((c=a.size)&&(c={width:this.editor.worldToPreview(a.size.width),height:this.editor.worldToPreview(a.size.height)}),f=this.editor.outputContainer.getData(),p=f.flipHorizontally,h=f.flipVertically,d=this.editor.outputContainer.getRotation(),y=h!==p?a.rotation-d:a.rotation+d,g=h!==p?-y:y,m={spriteId:o,transform:{size:c,position:a.position,rotation:g}},l?(v=this.textToolStore.validFontWithConfig(l.identifier),l.identifier=null==v?void 0:v.identifier,[4,this.addNewText(m,l)]):[3,8]):[3,12]):[3,13];case 7:return b.sent(),[3,12];case 8:return u?[4,this.addNewTextDesign(m,u)]:[3,10];case 9:return b.sent(),[3,12];case 10:return s?[4,this.addNewSticker(m,_(_({},s),{flipHorizontally:a.flipHorizontally,flipVertically:a.flipVertically}))]:[3,12];case 11:b.sent(),b.label=12;case 12:return i+=1,[3,6];case 13:return[2]}}))}))},Object.defineProperty(t.prototype,"serializableState",{get:function(){var t=this,e=this.editor.spriteStore.getSpriteHistoryState();Object.keys(e.common).forEach((function(n){var r=t.editor.outputContainer.getData(),i=r.flipHorizontally,o=r.flipVertically,a=t.editor.outputContainer.getRotation(),s=o!==i?-e.common[n].rotation:e.common[n].rotation;e.common[n].rotation=o!==i?s+a:s-a}));var n=this.editor.spriteStore.stickerToolStore.customStickerIds.map((function(e){var n=e.identifier,r=e.type,i=t.editor.spriteStore.stickerToolStore.entities.find((function(t){return n===t.identifier}));if(i){var o=t.editor.assetProvider.getStickerAsset(i.identifier);if(ht(o))return{identifier:n,raster:{type:r,name:i.name,data:o.sticker}}}})).filter(Boolean);return{sprite:e,customStickers:n}},enumerable:!0,configurable:!0}),t.prototype.updateCanvasControls=function(){var t=this;Object.keys(this.container).forEach((function(e){t.updatePositionAndSize(e,!0);var n=t.state.get(e);if(n)if(n.tool===j.TEXT){var r=t.getContainerProperties(e);t.textToolStore.changeSize(e,r)}else if(n.tool===j.TEXT_DESIGN){r=t.getContainerProperties(e);t.textToolStore.changeWidth(r.width)}}))},t.prototype.setDragMode=function(t){this.dragMode.set(t)},t.prototype.setPosition=function(t){var e=this.currentSprite,n=this.container[this.id];if(e&&n){n.setPosition(this.editor.previewToWorld(t));var r=this.getSizePositionFromContainer().position;e.position.x=r.x,e.position.y=r.y,this.state.set(this.id,e),this.editor.render()}},t.prototype.setSize=function(t){var e=this.currentSprite;e&&(e.size.width=t.width,e.size.height=t.height,this.state.set(this.id,e))},t.prototype.setRotation=function(t){var e=this.currentSprite;if(e){var n=this.editor.outputContainer.getData(),r=n.flipHorizontally,i=n.flipVertically,o=this.editor.outputContainer.getRotation(),a=Xe({rotation:t+o,flipHorizontally:r,flipVertically:i});this.container[this.id].setRotation(a),e.rotation=this.container[this.id].getRotation(),this.state.set(this.id,e),this.editor.render()}},t.prototype.onCanvasClick=function(t){this.isEditMode||this.selectHighestOrderSprite(t)},t.prototype.select=function(t){var e=this.state.get(t);e&&(this.editor.activeStore.tool!==e.tool&&this.editor.activeStore.selectTool(e.tool),this.selectedId.set(t))},t.prototype.selectLast=function(){var t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)},t.prototype.selectNext=function(){var t=this;if(this.currentSprite){var e=this.container[this.id].getIndexInParent();if(e){var n=Object.keys(this.container).find((function(n){return t.container[n].getIndexInParent()===e-1}));n&&this.select(n)}}},t.prototype.deselect=function(){this.selectedId.set("none")},t.prototype.bringToFront=function(t){var e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e),this.spriteSnapshot("order"),this.editor.render()},t.prototype.flipHorizontally=function(t){var e=this.state.get(t),n=this.container[t];n.setFlipHorizontally(!n.getFlipHorizontally()),e.flipHorizontally=n.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,e),this.editor.render()},t.prototype.pureReset=function(){var t=this;this.selectedId.set("none"),Array.from(this.state.keys()).forEach((function(e){t.pureRemoveSprite(e)})),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},t.prototype.selectHighestOrderSprite=function(t){var e=this,n=this.editor.brushToolStore.containerId();if((t=t.filter((function(t){return t!==n}))).length<1)this.deselect();else{var r="",i=0;t.forEach((function(t){var n=e.container[t],o=n&&n.getIndexInParent()||0;o>=i&&(i=o,r=t)})),this.select(r)}},t.prototype.onCornerDrag=function(e){var n=e.x,r=e.y;if(this.currentSprite){var i=new R(this.currentSprite.position),o=new R(n,r),a=o.subtract(i).magnitude,s=this.getSize(),l=2*a/t.sizeMagnitude(s);if(a>this.minLength)if(this.isSpriteSticker)if("unrestricted"!==this.stickerToolStore.resizeMode)this.setStickerSize({width:s.width*l,height:s.height*l});else{var u=this.rotationWRTOutputRotation,c=o.subtract(i),f=Math.cos(u),p=Math.sin(u),h=Math.max(Math.abs(c.x*f*2+c.y*p*2),this.minLength),d=Math.max(Math.abs(c.x*-p*2+c.y*f*2),this.minLength);this.setStickerSize({width:h,height:d})}else this.isSpriteText?this.setTextSize(s.width*l):this.isSpriteTextDesign&&this.setTextDesignScale(l);this.editor.render()}},Object.defineProperty(t.prototype,"currentSprite",{get:function(){if(this.isSpriteSelected)return this.state.get(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.textDesignToolStore.padding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.selectedId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteSelected",{get:function(){return"none"!==this.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){if(this.currentSprite)return this.currentSprite.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tool",{get:function(){if(this.currentSprite)return this.currentSprite.tool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){if(this.currentSprite)return this.currentSprite.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){if(this.currentSprite)return this.currentSprite.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationWRTOutputRotation",{get:function(){if(this.currentSprite){var t=this.editor.outputContainer.getData(),e=t.flipHorizontally,n=t.flipVertically,r=this.editor.outputContainer.getRotation();return Xe({rotation:this.currentSprite.rotation-r,flipHorizontally:e,flipVertically:n})}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipHorizontal",{get:function(){if(this.currentSprite)return this.currentSprite.flipHorizontally},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteSticker",{get:function(){return this.tool===j.STICKER},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteText",{get:function(){return this.tool===j.TEXT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteTextDesign",{get:function(){return this.tool===j.TEXT_DESIGN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spritePosition",{get:function(){if(this.currentSprite){var t=this.currentSprite.position,e=t.x,n=t.y,r=this.currentSprite.size,i=r.height,o=r.width;return{x:Math.round(e-o/2),y:Math.round(n-i/2)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRect",{get:function(){if(this.currentSprite)return this.rect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTopPosition",{get:function(){if(this.currentSprite)return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomPosition",{get:function(){if(this.currentSprite)return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMidPosition",{get:function(){if(this.currentSprite)return this.rect.leftMid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMidPadPosition",{get:function(){if(this.currentSprite){var t=this.rect.leftMid;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTopPosition",{get:function(){if(this.currentSprite)return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomPosition",{get:function(){if(this.currentSprite)return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMidPosition",{get:function(){if(this.currentSprite)return this.rect.rightMid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMidPadPosition",{get:function(){if(this.currentSprite){var t=this.rect.rightMid;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.leftBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.rightBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"historyLocale",{get:function(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickerLocale",{get:function(){return this.editor.configStore.locale[j.STICKER].history},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textLocale",{get:function(){return this.editor.configStore.locale[j.TEXT].history},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textDesignLocale",{get:function(){return this.editor.configStore.locale[j.TEXT_DESIGN].history},enumerable:!0,configurable:!0}),t.prototype.getOutputProperties=function(){return this.editor.outputContainer.getData()},t.prototype.getContainerProperties=function(t){return this.container[t].getData()},t.prototype.getContainerTransform=function(t){return this.container[t].getTransform()},t.prototype.getDuplicateContainerTransform=function(t){var e=this.container[t].getTransform(),n=.1*this.editor.shortestOutputSide,r=new R(e.position).add(new R(n,n));return _(_({},e),{position:r})},t.prototype.getDuplicateContainerFlip=function(t){return{flipHorizontally:this.container[t].getFlipHorizontally(),flipVertically:this.container[t].getFlipVertically()}},t.prototype.getInitialTransform=function(t){var e=this.editor.outputToWorld(Al);return t?_({position:e},t):{rotation:this.editor.outputContainer.getRotation(),position:e}},t.prototype.setInitialSpriteState=function(t,e){var n=this.container[t],r=this.getSizePositionFromContainer(t),i=r.position,o=r.size,a=n.getRotation(),s=e===j.STICKER&&n.getFlipHorizontally(),l=e===j.STICKER&&n.getFlipVertically();this.state.set(t,{tool:e,position:i,rotation:a,size:o,flipHorizontally:s,flipVertically:l})},t.prototype.setStickerSize=function(t){var e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));var n=this.currentSprite;n&&(n.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace()),this.state.set(this.id,n))},t.prototype.setTextSize=function(t){var e=this.getContainerProperties(this.id),n={width:this.editor.previewToWorld(t)},r=n.width/e.width,i={fontSize:Math.round(e.fontSize*r)},o=this.isSpriteText?_(_({},n),i):n;n.width>this.minLength&&i.fontSize&&(this.setContainerProperties(this.id,o,!0),e=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(e.fontSize,!0),this.textToolStore.changeWidth(e.width))},t.prototype.setTextDesignScale=function(t){var e=this.getContainerProperties(this.id),n=e.width*t;if(n>this.minLength){this.setContainerProperties(this.id,{width:n},!0);var r=this.getContainerProperties(this.id).width;this.textDesignToolStore.changeWidth(r),e=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(e.padding)}},t.prototype.getSizePositionFromContainer=function(t){void 0===t&&(t=this.id);var e=this.container[t];return e?{position:this.editor.worldToPreview(e.getPosition()),size:this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}:{position:{x:0,y:0},size:{height:1,width:1}}},w([ui],t.prototype,"addSticker",null),w([ui],t.prototype,"addStickerAsync",null),w([ui],t.prototype,"addText",null),w([ui],t.prototype,"addTextAsync",null),w([ui],t.prototype,"addTextDesign",null),w([ui],t.prototype,"addTextDesignAsync",null),w([ui],t.prototype,"clickableCanvas",null),w([ui],t.prototype,"setContainerProperties",null),w([ui],t.prototype,"setContainerPosition",null),w([ui],t.prototype,"pureRemoveSprite",null),w([ui],t.prototype,"deleteSprite",null),w([ui],t.prototype,"removeSprite",null),w([ui],t.prototype,"addSnapshot",null),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"addNewText",null),w([ui],t.prototype,"addNewTextDesign",null),w([ui],t.prototype,"addNewSticker",null),w([ui],t.prototype,"updateSpriteStateFromHistory",null),w([ui],t.prototype,"updateStateFromSerialization",null),w([ui],t.prototype,"updateCanvasControls",null),w([ui],t.prototype,"setEditMode",void 0),w([ui],t.prototype,"setDragMode",null),w([ui],t.prototype,"setPosition",null),w([ui],t.prototype,"setSize",null),w([ui],t.prototype,"setRotation",null),w([ui],t.prototype,"onCanvasClick",null),w([ui],t.prototype,"select",null),w([ui],t.prototype,"selectLast",null),w([ui],t.prototype,"selectNext",null),w([ui],t.prototype,"deselect",null),w([ui],t.prototype,"bringToFront",null),w([ui],t.prototype,"flipHorizontally",null),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"onCornerDrag",null),w([ui],t.prototype,"onWidthDrag",void 0),w([ui],t.prototype,"onPaddingDrag",void 0),w([ui],t.prototype,"correctTextFlip",void 0),w([ui],t.prototype,"reverseTextHorizontally",void 0),w([ui],t.prototype,"reverseTextVertically",void 0),w([dr],t.prototype,"currentSprite",null),w([dr],t.prototype,"padding",null),w([dr],t.prototype,"isEditMode",null),w([dr],t.prototype,"isDragMode",null),w([dr],t.prototype,"id",null),w([dr],t.prototype,"isSpriteSelected",null),w([dr],t.prototype,"position",null),w([dr],t.prototype,"tool",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"rotation",null),w([dr],t.prototype,"rotationWRTOutputRotation",null),w([dr],t.prototype,"flipHorizontal",null),w([dr],t.prototype,"isSpriteSticker",null),w([dr],t.prototype,"isSpriteText",null),w([dr],t.prototype,"isSpriteTextDesign",null),w([dr],t.prototype,"spritePosition",null),w([dr],t.prototype,"currentRect",null),w([dr],t.prototype,"leftTopPosition",null),w([dr],t.prototype,"leftBottomPosition",null),w([dr],t.prototype,"leftMidPosition",null),w([dr],t.prototype,"leftMidPadPosition",null),w([dr],t.prototype,"rightTopPosition",null),w([dr],t.prototype,"rightBottomPosition",null),w([dr],t.prototype,"rightMidPosition",null),w([dr],t.prototype,"rightMidPadPosition",null),w([dr],t.prototype,"leftBottomHandlePosition",null),w([dr],t.prototype,"rightBottomHandlePosition",null),w([dr],t.prototype,"historyLocale",null),w([dr],t.prototype,"stickerLocale",null),w([dr],t.prototype,"textLocale",null),w([dr],t.prototype,"textDesignLocale",null),t}(),jl={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Ml={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:lr.map({})},Bl=function(){function t(t,e){this.minCropSize=0,this.state=Ml,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=e}return t.prototype.changeIdentifier=function(t){this.state.identifier=t,this.state.cropState.get(t)||this.state.cropState.set(t,_({},jl))},t.prototype.changeRatio=function(t){var e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,_(_({},e),{ratio:t}))},t.prototype.changeSize=function(t){var e=this.state.cropState.get(this.identifier);e&&(t.width&&t.width>0&&(e.size.width=Math.round(t.width)),t.height&&t.height>0&&(e.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,e))},t.prototype.changeHeight=function(t){var e=this.state.cropState.get(this.identifier);e&&t&&(e.size.height=Math.round(t),this.state.cropState.set(this.identifier,e))},t.prototype.changeWidth=function(t){var e=this.state.cropState.get(this.identifier);e&&t&&(e.size.width=Math.round(t),this.state.cropState.set(this.identifier,e))},t.prototype.changePositionX=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t<=e-this.minCropSize&&t>=0)&&(n.position.x=Math.round(t),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changePositionY=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t<=e-this.minCropSize&&t>=0)&&(n.position.y=Math.round(t),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changePosition=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0)&&(n.position.x=Math.round(t.x),n.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changeLockResolution=function(t){var e=this.state.cropState.get(this.identifier);e&&(e.lockResolution=void 0!==t?t:!e.lockResolution,this.state.cropState.set(this.identifier,e))},t.prototype.changeForceDimensions=function(t){var e=this.state.cropState.get(this.identifier);e&&(e.forceDimensions=t,this.state.cropState.set(this.identifier,e))},t.prototype.setRotation=function(t){this.state.rotationInDegrees=t},t.prototype.resetRotation=function(){this.state.rotationInDegrees=0},t.prototype.resetOutputRotation=function(){this.state.outputRotation=0},t.prototype.resetFlip=function(){this.state.flipHorizontally=!1,this.state.flipVertically=!1},t.prototype.updateFlip=function(t){var e=t.flipHorizontally,n=t.flipVertically;this.state.flipHorizontally=e,this.state.flipVertically=n},t.prototype.setOutputRotation=function(t){this.state.outputRotation=t},t.prototype.flipHorizontally=function(){this.state.flipHorizontally=!this.state.flipHorizontally},t.prototype.flipVertically=function(){this.state.flipVertically=!this.state.flipVertically},Object.defineProperty(t.prototype,"flipCenter",{get:function(){var t=this.defaults.maxCropMaskSize,e=t.width,n=t.height;return new R(e/2,n/2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedHorizontal",{get:function(){return this.state.flipHorizontally},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedVertical",{get:function(){return this.state.flipVertically},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.selectedCrop?this.selectedCrop.size.height:jl.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.selectedCrop?this.selectedCrop.size.width:jl.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.selectedCrop?this.selectedCrop.position:jl.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){return this.selectedCrop?this.selectedCrop.ratio:jl.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.selectedCrop?this.selectedCrop.size:jl.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.selectedCrop?this.selectedCrop.position.x:jl.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.selectedCrop?this.selectedCrop.position.y:jl.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockResolution",{get:function(){return this.selectedCrop?this.selectedCrop.lockResolution:jl.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceDimensions",{get:function(){return this.selectedCrop?this.selectedCrop.forceDimensions:jl.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCrop",{get:function(){return this.state.cropState.get(this.identifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationInDegrees",{get:function(){return this.state.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputRotation",{get:function(){return this.state.outputRotation},enumerable:!0,configurable:!0}),w([lr],t.prototype,"state",void 0),w([ui],t.prototype,"changeIdentifier",null),w([ui],t.prototype,"changeRatio",null),w([ui],t.prototype,"changeSize",null),w([ui],t.prototype,"changeHeight",null),w([ui],t.prototype,"changeWidth",null),w([ui],t.prototype,"changePositionX",null),w([ui],t.prototype,"changePositionY",null),w([ui],t.prototype,"changePosition",null),w([ui],t.prototype,"changeLockResolution",null),w([ui],t.prototype,"changeForceDimensions",null),w([ui],t.prototype,"setRotation",null),w([ui],t.prototype,"resetRotation",null),w([ui],t.prototype,"resetOutputRotation",null),w([ui],t.prototype,"resetFlip",null),w([ui],t.prototype,"updateFlip",null),w([ui],t.prototype,"setOutputRotation",null),w([ui],t.prototype,"flipHorizontally",null),w([ui],t.prototype,"flipVertically",null),w([dr],t.prototype,"flipCenter",null),w([dr],t.prototype,"isFlippedHorizontal",null),w([dr],t.prototype,"isFlippedVertical",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"height",null),w([dr],t.prototype,"width",null),w([dr],t.prototype,"position",null),w([dr],t.prototype,"ratio",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"x",null),w([dr],t.prototype,"y",null),w([dr],t.prototype,"lockResolution",null),w([dr],t.prototype,"forceDimensions",null),w([dr],t.prototype,"selectedCrop",null),w([dr],t.prototype,"rotationInDegrees",null),w([dr],t.prototype,"outputRotation",null),t}(),zl=function(){function t(t){this.transforms={output:JSON.stringify(E.IDENTITY),preview:JSON.stringify(E.IDENTITY)},this.editor=t,this.overlayOpacity=0,this.frameOpacity=0}return t.rotateOutput=function(t,e){switch(t%=360){case 90:case-270:return e.swapped.multiply(-1,1);case 180:case-180:return e.multiply(-1);case 270:case-90:return e.swapped.multiply(1,-1);default:return e}},t.prototype.onLeave=function(){var t=this.transformToolStore.rotateFlipState,e=t.flipHorizontally,n=t.flipVertically,r=t.rotation,i=t.outputRotation;"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(this.frameOpacity);var o=this.editor.previewToWorld(new R(this.transformToolStore.leftTopRespectFlip).add(new R(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new R(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),a=this.engineMediator.preview.container,s=this.editor.outputContainer;s.setResolution(Oi(this.transformToolStore.localOutputImageSize)),s.setData({flipVertically:n,flipHorizontally:e});var l=a.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();var u=1;if(this.transformToolStore.lockResolution){var c=this.transformToolStore,f=c.cropMaskSize,p=c.defaultImageSize,h=this.transformToolStore.maxCropMaskSize;u={height:f.height*p.height/h.height,width:f.width*p.width/h.width}.width/this.transformToolStore.localOutputImageSize.width}var d=u/(Math.abs(l.x)/this.transformToolStore.defaultScale),y={x:d,y:d},g=-(r-i);s.setTransform({scale:y,position:o,rotation:g}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()},t.prototype.onEnter=function(){"identity"!==this.editor.overlayToolStore.identifier&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),"identity"!==this.editor.frameToolStore.identifier&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.scale.setScaleToDefault();var t=this.engineMediator.preview.container,e=this.editor.outputContainer,n=JSON.parse(this.transforms.preview);e.setResolution(Oi(this.transformToolStore.defaultImageSize)),t.setTransform(n),e.setTransform(JSON.parse(this.transforms.output));var r=n.scale;e.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0}),this.engineMediator.preview.savePreviewTransform(n);var i=this.engineMediator.preview.calculateTransform().scale;this.editor.scale.setInitialTransform(i.x)},t.prototype.rotateOutputContainer=function(t){var e=this;void 0===t&&(t=!1),this.editor.outputContainer.rotate90(t),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());var n=this.transformToolStore.rotateFlipState.rotation;this.engineMediator.preview.updateTransform(n),ci((function(){e.editor.scale.setInitialTransform();var t=e.getScaleWithFlip(n);e.engineMediator.preview.container.setScale(t),e.transformToolStore.setCropDefaults(!0),e.transformToolStore.updateCropMask()})),this.editor.render()},t.prototype.applyPreviewTransform=function(){var t=this.transformToolStore.rotateFlipState,e=t.rotation,n=t.flipHorizontally,r=t.flipVertically,i=this.editor.scale.getPositionWithOffset(),o=this.getScaleWithFlip(),a=e;n&&(a=Ze(a)),r&&(a=Ze(a));var s={position:i,rotation:a,scale:o};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)},t.prototype.getScaleWithFlip=function(t){void 0===t&&(t=this.transformToolStore.rotateFlipState.rotation);var e=this.transformToolStore.rotateFlipState,n=e.flipHorizontally?-1:1,r=e.flipVertically?-1:1,i=this.editor.scale.calculateScale(t);return{x:i*n,y:i*r}},t.prototype.saveTransforms=function(){var t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}},t.prototype.saveTransformsBasedOnFlip=function(){var t=this.engineMediator.preview.container.getTransform(),e=t.scale,n=this.editor.outputContainer.getData(),r=n.flipVertically,i=n.flipHorizontally,o=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(_(_({},t),{scale:{x:i?-e.x:e.x,y:r?-e.y:e.y}})),output:o}},Object.defineProperty(t.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformToolStore",{get:function(){return this.editor.transformToolStore},enumerable:!0,configurable:!0}),t}(),Ll=function(){function t(e){var n=this;this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=lr.box(!1),this.minCropSize=0,this.localSnapshotEnabled=!0,this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=function(t){var e=n.editor.configStore.config.assetBaseUrl;if("/"!==e[e.length-1]&&(e+="/"),e+"transform"===t)return!1;var r=new Image;try{return r.src=t,!0}catch(t){return!1}},this.reset=function(){n.transformStore.resetRotation(),n.transformStore.resetOutputRotation(),n.transformStore.resetFlip(),n.editor.spriteStore.correctTextFlip(),n.editor.overlayToolStore.correctOverlayFlip(),n.setDefaultAngle(0),0!==n.editor.outputContainer.getRotation()&&n.engineMediator.output.applyNewImageTransform(),n.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),n.engineMediator.preview.updateTransform(),n.editor.scale.setInitialTransform(),n.setCropDefaults(),n.applyInitialCrop(),n.editor.render()},this.changeLocalOutputSize=function(t){n.localOutputSize.height=Math.round(t.height),n.localOutputSize.width=Math.round(t.width)},this.changeDefaultScale=function(t){n.defaults.scale=t},this.changeLocalOutputHeight=function(t){n.localOutputSize.height=Math.round(t)},this.changeLocalOutputWidth=function(t){n.localOutputSize.width=Math.round(t)},this.changeLockResolution=function(){n.transformStore.changeLockResolution(),n.addLocalSnapshot()},this.rotateClockwise=function(){n.rotateOutputContainer(n.isFlippedVertical!==n.isFlippedHorizontal)},this.rotateAntiClockwise=function(){n.rotateOutputContainer(n.isFlippedVertical===n.isFlippedHorizontal)},this.flipHorizontally=function(t){void 0===t&&(t=!0),n.transformStore.flipHorizontally(),n.editor.spriteStore.reverseTextHorizontally(),n.transformRender(t),t&&n.addLocalSnapshot()},this.flipVertically=function(t){void 0===t&&(t=!0),n.transformStore.flipVertically(),n.editor.spriteStore.reverseTextVertically(),n.transformRender(t),t&&n.addLocalSnapshot()},this.applyDefaultCrop=function(t){if(void 0===t&&(t=!1),"identity"===n.identifier){var e=n.getMatchingItem().identifier;n.changeIdentifier(e,t)}},this.updateCropMask=function(){n.changeIdentifier(n.identifier,!0)},this.onLeftTop=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.rightBottom,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.min(Math.max(0,e),o.x-s.width),c=Math.min(Math.max(0,r),o.y-s.height),f=o.x-u,p=o.y-c,h={width:Math.max(n.minCropSize,Math.min(f,l.width-u)),height:Math.max(n.minCropSize,Math.min(p,l.height-c))};if("*"===i)n.changePosition({x:u,y:c})&&n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h),y=new R(o).rounded.subtract({x:d.width,y:d.height});n.changePosition(y)&&n.changeCropAndOutputSize(d)}},this.onLeftBottom=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.rightTop,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.min(Math.max(0,e),o.x-s.width),c=Math.max(0,r,o.y+s.height),f=o.x-u,p=c-o.y,h={width:Math.max(1,Math.min(f,l.width-u)),height:Math.max(1,Math.min(p,l.height-o.y))};if("*"===i){n.changeCropAndOutputSize(h)&&n.changePositionX(u)}else{var d=n.proportionalSize(i,h);n.changePositionX(Math.round(o.x)-d.width)&&n.changeCropAndOutputSize(d)}},this.onRightTop=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.leftBottom,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.max(0,e,o.x+s.width),c=Math.min(Math.max(0,r),o.y-s.height),f=u-o.x,p=o.y-c,h={width:Math.max(1,Math.min(f,l.width-o.x)),height:Math.max(1,Math.min(p,l.height-c))};if("*"===i)n.changePositionY(c)&&n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h);n.changePositionY(Math.round(o.y)-d.height)&&n.changeCropAndOutputSize(d)}},this.onRightBottom=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.leftTop,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.max(0,e,o.x+s.width),c=Math.max(0,r,o.y+s.height),f=u-o.x,p=c-o.y,h={width:Math.max(1,Math.min(f,l.width-o.x)),height:Math.max(1,Math.min(p,l.height-o.y))};if("*"===i)n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h);n.changeCropAndOutputSize(d)}},this.onPixelWidth=function(e){var r=JSON.stringify(Oi(n.localOutputSize)),i=n.entityManager.items.find((function(t){return t.identifier===n.identifier})),o=n.defaults.imageSize;if(i&&i.ratio){var a=e,s=n.localOutputSize.height,l=i.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=t.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.width),n.minCropSize))/l,n.changeLocalOutputSize({height:s,width:a})}else a=Math.max(Math.min(e,o.width),n.minCropSize),n.changeLocalOutputWidth(a);return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(r)),Math.round(a)}return e},this.onPixelHeight=function(e){var r=JSON.stringify(Oi(n.localOutputSize)),i=n.entityManager.items.find((function(t){return t.identifier===n.identifier})),o=n.defaults.imageSize;if(i&&i.ratio){var a=e,s=n.localOutputSize.width,l=i.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=t.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.height),n.minCropSize))*l,n.changeLocalOutputSize({height:a,width:s})}else a=Math.max(Math.min(e,o.height),n.minCropSize),n.changeLocalOutputHeight(a);return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(r)),Math.round(a)}return e},this.closestRatioReducer=function(t){return function(e,n){return e.ratio&&"number"==typeof e.ratio||n.ratio&&"number"==typeof n.ratio?n.ratio&&"number"==typeof n.ratio?e.ratio&&"number"==typeof e.ratio&&Math.abs(t-e.ratio)<Math.abs(t-n.ratio)?e:n:e:{}}},this.closestDimensionsReducer=function(t){return function(e,n){if((!e.dimensions||e.ratio)&&(!n.dimensions||n.ratio))return{};if(!n.dimensions||n.ratio)return e;if(!e.dimensions||e.ratio)return n;var r=Math.abs(e.dimensions.x/e.dimensions.y),i=Math.abs(n.dimensions.x/n.dimensions.y);return r===i?e.dimensions.x*e.dimensions.y>n.dimensions.x*n.dimensions.y?e:n:Math.abs(t-r)<Math.abs(t-i)?e:n}},this.getMatchingItem=function(){var t=n.entityManager.items.findIndex((function(t){return"imgly_transform_common_custom"===t.identifier}));if(-1!==t)return n.entityManager.items[t];var e=n.entityManager.items.findIndex((function(t){return"*"===t.ratio}));if(-1!==e)return n.entityManager.items[e];var r=Oi(n.editor.outputContainer.getResolution()),i=Math.abs(r.width/r.height),o=n.entityManager.items.reduce(n.closestRatioReducer(i)),a=n.entityManager.items.reduce(n.closestDimensionsReducer(i));if(!Object.prototype.hasOwnProperty.call(o,"ratio")&&!Object.prototype.hasOwnProperty.call(a,"dimensions"))return n.entityManager.items[0];if(!Object.prototype.hasOwnProperty.call(a,"dimensions"))return o;if(!Object.prototype.hasOwnProperty.call(o,"ratio"))return a;var s=Math.abs(a.dimensions.x/a.dimensions.y);return s===o.ratio||Math.abs(i-o.ratio)<Math.abs(i-s)?o:a},this.getTransform=function(t){var e=n.entityManager.items.find((function(e){return e.identifier===t}));return e||(e=n.getMatchingItem()),e},this.editor=e,this.selectedCategory="identity",this.transformStore=new Bl(e,this.defaults),this.transformations=new zl(e);var r=this.config,i=(r.enableRotation,r.enableFlip,b(r,["enableRotation","enableFlip"])),o=this.editor.assetProvider.getAssets("transform");this.entityManager=new vo(o,_(_({},i),{categoryKey:"",itemKey:"thumbnailURI",locale:_(_({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new Kl(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new Kl(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}return t.inRadians=function(t){return t*Math.PI/180},t.placeCropMask=function(t,e){if(e.height*t>e.width)return{height:e.width/t,width:e.width,yChanged:!0};var n=e.height*t;return{height:e.height,width:n,yChanged:!1}},t.prototype.changeIdentifier=function(t,e){void 0===e&&(e=!1),this.transformStore.changeIdentifier(t);var n=this.getCropMask(t,this.defaults.imageSize);n&&(this.transformStore.changeRatio(n.ratio),this.changeLocalOutputSize(n),this.updatePreviewSizeWRTImageSize(),void 0!==n.yChanged&&this.updateInitialCropMaskPosition(n.yChanged),n.dimensions&&this.changeLocalOutputSize({width:n.dimensions.x,height:n.dimensions.y}),e&&this.addLocalSnapshot())},t.prototype.setDragMode=function(t){this.dragMode.set(t)},t.prototype.getCropMask=function(e,n){var r=this.getTransform(e);if(r){var i=r.ratio,o=r.forceDimensions,a=r.lockDimensions,s=r.dimensions,l=void 0===s?null:s;if(o&&this.transformStore.changeForceDimensions(o),a&&this.transformStore.changeLockResolution(a),!i){var u=r.dimensions,c=u.x,f=u.y;return _(_({},t.placeCropMask(c/f,n)),{ratio:null,dimensions:l})}switch(i){case"*":return this.changePosition({x:0,y:0}),_(_({},n),{yChanged:void 0,ratio:"*",dimensions:l});default:return _(_({},t.placeCropMask(r.ratio,n)),{ratio:r.ratio,dimensions:l})}}return null},t.prototype.setCropDefaults=function(t){void 0===t&&(t=!1);var e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);var n=this.editor.getPreviewSize(),r=this.editor.engineMediator.preview.previewTransformWithoutDpr.position;this.setMaxCropSize(n),this.setDefaultCropPosition({x:r.x-n.width/2,y:r.y-n.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)},t.prototype.setDefaultImageSize=function(t){this.defaults.imageSize=_({},Oi(t)),this.lockResolution||(this.localOutputSize=_({},Oi(t)))},t.prototype.setMaxCropSize=function(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width},t.prototype.setDefaultCropPosition=function(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y},t.prototype.resetCrop=function(){this.state.cropState=lr.map({}),this.state.identifier="identity"},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.pureReset=function(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.resetCrop()},t.prototype.changePosition=function(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)},t.prototype.changePositionX=function(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)},t.prototype.changePositionY=function(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)},t.prototype.changeCropAndOutputHeight=function(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeHeight(t),this.lockResolution||this.changeLocalOutputHeight(t*this.defaults.imageSize.height/this.defaults.maxCropMaskSize.height),!0)},t.prototype.changeCropAndOutputWidth=function(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeWidth(t),this.lockResolution||this.changeLocalOutputWidth(t*this.defaults.imageSize.width/this.defaults.maxCropMaskSize.width),!0)},t.prototype.changeCropAndOutputSize=function(t){return{widthChanged:this.changeCropAndOutputHeight(t.height),heightChanged:this.changeCropAndOutputWidth(t.width)}},t.prototype.transformRender=function(t){void 0===t&&(t=!0),this.transformations.applyPreviewTransform(),t&&this.editor.render()},t.prototype.addLocalSnapshot=function(t){if(void 0===t&&(t="Local "+this.locale.title),this.localSnapshotEnabled){var e=this.state,n=(e.cropState,b(e,["cropState"]));this.editor.addLocalTransformSnapshot(_(_(_({},n),this.cropState),{localOutputSize:Oi(this.localOutputSize),outputSize:this.engineMediator.output.container.getResolution(),defaults:Oi(this.defaults),previewTransform:this.engineMediator.preview.container.getTransform(),outputTransform:this.engineMediator.output.container.getTransform()}),t)}},t.prototype.updateLocalStateFromHistory=function(t){this.editor.activeStore.tool===j.TRANSFORM&&(this.transformStore.changeLockResolution(t.lockResolution),this.transformStore.changeForceDimensions(t.forceDimensions),this.transformStore.changeIdentifier(t.identifier),this.transformStore.setRotation(t.rotationInDegrees),this.setDefaultAngle(t.rotationInDegrees),this.transformStore.setOutputRotation(t.outputRotation),this.transformStore.updateFlip(t),this.engineMediator.output.container.setRotation(t.outputRotation),this.setDefaultImageSize(t.defaults.imageSize),this.localOutputSize=t.defaults.imageSize,this.changeLocalOutputSize(t.localOutputSize),this.transformStore.changeSize(t.size),this.changePosition(t.position),this.setMaxCropSize(t.defaults.maxCropMaskSize),this.setDefaultCropPosition(t.defaults.cropMaskPosition),this.changeDefaultScale(t.defaults.scale),this.engineMediator.output.container.setResolution(t.outputSize),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setTransform(t.outputTransform))},t.prototype.updateStateFromHistory=function(t){this.editor.activeStore.tool!==j.TRANSFORM&&(this.engineMediator.output.container.setTransform(t.outputTransform),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setResolution(t.outputSize),this.changeLocalOutputSize(t.outputSize))},Object.defineProperty(t.prototype,"serializableState",{get:function(){var t=this.rotateFlipState,e=t.flipHorizontally,n=t.flipVertically,r=180*this.editor.engineMediator.output.container.getRotation()/Math.PI%360,i=this.identifier,o=this.rotationInDegrees,a=o*Math.PI/180,s=r+o;s=(360-(s=(s=90*Math.round(s/90))<0?s+360:s))%360;var l=this.convertUIToOperationOptions(a,s);return{flipHorizontally:e,flipVertically:n,rotation:a,start:l.start,end:l.end,identifier:i,outputRotation:s}},enumerable:!0,configurable:!0}),t.prototype.getStartEndForOperation=function(t){var e=this.leftTop,n=this.rightBottom,r=this.maxCropMaskSize,i=e.y,o=e.x,a=n.x,s=n.y;switch(t){case 270:return{leftTop:{x:r.height-s,y:o},rightBottom:{x:r.height-i,y:a}};case 180:return{leftTop:{x:r.width-a,y:r.height-s},rightBottom:{x:r.width-o,y:r.height-i}};case 90:return{leftTop:{x:i,y:r.width-a},rightBottom:{x:s,y:r.width-o}}}return{leftTop:{x:o,y:i},rightBottom:{x:a,y:s}}},t.prototype.getStartEndForUI=function(t,e,n){var r=this.maxCropMaskSize,i=e.y,o=e.x,a=n.x,s=n.y;switch(t){case 90:return{leftTop:{x:i,y:r.height-a},rightBottom:{x:s,y:r.height-o}};case 180:return{leftTop:{x:r.width-a,y:r.height-s},rightBottom:{x:r.width-o,y:r.height-i}};case 270:return{leftTop:{x:r.width-s,y:o},rightBottom:{x:r.width-i,y:a}}}return{leftTop:{x:o,y:i},rightBottom:{x:a,y:s}}},t.prototype.convertOperationOptionsToUI=function(t){var e=t.start,n=t.end,r=t.rotation,i=t.outputRotation,o=90===i||270===i,a=o?R.fromSize(this.defaultImageSize).swapped:R.fromSize(this.defaultImageSize),s=Math.cos(r),l=Math.sin(r),u=this.calculateScale(r),c=new R(Math.min(e.x,n.x),Math.min(e.y,n.y)),f=new R(Math.max(e.x,n.x),Math.max(e.y,n.y)).subtract(c).divide(2),p=c.add(f).multiply(a).subtract(a.multiply(.5)),h=new R(p.x*s-p.y*l,p.x*l+p.y*s).multiply(u),d=a.multiply(.5).add(h).divide(a),y=d.subtract(f.multiply(u)),g=d.add(f.multiply(u)),m=o?R.fromSize(this.maxCropMaskSize).swapped:R.fromSize(this.maxCropMaskSize),v=y.multiply(m),_=g.multiply(m),b=this.getStartEndForUI(i,v,_),w=b.leftTop,x=b.rightBottom;return{start:new R(w),end:new R(x)}},t.prototype.convertUIToOperationOptions=function(t,e){var n=90===e||270===e,r=n?R.fromSize(this.defaultImageSize).swapped:R.fromSize(this.defaultImageSize),i=n?R.fromSize(this.maxCropMaskSize).swapped:R.fromSize(this.maxCropMaskSize),o=Math.cos(-t),a=Math.sin(-t),s=this.calculateScale(t,n),l=this.getStartEndForOperation(e),u=l.leftTop,c=l.rightBottom,f=new R(u).divide(i),p=new R(c).divide(i).subtract(f).divide(2),h=f.add(p).multiply(r).subtract(r.multiply(.5)),d=new R(h.x*o-h.y*a,h.x*a+h.y*o).divide(s),y=r.multiply(.5).add(d).divide(r);return{start:y.subtract(p.divide(s)),end:y.add(p.divide(s))}},t.prototype.calculateScale=function(t,e){void 0===e&&(e=!1);var n=e?R.fromSize(this.defaultImageSize).swapped:R.fromSize(this.defaultImageSize),r=new R(Math.abs(n.x*Math.cos(t))+Math.abs(n.y*Math.sin(t)),Math.abs(n.x*Math.sin(t))+Math.abs(n.y*Math.cos(t))),i=n.subtract(r.clone()).divide(2).abs;return i.y>i.x?2*i.y/n.y+1:2*i.x/n.x+1},t.prototype.updateStateFromSerialization=function(t,e){this.localSnapshotEnabled=e,this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();var n=Math.round(180*t.rotation/Math.PI);this.transformStore.setRotation(n>180?n-360:n),this.applyOutputRotationFromSerialization(t),t.identifier&&this.transformStore.changeIdentifier(t.identifier);var r=t.outputRotation<0?t.outputRotation+360:t.outputRotation;if(r=(360-r)%360,t.start&&t.end){0!==t.end.x&&0!==t.end.y||(t.end.x=1,t.end.y=1);var i=this.convertOperationOptionsToUI({start:new R(t.start),end:new R(t.end),rotation:t.rotation,outputRotation:r}),o=i.start,a=i.end;this.changePositionX(o.x),this.changePositionY(o.y);var s=a.x-o.x,l=a.y-o.y;this.transformStore.changeSize({width:s,height:l});var u=this.defaults,c=u.maxCropMaskSize,f=u.imageSize,p={height:l*f.height/c.height,width:s*f.width/c.width};this.changeLocalOutputSize(p)}this.editor.outputContainer.setData({flipHorizontally:t.flipHorizontally,flipVertically:t.flipVertically}),t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip(),this.localSnapshotEnabled=!0},t.prototype.applyOutputRotationFromSerialization=function(t){if(void 0!==t.outputRotation)switch(t.outputRotation){case 90:this.transformations.rotateOutputContainer();break;case 180:this.transformations.rotateOutputContainer(),this.transformations.rotateOutputContainer();break;case 270:this.transformations.rotateOutputContainer(!0)}this.transformations.rotateOutputContainer(!0),this.transformations.rotateOutputContainer()},t.prototype.setDefaultAngle=function(t){this.defaultAngle=t},t.prototype.updateCanvasControls=function(t){var e=Oi(this.cropMaskPosition),n=Oi(this.cropMaskSize),r=Oi(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*n.height/t.height,width:r.width*n.width/t.width}),this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})},t.prototype.onLeave=function(){this.transformations.onLeave()},t.prototype.onEnter=function(){this.transformations.onEnter()},t.prototype.saveTransforms=function(){this.transformations.saveTransforms()},t.prototype.saveTransformsBasedOnFlip=function(){this.transformations.saveTransformsBasedOnFlip()},t.prototype.setRotation=function(t){this.transformStore.setRotation(t),this.transformRender()},t.prototype.rotateOutputContainer=function(t){return void 0===t&&(t=!1),x(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.setDragMode(!0),this.transformations.rotateOutputContainer(t),[4,this.editor.wait()];case 1:return e.sent(),this.setDragMode(!1),[2]}}))}))},t.prototype.applyInitialCrop=function(){var t=this.getMatchingItem().identifier;this.changeIdentifier(t,!1)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.proportionalSize=function(t,e,n,r){void 0===n&&(n=this.defaults.maxCropMaskSize),void 0===r&&(r=this.minCropSize);var i={width:e.height*t,height:e.height};return(i.width>n.width||i.width<r||i.height<r)&&(i.width=e.width,i.height=e.width/t),i.width=Math.round(i.width),i.height=Math.round(i.height),i},t.prototype.checkAndAddSnapshot=function(t){var e=Oi(this.localOutputSize);t.width===e.width&&t.height===e.height||this.addLocalSnapshot()},t.prototype.updateInitialCropMaskPosition=function(t){var e=this.cropMaskSize,n=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(n.height-e.height)/2}):this.changePosition({x:Math.abs(n.width-e.width)/2,y:0})},t.prototype.updatePreviewSizeWRTImageSize=function(){var t=Oi(this.localOutputSize),e=Oi(this.defaults.imageSize),n=Oi(this.defaults.maxCropMaskSize),r={height:n.height*t.height/e.height,width:n.width*t.width/e.width};this.transformStore.changeSize(r)},t.prototype.getScaleWithFlip=function(t){return void 0===t&&(t=this.rotateFlipState.rotation),this.transformations.getScaleWithFlip(t)},Object.defineProperty(t.prototype,"cropState",{get:function(){return this.transformStore.selectedCrop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.transformStore.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){return this.transformStore.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.transformStore.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.transformStore.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputImageSize",{get:function(){return this.localOutputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputHeight",{get:function(){return this.localOutputSize.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputWidth",{get:function(){return this.localOutputSize.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockResolution",{get:function(){return this.transformStore.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceDimensions",{get:function(){return this.transformStore.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationInDegrees",{get:function(){return this.transformStore.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputRotation",{get:function(){return this.transformStore.outputRotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotateFlipState",{get:function(){var e=this.transformStore.state,n=e.flipHorizontally,r=e.flipVertically,i=e.rotationInDegrees,o=e.outputRotation;return{flipHorizontally:n,flipVertically:r,rotation:t.inRadians(i),outputRotation:o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.entityManager.categories.reduce((function(t,e){return T(t,vo.isCategory(e)?e.items:[e])}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTop",{get:function(){return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottom",{get:function(){return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTop",{get:function(){return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottom",{get:function(){return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedHorizontal",{get:function(){return this.transformStore.isFlippedHorizontal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedVertical",{get:function(){return this.transformStore.isFlippedVertical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTopRespectFlip",{get:function(){return this.rectForUi.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomRespectFlip",{get:function(){return this.rectForUi.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTopRespectFlip",{get:function(){return this.rectForUi.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomRespectFlip",{get:function(){return this.rectForUi.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cropMaskPosition",{get:function(){return this.transformStore.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cropMaskSize",{get:function(){return this.transformStore.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.transformStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultImageSize",{get:function(){return this.defaults.imageSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxCropMaskSize",{get:function(){return this.defaults.maxCropMaskSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minCropMaskSize",{get:function(){var t=this.getRatio();return"*"===t||1===t?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultCropMaskPosition",{get:function(){return this.defaults.cropMaskPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultScale",{get:function(){return this.defaults.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),t.prototype.getRatio=function(){var t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;var e=t.dimensions;return e.x/e.y}return"*"},w([lr],t.prototype,"selectedCategory",void 0),w([lr],t.prototype,"defaults",void 0),w([lr],t.prototype,"localOutputSize",void 0),w([ui],t.prototype,"changeIdentifier",null),w([ui],t.prototype,"setDragMode",null),w([ui],t.prototype,"setCropDefaults",null),w([ui],t.prototype,"setDefaultImageSize",null),w([ui],t.prototype,"setMaxCropSize",null),w([ui],t.prototype,"setDefaultCropPosition",null),w([ui],t.prototype,"resetCrop",null),w([ui],t.prototype,"toggleCategorySelection",null),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"changePosition",null),w([ui],t.prototype,"changePositionX",null),w([ui],t.prototype,"changePositionY",null),w([ui],t.prototype,"changeCropAndOutputHeight",null),w([ui],t.prototype,"changeCropAndOutputWidth",null),w([ui],t.prototype,"changeCropAndOutputSize",null),w([ui],t.prototype,"onLeave",null),w([ui],t.prototype,"onEnter",null),w([ui],t.prototype,"changeLocalOutputSize",void 0),w([ui],t.prototype,"changeDefaultScale",void 0),w([ui],t.prototype,"changeLocalOutputHeight",void 0),w([ui],t.prototype,"changeLocalOutputWidth",void 0),w([ui],t.prototype,"changeLockResolution",void 0),w([ui],t.prototype,"setRotation",null),w([ui],t.prototype,"rotateClockwise",void 0),w([ui],t.prototype,"rotateAntiClockwise",void 0),w([ui],t.prototype,"rotateOutputContainer",null),w([ui],t.prototype,"flipHorizontally",void 0),w([ui],t.prototype,"flipVertically",void 0),w([ui],t.prototype,"applyDefaultCrop",void 0),w([ui],t.prototype,"applyInitialCrop",null),w([ui],t.prototype,"updateCropMask",void 0),w([ui],t.prototype,"clickableCanvas",null),w([ui],t.prototype,"onLeftTop",void 0),w([ui],t.prototype,"onLeftBottom",void 0),w([ui],t.prototype,"onRightTop",void 0),w([ui],t.prototype,"onRightBottom",void 0),w([ui],t.prototype,"proportionalSize",null),w([ui],t.prototype,"onPixelWidth",void 0),w([ui],t.prototype,"onPixelHeight",void 0),w([ui],t.prototype,"updateInitialCropMaskPosition",null),w([ui],t.prototype,"updatePreviewSizeWRTImageSize",null),w([dr],t.prototype,"cropState",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"ratio",null),w([dr],t.prototype,"height",null),w([dr],t.prototype,"width",null),w([dr],t.prototype,"localOutputImageSize",null),w([dr],t.prototype,"localOutputHeight",null),w([dr],t.prototype,"localOutputWidth",null),w([dr],t.prototype,"lockResolution",null),w([dr],t.prototype,"forceDimensions",null),w([dr],t.prototype,"rotationInDegrees",null),w([dr],t.prototype,"outputRotation",null),w([dr],t.prototype,"isDragMode",null),w([dr],t.prototype,"rotateFlipState",null),w([dr],t.prototype,"selectedCategoryIdentifier",null),w([dr],t.prototype,"categories",null),w([dr],t.prototype,"entities",null),w([dr],t.prototype,"items",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"isOptionSelected",null),w([dr],t.prototype,"leftTop",null),w([dr],t.prototype,"leftBottom",null),w([dr],t.prototype,"rightTop",null),w([dr],t.prototype,"rightBottom",null),w([dr],t.prototype,"isFlippedHorizontal",null),w([dr],t.prototype,"isFlippedVertical",null),w([dr],t.prototype,"leftTopRespectFlip",null),w([dr],t.prototype,"leftBottomRespectFlip",null),w([dr],t.prototype,"rightTopRespectFlip",null),w([dr],t.prototype,"rightBottomRespectFlip",null),w([dr],t.prototype,"cropMaskPosition",null),w([dr],t.prototype,"cropMaskSize",null),w([dr],t.prototype,"state",null),w([dr],t.prototype,"defaultImageSize",null),w([dr],t.prototype,"maxCropMaskSize",null),w([dr],t.prototype,"minCropMaskSize",null),w([dr],t.prototype,"defaultCropMaskPosition",null),w([dr],t.prototype,"defaultScale",null),t}(),Nl=function(){function t(t){var e=this;this.checkImageResize=function(){e.engine.on(zt.BEGAN_IMAGE_DOWNSCALING,(function(){e.modalStore.showInfoModal("resizing")})),e.engine.on(zt.IMAGE_DOWNSCALED,(function(){}))},this.init=function(t){e.historyStore.isDirty()?e.modalStore.showActionModal({type:z.WARNING,identifier:"discardChanges",handleConfirm:function(){e.setImage(t),e.resetToolStates()},handleDismiss:function(){e.setImage(t,!0)}}):e.setImage(t,!0).then((function(){var t=e.configStore.config,n=t.engine,r=t.displayCanvasRendererWarning;"canvas"===n.preferredRenderer&&r&&e.modalStore.showActionModal({type:z.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:function(){e.modalStore.hideModal()}})})),e.historyStore.reset(),e.libraryStore.fetchImages()},this.setImage=function(t,n){return void 0===n&&(n=!1),x(e,void 0,void 0,(function(){var e,r,i,o;return O(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),[4,this.activeStore.setImage(t)];case 1:return a.sent(),[4,this.engineMediator.image.addImageToContainer()];case 2:return a.sent(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.historyStore.addInitialSnapshot(),e=this.transformToolStore.rotateFlipState,r=e.flipHorizontally,i=e.flipVertically,this.outputContainer.setData({flipVertically:i,flipHorizontally:r}),n?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransformsBasedOnFlip(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),[4,this.renderPromise()];case 3:return a.sent(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool||this.onReady(),this.modalStore.hideModal(),[3,5];case 4:return o=a.sent(),this.configStore.events.onErrorImageLoading(o),this.modalStore.hideModal(),this.modalStore.showActionModal({type:z.ERROR,identifier:o.identifier?o.identifier:"rendering",error:o,handleConfirm:function(){window.location.reload()}}),[3,5];case 5:return[2]}}))}))},this.onToolChange=function(t,n,r){if(void 0===n&&(n=null),void 0===r&&(r=!0),t!==n&&e.engineMediator.preview.container){if(-1!==[t,n].indexOf(j.TRANSFORM)){var i=e.canvasStore.canvasSize,o=e.configStore.measurements.basicToolControlBar.controlsBarHeight;if(t===j.TRANSFORM){e.transformToolStore.onLeave(),e.historyStore.removeTransformLocalSnapshots();var a=e.engineMediator.preview.container.getScale().x,s=e.engineMediator.output.container.getResolution(),l=e.transformToolStore.defaultImageSize;(1!==a||l.width!==s.width||l.height!==s.height)&&e.addSnapshot(void 0,ho.EDIT,e.configStore.locale.transform.title),e.snappingStore.calculatePreviewTopLeftPosition(),e.configStore.isLayoutAdvanced||(e.canvasStore.state.canvasSize.height=i.height+o,e.resize(!0))}else n===j.TRANSFORM&&(e.configStore.isLayoutAdvanced||(e.canvasStore.state.canvasSize.height=i.height-o,e.resize(),e.render()),e.transformToolStore.onEnter(),e.transformToolStore.addLocalSnapshot(),e.historyStore.saveTransformLocalSnapshotIndex())}else e.scale.resetOffset(),e.scale.resetPosition(),e.scale.setScaleToDefault(),e.scale.scaleRender(!0);r&&e.render()}},this.resize=function(t){void 0===t&&(t=!1);try{e.transformToolStore.applyDefaultCrop(),e.canvasStore.updateCanvasDimensions();var n=Oi(e.transformToolStore.maxCropMaskSize),r=e.activeStore.tool===j.TRANSFORM;r&&!t||e.transformToolStore.onEnter();var i=e.engineMediator.preview.container.getRotation();if(e.engineMediator.preview.updateTransform(i)){e.scale.setInitialTransform(),e.transformToolStore.setCropDefaults(),e.transformToolStore.updateCanvasControls(n),e.focusToolStore.updateCanvasControls(),e.spriteStore.updateCanvasControls();var o=e.transformToolStore.getScaleWithFlip(i);e.engineMediator.preview.container.setScale(o),r&&!t||(e.transformToolStore.onLeave(),e.transformToolStore.onEnter(),e.transformToolStore.onLeave()),e.snappingStore.calculatePreviewTopLeftPosition(),e.render()}}catch(t){e.modalStore.showActionModal({type:z.ERROR,identifier:"rendering",handleConfirm:function(){window.location.reload()}})}},this.export=function(t){void 0===t&&(t={});var n=t.preventExportEvent,r=b(t,["preventExportEvent"]);return new Promise((function(t,i){e.modalStore.showInfoModal("exporting");var o=e.activeStore.tool===j.TRANSFORM;o&&e.transformToolStore.onLeave();var a=e.configStore.config,s=_(_({},a.export.image),r),l=s.exportType,u=s.format,c=s.quality,f=s.enableDownload;e.engineMediator.engine.export(l,u,c).then((function(r){f&&e.triggerFileDownload(a.export.filename,u,l,r),n||e.configStore.events.onExport(r),t(r),o&&e.transformToolStore.onEnter(),e.modalStore.hideModal(),e.historyStore.isDirtySinceSave=!1})).catch((function(t){i(t),o&&e.transformToolStore.onEnter(),e.modalStore.hideModal()}))}))},this.serialize=function(t){var n=(void 0===t?{image:!0}:t).image;return e.serializationMediator.serialize({image:n})},this.deserialize=function(t){return e.serializationMediator.deserialize(t)},this.close=function(){e.historyStore.isDirtySinceSave&&e.configStore.config.displayCloseWarning?e.modalStore.showActionModal({type:z.WARNING,identifier:"unsavedChanges",handleConfirm:function(){e.configStore.events.onClose()}}):e.configStore.events.onClose()},this.hasChanges=function(){return e.historyStore.isDirty()},this.wait=function(t){return void 0===t&&(t=0),new Promise((function(e){return setTimeout(e,t)}))},this.clickableCanvas=function(t){return x(e,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return t?[4,new Promise((function(t){return setTimeout(t,0)}))]:[3,2];case 1:return e.sent(),this.canvasStore.enableCanvasClick(),[3,3];case 2:this.canvasStore.disableCanvasClick(),e.label=3;case 3:return[2]}}))}))},this.onReady=function(){return x(e,void 0,void 0,(function(){var t,e,n,r,i,o;return O(this,(function(a){return t=this.configStore.config,e=t.layout,n=t.forceCrop,"advanced"===e&&this.activeStore.selectTool(this.configStore.defaultTool),n&&(r=this.transformToolStore.localOutputImageSize,i=r.width/r.height,-1!==(o=this.transformToolStore.entityManager.items.map((function(t){return"*"===t.ratio||t.ratio?t.ratio:t.dimensions.x/t.dimensions.y}))).indexOf("*")?console.error('ForceCrop will not work if "*" is one of the ratios'):-1===o.indexOf(i.toFixed(2))&&this.activeStore.selectTool(j.TRANSFORM)),this.configStore.events.onEditorReady(),[2]}))}))},this.addSnapshot=function(t,n,r){e.historyStore.addSnapshot(t,n,r)},this.addLocalTransformSnapshot=function(t,n,r){void 0===r&&(r=ho.EDIT),e.historyStore.addSnapshot({localTransform:t},r,n)},this.resetToolStates=function(){e.filterToolStore.pureReset(),e.focusToolStore.pureReset(),e.adjustmentsToolStore.pureReset(),e.overlayToolStore.pureReset(),e.frameToolStore.pureReset(),e.brushToolStore.pureReset(),e.spriteStore.pureReset(),e.transformToolStore.pureReset(),e.historyStore.reset(),e.render()},this.getAssetPath=function(t){return e.assetProvider.getPathForCategory(t)},this.render=function(){return x(e,void 0,void 0,(function(){return O(this,(function(t){switch(t.label){case 0:return[4,this.renderPromise()];case 1:return t.sent(),[2]}}))}))},this.applyFlipToPreview=function(t){return e.engineMediator.previewSpaceToFlippedPreviewSpace(t)},this.getPreviewSize=function(){var t=e.engine.getOutputDimensions(),n=t.width,r=t.height;return n&&r?{width:Math.round(e.worldToPreview(e.outputToWorld(n))),height:Math.round(e.worldToPreview(e.outputToWorld(r)))}:{height:r,width:n}},this.triggerFileDownload=function(t,n,r,i){var o=t+(n===Y.JPEG&&r!==X.MSBLOB?".jpeg":".png"),a=e.blobFromExportData(i);e.triggerBlobDownload(o,a)},this.triggerBlobDownload=function(t,e){if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=document.createElement("a"),r=URL.createObjectURL(e);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),void 0===i&&(i=Jt()),i.match(/iP(hone|od|ad)|AppleWebKit/)||URL.revokeObjectURL(r)}var i},this.blobFromExportData=function(t){return"string"==typeof t?hl(t):t instanceof HTMLImageElement?hl(t.src):t},this.configStore=new qo;var n=this.configStore.saveConfig(t);if(this.engineMediator=new Xl(this),this.serializationMediator=new nl(this),this.spriteStore=new Fl(this),this.scale=new tl(this),this.filterToolStore=new ko(this),this.adjustmentsToolStore=new wo(this),this.focusToolStore=new Jl(this),this.overlayToolStore=new pl(this),this.frameToolStore=new al(this),this.brushToolStore=new yl(this),this.transformToolStore=new Ll(this),this.libraryStore=new ll(this),this.modalStore=new $s(this),this.snappingStore=new ml(this),this.activeStore=new qs(this),this.canvasStore=new Qs(this),this.historyStore=new bo(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(n),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer){var r=this.configStore.config.engine;this.previewThumbnails=new Gs(_(_({},r),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}}return Object.defineProperty(t,"defaultColors",{get:function(){return Object.keys(on).map((function(t){var e=on[t];return{identifier:t,color:e,colorString:nn(e)}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultBackgroundColors",{get:function(){return Object.keys(an).map((function(t){var e=an[t];return{identifier:t,color:e,colorString:nn(e)}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"devicePixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shortestOutputSide",{get:function(){var t=this.outputContainer.getBounds();return Math.min(t.width,t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"assetProvider",{get:function(){return this.configStore.assetProvider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),t.prototype.renderPromise=function(){return this.engineMediator.render(this.engineMediator.preview.container)},t.prototype.previewToWorld=function(t,e){return I(t),this.engineMediator.previewSpaceToWorldSpace(t,e)},t.prototype.worldToPreview=function(t){return I(t),this.engineMediator.worldSpaceToPreviewSpace(t)},t.prototype.worldSizeToPreview=function(t){return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}},t.prototype.previewSizeToWorld=function(t,e){return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}},t.prototype.outputToWorld=function(t){return I(t),this.engineMediator.outputSpaceToWorldSpace(t)},t.prototype.previewToOutput=function(t){return I(t),this.engineMediator.previewSpaceToOutputSpace(t)},Object.defineProperty(t.prototype,"outputContainer",{get:function(){return this.engineMediator.output.container},enumerable:!0,configurable:!0}),w([ui],t.prototype,"resize",void 0),w([ui],t.prototype,"export",void 0),w([ui],t.prototype,"clickableCanvas",void 0),t}();function Ul(t,e){return t.width/t.height>e.width/e.height?t.height/e.height:t.width/e.width}var Wl,Hl,Gl={transform:E.IDENTITY},Vl=function(){function t(t){this.initialTransform=E.IDENTITY,this.editor=t,this.state=lr(Gl)}return t.prototype.createPreview=function(t){this.container=this.editor.engine.createPreview(t)},t.prototype.updateTransform=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var n=this.calculateTransform(t);return!!n.scale.x&&(e?this.saveInitialTransform(n):this.savePreviewTransform(n),this.container.setTransform(this.state.transform),!0)},t.prototype.saveInitialTransform=function(t){this.initialTransform=t,this.savePreviewTransform(t)},t.prototype.savePreviewTransform=function(t){var e=this;ci((function(){e.state.transform.position=t.position,e.state.transform.scale=t.scale,e.state.transform.rotation=t.rotation;var n=Nl.devicePixelRatio;e.previewTransformWithoutDpr={position:new R(t.position).divide(n),scale:new R(t.scale).divide(n),rotation:t.rotation}}))},Object.defineProperty(t.prototype,"transform",{get:function(){return this.state.transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.state.transform.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.state.transform.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.state.transform.rotation},enumerable:!0,configurable:!0}),t.prototype.calculateTransform=function(t){void 0===t&&(t=0);var e=Nl.devicePixelRatio,n=this.editor.canvasStore.canvasSize,r=n.width,i=n.height,o=this.editor.engine.getOutputDimensions(),a=Ul({width:r,height:i},o),s=.95;window.innerWidth<600&&(s=.98),a*=s;var l=i-o.height*a,u=2*this.editor.configStore.measurements.mainCanvasActionBar.height;return l<u&&(a=Ul({width:r,height:i-u},o),a*=s),new E({x:r*e/2,y:i*e/2},{x:a*=e,y:a},t)},w([ui],t.prototype,"updateTransform",null),w([ui],t.prototype,"savePreviewTransform",null),w([dr],t.prototype,"transform",null),w([dr],t.prototype,"position",null),w([dr],t.prototype,"scale",null),w([dr],t.prototype,"rotation",null),t}(),Zl=function(){function t(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}return t.checkTool=function(t){if(-1!==[j.STICKER,j.TEXT,j.TEXT_DESIGN,j.BRUSH,j.FRAME].indexOf(t))throw new Error("addIndex is used for non sprites, for sprites use addSprite")},t.remove=function(t,e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)},t.indexForOrder=function(t,e,n){var r=t[n],i=e.findIndex((function(t){return t===n}));if(-1!==i)return{index:i,order:e};var o=e.length;if(o){var a=void 0;for(a=0;a<o;a+=1){if(r<t[e[a]])return{index:a,order:e=T(e.slice(0,a),[n],e.slice(a))}}}return e.push(n),{index:e.length-1,order:e}},t.prototype.addIndex=function(e){t.checkTool(e);var n=t.indexForOrder(t.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e),r=n.index,i=n.order;return this.imageContainerOrder=i,r},t.prototype.removeIndex=function(e){t.checkTool(e),t.remove(e,this.imageContainerOrder)},t.prototype.addSprite=function(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1},t.prototype.removeSprite=function(e){t.remove(e,this.spriteContainerOrder)},t.prototype.renameSprite=function(t,e){var n=this.spriteContainerOrder.findIndex((function(e){return e===t}));-1!==n&&(this.spriteContainerOrder[n]=e)},t.prototype.bringToFront=function(t){var e=this.spriteContainerOrder.findIndex((function(e){return e===t}));return-1!==e&&(this.spriteContainerOrder.splice(e,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()},t.prototype.getLastSpriteId=function(){var t=this.spriteContainerOrder.length;return this.spriteContainerOrder[t-1]},t.prototype.getSpriteIndex=function(t){return this.spriteContainerOrder.findIndex((function(e){return e===t}))+this.imageContainerOrder.length-1},t.prototype.getLastSpriteIndex=function(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1},t.IMAGE_CONTAINER_INDEX=((Wl={})[j.ART_FILTER]=0,Wl[j.FILTER]=1,Wl[j.ADJUSTMENT]=2,Wl[j.FOCUS]=3,Wl[j.OVERLAY]=4,Wl),t}(),Xl=function(){function t(t){this.orderHelper=new Zl;var e=t.configStore.config.engine;this.engine=new Je(_(_({},e),{license:t.configStore.config.license,assetProvider:t.configStore.assetProvider})),this.image=new Ko(t),this.output=new Qo(t),this.preview=new Vl(t),this.editor=t}return t.prototype.render=function(t){return this.engine.render(t)},t.prototype.previewSpaceToWorldSpace=function(t,e){var n=this.preview.previewTransformWithoutDpr;if(I(t)){var r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(R.ZERO,n,e),i=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},n,e);return R.distance(new R(r),new R(i))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,n,e)},t.prototype.worldSpaceToPreviewSpace=function(t){var e=this.preview.previewTransformWithoutDpr;if(I(t)){var n=this.editor.engine.convertPointFromWorldIntoPreviewSpace(R.ZERO,e),r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return R.distance(new R(n),new R(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)},t.prototype.outputSpaceToWorldSpace=function(t){return I(t)?(e=t,n=this.editor.engine.getOutputContainer(),r=new R(e,0),i=new R(fe(r,n)),o=new R(fe(R.ZERO,n)),R.distance(i,o)):fe(t,this.editor.engine.getOutputContainer());var e,n,r,i,o},t.prototype.previewSpaceToOutputSpace=function(t){var e=this.preview.previewTransformWithoutDpr;if(I(t)){var n=this.editor.engine.convertPointFromPreviewIntoOutputSpace(R.ZERO,e),r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return R.distance(new R(n),new R(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)},t.prototype.previewSpaceToFlippedPreviewSpace=function(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)},t}(),Yl=[[0,0],[0,1],[1,0],[1,1]],ql=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],Kl=function(){function t(e,n,r,i,o){void 0===r&&(r="center"),void 0===i&&(i=!0),void 0===o&&(o=!1),this.considerRotation=!0,this.considerFlip=!0,this.store=n,this.m="center"===r?t.movePivotTo([.5,.5]):Yl,this.considerRotation=i,this.considerFlip=o,this.configStore=e.configStore}return t.getFlippedEdgeIndex=function(t,e,n){return ql[(e?1:0)+(n?2:0)][t]},t.movePivotTo=function(t){return Yl.map((function(e){return[e[0]-t[0],e[1]-t[1]]}))},Object.defineProperty(t.prototype,"position",{get:function(){return this.store.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.store.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.considerRotation?this.store.rotationWRTOutputRotation:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipHorizontally",{get:function(){return!!this.considerFlip&&this.store.isFlippedHorizontal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipVertically",{get:function(){return!!this.considerFlip&&this.store.isFlippedVertical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipCenter",{get:function(){return this.considerFlip?this.store.flipCenter:null},enumerable:!0,configurable:!0}),t.prototype.handleOrigin=function(e,n,r){var i=t.getFlippedEdgeIndex(e,n,r);return{width:this.m[i][0]*this.size.width,height:this.m[i][1]*this.size.height}},Object.defineProperty(t.prototype,"leftTop",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(0,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottom",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(1,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTop",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(2,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottom",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(3,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomHandle",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(1,n,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomHandle",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(3,n,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMid",{get:function(){var t=new R(this.leftTop),e=new R(this.leftBottom);return t.add(e).divide(2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMid",{get:function(){var t=new R(this.rightTop),e=new R(this.rightBottom);return t.add(e).divide(2)},enumerable:!0,configurable:!0}),t.coordinatesWithRotation=function(t,e,n,r,i,o){var a=t.width,s=t.height,l=a*Math.cos(e)-s*Math.sin(e)+o.x,u=a*Math.sin(e)+s*Math.cos(e)+o.y;return n&&(l=2*i.x-l),r&&(u=2*i.y-u),new R({x:l,y:u}).rounded},w([dr],t.prototype,"position",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"rotation",null),w([dr],t.prototype,"flipHorizontally",null),w([dr],t.prototype,"flipVertically",null),w([dr],t.prototype,"flipCenter",null),w([dr],t.prototype,"leftTop",null),w([dr],t.prototype,"leftBottom",null),w([dr],t.prototype,"rightTop",null),w([dr],t.prototype,"rightBottom",null),w([dr],t.prototype,"leftBottomHandle",null),w([dr],t.prototype,"rightBottomHandle",null),w([dr],t.prototype,"leftMid",null),w([dr],t.prototype,"rightMid",null),t}(),Ql=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=3);var r=Math.tan(e),i=Math.sqrt(Math.pow(r,2)+1);return{x:t.x+n/i,y:t.y+n*r/i}},Jl=function(){function t(t){var e=this;this.changeIntensity=function(t){var n=e.focusStore.setEffectProperties({blurRadius:t});n&&(e.focusStore.changeBlurRadius(e.identifier,n.blurRadius),e.editor.render())},this.reset=function(){e.pureReset(),e.editor.render(),e.addSnapshot(ho.DELETE,e.locale.controls.buttonReset)},this.editor=t,this.focusStore=new Eo(this.editor);var n=this.editor.assetProvider.getAssets("focus");this.entityManager=new vo([{identifier:"",name:"",items:n}],_(_({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}return Object.defineProperty(t,"minIntensity",{get:function(){return 0},enumerable:!0,configurable:!0}),t.doesFocusIdentifierExist=function(t){return-1!==Object.keys(nt).map((function(t){return nt[t]})).findIndex((function(e){return e===t}))},t.prototype.selectFocus=function(t){if(t!==this.identifier){this.focusStore.removeFocus();var e=.2*this.maxIntensity,n=this.editor.engine.getOutputContainer().getBounds().width,r=.2*this.editor.shortestOutputSide;switch(t){case nt.LINEAR:var i=this.editor.outputToWorld({x:-n/2,y:0}),o=this.editor.outputToWorld({x:n/2,y:0});this.setLinearFocus({start:i,end:o,blurRadius:e});break;case nt.RADIAL:var a=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:a,radius:r,blurRadius:e});break;case nt.MIRRORED:var s=this.editor.outputToWorld({x:0,y:0}),l=r,u=this.editor.outputToWorld(Ql({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:s,clearAreaWidth:l,blurRadius:e,mirrorAxisDirection:u});break;case nt.GAUSSIAN:this.setGaussianFocus({blurRadius:e})}this.focusStore.selectFocus(t,e),this.editor.render(),this.addSnapshot(ho.ADD,j.FOCUS)}},t.prototype.toolSnapshot=function(t){this.addSnapshot(ho.EDIT,t)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.pureReset=function(){this.focusStore.removeFocus(),this.focusStore.reset()},t.prototype.setStart=function(t){var e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.editor.render())},t.prototype.setEnd=function(t){var e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.editor.render())},t.prototype.setCenter=function(t){var e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.editor.render())},t.prototype.setRadius=function(t){var e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.editor.render())},t.prototype.setOrigin=function(t){var e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(Ql(t,this.rotation))});e&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.editor.render())},t.prototype.setSize=function(t){var e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});e&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.editor.render())},t.prototype.setRotation=function(t){this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Ql(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()},t.prototype.updateStateFromHistory=function(t,e){var n=this;this.focusStore.removeFocus();var r=e.magnitude;ci((function(){switch(t.identifier){case nt.LINEAR:n.focusStore.selectFocus(nt.LINEAR),n.setLinearFocus({start:n.editor.previewToWorld(new R(t.linear.start).multiply(e)),end:n.editor.previewToWorld(new R(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case nt.GAUSSIAN:n.focusStore.selectFocus(nt.GAUSSIAN),n.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case nt.RADIAL:n.focusStore.selectFocus(nt.RADIAL),n.setRadialFocus({center:n.editor.previewToWorld(new R(t.radial.center).multiply(e)),radius:n.editor.previewToWorld(t.radial.radius*r),blurRadius:t.radial.blurRadius});break;case nt.MIRRORED:n.focusStore.selectFocus(nt.MIRRORED),n.setMirroredFocus({mirrorAxisOrigin:n.editor.previewToWorld(new R(t.mirrored.origin).multiply(e)),clearAreaWidth:n.editor.previewToWorld(t.mirrored.size*r),blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:n.editor.previewToWorld(Ql(t.mirrored.origin,t.mirrored.rotation))});break;case"identity":n.pureReset()}}))},t.prototype.updateStateFromSerialization=function(e){return x(this,void 0,void 0,(function(){var n=this;return O(this,(function(r){if(!t.doesFocusIdentifierExist(e.identifier))throw new Error("Focus identifier "+e.identifier+" doesn't exist");return this.focusStore.removeFocus(),ci((function(){switch(n.focusStore.selectFocus(e.identifier),e.identifier){case nt.LINEAR:n.setLinearFocus(e.linear);break;case nt.GAUSSIAN:n.setGaussianFocus(e.gaussian);break;case nt.RADIAL:n.setRadialFocus(e.radial);break;case nt.MIRRORED:n.setMirroredFocus({mirrorAxisOrigin:e.mirrored.origin,clearAreaWidth:e.mirrored.size,blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:Ql(e.mirrored.origin,e.mirrored.rotation)})}})),[2]}))}))},t.prototype.updateCanvasControls=function(){this.focusStore.updateFromEngineState(this.identifier)},Object.defineProperty(t.prototype,"state",{get:function(){return this.focusStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializableState",{get:function(){switch(this.identifier){case nt.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case nt.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case nt.MIRRORED:var t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:Oi(this.state.mirrored.rotation),size:t.clearAreaWidth}};case nt.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()}}return Co},enumerable:!0,configurable:!0}),t.prototype.getFocusStateForHistory=function(){var t=this.editor.canvasStore.sizeVector,e=this.focusStore.state.linear,n=this.focusStore.state.radial,r=this.focusStore.state.mirrored,i=t,o=i.magnitude;return _(_({},this.focusStore.state),{linear:_(_({},e),{start:new R(e.start).divide(i),end:new R(e.end).divide(i)}),radial:_(_({},n),{center:new R(n.center).divide(i),radius:n.radius/o}),mirrored:_(_({},r),{origin:new R(r.origin).divide(i),size:r.size/o}),gaussian:_({},this.focusStore.state.gaussian)})},Object.defineProperty(t.prototype,"start",{get:function(){return this.focusStore.state.linear.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startOnPreview",{get:function(){var t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.focusStore.state.linear.end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endOnPreview",{get:function(){var t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.focusStore.state.radial.center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.focusStore.state.radial.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this.focusStore.state.mirrored.origin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.focusStore.state.mirrored.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationOnPreview",{get:function(){var t=this.editor.outputContainer.getData(),e=t.flipHorizontally,n=t.flipVertically;return Xe({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:n})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.focusStore.state.mirrored.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mirroredAreaWidth",{get:function(){var t=this.editor.canvasStore.canvasSize,e=t.width,n=t.height;return 2*Math.sqrt(Math.pow(e,2)+Math.pow(n,2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return"identity"===this.identifier?Co.gaussian.blurRadius:this.state[this.identifier].blurRadius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxIntensity",{get:function(){return this.editor.shortestOutputSide/10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[j.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[j.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.items},enumerable:!0,configurable:!0}),t.prototype.setGaussianFocus=function(t){var e=t.blurRadius;this.focusStore.setGaussianFocus({blurRadius:e})},t.prototype.setLinearFocus=function(t){var e=t.start,n=t.end,r=t.blurRadius;this.focusStore.setLinearFocus({start:e,end:n,blurRadius:r})},t.prototype.setRadialFocus=function(t){var e=t.center,n=t.radius,r=t.blurRadius;this.focusStore.setRadialFocus({center:e,radius:n,blurRadius:r})},t.prototype.setMirroredFocus=function(t){var e=t.mirrorAxisOrigin,n=t.clearAreaWidth,r=t.blurRadius,i=t.mirrorAxisDirection;this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:n,blurRadius:r,mirrorAxisDirection:i})},w([ui],t.prototype,"selectFocus",null),w([ui],t.prototype,"changeIntensity",void 0),w([ui],t.prototype,"clickableCanvas",null),w([ui],t.prototype,"pureReset",null),w([ui],t.prototype,"reset",void 0),w([ui],t.prototype,"setStart",null),w([ui],t.prototype,"setEnd",null),w([ui],t.prototype,"setCenter",null),w([ui],t.prototype,"setRadius",null),w([ui],t.prototype,"setOrigin",null),w([ui],t.prototype,"setSize",null),w([ui],t.prototype,"setRotation",null),w([ui],t.prototype,"updateStateFromHistory",null),w([ui],t.prototype,"updateStateFromSerialization",null),w([ui],t.prototype,"updateCanvasControls",null),w([dr],t.prototype,"state",null),w([dr],t.prototype,"start",null),w([dr],t.prototype,"startOnPreview",null),w([dr],t.prototype,"end",null),w([dr],t.prototype,"endOnPreview",null),w([dr],t.prototype,"center",null),w([dr],t.prototype,"radius",null),w([dr],t.prototype,"origin",null),w([dr],t.prototype,"rotation",null),w([dr],t.prototype,"rotationOnPreview",null),w([dr],t.prototype,"size",null),w([dr],t.prototype,"mirroredAreaWidth",null),w([dr],t.prototype,"identifier",null),w([dr],t.prototype,"intensity",null),w([dr],t.prototype,"maxIntensity",null),w([dr],t.prototype,"isOptionSelected",null),w([dr],t.prototype,"config",null),w([dr],t.prototype,"locale",null),w([dr],t.prototype,"entities",null),t}(),$l=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),tu=function(t){return t.replace($l,"")},eu=t.div(Hl||(Hl=C(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: '","', sans-serif;\n    /* css reset for a global box-sizing: border-box */\n    box-sizing: content-box;\n    /* todo: fix the issue with these settings */\n    font-size: inherit;\n    color: inherit;\n    line-height: normal;\n  }\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: '","', sans-serif;\n    /* css reset for a global box-sizing: border-box */\n    box-sizing: content-box;\n    /* todo: fix the issue with these settings */\n    font-size: inherit;\n    color: inherit;\n    line-height: normal;\n  }\n"])),(function(t){return t.theme.background}),(function(t){return t.theme.foreground}),(function(t){return t.theme.typography.fontFamily}));eu.defaultProps={theme:Vo};var nu,ru,iu,ou=e(nu||(nu=C(["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"],["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"]))),au=t.div(iu||(iu=C(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: ",";\n  visibility: hidden;\n\n  ","\n"],["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: ",";\n  visibility: hidden;\n\n  ","\n"])),(function(t){return t.position.y}),(function(t){return t.position.x}),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.zIndex.toast}),(function(t){return t.show&&n(ru||(ru=C(["\n      visibility: visible;\n      animation: "," 0.5s, fadeout 0.5s 2.5s;\n    "],["\n      visibility: visible;\n      animation: "," 0.5s, fadeout 0.5s 2.5s;\n    "])),ou)}));
/** @license mobx-react v5.4.4
 * index.module.js
 *
 * Copyright (c) 2015 Michel Weststrate.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function su(t){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cu(t,e,n){return e&&uu(t.prototype,e),n&&uu(t,n),t}function fu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&du(t,e)}function hu(t){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function du(t,e){return(du=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yu(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gu(t,e){return t(e={exports:{}},e.exports),e.exports}var mu,vu=gu((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case f:case o:case s:case a:return t;default:switch(t=t&&t.$$typeof){case u:case p:case l:return t;default:return e}}case i:return e}}}function m(t){return g(t)===f}e.typeOf=g,e.AsyncMode=c,e.ConcurrentMode=f,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Profiler=s,e.Portal=i,e.StrictMode=a,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===f||t===s||t===a||t===h||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===d||t.$$typeof===l||t.$$typeof===u||t.$$typeof===p)},e.isAsyncMode=function(t){return m(t)||g(t)===c},e.isConcurrentMode=m,e.isContextConsumer=function(t){return g(t)===u},e.isContextProvider=function(t){return g(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return g(t)===p},e.isFragment=function(t){return g(t)===o},e.isProfiler=function(t){return g(t)===s},e.isPortal=function(t){return g(t)===i},e.isStrictMode=function(t){return g(t)===a}}));(mu=vu)&&mu.__esModule&&Object.prototype.hasOwnProperty.call(mu,"default")&&mu.default;vu.typeOf,vu.AsyncMode,vu.ConcurrentMode,vu.ContextConsumer,vu.ContextProvider,vu.Element,vu.ForwardRef,vu.Fragment,vu.Profiler,vu.Portal,vu.StrictMode,vu.isValidElementType,vu.isAsyncMode,vu.isConcurrentMode,vu.isContextConsumer,vu.isContextProvider,vu.isElement,vu.isForwardRef,vu.isFragment,vu.isProfiler,vu.isPortal,vu.isStrictMode;var _u=gu((function(t){t.exports=vu})),bu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wu={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},xu={};xu[_u.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var Ou=Object.defineProperty,Su=Object.getOwnPropertyNames,ku=Object.getOwnPropertySymbols,Tu=Object.getOwnPropertyDescriptor,Cu=Object.getPrototypeOf,Eu=Object.prototype;var Ru=function t(e,n,r){if("string"!=typeof n){if(Eu){var i=Cu(n);i&&i!==Eu&&t(e,i,r)}var o=Su(n);ku&&(o=o.concat(ku(n)));for(var a=xu[e.$$typeof]||bu,s=xu[n.$$typeof]||bu,l=0;l<o.length;++l){var u=o[l];if(!(wu[u]||r&&r[u]||s&&s[u]||a&&a[u])){var c=Tu(n,u);try{Ou(e,u,c)}catch(t){}}}return e}return e},Du=function(){function t(){lu(this,t),this.listeners=[]}return cu(t,[{key:"on",value:function(t){var e=this;return this.listeners.push(t),function(){var n=e.listeners.indexOf(t);-1!==n&&e.listeners.splice(n,1)}}},{key:"emit",value:function(t){this.listeners.forEach((function(e){return e(t)}))}}]),t}();function Pu(t){function e(e,n,r,i,o,a){for(var s=arguments.length,l=new Array(s>6?s-6:0),u=6;u<s;u++)l[u-6]=arguments[u];return wr((function(){if(i=i||"<<anonymous>>",a=a||r,null==n[r]){if(e){var s=null===n[r]?"null":"undefined";return new Error("The "+o+" `"+a+"` is marked as required in `"+i+"`, but its value is `"+s+"`.")}return null}return t.apply(void 0,[n,r,i,o,a].concat(l))}))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function Iu(t){var e=su(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}(e,t)?"symbol":e}function Au(t,e){return Pu((function(n,r,i,o,a){return wr((function(){if(t&&Iu(n[r])===e.toLowerCase())return null;var o;switch(e){case"Array":o=Zi;break;case"Object":o=ao;break;case"Map":o=Ki;break;default:throw new Error("Unexpected mobxType: ".concat(e))}var s=n[r];if(!o(s)){var l=function(t){var e=Iu(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(s),u=t?" or javascript `"+e.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+l+"` supplied to `"+i+"`, expected `mobx.Observable"+e+"`"+u+".")}return null}))}))}function Fu(t,e){return Pu((function(n,r,i,o,a){for(var s=arguments.length,l=new Array(s>5?s-5:0),u=5;u<s;u++)l[u-5]=arguments[u];return wr((function(){if("function"!=typeof e)return new Error("Property `"+a+"` of component `"+i+"` has invalid PropType notation.");var s=Au(t,"Array")(n,r,i);if(s instanceof Error)return s;for(var u=n[r],c=0;c<u.length;c++)if((s=e.apply(void 0,[u,c,i,o,a+"["+c+"]"].concat(l)))instanceof Error)return s;return null}))}))}Au(!1,"Array"),Fu.bind(null,!1),Au(!1,"Map"),Au(!1,"Object"),Au(!0,"Array"),Fu.bind(null,!0);var ju=Au(!0,"Object");var Mu=0;var Bu={};function zu(t){return Bu[t]||(Bu[t]=function(t){if("function"==typeof Symbol)return Symbol(t);var e="__$mobx-react ".concat(t," (").concat(Mu,")");return Mu++,e}(t)),Bu[t]}var Lu=zu("patchMixins"),Nu=zu("patchedDefinition");function Uu(t,e){var n=t[Lu]=t[Lu]||{},r=n[e]=n[e]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function Wu(t,e){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];e.locks++;try{var a;return null!=t&&(a=t.apply(this,i)),a}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(n,i)}))}}function Hu(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Wu.call.apply(Wu,[this,t,e].concat(r))}}function Gu(t,e,n,r,i){var o,a=Hu(i,r);return fu(o={},Nu,!0),fu(o,"get",(function(){return a})),fu(o,"set",(function(i){if(this===t)a=Hu(i,r);else{var o=Gu(this,e,n,r,i);Object.defineProperty(this,e,o)}})),fu(o,"configurable",!0),fu(o,"enumerable",n),o}var Vu={mobxStores:ju};Object.seal(Vu);var Zu={contextTypes:{get:function(){return Vu},set:function(t){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function Xu(t,e,n){var r="inject-"+(e.displayName||e.name||e.constructor&&e.constructor.name||"Unknown");n&&(r+="-with-"+n);var i=function(n){function r(){var t,e;lu(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=yu(this,(t=hu(r)).call.apply(t,[this].concat(i)))).storeRef=function(t){e.wrappedInstance=t},e}return pu(r,a),cu(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var i=t(this.context.mobxStores||{},n,this.context)||{};for(var o in i)n[o]=i[o];return function(t){return!(t.prototype&&t.prototype.render)}(e)||(n.ref=this.storeRef),l(e,n)}}]),r}();return i.displayName=r,Ru(i,e),i.wrappedComponent=e,Object.defineProperties(i,Zu),i}function Yu(t){return function(e,n){return t.forEach((function(t){if(!(t in n)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");n[t]=e[t]}})),n}}function qu(){var t;if("function"==typeof arguments[0])return t=arguments[0],function(e){var n=Xu(t,e);return n.isMobxInjector=!1,(n=dc(n)).isMobxInjector=!0,n};for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t=Yu(e),function(n){return Xu(t,n,e.join("-"))}}var Ku=zu("isUnmounted"),Qu=!1,Ju=!1,$u="undefined"!=typeof WeakMap?new WeakMap:void 0,tc=new Du,ec=zu("skipRender"),nc=zu("isForcingUpdate"),rc="function"==typeof o&&o((function(t,e){})).$$typeof;function ic(t,e,n){Object.hasOwnProperty.call(t,e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}function oc(t){if(p)try{return p(t)}catch(t){return null}return null}function ac(t){var e=oc(t);e&&$u&&$u.set(e,t),tc.emit({event:"render",renderTime:t.__$mobRenderEnd-t.__$mobRenderStart,totalTime:Date.now()-t.__$mobRenderStart,component:t,node:e})}var sc=new Du;function lc(t,e){!function(t,e){for(var n=Uu(t,e),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];n.methods.indexOf(s)<0&&n.methods.push(s)}var l=Object.getOwnPropertyDescriptor(t,e);if(!l||!l[Nu]){var u=t[e],c=Gu(t,e,l?l.enumerable:void 0,n,u);Object.defineProperty(t,e,c)}}(t,e,pc[e])}function uc(t,e){if(cc(t,e))return!0;if("object"!==su(t)||null===t||"object"!==su(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!hasOwnProperty.call(e,n[i])||!cc(t[n[i]],e[n[i]]))return!1;return!0}function cc(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function fc(t){var e=this;function n(){var t=this;s=!1;var e=void 0,n=void 0;if(l.track((function(){Qu&&(t.__$mobRenderStart=Date.now());try{n=function(t,e){var n,r=Pr(t);try{n=e()}finally{Ir(r)}return n}(!1,o)}catch(t){e=t}Qu&&(t.__$mobRenderEnd=Date.now())})),e)throw sc.emit(e),e;return n}var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;ic(this,ec,!1),ic(this,nc,!1);var o=t.bind(this),s=!1,l=new Yr("".concat(r,"#").concat(i,".render()"),(function(){if(!s&&(s=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e[Ku])){var t=!0;try{ic(e,nc,!0),e[ec]||a.prototype.forceUpdate.call(e),t=!1}finally{ic(e,nc,!1),t&&l.dispose()}}}));return l.reactComponent=this,n.$mobx=l,this.render=n,n.call(this)}var pc={componentWillUnmount:function(){if(this.render.$mobx&&this.render.$mobx.dispose(),this[Ku]=!0,Qu){var t=oc(this);t&&$u&&$u.delete(t),tc.emit({event:"destroy",component:this,node:t})}},componentDidMount:function(){Qu&&ac(this)},componentDidUpdate:function(){Qu&&ac(this)},shouldComponentUpdate:function(t,e){return this.state!==e||!uc(this.props,t)}};function hc(t,e){var n=zu("reactProp_".concat(e,"_valueHolder")),r=zu("reactProp_".concat(e,"_atomHolder"));function i(){return this[r]||ic(this,r,Un("reactive "+e)),this[r]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i.call(this).reportObserved(),this[n]},set:function(t){this[nc]||uc(this[n],t)?ic(this,n,t):(ic(this,n,t),ic(this,ec,!0),i.call(this).reportChanged(),ic(this,ec,!1))}})}function dc(t,e){if("string"==typeof t)throw new Error("Store names should be provided as array");if(Array.isArray(t))return Ju||(Ju=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),e?qu.apply(null,t)(dc(e)):function(e){return dc(t,e)};var n=t;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===s&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),rc&&n.$$typeof===rc){var r=n.render;if("function"!=typeof r)throw new Error("render property of ForwardRef was not a function");return o((function(){var t=arguments;return i.createElement(yc,null,(function(){return r.apply(void 0,t)}))}))}if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||a.isPrototypeOf(n))){var l,u,c=dc((u=l=function(t){function e(){return lu(this,e),yu(this,hu(e).apply(this,arguments))}return pu(e,a),cu(e,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),e}(),l.displayName=n.displayName||n.name,l.contextTypes=n.contextTypes,l.propTypes=n.propTypes,l.defaultProps=n.defaultProps,u));return Ru(c,n),c}if(!n)throw new Error("Please pass a valid component to 'observer'");var f=n.prototype||n;!function(t){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach((function(e){lc(t,e)})),t.shouldComponentUpdate?t.shouldComponentUpdate!==pc.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):t.shouldComponentUpdate=pc.shouldComponentUpdate}(f),n.isMobXReactObserver=!0,hc(f,"props"),hc(f,"state");var p=f.render;return f.render=function(){return fc.call(this,p)},n}var yc=dc((function(t){var e=t.children,n=t.inject,r=t.render,o=e||r;if(void 0===o)return null;if(!n)return o();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var a=qu(n)(o);return i.createElement(a,null)}));yc.displayName="Observer";var gc=function(t,e,n,r,i){var o="children"===e?"render":"children";return"function"==typeof t[e]&&"function"==typeof t[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof t[e]&&"function"!=typeof t[o]?new Error("Invalid prop `"+i+"` of type `"+su(t[e])+"` supplied to `"+n+"`, expected `function`."):void 0};function mc(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function vc(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!=n?n:null}.bind(this))}function _c(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}yc.propTypes={render:gc,children:gc},mc.__suppressDeprecationWarning=!0,vc.__suppressDeprecationWarning=!0,_c.__suppressDeprecationWarning=!0;var bc={children:!0,key:!0,ref:!0},wc=function(t){function e(t,n){var r;return lu(this,e),(r=yu(this,hu(e).call(this,t,n))).state={},xc(t,r.state),r}return pu(e,a),cu(e,[{key:"render",value:function(){return u.only(this.props.children)}},{key:"getChildContext",value:function(){var t={};return xc(this.context.mobxStores,t),xc(this.props,t),{mobxStores:t}}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;if(!e)return t;if(Object.keys(t).filter(Oc).length!==Object.keys(e).filter(Oc).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var n in t)Oc(n)&&e[n]!==t[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return t}}]),e}();function xc(t,e){if(t)for(var n in t)Oc(n)&&(e[n]=t[n])}function Oc(t){return!bc[t]&&"suppressChangedStoreWarning"!==t}wc.contextTypes={mobxStores:ju},wc.childContextTypes={mobxStores:ju.isRequired},function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,r=null,i=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?i="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=mc,e.componentWillReceiveProps=vc),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=_c;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,r)}}}(wc);zu("disposeOnUnmount");if(!a)throw new Error("mobx-react requires React to be available");if(!oi)throw new Error("mobx-react requires mobx to be available");if("function"==typeof f&&yi({reactionScheduler:f}),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":su(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var Sc={spy:oi,extras:{getDebugName:lo}},kc={renderReporter:tc,componentByNodeRegistry:$u,componentByNodeRegistery:$u,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");Qu||(Qu=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(kc,Sc)}var Tc,Cc,Ec=n(Tc||(Tc=C(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  border-radius: ",";\n  pointer-events: none;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  border-radius: ",";\n  pointer-events: none;\n"])),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"})),Rc=t.div.attrs((function(t){return{style:{background:t.color}}}))(Cc||(Cc=C(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),Ec,(function(t){return t.theme.measurements.zIndex.colorItem.background}));Rc.defaultProps={theme:Vo};var Dc,Pc=t.div.attrs((function(t){return{style:t.url?{backgroundImage:"url("+t.url+")"}:{}}}))(Dc||(Dc=C(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),Ec,(function(t){return t.theme.measurements.zIndex.colorItem.tiledBackground}));Pc.defaultProps={theme:Vo};var Ic,Ac,Fc,jc=t.div(Ac||(Ac=C(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n\n  box-sizing: border-box;\n  border: 2px solid transparent;\n  border-radius: ",";\n  transition: border-color 300ms ease-in-out;\n  ","\n"],["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n\n  box-sizing: border-box;\n  border: 2px solid transparent;\n  border-radius: ",";\n  transition: border-color 300ms ease-in-out;\n  ","\n"])),Ec,(function(t){return t.theme.measurements.zIndex.colorItem.overlay}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"}),(function(t){return t.isActive&&n(Ic||(Ic=C(["\n      border-color: ",";\n    "],["\n      border-color: ",";\n    "])),t.theme.selectColor.activeBorderColor)})),Mc=t.span(Fc||(Fc=C(["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n  pointer-events: none;\n"],["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n  pointer-events: none;\n"]))),Bc=function(t){var e=t.isActive,n=t.className,r=t.style;return i.createElement(jc,{isActive:e,className:n,style:r},e&&i.createElement(i.Fragment,null,i.createElement(Mc,null),i.createElement(Mc,null),i.createElement(Mc,null)))};jc.defaultProps={theme:Vo};var zc,Lc,Nc,Uc,Wc,Hc,Gc,Vc,Zc,Xc,Yc,qc,Kc,Qc,Jc,$c,tf,ef,nf,rf,of,af,sf,lf,uf,cf,ff,pf,hf,df,yf,gf,mf,vf,_f,bf,wf,xf,Of=n(zc||(zc=C(["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"],["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"])),(function(t){return t.theme.focusOutlineColor}),(function(t){return t.theme.focusOutlineColor})),Sf=n(Lc||(Lc=C(["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"],["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"]))),kf=n(Nc||(Nc=C(["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none; /* stylelint-disable-line */\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"],["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none; /* stylelint-disable-line */\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"]))),Tf=e(Uc||(Uc=C(["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"],["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"]))),Cf=e(Wc||(Wc=C(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),Ef=e(Hc||(Hc=C(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"]))),Rf=t.span(Gc||(Gc=C(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),Df=t(Rf)(Vc||(Vc=C([""],[""]))),Pf=t(Rf)(Zc||(Zc=C([""],[""]))),If=t(Rf)(Xc||(Xc=C([""],[""]))),Af={display:"none",left:0,top:0},Ff=t(Rf)(Yc||(Yc=C(["\n  display: ",";\n  left: ","px;\n  top: ","px;\n  pointer-events: none;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.12);\n  animation: "," 1.2s;\n  width: 100px;\n  height: 100px;\n  margin-top: -50px;\n  margin-left: -50px;\n  opacity: 0;\n"],["\n  display: ",";\n  left: ","px;\n  top: ","px;\n  pointer-events: none;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.12);\n  animation: "," 1.2s;\n  width: 100px;\n  height: 100px;\n  margin-top: -50px;\n  margin-left: -50px;\n  opacity: 0;\n"])),(function(t){return t.display}),(function(t){return t.left}),(function(t){return t.top}),Tf),jf=n(qc||(qc=C(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(t){return t.theme.button.activeForeground})),Mf=t.button(Kc||(Kc=C(["\n  &&& {\n    box-sizing: border-box;\n  }\n  text-align: center;\n  position: relative;\n  padding: 4px 8px;\n  min-height: 32px;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  overflow: hidden;\n  ","\n\n  /* Active */\n\n  &:active {\n    ","\n  }\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n  text-align: center;\n  position: relative;\n  padding: 4px 8px;\n  min-height: 32px;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  overflow: hidden;\n  ","\n\n  /* Active */\n\n  &:active {\n    ","\n  }\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"])),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.fontSystem.button1.size}),(function(t){return t.theme.measurements.fontSystem.button1.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button1.case}),(function(t){return t.theme.typography.fontFamily}),Of,jf,(function(t){return t.isActive&&jf}),Pf,(function(t){return t.theme.button.outlinedInactiveOverlayColor}),If,(function(t){return t.theme.button.hoverOverlayColor})),Bf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Af,e.timeout=null,e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),r=t.pageX-n.left,i=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},(function(){e.setRippleState(r,i)})):e.setRippleState(r,i),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((function(){e.setState({display:"none"})}),1200)},e}return v(e,t),e.prototype.componentWillUnmount=function(){clearTimeout(this.timeout)},e.prototype.render=function(){var t=this.props,e=t.isActive,n=t.isDisabled,r=t.label,o=t.ariaLabel,a=t.children,s=t.className,l=b(t,["isActive","isDisabled","label","ariaLabel","children","className"]),u=this.state,c=u.left,f=u.top,p=u.display;return i.createElement(Mf,_({"data-test-id":o,className:s,isActive:e,disabled:n,"aria-label":o},l,{onClick:this.onClick}),r,a,i.createElement(Ff,{display:p,left:c,top:f}),i.createElement(Pf,null),i.createElement(If,null))},e.defaultProps={type:"button",isDisabled:!1,isActive:!1},e}(i.Component),zf=t(Bf)(Jc||(Jc=C(["\n  ","\n"],["\n  ","\n"])),(function(t){return t.fullWidth&&n(Qc||(Qc=C(["\n      width: 100%;\n    "],["\n      width: 100%;\n    "])))})),Lf=t.div($c||($c=C(["\n  &:focus {\n    outline: none;\n  }\n\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n\n  > svg {\n    height: 18px;\n    width: 18px;\n  }\n  display: none;\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: flex;\n  }\n"],["\n  &:focus {\n    outline: none;\n  }\n\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n\n  > svg {\n    height: 18px;\n    width: 18px;\n  }\n  display: none;\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: flex;\n  }\n"]))),Nf=t.div(ef||(ef=C(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:focus {\n    outline: none;\n  }\n\n  ","\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:focus {\n    outline: none;\n  }\n\n  ","\n"])),(function(t){return t.hasIcon&&n(tf||(tf=C(["\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "],["\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "])))})),Uf=function(t){var e=t.label,n=t.children,r=t.icon,o=t.fullWidth,a=b(t,["label","children","icon","fullWidth"]),s=i.createElement(Nf,{hasIcon:!!r},e,n);return i.createElement(zf,_({fullWidth:o},a),r&&i.createElement(Lf,null,r),(n||e)&&s)},Wf=t(Uf)(nf||(nf=C(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  min-width: 32px;\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  min-width: 32px;\n"])),(function(t){return t.theme.button.outlinedPrimaryBackground}),(function(t){return t.theme.button.outlinedPrimaryForeground}),(function(t){return t.theme.button.outlinedBorderColor})),Hf=t(Bf)(rf||(rf=C(["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.button.textSecondaryForeground}),(function(t){return t.isActive&&jf}),Pf,(function(t){return t.theme.button.textInactiveOpacity})),Gf=t(Bf)(of||(of=C(["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.button.textPrimaryForeground}),(function(t){return t.isActive&&jf}),Pf,(function(t){return t.theme.button.textInactiveOpacity})),Vf=t(Uf)(af||(af=C(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"])),(function(t){return t.theme.button.outlinedSecondaryBackground}),(function(t){return t.theme.button.outlinedSecondaryForeground}),(function(t){return t.theme.button.outlinedBorderColor})),Zf=t(Bf)(sf||(sf=C(["\n  color: ",";\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.foreground}),(function(t){return t.isActive&&jf}),Pf,(function(t){return t.theme.button.textInactiveOpacity})),Xf=t.div(lf||(lf=C(["\n  display: flex;\n  &:focus {\n    outline: none;\n  }\n"],["\n  display: flex;\n  &:focus {\n    outline: none;\n  }\n"]))),Yf=function(t){t.label;var e=t.icon,n=(t.children,b(t,["label","icon","children"]));return i.createElement(Zf,_({},n),i.createElement(Xf,null,e))},qf=t(Uf)(uf||(uf=C(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  &:active {\n    color: ",";\n  }\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  &:active {\n    color: ",";\n  }\n"])),(function(t){return t.theme.button.containedPrimaryBackground}),(function(t){return t.theme.button.containedPrimaryForeground}),(function(t){return t.theme.button.containedPrimaryBackground}),(function(t){return t.theme.button.containedPrimaryForeground})),Kf=n(ff||(ff=C(["\n  border: 1px solid ",";\n  "," {\n    background-color: ",";\n  }\n"],["\n  border: 1px solid ",";\n  "," {\n    background-color: ",";\n  }\n"])),(function(t){return t.theme.card.activeBorderColor}),Df,(function(t){return t.theme.card.activeOverlayColor})),Qf=t.button.attrs((function(t){var e={};return t.image&&(e.backgroundImage="url("+t.image+")"),{style:e}}))(pf||(pf=C(["\n  &&& {\n    box-sizing: border-box;\n  }\n\n  padding: 0;\n  cursor: pointer;\n  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */\n  vertical-align: top;\n  border: none;\n  box-sizing: border-box;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border-radius: ","px;\n  ",";\n  animation-fill-mode: both;\n  overflow: hidden;\n\n  ","\n\n  /* Active */\n\n  /* No :active styles on purpose. */\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n\n  padding: 0;\n  cursor: pointer;\n  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */\n  vertical-align: top;\n  border: none;\n  box-sizing: border-box;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border-radius: ","px;\n  ",";\n  animation-fill-mode: both;\n  overflow: hidden;\n\n  ","\n\n  /* Active */\n\n  /* No :active styles on purpose. */\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"])),(function(t){return t.theme.card.background}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.shape.radiusMedium}),(function(){return n(cf||(cf=C(["\n    animation: "," 0.2s linear;\n  "],["\n    animation: "," 0.2s linear;\n  "])),Ef)}),Of,(function(t){return t.isActive&&Kf}),Pf,(function(t){return t.theme.card.inactiveOverlayColor}),If,(function(t){return t.theme.card.hoverOverlayColor})),Jf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Af,e.timeout=null,e.onKeyDown=function(t){"Space"!==t.key&&"Enter"!==t.key||e.props.onClick&&e.props.onClick()},e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),r=t.pageX-n.left,i=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},(function(){e.setRippleState(r,i)})):e.setRippleState(r,i),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((function(){e.setState({display:"none"})}),1200)},e}return v(e,t),e.prototype.componentWillUnmount=function(){clearTimeout(this.timeout)},e.prototype.render=function(){var t=this.props,e=t.children,n=t.label,r=t.isActive,o=t.isDisabled,a=t.image,s=t.style,l=t.className,u=this.state,c=u.left,f=u.top,p=u.display;return i.createElement(Qf,{isActive:r,"data-test-id":n,"aria-label":n,disabled:o,image:a,onClick:this.onClick,onKeyDown:this.onKeyDown,style:s,className:l},e,i.createElement(Ff,{display:p,left:c,top:f}),i.createElement(Df,null),i.createElement(Pf,null),i.createElement(If,null))},e}(i.Component),$f=t.div(hf||(hf=C(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n"])),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case})),tp=t.div(gf||(gf=C(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  left: 0;\n  ","\n  width: 100%;\n  cursor: pointer;\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  left: 0;\n  ","\n  width: 100%;\n  cursor: pointer;\n"])),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.withBackground?n(df||(df=C(["\n          color: ",";\n          height: 40px;\n          background: ",";\n        "],["\n          color: ",";\n          height: 40px;\n          background: ",";\n        "])),t.theme.card.labelForeground,t.theme.card.labelBackground):n(yf||(yf=C(["\n          color: ",";\n          height: 32px;\n        "],["\n          color: ",";\n          height: 32px;\n        "])),t.theme.card.foreground)})),ep=t.div(_f||(_f=C(["\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  ","\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"],["\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  ","\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"])),(function(t){return t.theme.card.labelForeground}),(function(t){return t.withBackground?n(mf||(mf=C(["\n          border-top-color: ",";\n        "],["\n          border-top-color: ",";\n        "])),t.theme.card.labelForeground):n(vf||(vf=C(["\n          border-top-color: ",";\n        "],["\n          border-top-color: ",";\n        "])),t.theme.card.foreground)}),(function(t){return t.rotation||0})),np=t.span(bf||(bf=C(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-left: 10px;\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-left: 10px;\n"]))),rp=t.div(wf||(wf=C(["\n  ","\n"],["\n  ","\n"])),Sf),ip=function(t){var e=t.children,n=t.className,r=t.caret,o=t.isActive,a=t.style,s=t.withBackground;if(t.hidden)return i.createElement(rp,null,e);return i.createElement(tp,{className:n,withBackground:s,style:a},i.createElement($f,null,e,r&&i.createElement(np,null,i.createElement(ep,{"aria-hidden":!0,rotation:o?180:0,withBackground:s}))))},op={Focused:Of,HiddenScrollbar:kf,VisuallyHidden:Sf},ap={ripple:Tf,scale:Cf,slide:Ef},sp=t.button.attrs({type:"button"})(xf||(xf=C(["\n  &&& {\n    box-sizing: border-box;\n  }\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: ",";\n  padding: 0;\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  ","\n\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: ",";\n  padding: 0;\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  ","\n\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n  }\n"])),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.colorItem.margin}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"}),op.Focused,(function(t){return t.theme.selectColor.inactiveOpacity}));sp.defaultProps={theme:Vo};var lp,up,cp,fp,pp,hp,dp,yp,gp,mp,vp,_p,bp,wp,xp,Op,Sp,kp,Tp,Cp,Ep,Rp,Dp=qu("config")(dc((function(t){var e=t.isActive,n=t.onClick,r=t.color,o=t.label,a=t.isDisabled,s=t.tiledBackgroundUrl,l=t.className,u=t.style,c=t.children;return i.createElement(sp,{disabled:a,onClick:n,"aria-label":o,className:l,style:u},i.createElement(Pc,{url:s}),i.createElement(Rc,{color:r}),i.createElement(Bc,{isActive:e}),c)}))),Pp=t.div(up||(up=C(["\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: opacity 100s ease-in-out;\n\n  ",";\n"],["\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: opacity 100s ease-in-out;\n\n  ",";\n"])),(function(t){return t.theme.measurements.zIndex.dialog.base}),(function(t){return t.isVisible&&n(lp||(lp=C(["\n      opacity: 1;\n      display: block;\n      visibility: visible;\n    "],["\n      opacity: 1;\n      display: block;\n      visibility: visible;\n    "])))})),Ip=function(t){var e=t.isVisible,n=t.className,r=t.children;return i.createElement(Pp,{isVisible:e,className:n},r)},Ap=t.div(cp||(cp=C(["\n  display: block;\n  opacity: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ",";\n  text-align: left;\n  background: ",";\n  height: 100%;\n  width: 100%;\n"],["\n  display: block;\n  opacity: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ",";\n  text-align: left;\n  background: ",";\n  height: 100%;\n  width: 100%;\n"])),(function(t){return t.theme.measurements.zIndex.dialog.backdrop}),(function(t){return t.theme.modal.backdrop})),Fp=t.div.attrs((function(){return{role:"dialog","aria-hidden":!1}}))(fp||(fp=C(["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top 0.25s ease;\n  position: absolute;\n  top: calc(50% + ","px);\n  left: calc(50% + ","px);\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n  z-index: ",";\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    text-align: center;\n    width: auto;\n    min-width: 200px;\n    height: auto;\n    top: 50%;\n    left: 50%;\n  }\n"],["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top 0.25s ease;\n  position: absolute;\n  top: calc(50% + ","px);\n  left: calc(50% + ","px);\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n  z-index: ",";\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    text-align: center;\n    width: auto;\n    min-width: 200px;\n    height: auto;\n    top: 50%;\n    left: 50%;\n  }\n"])),(function(t){return t.top}),(function(t){return t.left}),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.theme.shape.radiusLarge}),(function(t){return t.theme.modal.background}),(function(t){return t.theme.modal.bodyForeground}),(function(t){return t.theme.measurements.zIndex.dialog.container})),jp=t.h3(pp||(pp=C(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 11px 20px 0px;\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 11px 20px 0px;\n"])),(function(t){return t.theme.measurements.fontSystem.headline2.size}),(function(t){return t.theme.measurements.fontSystem.headline2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline2.case}),(function(t){return t.theme.modal.headerForeground})),Mp=t.div(hp||(hp=C(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 0px 20px 11px;\n  &:first-child {\n    padding-top: 11px;\n  }\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    align-items: center;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 0px 20px 11px;\n  &:first-child {\n    padding-top: 11px;\n  }\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    align-items: center;\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.modal.bodyForeground})),Bp=t.div(dp||(dp=C(["\n  display: flex;\n  border-top: 2px solid ",";\n\n  min-height: 40px;\n  justify-content: flex-end;\n  @media all and (min-width: 0) and (max-width: 640px) {\n    height: auto;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n"],["\n  display: flex;\n  border-top: 2px solid ",";\n\n  min-height: 40px;\n  justify-content: flex-end;\n  @media all and (min-width: 0) and (max-width: 640px) {\n    height: auto;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n"])),(function(t){return"error"===t.type?t.theme.error:t.theme.warning})),zp=e(yp||(yp=C(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"],["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Lp=n(gp||(gp=C(["\n  animation: "," 2s infinite ease 1.5s;\n"],["\n  animation: "," 2s infinite ease 1.5s;\n"])),zp),Np=n(mp||(mp=C(["\n  animation: "," 2s infinite ease;\n"],["\n  animation: "," 2s infinite ease;\n"])),zp),Up=t.div(vp||(vp=C(["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before,\n  &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    transform-origin: 25px 25px;\n    ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    transform-origin: 0px 25px;\n    ",";\n  }\n"],["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before,\n  &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    transform-origin: 25px 25px;\n    ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    transform-origin: 0px 25px;\n    ",";\n  }\n"])),(function(t){return t.theme.primary}),(function(t){return t.theme.modal.background}),Lp,(function(t){return t.theme.modal.background}),Np),Wp=t.div(_p||(_p=C(["\n  display: flex;\n"],["\n  display: flex;\n"]))),Hp=t(jp)(bp||(bp=C(["\n  padding: 0;\n"],["\n  padding: 0;\n"]))),Gp=t.div(wp||(wp=C(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 8px;\n  @media all and (min-width: 640px) {\n    margin-left: 30px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  margin-left: 8px;\n  @media all and (min-width: 640px) {\n    margin-left: 30px;\n  }\n"]))),Vp=t(Mp)(xp||(xp=C(["\n  padding: 0;\n  margin: 0;\n"],["\n  padding: 0;\n  margin: 0;\n"]))),Zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.bodyLabel,r=t.children,o=i.Children.toArray(r)[0];if(!i.isValidElement(o))throw new Error("Child is not a valid react element");return i.cloneElement(o,{height:"90px",body:i.createElement(Mp,null,i.createElement(Wp,null,i.createElement(Up,null),i.createElement(Gp,null,i.createElement(Hp,null,e),i.createElement(Vp,null,n))))})},e}(i.PureComponent),Xp=n(Op||(Op=C(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  min-height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &::-ms-clear,\n  &::-ms-reveal {\n    display: none;\n  }\n\n  &::-webkit-search-decoration,\n  &::-webkit-search-cancel-button,\n  &::-webkit-search-results-button,\n  &::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  min-height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &::-ms-clear,\n  &::-ms-reveal {\n    display: none;\n  }\n\n  &::-webkit-search-decoration,\n  &::-webkit-search-cancel-button,\n  &::-webkit-search-results-button,\n  &::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.textInput.foreground}),(function(t){return t.theme.textInput.borderColor}),(function(t){return t.theme.textInput.background}),(function(t){return t.theme.typography.fontFamily}),(function(t){return t.theme.textInput.hoverBorderColor}),(function(t){return t.theme.textInput.hoverBorderColor}),(function(t){return t.theme.textInput.inactiveOpacity}),(function(t){return t.theme.textInput.hoverBorderColor})),Yp=t.form(Sp||(Sp=C(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),qp=t.textarea(kp||(kp=C(["\n  display: flex;\n  caret-color: ",";\n  ","\n  min-height: 100%;\n  padding: 0px;\n  outline-offset: -8px;\n  color: ",";\n  resize: none;\n  font-family: '","', sans-serif;\n\n  &:selection,\n  &:-moz-selection {\n    background-color: ",";\n    color: ",";\n  }\n"],["\n  display: flex;\n  caret-color: ",";\n  ","\n  min-height: 100%;\n  padding: 0px;\n  outline-offset: -8px;\n  color: ",";\n  resize: none;\n  font-family: '","', sans-serif;\n\n  &:selection,\n  &:-moz-selection {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(t){return t.theme.primary}),Xp,(function(t){return t.theme.modal.bodyForeground}),(function(t){return t.theme.typography.fontFamily}),(function(t){return t.theme.primary}),(function(t){return t.theme.foreground})),Kp=t.label(Tp||(Tp=C(["\n  padding: 11px 20px 8px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"],["\n  padding: 11px 20px 8px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case}),(function(t){return t.theme.modal.headerForeground})),Qp=t(Mp)(Cp||(Cp=C(["\n  height: 100%;\n"],["\n  height: 100%;\n"]))),Jp=t(Bp)(Ep||(Ep=C(["\n  border-top: none;\n"],["\n  border-top: none;\n"]))),$p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={value:""},e.input=i.createRef(),e.handleKeydown=function(t){Tt(e.handleDismiss)(t)},e.handleDismiss=function(){var t=e.props.handleDismiss;t&&t(!1)},e.handleConfirm=function(){var t=e.props.handleConfirm,n=e.input.current.value;n&&(t&&t(n),e.handleDismiss())},e.onChange=function(t){var n=tu(t.target.value);e.input.current.value=n,e.setState({value:n})},e.onSubmit=function(t){t.preventDefault()},e}return v(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.text,n=t.defaultText;this.input.current.focus(),this.input.current.value=e||n||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),e===n&&this.input.current.select()},e.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeydown,!1)},e.prototype.componentDidUpdate=function(t){var e=this.props.isVisible;t.isVisible!==e&&e&&this.input.current.focus()},e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.dismissLabel,r=t.confirmLabel,o=t.maxLength,a=t.type,s=t.children,l=this.state.value,u=i.Children.toArray(s)[0];if(!i.isValidElement(u))throw new Error("Child is not a valid react element");return i.cloneElement(u,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:i.createElement(Kp,{htmlFor:"photoeditorsdk-TextInput"},e),body:i.createElement(Qp,null,i.createElement(Yp,{onSubmit:this.onSubmit},i.createElement(qp,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:o}))),footer:i.createElement(Jp,{type:a},i.createElement(Hf,{label:n,ariaLabel:n,onClick:this.handleDismiss}),i.createElement(Gf,{label:r,ariaLabel:r,isDisabled:!l,onClick:this.handleConfirm}))})},e.defaultProps={defaultText:"Write Something"},e}(i.Component),th=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onDismiss=function(){var t=e.props,n=t.handleClose,r=t.handleDismiss;n&&n(),r&&r()},e.onConfirm=function(){var t=e.props,n=t.handleClose,r=t.handleConfirm;n&&n(),r&&r()},e}return v(e,t),e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.bodyLabel,r=t.confirmLabel,o=t.dismissLabel,a=t.type,s=t.children,l=i.Children.toArray(s)[0];if(!i.isValidElement(l))throw new Error("Child is not a valid react element");return i.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:i.createElement(jp,null,e),body:i.createElement(Mp,null,n),footer:i.createElement(Bp,{type:a},o&&i.createElement(Hf,{label:o,ariaLabel:o,onClick:this.onDismiss}),r&&i.createElement(Gf,{label:r,ariaLabel:r,onClick:this.onConfirm}))})},e}(i.Component),eh=t.div(Rp||(Rp=C(["\n  padding-bottom: ","px;\n"],["\n  padding-bottom: ","px;\n"])),(function(t){return 8*(t.count||1)}));eh.defaultProps={count:1};var nh,rh,ih,oh=t.label(nh||(nh=C(["\n  ","\n"],["\n  ","\n"])),op.VisuallyHidden),ah=t.label(ih||(ih=C(["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin: 0;\n\n  ","\n"],["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin: 0;\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.toolControlBar.inputLabelForeground}),(function(t){return t.isDisabled&&n(rh||(rh=C(["\n      opacity: ",";\n      cursor: default;\n      pointer-events: none;\n    "],["\n      opacity: ",";\n      cursor: default;\n      pointer-events: none;\n    "])),(function(t){return t.theme.toolControlBar.inputLabelInactiveOpacity}))})),sh=function(t){var e=t.label,n=t.htmlFor,r=t.show,o=t.style,a=t.isDisabled,s=t.className,l=r?ah:oh,u=n||(e?e.replace(" ","-"):void 0);return i.createElement(l,{style:o,isDisabled:a,htmlFor:u,className:s},e)};sh.defaultProps={show:!0},ah.defaultProps={theme:Vo};var lh,uh,ch=t.input(lh||(lh=C(["\n  ","\n  /* override user agent style */\n  padding: 0;\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n    pointer-events: none;\n  }\n"],["\n  ","\n  /* override user agent style */\n  padding: 0;\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n    pointer-events: none;\n  }\n"])),Xp,(function(t){return t.theme.textInput.inactiveOpacity})),fh=t.div(uh||(uh=C(["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"],["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"]))),ph=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onChange=function(t){var n=e.props.onChange;n&&n(t.target.value)},e}return v(e,t),e.prototype.render=function(){var t=this.props,e=t.id,n=t.testId,r=t.value,o=t.type,a=t.min,s=t.max,l=t.onBlur,u=t.onFocus,c=t.onKeyUp,f=t.onKeyDown,p=t.onMouseUp,h=t.onTouchEnd,d=t.isDisabled,y=t.className,g=t.children;return i.createElement(fh,{className:y},i.createElement(ch,{id:e,"data-test-id":n,"aria-hidden":d,disabled:d,value:r,type:o,min:a,max:s,onChange:this.onChange,onBlur:l,onFocus:u,onKeyUp:c,onKeyDown:f,onMouseUp:p,onTouchEnd:h}),g)},e.defaultProps={type:"text"},e}(i.Component);ch.defaultProps={theme:Vo};var hh,dh,yh,gh,mh,vh,_h,bh,wh,xh,Oh,Sh,kh=t.div(yh||(yh=C(["\n  ","\n"],["\n  ","\n"])),te()?n(hh||(hh=C([""],[""]))):n(dh||(dh=C(["\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n      "],["\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n      "])))),Th=function(t){function e(n){var r=t.call(this,n)||this;return r.node=null,r.handleOutsideClick=function(t){r.node&&r.node.current&&r.node.current.contains(t.target)||r.onSubmit()},r.onSubmit=function(){var t=r.props.onSubmit,n=r.state,i=n.value,o=n.isActive;if(t){var a=parseFloat(e.cleanValue(i));!Number.isNaN(a)&&o&&t(""+a)}r.setState({isActive:!1})},r.onBlur=function(){r.onSubmit()},r.onFocus=function(){r.setState({isActive:!0})},r.onKeyDown=function(t){var n=r.state.value;if("Enter"===t.key)r.onSubmit();else if("ArrowUp"===t.key){"number"==typeof(i=parseFloat(e.cleanValue(n)))&&r.setState({value:(i+1).toString(),isActive:!0})}else if("ArrowDown"===t.key){var i;"number"==typeof(i=parseFloat(e.cleanValue(n)))&&r.setState({value:(i-1).toString(),isActive:!0})}},r.onChange=function(t){r.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})},r.state={value:r.props.value||"",isActive:!1},r.node=i.createRef(),document.addEventListener("mousedown",r.handleOutsideClick,!1),document.addEventListener("touchstart",r.handleOutsideClick,!1),r}return v(e,t),e.getDerivedStateFromProps=function(t,e){var n=t.value,r=e.value,i=e.isActive;return n===r||i?null:{value:n}},e.cleanValue=function(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)},e.prototype.render=function(){var t=this.props,e=t.id,n=t.label,r=t.isDisabled,o=t.ariaHidden,a=t.onMouseUp,s=t.onTouchEnd,l=t.className,u=this.state.value;return i.createElement(kh,{ref:this.node,className:l},i.createElement(sh,{htmlFor:e,label:n,show:!!n,isDisabled:r}),!!n&&i.createElement(eh,null),i.createElement(ph,{id:e,value:u,isDisabled:r,"aria-hidden":o,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:a,onTouchEnd:s}))},e.defaultProps={showLabel:!0},e}(i.Component),Ch=t.div(gh||(gh=C(["\n  display: flex;\n  flex-direction: column;\n  /* needed for IE11 to properly calculate the width */\n  min-width: 1px;\n"],["\n  display: flex;\n  flex-direction: column;\n  /* needed for IE11 to properly calculate the width */\n  min-width: 1px;\n"]))),Eh=n(_h||(_h=C(["\n  ","\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"],["\n  ","\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"])),$t()||te()?n(mh||(mh=C(["\n        width: 16px;\n        height: 16px;\n      "],["\n        width: 16px;\n        height: 16px;\n      "]))):n(vh||(vh=C(["\n        width: 20px;\n        height: 20px;\n      "],["\n        width: 20px;\n        height: 20px;\n      "]))),(function(t){return t.theme.slider.thumbBackground}),(function(t){return t.theme.slider.thumbBorderColor})),Rh=t.input(xh||(xh=C(["\n  display: flex;\n  flex: 1 0 auto;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n\n  ","\n\n  ","\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n  &:hover {\n    opacity: ",";\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    appearance: none;\n    cursor: pointer;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 2px;\n    appearance: none;\n    background: transparent;\n    color: transparent;\n    border-color: transparent;\n    border-width: 6px 0;\n  }\n  &::-webkit-slider-thumb {\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-fill-lower {\n    background: ",";\n  }\n  &::-ms-fill-upper {\n    background: ",";\n  }\n  &::-ms-tooltip {\n    display: none;\n  }\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 200px;\n  }\n"],["\n  display: flex;\n  flex: 1 0 auto;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n\n  ","\n\n  ","\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n  &:hover {\n    opacity: ",";\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    appearance: none;\n    cursor: pointer;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 2px;\n    appearance: none;\n    background: transparent;\n    color: transparent;\n    border-color: transparent;\n    border-width: 6px 0;\n  }\n  &::-webkit-slider-thumb {\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-fill-lower {\n    background: ",";\n  }\n  &::-ms-fill-upper {\n    background: ",";\n  }\n  &::-ms-tooltip {\n    display: none;\n  }\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 200px;\n  }\n"])),op.Focused,$t()||te()?n(bh||(bh=C(["\n        margin-top: 10px;\n        height: 20px;\n        /* remove once we have a better concept for focus in all browser */\n        &:focus {\n          box-shadow: none;\n        }\n      "],["\n        margin-top: 10px;\n        height: 20px;\n        /* remove once we have a better concept for focus in all browser */\n        &:focus {\n          box-shadow: none;\n        }\n      "]))):n(wh||(wh=C(["\n        height: 2px;\n        background: ",";\n      "],["\n        height: 2px;\n        background: ",";\n      "])),(function(t){return"linear-gradient(to right, "+function(t){var e=100*(t.value-t.min)/(t.max-t.min);return t.adjust?t.value>0?(e=t.value*(t.max/2)*100,t.theme.slider.trackColor+" 0%,\n      "+t.theme.slider.trackColor+" 50%,\n      "+t.theme.slider.activeTrackColor+" 50%,\n      "+t.theme.slider.activeTrackColor+" "+(50+e)+"%,\n      "+t.theme.slider.trackColor+" "+(50+e)+"%,\n      "+t.theme.slider.trackColor+" 100%\n      "):t.value<0?(e=t.value*(t.min/2)*100,t.theme.slider.trackColor+" 0%,\n      "+t.theme.slider.trackColor+" "+(50-e)+"%,\n      "+t.theme.slider.activeTrackColor+" "+(50-e)+"%,\n      "+t.theme.slider.activeTrackColor+" 50%,\n      "+t.theme.slider.trackColor+" 50%,\n      "+t.theme.slider.trackColor+" 100%\n      "):t.theme.slider.trackColor+" 0%,\n    "+t.theme.slider.trackColor+" 100%":t.theme.slider.activeTrackColor+" 0%,\n    "+t.theme.slider.activeTrackColor+" "+e+"%,\n    "+t.theme.slider.trackColor+" "+e+"%,\n    "+t.theme.slider.trackColor+" 100%"}(t)+")"})),(function(t){return t.theme.slider.inactiveOpacity}),(function(t){return t.theme.slider.hoverOpacity}),Eh,Eh,Eh,(function(t){return""+t.theme.slider.activeTrackColor}),(function(t){return""+t.theme.slider.trackColor})),Dh=t.div(Oh||(Oh=C(["\n  display: flex;\n  align-items: center;\n  height: 26px;\n  margin-right: ","px;\n"],["\n  display: flex;\n  align-items: center;\n  height: 26px;\n  margin-right: ","px;\n"])),(function(t){return t.centerSlider?-56:0})),Ph=t(Th)(Sh||(Sh=C(["\n  max-width: 50px;\n  padding-left: 16px;\n  > div > input {\n    text-align: center;\n  }\n"],["\n  max-width: 50px;\n  padding-left: 16px;\n  > div > input {\n    text-align: center;\n  }\n"]))),Ih=function(t){function e(e){var n=t.call(this,e)||this;return n.onSubmit=function(t){var e=n.props,r=e.onChange,i=e.suffix,o=e.divider,a=e.min,s=e.max,l=e.value,u=t.replace(i,""),c=u?parseFloat(u)/o:l,f=Math.max(a,Math.min(s,c));Number.isNaN(f)||(r(f),n.props.onMouseUp?n.props.onMouseUp():n.props.onTouchEnd&&n.props.onTouchEnd())},n.onSliderChange=function(t){(0,n.props.onChange)(parseFloat(t.target.value))},n.randomId=A(),n}return v(e,t),e.prototype.render=function(){var t=this.props,e=t.value,n=t.snap,r=t.min,o=t.max,a=t.divider,s=t.suffix,l=t.decimal,u=t.showLabel,c=t.showInput,f=t.style,p=t.centerSlider,h=t.adjust,d=t.label,y=t.isDisabled,g=t.step,m=t["aria-hidden"],v=t.onMouseUp,_=t.onTouchEnd,b=t.className,w="photoeditorsdk-slider-"+this.randomId,x=w+"-list",O=w+"-input",S="number"==typeof n,k=S&&i.createElement("datalist",{id:x},i.createElement("option",{value:n})),T=""+(e*a).toFixed(l)+s,C=c&&i.createElement(Ph,{id:O,value:T,isDisabled:y,"aria-hidden":m,onSubmit:this.onSubmit});return i.createElement(Ch,{className:b,"data-test-id":d},i.createElement(sh,{isDisabled:y,label:d,show:u}),i.createElement(eh,{count:.25}),i.createElement(Dh,{centerSlider:c&&p},i.createElement(Rh,{type:"range",role:"slider","aria-hidden":m,tabIndex:0,value:e,min:r,max:o,step:g,style:f,disabled:y,id:w,list:S?x:void 0,onChange:this.onSliderChange,adjust:h,name:d,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:v,onTouchEnd:_}),k,C))},e.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""},e}(i.Component);Rh.defaultProps={theme:Vo};var Ah,Fh=t.input.attrs({type:"search"})(Ah||(Ah=C(["\n  ","\n"],["\n  ","\n"])),Xp);Fh.defaultProps={theme:Vo};var jh,Mh,Bh=t.input.attrs({type:"file",id:"fileUpload",accept:"image/png, image/jpeg"})(jh||(jh=C(["\n  display: none;\n"],["\n  display: none;\n"]))),zh=t.ul.attrs((function(t){var e=t.scrollable;return{"data-simplebar":e?"init":null,"data-simplebar-auto-hide":e?"false":null}}))(Mh||(Mh=C(["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: ",";\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"],["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: ",";\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"])),(function(t){return t.theme.dropdown.listBackground}),(function(t){return t.theme.dropdown.listForeground}),(function(t){return t.theme.dropdown.listBorderColor}),(function(t){return t.theme.dropdown.listShadow}),(function(t){return t.theme.measurements.zIndex.input.list}),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.shape.radiusMedium}));zh.defaultProps={theme:Vo,scrollable:!0};var Lh,Nh,Uh,Wh,Hh=n(Lh||(Lh=C(["\n  outline: none;\n"],["\n  outline: none;\n"]))),Gh=n(Nh||(Nh=C(["\n  opacity: ",";\n  pointer-events: none;\n"],["\n  opacity: ",";\n  pointer-events: none;\n"])),(function(t){return t.theme.dropdown.inactiveOpacity})),Vh=t.div(Wh||(Wh=C(["\n  display: block;\n  position: relative;\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n\n  &:focus a {\n    ","\n  }\n\n  ","\n\n  &:disabled {\n    ","\n  }\n\n  ","\n"],["\n  display: block;\n  position: relative;\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n\n  &:focus a {\n    ","\n  }\n\n  ","\n\n  &:disabled {\n    ","\n  }\n\n  ","\n"])),Hh,(function(t){return t.isOpen&&n(Uh||(Uh=C(["\n      a {\n        ","\n      }\n      "," {\n        visibility: visible;\n        opacity: 1;\n        display: block;\n      }\n    "],["\n      a {\n        ","\n      }\n      "," {\n        visibility: visible;\n        opacity: 1;\n        display: block;\n      }\n    "])),Hh,zh)}),Gh,(function(t){return t.isDisabled&&Gh}));Vh.defaultProps={theme:Vo};var Zh,Xh,Yh=t.li(Xh||(Xh=C(["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n  }\n\n  ","\n\n  ","\n"],["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n  }\n\n  ","\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case}),(function(t){return t.theme.dropdown.foreground}),(function(t){return t.theme.dropdown.listItemHoverBackground}),(function(t){return t.isActive&&n(Zh||(Zh=C(["\n      border-left: 2px solid ",";\n    "],["\n      border-left: 2px solid ",";\n    "])),(function(t){return t.theme.primary}))}),op.Focused);Yh.defaultProps={theme:Vo};var qh,Kh,Qh,Jh,$h,td,ed,nd,rd=t.div(qh||(qh=C(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  transition: border-color 0.4s ease-in-out;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  ","\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  transition: border-color 0.4s ease-in-out;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.dropdown.foreground}),(function(t){return t.theme.dropdown.background}),(function(t){return t.theme.dropdown.borderColor}),(function(t){return t.showList?"pointer":"default"}),(function(t){return t.theme.dropdown.hoverBorderColor}),op.Focused),id=t.div(Kh||(Kh=C(["\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n  right: 0;\n  top: 13px;\n"],["\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n  right: 0;\n  top: 13px;\n"])),(function(t){return t.theme.dropdown.caretColor}),(function(t){return t.rotation||0})),od=t.div(Qh||(Qh=C([""],[""]))),ad=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isOpen:!1},n.handleOutsideClick=function(t){n.node&&n.node.contains(t.target)||n.setState({isOpen:!1})},n.onSelect=function(t){n.props.onSelect(t),n.setState({isOpen:!1})},n.onClick=function(){n.setState((function(t){return{isOpen:!t.isOpen}}))},n.listItem=function(t){var e=n.props,r=e.itemStyle,o=e.selectedItem,a=t.value,s=t.label,l={};return"function"==typeof r?l=r(t):null!==r&&"object"==typeof r&&(l=r),i.createElement(Yh,{"aria-hidden":!n.state.isOpen,tabIndex:0,style:l,onClick:function(){return n.onSelect(a)},key:a,isActive:o===a},s)},n.onKeyDown=function(t){"Space"!==t.code&&"Enter"!==t.code||n.onClick()},n.nodeRef=function(t){n.node=t},n}return v(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick,!1)},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)},e.prototype.render=function(){var t=this.props,e=t.selectedItem,n=t.list,r=t.label,o=t.style,a=t.isDisabled,s=this.state.isOpen,l=n.length>1,u=a?{}:{tabIndex:0};return i.createElement(od,null,i.createElement(sh,{isDisabled:a,style:{paddingLeft:"0px"},label:r}),i.createElement(eh,null),i.createElement("div",{ref:this.nodeRef},i.createElement(Vh,{id:r.replace(" ","-"),isOpen:s,isDisabled:a},i.createElement(rd,_({"aria-hidden":a},u,{showList:l,style:o,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown}),e,l&&i.createElement(id,{rotation:s?180:0})),i.createElement(zh,{scrollable:n.length>4},l&&n.map(this.listItem)))))},e}(i.PureComponent),sd=t.div(Jh||(Jh=C(["\n  display: flex;\n  position: relative;\n  margin-bottom: 12px;\n  max-width: ","px;\n"],["\n  display: flex;\n  position: relative;\n  margin-bottom: 12px;\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.basicToolControlBar.maxWidth})),ld=t.input.attrs({type:"checkbox",tabIndex:0})($h||($h=C(["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  margin: 0;\n  padding: 0;\n  ","\n"],["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  margin: 0;\n  padding: 0;\n  ","\n"])),op.Focused),ud=t.div.attrs({tabIndex:0})(nd||(nd=C(["\n  position: relative;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n\n  &:first-child {\n    margin-right: 8px;\n  }\n\n  &:last-child {\n    margin-left: 8px;\n  }\n\n  ","\n\n  &:hover {\n    opacity: ",";\n  }\n  ","\n  ","\n"],["\n  position: relative;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n\n  &:first-child {\n    margin-right: 8px;\n  }\n\n  &:last-child {\n    margin-left: 8px;\n  }\n\n  ","\n\n  &:hover {\n    opacity: ",";\n  }\n  ","\n  ","\n"])),(function(t){return t.theme.checkbox.background}),(function(t){return t.theme.shape.radiusSmall}),op.Focused,(function(t){return t.theme.checkbox.hoverOpacity}),(function(t){return t.isChecked&&n(td||(td=C(["\n      background-color: ",";\n      &::after {\n        color: ",";\n        border-color: ",";\n      }\n      &:hover {\n        background-color: ",";\n        opacity: 0.8;\n      }\n    "],["\n      background-color: ",";\n      &::after {\n        color: ",";\n        border-color: ",";\n      }\n      &:hover {\n        background-color: ",";\n        opacity: 0.8;\n      }\n    "])),t.theme.checkbox.activeBackground,t.theme.checkbox.activeForeground,t.theme.checkbox.foreground,t.theme.checkbox.activeBackground)}),(function(t){return t.isDisabled&&n(ed||(ed=C(["\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "],["\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "])))})),cd=function(t){var e=t.label,n=t.value,r=t.checkMarkPosition,o=t.onClick,a=t.isDisabled,s=t.className,l=t.style,u="photoeditorsdk-"+e.replace(" ","-");return i.createElement(sd,{className:s,style:l},"left"===r&&i.createElement(ud,{onClick:o,isDisabled:a,isChecked:n}),i.createElement(sh,{isDisabled:a,label:e,htmlFor:u}),i.createElement(ld,{id:u,disabled:a,checked:n,onChange:o}),"right"===r&&i.createElement(ud,{onClick:o,isDisabled:a,isChecked:n}))};cd.defaultProps={value:!1,checkMarkPosition:"left"};var fd,pd,hd,dd,yd,gd,md,vd,_d,bd,wd,xd,Od,Sd=t.div(fd||(fd=C(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),kd=t(sh)(pd||(pd=C(["\n  align-self: flex-start;\n"],["\n  align-self: flex-start;\n"]))),Td=t(Bf)(hd||(hd=C(["\n  color: ",";\n  padding: 1px 7px 2px;\n"],["\n  color: ",";\n  padding: 1px 7px 2px;\n"])),(function(t){return t.theme.button.textSecondaryForeground})),Cd=t.div(dd||(dd=C(["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"],["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width-48})),Ed=t.article(yd||(yd=C(["\n  /* 0.6 of width here refers to the width of the container without padding */\n  width: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  text-align: center;\n  margin-top: 7px;\n  display: inline-block;\n  color: ",";\n"],["\n  /* 0.6 of width here refers to the width of the container without padding */\n  width: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  text-align: center;\n  margin-top: 7px;\n  display: inline-block;\n  color: ",";\n"])),(function(t){return.6*t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.toolControlBar.inputLabelForeground})),Rd=t.div(gd||(gd=C(["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"],["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"])),(function(t){return.6*t.theme.measurements.advancedUIToolControlBar.width})),Dd=t.span(md||(md=C(["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"],["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"])),(function(t){return Math.round(.6*t.length*t.theme.measurements.advancedUIToolControlBar.width)}),(function(t){return.6*t.activeIndex*t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.typography.fontFamily})),Pd=t.div(bd||(bd=C(["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  padding: 3px;\n  height: 0;\n  width: 0;\n\n  ","\n"],["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  padding: 3px;\n  height: 0;\n  width: 0;\n\n  ","\n"])),(function(t){return t.theme.card.foreground}),(function(t){var e=t.direction;return n("left"===e?vd||(vd=C(["\n          margin-left: 2px;\n          transform: rotate(135deg);\n        "],["\n          margin-left: 2px;\n          transform: rotate(135deg);\n        "])):_d||(_d=C(["\n          margin-right: 2px;\n          transform: rotate(-45deg);\n        "],["\n          margin-right: 2px;\n          transform: rotate(-45deg);\n        "])))})),Id=function(t){function e(e){var n=t.call(this,e)||this;return n.updateIndex=function(t,e){void 0===e&&(e=!1);var r=t+(e?-1:1),i=n.props.list.length-1;r>i&&(r=0),r<0&&(r=i),n.props.onSelect(n.props.list[r].identifier)},n.getActiveIndex=function(t){var e=n.props.list.findIndex((function(e){return e.identifier===t}));return-1!==e?e:0},n.throttledUpdateIndex=ha(n.updateIndex,600),n}return v(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.list,r=e.label,o=e.showLabel,a=void 0===o||o,s=this.getActiveIndex(this.props.defaultIdentifier),l=n.length<=1;return i.createElement(Sd,null,i.createElement(kd,{show:a,label:r}),a?i.createElement(eh,null):null,i.createElement(Cd,{id:"photoeditorsdk-"+r.replace(" ","-")},i.createElement(Td,{ariaLabel:"Select Previous",isDisabled:l,onClick:function(){return t.throttledUpdateIndex(s,!0)}},i.createElement(Pd,{direction:"left"})),i.createElement(Rd,null,i.createElement(Dd,{activeIndex:s,length:n.length},n.map((function(t){return i.createElement(Ed,{key:t.identifier},t.value)})))),i.createElement(Td,{ariaLabel:"Select Next",isDisabled:l,onClick:function(){return t.throttledUpdateIndex(s)}},i.createElement(Pd,{direction:"right"}))))},e.defaultProps={showLabel:!0},e}(i.PureComponent),Ad=t.div(wd||(wd=C([""],[""]))),Fd=function(t){var e=t.label,n=t.children,r=t.inline,o=t.showLabel,a=t.isDisabled;return i.createElement(Ad,null,i.createElement(sh,{isDisabled:a,label:e,show:o}),o&&i.createElement(eh,null)||null,i.createElement(jd,{id:"photoeditorsdk-"+e.replace(" ","-"),inline:!!r},n))},jd=t.div(Od||(Od=C(["\n  display: inline-flex;\n  ","\n"],["\n  display: inline-flex;\n  ","\n"])),(function(t){return!t.inline&&n(xd||(xd=C(["\n        flex-wrap: wrap;\n      "],["\n        flex-wrap: wrap;\n      "])))||""}));function Md(t,e){for(var n=0,r=t.length;n<r;n+=1)if(e.apply(e,[t[n],n,t]))return t[n];return null}function Bd(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function zd(t){return"number"==typeof t&&!Number.isNaN(t)}function Ld(t){return parseInt(t,10)}Fd.defaultProps={showLabel:!0};var Nd=["Moz","Webkit","O","ms"];function Ud(t,e){return e?""+e+function(t){var e,n="",r=!0;for(e=0;e<t.length;e+=1)r?(n+=t[e].toUpperCase(),r=!1):"-"===t[e]?r=!0:n+=t[e];return n}(t):t}var Wd=function(t){if(void 0===t&&(t="transform"),"undefined"==typeof window||void 0===window.document)return"";var e,n=window.document.documentElement.style;if(t in n)return"";for(e=0;e<Nd.length;e+=1)if(Ud(t,Nd[e])in n)return Nd[e];return""}(),Hd="";function Gd(t,e){return Hd||(Hd=Md(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(e){return Bd(t[e])}))),!!Bd(t[Hd])&&t[Hd](e)}function Vd(t,e,n){var r=t;do{if(Gd(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Zd(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function Xd(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}function Yd(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=Ld(n.borderTopWidth),e+=Ld(n.borderBottomWidth)}function qd(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=Ld(n.borderLeftWidth),e+=Ld(n.borderRightWidth)}function Kd(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=Ld(n.paddingTop),e-=Ld(n.paddingBottom)}function Qd(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=Ld(n.paddingLeft),e-=Ld(n.paddingRight)}function Jd(t,e){var n=null;return t.targetTouches&&(n=Md(t.targetTouches,(function(t){return e===t.identifier}))),t.changedTouches&&!n&&(n=Md(t.changedTouches,(function(t){return e===t.identifier}))),n}function $d(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:null}function ty(t){var e=c.findDOMNode(t);if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}function ey(t,e,n){var r=t.state,i=!zd(r.lastX),o=ty(t);return i?{node:o,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:o,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function ny(t,e){return{node:e.node,x:t.state.x+e.deltaX,y:t.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:t.state.x,lastY:t.state.y}}function ry(t){return"both"===t.props.axis||"x"===t.props.axis}function iy(t){return"both"===t.props.axis||"y"===t.props.axis}function oy(t,e){var n=ty(e),r=e.props.offsetParent;return!r&&n instanceof HTMLElement&&(r=n.offsetParent||n.ownerDocument.body),function(t,e){var n=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:t.clientX+e.scrollLeft-n.left,y:t.clientY+e.scrollTop-n.top}}(t,r)}var ay,sy,ly,uy,cy,fy,py,hy,dy,yy,gy,my,vy,_y,by,wy,xy,Oy={start:"touchstart",move:"touchmove",stop:"touchend"},Sy={start:"mousedown",move:"mousemove",stop:"mouseup"},ky=Sy,Ty={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},Cy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},e.getTouchFromEvent=function(t){var n=$d(t);return e.setState({touchIdentifier:n}),Jd(t,n)},e.preventDefault=function(t){t.stopPropagation&&t.stopPropagation()},e.handleDragStart=function(t){var n=c.findDOMNode(e);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(e.props.disabled||!(t.target instanceof Node)||e.props.handle&&!Vd(t.target,e.props.handle,n)||e.props.cancel&&Vd(t.target,e.props.cancel,n))return!1;var i=oy(t,e);if(null==i)return!1;var o=i.x,a=i.y,s=ey(e,o,a);if(!1===e.props.onStart(t,s))return!1;e.setState({dragging:!0,lastX:o,lastY:a}),"touchmove"===ky.move?Zd(r,ky.move,e.onTouchDrag):Zd(r,ky.move,e.onMouseDrag),Zd(r,ky.stop,e.handleDragStop)},e.handleDrag=function(t){var n=oy(t,e);if(null!=n){var r=n.x,i=n.y,o=ey(e,r,i);if(!1!==e.props.onDrag(t,o))e.setState({lastX:r,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(a)}}},e.handleDragStop=function(t){if(e.state.dragging){var n=oy(t,e);if(null!=n){var r=n.x,i=n.y,o=ey(e,r,i),a=c.findDOMNode(e);e.setState({dragging:!1,lastX:NaN,lastY:NaN}),e.props.onStop(t,o),a&&("touchmove"===ky.move?Xd(a.ownerDocument,ky.move,e.onTouchDrag):Xd(a.ownerDocument,ky.move,e.onMouseDrag),Xd(a.ownerDocument,ky.stop,e.handleDragStop))}}},e.onMouseDown=function(t){return e.preventDefault(t),ky=Sy,e.props.onMouseDown(t),(!t.button||"number"!=typeof t.button||0===t.button)&&e.handleDragStart(t)},e.onMouseDrag=function(t){return e.preventDefault(t),e.handleDrag(t)},e.onMouseUp=function(t){return e.preventDefault(t),ky=Sy,e.handleDragStop(t)},e.onTouchStart=function(t){e.preventDefault(t),ky=Oy;var n=e.getTouchFromEvent(t);return e.handleDragStart(n)},e.onTouchDrag=function(t){e.preventDefault(t),ky=Oy;var n=e.getTouchFromEvent(t);return e.handleDrag(n)},e.onTouchEnd=function(t){e.preventDefault(t),ky=Oy;var n=e.getTouchFromEvent(t);return e.handleDragStop(n)},e}return v(e,t),e.prototype.componentWillUnmount=function(){var t=c.findDOMNode(this);if(t){var e=t.ownerDocument;Xd(e,Sy.move,this.onMouseDrag),Xd(e,Oy.move,this.onTouchDrag),Xd(e,Sy.stop,this.handleDragStop),Xd(e,Oy.stop,this.handleDragStop)}},e.prototype.render=function(){return i.cloneElement(i.Children.only(this.props.children),{style:_({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})},e.defaultProps=Ty,e.displayName="DraggableCore",e}(i.Component),Ey=_(_({},Ty),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),Ry=function(t){function e(e){var n=t.call(this,e)||this;return n.onDragStart=function(t,e){if(!1===n.props.onStart(t,ny(n,e)))return!1;n.setState({dragging:!0,dragged:!0})},n.onDrag=function(t,e){var r=n.props,i=r.position,o=r.defaultPosition,a=r.onDrag,s=r.bounds;if(!n.state.dragging)return!1;var l=ny(n,e),u=Boolean(i),c={x:u?l.x:o.x,y:u?l.y:o.y,slackX:0,slackY:0};if(s){var f=c.x,p=c.y;c.x+=n.state.slackX,c.y+=n.state.slackY;var h=k(function(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r="string"==typeof r?r:_({},r);var i=ty(t);if("string"==typeof r){var o=i.ownerDocument,a=o.defaultView,s="parent"===r?i.parentNode:o.querySelector(r);if(!(s instanceof HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');if(i instanceof HTMLElement){var l=a.getComputedStyle(i),u=a.getComputedStyle(s);r={left:-i.offsetLeft+Ld(u.paddingLeft)+Ld(l.marginLeft),top:-i.offsetTop+Ld(u.paddingTop)+Ld(l.marginTop),right:Qd(s)-qd(i)-i.offsetLeft+Ld(u.paddingRight)-Ld(l.marginRight),bottom:Kd(s)-Yd(i)-i.offsetTop+Ld(u.paddingBottom)-Ld(l.marginBottom)}}}return zd((r=r).right)&&(e=Math.min(e,r.right)),zd(r.bottom)&&(n=Math.min(n,r.bottom)),zd(r.left)&&(e=Math.max(e,r.left)),zd(r.top)&&(n=Math.max(n,r.top)),[e,n]}(n,c.x,c.y),2),d=h[0],y=h[1];c.x=d,c.y=y,c.slackX=n.state.slackX+(f-c.x),c.slackY=n.state.slackY+(p-c.y),l.x=c.x,l.y=c.y,l.deltaX=c.x-n.state.x,l.deltaY=c.y-n.state.y}if(!1===a(t,l))return!1;n.setState(c)},n.onDragStop=function(t,e){if(!n.state.dragging)return!1;if(!1===n.props.onStop(t,ny(n,e)))return!1;var r={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(n.props.position)){var i=n.props.position,o=i.x,a=i.y;r.x=o,r.y=a}n.setState(r)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0},n}return v(e,t),e.prototype.componentDidUpdate=function(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))},e.prototype.componentWillUnmount=function(){this.setState({dragging:!1})},e.prototype.render=function(){var t,e=this.props,n=e.position,r=e.defaultPosition,o=e.rotation,a=e.defaultClassName,s=e.defaultClassNameDragging,l=e.defaultClassNameDragged,u=b(e,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),c=this.state,f=c.x,p=c.y,h=c.dragging,d=c.dragged,y=!Boolean(n)||h,g=n||r;t=function(t){var e,n="translate("+t.x+"px,"+t.y+"px) rotate("+t.rotation+"rad)";return(e={})[Ud("transform",Wd)]=n,e}({x:ry(this)&&y?f:g.x,y:iy(this)&&y?p:g.y,rotation:o});var m=i.Children.only(this.props.children),v=[m.props.className||"",a,h?s:"",d?l:""].join(" ").trim(),w=i.cloneElement(m,{className:v,style:_(_({},m.props.style),t)});return i.createElement(Cy,_({},u,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),w)},e.defaultProps=Ey,e.displayName="Draggable",e}(i.Component),Dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.getChildren=function(){var t=this,e=[],n=[];return i.Children.forEach(this.props.children,(function(r){switch(r.type.componentName){case"case":t.props.type===r.props.value&&e.push(r);break;case"default":n.push(r)}})),e.length>0?e:n},e.prototype.render=function(){var t=this.getChildren();return 0===t.length?null:i.createElement(i.Fragment,null,t)},e}(i.Component),Py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){return this.props.children},e.componentName="case",e}(i.Component),Iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){return this.props.children},e.componentName="default",e}(i.Component),Ay={Container:eu,ColorItem:Dp,ColorItemBase:sp,ColorItemBackground:Rc,ColorItemTiledBackground:Pc,ColorItemActiveOverlay:Bc,Dialog:function(t){var e=t.isVisible,n=void 0!==e&&e,r=t.width,o=void 0===r?"350px":r,a=t.height,s=void 0===a?"fit-content":a,l=t.position,u=t.header,c=t.body,f=t.footer,p=t.className,h=t.children;return i.createElement(Ip,{isVisible:n},i.createElement(Ap,null),i.createElement(Fp,{height:s,width:o,left:l.x,top:l.y,className:p},u,c,h,f))},DialogBase:Ip,DialogContainer:Fp,DialogBackdrop:Ap,DialogHeader:jp,DialogBody:Mp,DialogFooter:Bp,DialogSpinner:Up,TextEditModal:$p,ActionModal:th,InfoModal:Zp,Spacer:eh,Draggable:Ry,DraggableCore:Cy,Toast:au,Input:{Label:sh,File:Bh,Search:function(t){return i.createElement("div",null,i.createElement(sh,{show:!1,label:"photoeditorsdk-Search"}),i.createElement(Fh,{id:"photoeditorsdk-Search",onChange:function(e){t.onChange(e.target.value)},placeholder:t.placeholder}))},Slider:Ih,CarouselSlider:Id,Selection:Fd,Checkbox:cd,CheckboxBase:sd,CheckboxInput:ld,CheckboxCheckMark:ud,Dropdown:ad,Text:ph,NumericInput:Th,Form:function(t){var e=t.children;return i.createElement("form",{onSubmit:function(t){t.preventDefault()}},e)}},Switch:{Index:Dy,Case:Py,Default:Iy}},Fy=t(Jf)(ay||(ay=C(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(3n + 1),\n  &:nth-child(3n + 2) {\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(3n + 1),\n  &:nth-child(3n + 2) {\n    margin-right: ","px;\n  }\n"])),(function(t){return t.theme.measurements.advancedCard.small.width}),(function(t){return t.theme.measurements.advancedCard.small.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.measurements.advancedSpacer})),jy=t(Jf)(sy||(sy=C(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(2n + 1) {\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(2n + 1) {\n    margin-right: ","px;\n  }\n"])),(function(t){return t.theme.measurements.advancedCard.medium.width}),(function(t){return t.theme.measurements.advancedCard.medium.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.measurements.advancedSpacer})),My=t(Jf)(ly||(ly=C(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n"])),(function(t){return t.theme.measurements.advancedCard.large.width}),(function(t){return t.theme.measurements.advancedCard.large.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground})),By=function(t){t.isActive;var e=b(t,["isActive"]);return i.createElement(My,_({},e))},zy=function(t){var e=t.type===B.LARGE,n=t.type===B.SMALL,r=jy;return e?r=By:n&&(r=Fy),i.createElement(r,_({},t))},Ly=t.div(uy||(uy=C(["\n  display: flex;\n  flex-wrap: wrap;\n  /* we need this for IE11, width - padding on both sides */\n  max-width: ","px;\n"],["\n  display: flex;\n  flex-wrap: wrap;\n  /* we need this for IE11, width - padding on both sides */\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width-48})),Ny=ip,Uy=t(Uf)(cy||(cy=C(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case}),(function(t){return t.theme.button.textSecondaryForeground}),Pf,(function(t){return t.theme.button.textInactiveOpacity})),Wy=t(Bf)(fy||(fy=C(["\n  width: 60px;\n  height: 60px;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: ",";\n  padding: 2px;\n"],["\n  width: 60px;\n  height: 60px;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: ",";\n  padding: 2px;\n"])),(function(t){return t.theme.measurements.zIndex.button.float})),Hy=t.div(py||(py=C(["\n  height: 56px;\n  width: 56px;\n  border-radius: 50%;\n  background-color: ",";\n"],["\n  height: 56px;\n  width: 56px;\n  border-radius: 50%;\n  background-color: ",";\n"])),(function(t){return t.theme.webcam.floatButton})),Gy=t.div(hy||(hy=C(["\n  display: inline-flex;\n"],["\n  display: inline-flex;\n"]))),Vy=t(Uf)(dy||(dy=C(["\n  background: ",";\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  padding: 4px 10px;\n  position: relative;\n  /* for safari */\n  margin: 0;\n  &:last-child:after {\n    opacity: 0;\n  }\n"],["\n  background: ",";\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  padding: 4px 10px;\n  position: relative;\n  /* for safari */\n  margin: 0;\n  &:last-child:after {\n    opacity: 0;\n  }\n"])),(function(t){return t.theme.canvasActionBar.background}),(function(t){return t.theme.canvasActionBar.foreground}),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case})),Zy=t.div(my||(my=C(["\n  ",";\n  position: absolute;\n  transform: translate(-50%, -100%);\n  background: ",";\n  color: ",";\n  border-radius: ","px;\n  white-space: nowrap;\n  transition: opacity 0.3s ease-in-out;\n  z-index: ",";\n\n  "," {\n    &:after {\n      content: '';\n      position: absolute;\n      right: 0px;\n      top: 6px;\n      height: calc(100% - 12px);\n      border-right: 1px solid ",";\n      &:last-child {\n        border-right: unset;\n      }\n    }\n  }\n"],["\n  ",";\n  position: absolute;\n  transform: translate(-50%, -100%);\n  background: ",";\n  color: ",";\n  border-radius: ","px;\n  white-space: nowrap;\n  transition: opacity 0.3s ease-in-out;\n  z-index: ",";\n\n  "," {\n    &:after {\n      content: '';\n      position: absolute;\n      right: 0px;\n      top: 6px;\n      height: calc(100% - 12px);\n      border-right: 1px solid ",";\n      &:last-child {\n        border-right: unset;\n      }\n    }\n  }\n"])),(function(t){var e=t.show;return n(e?yy||(yy=C(["\n          opacity: 1;\n        "],["\n          opacity: 1;\n        "])):gy||(gy=C(["\n          opacity: 0;\n        "],["\n          opacity: 0;\n        "])))}),(function(t){return t.theme.canvasActionBar.background}),(function(t){return t.theme.canvasActionBar.foreground}),(function(t){return t.theme.canvasActionBar.borderRadius?t.theme.canvasActionBar.borderRadius:t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.zIndex.buttonGroup}),Vy,(function(t){return t.theme.canvasActionBar.separatorColor})),Xy=t.div(vy||(vy=C(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"],["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),Yy=t.canvas(_y||(_y=C(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),qy=t.div(xy||(xy=C(["\n  &&& {\n    display: ",";\n    flex-direction: row;\n    align-items: center;\n    height: ","px;\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding: 8px 24px;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    z-index: ",";\n    background: ",";\n    ","\n  }\n"],["\n  &&& {\n    display: ",";\n    flex-direction: row;\n    align-items: center;\n    height: ","px;\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding: 8px 24px;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    z-index: ",";\n    background: ",";\n    ","\n  }\n"])),(function(t){return t.hide?"none":"flex"}),(function(t){return t.theme.measurements.mainCanvasActionBar.height}),(function(t){return t.theme.mainCanvasActionBar.foreground}),(function(t){return t.theme.mainCanvasActionBar.borderColor}),(function(t){return t.theme.measurements.zIndex.canvas.bar}),(function(t){return t.transparentBackgound?"transparent":t.theme.mainCanvasActionBar.background}),(function(t){return t.bottom?n(by||(by=C(["\n            justify-content: space-around;\n            bottom: 0;\n            transform: rotate(180deg);\n          "],["\n            justify-content: space-around;\n            bottom: 0;\n            transform: rotate(180deg);\n          "]))):n(wy||(wy=C(["\n            justify-content: space-between;\n          "],["\n            justify-content: space-between;\n          "])))}));qy.defaultProps={theme:Vo};var Ky,Qy,Jy,$y=t.div.attrs({role:"main"})(Ky||(Ky=C(["\n  background-color: ",";\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* added this for safari, else the webcam overlay did not know the height */\n  height: 100%;\n  width: 100%;\n  margin-top: ","px;\n"],["\n  background-color: ",";\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* added this for safari, else the webcam overlay did not know the height */\n  height: 100%;\n  width: 100%;\n  margin-top: ","px;\n"])),(function(t){return t.theme.canvas.background}),(function(t){return t.theme.measurements.canvas.marginTop})),tg=t.canvas(Qy||(Qy=C(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]))),eg=t.div(Jy||(Jy=C(["\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  height: 100%;\n  width: 100%;\n  z-index: ",";\n  background-color: ",";\n"],["\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  height: 100%;\n  width: 100%;\n  z-index: ",";\n  background-color: ",";\n"])),(function(t){return t.theme.measurements.zIndex.canvas.webcam.backdrop}),(function(t){return t.theme.webcam.background}));eg.defaultProps={theme:Vo};var ng,rg,ig=t.video(ng||(ng=C(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"],["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]))),og=t.div.attrs((function(t){var e=t.radius;return{style:{height:2*e+"px",width:2*e+"px"}}}))(rg||(rg=C(["\n  border-radius: 50%;\n  border: 2px solid ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"],["\n  border-radius: 50%;\n  border: 2px solid ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"])),(function(t){return t.theme.canvas.controlsOutline}));og.defaultProps={theme:Vo};var ag,sg=t.div(ag||(ag=C(["\n  position: absolute;\n  color: ",";\n"],["\n  position: absolute;\n  color: ",";\n"])),(function(t){return t.theme.canvas.controlsOutline}));sg.defaultProps={theme:Vo};var lg,ug=t.div(lg||(lg=C(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  margin-left: -10px;\n  margin-top: -10px;\n  z-index: ",";\n  will-change: transform;\n  cursor: ew-resize;\n  &:before {\n    display: block;\n    position: absolute;\n    content: '';\n    background: ",";\n    border-radius: 50%;\n    width: ","px;\n    height: ","px;\n    top: ","px;\n    left: ","px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);\n  }\n"],["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  margin-left: -10px;\n  margin-top: -10px;\n  z-index: ",";\n  will-change: transform;\n  cursor: ew-resize;\n  &:before {\n    display: block;\n    position: absolute;\n    content: '';\n    background: ",";\n    border-radius: 50%;\n    width: ","px;\n    height: ","px;\n    top: ","px;\n    left: ","px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);\n  }\n"])),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop}),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop}),(function(t){return t.theme.measurements.zIndex.canvas.knob}),(function(t){return t.theme.canvas.controlsColor}),(function(t){return t.theme.measurements.canvasControls.knob.size}),(function(t){return t.theme.measurements.canvasControls.knob.size}),(function(t){return t.theme.measurements.canvasControls.knob.size/4}),(function(t){return t.theme.measurements.canvasControls.knob.size/4}));ug.defaultProps={theme:Vo};var cg,fg,pg,hg,dg,yg,gg,mg,vg,_g,bg,wg,xg,Og,Sg,kg,Tg,Cg,Eg,Rg,Dg,Pg,Ig=t.div((function(t){var e=t.theme.measurements.canvasControls.corner.touchable,r=e.desktop,i=e.mobile,o=r/4,a=i/2;return n(xg||(xg=C(["\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    ","\n    ","\n  ","\n  ","\n  @media all and (min-width: 0) and (max-width: 599px) {\n      width: ","px;\n      height: ","px;\n      ","\n      ","\n    }\n  "],["\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    ","\n    ","\n  ","\n  ","\n  @media all and (min-width: 0) and (max-width: 599px) {\n      width: ","px;\n      height: ","px;\n      ","\n      ","\n    }\n  "])),r,r,(function(t){return"top"===t.vertical?n(cg||(cg=C(["\n            top: 0px;\n          "],["\n            top: 0px;\n          "]))):n(fg||(fg=C(["\n            bottom: 0px;\n          "],["\n            bottom: 0px;\n          "])))}),(function(t){return"left"===t.horizontal?n(pg||(pg=C(["\n            left: 0px;\n          "],["\n            left: 0px;\n          "]))):n(hg||(hg=C(["\n            right: 0px;\n          "],["\n            right: 0px;\n          "])))}),(function(t){return"top"===t.vertical?n(dg||(dg=C(["\n            margin-top: -","px;\n          "],["\n            margin-top: -","px;\n          "])),o):n(yg||(yg=C(["\n            margin-bottom: -","px;\n          "],["\n            margin-bottom: -","px;\n          "])),o)}),(function(t){return"left"===t.horizontal?n(gg||(gg=C(["\n            margin-left: -","px;\n          "],["\n            margin-left: -","px;\n          "])),o):n(mg||(mg=C(["\n            margin-right: -","px;\n          "],["\n            margin-right: -","px;\n          "])),o)}),i,i,(function(t){return"top"===t.vertical?n(vg||(vg=C(["\n              margin-top: -","px;\n            "],["\n              margin-top: -","px;\n            "])),a):n(_g||(_g=C(["\n              margin-bottom: -","px;\n            "],["\n              margin-bottom: -","px;\n            "])),a)}),(function(t){return"left"===t.horizontal?n(bg||(bg=C(["\n              margin-left: -","px;\n            "],["\n              margin-left: -","px;\n            "])),a):n(wg||(wg=C(["\n              margin-right: -","px;\n            "],["\n              margin-right: -","px;\n            "])),a)}))})),Ag=t(Ig)((function(t){var e="right"===t.horizontal?t.borderWidth:0,r="bottom"===t.vertical?t.borderWidth:0,i="left"===t.horizontal?t.borderWidth:0,o=("top"===t.vertical?t.borderWidth:0)+"px "+e+"px "+r+"px "+i+"px",a="left"===t.horizontal&&"bottom"===t.vertical||"right"===t.horizontal&&"top"===t.vertical?"nesw-resize":"nwse-resize",s=t.theme.measurements.canvasControls.corner.touchable.desktop/4-t.borderWidth,l=t.theme.measurements.canvasControls.corner.touchable.mobile/4+t.borderWidth;return n(Pg||(Pg=C(["\n    &:before {\n      display: block;\n      position: absolute;\n      content: '';\n      width: ","px;\n      height: ","px;\n      z-index: ",";\n      border-color: ",";\n      border-style: solid;\n      border-width: ",";\n      pointer-events: auto;\n      ","\n      ","\n      @media all and (min-width: 0) and (max-width: 599px) {\n        ","\n        ","\n      }\n    }\n    cursor: ",";\n    pointer-events: none;\n  "],["\n    &:before {\n      display: block;\n      position: absolute;\n      content: '';\n      width: ","px;\n      height: ","px;\n      z-index: ",";\n      border-color: ",";\n      border-style: solid;\n      border-width: ",";\n      pointer-events: auto;\n      ","\n      ","\n      @media all and (min-width: 0) and (max-width: 599px) {\n        ","\n        ","\n      }\n    }\n    cursor: ",";\n    pointer-events: none;\n  "])),(function(t){return t.theme.measurements.canvasControls.corner.size}),(function(t){return t.theme.measurements.canvasControls.corner.size}),(function(t){return t.theme.measurements.zIndex.canvas.controls}),(function(t){return t.theme.canvas.controlsColor}),o,"top"===t.vertical?n(Og||(Og=C(["\n            top: ","px;\n          "],["\n            top: ","px;\n          "])),s):n(Sg||(Sg=C(["\n            bottom: ","px;\n          "],["\n            bottom: ","px;\n          "])),s),"left"===t.horizontal?n(kg||(kg=C(["\n            left: ","px;\n          "],["\n            left: ","px;\n          "])),s):n(Tg||(Tg=C(["\n            right: ","px;\n          "],["\n            right: ","px;\n          "])),s),"top"===t.vertical?n(Cg||(Cg=C(["\n              margin-top: ","px;\n            "],["\n              margin-top: ","px;\n            "])),l):n(Eg||(Eg=C(["\n              margin-bottom: ","px;\n            "],["\n              margin-bottom: ","px;\n            "])),l),"left"===t.horizontal?n(Rg||(Rg=C(["\n              margin-left: ","px;\n            "],["\n              margin-left: ","px;\n            "])),l):n(Dg||(Dg=C(["\n              margin-right: ","px;\n            "],["\n              margin-right: ","px;\n            "])),l),a)}));Ag.defaultProps={theme:Vo};var Fg,jg=t.div(Fg||(Fg=C(["\n  position: absolute;\n  height: ","px;\n  width: 4px;\n  z-index: ",";\n  background: ",";\n  cursor: pointer;\n"],["\n  position: absolute;\n  height: ","px;\n  width: 4px;\n  z-index: ",";\n  background: ",";\n  cursor: pointer;\n"])),(function(t){return t.theme.measurements.canvasControls.width.size}),(function(t){return t.theme.measurements.zIndex.canvas.controls}),(function(t){return t.theme.canvas.controlsColor}));jg.defaultProps={theme:Vo};var Mg,Bg=t.div.attrs((function(t){return{style:{height:t.height+"px",width:t.width+"px"}}}))(Mg||(Mg=C(["\n  border-style: solid;\n  border-width: 2px 0 2px 0;\n  border-color: ",";\n  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2), inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  position: absolute;\n"],["\n  border-style: solid;\n  border-width: 2px 0 2px 0;\n  border-color: ",";\n  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2), inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  position: absolute;\n"])),(function(t){return t.theme.canvas.controlsOutline}));Bg.defaultProps={theme:Vo};var zg,Lg=t.div.attrs((function(t){var e=t.height,n=t.width,r=t.theme;return{style:{height:e+r.measurements.canvasControls.sprite.controlPadding+"px",width:n+r.measurements.canvasControls.sprite.controlPadding+"px"}}}))(zg||(zg=C(["\n  left: -","px;\n  top: -","px;\n  transform-origin: center center;\n  border-style: solid;\n  border-width: 2px;\n  border-color: ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n  will-change: transform;\n  position: absolute;\n"],["\n  left: -","px;\n  top: -","px;\n  transform-origin: center center;\n  border-style: solid;\n  border-width: 2px;\n  border-color: ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n  will-change: transform;\n  position: absolute;\n"])),(function(t){return t.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(t){return t.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(t){return t.theme.canvas.controlsColor}));Lg.defaultProps={theme:Vo};var Ng,Ug,Wg,Hg,Gg,Vg,Zg,Xg,Yg,qg,Kg=t.div.attrs((function(t){return{style:{left:t.x+"px"}}}))(Ng||(Ng=C(["\n  position: absolute;\n  bottom: -","px;\n  height: ","px;\n  width: 2px;\n  background-color: ",";\n"],["\n  position: absolute;\n  bottom: -","px;\n  height: ","px;\n  width: 2px;\n  background-color: ",";\n"])),(function(t){return t.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(t){return t.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(t){return t.theme.canvas.controlsOutline})),Qg=t.div(Ug||(Ug=C(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"],["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),Jg=t.div.attrs({tabIndex:0})(Wg||(Wg=C(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  top: 0;\n  left: 0;\n  &:focus {\n    outline: 0;\n  }\n"],["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  top: 0;\n  left: 0;\n  &:focus {\n    outline: 0;\n  }\n"])),(function(t){return t.height}),(function(t){return t.width})),$g=(void 0===Hg&&(Hg=Jt()),-1!==Hg.indexOf("Safari")&&-1===Hg.indexOf("Chrome")?n(Gg||(Gg=C(["\n      transition: unset;\n    "],["\n      transition: unset;\n    "]))):n(Vg||(Vg=C(["\n      transition: all 0.4s ease-in-out;\n    "],["\n      transition: all 0.4s ease-in-out;\n    "])))),tm=t.div(Zg||(Zg=C(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"],["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(t){return t.theme.canvas.cropBackdrop}),(function(t){return t.theme.measurements.zIndex.canvas.crop.backdrop}),$g),em=t.div.attrs({"data-test-id":"CropMask"})(Xg||(Xg=C(["\n  position: absolute;\n  box-shadow: inset 0 0 0 2px ",";\n  cursor: move;\n  ","\n"],["\n  position: absolute;\n  box-shadow: inset 0 0 0 2px ",";\n  cursor: move;\n  ","\n"])),(function(t){return t.theme.canvas.controlsOutline}),$g),nm=t.div(Yg||(Yg=C(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"],["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(t){return t.theme.canvas.controlsOutline}),(function(t){return t.theme.measurements.zIndex.canvas.crop.grid}),$g),rm=t(Ag)(qg||(qg=C(["\n  z-index: ",";\n  ",";\n"],["\n  z-index: ",";\n  ",";\n"])),(function(t){return t.theme.measurements.zIndex.canvas.controls}),$g),im={Index:Yy,Area:Xy,Bar:{Index:qy,ButtonGroup:Gy},Button:{TextSecondary:Uy,Float:function(t){return i.createElement(Wy,_({},t),i.createElement(Hy,null))}},Container:$y,Element:tg,Wrapper:eg,Webcam:ig,Controls:{Knob:ug,Circle:og,Corner:Ag,Line:sg,Area:Bg,Sprite:Lg,RotateHandle:Kg,Container:Qg,Wrapper:Jg,SpriteActionsWrapper:Zy,SpriteActionButton:Vy,Width:jg},Crop:{Mask:em,GridLine:nm,Backdrop:tm,Control:rm}},om=function(t){function e(e){var n=t.call(this,e)||this;return n.init=function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){n.video.srcObject=t})).catch((function(){n.props.modal.showActionModal({type:z.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){n.props.active.selectWebcam(!1)}})})):n.props.modal.showActionModal({type:z.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){n.props.active.selectWebcam(!1)}})},n.stop=function(){var t=n.props.active;n.video.srcObject.getTracks().forEach((function(t){t.stop()})),n.video.srcObject=null,t.selectWebcam(!1)},n.captureAndCloseWebcam=function(){n.canvas.width=n.video.videoWidth,n.canvas.height=n.video.videoHeight,n.canvas.getContext("2d").drawImage(n.video,0,0),n.props.active.newImage(n.canvas.toDataURL("image/webp")),n.stop()},n.videoRef=i.createRef(),n}return v(e,t),e.prototype.componentDidMount=function(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()},e.prototype.render=function(){var t=this.props.editor,e=t.getPreviewSize(),n=e.height,r=e.width,o=t.configStore.measurements,a=this.props.canvas.canvasSize.height,s=(a-n)/2,l=s<24+o.buttons.float.size?a-48-o.buttons.float.size/2:a-s+24,u=this.props.active.webcamLabel;return i.createElement(im.Wrapper,null,i.createElement(im.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},i.createElement(im.Bar.ButtonGroup,null,i.createElement(Vf,{ariaLabel:u,onClick:this.stop},u))),i.createElement(im.Webcam,{style:{height:n,width:r},autoPlay:!0,ref:this.videoRef}),i.createElement(im.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:this.captureAndCloseWebcam}))},e}(i.Component),am=qu("active","canvas","modal","editor")(dc(om)),sm=function(t){function e(e){var n=t.call(this,e)||this;return n.wrapperElementRef=null,n.timeout=null,n.updateDimensions=function(t){void 0===t&&(t=!0),t?(clearTimeout(n.timeout),n.timeout=setTimeout((function(){n.update(t)}),100)):n.update(t)},n.update=function(t){void 0===t&&(t=!0);var e=n.wrapperElementRef.current;n.props.canvas.saveDimensions({width:e&&e.clientWidth||0,height:e&&e.clientHeight||0,render:t})},n.wrapperElementRef=i.createRef(),n.resizeObserver=new zs((function(){n.updateDimensions(!1)})),n}return v(e,t),e.prototype.componentDidMount=function(){var t=this;this.updateDimensions(!1),window.addEventListener("resize",(function(){return t.updateDimensions(!0)})),this.wrapperElementRef.current&&this.resizeObserver.observe(this.wrapperElementRef.current)},e.prototype.componentWillUnmount=function(){var t=this;window.removeEventListener("resize",(function(){return t.updateDimensions(!0)})),this.timeout&&clearTimeout(this.timeout)},e.prototype.render=function(){return i.createElement(im.Container,{"data-test-id":"CanvasContainer",ref:this.wrapperElementRef},this.props.children)},e}(a),lm=qu("canvas")(dc(sm)),um=function(t,e){return void 0!==t&&void 0!==e&&!Number.isNaN(t)&&!Number.isNaN(e)},cm=t(im.Controls.Knob)(hm||(hm=C(["\n  margin-top: -","px;\n  margin-left: -","px;\n"],["\n  margin-top: -","px;\n  margin-left: -","px;\n"])),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop/2}),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop/2})),fm=t(im.Controls.Container)(dm||(dm=C(["\n  overflow: unset;\n"],["\n  overflow: unset;\n"]))),pm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.start=function(t,n){var r=n.x,i=n.y;um(r,i)&&e.focusTool.setStart({x:r,y:i})},e.end=function(t,n){var r=n.x,i=n.y;um(r,i)&&e.focusTool.setEnd({x:r,y:i})},e.onKnob1DragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.start(t,n)},e.onKnob1DragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.start(t,n),e.focusTool.clickableCanvas(!0)},e.onKnob2DragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.end(t,n)},e.onKnob2DragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.end(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;um(r,i)&&e.focusTool.toolSnapshot(n)},e.getLine=function(){var t=e.props.canvas.canvasSize,n=t.height,r=t.width,o=e.focusTool.startOnPreview,a=e.focusTool.endOnPreview;return i.createElement("svg",{focusable:"false",height:n,width:r},i.createElement("line",{x1:o.x,y1:o.y,x2:a.x,y2:a.y,strokeWidth:"2",stroke:"currentColor"}))},e}return v(e,t),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),e.prototype.render=function(){return i.createElement(fm,null,i.createElement(im.Controls.Line,null,this.getLine()),i.createElement(Ay.Draggable,{bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},i.createElement(cm,null)),i.createElement(Ay.Draggable,{bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},i.createElement(cm,null)))},e}(i.Component);cm.defaultProps={theme:Vo};var hm,dm,ym,gm,mm=qu("canvas","focusTool")(dc(pm)),vm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={knobAngle:2.35},e.onCircle=function(t,n){var r=n.x,i=n.y;if(um(r,i)){var o=e.focusTool.radius;e.focusTool.setCenter({x:r+o,y:i+o})}},e.onKnob=function(t,n){var r=n.x,i=n.y;if(um(r,i)){var o=e.focusTool.center,a=new R(r,i),s=new R(o.x,o.y).subtract(a),l=s.magnitude,u=-Math.atan2(s.y,s.x);e.setState({knobAngle:u}),e.focusTool.setRadius(l)}},e.onCircleDragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.onCircle(t,n)},e.onCircleDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.onCircle(t,n),e.focusTool.clickableCanvas(!0)},e.onKnobDragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.onKnob(t,n)},e.onKnobDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusSize),e.onKnob(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;um(r,i)&&e.focusTool.toolSnapshot(n)},e}return v(e,t),e.prototype.componentDidMount=function(){this.setState({knobAngle:2.35})},Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.focusTool,e=t.center,n=t.radius,r={x:e.x-n,y:e.y-n},o=Math.PI-this.state.knobAngle,a={x:e.x+n*Math.cos(o),y:e.y+n*Math.sin(o)};return i.createElement(im.Controls.Container,null,i.createElement(Ay.Draggable,{bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:a},i.createElement(im.Controls.Knob,null)),i.createElement(Ay.Draggable,{onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:r},i.createElement(im.Controls.Circle,{radius:n})))},e}(i.Component),_m=qu("focusTool","canvas")(dc(vm)),bm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getKnobPosition=function(){var t=e.focusTool.origin,n=e.focusTool.size/2,r=Math.PI/2+e.focusTool.rotation;return{x:t.x+n*Math.cos(r),y:t.y+n*Math.sin(r)}},e.onArea=function(t,n){var r=n.x,i=n.y,o=e.props.editor.configStore.measurements.canvasControls.knob.size;if(um(r,i)){var a=e.props.canvas,s=e.focusTool,l=s.size,u=r+s.mirroredAreaWidth/2,c=i+l/2,f=new R(e.getKnobPosition()),p=new R({x:r,y:i}).subtract(new R(e.areaPosition)),h=f.add(p);h.x>o&&h.x<a.canvasSize.width-o&&h.y>o&&h.y<a.canvasSize.height-o&&e.focusTool.setOrigin({x:u,y:c})}},e.onKnob=function(t,n){var r=n.x,i=n.y;if(um(r,i)){e.focusTool.clickableCanvas(!1);var o=new R(e.focusTool.origin),a=new R(r,i),s=o.subtract(a),l=s.magnitude,u=Math.PI/2+Math.atan2(s.y,s.x);e.focusTool.setSize(2*l),e.focusTool.setRotation(u)}},e.onAreaDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.onArea(t,n),e.focusTool.clickableCanvas(!0)},e.onKnobDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusSize),e.onKnob(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;um(r,i)&&e.focusTool.toolSnapshot(n)},e}return v(e,t),Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"areaPosition",{get:function(){var t=this.focusTool,e=t.origin,n=t.size,r=t.mirroredAreaWidth;return{x:e.x-r/2,y:e.y-n/2}},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.areaPosition,e=t.x,n=t.y;return i.createElement(im.Controls.Container,null,i.createElement(Ay.Draggable,{bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},i.createElement(im.Controls.Knob,null)),i.createElement(Ay.Draggable,{onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:n},rotation:this.focusTool.rotation},i.createElement(im.Controls.Area,{height:this.focusTool.size,width:this.focusTool.mirroredAreaWidth})))},e}(i.Component),wm=qu("focusTool","canvas","editor")(dc(bm)),xm=qu("focusTool")(dc((function(t){var e=t.focusTool,n=e.state,r=function(){switch(n.identifier){case nt.LINEAR:return mm;case nt.RADIAL:return _m;case nt.MIRRORED:return wm}return null}();return e.isOptionSelected&&r?i.createElement(r,null):null}))),Om=t(im.Controls.Container)(ym||(ym=C(["\n  cursor: none;\n"],["\n  cursor: none;\n"]))),Sm=t.div(gm||(gm=C(["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border-width: 2px;\n  border-style: solid;\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);\n"],["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border-width: 2px;\n  border-style: solid;\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);\n"]))),km=function(t){function e(e){var n=t.call(this,e)||this;return n.INITIAL_POSITION={x:void 0,y:void 0},n.state=_(_({},n.INITIAL_POSITION),{isDrawing:!1}),n.containerElementRef=null,n.getCursorCoordinates=function(t){var e=0,r=0;if(-1!==t.type.indexOf("touch")){if(!(i=t).touches.length)return _(_({},n.INITIAL_POSITION),{height:0,width:0});e=i.touches[0].clientX,r=i.touches[0].clientY}else{var i;e=(i=t).clientX,r=i.clientY}var o=n.containerElementRef.current.getBoundingClientRect();return{x:e-o.left,y:r-o.top,height:o.height,width:o.width}},n.draw=function(t){t.preventDefault(),t.stopPropagation(),n.touchDraw(t)},n.touchDraw=function(t){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;void 0!==r&&void 0!==i&&(n.setState({x:r,y:i}),n.state.isDrawing&&n.brushTool.strokePosition({x:r,y:i}))},n.start=function(){n.brushTool.clickableCanvas(!1),n.setState({isDrawing:!0}),n.brushTool.beginStroke()},n.stop=function(t){n.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),n.setState({isDrawing:!1}),n.brushTool.endStroke(),n.brushTool.clickableCanvas(!0))},n.setInitialPosition=function(){n.setState(_({},n.INITIAL_POSITION))},n.mouseOut=function(t){var e=n.props.config;t.preventDefault(),t.stopPropagation();var r=n.brushTool.sizeOnScreenSpace/2,i=n.getCursorCoordinates(t),o=i.x,a=i.y,s=i.height,l=i.width;o&&a&&(o<0||a<0||o>l-r||a>s-r||a<e.measurements.mainCanvasActionBar.height)&&n.setInitialPosition()},n.touchEnd=function(t){t.preventDefault(),t.stopPropagation();var e=n.state,r=e.x,i=e.y;r&&i&&n.setInitialPosition()},n.getCursor=function(){var t=n.state,e=t.x,r=t.y;if(e&&r){var o=nn(n.brushTool.color),a=n.brushTool.sizeOnScreenSpace+"px",s={left:n.state.x+"px",top:n.state.y+"px",borderColor:o,height:a,width:a};return i.createElement(Sm,{style:s})}return null},n.containerElementRef=i.createRef(),n}return v(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})},e.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)},Object.defineProperty(e.prototype,"brushTool",{get:function(){return this.props.brushTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){return i.createElement(Om,{ref:this.containerElementRef,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.start,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())},e}(i.Component),Tm=qu("brushTool","config")(dc(km));var Cm,Em,Rm,Dm,Pm,Im,Am,Fm,jm,Mm,Bm,zm,Lm,Nm,Um,Wm,Hm,Gm,Vm,Zm,Xm,Ym=t.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})(Cm||(Cm=C([""],[""]))),qm={adjustment:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",null,i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{transform:"translate(12 12)"},i.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),i.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},i.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),i.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},i.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),i.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},i.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),i.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))))},filter:function(){return i.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",null,i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},i.createElement("g",null,i.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))))},library:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},i.createElement("g",null,i.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),i.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),i.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),i.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),i.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),i.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},i.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),i.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))))},overlay:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},i.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))))},focus:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",null,i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{transform:"translate(12 12)"},i.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),i.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},i.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))))},sticker:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},i.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("g",null,i.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},i.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},i.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),i.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),i.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))))},text:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),i.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),i.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))},textdesign:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),i.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),i.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))},frame:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},i.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),i.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),i.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),i.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})))},transform:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},i.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),i.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),i.createElement("g",{fillOpacity:"0.2"},i.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),i.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))},brush:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),i.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),i.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}},Km={left:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))},right:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),i.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))},center:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}},Qm={addText:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),i.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})))},openWebcam:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}))},reset:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}))},shuffle:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))},uploadImage:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})))}},Jm=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),i.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})))},$m=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),i.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})))},tv=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),i.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})))},ev=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),i.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))},nv={categories:(Em={},Em[vt.CommonCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,o=void 0===r?48:r,a=t.height,s=void 0===a?48:a;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:s,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(13 13)"},i.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),i.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),i.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),i.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),i.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),i.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),i.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),i.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),i.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),i.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),i.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),i.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),i.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),i.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),i.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),i.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))))},Em[vt.FacebookCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,o=void 0===r?48:r,a=t.height,s=void 0===a?48:a;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:s,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fill:n,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})))},Em[vt.TwitterCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,o=void 0===r?48:r,a=t.height,s=void 0===a?48:a;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:s,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fill:n,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})))},Em[vt.InstagramCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,o=void 0===r?48:r,a=t.height,s=void 0===a?48:a;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:s,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(13 13)"},i.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),i.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),i.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))))},Em),crops:(Rm={},Rm[vt.Custom]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,o=void 0===r?32:r,a=t.height,s=void 0===a?32:a;return i.createElement(Ym,{width:o,height:s,viewBox:"0 0 32 32"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(-8 -8)"},i.createElement("g",{transform:"translate(8 8)"},i.createElement("g",null,i.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),i.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),i.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),i.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),i.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),i.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),i.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),i.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),i.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),i.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),i.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),i.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),i.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),i.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),i.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),i.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),i.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),i.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),i.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),i.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),i.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),i.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),i.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),i.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))))},Rm[vt.Square]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.mask,o=void 0===r?"#fff":r,a=t.width,s=void 0===a?32:a,l=t.height,u=void 0===l?32:l;return i.createElement(Ym,{width:s,height:u,viewBox:"0 0 32 32"},i.createElement("defs",null,i.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{transform:"translate(-8 -8)"},i.createElement("g",{transform:"translate(7.08 7.293)"},i.createElement("mask",{fill:o},i.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),i.createElement("use",{fill:n,xlinkHref:"#photoeditorsdk-square-icon"})))))},Rm[vt.ThreeByFour]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,o=void 0===r?32:r,a=t.height,s=void 0===a?42:a;return i.createElement(Ym,{width:o,height:s,viewBox:"0 0 32 42"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(-8 -3)"},i.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))))},Rm[vt.FourByThree]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,o=void 0===r?32:r,a=t.height,s=void 0===a?48:a;return i.createElement(Ym,{width:o,height:s,viewBox:"0 0 42 32"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(-3 -8)"},i.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))))},Rm[vt.NineBySixteen]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,o=void 0===r?26:r,a=t.height,s=void 0===a?46:a;return i.createElement(Ym,{width:o,height:s,viewBox:"0 0 26 46"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(-11 -1)"},i.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))))},Rm[vt.SixteenByNine]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,o=void 0===r?26:r,a=t.height,s=void 0===a?46:a;return i.createElement(Ym,{width:o,height:s,viewBox:"0 0 26 46"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{fill:n,transform:"translate(-11 -1)"},i.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))))},Rm[vt.FacebookPost]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),i.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:o,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),i.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),i.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),i.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),i.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),i.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})))},Rm[vt.FacebookProfile]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",null,i.createElement("path",{fill:n,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),i.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:n,rx:"1"}),i.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:n,rx:"1"}),i.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:n,rx:"1"}),i.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"}),i.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:n,rx:"1"}))))},Rm[vt.FacebookTitle]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("g",{transform:"translate(5 5)"},i.createElement("path",{fill:o,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),i.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:n,rx:"1"}),i.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:n,rx:"1"}),i.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:n,rx:"1"}),i.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:n,rx:"1"}),i.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:n,rx:"1"}))))},Rm[vt.InstagramLandscape]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:n,rx:"1"}),i.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),i.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),i.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:o,rx:"1"})))},Rm[vt.InstagramPortrait]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:o,rx:"1"}),i.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),i.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),i.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:n,rx:"1"})))},Rm[vt.InstagramSquare]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:o,rx:"1"}),i.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),i.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),i.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),i.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:n,rx:"1"})))},Rm[vt.InstagramStory]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:o,rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:n,rx:"1"})))},Rm[vt.TwitterPost]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.shadow,s=void 0===a?"#333333":a,l=t.width,u=void 0===l?"48px":l,c=t.height,f=void 0===c?"48px":c;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:u,height:f,viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},i.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:o,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),i.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:s,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),i.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},Rm[vt.TwitterProfile]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),i.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:o,rx:"1"})))},Rm[vt.TwitterTitle]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,o=void 0===r?"#565656":r,a=t.width,s=void 0===a?"48px":a,l=t.height,u=void 0===l?"48px":l;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u,viewBox:"0 0 48 48"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:o,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),i.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),i.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),i.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},Rm),dots:function(t){var e=t.height,n=void 0===e?3:e,r=t.width,o=void 0===r?102:r,a=t.x,s=void 0===a?-102:a,l=t.className,u=t.style;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:n,viewBox:"0 0 102 3",className:l,style:u},i.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},i.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),i.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:1.5*-o,y:"0",width:4*o,height:"3",transform:"translate("+s+", 0)"}))},duplicate:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})))},edit:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}))},bringToFront:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H24V24H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})))},delete:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})))},flipHorizontal:function(t){var e=t.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:e},i.createElement("title",null,"Flip Horizontal"),i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})))},flipVertical:function(t){var e=t.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:e},i.createElement("title",null,"Flip Vertical"),i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})))},rotate:function(t){var e=t.alt,n=void 0===e?"Rotate":e,r=t.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:r},i.createElement("title",null,n),i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})))}},rv=((Dm={})[K.BRIGHTNESS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",null,i.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),i.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})))},Dm[K.CONTRAST]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})))},Dm[K.SATURATION]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})))},Dm[K.CLARITY]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})))},Dm[K.SHADOWS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})))},Dm[K.HIGHLIGHTS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})))},Dm[K.EXPOSURE]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})))},Dm[K.GAMMA]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})))},Dm[K.BLACKS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})))},Dm[K.WHITES]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})))},Dm[K.TEMPERATURE]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})))},Dm[K.SHARPNESS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})))},Dm),iv=t.div(Im||(Im=C(["\n  overflow: hidden;\n  display: none;\n  position: relative;\n  transform: unset !important;\n  vertical-align: bottom;\n  ","\n"],["\n  overflow: hidden;\n  display: none;\n  position: relative;\n  transform: unset !important;\n  vertical-align: bottom;\n  ","\n"])),(function(t){return t.isVisible&&n(Pm||(Pm=C(["\n      display: inline-block;\n    "],["\n      display: inline-block;\n    "])))})),ov=t.div(Am||(Am=C(["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-self: center;\n"],["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-self: center;\n"]))),av=t.div(jm||(jm=C(["\n  font-size: 15px;\n  display: none;\n  width: 33px;\n  text-align: right;\n  color: ",";\n  z-index: 1;\n  margin: 2px;\n  ","\n"],["\n  font-size: 15px;\n  display: none;\n  width: 33px;\n  text-align: right;\n  color: ",";\n  z-index: 1;\n  margin: 2px;\n  ","\n"])),(function(t){return t.theme.foreground}),(function(t){return t.isVisible&&n(Fm||(Fm=C(["\n      display: inline-block;\n    "],["\n      display: inline-block;\n    "])))})),sv=t.div(Mm||(Mm=C(["\n  transform: translate(0, 0) !important;\n"],["\n  transform: translate(0, 0) !important;\n"]))),lv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SLIDER_WIDTH=213,e.MAX_ROTATION=45,e.DEGREES_PER_PIXEL=2*e.MAX_ROTATION/e.SLIDER_WIDTH,e.drag=function(t,n){var r=n.x,i=e.transformTool.rotateFlipState;i.flipHorizontally!==i.flipVertically&&(r*=-1);var o=e.transformTool.defaultAngle-r*e.DEGREES_PER_PIXEL,a=Math.min(e.MAX_ROTATION,Math.max(o,-1*e.MAX_ROTATION));e.transformTool.setRotation(parseInt(""+a,10))},e.stop=function(){e.transformTool.setDefaultAngle(e.transformTool.rotationInDegrees),e.transformTool.addLocalSnapshot()},e}return v(e,t),Object.defineProperty(e.prototype,"transformTool",{get:function(){return this.props.transformTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.config,n=t.canvasWidth,r=this.transformTool.rotateFlipState,o=r.flipHorizontally,a=r.flipVertically,s=e.isLayoutAdvanced&&n>e.measurements.canvas.transform.minSliderWidth,l=e.isLayoutAdvanced&&n>e.measurements.canvas.transform.minValueWidth,u=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,c=o===a?-1*u:u,f=o!==a?-1*this.props.transformTool.rotationInDegrees:this.props.transformTool.rotationInDegrees;return i.createElement(ov,null,i.createElement(Ay.Draggable,{axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!s},i.createElement(sv,null,i.createElement(iv,{isVisible:s},i.createElement(nv.dots,{width:90,height:15,x:c})),i.createElement(av,{isVisible:l},f,""),i.createElement(iv,{isVisible:s},i.createElement(nv.dots,{width:90,height:15,x:c})))))},e}(i.Component),uv=qu("transformTool","config")(dc(lv)),cv=t(nv.rotate)(Bm||(Bm=C(["\n  height: 16px;\n  width: 16px;\n  transform: scaleX(-1);\n"],["\n  height: 16px;\n  width: 16px;\n  transform: scaleX(-1);\n"]))),fv=t(nv.rotate)(zm||(zm=C(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),pv=t(nv.flipHorizontal)(Lm||(Lm=C(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),hv=t(nv.flipVertical)(Nm||(Nm=C(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),dv=t.div(Um||(Um=C(["\n  display: inline-flex;\n  transform: scale(0.9);\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    transform: scale(0.7);\n  }\n"],["\n  display: inline-flex;\n  transform: scale(0.9);\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    transform: scale(0.7);\n  }\n"]))),yv=qu("transformTool","config","custom","canvas")(dc((function(t){var e=t.transformTool,n=t.config,r=t.custom,o=t.canvas,a=e.locale.transformActions,s=o.canvasSize.width,l=n.isLayoutAdvanced&&s>n.measurements.canvas.transform.minFlipWidth,u=function(t){var e=t.customButtonKey,n=t.onClick,o=t.label,a=t.icon,s=r.getButton(e);return i.createElement(s,{key:o,onClick:n,label:o,ariaLabel:o,icon:a,style:{margin:"0 5px"}})},c=u({label:a.buttonFlipHorizontal,icon:i.createElement(pv,null),onClick:function(){e.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),f=u({label:a.buttonFlipVertical,icon:i.createElement(hv,null),onClick:function(){e.flipVertically()},customButtonKey:"transformActionFlipVertical"}),p=u({label:a.buttonRotateClockwise,icon:i.createElement(cv,null),onClick:e.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),h=u({label:a.buttonRotateAntiClockwise,icon:i.createElement(fv,null),onClick:e.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),d=n.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return i.createElement(dv,{style:d},e.config.enableFlip&&l&&c||null,e.config.enableFlip&&l&&f||null,e.config.enableRotation&&i.createElement(uv,{canvasWidth:s})||null,e.config.enableRotation&&h||null,e.config.enableRotation&&p||null)}))),gv=im.Crop.GridLine,mv=im.Crop.Mask,vv=Ay.Draggable,_v=t(rm)(Wm||(Wm=C(["\n  left: ","px;\n  top: ","px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    left: 6px;\n    top: 6px;\n  }\n"],["\n  left: ","px;\n  top: ","px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    left: 6px;\n    top: 6px;\n  }\n"])),3,3),bv=t(rm)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,r=e/4-t.borderWidth;return n(Hm||(Hm=C(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: 6px;\n    }\n  "],["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: 6px;\n    }\n  "])),r-e,3)})),wv=t(rm)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,r=e/4-t.borderWidth;return n(Gm||(Gm=C(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: -30px;\n    }\n  "],["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: -30px;\n    }\n  "])),r-e,r-e)})),xv=t(rm)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,r=e/4-t.borderWidth;return n(Vm||(Vm=C(["\n    top: ","px;\n    left: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      top: -30px;\n      left: 6px;\n    }\n  "],["\n    top: ","px;\n    left: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      top: -30px;\n      left: 6px;\n    }\n  "])),r-e,3)})),Ov=qu("transformTool")(dc((function(t){var e=t.transformTool,n=e,r=n.leftTopRespectFlip,o=n.leftBottomRespectFlip,a=n.rightTopRespectFlip,s=n.rightBottomRespectFlip,l=e.cropMaskSize,u=l.height,c=l.width,f=e,p=f.maxCropMaskSize,h=f.defaultCropMaskPosition,d=e,y=d.isFlippedHorizontal,g=d.isFlippedVertical,m=p.width/2,v=p.height/2,b=_(_({},p),{left:h.x,top:h.y}),w={height:u,width:c},x=e.isDragMode?{transition:"unset"}:{},O=function(t){return y?2*m-t:t},S=function(t){return g?2*v-t:t},k=function(t,n,r){var i=O(t),o=S(n);switch(Kl.getFlippedEdgeIndex(r,y,g)){case 0:e.onLeftTop({x:i,y:o});break;case 1:e.onLeftBottom({x:i,y:o});break;case 2:e.onRightTop({x:i,y:o});break;case 3:e.onRightBottom({x:i,y:o})}},T=function(t,n,r){e.setDragMode(!0),e.clickableCanvas(!1),k(t,n,r)},C=function(t,e,n){k(t,e,n)},E=function(t,n,r){e.setDragMode(!1),k(t,n,r),e.clickableCanvas(!0),e.addLocalSnapshot()},R=function(t,n){var r=O(t+c/2)-c/2,i=S(n+u/2)-u/2;e.changePosition({x:r,y:i})};return i.createElement("div",{style:_(_({},b),{position:"absolute"})},i.createElement(vv,{bounds:"parent",position:r,onStart:function(t,n){var r=n.x,i=n.y;e.setDragMode(!0),e.clickableCanvas(!1),R(r,i)},onDrag:function(t,e){var n=e.x,r=e.y;R(n,r)},onStop:function(t,n){var r=n.x,i=n.y;e.setDragMode(!1),R(r,i),e.clickableCanvas(!0),e.addLocalSnapshot()}},i.createElement(mv,{style:_(_({},w),x)})),i.createElement(gv,{style:_({left:r.x+c/3,top:r.y,height:u,width:1},x)}),i.createElement(gv,{style:_({left:r.x+c/3*2,top:r.y,height:u,width:1},x)}),i.createElement(gv,{style:_({left:r.x,top:r.y+u/3,height:1,width:c},x)}),i.createElement(gv,{style:_({left:r.x,top:r.y+u/3*2,height:1,width:c},x)}),i.createElement(vv,{bounds:"parent",position:_({},r),onStart:function(t,e){var n=e.x,r=e.y;T(n,r,0)},onDrag:function(t,e){var n=e.x,r=e.y;C(n,r,0)},onStop:function(t,e){var n=e.x,r=e.y;E(n,r,0)}},i.createElement(_v,{vertical:"top",horizontal:"left",borderWidth:3,style:x})),i.createElement(vv,{bounds:"parent",position:o,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,1)},onDrag:function(t,e){var n=e.x,r=e.y;C(n,r,1)},onStop:function(t,e){var n=e.x,r=e.y;E(n,r,1)}},i.createElement(xv,{vertical:"bottom",horizontal:"left",borderWidth:3,style:x})),i.createElement(vv,{bounds:"parent",position:a,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,2)},onDrag:function(t,e){var n=e.x,r=e.y;C(n,r,2)},onStop:function(t,e){var n=e.x,r=e.y;E(n,r,2)}},i.createElement(bv,{vertical:"top",horizontal:"right",borderWidth:3,style:x})),i.createElement(vv,{bounds:"parent",position:s,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,3)},onDrag:function(t,e){var n=e.x,r=e.y;C(n,r,3)},onStop:function(t,e){var n=e.x,r=e.y;E(n,r,3)}},i.createElement(wv,{vertical:"bottom",horizontal:"right",borderWidth:3,style:x})))}))),Sv=im.Bar.Index,kv=im.Crop.Backdrop,Tv=qu("transformTool","canvas","config")(dc((function(t){var e=t.transformTool,n=t.canvas,r=t.config,o=e,a=o.leftTopRespectFlip,s=o.leftBottomRespectFlip,l=o.rightTopRespectFlip,u=e.cropMaskSize.height,c=n.canvasSize,f=c.height,p=c.width,h=e.defaultCropMaskPosition,d=e.isDragMode?{transition:"unset"}:{};return i.createElement(im.Controls.Container,null,i.createElement(kv,{style:_({left:0,top:0,width:p,height:a.y+h.y},d)}),i.createElement(kv,{style:_({left:0,top:a.y+h.y,width:h.x+a.x,height:u},d)}),i.createElement(kv,{style:_({left:l.x+h.x,top:l.y+h.y,width:p-l.x-h.x,height:u},d)}),i.createElement(kv,{style:_({left:0,top:s.y+h.y,width:p,height:f-s.y-h.y+r.measurements.basicToolControlBar.controlsBarHeight},d)}),i.createElement(Ov,null),r.isLayoutAdvanced?i.createElement(Sv,{bottom:!0},i.createElement(yv,null)):null)}))),Cv=t(im.Controls.Container)(Xm||(Xm=C(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),(function(t){return t.activeCursor?n(Zm||(Zm=C(["\n          cursor: move;\n        "],["\n          cursor: move;\n        "]))):""}),(function(t){return t.theme.measurements.zIndex.canvas.crop.dragImage})),Ev=function(t){function e(e){var n=t.call(this,e)||this;return n.INITIAL_POSITION={x:void 0,y:void 0},n.state=_(_({},n.INITIAL_POSITION),{isDragging:!1}),n.containerRef=null,n.getCursorCoordinates=function(t){var e=0,r=0;if(-1!==t.type.indexOf("touch")){if(!(i=t).touches.length)return n.INITIAL_POSITION;e=i.touches[0].clientX,r=i.touches[0].clientY}else{var i;e=(i=t).clientX,r=i.clientY}var o=n.containerRef.current.getBoundingClientRect();return{x:e-o.left,y:r-o.top}},n.move=function(t){if(n.scale.canDrag){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;if(void 0!==r&&void 0!==i&&n.state.isDragging){var o={x:n.state.x-r,y:n.state.y-i};n.scale.setOffset(o)}}},n.touchDrag=function(t){if(n.scale.canDrag){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;void 0!==r&&void 0!==i&&n.setState({x:r,y:i,isDragging:!0})}},n.drag=function(t){t.preventDefault(),n.touchDrag(t)},n.stop=function(){n.scale.canDrag&&(n.scale.savePosition(),n.setState(_(_({},n.INITIAL_POSITION),{isDragging:!1})))},n.touchEnd=function(t){t.preventDefault(),t.stopPropagation();var e=n.state,r=e.x,i=e.y;r&&i&&n.setState(_(_({},n.INITIAL_POSITION),{isDragging:!1}))},n.containerRef=i.createRef(),n}return v(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})},e.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)},Object.defineProperty(e.prototype,"scale",{get:function(){return this.props.scale},enumerable:!0,configurable:!0}),e.prototype.render=function(){return i.createElement(Cv,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})},e}(i.Component),Rv=qu("scale")(dc(Ev));var Dv,Pv,Iv=t.img(Dv||(Dv=C(["\n  position: absolute;\n  left: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"],["\n  position: absolute;\n  left: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),Av=t.img(Pv||(Pv=C(["\n  position: absolute;\n  right: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"],["\n  position: absolute;\n  right: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),Fv=new R(0,0),jv=new R(0,0),Mv=qu("sprite")(dc((function(t){var e=t.sprite,n=e.leftMidPosition,r=e.rightMidPosition,o=function(t,i){e.setDragMode(!0),e.clickableCanvas(!1);var o=t.clientX,a=t.clientY;Fv=new R(o,a),jv=new R("left"===i?n:r)},a=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(ho.EDIT,e.textDesignLocale.padding),Fv=new R(0,0),jv=new R(0,0)},s=function(t){var n=t.clientX,r=t.clientY;if(void 0!==n&&void 0!==r){var i=jv.subtract(Fv.subtract(new R(n,r)));e.onPaddingDrag(i)}};return i.createElement(i.Fragment,null,i.createElement(Ay.Draggable,{onStart:function(t){return o(t,"left")},onDrag:s,onStop:a},i.createElement(Iv,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANJJREFUSA3tlEsKwjAURUv9Vq3gBlyjKxF/c0EQxIEgggjiwP/ILbgU6ykYuLMGeRlp4JJH+3JOEmij6D9C3UCWZTWSBOEDbpM7eZCOqQRgSm7EjZ6ZAGIOvzoycz8kfGAJb7Hbi+x8aA0/C3xkCW8CPgl8bA0/CnzyDTwuWPSS9wmyon5p9ygBNshBTjGlNpfkO9+LZBZCUge6E8mcuuRxCf4tAPOf21YkC+qyP8Gj8yPZiGQZQlIFuhaJ3VftDgm8QlbkSbruuekMOCapKfQ3YW/1Myhh/78bMQAAAABJRU5ErkJggg=="})),i.createElement(Ay.Draggable,{onStart:function(t){return o(t,"right")},onDrag:s,onStop:a},i.createElement(Av,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAPhJREFUSA3tlLkKwlAQRYOVnXZ+gEshIiJ+hAgiCBJc8Sf8XgsVFBVLt2g8UwhBMomZtLlwIMxy3uMVcZwsaV/A9/1iWoe6j3wFV+iqQ9YG0hJcQHKDntWl7iHtwPeQO999ddjaQNqGM0geMLC61D2kLTiBRA4ZqsPWBtImHEHyhJHVpe4hbcABJHKIqw5bG0jrsAeJB5MoVy6qqfQ86u9AL/gdKBs+uW0NdiCR248NmvAVZFUIyiOfJtyiVBFXYAuSF0yV0eRlZL/yWXKLsoG8DBuQyM3nymjyMrI8rEEi8kVyS8wGUhfkJ7eMGbW3kRfs29nmHy/wAUVpDIFPWLFFAAAAAElFTkSuQmCC"})))}))),Bv=t(im.Controls.Width)(Wv||(Wv=C(["\n  cursor: ew-resize;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: none;\n  }\n"],["\n  cursor: ew-resize;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: none;\n  }\n"]))),zv=t(Bv)(Hv||(Hv=C(["\n  left: -3px;\n  top: calc(50% - ","px);\n"],["\n  left: -3px;\n  top: calc(50% - ","px);\n"])),(function(t){return t.theme.measurements.canvasControls.width.size/2})),Lv=t(Bv)(Gv||(Gv=C(["\n  right: -3px;\n  top: calc(50% - ","px);\n"],["\n  right: -3px;\n  top: calc(50% - ","px);\n"])),(function(t){return t.theme.measurements.canvasControls.width.size/2})),Nv=new R(0,0),Uv=new R(0,0);zv.defaultProps={theme:Vo},Lv.defaultProps={theme:Vo};var Wv,Hv,Gv,Vv=qu("sprite","textTool")(dc((function(t){var e=t.sprite,n=t.textTool,r=e.leftMidPadPosition,o=e.rightMidPadPosition,a=function(t,n){e.setDragMode(!0),e.clickableCanvas(!1);var i=t.clientX,a=t.clientY;Nv=new R(i,a),Uv=new R("left"===n?r:o)},s=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(ho.EDIT,e.textLocale.width),n.updateDefaultFontSize(),Nv=new R(0,0),Uv=new R(0,0)},l=function(t){var n=t.clientX,r=t.clientY;if(void 0!==n&&void 0!==r){var i=Uv.subtract(Nv.subtract(new R(n,r)));e.onWidthDrag(i)}};return i.createElement(i.Fragment,null,i.createElement(Ay.Draggable,{onStart:function(t){return a(t,"left")},onDrag:l,onStop:s},i.createElement(zv,null)),i.createElement(Ay.Draggable,{onStart:function(t){return a(t,"right")},onDrag:l,onStop:s},i.createElement(Lv,null)))}))),Zv=qu("textTool","sprite","custom")(dc((function(t){var e,n=t.textTool,r=t.sprite,o=t.custom,a=n.locale.canvasActions,s=((e={})[F.EDIT]={key:F.EDIT,customButtonKey:"canvasActionEdit",onClick:function(){return n.setEditMode(!0)},label:a.buttonEdit,icon:i.createElement(nv.edit,null)},e[F.BRING_TO_FRONT]={key:F.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:a.buttonBringToFront,icon:i.createElement(nv.bringToFront,null)},e[F.DUPLICATE]={key:F.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:a.buttonDuplicate,icon:i.createElement(nv.duplicate,null)},e[F.DELETE]={key:F.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:a.buttonDelete,icon:i.createElement(nv.delete,null)},e),l=n.config.canvasActions.map((function(t){return s[t]?function(t){var e=t.key,n=t.customButtonKey,r=t.onClick,a=t.label,s=t.icon,l=o.getButton(n);return i.createElement(l,{key:e,onClick:r,label:a,ariaLabel:a,icon:s})}(s[t]):null}));return r.isSpriteText?i.createElement(im.Bar.ButtonGroup,null,l):null}))),Xv=qu("stickerTool","custom")(dc((function(t){var e,n=t.stickerTool,r=t.custom,o=n.locale.canvasActions,a=((e={})[F.BRING_TO_FRONT]={key:F.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:o.buttonBringToFront,icon:i.createElement(nv.bringToFront,null)},e[F.FLIP]={key:F.FLIP,customButtonKey:"canvasActionFlip",onClick:function(t){t.stopPropagation(),n.flipHorizontally()},label:o.buttonFlipHorizontal,icon:i.createElement(nv.flipHorizontal,null)},e[F.DUPLICATE]={key:F.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:o.buttonDuplicate,icon:i.createElement(nv.duplicate,null)},e[F.DELETE]={key:F.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:o.buttonDelete,icon:i.createElement(nv.delete,null)},e),s=n.config.canvasActions.map((function(t){return a[t]?function(t){var e=t.key,n=t.customButtonKey,o=t.onClick,a=t.label,s=t.icon,l=r.getButton(n);return i.createElement(l,{key:e,onClick:o,label:a,ariaLabel:a,icon:s})}(a[t]):null}));return n.isStickerSelected?i.createElement(im.Bar.ButtonGroup,null,s):null}))),Yv=qu("textDesignTool","custom")(dc((function(t){var e,n=t.textDesignTool,r=t.custom,o=n.locale.canvasActions,a=((e={})[F.EDIT]={key:F.EDIT,customButtonKey:"canvasActionEdit",onClick:function(){return n.setEditMode(!0)},label:o.buttonEdit,icon:i.createElement(nv.edit,null)},e[F.BRING_TO_FRONT]={key:F.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:o.buttonBringToFront,icon:i.createElement(nv.bringToFront,null)},e[F.INVERT]={key:F.INVERT,customButtonKey:"canvasActionInvert",onClick:function(t){t.stopPropagation(),n.invertBackground()},label:o.buttonInvert,icon:i.createElement(nv.flipHorizontal,null)},e[F.DUPLICATE]={key:F.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:o.buttonDuplicate,icon:i.createElement(nv.duplicate,null)},e[F.DELETE]={key:F.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:o.buttonDelete,icon:i.createElement(nv.delete,null)},e),s=n.config.canvasActions.map((function(t){return a[t]?function(t){var e=t.key,n=t.customButtonKey,o=t.onClick,a=t.label,s=t.icon,l=r.getButton(n);return i.createElement(l,{key:e,onClick:o,label:a,ariaLabel:a,icon:s})}(a[t]):null}));return n.isTextDesignSelected?i.createElement(im.Bar.ButtonGroup,null,s):null}))),qv=function(t){function e(e){var n=t.call(this,e)||this;return n.actionsRef=null,n.spriteControlPosition=function(){var t=n.props,e=t.config,r=t.sprite,i=t.canvas.canvasSize,o=e.measurements.canvasControls.sprite,a=o.controlPadding,s=o.controlOffset,l=r.position,u=l.x,c=l.y,f=r.currentSprite.size,p=f.height,h=f.width,d=r.rotationWRTOutputRotation,y=n.actionsRef.current,g=new R(0,0);if(y){var m=y.getBoundingClientRect();g=new R(m.width/2+s,m.height+s)}var v=Math.abs(h*Math.sin(d))+Math.abs(p*Math.cos(d)),_=new R(u,c-v/2-a-s).clamp(g,new R(i.width,i.height).subtract(g));return{left:_.x,top:_.y}},n.getSpriteControls=function(){switch(n.props.sprite.tool){case j.TEXT:return i.createElement(Zv,null);case j.TEXT_DESIGN:return i.createElement(Yv,null);case j.STICKER:return i.createElement(Xv,null)}return null},n.actionsRef=i.createRef(),n.state={isMounted:!1},n}return v(e,t),e.prototype.componentDidMount=function(){this.setState({isMounted:!0})},e.prototype.render=function(){var t=this.props.sprite,e=this.state.isMounted,n=!t.isDragMode&&!t.isEditMode,r=this.spriteControlPosition();return i.createElement(im.Controls.SpriteActionsWrapper,{ref:this.actionsRef,show:n&&e,style:_({},r)},this.getSpriteControls())},e}(i.Component),Kv=qu("sprite","config","editor","canvas")(dc(qv)),Qv=t(im.Controls.Knob)(t_||(t_=C(["\n  margin-left: -11px;\n  margin-top: 0px;\n  cursor: url(",") 9 9, ew-resize;\n  &:before {\n    top: unset;\n    bottom: 0px;\n    left: calc(50% - ","px);\n  }\n"],["\n  margin-left: -11px;\n  margin-top: 0px;\n  cursor: url(",") 9 9, ew-resize;\n  &:before {\n    top: unset;\n    bottom: 0px;\n    left: calc(50% - ","px);\n  }\n"])),(function(t){return t.url}),(function(t){return t.theme.measurements.canvasControls.knob.size/2})),Jv=new R(0,0),$v=new R(0,0);Qv.defaultProps={theme:Vo};var t_,e_,n_=qu("sprite","snapping","config")(dc((function(t){var e=t.config,n=t.sprite,r=t.snapping,o=n.rightBottomHandlePosition,a=n.leftBottomHandlePosition,s={x:(o.x+a.x)/2,y:(o.y+a.y)/2},l=e.assetProvider.getPath("controls","/"+(function(t){return void 0===t&&(t=Jt()),!!t.match(/windows/i)}()?"rotate-windows":"rotate-osx")+".png");return i.createElement(Ay.Draggable,{onStart:function(t){var e=t.clientX,r=t.clientY;Jv=new R(e,r),$v=new R(s),n.setDragMode(!0),n.clickableCanvas(!1)},onDrag:function(t){!function(t){var e=t.clientX,i=t.clientY;if(void 0!==e&&void 0!==i){var o=$v.subtract(Jv.subtract(new R(e,i))),a=n.position,s=new R(a.x,a.y),l=o.subtract(s),u=Math.atan2(l.y,l.x)-Math.PI/2,c=r.snapToRotation(u,l,n.currentRect);n.setRotation(c)}}(t)},onStop:function(){n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("rotation"),r.hideRotationGuides(),Jv=new R(0,0),$v=new R(0,0)}},i.createElement(Qv,{url:l}))}))),r_=im.Controls.Corner,i_=Ay.Draggable,o_=new R(0,0),a_=new R(0,0),s_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.props.sprite},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.sprite,n=t.config,r=e,o=r.leftTopPosition,a=r.leftBottomPosition,s=r.rightTopPosition,l=r.rightBottomPosition,u=n.measurements.canvasControls.corner.borderWidth,c=function(t){var n=t.clientX,r=t.clientY;void 0!==n&&void 0!==r&&e.onCornerDrag(a_.subtract(o_.subtract(new R(n,r))))},f=function(t,n){var r=t.clientX,i=t.clientY;o_=new R(r,i),a_=new R(function(t){switch(t){case"leftTop":return o;case"leftBottom":return a;case"rightTop":return s;case"rightBottom":return l;default:return o}}(n)),e.clickableCanvas(!1),e.setDragMode(!0)},p=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("size"),o_=new R(0,0),a_=new R(0,0)};return i.createElement(i.Fragment,null,i.createElement(i_,{onStop:p,onDrag:c,onStart:function(t){return f(t,"leftTop")}},i.createElement(r_,{vertical:"top",horizontal:"left",borderWidth:u})),i.createElement(i_,{onStop:p,onDrag:c,onStart:function(t){return f(t,"leftBottom")}},i.createElement(r_,{vertical:"bottom",horizontal:"left",borderWidth:u})),i.createElement(i_,{onStop:p,onDrag:c,onStart:function(t){return f(t,"rightTop")}},i.createElement(r_,{vertical:"top",horizontal:"right",borderWidth:u})),i.createElement(i_,{onStop:p,onDrag:c,onStart:function(t){return f(t,"rightBottom")}},i.createElement(r_,{vertical:"bottom",horizontal:"right",borderWidth:u})))},e}(i.Component),l_=qu("sprite","config")(dc(s_)),u_=Ay.Draggable,c_=new R(0,0),f_=new R(0,0),p_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onAreaDrag=function(t){var n=t.clientX,r=t.clientY,i=e.props.snapping,o=f_.subtract(c_.subtract(new R(n,r))),a=i.snapToPosition({x:o.x,y:o.y},e.sprite.currentRect),s=a.x,l=a.y;e.sprite.setPosition({x:s,y:l})},e.onAreaDragStart=function(t){var n=e.props.snapping,r=t.clientX,i=t.clientY;c_=new R(r,i),f_=new R(e.sprite.position),e.sprite.setDragMode(!0),n.updateGuides()},e.onAreaDragStop=function(){var t=e.props.snapping;c_=new R(0,0),f_=new R(0,0),e.sprite.setDragMode(!1),e.sprite.spriteSnapshot("position"),t.hidePositionGuides()},e.onDoubleClick=function(t){t.preventDefault(),t.stopPropagation(),e.sprite.setEditMode(!0)},e.isSpriteSelected=function(){var t=e.props.active.tool,n=e.sprite.tool;return e.sprite.isSpriteSelected&&t===n},e}return v(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.props.sprite},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.sprite,n=t.config;if(!this.isSpriteSelected())return null;var r=this.sprite.isSpriteText,o=this.sprite.isSpriteTextDesign&&this.sprite.textDesignToolStore.isInverted,a=e.size,s=a.height,l=a.width,u=e.spritePosition,c=e.rotationWRTOutputRotation,f=n.measurements.canvasControls.sprite.controlPadding;return i.createElement(im.Controls.Container,null,i.createElement(u_,{onStart:this.onAreaDragStart,onDrag:this.onAreaDrag,onStop:this.onAreaDragStop,rotation:c,position:u},i.createElement(im.Controls.Sprite,{onDoubleClick:this.onDoubleClick,height:s,width:l},r&&i.createElement(Vv,null)||null,o&&i.createElement(Mv,null)||null,i.createElement(l_,null),i.createElement(im.Controls.RotateHandle,{x:l/2+f/2},i.createElement(n_,null)))),i.createElement(Kv,null))},e}(i.Component),h_=qu("sprite","active","snapping","config")(dc(p_)),d_=function(t){function e(e){var n=t.call(this,e)||this;return n.containerElementRef=null,n.getControls=function(t){switch(n.props.active.tool){case j.FOCUS:return i.createElement(xm,null);case j.TEXT:case j.TEXT_DESIGN:case j.STICKER:return i.createElement(h_,null);case j.BRUSH:return i.createElement(Tm,null);case j.TRANSFORM:return i.createElement(Tv,null);default:return i.createElement(im.Controls.Container,null,t)}},n.canvasClicked=function(t){if(t.preventDefault(),t.stopPropagation(),n.props.canvas.isCanvasClickable){var e=t.clientX,r=t.clientY;if(-1!==t.type.indexOf("touch")){var i=t;if(!i.touches.length)return;e=i.touches[0].clientX,r=i.touches[0].clientY}var o=n.containerElementRef.current.getBoundingClientRect(),a=e-o.left,s=r-o.top;n.props.canvas.getContainersAtPreviewPoint({x:a,y:s})}},n.onKeyDown=function(t){"Tab"===t.code&&n.props.sprite.selectLast()},n.containerElementRef=i.createRef(),n}return v(e,t),e.prototype.render=function(){var t=this.props.children,e=this.props.canvas.canvasSize,n={height:e.height,width:e.width};return i.createElement(im.Controls.Wrapper,_({"aria-hidden":!0,ref:this.containerElementRef,onClick:this.canvasClicked,onKeyDown:this.onKeyDown},n),t,this.getControls(i.createElement(Rv,null)))},e}(i.Component),y_=qu("active","canvas","sprite")(dc(d_)),g_=t.div(e_||(e_=C(["\n  display: ",";\n  position: absolute;\n  z-index: ",";\n"],["\n  display: ",";\n  position: absolute;\n  z-index: ",";\n"])),(function(t){return t.isVisible?"block":"none"}),(function(t){return t.theme.measurements.zIndex.canvas.snappingGuide})),m_=function(t){var e=t.isVisible,n=t.className;return i.createElement(g_,{isVisible:e,className:n})};m_.defaultProps={direction:"horizontal",left:0,top:0};var v_,__,b_,w_,x_,O_,S_,k_=t(m_)(b_||(b_=C(["\n  background: ",";\n  ","\n"],["\n  background: ",";\n  ","\n"])),(function(t){return t.theme.snapping.positionGuideColor}),(function(t){return"horizontal"===t.direction?n(v_||(v_=C(["\n        width: 100%;\n        height: 2px;\n        top: ","px;\n      "],["\n        width: 100%;\n        height: 2px;\n        top: ","px;\n      "])),(function(){return t.position})):n(__||(__=C(["\n      width: 2px;\n      height: 100%;\n      left: ","px;\n    "],["\n      width: 2px;\n      height: 100%;\n      left: ","px;\n    "])),(function(){return t.position}))})),T_=t(m_)(w_||(w_=C(["\n  border: none;\n  border-top: 2px dashed ",";\n  background: transparent;\n  left: ","px;\n  top: ","px;\n  transform: rotate(","rad);\n  width: 200%;\n"],["\n  border: none;\n  border-top: 2px dashed ",";\n  background: transparent;\n  left: ","px;\n  top: ","px;\n  transform: rotate(","rad);\n  width: 200%;\n"])),(function(t){return t.theme.snapping.rotationGuideColor}),(function(t){return t.position.x}),(function(t){return t.position.y}),(function(t){return t.rotation})),C_=t.div(x_||(x_=C(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  overflow: hidden;\n"],["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  overflow: hidden;\n"])),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.top}),(function(t){return t.left})),E_=qu("snapping","editor")(dc((function(t){var e=t.snapping,n=t.editor.getPreviewSize(),r=n.width,o=n.height,a=e.previewTopLeftPosition,s=a.x,l=a.y,u=e.positionGuides.map((function(t,e){var n=t.direction,r=t.value,o=t.isVisible;return i.createElement(k_,{key:"positionGuide-"+e,direction:n,position:r,isVisible:o})})),c=e.rotationGuides.find((function(t){return t.isVisible}));return i.createElement(C_,{width:r,height:o,left:s,top:l},u,i.createElement(T_,{key:"rotationGuide",rotation:c?c.value:0,position:c?c.position:{x:0,y:0},isVisible:!!c}))}))),R_=t.img(O_||(O_=C(["\n  z-index: 5;\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n"],["\n  z-index: 5;\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n"]))),D_=function(){return i.createElement(R_,{alt:"watermark",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAvCAYAAABzC1HpAAAAAXNSR0IArs4c6QAAE7NJREFUeAHtnFlQVdeax2UQBAEFFUUccJ7nAVEDGqNeZxOjiRq9uVpJ3apUP3TnPZXHVKUqlYcMLzGxTXc00XSMxjjjiAMqKijOAiLiBIID89C//9J1antyjp6g1zZde1cd9t5rr/Fb/+//DXtr0EcffbS4WbNmvfi5hyuBl1UCF4KZmQvSl3V73HlZCfQSUN3DlcBLLwEXqC/9FrkTlARcoLo4+EtIwAXqX2Kb3Em6QHUx8JeQgAvUv8Q2uZN87kA9dOhQjzVr1kzyJ9qLFy+29ffMLXcl4E8CzxWot27diszIyJh67dq1XuvWrUt1DnrkyJGkr7/+ehHlS69fvx7lfOZeuxJ4mgRC0tLSJjytUqDPAeGUmJiYkpkzZ24+cODAqxUVFTVhYWFVP/7446zz588P6dWrV3ZVVVV4cHBwZVJS0u1A+3XruRJoEqM2NDQ027lz56CrV6+2siLMyclJhFGTpk+fvicxMfHu1KlTf83KypqwevXqpdHR0Xfee++9FdOmTTvWoUOHQhg1wbZzz64EApFAaCCVvOvcvHkzClM++ejRow0tW7Ys7datWy6g7QFjHo+Nja1S/QEDBhTjjx4pKCjoO3/+/PSQkJBGlbdr1+7W6dOnh5aWlkbU1NSEwLj1rVq1qrLPVcc9XAl4S6BJph9QxgLAJFjyG9i1EkAOuHfvXrvXX399U0RERJ0dBOAWHTt2bNCDBw8aAXD57t27h5w5c2bY3bt3O1A+6sSJEyN0xk1IyczMHAzb5lGv0rZ3z64ErASaxKj4nuEwYDX+aA0+7hmYMaywsLCrZVPbuVgSZs0CkCknT55MiYqKKh00aNBR/NPi1q1bV+ASVOOzhl66dKn9li1b5nXs2LHctnXPrgScEmgSUOvr6x/zbfFN4zHpN5wd2+uuXbsWHz58OGrYsGG78VuP23J7joyMrMNnbRcXF1cYHh5eb8vdsysBpwSaBNTmzZvXNzY2esAKcEOJ5BucHdvrffv2jYFBs32B1Na5fPlyn549e56298/jjA/d7cqVK4mDBw8+hwty63n0+SL6KC4ujiYXPRiLUzZx4kQjE1yjnjdu3OgwZMiQM927dy95EfN42cYIGKgS4NmzZ7ty7lhSUpKA39nmk08++Q/Mu/FJAW+t9+IImhJg227Lli1b4f3M3p87dy7+zp07ibQ/acuedEYpgkiDTZS7Yetp7DZt2pSMHj36DIFZtcoPHjw4ARclNjQ0tP7/Cqhbt24dRuDZ3s7TnlHqxlmzZu2S62TL7JkAtT8yScbXL7dAxSK9Wl1dHdWiRYvKFwnU8vLy8L179yrwbSsiio+Pv/7KK6/kyApqvr/88svY+/fvx9i5YxGrkf+dUaNGncNCPhZr7Nmzpx/7EUHmJ8vWJ86Jpf/klJSUoxDVE9OVAQFVgNu4ceNCJlHMZK/CUplc32My9xFgc5irw/Hjx9NYUIZzgrBpWp8+fTKdZXaS9kwQNVz9woCvskEDWcj2Tp06+fVVWVxcXl7eUNvenvPz85uhSEPfeeedNfKVtbF6hl9839ZpylkKytr/BuBr6XsDWQqflsNX38gtGYWK9PUMRT/gC6iUm3kDSs+8qXezkoPsylX1RZ/BP/zww0zO4aQDtz1JXr7GDqSsqKgohjeMiwHfg4SEhDzk2eLUqVNj2EsBMV99kBsfhayvMb9S3Qu0xCr9SFWOJ3bZRL08lesg4O4LqYnMDFCV9Vm/fv0b9FeM8j0RpGofEFD79etXTN60DNNzZOzYsRfV0HmIsVhYZwKicYsWLdqhZ5irXsg2etKkSR4NcrbRNcBqj3/aCwCsREtr1F5515EjR6ZbNvFuA/uajVS5XAoEWQlrdRIrs8lxMFJv5ngG5m2uOgD1gc5NPQj0OiLUzmqv4DDQfsT8FqSwfUHbtm2v27aAsKp9+/b37L3zDOv8AajLly9f76yDzGL49VQZaw53Pnte19u3b5/AnpS///77q+26AWu6jSPEtrh/IcQeR52AVDkAnwtJTe3du/d3kJCxcLRtiQyMonEdsnbt2tlSxgULFmyFrZ867YCAqo4A6zGi92RfQNUoAHI/Wv4ubJdFwr8MhkwViDZs2JDmbxa8aoXxe2ahsWbT3nrrrXTMXP6uXbvmqo0vsJLa8gB1ypQphsG18M8///zf5DeXlZXF3r5921OHOdTAiMn4eImAthwG2udkMvzjNmQk+gDG9mJN2KmAcXO0ZtyWlrDIMM0lKCiogfX9bfbs2ekSvl56YM4GyhUCLNH0eWfcuHHHLLuprdrpwKqcTk1NPfvw7vG/Yi6UWim7NmQ9CgBqjGoAEqNgKGCL33//PY3x6+fNm7eLOTYgn3G2F15Zj2GuB617k5ub24EUYE/axbP2Klj44vjx48/b+vv37++DLOLHjBlzEms2CGDFLV26dKM3WJBHQo8ePbItSNXeglTXuH9Gxqz7MSKQbMDCTr0qR67d7LpFWuTcTd2ffvppCnsWuWTJktXOPtWvvyMgoKoxVJ7Dpo0mF9p/woQJud4d6m0UFH48PT09TQJn4fWwRj4bGgIrDef5WYT/GIsQMBTLfPz888/B5GD3YTrCWNxIGOgKCuFzY6ljAKCNw2wYPwighNngjrJSJ+synxkwm2kDgJuxyZVz5sw5oPmjTEmsZ5ZlX5UBvN7KYrz99ts7L1y40BHgd1S5+oe5uymlBphCYY2Z3HfXMx1sXFdcoIELFy78T4GVdh6gspkeM/6w9sO/8tFY+wI7P8ZNss9RKiMr5NMRczpA5XV1dXtYQ0vm2MfWYw498Wf36F5+IIHYVCsLlaEIfZFHBj7xYd3z/DX6Cae8J+uIxb83L2j0zHnAdg9YT2/GOmWJxPncyhh5/2Ft8jdRqBrqxKqNrEttbW2E3LBff/11DHNOgpR+8E5nOvv3vg4YqPLNkpOTdxGkTMFHzbMgcXb42muvZX7zzTfLZConT578P0OHDjVUDxOFMdlQGGG/s76utVmbNm2a/v3338/kpUEcQr8nX9CfplnTiKbX024kihBMH2bjxHoI6Sr+agc7DmmzK7DNeX0sg7BawFzmta9YGEd+ukCK332JtWXiNowQUGk/hDUcGDhwYAH+VhECT5QfPWPGjM1iHsA9VCBlDnW020ZZAwCYLADAWCMAeTrto+0cCKrm8TO31G2EldfAsjfpZ5xAylrvQQRbWX9L5DtNFS37oJiGubTxlNUCoLouXbpkA6LBgKyS7yp+lmIwXgRzmCKQdu7c+TR7lMN9ihQIFysZS5L5iB2D1L/myvr2Y45LtCbvA8bdi7s3Z9WqVcvpLxdrcYRU4x1b75Fla4RUKmyZ86y5IW/jflnrwouiLljRPsxlrbU8zjZPuv7jDJ9QG4Eydm040d40aYl3VdE+iz+EUKsQlAGp6vTv3/8sGtxPEb53Gy0eYK5l4W1ZXPW777673h9I1RYTYjYOQYcBolQClvFsZjs9I+rfof5gWMNmKNeDxYsXb0bol2BzI2Q22rAwLkYvAZdmjbD5Vr3yxUwZplVfzDdOLgLgN34pa7sFQMr0jMBgkM6MlS3TJtOKQuSrTCZcZzsHXQOeEPuTwqKMYpsWKIX5F8AjRozYN3z48Cu8DMlXfR2WhS1QkYlhLoENOZkMC/3cFeBVH1AO0BjIvppX1tvp6xq+Y6aeaUzGikEpgiU3lSGrdECeKdno3vvQfDDN32ElT4iVsSB/h7H723qybMi3whfI5RbxIicKmZmg2FoXlCmB+rUQg99g2fbvfQ4YqLBPX8zoHDEIEwlasWLFfF/Aw787iTBrqe9ZFCZ2NEItZ6ETvCegewECd2Ibm6zgysNEvuoCVANCbRzgyGPRl/Glst58881VjH1KbQCJAbOcdStIa16t7wfTxKmuvlWwJoh5eyJ6rs3LBwn8UT3jX0lBYfXWKsPFuaazDsYxbTmbdtpIldNPneZmfwSb3wrwAEd9GGWH8YtUl400bXTNnMx4FvCs19zrmbUqMs+61yHfXGfAcd1mJrzW08Canf0/5oaprffBK+37gH435LFC0b2shiyR6mkfJF/vNrrH2kRJabC6RrGZm5EhLtd6yQeim+GL6Hz1ZcsCMv1ywGEgrPnkXzDnhZiBM/gaqaQXFuKzlcgs2Q6ZYJA0GDM6Ef9qoEyzNhbtXIV5X8Jie/jSYjEA7HiaaDMVwfxm+/M+W+Dg854nYtzt/Vz3jGc2xClI2pky+UmqYwEvFte9Dvw/E8jomk0yWs/GGCHbdjKxPDYAQ/k8bRnTtKWeaWf7B2D35LOpT+dhN09lKI+Rn/X7VIZJfmyejOUBhZWBc32MZ+bpXA9zNW6OXCJlGQiyEtS3DuIDD8gflvj/CyE8gPUPszfzYNfWyuVKWZyK4mwNVgZJQQnkDNvj0kTpXgqKe4jHtmkBQfZYLFmGs92TrgNiVCL5bgxUw8+whTSWiPugqJ9FFGJ+cuyvb9++2ZiN/ZiddJjitD5WIa2VQb0KUhkZRJqp/rSJPg/gz3RjPMN23hOXSbHMaH047zq6txsJAMzm2lSKnlFmTD8bbzZKSiSTqGe4EsakA7bb8sFhs+ZSOj2jzNSHsRR8GHeAuRozr/kCMhN0sRkFqm+BIzBpvfanNehgHp4gBh8yUWVkILrrrE2VP6prFMUqnccXtGVOGdj1wORxGkM/5aXVh4JTmKwZcvAwKooQMFDVB4plFNEqsNbnVBTV0aFPPxUgg4PDNo6R+wJWzHgQUhHuYQZzS1YwaxoF8CcgRoUNtxAMDNWHI5BergC1Y8eOZDbtJqZhj79xcMYHs5i7mPVTqkPAcIr2w3EhhsDOJ7zbaWHKDhBQDEcbTT7WWQdhRcDYBlSW4ZzP7bUFKhtpgMqmGQbUc4QzHpBUw3L5CGsMII388ssvl0vobKRhHJRsv+pa/1TXfOU1Fp82VP4om1wA+yaRrptAUNNDyqjquDA3sBYmz2yBCqt1/vTTT/9dfdiDiHclrHRTlkg+I0HVbOZVyoa2VR0pB67V3Ef5UzN3ANAHeZaS+skRQ6oewB7422+/1cvXJKecp6yD+vjiiy/+ATDruNa8mjFnw1xiNt3DulUwvSEd3XsfemWL4rUGVBfFxGR7OrHW8QRVp5BdnepLxrhdRY8sjHFbUNhO2dnZKci9BIwctf3KwjlBrcCOFFkn3MNp9Pm9XAxb1985IKCqMe/qT5BLzd+2bdur33777TIJkyj+v/11LDYi1TSWV25bYQjDQNJqXpftYWOmM/lIgF6mfhRBItQYgNiBdrEwQKGvfqnjSW4DamNifdWzAQN+lQmg5INSv1CgYax2AiqKUMrG7mUTxsFQ0fppA5nfdvzwy+pXm4IfepZItS/tlJc0Jpq3ZztwfWbJp1afqqvMgYIyrVHHo0DNXHv9aUTJquSX68UGZtJE6lIYNncd6bOZagvQDYOxkRdQ7njmF2UVDiXLQbZpmrNcLfVPOu8C8zxKoDcC2caqjPnehxy2wG7mgyHGMPJjXcZ3VB1fB8+rAGuyglX7HEuRjY/pISVkHEH6bqR+tg7t7pDkz3JkGMwjQN2SZx6fWDJ64403fl+5cuUS3MeZvFRYY+Vm+/I+B/GfpH3sXfi0eyLASWhnLN+jrvNXF4d5HKyT4KvOZ5999k+0zoAIoDYHnHEs8CjaewMXokjA8tcvPlIMi2r0lduzbaTlbFaYMwUi884mxgPY+04NBmxhbHAsgqymfpm3wGRC2Yx4gFXpHFPltGsFC0cCphIBz46vs+YA2Jo7y3SNCayTG2TLVQ8XIhrFuS2XinmHokBtAEYJczLspZcSqi/f0LajTmvAEuIs07NH2YTWkECFctu2vs6SAUFcK/m/yN+4Fs7nzmvVlT+qMejnjp2LrUPQG8XePdRKCtmzCu86tq7WiNJ43BlbLtlDTpHyXW2Zv3OTgIppWYofesDfWyotgsDpH3Pnzl1j35g4J/DVV18txrwe4JcHeNrCTvM//PDDr5113GtXAk4JBGz6bSMxGkzRmug/35Y5z7BPO175zUZjS32BVHUxWZFkCwyr4BY0WL/T2Y977UrAKYE/DVQi1CRo/B7+Sxf5bPI/cQMiMN9RmKPumPvOmKOTmKuhArW3+cHMRcrfkmnTRORjYW6NiXNOzL12JeCUwJ8GKgFHDb5IuaJnfJQwOfjyGeUwEyVm8Jpxm3xATH8kQVMKb4a2Ogckj6oUUBAB2SL8slz6qnTm/px13WtXAlYCfxqoemVov4ixnShPyX8u8QFpqBPWocb/PEZEt5io9oKNohUokGMbTvsNRLZh+Kd9xcAEOFdtX+7ZlYAvCfxpoPrqhAizWu4AH3O0JRVyXflT0iepRIJFfAwyhXfi/yWWpXwkqZlSG4SROskVeIkKPYloX/27Za4EmvTPpX2JTZ+j4ZN24nVrCn5oIknmbXwltJ9P1KJxE5IB6E0S+ZPJQW50fnGD2W8gteN5Femrb7fMlYAnD/asoiAHWUBerA1fSh374IMPvlPqSX3yUmA3IC3n3e5CEtVZ/jIBzzq+2/7/twSalEf1JRIliJWw9vds8+bNybzqO2TfUvmq55a5EvAngefio6pzfyC1z3j9dtDfJNxyVwJPk8BzM/1PG8h97krgWSTgAvVZpOe2fWEScIH6wkTtDvQsEnCB+izSc9u+MAm4QH1honYHehYJ8Jo+OP9ZOnDbuhL4V0tAGDVfh3/88cfmn9D+qwd0+3cl0BQJgM+a/wXEHL3v2Wd6kwAAAABJRU5ErkJggg=="})},P_=function(t){function e(e){var n=t.call(this,e)||this;return n.previewCanvasRef=null,n.previewCanvasRef=i.createRef(),n}return v(e,t),e.prototype.componentDidMount=function(){var t=this.previewCanvasRef.current;this.props.canvas.setCanvasElement(t)},e.prototype.render=function(){var t=this.props.config.licenseChecker;return i.createElement(lm,null,t&&t.isWhiteLabel()?null:i.createElement(D_,null),this.props.active.isWebcam?i.createElement(am,null):null,i.createElement(im.Element,{ref:this.previewCanvasRef,"aria-label":"Canvas"}),i.createElement(y_,null,i.createElement(E_,null)))},e}(i.Component),I_=qu("active","canvas","config")(dc(P_)),A_=im.Button.TextSecondary,F_=t.span(S_||(S_=C(["\n  font-size: 14px;\n  padding: 3px 1px 2px;\n  color: ",";\n  display: flex;\n  align-self: center;\n"],["\n  font-size: 14px;\n  padding: 3px 1px 2px;\n  color: ",";\n  display: flex;\n  align-self: center;\n"])),(function(t){return t.theme.canvasActionBar.foreground})),j_=qu("scale","active")(dc((function(t){var e=t.scale,n=t.active,r=e.canZoomIn,o=e.canZoomOut,a=e.zoomLevel;return-1!==[j.TRANSFORM,j.BRUSH,j.FOCUS,j.STICKER,j.TEXT,j.TEXT_DESIGN].indexOf(n.tool)?null:i.createElement(im.Bar.ButtonGroup,null,i.createElement(A_,{ariaLabel:"Zoom out",isDisabled:!o,onClick:e.out},"-"),i.createElement(F_,null,a," %"),i.createElement(A_,{ariaLabel:"Zoom in",isDisabled:!r,onClick:e.in},"+"))})));F_.defaultProps={theme:Vo};var M_,B_,z_,L_,N_,U_,W_,H_,G_,V_,Z_=t(im.Bar.ButtonGroup)(M_||(M_=C(["\n  > :last-child {\n    margin-left: 10px;\n  }\n  > :first-child {\n    margin-left: 0;\n  }\n"],["\n  > :last-child {\n    margin-left: 10px;\n  }\n  > :first-child {\n    margin-left: 0;\n  }\n"]))),X_=qu("config","editor","history","custom")(dc((function(t){var e=t.config,n=t.editor,r=t.history,o=t.custom,a=e.locale.mainCanvasActions,s=r.canUndo,l=r.canRedo,u=e.config.mainCanvasActions,c=function(){n.export()},f=function(){if(n.activeStore.tool===j.TRANSFORM)return null;var t=o.getButton("mainCanvasActionUndo");return i.createElement(t,{key:"mainCanvasActionUndo",onClick:r.undo,isDisabled:!s,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:i.createElement(Jm,null)})},p=function(){if(n.activeStore.tool===j.TRANSFORM)return null;var t=o.getButton("mainCanvasActionRedo");return i.createElement(t,{key:"mainCanvasActionRedo",onClick:r.redo,isDisabled:!l,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:i.createElement($m,null)})},h=function(){var t=o.getButton("mainCanvasActionExport");return i.createElement(t,{key:"mainCanvasActionExport",onClick:c,label:a.buttonExport,ariaLabel:a.buttonExport,icon:i.createElement(ev,null)})},d=function(){if(!e.displayCloseButton)return null;var t=o.getButton("mainCanvasActionClose");return i.createElement(t,{key:"mainCanvasActionClose","data-test-id":"MainCanvasBarActionClose",onClick:n.close,label:a.buttonClose,ariaLabel:a.buttonClose,icon:i.createElement(tv,null)})},y=u.map((function(t){switch(t){case F.UNDO:return f;case F.REDO:return p;case F.EXPORT:return h;case F.CLOSE:return d}return null}));return i.createElement(im.Bar.Index,null,i.createElement(Z_,null,y[0]&&y[0]()||null,y[1]&&y[1]()||null),e.config.enableZoom?i.createElement(j_,null):null,i.createElement(Z_,null,y[2]&&y[2]()||null,y[3]&&y[3]()||null))}))),Y_=t.div(B_||(B_=C(["\n  position: absolute;\n  right: 8px;\n  top: 8px;\n"],["\n  position: absolute;\n  right: 8px;\n  top: 8px;\n"]))),q_=function(t){function e(e){var n=t.call(this,e)||this;return n.onChange=function(t){n.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})},n.onSubmit=function(){var t=n.props.getCorrectValue,e=n.state,r=e.isSubmitted,i=e.value;r||n.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})},n.state={isSubmitted:!1,value:e.value.toString()},n}return v(e,t),e.prototype.componentDidUpdate=function(t){var e=this.props.value;t.value!==e&&this.setState({value:e.toString()})},e.prototype.render=function(){var t,e=this.props,n=e.id,r=e.testId,o=e.isDisabled,a=e.label,s=this.state.value;return i.createElement(Ay.Input.Text,{id:n,testId:r,value:s,isDisabled:o,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:(t=this.onSubmit,function(e){(function(t){return"Enter"===t.key})(e)&&t(e)})},i.createElement(Y_,null,i.createElement(Ay.Input.Label,{label:a,htmlFor:n})))},e}(i.Component),K_=t.div(z_||(z_=C(["\n  display: inline-flex;\n  justify-content: space-between;\n  max-width: ","px;\n"],["\n  display: inline-flex;\n  justify-content: space-between;\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width})),Q_=t.span(L_||(L_=C(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  margin-top: 10px;\n  margin-right: 13px;\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  margin-top: 10px;\n  margin-right: 13px;\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case})),J_=function(t){var e=t.showLabel,n=void 0===e||e,r=t.label,o=t.isDisabled,a=t.valueHeight,s=t.valueWidth,l=t.labelWidth,u=t.labelHeight,c=t.onSubmitWidth,f=t.onSubmitHeight;return i.createElement("div",null,i.createElement(Ay.Input.Label,{label:r,show:n}),i.createElement(K_,null,i.createElement(q_,{id:"photoeditorsdk-transformScaleWidth",testId:"TransformScaleWidth",value:s,getCorrectValue:c,label:l,isDisabled:o}),i.createElement(Q_,null,"x"),i.createElement(q_,{id:"photoeditorsdk-transformScaleHeight",testId:"TransformScaleHeight",value:a,getCorrectValue:f,label:u,isDisabled:o})))},$_=qu("textTool","textDesignTool","modal","config","custom")(dc((function(t){var e=t.modal,n=t.textTool,r=t.textDesignTool,o=t.config,a=t.custom,s=e.type,l=e.identifier,u=e.isVisible,c=e.modalProps,f=e.positionOffset,p=c.headerLabel,h=c.bodyLabel,d=c.confirmLabel,y=c.dismissLabel,g=c.handleClose,m=c.handleConfirm,v=c.handleDismiss,b=a.getDialog();if(s===z.INFO)return i.createElement(Ay.InfoModal,{headerLabel:p,bodyLabel:h},i.createElement(b,{type:s,isVisible:u,identifier:l,position:f,handleClose:g,headerLabel:p,bodyLabel:h}));if(s===z.TEXT_EDIT){var w=n.locale.canvasControls,x=w.buttonSave,O=w.buttonClose,S={type:s,isVisible:e.isVisible,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText,maxLength:o.config.text.maxCharacterLimit};if(n.isTextSelected)return i.createElement(Ay.TextEditModal,_({},S,{defaultText:Tl.defaultText(),handleConfirm:n.changeText,handleDismiss:n.setEditMode,text:n.text}),i.createElement(b,{type:s,isVisible:u,identifier:l,position:f,handleClose:g,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText}));if(r.isTextDesignSelected)return i.createElement(Ay.TextEditModal,_({},S,{defaultText:Dl.defaultText(),handleConfirm:r.changeText,handleDismiss:r.setEditMode,text:r.text}),i.createElement(b,{type:s,isVisible:u,identifier:l,position:f,handleClose:g,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText}))}return i.createElement(Ay.ActionModal,{type:s,headerLabel:p,bodyLabel:h,confirmLabel:d,dismissLabel:y,handleClose:g,handleConfirm:m,handleDismiss:v},i.createElement(b,{type:s,isVisible:u,identifier:l,position:f,confirmLabel:d,dismissLabel:y,headerLabel:p,bodyLabel:h,handleClose:g}))}))),tb=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e={}),this.getAdvancedCategoryCard=function(){return n.components.advancedUICategoryCard},this.getAdvancedItemCard=function(){return n.components.advancedUIItemCard},this.getAdvancedToolbarItem=function(){return n.components.advancedUIToolbarItem},this.getDialog=function(){return n.components.dialog},this.getButton=function(t){return n.components.buttons[t]},this.getColorItem=function(){return n.components.colorItem},this.getCheckbox=function(){return n.components.checkbox};var r={dialog:Ay.Dialog,colorItem:Ay.ColorItem,checkbox:Ay.Input.Checkbox,buttons:{mainCanvasActionUndo:im.Button.TextSecondary,mainCanvasActionRedo:im.Button.TextSecondary,mainCanvasActionExport:qf,mainCanvasActionClose:Vf,canvasActionEdit:im.Controls.SpriteActionButton,canvasActionBringToFront:im.Controls.SpriteActionButton,canvasActionDuplicate:im.Controls.SpriteActionButton,canvasActionDelete:im.Controls.SpriteActionButton,canvasActionInvert:im.Controls.SpriteActionButton,canvasActionFlip:im.Controls.SpriteActionButton,transformActionFlipHorizontal:Yf,transformActionFlipVertical:Yf,transformActionRotateClockwise:Yf,transformActionRotateAntiClockwise:Yf,textAlignment:Yf,toolControlBarPrimaryButton:Wf,toolControlBarSecondaryButton:Vf}};this.components=Io([r,e,t])},eb=t.div(N_||(N_=C(["\n  position: relative;\n"],["\n  position: relative;\n"]))),nb=function(t){function e(e){var n=t.call(this,e)||this;n.onClick=function(t){return function(e){var r=n.props,i=r.onAddSnapshot,o=r.config,a=r.onChange,s=r.colorPickerDirection,l=n.state,u=l.activeIdentifier,c=l.showColorPicker,f=l.colorList.find((function(e){return e.identifier===t}));if(u!==f.identifier||c)c?n.setState({showColorPicker:!1}):(a(f.color),n.setState({activeIdentifier:t}),i&&i());else{n.UIComponent||import("./index-78d34581.js").then((function(t){var e=t.ColorPicker;n.UIComponent=e,n.forceUpdate()}));var p=e.currentTarget.getBoundingClientRect(),h=p.left,d=p.width,y=p.top,g=p.height,m=e.currentTarget.parentElement.getBoundingClientRect(),v=m.left,_=m.top,b=o.measurements.color.colorPicker,w=h-v+d/2-2,x="bottom"===s?y-_+g+b.arrow.width/2:y-_-b.arrow.width/2,O=-24,S=b.width-b.arrow.width-12;w>S&&(w-=O+=w-S),n.setState({showColorPicker:!0,arrowOffset:w,topOffset:x,leftOffset:O})}}},n.onChange=function(t){var e=t.color,r=t.colorString,i=n.props.onChange,o=n.state,a=o.activeIdentifier,s=o.colorList,l=s.findIndex((function(t){return t.identifier===a}));if(-1!==l){var u=T(s);u[l]={identifier:s[l].identifier,colorString:r,color:e},n.setState({colorList:u})}i(e)},n.onChangeColorPicker=function(t){var e=t.color,r=t.colorString;n.onChange({color:[e[0]/255,e[1]/255,e[2]/255,e[3]],colorString:r})},n.closeColorPicker=function(){n.setState({showColorPicker:!1})},n.getColorPicker=function(){var t=n.props,e=t.activeColor,r=t.parentId,o=t.labelsColor,a=t.colorPickerDirection,s=t.onAddSnapshot,l=n.state,u=l.showColorPicker,c=l.arrowOffset,f=l.leftOffset,p=l.topOffset;if(!n.UIComponent)return null;var h=n.UIComponent;return i.createElement(h,{parentId:r,color:Oi(e),show:u,direction:a,arrowOffset:c,leftOffset:f,topOffset:p,labelHex:o.hex,labelR:o.r,labelG:o.g,labelB:o.b,labelSliderOpacity:o.sliderOpacity,labelSliderHue:o.sliderHue,onChange:n.onChangeColorPicker,onRequestClose:n.closeColorPicker,onAddSnapshot:s})};var r=n.props.colors;return n.state={activeIdentifier:"",activeSprite:"",colorList:T(r),showColorPicker:!1,arrowOffset:0,leftOffset:0,topOffset:0},n.UIComponent=null,n}return v(e,t),e.getDerivedStateFromProps=function(t,e){var n=t.activeSprite,r=t.activeColor,i=e.activeSprite,o=e.colorList;if(n!==i||!n){var a=nn(Oi(r)),s=o.find((function(t){return t.colorString===a}));return{activeSprite:n,activeIdentifier:s?s.identifier:""}}return null},e.prototype.render=function(){var t=this,e=this.props,n=e.isDisabled,r=e.custom,o=e.config,a=this.state,s=a.activeIdentifier,l=a.colorList,u=r.getColorItem(),c=o.assetProvider.getPath("controls","/tiled-background.png"),f=l.map((function(e){return i.createElement(u,{key:e.colorString+"-item-"+e.identifier,isActive:e.identifier===s,isDisabled:n,onClick:t.onClick(e.identifier),color:e.colorString,label:e.identifier,tiledBackgroundUrl:c})}));return i.createElement(eb,null,f,this.getColorPicker())},e.defaultProps={colorPickerDirection:"bottom",isDisabled:!1},e=w([qu("config","custom"),dc],e)}(i.Component),rb=t.div(G_||(G_=C(["\n  z-index: ",";\n  flex-shrink: 0;\n  background-color: ",";\n  color: ",";\n  ","\n  height: 100%;\n  width: ","px;\n  margin-bottom: ","px;\n"],["\n  z-index: ",";\n  flex-shrink: 0;\n  background-color: ",";\n  color: ",";\n  ","\n  height: 100%;\n  width: ","px;\n  margin-bottom: ","px;\n"])),(function(t){return t.theme.measurements.zIndex.toolbar}),(function(t){return t.theme.toolbar.background}),(function(t){return t.theme.toolbar.foreground}),(function(t){var e=t.theme.toolbar.border?t.theme.toolbar.border:n(U_||(U_=C(["\n          1px solid ",";\n        "],["\n          1px solid ",";\n        "])),t.theme.toolbar.borderColor);return t.reverse?n(H_||(H_=C(["\n          border-left: ",";\n        "],["\n          border-left: ",";\n        "])),e):n(W_||(W_=C(["\n          border-right: ",";\n        "],["\n          border-right: ",";\n        "])),e)}),(function(t){return t.theme.measurements.advancedUIToolbar.width}),(function(t){return t.theme.measurements.advancedUIToolbar.marginBottom})),ib=t.ul.attrs((function(){return{role:"menubar","aria-label":"Tool Navigation","data-simplebar":"init","data-simplebar-auto-hide":"false"}}))(V_||(V_=C(["\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  list-style: none;\n  overflow-x: hidden;\n  overflow-y: overlay;\n  height: 100%;\n  .simplebar-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"],["\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  list-style: none;\n  overflow-x: hidden;\n  overflow-y: overlay;\n  height: 100%;\n  .simplebar-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),ob=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={reverse:!1},e}return v(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("photoeditorsdk-AdvancedToolbar");t&&(t.offsetLeft>window.innerWidth/2&&this.setState({reverse:!0}))},e.prototype.render=function(){return i.createElement(rb,{reverse:this.state.reverse},i.createElement(ib,{id:"photoeditorsdk-AdvancedToolbar"},this.props.children(this.state.reverse)))},e}(i.Component);rb.defaultProps={theme:Vo},ib.defaultProps={theme:Vo};var ab,sb,lb,ub,cb,fb=t(Hf)(ub||(ub=C(["\n  width: inherit;\n  height: inherit;\n  padding: 0;\n  margin: 0;\n  ","\n\n  ","\n"],["\n  width: inherit;\n  height: inherit;\n  padding: 0;\n  margin: 0;\n  ","\n\n  ","\n"])),te()?n(ab||(ab=C(["\n        background-color: transparent;\n      "],["\n        background-color: transparent;\n      "]))):n(sb||(sb=C(["\n        background-color: inherit;\n      "],["\n        background-color: inherit;\n      "]))),(function(t){return t.isActive&&n(lb||(lb=C(["\n      background-color: ",";\n      color: ",";\n    "],["\n      background-color: ",";\n      color: ",";\n    "])),t.theme.toolbar.activeBackground,t.theme.toolbar.activeForeground)})),pb=t.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})(cb||(cb=C(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"],["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.itemHeight}));pb.defaultProps={theme:Vo};var hb,db=t.li.attrs({role:"none"})(hb||(hb=C(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"],["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.seperatorHeight}));db.defaultProps={theme:Vo};var yb,gb,mb,vb,_b,bb,wb,xb=t.div(bb||(bb=C(["\n  ","\n  position: -ms-device-fixed;\n  top: ","px;\n  left: ","px;\n  z-index: ",";\n  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out, right 0.25s ease-in-out, visibility 0.5s ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n  cursor: pointer;\n\n  &:before {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    left: -8px;\n    width: 0;\n    height: 0;\n    border-right: 8px solid ",";\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n  }\n\n  &:after {\n    content: '","';\n    position: absolute;\n    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;\n    color: ",";\n    background: ",";\n    padding: 8px 12px;\n    text-align: center;\n    vertical-align: super;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    border-radius: ","px;\n    white-space: nowrap;\n  }\n\n  ","\n\n  ","\n\n  ","\n"],["\n  ","\n  position: -ms-device-fixed;\n  top: ","px;\n  left: ","px;\n  z-index: ",";\n  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out, right 0.25s ease-in-out, visibility 0.5s ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n  cursor: pointer;\n\n  &:before {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    left: -8px;\n    width: 0;\n    height: 0;\n    border-right: 8px solid ",";\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n  }\n\n  &:after {\n    content: '","';\n    position: absolute;\n    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;\n    color: ",";\n    background: ",";\n    padding: 8px 12px;\n    text-align: center;\n    vertical-align: super;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    border-radius: ","px;\n    white-space: nowrap;\n  }\n\n  ","\n\n  ","\n\n  ","\n"])),te()?n(yb||(yb=C(["\n        position: -ms-device-fixed;\n      "],["\n        position: -ms-device-fixed;\n      "]))):n(gb||(gb=C(["\n        position: fixed;\n      "],["\n        position: fixed;\n      "]))),(function(t){return t.position.y-5}),(function(t){return t.position.x+t.theme.measurements.advancedUIToolbar.width-10}),(function(t){return t.theme.measurements.zIndex.toolbar}),(function(t){return t.theme.tooltip.background}),(function(t){return t.label}),(function(t){return t.theme.tooltip.foreground}),(function(t){return t.theme.tooltip.background}),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case}),(function(t){return t.theme.shape.radiusSmall}),(function(t){return t.reverse&&n(mb||(mb=C(["\n      left: unset;\n      right: ","px;\n      direction: rtl;\n\n      &:before {\n        border-left: 8px solid ",";\n        border-right: none;\n        right: -8px;\n        left: unset;\n        top: 10px;\n      }\n    "],["\n      left: unset;\n      right: ","px;\n      direction: rtl;\n\n      &:before {\n        border-left: 8px solid ",";\n        border-right: none;\n        right: -8px;\n        left: unset;\n        top: 10px;\n      }\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width-10,t.theme.tooltip.background)}),(function(t){return t.show&&!t.reverse&&n(vb||(vb=C(["\n      opacity: 1;\n      visibility: visible;\n      left: ","px;\n    "],["\n      opacity: 1;\n      visibility: visible;\n      left: ","px;\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width+16)}),(function(t){return t.show&&t.reverse&&n(_b||(_b=C(["\n      opacity: 1;\n      visibility: visible;\n      right: ","px;\n    "],["\n      opacity: 1;\n      visibility: visible;\n      right: ","px;\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width+16)})),Ob=t.span(wb||(wb=C(["\n  display: none;\n"],["\n  display: none;\n"]))),Sb=function(t){var e=t.show,n=t.reverse,r=t.position,o=t.children,a="string"==typeof o?o:"";return i.createElement(xb,{"data-test-id":"Tooltip",show:e,reverse:n,position:r,label:a},i.createElement(Ob,null,a))};xb.defaultProps={theme:Vo},Sb.defaultProps={show:!1};var kb,Tb,Cb,Eb,Rb=t.div(Cb||(Cb=C(["\n  flex-shrink: 0;\n  background: ",";\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.4s ease-in;\n  width: ","px;\n  margin-bottom: ","px;\n  ","\n  z-index: ",";\n  /* for Firefox */\n  min-height: 0;\n"],["\n  flex-shrink: 0;\n  background: ",";\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.4s ease-in;\n  width: ","px;\n  margin-bottom: ","px;\n  ","\n  z-index: ",";\n  /* for Firefox */\n  min-height: 0;\n"])),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.measurements.advancedUIToolControlBar.marginBottom}),(function(t){return t.reverse?n(Tb||(Tb=C(["\n          border-left: 1px solid ",";\n        "],["\n          border-left: 1px solid ",";\n        "])),t.theme.toolControlBar.borderColor):n(kb||(kb=C(["\n          border-right: 1px solid ",";\n        "],["\n          border-right: 1px solid ",";\n        "])),t.theme.toolControlBar.borderColor)}),(function(t){return t.theme.measurements.zIndex.toolControlBar})),Db=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={reverse:!1},e}return v(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("photoeditorsdk-Sidebar");t&&(t.offsetLeft>window.innerWidth/2&&this.setState({reverse:!0}))},e.prototype.render=function(){return i.createElement(Rb,{id:"photoeditorsdk-Sidebar",reverse:this.state.reverse},this.props.children)},e}(i.Component),Pb=t.h2(Eb||(Eb=C(["\n  /* Center text horizontally and vertically */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 0;\n  padding: 0 4px;\n  margin: 0;\n  min-height: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: 500;\n  text-align: center;\n"],["\n  /* Center text horizontally and vertically */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 0;\n  padding: 0 4px;\n  margin: 0;\n  min-height: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: 500;\n  text-align: center;\n"])),(function(t){return t.theme.measurements.mainCanvasActionBar.height-2}),(function(t){return t.theme.measurements.fontSystem.headline1.size}),(function(t){return t.theme.measurements.fontSystem.headline1.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline1.case}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.titleForeground}),(function(t){return t.theme.toolControlBar.separatorColor}));Pb.defaultProps={theme:Vo};var Ib,Ab,Fb=t.div(Ib||(Ib=C(["\n  position: relative;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: ","px;\n  opacity: ",";\n  visibility: ",";\n  overflow: ",";\n  transition: ",";\n  background: ",";\n  color: ",";\n"],["\n  position: relative;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: ","px;\n  opacity: ",";\n  visibility: ",";\n  overflow: ",";\n  transition: ",";\n  background: ",";\n  color: ",";\n"])),(function(t){return t.height}),(function(t){return t.opacity}),(function(t){return t.visibility}),(function(t){var e=t.shouldAnimateOverflow,n=t.overflow;return e?n:void 0}),(function(t){return t.shouldAnimateHeight?"opacity 0.5s ease-in, height 0.4s ease-out":"opacity 0.5s ease-in"}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.inputLabelForeground})),jb=t.div(Ab||(Ab=C(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.padding})),Mb=function(t){function e(e){var n=t.call(this,e)||this;return n.contentRef=null,n.enableOverflow=function(){n.props.show&&n.contentRef.current&&n.setState({overflow:!0})},n.contentRef=i.createRef(),n.state={height:0,mounted:!1,overflow:!1},n}return v(e,t),e.prototype.componentDidMount=function(){var t=this.props.overflowAfterExpand;this.contentRef.current&&(t&&this.contentRef.current.addEventListener("transitionend",this.enableOverflow),this.setState({height:this.contentRef.current.scrollHeight,mounted:!0}))},e.prototype.componentWillUnmount=function(){this.contentRef.current&&this.contentRef.current.removeEventListener("transitionend",this.enableOverflow)},e.prototype.render=function(){var t=this.props,e=t.show,n=t.shouldAnimateOverflow,r=t.shouldAnimateHeight,o=t.children,a=this.state,s=a.height,l=a.mounted,u=a.overflow,c=l&&(e&&n||!n),f=c?s:0,p=c?1:0,h=c?"visible":"hidden";return i.createElement(Fb,{"data-test-id":"ToolControlBar",ref:this.contentRef,height:f,opacity:p,visibility:h,overflow:u?"visible":"hidden",shouldAnimateHeight:r,shouldAnimateOverflow:n},i.createElement(jb,null,o))},e.defaultProps={show:!0,shouldAnimateOverflow:!0,shouldAnimateHeight:!0},e}(i.Component);Fb.defaultProps={theme:Vo};var Bb,zb=t.div.attrs({"data-simplebar":"init","data-simplebar-auto-hide":"false"})(Bb||(Bb=C(["\n  &&& {\n    flex-grow: 1;\n    position: relative;\n    box-sizing: border-box;\n    padding: ",";\n    width: ","px;\n    overflow: visible;\n    /* for Firefox */\n    min-height: 0;\n    transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n    background: ",";\n    color: ",";\n\n    ","\n    .photoeditorsdk-simplebar-placeholder {\n      height: 0px !important;\n    }\n  }\n"],["\n  &&& {\n    flex-grow: 1;\n    position: relative;\n    box-sizing: border-box;\n    padding: ",";\n    width: ","px;\n    overflow: visible;\n    /* for Firefox */\n    min-height: 0;\n    transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n    background: ",";\n    color: ",";\n\n    ","\n    .photoeditorsdk-simplebar-placeholder {\n      height: 0px !important;\n    }\n  }\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.padding}),(function(t){return t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.inputLabelForeground}),op.HiddenScrollbar);zb.defaultProps={theme:Vo};var Lb,Nb=t.h2(Lb||(Lb=C(["\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-weight: 500;\n  min-height: ","px;\n"],["\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-weight: 500;\n  min-height: ","px;\n"])),(function(t){return t.theme.toolControlBar.titleForeground}),(function(t){return t.theme.measurements.fontSystem.headline2.size}),(function(t){return t.theme.measurements.fontSystem.headline2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline2.case}),(function(t){return 2*t.theme.measurements.advancedSpacer}));Nb.defaultProps={theme:Vo};var Ub,Wb,Hb=t.div(Wb||(Wb=C(["\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 2px solid ",";\n  }\n"],["\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 2px solid ",";\n  }\n"])),(function(t){return t.full?n(Ub||(Ub=C(["\n            left: -","px;\n            width: calc(100% + ","px);\n          "],["\n            left: -","px;\n            width: calc(100% + ","px);\n          "])),3*t.theme.measurements.advancedSpacer/2,3*t.theme.measurements.advancedSpacer):"\n      left: "+3*t.theme.measurements.advancedSpacer/2+"px;\n      width: calc(100% - "+3*t.theme.measurements.advancedSpacer+"px);\n    "}),(function(t){return t.theme.toolControlBar.separatorColor}));Hb.defaultProps={theme:Vo};var Gb,Vb,Zb,Xb,Yb,qb,Kb,Qb,Jb,$b,tw,ew,nw,rw=t.div(Gb||(Gb=C(["\n  position: relative;\n  width: 100%;\n"],["\n  position: relative;\n  width: 100%;\n"]))),iw=t.div(Yb||(Yb=C(["\n  transition: max-height 0.8s ease-out, transform 0.8s ease-out;\n  background: ",";\n  visibility: hidden;\n  opacity: 0;\n  transform-origin: 0 0;\n  display: none;\n  flex-wrap: wrap;\n\n  ","\n"],["\n  transition: max-height 0.8s ease-out, transform 0.8s ease-out;\n  background: ",";\n  visibility: hidden;\n  opacity: 0;\n  transform-origin: 0 0;\n  display: none;\n  flex-wrap: wrap;\n\n  ","\n"])),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.show&&n(Xb||(Xb=C(["\n      opacity: 1;\n      visibility: visible;\n      ","\n    "],["\n      opacity: 1;\n      visibility: visible;\n      ","\n    "])),te()?n(Vb||(Vb=C(["\n            display: block;\n          "],["\n            display: block;\n          "]))):n(Zb||(Zb=C(["\n            display: flex;\n          "],["\n            display: flex;\n          "]))))})),ow={Card:zy,CardContainer:Ly,CardLabel:Ny,Toolbar:{Index:ob,Item:function(t){return i.createElement(pb,null,i.createElement(fb,_({isActive:t.isActive,"data-test-id":t.ariaLabel},t)))},Separator:db,Tooltip:Sb},Itemsbar:zb,BarSeparator:"",ItemsSeparator:Hb,Controlsbar:Mb,Sidebar:{Index:Db,Heading:Pb,SubHeading:Nb,TextCategory:function(t){var e=t.name,n=t.isFirstCategory,r=t.isLastCategory,o=t.children;return i.createElement(rw,null,n&&i.createElement(Ay.Spacer,{count:2}),i.createElement(Nb,{"data-test-id":e},e),i.createElement(Ly,null,o),i.createElement(Ay.Spacer,{count:2}),r&&i.createElement(Hb,{full:!0}))},ExpandableContainer:iw}},aw=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=null,n.updatePosition=function(){var t=n.props.isReverse,e={x:0,y:0};if(n.ref.current){var r=n.ref.current.getBoundingClientRect(),i=r.top,o=r.height,a=r.left,s=r.right;e.y=i+o/4,e.x=t?window.innerWidth-s:a}n.setState({tooltipPosition:e})},n.mouseOver=function(t){n.updatePosition(),n.setState({hoverTool:t})},n.mouseOut=function(){n.setState({hoverTool:null})},n.state={hoverTool:null,tooltipPosition:{x:0,y:0}},n.ref=i.createRef(),n}return v(e,t),e.prototype.componentDidMount=function(){this.updatePosition()},e.prototype.componentDidUpdate=function(t){this.props.isReverse!==t.isReverse&&this.updatePosition()},e.prototype.render=function(){var t=this,e=this.props,n=e.tool,r=e.isActive,o=e.isReverse,a=e.icon,s=e.label,l=e.onClick,u=e.className,c=e.children,f=this.state,p=f.hoverTool,h=f.tooltipPosition;return i.createElement(sw,{ref:this.ref,onMouseOver:function(){return t.mouseOver(n)},onMouseOut:function(){return t.mouseOut()},className:u},i.createElement(ow.Toolbar.Item,{ariaLabel:s,isActive:r,onClick:function(){return l(n)}},a,c),i.createElement(ow.Toolbar.Tooltip,{position:h,reverse:o,show:p===n},s))},e}(i.Component),sw=t.div(qb||(qb=C(["\n  position: relative;\n"],["\n  position: relative;\n"]))),lw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderIcon=function(t){var e=qm[t];return i.createElement(e,null)||null},e.update=function(t){e.props.active.selectTool(t)},e}return v(e,t),e.prototype.getToolTitle=function(t){return this.props.config.locale[t].title},e.prototype.render=function(){var t=this,e=this.props.active.tool,n=this.props,r=n.tool,o=n.custom;if(r){var a=o.getAdvancedToolbarItem();return i.createElement(a,{key:r,isActive:r===e,isReverse:this.props.isReverse,icon:this.renderIcon(r),onClick:function(){return t.update(r)},tool:r,label:this.getToolTitle(r)})}return i.createElement(ow.Toolbar.Separator,null)},e=w([qu("active","config","custom"),dc],e)}(i.Component),uw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderTools=function(t){return e.props.config.tools.map((function(e,n){return i.createElement(lw,{key:e||n,tool:e,isReverse:t})}))},e}return v(e,t),e.prototype.render=function(){return i.createElement(ow.Toolbar.Index,null,this.renderTools)},e=w([qu("config"),dc],e)}(i.Component),cw=qu("library","active","custom")(dc((function(t){var e=t.library,n=t.active,r=t.custom,o=e.locale.controls.placeholderSearch,a=e,s=a.config,l=a.libraryProvider,u=r.getButton("toolControlBarPrimaryButton"),c=r.getButton("toolControlBarSecondaryButton");return i.createElement(ow.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1},i.createElement(Ay.Spacer,null),l&&i.createElement(i.Fragment,null,i.createElement(Ay.Input.Search,{onChange:function(t){e.fetchImages(t)},placeholder:o}),i.createElement(Ay.Spacer,{count:2})),s.enableUpload&&i.createElement(u,{tool:j.LIBRARY,ariaLabel:e.locale.controls.buttonUpload,onClick:function(){var t=document.getElementById("fileUpload");t&&t.click()},fullWidth:!0,label:e.locale.controls.buttonUpload},i.createElement(Ay.Input.File,{onChange:function(t){var e=t.target.files;if(e.length){var r=new FileReader;r.onload=function(t){n.newImage(t.target.result)},r.readAsDataURL(e[0])}}})),i.createElement(Ay.Spacer,null),s.enableWebcam&&i.createElement(c,{tool:j.LIBRARY,ariaLabel:e.locale.controls.buttonWebcamOpen,onClick:function(){n.selectWebcam(!0)},fullWidth:!0,label:e.locale.controls.buttonWebcamOpen}),i.createElement(ow.ItemsSeparator,null))}))),fw=qu("library","active","custom")(dc((function(t){var e=t.active,n=t.library,r=t.custom,o=n,a=o.query,s=o.config,l=o.selectedCategoryIdentifier,u=o.categories,c=o.images,f=r.getAdvancedCategoryCard(),p=r.getAdvancedItemCard(),h=function(t,n){return i.createElement(p,{tool:j.LIBRARY,type:B.MEDIUM,onClick:function(){return e.newImage(t.rawUrl)},key:t.identifier+"-"+n,image:t.coverImage,label:t.name,style:{animationDelay:.08*n+"s"}},i.createElement(ow.CardLabel,{hidden:!0},t.name))};return a?c.length?i.createElement(i.Fragment,null,c.map(h)):i.createElement("p",{"data-test-id":"LibraryNoResult"},n.locale.controls.noResults):s.flattenCategories?i.createElement(i.Fragment,null,c.map(h)):s.categoryHeaderType===M.CARD?i.createElement(i.Fragment,null,u.map((function(t){var e=l===t.identifier;return t.items?i.createElement("div",{key:t.identifier},i.createElement(f,{isActive:e,tool:j.LIBRARY,type:B.LARGE,onClick:function(){return n.toggleCategorySelection(t.identifier)},image:t.coverImage,label:t.name,style:{animationDelay:(t.delay||0)+"s"}},i.createElement(ow.CardLabel,{withBackground:!0,caret:!0,isActive:e},t.name)),i.createElement(ow.Sidebar.ExpandableContainer,{show:e},t.items.map(h))):null}))):s.categoryHeaderType===M.TEXT?i.createElement(i.Fragment,null,u.map((function(t,e){return t.items?i.createElement(ow.Sidebar.TextCategory,{key:t.identifier,name:t.name,isFirstCategory:0!==e,isLastCategory:e!==u.length-1},t.items.map(h)):null}))):null}))),pw=qu("library")(dc((function(t){var e=t.library,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(cw,null),i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,i.createElement(fw,null))))}))),hw=qu("filterTool","custom")(dc((function(t){var e=t.filterTool,n=t.custom,r=e.locale.controls,o=e.state,a=n.getButton("toolControlBarSecondaryButton"),s=function(){e.toolSnapshot()};return i.createElement(ow.Controlsbar,{show:e.isOptionSelected},i.createElement(Ay.Input.Form,null,i.createElement(a,{tool:j.FILTER,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:o.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:s,onTouchEnd:s,snap:o.isDuotone?.5:null}),i.createElement(Ay.Spacer,null)),i.createElement(ow.ItemsSeparator,null))}))),dw=qu("filterTool","custom")(dc((function(t){var e=t.filterTool,n=t.custom,r=e,o=r.categories,a=r.config,s=r.entities,l=r.locale,u=n.getAdvancedItemCard(),c=n.getAdvancedCategoryCard(),f=function(t){var n=l.items[t.identifier]||t.name;return i.createElement(u,{tool:j.FILTER,type:B.MEDIUM,onClick:function(){return e.selectFilter(t.identifier,t.defaultIntensity)},key:t.identifier,image:t.thumbnail||t.thumbnailURI,label:n,style:{animationDelay:(t.delay||0)+"s"},isActive:e.identifier===t.identifier},i.createElement(ow.CardLabel,{withBackground:!0},n))};return a.flattenCategories?i.createElement(i.Fragment,null,s.map(f)):a.categoryHeaderType===M.CARD?i.createElement(i.Fragment,null,o.map((function(t){var n=e.selectedCategoryIdentifier===t.identifier,r=l.categories[t.identifier]||t.name;return t.items?i.createElement("div",{key:t.identifier},i.createElement(c,{isActive:n,tool:j.FILTER,type:B.LARGE,onClick:function(){return e.toggleCategorySelection(t.identifier)},image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"}},i.createElement(ow.CardLabel,{withBackground:!0,caret:!0,isActive:n},r)),i.createElement(ow.Sidebar.ExpandableContainer,{show:n},t.items.map(f))):null}))):a.categoryHeaderType===M.TEXT?i.createElement(i.Fragment,null,o.map((function(t,e){var n=l.categories[t.identifier]||t.name;return t.items?i.createElement(ow.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==o.length-1},t.items.map(f)):null}))):null}))),yw=qu("filterTool")(dc((function(t){var e=t.filterTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(hw,null),i.createElement(ow.Itemsbar,{key:"filterToolItemsbar"},i.createElement(ow.CardContainer,null,i.createElement(dw,null))))}))),gw=qu("focusTool","custom")(dc((function(t){var e=t.focusTool,n=t.custom,r=e.locale.controls,o=n.getButton("toolControlBarSecondaryButton"),a=function(){e.toolSnapshot(r.sliderIntensity)};return i.createElement(ow.Controlsbar,{show:e.isOptionSelected},i.createElement(Ay.Input.Form,null,i.createElement(o,{tool:j.FOCUS,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:e.intensity,min:Jl.minIntensity,max:e.maxIntensity,divider:1,onChange:e.changeIntensity,onMouseUp:a,onTouchEnd:a})),i.createElement(Ay.Spacer,{count:1}),i.createElement(ow.ItemsSeparator,null))}))),mw=qu("focusTool","custom")(dc((function(t){var e=t.focusTool,n=t.custom,r=e.entities;return i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,r.map((function(t){var r=e.locale.items[t.identifier]||t.name,o=n.getAdvancedItemCard();return i.createElement(o,{tool:j.FOCUS,type:B.LARGE,onClick:function(){return e.selectFocus(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"},isActive:t.identifier===e.identifier},i.createElement(ow.CardLabel,{withBackground:!0},r))}))))}))),vw=qu("focusTool")(dc((function(t){var e=t.focusTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(gw,null),i.createElement(mw,null))}))),_w=t(Ay.Input.Slider)(Kb||(Kb=C(["\n  padding-bottom: 16px;\n"],["\n  padding-bottom: 16px;\n"]))),bw=qu("adjustmentsTool")(dc((function(t){var e=t.adjustmentsTool,n=e,r=n.categories,o=n.items,a=n.config,s=n.locale,l=function(){e.toolSnapshot()},u=function(t){var n=e.locale.categories[t.identifier]||t.name;return i.createElement(_w,{adjust:!0,key:t.identifier,label:n,value:e[t.identifier],onChange:function(n){return function(t,n){e.editAdjustments({type:t,value:n})}(t.identifier,n)},onMouseUp:l,onTouchEnd:l,snap:0})};return a.flattenCategories?i.createElement(i.Fragment,null,o.map(u)):i.createElement(i.Fragment,null,r.map((function(t,e){var n=s.categories[t.identifier]||t.name;return t.items?i.createElement(ow.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==r.length-1},t.items.map(u)):null})))}))),ww=qu("adjustmentsTool","custom")(dc((function(t){var e=t.adjustmentsTool,n=t.custom,r=e.locale.controls,o=n.getButton("toolControlBarSecondaryButton");return i.createElement(ow.Controlsbar,{show:e.isDirty},i.createElement(o,{tool:j.ADJUSTMENT,label:r.buttonReset,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0}),i.createElement(ow.ItemsSeparator,null))}))),xw=qu("adjustmentsTool")(dc((function(t){var e=t.adjustmentsTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(ww,null),i.createElement(ow.Itemsbar,null,i.createElement(bw,null)))}))),Ow=qu("overlayTool","custom")(dc((function(t){var e=t.overlayTool,n=t.custom,r=e.locale.controls,o=e.allBlendModes,a=e.blendMode,s=n.getButton("toolControlBarSecondaryButton"),l=function(){e.toolSnapshot()};return i.createElement(ow.Controlsbar,{show:e.isOptionSelected},i.createElement(s,{tool:j.OVERLAY,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.CarouselSlider,{label:r.carouselBlendMode,defaultIdentifier:a,onSelect:function(t){e.changeBlendMode(t)},list:o}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:l,onTouchEnd:l}),i.createElement(Ay.Spacer,null),i.createElement(ow.ItemsSeparator,null))}))),Sw=qu("overlayTool","custom")(dc((function(t){var e=t.overlayTool,n=t.custom;return i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,e.entities.map((function(t){var r=e.locale.items[t.identifier]||t.name,o=n.getAdvancedItemCard();return i.createElement(o,{tool:j.OVERLAY,type:B.MEDIUM,onClick:function(){return e.selectOverlay(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"},isActive:t.identifier===e.identifier},i.createElement(ow.CardLabel,{withBackground:!0},r))}))))}))),kw=qu("overlayTool")(dc((function(t){var e=t.overlayTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Ow,null),i.createElement(Sw,null))}))),Tw=t.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})(Qb||(Qb=C(["\n  ","\n"],["\n  ","\n"])),op.VisuallyHidden),Cw=qu("stickerTool","custom")(dc((function(t){var e=t.stickerTool,n=t.custom,r=e.colorList,o=e.locale.controls,a=e.localeColor.colorPicker,s=n.getButton("toolControlBarPrimaryButton"),l=function(){e.toolSnapshot()},u=function(){var t=document.getElementById("fileUpload");t&&(t.value=null,t.click())},c=function(t){var n=t.target.files;e.addFiles(n)},f=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return i.createElement(ow.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1,overflowAfterExpand:!0},i.createElement(Ay.Input.Form,null,e.isCustomStickerEnabled?i.createElement(s,{tool:j.STICKER,ariaLabel:o.buttonUpload,onClick:u,fullWidth:!0,label:o.buttonUpload},i.createElement(Tw,{onChange:c})):null,i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{isDisabled:!e.isStickerSelected,label:o.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:l,onTouchEnd:l}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Selection,{isDisabled:f,label:o.selectColor},i.createElement(nb,{activeSprite:e.id,parentId:o.selectColor,activeColor:e.tintColor,colors:r,labelsColor:a,isDisabled:f,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))),i.createElement(ow.ItemsSeparator,null))}))),Ew=qu("stickerTool","custom")(dc((function(t){var e=t.stickerTool,n=t.custom,r=e,o=r.categories,a=r.selectedCategoryIdentifier,s=r.config,l=r.entities,u=r.locale,c=n.getAdvancedCategoryCard(),f=n.getAdvancedItemCard(),p=function(t){var n=u.items[t.identifier]||t.name;return i.createElement(f,{key:t.identifier,tool:j.STICKER,type:B.SMALL,onClick:function(){return e.add(t.identifier)},image:t.thumbnailURI,label:n,style:{backgroundSize:"75%",animationDelay:(.3*t.delay||0)+"s"}},i.createElement(ow.CardLabel,{hidden:!0},n))};return s.flattenCategories?i.createElement(i.Fragment,null,l.map(p)):s.categoryHeaderType===M.CARD?i.createElement(i.Fragment,null,o.map((function(t){var n=a===t.identifier,r=u.categories[t.identifier]||t.name;return t.items?i.createElement("div",{key:t.identifier},i.createElement(c,{isActive:n,tool:j.STICKER,type:B.LARGE,onClick:function(){return e.toggleCategorySelection(t.identifier)},image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"}},i.createElement(ow.CardLabel,{withBackground:!0,caret:!0,isActive:n},r)),i.createElement(ow.Sidebar.ExpandableContainer,{show:n,key:t.identifier+"-items"},t.items.map(p))):null}))):s.categoryHeaderType===M.TEXT?i.createElement(i.Fragment,null,o.map((function(t,e){var n=u.categories[t.identifier]||t.name;return t.items?i.createElement(ow.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==o.length-1},t.items.map(p)):null}))):null}))),Rw=qu("stickerTool")(dc((function(t){var e=t.stickerTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Cw,null),i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,i.createElement(Ew,null))))}))),Dw=t.div(Jb||(Jb=C(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Pw=t.div($b||($b=C(["\n  display: flex;\n  justify-content: space-between;\n"],["\n  display: flex;\n  justify-content: space-between;\n"]))),Iw=t(Ay.Input.NumericInput)(tw||(tw=C(["\n  max-width: 50%;\n  margin-right: 16px;\n"],["\n  max-width: 50%;\n  margin-right: 16px;\n"]))),Aw=t(Ay.Input.Selection)(ew||(ew=C(["\n  width: 50%;\n"],["\n  width: 50%;\n"]))),Fw=qu("textTool","custom")(dc((function(t){var e=t.textTool,n=t.custom,r=e.locale.controls,o=e.localeColor.colorPicker,a=e,s=a.fontFamilies,l=a.alignment,u=a.isTextSelected,c=a.fontFamily,f=a.fontStyle,p=a.fontWeight,h=a.colorList,d=a.backgroundColorList,y=["left","center","right"],g=n.getButton("textAlignment"),m=n.getButton("toolControlBarPrimaryButton"),v=function(){e.toolSnapshot()},_=s.map((function(t){return{label:t.fontFamily+" "+Tl.getDisplayFontStyle(t),fontWeight:t.fontWeight||"",fontStyle:t.fontStyle||"",fontFamily:t.fontFamily||"",value:t.identifier}})),b=_.filter((function(t){return t.value===e.identifier}))[0];return i.createElement(ow.Controlsbar,{show:!0,overflowAfterExpand:!0,shouldAnimateHeight:!1},i.createElement(Ay.Input.Form,null,i.createElement(m,{tool:j.TEXT,ariaLabel:r.buttonNew,onClick:function(){e.add()},fullWidth:!0,label:r.buttonNew}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Dropdown,{isDisabled:!u,style:{fontFamily:c,fontStyle:f,fontWeight:p},itemStyle:function(t){return{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight}},label:r.dropdownFontFamily,list:_,onSelect:e.changeFont,selectedItem:b.label}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Pw,null,i.createElement(Iw,{value:e.fontSize.toFixed(0),onSubmit:function(t){var n=t?parseFloat(t):0;e.setFontSize(Math.max(10,Math.min(690,n)))},label:r.textFontSize,isDisabled:!u}),i.createElement(Aw,{isDisabled:!u,inline:!0,label:r.selectAlignment},y.map((function(t){var n=Km[t];return i.createElement(g,{tool:t,isDisabled:!u,ariaLabel:"Align "+t,isActive:t===l,key:t,style:{padding:"1px 3px 2px"},icon:i.createElement(n,null),onClick:function(){return e.changeAlignment(t)}})})))),i.createElement(Ay.Spacer,{count:2}),i.createElement(Dw,null,i.createElement(ow.ItemsSeparator,{full:!0})),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Selection,{isDisabled:!u,label:r.selectFontColor},i.createElement(nb,{activeSprite:e.id,parentId:r.selectFontColor,activeColor:e.textColor,colors:h,labelsColor:o,isDisabled:!u,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Selection,{isDisabled:!u,label:r.selectBackgroundColor},i.createElement(nb,{activeSprite:e.id,parentId:r.selectBackgroundColor,activeColor:e.backgroundColor,colors:d,labelsColor:o,isDisabled:!u,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot})),i.createElement(Ay.Spacer,{count:2}),i.createElement(Dw,null,i.createElement(ow.ItemsSeparator,{full:!0})),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{isDisabled:!u,label:r.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:v,onTouchEnd:v,snap:1,divider:1,decimal:1}),i.createElement(Ay.Spacer,{count:1})))}))),jw=qu("textTool")(dc((function(t){var e=t.textTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Fw,null),i.createElement(ow.Itemsbar,null))}))),Mw=qu("textDesignTool","custom")(dc((function(t){var e=t.textDesignTool,n=t.custom,r=e.locale.controls,o=e.localeColor.colorPicker,a=e.colorList,s=e.isTextDesignSelected,l=n.getButton("toolControlBarPrimaryButton"),u=n.getButton("toolControlBarSecondaryButton");return i.createElement(ow.Controlsbar,{shouldAnimateOverflow:!1,shouldAnimateHeight:!1},i.createElement(Ay.Input.Form,null,i.createElement(l,{tool:j.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:function(){e.add()},fullWidth:!0,label:r.buttonNew}),i.createElement(Ay.Spacer,{count:2}),i.createElement(u,{tool:j.TEXT_DESIGN,ariaLabel:r.buttonShuffle,isDisabled:!s,onClick:function(){e.changeSeed()},fullWidth:!0,label:r.buttonShuffle}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Selection,{isDisabled:!s,label:r.selectColor},i.createElement(nb,{activeSprite:e.id,parentId:r.selectColor,activeColor:e.color,colors:a,labelsColor:o,isDisabled:!s,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),i.createElement(ow.ItemsSeparator,null))}))),Bw=qu("textDesignTool","custom")(dc((function(t){var e=t.textDesignTool,n=t.custom,r=e.entities,o=e.identifier;return i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,r.map((function(t){var r=n.getAdvancedItemCard();return i.createElement(r,{key:t.identifier,tool:j.TEXT_DESIGN,type:B.MEDIUM,onClick:function(){return n=t.identifier,void e.changeIdentifier(n);var n},image:t.thumbnailURI,label:t.name||"",style:{animationDelay:(t.delay||0)+"s",backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:o===t.identifier},i.createElement(ow.CardLabel,{hidden:!0},t.name))}))))}))),zw=qu("textDesignTool")(dc((function(t){var e=t.textDesignTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Mw,null),i.createElement(Bw,null))}))),Lw=qu("frameTool","custom")(dc((function(t){var e=t.frameTool,n=t.custom,r=e.entities,o=e.state?e.state.identifier:null;return i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,r.map((function(t){var r=e.locale.items[t.identifier]||t.name,a=n.getAdvancedItemCard();return i.createElement(a,{tool:j.FRAME,type:B.MEDIUM,onClick:function(){return e.selectFrame(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{backgroundSize:"75%",animationDelay:(t.delay||0)+"s"},isActive:t.identifier===o},i.createElement(ow.CardLabel,{hidden:!0},r))}))))}))),Nw=qu("frameTool","custom")(dc((function(t){var e=t.frameTool,n=t.custom,r=e.locale.controls,o=e.localeColor.colorPicker,a=e,s=a.tintable,l=a.colorList,u=n.getButton("toolControlBarSecondaryButton"),c=function(t){e.toolSnapshot(t)};return i.createElement(ow.Controlsbar,{show:e.isOptionSelected,overflowAfterExpand:!0},i.createElement(u,{tool:j.FRAME,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:function(){c(r.sliderOpacity)},onTouchEnd:function(){c(r.sliderOpacity)}}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:function(){c(r.sliderSize)},onTouchEnd:function(){c(r.sliderSize)}}),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Selection,{isDisabled:!s,label:r.selectColor},i.createElement(nb,{parentId:r.selectColor,activeColor:e.color,colors:l,labelsColor:o,isDisabled:!s,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),i.createElement(ow.ItemsSeparator,null))}))),Uw=qu("frameTool")(dc((function(t){var e=t.frameTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Nw,null),i.createElement(Lw,null))}))),Ww=qu("brushTool","custom")(dc((function(t){var e=t.brushTool,n=t.custom,r=e.colorList,o=e.locale.controls,a=e.localeColor.colorPicker,s=n.getButton("toolControlBarSecondaryButton");return i.createElement(i.Fragment,null,i.createElement(ow.Controlsbar,{show:e.isDirty},i.createElement(s,{tool:j.BRUSH,ariaLabel:o.buttonReset,onClick:e.reset,fullWidth:!0,label:o.buttonReset}),i.createElement(ow.ItemsSeparator,null)),i.createElement(ow.Controlsbar,{overflowAfterExpand:!0},i.createElement(Ay.Input.Selection,{label:o.selectColor},i.createElement(nb,{parentId:o.selectColor,activeColor:e.color,colors:r,labelsColor:a,onChange:e.changeColor})),i.createElement(Ay.Spacer,{count:2}),i.createElement(Ay.Input.Slider,{label:o.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize}),i.createElement(Ay.Spacer,{count:3}),i.createElement(Ay.Input.Slider,{label:o.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness}),i.createElement(Ay.Spacer,null)))}))),Hw=qu("brushTool")(dc((function(t){var e=t.brushTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Ww,null),i.createElement(ow.Itemsbar,null))}))),Gw=qu("transformTool","custom")(dc((function(t){var e=t.transformTool,n=t.custom,r=e.locale.controls,o=e,a=o.forceDimensions,s=o.lockResolution,l=o.localOutputHeight,u=o.localOutputWidth,c=n.getButton("toolControlBarSecondaryButton"),f=n.getCheckbox();return i.createElement(ow.Controlsbar,{shouldAnimateHeight:!1},i.createElement(Ay.Input.Form,null,i.createElement(c,{tool:j.TRANSFORM,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),i.createElement(Ay.Spacer,{count:2}),i.createElement(f,{isDisabled:a,value:s,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}),i.createElement(Ay.Spacer,{count:2}),i.createElement(J_,{isDisabled:a,showLabel:!0,valueHeight:l,valueWidth:u,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:r.inputCropSize,labelHeight:r.inputHeight,labelWidth:r.inputWidth}),i.createElement(Ay.Spacer,{count:1})),i.createElement(ow.ItemsSeparator,null))}))),Vw=qu("transformTool","custom","editor")(dc((function(t){var e=t.transformTool,n=t.custom,r=t.editor,o=e,a=o.categories,s=o.entities,l=o.identifier,u=o.config,c=o.locale,f=n.getAdvancedItemCard(),p=n.getAdvancedCategoryCard(),d=function(t){var n=r.configStore,o=n.theme,a=n.measurements,s=c.items[t.identifier]||t.name,u=t.thumbnailURI||"",p="80%";if(!e.checkIfTransformThumbnailExits(t.thumbnailURI)){var d=t.identifier.includes("imgly_transform_common"),y=nv.crops[t.identifier]||nv.crops.imgly_transform_common_custom,g=i.createElement(y,{width:a.advancedCard.medium.width-(d?42:0),height:a.advancedCard.medium.height-(d?42:0),main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});u="'data:image/svg+xml,"+encodeURIComponent(h(g))+"'",p=te()||$t()?"auto":"unset"}return i.createElement(f,{key:t.identifier,tool:j.TRANSFORM,type:B.MEDIUM,onClick:function(){return e.changeIdentifier(t.identifier,!0)},image:u,label:s,style:{backgroundSize:p,animationDelay:(t.delay||0)+"s"},isActive:t.identifier===l},i.createElement(ow.CardLabel,null,s))};return u.flattenCategories?i.createElement(i.Fragment,null,s.map(d)):u.categoryHeaderType===M.CARD?i.createElement(i.Fragment,null,a.map((function(t){var n=r.configStore,o=n.theme,a=n.measurements,s=e.selectedCategoryIdentifier===t.identifier,l=c.categories[t.identifier]||t.name,u=t.thumbnailURI||"";if(!t.items)return null;if(!e.checkIfTransformThumbnailExits(t.thumbnailURI)){var f=nv.categories[t.identifier]||nv.crops.imgly_transform_common_custom,y=i.createElement(f,{width:a.advancedCard.large.width-42,height:a.advancedCard.large.height-42,main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});u="'data:image/svg+xml,"+encodeURIComponent(h(y))+"'"}return i.createElement("div",{key:t.identifier},i.createElement(p,{type:t.type,onClick:function(){return e.toggleCategorySelection(t.identifier)},key:t.identifier,image:u,style:{animationDelay:(t.delay||0)+"s"},label:t.name,tool:j.TRANSFORM},i.createElement(ow.CardLabel,{caret:!0,isActive:s},l)),i.createElement(ow.Sidebar.ExpandableContainer,{show:s},t.items.map(d)))}))):u.categoryHeaderType===M.TEXT?i.createElement(i.Fragment,null,a.map((function(t,e){var n=c.categories[t.identifier]||t.name;return t.items?i.createElement(ow.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==a.length-1},t.items.map(d)):null}))):null}))),Zw=qu("transformTool")(dc((function(t){var e=t.transformTool,n=t.displayTitle;return i.createElement(i.Fragment,null,n&&i.createElement(ow.Sidebar.Heading,null,e.locale.title),i.createElement(Gw,null),i.createElement(ow.Itemsbar,null,i.createElement(ow.CardContainer,null,i.createElement(Vw,null))))}))),Xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.render=function(){var t=this.props.active.tool,e=this.props.config.config.displayToolControlBarTitle;return i.createElement(ow.Sidebar.Index,null,i.createElement(Ay.Switch.Index,{type:t},i.createElement(Ay.Switch.Case,{value:j.LIBRARY},i.createElement(pw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.FILTER},i.createElement(yw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.FOCUS},i.createElement(vw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.ADJUSTMENT},i.createElement(xw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.OVERLAY},i.createElement(kw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.STICKER},i.createElement(Rw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.TEXT},i.createElement(jw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.TEXT_DESIGN},i.createElement(zw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.FRAME},i.createElement(Uw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.BRUSH},i.createElement(Hw,{displayTitle:e})),i.createElement(Ay.Switch.Case,{value:j.TRANSFORM},i.createElement(Zw,{displayTitle:e}))))},e=w([qu("active","config"),dc],e)}(i.Component),Yw=t.div(nw||(nw=C(["\n  position: absolute;\n  height: 100%;\n  width: ","px;\n  top: 0;\n  background: ",";\n  z-index: ",";\n"],["\n  position: absolute;\n  height: 100%;\n  width: ","px;\n  top: 0;\n  background: ",";\n  z-index: ",";\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.width+t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.webcam.backdrop}),(function(t){return t.theme.measurements.zIndex.disable})),qw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e}return v(e,t),e.getDerivedStateFromError=function(t){return console.error(t),{hasError:!0}},e.prototype.render=function(){var t=this.props,e=t.config,n=t.active;return e.isOrderDefault?i.createElement(Ay.Container,{"data-test-id":"EditorContainer"},n.isWebcam?i.createElement(Yw,{style:{left:0}}):null,i.createElement($_,null),i.createElement(uw,null),i.createElement(Xw,null),i.createElement(Xy,null,i.createElement(X_,null),i.createElement(I_,null))):i.createElement(Ay.Container,{"data-test-id":"EditorContainer"},n.isWebcam?i.createElement(Yw,{style:{right:0}}):null,i.createElement($_,null),i.createElement(Xy,null,i.createElement(X_,null),i.createElement(I_,null)),i.createElement(Xw,null),i.createElement(uw,null))},e}(i.Component),Kw=qu("config","active")(dc(qw)),Qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.componentDidMount=function(){this.editor=this.props.editor,this.storeProps=this.props.storeProps;var t=new tb(this.editor.configStore.config.custom.components,{advancedUICategoryCard:ow.Card,advancedUIItemCard:ow.Card,advancedUIToolbarItem:aw}),e={getAdvancedCategoryCard:t.getAdvancedCategoryCard,getAdvancedItemCard:t.getAdvancedItemCard,getAdvancedToolbarItem:t.getAdvancedToolbarItem,getDialog:t.getDialog,getButton:t.getButton,getColorItem:t.getColorItem,getCheckbox:t.getCheckbox};this.storeProps.custom=e,this.forceUpdate()},e.prototype.render=function(){return this.storeProps?i.createElement(wc,_({},this.storeProps),i.createElement(r,{theme:_(_({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},i.createElement(Kw,null))):null},e}(i.Component),Jw=ow.CardLabel,$w=Object.freeze({__proto__:null,AdvancedUI:Qw,ToolbarItem:aw,CardLabel:Jw});document.onkeydown=function(t){13===t.keyCode&&document.activeElement&&document.activeElement.click()};var tx=function(t){function e(e,n){var r=t.call(this)||this;return r.dispose=function(){r.container&&(c.unmountComponentAtNode(r.container),r.removeAllListeners(_t.EXPORT),r.removeAllListeners(_t.HISTORY_CHANGE),r.removeAllListeners(_t.EDITOR_READY),r.removeAllListeners(_t.ERROR_IMAGE_LOADING))},r.serialize=function(t){return r.editor.serialize(t)},r.deserialize=function(t){return r.editor.deserialize(t)},r.export=function(t){return r.editor.export(t)},r.close=function(){return r.editor.close()},r.setImage=function(t){return r.editor.setImage(t)},r.container=n,r.editor=new Nl(_({},e)),r.editor.configStore.events.on(_t.EXPORT,(function(t){r.emit(_t.EXPORT,t)})),r.editor.configStore.events.on(_t.CLOSE,(function(){r.dispose(),r.emit(_t.CLOSE)})),r.editor.configStore.events.on(_t.HISTORY_CHANGE,(function(){r.emit(_t.HISTORY_CHANGE)})),r}return v(e,t),e.prototype.hasChanges=function(){return this.editor.hasChanges()},e}(St),ex=function(){function t(){this.container=null}return t.prototype.init=function(t){var e=this;return new Promise((function(n,r){e.container="string"==typeof t.container?document.querySelector(t.container):t.container,e.container?(e.editorApi=new tx(t,e.container),c.render(i.createElement(nx,{editor:e.editorApi.editor}),e.container),e.editorApi.editor.configStore.events.on(_t.EDITOR_READY,(function(){setTimeout((function(){e.editorApi.emit(_t.EDITOR_READY)}),0),n(e.editorApi)})),e.editorApi.editor.configStore.events.on(_t.ERROR_IMAGE_LOADING,(function(t){setTimeout((function(){e.editorApi.emit(_t.ERROR_IMAGE_LOADING,t)}),0),n(e.editorApi)}))):r(new Error("Provide a container"))}))},t}(),nx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIComponent=null,e}return v(e,t),e.prototype.componentDidMount=function(){var t=this;this.editor=this.props.editor,this.storeProps={filterTool:this.editor.filterToolStore,focusTool:this.editor.focusToolStore,adjustmentsTool:this.editor.adjustmentsToolStore,overlayTool:this.editor.overlayToolStore,frameTool:this.editor.frameToolStore,brushTool:this.editor.brushToolStore,transformTool:this.editor.transformToolStore,scale:this.editor.scale,sprite:this.editor.spriteStore,stickerTool:this.editor.spriteStore.stickerToolStore,textTool:this.editor.spriteStore.textToolStore,textDesignTool:this.editor.spriteStore.textDesignToolStore,library:this.editor.libraryStore,modal:this.editor.modalStore,snapping:this.editor.snappingStore,config:this.editor.configStore,active:this.editor.activeStore,canvas:this.editor.canvasStore,history:this.editor.historyStore,editor:this.editor},"basic"===this.editor.configStore.config.layout?import("./index-b5e9efd1.js").then((function(e){var n=e.BasicUI;t.UIComponent=n,t.forceUpdate()})):Promise.resolve().then((function(){return $w})).then((function(e){var n=e.AdvancedUI;t.UIComponent=n,t.forceUpdate()}))},e.prototype.componentWillUnmount=function(){this.editor.engine.dispose(),this.editor.configStore.events.removeAllListeners(_t.EXPORT),this.editor.configStore.events.removeAllListeners(_t.CLOSE),this.editor.configStore.events.removeAllListeners(_t.HISTORY_CHANGE),this.editor.configStore.events.removeAllListeners(_t.EDITOR_READY),this.editor.configStore.events.removeAllListeners(_t.ERROR_IMAGE_LOADING)},e.prototype.render=function(){if(this.editor){var t=this.UIComponent;return this.storeProps&&t?i.createElement(t,{editor:this.editor,storeProps:this.storeProps}):null}return null},e}(i.Component),rx={init:function(t){return(new ex).init(t)}},ix=function(t){function e(e){var n=t.call(this,e)||this;return n.ui=new St,n.serialize=function(t){return n.editor.serialize(t)},n.deserialize=function(t){return n.editor.deserialize(t)},n.export=function(t){return n.editor.export(t)},n.close=function(){return n.editor.close()},n.setImage=function(t){return n.editor.setImage(t)},n.editor=new Nl(_({},e)),n.editor.configStore.events.on(_t.EXPORT,(function(t){n.ui.emit(_t.EXPORT,t)})),n.editor.configStore.events.on(_t.CLOSE,(function(){n.componentWillUnmount(),n.ui.emit(_t.CLOSE)})),n.editor.configStore.events.on(_t.HISTORY_CHANGE,(function(){n.ui.emit(_t.HISTORY_CHANGE)})),n.editor.configStore.events.on(_t.EDITOR_READY,(function(){n.ui.emit(_t.EDITOR_READY)})),n.editor.configStore.events.on(_t.ERROR_IMAGE_LOADING,(function(t){n.ui.emit(_t.ERROR_IMAGE_LOADING,t)})),n.storeProps={filterTool:n.editor.filterToolStore,focusTool:n.editor.focusToolStore,adjustmentsTool:n.editor.adjustmentsToolStore,overlayTool:n.editor.overlayToolStore,frameTool:n.editor.frameToolStore,brushTool:n.editor.brushToolStore,transformTool:n.editor.transformToolStore,scale:n.editor.scale,sprite:n.editor.spriteStore,stickerTool:n.editor.spriteStore.stickerToolStore,textTool:n.editor.spriteStore.textToolStore,textDesignTool:n.editor.spriteStore.textDesignToolStore,library:n.editor.libraryStore,modal:n.editor.modalStore,snapping:n.editor.snappingStore,config:n.editor.configStore,active:n.editor.activeStore,canvas:n.editor.canvasStore,history:n.editor.historyStore,editor:n.editor},"basic"===n.editor.configStore.config.layout?import("./index-b5e9efd1.js").then((function(t){var e=t.BasicUI;n.UIComponent=e,n.forceUpdate()})):Promise.resolve().then((function(){return $w})).then((function(t){var e=t.AdvancedUI;n.UIComponent=e,n.forceUpdate()})),n}return v(e,t),e.prototype.componentWillUnmount=function(){this.ui.removeAllListeners(_t.EXPORT),this.ui.removeAllListeners(_t.HISTORY_CHANGE),this.ui.removeAllListeners(_t.EDITOR_READY),this.ui.removeAllListeners(_t.ERROR_IMAGE_LOADING)},e.prototype.hasChanges=function(){return this.editor.hasChanges()},e.prototype.render=function(){if(this.editor){var t=this.UIComponent;return this.storeProps&&t?i.createElement(t,{editor:this.editor,storeProps:this.storeProps}):null}return null},e}(i.Component);yi({isolateGlobalState:!0});var ox=Ay.Input,ax=Ay.ColorItem,sx=Ay.ColorItemBase,lx=Ay.ColorItemBackground,ux=Ay.ColorItemTiledBackground,cx=Ay.ColorItemActiveOverlay,fx=Ay.Dialog,px=Ay.DialogBase,hx=Ay.DialogContainer,dx=Ay.DialogBackdrop,yx=Ay.DialogHeader,gx=Ay.DialogBody,mx=Ay.DialogFooter,vx=Ay.DialogSpinner,_x=ox.Label,bx=ox.Checkbox,wx=ox.CheckboxBase,xx=ox.CheckboxInput,Ox=ox.CheckboxCheckMark,Sx=zy,kx=zy;export{et as $,Sx as A,Vy as B,Jw as C,fx as D,Io as E,U as F,W as G,F as H,Yf as I,j as J,M as K,_x as L,B as M,z as N,Wf as O,rx as P,H as Q,q as R,Z as S,aw as T,X as U,Y as V,Q as W,K as X,J as Y,$ as Z,tt as _,g as a,he as a$,rt as a0,nt as a1,ot as a2,at as a3,st as a4,lt as a5,ct as a6,ft as a7,it as a8,pt as a9,Ws as aA,rv as aB,Tl as aC,Ym as aD,nv as aE,w as aF,Qm as aG,Jl as aH,nb as aI,Km as aJ,J_ as aK,yv as aL,$_ as aM,Xy as aN,X_ as aO,I_ as aP,tb as aQ,wc as aR,k as aS,S as aT,Ea as aU,ue as aV,de as aW,A as aX,T as aY,R as aZ,Rt as a_,ht as aa,dt as ab,yt as ac,gt as ad,mt as ae,bt as af,wt as ag,xt as ah,vt as ai,_t as aj,St as ak,Jf as al,C as am,_ as an,op as ao,b as ap,ip as aq,Vo as ar,Bf as as,v as at,ap as au,Zy as av,Ay as aw,qu as ax,dc as ay,qm as az,kx as b,d as c,Uy as d,qf as e,Vf as f,Hf as g,Gf as h,bx as i,wx as j,xx as k,Ox as l,ax as m,sx as n,lx as o,ux as p,cx as q,px as r,hx as s,dx as t,yx as u,gx as v,mx as w,vx as x,ix as y,ln as z};
