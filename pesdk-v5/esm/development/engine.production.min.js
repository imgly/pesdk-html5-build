/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};function t(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function r(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(){function e(e,t,n){void 0===t&&(t={x:1,y:1}),void 0===n&&(n=0),this.position=e,this.scale=t,this.rotation=n}return Object.defineProperty(e,"IDENTITY",{get:function(){return new e({x:0,y:0})},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}return e.fromSize=function(t){return new e(t.width,t.height)},e.distance=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.lerp=function(t,n,i){var r=Math.min(Math.max(i,0),1);return new e(t.x*r+n.x*(1-r),t.y*r+n.y*(1-r))},e.lerpUnclamped=function(t,n,i){return new e(t.x*i+n.x*(1-i),t.y*i+n.y*(1-i))},e.proportionalFit=function(e,t){return e.x/e.y>t.x/t.y?t.multiply(e.y/t.y):t.multiply(e.x/t.x)},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalized",{get:function(){var t=this.magnitude;return new e(this.x/t,this.y/t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floored",{get:function(){return new e(Math.floor(this.x),Math.floor(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return Math.min(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return Math.max(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"abs",{get:function(){return new e(Math.abs(this.x),Math.abs(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swapped",{get:function(){return new e(this.y,this.x)},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.add=function(t,n){return"number"==typeof t?new e(this.x+t,this.y+n):new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t,n){return"number"==typeof t?new e(this.x-t,this.y-n):new e(this.x-t.x,this.y-t.y)},e.prototype.multiply=function(t,n){return"number"==typeof t?new e(this.x*t,this.y*(void 0===n?t:n)):new e(this.x*t.x,this.y*t.y)},e.prototype.divide=function(t,n){return"number"==typeof t?new e(this.x/t,this.y/(void 0===n?t:n)):new e(this.x/t.x,this.y/t.y)},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y},e.ZERO=new e(0,0),e.ONE=new e(1,1),e.UP=new e(0,1),e.DOWN=new e(0,-1),e.RIGHT=new e(1,0),e.LEFT=new e(-1,0),e}(),c=function(){function e(e,t,n,i){if("number"==typeof e){if("number"!=typeof t||void 0===n||void 0===i)throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");this.origin={x:e,y:t},this.size={width:n||0,height:i||0}}else{if(this.origin=e,"number"==typeof t)throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=t}}return e.contains=function(e,t){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY},Object.defineProperty(e.prototype,"minX",{get:function(){return this.origin.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.origin.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midX",{get:function(){return this.origin.x+.5*this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midY",{get:function(){return this.origin.y+.5*this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.origin.x+this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.origin.y+this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),e.ZERO=new e({x:0,y:0},{width:0,height:0}),e}(),f=function(){function e(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o}return e.fromScale=function(t,n){return new e(t,0,0,n,0,0)},e.fromRotation=function(t){var n=Math.cos(t),i=Math.sin(t);return new e(n,-i,i,n,0,0)},e.fromRotationDeg=function(e){var t=Math.PI*e/180;return this.fromRotation(t)},e.fromTranslation=function(t,n){return new e(1,0,0,1,t,n)},e.fromTRS=function(t,n,i,r,o){var a=Math.cos(i),s=Math.sin(i);return new e(r*a,-o*s,r*s,o*a,t,n)},e.multiply=function(t,n){return new e(t.a*n.a+t.b*n.c,t.a*n.b+t.b*n.d,t.c*n.a+t.d*n.c,t.c*n.b+t.d*n.d,t.a*n.tx+t.b*n.ty+t.tx,t.c*n.tx+t.d*n.ty+t.ty)},e.transformPoint=function(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}},e.getInverted=function(t){var n=t.a*t.d-t.b*t.c;if(0===n)return t;var i=1/n;return new e(i*t.d,-i*t.b,-i*t.c,i*t.a,i*(t.b*t.ty-t.d*t.tx),i*(t.c*t.tx-t.a*t.ty))},e.IDENTITY=e.fromScale(1,1),e}();function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}window.performance.now.bind(window.performance);var p,d,_,g,m,y,v,b,w,k,x,T,R=function(){function e(e){this.text=e,this.lastOffsetWidth=-1;var t="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=t,this.expandable.style.cssText=t,this.expandableInner.style.cssText=t,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return e.prototype.getElement=function(){return this.element},e.prototype.setFont=function(e){this.element.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"},e.prototype.getWidth=function(){return this.element.offsetWidth},e.prototype.setWidth=function(e){this.element.style.width=e+"px"},e.prototype.onResize=function(e){var t=this,n=function(){t.onScroll(e)};this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()},e.prototype.reset=function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)},e.prototype.onScroll=function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)},e}(),C=function(){function e(e){this.font=n({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},e)}return e.getUserAgent=function(){return window.navigator.userAgent},e.getNavigatorVendor=function(){return window.navigator.vendor},e.hasWebKitFallbackBug=function(){if(null===e.HAS_WEBKIT_FALLBACK_BUG){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return e.HAS_WEBKIT_FALLBACK_BUG},e.hasSafari10Bug=function(){if(null===e.HAS_SAFARI_10_BUG)if(e.supportsNativeFontLoading()&&/Apple/.test(e.getNavigatorVendor())){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_SAFARI_10_BUG=!!t&&parseInt(t[1],10)<603}else e.HAS_SAFARI_10_BUG=!1;return e.HAS_SAFARI_10_BUG},e.supportsNativeFontLoading=function(){return null===e.SUPPORTS_NATIVE_FONT_LOADING&&(e.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),e.SUPPORTS_NATIVE_FONT_LOADING},e.supportsStretch=function(){if(null===e.SUPPORTS_STRETCH){var t=document.createElement("div");try{t.style.font="condensend 100px sans-serif"}catch(t){e.SUPPORTS_STRETCH=!1}e.SUPPORTS_STRETCH=""!==t.style.font}return e.SUPPORTS_STRETCH},e.prototype.load=function(t,n){var i=this,r=null,o=n||e.DEFAULT_TIMEOUT,a=this.getTime();return new Promise((function(t,n){if(e.supportsNativeFontLoading()&&!e.hasSafari10Bug()){var s=new Promise((function(e,t){var r=function(){i.getTime()-a>=o?t(new Error(o+"ms timeout exceeded")):document.fonts.load(i.getStyle('"'+i.font.fontFamily+'"'),"BESbswy").then((function(t){t.length>=1?e():setTimeout(r,25)}),n)};r()})),l=new Promise((function(e,t){r=setTimeout((function(){t(new Error(o+" ms timeout exceeded"))}),o)}));Promise.race([l,s]).then((function(){clearTimeout(r),t(i)}),n)}else{var u=new R("BESbswy"),c=new R("BESbswy"),f=new R("BESbswy"),h=-1,p=-1,d=-1,_=-1,g=-1,m=-1,y=document.createElement("div"),v=function(){null!==y.parentNode&&y.parentNode.removeChild(y)},b=function(){if((-1!==h&&-1!==p||-1!==h&&-1!==d||-1!==p&&-1!==d)&&(h===p||h===d||p===d)){if(e.hasWebKitFallbackBug()&&(h===_&&p===_&&d===_||h===g&&p===g&&d===g||h===m&&p===m&&d===m))return;v(),clearTimeout(r),t(i)}};y.dir="ltr",u.setFont(i.getStyle("sans-serif")),c.setFont(i.getStyle("serif")),f.setFont(i.getStyle("monospace")),y.appendChild(u.getElement()),y.appendChild(c.getElement()),y.appendChild(f.getElement()),document.body.appendChild(y),_=u.getWidth(),g=c.getWidth(),m=f.getWidth();var w=function(){if(i.getTime()-a>=o)v(),n(new Error(o+" ms timeout exceeded"));else{var e=document.hidden;!0!==e&&void 0!==e||(h=u.getWidth(),p=c.getWidth(),d=f.getWidth(),b()),r=setTimeout(w,50)}};w(),u.onResize((function(e){h=e,b()})),u.setFont(i.getStyle('"'+i.font.fontFamily+'",sans-serif')),c.onResize((function(e){p=e,b()})),c.setFont(i.getStyle('"'+i.font.fontFamily+'",serif')),f.onResize((function(e){d=e,b()})),f.setFont(i.getStyle('"'+i.font.fontFamily+'",monospace'))}}))},e.prototype.getStyle=function(t){return[this.font.fontStyle,this.font.fontWeight,e.supportsStretch()?this.font.fontStretch:"","100px",t].join(" ")},e.prototype.getTime=function(){return(new Date).getTime()},e.HAS_WEBKIT_FALLBACK_BUG=null,e.HAS_SAFARI_10_BUG=null,e.SUPPORTS_STRETCH=null,e.SUPPORTS_NATIVE_FONT_LOADING=null,e.DEFAULT_TIMEOUT=3e3,e}();function E(e){return void 0===e.provider||"file"===e.provider}function O(e){return"google"===e.provider}!function(e){e.UNDO="undo",e.REDO="redo",e.DELETE="delete",e.BRING_TO_FRONT="bringtofront",e.EDIT="edit",e.DUPLICATE="duplicate",e.ADD="add",e.FLIP="flip",e.INVERT="invert",e.CLOSE="close",e.EXPORT="export"}(p||(p={})),function(e){e.LIBRARY="library",e.ART_FILTER="artFilter",e.TRANSFORM="transform",e.FILTER="filter",e.ADJUSTMENT="adjustment",e.FOCUS="focus",e.STICKER="sticker",e.TEXT="text",e.TEXT_DESIGN="textdesign",e.OVERLAY="overlay",e.FRAME="frame",e.BRUSH="brush"}(d||(d={})),function(e){e.MP4="video/mp4",e.MOV="video/quicktime"}(_||(_={})),function(e){e.H264="h264",e.HEVC="hevc"}(g||(g={})),function(e){e.OBJECT="object"}(m||(m={})),function(e){e.IMAGE="image",e.DATA_URL="data-url",e.BLOB="blob",e.MSBLOB="ms-blob"}(y||(y={})),function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.RAW="raw"}(v||(v={})),d.FILTER,d.FOCUS,d.ADJUSTMENT,d.LIBRARY,d.OVERLAY,d.STICKER,d.TEXT,d.TEXT_DESIGN,d.FRAME,d.BRUSH,d.TRANSFORM,function(e){e.BRIGHTNESS="brightness",e.CONTRAST="contrast",e.SATURATION="saturation",e.CLARITY="clarity",e.SHADOWS="shadows",e.HIGHLIGHTS="highlights",e.EXPOSURE="exposure",e.GAMMA="gamma",e.BLACKS="blacks",e.WHITES="whites",e.TEMPERATURE="temperature",e.SHARPNESS="sharpness"}(b||(b={})),function(e){e.RADIAL="radial",e.LINEAR="linear",e.MIRRORED="mirrored",e.GAUSSIAN="gaussian"}(w||(w={})),function(e){e.NORMAL="normal",e.OVERLAY="overlay",e.SOFT_LIGHT="softLight",e.HARD_LIGHT="hardLight",e.MULTIPLY="multiply",e.DARKEN="darken",e.COLOR_BURN="colorBurn",e.SCREEN="screen",e.LIGHTEN="lighten"}(k||(k={})),function(e){e.CommonCategory="imgly_transforms_common",e.FacebookCategory="imgly_transforms_facebook",e.TwitterCategory="imgly_transforms_twitter",e.InstagramCategory="imgly_transforms_instagram",e.Custom="imgly_transform_common_custom",e.Square="imgly_transform_common_square",e.ThreeByFour="imgly_transform_common_3",e.FourByThree="imgly_transform_common_4",e.NineBySixteen="imgly_transform_common_9",e.SixteenByNine="imgly_transform_common_16",e.FacebookPost="imgly_transform_facebook_post",e.FacebookProfile="imgly_transform_facebook_profile",e.FacebookTitle="imgly_transform_facebook_title",e.InstagramLandscape="imgly_transform_instagram_landscape",e.InstagramPortrait="imgly_transform_instagram_portrait",e.InstagramSquare="imgly_transform_instagram_square",e.InstagramStory="imgly_transform_instagram_story",e.TwitterPost="imgly_transform_twitter_post",e.TwitterProfile="imgly_transform_twitter_profile",e.TwitterTitle="imgly_transform_twitter_title"}(x||(x={})),function(e){e.EXPORT="export",e.CLOSE="close",e.HISTORY_CHANGE="historyChange",e.EDITOR_READY="editorReady"}(T||(T={}));var I,S=function(){function e(){this.events={}}return e.prototype.addListener=function(e,t){return(this.events[e]||(this.events[e]=[])).push(t),this},e.prototype.removeListener=function(e,t){var n=this.events[e];if(!n)return this;var i=n.lastIndexOf(t);return-1===i||n.splice(i,1),this},e.prototype.removeAllListeners=function(e){return this.events[e]=void 0,this},e.prototype.on=function(e,t){return this.addListener(e,t)},e.prototype.off=function(e,t){return this.removeListener(e,t)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.events[e];return!(!i||!i.length)&&(i.slice(0).forEach((function(e){return e.apply(null,t)})),!0)},e}();!function(e){e.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",e.IMAGE_DOWNSCALED="imageDownscaled"}(I||(I={}));var A=function(e){function n(t,n){var i=e.call(this)||this;return i.image=t,i.options=n,i}return t(n,e),n.prototype.needsResize=function(){var e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height},n.prototype.resizedDimensions=function(){var e=this.options,t={width:this.image.width,height:this.image.height},n=u.fromSize(t),i=u.fromSize(t),r=e.maxMegaPixels;if(r){var o=1e6*(function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}()?r.mobile:r.desktop),a=t.width/t.height,s=t.height/t.width,l=new u(Math.floor(Math.sqrt(o*a)),Math.floor(Math.sqrt(o*s)));l.x<=t.width&&l.y<=t.height&&(n=l)}var c=e.maxDimensions;c&&(c.height<t.height||c.width<t.width)&&(i=new u(c.width,c.height));var f=new u(Math.min(n.x,i.x),Math.min(n.y,i.y));return u.proportionalFit(f,u.fromSize(t)).floored},n.prototype.downscaleIfNecessary=function(){var e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return this.image;this.emit(I.BEGAN_IMAGE_DOWNSCALING,this.image);var t=document.createElement("canvas");t.width=e.x,t.height=e.y;var n=t.getContext("2d"),i=this.image;return n.drawImage(i,0,0,i.width,i.height,0,0,e.x,e.y),this.emit(I.IMAGE_DOWNSCALED),t},n.prototype.downscaleImageIfNecessary=function(){var e=this.image,t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return e;this.emit(I.BEGAN_IMAGE_DOWNSCALING,e);var n=new Image;return n.width=t.x,n.height=t.y,n.src=e.src,this.emit(I.IMAGE_DOWNSCALED),n},n}(S);function F(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var M=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,D=function(e){return M.exec(e).slice(1)};function B(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:"/";if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i.charAt(0))}return(t?"/":"")+(e=F(U(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function P(e){var t=L(e),n="/"===N(e,-1);return(e=F(U(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function L(e){return"/"===e.charAt(0)}var z={extname:function(e){return D(e)[3]},basename:function(e,t){var n=D(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},dirname:function(e){var t=D(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},sep:"/",delimiter:":",relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=B(e).substr(1),t=B(t).substr(1);for(var i=n(e.split("/")),r=n(t.split("/")),o=Math.min(i.length,r.length),a=o,s=0;s<o;s++)if(i[s]!==r[s]){a=s;break}var l=[];for(s=a;s<i.length;s++)l.push("..");return(l=l.concat(r.slice(a))).join("/")},join:function(){var e=Array.prototype.slice.call(arguments,0);return P(U(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},isAbsolute:L,normalize:P,resolve:B};function U(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var N="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},j=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:k.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:k.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:k.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:k.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:k.DARKEN,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:k.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:k.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:k.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:k.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:k.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:k.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:k.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:k.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:k.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:k.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:k.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:k.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],G=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],W=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}},{identifier:"imgly_font_amaticsc",fontFamily:"Amaticsc",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}},{identifier:"imgly_font_bernier_regular",fontFamily:"Bernier",fontWeight:"normal",fontURI:"./fonts/imgly_font_bernier_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}},{identifier:"imgly_font_cheque_regular",fontFamily:"Cheque",fontWeight:"normal",fontURI:"./fonts/imgly_font_cheque_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}},{identifier:"imgly_font_gagalin_regular",fontFamily:"Gagalin",fontWeight:"normal",fontURI:"./fonts/imgly_font_gagalin_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}},{identifier:"imgly_font_hagin_caps_thin",fontFamily:"Hagin Caps",fontWeight:200,fontURI:"./fonts/imgly_font_hagin_caps_thin.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}},{identifier:"imgly_font_intro_inline",fontFamily:"Intro Inline",fontWeight:"normal",fontURI:"./fonts/imgly_font_intro_inline.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}},{identifier:"imgly_font_nexa_script",fontFamily:"Nexa Script",fontWeight:"normal",fontURI:"./fonts/imgly_font_nexa_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}},{identifier:"imgly_font_panton_blackitalic_caps",fontFamily:"Panton",fontWeight:800,fontStyle:"italic",fontURI:"./fonts/imgly_font_panton_blackitalic_caps.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_lightitalic_caps",fontFamily:"Panton",fontWeight:200,fontStyle:"italic",fontURI:"./fonts/imgly_font_panton_lightitalic_caps.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}},{identifier:"imgly_font_perfograma",fontFamily:"Perfograma",fontWeight:"normal",fontURI:"./fonts/imgly_font_perfograma.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}},{identifier:"imgly_font_panton_light_italic_caps",fontFamily:"Panton Caps",fontWeight:"lighter",fontStyle:"italic",fontURI:"./fonts/imgly_font_panton_light_italic_caps.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_italic_caps",fontFamily:"Panton Caps",fontWeight:800,fontStyle:"italic",fontURI:"./fonts/imgly_font_panton_black_italic_caps.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_light_caps",fontFamily:"Panton Caps",fontWeight:"lighter",fontStyle:"normal",fontURI:"./fonts/imgly_font_panton_light_caps.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_caps",fontFamily:"Panton Caps",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_panton_black_caps.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_summer_font_light",fontFamily:"Summer Font",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_summer_font_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}],V=[{identifier:w.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:w.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:w.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:w.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}],H=[{identifier:"basics",name:"Basics",items:[{identifier:b.BRIGHTNESS},{identifier:b.CONTRAST},{identifier:b.SATURATION},{identifier:b.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:b.CLARITY},{identifier:b.SHADOWS},{identifier:b.HIGHLIGHTS},{identifier:b.EXPOSURE},{identifier:b.BLACKS},{identifier:b.WHITES},{identifier:b.TEMPERATURE},{identifier:b.SHARPNESS}]}],q=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],Y=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],X=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],Q=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],Z=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:1.33},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:1.77},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:.75},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:.56}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],J=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_bernier_regular","imgly_font_cheque_regular","imgly_font_gagalin_regular","imgly_font_hagin_caps_thin","imgly_font_intro_inline","imgly_font_lobster","imgly_font_nexa_script","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_panton_blackitalic_caps","imgly_font_panton_lightitalic_caps","imgly_font_perfograma","imgly_font_trash_hand"],K=["imgly_font_abril_fatface_regular","imgly_font_montserrat_light","imgly_font_wolesbro","imgly_font_permanent_marker","imgly_font_panton_light_italic_caps","imgly_font_panton_black_italic_caps","imgly_font_panton_light_caps","imgly_font_panton_black_caps","imgly_font_amberlight","imgly_font_ultra","imgly_font_galano_grotesque_bold","imgly_font_bungee_inline","imgly_font_petit_formal_script","imgly_font_summer_font_light","imgly_font_handycheera_regular","imgly_font_rasa_regular","imgly_font_rasa_500","imgly_font_campton_bold","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy"],$=function(){function e(e){this.assetManager=e,this.injectedFonts={},this.loadedFonts={}}return e.createFontFacesCSS=function(e,t){return e.map((function(e){var n=t(e.fontURI);return'@font-face {\n        font-family: "'+e.fontFamily+"\";\n        src: url('"+n+"') format('"+(e.format||"woff")+"');\n        font-weight: "+(e.fontWeight||"normal")+";\n        font-style: "+(e.fontStyle||"normal")+";\n      }"}))},e.prototype.getFontWithId=function(e){var t=this.assetManager.getFontAsset(e);if(!t)throw new Error("The requested font does not exist as an asset.");return t},e.prototype.isFontLoaded=function(e){return void 0!==this.loadedFonts[e]},e.prototype.injectAllFonts=function(){var e=this.assetManager.getFontAssets();this.injectFonts(e)},e.prototype.loadAllFonts=function(){return i(this,void 0,void 0,(function(){var e;return r(this,(function(t){return e=this.assetManager.getFontAssets(),[2,this.loadFonts(e)]}))}))},e.prototype.loadFontsWithIdentifiers=function(e){return i(this,void 0,void 0,(function(){var t,n=this;return r(this,(function(i){return t=e.map((function(e){return n.getFontWithId(e)})),[2,this.loadFonts(t)]}))}))},e.prototype.loadFonts=function(e){return i(this,void 0,void 0,(function(){var t,n=this;return r(this,(function(i){return this.injectFonts(e),t=new Array,e.forEach((function(e){t.push(n.loadFont(e,!1))})),[2,new Promise((function(e,n){Promise.all(t).then((function(){return e()})).catch((function(e){return n(e)}))}))]}))}))},e.prototype.loadFont=function(e,t){return void 0===t&&(t=!0),i(this,void 0,void 0,(function(){var n=this;return r(this,(function(i){return[2,new Promise((function(i,r){n.isFontLoaded(e.identifier)&&i(),t&&n.injectFonts([e]),new C(e).load().then((function(){n.loadedFonts[e.identifier]=e,i()})).catch((function(e){r(e)}))}))]}))}))},e.prototype.loadFontWithIdentifier=function(e,t){return void 0===t&&(t=!0),i(this,void 0,void 0,(function(){var n;return r(this,(function(i){if(!(n=this.assetManager.getFontAsset(e)))throw new Error("The requested font asset with identifier "+e+" does not exist!");return[2,this.loadFont(n,t)]}))}))},e.prototype.injectFonts=function(e,t){void 0===t&&(t=this.assetManager.getAbsolutePathForCategory("font"));var n=e.filter(O),i=e.filter(E);n.length>0&&this.addGoogleFontLinks(n),i.length>0&&this.addWebFontCSS(i,t)},e.prototype.addGoogleFontLinks=function(e){var t=this,n=e.filter((function(e){return!t.injectedFonts[e.identifier]}));if(0!==n.length){var i=document.createElement("link");i.rel="stylesheet",i.href="https://fonts.googleapis.com/css?family="+n.map((function(e){return e.fontFamily})).join(","),document.getElementsByTagName("head")[0].appendChild(i),e.forEach((function(e){t.injectedFonts[e.identifier]=e}))}},e.prototype.addWebFontCSS=function(t,n){var i=this,r=t.filter((function(e){return!i.injectedFonts[e.identifier]}));if(0!==r.length){var o="\n      /* Injected by PhotoEditorSDK */\n      "+e.createFontFacesCSS(r,n).join("\n")+"\n    ",a=document.createElement("style");a.innerHTML=o,document.head.appendChild(a),t.forEach((function(e){i.injectedFonts[e.identifier]=e}))}},e}(),ee=function(){function e(e){var t=this;this.basePath="assets/",this.getAssets=function(e){switch(e){case"overlay":return t.overlayAssets;case"filter":return t.filterCategories;case"font":return t.fontAssets;case"focus":return t.focusAssets;case"adjustment":return t.adjustmentCategories;case"sticker":return t.stickerCategories;case"textdesign":return t.textDesignAssets;case"frame":return t.frameAssets;case"transform":return t.transformCategories}return[]},this.getAbsolutePath=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=z.join.apply(z,s(e));if(t.basePath.match(/(ftp|http|https):\/\//)){var r=t.basePath.length;return"/"!==t.basePath[r-1]&&(t.basePath=t.basePath+"/"),t.basePath+i}return z.join(t.basePath,i)},this.getAbsolutePathForCategory=function(e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.getAbsolutePath.apply(t,s([e],n))}},this.addCustomStickerAsset=function(e,n,i){e.forEach((function(e){var r=e.thumbnailURI,o=e.name,a=e.sticker,l=e.identifier,u=e.tintMode,c=e.resizeMode,f=t.stickerCategories.find((function(e){return e.identifier===n})),h={identifier:l,name:o,thumbnailURI:r,sticker:a,tintMode:u,resizeMode:c};if(f&&void 0!==f.thumbnail)f.items.push(h);else{var p={identifier:n,name:i,thumbnail:r,items:[h]};t.stickerCategories=s([p],t.stickerCategories)}})),t.stickerAssets=t.stickerCategories.reduce(t.allOptions,[])},this.getPath=function(e,t,n){var i=e.find((function(e){return e.identifier===t}));return i&&(i[n]||i.path)||""},this.isNonExistingFont=function(e){return!W.find((function(t){return t.identifier===e.identifier}))},e&&e.basePath&&(this.basePath=e.basePath);var n=G.reduce(this.allOptions,[]);e&&e.filter?this.filterCategories=this.configuredCategory(G,e.filter,n):this.filterCategories=G,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(e){return void 0!==e.lutURI})),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(e){return void 0!==e.lightColor}));var i=H.reduce(this.allOptions,[]);e&&e.adjustment?this.adjustmentCategories=this.configuredCategory(H,e.adjustment,i):this.adjustmentCategories=H,this.fontAssets=W.reduce(this.allOptions,[]);var r=J.map((function(e){return t.getFontAsset(e)}));if(e&&e.text&&e.text.fonts){var o=e.text.fonts.filter(this.isNonExistingFont);r=e.text.fonts?s(r,o):r,this.fontAssets=e.text.fonts?s(this.fontAssets,o):this.fontAssets}this.textToolFontAssets=r;var a=e&&e.focus&&e.focus.items&&e.focus.items.length?e.focus.items.map((function(e){return V.find((function(t){return t.identifier===e.identifier}))})):V;this.focusAssets=a,e&&e.overlay&&e.overlay.items?this.overlayAssets=this.configuredItem(e.overlay.items,j,j):this.overlayAssets=j,e&&e.frame&&e.frame.items?this.frameAssets=this.configuredItem(e.frame.items,Q,Q):this.frameAssets=Q;var l=q.reduce(this.allOptions,[]);e&&e.sticker?this.stickerCategories=this.configuredCategory(q,e.sticker,l):this.stickerCategories=q,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);var u=Y;e&&"light"===e.theme&&(u=X),this.textDesignAssets=e&&e.textdesign&&e.textdesign.items&&e.textdesign.items.length?e.textdesign.items.map((function(e){return u.find((function(t){return t.identifier===e.identifier}))})):u,this.textDesignToolFontAssets=K.map((function(e){return t.getFontAsset(e)}));var c=Z.reduce(this.allOptions,[]);e&&e.transform?this.transformCategories=this.configuredCategory(Z,e.transform,c):this.transformCategories=Z,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new $(this)}return e.prototype.getFontManager=function(){return this.fontManager},e.prototype.getAssetSource=function(e,t){switch(e){case"filter":if(this.getLUTFilterAsset(t))return this.getAbsolutePath(e,this.getPath(this.lutFilterAssets,t,"lutURI"));break;case"overlay":return this.getAbsolutePath(e,this.getPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getAbsolutePath(e,this.getPath(this.fontAssets,t,"fontURI"));case"sticker":var n=this.stickerAssets.find((function(e){return e.identifier===t}));if(n)return void 0!==n.sticker?n.sticker:this.getAbsolutePath(e,this.getPath(this.stickerAssets,t,"stickerURI"));throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getAbsolutePath(e,"engine",t);case"frame":return this.getAbsolutePath(e,t)}throw new Error("Cannot resolve this type of asset yet")},e.prototype.getDuotoneFilterAsset=function(e){return this.duoToneFilterAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getLUTFilterAsset=function(e){return this.lutFilterAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getOverlayAsset=function(e){return this.overlayAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getStickerAsset=function(e){return this.stickerAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getFontAsset=function(e){return this.fontAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getTextDesignAssets=function(e){return this.textDesignAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getFrameAsset=function(e){return this.frameAssets.filter((function(t){return t.identifier===e}))[0]},e.prototype.getFontAssets=function(){return this.fontAssets},e.prototype.getFontAssetsForText=function(){return this.textToolFontAssets},e.prototype.getFontAssetsForTextDesign=function(){return this.textDesignToolFontAssets},e.prototype.getFrameAssets=function(){return this.frameAssets},e.prototype.allOptions=function(e,t){return t.hasOwnProperty("items")?s(e,t.items):s(e,[t])},e.prototype.configuredCategory=function(e,t,i){var r=this;return t.categories&&t.categories.length?t.categories.map((function(t){var o=e.find((function(e){return e.identifier===t.identifier}));return o?n({},o,t,{items:r.configuredItem(t.items,i,o.items).filter(Boolean)}):n({},t,{items:r.configuredItem(t.items,i,t.items).filter(Boolean)})})):e},e.prototype.configuredItem=function(e,t,i){return e&&e.length?e.map((function(e){var i=t.find((function(t){return t.identifier===e.identifier}));return i?n({},i,e):e})).filter(Boolean):i},e}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var te,ne=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=222)}([function(e,t,n){e.exports={default:n(224),__esModule:!0}},function(e,t,n){e.exports={default:n(234),__esModule:!0}},function(e,t,n){e.exports={default:n(226),__esModule:!0}},function(e,t,n){e.exports={default:n(229),__esModule:!0}},function(e,t,n){e.exports=n(237).default},function(e,t,n){e.exports={default:n(274),__esModule:!0}},function(e,t,n){e.exports={default:n(261),__esModule:!0}},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(332)),_=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,t);var i=y(this,(t.__proto__||h()(t)).call(this,e,_({intensity:{type:p.OptionType.NUMBER,default:1,setter:function(e){return this._stack&&this._stack.setIntensity(e),e}},dirty:{type:p.OptionType.BOOLEAN,default:!0}},n)));return i._stack=new d.a(i._options.intensity),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"render",value:function(e,t,n){var i=this;return this._stack.render(e,t,n).then((function(e){return i.setDirty(!1),e}))}},{key:"setDirtyForRenderer",value:function(e,t){this._stack.setDirtyForRenderer(e,t)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),t}(p.Configurable);v.identifier=null,v.isIdentity=!1,v.displayName=null,v.PrimitivesStack=d.a,t.a=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(334);n.d(t,"Brightness",(function(){return i.a}));var r=n(336);n.d(t,"Contrast",(function(){return r.a}));var o=n(338);n.d(t,"ColorMatrixPrimitive",(function(){return o.a}));var a=n(340);n.d(t,"Desaturation",(function(){return a.a}));var s=n(342);n.d(t,"DuoTone",(function(){return s.a}));var l=n(344);n.d(t,"Gamma",(function(){return l.a}));var u=n(346);n.d(t,"Glow",(function(){return u.a}));var c=n(348);n.d(t,"Gobblin",(function(){return c.a}));var f=n(350);n.d(t,"Grayscale",(function(){return f.a}));var h=n(174);n.d(t,"LookupTable",(function(){return h.a}));var p=n(353);n.d(t,"LookupTableImage",(function(){return p.a}));var d=n(355);n.d(t,"Saturation",(function(){return d.a}));var _=n(357);n.d(t,"SoftColorOverlay",(function(){return _.a}));var g=n(359);n.d(t,"ToneCurve",(function(){return g.a}));var m=n(360);n.d(t,"X400",(function(){return m.a}));var y=n(362);n.d(t,"ThreeDLookupTableImage",(function(){return y.a}))},function(e,t,n){n.d(t,"h",(function(){return p})),n.d(t,"n",(function(){return y})),n.d(t,"k",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return g}));var i=n(236),r=n(479),o=n(24),a=n(90),s=n(72),l=n(31),u=n.n(l);n.d(t,"m",(function(){return i.a})),n.d(t,"c",(function(){return r.a})),n.d(t,"g",(function(){return o.a})),n.d(t,"l",(function(){return a.b})),n.d(t,"f",(function(){return s.a}));var c=u.a.Base64,f=u.a.Color,h=(u.a.Math.ColorMatrix,u.a.EventEmitter),p=(u.a.EXIF,u.a.OptionType,u.a.Promise),d=u.a.Utils,_=u.a.RenderType,g=u.a.ImageFormat,m=u.a,y=(u.a.UniformType,u.a.Math.Vector2);u.a.Math.Rectangle,u.a.Math.Range,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(86)},function(e,t,n){e.exports={default:n(249),__esModule:!0}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return p}));var i=n(24),r=n(66),o=n(154),a=n(155),s=n(45),l=n(67),u=n(32),c=n(156),f=n(40);n.d(t,"b",(function(){return r.a})),n.d(t,"g",(function(){return o.a})),n.d(t,"k",(function(){return s.a})),n.d(t,"h",(function(){return a.a})),n.d(t,"d",(function(){return l.a})),n.d(t,"f",(function(){return i.a})),n.d(t,"i",(function(){return u.a})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return c.a}));var h=2e3,p=20},function(e,t,n){n.d(t,"a",(function(){return y}));var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(140),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e;_(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=g(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._fragmentSource=null,o._inputTextureSizeMap={},o._inputLogicalSizeMap={},o._inputShapeMap={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"requiresFloatTextures",value:function(){return!0}},{key:"setTargetTextureSize",value:function(e){this._targetTextureSize=e}},{key:"setTargetLogicalSize",value:function(e){this._targetSize=e}},{key:"setTextureSizeForInputWithName",value:function(e,t){this._inputTextureSizeMap[t]=e}},{key:"setLogicalSizeForInputWithName",value:function(e,t){this._inputLogicalSizeMap[t]=e}},{key:"getShaderForRenderer",value:function(e){return this._fragmentSource||(this._fragmentSource=this._buildFragmentShader()),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"getShaderForRenderer",this).call(this,e)}},{key:"outputLogicalShape",value:function(){if(!this._options.outputLogicalShape){var e=this._calculateOutputShape();this._options.outputLogicalShape=e}return this._options.outputLogicalShape}},{key:"_applyWebGL",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=o;a||(a=this.getShaderForRenderer(e));var s=e.getContext(),l={},u=e.getCurrentRenderTarget().getProjectionMatrix().toArray();l.u_projMatrix=u,l.output_texRC=this._targetTextureSize,l.output_sizeRC=this._targetSize,l.output_shape=this.outputLogicalShape(),this._options.inputs.forEach((function(e){try{l[e.name+"_texRC"]=i._inputTextureSizeMap[e.name],l[e.name+"_sizeRC"]=i._inputLogicalSizeMap[e.name],l[e.name+"_shape"]=e.logicalShape}catch(t){throw new Error("Missing texture or logical size for input "+e.name+" in filter "+i.constructor.name+".")}}),this),this._updateAdditionalUniforms(a),a.setUniforms(l),a.syncUniforms();var c=t.getBaseTexture(),f=e.getOrCreateGLTexture(c);s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,f),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,c.getGLRepeat(s,"x")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,c.getGLRepeat(s,"y")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,c.getGLFilter(s,"min")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c.getGLFilter(s,"mag")),s.bindFramebuffer(s.FRAMEBUFFER,n._framebuffer),r&&s.clear(s.COLOR_BUFFER_BIT),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)}},{key:"getShaderIdentifier",value:function(){var e=this.outputLogicalShape().length,t=this.getInputs().map((function(e){return e.name+"_"+e.logicalShape.length})).join("");return this.constructor.name+"_"+e+"_"+t+"_"+this._getTensorOperationSource()}},{key:"_updateAdditionalUniforms",value:function(e){}},{key:"_calculateOutputShape",value:function(){return this.getInputs()[0].logicalShape}},{key:"prepareUniforms",value:function(){var e=this;this._uniforms.output_texRC={type:p.UniformType.FLOAT2,value:[0,0]},this._uniforms.output_sizeRC={type:p.UniformType.FLOAT2,value:[0,0]};var t=this._calculateOutputShape();this._uniforms.output_shape={type:2===t.length?p.UniformType.INT2:p.UniformType.INT4,value:t};var n=1,i=[];this.getInputs().forEach((function(t){if(-1!==i.indexOf(t.name))throw new Error("Input names must be unique.");var r=t.name+"_texRC",o=t.name+"_sizeRC",a=t.name+"_shape";switch(e._uniforms[r]={type:p.UniformType.FLOAT2,value:[0,0]},e._uniforms[o]={type:p.UniformType.FLOAT2,value:[0,0]},e._uniforms[a]={type:2===t.logicalShape.length?p.UniformType.INT2:p.UniformType.INT4,value:t.logicalShape},t.type){case y.PREVIOUS:e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:0};break;case y.DATA:e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:n++}}})),this.getInputs().forEach((function(t){t.type===y.INDEX&&(e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:n++})})),delete this._availableUniforms.u_image,delete this._uniforms.u_image}},{key:"_getTensorOperationSource",value:function(){return"\n      void main () {\n        setOutput(0.0);\n      }\n    "}},{key:"_buildFragmentShader",value:function(){var e=this,t=n(468),i=this.outputLogicalShape();return 2===i.length?t+=this._create2DOutputInterfaceSnippet():4===i.length&&(t+=this._create4DOutputInterfaceSnippet()),this._options.inputs.forEach((function(n){t+=e._createInputInterfaceSnippet(n)})),t+=this._createOutputSnippet(),t+=this._getTensorOperationSource()}},{key:"_createOutputSnippet",value:function(){return"\n      void setOutput(float val) {\n        gl_FragColor = vec4(val, 0, 0, 0);\n      }\n    "}},{key:"_create2DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec2 output_shape;\n      ivec2 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n        int r = index / output_shape[1];\n        int c = index - r * output_shape[1];\n\n        return ivec2(r, c);\n      }\n    "}},{key:"_create4DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec4 output_shape;\n      ivec4 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n\n        int stride2 = output_shape[3];\n        int stride1 = output_shape[2] * stride2;\n        int stride0 = output_shape[1] * stride1;\n\n        int r = index / stride0;\n        index -= r * stride0;\n\n        int c = index / stride1;\n        index -= c * stride1;\n\n        int d = index / stride2;\n        int d2 = index - d * stride2;\n\n        return ivec4(r, c, d, d2);\n      }\n    "}},{key:"_createInputInterfaceSnippet",value:function(e){var t="",n=e.name,i=e.logicalShape,r=n+"_texRC",o=n+"_sizeRC",a=n+"_shape";return t+="\n      uniform sampler2D "+n+";\n      uniform vec2 "+r+";\n      uniform vec2 "+o+";\n      uniform "+(2===i.length?"ivec2":"ivec4")+" "+a+";\n    ",t+="\n      float get"+this._capitalize(n)+"Flat(int index) {\n        vec2 uv = UVfrom1D("+r+", "+o+", index);\n        return sampleTexture("+n+", uv);\n      }\n    ",2===i.length?t+="\n        float get"+this._capitalize(n)+"(int row, int col) {\n          vec2 uv = UVfrom2D("+r+", "+o+", "+a+"[1], row, col);\n          return sampleTexture("+n+", uv);\n        }\n      ":4===i.length&&(t+="\n      float get"+this._capitalize(n)+"(int row, int col, int depth, int depth2) {\n        int stride2 = "+a+"[3];\n        int stride1 = "+a+"[2] * stride2;\n        int stride0 = "+a+"[1] * stride1;\n\n        vec2 uv = UVfrom4D("+r+", "+o+", stride0, stride1, stride2, row, col, depth, depth2);\n        return sampleTexture("+n+", uv);\n      }\n\n      float get"+this._capitalize(n)+"(ivec4 coords) {\n        return get"+this._capitalize(n)+"(coords.x, coords.y, coords.z, coords.w);\n      }\n    "),t}},{key:"_capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"_getInputWithName",value:function(e){return p.Utils.Array.find(this._options.inputs,(function(t){return t.name===e}))}}]),t}(p.Engine.Filter),y={PREVIOUS:"previous",INDEX:"index",DATA:"data"};m.prototype.availableOptions={inputs:{type:p.OptionType.ARRAY},outputLogicalShape:{type:p.OptionType.ARRAY},outputTextureDimensions:{type:p.OptionType.ARRAY}},t.b=m},function(e,t,n){var i=n(16),r=n(11),o=n(30),a=n(34),s=n(43),l=function(e,t,n){var u,c,f,h=e&l.F,p=e&l.G,d=e&l.S,_=e&l.P,g=e&l.B,m=e&l.W,y=p?r:r[t]||(r[t]={}),v=y.prototype,b=p?i:d?i[t]:(i[t]||{}).prototype;for(u in p&&(n=t),n)(c=!h&&b&&void 0!==b[u])&&s(y,u)||(f=c?b[u]:n[u],y[u]=p&&"function"!=typeof b[u]?n[u]:g&&c?o(f,i):m&&b[u]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((y.virtual||(y.virtual={}))[u]=f,e&l.R&&v&&!v[u]&&a(v,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){e.exports={default:n(257),__esModule:!0}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(101)("wks"),r=n(83),o=n(16).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),t}(f.Configurable);t.a=_},function(e,t,n){e.exports=!n(42)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){n.d(t,"a",(function(){return a}));var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._seed=void 0===t?e.TimeSeed():t}return o(e,[{key:"seed",value:function(t){this._seed=void 0===t?e.TimeSeed():t}},{key:"next",value:function(){var t=0|this._seed,n=t/e.SEED_DIVIDER|0,i=t%e.SEED_DIVIDER|0;return(t=e.SEED_LOW_MULTIPLY*i-e.SEED_HIGH_MULTIPLY*n)<=0&&(t+=e.MAX),-1===t&&(t=e.MAX-1),this._seed=t,t}},{key:"nextInRange",value:function(e,t){return void 0===t&&(t=e,e=0),e+this.next()%(t-e+1)}},{key:"nextBool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(e+t-1)>=e}},{key:"pickNext",value:function(e){return Array.isArray(e)?e[this.next()%e.length]:null}}],[{key:"TimeSeed",value:function(){return Date.now()}}]),e}();a.MAX=2147483647,a.SEED_DIVIDER=127773,a.SEED_LOW_MULTIPLY=16807,a.SEED_HIGH_MULTIPLY=2836},function(e,t,n){n.d(t,"a",(function(){return h}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(4),l=(n.n(s),r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=s.Math.Rectangle,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;c(this,e),this.top=t,this.left=n,this.bottom=i,this.right=r}return u(e,[{key:"multiply",value:function(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}},{key:"toObject",value:function(){return l({},this)}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];return void 0===t&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}},{key:"clone",value:function(){return new e(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(e){return new f(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}}],[{key:"ZERO",get:function(){return new e(0,0,0,0)}}]),e}()},function(e,t,n){var i=n(28),r=n(136),o=n(95),a=Object.defineProperty;t.f=n(19)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){(function(e){var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(153),l=n.n(s),u=n(32),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],d=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},_=function(){return(!e||e&&e.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},g=function(e,t){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+e+"; color: "+t+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]},m=new(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;h(this,e),this._levels=[].concat(f(i)),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var e,t;d()?((e=console).groupCollapsed.apply(e,arguments),console.trace(),console.groupEnd()):(t=console).trace.apply(t,arguments)}},this._levels.forEach((function(e){var n=e.name;t[n]=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t._log.apply(t,[n,e].concat(r))}}))}return c(e,[{key:"getLevelIndexByName",value:function(e){return u.a.Array.findIndex(this._levels,(function(t){return t.name===e}))}},{key:"getLevelObjectByName",value:function(e){return u.a.Array.find(this._levels,(function(t){return t.name===e}))}},{key:"canLog",value:function(e){var t=this.getLevelIndexByName(e);return!(t<0)&&t>=this._maxLevel}},{key:"setLevel",value:function(e){var t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}},{key:"_log",value:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this.getLevelObjectByName(e);if(o&&this.canLog(e)){o.name;var a,s=o.type,c=o.background,h=o.color,p=i.filter((function(e){return void 0!==e})).map((function(e){return e.toObject?JSON.parse(l()(e.toObject())):e})),m=this._consoleFuncs[s]||console[s]?function(){var e;return(e=console)[s].apply(e,arguments)}:function(){var e;return(e=console).log.apply(e,arguments)},y=p.length,v=g(c,h);if(!_()){var b=p.length;return b<=0?void m("PhotoEditorSDK | "+t+" "):1===b&&"string"==typeof p[0]?void m("PhotoEditorSDK | "+t+" | "+p[0]):void m.apply(void 0,["PhotoEditorSDK | "+t+" | "].concat(f(p)))}y<=0?m.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+t+" %c %c  "].concat(f(v))):1!==y||"string"!=typeof p[0]?d()?((a=console).groupCollapsed.apply(a,["%c  %c PhotoEditorSDK %c  %c "+t+" %c"].concat(f(u.a.Array.init(v)))),m.apply(void 0,f(p)),console.groupEnd()):m.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+t+" %c"].concat(f(u.a.Array.init(v)),f(p))):m.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+p[0]+"  %c  "].concat(f(v)))}}},{key:"image",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=new window.Image,i=function(){var t=n.width,i=n.height;e&&console.log(e),console.log("%c+","\n        font-size: 1px;\n        padding: 0px "+Math.floor(t/2)+"px;\n        line-height: "+i+"px;\n        background: url("+n.src+");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: "+t+"px "+i+"px;")};return n.onload=i,t instanceof window.HTMLCanvasElement?n.src=t.toDataURL():t instanceof window.Image?(n=t,i()):"string"==typeof t?n.src=t:this.log(e,t),n}},{key:"texture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];if(t){var n=t.getBaseTexture(),i=n.getRenderers(),r=u.a.Array.find(i,(function(e){return e&&"WebGL"===e.constructor.type})),o=n.getFrame(),a=o.width,s=o.height;if(r){var l=r.getContext(),c=n.getGLTextureForRenderer(r);this.logGlTexture(l,c,a,s,e)}else m.image(e,n.getSource())}else this.log(e,"texture: null or undefined")}},{key:"logGlTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,r=arguments[4];e.bindTexture(e.TEXTURE_2D,t);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var a=new Uint8Array(n*i*4);e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(o);var s=document.createElement("canvas");s.width=n,s.height=i;var l=s.getContext("2d"),u=l.createImageData(n,i);return u.data.set(a),l.putImageData(u,0,0),m.image(r,s)}}]),e}())("warn");t.a=m}).call(t,n(152))},function(e,t,n){e.exports={default:n(269),__esModule:!0}},function(e,t,n){n.d(t,"a",(function(){return k}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(92)),_=n(21),g=n(78),m=n(52),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){return b(this,t),w(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_calculateLayoutElements",value:function(){var e=this.serializeOptions(),t=e.attributes,n=e.imageInsets,i=e.size,r=(e.width,this.getWords().joined(1)[0]||""),o=t.fontIdentifier,a=new g.a({text:r,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;i.height=s;var l=this._getTextFrame();return[new m.a({text:r,frame:l,font:a})]}}]),t}(d.a);k.prototype.availableOptions=y({},d.a.prototype.availableOptions,{imageInsets:{type:p.OptionType.OBJECT,default:new _.a}})},function(e,t,n){n.d(t,"a",(function(){return b}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(10),c=n.n(u),f=n(79),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){return m(this,t),y(this,(t.__proto__||d()(t)).apply(this,arguments))}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"loadImages",value:(n=h.a.mark((function e(t){var n,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=0;case 2:if(!(i<t.length)){e.next=10;break}return r=t[i],e.next=6,this.addImage(r.path,r.fullPath,r.image);case 6:n.push(r);case 7:i++,e.next=2;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new c.a((function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return c.a.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(s)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"addImage",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",r=this.getImages();return n?(r[e]={fullPath:t,image:n},c.a.resolve({fullPath:t,image:n})):new c.a((function(o,a){(n=new _.Image).onload=function(){r[e]={fullPath:t,image:n},o({fullPath:t,image:n})},n.crossOrigin=_.Utils.getCrossOriginValue(i),n.onerror=a,n.src=t}))}},{key:"getImage",value:function(e){var t=this.getImages()[e];return t?t.image:null}},{key:"getVariation",value:function(e){return this.getFonts()[e]}},{key:"addFont",value:function(e,t){return this.getFonts()[e]=t,t}}]),t}(_.Configurable);v.prototype.availableOptions={images:{type:_.OptionType.OBJECT,default:{}},fonts:{type:_.OptionType.OBJECT,default:{}}};var b=new v},function(e,t,n){var i=n(23);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports={default:n(267),__esModule:!0}},function(e,t,n){var i=n(56);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){
/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
e.exports=n(4),n(320)},function(e,t,n){(function(e){var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(36),l=n.n(s),u=n(37),c=n.n(u),f=n(0),h=n.n(f),p=n(10),d=n.n(p),_=n(39),g=n.n(_),m=n(1),y=n.n(m),v=n(65),b=n(266),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k="function"==typeof c.a&&"symbol"==typeof l.a?function(e){return typeof e}:function(e){return e&&"function"==typeof c.a&&e.constructor===c.a&&e!==c.a.prototype?"symbol":typeof e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function T(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}var R=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return x(t,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"mapRange",value:function(e,t,n){return(e-t.getMin())*n.getLength()/t.getLength()+n.getMin()}},{key:"isPlainObject",value:function(e){if("object"!==(void 0===e?"undefined":k(e))||!e)return!1;if("function"==typeof y.a){var t=y()(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==e}},{key:"values",value:function(e){var t=[];for(var n in e)t.push(e[n]);return t}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}},{key:"isDOMElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":k(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":k(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"isTouchEvent",value:function(e){return-1!==e.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(e,t){var n=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(e,t){var n=e.x/e.y;return n>t.x/t.y?t.clone().set(t.y*n,t.y):t.clone().set(t.x,t.x/n)}},{key:"isExtendable",value:function(e){return null!=e&&("object"===(void 0===e?"undefined":k(e))||"function"==typeof e)}},{key:"defaults",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var l in s)void 0===t[l]&&(t[l]=s[l])}return t}},{key:"deepMerge",value:function(e){for(var n=function e(n,i){if(void 0===i)return e(null,n);if(Array.isArray(i))return[].concat(T(i));if(!t.isPlainObject(i))return i;if(!t.isPlainObject(n))return w({},i);var r=w({},n);return g()(i).forEach((function(t){var o=i[t];void 0!==o&&(r[t]=e(n[t],o))})),r},i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce(n,e)}},{key:"deepDefaults",value:function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=[].concat(i).reverse();return t.deepMerge.apply(t,T(o).concat([e]))}},{key:"deepClone",value:function(e){var n={};for(var i in e)t.isExtendable(e[i])?n[i]=t.deepClone(e[i]):n[i]=e[i];return n}},{key:"getDeepProperty",value:function(e,t){return"string"==typeof t?e[t]:Array.isArray(t)?t.reduce((function(e,t){return e?"function"==typeof t?function(e,t){var n=void 0;try{n=t(e)}catch(e){if(!(e instanceof TypeError))throw e}return n}(e,t):e[t]:null}),e):void 0}},{key:"extend",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var l in s)t[l]=s[l]}return t}},{key:"clone",value:function(e){return this.extend({},e)}},{key:"createBlobURIFromDataURI",value:function(t){var n="undefined"==typeof window?e:window;if(!(n.Blob&&n.URL&&ArrayBuffer&&Uint8Array))return t;for(var i=v.a.decode(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(i.length),a=new Uint8Array(o),s=0;s<i.length;s++)a[s]=i[s];var l=new n.Blob([o],{type:r});return n.URL.createObjectURL(l)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(e,n){var i=n||t.createCanvas();i.width=e.width,i.height=e.height;var r=i.getContext("2d");return r.clearRect(0,0,i.width,i.height),r.drawImage(e,0,0,e.width,e.height),i}},{key:"isPowerOfTwo",value:function(e){return 0==(e.x&e.x-1)&&0==(e.y&e.y-1)}},{key:"nextLowestPOT",value:function(e){for(var t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}},{key:"nextHighestPOT",value:function(e){e--;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"moveArrayItem",value:function(e,t,n){if(n>=e.length)for(var i=n-e.length;1+i--;)e.push(void 0);e.splice(n,0,e.splice(t,1)[0])}},{key:"ensureCanvasDimensions",value:function(e,t){e.width===t.x&&e.height===t.y||(e.width=t.x,e.height=t.y)}},{key:"byteArrayToString",value:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")}},{key:"clamp",value:function(e,t,n){return Math.max(t,Math.min(e,n))}},{key:"wildCardMatch",value:function(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}},{key:"flipObject",value:function(e){var t={};for(var n in e)t[e[n]]=n;return t}},{key:"cloneOptions",value:function(e){var t={};for(var n in e){var i=e[n];Array.isArray(i)?i=i.slice():i.clone&&(i=i.clone()),t[n]=i}return t}},{key:"ISODateString",value:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(e){return e?"none"!==e?e:void 0:"anonymous"}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":k(e))||null===e||"object"!==(void 0===t?"undefined":k(t))||null===t)return!1;var n=g()(e),i=g()(t);if(n.length!==i.length)return!1;for(var r=hasOwnProperty.bind(t),o=0;o<n.length;o++)if(!r(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}},{key:"enableIf",value:function(e,t){return e?t:void 0}},{key:"invariant",value:function(e,t){if(!e)throw new Error(t)}},{key:"executePromises",value:function(e){var t=e.length,n=0,i=[],r=[];return new d.a((function(o,a){var s=function(){++n>=t&&(r.length<=0?o(i):a(r))},l=function(e){i.push(e),s()},u=function(e){r.push(e),s()};e.forEach((function(e){e.then(l).catch(u)}))}))}}]),t}();R.Array=b.a,t.a=R}).call(t,n(64))},function(e,t,n){n.d(t,"a",(function(){return u}));var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=o.Math.Rectangle,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,e),this.width=t,this.height=n}return a(e,[{key:"set",value:function(e,t){this.width=e,this.height=t}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(e,t){return new l(e,t,this.width,this.height)}},{key:"clone",value:function(){return new e(this.width,this.height)}},{key:"scale",value:function(e,t){return void 0===t&&(t=e),this.width*=e,this.height*=t,this}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this}},{key:"fitInWidthWithOther",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return this.copy(e.fitTwoInWidth(t,this,n)[0]),this}}],[{key:"fitTwoInWidth",value:function(t,n,i){var r=n.width*i.height+n.height*i.width,o=i.height*t/r,a=n.width*o,s=n.height*o;return[new e(a,s),new e(t-a,s)]}}]),e}()},function(e,t,n){var i=n(22),r=n(57);e.exports=n(19)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(97),r=n(98);e.exports=function(e){return i(r(e))}},function(e,t,n){e.exports={default:n(238),__esModule:!0}},function(e,t,n){e.exports={default:n(243),__esModule:!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(85),a=n(40),s=n(65),l=n(67),u=n(90),c=n(32),f=n(70),h=n(66),p=n(24),d=n(46),_=n(156),g=n(299),m=n(310);n.d(t,"requestAnimationFrame",(function(){return m.b})),n.d(t,"cancelAnimationFrame",(function(){return m.a})),n.d(t,"Engine",(function(){return o.a})),n.d(t,"EventEmitter",(function(){return l.a})),n.d(t,"Events",(function(){return u.a})),n.d(t,"Utils",(function(){return c.a})),n.d(t,"Configurable",(function(){return f.a})),n.d(t,"Color",(function(){return h.a})),n.d(t,"Constants",(function(){return a})),n.d(t,"Log",(function(){return p.a})),n.d(t,"Promise",(function(){return d.a})),n.d(t,"GLUtils",(function(){return _.a})),n.d(t,"Base64",(function(){return s.a})),n.d(t,"LicenseChecker",(function(){return g.b})),n.d(t,"FreeLicenseChecker",(function(){return g.a}));var y=n(165);n.d(t,"Vector2",(function(){return y.Vector2})),n.d(t,"Vector3",(function(){return y.Vector3})),n.d(t,"Range",(function(){return y.Range})),n.d(t,"Rectangle",(function(){return y.Rectangle})),n.d(t,"Matrix",(function(){return y.Matrix})),n.d(t,"ColorMatrix",(function(){return y.ColorMatrix})),n.d(t,"CubicBezierCurve",(function(){return y.CubicBezierCurve})),void 0===Function.prototype.name&&void 0!==r.a&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/.exec(this.toString());return e&&e.length>1?e[1].trim():""},set:function(e){}})},function(e,t,n){e.exports={default:n(264),__esModule:!0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"RenderType",(function(){return i})),n.d(t,"ImageFormat",(function(){return r})),n.d(t,"OptionType",(function(){return o})),n.d(t,"UniformType",(function(){return a})),n.d(t,"RendererType",(function(){return s}));var i={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},r={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},o={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",INT2:"2i",INT3:"3i",INT4:"4i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},s={WEBGL:"webgl",CANVAS:"canvas"}},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(9),l=n(487),u=n(24),c=n(199),f=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return h(e,[{key:"_initFonts",value:function(){var e,t=this,n=this._options,i=n.fonts,r=n.replaceFonts,o=n.availableVariations;e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();var a=s.c.DEFAULTS.FONTS;e&&(a=r?i:a.concat(i||[]));var f=void 0;a=a.map((function(n){var i=n.fontFamily,r=n.variations;if(e&&o&&(r=r.filter((function(e){return-1!==o.indexOf(e.identifier)}))),0===r.length)return null;var a=new l.a({fontFamily:i});return r=r.map((function(e){var n=new c.a(e);return n.setFontFamily(i),n.setFont(a),e.default&&!f&&(f=n),null==n.getTextMetrics()&&u.a.warn("Missing font metrics for "+n.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),t._variationsByIdentifier[n.getIdentifier()]=n,n})),a.setVariations(r),t._fontsByFontFamily[i]=a,a})).filter((function(e){return e})),f||(f=a[0].getVariations()[0]),this._defaultVariation=f,this._fonts=a}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(e){return this._fontsByFontFamily[e]}},{key:"getVariationByIdentifier",value:function(e){return this._variationsByIdentifier[e]}},{key:"getVariationsByIdentifier",value:function(){return f({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),e}();t.a=p},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(98);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return o(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clamp",value:function(t,n){var i=null!=t,r=null!=n;return t instanceof e||!i||(t=new e(t,t)),n instanceof e||!r||(n=new e(n,n)),i&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y)),r&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(t,n){return t instanceof e?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=void 0===n?t:n),this}},{key:"subtract",value:function(t,n){return t instanceof e?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=void 0===n?t:n),this}},{key:"multiply",value:function(t,n){return t instanceof e?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=void 0===n?t:n),this}},{key:"add",value:function(t,n){return t instanceof e?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=void 0===n?t:n),this}},{key:"dot",value:function(t,n){return t instanceof e?this.x*t.x+this.y*t.y:this.x*t+this.y*(void 0===n?t:n)}},{key:"equals",value:function(t,n){return t instanceof e?t.x===this.x&&t.y===this.y:t===this.x&&n===this.y}},{key:"flip",value:function(){var e=this.x;return this.x=this.y,this.y=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?[this.y,this.x]:[this.x,this.y]}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y)}},{key:"NULL",get:function(){return new e(0,0)}}]),e}();t.a=a},function(e,t,n){(function(e){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(10),l=n.n(s),u=n(0),c=n.n(u),f=n(286),h=n.n(f),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},d=void 0===e?window:e,_=void 0!==l.a?l.a:function(){var e,t,n,i=Object.prototype.toString,r=void 0!==h.a?function(e){return h()(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,i){return c()(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,i){n.add(e,i),t||(t=r(n.drain))}function a(e){var t,n=void 0===e?"undefined":p(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var i,r;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(r=a(i))?r.call(i,n.resolve,n.reject):n.resolve(i)}catch(e){n.reject(e)}}function u(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=a(e))?o((function(){var i=new _(n);try{t.call(e,(function(){u.apply(i,arguments)}),(function(){f.apply(i,arguments)}))}catch(e){f.call(i,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(s,n))}catch(e){f.call(new _(n),e)}}}function f(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function d(e,t,n,i){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then((function(e){n(r,e)}),i)}(r)}function _(e){this.def=e,this.triggered=!1}function g(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new g(this);this.then=function(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&o(s,t),i.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){u.call(t,e)}),(function(e){f.call(t,e)}))}catch(e){f.call(t,e)}}n=function(){var e,n,i;function r(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,o){i=new r(t,o),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var y=e({},"constructor",m,!1);return m.prototype=y,e(y,"__NPO__",0,!1),e(m,"resolve",(function(e){return e&&"object"==(void 0===e?"undefined":p(e))&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(m,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(m,"all",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=e.length,o=Array(r),a=0;d(t,e,(function(e,t){o[e]=t,++a===r&&n(o)}),i)}))})),e(m,"race",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");d(t,e,(function(e,t){n(t)}),i)}))})),m}();d.Promise=d.Promise||_,t.a=_}).call(t,n(64))},function(e,t,n){n.d(t,"a",(function(){return c}));var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(4),l=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.words=[],t&&this.splitIntoWords(t)}return l(e,[{key:"splitIntoWords",value:function(e){return this.words=e.match(/\S+/g)||[],[].concat(u(this.words))}},{key:"get",value:function(){return[].concat(u(this.words))}},{key:"getWord",value:function(e){return this.words[e]}},{key:"set",value:function(e){return this.words=[].concat(u(e)),this}},{key:"slice",value:function(t,n){return e.fromWords(this.words.slice(t,n))}},{key:"getLowerCase",value:function(){return this.words.map((function(e){return e.toLowerCase()}))}},{key:"getUpperCase",value:function(){return this.words.map((function(e){return e.toUpperCase()}))}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce((function(e,t){return e+t.length}),0)}},{key:"joined",value:function(e){var t=this,n=this.size(),i=Math.floor(n/e),r=n%e,o=0,a=0;return s.Utils.Array.range(0,e).map((function(e){o=a;var l=i+(e<r?1:0);return a=Math.min(o+l,n),s.Utils.Array.range(o,a).reduce((function(e,n){return e+(n===o?"":" ")+t.words[n]}),"")}))}}],[{key:"fromWords",value:function(t){var n=new e;return n.words=[].concat(u(t)),n}}]),e}()},function(e,t,n){n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return _})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var i=n(29),r=n.n(i),o=n(25),a=n.n(o),s=n(4),l=(n.n(s),function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),u=s.Math.Rectangle,c=s.Math.Vector2,f=function(e,t,n,i){e.drawImage(t,n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height)},h=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i,e.fillRect(t.x,t.y,t.width,t.height),r&&(e.strokeStyle=n.toRGBA(),e.strokeWith=1,e.strokeRect(t.x,t.y,t.width,t.height)),e.restore()},p=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-over",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e.save(),e.fillStyle=i.toRGBA(),e.globalCompositeOperation=r,n=Math.min(Math.max(n,0),.5*Math.min(t.height,t.width));var a=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;e.beginPath(),e.moveTo(a+n,l),e.arcTo(s,l,s,u,n),e.arcTo(s,u,a,u,n),e.arcTo(a,u,a,l,n),e.arcTo(a,l,s,l,n),e.closePath(),e.fill(),o&&e.stroke(),e.restore()},d=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;e.save(),e.strokeStyle=n.toRGBA(),e.lineWidth=i,e.strokeRect(t.x,t.y,t.width,t.height),e.restore()},_=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";e.save();var r=t.height/2,o=t.y+r,a=t.x+r,s=t.x+t.width;for(e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i;a<s;)e.beginPath(),e.arc(a,o,r,0,2*Math.PI),e.fill(),a+=4*r;e.restore()},g=function(e,t){var n=t.applyToRectangle(e),i=e.x,r=e.y,o=e.width,a=e.height;return{corners:[u.FromDiagonalPoints(new c(0,0),new c(n.x,n.y)),u.FromDiagonalPoints(new c(0,n.y+n.height),new c(n.x,a)),u.FromDiagonalPoints(new c(n.x+n.width,n.y+n.height),new c(o,a)),u.FromDiagonalPoints(new c(n.x+n.width,0),new c(o,n.y))].map((function(e){return e.translate(i,r)})),bars:[u.FromDiagonalPoints(new c(n.x,0),new c(n.x+n.width,n.y)),u.FromDiagonalPoints(new c(0,n.y),new c(n.x,n.y+n.height)),u.FromDiagonalPoints(new c(n.x,n.y+n.height),new c(n.x+n.width,a)),u.FromDiagonalPoints(new c(n.x+n.width,n.y),new c(o,n.y+n.height))].map((function(e){return e.translate(i,r)})),center:n}},m=function(e,t,n,i){var r=t.naturalWidth||t.width,o=t.naturalHeight||t.height,a=g(new u(0,0,r,o),i),c=g(n,i);f(e,t,a.center,c.center),s.Utils.Array.zip(a.corners,c.corners).forEach((function(n){var i=l(n,2),r=i[0],o=i[1];return f(e,t,r,o)})),s.Utils.Array.zip(a.bars,c.bars).forEach((function(n){var i=l(n,2),r=i[0],o=i[1];return f(e,t,r,o)}))},y=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(e.save(),i&&(e.globalAlpha=i.a),e.drawImage(t,n.x,n.y,n.width,n.height),i&&(e.globalAlpha=1),i){var o=i.clone();o.a=1,h(e,n,o,r)}e.restore()}},function(e,t,n){var i=n(137),r=n(102);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(239)(!0);n(104)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t){e.exports={}},function(e,t,n){n.d(t,"a",(function(){return h}));var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.n(u);var h=function(e){function t(){return c(this,t),f(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.Configurable);h.prototype.availableOptions={text:{type:u.OptionType.STRING,default:""},frame:{type:u.OptionType.OBJECT,default:null},font:{type:u.OptionType.OBJECT,default:null}}},function(e,t,n){n.d(t,"a",(function(){return E}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(76)),m=n(47),y=n(80),v=n(127),b=n(27),w=n(20),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){function t(){var e;R(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=C(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._rowType=y.a.Box,o._alignmentRandomizer=new w.a(0),o._isMaskedRandomizer=new w.a(0),o._seedPool.push(o._alignmentRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),x(t,[{key:"getImagePaths",value:function(){return[y.a.Box.getImagePath()]}},{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toLowerCase()}},{key:"_modifiedLines",value:function(e){var t=new m.a;return t.set([e.reduce((function(e,t){return e+(""===e?"":"\n")+t.joined(1)[0]}),"")]),[t]}},{key:"_layoutRows",value:function(e,n){var i=T(t.prototype.__proto__||d()(t.prototype),"_layoutRows",this).call(this,e,n),r=i[0];if(r&&this.getSquareLayout()){var o=r.getSize();o.height=o.width}return i}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||t.ValidAlignments)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this.getAlignment(),o=this._rowType,a=b.a.getImage(o.getImagePath());i.setAlignment(r);var s=new v.a({words:e,width:n,attributes:i,image:a,imageInsets:o.insetsForWidth(n),capInsets:o.getCapInsets(),backgroundColor:_.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===y.a.Box&&(s.serverImageSmoothingFix=!0);var l=s.getSize();return this.getSquareLayout()?l.height=l.width:l.height=Math.max(l.height,l.width*o.getMinimumHeightRatio()),s}}]),t}(g.a);E.defaultFontIdentifiers=["imgly_font_galano_grotesque_bold"],E.Alignment={Left:"left",Center:"center",Right:"right"},E.ValidAlignments=[E.Alignment.Left,E.Alignment.Center,E.Alignment.Right],E.identifier="imgly_text_design_masked",E.prototype.availableOptions=k({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:E.defaultFontIdentifiers},squareLayout:{type:_.OptionType.BOOLEAN,default:!0}})},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getSizeOfLogicalShape",value:function(e){for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}},{key:"getTextureDimensionsForLogicalShape",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,i=e.getSizeOfLogicalShape(t);if(t.length<=1&&i<=n)return[i,1];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];for(var r=Math.floor(Math.sqrt(i));r>1;--r)if(i%r==0)return[r,i/r];return[1,i]}},{key:"isSameShape",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}]),e}();t.a=a},function(e,t,n){var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(0),l=n.n(s),u=n(504),c=n.n(u),f=n(39),h=n.n(f),p=n(9),d=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,e),this._ui=t,this._options=n,this._defaultLayouts=p.j.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}return _(e,[{key:"_init",value:function(){var e=this._options.availableLayouts,t=d({},this._defaultLayouts,this._legacyLayouts);this._layouts=h()(t).map((function(e){return{identifier:t[e].identifier,layout:t[e]}})),e&&(e.push.apply(e,g(c()(this._legacyLayouts).map((function(e){return e.identifier})))),this._layouts=this._layouts.filter((function(t){return e.indexOf(t.identifier)>=0})))}},{key:"getLayoutByIdentifier",value:function(e){var t=p.k.Array.find(this._layouts,(function(t){return t.identifier===e}));return t&&t.layout}},{key:"getLayouts",value:function(){return[].concat(g(this._layouts))}},{key:"getDefaultLayout",value:function(){return this.getLayouts()[0]}}]),e}();t.a=y},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var i=n(22).f,r=n(43),o=n(17)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){n(241);for(var i=n(16),r=n(34),o=n(51),a=n(17)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[a]&&r(f,a,u),o[u]=o.Array}},function(e,t,n){var i=n(30),r=n(145),o=n(146),a=n(28),s=n(82),l=n(111),u={},c={};(t=e.exports=function(e,t,n,f,h){var p,d,_,g,m=h?function(){return e}:l(e),y=i(n,f,t?2:1),v=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(p=s(e.length);p>v;v++)if((g=t?y(a(d=e[v])[0],d[1]):y(e[v]))===u||g===c)return g}else for(_=m.call(e);!(d=_.next()).done;)if((g=r(_,y,d.value,t))===u||g===c)return g}).BREAK=u,t.RETURN=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={encode:function(e){var t="",n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=0;do{a=(n=e[c++])>>2,s=(3&n)<<4|(r=e[c++])>>4,l=(15&r)<<2|(o=e[c++])>>6,u=63&o,isNaN(r)?l=u=64:isNaN(o)&&(u=64),t=t+i.charAt(a)+i.charAt(s)+i.charAt(l)+i.charAt(u),n=r=o="",a=s=l=u=""}while(c<e.length);return t},decode:function(e){var t=void 0,n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=0,u=[];if(/[^A-Za-z0-9+/=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");e=e.replace(/[^A-Za-z0-9+/=]/g,"");do{t=i.indexOf(e.charAt(l++))<<2|(o=i.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(a=i.indexOf(e.charAt(l++)))>>2,r=(3&a)<<6|(s=i.indexOf(e.charAt(l++))),u.push(t),64!==a&&u.push(n),64!==s&&u.push(r),t=n=r="",o=a=s=""}while(l<e.length);return u}};t.a=r},function(e,t,n){var i=n(29),r=n.n(i),o=n(25),a=n.n(o),s=n(0),l=n.n(s),u=function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return c(e,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=e,this.g=t,this.b=n,this.a=i,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var e,t=Math.max(this.r,this.g,this.b),n=Math.min(this.r,this.g,this.b),i=void 0,r=t,o=t-n;if(e=0===t?0:o/t,t===n)i=0;else{switch(t){case this.r:i=(this.g-this.b)/o,this.g<this.b&&(i+=6);break;case this.g:i=(this.b-this.r)/o+2;break;case this.b:i=(this.r-this.g)/o+4}i/=6}return[i,e,r]}},{key:"fromHSV",value:function(t,n,i){return this.copy(e.fromHSV(t,n,i)),this}},{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}},{key:"minus",value:function(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}},{key:"divideScalar",value:function(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}},{key:"clamp",value:function(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}},{key:"mix",value:function(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"equals",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"_componentToHex",value:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],l=o[2],u=Math.floor(6*t),c=6*t-u,f=i*(1-n),h=i*(1-c*n),p=i*(1-(1-c)*n);switch(u%6){case 0:a=i,s=p,l=f;break;case 1:a=h,s=i,l=f;break;case 2:a=f,s=i,l=p;break;case 3:a=f,s=h,l=i;break;case 4:a=p,s=f,l=i;break;case 5:a=i,s=f,l=h}return new e(a,s,l,r)}},{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2],t[3])}},{key:"fromHex",value:function(t){var n=t.match(/[0-9A-fa-f]{1,2}/g),i=u(n,3),r=i[0],o=i[1],a=i[2];return new e(parseInt(r,16)/255,parseInt(o,16)/255,parseInt(a,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new e(0,0,0,0)}},{key:"WHITE",get:function(){return new e(1,1,1,1)}},{key:"BLACK",get:function(){return new e(0,0,0,1)}},{key:"RED",get:function(){return new e(1,0,0,1)}},{key:"BLUE",get:function(){return new e(0,0,1,1)}},{key:"GREEN",get:function(){return new e(0,1,0,1)}}]),e}();t.a=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(24),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._maxListeners=12,this._events={},this._pipeDestinations=[]}return a(e,[{key:"pipeEvents",value:function(e){this._pipeDestinations.push(e)}},{key:"unpipeEvents",value:function(e){var t=this._pipeDestinations.indexOf(e);-1!==t&&this._pipeDestinations.splice(t,1)}},{key:"on",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if("function"!=typeof t)throw new TypeError;var n=this._events[e]||(this._events[e]=[]);return-1!==n.indexOf(t)||(n.push(t),this._maxListeners&&n.length>this._maxListeners&&(o.a.warn("EventEmitter","Possible memory leak detected, added "+n.length+" `"+e+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace())),this}},{key:"once",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");var n=this;return this.on(e,(function i(){n.off(e,i),t.apply(null,arguments)}))}},{key:"off",value:function(e){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[e]=null,this;var t=arguments.length<=1?void 0:arguments[1];if("function"!=typeof t)throw new TypeError;var n=this._events[e];if(!n||!n.length)return this;var i=n.indexOf(t);return-1===i||n.splice(i,1),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(void 0===e)throw new Error("Invalid event type: `"+e+"`");this._pipeDestinations.forEach((function(t){t.emit.apply(t,[e].concat(n))}));var r=this._events[e];return!(!r||!r.length||(r.slice(0).forEach((function(e){return e.apply(null,n)})),0))}},{key:"setMaxListeners",value:function(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}}]),e}();t.a=s},function(e,t,n){var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this));return n.id=t.id++,n._onSourceLoaded=n._onSourceLoaded.bind(n),n._renderers=[],n._glTextures={},n._source=e,n._dirty=!0,n._glUnit=0,n._mipMapping=!1,n._magFilter=t.DefaultMagFilter,n._minFilter=t.DefaultMinFilter,n._repeatX=t.ClampToEdge,n._repeatY=t.ClampToEdge,n._pixelRatio=1,n._loaded=!1,n._frame=new p.h(0,0,100,100),e&&n._loadSource(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"resizeTo",value:function(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var e=this._source,t=e.complete,n="Canvas"===e.constructor.name||e.tagName&&"CANVAS"===e.tagName.toUpperCase();if(t||n)return this._onSourceLoaded();e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var e=new p.k(this._source.width,this._source.height);p.i.isPowerOfTwo(e)?(p.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=t.TrilinearFilter,this._mipMapping=!0):(this._minFilter=t.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new p.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(this._renderers))}},{key:"getGLFilter",value:function(e,t){switch(t){case"min":return this.constructor.getGLFilter(e,this._minFilter);case"mag":return this.constructor.getGLFilter(e,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(e){this._loaded=e}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(e){this._source=e}},{key:"getGLTextureForRenderer",value:function(e){return this._glTextures[e.id]}},{key:"setGLTextureForRenderer",value:function(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getDimensions",value:function(){return new p.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(e){this._glUnit=e}},{key:"setMinFilter",value:function(e){this._minFilter=e}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(e){this._magFilter=e}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(e){this._repeatX=e}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(e){this._repeatY=e}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(e,n){switch("x"===n?this.getRepeatX():this.getRepeatY()){case t.ClampToEdge:return e.CLAMP_TO_EDGE;case t.Repeat:return e.REPEAT;case t.MirroredRepeat:return e.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(e){this._dirty=e}},{key:"disposeGLTextures",value:function(){var e=this;this._renderers.forEach((function(t){e.disposeGLTexturesForRenderer(t)}))}},{key:"disposeGLTexturesForRenderer",value:function(e){this._glTextures[e.id]&&(e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(e){this._mipMapping=e}},{key:"dispose",value:function(){this.disposeGLTextures(),this._source=void 0}}],[{key:"getGLFilter",value:function(e,n){switch(n){case t.LinearFilter:return e.LINEAR;case t.NearestFilter:return e.NEAREST;case t.BilinearFilter:return e.LINEAR_MIPMAP_NEAREST;case t.TrilinearFilter:return e.LINEAR_MIPMAP_LINEAR}}}]),t}(p.d);_.NearestFilter=0,_.LinearFilter=1,_.BilinearFilter=2,_.TrilinearFilter=3,_.DefaultMagFilter=_.NearestFilter,_.DefaultMinFilter=_.LinearFilter,_.ClampToEdge=0,_.Repeat=1,_.MirroredRepeat=2,_.id=0,t.a=_},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=n(70),_=n(117),g=n(116),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=p.c.OptionType,k=p.c.UniformType,x=p.c.RendererType,T=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=g.a.defaultUniforms,this._attributes=g.a.defaultAttributes,this._vertexSource=g.a.defaultVertexSource,this._fragmentSource=g.a.defaultFragmentSource,this._initUniforms(),y(t.prototype.__proto__||h()(t.prototype),"_initOptions",this).call(this,e)}},{key:"_initUniforms",value:function(){for(var e in this._uniforms={},this._availableUniforms){var t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(var n in this.availableOptions){var i=this.availableOptions[n];i.uniformType?this._uniforms["u_"+n]={type:i.uniformType,value:i.default||null}:p.f.trace(this.constructor.name,"Option `"+n+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n,i);var r=n,o=this.availableOptions[e];if(o.uniformType){var a="u_"+e;switch(o.type){case w.COLOR:o.uniformType===k.FLOAT4?r=n.toGLColor():o.uniformType===k.FLOAT3&&(r=n.toRGBGLColor());break;case w.VECTOR2:r=[n.x,n.y];break;case w.COLOR_MATRIX:r=[n.a,n.b,n.c,n.d,n.f,n.g,n.h,n.i,n.k,n.l,n.m,n.n,n.p,n.q,n.r,n.s];var s=[n.e,n.j,n.o,n.t];this._uniforms[a+"_vec"]={value:s,type:k.FLOAT4}}this.setUniform(a,r)}}},{key:"setUniform",value:function(e,t){this._uniforms[e].value=t}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this._uniforms[n].value=e[n],t&&this.syncUniform(n)}},{key:"syncUniform",value:function(e){this._shaders.forEach((function(t){t.syncUniform(e)}))}},{key:"syncUniforms",value:function(){this._shaders.forEach((function(e){e.syncUniforms()}))}},{key:"getShaderForRenderer",value:function(e){var t=e.getContext(),n=this._shaders[t.id];return n||(n=new _.a(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t.id]=n),n}},{key:"apply",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.isOfType(x.WEBGL)?this._applyWebGL(e,t,n,i):e.isOfType(x.CANVAS)&&this._applyCanvas(e,t,n,i)}},{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=this.getShaderForRenderer(e);e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=n.getContext();p.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),r.clearRect(0,0,i.width,i.height),r.drawImage(i,0,0)}},{key:"dispose",value:function(){this._shaders.forEach((function(e){return e.dispose()})),this._shaders=[]}}]),t}(d.a);t.a=T},function(e,t,n){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(6),l=n.n(s),u=n(0),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(39),g=n.n(_),m=n(1),y=n.n(m),v=n(46),b=n(24),w=n(67),k=n(45),x=n(66),T=n(32),R=n(89),C=n(164),E=n(40),O="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},I=l.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function A(e,t,n){return t in e?c()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F(this,t);var i=M(this,(t.__proto__||y()(t)).call(this));return i.availableOptions=i.availableOptions||{},i.availableOptions=T.a.extend(i.availableOptions,n),i._onConfigurableUpdate=i._onConfigurableUpdate.bind(i),i._initOptions(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),S(t,[{key:"_buildConfigError",value:function(e){var t="";return this.constructor.name&&(t=this.constructor.name+": "),t+=e,new Error(t)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var e=this;return new v.a((function(t,n){for(var i in e.availableOptions)if(e.availableOptions[i].required&&void 0===e._options[i])return n(e._buildConfigError("Option `"+i+"` is required."));t()}))}},{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var n=void 0,i=void 0,r=void 0,o=this;for(n in this.availableOptions){if(r=n.charAt(0).toUpperCase()+n.slice(1),i=this.availableOptions[n],-1===[E.OptionType.STRING,E.OptionType.NUMBER,E.OptionType.BOOLEAN,E.OptionType.OBJECT,E.OptionType.VECTOR2,E.OptionType.COLOR,E.OptionType.CONFIGURABLE,E.OptionType.COLOR_MATRIX,E.OptionType.ARRAY,E.OptionType.IMAGE,E.OptionType.FUNCTION,E.OptionType.ALL].indexOf(i.type))throw this._buildConfigError("Unknown option type: `"+i.type+"`");var a=function(e,t){o["set"+r]=function(t,n,i){o.setOption(e,t,n,i)},o["get"+r]=function(){return o.getOption(e)}};if(a(n,i),i.type===E.OptionType.CONFIGURABLE&&(this._options[n]=new t(void 0,i.structure||{}),this._options[n].on("update",this._onConfigurableUpdate)),!(n in e)||void 0===e[n])if(void 0!==i.default){var s=i.default;"function"==typeof i.default&&(s=i.default()),this["set"+r](s,!1,!0)}else i.type!==E.OptionType.CONFIGURABLE&&(this._options[n]=void 0)}for(n in e){if(void 0===this.availableOptions[n])throw new Error("Invalid option: "+n);void 0!==e[n]&&this["set"+(r=n.charAt(0).toUpperCase()+n.slice(1))](e[n],!1,!0)}}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in e)this.setOption(n,e[n],!1);this._onOptionsChange(),t&&this.emit("update",this,e)}},{key:"getOption",value:function(e){return this._options[e]}},{key:"hasOption",value:function(e){return!!this.availableOptions[e]}},{key:"getOptionDefault",value:function(e){var t=this.availableOptions[e];if(!t)throw new Error("Invalid option: "+e);return t.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var e={};for(var t in this.availableOptions){var n=this.availableOptions[t].default;void 0!==n&&(e[t]=n)}return e}},{key:"getOptions",value:function(){return I({},this._options)}},{key:"equals",value:function(e){var t=e.getOptions();return this.optionsEqual(t)}},{key:"optionsEqual",value:function(e){for(var t in e){var n=e[t];if(!this._optionEquals(t,n))return!1}return!0}},{key:"_optionEquals",value:function(e,t){if(void 0===this.availableOptions[e])throw new Error("Invalid option: "+e);var n=this.availableOptions[e].type,i=this._options[e];if(i===t)return!0;if(void 0===t||void 0===i)return!1;switch(n){case E.OptionType.OBJECT:return"function"==typeof i.optionsEqual?i.optionsEqual(t._options):i===t;case E.OptionType.STRING:case E.OptionType.NUMBER:case E.OptionType.BOOLEAN:case E.OptionType.FUNCTION:case"*":return i===t;case E.OptionType.VECTOR2:return i.equals(t);case E.OptionType.COLOR:case E.OptionType.COLOR_MATRIX:return t.equals(i);case E.OptionType.CONFIGURABLE:return i.optionsEqual(t);case E.OptionType.ARRAY:return this._arrayOptionEquals(e,t);case E.OptionType.IMAGE:return i.src===t.src}}},{key:"_arrayOptionEquals",value:function(e,n){var i=this._options[e];if(n.length!==i.length)return!1;for(var r=!0,o=0;o<i.length;o++){var a=i[o],s=n[o];if(a instanceof t){if(void 0===s||!a.optionsEqual(s)){r=!1;break}}else if(s!==a){r=!1;break}}return r}},{key:"serializeOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={};return t.forEach((function(t){if(void 0===e.availableOptions[t])return b.a.warn("Trying to serialize a key that does not exist: "+t);!1!==e.availableOptions[t].serializable&&(i[t]=e.serializeOption(t,n))})),i}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[e],i=n.type,r=this._options[e];if(!r)return r;if(!1===n.serializable)throw new Error("Option `"+e+"` is not serializable.");switch(i){case E.OptionType.STRING:case E.OptionType.NUMBER:case E.OptionType.BOOLEAN:case E.OptionType.OBJECT:case E.OptionType.FUNCTION:case E.OptionType.ALL:return r;case E.OptionType.VECTOR2:return t?r.toObject():r.clone();case E.OptionType.COLOR:case E.OptionType.COLOR_MATRIX:return t?r.toArray():r.clone();case E.OptionType.CONFIGURABLE:return r.serializeOptions(void 0,t);case E.OptionType.ARRAY:return r.slice(0);case E.OptionType.IMAGE:return t?r.src:r}}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.availableOptions[e];if(!o)throw new Error("Invalid option: "+e);if(void 0!==o.setter&&(n=o.setter.call(this,n,r)),void 0!==o.validation&&o.validation(n),null==n){if(o.required)throw this._buildConfigError("Option `"+e+"` is required.");this._options[e]=n}else switch(o.type){case E.OptionType.STRING:if((void 0===n?"undefined":O(n))!==E.OptionType.STRING)throw this._buildConfigError("Option `"+e+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(n))throw this._buildConfigError("Invalid value for `"+e+"` (valid values are: "+o.available.join(", ")+")");this._options[e]=n;break;case E.OptionType.NUMBER:if((void 0===n?"undefined":O(n))!==E.OptionType.NUMBER)throw this._buildConfigError("Option `"+e+"` has to be a number.");this._options[e]=n;break;case E.OptionType.BOOLEAN:if((void 0===n?"undefined":O(n))!==E.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+e+"` has to be a boolean.");this._options[e]=n;break;case E.OptionType.VECTOR2:if(!(n instanceof k.a||"object"===(void 0===n?"undefined":O(n))&&"x"in n&&"y"in n))throw this._buildConfigError("Option `"+e+"` has to be an instance of Vector2 or an Object holding x and y values.");n instanceof k.a?this._options[e]=n.clone():this._options[e]=k.a.fromObject(n);break;case E.OptionType.COLOR:if(!(n instanceof x.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of Color.");this._options[e]=n;break;case E.OptionType.COLOR_MATRIX:if(!(n instanceof C.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of ColorMatrix.");this._options[e]=n.clone();break;case E.OptionType.FUNCTION:if("function"!=typeof n)throw this._buildConfigError("Option `"+e+"` has to be a function.");this._options[e]=n;break;case E.OptionType.OBJECT:case"*":this._options[e]=n;break;case E.OptionType.IMAGE:if("string"==typeof n){var s=new R.a;s.crossOrigin=T.a.getCrossOriginValue(o.crossOrigin),s.src=n,this._options[e]=s}else{if(!(n instanceof R.a||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw this._buildConfigError("Option `"+e+"` has to be an Image, Canvas or String.");this._options[e]=n}break;case E.OptionType.CONFIGURABLE:n instanceof t?this._options[e]=n:this._options[e].set(n);break;case E.OptionType.ARRAY:if(!(n instanceof Array))throw this._buildConfigError("Option `"+e+"` has to be an Array.");this._options[e]=n.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}i&&(this._onOptionsChange(),this.emit("update",this,A({},e,n)))}},{key:"_onConfigurableUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["update"].concat(t))}},{key:"hasChanges",value:function(){var e=this.getDefaultOptions();return!this.optionsEqual(e)}}]),t}(w.a);t.a=D},function(e,t,n){(function(e){var i=n(0),r=n.n(i),o=n(46),a=n(302),s=n.n(a),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="undefined"!=typeof window?window:e,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._parsedUrl=s.a.parse(this._url,!0)}return l(e,[{key:"_isJSONPRequest",value:function(){var e=this._parsedUrl.query;for(var t in e)if("?"===e[t])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var e=this;return new o.a((function(t,n){var i=void 0;u.XDomainRequest?((i=new u.XDomainRequest).onload=function(){var e=JSON.parse(i.responseText);t(e)},i.onerror=function(e){n(e)},i.open("GET",e._url,!0),i.send()):u.XMLHttpRequest&&((i=new XMLHttpRequest).onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var r=JSON.parse(i.responseText);t(r)}else n(new Error("HTTP Status "+i.status))},i.open("GET",e._url,!0),i.send())}))}},{key:"_loadJSONP",value:function(){var e=this,t=!1,n=!1,i="pesdk"+Math.round(99999999999999*Math.random());return new o.a((function(r,o){var a=e._createJSONPNode(i);u[i]=function(i){e._removeJSONPNode(a),t||(n=!0,r(i))},u.setTimeout((function(){n||(e._removeJSONPNode(a),t=!0,o(new Error("Timeout of 5 seconds exceeded.")))}),5e3)}))}},{key:"_createJSONPNode",value:function(e){var t=this._buildJSONPUrl(e),n=document.querySelector("head"),i=document.createElement("script");return i.src=t,n.appendChild(i),i}},{key:"_removeJSONPNode",value:function(e){e.parentNode.removeChild(e)}},{key:"_buildJSONPUrl",value:function(e){var t=this._parsedUrl.query,n=null;for(var i in t)if("?"===t[i]){n=i;break}return delete this._parsedUrl.search,t[n]=e,s.a.format(this._parsedUrl)}}]),e}();t.a=c}).call(t,n(64))},function(e,t,n){var i=n(29),r=n.n(i),o=n(25),a=n.n(o),s=n(10),l=n.n(s),u=function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.a={load:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"},i=function(){return e.substr(0,5),l.a.resolve([e,e])};return i().then((function(e){var i=u(e,2),r=i[0],o=i[1];return t._createAndLoadImage(r,o,n)}))},loadImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return this._loadWithoutExif(e,t)},_loadWithoutExif:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new l.a((function(n,i){var r=new window.Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(){i(new Error("Failed to load image at "+e))})),t.cors&&(r.crossOrigin=t.value),r.src=e}))},_createAndLoadImage:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new l.a((function(e,r){var o=n._loadWithoutExif(t,i).then((function(t){return e(t)})),a=new l.a((function(e,r){n._loadAsDataURL(t,i).then((function(t){var n=new window.Image;n.addEventListener("load",(function(){e(n)})),n.src=t,n.rawSource=t})).catch((function(t){o.then((function(t){return e(t)}))}))}));return n._stringEndsWith(t,".svg")?o.then((function(t){return e(t)})):a.then((function(t){return e(t)}))}))},_stringEndsWith:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t},_loadAsDataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new l.a((function(n,i){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){e.error&&i(e.error),n(e.result)},e.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.withCredentials=t.cors&&"use-credentials"===t.value,r.send()}))},loadXHR:function(e,t){return new l.a((function(n,i){var r=void 0;window.XDomainRequest?(r=new window.XDomainRequest,t&&r.overrideMimeType(t),r.onload=function(){n(r)},r.onerror=function(e){i(e)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,t&&r.overrideMimeType(t),r.onreadystatechange=function(e){4===r.readyState&&(200===r.status?n(r):i(new Error("HTTP Status "+r.status)))}),r.open("GET",e,!0),r.send()}))}}},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(91)),p=n.n(h),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=f.Math.Vector2,y=function(e){function t(){var e;_(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=g(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(330),a._lastBlurRadius=null,a._lastDimensions=new m(0,0),a._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=t.getCanvas(),a=t.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var l=a.getImageData(0,0,o.width,o.height),u=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,f=this._options.delta,h=30,p=0;p<o.width;p++)for(var d=0;d<o.height;d++){var _=p+d*o.width,g=4*_,y=0,v=0,b=0,w=0,k=0;r&&(c=r(p/o.width,d/o.height));for(var x=this._random(p,1-d/o.height),T=-h;T<=h;T++){var R=(T+x-.5)/h,C=1-Math.abs(R),E=f.x*R*c,O=f.y*R*c,I=Math.max(Math.min(p+E,o.width-1),0),S=Math.max(Math.min(d+O,o.height-1),0),A=4*(Math.round(S)*o.width+Math.round(I)),F=l.data[A+3],M=F*l.data[A],D=F*l.data[A+1],B=F*l.data[A+2];y+=M*C,v+=D*C,b+=B*C,w+=F*C,k+=C}y/=k,v/=k,b/=k,w/=k,u.data[g]=y/w,u.data[g+1]=v/w,u.data[g+2]=b/w,u.data[g+3]=w}s.putImageData(u,0,0),this._lastDimensions.copy(new m(o.width,o.height))}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n,i){var r=t.getDimensions(),o=!this._lastDimensions.equals(r);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),n.setPixelRatio(t.getPixelRatio()),n.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(r)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new m(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);p.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_random",value:function(e,t){var n=12.9898*e+78.233*t,i=n-3.14*Math.floor(n/3.14),r=43758.5453*Math.sin(i);return r-Math.floor(r)}}]),t}(f.Engine.Filter);y.prototype.availableOptions={blurRadius:{type:f.OptionType.NUMBER,default:30,uniformType:f.UniformType.FLOAT},delta:{type:f.OptionType.VECTOR2,default:new m(1,1),uniformType:f.UniformType.FLOAT2},texSize:{type:f.OptionType.VECTOR2,default:new m(100,100),uniformType:f.UniformType.FLOAT2},blurQuality:{type:f.OptionType.STRING,default:"low"}},t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=p.Math.Vector2,g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,n));return i._operation=e,i._dirtiness={},i.id=p.Utils.getUUID(),i._renderTextures={},i._identitySprite=new p.Engine.Sprite,i._sprite=new p.Engine.Sprite,i._hitTestSprite=new p.Engine.Sprite,i._renderers=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"applyScale",value:function(e){}},{key:"applyRotation",value:function(e){var t=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=e,this.setRotation(n*Math.PI/180);var i=(e+360)%360*Math.PI/180,r=Math.cos(i),o=Math.sin(i),a=this._options.position.clone().subtract(.5).multiply(t),s=new _(a.x*r-a.y*o,a.x*o+a.y*r).divide(t.clone().flip());this.setPosition(new _(.5,.5).add(s))}},{key:"applyFlip",value:function(e){var t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y}this.setPosition(t)}},{key:"applyTransform",value:function(e){var t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(e){if(this._renderTexture)this._renderTexture.clear();else{var t=this._getTexture();this._renderTextureContainer=new p.Engine.Container,this._renderTextureSprite=new p.Engine.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(p.RendererType.WEBGL)}},{key:"_optionEquals",value:function(e,n){return"type"===e||function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"update",value:function(e,t){this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t)}},{key:"_updateSprite",value:function(e){var t=this;[this._sprite,this._hitTestSprite].forEach((function(n){if(n.getTexture()){n.setAnchor(t._options.anchor),n.setPosition(t._options.position.clone().multiply(e)),void 0!==t._options.alpha&&n.setAlpha(t._options.alpha);var i=t._options.dimensions;i&&(i=i.clone().multiply(t._operation.getSDK().getTextureScale()),n.setWidth(i.x),n.setHeight(i.y)),n.updateTransform();var r=n.getTexture().getFrame(),o=new _(r.width,r.height);n.setPivot(t._options.pivot.clone().multiply(o)),n.setRotation(t._options.rotation),n.updateTransform()}}))}},{key:"_renderToRenderTexture",value:function(e){var t=this._getTexture().getDimensions(),n=this._getRenderTexture(e.getRenderer(),t),i=t.clone();if(this._options.smoothDownscaling&&(i.x=p.Utils.nextHighestPOT(i.x),i.y=p.Utils.nextHighestPOT(i.y)),this._renderTexture.resizeTo(i),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var r=i.clone().subtract(t.x,t.y).divide(i),o=n.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-r.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-r.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}},{key:"_getRenderTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _(100,100);return this._renderTextures[e.id]||(this._renderTextures[e.id]=new p.Engine.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}},{key:"dispose",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}]),t}(p.Configurable);t.a=g},function(e,t,n){n.d(t,"a",(function(){return F}));var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),l=n.n(s),u=n(5),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(76)),v=n(429),b=n(123),w=n(26),k=n(124),x=n(77),T=n(27),R=n(20),C=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var F=function(e){function t(){var e;S(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=A(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o.getImagePaths=function(){var e=o.getBanderoles();return e&&e.map((function(e){return e.getImagePath()}))||[]},o.onImagesLoaded=function(){var e=o.getBanderoles();e&&e.forEach((function(e){var t=T.a.getImage(e.getImagePath());t?e.setImage(t):m.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+e.getImagePath()+"'")}))},o._rowTypeLessThan3WordsRandomizer=new R.a(0),o._rowTypeMoreThan3WordsRandomizer=new R.a(0),o._banderolesRandomizer=new R.a(0),o._seedPool=[].concat(I(o._seedPool),[o._rowTypeLessThan3WordsRandomizer,o._rowTypeMoreThan3WordsRandomizer,o._banderolesRandomizer]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),E(t,[{key:"_modifiedText",value:function(e){return O(t.prototype.__proto__||g()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"generateLayoutData",value:function(e,n){return this._options.hasMaskedText=!1,O(t.prototype.__proto__||g()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_randomLayoutRow",value:function(e,t,n,i){if(e.size()<3){var r=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(e,n,i,r)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new v.a({words:e,width:n,attributes:i,orientation:v.a.Orientations.Left});case 1:return new v.a({words:e,width:n,attributes:i,orientation:v.a.Orientations.Right});case 2:return this._layoutRow(e,n,i,!0);case 3:return new w.a({words:e,width:n,attributes:i});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: "+o+".")}}},{key:"_layoutRow",value:function(e,t,n,i){if(this.getHasMaskedText()&&(i=!1),i){this.setHasMaskedText(!0);var r=this._banderolesRandomizer.pickNext(this.getBanderoles()),o=new k.a({words:e,width:t,attributes:new x.a({alignment:"left",fontIdentifier:r.getFontIdentifier()}),image:r.getImage(),imageInsets:r.insetsForWidth(t),capInsets:null,backgroundColor:m.Color.WHITE});return r.getNeedsImageSmoothingFix()&&(o.serverImageSmoothingFix=!0),o}return new w.a({words:e,width:t,attributes:n})}}]),t}(y.a);F.defaultFontIdentifiers=["imgly_font_campton_bold"],F.identifier="imgly_text_design_blocks",F.defaultBanderoles=[b.a.Rectangle,b.a.Small],F.prototype.availableOptions=C({},y.a.prototype.availableOptions,{fontIdentifiers:{type:m.OptionType.ARRAY,default:F.defaultFontIdentifiers},relativeLineSpacing:{type:m.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:m.OptionType.BOOLEAN,default:!1},banderoles:{type:m.OptionType.ARRAY,default:F.defaultBanderoles}})},function(e,t,n){n.d(t,"a",(function(){return T}));var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(423),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(20)),m=n(21),y=n(47),v=n(426),b=n(77),w=n(26),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}var T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,e));return n._relativeInsets=new m.a,n._background=null,n._fontRandomizer=new g.a(0),n._lineNumberRandomizer=new g.a(0),n._wordsPerLineRandomizer=new g.a(0),n._seedPool=[n._fontRandomizer,n._lineNumberRandomizer,n._wordsPerLineRandomizer],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"seed",value:function(e){this._seedPool.forEach((function(t){return t.seed(e)}))}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(e){return e.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(e){return Math.ceil(Math.sqrt(e.size()))}},{key:"_maximumNumberOfLines",value:function(e){return e.size()}},{key:"_calculatedNumberOfLines",value:function(e){var t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(t,this._maximumNumberOfLines(e))}},{key:"_randomizedNumberOfWordsPerLine",value:function(e,t){var n=this;if(e>t)return _.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;var i=_.Utils.Array.repeat(1,e);return _.Utils.Array.range(e,t).forEach((function(t){var r=n._wordsPerLineRandomizer.nextInRange(0,e-1);i[r]+=1})),i}},{key:"_textLines",value:function(e){var t=new y.a(e),n=this._calculatedNumberOfLines(t);return this._randomizedNumberOfWordsPerLine(n,t.size()).reduce((function(e,n){return{index:e.index+n,lines:[].concat(x(e.lines),[t.slice(e.index,Math.min(e.index+n,t.size()))])}}),{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(e){var t=this._textLines(e),n=0;do{if((n=_.Utils.Array.findIndex(t,(function(e){return e.countNumberOfCharacters()<3})))>=0){var i=t[n-1],r=t[n+1];(i?i.countNumberOfCharacters():h.a)<(r?r.countNumberOfCharacters():h.a)&&i?(i.words=[].concat(x(i.words),x(t[n].words)),t=[].concat(x(t.slice(0,n)),x(t.slice(n+1)))):r&&(r.words=[].concat(x(t[n].words),x(r.words)),t=[].concat(x(t.slice(0,n)),x(t.slice(n+1))))}}while(n>-1&&t.length>1);return t}},{key:"_modifiedLines",value:function(e){return e}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(e,t){var n=this._modifiedText(e),i=this._modifiedLines(this._validTextLines(n)),r=t*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(i,r);return new v.a({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:i,rows:o,width:t})}},{key:"_layoutRows",value:function(e,t){var n=this;return e.map((function(e,i){return n._randomLayoutRow(e,i,t,new b.a({fontIdentifier:n._fontForRow(i,e)})).layout()}))}},{key:"_randomLayoutRow",value:function(e,t,n,i){return new w.a({words:e,width:n,attributes:i})}}]),t}(_.Configurable);T.defaultFontIdentifiers=[],T.identifier="textdesign",T.prototype.availableOptions={fontIdentifiers:{type:_.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:_.OptionType.NUMBER,default:0}}},function(e,t,n){n.d(t,"a",(function(){return h}));var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.n(u);var h=function(e){function t(){return c(this,t),f(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.Configurable);h.prototype.availableOptions={tintColor:{type:u.OptionType.COLOR,default:u.Color.BLACK},textColor:{type:u.OptionType.COLOR,default:u.Color.BLACK},alignment:{type:u.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:u.OptionType.NUMBER,default:1},fontIdentifier:{type:u.OptionType.STRING,default:"imgly_font_open_sans_bold"}}},function(e,t,n){n.d(t,"a",(function(){return w}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(33)),m=n(27),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,e)),i=m.a.getVariation(n.getFontIdentifier());return i||_.Log.warn("TextDesignFont: Unable to find font '"+n._fontIdentifier+"'"),n.set({fontVariation:i}),n._metrics=null,n._canvas=_.Utils.createCanvas(),n._context=n._canvas.getContext("2d"),n._isDirty=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=m.a.getVariation(this.getFontIdentifier());return e||_.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(e),e}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=y({},this._options,e),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=y({},this._options,t),i=n.fontSize,r=n.fontVariation,o=n.lineHeight,a=n.textColor,s=n.alignment,l=r.serializeOptions(),u=l.fontStyle,c=l.fontWeight,f=l.fontFamily;e.font=u+" "+c+" "+i+"px / "+o+" "+f,e.fillStyle=a,e.textBaseline="alphabetic",e.textAlign=s||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),y({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new g.a(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(e){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var t=e/this._context.measureText(this.getText()).width,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(e){if(this.getFontVariation()){var t=e/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._canvas,n=this._context,i=y({},this._options,e),r=this.getText();this._applyTextOptions(n,i);var o=Math.ceil(n.measureText(r).width),a=Math.floor(o+2*i.fontSize),s=Math.floor(3*i.fontSize);t.width=a,t.height=s;var l=Math.floor(i.fontSize),u=Math.floor(.6*s);this._applyTextOptions(n,i),n.fillText(r,l,u);var c=n.getImageData(0,0,t.width,t.height).data,f=C(c,a,s,u,this._options.excludeAccents),h=R(c,a,s,u,this._options.excludeAccents),p=o,d=f+h;return this._metrics={width:p,height:d,ascender:f,descender:h},this._isDirty=!1,y({},this._metrics)}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(e,i),e.fillText(this.getText(),t,n+this._metrics.ascender),r&&(I(e,t,n,this._metrics.width,this._metrics.height),O(e,n+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}}]),t}(_.Configurable),k=function(e,t,n,i){var r=n*(4*i)+4*t;return{r:e[r],g:e[r+1],b:e[r+2],a:e[r+3]}},x=function(e){return e.a<=254},T=function(e,t,n){for(var i=!0,r=0;r<n;r++){var o=k(e,r,t,n);if(!x(o)){i=!1;break}}return i},R=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i+1;a<n;a++)if(T(e,a,t)){if(r)break}else o=a-i+1;return o},C=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i-1;a>=0;a--)if(T(e,a,t)){if(r)break}else o=i-a;return o},E=function(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke()},O=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";e.save(),e.strokeStyle=r,E(e,n,t,i,t),e.restore()},I=function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";e.save(),e.strokeStyle=o,e.strokeRect(t,n,i,r),e.restore()};w.prototype.availableOptions={text:{type:_.OptionType.STRING,default:""},fontIdentifier:{type:_.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:_.OptionType.OBJECT,default:null},lineHeight:{type:_.OptionType.NUMBER,default:1},fontSize:{type:_.OptionType.NUMBER,default:22},textColor:{type:_.OptionType.STRING,default:"black"},strokeStyle:{type:_.OptionType.STRING,default:"black"},outlineWidth:{type:_.OptionType.NUMBER,default:0},textBaseline:{type:_.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:_.OptionType.BOOLEAN,default:!1}}},function(e,t,n){e.exports=n(427)},function(e,t,n){n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(21)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){return d(this,t),_(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"insetsForWidth",value:function(e){return this.getRelativeInsets().clone().scale(e)}}]),t}(f.Configurable);g.prototype.availableOptions={imagePath:{type:f.OptionType.STRING,default:""},minimumHeightRatio:{type:f.OptionType.NUMBER,default:0},sizeToFitContent:{type:f.OptionType.BOOLEAN,default:!0},capInsets:{type:f.OptionType.OBJECT,default:new h.a},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a}},g.Box=new g({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new h.a(.1,.1,.1,.1)}),g.Badge1=new g({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new h.a(.3,.18,.2,.18)}),g.Badge2=new g({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new h.a(.3,.18,.2,.18)}),g.Badge3=new g({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new h.a(.3,.18,.2,.18)}),g.Badge4=new g({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new h.a(.3,.18,.2,.18)}),g.SpeechBubble1=new g({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new h.a(.04,.07,.12,.07),capInsets:new h.a(57,171,123,51)}),g.SpeechBubble2=new g({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new h.a(.04,.07,.12,.07),capInsets:new h.a(6,105,87,15)}),g.SpeechBubble3=new g({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new h.a(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),g.SpeechBubble4=new g({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new h.a(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),g.SpeechBubble5=new g({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new h.a(.114892823,.27,.15984926,.27)}),g.Watercolor1=new g({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new h.a(.2,.25,.2,.25)}),g.Watercolor2=new g({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new h.a(.08,.25,.3,.25)}),g.Watercolor3=new g({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new h.a(.1,.2,.15,.2)})},function(e,t,n){var i=n(28),r=n(231),o=n(102),a=n(100)("IE_PROTO"),s=function(){},l=function(){var e,t=n(94)("iframe"),i=o.length;for(t.style.display="none",n(138).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(99),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(59),r=n(17)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var i=n(256),r=n(273),o=n(115),a=n(119),s=n(118),l=n(162),u=n(68),c=n(163),f=n(282),h=n(88),p=n(87),d=n(283),_=n(285),g=n(117),m=n(69),y=n(289),v=n(161),b={WebGLRenderer:r.a,CanvasRenderer:i.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:l.a,BaseTexture:u.a,Texture:c.a,RenderTexture:f.a,WebGLRenderTarget:h.a,CanvasRenderTarget:p.a,Sprite:d.a,Shaders:_.a,Shader:g.a,Filter:m.a,Filters:y,PixelArrayImage:v.a,autoDetectRenderer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.isSupported()?new r.a(e,t,n):new i.a(e,t,n)}};t.a=b},function(e,t,n){(function(t){(function(){var n,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-r)/1e6},i=t.hrtime,r=(n=function(){var e;return 1e9*(e=i())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(t,n(152))},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=n(68),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=t,this._height=n,this._pixelRatio=i,this._baseTexture=new a.a,this._canvas=r||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return s(e,[{key:"_createCanvas",value:function(){return o.i.createCanvas()}},{key:"clear",value:function(){var e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getDimensions",value:function(){return new o.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null,this._baseTexture.dispose()}}]),e}();t.a=l},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=n(68),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(t,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this._renderer=t,this._gl=t.getContext(),this._width=n,this._height=i,this._frame=null,this._pixelRatio=r,this._projectionMatrix=new o.g,this._mipMapping=!1,this._baseTexture=new a.a;var u=this._baseTexture.getFrame();u.width=n,u.height=i,this._baseTexture.setPixelRatio(r),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return s(e,[{key:"resizeTo",value:function(e){this._width=0|e.x,this._height=0|e.y,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var e=a.a.DefaultMinFilter;return this._mipMapping&&(e=a.a.TrilinearFilter),e}},{key:"_getMagFilter",value:function(){return a.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var e=this._gl,t=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);var i=new o.k(this._width,this._height);o.i.isPowerOfTwo(i)?(o.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.b.TRANSPARENT,t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var e=this._projectionMatrix;e.reset();var t=this._frame||new o.h(0,0,this._width,this._height),n=t.x,i=t.y;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-n*e.a,e.ty=1-i*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-n*e.a,e.ty=-1-i*e.d)}},{key:"_initFrameBuffer",value:function(){var e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new o.k(this._width,this._height)),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}]),e}();t.a=u},function(e,t,n){var i;i=window.Image,t.a=i},function(e,t,n){n.d(t,"a",(function(){return r}));var i=n(298),r={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};t.b={DEFAULTS:{ART_FILTERS:i.a,FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(e,t,n){
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e.exports={stackBlurCanvasRGBA:function(e,t,n,a,s,l){if(!(isNaN(l)||l<1)){l|=0;var u,c,f,h,p,d,_,g,m,y,v,b,w,k,x,T,R,C,E,O,I,S,A,F,M,D=e.data,B=l+l+1,P=a-1,L=s-1,z=l+1,U=z*(z+1)/2,N=new o,j=N;for(f=1;f<B;f++)j=j.next=new o,f==z&&(M=j);j.next=N;var G=null,W=null;_=d=0;var V=i[l],H=r[l];for(c=0;c<s;c++){for(T=R=C=E=g=m=y=v=0,b=z*(O=D[d]),w=z*(I=D[d+1]),k=z*(S=D[d+2]),x=z*(A=D[d+3]),g+=U*O,m+=U*I,y+=U*S,v+=U*A,j=N,f=0;f<z;f++)j.r=O,j.g=I,j.b=S,j.a=A,j=j.next;for(f=1;f<z;f++)h=d+((P<f?P:f)<<2),g+=(j.r=O=D[h])*(F=z-f),m+=(j.g=I=D[h+1])*F,y+=(j.b=S=D[h+2])*F,v+=(j.a=A=D[h+3])*F,T+=O,R+=I,C+=S,E+=A,j=j.next;for(G=N,W=M,u=0;u<a;u++)D[d+3]=A=v*V>>H,0!==A?(A=255/A,D[d]=(g*V>>H)*A,D[d+1]=(m*V>>H)*A,D[d+2]=(y*V>>H)*A):D[d]=D[d+1]=D[d+2]=0,g-=b,m-=w,y-=k,v-=x,b-=G.r,w-=G.g,k-=G.b,x-=G.a,h=_+((h=u+l+1)<P?h:P)<<2,g+=T+=G.r=D[h],m+=R+=G.g=D[h+1],y+=C+=G.b=D[h+2],v+=E+=G.a=D[h+3],G=G.next,b+=O=W.r,w+=I=W.g,k+=S=W.b,x+=A=W.a,T-=O,R-=I,C-=S,E-=A,W=W.next,d+=4;_+=a}for(u=0;u<a;u++){for(R=C=E=T=m=y=v=g=0,b=z*(O=D[d=u<<2]),w=z*(I=D[d+1]),k=z*(S=D[d+2]),x=z*(A=D[d+3]),g+=U*O,m+=U*I,y+=U*S,v+=U*A,j=N,f=0;f<z;f++)j.r=O,j.g=I,j.b=S,j.a=A,j=j.next;for(p=a,f=1;f<=l;f++)d=p+u<<2,g+=(j.r=O=D[d])*(F=z-f),m+=(j.g=I=D[d+1])*F,y+=(j.b=S=D[d+2])*F,v+=(j.a=A=D[d+3])*F,T+=O,R+=I,C+=S,E+=A,j=j.next,f<L&&(p+=a);for(d=u,G=N,W=M,c=0;c<s;c++)D[3+(h=d<<2)]=A=v*V>>H,A>0?(A=255/A,D[h]=g*V>>H,D[h+1]=m*V>>H,D[h+2]=y*V>>H):D[h]=D[h+1]=D[h+2]=0,g-=b,m-=w,y-=k,v-=x,b-=G.r,w-=G.g,k-=G.b,x-=G.a,h=u+((h=c+z)<L?h:L)*a<<2,g+=T+=G.r=D[h],m+=R+=G.g=D[h+1],y+=C+=G.b=D[h+2],v+=E+=G.a=D[h+3],G=G.next,b+=O=W.r,w+=I=W.g,k+=S=W.b,x+=A=W.a,T-=O,R-=I,C-=S,E-=A,W=W.next,d+=a}}}}},function(e,t,n){n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(33)),p=n(77),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=f.Math.Rectangle,g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,e));return n.setSize(new h.a(n.getWidth(),0)),n.serverImageSmoothingFix=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_getFrame",value:function(){var e=this.getSize();return new _(0,0,e.width,e.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(e){return e.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){f.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(e){return f.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(e,t){return e.getFrame().clone()}},{key:"willRender",value:function(e){}},{key:"didRender",value:function(e){}},{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach((function(n){var i=n.serializeOptions(),r=(i.text,i.frame),o=i.font,a=t.getAttributes();o.draw(e,r.x,r.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})})),e.restore()}}]),t}(f.Configurable);g.prototype.availableOptions={words:{type:f.OptionType.OBJECT,default:null},width:{type:f.OptionType.NUMBER,default:100},attributes:{type:f.OptionType.CONFIGURABLE,default:new p.a},shearingAngle:{type:f.OptionType.NUMBER,default:0},elements:{type:f.OptionType.ARRAY,default:[]},size:{type:f.OptionType.OBJECT,default:null}}},function(e,t,n){var i,r=n(0),o=n.n(r);function a(e,t,n){return t in e?o()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(9).j.Engine.Filters.OverlayFilter;t.a=(a(i={},s.BLEND_MODES.NORMAL,"normal"),a(i,s.BLEND_MODES.OVERLAY,"overlay"),a(i,s.BLEND_MODES.HARD_LIGHT,"hard light"),a(i,s.BLEND_MODES.SOFT_LIGHT,"soft light"),a(i,s.BLEND_MODES.MULTIPLY,"multiply"),a(i,s.BLEND_MODES.DARKEN,"darken"),a(i,s.BLEND_MODES.LIGHTEN,"lighten"),a(i,s.BLEND_MODES.SCREEN,"screen"),a(i,s.BLEND_MODES.COLOR_BURN,"color burn"),i)},function(e,t,n){var i=n(23),r=n(16).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(23);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(58),r=n(57),o=n(35),a=n(95),s=n(43),l=n(136),u=Object.getOwnPropertyDescriptor;t.f=n(19)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(59);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(101)("keys"),r=n(83);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(11),r=n(16),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(60)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(14),r=n(11),o=n(42);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var i=n(60),r=n(14),o=n(141),a=n(34),s=n(51),l=n(240),u=n(61),c=n(139),f=n(17)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,d,_,g,m){l(n,t,d);var y,v,b,w=function(e){if(!h&&e in R)return R[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",x="values"==_,T=!1,R=e.prototype,C=R[f]||R["@@iterator"]||_&&R[_],E=C||w(_),O=_?x?w("entries"):E:void 0,I="Array"==t&&R.entries||C;if(I&&(b=c(I.call(new e)))!==Object.prototype&&b.next&&(u(b,k,!0),i||"function"==typeof b[f]||a(b,f,p)),x&&C&&"values"!==C.name&&(T=!0,E=function(){return C.call(this)}),i&&!m||!h&&!T&&R[f]||a(R,f,E),s[t]=E,s[k]=p,_)if(y={values:x?E:w("values"),keys:g?E:w("keys"),entries:O},m)for(v in y)v in R||o(R,v,y[v]);else r(r.P+r.F*(h||T),t,y);return y}},function(e,t,n){t.f=n(17)},function(e,t,n){var i=n(83)("meta"),r=n(23),o=n(43),a=n(22).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(42)((function(){return l(Object.preventExtensions({}))})),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&f.NEED&&l(e)&&!o(e,i)&&c(e),e}}},function(e,t,n){var i=n(16),r=n(11),o=n(60),a=n(105),s=n(22).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(84),r=n(17)("iterator"),o=n(51);e.exports=n(11).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i,r,o,a=n(30),s=n(251),l=n(138),u=n(94),c=n(16),f=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,_=c.Dispatch,g=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){y.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete m[e]},"process"==n(59)(f)?i=function(e){f.nextTick(a(y,e,1))}:_&&_.now?i=function(e){_.now(a(y,e,1))}:d?(o=(r=new d).port2,r.port1.onmessage=v,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",v,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){var i=n(56);function r(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(34);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=n(87),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight())}return s(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach((function(t){return t.resizeTo(e)}))}},{key:"pushFilters",value:function(e,t){var n=e.getBounds();this._currentFrame=n;var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),this._filterStack.push({renderTarget:i,filters:t}),i.clear()}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget;return 1===t.length?(t[0].apply(this._renderer,n,i),this._textures.push(n)):this._applyFilters(t,n,i),t}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0),a=e[e.length-1];e.forEach((function(e,t){if(e===a)e.apply(i._renderer,r,n);else{e.apply(i._renderer,r,o);var s=r;r=o,o=s}})),this._textures.push(r),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._textures.pop();return t||(t=new a.a(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"dispose",value:function(){}}]),e}();t.a=l},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(12),c=n(117),f=u.c.UniformType,h=function(e){function t(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=n||t.defaultVertexSource,i=i||t.defaultFragmentSource,function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||l()(t)).call(this,e,n,i,t.defaultUniforms,t.defaultAttributes))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);h.defaultVertexSource=n(277),h.defaultFragmentSource=n(278);var p=new u.g;h.defaultUniforms={u_image:{type:f.SAMPLER2D,value:0},u_projMatrix:{type:f.MAT3,value:p.toArray()}},h.defaultAttributes=["a_position","a_texCoord","a_color"],t.a=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(39),a=n.n(o),s=n(12),l=n(40),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=s.f,f=s.i,h=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._vertexSource=n,this._fragmentSource=i,this._uniforms=r||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return u(e,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(e,t){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,e),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,s.j,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,s.j,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,s.j,16)}},{key:"syncUniforms",value:function(){var e=this;a()(this._uniforms).forEach((function(t){e.syncUniform(t)}))}},{key:"syncUniform",value:function(e){var t=this._renderer.getContext(),n=this._uniforms[e],i=this._uniformLocations[e];switch(n.type){case l.UniformType.SAMPLER2D:t.uniform1i(i,n.value);break;case l.UniformType.INT:case l.UniformType.INT1:t.uniform1i(i,n.value);break;case l.UniformType.INT2:t.uniform2i(i,n.value[0],n.value[1]);break;case l.UniformType.INT3:t.uniform3i(i,n.value[0],n.value[1],n.value[2]);break;case l.UniformType.INT4:t.uniform4i(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case l.UniformType.FLOAT:case l.UniformType.FLOAT1:t.uniform1f(i,n.value);break;case l.UniformType.FLOAT2:t.uniform2f(i,n.value[0],n.value[1]);break;case l.UniformType.FLOAT3:t.uniform3f(i,n.value[0],n.value[1],n.value[2]);break;case l.UniformType.FLOAT4:t.uniform4f(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case l.UniformType.FLOAT_VECTOR2:t.uniform2fv(i,n.value);break;case l.UniformType.MAT3:case l.UniformType.MAT3FV:t.uniformMatrix3fv(i,!1,n.value);break;case l.UniformType.MAT4:t.uniformMatrix4fv(i,!1,n.value);break;default:c.warn(this.constructor.name,"Unknown uniform type: "+n.type)}}},{key:"_cacheAttributeLocations",value:function(){var e=this,t=this._renderer.getContext();this._attributes.forEach((function(n){e._attributeLocations[n]=t.getAttribLocation(e._program,n)}))}},{key:"_cacheUniformLocations",value:function(){var e=this,t=this._renderer.getContext();a()(this._uniforms).forEach((function(n){e._uniformLocations[n]=t.getUniformLocation(e._program,n)}))}},{key:"_addPrecisionToSource",value:function(e){var t=this._renderer.getMaxFloatPrecision(),n="mediump";return f.isMobile()&&"highp"===t&&(n="highp"),"precision "+n+" float;\n"+e}},{key:"_compile",value:function(){var e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;var n=this._addPrecisionToSource(this._fragmentSource),i=this._compileShader(e.FRAGMENT_SHADER,n);this._fragmentShader=i;var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,i),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))this._program=r;else{var o=e.getProgramInfoLog(r);e.isContextLost()&&(o="WebGL context lost"),e.deleteProgram(r),c.error(this.constructor.name,"WebGL program linking error: "+o)}}},{key:"_compileShader",value:function(e,t){var n=this._renderer.getContext(),i=n.createShader(e);if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var r=n.getShaderInfoLog(i);n.isContextLost()&&(r="WebGL context lost"),n.deleteShader(i),c.error(this.constructor.name,"WebGL shader compilation error: "+r)}return i}},{key:"setUniform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t,n&&this.syncUniform(e)}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this._uniforms[n].value=e[n],t&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),e}();t.a=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._position=new o.k(0,0),this._scale=new o.k(1,1),this._pivot=new o.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new o.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new o.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new o.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new o.h(0,0,0,0)}return a(e,[{key:"renderWebGL",value:function(e){o.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(e){o.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var e=this._parent?this._parent.getWorldTransform():o.g.IDENTITY,t=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),t.a=this._cosRotation*this._scale.x,t.b=this._sinRotation*this._scale.x,t.c=-this._sinRotation*this._scale.y,t.d=this._cosRotation*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(e){this._shaders.push(e)}},{key:"removeShader",value:function(e){var t=this._shaders.indexOf(e);return-1!==t&&(this._shaders.splice(t,1),!0)}},{key:"removeShaderAt",value:function(e){return!!this._shaders[e]&&(this._shaders.splice(e,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(e,t){e instanceof o.k?this._position.copy(e):this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(e,t){e instanceof o.k?this._scale.copy(e):this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(e,t){e instanceof o.k?this._pivot.copy(e):this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(e){this._alpha=e}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){this._parent=e}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(e){this._filterRectangle.copy(e)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(e){this._tint=e}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=n(88),s=n(160),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=o.c.RendererType,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return l(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach((function(t){return t.resizeTo(e)}))}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._renderTargets.pop();return t||(t=new a.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),t.setFrame(this._currentFrame),e&&t.clear(),t}},{key:"pushFilters",value:function(e,t){var n=e.getBounds();this._currentFrame=n;var i=e.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),r.clear(),this._filterStack.push({renderTarget:r,filters:t})}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,n.getFrame());var r=t[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var l=r.getAttributeLocations();return s.vertexAttribPointer(l.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(l.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(l.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===t.length?(t[0].apply(this._renderer,n,i),this._renderTargets.push(n)):this._applyFilters(t,n,i),t}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=e[e.length-1];e.forEach((function(e,t){if(e===a)e.apply(i._renderer,r,n,!0);else{e.apply(i._renderer,r,o,!0);var s=r;r=o,o=s}})),this._renderTargets.push(r),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(u.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new s.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach((function(e){e.dispose()}))}}]),e}();t.a=c},function(e,t,n){var i=n(0),r=n.n(i),o=n(65),a=n(121),s=n(32),l=n(122),u=n(315),c=n(316),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();s.a.invariant;
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
var h=l.a.MARKERS,p=new RegExp("^data:image/jpeg;base64,","i"),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new a.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new c.a(this._getMarkerBuffer(h.EXIF)),this._jfifData=new u.a(this._getMarkerBuffer(h.JFIF))}return f(e,[{key:"restoreSegmentsInArray",value:function(e){return e=this.restoreExifTagsToImageData(e),this.restoreJfifSegmentToImageData(e)}},{key:"restoreSegments",value:function(t){var n=e.fromDataURL(t);return n=this.restoreSegmentsInArray(n),e.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(e){if(!this._exifData.isValid())return e;var t=this._sliceIntoSegments(e)[1][0],n=e.slice(0,t),i=e.slice(t),r=n.concat(this._exifData.getBuffer());return r=r.concat(i)}},{key:"restoreJfifSegmentToImageData",value:function(e){if(!this._jfifData.isValid())return e;var t=this._sliceIntoSegments(e),n=this._findSegment(h.JFIF,t);if(!n)return e;var i=n[0],r=n[1],o=e.slice(0,i),a=e.slice(i,r),s=e.slice(r),l=new u.a(a);return l.setDensityX(this._jfifData.getDensityX()),l.setDensityY(this._jfifData.getDensityY()),l.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(t){var n=e.fromDataURL(t),i=this.restoreExifTagsToImageData(n);return e.toDataURL(i)}},{key:"restoreJfifSegment",value:function(t){if(!this._jfifData.isValid())return t;var n=e.fromDataURL(t),i=this.restoreJfifSegmentToImageData(n);return e.toDataURL(i)}},{key:"setOrientation",value:function(e){return this._exifData.setOrientation(e)}},{key:"_findSegment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<t.length;n++){var i=t[n][0],r=t[n][1];this._stream.setHead(i);var o=this._stream.peekInt16();if(o===e)return[i,r]}return!1}},{key:"_getLastSegment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return e[e.length-1]}},{key:"_getMarkerBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(e,t);if(n){var i=n[0],r=n[1];return this._buf.slice(i,r)}return!1}},{key:"_sliceIntoSegments",value:function(e){for(var t=new a.a(e),n=[];t.getHead()<e.length;){var i=t.readInt16();if(i!==h.SOI){if(i===h.SOS)break;if(!(i>=65280&&i<=65535))throw new Error("Invalid marker: 0x"+i.toString(16));var r=t.readInt16(),o=t.getHead()+r-2;n.push([t.getHead()-4,o]),t.setHead(o)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(e){return"data:image/jpeg;base64,"+o.a.encode(e)}},{key:"fromDataURL",value:function(e){var t=e.replace("data:image/jpeg;base64,","");return o.a.decode(t)}},{key:"isJPEG",value:function(e){return p.test(e)}},{key:"bufferIsJPEG",value:function(e){return 255===e[0]&&216===e[1]&&255===e[2]}},{key:"fromBase64String",value:function(t){var n=t.replace("data:image/jpeg;base64,","");return new e(o.a.decode(n))}}]),e}();t.a=d},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=0,this._buf=t}return o(e,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1];return e?(n<<8)+t:(t<<8)+n}},{key:"peekInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2];return e?(i<<16)+(n<<8)+t:(t<<16)+(n<<8)+i}},{key:"peekInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2],r=this._buf[this._head+3];return e?(r<<32)+(i<<16)+(n<<8)+t:(t<<32)+(n<<16)+(i<<8)+r}},{key:"writeInt8",value:function(e){this._buf[this._head]=255&e}},{key:"writeInt16",value:function(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=255&e}},{key:"readInt8",value:function(){var e=this.peekInt8();return this._head+=1,e}},{key:"readInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt16(e);return this._head+=2,t}},{key:"readInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt24(e);return this._head+=3,t}},{key:"readInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt32(e);return this._head+=4,t}},{key:"readString",value:function(e){for(var t="",n=0;n<e;n++){var i=this.readInt8();t+=String.fromCharCode(i)}return t}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(e){this._head=e}}]),e}();t.a=a},function(e,t,n){t.a={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}},function(e,t,n){n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(21)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){return d(this,t),_(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"insetsForWidth",value:function(e){return this.getRelativeInsets().clone().scale(e)}}],[{key:"Small",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new h.a(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new h.a(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new h.a(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new h.a(.05,.2,.05,.2)})}}]),t}(f.Configurable);g.prototype.availableOptions={image:{type:f.OptionType.IMAGE,default:null},imagePath:{type:f.OptionType.STRING,default:null},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a},fontIdentifier:{type:f.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:f.OptionType.BOOLEAN,default:!1}}},function(e,t,n){n.d(t,"a",(function(){return T}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(21)),m=n(26),y=n(48),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=function(e){function t(){return k(this,t),x(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(_.Color.WHITE)?_.Color.BLACK:_.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(e){var n=w(t.prototype.__proto__||d()(t.prototype),"_getTextFrameForElement",this).call(this,e),i=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(n.y-=i.top),n}},{key:"willRender",value:function(e){this.getAttributes().setTextColor(this._getTextColor());var t=this.getImage();if(t){var n=this.getCapInsets(),i=this._getFrame();n&&!n.equals(g.a.ZERO)?Object(y.b)(e,t,i,n):e.drawImage(t,i.x,i.y,i.width,i.height),Object(y.d)(e,i,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t&&(e.save(),e.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(e){w(t.prototype.__proto__||d()(t.prototype),"didRender",this).call(this,e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}}]),t}(m.a);T.prototype.availableOptions=v({},m.a.prototype.availableOptions,{image:{type:_.OptionType.IMAGE,default:null},capInsets:{type:_.OptionType.OBJECT,default:new g.a},backgroundColor:{type:_.OptionType.COLOR,default:_.Color.WHITE},autoAdjustTextColor:{type:_.OptionType.BOOLEAN,default:!0},isMasked:{type:_.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:_.OptionType.BOOLEAN,default:!1}})},function(e,t,n){n.d(t,"a",(function(){return E}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(26)),m=n(78),y=n(52),v=n(33),b=n(48),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=_.Math.Rectangle,E=function(e){function t(){return T(this,t),R(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"getImageSize",value:function(){var e=this.getLeftImage(),t=this.getRightImage(),n=this.getWords(),i=this.getAttributes().getFontIdentifier(),r=e?new v.a(e.width,e.height):new v.a,o=n.joined(1)[0];if(!o)return r;var a=new m.a({text:o,fontIdentifier:i,fontSize:50}).getSizeValue(),s=t?2:1;r.scale(s,1);var l=r.clone().fitInWidthWithOther(this._getFrame().width,a);return l.scale(1/s,1),l}},{key:"_getTextFrame",value:function(){var e=x(t.prototype.__proto__||d()(t.prototype),"_getTextFrame",this).call(this).clone(),n=this.getImageSize(),i=this.getRightImage(),r=this.getImagePosition();return i?(e.x+=n.width,e.width-=2*n.width):r===t.ImagePosition.Left&&(e.x+=n.width),e}},{key:"_calculateLayoutElements",value:function(){var e=x(t.prototype.__proto__||d()(t.prototype),"_calculateLayoutElements",this).call(this),n=this._getFrame(),i=this.getRightImage(),r=this.getImageSize(),o=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),l=new m.a({text:"stickerClock",fontIdentifier:s});l.fitWidth(this._getTextFrame().width);var u=(new C).set(n.x,n.y,r.width,r.height);if(i||o!==t.ImagePosition.Right||(u.x+=a.width),e.push(new y.a({text:"stickerClock",frame:u,font:l})),i){var c=e[0];if(c){var f=u.clone();f.translate(c.getFrame().width+f.width,0),e.push(new y.a({text:"stickerClock",frame:f,font:l}))}}return e}},{key:"render",value:function(e){var t=this._getLayoutElements(),n=this.getAttributes(),i=n.getTextColor(),r=this.getLeftImage(),o=this.getRightImage(),a=t[0],s=t[1],l=a.serializeOptions().font,u=this._getTextFrameForElement(a);if(l.draw(e,u.x,u.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),r){var c=s.getFrame();e.drawImage(r,c.x,c.y,c.width,c.height),Object(b.d)(e,c,i,"source-atop")}if(t.length>2){var f=t[2].getFrame().clone();e.drawImage(o,f.x,f.y,f.width,f.height),Object(b.d)(e,f,i,"source-atop")}}}]),t}(g.a);E.ImagePosition={Left:"LEFT",right:"RIGHT"},E.prototype.availableOptions=w({},g.a.prototype.availableOptions,{leftImage:{type:_.OptionType.IMAGE,default:null},rightImage:{type:_.OptionType.IMAGE,default:null},imagePosition:{type:_.OptionType.STRING,default:E.ImagePosition.Left,available:[E.ImagePosition.Left,E.ImagePosition.Right]}})},function(e,t,n){n.d(t,"a",(function(){return R}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(92)),_=n(47),g=n(77),m=n(52),y=n(78),v=n(48),b=n(33),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=function(e){function t(){var e;x(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=T(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o.setSize(new b.a(o.getWidth(),o.getHeight())),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"_getImageFrame",value:function(){var e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){var n=Math.min(e.width/t.width,e.height/t.height),i=t.width*n,r=t.height*n;e.x+=(e.width-i)/2,e.y+=(e.height-r)/2,e.width=i,e.height=r}return e}},{key:"_calculateLayoutElements",value:function(){return[new m.a({text:"",frame:this._getImageFrame(),font:new y.a})]}},{key:"render",value:function(e){var t=this.getImage(),n=this._getImageFrame(),i=this.getAttributes().getTextColor();Object(v.a)(e,t,n,i)}}]),t}(d.a);R.RowImages={decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"},R.prototype.availableOptions=w({},d.a.prototype.availableOptions,{words:{type:p.OptionType.OBJECT,default:new _.a},height:{type:p.OptionType.NUMBER,default:0},image:{type:p.OptionType.IMAGE,default:null},imagePath:{type:p.OptionType.STRING,default:R.RowImages.decorative1},drawingModeAspectFit:{type:p.OptionType.BOOLEAN,default:!1},attributes:{type:p.OptionType.CONFIGURABLE,default:new g.a}})},function(e,t,n){n.d(t,"a",(function(){return k}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(124)),_=n(52),g=n(78),m=(n(177),n(435)),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){return b(this,t),w(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_calculateLayoutElements",value:function(){var e=this.getWords(),t=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),i=this.getImageInsets(),r=new g.a({text:e.getWord(0),fontIdentifier:n});r.fitWidth(t.width);var o=new _.a({text:e.getWord(0),frame:t,font:r});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=i.top+o.getFrame().height+i.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(e){var t=this.getWords().getWord(0),n=this.getAttributes(),i=n.getFontIdentifier(),r=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new m.a({text:t,fontIdentifier:i,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var l=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(l+=r.top+r.bottom);var u=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=u.height/2-l/2+r.top;else switch(c){case"left":o.y=u.height-l-r.bottom;break;case"center":o.y=u.height/2-l/2+l*this.getCenterOffset(),o.x=(u.width-o.width)/2;break;case"right":o.x=u.width-o.width-r.right}return o}},{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach((function(n){var i=n.serializeOptions(),r=i.text,o=i.frame,a=t.getAttributes(),s=a.getFontIdentifier(),l=new m.a({text:r,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=t._getTextFrameForElement(n),l.fitInFrame(o),l.draw(e,o.x,o.y)})),e.restore()}}]),t}(d.a);k.prototype.availableOptions=y({},d.a.prototype.availableOptions,{centerOffset:{type:p.OptionType.NUMBER,default:0},sizeToFitContent:{type:p.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:p.OptionType.NUMBER,default:.95},rowScaleFactor:{type:p.OptionType.NUMBER,default:1},minimumHeight:{type:p.OptionType.NUMBER,default:0},centeredVertically:{type:p.OptionType.BOOLEAN,default:!1}})},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(80)),m=n(53),y=n(20),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e;w(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=k(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[g.a.SpeechBubble1,g.a.SpeechBubble3],o._rowTypesRandomizer=new y.a(0),o._isMaskedRandomizer=new y.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(e){return e.getImagePath()}))}},{key:"_rowTypes",value:function(e){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(e,n,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),r.setLineSpacing(.9);var o=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),o}}]),t}(m.a);x.defaultFontIdentifiers=["imgly_font_panton_black_caps","imgly_font_panton_light_caps","imgly_font_panton_black_italic_caps","imgly_font_panton_light_italic_caps"],x.identifier="imgly_text_design_masked_speech_bubble",x.prototype.availableOptions=v({},m.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:x.defaultFontIdentifiers},squareLayout:{type:_.OptionType.BOOLEAN,default:!1},alignment:{type:_.OptionType.STRING,default:"left",available:m.a.ValidAlignments}})},function(e,t,n){n.d(t,"a",(function(){return L}));var i=n(6),r=n.n(i),o=n(29),a=n.n(o),s=n(25),l=n.n(s),u=n(15),c=n.n(u),f=n(0),h=n.n(f),p=n(5),d=n.n(p),_=n(2),g=n.n(_),m=n(3),y=n.n(m),v=n(1),b=n.n(v),w=n(4),k=(n.n(w),n(76)),x=n(26),T=n(27),R=n(21),C=n(47),E=n(126),O=n(125),I=n(20),S=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},A=function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function e(t,n,i){null===t&&(t=Function.prototype);var r=d()(t,n);if(void 0===r){var o=b()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function D(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return c()(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var L=function(e){function t(){var e;B(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=P(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new R.a(0,0,0,0),o._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],o._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],o._lineCount=0,o._decorativeRowCreated=!1,o._useImageRowRandomizer=new I.a(0),o._rowTypeRandomizer=new I.a(0),o._lineDecorativeTypeRandomizer=new I.a(0),o._seedPool.push(o._useImageRowRandomizer),o._seedPool.push(o._rowTypeRandomizer),o._seedPool.push(o._lineDecorativeTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=y()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(g.a?g()(e,t):e.__proto__=t)}(t,e),F(t,[{key:"getImagePaths",value:function(){return[].concat(D(t.DecoratorImages),D(t.RowImages))}},{key:"_fontForRow",value:function(e,t){var n=this,i=t.countNumberOfCharacters(),r=this.getFontIdentifiers();return i<4?r=r.filter((function(e){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(e)<0})):i<5&&(r=r.filter((function(e){return n._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(e)<0}))),r[e%r.length]}},{key:"_modifiedText",value:function(e){return M(t.prototype.__proto__||b()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_modifiedLines",value:function(e){return this._lineCount=e.length,e}},{key:"generateLayoutData",value:function(e,n){return this._decorativeRowCreated=!1,M(t.prototype.__proto__||b()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=e;switch(i.getFontIdentifier()){case"imgly_font_wolesbro":r=(new C.a).set(e.getLowerCase());break;case"imgly_font_permanent_marker":r=(new C.a).set(e.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===t||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new x.a({words:r,width:n,attributes:i});this._decorativeRowCreated=!0;var a=this._randomDecoratorImages(),s=A(a,2),l=s[0],u=s[1];return new O.a({words:e,width:n,attributes:i,leftImage:l,rightImage:u})}},{key:"_layoutRows",value:function(e,n){var i=M(t.prototype.__proto__||b()(t.prototype),"_layoutRows",this).call(this,e,n);if(!this.getDecorationsVisible())return i;var r=.0625*n,o=new E.a({width:n,height:r,image:T.a.getImage(this._rowTypeRandomizer.pickNext(t.RowImages))}).layout(),a=new E.a({width:n,height:r,image:T.a.getImage(this._rowTypeRandomizer.pickNext(t.RowImages))}).layout();return[o].concat(D(i),[a])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?t.DecoratorImages.slice(0,2).map((function(e){return T.a.getImage(e)})):t.DecoratorImages.slice(2).map((function(e){return T.a.getImage(e)}))}}]),t}(k.a);L.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],L.identifier="imgly_text_design_sunshine",L.RowImages=[E.a.RowImages.decorative1,E.a.RowImages.decorative2,E.a.RowImages.decorative3,E.a.RowImages.decorative4],L.DecoratorImages=["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"],L.prototype.availableOptions=S({},k.a.prototype.availableOptions,{fontIdentifiers:{type:w.OptionType.ARRAY,default:L.defaultFontIdentifiers},relativeLineSpacing:{type:w.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:w.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:w.OptionType.BOOLEAN,default:!1}})},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(183)),_=n(27),g=n(48),m=n(443),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=p.Math.Rectangle,x=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._MAX_TRIES=1e3,o._PRECISION=1e3,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"render",value:function(e,t,n,i,r){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var l=t.width/t.height,u=new k(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*l),this._PRECISION,this._PRECISION);u.width-=u.x+Math.round(n.right*this._PRECISION),u.height-=u.y+Math.round(n.bottom*this._PRECISION*l);for(var c=[],f=0,h=0;f<this.getParticleCount()&&h<this._MAX_TRIES;){var p=s/2,d=Math.round(p*this._PRECISION),y=Math.round(p*this._PRECISION*l),v=Math.floor(this._PRECISION)-d,b=Math.floor(this._PRECISION)-y,w=r.nextInRange(d,v),x=r.nextInRange(y,b),T=new k(w-d,x-y,2*d,2*y);T.intersects(u)||this.hasCollision(c,T)||(c.push(new m.a({frame:T})),f+=1),h+=1}for(var R=0;R<c.length;R++){var C=c[R],E=r.pickNext(a),O=_.a.getImage(E),I=r.nextInRange(140,230)/255,S=t.width/this._PRECISION,A=t.height/this._PRECISION,F=C.getContentFrame();F.x*=S,F.y*=A,F.width*=S,F.height*=A;var M=i.clone();M.a=I,Object(g.a)(e,O,F,M,"source-atop")}}}},{key:"hasCollision",value:function(e,t){for(var n=0;n<e.length;n++)if(t.intersects(e[n].getFrame()))return!0;return!1}}]),t}(d.a);x.prototype.availableOptions=y({},d.a.prototype.availableOptions,{particleCount:{type:p.OptionType.NUMBER,default:50},relativeParticleSize:{type:p.OptionType.NUMBER,default:.08},imagePaths:{type:p.OptionType.ARRAY,default:[]}})},function(e,t,n){e.exports={default:n(454),__esModule:!0}},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=n(54),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){return m(this,t),y(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape;if(4!==e.length)throw new Error("UnpackRGBAFilter expects 4D inputs");var t=e[0];if(3!==e[3])throw new Error("Expected RGB values");if(1!==t)throw new Error("PackRGBAFilter does not support batches of images.");var n=this._options.outputSize;if(2!==n.length)throw new Error("Expected outputSize of length 2");if(n[0]*n[1]!=_.a.getSizeOfLogicalShape(e)/3)throw new Error("Input shape "+e+" can't be broken up into 3 channels.");return n}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec2 outputCoords = getOutputCoords();\n        int row = outputCoords.x;\n        int col = outputCoords.y;\n        float r = getX(0, row, col, 0);\n        float g = getX(0, row, col, 1);\n        float b = getX(0, row, col, 2);\n        gl_FragColor = vec4(r, g, b, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}]),t}(d.b);v.prototype.availableOptions=r()({outputSize:{type:p.OptionType.ARRAY}},d.b.prototype.availableOptions),t.a=v},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"calculatePadding",value:function(e,t,n,i,r,o,a){var s=void 0,l=void 0,u=void 0;if("same"===e){var c=((s=Math.ceil(t/i))-1)*i+o-t,f=((l=Math.ceil(n/r))-1)*r+a-n,h=Math.floor(c/2),p=c-h,d=Math.floor(f/2);u={top:h,bottom:p,left:d,right:f-d,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},s=Math.ceil((t-o+1)/i),l=Math.ceil((n-a+1)/r)}return{padInfo:u,outHeight:s,outWidth:l}}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=n(6),a=n.n(o),s=n(25),l=n.n(s),u=n(31),c=(n.n(u),n(9)),f=n(90),h=n(71),p=n(491),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new p.a,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=u.Utils.createCanvas(),this.reload()}return d(e,[{key:"reload",value:function(){this._categoriesById={},this._categories=[],this._stickersById={};var e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(f.b.DEFAULTS.STICKER_CATEGORIES);var t=this._options,n=t.categories,i=t.replaceCategories;if(e&&this._options.categories?this._addCategories(n,i):(this._updateCategoriesMap(),this._updateAllCategory()),e){var r=this._dynamicAssetsLibrary.getAssets("sticker");if(r.length>0){var o=this._createCustomStickerCategory(r);this._addCategories([o],!1,!0)}}}},{key:"loadExternal",value:function(e){var t=this;return new h.a(e).load().then((function(e){t._addCategories(e.categories,t._options.replaceCategories)}))}},{key:"_addCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._categories=t?e.slice(0):n?this._mergeCategories(e,this._categories):this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_mergeCategories",value:function(e,t){e=c.m.cloneCategories(e,"stickers");var n=!0,i=!1,r=void 0;try{for(var o,s=l()(t);!(n=(o=s.next()).done);n=!0){var u=o.value,f=!1,h=!0,p=!1,d=void 0;try{for(var _,g=l()(e);!(h=(_=g.next()).done);h=!0){var m=_.value;if(u.identifier===m.identifier){var y=!0,v=!1,b=void 0;try{for(var w,k=l()(u.stickers);!(y=(w=k.next()).done);y=!0){var x=w.value,T=!1,R=!0,C=!1,E=void 0;try{for(var O,I=l()(m.stickers);!(R=(O=I.next()).done);R=!0){var S=O.value;if(x.identifier===S.identifier){a()(S,x),T=!0;break}}}catch(e){C=!0,E=e}finally{try{!R&&I.return&&I.return()}finally{if(C)throw E}}T||m.stickers.push(x)}}catch(e){v=!0,b=e}finally{try{!y&&k.return&&k.return()}finally{if(v)throw b}}f=!0;break}}}catch(e){p=!0,d=e}finally{try{!h&&g.return&&g.return()}finally{if(p)throw d}}f||e.push(u)}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"_updateCategoriesMap",value:function(){var e=this;this._categoriesById={},this._categories.forEach((function(t){e._categoriesById[t.identifier]=t})),this._categories.forEach((function(t){t.stickers.forEach((function(t){e._stickersById[t.identifier]=t}))})),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach((function(t){"imgly_sticker_custom"!==t.identifier&&(t.stickers=t.stickers.filter((function(t){return-1!==e._options.availableStickers.indexOf(t.identifier)})))})),this._categories=this._categories.filter((function(e){return e.stickers.length>0}))),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map((function(e){return e.stickers})).reduce((function(e,t){return e.concat(t)}),[])},this._categoriesById.all=this._allCategory}},{key:"renderStickerThumbnailFromImage",value:function(e){var t=this._customStickerCanvas,n=t.getContext("2d");n.save();var i=62/e.width,r=i*e.height;t.width=62,t.height=62,n.clearRect(0,0,e.width,e.height),n.translate(0,.5*(t.height-r)),n.scale(i,i),n.drawImage(e,0,0);var o=t.toDataURL("image/png");return n.restore(),{data:o,width:62,height:r}}},{key:"addCustomStickerFromImage",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",r=function(e){var t=n._ui.getEditor().getSDK().getRenderer(),i=new c.n(e.width,e.height),r=1e6*n._ui.getEditor().getMaxMegapixels(),o=t.getMaxDimensions(),a=i.x*i.y>r,s=null!==o&&(i.x>o||i.y>o);if(a){var l=e.width/e.height,u=e.height/e.width;o=new c.n(Math.sqrt(r*l),Math.sqrt(r*u)).floor().max()}var f=i.clone();return(a||s)&&(i.x/i.y>1?(f.x=o,f.y=o/i.x*i.y):(f.x=o/i.y*i.x,f.y=o)),f},o=function(e,t){var n=e.x/e.y;return n>1?new c.n(t,t/n):new c.n(t*n,t)},a="data:image/svg"===e.src.substring(0,14),s=this._ui.getEditor().getSDK();e=s.correctExifOrientation(e);var l=o(new c.n(e.width,e.height),2048),f=a?l:r(e),h=this._customStickerCanvas,p=h.getContext("2d");p.save();var d=this.renderStickerThumbnailFromImage(e);a?(e.width>e.height?(h.width=2048,h.height=2048/e.width*e.height):(h.height=2048,h.width=2048/e.height*e.width),e.width=h.width,e.height=h.height):(h.width=f.x,h.height=f.y,p.scale(f.x/e.width,f.y/e.height)),p.drawImage(e,0,0,e.width,e.height);var _=h.toDataURL();p.restore();var g={identifier:u.Utils.generateUUID(),defaultName:t||"",tintMode:i,images:{mediaThumb:{uris:[d.data],rawData:!0,width:d.width,height:d.height},mediaBase:{uris:a?[_,e.src]:[_],rawData:!0,isSVG:a,width:f.x,height:f.y}}},m=this._dynamicAssetsLibrary;m.addAsset("sticker",g,!0);var y=m.getAssets("sticker");if(1===y.length){var v=this._createCustomStickerCategory(y);this._addCategories([v],!1,!0)}else this.getCategory("imgly_sticker_custom").stickers=y,this._updateAllCategory();this._updateCategoriesMap()}},{key:"_createCustomStickerCategory",value:function(e){return{identifier:"imgly_sticker_custom",defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}},{key:"getStickersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown sticker category '"+e+"'");return this._categoriesById[e].stickers}},{key:"getStickerByIdentifier",value:function(e){return this._stickersById[e]}},{key:"getCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}],[{key:"getURLForSticker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=e.images,i="base"===t&&n.mediaBase||n.mediaThumb,r=i.uris||[i.uri];if(void 0===c.m.Browser||c.m.Browser.getIEVersion()){var o=r.filter((function(e){return!/\.svg$/i.test(e)}));return o.length?o[0]:r[0]}var a=r.filter((function(e){return/\.svg$/i.test(e)}));return a.length?a[0]:r[0]}}]),e}();t.a=_},function(e,t,n){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),l=n.n(s),u=n(10),c=n.n(u),f=n(493),h=n(496),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=n,this._loadedFonts=[]}return d(e,[{key:"setFonts",value:function(e){this._fonts=e}},{key:"needsToLoad",value:function(){for(var e=this,t=function(t){var n=void 0;return e._fonts[t].getVariations().forEach((function(e){n=n||e.getProvider()})),n?{v:!0}:"continue"},n=0;n<this._fonts.length;n++){var i=t(n);switch(i){case"continue":continue;default:if("object"===(void 0===i?"undefined":p(i)))return i.v}}}},{key:"fontLoaded",value:function(e){var t=e.getFontFamily();return-1!==this._loadedFonts.indexOf(t)}},{key:"setFontLoaded",value:function(e){if(!this.fontLoaded(e)){var t=e.getFontFamily();this._loadedFonts.push(t)}}},{key:"load",value:function(){var e=this,t=this._fonts,n={google:new f.a(this._ui),file:new h.a(this._ui)},i=function(){for(var e in n)n[e].dispose()};t.filter((function(t){return!e.fontLoaded(t)})).forEach((function(e){e.getVariations().forEach((function(e){var t=e.getProvider();t&&n[t].add(e)}))}));var r=[];for(var o in n)r.push(n[o].load());return c.a.all(r).then((function(){i(),t.forEach((function(t){e.setFontLoaded(t)}))})).catch((function(e){throw i(),e}))}}]),e}();t.a=_},function(e,t,n){e.exports=!n(19)&&!n(42)((function(){return 7!=Object.defineProperty(n(94)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(43),r=n(35),o=n(232)(!1),a=n(100)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var i=n(16).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(43),r=n(44),o=n(100)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(10),d=n.n(p),_=n(1),g=n.n(_),m=n(38),y=n(166),v=n(169),b=n(120),w=(n(89),n(317)),k=n(168),x="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}
/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
var E=function(e){return A.byteArrayToString(P.decode(e))},O=m.Rectangle,I=m.Constants,S=m.Engine,A=m.Utils,F=m.EventEmitter,M=m.Events,D=m.Vector2,B=m.Log,P=m.Base64,L=m.Color,z=I.RenderType,U=I.ImageFormat,N=I.RendererType,j=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(this,t);var r=C(this,(t.__proto__||g()(t)).call(this));r._onOperationUpdate=r._onOperationUpdate.bind(r),r._onContextRestored=r._onContextRestored.bind(r);var o=n(170),a=o.version;if(r.version=a,r[E("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,r._preferredRenderer=e,r._options=A.defaults(i,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:L.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),r._options.smoothUpscaling&&(S.BaseTexture.DefaultMagFilter=S.BaseTexture.LinearFilter),r._options.extensions=A.defaults(r._options.extensions,{operations:[],controls:[],languages:[]}),B.setLevel(r._options.logLevel),r[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,r[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]){if(!r._v())return C(r);var s=m[E("TGljZW5zZUNoZWNrZXI=")];r._l=new s(r[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]),r._cv(!0).then((function(){r._ct()})).catch((function(e){B.error(E("TGljZW5zaW5n"),e.message)}))}else r[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,r._l=new(m[E("RnJlZUxpY2Vuc2VDaGVja2Vy")]);r._defaultRenderMode=r._options.renderMode,r._renderMode=r._options.renderMode,r._textureQuality=r._options.textureQuality,r._offset=new D,r._zoom=r._options.zoom,r._spriteScale=r._options.spriteScale,r._rotation=r._options.rotation,r._operations={},r._operationsStack=null,r.setOperationsStack(new v.a),r._container=new S.Container,r._sprite=new S.Sprite,r._container.addChild(r._sprite),r._inputTexture=r._options.inputTexture,r._currentInputTexture=null,r._currentTexture=null,r._resizedTexture=null,r._resizedContainer=new S.Container,r._resizedSprite=new S.Sprite,r._resizedContainer.addChild(r._resizedSprite),r._texturesToDispose=[],r.setSmoothDownscaling(r._options.smoothDownscaling),r._registerOperations(),r._initRenderer();var l=r._renderer.constructor.type;return r._options.displayWelcomeMessage&&B.log("Version:",r.version+" ("+l+") - https://www.photoeditorsdk.com"),r[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&B.log(E("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),r._options.image&&r.setImage(r._options.image,r._options.exif),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),T(t,[{key:"_v",value:function(){return!!this[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]||(B.error(E("TGljZW5zaW5n"),E("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),B.error(E("TGljZW5zaW5n"),E("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?B.error(E("TGljZW5zaW5n"),E("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):B.warn(E("TGljZW5zaW5n"),E("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch((function(n){e[E("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var i=E("SW52YWxpZCBsaWNlbnNlLg==");throw t&&(i="ELICEXP"===n.code?E("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?E("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?E("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?E("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",x(e._options.license)):"ELICINV"===n.code?E("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):E("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=i,new Error(n)}))}},{key:"_t",value:function(){this._l.t()}},{key:"_fl",value:function(){return this[E("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}},{key:"_onOperationUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,[M.OPERATION_UPDATED].concat(t))}},{key:"_onContextRestored",value:function(){B.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach((function(e){e.disposeRenderTextures()})),this.render()}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.DATAURL,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.PNG,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then((function(){return t.hasChanges()&&t._t(),t._operationsStack.forEach((function(e){e.onBeforeExport()})),new w.a(t,{renderType:e,imageFormat:n,quality:i}).export().then((function(e){return t._operationsStack.forEach((function(e){e.onAfterExport()})),d.a.resolve(e)}))}))}},{key:"render",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n=this._renderer.getContext();n.startFrame&&n.startFrame();var i=void 0;B.canLog("info")&&(i=new k.a("","Frame rendering")),B.info("","Rendering starts");var r=this._operationsStack;return r.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then((function(t){"export"===e._renderMode&&(t=e._inputTexture),e._currentTexture=t,e._sprite.setTexture(t),e._container.updateTransform()})).then((function(){return r.validateSettings()})).then((function(){return!e._fl()&&e[E("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]||(r.getByIdentifier("license-watermark")?r.moveToTop("license-watermark"):e.createOperation("license-watermark")),r.render(e,e._currentTexture)})).then((function(n){var i=n.outputTexture;switch(e._currentTexture=i,e._sprite.setTexture(e._currentTexture),e._renderMode){case"dynamic":var r=e._renderer.getDimensions().clone().divide(2).add(e._offset);e._container.setScale(e._zoom/e.getTextureScale(),e._zoom/e.getTextureScale()),e._container.setPosition(r),e._sprite.setAnchor(.5,.5),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(e._rotation);break;case"export":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(0);break;case"adapter":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(1,1),e._sprite.setRotation(0)}return t&&e._renderer.render(e._container),n})).then((function(t){return i&&i.stop(),n.endFrame&&n.endFrame(),e._disposeTextures(),t}))}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var e=this;return new d.a((function(t,n){var i=e.getTextureScale();if(1===e._textureQuality)return t(e._inputTexture);var r=e.getInputDimensions().multiply(i).floor(),o=void 0;e._resizedTexture?e._resizedTexture.getDimensions().equals(r)||(e._resizedTexture.resizeTo(r),o=!0):(e._resizedTexture=new S.RenderTexture(e._renderer,r.x,r.y),o=!0),o&&(e._resizedSprite.setScale(i,i),e._resizedSprite.setTexture(e._inputTexture),e._resizedTexture.render(e._resizedContainer)),t(e._resizedTexture)}))}},{key:"_registerOperations",value:function(){for(var e in this._operations={},y){var t=y[e];this._operations[t.identifier]=t}this._operations=A.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(e){var t=this;e.forEach((function(e){t._operations[e.identifier]=e}))}},{key:"setAllOperationsToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(e)}},{key:"createOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._operations[e];if(!i)throw new Error("No operation with identifier `"+e+"` found.");var r=new i(this,t);return n&&this.addOperation(r),r}},{key:"addOperation",value:function(e){this._operationsStack.push(e)}},{key:"removeOperation",value:function(e){this._operationsStack.remove(e)}},{key:"getInputDimensions",value:function(){var e=this._inputTexture.getFrame();return new D(e.width,e.height)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getInputDimensions(),n=this._operationsStack;return n.forEach((function(e){e.getEnabled()&&(t=e.getNewDimensions(t))})),e&&t.multiply(this._spriteScale),t.floor()}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){var e=this.getTextureScale(),t=this.getInputDimensions().multiply(e).floor();return this._operationsStack.forEach((function(e){t=e.getNewDimensions(t)})),t}},{key:"getCrossOrigin",value:function(){return A.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_initRenderer",value:function(){var e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor},t=void 0,n=void 0;if("export"!==this._renderMode&&this._options.canvas){var i=this._options.canvas;t=i.width,n=i.height}else if(this._inputTexture){var r=this.getFinalDimensions();t=r.x,n=r.y}else t=1,n=1;switch(this._preferredRenderer){case N.WEBGL:this._renderer=S.autoDetectRenderer(t,n,e),this._renderer.on("context-restored",this._onContextRestored);break;case N.CANVAS:this._renderer=new S.CanvasRenderer(t,n,e),this._renderer.on("context-restored",this._onContextRestored);break;default:B.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=S.autoDetectRenderer(t,n,e)}}},{key:"resizeTo",value:function(e){this._renderer.resizeTo(e,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(e){if(e){var t,n=e.src;if(t=n,b.a.isJPEG(n)){var i=null;try{i=b.a.fromBase64String(t)}catch(e){}if(!i)return;return i}}}},{key:"_handleExifOrientation",value:function(){var e=this._exif.getTags();if(e&&e.Orientation){var t=1!==e.Orientation&&2!==e.Orientation,n=-1!==[2,4,5,7].indexOf(e.Orientation);(t||n)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e),this._exif.setOrientation(1))}}},{key:"correctExifOrientation",value:function(e){var t=this.parseExif(e);if(!t)return e;var n=t.getTags();if(n&&n.Orientation){var i=1!==n.Orientation&&2!==n.Orientation,r=-1!==[2,4,5,7].indexOf(n.Orientation);if(i||r){var o=this.createOperation("exif-orientation",{},!1);o.setTags(n);var a=o.applyTo(e);return t.setOrientation(1),n.Orientation=1,a}}return e}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(e){this._texturesToDispose.push(e)}},{key:"_disposeTextures",value:function(){for(var e=0;e<this._texturesToDispose.length;e++)this._texturesToDispose[e].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();var i=new S.BaseTexture(this._image),r=new O(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(r.width=n.x,r.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new S.Texture(i,r),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(e){this._inputTexture=e}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(e){this._renderer.setCanvas(e)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(e){this._operationsStack&&this._operationsStack.off(M.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(M.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e,t){e instanceof D?this._offset.copy(e):this._offset.set(e,t)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(e){this._renderMode=e}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}},{key:"setRotation",value:function(e){this._rotation=e}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),t}(F);t.a=j},function(e,t,n){e.exports=n(34)},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(59);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(137),r=n(102).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(28);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(51),r=n(17)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(28),r=n(56),o=n(17)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[o])?t:r(n)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(28),r=n(23),o=n(113);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(16),r=n(11),o=n(22),a=n(19),s=n(17)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(17)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function _(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){e.exports={default:n(260),__esModule:!0}},function(e,t,n){var i=n(0),r=n.n(i),o=n(45),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return a(e,[{key:"multiply",value:function(e){var t,n,i,r,o,a;return t=this.a*e.a+this.b*e.c,n=this.a*e.b+this.b*e.d,i=this.c*e.a+this.d*e.c,r=this.c*e.b+this.d*e.d,o=this.tx*e.a+this.ty*e.c+e.tx,a=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=n,this.c=i,this.d=r,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(e){var t=e,n=t.x,i=t.y;return(e=e.clone()).x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.tx,e}},{key:"applyInverseToVector",value:function(e){var t=1/(this.a*this.d+this.c*-this.b),n=e,i=n.x,r=n.y;return(e=e.clone()).x=this.d*t*i+-this.c*t*r+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*r+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t,e}},{key:"rectangleToCoordinates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(0,0),n=e.width*(1-t.x),i=e.width*-t.x,r=e.height*(1-t.y),a=e.height*-t.y,s=[];return s.push(new o.a(this.a*i+this.c*a+this.tx,this.d*a+this.b*i+this.ty)),s.push(new o.a(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new o.a(this.a*n+this.c*r+this.tx,this.d*r+this.b*n+this.ty)),s.push(new o.a(this.a*i+this.c*r+this.tx,this.d*r+this.b*i+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?e:new Float32Array(e)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(45),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(this,e),this.x=t,this.y=n,this.width=i,this.height=r}return a(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"equals",value:function(t,n,i,r){return t instanceof e?t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height:t===this.x&&n===this.y&&i===this.width&&r===this.height}},{key:"translate",value:function(e,t){return e instanceof o.a&&(t=e.y,e=e.x),this.x+=e,this.y+=t,this}},{key:"scale",value:function(e,t){return e instanceof o.a?(t=e.y,e=e.x):void 0===t&&(t=e),this.width*=e,this.height*=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new o.a(this.x,this.y)}},{key:"getSize",value:function(){return new o.a(this.width,this.height)}},{key:"insetBy",value:function(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}},{key:"intersects",value:function(e){var t=new o.a(this.x,this.y),n=new o.a(this.x+this.width,this.y+this.height),i=new o.a(e.x,e.y),r=new o.a(e.x+e.width,e.y+e.height);return!(i.x>n.x||t.x>r.x||r.y<t.y||n.y<i.y)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}],[{key:"FromDiagonalPoints",value:function(t,n){var i=!1;n.x-t.x<0&&(i=!0);var r=i?n:t,o=i?t:n,a=o.x-r.x,s=o.y-r.y;return new e(r.x,r.y,a,s)}}]),e}();t.a=l},function(e,t,n){var i=n(0),r=n.n(i),o=n(24),a=n(271);function s(e,t,n){return t in e?r()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.n(a),t.a={checkFramebufferStatus:function(e,t){var n,i=t.checkFramebufferStatus(t.FRAMEBUFFER),r=(s(n={},t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),s(n,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),s(n,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),s(n,t.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);i!==t.FRAMEBUFFER_COMPLETE&&o.a.warn(e,"Framebuffer incomplete: "+r[i])},determineGPUName:function(e){var t=null,n=null;e||(e=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var i=e&&e.getExtension("WEBGL_debug_renderer_info");return i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL),n&&n.remove()),t},isGPUBlacklisted:function(e){return!1}}},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(86),l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._tracking=!1;var i=this,r=function(e){"function"==typeof t[e]?n[e]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=t[e];if(!i._tracking)return a.apply(t,r);var l=s(),u=a.apply(t,r),c=s()-l,f={functionName:e,arguments:r,duration:c};return i._trackedCalls.push(f),u}:n._makePropertyWrapper(e)};for(var o in t)r(o)}return a(e,[{key:"_makePropertyWrapper",value:function(e){if(-1===["_context","_trackedCalls","_tracking"].indexOf(e)){var t=this._context;this.__defineGetter__(e,(function(){return t[e]})),this.__defineSetter__(e,(function(n){t[e]=n}))}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var e="Rendering";o.f.log(e,"Frame rendering results:"),o.f.log(e,"Context calls: "+this._trackedCalls.length);var t={};this._trackedCalls.forEach((function(e){var n=e.functionName,i=e.duration;t[n]=t[n]||{totalDuration:0,calls:0},t[n].totalDuration+=i,t[n].calls++}));var n=[];for(var i in t){var r=t[i];r.averageDuration=r.totalDuration/r.calls,n.push({functionName:i,data:r})}n.sort((function(e,t){return t.data.totalDuration-e.data.totalDuration})),(n=n.slice(0,3)).forEach((function(t){o.f.log(e,t.functionName+": "+t.data.calls+" calls, "+t.data.totalDuration.toFixed(2)+"ms")}))}}]),e}();t.a=l},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(272),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,t);var r=_(this,(t.__proto__||c()(t)).call(this));return r._options=h.a.defaults(i,{pixelRatio:1,transparent:!1,clearColor:f.b.BLACK,debug:!1}),r.setMaxListeners(0),r._width=e||800,r._height=n||600,r._dimensions=new f.k(r._width,r._height),r._maxTextureSize=null,r._pixelRatio=r._options.pixelRatio,r._clearColor=r._options.transparent?f.b.TRANSPARENT:r._options.clearColor||f.b.BLACK,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"setCanvas",value:function(e){var t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new f.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=e.clone()}},{key:"_createContext",value:function(){f.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){f.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(e){f.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(e){this._filterManager=e}},{key:"isOfType",value:function(e){return this._type===e}},{key:"dispose",value:function(){f.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),t}(f.d);t.a=g},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return o(e,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return o(e,[{key:"map",value:function(e,t){var n=t.x,i=t.y;this._uvs[2]=t.width/e.width,this._uvs[4]=this._uvs[2],this._uvs[5]=t.height/e.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=i,this._vertices[2]=n+t.width,this._vertices[3]=i,this._vertices[4]=this._vertices[2],this._vertices[5]=i+t.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var e=this._context;this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var e=this._context;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this._uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var e=this._context;this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null)}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=n,this.data=i}return o(e,null,[{key:"fromNodeCanvasImage",value:function(t){var n=new Canvas(t.width,t.height).getContext("2d");n.drawImage(t,0,0);var i=n.getImageData(0,0,t.width,t.height);return new e(t.width,t.height,i.data)}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=n(118),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._children=[],o._filters=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"addFilter",value:function(e){this._filters.push(e)}},{key:"removeFilter",value:function(e){var t=this._filters.indexOf(e);return-1!==t&&(this._filters.splice(t,1),!0)}},{key:"setFilters",value:function(e){this._filters=e}},{key:"addChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.push(e)}},{key:"prependChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}},{key:"hasChild",value:function(e){return-1!==this._children.indexOf(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!==t?(this._children.splice(t,1),e.setParent(null)):p.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach((function(t){t.renderWebGL(e)})),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(e){}},{key:"renderCanvas",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach((function(t){t.renderCanvas(e)})),this._filters&&this._filters.length&&t.popFilters()}}},{key:"_renderCanvas",value:function(e){}},{key:"updateTransform",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"updateTransform",this).call(this),this._children.forEach((function(e){e.updateTransform()}))}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),t}(d.a);t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(68),p=n(281),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));if(!(e instanceof h.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return i._uvs=new p.a,i._frame=n?n.clone():null,i._frameLocked=!!n,i._onBaseTextureLoaded=i._onBaseTextureLoaded.bind(i),i._onBaseTextureUpdated=i._onBaseTextureUpdated.bind(i),i._frame||(i._frame=new f.h(0,0,1,1)),i.setBaseTexture(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var e=this._baseTexture.getFrame(),t=e.width,n=e.height;this._frame.width=t,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(e){if(this._baseTexture=e,this._baseTexture.isLoaded()){var t=e.getFrame(),n=t.width,i=t.height;this._frameLocked||(this._frame=new f.h(0,0,n,i)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new f.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(e){return new t(new h.a(e))}},{key:"fromCanvas",value:function(e){return new t(new h.a(e))}}]),t}(f.d);t.a=_},function(e,t,n){var i=n(0),r=n.n(i),o=n(66),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,y=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,v=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,w=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;s(this,e),this.set(t,n,i,r,o,a,l,u,c,f,h,p,d,_,g,m,y,v,b,w)}return a(e,[{key:"set",value:function(e,t,n,i,r,o,a,s,l,u,c,f,h,p,d,_,g,m,y,v){this.a=e,this.b=t,this.c=n,this.d=i,this.e=r,this.f=o,this.g=a,this.h=s,this.i=l,this.j=u,this.k=c,this.l=f,this.m=h,this.n=p,this.o=d,this.p=_,this.q=g,this.r=m,this.s=y,this.t=v}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(e){var t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,n=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,i=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,r=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new o.a(t,n,i,r)}},{key:"multiply",value:function(e){var t,n,i,r,o,a,s,l,u,c,f,h,p,d,_,g,m,y,v,b,w=e,k=this;return t=w.a*k.a+w.b*k.f+w.c*k.k+w.d*k.p,n=w.a*k.b+w.b*k.g+w.c*k.l+w.d*k.q,i=w.a*k.c+w.b*k.h+w.c*k.m+w.d*k.r,r=w.a*k.d+w.b*k.i+w.c*k.n+w.d*k.s,a=w.f*k.a+w.g*k.f+w.h*k.k+w.i*k.p,s=w.f*k.b+w.g*k.g+w.h*k.l+w.i*k.q,l=w.f*k.c+w.g*k.h+w.h*k.m+w.i*k.r,u=w.f*k.d+w.g*k.i+w.h*k.n+w.i*k.s,f=w.k*k.a+w.l*k.f+w.m*k.k+w.n*k.p,h=w.k*k.b+w.l*k.g+w.m*k.l+w.n*k.q,p=w.k*k.c+w.l*k.h+w.m*k.m+w.n*k.r,d=w.k*k.d+w.l*k.i+w.m*k.n+w.n*k.s,g=w.p*k.a+w.q*k.f+w.r*k.k+w.s*k.p,m=w.p*k.b+w.q*k.g+w.r*k.l+w.s*k.q,y=w.p*k.c+w.q*k.h+w.r*k.m+w.s*k.r,v=w.p*k.d+w.q*k.i+w.r*k.n+w.s*k.s,o=w.a*k.e+w.b*k.j+w.c*k.o+w.d*k.t+w.e,c=w.f*k.e+w.g*k.j+w.h*k.o+w.i*k.t+w.j,_=w.k*k.e+w.l*k.j+w.m*k.o+w.n*k.t+w.o,b=w.p*k.e+w.q*k.j+w.r*k.o+w.s*k.t+w.t,this.a=t,this.b=n,this.c=i,this.d=r,this.e=o,this.f=a,this.g=s,this.h=l,this.i=u,this.j=c,this.k=f,this.l=h,this.m=p,this.n=d,this.o=_,this.p=g,this.q=m,this.r=y,this.s=v,this.t=b,this}},{key:"clone",value:function(){var t=new e;return t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),t}},{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var e=this;return"abcdefghijklmnopqrst".split("").map((function(t){return e[t]}))}}],[{key:"createBrightnessMatrix",value:function(t){var n=new e;return n.e=t,n.j=t,n.o=t,n}},{key:"createContrastMatrix",value:function(t){var n=new e,i=(1-t)/2;return n.a=n.g=n.m=t,n.e=n.j=n.o=i,n}},{key:"createSaturationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new e,i=1-t,r=.213*i,o=.715*i,a=.072*i;return n.a=r+t,n.b=o,n.c=a,n.f=r,n.g=o+t,n.h=a,n.k=r,n.l=o,n.m=a+t,n}},{key:"createExposureMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,t);return new e(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new e;return i.a=i.g=i.m=t,i.e=i.j=i.o=n,i}},{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),r=n(311),o=n(312),a=n(155),s=n(154),l=n(164),u=n(313);n.d(t,"Vector2",(function(){return i.a})),n.d(t,"Vector3",(function(){return r.a})),n.d(t,"Range",(function(){return o.a})),n.d(t,"Rectangle",(function(){return a.a})),n.d(t,"Matrix",(function(){return s.a})),n.d(t,"ColorMatrix",(function(){return l.a})),n.d(t,"CubicBezierCurve",(function(){return u.a}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(314);n.d(t,"ExifOrientationOperation",(function(){return i.a}))},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(40),h=n(46),p=n(24),d=n(85),_=n(70),g=n(168),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t);var i=v(this,(t.__proto__||c()(t)).call(this,n,{enabled:{type:f.OptionType.BOOLEAN,default:!0,serializable:!1}}));return i._sdk=e,i._cacheEnabled=!1,i._dirtiness={},i._sprite=new d.a.Sprite,i._container=new d.a.Container,i._container.addChild(i._sprite),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(e){var t=this;if(!this.getEnabled())return p.a.info(this.constructor.name,"Disabled - skipping"),h.a.resolve(e);if(!this._renderTexture){var n=e.getDimensions().floor();this._renderTexture=new d.a.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}var i=this._sdk.getRenderer(),r=void 0,o=void 0;if(p.a.canLog("info")&&(o=new g.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(i)){this._sprite.setTexture(e);var a=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),r=this._render(e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.setDirtyForRenderer(e,i),t._renderTexture}))}else p.a.info(this.constructor.name,"Rendering from cache"),r=h.a.resolve(this._renderTexture);return r.then((function(e){return o&&o.stop(),e}))}},{key:"_render",value:function(e){return(this._sdk.getRenderer().isOfType(f.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(e)}},{key:"_renderWebGL",value:function(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(e){return e.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(e){var t=this._dirtiness[e.id];return void 0===t||t}},{key:"setDirtyForRenderer",value:function(e,t){this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,{id:n},t)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._sdk.getInputDimensions();t&&n.multiply(this._sdk.getZoom()).floor();var i=void 0;return this._sdk.getOperationsStack().forEach((function(t){i||(t!==e?n=t.getNewDimensions(n):i=!0)})),n.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),t}(_.a);b.identifier=null,t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(38),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(86),l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tag=t,this._name=n,this._start=s()}return a(e,[{key:"stop",value:function(){var e=s()-this._start,t=Math.round(1e3/e);o.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+t+" FPS)")}}]),e}();t.a=l},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(38),h=n(46),p=n(67),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_(this,t);var n=g(this,(t.__proto__||c()(t)).call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._cacheEnabled=!0,n._stack=e,n._stack.forEach((function(e){e.on("update",n._onOperationUpdate)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"clear",value:function(){var e=this;this.forEach((function(t){return e.remove(t)})),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter((function(e){return!!e})).some((function(e){return e.hasChanges()}))}},{key:"_onOperationUpdate",value:function(e,t){this.emit(f.Events.OPERATION_UPDATED,e,t)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(e){return this._stack.filter((function(e){return!!e})).forEach(e)}},{key:"render",value:function(e,t){var n=this,i=t,r=this._stack.filter((function(e){return!!e})).filter((function(e){return e.getEnabled()}));r.reverse();var o=r.filter((function(t){return!t.isDirtyForRenderer(e.getRenderer())}))[0],a=r.indexOf(o);r.reverse();var s=0;-1!==a&&(s=r.length-a-1);for(var l=0;l<s;l++)f.Log.info(this.constructor.name,"Skipping "+r[l].constructor.name);for(var u=h.a.resolve(i),c=function(e){var t=r[e],i=void 0,o=void 0;u=u.then((function(e){return t.render(e).then((function(e){return i&&e!==i&&!n._cacheEnabled&&o.disposeRenderTextures(),i=e,o=t,e}))}))},p=s;p<r.length;p++)c(p);return u.then((function(t){return{outputTexture:t,renderDone:!r.some((function(t){return t.isDirtyForRenderer(e.getRenderer())}))}}))}},{key:"validateSettings",value:function(){return h.a.all(this._stack.filter((function(e){return!!e})).map((function(e){return e.validateSettings()})))}},{key:"setAllToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach((function(t){return t.setDirty(!0,e)}))}},{key:"updateDirtinessForRenderer",value:function(e){for(var t=!1,n=0;n<this._stack.length;n++){var i=this._stack[n];i&&(i.isDirtyForRenderer(e)&&(t=!0),t&&i.setDirtyForRenderer(!0,e))}}},{key:"push",value:function(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}},{key:"unshift",value:function(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new t(this._stack.slice(0))}},{key:"get",value:function(e){return this._stack[e]}},{key:"getByIdentifier",value:function(e){return f.Utils.Array.find(this._stack,(function(t){return t&&t.constructor.identifier===e}))}},{key:"getIndexByIdentifier",value:function(e){return f.Utils.Array.findIndex(this._stack,(function(t){return t&&t.constructor.identifier===e}))}},{key:"moveToTop",value:function(e){var t=f.Utils.Array.findIndex(this._stack,(function(t){return t&&t.constructor.identifier===e}));if(!(t<0||t===this._stack.length-1)){var n=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}},{key:"remove",value:function(e){var t=this._stack.indexOf(e);-1!==t&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}},{key:"removeAt",value:function(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach((function(e){e.dispose()}))}}]),t}(p.a);t.a=m},function(e,t){e.exports={name:"photoeditorsdk",version:"4.22.3",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{"build:engine-wrapper":"webpack"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.3","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-0":"^6.24.1","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chalk:"^2.4.1",chromedriver:"^2.37.0","circular-json-es6":"^2.0.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.5.2","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2","html-webpack-plugin":"^3.2.0",husky:"^1.2.0",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.6.3","json-loader":"^0.5.7","lodash.defaults":"^4.2.0","lodash.defaultsdeep":"^4.6.1",minimist:"^1.2.0",mkdirp:"^0.5.1",ncp:"^2.0.0","node-sass":"^4.12.0","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.3.0","pretty-error":"^2.0.0",prompt:"^1.0.0","raw-loader":"^0.5.1",rembrandt:"^0.1.3",rimraf:"^2.6.2",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","styled-components":"^4.2.0","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^1.2.5","vinyl-source-stream":"0.1.1",webpack:"^3.12.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{"can-use-dom":"^0.1.0",canvas:"^2.6.0",gl:"^4.1.1","lodash.debounce":"^4.0.8","lodash.memoize":"^4.1.2","lodash.throttle":"^4.1.1",opn:"^5.3.0",request:"^2.88.0","resize-observer-polyfill":"^1.5.1"},devEngines:{node:"8.x || 9.x || 10.x || 11.x || 12.x"}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(72);n.d(t,"ImageLoader",(function(){return i.a}));var r=n(71);n.d(t,"JSONLoader",(function(){return r.a}))},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.ColorMatrix;function d(e,t,n,i,r){return(e-t)*(r-i)/(n-t)+i}var _=function(e){return(Math.max(e.r,e.g,e.b)+Math.min(e.r,e.g,e.b))/2},g=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(322),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,l=s.colorMatrix,u=s.gamma,c=s.shadows,h=s.highlights,p=s.whites,g=s.blacks,m=1!==u,y=0!==c||0!==h,v=new f.Color(0,0,0,0),b=0;b<i.width*i.height;b++){var w=4*b;if(v.r=a.data[w]/255,v.g=a.data[w+1]/255,v.b=a.data[w+2]/255,m&&(v.r=Math.pow(v.r,1/Math.max(u,1e-7)),v.g=Math.pow(v.g,1/Math.max(u,1e-7)),v.b=Math.pow(v.b,1/Math.max(u,1e-7))),y){var k=_(v),x=c>=0?f.Utils.clamp(Math.pow(k,1/(c+1))+-.76*Math.pow(k,2/(c+1))-k,0,Math.max(c,1)):-f.Utils.clamp(Math.pow(k,1/(1-c))+-.76*Math.pow(k,2/(1-c))-k,0,Math.max(-c,1)),T=x*k*k,R=x-T,C=k+T+(h<0?f.Utils.clamp(1-Math.pow(1-k,1/(1-h))- -.8*Math.pow(1-k,2/(1-h))-k,-1,0):-f.Utils.clamp(1-Math.pow(1-k,1/(1+h))- -.8*Math.pow(1-k,2/(1+h))-k,-1,0));v.r=f.Utils.clamp(C*((v.r+R)/Math.max(k,1e-7)),0,1),v.g=f.Utils.clamp(C*((v.g+R)/Math.max(k,1e-7)),0,1),v.b=f.Utils.clamp(C*((v.b+R)/Math.max(k,1e-7)),0,1)}(v=l.apply(v).clamp(0,1)).r=d(v.r,0,1,g/2,1+p/2),v.g=d(v.g,0,1,g/2,1+p/2),v.b=d(v.b,0,1,g/2,1+p/2),a.data[w]=255*v.r,a.data[w+1]=255*v.g,a.data[w+2]=255*v.b}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);g.prototype.availableOptions={gamma:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT},shadows:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},highlights:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT},whites:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},blacks:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new p,uniformType:f.UniformType.MAT4},colorOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}},t.a=g},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(7)),_=n(8),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new _.Brightness({brightness:0})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"render",value:function(e,n,i){return this._stack.isEmpty()&&this._stack.push(new _.Brightness({brightness:0})),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"render",this).call(this,e,n,i)}}]),t}(d.a);v.isIdentity=!0,v.identifier="identity",t.a=v},function(e,t,n){var i=n(5),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(18)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var v=function(e){function t(){var e;g(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(352),a}return y(t,e),_(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.lookupTableData,l=0;l<i.width*i.height;l++){var u=4*l,c=a.data[u];a.data[u]=s[4*c];var f=a.data[u+1];a.data[u+1]=s[1+4*f];var h=a.data[u+2];a.data[u+2]=s[2+4*h]}o.putImageData(a,0,0)}}]),t}(p.Engine.Filter);v.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:1,uniformType:p.UniformType.INT},lookupTableData:{type:p.OptionType.ARRAY,default:[]}};var b=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._filter=new v({lookupTable:o._options.textureGLUnit}),o._textures={},o._renderers={},o}return y(t,e),_(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(e){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var t=new Uint8Array(this._options.data),n=e.getRenderer(),i=n.id;this._renderers[i]=n,this._textures[i]||(this._textures[i]=new p.Engine.BaseTexture);var r=this._textures[i],o=new p.Engine.PixelArrayImage(256,1,t);r.setSource(o),r.setGLUnit(this._options.textureGLUnit),n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(r)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var o=r()(t,n);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}}]),t}(d.a);t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(414)),_=n(74),g=n(176),m=n(416),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=p.Math.Vector2,x=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._persistedPaths=[],o._outputCanvasDirty=!0,o._outputCanvas=p.Utils.createCanvas(),o._outputContext=o._outputCanvas.getContext("2d"),o._persistCanvas=p.Utils.createCanvas(),o._persistContext=o._persistCanvas.getContext("2d"),o._nextCanvas=p.Utils.createCanvas(),o._texture=p.Engine.Texture.fromCanvas(o._outputCanvas),o._sprite.setTexture(o._texture),o._onPathUpdate=o._onPathUpdate.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"applyFlip",value:function(e){this._options.paths.forEach((function(t){t.forEachControlPoint((function(t){var n=t.getPosition().clone();switch(e){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}t.setPosition(n)})),t.setDirty(!0)})),this._reset()}},{key:"applyRotation",value:function(e){this._options.paths.forEach((function(t){t.forEachControlPoint((function(t){var n=t.getPosition().clone();90===e?(n.flip(),n.x=1-n.x):-90===e&&(n.flip(),n.y=1-n.y),t.setPosition(n)})),t.setDirty(!0)})),this._reset()}},{key:"applyTransform",value:function(e){var t=null;this._options.paths.forEach((function(n){n.forEachControlPoint((function(t){t.setPosition(e.applyToRelativePoint(t.getPosition()))}));var i=n.getBrush();i!==t&&(i.setSize(e.applyToRelativeSize(i.getSize())),t=i),n.setDirty(!0)})),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var e=this._outputCanvas,t=e.width,n=e.height;this._outputContext.clearRect(0,0,t,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var e=this._persistCanvas,t=e.width,n=e.height;this._persistContext.clearRect(0,0,t,n)}}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=v(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="brush"),i}},{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map((function(e){return e.serializeOptions(void 0,n)})):v(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"createPath",value:function(e){var t=new d.a(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),e&&i&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach((function(e){e.setDirty(!0)})))}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[n],t)}},{key:"render",value:function(e){var t=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,e),p.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach((function(n){n.render(e),n.getClosed()&&-1===t._persistedPaths.indexOf(n)&&t._onPathPersist(n)})),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach((function(e){e.getClosed()||e.renderToCanvas(t._outputCanvas)})),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(e,n){n&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,n),p.Utils.ensureCanvasDimensions(this._persistCanvas,n),this._texture.getBaseTexture().update()),this.render(n);var i=e.getRenderer();i.isOfType(p.RendererType.WEBGL)&&i.updateTexture(this._texture.getBaseTexture()),v(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"_createRadialBrush",value:function(){return new m.a}},{key:"_getTempCanvas",value:function(){return this._nextCanvas}},{key:"dispose",value:function(){v(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}]),t}(_.a);x.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new k(0,0)},scale:{type:p.OptionType.VECTOR2,default:new k(1,1)},anchor:{type:p.OptionType.VECTOR2,default:new k(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new k(0,0)},rotation:{type:p.OptionType.NUMBER,default:0},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){var t=this;return e=e.map((function(e){if(e instanceof d.a)return e;var n=e.brush,i=e.closed,r=new d.a(t._operation,{brush:n,closed:i},t._nextCanvas);return e.controlPoints.forEach((function(e){r.addControlPoint(e)})),r})),this._reset(),e}}},x.type="brush",x.Brush=g.a,x.Path=d.a,x.Brushes={RadialBrush:m.a},t.a=x},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=f.Math.Vector2,g=function(e){function t(){var e;p(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._lastOptions={},o._lastInputDimensions=new _(0,0),o._brush=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.image,i=t.size;n.width=n.height=Math.ceil(i*e.min());var r=f.Utils.createCanvas();r.width=n.width,r.height=n.height;var o=r.getContext("2d");o.drawImage(n,0,0,r.width,r.height);var a=this._tintImageData(o.getImageData(0,0,r.width,r.height),r.width,r.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=e.clone(),r}},{key:"_tintImageData",value:function(e){for(var t=this._options.color,n=0;n<e.data.length;n+=4)e.data[n]+=(255*t.r-e.data[n])*t.a,e.data[n+1]+=(255*t.g-e.data[n+1])*t.a,e.data[n+2]+=(255*t.b-e.data[n+2])*t.a;return e}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),t}(f.Configurable);t.a=g,g.prototype.availableOptions={identifier:{type:f.OptionType.STRING},image:{type:f.OptionType.IMAGE},size:{type:f.OptionType.NUMBER,default:.05},color:{type:f.OptionType.COLOR,default:f.Color.RED}}},function(e,t,n){var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),n(178)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=o.Math.Vector2,u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return s(e,[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new a.a(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(e,t){t.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+e.fontSize+'px "'+this._text.getFontFamily()+'"',t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(t.lineWidth=n)}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map((function(e){return e.replace(/\s+$/i,"")}))}},{key:"_renderTextLine",value:function(e,t){var n=this._text.getAlignment(),i=new l(0,t);switch(n){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(e,i.x,i.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,i.x,i.y))}},{key:"update",value:function(e,t){var n=this.calculateFontStyles(e,t);if(n){var i=this._calculateText(e,n,t),r=i.dimensions,o=i.lines;this._renderText(e,r,o,n,t),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var e=this._canvas,t=e.width,n=e.height,i=this.rotation,r=Math.cos(i),o=Math.sin(i),a=new l(Math.abs(t*r)+Math.abs(n*o),Math.abs(t*o)+Math.abs(n*r));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(i),this._finalContext.drawImage(this._canvas,-t/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(e,t,n,i,r){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*r.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(i,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,i.topPadding+i.lineHeight*o)}}},{key:"calculateFontStyles",value:function(e,t){var n=this._text.getFontFamily(),i=this._text.getFontSize()*t.y,r=this._text.getAbsoluteTextHeight(t),o=r*this._text.getLineHeight(),a={fontFamily:n,fontSize:i,lineHeight:o,topPadding:r*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===i&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(e,t,n){var i=this._text.getMaxWidth()*n.x;this._applyTextOptions(t,this._context);var r=new l,o=this._text.getText().split("\n");if(void 0!==i)r.x=i,o=this._buildOutputLines(i);else for(var a=0;a<o.length;a++){var s=o[a];r.x=Math.max(r.x,this._context.measureText(s).width)}var u=t.lineHeight;return r.y=o.length*u,{dimensions:r,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(e,t){var n=this.calculateFontStyles(e,t);return this._calculateText(e,n,t).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}]),e}();t.a=u},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._lastFontStyle={}}return o(e,[{key:"getLines",value:function(){for(var e=this,t=[],n=[],i=this._lines.length,r=0;r<i;r++){for(var o=this._lines[r],a=this._buildWords(o),s=a.length,l=0;l<s;l++){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(t.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){var h=this._splitWord(u);t=t.concat(h.lines),h.rest&&(n=[h.rest])}}else n.push(u)}t.push(n.join("")),n=[]}return t.map((function(t){return e._trimLine(t,e._context.textAlign)}))}},{key:"_trimLine",value:function(e,t){return e}},{key:"_buildWords",value:function(e){for(var t=[],n="",i=e.length,r=0;r<i;r++){var o=e[r];n+=o," "!==o&&"-"!==o&&r!==i-1||(t.push(n),n="")}return t}},{key:"_splitWord",value:function(e){for(var t={lines:[],rest:null},n=e.length,i=[],r=0;r<n;r++){var o=e[r];this._getWidth(i.concat(o).join(""))>this._maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[o]):i.push(o),r===n-1&&i.length>0&&(t.rest=i.join(""))}return t}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(e){return this._context.measureText(e).width}},{key:"setText",value:function(e){this._text=e,this._lines=e.split("\n")}},{key:"setMaxWidth",value:function(e){this._maxWidth=e}}]),e}();t.a=a},function(e,t,n){n.d(t,"a",(function(){return R}));var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),l=n.n(s),u=n(5),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(75)),v=n(180),b=n(26),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=function(e){function t(){return x(this,t),T(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"_layoutRow",value:function(e,t,n,i){return new b.a({words:e,width:t,attributes:n})}},{key:"_layoutRows",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||g()(t.prototype),"_layoutRows",this).call(this,e,n),r=.032*n,o=.08*n,s=new v.a({width:n,height:r,type:v.a.FormType.LongLine,shearingAngle:0}).layout(),l=new v.a({width:n,height:o,type:v.a.FormType.LongAndShortLine,shearingAngle:0}).layout();return[s].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}(i),[l])}}]),t}(y.a);R.defaultFontIdentifiers=["imgly_font_summer_font_light"],R.identifier="imgly_text_design_blocks_light",R.prototype.availableOptions=w({},y.a.prototype.availableOptions,{fontIdentifiers:{type:m.OptionType.ARRAY,default:R.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(52)),_=n(92),g=n(33),m=n(48),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=p.Math.Rectangle,x=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o.setSize(new g.a(o.getWidth(),o.getHeight())),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_calculateLayoutElements",value:function(){return[new d.a({frame:this._getTextFrame()})]}},{key:"render",value:function(e){var n=this._getFrame(),i=this.getType(),r=this.getAttributes().getTextColor(),o=n.height/3,a=new k(n.x,n.y,n.width,o),s=new k(n.x,n.y+2*o,n.width,o);switch(i){case t.FormType.Rect:Object(m.d)(e,n,r);break;case t.FormType.DoubleRect:Object(m.d)(e,a,r),Object(m.d)(e,s,r);break;case t.FormType.DoubleRectFirstPunctuated:Object(m.e)(e,a,r),Object(m.d)(e,s,r);break;case t.FormType.DoubleRectSecondPunctuated:Object(m.d)(e,a,r),Object(m.e)(e,s,r);break;case t.FormType.LongLine:var l=n.height/2,u=new k(n.x,n.y,n.width,l);Object(m.c)(e,u,.5*u.height,r);break;case t.FormType.LongAndShortLine:var c=.2*n.height,f=.75*c;a=new k(n.x,n.y+c,n.width,c);var h=n.x+.25*n.width,p=n.y+n.height-f;s=new k(h,p,.5*n.width,f),Object(m.c)(e,a,.5*a.height,r),Object(m.c)(e,s,.5*s.height,r)}}}]),t}(_.a);x.FormType={Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"},x.prototype.availableOptions=y({},_.a.prototype.availableOptions,{height:{type:p.OptionType.NUMBER,default:100},type:{type:p.OptionType.STRING,default:x.FormType.Rect,available:p.Utils.values(x.FormType)}})},function(e,t,n){n.d(t,"a",(function(){return R}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(75)),m=n(26),y=n(123),v=n(47),b=n(125),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=function(e){function t(){return x(this,t),T(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%n.length]}},{key:"_minimumNumberOfLines",value:function(e){return Math.max(Math.floor(.7*function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_minimumNumberOfLines",this).call(this,e)),1)}},{key:"_maximumNumberOfLines",value:function(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(e,n,i,r){return this._createSingleRow(t.RowType.Single,e,i,r)}},{key:"_createSingleRow",value:function(e,n,i,r){var o=r.getFontIdentifier(),a="imgly_font_amberlight"===o||"imgly_font_handycheera_regular"===o?(new v.a).set(n.getLowerCase()):n;switch(e){case t.RowType.Single:return new m.a({words:a,width:i,attributes:r});case t.RowType.SingleImage:return new b.a({words:a,width:i,attributes:r});default:return _.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '"+e+"'"),null}}}]),t}(g.a);R.defaultFontIdentifiers=["imgly_font_handycheera_regular","imgly_font_rasa_regular"],R.defaultBanderoles=[y.a.Celebrate1,y.a.Celebrate2],R.identifier="imgly_text_design_celebrate",R.RowType={Single:"SINGLE",SingleImage:"SINGLE_IMAGE"},R.prototype.availableOptions=w({},g.a.prototype.availableOptions,{relativeLineSpacing:{type:_.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:_.OptionType.ARRAY,default:R.defaultFontIdentifiers},banderoles:{type:_.OptionType.ARRAY,default:R.defaultBanderoles}})},function(e,t,n){n.d(t,"a",(function(){return E}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(76)),m=n(26),y=n(21),v=n(433),b=n(47),w=n(20),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){function t(){var e;R(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=C(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new y.a(.1,.1,.1,.1),o._alreadyContainsARowWithScriptFont=!1,o._backgroundsRandomizer=new w.a(0),o._seedPool.push(o._backgroundsRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),x(t,[{key:"getImagePaths",value:function(){return _.Utils.Array.flatten(v.a.Backgrounds.map((function(e){return e.getImagePaths()})))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(v.a.Backgrounds)}},{key:"generateLayoutData",value:function(e,n){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),T(t.prototype.__proto__||d()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_fontForRow",value:function(e,n){var i=T(t.prototype.__proto__||d()(t.prototype),"_fontForRow",this).call(this,e,n);return"imgly_font_petit_formal_script"===i&&(this._alreadyContainsARowWithScriptFont&&(i="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),i}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r="imgly_font_petit_formal_script"===i.getFontIdentifier();return new m.a({words:r?(new b.a).set(e.getLowerCase()):e,width:n,attributes:i})}}]),t}(g.a);E.identifier="imgly_text_design_equal_width",E.defaultFontIdentifiers=["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"],E.prototype.availableOptions=k({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:E.defaultFontIdentifiers},relativeLineSpacing:{type:_.OptionType.NUMBER,default:.025}})},function(e,t,n){n.d(t,"a",(function(){return _}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"render",value:function(e,t,n,i,r){f.Log.warn("TextDesignBackground#render: Abstract class")}}]),t}(f.Configurable);_.prototype.availableOptions={}},function(e,t,n){var i=n(23);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape;if(2!==e.length)throw new Error("UnpackRGBAFilter expects 2D inputs");return[1,e[0],e[1],3]}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        //       x, y, z, w\n        // e.g. [0, 4, 3, 2] (which is the blue channel of the pixel at x: 3, y: 4)\n        ivec4 outputCoords = getOutputCoords();\n        \n        int row = outputCoords.y;\n        int col = outputCoords.z;\n        int offset = outputCoords.w;\n\n        int index = row * int(x_sizeRC.y) + col;\n        int logR = index / int(x_sizeRC.y);\n        int logC = index - logR * int(x_sizeRC.y);\n        vec2 uv = (vec2(logC, logR) + halfCR) / x_texRC.yx;\n        vec4 color = texture2D(x, uv);\n\n        float component = 0.0;\n        if (offset == 0) {\n          component = color.r;\n        } else if (offset == 1) {\n          component = color.g;\n        } else if (offset == 2) {\n          component = color.b;\n        }\n        gl_FragColor = vec4(component, 0.0, 0.0, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!0}}]),t}(f.b);t.a=_},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._uniforms.blendLeftTopRightBottom={type:p.UniformType.FLOAT4,value:o.availableOptions.blendLeftTopRightBottom.default},o._uniforms.blendRadius={type:p.UniformType.FLOAT,value:o.availableOptions.blendRadius.default},o.prepareUniforms(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"requiresFloatTextures",value:function(){return!1}},{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=this._getInputWithName("y");if(e.logicalShape[0]!==t.logicalShape[0]||e.logicalShape[1]!==t.logicalShape[1])throw new Error("X and Y inputs of "+this.constructor.name+" must have same shape.");return e.logicalShape}},{key:"_updateAdditionalUniforms",value:function(e){e.setUniform("blendLeftTopRightBottom",this.getBlendLeftTopRightBottom()),e.setUniform("blendRadius",this.getBlendRadius())}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec4 blendLeftTopRightBottom;\n      uniform float blendRadius;\n\n      void main() {\n        vec2 coords = vec2(getOutputCoords());\n\n        vec2 blendVertical = vec2(coords.x, x_sizeRC.x - coords.x) / vec2(x_sizeRC.x * blendRadius); // topBlend, bottomBlend\n        vec2 blendHorizontal = vec2(coords.y, x_sizeRC.y - coords.y) / vec2(x_sizeRC.y * blendRadius); // leftBlend, rightBlend\n        vec4 factorLeftTopRightBottom = clamp(vec4(blendHorizontal.x, blendVertical.x, blendHorizontal.y, blendVertical.y), vec4(0.0), vec4(1.0));\n        vec4 maskVector = (vec4(1.0) - blendLeftTopRightBottom) * vec4(2.0); // [0, 1, 1, 1] becomes [2, 0, 0, 0]\n        vec4 maskedFactorLeftTopRightBottom = factorLeftTopRightBottom + maskVector; // [0.25, 0.5, 1.0, 1.0] becomes [2.25, 1.0, 1.0]\n        float factor = min(min(maskedFactorLeftTopRightBottom.x, maskedFactorLeftTopRightBottom.y), min(maskedFactorLeftTopRightBottom.z, maskedFactorLeftTopRightBottom.w)); // Choose the smallest blending factor\n        \n        vec2 uv = UVfrom2D(x_texRC, x_sizeRC, int(x_sizeRC.y), int(coords.x), int(coords.y));\n        vec4 xColor = texture2D(x, uv);\n        vec4 yColor = texture2D(y, uv);\n\n        gl_FragColor = mix(yColor, xColor, factor);\n      }\n    "}}]),t}(d.b);y.prototype.availableOptions=r()({blendLeftTopRightBottom:{type:p.OptionType.ARRAY,default:[1,1,1,1]},blendRadius:{type:p.OptionType.NUMBER,default:.2}},d.b.prototype.availableOptions),t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"determineSupportedConfiguration",value:function(t){var n=!1;if(e._cachedConfigs||(e._cachedConfigs={},n=!0),e._cachedConfigs[t.id])return e._cachedConfigs[t.id];var i=t.getExtension("OES_texture_float"),r=t.FLOAT,a=t.getExtension("OES_texture_half_float"),s=null!==a?a.HALF_FLOAT_OES:null,l=null!==i,u=e._canCreateTexture(t,r,t.LUMINANCE),c=null!==a&&e._canCreateTexture(t,s,t.RGBA),f=e._canCreateTexture(t,s,t.LUMINANCE),h=l&&(t.getExtension("WEBGL_color_buffer_float")||e._canBindBuffer(t,r,t.RGBA)),p=e._canBindBuffer(t,r,t.LUMINANCE),d=e._canBindBuffer(t,s,t.LUMINANCE),_=t.FLOAT,g=t.RGBA,m="?";f?(m="Float16 Luminance",_=s,g=t.LUMINANCE):c?(m="Float16 RGBA",_=s):u?(m="Float32 Luminance",g=t.LUMINANCE):m="Float32 RGBA";var y=r,v=t.RGBA,b="?";d?(b="Float16 Luminance",y=s,v=t.LUMINANCE):p?(b="Float32 Luminance",y=r,v=t.LUMINANCE):b="Float32 RGBA",n&&o.Log.info("\nArt Filter configuration:\nWeight Textures: "+m+"\nRender Textures: "+b);var w={environmentSupported:h,weightTextureType:_,weightTextureFormat:g,renderTextureType:y,renderTextureFormat:v};return e._cachedConfigs[t.id]=w,w}},{key:"_canCreateTexture",value:function(e,t,n){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);var r=n===e.RGBA?4:1,o=new Uint16Array(r);t===e.FLOAT&&(o=new Float32Array(r)),1===r&&e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,n,t,o),e.pixelStorei(e.UNPACK_ALIGNMENT,4);var a=e.isTexture(i),s=e.getError()!==e.NO_ERROR;return e.deleteTexture(i),a&&!s}},{key:"_canBindBuffer",value:function(e,t,n){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,n,t,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.deleteTexture(i),e.deleteFramebuffer(r),o===e.FRAMEBUFFER_COMPLETE}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=n(54),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){return d(this,t),_(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("AddFilter requires two inputs: x and y.");var e=this._getInputWithName("x"),t=this._getInputWithName("y");if(!h.a.isSameShape(e.logicalShape,t.logicalShape))throw Error("AddFilter inputs must have matching input shapes ("+e.logicalShape+" vs. "+t.logicalShape+").");return e.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n        float yVal = getY(coords.x, coords.y, coords.z, coords.w);\n        \n        float result = xVal + yVal;\n        setOutput(result);\n      }\n    "}}]),t}(f.b);t.a=g},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // WebGL doesn't offer tanh, taken from TFJS\n        float e2x = exp(-2.0 * abs(x));\n        float tanh = sign(x) * (1.0 - e2x) / (1.0 + e2x);\n\n        float rgbValue = (tanh * 150.0) + 127.5;\n        float clamped = clamp(rgbValue, 0.0, 255.0);\n        setOutput(clamped / 255.0);\n      }\n    "}}]),t}(f.b);t.a=_},function(e,t,n){var i=n(6),r=n.n(i),o=n(29),a=n.n(o),s=n(25),l=n.n(s),u=n(0),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(13)),v=n(133),b=function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=function(e){function t(){return k(this,t),x(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),w(t,[{key:"_calculateOutputShape",value:function(){if(2!==this._options.inputs.length)throw Error("Conv2DFilter requires two inputs: x and w.");var e=this._getInputWithName("x"),t=this._getInputWithName("w"),n=b(e.logicalShape,4),i=n[0],r=n[1],o=n[2],a=(n[3],b(t.logicalShape,4)),s=a[0],l=a[1],u=a[3],c=this._options.stride,f=this._options.stride,h=v.a.calculatePadding(this._options.padding,r,o,c,f,s,l),p=h.padInfo,d=h.outHeight,_=h.outWidth;return this._outChannels=u,this._padInfo=p,[i,d,_,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var e=this._getInputWithName("x").logicalShape[3],t=this._padInfo.top,n=this._padInfo.left,i=4*Math.floor(e/4),r=e%4,o=this._options.stride;return"\n    const ivec2 strides = ivec2("+o+", "+o+");\n    const ivec2 pads = ivec2("+t+", "+n+");\n\n    const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int batch = coords[0];\n      int d2 = coords[3];\n\n      ivec2 xRCCorner = coords.yz * strides - pads;\n      int xRCorner = xRCCorner.x;\n      int xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (int wR = 0; wR < max_filter_iterations; wR++) {\n        if (wR >= w_shape[0]) { break; }\n        int xR = xRCorner + wR;\n        if (xR < 0 || xR >= x_shape[1]) {\n          continue;\n        }\n\n        for (int wC = 0; wC < max_filter_iterations; wC++) {\n          if (wC >= w_shape[1]) { break; }\n          int xC = xCCorner + wC;\n\n          if (xC < 0 || xC >= x_shape[2]) {\n            continue;\n          }\n\n          for (int d1 = 0; d1 < "+i+"; d1 += 4) {\n            vec4 xValues = vec4(\n              getX(batch, xR, xC, d1),\n              getX(batch, xR, xC, d1 + 1),\n              getX(batch, xR, xC, d1 + 2),\n              getX(batch, xR, xC, d1 + 3)\n            );\n            vec4 wValues = vec4(\n              getW(wR, wC, d1, d2),\n              getW(wR, wC, d1 + 1, d2),\n              getW(wR, wC, d1 + 2, d2),\n              getW(wR, wC, d1 + 3, d2)\n            );\n\n            dotProd += dot(xValues, wValues);\n          }\n\n          if ("+(1===r)+") {\n            dotProd +=\n              getX(batch, xR, xC, "+i+") *\n              getW(wR, wC, "+i+", d2);\n          } else if ("+(2===r)+") {\n            vec2 xValues = vec2(\n              getX(batch, xR, xC, "+i+"),\n              getX(batch, xR, xC, "+i+" + 1)\n            );\n            vec2 wValues = vec2(\n              getW(wR, wC, "+i+", d2),\n              getW(wR, wC, "+i+" + 1, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          } else if ("+(3===r)+") {\n            vec3 xValues = vec3(\n              getX(batch, xR, xC, "+i+"),\n              getX(batch, xR, xC, "+i+" + 1),\n              getX(batch, xR, xC, "+i+" + 2)\n            );\n            vec3 wValues = vec3(\n              getW(wR, wC, "+i+", d2),\n              getW(wR, wC, "+i+" + 1, d2),\n              getW(wR, wC, "+i+" + 2, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          }\n        }\n      }\n      setOutput(dotProd);\n    }"}}]),t}(y.b);T.prototype.availableOptions=r()({stride:{type:m.OptionType.NUMBER,default:1},padding:{type:m.OptionType.STRING,default:"same"}},y.b.prototype.availableOptions),t.a=T},function(e,t,n){var i=n(6),r=n.n(i),o=n(29),a=n.n(o),s=n(25),l=n.n(s),u=n(0),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(13)),v=n(133),b=function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=function(e){function t(){return k(this,t),x(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),w(t,[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("DepthwiseConv2DFilter requires two inputs: x and w.");var e=this._getInputWithName("x"),t=this._getInputWithName("w"),n=b(e.logicalShape,4),i=n[0],r=n[1],o=n[2],a=n[3],s=b(t.logicalShape,4),l=s[0],u=s[1],c=s[3];if(l>9||u>9)throw new Error("Filter heights are limited to 9. Change shader source if larger ones are required.");var f=this._options.stride,h=this._options.stride,p=v.a.calculatePadding(this._options.padding,r,o,f,h,l,u),d=p.padInfo,_=p.outHeight,g=p.outWidth;return this._outChannels=c*a,this._padInfo=d,[i,_,g,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var e,t=this._padInfo.top,n=this._padInfo.left,i=this._options,r=i.stride,o=i.padMethod;switch(o){case"zero":e="return coords;";break;case"edge":e="return ivec4(clamp(vec4(coords), vec4(0.0), vec4(x_shape - 1)));"}return"\n      const ivec2 strides = ivec2("+r+", "+r+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n      const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n      \n    ivec4 convertCoordinatesForPadding(ivec4 coords) {\n      "+e+"\n    }\n    \n\n      void main() {\n        ivec4 coords = getOutputCoords();\n\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads; // current coordinates in x\n        int d2 = coords.w; // current channel index\n        int outChannels = w_shape[3] * x_shape[3];\n        int d1 = d2; // currently probed channel\n        int q = d2 - d1; // current filter index\n\n        int xRCorner = xRCCorner.x; // row index\n        int xCCorner = xRCCorner.y; // column index\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < max_filter_iterations; wR++) {\n          if (wR >= w_shape[0]) { break; }\n\n          int xR = xRCorner + wR; // x row index = current index + offset * y dilation\n          "+("zero"===o?"if (xR < 0 || xR >= x_shape[1]) { continue; }":"")+"\n\n          for (int wC = 0; wC < max_filter_iterations; wC++) {\n            if (wC >= w_shape[1]) { break; }\n\n            int xC = xCCorner + wC; // x column index = current index + offset * x dilation\n            "+("zero"===o?"if (xC < 0 || xC >= x_shape[2]) { continue; }":"")+"\n\n            float xVal = getX(convertCoordinatesForPadding(ivec4(batch, xR, xC, d1))); // Get value at current [batch, y, x, channel]\n            float wVal = getW(wR, wC, d1, q); // Get kernel value at current \n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}]),t}(y.b);T.prototype.availableOptions=r()({stride:{type:m.OptionType.NUMBER},padding:{type:m.OptionType.STRING,default:"same"},padMethod:{type:m.OptionType.STRING,default:"zero"}},y.b.prototype.availableOptions),t.a=T},function(e,t,n){var i=n(6),r=n.n(i),o=n(29),a=n.n(o),s=n(25),l=n.n(s),u=n(0),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(13)),v=n(54),b=function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=function(e){function t(){return k(this,t),x(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),w(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape[0],t=this._options,n=t.batchSize,i=t.windowSize;return[Math.ceil(e/i),n]}},{key:"_getTensorOperationSource",value:function(){var e=this._options.windowSize,t=this._getInputWithName("x").logicalShape[0],n=4*Math.floor(e/4),i=e%4,r="";return t%e>0&&(r="\n      if (inIdx < 0 || inIdx >= x_shape[0]) {\n        return initalizationValue;\n      }\n      "),"\n      const float initializationValue = 0.0;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+r+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        // row, col\n        ivec2 coords = getOutputCoords();\n        int batch = coords[1];\n        int outIdx = coords[0];\n        int inOffset = outIdx * "+e+";\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+n+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            // row, col\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            getValue(inIdx + 3, batch)\n          );\n\n          sumValue += dot(values, ones);\n        }\n\n        int inIdx = inOffset + "+n+";\n        if ("+(1===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if ("+(2===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if ("+(3===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        }\n        setOutput(sumValue);\n      }\n    "}}],[{key:"addFiltersForReduceSumOperationToGraph",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,2],r=e.getLogicalShapeAtIndex(n),o=t._computeOutAndReduceShape(r,i),a=b(o,2),s=(a[0],a[1]),l=v.a.getSizeOfLogicalShape(s),u=v.a.getSizeOfLogicalShape(r)/l,c=[l,u],f=n===e.getLastIndex(),h={name:"x",logicalShape:c,type:f?y.a.PREVIOUS:y.a.INDEX};f||(h.data=n);var p=t._buildReduceFilter(h);e.addFilter(p,!1);for(var d=p.outputLogicalShape();1!==d[0];){var _={name:"x",type:y.a.PREVIOUS,logicalShape:p.outputLogicalShape()};d=(p=t._buildReduceFilter(_)).outputLogicalShape(),e.addFilter(p)}return e.getLastIndex()}},{key:"_buildReduceFilter",value:function(e){var n=b(e.logicalShape,2),i=n[0],r=n[1],o=t._computeWindowSize(i);return new t({inputs:[e],windowSize:o,batchSize:r})}},{key:"_computeWindowSize",value:function(e){if(e<=30)return e;for(var t=Math.floor(Math.sqrt(e));t<e;++t)if(e%t==0)return t;return e}},{key:"_computeOutAndReduceShape",value:function(e,t){for(var n=[],i=e.length,r=0;r<i;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((function(t){return e[t]}))]}}]),t}(y.b);T.prototype.availableOptions=r()({axes:{type:m.OptionType.ARRAY,default:[1,2]},windowSize:{type:m.OptionType.NUMBER},batchSize:{type:m.OptionType.NUMBER}},y.b.prototype.availableOptions),t.a=T},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec4 coords = getOutputCoords();\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n\n        // 'Sum' input consists of a single value which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n\n        // 'X' is a 4D tensor holding arbitrary float values\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // Calculate the mean\n        float mean = xSum / numValuesPerChannel;\n\n        // Calculate a single variance component (x_i - mean)^2\n        float result = pow((x - mean), 2.0);\n        setOutput(result);\n      }\n    "}}]),t}(f.b);t.a=_},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=this._getInputWithName("variance"),n=this._getInputWithName("sum"),i=e.logicalShape[3];if(t.logicalShape[1]!==i||n.logicalShape[1]!==i)throw new Error("Variance and sum input depth must match x inputs channels for InstanceNormReluFilter.");return e.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // 'variance' input consists of a single value per channel which holds the sum of all values in x reduced by it's mean and squared afterwards\n        float nonMeanedVariance = getVarianceFlat(coords.w);\n        float variance = nonMeanedVariance / numValuesPerChannel;\n\n        // 'sum' input consists of a single value per channel which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n        float mean = xSum / numValuesPerChannel;\n\n        float netmu = x - mean;\n        float sigmaEpsilonSqrt = sqrt(variance + 0.001);\n\n        float normalized = netmu / sigmaEpsilonSqrt;\n        \n        // Calculate the instance normalized value of x\n        float shift = getShiftFlat(coords.w);\n        float scale = getScaleFlat(coords.w);\n        float result = (scale * normalized) + shift;\n\n        // If it's not NaN, calculate relu\n        "+(this.getAddRelu()?"\n      if (isNaN(result)) {\n        setOutput(result);\n      } else {\n        float relu = (result < 0.0) ? 0.0 : result;\n        setOutput(relu);\n      }\n    ":"setOutput(result);")+"\n      }\n    "}}]),t}(d.b);y.prototype.availableOptions=r()({shift:{type:p.OptionType.NUMBER},scale:{type:p.OptionType.NUMBER},addRelu:{type:p.OptionType.BOOLEAN,default:!0}},d.b.prototype.availableOptions),t.a=y},function(e,t,n){var i=n(6),r=n.n(i),o=n(29),a=n.n(o),s=n(25),l=n.n(s),u=n(0),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(13)),v=function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e;w(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=k(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._uniforms.sourceSizeRC={type:m.UniformType.FLOAT2,value:[0,0]},o._uniforms.targetSizeRC={type:m.UniformType.FLOAT2,value:[0,0]},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=v(e.logicalShape,4),n=t[0],i=t[3],r=v(this._options.size,2);return[n,r[0],r[1],i]}},{key:"_updateAdditionalUniforms",value:function(e){var t=v(this._getInputWithName("x").logicalShape,3),n=(t[0],t[1]),i=t[2],r={targetSizeRC:this.getSize(),sourceSizeRC:[n,i]};e.setUniforms(r)}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec2 sourceSizeRC;\n      uniform vec2 targetSizeRC;\n\n      void main() {\n        vec2 effectiveInSize = sourceSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveOutSize = targetSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveInputOverOutputRatioRC = effectiveInSize / effectiveOutSize;\n\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(min(sourceSizeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}]),t}(y.b);x.prototype.availableOptions=r()({size:{type:m.OptionType.ARRAY,required:!0},alignCorners:{type:m.OptionType.BOOLEAN,default:!0}},y.b.prototype.availableOptions),t.a=x},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(13),d=n(4),_=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var t=this.getInputs()[0].logicalShape;if(e.length!==t.length)throw new Error("Not enough or too many paddings for input shape "+t);return e.map((function(e,n){return e[0]+t[n]+e[1]}))}},{key:"_getTensorOperationSource",value:function(){var e=this.getInputs()[0].logicalShape.length,t="vec"+e;return"\n      i"+t+" start = i"+t+"("+this._options.paddings.map((function(e){return e[0]})).join(",")+");\n\n      void main () {\n        i"+t+" outC = getOutputCoords();\n        "+t+" coordsInInput = "+t+"(outC - start);\n        i"+t+" coords = i"+t+"(clamp(coordsInInput, "+t+"(0.0), "+t+"(x_shape - 1)));\n        setOutput(getX("+["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e).join(",")+"));\n      }\n    "}}]),t}(p.b);y.prototype.availableOptions=r()({paddings:{type:d.OptionType.ARRAY,required:!0}},p.b.prototype.availableOptions),t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      float kernel[9];\n      vec2 offset[9];\n      float factor = 0.1;\n    \n      void main ()\n      {\n        kernel[0] = 0.;\n        kernel[1] = -1. * factor;\n        kernel[2] = 0.;\n        kernel[3] = -1. * factor;\n        kernel[4] = 1. + 4. * factor;\n        kernel[5] = -1. * factor;\n        kernel[6] = 0.;\n        kernel[7] = -1. * factor;\n        kernel[8] = 0.;\n\n        float step_w = 1.0 / float(x_sizeRC.y);\n        float step_h = 1.0 / float(x_sizeRC.x);\n\n        offset[0] = vec2(-step_w, -step_h);\n        offset[1] = vec2(0.0, -step_h);\n        offset[2] = vec2(step_w, -step_h);\n        offset[3] = vec2(-step_w, 0.0);\n        offset[4] = vec2(0.0, 0.0);\n        offset[5] = vec2(step_w, 0.0);\n        offset[6] = vec2(-step_w, step_h);\n        offset[7] = vec2(0.0, step_h);\n        offset[8] = vec2(step_w, step_h);\n\n        vec2 uv = (gl_FragCoord.xy + halfCR) / x_texRC.yx;\n        vec4 sum = vec4(0.0);\n        for (int i = 0; i < 9; i++) {\n          vec4 color = texture2D(x, uv.xy + offset[i]);\n          sum += color * kernel[i];\n        }\n\n        gl_FragColor = sum;\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}]),t}(f.b);t.a=_},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"downloadDataURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),r=document.createElement("a");r.download=t+"."+i,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"downloadMSBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob&&navigator.msSaveBlob(e,t+".png")}},{key:"getExtensionFromDataURL",value:function(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(e){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return e;for(var t=o.a.decode(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),a=0;a<t.length;a++)r[a]=t[a];var s=new window.Blob([i],{type:n});return window.URL.createObjectURL(s)}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(31),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},g=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"getLabel",value:function(){var e=_[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic"}return e}}]),t}(f.Configurable);t.a=g,g.prototype.availableOptions={identifier:{type:f.OptionType.STRING,required:!0},fontFamily:{type:f.OptionType.STRING,required:!0},fontWeight:{type:f.OptionType.ALL,default:400},fontStyle:{type:f.OptionType.STRING,default:"normal"},textMetrics:{type:f.OptionType.OBJECT,default:null},provider:{type:f.OptionType.STRING,available:["google","file"]},filePath:{type:f.OptionType.STRING},default:{type:f.OptionType.BOOLEAN,default:!1},font:{type:f.OptionType.OBJECT}}},function(e,t,n){var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(9),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=2*Math.PI,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._serializeOperations=this._serializeOperations.bind(this)}return l(e,[{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=s.k.defaults(e,{image:!0});var t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(e){var t=this._editor.getImage(),n=t.width,i=t.height;if(!this._options.image)return e.inputImage={width:n,height:i},a.a.resolve(e);var r=s.k.createCanvas();r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);var o=r.toDataURL(s.e.PNG);return e.inputImage={type:s.e.PNG,data:o.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},a.a.resolve(e)}},{key:"_serializeOperations",value:function(e){var t=this,n=[];return this._editor.operations.getStack().forEach((function(e){var i=t._serializeOperation(e,n);i&&n.push(i)})),e.operations=n.filter((function(e){return e})),a.a.resolve(e)}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:s.g.warn("Unable to serialize operation of type "+e.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+u)%u,{type:"crop",options:t}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(e){return"identity"===e.getIdentifier()?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=e.availableOptions,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(i){var r=t[i],o=e.getOption(i),a=r.minValue,s=r.midValue,l=r.maxValue;n[i]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),{type:"adjustments",options:n}}},{key:"_serializeSpriteOperation",value:function(e,t){var n=this,i=t.filter((function(e){return"sprite"===e.type})),r=void 0,o=!0;if(i.length?(r=i.pop(),o=!1):r={type:"sprite",options:{sprites:[]}},e.getSprites().forEach((function(t){var i=null;t instanceof e.constructor.StickerSprite?i=n._serializeSticker(e,t):t instanceof e.constructor.TextSprite?i=n._serializeText(e,t):t instanceof e.constructor.BrushSprite?i=n._serializeBrush(e,t):t instanceof e.constructor.TextDesignSprite&&(i=n._serializeTextDesign&&n._serializeTextDesign(e,t)),i&&r.options.sprites.push(i)})),o)return r}},{key:"_serializeSticker",value:function(e,t){var n=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+u)%u;var r=n.availableOptions;return i.adjustments={brightness:n.getBrightness()-r.brightness.default,saturation:n.getSaturation()-r.saturation.default,contrast:n.getContrast()-r.contrast.default},{type:"sticker",options:i}}},{key:"_serializeText",value:function(e,t){var n=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+u)%u,{type:"text",options:n}}},{key:"_serializeBrush",value:function(e,t){var n=this;return{type:"brush",options:{paths:t.getPaths().map((function(e){return n._serializePath(e)}))}}}},{key:"_serializePath",value:function(e){var t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map((function(e){return e.getPosition().toObject()})),t}},{key:"_serializeRadialFocusOperation",value:function(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))})),n}}]),e}();t.a=c,c.version="1.0.0"},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(79),h=n.n(f),p=n(10),d=n.n(p),_=n(9),g=n(202),m=n(134),y=n(492),v=n(41),b=n(135),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var T=void 0;void 0!==_.j.Operations.SpriteOperation&&(T=_.j.Operations.SpriteOperation.BrushSprite);var R=function(){function e(t,n){x(this,e),this._editor=t,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new g.a(this._ui,this._getOptions("filter")),this._stickerManager=new m.a(this._ui,this._getOptions("sticker")),this._brushManager=new y.a(this._ui,this._getOptions("brush")),this._fontManager=new v.a(this._ui,this._getOptions("text"))}var t,n;return w(e,[{key:"_getOptions",value:function(e){var t=this._editor.controls,n={};t&&t.get(e)&&(n=t.get(e).defaultOptions);var i=this._editor.getOptions();return _.k.deepDefaults({},i.editor.controlsOptions[e]||{},n)}},{key:"deserialize",value:function(){var e=this;return this._validateVersion().then((function(){return e._deserializeInputImage()})).then((function(){return e._deserializeOperations()}))}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?d.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):d.a.resolve()}},{key:"_deserializeInputImage",value:function(){var e=this;return new d.a((function(t,n){var i=e._data.inputImage,r=i.data,o=i.type;if(r&&o){var a=new window.Image;a.addEventListener("load",(function(){e._editor.setImage(a),t()})),a.src="data:"+o+";base64,"+r}else t()}))}},{key:"_deserializeOperations",value:(t=h.a.mark((function e(){var t,n,i,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._data.operations,n=[],i=0;case 3:if(!(i<t.length)){e.next=12;break}return r=t[i],e.next=7,this._deserializeOperation(r);case 7:o=e.sent,n.push(o);case 9:i++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})),n=function(){var e=t.apply(this,arguments);return new d.a((function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return d.a.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(s)}("next")}))},function(){return n.apply(this,arguments)})},{key:"_deserializeOperation",value:function(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=_.n.fromObject(t.start),r=_.n.fromObject(t.end);n>Math.PI&&(n-=2*Math.PI);var o={start:i,end:r};void 0!==n&&(o.rotation=n);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,o),a.set(o),d.a.resolve(a)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),d.a.resolve(n)):d.a.resolve()}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then((function(e){var i=t._editor.operations.getOrCreate("filter");return i.set({identifier:n.name,filter:e,intensity:n.intensity}),i})):(_.g.warn("Deserializer","Unknown filter `"+n.name+"`"),d.a.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=_.j.Operations.AdjustmentsOperation,n=e.options,i={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(e){if(void 0!==n[e]){var r=t.prototype.availableOptions[e],o=r.minValue,a=r.midValue,s=r.maxValue,l=n[e];l=l<0?a+(a-o)*l:a+(s-a)*l,i[e]=l}})),d.a.resolve(this._editor.operations.getOrCreate("adjustments",i))}},{key:"_deserializeSpriteOperation",value:function(e){var t=this,n=e.options,i=this._editor.operations.getOrCreate("sprite");if(!i)return d.a.resolve();var r=n.sprites.map((function(e){return t._deserializeSprite(i,e)})).filter((function(e){return e}));return d.a.all(r).then((function(e){return i.setSprites(e.filter((function(e){return e}))),i}))}},{key:"_deserializeSprite",value:function(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=_.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.name),a=this._stickerManager.getURLForSticker(o);return o?new d.a((function(t,o){var s=new window.Image;s.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,o=r.rotation,a=r.flipHorizontally,l=r.flipVertically,u={identifier:r.name,image:s,position:_.n.fromObject(r.position),dimensions:_.n.fromObject(r.dimensions),rotation:o,flipHorizontally:a,flipVertically:l,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((function(e){void 0!==r.adjustments[e]&&(u.adjustments[e]=r.adjustments[e]+n[e].default)})),t(e.createSticker(u))})),s.crossOrigin=n._editor.getCrossOrigin(),s.src=n._editor.getUI().getAssetPath(a)})):(_.g.warn("Deserializer","Unknown sticker '"+r.name+"'. Skipping sprite."),d.a.resolve())}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontFamily,a=n.fontWeight,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,h=new b.a(this._ui),p=this._fontManager.getFontByFontFamily(o);return p||(p=this._fontManager.getDefaultFont()),h.setFonts([p]),h.load().then((function(){var t=e.createText({fontSize:i,lineHeight:r,fontFamily:o,fontWeight:a,alignment:s,rotation:l,maxWidth:u,text:n.text,color:_.b.fromArray(c),backgroundColor:_.b.fromArray(f),position:_.n.fromObject(n.position)});return t._edited=!0,t}))}},{key:"_deserializeBrush",value:function(e,t){var n=this,i=t.options.paths,r=e.createBrush();return i.forEach((function(e){n._deserializeBrushPath(r,e)})),d.a.resolve(r)}},{key:"_deserializeBrushPath",value:function(e,t){var n=t.points,i=this._createBrushForPath(t),r=e.createPath(i);r.setClosed(!0),n.forEach((function(e){r.addControlPoint(_.n.fromObject(e))}))}},{key:"_createBrushForPath",value:function(e){var t=e.color,n=e.size,i={color:_.b.fromArray(t),size:n},o=this._brushManager.getFirstBrush();if(o.prototype&&o.prototype instanceof T)return new o(i);var s=_.k.extend({},o);delete s.image;var l=function(e){function t(){return x(this,t),k(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(T);return l.identifier=o.identifier,new l(_.k.extend({},s,i))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":var n=t.position,i=t.radius,r=t.gradientRadius,o=t.blurRadius;return d.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:_.n.fromObject(n),radius:i,gradientRadius:r,blurRadius:o}));case"linear":var a=t.start,s=t.end,l=t.size,u=t.gradientSize,c=t.blurRadius;return d.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:_.n.fromObject(a),end:_.n.fromObject(s),size:l,gradientSize:u,blurRadius:c}))}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))})),n}}]),e}();t.a=R,R.version="1.0.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(9),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this._ui=t,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:s.j.Operations.FilterOperation.Filters.IdentityFilter},this._categories=s.m.wrapFiltersInCategories(s.l.DEFAULTS.FILTERS.slice(0),e.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=i||t.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=s.m.wrapFiltersInCategories(this._options.categories,e.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}return l(e,[{key:"instantiateFilterWithIdentifier",value:function(e){var t=this,n={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(e);if(!i)return a.a.reject(new Error("Unknown filter with identifier `"+e+"`!"));if(i.prototype instanceof s.j.Operations.FilterOperation.Filter)return a.a.resolve(new i);var r=i.lutImage,o=i.resolution,l=i.horizontalTileCount,u=i.verticalTileCount,c=i.lightColor,f=i.darkColor;if(c&&f)return c=s.b.fromHex(c),f=s.b.fromHex(f),a.a.resolve(new s.j.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:c,darkColor:f}));var h=void 0;return this._ui.getPreloader&&(h=this._ui.getPreloader().getAsset(r)),(h?a.a.resolve(h):s.f.loadImage(this._ui.getAssetPath(r),n)).then((function(){return s.f.loadImage(t._ui.getAssetPath(r),n).then((function(e){return new s.j.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:o,horizontalTileCount:l,verticalTileCount:u})}))}))}},{key:"_initCategories",value:function(){var t=this;if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=s.m.wrapFiltersInCategories(this._options.categories,e.CATEGORY_ITEMS_PROPERTY):this._categories=s.m.mergeCategories(this._categories,this._options.categories,e.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){var n=[];this._categories.forEach((function(e){var i=e.filters.filter((function(e){return-1!==t._options.availableFilters.indexOf(e.identifier)}));i.length>0&&n.push({identifier:e.identifier,defaultName:e.defaultName,filters:i})})),this._categories=n}var i={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map((function(e){return e.filters})).reduce((function(e,t){return e.concat(t)}))};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach((function(e){t._categoriesById[e.identifier]=e})),i.filters.forEach((function(e){t._filtersByIdentifier[e.identifier]=e}))}},{key:"getFiltersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown filter category '"+e+"'");return this._categoriesById[e].filters}},{key:"getItemsByCategory",value:function(e){return this.getFiltersForCategory(e)}},{key:"getFilterByIdentifier",value:function(e){return this._filtersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesById[e]}}]),e}();c.CATEGORY_ITEMS_PROPERTY="filters",t.a=c},function(e,t,n){var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(494),l=n(31),u=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=[],this._observers=[]}return u(e,[{key:"add",value:function(e){this._fonts.push(e)}},{key:"load",value:function(){var e=this;return 0===this._fonts.length?a.a.resolve():(this._observers=[],this._fonts.forEach((function(t){e._observers.push(new s.a(t))})),l.Utils.executePromises(this._observers.map((function(e){return e.observe()}))))}},{key:"dispose",value:function(){this._observers.forEach((function(e){return e.dispose()}))}}]),e}();t.a=c},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(200),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=2*Math.PI,g=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+_)%_,1!==t.textureScale&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}]),t}(f.a);t.a=g,g.version="1.0.1"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(10),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(201),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){return y(this,t),v(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_deserializeOperation",value:function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=_.n.fromObject(t.start),r=_.n.fromObject(t.end),o=t.dimensions?_.n.fromObject(t.dimensions):null;if(r.x-i.x<=0||r.y-i.y<=0)throw new Error("A crop should not result in negative or zero dimensions - start: "+i+" - end: "+r);n>Math.PI&&(n-=2*Math.PI);var a={start:i,end:r};void 0!==n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");if(!s)return h.a.resolve();if(this._editor.broadcastTransform(s,a),s.set(a),o){var l=r.clone().subtract(i),u=s.getInputDimensions(!1).multiply(l);s.setTextureScale(o.x/u.x)}return h.a.resolve(s)}}]),t}(g.a);t.a=b,b.version="1.0.1"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(204),d=n(93),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){return m(this,t),y(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_serializeSticker",value:function(e,n){var i=e.getInputDimensions(!1),r=g(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,n);return"none"!==n.getTintMode()&&(r.options.tintColor=n.serializeOption("tintColor",!0)),r.options.dimensions=n.getDimensions().clone().divide(i.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializePath",this).call(this,e),i=e.getBrush();return i.hasOption("hardness")&&(n.hardness=i.getOption("hardness")),n}},{key:"_serializeOperation",value:function(e,n){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,n),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,n),null):g(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,n)}},{key:"_serializeFrameOperation",value:function(e,t){var n=t.filter((function(e){return"sprite"===e.type})),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}},{key:"_serializeOverlayOperation",value:function(e,t){if(e.getIdentifier()){var n=t.filter((function(e){return"sprite"===e.type})),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:d.a[e.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(e){return{identifier:e.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeOrientationOperation",this).call(this,e);return 90!==n.options.rotation&&270!==n.options.rotation||(n.options.flipHorizontally=!n.options.flipHorizontally,n.options.flipVertically=!n.options.flipVertically),n}},{key:"_serializeTransformOperation",value:function(e){var n=this._editor.operations;if(n.exists("orientation")){e=e.clone();var i=n.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var r=g(t.prototype.__proto__||h()(t.prototype),"_serializeTransformOperation",this).call(this,e);return r.type="transform",r}},{key:"_serializeText",value:function(e,n){var i=g(t.prototype.__proto__||h()(t.prototype),"_serializeText",this).call(this,e,n),r=e.getInputDimensions(!1);return i.options.fontIdentifier=n.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*r.x/r.min(),delete i.options.fontFamily,i}},{key:"_serializeFilterOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeFilterOperation",this).call(this,e);return n?(n.options.identifier=n.options.name,delete n.options.name,n):null}},{key:"_serializeRadialFocusOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeRadialFocusOperation",this).call(this,e),i=n.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,n}}]),t}(p.a);t.a=v,v.version="2.0.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(10),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(205),m=n(499),y=n(500),v=n(134),b=n(501),w=n(135),k=n(72),x=n(93),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=_.k.flipObject(x.a),I=function(e){function t(){var e;C(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=E(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));o._frameManager=new m.a(o._ui,o._getOptions("frame"));var a=o._getOptions("overlay");return a&&(o._overlayManager=new y.a(o._ui,a)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),T(t,[{key:"_deserializeSprite",value:function(e,n){return"frame"===n.type?this._deserializeFrame(e,n):"overlay"===n.type?this._deserializeOverlay(e,n):R(t.prototype.__proto__||d()(t.prototype),"_deserializeSprite",this).call(this,e,n)}},{key:"_deserializeOperation",value:function(e){return"transform"===e.type?this._deserializeTransformOperation(e):R(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){if(this._data.meta&&"html5"!==this._data.meta.platform)return R(t.prototype.__proto__||d()(t.prototype),"_deserializeOrientationOperation",this).call(this,e);var n=e.options,i=n.rotation,r=n.flipHorizontally,o=n.flipVertically,a=90===i&&!r&&!o;return a|=90===i&&r&&o,a|=270===i&&!r&&!o,(a|=270===i&&r&&o)&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),R(t.prototype.__proto__||d()(t.prototype),"_deserializeOrientationOperation",this).call(this,e)}},{key:"_deserializeTransformOperation",value:function(e){var n=this;return R(t.prototype.__proto__||d()(t.prototype),"_deserializeCropOperation",this).call(this,e).then((function(e){if(e){var t=_.k.Array.find(n._data.operations,(function(e){return"orientation"===e.type}));if(t){var i=t.options,r=i.rotation,o=i.flipHorizontally,a=i.flipVertically;90!==r&&270!==r||(!o&&a||o&&!a)&&(o=!o,a=!a),e.rotate(i.rotation),o&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),a&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e}}))}},{key:"_deserializeFrame",value:function(e,t){var n=this,i=t.options.identifier,r=this._frameManager.getFrameByIdentifier(i);if(!r)return _.g.warn("Deserializer","Unknown frame `"+i+"`. Skipping frame."),h.a.resolve();var o=new b.a(this._ui,r);return o.load().then((function(){n._editor.operations.getOrCreate("frame",{frame:o.getFrame()})}))}},{key:"_deserializeOverlay",value:function(e,t){var n=this,i=t.options,r=i.blendMode,o=i.intensity,a=i.identifier,s=this._overlayManager.getOverlayByIdentifier(a);if(!s)return _.g.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),h.a.resolve();var l=this._editor.getUI().getAssetPath(s.image);return k.a.load(l).then((function(e){n._editor.operations.getOrCreate("overlay",{alpha:o,identifier:a,blendMode:parseInt(O[r||s.blendMode],10),image:e})}))}},{key:"_createBrushForPath",value:function(e){var n=R(t.prototype.__proto__||d()(t.prototype),"_createBrushForPath",this).call(this,e);return void 0!==e.hardness&&n.hasOption("hardness")&&n.setHardness(e.hardness),n}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=_.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.identifier),a=v.a.getURLForSticker(o,"base");if(!o)return _.g.warn("Deserializer","Unknown sticker `"+r.identifier+"`. Skipping sprite."),h.a.resolve();var s=e.getInputDimensions(!1);return new h.a((function(t,l){var u=new window.Image;u.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,a=r.rotation,l=r.flipHorizontally,c=r.flipVertically,f={identifier:r.identifier,image:u,position:_.n.fromObject(r.position),dimensions:_.n.fromObject(r.dimensions).multiply(s.min()),rotation:a,flipHorizontally:l,flipVertically:c,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((function(e){void 0!==r.adjustments[e]&&(f.adjustments[e]=r.adjustments[e]+n[e].default)})),void 0!==r.tintColor&&void 0!==o.tintMode&&(f.tintColor=_.b.fromArray(r.tintColor),f.tintMode=o.tintMode),t(e.createSticker(f))})),u.crossOrigin=n._editor.getCrossOrigin(),u.src=n._editor.getUI().getAssetPath(a)}))}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then((function(e){var i=t._editor.operations.getOrCreate("filter");if(i)return i.set({identifier:n.identifier,filter:e,intensity:n.intensity}),i})):(_.g.warn("Deserializer","Unknown filter `"+n.identifier+"`"),h.a.resolve())}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options,i=n.options;if("radial"!==n.type)return R(t.prototype.__proto__||d()(t.prototype),"_deserializeFocusOperation",this).call(this,e);var r=this._editor.getImage(),o=r.width/r.height,a=i.start,s=i.end,l=i.gradientRadius,u=i.blurRadius,c=_.n.fromObject(s).subtract(_.n.fromObject(a)).multiply(o,1).len();return h.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:_.n.fromObject(a),radius:c,gradientRadius:l,blurRadius:u}))}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=new w.a(this._ui),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),f.load().then((function(){var t=e.getInputDimensions(!1),o=l*t.min()/t.x,f=e.createText({fontSize:i,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:_.b.fromArray(u),backgroundColor:_.b.fromArray(c),position:_.n.fromObject(n.position)});return f._edited=!0,f}))}}]),t}(g.a);t.a=I,I.version="2.0.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(206),m=n(503),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){return w(this,t),k(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"serialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(t.prototype.__proto__||d()(t.prototype),"serialize",this).call(this,n).then((function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:_.k.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t}))}},{key:"_serializeSticker",value:function(e,n){var i=b(t.prototype.__proto__||d()(t.prototype),"_serializeSticker",this).call(this,e,n);return i.options.alpha=n.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}},{key:"_serializeText",value:function(e,n){var i=b(t.prototype.__proto__||d()(t.prototype),"_serializeText",this).call(this,e,n);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}},{key:"_serializePath",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializePath",this).call(this,e);delete n.hardness,delete n.size,delete n.color;var i=e.getBrush();n.brush=i.serializeOptions(["identifier","size","color"],!0),void 0===n.brush.identifier&&delete n.brush.identifier,n.brush.color={rgba:n.brush.color};var r=i.getOption("hardness");return"undefined"!==r&&(n.brush.hardness=r),n}},{key:"_serializeFrameOperation",value:function(e,n){b(t.prototype.__proto__||d()(t.prototype),"_serializeFrameOperation",this).call(this,e,n);var i=n.filter((function(e){return"sprite"===e.type}));if(i.length){var r=i.pop().options.sprites.filter((function(e){return"frame"===e.type}))[0];e.getTintColor().equals(new _.b(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var o=e.serializeOptions(["scale","alpha"],!0);r.options=_.k.extend(r.options,o),r.options.size=r.options.scale,delete r.options.scale}}},{key:"_serializeTransformOperation",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializeTransformOperation",this).call(this,e);if(e._ratio){var i=void 0;i=e._ratio instanceof m.a?e._ratio.getIdentifier():e._ratio.identifier,n.options.meta={identifier:i}}return delete n.options.scale,n}},{key:"_serializeAdjustmentsOperation",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i=e.availableOptions,r={};return["gamma","whites","blacks","temperature"].forEach((function(t){var n=i[t],o=e.getOption(t),a=n.minValue,s=n.midValue,l=n.maxValue;r[t]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),n.options=y({},n.options,r),n}},{key:"_serializeOperation",value:function(e,n){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return b(t.prototype.__proto__||d()(t.prototype),"_serializeOperation",this).call(this,e,n)}}},{key:"_serializeMirroredFocusOperation",value:function(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){var t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}},{key:"_serializeBlurOperation",value:function(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}]),t}(g.a);t.a=x,x.version="3.0.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(10),d=n.n(p),_=n(1),g=n.n(_),m=n(9),y=n(207),v=n(134),b=n(55),w=n(72),k=n(41),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var I=void 0;void 0!==m.j.Operations.SpriteOperation&&(I=m.j.Operations.SpriteOperation.BrushSprite.Brush);var S=function(e){function t(){return C(this,t),E(this,(t.__proto__||g()(t)).apply(this,arguments))}return O(t,e),T(t,[{key:"_deserializeSticker",value:function(e,t){var n=m.j.Operations.SpriteOperation,i=t.options,r=this._stickerManager.getStickerByIdentifier(i.identifier);if(!r)return m.g.warn("Deserializer","Unknown sticker `"+i.identifier+"`. Skipping sprite."),d.a.resolve();var o=r.images.mediaBase,a=v.a.getURLForSticker(r,"base"),s=o.rawData?o.uris[0]:this._editor.getUI().getAssetPath(a),l=e.getInputDimensions(!1);return w.a.load(s).then((function(t){var o=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=i.rotation,s=i.flipHorizontally,u=i.flipVertically,c={identifier:i.identifier,image:t,position:m.n.fromObject(i.position),dimensions:m.n.fromObject(i.dimensions).multiply(l.min()),rotation:a||0,flipHorizontally:s,flipVertically:u,resizeMode:r.resizeMode||"keepAspect",adjustments:{}};return void 0!==i.adjustments&&["brightness","contrast","saturation"].forEach((function(e){void 0!==i.adjustments[e]&&(c.adjustments[e]=i.adjustments[e]+o[e].default)})),void 0!==i.tintMode&&void 0!==i.tintColor?(c.tintColor=m.b.fromArray(i.tintColor.rgba),c.tintMode=i.tintMode):void 0!==i.tintColor&&void 0!==r.tintMode&&(c.tintColor=m.b.fromArray(i.tintColor.rgba),c.tintMode=r.tintMode),void 0!==i.alpha&&(c.alpha=i.alpha),e.createSticker(c)}))}},{key:"_deserializeTransformOperation",value:function(e){return R(t.prototype.__proto__||g()(t.prototype),"_deserializeTransformOperation",this).call(this,e).then((function(e){if(e)return e._ratio=null,e}))}},{key:"_deserializeInputImage",value:function(){var e=this,t=this._data.image,n=t.data,i=t.type,r=t.uri;return n&&i&&(r="data:"+i+";base64,"+n),r?w.a.load(r).then((function(t){e._editor.setImage(t)})):d.a.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(e){var n=m.j.Operations.AdjustmentsOperation;return R(t.prototype.__proto__||g()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then((function(t){if(!t)return null;var i=e.options,r={};return["gamma","whites","blacks","temperature"].forEach((function(e){if(void 0!==i[e]){var t=n.prototype.availableOptions[e],o=t.minValue,a=t.midValue,s=t.maxValue,l=i[e];l=l<0?a+(a-o)*l:a+(s-a)*l,r[e]=l}})),t.set(r),t}))}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options.options;switch(e.options.type){case"radial":return R(t.prototype.__proto__||g()(t.prototype),"_deserializeFocusOperation",this).call(this,e);case"linear":var i=n.start,r=n.end,o=n.blurRadius;return d.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:m.n.fromObject(i),controlPoint2:m.n.fromObject(r),blurRadius:o}));case"mirrored":var a=n.start,s=n.end,l=n.size,u=n.gradientSize,c=n.blurRadius;return d.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:m.n.fromObject(a),end:m.n.fromObject(s),size:l,gradientSize:u,blurRadius:c}));case"gaussian":var f=n.blurRadius;return d.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:f}))}}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),f.load().then((function(){var t=e.getInputDimensions(!1),o=l*t.min()/t.x,f=e.createText({fontSize:i,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:m.b.fromArray(u.rgba),backgroundColor:m.b.fromArray(c.rgba),position:m.n.fromObject(n.position)});return f._edited=!0,f}))}},{key:"_createBrushForPath",value:function(e){var t=e.brush,n=t.identifier,i=t.color,r=t.size,o=t.hardness,a={color:m.b.fromArray(i.rgba),size:r};void 0!==o&&(a.hardness=o);var s=this._brushManager.getBrushByIdentifier(n);if(s||(s=this._brushManager.getFirstBrush()),s.prototype&&s.prototype instanceof I)return new s(a);var l=m.k.extend({},s);delete l.image;var u=function(e){function t(){return C(this,t),E(this,(t.__proto__||g()(t)).apply(this,arguments))}return O(t,e),t}(I);return u.identifier=s.identifier,new u(m.k.extend({},l,a))}},{key:"_deserializeFrame",value:function(e,n){var i=this;return R(t.prototype.__proto__||g()(t.prototype),"_deserializeFrame",this).call(this,e,n).then((function(){var e=i._editor.operations.get("frame"),t=n.options,r=t.size,o=t.alpha,a=t.tintColor,s={};void 0!==r&&(s.scale=r),void 0!==o&&(s.alpha=o),void 0!==a&&(s.tintColor=m.b.fromArray(a.rgba)),e.set(s)}))}},{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,f=i.seed,h=i.inverted,p=i.identifier;p===m.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?p=m.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:p===m.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(p=m.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var d=new b.a(this._ui,this._getOptions("textdesign")),_=new k.a(this._ui,{fonts:m.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),g=e.constructor.TextDesignSprite.AssetManager,y=this._ui.getFontLoader(),v=new(d.getLayoutByIdentifier(p));return y.setFonts(_.getFonts()),g.setFonts(x({},g.getFonts(),_.getVariationsByIdentifier())),y.load().then((function(){var t=v.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return g.loadImages(t).then((function(){return v.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:m.b.fromArray(u.rgba),width:c,seed:f,inverted:h,layout:v})}))}))}}]),t}(y.a);t.a=S,S.version="3.0.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=(n(9),n(208)),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),{type:"textdesign",options:n}}}]),t}(f.a);t.a=_,_.version="3.1.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(209),_=n(55),g=n(41),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier;d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var y=new _.a(this._ui,this._getOptions("textdesign")),v=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),b=e.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),k=new(y.getLayoutByIdentifier(d));return w.setFonts(v.getFonts()),b.setFonts(m({},b.getFonts(),v.getVariationsByIdentifier())),w.load().then((function(){var t=k.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return b.loadImages(t).then((function(){return k.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:p.b.fromArray(u.rgba),width:c,seed:f,inverted:h,layout:k})}))}))}}]),t}(d.a);t.a=w,w.version="3.1.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(210),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),n.padding*=n.width,{type:"textdesign",options:n}}}]),t}(f.a);t.a=_,_.version="3.2.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(211),_=n(55),g=n(41),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier;d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var y="padding"in i?i.padding/c:-1,v=new _.a(this._ui,this._getOptions("textdesign")),b=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=e.constructor.TextDesignSprite.AssetManager,k=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(d));return k.setFonts(b.getFonts()),w.setFonts(m({},w.getFonts(),b.getVariationsByIdentifier())),k.load().then((function(){var t=x.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return w.loadImages(t).then((function(){return x.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:p.b.fromArray(u.rgba),width:c,seed:f,inverted:h,layout:x,padding:y})}))}))}}]),t}(d.a);t.a=w,w.version="3.2.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(212),d=n(93),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_serializeOperation",value:function(e,n){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,n)}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeStyle",value:function(e){var t=e.getOptions(),n=t.identifier,i=t.intensity,r=t.blendMode,o=e.getStyleTransferModel().getOptions(),a=o.tileEdgeLength,s=o.overlappingFactor;return{type:"artFilter",options:{identifier:n,intensity:i,blendMode:d.a[r],tileEdgeLength:a,overlappingFactor:s}}}}]),t}(p.a);t.a=y,y.version="3.4.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(10),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(213),m=(n(55),n(41),n(511)),y=n(93),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=_.k.flipObject(y.a),x=_.j.Operations.ArtFilterOperation,T=function(e){function t(){return b(this,t),w(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_deserializeOperation",value:function(e){return"artFilter"===e.type?this._deserializeStyle(e):function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),h.a.resolve(n)):h.a.resolve()}},{key:"_deserializeStyle",value:function(e){var t=this,n=e.options,i=n.identifier,r=n.intensity,o=n.blendMode,a=n.tileEdgeLength,s=n.overlappingFactor;return i?x.isSupported(this._editor.getSDK())?new m.a(this._ui,this._getOptions("artfilter")).instantiateStyleTransferModelForArtFilterWithIdentifier(i,{tileEdgeLength:a,overlappingFactor:s}).catch((function(e){_.g.warn("Could not deserialize art filter: "+e)})).then((function(e){t._editor.operations.getOrCreate("artfilter",{identifier:i,styleTransferModel:e,intensity:r,blendMode:parseInt(k[o||o],10)})})):(_.g.warn("Can't restore Art Filters, as they're not supported on this platform."),h.a.resolve()):(_.g.warn("Found invalid Art Filter serialization."),h.a.resolve())}}]),t}(g.a);t.a=T,T.version="3.4.0"},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return u(this,t),c(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(n(214).a);t.a=f,f.version="3.5.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(215),_=n(55),g=n(41),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier,y="padding"in i?i.padding/c:-1,v=new _.a(this._ui,this._getOptions("textdesign")),b=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=e.constructor.TextDesignSprite.AssetManager,k=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(d));return k.setFonts(b.getFonts()),w.setFonts(m({},w.getFonts(),b.getVariationsByIdentifier())),k.load().then((function(){var t=x.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return w.loadImages(t).then((function(){return x.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:p.b.fromArray(u.rgba),width:c,seed:f,inverted:h,layout:x,padding:y})}))}))}}]),t}(d.a);t.a=w,w.version="3.5.0"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(216),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){return y(this,t),v(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_serializeAdjustmentsOperation",value:function(e){var n=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i={},r=e.availableOptions.sharpness,o=e.getOption("sharpness"),a=r.minValue,s=r.midValue,u=r.maxValue;return i.sharpness=o<=s?(o-a)/(s-a)-1:(o-s)/(u-s),n.options=g({},n.options,i),n}}]),t}(_.a);t.a=b,b.version="3.6.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(217),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_deserializeAdjustmentsOperation",value:function(e){var n=p.j.Operations.AdjustmentsOperation;return function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then((function(t){if(!t)return null;var i=e.options,r={};if(void 0!==i.sharpness){var o=n.prototype.availableOptions.sharpness,a=o.minValue,s=o.midValue,l=o.maxValue,u=i.sharpness;return u=u<0?s+(s-a)*u:s+(l-s)*u,r.sharpness=u,t.set(r),t}}))}}]),t}(d.a);t.a=y,y.version="3.6.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(10),h=n.n(f),p=n(1),d=n.n(p),_=n(218),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){return y(this,t),v(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"serialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(t.prototype.__proto__||d()(t.prototype),"serialize",this).call(this,n).then((function(t){return e._serializeAssetLibrary(t).then((function(e){return e}))}))}},{key:"_serializeAssetLibrary",value:function(e){if(!this._editor.getDynamicAssetsLibrary)return h.a.resolve(e);var t=this._editor.getDynamicAssetsLibrary(),n=this._serializeCustomStickerAssets(e,t);return 0===n.length||(e.assetLibrary={assets:{stickers:n}}),h.a.resolve(e)}},{key:"_serializeCustomStickerAssets",value:function(e,t){var n=t.getAssets("sticker");if(0===n.length)return[];var i=e.operations.filter((function(e){return"sprite"===e.type})).flatMap((function(e){return e.options.sprites})).filter((function(e){return"sticker"===e.type})).map((function(e){return e.options.identifier})),r={};return i.forEach((function(e){r[e]=!0})),n.filter((function(e){return r[e.identifier]})).map((function(e){var t=e.identifier,n=e.defaultName,i=e.images,r=i.mediaBase.uris[0],o=i.mediaBase.isSVG,a=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(r),s={identifier:t,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:i.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s}))}}]),t}(_.a);t.a=b,b.version="3.7.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(10),c=n.n(u),f=n(1),h=n.n(f),p=n(31),d=(n.n(p),n(219)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"deserialize",value:function(){var e=this;return this._validateVersion().then((function(){return e._deserializeAssetLibrary()})).then((function(){return e._deserializeInputImage()})).then((function(){return e._deserializeOperations()}))}},{key:"_deserializeAssetLibrary",value:function(){var e=this;return new c.a((function(t,n){var i=e._data;if(i.assetLibrary){var r=i.assetLibrary.assets,o=[];for(var a in r)o.push(e._deserializeCustomAssets(a,r[a]));return c.a.all(o).then((function(){t()})).catch((function(e){console.error(e),n(e)}))}t()}))}},{key:"_deserializeCustomAssets",value:function(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return c.a.reject(new Error("Unknown asset type: "+e))}}},{key:"_deserializeCustomStickerAssets",value:function(e){var t=this,n="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(n=i.controlsOptions.sticker.customStickerTintMode||"none");var r=e.map((function(e){return new c.a((function(i,r){var o=e.identifier,a=e.raster,s=void 0!==e.svg,l="data:"+a.type+";base64,"+a.data,u=new p.Image;u.onload=function(){var r,a=t._editor.getSDK();(u=a.correctExifOrientation(u)).toDataURL&&(l=u.toDataURL()),r=t._stickerManager.renderStickerThumbnailFromImage(u);var c={identifier:o,defaultName:e.name||"",tintMode:n,images:{mediaBase:{uris:[l],rawData:!0,isSVG:s,width:u.width,height:u.height},mediaThumb:{uris:[r.data],rawData:!0,width:r.width,height:r.height}}};if(s){var f="data:image/svg+xml;base64,"+e.svg.data;c.images.mediaBase.uris.push(f)}i(c)},u.onerror=function(){r(new Error("Invalid base64 data: "+l))},u.src=l}))}));return c.a.all(r).then((function(e){t._editor.getDynamicAssetsLibrary().setAssets("sticker",e),t._stickerManager.reload()}))}}]),t}(d.a);t.a=y,y.version="3.7.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(223);n.d(t,"Constants",(function(){return i.b})),n.d(t,"Utils",(function(){return i.f})),n.d(t,"JSONLoader",(function(){return i.d})),n.d(t,"PhotoEditorSDK",(function(){return i.e})),n.d(t,"EngineWrapper",(function(){return i.c})),n.d(t,"Color",(function(){return i.a}))},function(e,t,n){n.d(t,"c",(function(){return k}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(9),h=n(485),p=n(71),d=n(135),_=n(202),g=n(41),m=n(55);n.d(t,"b",(function(){return f.c})),n.d(t,"f",(function(){return f.m})),n.d(t,"d",(function(){return p.a})),n.d(t,"e",(function(){return f.j})),n.d(t,"a",(function(){return f.b}));var y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}
/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
var w=function(e){return f.k.byteArrayToString(f.a.decode(e))},k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=b(this,(t.__proto__||c()(t)).call(this));return n._mediator=new f.d,n._fontLoader=new d.a(n),n._options=e,n._initOptions(),n._initEvents(),n._disposed=!1,n._isReady=!1,n._editor=new h.a(n,n._options,n._mediator),n._options.editor.image&&n._editor.setImage(n._options.editor.image),n._mediator.once(f.c.EVENTS.EDITOR_READY,(function(){n._isReady=!0})),f.g.setLevel(n._options.logLevel),n._v(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"export",value:function(){var e;return(e=this._editor).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this._editor).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this._editor.deserialize(e)}},{key:"getEditor",value:function(){return this._editor}},{key:"isReady",value:function(){return this._isReady}},{key:"onReady",value:function(e){this._isReady?e():this._mediator.once(f.c.EVENTS.EDITOR_READY,e)}},{key:"createFilter",value:function(e){return new _.a(this,this._getOptions("filter")).instantiateFilterWithIdentifier(e)}},{key:"getTextDesignLayoutByID",value:function(e){return new(new m.a(this,this._getOptions("textDesign")).getLayoutByIdentifier(e))}},{key:"getTextDesignAssetManager",value:function(){return f.j.Operations.SpriteOperation.TextDesignSprite.AssetManager}},{key:"getTextDesignFontManager",value:function(){return new g.a(this,{fonts:f.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0})}},{key:"_getOptions",value:function(e){var t=this.getEditor(),n=t.controls,i={};n&&n.get(e)&&(i=n.get(e).defaultOptions);var r=t.getOptions();return f.k.deepDefaults({},r.editor.controlsOptions[e]||{},i)}},{key:"_initOptions",value:function(){if(this._options=f.k.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=f.k.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=f.k.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=f.k.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=f.k.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=f.k.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=f.k.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=f.k.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=f.k.defaults(this._options.editor.export||{},{format:"image/png",type:f.i.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=f.k.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=f.k.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=f.k.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){var e=new window.Image;this._options.editor.image&&(e.src=this._options.editor.image,this._options.editor.image=e)}}},{key:"_v",value:function(){return!!this[w("X29wdGlvbnM=")][w("bGljZW5zZQ==")]||(f.g.error(w("TGljZW5zaW5n"),w("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),f.g.error(w("TGljZW5zaW5n"),w("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"setImage",value:function(e){this._editor.setImage(e)}},{key:"getAssetPath",value:function(e){var t=this._options.assets,n=t.baseUrl,i=t.resolver,r=n+"/"+e;i=i||function(e){return e},e.match(/(ftp|http|https):\/\//)&&(r=e);var o=e.replace(/assets\//,"").split("/");switch(o[0]){case"art-filters":return i("art-filter",{identifier:o[1],type:o[2].split(".")[0]});case"filters":return i("filter",{identifier:o[1].replace(/\.png$/g,"")});case"fonts":return i("font",{identifier:o[1].replace(/\.(woff|otf|ttf)$/g,"")});case"frames":return i("frame",{identifier:o[1],filename:o[2]});case"overlays":return i("overlay",{identifier:o[1].replace(/\.(png|jpg|jpeg)$/g,"")});case"stickers":var a=o[3].endsWith(".svg"),s="thumbs"===o[3];return i("sticker",{category:o[1],identifier:(a?o[3]:o[4]).replace(/\.(png|svg)$/g,""),variant:a?"svg":s?"thumb":"base"});case"text-design":return i("text-design",{type:"fonts"===o[1]?"font":"image",identifier:o[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")})}return null!=i&&(r=i(r)),r}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(e){var t=this;return this.deserialize(e).then((function(){return t.export()}))}}]),t}(f.d);k.prototype.identifier="engine-wrapper",k.Constants=f.c,k.Events=f.c.EVENTS,k.Utils=f.m,k.JSONLoader=p.a,k.SDK=f.j},function(e,t,n){n(225);var i=n(11).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(14);i(i.S+i.F*!n(19),"Object",{defineProperty:n(22).f})},function(e,t,n){n(227),e.exports=n(11).Object.setPrototypeOf},function(e,t,n){var i=n(14);i(i.S,"Object",{setPrototypeOf:n(228).set})},function(e,t,n){var i=n(23),r=n(28),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(30)(Function.call,n(96).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(230);var i=n(11).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(14);i(i.S,"Object",{create:n(81)})},function(e,t,n){var i=n(22),r=n(28),o=n(49);e.exports=n(19)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(35),r=n(82),o=n(233);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=r(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(99),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){n(235),e.exports=n(11).Object.getPrototypeOf},function(e,t,n){var i=n(44),r=n(139);n(103)("getPrototypeOf",(function(){return function(e){return r(i(e))}}))},function(e,t,n){var i=n(0),r=n.n(i),o=n(31),a=n.n(o),s=n(24),l=n(477),u=n(71),c=a.a.Utils,f=a.a.Math.Vector2,h={getInnerDimensionsForElement:function(e){var t=new f(e.offsetWidth,e.offsetHeight),n=window.getComputedStyle(e,null);return t.x-=parseInt(n.getPropertyValue("padding-left"),10),t.x-=parseInt(n.getPropertyValue("padding-right"),10),t.y-=parseInt(n.getPropertyValue("padding-top"),10),t.y-=parseInt(n.getPropertyValue("padding-bottom"),10),t},getEventPosition:function(e){var t=e.clientX,n=e.clientY;if(-1!==e.type.indexOf("touch")){if(!e.touches.length)return;t=e.touches[0].clientX,n=e.touches[0].clientY}return new f(t,n)},createTransparentPatternCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.fetch(e,t);if(!r){s.a.info("Utils#translate","Unable to translate `"+t+"`");var o=n(478),a=o[t];return null!=a?(s.a.warn("Utils#translate","Trying to find localized string for old key: `"+a+"`. Please update your localization to use the new key as soon as possible. Support for the old, deprecated key will be dropped with the next major version update."),this.translate(e,a,i)):null}for(var l in i)r=r.replace("${"+l+"}",i[l]);return r},fetch:function(e,t,n){for(var i=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<i.length&&(e=e[i[r]]);r++);return void 0!==e&&e},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(e){return e});var i=[];return t.forEach((function(t){e.forEach((function(e){n(e)===t&&i.push(e)}))})),i},getJSONP:function(e){return new u.a(e).load()},cloneCategories:function(e,t){return e.map((function(e){return(e=c.clone(e))[t]=e[t].slice(0),e}))},mergeCategories:function(e,t,n){e=this.cloneCategories(e,n);var i=null;return t.forEach((function(t){e.forEach((function(e){t.identifier===e.identifier&&(i=e)})),i?i[n]=i[n].concat(t[n]):e.push(t)})),e},wrapFiltersInCategories:function(e,t){return e.map((function(e){var n,i,o,a=e;return t in a||(n={identifier:"imgly_filters_wrapped-"+e.identifier,displayFlat:!0},o=[e],(i=t)in n?r()(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,a=n),a}))},getStyleObject:function(e){var t=window.getComputedStyle(e),n={};for(var i in t){var r=t.getPropertyValue(i),o=i.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));""!==r&&(n[o]=r)}return n},styleElement:function(e,t){for(var n in t)e.style[n]=t[n]},debounce:function(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||e.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(this,o)}},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},findIntegerFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,i=0,r=0,o=1,a=1,s=0;s<t;s++){var l=o/a-e;if(l<0)o++;else{if(!(l>0))return new f(o,a);a++}var u=Math.abs(o/a-e);u<n&&(n=u,i=o,r=a)}return new f(i,r)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toFixed(t);return parseFloat(n)},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject:function(e){var t={};for(var n in e)t[e[n]]=n;return t},Browser:l.a};t.a=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(140),r=n(318),o=(n.n(r),n(165)),a=n(166),s=n(85),l=n(66),u=n(167),c=n(67),f=n(32),h=n(319),p=n(169),d=n(120),_=n(89),g=n(46),m=n(70),y=n(24),v=n(171),b=n(40),w=n(65);
/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
i.a.version=n(170).version,i.a.Math=o,i.a.Operations=a,i.a.Engine=s.a,i.a.Color=l.a,i.a.Operation=u.a,i.a.EventEmitter=c.a,i.a.Utils=f.a,i.a.Env=h.a,i.a.OperationsStack=p.a,i.a.EXIF=d.a,i.a.Image=_.a,i.a.Promise=g.a,i.a.Configurable=m.a,i.a.Log=y.a,i.a.Loaders=v,i.a.RenderType=b.RenderType,i.a.ImageFormat=b.ImageFormat,i.a.OptionType=b.OptionType,i.a.RendererType=b.RendererType,i.a.UniformType=b.UniformType,i.a.Base64=w.a,i.a.UI={},t.default=i.a},function(e,t,n){n(50),n(62),e.exports=n(105).f("iterator")},function(e,t,n){var i=n(99),r=n(98);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var i=n(81),r=n(57),o=n(61),a={};n(34)(a,n(17)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(242),r=n(142),o=n(51),a=n(35);e.exports=n(104)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t,n){n(244),n(109),n(247),n(248),e.exports=n(11).Symbol},function(e,t,n){var i=n(16),r=n(43),o=n(19),a=n(14),s=n(141),l=n(106).KEY,u=n(42),c=n(101),f=n(61),h=n(83),p=n(17),d=n(105),_=n(107),g=n(245),m=n(143),y=n(28),v=n(23),b=n(44),w=n(35),k=n(95),x=n(57),T=n(81),R=n(246),C=n(96),E=n(108),O=n(22),I=n(49),S=C.f,A=O.f,F=R.f,M=i.Symbol,D=i.JSON,B=D&&D.stringify,P=p("_hidden"),L=p("toPrimitive"),z={}.propertyIsEnumerable,U=c("symbol-registry"),N=c("symbols"),j=c("op-symbols"),G=Object.prototype,W="function"==typeof M&&!!E.f,V=i.QObject,H=!V||!V.prototype||!V.prototype.findChild,q=o&&u((function(){return 7!=T(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=S(G,t);i&&delete G[t],A(e,t,n),i&&e!==G&&A(G,t,i)}:A,Y=function(e){var t=N[e]=T(M.prototype);return t._k=e,t},X=W&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Q=function(e,t,n){return e===G&&Q(j,t,n),y(e),t=k(t,!0),y(n),r(N,t)?(n.enumerable?(r(e,P)&&e[P][t]&&(e[P][t]=!1),n=T(n,{enumerable:x(0,!1)})):(r(e,P)||A(e,P,x(1,{})),e[P][t]=!0),q(e,t,n)):A(e,t,n)},Z=function(e,t){y(e);for(var n,i=g(t=w(t)),r=0,o=i.length;o>r;)Q(e,n=i[r++],t[n]);return e},J=function(e){var t=z.call(this,e=k(e,!0));return!(this===G&&r(N,e)&&!r(j,e))&&(!(t||!r(this,e)||!r(N,e)||r(this,P)&&this[P][e])||t)},K=function(e,t){if(e=w(e),t=k(t,!0),e!==G||!r(N,t)||r(j,t)){var n=S(e,t);return!n||!r(N,t)||r(e,P)&&e[P][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=F(w(e)),i=[],o=0;n.length>o;)r(N,t=n[o++])||t==P||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===G,i=F(n?j:w(e)),o=[],a=0;i.length>a;)!r(N,t=i[a++])||n&&!r(G,t)||o.push(N[t]);return o};W||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(j,n),r(this,P)&&r(this[P],e)&&(this[P][e]=!1),q(this,e,x(1,n))};return o&&H&&q(G,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),C.f=K,O.f=Q,n(144).f=R.f=$,n(58).f=J,E.f=ee,o&&!n(60)&&s(G,"propertyIsEnumerable",J,!0),d.f=function(e){return Y(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var ie=I(p.store),re=0;ie.length>re;)_(ie[re++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return r(U,e+="")?U[e]:U[e]=M(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?T(e):Z(T(e),t)},defineProperty:Q,defineProperties:Z,getOwnPropertyDescriptor:K,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=u((function(){E.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return E.f(b(e))}}),D&&a(a.S+a.F*(!W||u((function(){var e=M();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(v(t)||void 0!==e)&&!X(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),i[1]=t,B.apply(D,i)}}),M.prototype[L]||n(34)(M.prototype,L,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){var i=n(49),r=n(108),o=n(58);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var i=n(35),r=n(144).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,t,n){n(107)("asyncIterator")},function(e,t,n){n(107)("observable")},function(e,t,n){n(109),n(50),n(62),n(250),n(254),n(255),e.exports=n(11).Promise},function(e,t,n){var i,r,o,a,s=n(60),l=n(16),u=n(30),c=n(84),f=n(14),h=n(23),p=n(56),d=n(110),_=n(63),g=n(147),m=n(112).set,y=n(252)(),v=n(113),b=n(148),w=n(253),k=n(149),x=l.TypeError,T=l.process,R=T&&T.versions,C=R&&R.v8||"",E=l.Promise,O="process"==c(T),I=function(){},S=r=v.f,A=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(17)("species")]=function(e){e(I,I)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),F=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a,s=r?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(r||(2==e._h&&P(e),e._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===t.promise?u(x("Promise-chain cycle")):(o=F(n))?o.call(n,l,u):l(n)):u(i)}catch(e){c&&!a&&c.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){m.call(l,(function(){var t,n,i,r=e._v,o=B(e);if(o&&(t=b((function(){O?T.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)})),e._h=O||B(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},B=function(e){return 1!==e._h&&0===(e._a||e._c).length},P=function(e){m.call(l,(function(){var t;O?T.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},z=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=F(e))?y((function(){var i={_w:n,_d:!1};try{t.call(e,u(z,i,1),u(L,i,1))}catch(e){L.call(i,e)}})):(n._v=e,n._s=1,M(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};A||(E=function(e){d(this,E,"Promise","_h"),p(e),i.call(this);try{e(u(z,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(114)(E.prototype,{then:function(e,t){var n=S(g(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=u(z,e,1),this.reject=u(L,e,1)},v.f=S=function(e){return e===E||e===a?new o(e):r(e)}),f(f.G+f.W+f.F*!A,{Promise:E}),n(61)(E,"Promise"),n(150)("Promise"),a=n(11).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=S(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(e){return k(s&&this===a?E:this,e)}}),f(f.S+f.F*!(A&&n(151)((function(e){E.all(e).catch(I)}))),"Promise",{all:function(e){var t=this,n=S(t),i=n.resolve,r=n.reject,o=b((function(){var n=[],o=0,a=1;_(e,!1,(function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then((function(e){l||(l=!0,n[s]=e,--a||i(n))}),r)})),--a||i(n)}));return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=S(t),i=n.reject,r=b((function(){_(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(16),r=n(112).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(59)(a);e.exports=function(){var e,t,n,u=function(){var i,r;for(l&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(u)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){r.call(i,u)};else{var f=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(16).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var i=n(14),r=n(11),o=n(16),a=n(147),s=n(149);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){var i=n(14),r=n(113),o=n(148);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(157),p=n(158),d=n(87),_=n(115),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=f.c.RendererType,b=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._type=v.CANVAS,o.setCanvas(o._options.canvas||o._createCanvas()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"_createCanvas",value:function(){return f.i.createCanvas()}},{key:"_createContext",value:function(){var e=this._canvas.getContext("2d");return this._options.debug&&(e=new h.a(e)),this.id=e.id=t.contextId++,this._context=e,e.renderer=this,this.emit("context",e),e}},{key:"_setupContext",value:function(){var e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach((function(t){e[t]&&(e[t]=!0)})),this._defaultRenderTarget=new d.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new _.a(this)}},{key:"render",value:function(e){var t=this._renderTarget.getContext(),n=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(n),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;var i=this._canvas,r=i.width,o=i.height;t.clearRect(0,0,r,o),0!==this._clearColor.a&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,r,o),t.restore()),this.renderDisplayObject(e,this._renderTarget)}},{key:"renderDisplayObject",value:function(e,t){var n=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(e){this._renderTarget=e}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),t}(p.a);b.contextId=0,b.type="Canvas2D",t.a=b},function(e,t,n){n(50),n(258),e.exports=n(11).Array.from},function(e,t,n){var i=n(30),r=n(14),o=n(44),a=n(145),s=n(146),l=n(82),u=n(259),c=n(111);r(r.S+r.F*!n(151)((function(e){})),"Array",{from:function(e){var t,n,r,f,h=o(e),p="function"==typeof this?this:Array,d=arguments.length,_=d>1?arguments[1]:void 0,g=void 0!==_,m=0,y=c(h);if(g&&(_=i(_,d>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=l(h.length));t>m;m++)u(n,m,g?_(h[m],m):h[m]);else for(f=y.call(h),n=new p;!(r=f.next()).done;m++)u(n,m,g?a(f,_,[r.value,m],!0):r.value);return n.length=m,n}})},function(e,t,n){var i=n(22),r=n(57);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(11),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(262),e.exports=n(11).Object.assign},function(e,t,n){var i=n(14);i(i.S+i.F,"Object",{assign:n(263)})},function(e,t,n){var i=n(19),r=n(49),o=n(108),a=n(58),s=n(44),l=n(97),u=Object.assign;e.exports=!u||n(42)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i}))?function(e,t){for(var n=s(e),u=arguments.length,c=1,f=o.f,h=a.f;u>c;)for(var p,d=l(arguments[c++]),_=f?r(d).concat(f(d)):r(d),g=_.length,m=0;g>m;)p=_[m++],i&&!h.call(d,p)||(n[p]=d[p]);return n}:u},function(e,t,n){n(265),e.exports=n(11).Object.keys},function(e,t,n){var i=n(44),r=n(49);n(103)("keys",(function(){return function(e){return r(i(e))}}))},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"head",value:function(e){return e[0]}},{key:"tail",value:function(e){return e.slice(1)}},{key:"last",value:function(e){return e[e.length-1]}},{key:"init",value:function(e){return e.slice(0,e.length-1)}},{key:"remove",value:function(e,t){return e.filter((function(e,n,i){return!t(e,n,i)}))}},{key:"findIndex",value:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}},{key:"find",value:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}},{key:"flatten",value:function(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e.flatten(n):n)}),[])}},{key:"range",value:function(e,t){var n=[];if(t>e)for(var i=e;i<t;i++)n.push(i);return n}},{key:"repeat",value:function(e,t){for(var n=[],i=0;i<t;i++)n[i]=e;return n}},{key:"zip",value:function(e,t){for(var n=Math.min(e.length,t.length),i=[],r=0;r<n;r++)i[r]=[e[r],t[r]];return i}}]),e}();t.a=a},function(e,t,n){n(62),n(50),e.exports=n(268)},function(e,t,n){var i=n(84),r=n(17)("iterator"),o=n(51);e.exports=n(11).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){n(62),n(50),e.exports=n(270)},function(e,t,n){var i=n(28),r=n(111);e.exports=n(11).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i;
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(r,o){var a="model",s="name",l="type",u="vendor",c="version",f="mobile",h="tablet",p="smarttv",d={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_={rgx:function(e,t){for(var n,i,r,o,a,s,l=0;l<t.length&&!a;){var u=t[l],c=t[l+1];for(n=i=0;n<u.length&&!a;)if(a=u[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"==typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;l+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(d.has(t[n][i],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],c],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,_.str,g.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,u,[l,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[u,"Apple"],[l,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[u,"Apple"],[l,p]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,a,[l,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[u,"Amazon"],[l,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,_.str,g.device.amazon.model],[u,"Amazon"],[l,f]],[/android.+aft([bms])\sbuild/i],[a,[u,"Amazon"],[l,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,u,[l,f]],[/\((ip[honed|\s\w*]+);/i],[a,[u,"Apple"],[l,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,a,[l,f]],[/\(bb10;\s(\w+)/i],[a,[u,"BlackBerry"],[l,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[u,"Asus"],[l,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[a,"Xperia Tablet"],[l,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[l,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,a,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[u,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[u,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[u,_.str,g.device.sprint.vendor],[a,_.str,g.device.sprint.model],[l,f]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[a,/_/g," "],[l,f]],[/(nexus\s9)/i],[a,[u,"HTC"],[l,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[u,"Huawei"],[l,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[u,"Huawei"],[l,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,a,[l,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[u,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[l,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[u,"Motorola"],[l,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[u,"Motorola"],[l,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,d.trim],[a,d.trim],[l,p]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[l,p]],[/\(dtv[\);].+(aquos)/i],[a,[u,"Sharp"],[l,p]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],a,[l,h]],[/smart-tv.+(samsung)/i],[u,[l,p],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],a,[l,f]],[/sie-(\w*)/i],[a,[u,"Siemens"],[l,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],a,[l,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[u,"Acer"],[l,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[u,"LG"],[l,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],a,[l,h]],[/(lg) netcast\.tv/i],[u,a,[l,p]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[u,"LG"],[l,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,a,[l,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[u,"Lenovo"],[l,h]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,a,[l,f]],[/linux;.+((jolla));/i],[u,a,[l,f]],[/((pebble))app\/[\d\.]+\s/i],[u,a,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,a,[l,f]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[l,p]],[/android.+;\s(glass)\s\d/i],[a,[u,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[u,"Google"],[l,h]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[u,"Google"],[l,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[u,"Xiaomi"],[l,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[u,"Xiaomi"],[l,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[u,"Meizu"],[l,f]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],a,[l,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[u,"OnePlus"],[l,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[u,"RCA"],[l,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[u,"Dell"],[l,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[u,"Verizon"],[l,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],a,[l,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[u,"NuVision"],[l,h]],[/android.+;\s(k88)\sbuild/i],[a,[u,"ZTE"],[l,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[u,"Swiss"],[l,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[u,"Swiss"],[l,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[u,"Zeki"],[l,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],a,[l,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[u,"Insignia"],[l,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[u,"NextBook"],[l,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],a,[l,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],a,[l,f]],[/android.+;\s(PH-1)\s/i],[a,[u,"Essential"],[l,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[u,"Envizen"],[l,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,a,[l,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[u,"MachSpeed"],[l,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,a,[l,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[u,"Rotor"],[l,h]],[/android.+(KS(.+))\s+build/i],[a,[u,"Amazon"],[l,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,a,[l,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,d.lowerize],u,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[l,p]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,_.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,_.str,g.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},y=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof y))return new y(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?d.extend(m,t):m;return this.getBrowser=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.browser),e.major=d.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return _.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return _.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};y.VERSION="0.7.21",y.BROWSER={NAME:s,MAJOR:"major",VERSION:c},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:a,VENDOR:u,TYPE:l,CONSOLE:"console",MOBILE:f,SMARTTV:p,TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:s,VERSION:c},y.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=y),t.UAParser=y):void 0===(i=function(){return y}.call(t,n,t,e))||(e.exports=i);var v=r&&(r.jQuery||r.Zepto);if(v&&!v.ua){var b=new y;v.ua=b.getResult(),v.ua.get=function(){return b.getUA()},v.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)v.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){var i={defaults:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<n.length;a++){var s=n[a];for(var l in s)void 0===r[l]&&(r[l]=s[l])}return r},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<n.length;a++){var s=n[a];for(var l in s)r[l]=s[l]}return r}};t.a=i},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=n(158),_=n(88),g=n(159),m=n(276),y=n(116),v=n(118),b=n(119),w=n(157),k=n(279),x=n(161),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=p.c.RendererType,I=function(e){function t(){var e;C(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=E(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._type=O.WEBGL,o._fakeObject=new v.a,o._onContextLost=o._onContextLost.bind(o),o._onContextRestored=o._onContextRestored.bind(o),o.setCanvas(o._options.canvas||p.i.createCanvas()),o._cachedBlitCanvas=p.i.createCanvas(),o.shaders=o._initShaders(),o.renderers=o._initRenderers(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),T(t,[{key:"_onContextLost",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"Failed to create WebGL context: "+(e.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){p.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new b.a(this),this._currentObjectRenderer=new g.a(this)}},{key:"setShader",value:function(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}},{key:"setCanvas",value:function(e){this._canvas&&this._removeContextEventListeners(),R(t.prototype.__proto__||h()(t.prototype),"setCanvas",this).call(this,e),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(e){var t=this._context,n=e.getAttributes(),i=e.getAttributeLocations();n.forEach((function(e){var n=i[e];t.enableVertexAttribArray(n)}))}},{key:"_initShaders",value:function(){return{default:new y.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new m.a(this)}}},{key:"_createContext",value:function(){var e=this._canvas,n=null,i={preserveDrawingBuffer:!0};return n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug&&(n=window.WebGLDebugUtils.makeDebugContext(n,null,(function(e,t){console.error("gl."+e+"("+window.WebGLDebugUtils.glFunctionArgsToString(e,t)+")")}))),this._options.debug&&(n=new w.a(n),n=new k.a(n)),this.id=n.id=t.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n}},{key:"_setupContext",value:function(){var e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new _.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=0!==t.precision?"highp":"mediump";var n=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R(t.prototype.__proto__||h()(t.prototype),"resizeTo",this).call(this,e,n),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e)}},{key:"setRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=e,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}},{key:"render",value:function(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var t=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}},{key:"getOrCreateGLTexture",value:function(e){var t=this._context,n=e.getGLTextureForRenderer(this);return n||(n=t.createTexture(),e.setGLTextureForRenderer(n,this)),n}},{key:"updateTexture",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getSource(),i=!!n,r=this._context,o=e.getGLUnit(),a=this.getOrCreateGLTexture(e);if(r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,a),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&i)if(n instanceof x.a)r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n.width,n.height,0,r.RGBA,r.UNSIGNED_BYTE,n.data);else{var s=p.i.convertHtmlImageToRGBACanvas(n,this._cachedBlitCanvas);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s)}e.isMipMappingEnabled()?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e.getGLRepeat(r,"x")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e.getGLRepeat(r,"y"))),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e.getGLFilter(r,"min")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e.getGLFilter(r,"mag")),r.activeTexture(r.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var e=p.i.createCanvas(),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(t){var n=t.getParameter(t.MAX_TEXTURE_SIZE),i=t.getExtension("WEBGL_lose_context");return i&&i.loseContext(),n}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){for(var e in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}}],[{key:"isSupported",value:function(){var e=p.i.createCanvas();e.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var t=e.getContext("webgl")||e.getContext("experimental-webgl"),n=!!t;if(n){var i=p.e.determineGPUName(t);n&=!p.e.isGPUBlacklisted(i)}return e.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),n}}]),t}(d.a);I.contextId=0,I.type="WebGL",t.a=I},function(e,t,n){n(275);var i=n(11).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(35),r=n(96).f;n(103)("getOwnPropertyDescriptor",(function(){return function(e,t){return r(i(e),t)}}))},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=n(159),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._maxBatchSize=p.a,o._vertices=new ArrayBuffer(4*p.a*p.j),o._positions=new Float32Array(o._vertices),o._colors=new Uint32Array(o._vertices),o._indices=new Uint16Array(6*p.a);for(var a=0,s=0;a<6*p.a;a+=6,s+=4)o._indices[a+0]=s+0,o._indices[a+1]=s+1,o._indices[a+2]=s+2,o._indices[a+3]=s+0,o._indices[a+4]=s+2,o._indices[a+5]=s+3;return o._shaders=[],o._sprites=[],o._currentBatchSize=0,o._onContextChange(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"render",value:function(e){var t=e.getTexture(),n=t.getFrame();t.getBaseTexture(),this._currentBatchSize>=this._maxBatchSize&&this.flush();var i=t.getUVs();if(i){var r=this._currentBatchSize*p.j;this._addVertexCoordinates(e,r,n),this._addTextureUVs(e,r,i),this._addColors(e,r),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}}},{key:"_addColors",value:function(e,t){var n=this._colors,i=e.getTint(),r=(i>>16)+(65280&i)+((255&i)<<16)+(255*e.getWorldAlpha()<<24);n[t+4]=n[t+9]=n[t+14]=n[t+19]=r}},{key:"_addTextureUVs",value:function(e,t,n){var i=this._positions,r=n.getUVsAt(0);i[t+2]=r.x,i[t+3]=r.y,r=n.getUVsAt(1),i[t+7]=r.x,i[t+8]=r.y,r=n.getUVsAt(2),i[t+12]=r.x,i[t+13]=r.y,r=n.getUVsAt(3),i[t+17]=r.x,i[t+18]=r.y}},{key:"_addVertexCoordinates",value:function(e,t,n){for(var i=this._positions,r=e.getWorldTransform(),o=e.getAnchor(),a=r.rectangleToCoordinates(n,o),s=0;s<4;s++)i[t+5*s]=a[s].x,i[t+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var e=this._renderer,t=e.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*p.a)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*p.j);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var i=0,r=null,o=null,a=null,s=null,l=!1,u=null,c=0,f=0,h=this._currentBatchSize;f<h;f++){if(o=(u=this._sprites[f]).getTexture().getBaseTexture(),l=a!==(s=u.getShader()||this._shader),(r!==o||l)&&(this._renderBatch(r,i,c),c=f,i=0,r=o,l)){a=s,e.setShader(a);var d=e.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",d),a.syncUniforms(),t.activeTexture(t.TEXTURE0)}i++}this._renderBatch(r,i,c),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(e,t,n){if(0!==t){var i=this._renderer,r=i.getContext(),o=e.getGLTextureForRenderer(i);o||(o=i.getOrCreateGLTexture(e)),e.isDirty()&&(i.updateTexture(e),e.setDirty(!1)),r.activeTexture(r.TEXTURE0+e.getGLUnit()),r.bindTexture(r.TEXTURE_2D,o);var a=6*t,s=6*n*2;r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var e=this._renderer.getContext();for(var n in this._sprites)n.dispose();this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}(d.a);t.a=y},function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(e,t,n){var i=n(29),r=n.n(i),o=n(25),a=n.n(o),s=n(0),l=n.n(s),u=n(39),c=n.n(u),f=n(280),h=n.n(f),p=function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._domAvailable="undefined"!=typeof document,this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}return d(e,[{key:"_createEnumMap",value:function(){for(var e in this._context){var t=this._context[e];"number"==typeof t&&(this._enums[t]=e)}}},{key:"_enumValueToString",value:function(e){var t=this._enums[e];return void 0===t?e:t}},{key:"_setupStats",value:function(){this._domAvailable&&(this._stats=new h.a,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new h.a.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new h.a.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new h.a.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new h.a.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new h.a.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new h.a.Panel("Shaders","#43ADEB","#282828")))}},{key:"_updatePanel",value:function(e){if(this._domAvailable){switch(this._stats.begin(),e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50)}this._stats.end()}}},{key:"getTexturesCount",value:function(){return c()(this._textures).length}},{key:"getBuffersCount",value:function(){return c()(this._buffers).length}},{key:"getFBOCount",value:function(){return c()(this._framebuffers).length}},{key:"getProgramCount",value:function(){return c()(this._programs).length}},{key:"getShaderCount",value:function(){return c()(this._shaders).length}},{key:"_updateMemoryStats",value:function(){if(this._domAvailable){var e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400),setTimeout(this._updateMemoryStats,1e3)}}},{key:"_getMemoryUsage",value:function(){var e=0;for(var t in this._textures)e+=this._textures[t].memory;for(var n in this._buffers)e+=this._buffers[n].memory;return e}},{key:"_hookIntoContext",value:function(){var e=this,t=function(t){"function"==typeof e._context[t]?e[t]=function(){for(var e=this._context[t],n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return this._trackGLCall(e,t,i)}:e._makePropertyWrapper(t)};for(var n in this._context)t(n)}},{key:"_makePropertyWrapper",value:function(e){if(-1===["_context"].indexOf(e)){var t=this._context;this.__defineGetter__(e,(function(){return t[e]})),this.__defineSetter__(e,(function(n){t[e]=n}))}}},{key:"_trackGLCall",value:function(e,t,n){var i=void 0;i=-1!==["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"].indexOf(t)?this["_"+t](n):e.apply(this._context,n);var r=this._context.getError();if(0!==r){var o=n.join(", ");o.length>100&&(o=o.substr(0,100)+"..."),console.error(new Error("WebGL Error "+this._enumValueToString(r)+" in "+t+"("+o+")"))}return i}},{key:"_createProgram",value:function(){var e=this._context.createProgram();return e._wmmId=this._id++,this._programs[e._wmmId]=e,this._updatePanel("prg"),e}},{key:"_deleteProgram",value:function(e){var t=p(e,1)[0];t&&this._programs[t._wmmId]&&(delete this._programs[t._wmmId],this._context.deleteProgram(t),this._updatePanel("prg"))}},{key:"_createShader",value:function(e){var t=p(e,1)[0],n=this._context.createShader(t);return n._wmmId=this._id++,this._shaders[n._wmmId]=n,this._updatePanel("shd"),n}},{key:"_deleteShader",value:function(e){var t=p(e,1)[0];t&&this._shaders[t._wmmId]&&(delete this._shaders[t._wmmId],this._context.deleteShader(t),this._updatePanel("shd"))}},{key:"_createFramebuffer",value:function(){var e=this._context.createFramebuffer();return e._wmmId=this._id++,this._framebuffers[e._wmmId]=e,this._updatePanel("fbo"),e}},{key:"_deleteFramebuffer",value:function(e){var t=p(e,1)[0];t&&this._framebuffers[t._wmmId]&&(delete this._framebuffers[t._wmmId],this._context.deleteFramebuffer(t),this._updatePanel("fbo"))}},{key:"_createBuffer",value:function(){var e=this._context.createBuffer();return e._wmmId=this._id++,this._buffers[e._wmmId]={buffer:e,memory:0},this._updatePanel("buf"),e}},{key:"_bindBuffer",value:function(e){var t=p(e,2),n=t[0],i=t[1];this._context.bindBuffer(n,i),this._boundBuffer=i._wmmId}},{key:"_bufferData",value:function(e){var t=p(e,3),n=t[0],i=t[1],r=t[2];this._context.bufferData(n,i,r);var o=void 0;"number"==typeof i?o=i:"byteLength"in i?o=i.byteLength:"length"in i&&(o=i.length),this._buffers[this._boundBuffer].memory=o}},{key:"_deleteBuffer",value:function(e){var t=p(e,1)[0];t&&this._buffers[t._wmmId]&&(delete this._buffers[t._wmmId],this._context.deleteBuffer(t),this._updatePanel("buf"))}},{key:"_createTexture",value:function(){var e=this._context.createTexture();return e._wmmId=this._id++,this._textures[e._wmmId]={texture:e,memory:0},this._updatePanel("tex"),e}},{key:"_deleteTexture",value:function(e){var t=p(e,1)[0];t&&this._textures[t._wmmId]&&(delete this._textures[t._wmmId],this._context.deleteTexture(t),this._updatePanel("tex"))}},{key:"_bindTexture",value:function(e){var t=p(e,2),n=t[0],i=t[1];this._context.bindTexture(n,i),this._boundTexture=i._wmmId}},{key:"_texImage2D",value:function(e){var t=p(e,9),n=t[2],i=t[3],r=t[4],o=t[5],a=t[8];void 0===a&&(a=o),this._context.texImage2D.apply(this._context,e);var s=this._calculateByteCountForTexture(n,i,r,a);this._textures[this._boundTexture].memory=s}},{key:"_calculateByteCountForTexture",value:function(e,t,n,i){if(null!==i){if(!("width"in i))return i.length;t=i.width,n=i.height}var r=1;switch(e){case this._context.ALPHA:r=1;break;case this._context.RGB:r=3;break;case this._context.RGBA:r=4}return t*n*r}}]),e}();t.a=_},function(e,t){var n=function(){function e(e){return r.appendChild(e.dom),e}function t(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),t(++i%r.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=e(new n.Panel("FPS","#0ff","#002")),u=e(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new n.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:r,addPanel:e,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:r,setMode:t}};n.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,f=3*a,h=15*a,p=74*a,d=30*a,_=document.createElement("canvas");_.width=s,_.height=l,_.style.cssText="width:80px;height:48px";var g=_.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(f,h,p,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f,h,p,d),{dom:_,update:function(l,m){i=Math.min(i,l),r=Math.max(r,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,h),g.fillStyle=t,g.fillText(o(l)+" "+e+" ("+o(i)+"-"+o(r)+")",u,c),g.drawImage(_,f+a,h,p-a,d,f,h,p-a,d),g.fillRect(f+p-a,h,a,d),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f+p-a,h,a,o((1-l/m)*d))}}},"object"==typeof e&&(e.exports=n)},function(e,t,n){var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uvs=[new o.k(0,0),new o.k(1,0),new o.k(1,1),new o.k(0,1)]}return a(e,[{key:"update",value:function(e,t){var n=this._uvs[0];n.x=e.x/t.width,n.y=e.y/t.height,(n=this._uvs[1]).x=(e.x+e.width)/t.width,n.y=e.y/t.height,(n=this._uvs[2]).x=(e.x+e.width)/t.width,n.y=(e.y+e.height)/t.height,(n=this._uvs[3]).x=e.x/t.width,n.y=(e.y+e.height)/t.height}},{key:"getUVsAt",value:function(e){return this._uvs[e]}},{key:"getUVs",value:function(){return this._uvs}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(12),d=n(163),_=n(68),g=n(88),m=n(87),y=n(119),v=n(115),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=p.c.RendererType,T=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;w(this,t);var o=k(this,(t.__proto__||h()(t)).call(this,new _.a,new p.h(0,0,n,i)));return o._loaded=!0,o._width=n,o._height=i,o._pixelRatio=r,o._renderer=e,o._setupFilterManager(),o._setupBuffer(),o.setBaseTexture(o._renderTarget.getBaseTexture()),o._updateUVs(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"_setupFilterManager",value:function(){this._filterManager&&this._filterManager.dispose(),this._renderer.isOfType(x.WEBGL)?this._filterManager=new y.a(this._renderer):this._renderer.isOfType(x.CANVAS)&&(this._filterManager=new v.a(this._renderer)),this._filterManager.resizeTo(new p.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(x.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(x.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new g.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new m.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(e){this._renderTarget.clear(e)}},{key:"resizeTo",value:function(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}},{key:"render",value:function(e){if(this._renderer.isOfType(x.WEBGL))this._renderWebGL(e);else{if(!this._renderer.isOfType(x.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(e)}}},{key:"_renderWebGL",value:function(e){this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach((function(e){e.updateTransform()}));var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"_renderCanvas",value:function(e){e.getWorldTransform().reset(),e.getChildren().forEach((function(e){e.updateTransform()}));var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose(),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}(d.a);t.a=T},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(162),p=n(284),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=e,n._shader=null,n._width=0,n._height=0,n._anchor=new f.k(0,0),n._canvasSmoothingEnabled=!0,n.setTexture(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(e){var t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new p.a),this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(e){var t=this._worldTransform,n=this._texture.getFrame(),i=n.width,r=n.height,o=e.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-i|0,s=this._anchor.y*-r|0,l=e.getContext();l.setTransform(t.a,t.b,t.c,t.d,t.tx*o,t.ty*o),l.globalAlpha=this.getWorldAlpha();var u=this._texture.getBaseTexture(),c=u.getPixelRatio(),f=u.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,l.drawImage(f,0,0,(f.naturalWidth||i)*c,(f.naturalHeight||r)*c,a*o,s*o,i*o,r*o)}},{key:"isAtPosition",value:function(e){var t=this._worldTransform.applyInverseToVector(e),n=this._texture.getFrame(),i=n.width,r=n.height,o=new f.k(-i,-r);o.multiply(this._anchor);var a=o.clone().add(i,r);return!(t.x<o.x||t.x>a.x||t.y<o.y||t.y>a.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var e=this._bounds,t=this._texture.getFrame(),n=this._worldTransform,i=this._anchor,r=n.rectangleToCoordinates(t,i),o=r[0].x,a=r[0].y,s=o,l=a;r.forEach((function(e){var t=e.x,n=e.y;o=Math.min(o,t),a=Math.min(a,n),s=Math.max(s,t),l=Math.max(l,n)})),e.x=o,e.width=Math.abs(s-o),e.y=a,e.height=Math.abs(l-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(e){e&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(e){this._shader=e}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(e){this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new f.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(e,t){e instanceof f.k?this._anchor.copy(e):this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(e){this._smoothDownscaling=e}},{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}]),t}(h.a);t.a=_},function(e,t,n){var i=n(0),r=n.n(i),o=n(38),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite)}return a(e,[{key:"render",value:function(e,t,n){var i=n.getDimensions(),r=this._getNextHighestPOT(i);this._renderTexture?this._renderTexture.resizeTo(r):this._renderTexture=new o.Engine.RenderTexture(e,r.x,r.y);var a=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,i,a)}},{key:"_updateSprite",value:function(e,t,n,i){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new o.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(e){return new o.Vector2(o.Utils.nextHighestPOT(e.x),o.Utils.nextHighestPOT(e.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}]),e}();t.a=s},function(e,t,n){var i=n(116);t.a={TextureShader:i.a}},function(e,t,n){e.exports={default:n(287),__esModule:!0}},function(e,t,n){n(288),e.exports=n(11).setImmediate},function(e,t,n){var i=n(14),r=n(112);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(290);n.d(t,"UnpremultiplyFilter",(function(){return i.a}));var r=n(292);n.d(t,"ColorOverlayFilter",(function(){return r.a}));var o=n(294);n.d(t,"TintFilter",(function(){return o.a}));var a=n(296);n.d(t,"OverlayFilter",(function(){return a.a}))},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||l()(t)).call(this));return e._fragmentSource=n(291),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(n(69).a);t.a=u},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(69),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=f.c.OptionType,m=f.c.UniformType,y=function(e){function t(){var e;d(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(293),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.color,s=r.getImageData(0,0,i.width,i.height),l=o.getImageData(0,0,i.width,i.height),u=i.width*i.height,c=new f.b,h=new f.b,p=0;p<4*u;p+=4){c.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),h.set(l.data[p]/255,l.data[p+1]/255,l.data[p+2]/255,l.data[p+3]/255);var d=h.r+c.a*(c.r-h.r);l.data[p]=255*(d+c.a*(a.r-d));var _=h.g+c.a*(c.g-h.g);l.data[p+1]=255*(_+c.a*(a.g-_));var g=h.b+c.a*(c.b-h.b);l.data[p+2]=255*(g+c.a*(a.b-g))}o.putImageData(l,0,0)}}]),t}(h.a);y.prototype.availableOptions={color:{type:g.COLOR,default:f.b.WHITE,uniformType:m.FLOAT4}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(69),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=f.c.OptionType,m=f.c.UniformType,y=function(e){function t(){var e;d(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(295),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_applyCanvas",value:function(e,n,i){var r=n.getCanvas(),o=n.getContext(),a=i.getContext(),s=o.getImageData(0,0,r.width,r.height),l=this._options,u=l.mode,c=l.color,h=c.r,p=c.g,d=c.b,_=c.a,g=[.2125,.7154,.0721];switch(u){case t.MODES.SOLID:for(var m=0;m<r.width*r.height;m++){var y=4*m;s.data[y]+=(255*h-s.data[y])*_,s.data[y+1]+=(255*p-s.data[y+1])*_,s.data[y+2]+=(255*d-s.data[y+2])*_}break;case t.MODES.COLORIZED:for(var v=0;v<r.width*r.height;v++){var b=4*v,w=s.data[b]/255*g[0]+s.data[b+1]/255*g[1]+s.data[b+2]/255*g[2],k=new f.b(w*h,w*p,w*d);s.data[b]+=(255*k.r-s.data[b])*_,s.data[b+1]+=(255*k.g-s.data[b+1])*_,s.data[b+2]+=(255*k.b-s.data[b+2])*_}}a.putImageData(s,0,0)}}]),t}(h.a);y.MODES={NONE:0,SOLID:1,COLORIZED:2},y.prototype.availableOptions={color:{type:g.COLOR,default:f.b.WHITE,uniformType:m.FLOAT4},mode:{type:g.NUMBER,default:y.MODES.NONE,uniformType:m.INT}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(12),h=n(69),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=f.c.OptionType,m=f.c.UniformType,y=function(e){function t(){var e;d(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(297),a._lastImage=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_applyCanvas",value:function(e,n,i){for(var r=this._options.overlayTexture.getRenderTarget().getContext(),o=n.getCanvas(),a=n.getContext(),s=i.getContext(),l=a.getImageData(0,0,o.width,o.height),u=r.getImageData(0,0,o.width,o.height),c=this._options,h=c.blendMode,p=c.alpha,d=new f.b,_=new f.b,g=new f.b,m=0;m<o.width*o.height*4;m+=4){d.set(l.data[m]/255,l.data[m+1]/255,l.data[m+2]/255,l.data[m+3]/255),_.set(u.data[m]/255,u.data[m+1]/255,u.data[m+2]/255,u.data[m+3]/255);var y=void 0,v=void 0,b=void 0,w=void 0,k=void 0,x=void 0,T=void 0,R=void 0,C=void 0;switch(h){case t.BLEND_MODES.NORMAL:g.set(d.r+_.a*p*(_.r-d.r),d.g+_.a*p*(_.g-d.g),d.b+_.a*p*(_.b-d.b),d.a);break;case t.BLEND_MODES.OVERLAY:y=1-2*(1-d.r)*(1-_.r),v=2*d.r*_.r,b=y+(d.r<.5?1:0)*(v-y),w=1-2*(1-d.g)*(1-_.g),k=2*d.g*_.g,x=w+(d.g<.5?1:0)*(k-w),T=1-2*(1-d.b)*(1-_.b),R=2*d.b*_.b,C=T+(d.b<.5?1:0)*(R-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.HARD_LIGHT:y=1-2*(1-_.r)*(1-d.r),v=2*_.r*d.r,b=y+(_.r<.5?1:0)*(v-y),w=1-2*(1-_.g)*(1-d.g),k=2*_.g*d.g,x=w+(_.g<.5?1:0)*(k-w),T=1-2*(1-_.b)*(1-d.b),R=2*_.b*d.b,C=T+(_.b<.5?1:0)*(R-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.SOFT_LIGHT:y=2*d.r*(1-_.r)+(2*_.r-1)*Math.sqrt(d.r),v=2*d.r*_.r+d.r*d.r*(1-2*_.r),b=y+(_.r<.5?1:0)*(v-y),w=2*d.g*(1-_.g)+(2*_.g-1)*Math.sqrt(d.g),k=2*d.g*_.g+d.g*d.g*(1-2*_.g),x=w+(_.g<.5?1:0)*(k-w),T=2*d.b*(1-_.b)+(2*_.b-1)*Math.sqrt(d.b),R=2*d.b*_.b+d.b*d.b*(1-2*_.b),C=T+(_.b<.5?1:0)*(R-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.MULTIPLY:b=d.r*_.r,x=d.g*_.g,C=d.b*_.b,g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.DARKEN:b=Math.min(d.r,_.r),x=Math.min(d.g,_.g),C=Math.min(d.b,_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.LIGHTEN:b=Math.max(d.r,_.r),x=Math.max(d.g,_.g),C=Math.max(d.b,_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.SCREEN:b=1-(1-d.r)*(1-_.r),x=1-(1-d.g)*(1-_.g),C=1-(1-d.b)*(1-_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a);break;case t.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(_.r,1e-6))),x=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(_.g,1e-6))),C=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(_.b,1e-6))),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(x-d.g),d.b+_.a*p*(C-d.b),d.a)}l.data[m]=255*g.r,l.data[m+1]=255*g.g,l.data[m+2]=255*g.b,l.data[m+3]=255*g.a}s.putImageData(l,0,0)}}]),t}(h.a);y.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},y.prototype.availableOptions={blendMode:{type:g.NUMBER,default:y.BLEND_MODES.NORMAL,uniformType:m.INT},overlayImage:{type:g.NUMBER,required:!0,uniformType:m.SAMPLER2D},overlayTexture:{type:g.OBJECT,required:!0},alpha:{type:g.NUMBER,default:1,uniformType:m.FLOAT}},t.a=y},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(e,t,n){t.a=[{defaultName:"Natasha Wescoat",identifier:"imgly_art_filter_june_tree",rootPath:"art-filters/imgly_june_tree",thumbnail:"art-filters/imgly_june_tree/thumbnail.jpg"},{defaultName:"Hive",identifier:"imgly_art_filter_hive",rootPath:"art-filters/imgly_hive",thumbnail:"art-filters/imgly_hive/thumbnail.jpg"},{defaultName:"Udnie",identifier:"imgly_art_filter_udnie",rootPath:"art-filters/imgly_udnie",thumbnail:"art-filters/imgly_udnie/thumbnail.jpg"},{defaultName:"Vince Low",identifier:"imgly_art_filter_vince_low",rootPath:"art-filters/imgly_vince_low",thumbnail:"art-filters/imgly_vince_low/thumbnail.jpg"},{defaultName:"Mosaic",identifier:"imgly_art_filter_mosaic",rootPath:"art-filters/imgly_mosaic",thumbnail:"art-filters/imgly_mosaic/thumbnail.jpg"},{defaultName:"Wave",identifier:"imgly_art_filter_wave",rootPath:"art-filters/imgly_wave",thumbnail:"art-filters/imgly_wave/thumbnail.jpg"},{defaultName:"Malikova Darya",identifier:"imgly_art_filter_watercolor",rootPath:"art-filters/imgly_watercolor",thumbnail:"art-filters/imgly_watercolor/thumbnail.jpg"}]},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),l=n.n(s),u=n(10),c=n.n(u),f=n(32),h=n(300),p=n(301),d=n(65),_=n(71),g=n(309),m="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var b=function(e){return f.a.byteArrayToString(d.a.decode(e))},w="ZXhwaXJlc19hdA==",k=function(){function e(t){v(this,e),this._version="2.4",this._l="string"==typeof t?t.trim():t,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return y(e,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(e){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[b("YXBwX2lkZW50aWZpZXJz")].length)return!0;var e=window.location.hostname,t=!1;return this._decLic[b("YXBwX2lkZW50aWZpZXJz")].forEach((function(n){f.a.wildCardMatch(e,n)&&(t=!0)})),t}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[b("cGxhdGZvcm0=")]}},{key:"c",value:function(){var e=this;return new c.a((function(t,n){if("string"!==m(e._l)||!e._jsonValid()){var i=new Error;return i.code="ELICINVFMT",n(i)}if(!e._sigValid()){var r=new Error;return r.code="ELICINV",n(r)}if(!e._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",n(o)}if(!e._platformValid()){var a=new Error;return a.code="ELICINVPLAT",n(a)}if(e.isExp()){var s=new Error;return s.code="ELICEXP",n(s)}t()}))}},{key:"isToolAllowed",value:function(e){return this._includesFeature(e)}},{key:"isWhiteLabel",value:function(){return this._includesFeature("whitelabel",new h.a("2.4",!0))}},{key:"areCustomAssetsAllowed",value:function(){return this._includesFeature("customassets",new h.a("2.4",!0))}},{key:"t",value:function(){if(this._decLic.enterprise_license)return c.a.resolve();if(this._includesFeature("noexporttracking",new h.a("2.4",!0)))return c.a.resolve();var e=this._decLic[b("ZG9tYWlucw==")][0]+b(b("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[b("YXBpX3Rva2Vu")];return new _.a(e).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[b("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[b(w)]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[b(w)]&&e>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[b(w)]}},{key:"_verify",value:function(e,t){return this._encodeMessage(e)===this._decodeSignature(t).substr(-64)}},{key:"_encodeMessage",value:function(e){return Object(g.a)(e)}},{key:"_decodeSignature",value:function(e){return e=(e=d.a.decode(e)).map((function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(""),(e=this._parseBigInt(e,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(e,t){return new p.a(e,t)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[b("c2lnbmF0dXJl")]||"",delete this._decLic[b("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'+b("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}},{key:"_includesFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h.a("1.0",!0),n=new h.a(this._decLic[b("dmVyc2lvbg==")],!0);return!!t.isMoreRecentThan(n)||this._decLic[b("ZmVhdHVyZXM=")]&&-1!==this._decLic[b("ZmVhdHVyZXM=")].indexOf(e)}}]),e}(),x=function(){function e(){v(this,e)}return y(e,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return c.a.resolve()}},{key:"isToolAllowed",value:function(e){return!0}},{key:"isWhiteLabel",value:function(){return!1}},{key:"areCustomAssetsAllowed",value:function(){return!0}},{key:"t",value:function(){return c.a.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){return!1}}]),e}();t.b=k},function(e,t,n){n.d(t,"a",(function(){return u}));var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,l=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,e);var i=n?l:s,r=i.exec(t);i.lastIndex=0,this._major=r[1],this._minor=r[2],this._patch=r[3]||0}return o(e,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}}]),o(e,[{key:"equals",value:function(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}},{key:"isMoreRecentThan",value:function(e){return!(this._major<e.major)&&(this._major>e.major||!(this._minor<e.minor)&&(this._minor>e.minor||!(this._patch<=e.patch)&&(this._patch>e.patch||void 0)))}}]),e}()},function(e,t,n){
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
var i,r=r||{};function o(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new o(null)}"Microsoft Internet Explorer"==r.appName?(o.prototype.am=function(e,t,n,i,r,o){for(var a=32767&t,s=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,c=s*l+u*a;r=((l=a*l+((32767&c)<<15)+n[i]+(1073741823&r))>>>30)+(c>>>15)+s*u+(r>>>30),n[i++]=1073741823&l}return r},i=30):"Netscape"!=r.appName?(o.prototype.am=function(e,t,n,i,r,o){for(;--o>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r},i=26):(o.prototype.am=function(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,c=s*l+u*a;r=((l=a*l+((16383&c)<<14)+n[i]+r)>>28)+(c>>14)+s*u,n[i++]=268435455&l}return r},i=28),o.prototype.DB=i,o.prototype.DM=(1<<i)-1,o.prototype.DV=1<<i,o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-i,o.prototype.F2=2*i-52;var s,l,u=new Array;for(s="0".charCodeAt(0),l=0;l<=9;++l)u[s++]=l;for(s="a".charCodeAt(0),l=10;l<36;++l)u[s++]=l;for(s="A".charCodeAt(0),l=10;l<36;++l)u[s++]=l;function c(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function f(e,t){var n=u[e.charCodeAt(t)];return null==n?-1:n}function h(e){var t=a();return t.fromInt(e),t}function p(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function d(e){this.m=e}function _(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function m(e,t){return e|t}function y(e,t){return e^t}function v(e,t){return e&~t}function b(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function w(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function k(){}function x(e){return e}function T(e){this.r2=a(),this.q3=a(),o.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},_.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},_.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},_.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},o.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},o.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},o.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,r=!1,a=0;--i>=0;){var s=8==n?255&e[i]:f(e,i);s<0?"-"==e.charAt(i)&&(r=!0):(r=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},o.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},o.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},o.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},o.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}},o.prototype.subTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},o.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)},o.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},o.prototype.divRemTo=function(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=a());var s=a(),l=this.s,u=e.s,c=this.DB-p(i[i.t-1]);c>0?(i.lShiftTo(c,s),r.lShiftTo(c,n)):(i.copyTo(s),r.copyTo(n));var f=s.t,h=s[f-1];if(0!=h){var d=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),_=this.FV/d,g=(1<<this.F1)/d,m=1<<this.F2,y=n.t,v=y-f,b=null==t?a():t;for(s.dlShiftTo(v,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),o.ONE.dlShiftTo(f,b),b.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--v>=0;){var w=n[--y]==h?this.DM:Math.floor(n[y]*_+(n[y-1]+m)*g);if((n[y]+=s.am(0,w,n,v,0,f))<w)for(s.dlShiftTo(v,b),n.subTo(b,n);n[y]<--w;)n.subTo(b,n)}null!=t&&(n.drShiftTo(f,t),l!=u&&o.ZERO.subTo(t,t)),n.t=f,n.clamp(),c>0&&n.rShiftTo(c,n),l<0&&o.ZERO.subTo(n,n)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},o.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},o.prototype.exp=function(e,t){if(e>4294967295||e<1)return o.ONE;var n=a(),i=a(),r=t.convert(this),s=p(e)-1;for(r.copyTo(n);--s>=0;)if(t.sqrTo(n,i),(e&1<<s)>0)t.mulTo(i,r,n);else{var l=n;n=i,i=l}return t.revert(n)},o.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(r=!0,o=c(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&i,s<=0&&(s+=this.DB,--a)),n>0&&(r=!0),r&&(o+=c(n));return r?o:"0"},o.prototype.negate=function(){var e=a();return o.ZERO.subTo(this,e),e},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},o.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new d(t):new _(t),this.exp(e,n)},o.ZERO=h(0),o.ONE=h(1),k.prototype.convert=x,k.prototype.revert=x,k.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},k.prototype.sqrTo=function(e,t){e.squareTo(t)},T.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},T.prototype.revert=function(e){return e},T.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},T.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var R=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/R[R.length-1];o.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},o.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=h(n),r=a(),o=a(),s="";for(this.divRemTo(i,r,o);r.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,r.divRemTo(i,r,o);return o.intValue().toString(e)+s},o.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),r=!1,a=0,s=0,l=0;l<e.length;++l){var u=f(e,l);u<0?"-"==e.charAt(l)&&0==this.signum()&&(r=!0):(s=t*s+u,++a>=n&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),r&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(o.ONE.shiftLeft(e-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(o.ONE.shiftLeft(e-1),this);else{var i=new Array,r=7&e;i.length=1+(e>>3),t.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}},o.prototype.bitwiseTo=function(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;i<o;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},o.prototype.changeBit=function(e,t){var n=o.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},o.prototype.addTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},o.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},o.prototype.multiplyLowerTo=function(e,t,n){var i,r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},o.prototype.multiplyUpperTo=function(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},o.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n},o.prototype.millerRabin=function(e){var t=this.subtract(o.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var i=t.shiftRight(n);(e=e+1>>1)>R.length&&(e=R.length);for(var r=a(),s=0;s<e;++s){r.fromInt(R[Math.floor(Math.random()*R.length)]);var l=r.modPow(i,this);if(0!=l.compareTo(o.ONE)&&0!=l.compareTo(t)){for(var u=1;u++<n&&0!=l.compareTo(t);)if(0==(l=l.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=l.compareTo(t))return!1}}return!0},o.prototype.clone=function(){var e=a();return this.copyTo(e),e},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},o.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-- >0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t},o.prototype.equals=function(e){return 0==this.compareTo(e)},o.prototype.min=function(e){return this.compareTo(e)<0?this:e},o.prototype.max=function(e){return this.compareTo(e)>0?this:e},o.prototype.and=function(e){var t=a();return this.bitwiseTo(e,g,t),t},o.prototype.or=function(e){var t=a();return this.bitwiseTo(e,m,t),t},o.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,y,t),t},o.prototype.andNot=function(e){var t=a();return this.bitwiseTo(e,v,t),t},o.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},o.prototype.shiftLeft=function(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},o.prototype.shiftRight=function(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},o.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+b(this[e]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=w(this[n]^t);return e},o.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},o.prototype.setBit=function(e){return this.changeBit(e,m)},o.prototype.clearBit=function(e){return this.changeBit(e,v)},o.prototype.flipBit=function(e){return this.changeBit(e,y)},o.prototype.add=function(e){var t=a();return this.addTo(e,t),t},o.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},o.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},o.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},o.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},o.prototype.divideAndRemainder=function(e){var t=a(),n=a();return this.divRemTo(e,t,n),new Array(t,n)},o.prototype.modPow=function(e,t){var n,i,r=e.bitLength(),o=h(1);if(r<=0)return o;n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=r<8?new d(t):t.isEven()?new T(t):new _(t);var s=new Array,l=3,u=n-1,c=(1<<n)-1;if(s[1]=i.convert(this),n>1){var f=a();for(i.sqrTo(s[1],f);l<=c;)s[l]=a(),i.mulTo(f,s[l-2],s[l]),l+=2}var g,m,y=e.t-1,v=!0,b=a();for(r=p(e[y])-1;y>=0;){for(r>=u?g=e[y]>>r-u&c:(g=(e[y]&(1<<r+1)-1)<<u-r,y>0&&(g|=e[y-1]>>this.DB+r-u)),l=n;0==(1&g);)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--y),v)s[g].copyTo(o),v=!1;else{for(;l>1;)i.sqrTo(o,b),i.sqrTo(b,o),l-=2;l>0?i.sqrTo(o,b):(m=o,o=b,b=m),i.mulTo(b,s[g],o)}for(;y>=0&&0==(e[y]&1<<r);)i.sqrTo(o,b),m=o,o=b,b=m,--r<0&&(r=this.DB-1,--y)}return i.revert(o)},o.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return o.ZERO;for(var n=e.clone(),i=this.clone(),r=h(1),a=h(0),s=h(0),l=h(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(e,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);n.compareTo(i)>=0?(n.subTo(i,n),t&&r.subTo(s,r),a.subTo(l,a)):(i.subTo(n,i),t&&s.subTo(r,s),l.subTo(a,l))}return 0!=i.compareTo(o.ONE)?o.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l},o.prototype.pow=function(e){return this.exp(e,new k)},o.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(r<o&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},o.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=R[R.length-1]){for(t=0;t<R.length;++t)if(n[0]==R[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<R.length;){for(var i=R[t],r=t+1;r<R.length&&i<C;)i*=R[r++];for(i=n.modInt(i);t<r;)if(i%R[t++]==0)return!1}return n.millerRabin(e)},o.prototype.square=function(){var e=a();return this.squareTo(e),e},t.a=o},function(e,t,n){var i=n(303),r=n(305);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return r.isString(e)&&(e=v(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),f=["%","/","?",";","#"].concat(c),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(306);function v(e,t,n){if(e&&r.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}o.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var v=e=u.join(s);if(v=v.trim(),!n&&1===e.split("#").length){var b=l.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(v);if(w){var k=(w=w[0]).toLowerCase();this.protocol=k,v=v.substr(w.length)}if(n||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===v.substr(0,2);!x||w&&g[w]||(v=v.substr(2),this.slashes=!0)}if(!g[w]&&(x||w&&!m[w])){for(var T,R,C=-1,E=0;E<h.length;E++)-1!==(O=v.indexOf(h[E]))&&(-1===C||O<C)&&(C=O);for(-1!==(R=-1===C?v.lastIndexOf("@"):v.lastIndexOf("@",C))&&(T=v.slice(0,R),v=v.slice(R+1),this.auth=decodeURIComponent(T)),C=-1,E=0;E<f.length;E++){var O;-1!==(O=v.indexOf(f[E]))&&(-1===C||O<C)&&(C=O)}-1===C&&(C=v.length),this.host=v.slice(0,C),v=v.slice(C),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var S=this.hostname.split(/\./),A=(E=0,S.length);E<A;E++){var F=S[E];if(F&&!F.match(p)){for(var M="",D=0,B=F.length;D<B;D++)F.charCodeAt(D)>127?M+="x":M+=F[D];if(!M.match(p)){var P=S.slice(0,E),L=S.slice(E+1),z=F.match(d);z&&(P.push(z[1]),L.unshift(z[2])),L.length&&(v="/"+L.join(".")+v),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=i.toASCII(this.hostname));var U=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!_[k])for(E=0,A=c.length;E<A;E++){var j=c[E];if(-1!==v.indexOf(j)){var G=encodeURIComponent(j);G===j&&(G=escape(j)),v=v.split(j).join(G)}}var W=v.indexOf("#");-1!==W&&(this.hash=v.substr(W),v=v.slice(0,W));var V=v.indexOf("?");if(-1!==V?(this.search=v.substr(V),this.query=v.substr(V+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,V)):t&&(this.search="",this.query={}),v&&(this.pathname=v),m[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+i},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(r.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),a=0;a<i.length;a++){var s=i[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var _=n.pathname||"",y=n.search||"";n.path=_+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||v||n.host&&e.pathname,k=w,x=n.pathname&&n.pathname.split("/")||[],T=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),w=w&&(""===d[0]||""===x[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=x.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var R=x.slice(-1)[0],C=(n.host||e.host||x.length>1)&&("."===R||".."===R)||""===R,E=0,O=x.length;O>=0;O--)"."===(R=x[O])?x.splice(O,1):".."===R?(x.splice(O,1),E++):E&&(x.splice(O,1),E--);if(!w&&!k)for(;E--;E)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),C&&"/"!==x.join("/").substr(-1)&&x.push("");var I,S=""===x[0]||x[0]&&"/"===x[0].charAt(0);return T&&(n.hostname=n.host=S?"":x.length?x.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),(w=w||n.host&&x.length)&&!S&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,i){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var a="object"==typeof i&&i;a.global===a||a.window===a||a.self;var s,l=2147483647,u=/^xn--/,c=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function _(e){throw new RangeError(h[e])}function g(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function m(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+g((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=d((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=d(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var i=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;i+=36)e=p(e/35);return p(i+36*e/(e+38))}function k(e){var t,n,i,r,o,a,s,u,c,f,h,d=[],g=e.length,m=0,y=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&_("not-basic"),d.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<g;){for(o=m,a=1,s=36;r>=g&&_("invalid-input"),((u=(h=e.charCodeAt(r++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||u>p((l-m)/a))&&_("overflow"),m+=u*a,!(u<(c=s<=b?1:s>=b+26?26:s-b));s+=36)a>p(l/(f=36-c))&&_("overflow"),a*=f;b=w(m-o,t=d.length+1,0==o),p(m/t)>l-y&&_("overflow"),y+=p(m/t),m%=t,d.splice(m++,0,y)}return v(d)}function x(e){var t,n,i,r,o,a,s,u,c,f,h,g,m,v,k,x=[];for(g=(e=y(e)).length,t=128,n=0,o=72,a=0;a<g;++a)(h=e[a])<128&&x.push(d(h));for(i=r=x.length,r&&x.push("-");i<g;){for(s=l,a=0;a<g;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>p((l-n)/(m=i+1))&&_("overflow"),n+=(s-t)*m,t=s,a=0;a<g;++a)if((h=e[a])<t&&++n>l&&_("overflow"),h==t){for(u=n,c=36;!(u<(f=c<=o?1:c>=o+26?26:c-o));c+=36)k=u-f,v=36-f,x.push(d(b(f+k%v,0))),u=p(k/v);x.push(d(b(u,0))),o=w(n,m,i==r),n=0,++i}++n,++t}return x.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:v},decode:k,encode:x,toASCII:function(e){return m(e,(function(e){return c.test(e)?"xn--"+x(e):e}))},toUnicode:function(e){return m(e,(function(e){return u.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(304)(e),n(64))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(307),t.encode=t.stringify=n(308)},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,h,p,d,_=e[c].replace(s,"%20"),g=_.indexOf(n);g>=0?(f=_.substr(0,g),h=_.substr(g+1)):(f=_,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),i(a,p)?r(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(i(a))+n;return r(e[a])?o(e[a],(function(e){return s+encodeURIComponent(i(e))})).join(t):s+encodeURIComponent(i(e[a]))})).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function i(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function l(e){return n(e,7)^n(e,18)^i(e,3)}return function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)+4&15)+"0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)&15);return t}(function(e,u){var c,f,h,p,d,_,g,m,y,v,b,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);e[u>>5]|=128<<24-u%32,e[15+(u+64>>9<<4)]=u;for(var T=0;T<e.length;T+=16){c=k[0],f=k[1],h=k[2],p=k[3],d=k[4],_=k[5],g=k[6],m=k[7];for(var R=0;R<64;R++)x[R]=R<16?e[R+T]:t(t(t(n(b=x[R-2],17)^n(b,19)^i(b,10),x[R-7]),l(x[R-15])),x[R-16]),y=t(t(t(t(m,s(d)),r(d,_,g)),w[R]),x[R]),v=t(a(c),o(c,f,h)),m=g,g=_,_=d,d=t(p,y),p=h,h=f,f=c,c=t(y,v);k[0]=t(c,k[0]),k[1]=t(f,k[1]),k[2]=t(h,k[2]),k[3]=t(p,k[3]),k[4]=t(d,k[4]),k[5]=t(_,k[5]),k[6]=t(g,k[6]),k[7]=t(m,k[7])}return k}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e)),8*e.length))}n.d(t,"a",(function(){return i}))},function(e,t,n){(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));for(
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
var i="undefined"==typeof window?e:window,r=i.requestAnimationFrame,o=i.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],l=0;l<s.length&&!r;++l)r=i[s[l]+"RequestAnimationFrame"],o=i[s[l]+"CancelAnimationFrame"]||i[s[l]+"CancelRequestAnimationFrame"];r&&(r=r.bind(i)),o&&(o=o.bind(i)),r||(r=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),r=setTimeout((function(){e(n+i)}),i);return a=n+i,r}),o||(o=function(e){clearTimeout(e)})}).call(t,n(64))},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.z=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return o(e,[{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clamp",value:function(t,n){var i=null!=t,r=null!=n;return t instanceof e||!i||(t=new e(t,t,t)),n instanceof e||!r||(n=new e(n,n,n)),i&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y),this.z=Math.max(t.z,this.z)),r&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(t){return t instanceof e?(this.x/=t.x,this.y/=t.y,this.z/=t.z):(this.x/=t,this.y/=t,this.z/=t),this}},{key:"subtract",value:function(t){return t instanceof e?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t),this}},{key:"multiply",value:function(t){return t instanceof e?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t),this}},{key:"add",value:function(t){return t instanceof e?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t),this}},{key:"equals",value:function(t){return t instanceof e?t.x===this.x&&t.y===this.y&&t.z===this.z:t===this.x&&t===this.y&&t===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y,t.z)}},{key:"NULL",get:function(){return new e(0,0,0)}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.min=t,this.max=n}return o(e,[{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getLength",value:function(){return this.max-this.min}},{key:"contains",value:function(e){return this.min<=e&&e<=this.max}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=n(45),a=n(24),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,-1),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);l(this,e),this._p0=t.clone(),this._p1=n.clone(),this._p2=i.clone(),this._p3=r.clone(),this._segments=[],this._length=-1,this._sample=[]}return s(e,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);this._p0=e.clone(),this._p1=t.clone(),this._p2=n.clone(),this._p3=i.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=0,n=0,i=[],r=1/e,o=this._p0.clone(),a=1;a<=e;a++){var s=[];s.push({t:t,s:n,point:o}),t+=r,t=Math.min(t,1);var l=this.evalAt(t),u=l.clone().subtract(o);n+=u.len(),s.push({t:t,s:n,point:l}),i.push(s),o=l}return this._segments=i,this._length=n,n}},{key:"evalAt",value:function(e){e=this.normalizeParameter(e);var t=this._p0.clone().multiply(Math.pow(1-e,3)),n=this._p1.clone().multiply(3*(1-e)*(1-e)*e),i=this._p2.clone().multiply(3*(1-e)*e*e),r=this._p3.clone().multiply(e*e*e);return t.add(n).add(i).add(r)}},{key:"isInSegment",value:function(e,t){return(e=this.normalizeArcLength(e))>=t[0].s&&e<=t[1].s}},{key:"getArcLengthSegment",value:function(e){e=this.normalizeArcLength(e);for(var t=0;t<this._segments.length;t++){var n=this._segments[t];if(this.isInSegment(e,n))return n}return null}},{key:"normalizeArcLength",value:function(e){return Math.max(Math.min(this._length,e),0)}},{key:"normalizeParameter",value:function(e){return Math.max(Math.min(1,e),0)}},{key:"getParameterForArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return a.a.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return i*n[0].t+(1-i)*n[1].t}},{key:"evalAtArcLength",value:function(e){return this.evalAt(this.getParameterForArcLength(e))}},{key:"approximateAtArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(i).add(n[1].point.clone().multiply(1-i))}},{key:"parameterSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=1/e,n=[],i=0,r=0;r<=e+1;r++)n.push(this.evalAt(i)),i+=t;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._length/e,r=[],o=0,a=t?1:0;a<e+1;a++)r.push(this.approximateAtArcLength(o)),o+=i;return n&&r.pop(),this._sample=r,[].concat(r)}}]),e}();t.a=u},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(38),h=n(46),p=n(45),d=n(167),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=f.Constants.OptionType,v=function(e){function t(){return g(this,t),m(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"getRotation",value:function(){var e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90}return e}},{key:"_getFlipVertically",value:function(){var e=this.getTags().Orientation;return-1!==[5,7].indexOf(e)}},{key:"_getFlipHorizontally",value:function(){var e=this.getTags().Orientation;return-1!==[2,4].indexOf(e)}},{key:"_getFinalOptions",value:function(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(e){var t=this._getFinalOptions(),n=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new p.a(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),h.a.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}},{key:"applyTo",value:function(e){var t=this._getFinalOptions(),n=f.Utils.createCanvas();90===Math.abs(t.rotation%180)?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var i=n.getContext("2d"),r=t.rotation*Math.PI/180,o=.5*(n.width-e.width),a=.5*(n.height-e.height);return i.translate(o,a),i.translate(.5*e.width,.5*e.height),i.rotate(r),i.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(i.translate(0,e.height),i.scale(1,-1)),t.flipHorizontally&&(i.translate(e.width,0),i.scale(-1,1)),i.drawImage(e,0,0),n}}]),t}(d.a);v.identifier="exif-orientation",v.prototype.availableOptions={tags:{type:y.OBJECT,default:{}}},t.a=v},function(e,t,n){var i=n(0),r=n.n(i),o=n(121),a=n(122),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=a.a.MARKERS,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0)}return s(e,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==l.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var e=this._stream.readString(4),t=this._stream.readInt8();return"JFIF"===e&&0===t}},{key:"setUnitDensity",value:function(e){this._stream.setHead(11),this._stream.writeInt8(e)}},{key:"setDensityX",value:function(e){this._stream.setHead(12),this._stream.writeInt16(e)}},{key:"setDensityY",value:function(e){this._stream.setHead(14),this._stream.writeInt16(e)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}]),e}();t.a=u},function(e,t,n){var i=n(0),r=n.n(i),o=n(121),a=n(122),s=n(32),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=s.a.invariant,c=a.a.MARKERS,f=a.a.EXIF_TAGS,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0),this._parse()}return l(e,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&this._stream.readInt16()>0&&"Exif"===this._stream.readString(4)}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var e=this._stream.getHead(),t=!1,n=this._stream.readInt16();18761===n?t=!1:19789===n?t=!0:u(!1,"Invalid TIFF data: No endian type found"),u(42===this._stream.readInt16(!t),"Invalid TIFF data: No 0x002A");var i=this._stream.readInt32(!t);u(i>=8,"Invalid TIFF data: First IFD offset < 8");var r=e+i,o=this._readTags(this._stream,e,r,t);this._tags=o.tags,this._tagData=o.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(e){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._stream.setHead(t+8),this._stream.writeInt16(e)}}},{key:"_readTags",value:function(e,t,n,i){e.setHead(n);for(var r=e.readInt16(!i),o={},a=[],s=0;s<r;s++){var l=n+12*s+2;e.setHead(l);var u=e.readInt16(!i),c=void 0,h=void 0,p=void 0;if(f[u]){u=f[u],c=e.readInt16(!i),h=e.readInt32(!i),p=e.readInt32(!i)+t;var d=null;switch(c){case 1:case 7:if(1===h)d=e.readInt8(!i);else{d=[];for(var _=0;_<h;_++)d.push(e.readInt8(!i))}break;case 2:e.setHead(h>4?p:l+8),d=e.readString(h);break;case 3:if(e.setHead(h>2?p:l+8),1===h)d=e.readInt16(!i);else{d=[];for(var g=0;g<h;g++)d.push(e.readInt16(!i))}break;case 4:case 9:if(e.setHead(h>1?p:l+8),1===h)d=e.readInt32(!i);else{d=[];for(var m=0;m<h;m++)d.push(e.readInt32(!i))}break;case 5:case 10:if(e.setHead(p),1===h)d=e.readInt32(!i)/e.readInt32(!i);else{d=[];for(var y=0;y<h;y++){var v=e.readInt32(!i)/e.readInt32(!i);d.push(v)}}}o[u]=d,a[u]={value:d,numValues:h,entryOffset:l,valueOffset:p,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),e}();t.a=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(10),c=n.n(u),f=n(1),h=n.n(f),p=n(40),d=n(85),_=n(32),g=n(89),m=(n(120),n(70)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var i=b(this,(t.__proto__||h()(t)).call(this,n));return i._sdk=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"export",value:function(){var e=this,t=this._options.imageFormat;return this.validateSettings().then((function(){return e._prepareSDK().then((function(t){return function t(n){return n.renderDone?n:e._sdk.render().then((function(e){return t(e)}))}(t)}))})).then((function(t){var n=t.outputTexture,i=(t.renderDone,e._sdk.getRenderer()),r=i.getCanvas();return i.isOfType(p.RendererType.WEBGL)&&(r=e._createCanvasFromTexture(n)),e._encodeImageFormat(r)})).then((function(n){return e._restoreExifMetadata(n,t)})).then((function(t){return e._restoreSDK().then((function(){return t}))}))}},{key:"_restoreExifMetadata",value:function(e,t,n){if(t===p.ImageFormat.JPEG){var i=this._sdk.getExif();i&&(e=i.restoreSegments(e))}return c.a.resolve(e)}},{key:"_encodeAsDataURL",value:function(e,t,n){return _.a.isBrowser?c.a.resolve(e.toDataURL(t,n)):new c.a((function(i,r){e.toDataURL(t,n,(function(e,t){e?r(e):i(t)}))}))}},{key:"_encodeAsHTMLImage",value:function(e,t,n){return this._encodeAsDataURL(e).then((function(e){var t=new g.a;return t.src=e,c.a.resolve(t)}))}},{key:"_encodeAsBuffer",value:function(e,t,n){return c.a.reject(new Error("Unsupported platform for RenderType"))}},{key:"_encodeAsMSBlob",value:function(e,t,n){return c.a.resolve(e.msToBlob())}},{key:"_encodeAsBLOB",value:function(e,t,n){return new c.a((function(i,r){e.toBlob((function(e){i(e)}),t,n)}))}},{key:"_encodeImageFormat",value:function(e){var t=this._options,n=t.imageFormat,i=t.quality,r=this._options.renderType;switch(-1!==[p.RenderType.MSBLOB,p.RenderType.BLOB].indexOf(r)&&(r=-1!==(window&&window.navigator&&window.navigator.userAgent||"").indexOf("Edge")?p.RenderType.MSBLOB:p.RenderType.BLOB),r){case p.RenderType.IMAGE:return this._encodeAsHTMLImage(e,n,i);case p.RenderType.DATAURL:return this._encodeAsDataURL(e,n,i);case p.RenderType.BUFFER:return this._encodeAsBuffer(e,n,i);case p.RenderType.MSBLOB:return this._encodeAsMSBlob(e,n,i);case p.RenderType.BLOB:return this._encodeAsBLOB(e,n,i)}return c.a.reject(new Error("Unsupported RenderType: "+r+"!"))}},{key:"_prepareSDK",value:function(){var e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var t=e.isOfType(p.RendererType.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach((function(e){e.disposeRenderTextures()})),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var e=this._sdk.getRenderer(),t=e.isOfType(p.RendererType.CANVAS);return e.setPixelRatio(this._sdkSettings.pixelRatio),e.resizeTo(this._sdkSettings.dimensions,t),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(e){var t=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),i=this._sdk.getRenderer().getContext(),r=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,r);var o=e.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0);var a=new Uint8Array(n.x*n.y*4);i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,a);var s=void 0;if(this._checkPixelsForTransparency(a)){var l=new d.a.Sprite(e);l.setFilters([new d.a.Filters.UnpremultiplyFilter]);var u=new d.a.Container;u.addChild(l),(s=new d.a.RenderTexture(t,n.x,n.y)).render(u);var c=s.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,c,0),i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,a),t.setRenderTarget(),s.dispose()}var f=_.a.createCanvas();f.width=n.x,f.height=n.y;var h=f.getContext("2d"),p=h.createImageData(n.x,n.y);return p.data.set(a),h.putImageData(p,0,0),i.deleteFramebuffer(r),f}},{key:"_checkPixelsForTransparency",value:function(e){for(var t=this._sdk.getFinalDimensions(),n=t.x*t.y*4,i=3;i<n;i+=4)if(255!==e[i])return!0;return!1}}]),t}(m.a);w.prototype.availableOptions={renderType:{type:p.OptionType.STRING,available:_.a.values(p.RenderType),default:p.RenderType.IMAGE},imageFormat:{type:p.OptionType.STRING,available:_.a.values(p.ImageFormat),default:p.ImageFormat.PNG},quality:{type:p.OptionType.NUMBER,default:.8}},t.a=w},function(e,t){
/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1},configurable:!0,writable:!0})},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"current",value:function(){return"development"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!0}},{key:"isProduction",value:function(){return!this.isTest()&&!this.isDevelopment()}}]),e}();t.a=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n.n(i),o=n(321),a=n(329),s=n(331),l=n(397),u=n(398),c=n(402),f=n(405),h=n(408),p=n(409),d=n(410),_=n(413),g=n(419),m=n(448),y=n(450),v=n(451),b=n(475),w=n(476),k=[o.a,a.a,s.a,l.a,u.a,c.a,f.a,h.a,p.a,d.a,_.a,g.a,m.a,y.a,v.a,b.a,w.a];r.a.AllOperations=k,t.default=k},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(172),g=n(323),m=n(325),y=n(327),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=p.Math.ColorMatrix,x=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._clarityFilter=new g.a,o._temperatureFilter=new m.a,o._sharpnessFilter=new y.a,o._filter=new _.a,o._sprite.setFilters([o._clarityFilter,o._temperatureFilter,o._filter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_render",value:function(e){var t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;var n=new k;n.multiply(k.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(k.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});var i=new k;i.multiply(k.createExposureMatrix(this._options.exposure)),i.multiply(k.createSaturationMatrix(this._options.saturation+1)),i.multiply(k.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),i.multiply(k.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:i,colorOffset:i.getOffsets()});var r=[];return 0!==this._options.clarity&&r.push(this._clarityFilter),0!==this._options.sharpness&&r.push(this._sharpnessFilter),0!==this._options.temperature&&r.push(this._temperatureFilter),r.push(this._filter),this._sprite.setFilters(r),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}]),t}(p.Operation);x.identifier="adjustments",x.prototype.availableOptions={brightness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:p.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:p.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},d.a.Operations.AdjustmentsOperation=x,t.a=x},function(e,t){e.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Vector2,d=f.Math.ColorMatrix,_=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(324),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.clarity,s=this._options.colorMatrix,l=new f.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),u=r.width,c=r.height,h=o.getImageData(0,0,u,c),p=i.createImageData(u,c);this.canvasShader(h,p,a,s,l),i.putImageData(p,0,0)}},{key:"canvasShader",value:function(e,t,n,i,r){for(var o=function(e,t,n){return Math.min(Math.max(e,t),n)},a=function(e,t,n){var i=o((n-e)/(t-e),0,1);return i*i*(3-2*i)},s=4*e.width,l=e.data.length,u=l-1,c=e.data,h=t.data,p=new f.Color,d=function(e){return c[e=(e=e<0?0:e)>u?u:e]},_=0;_<l;_+=4){var g=d(_+0),m=d(_+1),y=d(_+2),v=d(_+3),b=(g+d(_-4-s+0)+d(_-4+0)+d(_-4+s+0)+d(_-s+0)+d(_+s+0)+d(_+4-s+0)+d(_+4+0)+d(_+4+s))/2295,w=(m+d(_-4-s+1)+d(_-4+1)+d(_-4+s+1)+d(_-s+1)+d(_+s+1)+d(_+4-s+1)+d(_+4+1)+d(_+4+s+1))/2295,k=(y+d(_-4-s+2)+d(_-4+2)+d(_-4+s+2)+d(_-s+2)+d(_+s+2)+d(_+4-s+2)+d(_+4+2)+d(_+4+s+2))/2295,x=(v+d(_-4-s+3)+d(_-4+3)+d(_-4+s+3)+d(_-s+3)+d(_+s+3)+d(_+4-s+3)+d(_+4+3)+d(_+4+s+3))/2295;v/=255;var T=o(.3*(g/=255)+.59*(m/=255)+.1*(y/=255),.111111,.999999),R=Math.min(a(1-T,0,.11),a(T,0,.11)),C=3.7*n*R,E=Math.pow(2,.27*n*R),O=o(g+o((g-b)*C,0,10),0,1)*E,I=o(m+o((m-w)*C,0,10),0,1)*E,S=o(y+o((y-k)*C,0,10),0,1)*E,A=o(v+o((v-x)*C,0,10),0,1);p.set(O,I,S,A);var F=i.apply(p).clamp(0,1);h[_+0]=255*F.r,h[_+1]=255*F.g,h[_+2]=255*F.b,h[_+3]=255*F.a}}}]),t}(f.Engine.Filter);_.prototype.availableOptions={clarity:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},pixelDimension:{type:f.OptionType.VECTOR2,default:new p(100,100),uniformType:f.UniformType.FLOAT2},colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new d,uniformType:f.UniformType.MAT4},colorOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}},t.a=_},function(e,t){e.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());f.Math.Vector3;var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(326),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.temperature,s=r.width,l=r.height,u=o.getImageData(0,0,s,l),c=i.createImageData(s,l);this.canvasShader(u,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i,r,o,a=function(e,t,n){return e*(1-n)+t*n},s=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]]},l=e.data.length,u=l-1,c=e.data,f=t.data,h=function(e){return c[e=(e=e<0?0:e)>u?u:e]},p=[.93,.54,0],d=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],_=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],g=0;g<l;g+=4){var m=h(g+0)/255,y=h(g+1)/255,v=h(g+2)/255,b=h(g+3)/255,w=s(d,[m,y,v]);w.z=(i=w.z+0,r=-.5226,o=.5226,Math.min(Math.max(i,r),o));var k=s(_,w),x=[k[0]<.5?2*k[0]*p[0]:1-2*(1-k[0])*(1-p[0]),k[1]<.5?2*k[1]*p[1]:1-2*(1-k[1])*(1-p[1]),k[2]<.5?2*k[2]*p[2]:1-2*(1-k[2])*(1-p[2])];f[g+0]=255*a(k[0],x[0],n),f[g+1]=255*a(k[1],x[1],n),f[g+2]=255*a(k[2],x[2],n),f[g+3]=255*b}}}]),t}(f.Engine.Filter);p.prototype.availableOptions={temperature:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}},t.a=p},function(e,t){e.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Vector2,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(328),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.sharpness,s=r.width,l=r.height,u=o.getImageData(0,0,s,l),c=i.createImageData(s,l);this.canvasShader(u,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=e.width,o=e.height,a=e.data,s=t.data,l=function(e,t,n){return e*(1-n)+t*n},u=function(e){return i(a[e]/255,0,1)},c=function(e,t){var n=i(e,0,r-1),a=i(t,0,o-1);return 4*(n+r*a)},f=[],h=[],p=[-1,0,0,1],d=[0,-1,1,0],_=n>0?-1:.2,g=n>0?5:.2,m=Math.abs(n),y=0;y<r;y++)for(var v=0;v<o;v++){var b=c(y,v);f[0]=u(b+0),f[1]=u(b+1),f[2]=u(b+2),f[3]=u(b+3),h[0]=g*f[0]*f[3],h[1]=g*f[1]*f[3],h[2]=g*f[2]*f[3],h[3]=g*f[3];for(var w=0;w<4;w++){var k=c(y+p[w],v+d[w]),x=u(k+3);h[3]+=_*x;for(var T=0;T<3;T++)h[T]+=_*u(k+T)*x}for(var R=0;R<3;R++)h[R]/=Math.max(h[3],1e-6),h[R]=i(h[R],0,1);h[3]=i(h[3],0,1);for(var C=0;C<4;C++)f[C]=i(l(f[C],h[C],m),0,1),s[b+C]=255*f[C]}}}]),t}(f.Engine.Filter);d.prototype.availableOptions={sharpness:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},pixelDimension:{type:f.OptionType.VECTOR2,default:new p(100,100),uniformType:f.UniformType.FLOAT2}},t.a=d},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(73),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=p.Math.Vector2,b=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i={blurRadius:this._options.blurRadius*n,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(i),this._verticalFilter.set(i),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options.blurRadius,n=e.getDimensions();return this._filter.set({blurRadius:t,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"transform",value:function(e){var t=this.getBlurRadius(),n=e.applyToRelativeSize(t);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}(p.Operation);b.identifier="blur",b.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.BlurOperation=b,t.a=b},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),m=n(173),y=n(8),v=n(364),b=n(7),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){function t(){return T(this,t),R(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),k(t,[{key:"_render",value:function(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}},{key:"render",value:function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?x(t.prototype.__proto__||d()(t.prototype),"render",this).call(this,e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),_.Promise.resolve(e))}},{key:"setDirtyForRenderer",value:function(e,n){x(t.prototype.__proto__||d()(t.prototype),"setDirtyForRenderer",this).call(this,e,n),this._selectedFilter.setDirtyForRenderer(e,n)}},{key:"disposeRenderTextures",value:function(){x(t.prototype.__proto__||d()(t.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){x(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(e){var t=w({},e);if(delete t.filter,e.filter){var n=e.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new n)}this.set(t)}},{key:"resetToDefaultFilterIntensity",value:function(){var e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}}]),t}(_.Operation);C.identifier="filter",C.prototype.availableOptions={identifier:{type:_.OptionType.STRING,default:"identity"},intensity:{type:_.OptionType.NUMBER,default:1,setter:function(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:_.OptionType.OBJECT,default:new m.a,setter:function(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},C.FilterPrimitives=y,C.Filters=v,C.Filter=b.a,g.a.Operations.FilterOperation=C,t.a=C},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(e){function t(){p(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(333),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=n.getContext(),o=this._options.filteredCanvas;r.save(),r.globalAlpha=1-this._options.intensity,r.drawImage(i,0,0),r.globalAlpha=this._options.intensity,r.drawImage(o,0,0),r.restore()}}]),t}(f.Engine.Filter);d.prototype.availableOptions={filteredImage:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.INT},filteredCanvas:{type:f.OptionType.OBJECT,default:null},intensity:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;p(this,e),this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new f.Engine.Container,this._sprite=new f.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new d}return h(e,[{key:"push",value:function(e){this._stack.push(e)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(e,t,n){if(this.isEmpty())return f.Promise.resolve();var i=e.getRenderer();this._sprite.setTexture(t);var r=this._renderTextures[i.id];if(!r){var o=e.getSprite().getTexture().getFrame();r=new f.Engine.RenderTexture(e.getRenderer(),o.width,o.height),this._renderTextures[i.id]=r}var a=n.getDimensions();r.resizeTo(a);var s=this.isDirtyForRenderer(i);if(s){this._stack.forEach((function(t){t.update(e)}));var l=this._stack.map((function(e){return e.getFilter()}));this._sprite.setFilters(l),r.render(this._container),this.setDirtyForRenderer(!1,i)}if(this._blendFilter.setIntensity(this._intensity),i.isOfType(f.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(r.getRenderTarget().getCanvas());else if(i.isOfType(f.RendererType.WEBGL)){var u=r.getBaseTexture();u.setGLUnit(this._blendFilter.getFilteredImage()),i.updateTexture(u,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(f.Color.TRANSPARENT),n.render(this._container),s&&this.disposeRenderTextures(),f.Promise.resolve()}},{key:"setIntensity",value:function(e){this._intensity=e}},{key:"isEmpty",value:function(){return 0===this._stack.length}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this._dirtiness[t]=e}},{key:"disposeRenderTextures",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach((function(e){return e.dispose()})),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),e}();t.a=_},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(335),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.brightness;if(0!==s){s*=255;for(var l=0;l<i.width*i.height;l++){var u=4*l;a.data[u]+=s,a.data[u+1]+=s,a.data[u+2]+=s}o.putImageData(a,0,0)}else o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={brightness:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(337),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.contrast;if(1!==s){for(var l=0;l<i.width*i.height;l++){var u=4*l;a.data[u]=(a.data[u]-127)*s+127,a.data[u+1]=(a.data[u+1]-127)*s+127,a.data[u+2]=(a.data[u+2]-127)*s+127}o.putImageData(a,0,0)}}}]),t}(f.Engine.Filter);m.prototype.availableOptions={contrast:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=f.Math.ColorMatrix,y=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(339),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.colorMatrix,l=new f.Color(0,0,0,0),u=0;u<i.width*i.height;u++){var c=4*u;l.r=a.data[c]/255,l.g=a.data[c+1]/255,l.b=a.data[c+2]/255,l=s.apply(l),a.data[c]=255*l.r,a.data[c+1]=255*l.g,a.data[c+2]=255*l.b}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);y.prototype.availableOptions={colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new m,uniformType:f.UniformType.MAT4},colorMatrixOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}};var v=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new y,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),t}(h.a);v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(341),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=[.3,.59,.11],l=this._options.desaturation,u=0;u<i.width*i.height;u++){var c=4*u,f=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*f-a.data[c])*l,a.data[c+1]+=(255*f-a.data[c+1])*l,a.data[c+2]+=(255*f-a.data[c+2])*l}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={desaturation:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.FLOAT}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(343),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,l=s.lightColor,u=s.darkColor,c=s.intensity,h=0;h<i.width*i.height;h++){var p=4*h,d=a.data[p]/255,_=a.data[p+1]/255,g=a.data[p+2]/255,m=a.data[p+3]/255,y=new f.Color(d,_,g,m),v=this._duoToneKernel(y,l,u,c);a.data[p]=255*v.r,a.data[p+1]=255*v.g,a.data[p+2]=255*v.b,a.data[p+3]=255*v.a}o.putImageData(a,0,0)}},{key:"_duoToneKernel",value:function(e,t,n,i){if(e.clone().clamp(0,1),i>0){var r=Math.max(i+1,1e-7);e.r=1-Math.pow(1-e.r,r),e.g=1-Math.pow(1-e.g,r),e.b=1-Math.pow(1-e.b,r)}else{var o=Math.max(1-i,1e-7);e.r=Math.pow(e.r,o),e.g=Math.pow(e.g,o),e.b=Math.pow(e.b,o)}var a=.2126*e.r+.7152*e.g+.0722*e.b,s=Math.min(Math.max(a,0),1),l=n.clone().mix(t,s);return l.a*=e.a,l}}]),t}(f.Engine.Filter);m.prototype.availableOptions={lightColor:{type:f.OptionType.COLOR,default:f.Color.RED,uniformType:f.UniformType.FLOAT4},darkColor:{type:f.OptionType.COLOR,default:f.Color.BLACK,uniformType:f.UniformType.FLOAT4},intensity:{type:f.OptionType.NUMBER,default:.5,uniformType:f.UniformType.FLOAT}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var e=2*this._options.intensity-1;this._filter.setIntensity(e)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(345),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.gamma,l=new Float32Array(256),u=0;u<256;u++)l[u]=255*Math.pow(u/255,s.r);for(var c=new Float32Array(256),f=0;f<256;f++)c[f]=255*Math.pow(f/255,s.g);for(var h=new Float32Array(256),p=0;p<256;p++)h[p]=255*Math.pow(p/255,s.b);for(var d=0;d<i.width*i.height;d++){var _=4*d;a.data[_]=l[a.data[_]],a.data[_+1]=c[a.data[_+1]],a.data[_+2]=h[a.data[_+2]]}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={gamma:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(347),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i,r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),l=this._options.color,u=0;u<r.width;u++)for(var c=0;c<r.height;c++){var f=4*(r.width*c+u),h=(u/r.width-.5)/.75,p=(c/r.height-.5)/.75;i=1-(h*h+p*p),i=Math.min(Math.max(i,.1),1),s.data[f]=s.data[f]*(i*l.r),s.data[f+1]=s.data[f+1]*(i*l.g),s.data[f+2]=s.data[f+2]*(i*l.b),s.data[f+3]=255}a.putImageData(s,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={color:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(349),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s);a.data[u+2]=.33*a.data[u+1],a.data[u]=.6*a.data[u],a.data[u+2]+=.33*a.data[u],a.data[u+1]=.7*a.data[u+1],a.data[u+3]=255}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter),y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),t}(h.a);t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(351),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s),c=.2125*a.data[u]+.7154*a.data[u+1]+.0721*a.data[u+2];a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter),y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),t}(h.a);t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(e,t,n){var i=n(5),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(18)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var v=p.Math.Vector2,b=function(e){function t(){g(this,t);var e=m(this,(t.__proto__||h()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=n(354),e}return y(t,e),_(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new v;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),l=r.getImageData(0,0,i.width,i.height),u=s.getImageData(0,0,a.width,a.height),c=new v,f=0;f<i.width*i.height*4;f+=4){var h=l.data[f],p=l.data[f+1],d=l.data[f+2],_=l.data[f+3]/255,g=this._quads[d];c.x=64*g.x,c.y=64*g.y,c.x+=Math.floor(h/4),c.y+=Math.floor(p/4);var m=4*(a.width*c.y+c.x)|0,y=u.data[m];y=h*(1-_)+y*_;var b=u.data[m+1];b=p*(1-_)+b*_;var w=u.data[m+2];w=d*(1-_)+w*_,l.data[f]=y,l.data[f+1]=b,l.data[f+2]=w}o.putImageData(l,0,0)}},{key:"_createImageCanvas",value:function(e){var t=p.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}(p.Engine.Filter);b.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null}};var w=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._filter=new b,o._textures={},o}return y(t,e),_(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new p.Engine.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var o=r()(t,n);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}(d.a);w.prototype.availableOptions={image:{type:p.OptionType.IMAGE}},t.a=w},function(e,t){e.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(356),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.saturation,l=0;l<i.width;l++)for(var u=0;u<i.height;u++){var c=4*(i.width*u+l),f=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=f*(1-s)+a.data[c]*s,a.data[c+1]=f*(1-s)+a.data[c+1]*s,a.data[c+2]=f*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={saturation:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(358),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s);a.data[u]=Math.max(255*this._options.color.r,a.data[u]),a.data[u+1]=Math.max(255*this._options.color.g,a.data[u+1]),a.data[u+2]=Math.max(255*this._options.color.b,a.data[u+2])}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);m.prototype.availableOptions={color:{type:f.OptionType.COLOR,default:f.Color.WHITE,uniformType:f.UniformType.FLOAT3}};var y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),p(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}(h.a);y.prototype.availableOptions=m.prototype.availableOptions,t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(174)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._options.rgbControlPoints||(o._options.rgbControlPoints={red:o._options.controlPoints,green:o._options.controlPoints,blue:o._options.controlPoints}),o._updateLookupTable(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_updateLookupTable",value:function(){var e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,n)}},{key:"_buildLookupTable",value:function(e,t,n){for(var i=[],r=0;r<256;r++)i.push(Math.min(Math.max(r+e[r],0),255)),i.push(Math.min(Math.max(r+t[r],0),255)),i.push(Math.min(Math.max(r+n[r],0),255)),i.push(255);return i}},{key:"_calculateSplineCurve",value:function(e){e=e.sort((function(e,t){return e[0]>t[0]}));var t,n=this._getSplineCurve(e),i=n[0];if(i[0]>0)for(t=0;t<i[0];t++)n.unshift([0,0]);var r=[];for(t=0;t<n.length;t++){var o=n[t],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),r.push(s)}return r}},{key:"_getSplineCurve",value:function(e){var t,n=this._secondDerivative(e),i=n.length,r=[];for(t=0;t<i;t++)r[t]=n[t];var o=[];for(t=0;t<i-1;t++)for(var a=e[t],s=e[t+1],l=a[0];l<s[0];l++){var u=(l-a[0])/(s[0]-a[0]),c=1-u,f=u,h=s[0]-a[0],p=c*a[1]+f*s[1]+h*h/6*((c*c*c-c)*r[t]+(f*f*f-f)*r[t+1]);p>255?p=255:p<0&&(p=0),o.push([l,p])}return 255===o.length&&o.push(e[e.length-1]),o}},{key:"_secondDerivative",value:function(e){var t=e.length;if(t<=0||1===t)return null;var n,i,r=[],o=[];for(r[0]=[0,1,0],n=1;n<t-1;n++){var a=e[n-1],s=e[n],l=e[n+1];r[n]=r[n]||[],r[n][0]=(s[0]-a[0])/6,r[n][1]=(l[0]-a[0])/3,r[n][2]=(l[0]-s[0])/6,o[n]=(l[1]-s[1])/(l[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[t-1]=0,r[t-1]=[0,1,0],n=1;n<t;n++)i=r[1][0]/r[n-1][1],r[n][1]-=i*r[n-1][2],r[n][0]=0,o[n]-=i*o[n-1];for(n=t-2;n>0;n--)i=r[n][2]/r[n+1][1],r[n][1]-=i*r[n+1][0],r[n][2]=0,o[n]-=i*o[n+1];var u=[];for(n=0;n<t;n++)u[n]=o[n]/r[n][1];return u}}]),t}(h.a);g.prototype.availableOptions={rgbControlPoints:{type:f.OptionType.OBJECT},controlPoints:{type:f.OptionType.ARRAY,default:[]},textureGLUnit:{type:f.OptionType.NUMBER,default:1}},t.a=g},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(18)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}var m=function(e){function t(){d(this,t);var e=_(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(361),e}return g(t,e),p(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s),c=a.data[u]/255*.3+a.data[u+1]/255*.3+a.data[u+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}]),t}(f.Engine.Filter),y=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._filter=new m,o}return g(t,e),t}(h.a);t.a=y},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(e,t,n){var i=n(5),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(18)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var v=p.Math.Vector2,b=p.Math.Vector3,w=function(e){function t(){g(this,t);var e=m(this,(t.__proto__||h()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=n(363),e}return y(t,e),_(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new v;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){for(var i=this._options,r=i.resolution,o=i.horizontalTileCount,a=i.verticalTileCount,s=t.getCanvas(),l=t.getContext(),u=n.getContext(),c=this._options.lookupTableImage,f=this._createImageCanvas(c).getContext("2d"),h=l.getImageData(0,0,s.width,s.height),d=f.getImageData(0,0,c.width,c.height),_=new b(r/o-1|0,r/a-1|0,o*a-1|0),g=new p.Color,m=new p.Color,y=new p.Color,w=new p.Color,k=new p.Color,x=new p.Color,T=new p.Color,R=new p.Color,C=new v,E=new v,O=function(e,t,n,i){e.r=t.r*(1-i)+n.r*i,e.g=t.g*(1-i)+n.g*i,e.b=t.b*(1-i)+n.b*i},I=function(e,t,n){var i=4*((n=.5+n|0)*r+(t=.5+t|0));e.r=d.data[i]/255,e.g=d.data[i+1]/255,e.b=d.data[i+2]/255,e.a=d.data[i+3]/255},S=new p.Color,A=new p.Color,F=function(e,t,n,i,r,o,a){O(S,t,i,o),O(A,n,r,o),O(e,S,A,a)},M=new v(r,r).divide(o,a).floor(),D=0;D<s.width*s.height*4;D+=4){g.set(h.data[D]/255,h.data[D+1]/255,h.data[D+2]/255,h.data[D+3]/255);var B=new b(g.r*_.x,g.g*_.y,g.b*_.z),P=B.clone().floor().toInt(),L=B.clone().ceil().toInt(),z=B.clone().fract();C.y=P.z/o|0,C.x=P.z-C.y*o|0,E.y=L.z/o|0,E.x=L.z-E.y*o|0,C.multiply(M),E.multiply(M),I(k,C.x+P.x,C.y+P.y),I(x,C.x+P.x,C.y+L.y),I(T,C.x+L.x,C.y+P.y),I(R,C.x+L.x,C.y+L.y),F(y,k,x,T,R,z.x,z.y),I(k,E.x+P.x,E.y+P.y),I(x,E.x+P.x,E.y+L.y),I(T,E.x+L.x,E.y+P.y),I(R,E.x+L.x,E.y+L.y),F(w,k,x,T,R,z.x,z.y),O(m,y,w,z.z),h.data[D]=Math.ceil(255*m.r),h.data[D+1]=Math.ceil(255*m.g),h.data[D+2]=Math.ceil(255*m.b)}u.putImageData(h,0,0)}},{key:"_createImageCanvas",value:function(e){var t=p.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}(p.Engine.Filter);w.prototype.availableOptions={lookupTable:{type:p.OptionType.NUMBER,default:3,uniformType:p.UniformType.INT},lookupTableImage:{type:p.OptionType.IMAGE,uniformType:null},resolution:{type:p.OptionType.NUMBER,default:128,uniformType:p.UniformType.FLOAT},horizontalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT},verticalTileCount:{type:p.OptionType.NUMBER,default:5,uniformType:p.UniformType.FLOAT}};var k=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._filter=new w,o._textures={},o}return y(t,e),_(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(p.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(p.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,i=n.resolution,r=n.verticalTileCount,o=n.horizontalTileCount;this._filter.set({resolution:i,verticalTileCount:r,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new p.Engine.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),i.setMinFilter(p.Engine.BaseTexture.NearestFilter),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var o=r()(t,n);if(void 0===o){var a=h()(t);return null===a?void 0:e(a,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}(d.a);k.prototype.availableOptions={image:{type:p.OptionType.IMAGE},resolution:{type:p.OptionType.NUMBER,default:128},horizontalTileCount:{type:p.OptionType.NUMBER,default:5},verticalTileCount:{type:p.OptionType.NUMBER,default:5}},t.a=k},function(e,t){e.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(173);n.d(t,"IdentityFilter",(function(){return i.a}));var r=n(365);n.d(t,"A15Filter",(function(){return r.a}));var o=n(366);n.d(t,"BreezeFilter",(function(){return o.a}));var a=n(367);n.d(t,"BWFilter",(function(){return a.a}));var s=n(368);n.d(t,"BWHardFilter",(function(){return s.a}));var l=n(369);n.d(t,"CelsiusFilter",(function(){return l.a}));var u=n(370);n.d(t,"ChestFilter",(function(){return u.a}));var c=n(371);n.d(t,"DuoToneFilter",(function(){return c.a}));var f=n(372);n.d(t,"FixieFilter",(function(){return f.a}));var h=n(373);n.d(t,"FoodFilter",(function(){return h.a}));var p=n(374);n.d(t,"FridgeFilter",(function(){return p.a}));var d=n(375);n.d(t,"FrontFilter",(function(){return d.a}));var _=n(376);n.d(t,"GlamFilter",(function(){return _.a}));var g=n(377);n.d(t,"GobblinFilter",(function(){return g.a}));var m=n(378);n.d(t,"K1Filter",(function(){return m.a}));var y=n(379);n.d(t,"K2Filter",(function(){return y.a}));var v=n(380);n.d(t,"K6Filter",(function(){return v.a}));var b=n(381);n.d(t,"KDynamicFilter",(function(){return b.a}));var w=n(382);n.d(t,"LeninFilter",(function(){return w.a}));var k=n(383);n.d(t,"LomoFilter",(function(){return k.a}));var x=n(384);n.d(t,"MellowFilter",(function(){return x.a}));var T=n(385);n.d(t,"MetalFilter",(function(){return T.a}));var R=n(386);n.d(t,"MorningFilter",(function(){return R.a}));var C=n(387);n.d(t,"OrchidFilter",(function(){return C.a}));var E=n(388);n.d(t,"PolaFilter",(function(){return E.a}));var O=n(389);n.d(t,"Pola669Filter",(function(){return O.a}));var I=n(390);n.d(t,"QuoziFilter",(function(){return I.a}));var S=n(391);n.d(t,"SemiredFilter",(function(){return S.a}));var A=n(392);n.d(t,"SunnyFilter",(function(){return A.a}));var F=n(393);n.d(t,"TexasFilter",(function(){return F.a}));var M=n(394);n.d(t,"X400Filter",(function(){return M.a}));var D=n(395);n.d(t,"LUTFilter",(function(){return D.a}));var B=n(396);n.d(t,"ThreeDLUTFilter",(function(){return B.a}))},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Contrast({contrast:.63})),o._stack.push(new c.Brightness({brightness:.12})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="a15",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.5})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="breeze",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Grayscale),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="bw",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Grayscale),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="bwhard",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="celsius",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="chest",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4),c=(n.n(u),n(7)),f=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e;h(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=p(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i,[{intensity:{type:u.OptionType.NUMBER,default:.5,required:!0,setter:function(e){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(e),this._stack.setIntensity(1)),this._dirty=!0,e}}}])));return o._filterPrimitive=new f.DuoTone({lightColor:o._options.lightColor||u.Color.WHITE,darkColor:o._options.darkColor||u.Color.BLACK,intensity:o._options.intensity||.5}),o._stack.push(o._filterPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);d.prototype.availableOptions={lightColor:{type:u.OptionType.COLOR,default:u.Color.WHITE,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setLightColor(e),this.setDirty&&this.setDirty(!0),e}},darkColor:{type:u.OptionType.COLOR,default:u.Color.BLACK,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(e),this.setDirty&&this.setDirty(!0),e}},intensity:{type:u.OptionType.NUMBER,default:.5,required:!0}},d.identifier="duotone",t.a=d},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="fixie",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Saturation({saturation:1.35})),o._stack.push(new c.Contrast({contrast:1.1})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="food",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="fridge",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="front",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Contrast({contrast:1.1})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="glam",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Gobblin),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="gobblin",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new c.Saturation({saturation:.9})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="k1",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4),c=(n.n(u),n(7)),f=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e;h(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=p(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new f.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new f.SoftColorOverlay({color:new u.Color(40/255,40/255,40/255)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);d.identifier="k2",t.a=d},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Saturation({saturation:.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="k6",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new c.Saturation({saturation:.7})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="kdynamic",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.4})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="lenin",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="lomo",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="mellow",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4),c=(n.n(u),n(7)),f=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=u.Math.ColorMatrix,_=function(e){function t(){var e;h(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=p(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i))),a=new d(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);o._stack.push(new f.ColorMatrixPrimitive({colorMatrix:a}));var s=new u.Color(.8,.6,.9);return o._stack.push(new f.Gamma({gamma:s})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);_.identifier="metal",t.a=_},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="morning",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),o._stack.push(new c.Desaturation({desaturation:.65})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="orchid",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="pola",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="pola669",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.65})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="quozi",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="semired",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="sunny",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="texas",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(7),c=n(8);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e;f(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=h(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.X400),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.a);p.identifier="x400",t.a=p},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4),c=(n.n(u),n(7)),f=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e;h(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=p(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i)));return o._lutPrimitive=new f.LookupTableImage({image:o._options.image}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);d.prototype.availableOptions={image:{type:u.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},d.identifier="lut",t.a=d},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(4),c=(n.n(u),n(7)),f=n(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e;h(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=p(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i))),a=o._options,s=a.image,u=a.resolution,c=a.verticalTileCount,d=a.horizontalTileCount;return o._lutPrimitive=new f.ThreeDLookupTableImage({image:s,resolution:u,verticalTileCount:c,horizontalTileCount:d}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(c.a);d.prototype.availableOptions={image:{type:u.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:u.OptionType.NUMBER,default:128},horizontalTileCount:{type:u.OptionType.NUMBER,default:5},verticalTileCount:{type:u.OptionType.NUMBER,default:5}},d.identifier="3d-lut",t.a=d},function(e,t,n){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),l=n.n(s),u=n(5),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=n.n(m),v="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=m.Math.Vector2,T=function(e){function t(){var e;w(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=k(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._colorOverlayFilter=new m.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new m.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(e){var t=this;if(!e)return this._disposeSprites();var n=e.imageGroups,i=e.layoutMode;this._layoutMode=i||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach((function(e){void 0!==n[e]&&["start","mid","end"].forEach((function(i){if(void 0!==n[e][i]){var r=n[e][i];"image"in r&&(r=r.image);var o=m.Engine.Texture.fromImage(r),a=new m.Engine.Sprite(o);t._spriteGroups[e][i]=a,t._sprites.push(a),t._frameContainer.addChild(a)}}))}))}},{key:"_render",value:function(e){var t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new m.Engine.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new m.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),m.Promise.resolve()}},{key:"_updateSprites",value:function(e){var t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.getDimensions(),r="vertical-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,l=0,u=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth/f);var h=new x(0,n);h.x=r?this._frameWidth:0,o.setPosition(h),o.setHeight(this._frameWidth),o.setWidth(l)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth*f);var p=new x(i.x-u,n);p.x-=r?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(u)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var d=new x(l,n),_=i.x-l-u;if(r&&(d.x+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(d),a.setWidth(_),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var g=this._frameWidth/f,m=Math.ceil(_/g),y=0;if(-1!==m){var v=Math.round(_/m);a.setWidth(v),y+=v,this._ensureRepeatSpritesExist(m-1,t,a);for(var b=0;b<m-1;b++){v=Math.round((_-y)/(m-b-1));var w=this._repeatSprites[t][b],k=d.clone().add(y,0).floor();w.setPosition(k),w.setWidth(v),w.setHeight(this._frameWidth),y+=v}}}}}},{key:"_ensureRepeatSpritesExist",value:function(e,t,n){var i=this;n.getTexture().setMaxListeners(e+1);var r=this._repeatSprites[t].length;if(e>r)for(var o=e-r,a=0;a<o;a++){var s=new m.Engine.Sprite(n.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else e<r&&this._repeatSprites[t].splice(e).forEach((function(e){var t=i._sprites.indexOf(e);-1!==t&&(i._sprites.splice(t,1),i._frameContainer.removeChild(e),e.dispose())}))}},{key:"_updateVerticalSpriteGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.getDimensions(),r="horizontal-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,l=0,u=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*f);var h=new x(n,0);h.y=r?this._frameWidth:0,o.setPosition(h),o.setWidth(this._frameWidth),o.setHeight(l)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth*f);var p=new x(n,i.y-u);p.y-=r?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(u)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var d=new x(n,l),_=i.y-l-u;if(r&&(d.y+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(d),a.setHeight(_),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var g=this._frameWidth*f,m=Math.ceil(_/g),y=0;if(-1!==m){var v=Math.round(_/m);a.setHeight(v),y+=v,this._ensureRepeatSpritesExist(m-1,t,a);for(var b=0;b<m-1;b++){v=Math.round((_-y)/(m-b-1));var w=this._repeatSprites[t][b],k=d.clone().add(0,y).floor();w.setPosition(k),w.setHeight(v),w.setWidth(this._frameWidth),y+=v}}}}}},{key:"_disposeSprites",value:function(){var e=this;this._sprites.forEach((function(t){e._frameContainer.removeChild(t),t.getTexture().dispose(),t.dispose()})),this._resetSprites()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||g()(t.prototype),"dispose",this).call(this),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}}],[{key:"validateFrame",value:function(e){if(e){var t=e.imageGroups,n=e.layoutMode;if("string"!=typeof e.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==v(e.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var i=function(e){var n=t[e],i=n.start,r=n.end,o=n.mid;if(void 0!==t[e]){if("object"!==v(t[e]))throw new Error("Frame: `imageGroups."+e+"` needs to be of type Object.");if(void 0!==i&&!(i instanceof m.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".start` needs to be of type Image.");if(void 0!==o&&!(i instanceof m.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":v(o)))throw new Error("Frame: `imageGroups."+e+".mid` needs to be of type Image or Object.");if(void 0!==r&&!(r instanceof m.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".end` needs to be of type Image.")}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");i("top"),i("left"),i("right"),i("bottom")}}}]),t}(m.Operation);T.identifier="frame",T.prototype.availableOptions={frame:{type:m.OptionType.OBJECT,validation:T.validateFrame,setter:function(e,t){return t||this._createSpritesForFrame(e),e},default:null},alpha:{type:m.OptionType.NUMBER,default:1},tintColor:{type:m.OptionType.COLOR,default:new m.Color(1,1,1,0)},scale:{type:m.OptionType.NUMBER,default:.1}},y.a.Operations.FrameOperation=T,t.a=T},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(399),g=n(401),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e;y(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._applyWatermarkFilter=function(){return o._watermarkFilter||(o._watermarkFilter=new _.a({watermarkImage:o._watermarkImage})),o._sprite.setFilters([o._watermarkFilter]),o._renderTexture.render(o._container),p.Promise.resolve()},o._loadWatermarkImage=function(){return o._watermarkImage?p.Promise.resolve():new p.Promise((function(e,t){o._watermarkImage=new p.Image,o._watermarkImage.onload=e,o._watermarkImage.src=g.a}))},o._watermarkFilter=null,o._watermarkImage=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_render",value:function(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}},{key:"dispose",value:function(){this._watermarkFilter&&this._watermarkFilter.dispose(),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}(p.Operation);b.identifier="license-watermark",b.prototype.availableOptions={},d.a.Operations.LicenseWatermarkOperation=b,t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var e;p(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=d(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(400),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=(r.canvas,this.getShaderForRenderer(e)),a=t.getFrame(),s=this._watermarkCanvas;s&&a.width===s.width&&a.height===s.height||this._createWatermarkCanvas(a.width,a.height);var l=f.Engine.Texture.fromCanvas(this._watermarkCanvas),u=l.getBaseTexture();e.updateTexture(u),u.setGLUnit(1),e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var c=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",c),o.syncUniforms(),r.uniform1i(r.getUniformLocation(o.getProgram(),"u_watermarkTex"),1),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,u.getGLTextureForRenderer(e)),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),l.dispose()}},{key:"_createWatermarkCanvas",value:function(e,t){var n=this._options.watermarkImage,i=f.Utils.createCanvas();i.width=e,i.height=t;var r=i.getContext("2d"),o=void 0,a=void 0,s=void 0;e>t?(o=e/n.width,s=(t-n.height*o)/2,a=0):(o=t/n.height,s=0,a=(e-n.width*o)/2),r.drawImage(n,0,0,n.width,n.height,a,s,n.width*o,n.height*o),this._watermarkCanvas=i,this._watermarkContext=r}},{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext();this._options.watermarkImage,this._createWatermarkCanvas(i.width,i.height);for(var a=r.getImageData(0,0,i.width,i.height),s=this._watermarkContext.getImageData(0,0,i.width,i.height),l=new f.Color,u=new f.Color,c=new f.Color,h=0;h<i.width*i.height*4;h+=4)l.set(a.data[h]/255,a.data[h+1]/255,a.data[h+2]/255,a.data[h+3]/255),u.set(s.data[h]/255,s.data[h+1]/255,s.data[h+2]/255,s.data[h+3]/255),u.r>.8?c.copy(l.clone().mix(u,.3)):c.copy(l),a.data[h]=255*c.r,a.data[h+1]=255*c.g,a.data[h+2]=255*c.b,a.data[h+3]=255*c.a;o.putImageData(a,0,0)}}]),t}(f.Engine.Filter);_.prototype.availableOptions={watermarkImage:{type:f.OptionType.OBJECT,required:!0}},t.a=_},function(e,t){e.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},function(e,t,n){t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg=="},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(403),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=p.Math.Vector2,b=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastControlPoint1=o._options.controlPoint1.clone(),o._lastControlPoint2=o._options.controlPoint2.clone();var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"rotate",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:t,controlPoint2:n})}},{key:"flip",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({controlPoint1:t,controlPoint2:n})}},{key:"transform",value:function(e){var t=this,n={};["controlPoint1","controlPoint2"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)})),["blurRadius"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.blurRadius,o=i.controlPoint1,a=i.controlPoint2,s={blurRadius:r*n,controlPoint1:o.clone(),controlPoint2:a.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.controlPoint1,o=n.controlPoint2;return this._filter.set({blurRadius:i,controlPoint1:r.clone(),controlPoint2:o.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}(p.Operation);b.identifier="linear-focus",b.prototype.availableOptions={controlPoint1:{type:p.OptionType.VECTOR2,default:new v(0,.5)},controlPoint2:{type:p.OptionType.VECTOR2,default:new v(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.LinearFocusOperation=b,t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n.n(d),g=n(73),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=p.Math.Vector2,w=function(e){function t(){var e;y(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(404),a._lastBlurRadius=null,a._lastControlPoint1=new b,a._lastControlPoint2=new b,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o),s=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a;if(s){var l=new b(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);var u={blurRadius:this._options.blurRadius,texSize:o},c=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(e,t,n){var i=c((n-e)/(t-e),0,1);return i*i*(3-2*i)},h=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),p=this._options.blurRadius,d=function(e,t){return f(0,1,Math.abs(c(new b(e,t).subtract(i._options.controlPoint1).dot(h)/h.dot(h),0,1)))*p};this._blurFilter.set(u),this._blurFilter._applyCanvas(e,t,n,r,d),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new b(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new b(e.width,e.height),i=this._options.controlPoint1.clone().multiply(n),r=this._options.controlPoint2.clone().multiply(n),o=t.createLinearGradient(i.x,i.y,r.x,r.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),l=s.data,u=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,l[h]=f*l[h]+(1-f)*u[h],l[h+1]=f*l[h+1]+(1-f)*u[h+1],l[h+2]=f*l[h+2]+(1-f)*u[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),t}(p.Engine.Filter);w.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},controlPoint1:{type:p.OptionType.VECTOR2,default:new b(0,.5),uniformType:p.UniformType.FLOAT2},controlPoint2:{type:p.OptionType.VECTOR2,default:new b(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new b(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new b(100,100),uniformType:p.UniformType.FLOAT2}},t.a=w},function(e,t){e.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(406),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=p.Math.Vector2,b=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastSize=o._options.size,o._lastGradientSize=o._options.gradientSize;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new _.a({},a),o._renderBlur.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"rotate",value:function(e){var t=this._options.start,n=this._options.end;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({start:t,end:n})}},{key:"flip",value:function(e){var t=this._options.start,n=this._options.end;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({start:t,end:n})}},{key:"transform",value:function(e){var t=this,n={};["start","end"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)})),["blurRadius","size","gradientSize"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options.start.clone(),r=this._options.end.clone(),o=this._options,a={blurRadius:o.blurRadius*n,size:o.size*n,gradientSize:o.gradientSize*n,start:i.clone().multiply(t),end:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.size,o=n.gradientSize,a=n.start,s=n.end;return this._filter.set({blurRadius:i,gradientSize:o,size:r,start:a.clone(),end:s.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}(p.Operation);b.identifier="mirrored-focus",b.prototype.availableOptions={start:{type:p.OptionType.VECTOR2,default:new v(0,.5)},end:{type:p.OptionType.VECTOR2,default:new v(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},size:{type:p.OptionType.NUMBER,default:.1},gradientSize:{type:p.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.MirroredFocusOperation=b,t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n.n(d),g=n(73),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=p.Math.Vector2,w=function(e){function t(){var e;y(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(407),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastStart=new b,a._lastEnd=new b,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var r=t.getDimensions(),o=!n.getDimensions().equals(r),a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;if(a){var s=new b(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var l={blurRadius:this._options.blurRadius,texSize:r},u=function(e,t,n){return Math.min(Math.max(e,t),n)},c=function(e,t,n){var i=u((n-e)/(t-e),0,1);return i*i*(3-2*i)},f=this._options,h=f.blurRadius,p=f.gradientSize,d=f.size,_=f.start,g=f.end,m=f.texSize,y=new b(_.y-g.y,g.x-_.x);y.divide(y.len());var v=function(e,t){return c(0,1,(Math.abs(m.clone().multiply(e,t).subtract(_).dot(y))-d)/p)*h};this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,n,i,v),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new b(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),i=new b(e.width,e.height),r=this._options.size*i.min()*n,o=this._options.gradientSize*i.min()*n,a=this._options.start.clone().multiply(i),s=this._options.end.clone().multiply(i).clone().subtract(a),l=a.clone().add(s.clone().divide(2)),u=s.len(),c=s.clone().divide(u),f=l.clone().add((r+o)*c.y,-(r+o)*c.x),h=l.clone().add(-(r+o)*c.y,(r+o)*c.x),p=t.createLinearGradient(f.x,f.y,h.x,h.y),d=h.clone().subtract(f).len();p.addColorStop(0,"#000000"),p.addColorStop(o/2/d,"#FFFFFF"),p.addColorStop(1-o/2/d,"#FFFFFF"),p.addColorStop(1,"#000000"),t.fillStyle=p,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),l=s.data,u=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,l[h]=f*l[h]+(1-f)*u[h],l[h+1]=f*l[h+1]+(1-f)*u[h+1],l[h+2]=f*l[h+2]+(1-f)*u[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),t}(p.Engine.Filter);w.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},size:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientSize:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},start:{type:p.OptionType.VECTOR2,default:new b(0,.5),uniformType:p.UniformType.FLOAT2},end:{type:p.OptionType.VECTOR2,default:new b(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new b(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new b(100,100),uniformType:p.UniformType.FLOAT2}},t.a=w},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=f.Math.Vector2,m=function(e){function t(){return d(this,t),_(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_render",value:function(e){var t=this._options.rotation%360,n=t*(Math.PI/180),i=90===t||270===t,r=this._options.flipHorizontally!==this._options.flipVertically,o=i&&r?!this._options.flipVertically:this._options.flipVertically,a=i&&r?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,o?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var s=this._sprite.getBounds();return this._renderTexture.resizeTo(new g(s.width,s.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"getNewDimensions",value:function(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}},{key:"flip",value:function(e){var t=this._options.rotation;switch(90!==t&&270!==t||(e="vertical"===e?"horizontal":"vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),t}(f.Operation);m.identifier="orientation",m.prototype.availableOptions={rotation:{type:f.OptionType.NUMBER,default:0,validation:function(e){if(e%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(e){return(e+360)%360}},flipVertically:{type:f.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:f.OptionType.BOOLEAN,default:!1}},h.a.Operations.OrientationOperation=m,t.a=m},function(e,t,n){var i=n(39),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=_.Engine.Filters.OverlayFilter,k=_.Math.Vector2,x=function(e){function t(){var e;v(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=b(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._overlayTexture=_.Engine.Texture.fromImage(o._options.image),o._overlayContainer=new _.Engine.Container,o._overlaySprite=new _.Engine.Sprite,o._overlaySprite.setTexture(o._overlayTexture),o._overlaySprite.setAnchor(0,0),o._overlayContainer.addChild(o._overlaySprite),o._overlayFilter=new _.Engine.Filters.OverlayFilter({overlayImage:o._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:o._overlayTexture}),o._sprite.setFilters([o._overlayFilter]),o._renderedOverlaySprite=new _.Engine.Sprite,o._renderedOverlayContainer=new _.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayRendered=!1,o._lastInputDimensions=new k(0,0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"setOption",value:function(e,n){if(y(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n),"image"===e&&n&&this._sdk){var i=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(n),i.isOfType(_.RendererType.WEBGL)&&i.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(e){var t=e.getDimensions(),n=this._options,i=n.image,r=n.alpha,o=n.blendMode;return i?(this._overlayRendered&&this._lastInputDimensions.equals(t)||(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),_.Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),_.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(e){var t=this._sdk.getRenderer(),n=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new _.Engine.RenderTexture(t,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var i=this._options.image,r=i.width,o=i.height,a=_.Utils.resizeVectorToFill(new k(r,o),n);this._overlaySprite.setWidth(a.x),this._overlaySprite.setHeight(a.y);var s=this._overlayRenderTexture.getBaseTexture();t.isOfType(_.RendererType.WEBGL)&&(s.setGLUnit(4),t.updateTexture(s,!1)),this._overlayRenderTexture.resizeTo(n),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){y(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}]),t}(_.Operation);x.identifier="overlay",x.BLEND_MODES=w.BLEND_MODES,x.prototype.availableOptions={identifier:{type:_.OptionType.STRING},image:{type:_.OptionType.IMAGE},blendMode:{type:_.OptionType.NUMBER,default:w.BLEND_MODES.MULTIPLY,available:r()(w.BLEND_MODES).map((function(e){return w.BLEND_MODES[e]}))},alpha:{type:_.OptionType.NUMBER,default:1}},g.a.Operations.OverlayOperation=x,t.a=x},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(411),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=p.Math.Vector2,b=function(e){function t(){var e;m(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastGradientRadius=o._options.gradientRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new v(.5,.5)),o._verticalFilter.setDelta(new v(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"rotate",value:function(e){var t=this._options.position;90===e?(t.flip(),t.x=1-t.x):-90===e&&(t.flip(),t.y=1-t.y),this.set({position:t})}},{key:"flip",value:function(e){var t=this._options.position;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y}this.set({position:t})}},{key:"transform",value:function(e){var t=this,n={},i=this.getPosition();n.position=e.applyToRelativePoint(i),["radius","blurRadius","gradientRadius"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.position,o={blurRadius:i.blurRadius*n,radius:i.radius*n,gradientRadius:i.gradientRadius*n,position:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options,n=t.blurRadius,i=t.radius,r=t.gradientRadius,o=t.position,a=e.getDimensions();return this._filter.set({blurRadius:n,radius:i,gradientRadius:r,position:o,texSize:a,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}(p.Operation);b.identifier="radial-focus",b.prototype.availableOptions={position:{type:p.OptionType.VECTOR2,default:new v(.5,.5)},radius:{type:p.OptionType.NUMBER,default:.25},gradientRadius:{type:p.OptionType.NUMBER,default:.125},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.RadialFocusOperation=b,t.a=b},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n.n(d),g=n(73),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=p.Math.Vector2,w=function(e){function t(){var e;y(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(412),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastPosition=new b,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,l=s.blurRadius,u=s.position,c=s.texSize,f=s.gradientRadius,h=t.getBaseTexture().isDirty()||this._lastBlurRadius!==l||a;if(h){var p=new b(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(p);var d={blurRadius:l,texSize:o},_=function(e,t,n){return Math.min(Math.max(e,t),n)},g=function(e,t,n){var i=_((n-e)/(t-e),0,1);return i*i*(3-2*i)},m=function(e,t){return g(0,1,(Math.abs(c.clone().multiply(e,t).subtract(u).len())-i._options.radius)/(2*f))*l};this._blurFilter.set(d),this._blurFilter._applyCanvas(e,t,n,r,m),this._lastBlurRadius=l}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new b(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new b(e.width,e.height),i=this._maskRenderTarget.getPixelRatio(),r=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=e.height,s*=e.height;var l=t.createRadialGradient(r.x,r.y,0,r.x,r.y,(a+s)*i);l.addColorStop(0,"#FFFFFF"),l.addColorStop(a/(a+s),"#FFFFFF"),l.addColorStop(1,"#000000"),t.fillStyle=l,t.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),l=s.data,u=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,l[h]=f*l[h]+(1-f)*u[h],l[h+1]=f*l[h+1]+(1-f)*u[h+1],l[h+2]=f*l[h+2]+(1-f)*u[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),t}(p.Engine.Filter);w.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},radius:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientRadius:{type:p.OptionType.NUMBER,default:25,uniformType:p.UniformType.FLOAT},position:{type:p.OptionType.VECTOR2,default:new b(.5,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new b(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new b(100,100),uniformType:p.UniformType.FLOAT2}},t.a=w},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(175),g=n(73),m=n(417),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=p.Math.Vector2,x=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),a=o._sdk.getRenderer();o._lastBlurRadius=null,o._blurredRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._maskRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._brushSprite=new _.a(o),o._brushSpriteContainer=new p.Engine.Container;var s=o._brushSprite.getDisplayObject();if(o._brushSpriteContainer.addChild(s),o._outputSprite=new p.Engine.Sprite,o._outputContainer=new p.Engine.Container,o._outputContainer.addChild(o._outputSprite),o._maskFilter=new m.a,a.isOfType(p.RendererType.WEBGL)){o._horizontalFilter=new g.a,o._verticalFilter=new g.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new k(1,1)),o._verticalFilter.setDelta(new k(-1,1));var l=o._maskRenderTexture.getBaseTexture();l.setGLUnit(o._maskFilter.getMaskImage()),a.updateTexture(l,!1),(l=o._blurredRenderTexture.getBaseTexture()).setGLUnit(o._maskFilter.getFilterImage()),a.updateTexture(l,!1)}else a.isOfType(p.RendererType.CANVAS)&&(o._blurFilter=new g.a,o._sprite.setFilters([o._blurFilter]),o._maskFilter.setMaskCanvas(o._maskRenderTexture.getRenderTarget().getCanvas()),o._maskFilter.setFilterCanvas(o._blurredRenderTexture.getRenderTarget().getCanvas()));return o._outputSprite.setFilters([o._maskFilter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"flip",value:function(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),p.Promise.resolve()}},{key:"_renderMask",value:function(e){var t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(p.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(t)||this._blurredRenderTexture.resizeTo(t);var i=this._options.blurRadius;if(this._lastBlurRadius!==i||!n.equals(t)){var r=this._sdk.getRenderer(),o=void 0;r.isOfType(p.RendererType.WEBGL)?(o={blurRadius:i*t.min(),texSize:t},this._horizontalFilter.set(o),this._verticalFilter.set(o)):r.isOfType(p.RendererType.CANVAS)&&(o={blurRadius:i},this._blurFilter.set(o)),this._blurredRenderTexture.render(this._container),this._lastBlurRadius=i}var a=this._sdk.getRenderer();a.isOfType(p.RendererType.WEBGL)&&a.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new _.a.Brushes.RadialBrush({size:e,hardness:t,color:p.Color.WHITE}),i=this._brushSprite.createPath(n);return this._options.paths.push(i),this.setDirty(!0),i}},{key:"setDirtyForRenderer",value:function(e,n,i){v(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),this._brushSprite.setDirtyForRenderer(e,n,i)}},{key:"dispose",value:function(){v(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(p.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}(p.Operation);x.identifier="selective-blur",x.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.05},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}},d.a.Operations.SelectiveBlurOperation=x,t.a=x},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(415)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},m=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,n));return r._operation=e,r._canvas=i||p.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map((function(e){var t=e.getPosition();return n?t.toObject():t.clone()})):g(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"_optionEquals",value:function(e,n){if("controlPoints"===e){for(var i=this._options.controlPoints,r=0,o=i.length;r<o;r++)if(!i[r].getPosition().equals(n[r]))return!1;return!0}return g(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"render",value:function(e){var t=this._options,n=t.controlPoints,i=t.size;if(!(n.length<2)){var r=this.getBrush(),o=r&&r.getHardness?r.getHardness():1;p.Utils.ensureCanvasDimensions(this._canvas,e),this._brush&&this._lastBrushSize===i&&e.equals(this._brushInputDimensions)||(this._brushInputDimensions=e.clone(),this._lastBrushSize=i);for(var a=void 0,s=void 0,l=void 0,u=void 0,c=0;c<n.length;c++)a=n[c-2],s=n[c-1],l=n[c],u=n[c+1],l.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,a,s,u,o)}}},{key:"_createBrush",value:function(e){var t=this._options,n=t.size,i=t.hardness,r=t.color,o=p.Utils.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var l=r.clone();l.a=0,s.addColorStop(1,l.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(e){var t=new d.a(this,e);this._options.controlPoints.push(t),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(e){this._canvas=e,this._context=e.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach((function(e){e.setDirty()}))}},{key:"forEachControlPoint",value:function(e){this._options.controlPoints.forEach(e)}},{key:"renderToCanvas",value:function(e){var t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),t}(p.Configurable);m.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},brush:{type:p.OptionType.OBJECT,required:!0},controlPoints:{type:p.OptionType.ARRAY,default:[]},closed:{type:p.OptionType.BOOLEAN,default:!1}},t.a=m},function(e,t,n){var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=o.Math.Vector2,u=o.Math.CubicBezierCurve,c=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;s(this,e),this._path=t,this._drawnCanvases=[],this._position=n,this._smooth=i}return a(e,[{key:"getBezierCurve",value:function(e,t,n,i){if(!t)return null;var r=void 0,o=void 0;i?(r=(i.x-t.x)/this._smooth,o=(i.y-t.y)/this._smooth):(r=(n.x-t.x)/this._smooth,o=(n.y-t.y)/this._smooth);var a=void 0,s=void 0;e?(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth):(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth);var l=t.clone().add(a,s),c=n.clone().subtract(r,o);return new u(t,l,c,n)}},{key:"renderToCanvas",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(t)){var a=new l(t.width,t.height),s=t.getContext("2d"),u=this._position.clone().multiply(a),c=i?i.getPosition().clone().multiply(a):null,f=n?n.getPosition().clone().multiply(a):null,h=r?r.getPosition().clone().multiply(a):null,p=(u.clone().subtract(c).len(),e.width/10),d=this.getBezierCurve(f,c,u,h),_=void 0;if(d){d.calculateSegments(20);var g=d.getLength();_=d.arcLengthApproxSample(Math.ceil(g/p))}else _=[u];for(var m=0;m<_.length;m++){var y=_[m],v=.5*e.width/(2*p);v=1/(1+(v*=1-o)),s.globalAlpha=v,s.drawImage(e,y.x-e.width/2,y.y-e.height/2,e.width,e.height)}s.globalAlpha=1,this._drawnCanvases.push(t)}}},{key:"setPosition",value:function(e){this._position=e}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),e}();t.a=c},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(176)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){return d(this,t),_(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.size,i=t.hardness,r=t.color,o=f.Utils.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var l=r.clone();l.a=0,s.addColorStop(1,l.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=e.clone(),o}}]),t}(h.a);t.a=g,g.identifier="imgly_brush_radial",g.prototype.availableOptions=f.Utils.extend(h.a.prototype.availableOptions,{hardness:{type:f.OptionType.NUMBER,default:1}})},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(418),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options,s=a.maskCanvas,l=a.filterCanvas,u=s.getContext("2d"),c=l.getContext("2d"),f=u.getImageData(0,0,i.width,i.height).data,h=r.getImageData(0,0,i.width,i.height),p=h.data,d=c.getImageData(0,0,i.width,i.height).data,_=void 0,g=0;g<i.width*i.height*4;g+=4)_=f[g]/255,p[g]=_*d[g]+(1-_)*p[g],p[g+1]=_*d[g+1]+(1-_)*p[g+1],p[g+2]=_*d[g+2]+(1-_)*p[g+2];o.putImageData(h,0,0)}}]),t}(f.Engine.Filter);p.prototype.availableOptions={maskImage:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.INT},maskCanvas:{type:f.OptionType.OBJECT,default:null},filterImage:{type:f.OptionType.NUMBER,default:2,uniformType:f.UniformType.INT},filterCanvas:{type:f.OptionType.OBJECT,default:null}},t.a=p},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),m=n(74),y=n(420),v=n(421),b=n(175),w=n(422),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=_.Math.Vector2,O=function(e){function t(){var e;R(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=C(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));o.setSmoothDownscaling(o._sdk.getOptions().smoothDownscaling),o._onSpriteUpdate=o._onSpriteUpdate.bind(o),o._maskCanvas=_.Utils.createCanvas();var a=o._options.sprites.slice();return a.forEach((function(e){o.removeSprite(e),o.addSprite(e)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),x(t,[{key:"getSpritesOfType",value:function(e){return this._options.sprites.filter((function(t){return t instanceof e}))}},{key:"rotate",value:function(e){this._options.sprites.forEach((function(t){t.applyRotation(e)}))}},{key:"flip",value:function(e){this._options.sprites.forEach((function(t){t.applyFlip(e)}))}},{key:"_onSpriteUpdate",value:function(e,t){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(e,t){this._options.sprites.forEach((function(n){return n.applyRotation(e,t)}))}},{key:"transform",value:function(e){this._options.sprites.forEach((function(t){return t.applyTransform(e)}))}},{key:"scale",value:function(e){this._options.sprites.forEach((function(t){return t.applyScale(e)}))}},{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map((function(e){return e.serializeOptions(void 0,n)})):T(t.prototype.__proto__||d()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"createSticker",value:function(e){return new y.a(this,e)}},{key:"createText",value:function(e){return new v.a(this,e)}},{key:"createBrush",value:function(e){return new b.a(this,e)}},{key:"createTextDesign",value:function(e){return new w.a(this,e)}},{key:"addSprite",value:function(e){this._options.sprites.push(e);var t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(e){var t=this._options.sprites,n=t.indexOf(e);return-1!==n&&(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation"),n=t?t.getRotation():0;return 270===n||90===n?new E(e.height,e.width):new E(e.width,e.height)}},{key:"_render",value:function(e){var t=this,n=this._container,i=this._options.sprites,r=e.getDimensions().clone().floor(),o=new _.Engine.Container;return o.addChild(this._sprite),_.Promise.all(i.map((function(e){return e.validateSettings()}))).then((function(){i.forEach((function(e){return e.update(t._sdk,r)}))})).then((function(){t._renderTexture.clear(),i.forEach((function(e){e.getInverted&&e.getInverted()?(t._renderTexture.render(o),t._renderTexture.render(t._renderMaskedSprite(e.getDisplayObject(),e.getColor?e.getColor():_.Color.WHITE,e.getPadding?e.getPadding():-1)),o=new _.Engine.Container):o.addChild(e.getDisplayObject())})),t._renderTexture.render(o),n.addChild(t._sprite),i.forEach((function(e){return n.addChild(e.getDisplayObject())}))}))}},{key:"_renderMaskedSprite",value:function(e,t,n){var i=this._maskCanvas,r=e.getWorldTransform(),o=this._getOrientatedStageSize();_.Utils.ensureCanvasDimensions(i,o);var a=i.getContext("2d");if(a.clearRect(0,0,i.width,i.height),a.save(),a.fillStyle=t.toRGBA(),n<0)a.fillRect(0,0,o.x,o.y);else{var s=e.getWidth()/e.getScale().x,l=e.getHeight()/e.getScale().y,u=s*n;a.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),a.fillRect(-u,-u,s+2*u,l+2*u)}a.restore(),a.save(),a.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},getContext:function(){return a}}),a.restore();var c=new _.Engine.Container,f=new _.Engine.Sprite(_.Engine.Texture.fromCanvas(i));return c.addChild(f),c}},{key:"takeSpriteToFront",value:function(e){var t=this._options.sprites,n=t.indexOf(e);if(-1!==n){_.Utils.moveArrayItem(t,n,t.length-1);var i=e.getDisplayObject();this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(e,t){var n=this,i=[];this._options.sprites.forEach((function(e){return e.update(n._sdk,t)}));var r=this._sdk.getSprite(),o=r.getWorldTransform().applyInverseToVector(e),a=r.getTexture().getFrame(),s=a.width,l=a.height,u=r.getAnchor().clone().multiply(-s,-l);o.subtract(u);for(var c=this._options.sprites.slice(0).reverse(),f=0,h=c.length;f<h;f++){var p=c[f];p.getHitTestDisplayObject().isAtPosition(o)&&i.push(p)}return i}},{key:"setDirtyForRenderer",value:function(e,n,i){T(t.prototype.__proto__||d()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),this._options.sprites.forEach((function(t){t.setDirtyForRenderer(e,n,i)}))}},{key:"dispose",value:function(){T(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._options.sprites.forEach((function(e){e.dispose()}))}}]),t}(_.Operation);O.StickerSprite=y.a,O.TextSprite=v.a,O.BrushSprite=b.a,O.TextDesignSprite=w.a,O.identifier="sprite",O.prototype.availableOptions={sprites:{type:_.OptionType.ARRAY,default:[],setter:function(e,t){var n=this;return e=e.map((function(e,t){if(e instanceof m.a)return e;var i=k({},e);switch(delete i.type,e.type){case"text":return new v.a(n,i);case"sticker":return new y.a(n,i);case"brush":return new b.a(n,i);case"textdesign":return new w.a(n,i);default:_.Log.error(n.constructor.name,"Invalid sprite type: "+e.type)}})),t||(this._options.sprites&&this._options.sprites.slice().forEach((function(e){e.dispose(),n.removeSprite(e)})),e.forEach((function(e){n.addSprite(e)}))),e}},smoothDownscaling:{type:_.OptionType.BOOLEAN,default:!1}},g.a.Operations.SpriteOperation=O,t.a=O},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(74)),_=n(172),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=p.Math.Vector2,w=p.Math.ColorMatrix,k=function(e){function t(){var e;y(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),a=o._options.image,s=a.src||a.filePath||a.toDataUrl&&a.toDataURL();return o._isSVG=s&&!!s.match(/\w+\.svg(?=\?|$)/i),o._isSVG&&(o._canvas=p.Utils.createCanvas(),o._context=o._canvas.getContext("2d"),o._options.smoothDownscaling=!1),a&&o._onImageUpdate(),o._tintFilter=new p.Engine.Filters.TintFilter,o._adjustmentsFilter=new _.a,o._lastRenderedDimensions=b.NULL,o._lastRenderedInputDimensions=b.NULL,o._onOptionsChange=o._onOptionsChange.bind(o),o._options.adjustments.on("update",o._onOptionsChange),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"applyScale",value:function(e){this.setDimensions(this.getDimensions().multiply(e))}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=m(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="sticker"),i}},{key:"_rendersToRenderTexture",value:function(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(e,t){var n=this._options,i=n.dimensions,r=n.image;if(i.equals(b.NULL)&&i.set(r.width,r.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==r)&&this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)){var o=r.width/r.height;if(i.x>i.y){var a=Math.min(i.x,4096);r.width=a,r.height=a/o}else{var s=Math.min(i.x,4096);r.width=s*o,r.height=s}this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);var l=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){l.push(this._adjustmentsFilter);var u=this._options.adjustments,c=new w;c.multiply(w.createBrightnessMatrix(u.getBrightness())),c.multiply(w.createSaturationMatrix(u.getSaturation())),c.multiply(w.createContrastMatrix(u.getContrast())),this._adjustmentsFilter.set({colorMatrix:c})}this._options.tintMode&&"none"!==this._options.tintMode&&(l.push(this._tintFilter),this._tintFilter.set({mode:p.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(l)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(i),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=r}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"applyFlip",value:function(e){m(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n={rotation:this._options.rotation},i=n.rotation/Math.PI*180*-1;switch(n.rotation=i*Math.PI/180,e){case"horizontal":n.flipHorizontally=!this._options.flipHorizontally,this.set(n);break;case"vertical":n.flipVertically=!this._options.flipVertically,this.set(n)}}},{key:"_hasAdjustments",value:function(){var e=this._options.adjustments;return 0!==e.getBrightness()||1!==e.getSaturation()||1!==e.getContrast()}},{key:"_onImageUpdate",value:function(){var e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(p.RendererType.WEBGL)&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=p.Engine.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"scalesUniformly",value:function(){return"keepAspect"===this._options.resizeMode}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];m(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n,i),"image"===e&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var e=this._dirtiness;for(var t in e)e[t]=!0}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}]),t}(d.a);k.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},identifier:{type:p.OptionType.STRING,default:""},image:{type:p.OptionType.IMAGE,required:!0},position:{type:p.OptionType.VECTOR2,default:b.NULL},dimensions:{type:p.OptionType.VECTOR2,default:b.NULL},anchor:{type:p.OptionType.VECTOR2,default:new b(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new b(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:p.OptionType.BOOLEAN,default:!1},tintColor:{type:p.OptionType.COLOR,default:p.Color.WHITE},tintMode:{type:p.OptionType.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:p.OptionType.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:p.OptionType.NUMBER,default:1},adjustments:{type:p.OptionType.CONFIGURABLE,structure:{brightness:{type:p.OptionType.NUMBER,default:0},saturation:{type:p.OptionType.NUMBER,default:1},contrast:{type:p.OptionType.NUMBER,default:1}}}},k.type="sticker",t.a=k},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(74)),_=n(177),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0};function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=p.Math.Vector2,w=function(e){function t(){var e;y(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._textRenderer=new _.a(o,o._operation),o._textRenderer.rotation=o.getRotation(),o._sprite.setTexture(o._textRenderer.getFinalTexture()),o._hitTestSprite.setTexture(o._textRenderer.getTexture()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),g(t,[{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=m(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="text"),i}},{key:"getDOMStyle",value:function(e,t){var n=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(t)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(e){var t=this.getFontSize()*e.y,n=this.getTextMetrics();if(n){var i=1/n.unitsPerEm*t,r=n.ascender*i,o=n.descender*i;return r+Math.abs(o)}return t*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(e,t){return this._textRenderer.getDimensions(e,t)}},{key:"applyFlip",value:function(e){m(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n=this._options.rotation;switch(e){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"applyTransform",value:function(e){m(t.prototype.__proto__||h()(t.prototype),"applyTransform",this).call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(e){m(t.prototype.__proto__||h()(t.prototype),"applyRotation",this).call(this,e);var n=(e+360)%360,i=this._operation.getInputDimensions();90!==n&&270!==n||(this.setMaxWidth(this.getMaxWidth()/i.x*i.y),this.setFontSize(this.getFontSize()/i.y*i.x))}},{key:"setOption",value:function(e,n){var i=this._options,r=i.flipHorizontally,o=i.flipVertically;if("rotation"===e){var a=n;return r&&(a=2*Math.PI-a),o&&(a=2*Math.PI-a),this._options.rotation=a,this._textRenderer&&(this._textRenderer.rotation=a),this._rotation=a,void this.emit("update")}m(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n)}},{key:"getOption",value:function(e){return"rotation"===e?this._rotation:m(t.prototype.__proto__||h()(t.prototype),"getOption",this).call(this,e)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(e,n){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,n);var i=this._textRenderer.getFinalTexture();i.getBaseTexture().update();var r=e.getRenderer();r.isOfType(p.RendererType.WEBGL)&&r.updateTexture(i.getBaseTexture()),m(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}]),t}(d.a);w.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},fontSize:{type:p.OptionType.NUMBER,default:.1},characterSpacing:{type:p.OptionType.NUMBER,default:0},lineHeight:{type:p.OptionType.NUMBER,default:1.1},fontIdentifier:{type:p.OptionType.STRING},fontFamily:{type:p.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:p.OptionType.ALL,default:"normal"},fontStyle:{type:p.OptionType.STRING,default:"normal"},textMetrics:{type:p.OptionType.OBJECT,default:null},outlineWidth:{type:p.OptionType.NUMBER,default:0},outlineColor:{type:p.OptionType.COLOR,default:p.Color.BLACK},alignment:{type:p.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:p.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:p.OptionType.COLOR,default:new p.Color(1,0,0,1)},backgroundColor:{type:p.OptionType.COLOR,default:p.Color.TRANSPARENT},position:{type:p.OptionType.VECTOR2,default:new b(.5,.5)},anchor:{type:p.OptionType.VECTOR2,default:new b(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new b(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},text:{type:p.OptionType.STRING,required:!0},maxWidth:{type:p.OptionType.NUMBER,default:.5},maxHeight:{type:p.OptionType.NUMBER,default:0},visible:{type:p.OptionType.BOOLEAN,default:!0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1}},w.type="text",t.a=w},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(74)),_=n(20),g=n(75),m=n(430),y=n(179),v=n(431),b=n(181),w=n(432),k=n(182),x=n(434),T=n(53),R=n(436),C=n(128),E=n(437),O=n(438),I=n(439),S=n(129),A=n(440),F=n(441),M=n(446),D=n(27),B=n(447),P=n(33),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),z=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},U=p.Math.Vector2,N=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,e,n));return i._renderer=new B.a,i._canvas=p.Utils.createCanvas(),i._context=i._canvas.getContext("2d"),i._texture=p.Engine.Texture.fromCanvas(i._canvas),i._sprite.setTexture(i._texture),i._aspect=1,i.getSeed()<0&&i.setSeed(_.a.TimeSeed()),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),L(t,[{key:"seed",value:function(e){this.setSeed(e||_.a.TimeSeed())}},{key:"_updateLayout",value:function(){var e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(e){z(t.prototype.__proto__||h()(t.prototype),"applyTransform",this).call(this,e);var n={};this._options.dimensions&&(n.width=e.applyToRelativeSize(this.getWidth())),this.set(n,!1)}},{key:"applyFlip",value:function(e){z(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n=this._options.rotation;switch(e){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"update",value:function(e,n){if(!this._isLayoutDirty||this._updateLayout()){var i=this.getWidth()*n.min()/e.getTextureScale(),r=i/this._aspect,o=new U(i,r);o.clamp(new U(1,1),new U(1/0,1/0)),p.Utils.ensureCanvasDimensions(this._canvas,o),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new P.a(o.x,o.y),this.getColor(),this.getInverted()),this.setDimensions(o),this._texture.getBaseTexture().update();var a=e.getRenderer();a.isOfType(p.RendererType.WEBGL)&&a.updateTexture(this._texture.getBaseTexture()),z(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"_optionEquals",value:function(e,n){if("layout"===e){var i=this._options.layout;return!(!i&&n||!n&&i||!n.constructor||!i.constructor||i.constructor.identifier!==n.constructor.identifier)}return z(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this.getPadding()<0){var i=e.indexOf("padding");i>-1&&e.splice(i,1)}var r=z(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(r.type="textdesign"),r}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}},{key:"dispose",value:function(){this._texture.dispose(),this._sprite.dispose()}}]),t}(d.a);N.Layouts={TextDesignBlocks:g.a,TextDesignBlocksCondensed:m.a,TextDesignBlocksLight:y.a,TextDesignCelebrate:b.a,TextDesignCelebrateSimple:w.a,TextDesignEqualWidth:k.a,TextDesignEqualWidthFat:x.a,TextDesignMasked:T.a,TextDesignMaskedBadge:R.a,TextDesignMaskedSpeechBubble:C.a,TextDesignMaskedSpeechBubbleComic:E.a,TextDesignMultiline:O.a,TextDesignWatercolor:I.a,TextDesignSunshine:S.a,TextDesignParticles:F.a,TextDesignRotated:M.a},N.LegacyLayouts={TextDesignBlocksLightV310:v.a,TextDesignSunshineV310:A.a},N.AssetManager=D.a,N.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new U(.5,.5)},dimensions:{type:p.OptionType.VECTOR2,default:U.NULL},anchor:{type:p.OptionType.VECTOR2,default:new U(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new U(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},layout:{type:p.OptionType.OBJECT,default:null,setter:function(e){return this._isLayoutDirty=!0,e}},text:{type:p.OptionType.STRING,default:"",setter:function(e){return this._isLayoutDirty=!0,e}},color:{type:p.OptionType.COLOR,default:p.Color.BLACK},padding:{type:p.OptionType.NUMBER,default:.01,minValue:.01},width:{type:p.OptionType.NUMBER,default:.8},inverted:{type:p.OptionType.BOOLEAN,default:!1},seed:{type:p.OptionType.NUMBER,default:-1}},t.a=N},function(e,t,n){e.exports={default:n(424),__esModule:!0}},function(e,t,n){n(425),e.exports=9007199254740991},function(e,t,n){var i=n(14);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){n.d(t,"a",(function(){return m}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(21)),p=n(33),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){return _(this,t),g(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"getSize",value:function(){var e=this.getRows(),t=this.getWidth(),n=e.length-1,i=e.reduce((function(e,t){return e+t.getSize().height}),0);i+=(n+1)*this.getRelativeLineSpacing()*t;var r=this.getRelativeInsets().clone().scale(t);return i+=r.top+r.bottom,new p.a(t,i)}}]),t}(f.Configurable);m.prototype.availableOptions={text:{type:f.OptionType.STRING,default:""},lines:{type:f.OptionType.ARRAY,default:[]},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a},relativeLineSpacing:{type:f.OptionType.NUMBER,default:0},rows:{type:f.OptionType.OBJECT,default:[]},background:{type:f.OptionType.OBJECT,default:null},width:{type:f.OptionType.NUMBER,default:0}}},function(e,t,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(428),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){var n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag",l="object"==typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=t.regeneratorRuntime=l?e.exports:{}).wrap=_;var c={},f={};f[o]=function(){return this};var h=Object.getPrototypeOf,p=h&&h(h(C([])));p&&p!==n&&i.call(p,o)&&(f=p);var d=v.prototype=m.prototype=Object.create(f);y.prototype=d.constructor=v,v.constructor=y,v[s]=y.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(d),e},u.awrap=function(e){return{__await:e}},b(w.prototype),w.prototype[a]=function(){return this},u.AsyncIterator=w,u.async=function(e,t,n,i){var r=new w(_(e,t,n,i));return u.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},b(d),d[s]="Generator",d[o]=function(){return this},d.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}}}function _(e,t,n,i){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),a=new R(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=g(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function m(){}function y(){}function v(){}function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,r){function o(){return new Promise((function(t,o){!function t(n,r,o,a){var s=g(e[n],e,r);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(u).then((function(e){l.value=e,o(l)}),a)}a(s.arg)}(n,r,t,o)}))}return t=t?t.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=g(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){n.d(t,"a",(function(){return k}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(92)),_=n(78),g=n(52),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=p.Math.Rectangle,k=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var e=this.serializeOptions(),n=e.orientation,i=e.width,r=e.size,o=e.relativeRowOffset,a=e.attributes.fontIdentifier,s=this.getWords().joined(3),l=n===t.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],u=p.Utils.Array.range(0,2).map((function(e){return new _.a({text:l[e],fontIdentifier:a,fontSize:60})})),c=u.map((function(e){return e.getSizeValue()})),f=c[0].width>c[1].width?0:1,h=(f+1)%2;u[h].fitWidth(c[f].width),c[h]=u[h].getSizeValue();var d=(c[h].height+c[f].height)/(1-o),m=new _.a({text:l[2],fontIdentifier:a});m.fitHeight(d);var y=m.getSizeValue().width,v=c[f].width,b=i/(y+v),k=b*y,x=b*v,T=b*d,R=o*T;r.set(i,T);var C=p.Utils.Array.range(0,3).map((function(e){return new _.a({text:l[e],fontIdentifier:a})}));C[0].fitWidth(x),C[1].fitWidth(x),C[2].fitWidth(k);var E=n===t.Orientations.Left?0:k,O=[E,E,n===t.Orientations.Left?x:0],I=[0,C[0].getSizeValue().height+R,0],S=C.map((function(e,t){return new w(O[t],I[t],e.getSizeValue().width,e.getSizeValue().height)}));return C.map((function(e,t){return new g.a({text:l[t],font:C[t],frame:S[t]})}))}}]),t}(d.a);k.Orientations={Right:"RIGHT",Left:"LEFT"},k.prototype.availableOptions=m({},d.a.prototype.availableOptions,{orientation:{type:p.OptionType.STRING,default:k.Orientations.Left,available:[k.Orientations.Right,k.Orientations.Left]},relativeRowOffset:{type:p.OptionType.NUMBER,default:.05}})},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(75)),m=n(26),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e;w(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=k(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._exclusiveFont=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"generateLayoutData",value:function(e,n){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),b(t.prototype.__proto__||d()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_fontForRow",value:function(e,n){return this._exclusiveFont||b(t.prototype.__proto__||d()(t.prototype),"_fontForRow",this).call(this,e,n)}},{key:"_layoutRow",value:function(e,t,n,i){return new m.a({words:e,width:t,attributes:n})}}]),t}(g.a);x.defaultFontIdentifiers=["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"],x.identifier="imgly_text_design_blocks_condensed",x.prototype.availableOptions=y({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:x.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return w}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(179)),_=n(77),g=n(26),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(){return v(this,t),b(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),y(t,[{key:"_layoutRows",value:function(e,t){var n=this;return e.map((function(e,i){return n._randomLayoutRow(e,i,t,new _.a({fontIdentifier:n._fontForRow(i,e)})).layout()}))}},{key:"_layoutRow",value:function(e,t,n,i){return new g.a({words:e,width:t,attributes:n})}}]),t}(d.a);w.defaultFontIdentifiers=["imgly_font_summer_font_light"],w.identifier="imgly_text_design_blocks_light-v3_1_0",w.prototype.availableOptions=m({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:w.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return O}));var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),l=n.n(s),u=n(5),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(75),n(26),n(123),n(47),n(125),n(181)),v=n(126),b=n(27),w=n(20),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function t(){var e;C(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=E(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o.getImagePaths=function(){var e=o.getBanderoles();return[].concat(R(e&&e.map((function(e){return e.getImagePath()}))||[]),R(o._celebrateTypes))},o.onImagesLoaded=function(){var e=o.getBanderoles();e&&e.forEach((function(e){var t=b.a.getImage(e.getImagePath());t?e.setImage(t):m.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+e.getImagePath()+"'")}))},o._celebrateTypes=[v.a.RowImages.celebrate1,v.a.RowImages.celebrate2,v.a.RowImages.celebrate3],o._exclusiveFont=null,o._typeRandomizer=new w.a(0),o._useMaskedRandomizer=new w.a(0),o._seedPool.push(o._typeRandomizer),o._seedPool.push(o._useMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),x(t,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%(n.length-1)]}},{key:"_layoutRows",value:function(e,n){var i=this._typeRandomizer.pickNext(this._celebrateTypes),r=b.a.getImage(i);r||m.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '"+i+"'");var o=new v.a({width:n,height:.5*n,drawingModeAspectFit:!0,image:r}).layout(),a=T(t.prototype.__proto__||g()(t.prototype),"_layoutRows",this).call(this,e,n);return[o].concat(R(a))}},{key:"_randomLayoutRow",value:function(e,n,i,r){var o=e.countNumberOfCharacters();o<4&&r.setFontIdentifier("imgly_font_rasa_regular");var a=this._useMaskedRandomizer.nextBool(2,1);return o<13&&a&&!this.getHasMaskedText()?this._layoutRow(e,i,r,!0):T(t.prototype.__proto__||g()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r)}}]),t}(y.a);O.identifier="imgly_text_design_celebrate_simple",O.defaultFontIdentifiers=["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"],O.prototype.availableOptions=k({},y.a.prototype.availableOptions,{fontIdentifiers:{type:m.OptionType.ARRAY,default:O.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return v}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(183)),p=n(27),d=n(48),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=f.Math.Rectangle,v=function(e){function t(){return g(this,t),m(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"getImagePaths",value:function(){var e=this._options;return[e.topImagePath,e.bottomImagePath,e.leftImagePath,e.rightImagePath].filter((function(e){return""!==e}))}},{key:"render",value:function(e,t,n,i,r){var o=n.clone().scale(t.width),a=t.rectangle(0,0),s=p.a.getImage(this.getTopImagePath()),l=p.a.getImage(this.getLeftImagePath()),u=p.a.getImage(this.getRightImagePath()),c=p.a.getImage(this.getBottomImagePath());if(s){var f=s.width/s.height,h=o.top*this.getTopImageFillRate(),_=h*f,g=a.width/2,m=new y(g-_/2,0,_,h);Object(d.a)(e,s,m,i)}if(c){var v=c.width/c.height,b=o.bottom*this.getBottomImageFillRate(),w=b*v,k=a.width/2,x=new y(k-w/2,a.height-b,w,b);Object(d.a)(e,c,x,i)}if(l){var T=l.width/l.height,R=o.left*this.getLeftImageFillRate(),C=R/T,E=a.height/2,O=new y(0,E-C/2,R,C);Object(d.a)(e,l,O,i)}if(u){var I=u.width/u.height,S=o.right*this.getRightImageFillRate(),A=S/I,F=a.height/2-A/2,M=new y(a.width-S,F,S,A);Object(d.a)(e,u,M,i)}}}]),t}(h.a);v.prototype.availableOptions={topImagePath:{type:f.OptionType.STRING,default:""},leftImagePath:{type:f.OptionType.STRING,default:""},bottomImagePath:{type:f.OptionType.STRING,default:""},rightImagePath:{type:f.OptionType.STRING,default:""},topImageFillRate:{type:f.OptionType.NUMBER,default:1},leftImageFillRate:{type:f.OptionType.NUMBER,default:1},bottomImageFillRate:{type:f.OptionType.NUMBER,default:1},rightImageFillRate:{type:f.OptionType.NUMBER,default:1}},v.Backgrounds=[new v({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new v({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new v({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new v({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]},function(e,t,n){n.d(t,"a",(function(){return b}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(182)),_=n(21),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e;y(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new _.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_getBackground",value:function(){return null}}]),t}(d.a);b.defaultFontIdentifiers=["imgly_font_ultra"],b.identifier="imgly_text_design_equal_width_fat",b.prototype.availableOptions=g({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:b.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(27)),m=n(178),y=n(33),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},k=_.Math.Vector2,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,e));return n._textOptions={},n._createCanvas(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"_createCanvas",value:function(){this._canvas=_.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new m.a(this._context),this._finalCanvas=_.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];w(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=g.a.getVariation(this.getFontIdentifier());return e||_.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(e),e}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=v({},this._options,e),i=n.fontSize,r=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=r.serializeOptions(),l=s.fontStyle,u=s.fontWeight,c=s.fontFamily;t.font=l+" "+u+" "+i+'px "'+c+'"',t.fillStyle=o,t.textBaseline="top",t.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(e,t){var n=this.getAlignment(),i=new k(0,t);switch(n){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(e,i.x,i.y)}},{key:"update",value:function(){var e=this.calculateFontStyles();if(e){var t=this._calculateText(e),n=t.dimensions,i=t.lines;this._dimensions=n,this._renderText(n,i,e)}}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),e.drawImage(this._canvas,t,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(e,t,n){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var i=0;i<t.length;i++){var r=t[i];this._renderTextLine(r,n.topPadding+n.lineHeight*i)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var e=this.getFontFamily(),t=this.getFontSize(),n=this.getAbsoluteTextHeight(),i={fontFamily:e,fontSize:t,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=v({},i),i}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var e=this.getFontSize(),t=this.getTextMetrics();if(t){var n=1/t.unitsPerEm*e,i=t.ascender*n,r=t.descender*n;return i+Math.abs(r)}return e*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(e){this._applyTextOptions(e,this._context);for(var t=new k,n=this.getText().split("\n"),i=0;i<n.length;i++){var r=n[i];t.x=Math.max(t.x,this._context.measureText(r).width)}var o=e.lineHeight;return t.y=n.length*o,{dimensions:t,lines:n}}},{key:"getDimensions",value:function(){var e=this.calculateFontStyles();return this._calculateText(e).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var e=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),e.y}},{key:"fitMaxWidth",value:function(){var e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var e=this.getDimensions();return new y.a(e.x,e.y)}}]),t}(_.Configurable);x.prototype.availableOptions={text:{type:_.OptionType.STRING,default:""},fontIdentifier:{type:_.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:_.OptionType.OBJECT,default:null},lineHeight:{type:_.OptionType.NUMBER,default:1},fontSize:{type:_.OptionType.NUMBER,default:22},textColor:{type:_.OptionType.STRING,default:"black"},strokeStyle:{type:_.OptionType.STRING,default:"black"},outlineWidth:{type:_.OptionType.NUMBER,default:0},textBaseline:{type:_.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:_.OptionType.BOOLEAN,default:!0},maxWidth:{type:_.OptionType.NUMBER,default:100},maxHeight:{type:_.OptionType.NUMBER,default:0},alignment:{type:_.OptionType.STRING,default:"left",available:["left","center","right"]}}},function(e,t,n){n.d(t,"a",(function(){return x}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(80)),m=n(53),y=n(20),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){function t(){var e;w(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=k(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[g.a.Badge1,g.a.Badge2,g.a.Badge3,g.a.Badge4],o._rowTypesRandomizer=new y.a(0),o._isMaskedRandomizer=new y.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),b(t,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(e){return e.getImagePath()}))}},{key:"_randomLayoutRow",value:function(e,n,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);var o=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.set({textScaleFactor:.9}),o}}]),t}(m.a);x.defaultFontIdentifiers=["imgly_font_campton_bold"],x.identifier="imgly_text_design_masked_badge",x.ValidAlignments=[m.a.Alignment.Center],x.prototype.availableOptions=v({},m.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:x.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return b}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(80)),_=(n(53),n(128)),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e;y(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=v(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble5],o._possibleRowTypesForMin15=o._possibleRowTypes.slice(0,2),o._possibleRowTypesForMax14=o._possibleRowTypes.slice(2),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),m(t,[{key:"_rowTypes",value:function(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}]),t}(_.a);b.defaultFontIdentifiers=["imgly_font_gagalin_regular"],b.identifier="imgly_text_design_masked_speech_bubble_comic",b.prototype.availableOptions=g({},_.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:b.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return k}));var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(53)),m=n(127),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){return b(this,t),w(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_modifiedText",value:function(e){return function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this._alignmentRandomizer.pickNext(g.a.ValidAlignments);return i.setAlignment(r),new m.a({words:e,width:n,attributes:i,image:null,backgroundColor:_.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}]),t}(g.a);k.defaultFontIdentifiers=["imgly_font_abril_fatface_regular"],k.identifier="imgly_text_design_multiline",k.prototype.availableOptions=y({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:k.defaultFontIdentifiers}})},function(e,t,n){n.d(t,"a",(function(){return y}));var i=n(6),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),n(80)),p=n(53),d=n(128),_=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[h.a.Watercolor1,h.a.Watercolor2,h.a.Watercolor3],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),t}(d.a);y.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"],y.identifier="imgly_text_design_watercolor",y.prototype.availableOptions=_({},d.a.prototype.availableOptions,{fontIdentifiers:{type:f.OptionType.ARRAY,default:y.defaultFontIdentifiers},alignment:{type:f.OptionType.STRING,default:p.a.Alignment.Center,available:p.a.ValidAlignments}})},function(e,t,n){n.d(t,"a",(function(){return k}));var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(5),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(129),g=n(27),m=n(21),y=n(126),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){var e;b(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=w(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new m.a(0,.3,0,.3),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_layoutRows",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=l()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_layoutRows",this).call(this,e,n);if(!this.getDecorationsVisible())return i;var o=new y.a({width:n,height:25,image:g.a.getImage(this._rowTypeRandomizer.pickNext(_.a.RowImages))}).layout(),a=new y.a({width:n,height:25,image:g.a.getImage(this._rowTypeRandomizer.pickNext(_.a.RowImages))}).layout();return[o].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(i),[a])}}]),t}(_.a);k.identifier="imgly_text_design_sunshine-v3_1_0"},function(e,t,n){n.d(t,"a",(function(){return O}));var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(27)),m=n(21),y=n(129),v=n(442),b=n(444),w=n(445),k=n(20),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function t(){var e;C(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=E(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new m.a(.3,.3,.3,.3),o._backgroundRandomizer=new k.a(0),o._decoTypeRandomizer=new k.a(0),o._seedPool.push(o._backgroundRandomizer),o._seedPool.push(o._decoTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),T(t,[{key:"getImagePaths",value:function(){return[].concat(R(y.a.RowImages),R(_.Utils.Array.flatten(t.Backgrounds.map((function(e){return e.getImagePaths()})))),R(t.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(t.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return t.DecoratorImages.slice(0,2).map((function(e){return g.a.getImage(e)}));case 1:case 2:return t.DecoratorImages.slice(2).map((function(e){return g.a.getImage(e)}));default:return _.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),t.DecoratorImages.slice(2).map((function(e){return g.a.getImage(e)}))}}}]),t}(y.a);O.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],O.identifier="imgly_text_design_particles",O.Backgrounds=[new v.a,new b.a,new w.a],O.DecoratorImages=["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"],O.prototype.availableOptions=x({},y.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:O.defaultFontIdentifiers},decorationsVisible:{type:_.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:_.OptionType.BOOLEAN,default:!0}})},function(e,t,n){n.d(t,"a",(function(){return y}));var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),t}(d.a);y.Images=["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"],y.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(y.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(e,t,n){n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=f.Math.Rectangle,g=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"getContentFrame",value:function(){var e=this.getFrame().clone(),t=.1*e.width;return e.insetBy(t,t)}},{key:"intersects",value:function(e){return this.getFrame().intersects(e.getFrame())}}]),t}(f.Configurable);g.prototype.availableOptions={frame:{type:f.OptionType.OBJECT,default:new _}}},function(e,t,n){n.d(t,"a",(function(){return y}));var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),t}(d.a);y.Images=["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"],y.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(y.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(e,t,n){n.d(t,"a",(function(){return y}));var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),t}(d.a);y.Images=["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"],y.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(y.Images))}})},function(e,t,n){n.d(t,"a",(function(){return E}));var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),l=n.n(s),u=n(5),c=n.n(u),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=(n.n(m),n(76)),v=n(21),b=n(180),w=n(20),k=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){function t(){var e;R(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=C(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new v.a(.1,0,0,0),o._rowTypeRandomizer=new w.a(0),o._seedPool.push(o._rowTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,e),x(t,[{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||g()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,n,i,r){var o=T(t.prototype.__proto__||g()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.setShearingAngle(this.getShearingAngle()),o}},{key:"_layoutRows",value:function(e,n){var i=T(t.prototype.__proto__||g()(t.prototype),"_layoutRows",this).call(this,e,n),r=m.Utils.values(b.a.FormType),o=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),s=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout();return[o].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}(i),[s])}}]),t}(y.a);E.defaultFontIdentifiers=["imgly_font_campton_bold"],E.identifier="imgly_text_design_rotated",E.prototype.availableOptions=k({},y.a.prototype.availableOptions,{fontIdentifiers:{type:m.OptionType.ARRAY,default:E.defaultFontIdentifiers},relativeLineSpacing:{type:m.OptionType.NUMBER,default:.025/3},shearingAngle:{type:m.OptionType.NUMBER,default:-.1}})},function(e,t,n){n.d(t,"a",(function(){return p}));var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),n(33)),s=n(124),l=n(48),u=n(20),c=n(127),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=o.Math.Rectangle,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new u.a}return f(e,[{key:"createLayout",value:function(e,t,n){this._layout=e,this._text=t,this._seed=n,e.seed(n),this._layoutData=e.generateLayoutData(t,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(o.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(e,t,n,i){var r=this,u=new a.a(1e3,1e3/t.aspect()),f=t.width/1e3,p=this._layoutData.getRelativeInsets().clone().scale(u.width),d=this._layoutData.getRelativeLineSpacing()*u.width,_=p.top;e.save(),this.randomizer.seed(this._seed);var g=this._layoutData.getBackground();g&&g.render(e,t,this._layoutData.getRelativeInsets(),i?o.Color.WHITE:n,this.randomizer),e.scale(f,f),this._layoutData.getRows().forEach((function(t){e.save();var a=t.getAttributes();if(e.transform(1,t.getShearingAngle(),0,1,p.left,_),a.setTextColor(i?o.Color.WHITE:n.clone()),a.setTintColor(i?o.Color.WHITE:n.clone()),(t instanceof s.a||t instanceof c.a)&&(t.setBackgroundColor(i?o.Color.WHITE:n.clone()),t.setIsUsedInInvertedLayout(i)),r._debugMode&&(t._debugMode=!0),t.willRender(e),t.render(e),t.didRender(e),r._debugMode){var u=t._getFrame(),f=t._getTextFrame();Object(l.f)(e,u,o.Color.GREEN),Object(l.f)(e,f,o.Color.BLUE),t._getLayoutElements().forEach((function(n){var i=n.getFrame(),r=t._getTextFrameForElement(n);Object(l.f)(e,i,new o.Color(1,1,0)),Object(l.f)(e,r,new o.Color(0,1,1))}))}_+=t.getSize().height+d,e.restore()})),this._debugMode&&Object(l.f)(e,new h(0,0,u.width,u.height),o.Color.RED),e.restore()}}]),e}()},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=n.n(f),p=n(449),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=f.Math.Vector2,y=function(e){function t(){return _(this,t),g(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_render",value:function(e){this._sprite.setRotation(0);var t=e.getDimensions(),n=this._options,i=n.start,r=n.end,o=n.rotation,a=n.textureScale,s=r.clone().subtract(i).clone().divide(2),l=i.clone().add(s),u=this.calculateScale()*a,c=t.clone().multiply(u).multiply(s);return this._sprite.setAnchor(l),this._sprite.setRotation(o),this._sprite.setScale(u,u),this._sprite.setPosition(c),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"calculateScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,t=this.getInputDimensions(!1),n=new m(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),i=t.clone().subtract(n.clone()).divide(2).abs();return i.y>i.x?2*i.y/t.y+1:2*i.x/t.x+1}},{key:"getNewDimensions",value:function(e){var t=this._options,n=t.start,i=t.end,r=t.textureScale,o=this.calculateScale();return e.clone().multiply(r*o).multiply(i.clone().subtract(n)).round()}},{key:"flip",value:function(e){var t=this._options,n=t.start,i=t.end,r=n.clone();"horizontal"===e?(n.set(1-i.x,n.y),i.set(1-r.x,i.y)):"vertical"===e&&(n.set(n.x,1-i.y),i.set(i.x,1-r.y))}},{key:"rotate",value:function(e){for(var t=this._options,n=t.start,i=t.end,r=(e+360)%360,o=Math.floor(r/90),a=0;a<o;a++){var s=n.clone();n.set(1-i.y,s.x),i.set(1-s.y,i.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}]),t}(f.Operation);y.identifier="transform",y.prototype.availableOptions={start:{type:f.OptionType.VECTOR2,default:new m(0,0)},end:{type:f.OptionType.VECTOR2,default:new m(1,1)},textureScale:{type:f.OptionType.NUMBER,default:1},rotation:{type:f.OptionType.NUMBER,default:0}},y.TransformChange=p.a,h.a.Operations.TransformOperation=y,t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=o.Math.Vector2,l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=n,this._oldOptions={start:t.getStart().clone(),end:t.getEnd().clone(),rotation:t.getRotation(),textureScale:t.getTextureScale()},this._inputDimensions=t.getInputDimensions(!1),this._rotationDelta=n.rotation-t.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=t.calculateScale(n.rotation)/t.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/t.getTextureScale()}return a(e,[{key:"applyToRelativePoint",value:function(e){var t=this._oldOptions.start,n=this._oldOptions.end,i=t.clone().add(n.clone().subtract(t).divide(2)).multiply(this._inputDimensions),r=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=i.clone().add(r).clone().subtract(this._inputDimensions.clone().divide(2)),a=new s(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),l=this._inputDimensions.clone().divide(2).add(a),u=this._options.start.clone().multiply(this._inputDimensions);return l.clone().subtract(u).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}},{key:"scaleSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return e/this._sizeFactor[t]}},{key:"applyToRotation",value:function(e){return(e+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var e=this._options.start.clone(),t=this._options.end.clone(),n=this._inputDimensions,i=-this._rotationDelta,r=Math.cos(i),o=Math.sin(i),a=this._oldAbsoluteSize,l=this._newAbsoluteSize,u=e.clone().subtract(t).multiply(n),c=1/this._scaleRatio,f=new s(1/this._sizeFactor.x,1/this._sizeFactor.y),h=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=n,this._rotationDelta=i,this._deltaCos=r,this._deltaSin=o,this._oldAbsoluteSize=l,this._newAbsoluteSize=a,this._absoluteStartDiff=u,this._scaleRatio=c,this._sizeFactor=f,this._textureScaleFactor=h,this}}]),e}();t.a=l},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=p.Math.Vector2,v=function(e){function t(){var e;g(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=m(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._watermarkSprite=new p.Engine.Sprite,o._watermarkSprite.setAnchor(.5,.5),o._container.addChild(o._watermarkSprite),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_render",value:function(e){this._watermarkTexture||(this._watermarkTexture=p.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var t=e.getDimensions(),n=this._options.image,i=n.width,r=n.height,o=p.Utils.resizeVectorToFit(new y(i,r),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),t}(p.Operation);v.identifier="watermark",v.prototype.availableOptions={image:{type:p.OptionType.OBJECT,required:!0}},d.a.Operations.WatermarkOperation=v,t.a=v},function(e,t,n){var i=n(39),r=n.n(i),o=n(5),a=n.n(o),s=n(0),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(79),d=n.n(p),_=n(1),g=n.n(_),m=n(4),y=n.n(m),v=n(452),b=n(40),w=n(187),k=n(472),x=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=m.Engine.Filters.OverlayFilter,O=function(e){function t(){var e;R(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=C(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._renderStart=null,o._renderedOverlaySprite=new m.Engine.Sprite,o._renderedOverlayContainer=new m.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayFilter=new E,o._overlayFilter.getShaderForRenderer(o._sdk.getRenderer()),o._sdk.on("new-image",o._onNewImage.bind(o)),o._prepareRenderTargets(),o}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),T(t,null,[{key:"isSupported",value:function(e){if(e.getRenderer().isOfType(b.RendererType.WEBGL)){var t=e.getRenderer().getContext(),n=w.a.determineSupportedConfiguration(t).environmentSupported,i=!m.Utils.isMobile();return n&&i}return!1}}]),T(t,[{key:"setOption",value:function(e,n){var i=this;if("styleTransferModel"===e){var r=this._options.styleTransferModel;r&&r!==n&&this._renderInputImageIntoOverlayTarget()}if(x(t.prototype.__proto__||g()(t.prototype),"setOption",this).call(this,e,n),"identifier"===e||"styleTransferModel"===e){var o=this._options.styleTransferModel;o&&o.onWeightsUpdated((function(){i._renderInputImageIntoOverlayTarget()}))}}},{key:"_onNewImage",value:function(){this.dispose(),this._prepareRenderTargets();var e=this.getStyleTransferModel();e&&e.updateInputDimensions(this._exifAdjustedInputDimensions)}},{key:"_prepareRenderTargets",value:function(){var e=this._sdk.getRenderer(),t=e.getContext(),n=this._sdk.getInputTexture(),i=n.getDimensions(),r=this._sdk.getOperationsStack().getByIdentifier("exif-orientation");if(r){i=r.getNewDimensions(i);var o=new m.Engine.WebGLRenderTarget(e,i.x,i.y,1);o.setFrame(new m.Math.Rectangle(0,0,i.x,i.y));var a=e.getOrCreateGLTexture(o.getBaseTexture()),s=r.applyTo(this._sdk.getImage());t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s),this._modelInputTarget=o}else{var l=new m.Engine.WebGLRenderTarget(e,i.x,i.y,1);l.setFrame(new m.Math.Rectangle(0,0,i.x,i.y)),l._baseTexture=n.getBaseTexture();var u=l._baseTexture.getGLTextureForRenderer(e);u||(u=t.createTexture(),l._baseTexture.setGLTextureForRenderer(u,e)),l._texture=u,t.bindTexture(t.TEXTURE_2D,u),t.bindFramebuffer(t.FRAMEBUFFER,l._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,u,0),this._modelInputTarget=l}this._overlayRenderTexture=new m.Engine.RenderTexture(e,i.x,i.y);var c=this._overlayRenderTexture.getBaseTexture();c.setGLUnit(5),this._sdk.getRenderer().updateTexture(c,!1),this._overlayRenderTarget=this._overlayRenderTexture.getRenderTarget(),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture),this._exifAdjustedInputDimensions=i,this._renderInputImageIntoOverlayTarget()}},{key:"_renderInputImageIntoOverlayTarget",value:function(){var e=this._sdk.getRenderer().getContext(),t=this._modelInputTarget.getFrame().getSize();this._modelInputTarget.activate(),e.bindTexture(e.TEXTURE_2D,this._overlayRenderTarget.getTexture()),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,t.x,t.y,0)}},{key:"_render",value:(n=d.a.mark((function e(t){var n,i,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._options,i=n.intensity,r=n.blendMode,o=this.getStyleTransferModel()){e.next=6;break}return this._sprite.setFilters([]),this._renderTexture.render(this._container),e.abrupt("return",m.Promise.resolve());case 6:if(!o.isDisposed()){e.next=9;break}return e.next=9,o.initGraph(this._sdk.getRenderer());case 9:if(!o.isDirty()){e.next=12;break}return e.next=12,o.execute(this._sdk.getRenderer(),this._modelInputTarget,this._overlayRenderTarget);case 12:return this._overlayFilter.set({blendMode:r,overlayImage:this._overlayRenderTarget.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),e.abrupt("return",m.Promise.resolve(o.isDirty()));case 16:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new m.Promise((function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return m.Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(s)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"dispose",value:function(){if(x(t.prototype.__proto__||g()(t.prototype),"dispose",this).call(this),this._renderedOverlaySprite.dispose(),this._overlayFilter.dispose(),this._overlayRenderTarget.dispose(),this._modelInputTarget){var e=this._modelInputTarget._framebuffer;this._sdk.getRenderer().getContext().deleteFramebuffer(e),this._modelInputTarget=null}var n=this._options.styleTransferModel;n&&n.dispose()}}]),t}(m.Operation);O.identifier="artfilter",O.prototype.availableOptions={identifier:{type:m.OptionType.STRING,default:""},styleTransferModel:{type:m.OptionType.OBJECT,default:null},intensity:{type:m.OptionType.NUMBER,default:1},blendMode:{type:m.OptionType.NUMBER,default:E.BLEND_MODES.NORMAL,available:r()(E.BLEND_MODES).map((function(e){return E.BLEND_MODES[e]}))}},O.StyleTransferModel=v.a,O.TensorFilters=k.a,y.a.Operations.ArtFilterOperation=O,t.a=O},function(e,t,n){var i=n(29),r=n.n(i),o=n(25),a=n.n(o),s=n(0),l=n.n(s),u=n(2),c=n.n(u),f=n(3),h=n.n(f),p=n(79),d=n.n(p),_=n(10),g=n.n(_),m=n(1),y=n.n(m),v=n(4),b=(n.n(v),n(453)),w=n(471),k=n(188),x=n(189),T=n(190),R=n(191),C=n(192),E=n(193),O=n(194),I=n(195),S=n(13),A=n(38),F=n(171),M=n(54),D=n(133),B=n(196),P=n(197),L=n(132),z=function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function N(e){return function(){var t=e.apply(this,arguments);return new g.a((function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return g.a.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(s)}("next")}))}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var W=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];j(this,t);var i=G(this,(t.__proto__||y()(t)).call(this,e));return i._onWeightsUpdatedCallback=null,i._finalConvIndex=-1,i._tilingController=n,i._disposed=!1,i}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,e),U(t,[{key:"isDirty",value:function(){return!this._tilingController||!this._tilingController.hasRenderedAllTiles()}},{key:"isDisposed",value:function(){return null===this._graph}},{key:"isReady",value:function(){return!this.isDisposed()&&this._graph.isFinished()}},{key:"getTilingController",value:function(){return this._tilingController}},{key:"onWeightsUpdated",value:function(e){this._onWeightsUpdatedCallback=e}}],[{key:"createWithOptions",value:function(e,n,i){var r=e.tileEdgeLength||t.prototype.availableOptions.tileEdgeLength.default,o=e.overlappingFactor||t.prototype.availableOptions.overlappingFactor.default,a=new t(e,new w.a(n,r,o));return a.initGraph(i).then((function(){return a}))}}]),U(t,[{key:"updateInputDimensions",value:function(e){var n=this._options.tileEdgeLength||t.prototype.availableOptions.tileEdgeLength.default,i=this._options.overlappingFactor||t.prototype.availableOptions.overlappingFactor.default;this._tilingController=new w.a(e,n,i)}},{key:"updateWithWeightsFromURL",value:(i=N(d.a.mark((function e(t){var n,i,r,o,a,s,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new F.JSONLoader(t),e.next=3,n.load();case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return",g.a.reject(new Error("Could not load weight map from "+t)));case 6:for(r=0;i["transform/residual/res_"+(r+1)+"/conv1/depthwise_weights"];)r++;if(o=i["transform/expand/final_conv/depthwise_weights"].logicalShape,a=this._graph._filterStack[this._finalConvIndex]._getInputWithName("w").logicalShape,s=M.a.isSameShape(a,o),l=this._residualBlockCount===r,u=this,!s||!l){e.next=17;break}return e.abrupt("return",this._graph.updateWeights(i).then((function(){u._onWeightsUpdatedCallback&&u._onWeightsUpdatedCallback(),u.getTilingController().reset()})));case 17:return e.abrupt("return",g.a.reject(new Error("Model architectures differ.")));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"execute",value:function(e,t,n){var i=this._tilingController,r=this._graph,o=i.getNextTileIndex();if(!r.isFinished())throw new Error("Can't execute an unfinished graph.");var a=this._tilingController.getOriginalInputCoordinatesForTileAtIndex(o),s=a.x,l=a.y,u=a.height,c=a.width,f=new A.Rectangle(s,l,c,u),h=this._tilingController.getBlendLeftTopRightBottomForTile(o),p=this._tilingController.getTilingConfiguration().overlappingFactor;return r.render(e,t,n,f,h,p).then((function(){i.markTileAsRendered(o)}))}},{key:"initGraph",value:(n=N(d.a.mark((function e(t){var n,i,r,o,a,s,l,u,c,f=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options,i=n.weightURL,r=n.tileEdgeLength,o=this.getTilingController(),a=o.calculateMaximumTileDimensions(),s=o.getOriginalInputCoordinatesForTileAtIndex(0).getSize(),l=new F.JSONLoader(i),e.next=7,l.load();case 7:for(u=e.sent,c=0;u["transform/residual/res_"+(c+1)+"/conv1/depthwise_weights"];)c++;return this._residualBlockCount=c,this._graph=new b.a(t,u,a,r),this._graph.addFilter(new I.a({inputs:[{name:"x",type:S.a.PREVIOUS}],size:[r,r]})),this._addStyleTransferOperationsToGraph(this._graph,u,s),e.abrupt("return",this._graph.load(t).then((function(){f._tilingController.reset()})));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_addStyleTransferOperationsToGraph",value:function(e,t,n){this._weightMap=t;for(var i=this._addDepthwiseSeparableConvolution("transform/contract/conv1",e,1,1,"same"),r=this._addDepthwiseSeparableConvolution("transform/contract/conv2",e,i,2,"same"),o=this._addDepthwiseSeparableConvolution("transform/contract/conv3",e,r,2,"same"),a=1;a<=this._residualBlockCount;a++){var s="transform/residual/res_"+a;o=this._addResidualBlock(s,e,o)}var l=this._addUpsampling("transform/expand/up_1",e,o),u=this._addUpsampling("transform/expand/up_2",e,l);this._addDepthwiseSeparableConvolution("transform/expand/final_conv",e,u,1,"same",!1),e.addFilter(new x.a({inputs:[{name:"x",type:S.a.PREVIOUS}]}));var c=e.addFilter(new I.a({inputs:[{name:"x",type:S.a.PREVIOUS}],size:[n.y,n.x]})),f=this._addEdgePadding(e,c,3,1),h=this._addPackFilterToStack(e,f);this._addSharpening(e,h),this._weightMap=null}},{key:"_addDepthwiseSeparableConvolution",value:function(e,t,n,i,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e+"/depthwise_weights",s=e+"/pointwise_weights",l=t.getLastIndex()===n,u=t.addFilter(new R.a({inputs:[{name:"x",type:l?S.a.PREVIOUS:S.a.DATA,data:n},{name:"w",type:S.a.DATA,data:a}],stride:i,padding:"same",padMethod:"edge"}));a.indexOf("final_conv")>=0&&(this._finalConvIndex=u);var c=t.addFilter(new T.a({inputs:[{name:"x",type:S.a.PREVIOUS},{name:"w",type:S.a.DATA,data:s}],stride:1,padding:"valid"})),f=C.a.addFiltersForReduceSumOperationToGraph(t,c,[1,2]),h=t.addFilter(new E.a({inputs:[{name:"sum",type:S.a.PREVIOUS},{name:"x",type:S.a.INDEX,data:c}]}));C.a.addFiltersForReduceSumOperationToGraph(t,h,[1,2]);var p=e+"/instance_norm/shift",d=e+"/instance_norm/scale";return t.addFilter(new O.a({inputs:[{name:"variance",type:S.a.PREVIOUS},{name:"sum",type:S.a.INDEX,data:f},{name:"x",type:S.a.INDEX,data:c},{name:"shift",type:S.a.DATA,data:p},{name:"scale",type:S.a.DATA,data:d}],addRelu:o})),t.getLastIndex()}},{key:"_addResidualBlock",value:function(e,t,n){var i=this._addDepthwiseSeparableConvolution(e+"/conv1",t,n,1,"same"),r=this._addDepthwiseSeparableConvolution(e+"/conv2",t,i,1,"same",!1),o=t.getLastIndex()===r;return t.addFilter(new k.a({inputs:[{name:"x",type:S.a.INDEX,data:n},{name:"y",type:o?S.a.PREVIOUS:S.a.INDEX,data:r}]})),t.getLastIndex()}},{key:"_addUpsampling",value:function(e,t,n){var i=t.getLogicalShapeAtIndex(n),r=z(i,3),o=(r[0],r[1]),a=r[2],s=t.getLastIndex()===n,l=t.addFilter(new I.a({inputs:[{name:"x",type:s?S.a.PREVIOUS:S.a.INDEX,data:n}],size:[2*o,2*a]}));return this._addDepthwiseSeparableConvolution(e+"/conv",t,l,1,"same")}},{key:"_addEdgePadding",value:function(e,t,n,i){var r=e.getLogicalShapeAtIndex(t),o=z(r,4),a=o[1],s=o[2],l=(o[3],e.getLastIndex()===t),u=D.a.calculatePadding("same",a,s,i,i,n,n).padInfo,c=[[0,0],[u.top,u.bottom],[u.left,u.right],[0,0]];return e.addFilter(new B.a({inputs:[{name:"x",type:l?S.a.PREVIOUS:S.a.INDEX,data:t}],paddings:c}))}},{key:"_addPackFilterToStack",value:function(e,t){var n=e.getLogicalShapeAtIndex(t),i=e.getLastIndex()===t,r=new L.a({inputs:[{name:"x",type:i?S.a.PREVIOUS:S.a.INDEX,data:t}],outputSize:n.slice(1,3)});if(3===n[3])return e.addFilter(r);throw new Error("Couldn't add pack filter due to channel count mismatch (expected RGB output).")}},{key:"_addSharpening",value:function(e,t){var n=e.getLastIndex()===t;e.addFilter(new P.a({inputs:[{name:"x",type:n?S.a.PREVIOUS:S.a.INDEX,data:t}]}))}},{key:"dispose",value:function(){this._graph&&this._graph.dispose(),this._graph=null}}]),t}(v.Configurable);W.prototype.availableOptions={weightURL:{type:v.OptionType.STRING,required:!0},tileEdgeLength:{type:v.OptionType.NUMBER,default:256},overlappingFactor:{type:v.OptionType.NUMBER,default:.4}},t.a=W},function(e,t,n){var i=n(0),r=n.n(i),o=n(79),a=n.n(o),s=n(39),l=n.n(s),u=n(10),c=n.n(u),f=n(131),h=n.n(f),p=n(38),d=n(13),_=n(185),g=n(54),m=n(4),y=(n.n(m),n(132),n(12)),v=n(160),b=n(186),w=n(469),k=n(470),x=n(187),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._measurePerformance=!1,this._filterStack=[],this._intermediateReadDependencies=[],this._intermediateWriteDependencies=[],this._finished=!1,this._renderer=t,this._gl=t.getContext();var o=x.a.determineSupportedConfiguration(this._gl);this._renderTargetManager=new w.b(t,o),this._textureManager=new k.a(t,o),this._weightMap=n,this._shaderCache=new h.a,this._inputTileDimensions=i,this._inferenceEdgeLength=r,this._featheredMaskFilter=new b.a({inputs:[{name:"x",type:d.a.PREVIOUS,logicalShape:[i.y,i.x]},{name:"y",type:d.a.INDEX,logicalShape:[i.y,i.x]}]}),this._setupRGBAUnpackFilter()}var t,n;return T(e,[{key:"addFilter",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._finished)throw new Error("Can't add filters to an already finished graph.");var i=this._filterStack.length,r=i-1,o=this._filterStack[r];return this._filterStack.push(e),this._intermediateReadDependencies.push([]),this._intermediateWriteDependencies.push([]),e.getInputs().forEach((function(a,s,l){switch(a.type){case d.a.PREVIOUS:n&&(a.logicalShape=o.outputLogicalShape());break;case d.a.INDEX:if(a.data===r)throw new Error("Accessing the previous filter through indexing is not supported. Use InputType.PREVIOUS instead.");var u=t._filterStack[a.data];if(!u)throw new Error("Indexed input does not exist: "+a.data+" for input "+a.name+" in "+e.constructor.name+" at "+i+".");n&&(a.logicalShape=u.outputLogicalShape()),t._intermediateReadDependencies[i].push(a),t._intermediateWriteDependencies[a.data].push(i);break;case d.a.DATA:var c=a.data,f=t._weightMap[c];l[s].logicalShape=f.logicalShape,l[s].data=new Float32Array(f.data),l[s].key=c,delete t._weightMap[c]}}),this),e.prepareUniforms(),i}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._measurePerformance;this._renderer=e,this._gl=e.getContext();var i=this._gl,r=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this._maxRequiredTextureDimensions=this._calculateMaximumIntermediateTextureDimensions();var o=this;return c.a.resolve().then((function(){return o._loadTextures(n)})).then((function(){return o._compileShaders(e,r,n)})).then((function(){return o._prepareRenderTargets(n)})).then((function(){return o._intermediateResults=o._filterStack.map((function(){return null})),o._quad=new v.a(e),t._weightMap=null,o._finished=!0,o})).then((function(){n&&(performance.measure("texture_loading","begin_texture_loading","finish_texture_loading"),performance.measure("shader_compilation","begin_shader_compilation","finish_shader_compilation"),performance.measure("target_preparation","begin_target_preparation","finish_target_preparation"),performance.getEntriesByType("measure").forEach((function(e){console.log(e.name+": "+e.duration+"ms"),performance.clearMarks(),performance.clearMeasures()})))}))}},{key:"dispose",value:function(){this._disposed||(this._textureManager.dispose(),this._renderTargetManager.dispose(),this._shaderCache.forEach((function(e){e.dispose()})),this._textureManager=null,this._renderTargetManager=null,this._shaderCache=null,this._intermediateReadDependencies=null,this._intermediateWriteDependencies=null,this._filterStack=null,this._disposed=!0)}},{key:"_loadTextures",value:function(e){var t=this;e&&performance.mark("begin_texture_loading");var n=[];return this._filterStack.forEach((function(e,i){n.push(t._textureManager.createAndLoadTexturesForFilter(e,i))}),this),c.a.all(n).then((function(){e&&performance.mark("finish_texture_loading")}))}},{key:"_compileShaders",value:function(e,t,n){var i=this;n&&performance.mark("begin_shader_compilation");var r=[];return this._filterStack.concat([this._featheredMaskFilter]).forEach((function(n,o){if(o<i._filterStack.length){var a=1+n.getInputs().filter((function(e){return e.type===d.a.DATA})).length+i._intermediateReadDependencies[o].length;if(a>t)throw new Error("This environment does only offer support for "+t+", but filter "+n.constructor.name+" requires "+a+".")}var s=n.getShaderIdentifier(),l=i;i._shaderCache.has(s)||r.push(new c.a((function(t){var i=n.getShaderForRenderer(e);if(!i)throw new Error("Could not compile filter: "+n.constructor.name+"!");l._shaderCache.set(s,i),e.getContext().finish(),t(i)})))})),c.a.all(r).then((function(){n&&performance.mark("finish_shader_compilation")}))}},{key:"_prepareRenderTargets",value:function(e){var t=this;e&&performance.mark("begin_target_preparation");var n=this._maxRequiredTextureDimensions,i=this._inputTileDimensions;return c.a.resolve().then((function(e){return t._renderTargetManager.prebuildRenderTargets(5,n,w.a.FLOAT)})).then((function(e){return t._renderTargetManager.prebuildRenderTargets(3,i,w.a.INT)})).then((function(t){e&&performance.mark("finish_target_preparation")}))}},{key:"isFinished",value:function(){return this._finished}},{key:"updateWeights",value:function(e){var t=this;return this._finished?(this._filterStack.forEach((function(n,i,r){var o=!1;n.getInputs().forEach((function(t,n){if(t.type===d.a.DATA&&t.key){var a=e[t.key];if(!a)return;r[i].getInputs()[n].data=new Float32Array(a.data),o=!0,delete e[t.key]}})),o&&t._textureManager.updateTexturesForFilter(n,i)})),0===!l()(e).length&&c.a.reject(new Error("Not all weights in the given weight map were in use.")),c.a.resolve()):c.a.reject(new Error("Graph hasn't been loaded. Unable to update weights."))}},{key:"render",value:(t=a.a.mark((function e(t,n,i,r,o,s){var l,u,f,h,_,m,v,b,k,x,T,R,C,E=this,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._measurePerformance;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._disposed){e.next=2;break}return e.abrupt("return",c.a.resolve(i));case 2:if(O&&performance.mark("begin_render"),l=this._gl,O&&performance.mark("begin_preparation"),this._featheredMaskFilter.setBlendLeftTopRightBottom(o),this._featheredMaskFilter.setBlendRadius(.5*s),u=this._maxRequiredTextureDimensions,f=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),h=this._renderTargetManager.popRenderTarget(u,w.a.FLOAT),_=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),this._copyTextureContents(n,f,r,p.Vector2.NULL),this._copyTextureContents(i,_,r,p.Vector2.NULL),m=this._filterStack[0],v=m.getInputs()[0].name,b=r.height,k=r.width,x=[b,k],m.setTextureSizeForInputWithName(this._inputTileDimensions.asArray(!0),v),m.setLogicalSizeForInputWithName(x,v),O&&performance.mark("finish_preparation"),T=new y.h,R=new y.h,this._filterStack.forEach((function(e,n){var i=1;O&&performance.mark("begin_conversion_"+n);var r=e.requiresFloatTextures()?w.a.FLOAT:w.a.INT,o=n===E.getLastIndex()?E._inputTileDimensions:E._maxRequiredTextureDimensions,a=E._renderTargetManager.getFormatOfRenderTarget(h);null===h?h=E._renderTargetManager.popRenderTarget(o,r):a!==r&&(E._renderTargetManager.pushRenderTarget(h),h=E._renderTargetManager.popRenderTarget(o,r)),O&&performance.mark("finish_conversion_"+n);var s=f.getFrame().getSize().asArray(!0),u=h.getFrame().getSize().asArray(!0),c=p.Utils.Array.find(e.getInputs(),(function(e){return e.type===d.a.PREVIOUS}));void 0!==c&&(e.setTextureSizeForInputWithName(s,c.name),e.setLogicalSizeForInputWithName(x,c.name)),O&&performance.mark("begin_suppl_"+n+"_prep"),i+=E._textureManager.bindTexturesForFilter(e,n,i),O&&performance.mark("finish_suppl_"+n+"_prep"),O&&performance.mark("begin_intermediate_"+n+"_prep");var _=E._intermediateReadDependencies[n];E._bindIntermediateReadDependencies(e,_,i),O&&performance.mark("finish_intermediate_"+n+"_prep");var m=f.getFrame(),y=h.getFrame();m.equals(T)&&y.equals(R)||(E._quad.map(m,y),E._configureVertexAttributesForShader(e.getShaderForRenderer(t)),T=m,R=y),t.setRenderTarget(h);var v=g.a.getTextureDimensionsForLogicalShape(e.outputLogicalShape());e.setTargetTextureSize(u),e.setTargetLogicalSize(v),l.viewport(0,0,v[1],v[0]),O&&performance.mark("begin_filter_"+n);var b=E._shaderCache.get(e.getShaderIdentifier());l.useProgram(b.getProgram()),e._applyWebGL(t,f,h,!0,b),O&&performance.mark("finish_filter_"+n),O&&performance.mark("begin_postprocess_"+n),E._storeIntermediateResultsIfNeeded(f,n,x,s)&&(f=null),_.forEach((function(e){var t=E._intermediateResults[e.data];t&&0===t.pendingReads&&(E._renderTargetManager.pushRenderTarget(t.target),E._intermediateResults.slice(e.data,1))}),E);var k=h;h=f,f=k,x=v,O&&performance.mark("finish_postprocess_"+n)}),this),O&&performance.mark("begin_masking"),this._renderTargetManager.pushRenderTarget(h),h=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),this._applyFeatheredMasking(t,f,_,h,[b,k],o),O&&performance.mark("finish_masking"),O&&performance.mark("begin_out_copy"),this._copyTextureContents(h,i,new y.h(0,0,k,b),r.getPosition()),O&&performance.mark("finish_out_copy"),this._renderTargetManager.pushRenderTarget(f),this._renderTargetManager.pushRenderTarget(h),this._renderTargetManager.pushRenderTarget(_),O&&performance.mark("finish_render"),O){for(performance.measure("total","begin_render","finish_render"),performance.measure("preparation","begin_preparation","finish_preparation"),performance.measure("masking","begin_masking","finish_masking"),performance.measure("out_copy","begin_out_copy","finish_out_copy"),C=0;C<this._filterStack.length;C++)performance.measure("conversion_"+C,"begin_conversion_"+C,"finish_conversion_"+C),performance.measure("suppl_"+C+"_prep","begin_suppl_"+C+"_prep","finish_suppl_"+C+"_prep"),performance.measure("intermediate_"+C+"_prep","begin_intermediate_"+C+"_prep","finish_intermediate_"+C+"_prep"),performance.measure("filter_"+C+"_"+this._filterStack[C].constructor.name,"begin_filter_"+C,"finish_filter_"+C),performance.measure("postprocess_"+C,"begin_postprocess_"+C,"finish_postprocess_"+C);performance.getEntriesByType("measure").forEach((function(e){e.duration>50&&console.log(e.name+": "+e.duration+"ms")})),performance.clearMarks(),performance.clearMeasures()}return e.abrupt("return",c.a.resolve(i));case 37:case"end":return e.stop()}}),e,this)})),n=function(){var e=t.apply(this,arguments);return new c.a((function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return c.a.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));t(s)}("next")}))},function(e,t,i,r,o,a){return n.apply(this,arguments)})},{key:"_applyFeatheredMasking",value:function(e,t,n,i,r){var o=this._gl;o.activeTexture(o.TEXTURE0+1),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=i.getFrame().getSize().asArray(!0);this._featheredMaskFilter.setTargetTextureSize(a),this._featheredMaskFilter.setTargetLogicalSize(r),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"x"),this._featheredMaskFilter.setLogicalSizeForInputWithName(r,"x"),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"y"),this._featheredMaskFilter.setLogicalSizeForInputWithName(r,"y");var s=this._featheredMaskFilter.getShaderIdentifier(),l=this._shaderCache.get(s);o.useProgram(l.getProgram()),this._featheredMaskFilter._applyWebGL(e,t,i,!0,l)}},{key:"_copyTextureContents",value:function(e,t,n,i){var r=this._gl;e.activate(),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.copyTexSubImage2D(r.TEXTURE_2D,0,i.x,i.y,n.x,n.y,n.width,n.height)}},{key:"_bindIntermediateReadDependencies",value:function(e,t,n){var i=this,r=this._gl,o=n;t.forEach((function(t){var n=i._intermediateResults[t.data];r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,n.target.getTexture()),e.setTextureSizeForInputWithName(n.textureSize,t.name),e.setLogicalSizeForInputWithName(n.logicalSize,t.name),n.pendingReads--,o++}))}},{key:"_configureVertexAttributesForShader",value:function(e){var t=this._gl,n=this._quad.getVertexBuffer(),i=this._quad.getIndexBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i);var r=e.getAttributeLocations();t.vertexAttribPointer(r.a_position,2,t.FLOAT,!1,0,0),t.vertexAttribPointer(r.a_texCoord,2,t.FLOAT,!1,0,32),t.vertexAttribPointer(r.a_color,4,t.FLOAT,!1,0,64)}},{key:"_storeIntermediateResultsIfNeeded",value:function(e,t,n,i){var r=t-1;return r>=0&&this._intermediateWriteDependencies[r].length>0&&(this._intermediateResults[r]={target:e,pendingReads:this._intermediateWriteDependencies[r].length,textureSize:i,logicalSize:n},!0)}},{key:"getInitialInputLogicalShape",value:function(){return this._filterStack[0].outputLogicalShape()}},{key:"getLastFilterLogicalShape",value:function(){return this.getLogicalShapeAtIndex(this._filterStack.length-1)}},{key:"getFilterCount",value:function(){return this._filterStack.length}},{key:"getLastIndex",value:function(){return this._filterStack.length-1}},{key:"getLogicalShapeAtIndex",value:function(e){return this._filterStack[e].outputLogicalShape()}},{key:"getDebugDescription",value:function(){var e=this,t="",n=0,i=0;return this._filterStack.forEach((function(r,o){var a=r.constructor.name,s=r._options.inputs.map((function(e){return e.name+": ["+e.logicalShape+"]"})).join(", "),l="Out: ["+r.outputLogicalShape()+"]",u="["+e._supplementaryTextures[o].map((function(e){return e.loadedTexture.getGLUnit()+": "+e.loadedTexture.id})).join(", ")+"]",c="R: ["+e._intermediateReadDependencies[o].map((function(e){return e.data})).join(", ")+"] | W: ["+e._intermediateWriteDependencies[o].join(", ")+"]";t+="["+o+"] - "+a+" | "+s+" | "+l+" | "+u+" | "+c+"\n",n+=e._intermediateReadDependencies[o].length,i+=e._supplementaryTextures[o].length})),t+="Max intermediate texture size: "+this._maxRequiredTextureDimensions+"\n",t+="Required render targets: "+(n+2)+"\n",t+="Required weight textures: "+i}},{key:"_setupRGBAUnpackFilter",value:function(){var e=this._inputTileDimensions,t=[e.y,e.x],n=new _.a({inputs:[{name:"x",logicalShape:t,type:d.a.PREVIOUS}]});this.addFilter(n,!1)}},{key:"_removeLastFilter",value:function(){this._filterStack.pop(),this._supplementaryTextures.pop(),this._intermediateReadDependencies.pop(),this._intermediateWriteDependencies.pop()}},{key:"_calculateMaximumIntermediateTextureDimensions",value:function(){var e=new p.Vector2(this._inputTileDimensions.x,this._inputTileDimensions.y);return this._filterStack.forEach((function(t){var n=g.a.getTextureDimensionsForLogicalShape(t.outputLogicalShape());n[1]>e.x&&(e.x=n[1]),n[0]>e.y&&(e.y=n[0])})),e}}]),e}();t.a=R},function(e,t,n){n(109),n(50),n(62),n(455),n(461),n(464),n(466),e.exports=n(11).Map},function(e,t,n){var i=n(456),r=n(184);e.exports=n(457)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},function(e,t,n){var i=n(22).f,r=n(81),o=n(114),a=n(30),s=n(110),l=n(63),u=n(104),c=n(142),f=n(150),h=n(19),p=n(106).fastKey,d=n(184),_=h?"_s":"size",g=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e((function(e,i){s(e,c,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[_]=0,null!=i&&l(i,n,e[u],e)}));return o(c.prototype,{clear:function(){for(var e=d(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n=d(this,t),i=g(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[_]--}return!!i},forEach:function(e){d(this,t);for(var n,i=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(d(this,t),e)}}),h&&i(c.prototype,"size",{get:function(){return d(this,t)[_]}}),c},def:function(e,t,n){var i,r,o=g(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[_]++,"F"!==r&&(e._i[r]=o)),e},getEntry:g,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=d(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var i=n(16),r=n(14),o=n(106),a=n(42),s=n(34),l=n(114),u=n(63),c=n(110),f=n(23),h=n(61),p=n(22).f,d=n(458)(0),_=n(19);e.exports=function(e,t,n,g,m,y){var v=i[e],b=v,w=m?"set":"add",k=b&&b.prototype,x={};return _&&"function"==typeof b&&(y||k.forEach&&!a((function(){(new b).entries().next()})))?(b=t((function(t,n){c(t,b,e,"_c"),t._c=new v,null!=n&&u(n,m,t[w],t)})),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in k&&(!y||"clear"!=e)&&s(b.prototype,e,(function(n,i){if(c(this,b,e),!t&&y&&!f(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r}))})),y||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(t,e,m,w),l(b.prototype,n),o.NEED=!0),h(b,e),x[e]=b,r(r.G+r.W+r.F,x),y||g.setStrong(b,e,m),b}},function(e,t,n){var i=n(30),r=n(97),o=n(44),a=n(82),s=n(459);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,f=6==e,h=5==e||f,p=t||s;return function(t,s,d){for(var _,g,m=o(t),y=r(m),v=i(s,d,3),b=a(y.length),w=0,k=n?p(t,b):l?p(t,0):void 0;b>w;w++)if((h||w in y)&&(g=v(_=y[w],w,m),e))if(n)k[w]=g;else if(g)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:k.push(_)}else if(c)return!1;return f?-1:u||c?c:k}}},function(e,t,n){var i=n(460);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(23),r=n(143),o=n(17)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var i=n(14);i(i.P+i.R,"Map",{toJSON:n(462)("Map")})},function(e,t,n){var i=n(84),r=n(463);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(63);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){n(465)("Map")},function(e,t,n){var i=n(14);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(467)("Map")},function(e,t,n){var i=n(14),r=n(56),o=n(30),a=n(63);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,s,l=arguments[1];return r(this),(t=void 0!==l)&&r(l),null==e?new this:(n=[],t?(i=0,s=o(l,arguments[2],2),a(e,!1,(function(e){n.push(s(e,i++))}))):a(e,!1,n.push,n),new this(n))}})}},function(e,t){e.exports="varying vec2 v_texCoord;\n\n// Added to the calculated (x,y) texture coordinates, to actually sample the 'center' of a pixel\nconst vec2 halfCR = vec2(0.5, 0.5);\n\n// A uniform holding the dimensions (height/rows, width/cols) of the texture we're rendering to\nuniform vec2 output_texRC;\n\n// A uniform holding the virtual output dimensions when rendering to larger textures. This allows\n// making use of the viewport and only two very large textures to perform all tensor rendering.\nuniform vec2 output_sizeRC;\n\nbool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n}\n\nbool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n}\n\nfloat getNaN(vec4 values) {\n    return dot(vec4(1), values);\n}\n\nint round(float value) {\n    return int(floor(value + 0.5));\n}\n\nint imod(int x, int y) {\n    return x - y * (x / y);\n}\n\n//Based on the work of Dave Hoskins\n//https://www.shadertoy.com/view/4djSRW\n#define HASHSCALE1 443.8975\nfloat random(float seed){\n    vec2 p = v_texCoord * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 UVfrom1D(vec2 texNumRC, vec2 sizeRC, int index) {\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom2D(vec2 texNumRC, vec2 sizeRC, int numC, int row, int col) {\n  // Calculate x & y in logical size\n  int index = row * numC + col;\n  int logR = index / int(sizeRC.y);\n  int logC = index - logR * int(sizeRC.y);\n\n  // Return relative positions of row & col in texture size\n  return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom4D(vec2 texNumRC, vec2 sizeRC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nfloat sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n}\n"},function(e,t,n){n.d(t,"a",(function(){return p}));var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(131),l=n.n(s),u=n(4),c=(n.n(u),n(38)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetTextureFormatMap=new l.a,this._floatTargetPool=[],this._intTargetPool=[],this._renderer=t,this._internalFloatType=n.renderTextureType,this._internalFloatTextureFormat=n.renderTextureFormat}return f(e,[{key:"prebuildRenderTargets",value:function(e,t,n){for(var i=this,r=[],o=0;o<e;o++)r.push(new a.a((function(e){var r=i._createRenderTarget(t,n),o=i._uniqueIDForTarget(r);i._targetTextureFormatMap.set(o,n),i.pushRenderTarget(r),e()})));return a.a.all(r)}},{key:"pushRenderTarget",value:function(e){var t=this._uniqueIDForTarget(e),n=this._targetTextureFormatMap.get(t);if(n)switch(n){case p.FLOAT:this._floatTargetPool.push(e);break;case p.INT:this._intTargetPool.push(e)}}},{key:"popRenderTarget",value:function(e,t){var n=null;t===p.FLOAT?n=this._extractTargetFromPool(this._floatTargetPool,e):t===p.INT&&(n=this._extractTargetFromPool(this._intTargetPool,e)),n||(n=this._createRenderTarget(e,t));var i=this._uniqueIDForTarget(n);return this._targetTextureFormatMap.set(i,t),n}},{key:"getFormatOfRenderTarget",value:function(e){return null===e?null:this._targetTextureFormatMap.get(e._baseTexture.id)}},{key:"dispose",value:function(){this._targetTextureFormatMap.clear(),this._floatTargetPool.forEach((function(e){e.dispose()})),this._floatTargetPool=null,this._intTargetPool.forEach((function(e){e.dispose()})),this._intTargetPool=null}},{key:"_uniqueIDForTarget",value:function(e){return null===e?null:null!==e.getBaseTexture()?e.getBaseTexture().id:null}},{key:"_extractTargetFromPool",value:function(e,t){var n=e.filter((function(e){var n=e.getFrame().getSize();return n.x===t.x&&n.y&&t.y})).shift();if(n){var i=e.indexOf(n);e.splice(i,1)}return n}},{key:"_createRenderTarget",value:function(e,t){var n=new u.Engine.WebGLRenderTarget(this._renderer,e.x,e.y,1);n.getBaseTexture().setMinFilter(u.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMagFilter(u.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMipMappingEnabled(!1),n.setFrame(new c.Rectangle(0,0,e.x,e.y));var i=this._renderer.getContext();i.bindTexture(i.TEXTURE_2D,n.getBaseTexture().getGLTextureForRenderer(this._renderer));var r=t===p.FLOAT?this._internalFloatType:i.UNSIGNED_BYTE,o=t===p.FLOAT?this._internalFloatTextureFormat:i.RGBA;return i.texImage2D(i.TEXTURE_2D,0,o,e.x,e.y,0,o,r,null),n}}]),e}(),p={FLOAT:"float",INT:"int"};t.b=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(131),l=n.n(s),u=n(13),c=n(54),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._filterInputToTextureMap=new l.a,this._renderer=t;var i=this._renderer.getContext();this._internalFloatType=n.weightTextureType,this._internalFloatTextureFormat=n.weightTextureFormat,this._numChannels=n.weightTextureFormat===i.RGBA?4:1,this._internalFloatType!==i.FLOAT&&this._prepareFloatConversionTables()}return f(e,[{key:"createAndLoadTexturesForFilter",value:function(e,t){var n=this;return new a.a((function(i){e.getInputs().forEach((function(i,r){if(i.type===u.a.DATA){var o=i.data,a=i.logicalShape,s=n._createTexture(),l=n._uploadDataToTexture(s,o,a,n._numChannels),c=t+"_"+i.name;n._filterInputToTextureMap.set(c,l),n._renderer.getContext().flush(),e.getInputs()[r].data=null}})),i()}))}},{key:"bindTexturesForFilter",value:function(e,t,n){var i=this,r=this._renderer.getContext(),o=0;return e.getInputs().forEach((function(a,s){if(a.type===u.a.DATA){var l=i._filterInputToTextureMap.get(t+"_"+a.name),c=l.texture,f=l.size;if(!c)throw new Error("Missing texture for filter "+s+".");r.activeTexture(r.TEXTURE0+n+o),r.bindTexture(r.TEXTURE_2D,c),e.setTextureSizeForInputWithName(f,a.name),e.setLogicalSizeForInputWithName(f,a.name),o++}})),o}},{key:"updateTexturesForFilter",value:function(e,t){var n=this;e.getInputs().forEach((function(e){if(e.type===u.a.DATA&&null!==e.data){var i=n._filterInputToTextureMap.get(t+"_"+e.name).texture;n._uploadDataToTexture(i,e.data,e.logicalShape,n._numChannels)}}),this)}},{key:"dispose",value:function(){var e=this._renderer.getContext();this._filterInputToTextureMap.forEach((function(t){"undefined"!==t&&e.deleteTexture(t.texture)})),this._filterInputToTextureMap.clear()}},{key:"_createTexture",value:function(){var e=this._renderer.getContext(),t=e.createTexture();return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}},{key:"_uploadDataToTexture",value:function(e,t,n,i){var r=c.a.getTextureDimensionsForLogicalShape(n),o=c.a.getSizeOfLogicalShape(n);if(t.length!==o)throw new Error("Not enough or too many values ("+t.length+") for shape "+n+".");var a=this._renderer.getContext(),s=this._internalFloatType!==a.FLOAT,l=this._createArrayBufferForUpload(t,r,i,s);return a.bindTexture(a.TEXTURE_2D,e),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),1===i&&a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this._internalFloatTextureFormat,r[1],r[0],0,this._internalFloatTextureFormat,this._internalFloatType,l),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.pixelStorei(a.UNPACK_ALIGNMENT,4),{texture:e,size:r}}},{key:"_createArrayBufferForUpload",value:function(e,t,n,i){if(1===n&&!1===i)return e;for(var r=t[0]*t[1]*n,o=i?new Uint16Array(r):new Float32Array(r),a=4===n,s=0,l=0;l<e.length;l++)o[s]=i?this._toHalfFloat(e[l]):e[l],a&&(o[s+3]=1),s+=n;return o}},{key:"_prepareFloatConversionTables",value:function(){var e=new ArrayBuffer(4);this._floatView=new Float32Array(e),this._uint32View=new Uint32Array(e);for(var t=new Uint32Array(512),n=new Uint32Array(512),i=0;i<256;++i){var r=i-127;r<-27?(t[0|i]=0,t[256|i]=32768,n[0|i]=24,n[256|i]=24):r<-14?(t[0|i]=1024>>-r-14,t[256|i]=1024>>-r-14|32768,n[0|i]=-r-1,n[256|i]=-r-1):r<=15?(t[0|i]=r+15<<10,t[256|i]=r+15<<10|32768,n[0|i]=13,n[256|i]=13):r<128?(t[0|i]=31744,t[256|i]=64512,n[0|i]=24,n[256|i]=24):(t[0|i]=31744,t[256|i]=64512,n[0|i]=13,n[256|i]=13)}this._baseTable=t,this._shiftTable=n}},{key:"_toHalfFloat",value:function(e){this._floatView[0]=e;var t=this._uint32View[0],n=t>>23&511;return this._baseTable[n]+((8388607&t)>>this._shiftTable[n])}}]),e}();t.a=h},function(e,t,n){var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=o.Math.Vector2,u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4;s(this,e),this._renderedTileIndices=[],this._unrenderedTileIndices=[],this._originalInputDimensions=t,this._tilingConfiguration=this._calculateTilingConfiguration(t,n,i),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._maskCache={}}return a(e,[{key:"_generateRandomTileIndices",value:function(e){for(var t=this,n=e.totalTileCount,i=function(){return Math.floor(Math.random()*t._tilingConfiguration.totalTileCount)},r=[];r.length<n;){for(var o=i();r.indexOf(o)>-1;)o=i();r.push(o)}return r}},{key:"_generateSpiralingTileIndices",value:function(e){var t=e.numHorizontalTiles,n=e.numVerticalTiles;return this._generateSpiralingIndicies(t,n)}},{key:"_generateSpiralingIndicies",value:function(e,t){for(var n=[],i=0,r=0,o=[0,-1],a=e%2==0,s=t%2==0,l=Math.floor(e/2)-a,u=Math.floor(t/2)-s,c=Math.pow(Math.max(e,t),2);c>0;c--)-e/2<i&&i<=e/2&&-t/2<r&&r<=t/2&&n.push((u+r)*e+(l+i)),(i===r||i<0&&i===-r||i>0&&i===1-r)&&(o=[-o[1],o[0]]),i+=o[0],r+=o[1];return n.reverse()}},{key:"calculateMaximumTileDimensions",value:function(){for(var e=this._tilingConfiguration.totalTileCount,t=new l(0,0),n=0;n<e;n++){var i=this.getOriginalInputCoordinatesForTileAtIndex(n).getSize();t.x=Math.max(i.x,t.x),t.y=Math.max(i.y,t.y)}return t}},{key:"reset",value:function(){var e=this._tilingConfiguration,t=e.tileEdgeLength,n=e.overlappingFactor;this._tilingConfiguration=this._calculateTilingConfiguration(this._originalInputDimensions,t,n),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._renderedTileIndices=[],this._nextTileIndex=null}},{key:"getOriginalInputDimensions",value:function(){return this._originalInputDimensions}},{key:"getNextTileIndex",value:function(){return this.hasRenderedAllTiles()?-1:(this._nextTileIndex||(this._nextTileIndex=this._unrenderedTileIndices.pop()),this._nextTileIndex)}},{key:"getTilingConfiguration",value:function(){return this._tilingConfiguration}},{key:"getRenderedTileCount",value:function(){return this._renderedTileIndices.length}},{key:"getRenderingProgress",value:function(){return this.getRenderedTileCount()/this._tilingConfiguration.totalTileCount}},{key:"getTileCoordinates",value:function(e){return{rowIndex:Math.floor(e/this._tilingConfiguration.numHorizontalTiles),columnIndex:Math.floor(e%this._tilingConfiguration.numHorizontalTiles)}}},{key:"getOriginalInputCoordinatesForTileAtIndex",value:function(e){var t=this._tilingConfiguration,n=t.tileEdgeLength,i=t.overlappingFactor,r=t.fittedInputDimensions,a=t.numHorizontalTiles,s=t.numVerticalTiles,l=this.getTileCoordinates(e),u=l.rowIndex,c=l.columnIndex,f=Math.ceil(u*(n*(1-i))),h=Math.ceil(c*(n*(1-i))),p=this._originalInputDimensions.x/r.x,d=this._originalInputDimensions.y/r.y,_=Math.ceil(f*d),g=Math.ceil(h*p),m=Math.ceil(n*d),y=Math.ceil(n*p);return u===s-1&&_+m<this._originalInputDimensions.y&&(_+=this._originalInputDimensions.y-(_+m)),c===a-1&&g+y<this._originalInputDimensions.x&&(g+=this._originalInputDimensions.x-(g+y)),new o.Math.Rectangle(g,_,y,m)}},{key:"hasRenderedAllTiles",value:function(){return!(!this._tilingConfiguration||!this._renderedTileIndices)&&this._tilingConfiguration.totalTileCount-this._renderedTileIndices.length==0}},{key:"markTileAsRendered",value:function(){null!==this._nextTileIndex&&(!this._renderedTileIndices.indexOf(this._nextTileIndex)>-1&&this._renderedTileIndices.push(this._nextTileIndex),this._nextTileIndex=null)}},{key:"_calculateTilingConfiguration",value:function(e,t,n){var i=Math.ceil((1-n)*t),r=Math.ceil((e.x-t)/i)*i,a=t+r,s=Math.ceil((e.y-t)/i)*i,l=t+s,u=new o.Math.Vector2(a,l),c=Math.max(1,1+Math.round(s/i)),f=Math.max(1,1+Math.round(r/i));return{tileEdgeLength:t,overlappingFactor:n,fittedInputDimensions:u,numVerticalTiles:c,numHorizontalTiles:f,totalTileCount:c*f}}},{key:"getBlendLeftTopRightBottomForTile",value:function(e){var t=this.getTileCoordinates(e),n=t.rowIndex,i=t.columnIndex,r=this._tilingConfiguration,o=r.numVerticalTiles;return[0!==i?1:0,0!==n?1:0,i!==r.numHorizontalTiles-1?1:0,n!==o-1?1:0]}}]),e}();t.a=u},function(e,t,n){var i=n(188),r=n(191),o=n(190),a=n(196),s=n(473),l=n(186),u=n(189),c=n(194),f=n(132),h=n(192),p=n(474),d=n(195),_=n(197),g=n(13),m=n(185),y=n(193),v={AddFilter:i.a,Conv2DDepthwiseFilter:r.a,Conv2DFilter:o.a,EdgePadFilter:a.a,EncodeFloatFilter:s.a,FeatheredMaskingFilter:l.a,FinalizeStyleFilter:u.a,InstanceNormReluFilter:c.a,PackRGBAFilter:f.a,ReduceSumFilter:h.a,ReflectionPadFilter:p.a,ResizeBilinearFilter:d.a,SharpenFilter:_.a,TensorFilter:g.b,UnpackRGBAFilter:m.a,VariancePreparationFilter:y.a};t.a=v},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){return p(this,t),d(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),h(t,[{key:"_calculateOutputShape",value:function(){return this._options.inputs[0].logicalShape}},{key:"_getTensorOperationSource",value:function(){var e="\nconst float FLOAT_MAX = 1.70141184e38;\nconst float FLOAT_MIN = 1.17549435e-38;\n\nlowp vec4 encode_float(highp float v) {\n  if (isNaN(v)) {\n    return vec4(255, 255, 255, 255);\n  }\n\n  highp float av = abs(v);\n\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  highp float e = floor(log2(av));\n  highp float m = exp2(fract(log2(av))) - 1.0;\n\n  c[2] = floor(128.0 * m);\n  m -= c[2] / 128.0;\n  c[1] = floor(32768.0 * m);\n  m -= c[1] / 32768.0;\n  c[0] = floor(8388608.0 * m);\n\n  highp float ebias = e + 127.0;\n  c[3] = floor(ebias / 2.0);\n  ebias -= c[3] * 2.0;\n  c[2] += floor(ebias) * 128.0;\n\n  c[3] += 128.0 * step(0.0, -v);\n\n  return c / 255.0;\n}\n    ";return 4===this._options.inputs[0].logicalShape.length?e+="\nvoid main ()\n{\n  ivec4 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n  gl_FragColor = encode_float(xVal);\n}\n    ":e+="\nvoid main ()\n{\n  ivec2 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y);\n  gl_FragColor = encode_float(xVal);\n}\n    ",e}}]),t}(f.b);t.a=_},function(e,t,n){var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(13),d=n(4),_=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){return g(this,t),m(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var t=this.getInputs()[0].logicalShape;if(e.length!==t.length)throw new Error("Not enough or too many paddings for input shape "+t);return e.map((function(e,n){return e[0]+t[n]+e[1]}))}},{key:"_getTensorOperationSource",value:function(){var e=this.getInputs()[0].logicalShape.length,t=this._options.paddings.map((function(e){return e[0]})).join(","),n=this._options.paddings.map((function(e){return e[1]})).join(","),i="\n      int reflectedIndexInInputForPadBefore(int coord, int start) {\n        return int(abs(float(start - coord)));\n      }\n\n      int reflectedIndexInInputForPadAfter(int coord, int start,\n        int length, int afterPad) {\n        int indexInPad = coord - start - length;\n        int index = length - indexInPad - 2;\n        return index;\n      }\n    ",r="\n      ivec2 get2DCoordinates(\n        ivec2 outC,\n        ivec2 coords,\n        ivec2 start,\n        ivec2 end,\n        ivec2 afterPad,\n        int height,\n        int width) {\n\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          // Select non-padding rows\n          if (outC.x >= start.x && outC.x < start.x + height) {\n            // Select before pad columns\n            if (outC.y < start.y) {\n              int yIndex =\n                reflectedIndexInInputForPadBefore(outC.y, start.y);\n              return ivec2(coords.x, yIndex);\n            // Select after pad columns\n            } else if (outC.y >= start.y + width) {\n              int yIndex =\n                reflectedIndexInInputForPadAfter(outC.y, start.y,\n                  width, afterPad.y);\n              return ivec2(coords.x, yIndex);\n            }\n\n          // Select top and bottom rows, but only non-padding columns\n          } else if (outC.y >= start.y && outC.y < start.y + height) {\n            // Select top padding rows\n            if (outC.x < start.x) {\n              int xIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              return ivec2(xIndex, coords.y);\n            // Select bottom padding rows\n            } else {\n              int xIndex =\n                reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                  afterPad.x);\n              return ivec2(xIndex, coords.y);\n            }\n\n          // Handle diagonal corner cases\n          } else if (outC.x < start.x && outC.y < end.y) { // Top Left\n            ivec2 index = outC - start;\n            vec2 absIndex = vec2(abs(float(index.x)), abs(float(index.y)));\n            return ivec2(int(absIndex.x), int(absIndex.y));\n          } else if (outC.x < start.x && outC.y >= end.y) { // Top Right\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            int targetRow =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y < end.y) { // Bottom Left\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadBefore(outC.y, start.y);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y >= end.y) { // Bottom Right\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            return ivec2(targetRow, targetCol);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ";return 1===e?"\n        int start = "+t+";\n        int end = start + x_shape;\n        int width = x_shape[0];\n        int afterPad = "+n+";\n\n        "+i+"\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            int index = reflectedIndexInInputForPadBefore(outC, start);\n            setOutput(getX(index));\n          } else if (outC >= end) {\n            int index =\n            reflectedIndexInInputForPadAfter(outC, start, width, afterPad);\n            setOutput(getX(index));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ":2===e?"\n        ivec2 start = ivec2("+t+");\n        ivec2 end = start + x_shape;\n        ivec2 afterPad = ivec2("+n+");\n        int height = x_shape[0];\n        int width = x_shape[1];\n\n        "+i+"\n        "+r+"\n\n        void main() {\n          ivec2 outC = getOutputCoords();\n          ivec2 coords = outC - start;\n          ivec2 coordsInSrcVec = get2DCoordinates(\n            outC,\n            coords,\n            start,\n            end,\n            afterPad,\n            height,\n            width\n          );\n          setOutput(getX(coordsInSrcVec.x, coordsInSrcVec.y));\n        }\n      ":4===e?"\n        ivec4 start = ivec4("+t+");\n        ivec4 end = start + x_shape;\n        ivec4 afterPad = ivec4("+n+");\n        int length = x_shape[0];\n\n        "+i+"\n        "+r+"\n        \n      ivec3 get3DCoordinates(\n        ivec3 outC,\n        ivec3 coords,\n        ivec3 start,\n        ivec3 end,\n        ivec3 afterPad,\n        int length,\n        int height,\n        int width) {\n        if (any(lessThan(outC, start))\n          || any(greaterThanEqual(outC, end))) {\n\n          // Calculate the current positions inner indices in the original\n          // input tensor\n          ivec2 innerIndices = get2DCoordinates(\n            ivec2(outC.y, outC.z),\n            ivec2(coords.y, coords.z),\n            ivec2(start.y, start.z),\n            ivec2(end.y, end.z),\n            ivec2(afterPad.y, afterPad.z),\n            height,\n            width\n          );\n\n          if (outC.x < start.x) {\n            int outerIndex =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else if (outC.x >= end.x) {\n            int outerIndex = reflectedIndexInInputForPadAfter(\n              outC.x, start.x, length, afterPad.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else {\n            return ivec3(coords.x, innerIndices.x, innerIndices.y);\n          }\n        } else {\n          return coords;\n        }\n      }\n    \n\n        void main() {\n          ivec4 outC = getOutputCoords();\n          ivec4 coords = outC - start; // Coords in input\n\n          if (any(lessThan(outC, start))\n              || any(greaterThanEqual(outC, end))) {\n\n            ivec3 innerIndices = get3DCoordinates(\n              ivec3(outC.y, outC.z, outC.w),\n              ivec3(coords.y, coords.z, coords.w),\n              ivec3(start.y, start.z, start.w),\n              ivec3(end.y, end.z, end.w),\n              ivec3(afterPad.y, afterPad.z, afterPad.w),\n              x_shape[1],\n              x_shape[2],\n              x_shape[3]\n            );\n\n            if (outC.x < start.x) {\n              int outerIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              setOutput(getX(\n                  outerIndex,\n                  innerIndices.x,\n                  innerIndices.y,\n                  innerIndices.z\n                ));\n            } else if (outC.x >= end.x) {\n              int outerIndex = reflectedIndexInInputForPadAfter(\n                outC.x, start.x, length, afterPad.x);\n              setOutput(getX(\n                outerIndex,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z\n              ));\n            } else {\n              setOutput(getX(\n                coords.x,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z));\n            }\n          } else {\n            setOutput(getX(coords.x, coords.y, coords.z, coords.w));\n          }\n        }\n      ":void 0}}]),t}(p.b);y.prototype.availableOptions=r()({paddings:{type:d.OptionType.ARRAY,required:!0}},p.b.prototype.availableOptions),t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=f.Math.Vector2,m=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._flipContainer=new f.Engine.Container,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_render",value:function(e){var t=this._options,n=t.position,i=t.rotation,r=t.scale,o=t.pivot,a=t.outputResolution,s=this._sdk.getTextureScale(),l=a.clone().multiply(s).ceil();return this._renderTexture.resizeTo(l),this._sprite.setRotation(i),this._sprite.setPosition(n),this._sprite.setPivot(o),this._sprite.setScale(r),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}}]),t}(f.Operation);m.identifier="output",m.prototype.availableOptions={position:{type:f.OptionType.VECTOR2,default:new g(0,0)},rotation:{type:f.OptionType.NUMBER,default:0},scale:{type:f.OptionType.VECTOR2,default:new g(1,1)},pivot:{type:f.OptionType.VECTOR2,default:new g(0,0)},outputResolution:{type:f.OptionType.VECTOR2,default:new g(100,100)}},h.a.Operations.OutputOperation=m,t.a=m},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(1),c=n.n(u),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}f.Math.Vector2;var g=function(e){function t(){var e;d(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._flipContainer=new f.Engine.Container,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),p(t,[{key:"_render",value:function(e){var t=this._options,n=(t.outputResolution,t.flipHorizontally),i=t.flipVertically;if(n||i){var r=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(r):(this._flipRenderTexture=new f.Engine.RenderTexture(this._sdk.getRenderer(),r.x,r.y),this._flipSprite=new f.Engine.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));var o=n?-1:1,a=i?-1:1;this._flipSprite.setScale(o,a),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(r.x*(1-o)*.5,r.y*(1-a)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return f.Promise.resolve()}}]),t}(f.Operation);g.identifier="flip",g.prototype.availableOptions={flipHorizontally:{type:f.OptionType.BOOLEAN,default:!1},flipVertically:{type:f.OptionType.BOOLEAN,default:!1}},h.a.Operations.FlipOperation=g,t.a=g},function(e,t,n){t.a={getIEVersion:function(){var e=navigator,t=e.userAgent,n=e.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==t.indexOf("Trident")&&t.match(/rv:([0-9]+)/i)[1]},isIE10:function(){var e=this.getIEVersion();return!1!==e&&10===e},isIE11:function(){var e=this.getIEVersion();return!1!==e&&11===e},isIElte:function(e){var t=this.getIEVersion();return!1!==t&&t<=e}}},function(e,t){e.exports={"pesdk.adjustments.button.reset":"editor.controls.adjustments.reset","pesdk.adjustments.text.brightness":"editor.controls.adjustments.items.brightness","pesdk.adjustments.text.clarity":"editor.controls.adjustments.items.clarity","pesdk.adjustments.text.contrast":"editor.controls.adjustments.items.contrast","pesdk.adjustments.text.exposure":"editor.controls.adjustments.items.exposure","pesdk.adjustments.text.gamma":"editor.controls.adjustments.items.gamma","pesdk.adjustments.text.highlights":"editor.controls.adjustments.items.highlights","pesdk.adjustments.text.saturation":"editor.controls.adjustments.items.saturation","pesdk.adjustments.text.shadows":"editor.controls.adjustments.items.shadows","pesdk.adjustments.title.basics":"editor.controls.adjustments.sections.basics","pesdk.adjustments.title.name":"editor.controls.adjustments.title","pesdk.adjustments.title.refinements":"editor.controls.adjustments.sections.refinements","pesdk.brush.title.hardness":"editor.controls.brush.hardness","pesdk.brush.title.name":"editor.controls.brush.title","pesdk.brush.title.settings":"editor.controls.brush.settings","pesdk.brush.title.width":"editor.controls.brush.width","pesdk.common.button.cancel":"editor.cancel","pesdk.common.text.loading":"loading.loading","pesdk.common.title.error":"errors.title","pesdk.editor.button.discardChangesWarningDiscard":"warnings.discardChanges.buttons.discard","pesdk.editor.button.discardChangesWarningKeep":"warnings.discardChanges.buttons.keep","pesdk.editor.button.export":"editor.export","pesdk.editor.button.newImageChangesLostWarningNo":"warnings.newImage_changesLost.buttons.no","pesdk.editor.button.newImageChangesLostWarningYes":"warnings.newImage_changesLost.buttons.yes","pesdk.editor.text.discardChangesWarning":"warnings.discardChanges.text","pesdk.editor.text.fontLoadingError":"errors.fontLoadingError.text","pesdk.editor.text.imageLoadingError":"errors.imageLoadingError.text","pesdk.editor.text.imageResizedWarning_maxDimensions":"warnings.imageResized_maxDimensions.text","pesdk.editor.text.imageResizedWarning_maxMegaPixels":"warnings.imageResized_maxMegaPixels.text","pesdk.editor.text.invalidFileTypeError":"errors.invalidFileType.text","pesdk.editor.text.loadingFonts":"loading.fonts","pesdk.editor.text.newImageChangesLostWarning":"warnings.newImage_changesLost.text","pesdk.editor.text.renderingError":"errors.renderingError.text","pesdk.editor.text.resizing":"loading.resizing","pesdk.editor.text.webcamUnavailableError":"errors.webcamUnavailable.text","pesdk.editor.title.discardChangesWarning":"warnings.discardChanges.title","pesdk.editor.title.fontLoadingError":"errors.fontLoadingError.title","pesdk.editor.title.imageResizedWarning_maxDimensions":"warnings.imageResized_maxDimensions.title","pesdk.editor.title.imageResizedWarning_maxMegaPixels":"warnings.imageResized_maxMegaPixels.title","pesdk.editor.title.newImageChangesLostWarning":"warnings.newImage_changesLost.title","pesdk.filter.asset.identity":"editor.controls.filter.filters.identity","pesdk.filter.asset.imgly_lut_ad1920":"editor.controls.filter.filters.imgly_lut_ad1920","pesdk.filter.asset.imgly_lut_ancient":"editor.controls.filter.filters.imgly_lut_ancient","pesdk.filter.asset.imgly_lut_bleached":"editor.controls.filter.filters.imgly_lut_bleached","pesdk.filter.asset.imgly_lut_bleachedblue":"editor.controls.filter.filters.imgly_lut_bleachedblue","pesdk.filter.asset.imgly_lut_blues":"editor.controls.filter.filters.imgly_lut_blues","pesdk.filter.asset.imgly_lut_blueshadows":"editor.controls.filter.filters.imgly_lut_blueshadows","pesdk.filter.asset.imgly_lut_breeze":"editor.controls.filter.filters.imgly_lut_breeze","pesdk.filter.asset.imgly_lut_bw":"editor.controls.filter.filters.imgly_lut_bw","pesdk.filter.asset.imgly_lut_celsius":"editor.controls.filter.filters.imgly_lut_celsius","pesdk.filter.asset.imgly_lut_chest":"editor.controls.filter.filters.imgly_lut_chest","pesdk.filter.asset.imgly_lut_classic":"editor.controls.filter.filters.imgly_lut_classic","pesdk.filter.asset.imgly_lut_colorful":"editor.controls.filter.filters.imgly_lut_colorful","pesdk.filter.asset.imgly_lut_cool":"editor.controls.filter.filters.imgly_lut_cool","pesdk.filter.asset.imgly_lut_cottoncandy":"editor.controls.filter.filters.imgly_lut_cottoncandy","pesdk.filter.asset.imgly_lut_creamy":"editor.controls.filter.filters.imgly_lut_creamy","pesdk.filter.asset.imgly_lut_eighties":"editor.controls.filter.filters.imgly_lut_eighties","pesdk.filter.asset.imgly_lut_elder":"editor.controls.filter.filters.imgly_lut_elder","pesdk.filter.asset.imgly_lut_evening":"editor.controls.filter.filters.imgly_lut_evening","pesdk.filter.asset.imgly_lut_fall":"editor.controls.filter.filters.imgly_lut_fall","pesdk.filter.asset.imgly_lut_fixie":"editor.controls.filter.filters.imgly_lut_fixie","pesdk.filter.asset.imgly_lut_food":"editor.controls.filter.filters.imgly_lut_food","pesdk.filter.asset.imgly_lut_fridge":"editor.controls.filter.filters.imgly_lut_fridge","pesdk.filter.asset.imgly_lut_front":"editor.controls.filter.filters.imgly_lut_front","pesdk.filter.asset.imgly_lut_glam":"editor.controls.filter.filters.imgly_lut_glam","pesdk.filter.asset.imgly_lut_gobblin":"editor.controls.filter.filters.imgly_lut_gobblin","pesdk.filter.asset.imgly_lut_highcarb":"editor.controls.filter.filters.imgly_lut_highcarb","pesdk.filter.asset.imgly_lut_highcontrast":"editor.controls.filter.filters.imgly_lut_highcontrast","pesdk.filter.asset.imgly_lut_k1":"editor.controls.filter.filters.imgly_lut_k1","pesdk.filter.asset.imgly_lut_k2":"editor.controls.filter.filters.imgly_lut_k2","pesdk.filter.asset.imgly_lut_k6":"editor.controls.filter.filters.imgly_lut_k6","pesdk.filter.asset.imgly_lut_kdynamic":"editor.controls.filter.filters.imgly_lut_kdynamic","pesdk.filter.asset.imgly_lut_keen":"editor.controls.filter.filters.imgly_lut_keen","pesdk.filter.asset.imgly_lut_lenin":"editor.controls.filter.filters.imgly_lut_lenin","pesdk.filter.asset.imgly_lut_litho":"editor.controls.filter.filters.imgly_lut_litho","pesdk.filter.asset.imgly_lut_lomo100":"editor.controls.filter.filters.imgly_lut_lomo100","pesdk.filter.asset.imgly_lut_lucid":"editor.controls.filter.filters.imgly_lut_lucid","pesdk.filter.asset.imgly_lut_mellow":"editor.controls.filter.filters.imgly_lut_mellow","pesdk.filter.asset.imgly_lut_neat":"editor.controls.filter.filters.imgly_lut_neat","pesdk.filter.asset.imgly_lut_nogreen":"editor.controls.filter.filters.imgly_lut_nogreen","pesdk.filter.asset.imgly_lut_orchid":"editor.controls.filter.filters.imgly_lut_orchid","pesdk.filter.asset.imgly_lut_pale":"editor.controls.filter.filters.imgly_lut_pale","pesdk.filter.asset.imgly_lut_pitched":"editor.controls.filter.filters.imgly_lut_pitched","pesdk.filter.asset.imgly_lut_plate":"editor.controls.filter.filters.imgly_lut_plate","pesdk.filter.asset.imgly_lut_pola669":"editor.controls.filter.filters.imgly_lut_pola669","pesdk.filter.asset.imgly_lut_polasx":"editor.controls.filter.filters.imgly_lut_polasx","pesdk.filter.asset.imgly_lut_pro400":"editor.controls.filter.filters.imgly_lut_pro400","pesdk.filter.asset.imgly_lut_quozi":"editor.controls.filter.filters.imgly_lut_quozi","pesdk.filter.asset.imgly_lut_sepiahigh":"editor.controls.filter.filters.imgly_lut_sepiahigh","pesdk.filter.asset.imgly_lut_settled":"editor.controls.filter.filters.imgly_lut_settled","pesdk.filter.asset.imgly_lut_seventies":"editor.controls.filter.filters.imgly_lut_seventies","pesdk.filter.asset.imgly_lut_sin":"editor.controls.filter.filters.imgly_lut_sin","pesdk.filter.asset.imgly_lut_soft":"editor.controls.filter.filters.imgly_lut_soft","pesdk.filter.asset.imgly_lut_steel":"editor.controls.filter.filters.imgly_lut_steel","pesdk.filter.asset.imgly_lut_summer":"editor.controls.filter.filters.imgly_lut_summer","pesdk.filter.asset.imgly_lut_sunset":"editor.controls.filter.filters.imgly_lut_sunset","pesdk.filter.asset.imgly_lut_tender":"editor.controls.filter.filters.imgly_lut_tender","pesdk.filter.asset.imgly_lut_texas":"editor.controls.filter.filters.imgly_lut_texas","pesdk.filter.asset.imgly_lut_twilight":"editor.controls.filter.filters.imgly_lut_twilight","pesdk.filter.asset.imgly_lut_winter":"editor.controls.filter.filters.imgly_lut_winter","pesdk.filter.asset.imgly_lut_x400":"editor.controls.filter.filters.imgly_lut_x400","pesdk.filter.title.name":"editor.controls.filter.title","pesdk.focus.button.gaussian":"editor.controls.focus.items.gaussian","pesdk.focus.button.linear":"editor.controls.focus.items.linear","pesdk.focus.button.mirrored":"editor.controls.focus.items.mirrored","pesdk.focus.button.none":"editor.controls.focus.items.none","pesdk.focus.button.radial":"editor.controls.focus.items.radial","pesdk.focus.title.name":"editor.controls.focus.title","pesdk.frame.asset.imgly_frame_art_decor":"editor.controls.frame.frames.imgly_frame_art_decor","pesdk.frame.asset.imgly_frame_black_passepartout":"editor.controls.frame.frames.imgly_frame_black_passepartout","pesdk.frame.asset.imgly_frame_dia":"editor.controls.frame.frames.imgly_frame_dia","pesdk.frame.asset.imgly_frame_lowpoly_shadow":"editor.controls.frame.frames.imgly_frame_lowpoly_shadow","pesdk.frame.asset.imgly_frame_wood_passepartout":"editor.controls.frame.frames.imgly_frame_wood_passepartout","pesdk.frame.button.fill":"editor.controls.frame.fill","pesdk.frame.button.replace":"editor.controls.frame.replace","pesdk.frame.title.name":"editor.controls.frame.title","pesdk.frame.title.opacity":"editor.controls.frame.opacity","pesdk.frame.title.width":"editor.controls.frame.width","pesdk.library.button.fileDropZone":"editor.controls.library.fileDropZone","pesdk.library.button.fileDropZoneHovered":"editor.controls.library.fileDropZoneHovered","pesdk.library.placeholder.search":"editor.controls.library.search","pesdk.library.text.noResults":"editor.controls.library.noResults","pesdk.library.title.name":"editor.controls.library.title","pesdk.overlay.asset.imgly_overlay_bokeh":"editor.controls.overlay.overlays.imgly_overlay_bokeh","pesdk.overlay.asset.imgly_overlay_chop":"editor.controls.overlay.overlays.imgly_overlay_chop","pesdk.overlay.asset.imgly_overlay_clouds":"editor.controls.overlay.overlays.imgly_overlay_clouds","pesdk.overlay.asset.imgly_overlay_golden":"editor.controls.overlay.overlays.imgly_overlay_golden","pesdk.overlay.asset.imgly_overlay_grain":"editor.controls.overlay.overlays.imgly_overlay_grain","pesdk.overlay.asset.imgly_overlay_hearts":"editor.controls.overlay.overlays.imgly_overlay_hearts","pesdk.overlay.asset.imgly_overlay_lightleak1":"editor.controls.overlay.overlays.imgly_overlay_lightleak1","pesdk.overlay.asset.imgly_overlay_lightleak2":"editor.controls.overlay.overlays.imgly_overlay_lightleak2","pesdk.overlay.asset.imgly_overlay_metal":"editor.controls.overlay.overlays.imgly_overlay_metal","pesdk.overlay.asset.imgly_overlay_mosaic":"editor.controls.overlay.overlays.imgly_overlay_mosaic","pesdk.overlay.asset.imgly_overlay_painting":"editor.controls.overlay.overlays.imgly_overlay_painting","pesdk.overlay.asset.imgly_overlay_paper":"editor.controls.overlay.overlays.imgly_overlay_paper","pesdk.overlay.asset.imgly_overlay_rain":"editor.controls.overlay.overlays.imgly_overlay_rain","pesdk.overlay.asset.imgly_overlay_vintage":"editor.controls.overlay.overlays.imgly_overlay_vintage","pesdk.overlay.asset.imgly_overlay_wall1":"editor.controls.overlay.overlays.imgly_overlay_wall1","pesdk.overlay.asset.imgly_overlay_wall2":"editor.controls.overlay.overlays.imgly_overlay_wall2","pesdk.overlay.asset.imgly_overlay_wood":"editor.controls.overlay.overlays.imgly_overlay_wood","pesdk.overlay.button.none":"editor.controls.overlay.overlays.none","pesdk.overlay.title.blending":"editor.controls.overlay.blendModes.blending","pesdk.overlay.title.colorBurn":"editor.controls.overlay.blendModes.colorBurn","pesdk.overlay.title.darken":"editor.controls.overlay.blendModes.darken","pesdk.overlay.title.hardLight":"editor.controls.overlay.blendModes.hardLight","pesdk.overlay.title.lighten":"editor.controls.overlay.blendModes.lighten","pesdk.overlay.title.multiply":"editor.controls.overlay.blendModes.multiply","pesdk.overlay.title.name":"editor.controls.overlay.title","pesdk.overlay.title.none":"editor.controls.overlay.blendModes.none","pesdk.overlay.title.normal":"editor.controls.overlay.blendModes.normal","pesdk.overlay.title.overlay":"editor.controls.overlay.blendModes.overlay","pesdk.overlay.title.screen":"editor.controls.overlay.blendModes.screen","pesdk.overlay.title.softLight":"editor.controls.overlay.blendModes.softLight","pesdk.sticker.asset.imgly_sticker_emoticons":"editor.controls.sticker.stickerCategories.imgly_sticker_emoticons","pesdk.sticker.asset.imgly_sticker_emoticons_alien":"editor.controls.sticker.stickers.imgly_sticker_emoticons_alien","pesdk.sticker.asset.imgly_sticker_emoticons_angel":"editor.controls.sticker.stickers.imgly_sticker_emoticons_angel","pesdk.sticker.asset.imgly_sticker_emoticons_angry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_angry","pesdk.sticker.asset.imgly_sticker_emoticons_anxious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_anxious","pesdk.sticker.asset.imgly_sticker_emoticons_asleep":"editor.controls.sticker.stickers.imgly_sticker_emoticons_asleep","pesdk.sticker.asset.imgly_sticker_emoticons_attention":"editor.controls.sticker.stickers.imgly_sticker_emoticons_attention","pesdk.sticker.asset.imgly_sticker_emoticons_baby_chicken":"editor.controls.sticker.stickers.imgly_sticker_emoticons_baby_chicken","pesdk.sticker.asset.imgly_sticker_emoticons_batman":"editor.controls.sticker.stickers.imgly_sticker_emoticons_batman","pesdk.sticker.asset.imgly_sticker_emoticons_beer":"editor.controls.sticker.stickers.imgly_sticker_emoticons_beer","pesdk.sticker.asset.imgly_sticker_emoticons_black":"editor.controls.sticker.stickers.imgly_sticker_emoticons_black","pesdk.sticker.asset.imgly_sticker_emoticons_blue":"editor.controls.sticker.stickers.imgly_sticker_emoticons_blue","pesdk.sticker.asset.imgly_sticker_emoticons_blush":"editor.controls.sticker.stickers.imgly_sticker_emoticons_blush","pesdk.sticker.asset.imgly_sticker_emoticons_boxer":"editor.controls.sticker.stickers.imgly_sticker_emoticons_boxer","pesdk.sticker.asset.imgly_sticker_emoticons_business":"editor.controls.sticker.stickers.imgly_sticker_emoticons_business","pesdk.sticker.asset.imgly_sticker_emoticons_chicken":"editor.controls.sticker.stickers.imgly_sticker_emoticons_chicken","pesdk.sticker.asset.imgly_sticker_emoticons_cool":"editor.controls.sticker.stickers.imgly_sticker_emoticons_cool","pesdk.sticker.asset.imgly_sticker_emoticons_cry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_cry","pesdk.sticker.asset.imgly_sticker_emoticons_deceased":"editor.controls.sticker.stickers.imgly_sticker_emoticons_deceased","pesdk.sticker.asset.imgly_sticker_emoticons_devil":"editor.controls.sticker.stickers.imgly_sticker_emoticons_devil","pesdk.sticker.asset.imgly_sticker_emoticons_duckface":"editor.controls.sticker.stickers.imgly_sticker_emoticons_duckface","pesdk.sticker.asset.imgly_sticker_emoticons_furious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_furious","pesdk.sticker.asset.imgly_sticker_emoticons_grin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_grin","pesdk.sticker.asset.imgly_sticker_emoticons_guitar":"editor.controls.sticker.stickers.imgly_sticker_emoticons_guitar","pesdk.sticker.asset.imgly_sticker_emoticons_harry_potter":"editor.controls.sticker.stickers.imgly_sticker_emoticons_harry_potter","pesdk.sticker.asset.imgly_sticker_emoticons_hippie":"editor.controls.sticker.stickers.imgly_sticker_emoticons_hippie","pesdk.sticker.asset.imgly_sticker_emoticons_hitman":"editor.controls.sticker.stickers.imgly_sticker_emoticons_hitman","pesdk.sticker.asset.imgly_sticker_emoticons_humourous":"editor.controls.sticker.stickers.imgly_sticker_emoticons_humourous","pesdk.sticker.asset.imgly_sticker_emoticons_idea":"editor.controls.sticker.stickers.imgly_sticker_emoticons_idea","pesdk.sticker.asset.imgly_sticker_emoticons_impatient":"editor.controls.sticker.stickers.imgly_sticker_emoticons_impatient","pesdk.sticker.asset.imgly_sticker_emoticons_kiss":"editor.controls.sticker.stickers.imgly_sticker_emoticons_kiss","pesdk.sticker.asset.imgly_sticker_emoticons_kisses":"editor.controls.sticker.stickers.imgly_sticker_emoticons_kisses","pesdk.sticker.asset.imgly_sticker_emoticons_laugh":"editor.controls.sticker.stickers.imgly_sticker_emoticons_laugh","pesdk.sticker.asset.imgly_sticker_emoticons_loud_cry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_loud_cry","pesdk.sticker.asset.imgly_sticker_emoticons_loving":"editor.controls.sticker.stickers.imgly_sticker_emoticons_loving","pesdk.sticker.asset.imgly_sticker_emoticons_masked":"editor.controls.sticker.stickers.imgly_sticker_emoticons_masked","pesdk.sticker.asset.imgly_sticker_emoticons_music":"editor.controls.sticker.stickers.imgly_sticker_emoticons_music","pesdk.sticker.asset.imgly_sticker_emoticons_nerd":"editor.controls.sticker.stickers.imgly_sticker_emoticons_nerd","pesdk.sticker.asset.imgly_sticker_emoticons_ninja":"editor.controls.sticker.stickers.imgly_sticker_emoticons_ninja","pesdk.sticker.asset.imgly_sticker_emoticons_not_speaking_to_you":"editor.controls.sticker.stickers.imgly_sticker_emoticons_not_speaking_to_you","pesdk.sticker.asset.imgly_sticker_emoticons_pig":"editor.controls.sticker.stickers.imgly_sticker_emoticons_pig","pesdk.sticker.asset.imgly_sticker_emoticons_pumpkin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_pumpkin","pesdk.sticker.asset.imgly_sticker_emoticons_question":"editor.controls.sticker.stickers.imgly_sticker_emoticons_question","pesdk.sticker.asset.imgly_sticker_emoticons_rabbit":"editor.controls.sticker.stickers.imgly_sticker_emoticons_rabbit","pesdk.sticker.asset.imgly_sticker_emoticons_sad":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sad","pesdk.sticker.asset.imgly_sticker_emoticons_sick":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sick","pesdk.sticker.asset.imgly_sticker_emoticons_skateboard":"editor.controls.sticker.stickers.imgly_sticker_emoticons_skateboard","pesdk.sticker.asset.imgly_sticker_emoticons_skull":"editor.controls.sticker.stickers.imgly_sticker_emoticons_skull","pesdk.sticker.asset.imgly_sticker_emoticons_sleepy":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sleepy","pesdk.sticker.asset.imgly_sticker_emoticons_smile":"editor.controls.sticker.stickers.imgly_sticker_emoticons_smile","pesdk.sticker.asset.imgly_sticker_emoticons_smoking":"editor.controls.sticker.stickers.imgly_sticker_emoticons_smoking","pesdk.sticker.asset.imgly_sticker_emoticons_sobbing":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sobbing","pesdk.sticker.asset.imgly_sticker_emoticons_star":"editor.controls.sticker.stickers.imgly_sticker_emoticons_star","pesdk.sticker.asset.imgly_sticker_emoticons_steaming_furious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_steaming_furious","pesdk.sticker.asset.imgly_sticker_emoticons_sunbathing":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sunbathing","pesdk.sticker.asset.imgly_sticker_emoticons_tired":"editor.controls.sticker.stickers.imgly_sticker_emoticons_tired","pesdk.sticker.asset.imgly_sticker_emoticons_tongue_out_wink":"editor.controls.sticker.stickers.imgly_sticker_emoticons_tongue_out_wink","pesdk.sticker.asset.imgly_sticker_emoticons_wave":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wave","pesdk.sticker.asset.imgly_sticker_emoticons_wide_grin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wide_grin","pesdk.sticker.asset.imgly_sticker_emoticons_wink":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wink","pesdk.sticker.asset.imgly_sticker_emoticons_wrestler":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wrestler","pesdk.sticker.asset.imgly_sticker_shapes":"editor.controls.sticker.stickerCategories.imgly_sticker_shapes","pesdk.sticker.asset.imgly_sticker_shapes_arrow_02":"editor.controls.sticker.stickers.imgly_sticker_shapes_arrow_02","pesdk.sticker.asset.imgly_sticker_shapes_arrow_03":"editor.controls.sticker.stickers.imgly_sticker_shapes_arrow_03","pesdk.sticker.asset.imgly_sticker_shapes_badge_01":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_01","pesdk.sticker.asset.imgly_sticker_shapes_badge_04":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_04","pesdk.sticker.asset.imgly_sticker_shapes_badge_06":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_06","pesdk.sticker.asset.imgly_sticker_shapes_badge_08":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_08","pesdk.sticker.asset.imgly_sticker_shapes_badge_11":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_11","pesdk.sticker.asset.imgly_sticker_shapes_badge_12":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_12","pesdk.sticker.asset.imgly_sticker_shapes_badge_13":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_13","pesdk.sticker.asset.imgly_sticker_shapes_badge_15":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_15","pesdk.sticker.asset.imgly_sticker_shapes_badge_18":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_18","pesdk.sticker.asset.imgly_sticker_shapes_badge_19":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_19","pesdk.sticker.asset.imgly_sticker_shapes_badge_20":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_20","pesdk.sticker.asset.imgly_sticker_shapes_badge_28":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_28","pesdk.sticker.asset.imgly_sticker_shapes_badge_32":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_32","pesdk.sticker.asset.imgly_sticker_shapes_badge_35":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_35","pesdk.sticker.asset.imgly_sticker_shapes_badge_36":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_36","pesdk.sticker.asset.imgly_sticker_shapes_spray_01":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_01","pesdk.sticker.asset.imgly_sticker_shapes_spray_03":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_03","pesdk.sticker.asset.imgly_sticker_shapes_spray_04":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_04","pesdk.sticker.button.fill":"editor.controls.sticker.fill","pesdk.sticker.button.new":"editor.controls.sticker.new","pesdk.sticker.button.replace":"editor.controls.sticker.replace","pesdk.sticker.text.stickerLoadingError":"errors.stickerLoadingError.text","pesdk.sticker.title.name":"editor.controls.sticker.title","pesdk.sticker.title.opacity":"editor.controls.sticker.opacity","pesdk.text.button.new":"editor.controls.text.new","pesdk.text.placeholder.defaultText":"editor.controls.text.defaultText","pesdk.text.title.background":"editor.controls.text.background","pesdk.text.title.font":"editor.controls.text.font","pesdk.text.title.line":"editor.controls.text.line","pesdk.text.title.name":"editor.controls.text.title","pesdk.text.title.size":"editor.controls.text.size","pesdk.text.title.spacing":"editor.controls.text.spacing","pesdk.textdesign.title.name":"editor.controls.textdesign.title","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_16-9":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_16-9","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_4-3":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_4-3","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_custom":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_custom","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_square":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_square","pesdk.transform.asset.imgly_transforms_common.name":"editor.controls.transform.ratios.imgly_transforms_common.name","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_ad":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_ad","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_cover":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_cover","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_post":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_post","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_profile":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_profile","pesdk.transform.asset.imgly_transforms_facebook.name":"editor.controls.transform.ratios.imgly_transforms_facebook.name","pesdk.transform.button.reset":"editor.controls.transform.reset","pesdk.transform.placeholder.height":"editor.controls.transform.dimensions.height","pesdk.transform.placeholder.width":"editor.controls.transform.dimensions.width","pesdk.transform.title.name":"editor.controls.transform.title"}},function(e,t,n){var i=n(480),r=n(481);t.a={EVENTS:i.a,DEFAULTS:r.a}},function(e,t,n){var i=n(6),r=n.n(i),o=n(90),a=(r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e})({},o.a,{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"});t.a=a},function(e,t,n){var i=n(31),r=n.n(i),o=n(482),a=n(483),s=n(484),l=[];void 0!==r.a.Operations.SpriteOperation&&l.push(r.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),t.a={TRANSFORM_RATIO_CATEGORIES:s.a,FONTS:o.a,TEXT_DESIGN_FONTS:a.a,BRUSHES:l}},function(e,t,n){t.a=[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}]},function(e,t,n){t.a=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Panton Caps",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:"lighter",fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_light_caps",fontWeight:"lighter",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_caps",fontWeight:800,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Summer Font",variations:[{identifier:"imgly_font_summer_font_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_summer_font_light.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]}]},function(e,t,n){t.a=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(153),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(486),_=n(41),g=n(488),m=n(198),y=n(489),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(this,t);var o=w(this,(t.__proto__||h()(t)).call(this));return o._ui=e,o._options=n,o._mediator=i,o._shallow=r,r||(o._initSDK(),o.operations=new y.a(o,o._sdk,o._mediator)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),v(t,[{key:"_initFonts",value:function(){var e=p.k.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new _.a(this._ui,e);var t=this._fontManager.getFonts(),n=this._ui.getFontLoader();n.setFonts(t),n.load()}},{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.reset();var n=null;n=this._sdk.parseExif(e),this._setImage(e,n),this._initWatermark()}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var e=this._options,t=e.logLevel,n=e.displayWelcomeMessage,i=e.debug,r=e.license,o=e.crossOrigin,a=this._options.editor,s=a.smoothDownscaling,l=a.smoothUpscaling,u=a.preferredRenderer,c=a.pixelRatio,f=a.transparent,h=a.clearColor,d=void 0;Array.isArray(h)?d=p.b.fromArray(h):"string"==typeof h?d=p.b.fromHex(h):h instanceof p.b&&(d=h.clone());var _={logLevel:t,debug:i,displayWelcomeMessage:n,pixelRatio:c,smoothDownscaling:s,smoothUpscaling:l,transparent:f,crossOrigin:o,clearColor:d,license:r};this._sdk=new p.j(u,_)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getCrossOrigin",value:function(){return p.k.getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(e)}},{key:"getOutputTextureDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(e)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(e)}},{key:"_setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}},{key:"_ensureImageIsResized",value:function(){var e=this,t=this._sdk.getImage(),n=this._sdk.getRenderer(),i=this.getMaxMegapixels(),r=i?1e6*i:null,o=n.getMaxDimensions(),a=new g.a(t,r,o);return!this._resizedImage&&a.needsResize()?a.resize().then((function(t){var n=t.canvas;return t.dimensions,t.reason,e._resizedImage=n,e._sdk.setImage(n),n})):p.h.resolve(t)}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then((function(n){var i=e._options.editor.export;return new d.a(e._sdk,i,t).export().then((function(t){return e.emit("export",t),e._mediator.emit(p.c.EVENTS.EXPORT,t,e),e._watermarkOperation&&(e._watermarkOperation.setEnabled(!0),e._sdk.render()),e._sdk.setAllOperationsToDirty(),t}))}))}},{key:"broadcastTransform",value:function(e,t){var n=this,i=new p.j.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach((function(e){var t=n.operations.get(e);t&&t.transform(i)}))}},{key:"broadcastFlip",value:function(e){var t=this;["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach((function(n){var i=t.operations.get(n);i&&i.flip(e)}))}},{key:"broadcastRotate",value:function(e){var t=this;["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach((function(n){var i=t.operations.get(n);i&&i.rotate(e)}))}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":n(490).default,"1.0.1":n(497).default,"2.0.0":n(498).default,"3.0.0":n(502).default,"3.1.0":n(508).default,"3.2.0":n(509).default,"3.4.0":n(510).default,"3.5.0":n(512).default,"3.6.0":n(513).default,"3.7.0":n(514).default,"3.8.0":n(515).default}}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.8.0",n=this._serializers[t];if(!n)return p.h.reject(new Error("No serializer for version "+t+" found."));var i=new n(this);return i.serialize(e)}},{key:"deserialize",value:function(e){var t=this._serializers[e.version];return t?new t(this).deserialize(e):p.h.reject(new Error("No serializer for version "+e.version+" found."))}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._options.editor.save;return this.serialize({image:t}).then((function(t){var i=c()(t,null,2);if(e){var r="data:text/json;charset=utf-8;base64,"+window.encodeURI(window.btoa(i));m.a.downloadDataURL(r,n.fileBasename)}return i}))}},{key:"reset",value:function(){this._sdk.reset(),this.operations.reset()}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._sdk.getImage()}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}}]),t}(p.d);t.a=k},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=n(198),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sdk=t,this._options=n,this._download=i}return s(e,[{key:"export",value:function(){var e=this,t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then((function(n){return e._download&&e._downloadData(t,n),n}))}},{key:"_downloadData",value:function(e,t){switch(e){case o.i.DATAURL:a.a.downloadDataURL(t,this._options.fileBasename);break;case o.i.MSBLOB:a.a.downloadMSBlob(t,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var e=this._options;return e.type===o.i.IMAGE&&this._download?o.m.supportsMSBlob()?o.i.MSBLOB:o.i.DATAURL:e.type}}]),e}();t.a=l},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(31);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.n(u);var h=function(e){function t(){return c(this,t),f(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.Configurable);t.a=h,h.prototype.availableOptions={fontFamily:{type:u.OptionType.STRING,required:!0},variations:{type:u.OptionType.ARRAY,required:!0}}},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=t,this._maxPixels=n,this._maxDimensions=i}return a(e,[{key:"needsResize",value:function(){var e=new o.n(this._image.width,this._image.height),t=e.x*e.y>this._maxPixels,n=null!==this._maxDimensions&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return t||n}},{key:"resize",value:function(){var e=this,t=null,n=null,i=this._maxDimensions;return new o.h((function(r,a){window.setTimeout((function(){var a=new o.n(e._image.width,e._image.height).clone();if(a.x*a.y>e._maxPixels&&(a.copy(e._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==i&&(a.x>i||a.y>i)){var s=Math.min(i/a.x,i/a.y);a.multiply(s),t="maxDimensions"}a.floor(),n=e._createResizedImageCanvas(a),r({canvas:n,dimensions:a,reason:t})}),1e3)}))}},{key:"_createResizedImageCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this._image,i=document.createElement("canvas");i.width=e.x,i.height=e.y;var r=e.clone().subtract(t).divide(2),o=i.getContext("2d");return o.drawImage(n,0,0,n.width,n.height,r.x,r.y,t.x,t.y),i}},{key:"_getDimensionsByMaxPixels",value:function(){var e=this._image,t=this._maxPixels,n=e.width/e.height,i=e.height/e.width;return new o.n(Math.sqrt(t*n),Math.sqrt(t*i)).floor()}}]),e}();t.a=s},function(e,t,n){var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),l=n.n(s),u=n(9),c="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._sdk=n,this._mediator=i,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return f(e,[{key:"exists",value:function(e){return!!this._map[e]}},{key:"add",value:function(e){var t=this,n=e.constructor.identifier;e.on("update",(function(){t._mediator.emit(u.c.EVENTS.OPERATION_UPDATED,e)}));var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `"+n+"` does not appear in `operationsOrder`");this._stack.set(i,e),this._map[n]=e,this._mediator.emit(u.c.EVENTS.OPERATION_CREATED,e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===(void 0===e?"undefined":c(e))?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(n),delete this._map[n];var r=i.map((function(e){return e.constructor.identifier})).indexOf(n);if(-1!==r){this._stack.removeAt(r);for(var o=r+1;o<i.length;o++){var a=i[o];a&&a.setDirty(!0)}t&&this._mediator.emit(u.c.EVENTS.OPERATION_REMOVED,e)}}},{key:"get",value:function(e){return this._map[e]}},{key:"getOrCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[e]){var n=this._map[e];return n.set(t,!1),n}var i=this._available[e],r=new i(this._sdk,t);return this.add(r),r}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var e=this,t=this._stack.getStack().slice();this._stack.clear(),t.forEach((function(t){e.add(t)}))}}]),e}();t.a=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(200),a=n(201),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="1.0.0"},function(e,t,n){var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assetsByGroupId={}}return o(e,[{key:"addAsset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assetsByGroupId[e]?n?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}},{key:"setAssets",value:function(e,t){this._assetsByGroupId[e]=t}},{key:"getAssets",value:function(e){return this._assetsByGroupId[e]=this._assetsByGroupId[e]||[],this._assetsByGroupId[e]}}]),e}();t.a=a},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(o.c.DEFAULTS.BRUSHES);var i=this._options,r=i.brushes,a=i.replaceBrushes,s=i.availableBrushes;this._options.brushes&&this._addBrushes(r,a),s&&(this._brushes=this._brushes.filter((function(e){return-1!==s.indexOf(e.identifier)})))}return a(e,[{key:"_addBrushes",value:function(e,t){var n=this;t&&(this._brushes=[],this._brushesById={}),e.forEach((function(e){n._brushes.push(e),n._brushesById[e.identifier]=e}))}},{key:"getBrushByIdentifier",value:function(e){return this._brushesById[e]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(203),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m={italic:"i"},y=function(e){function t(){return _(this,t),g(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family="+e,document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_getFamiliesString",value:function(){var e={};this._fonts.forEach((function(t){var n=t.getFontFamily(),i=t.getFontStyle(),r=t.getFontWeight();e[n]=e[n]||[],void 0!==r?e[n].push(""+r+(m[i]||"")):e[n].push(400)}));var t=[];for(var n in e){var i=e[n],r=i.length?":"+i.join(","):"",o=n.replace(" ","+")+r;t.push(o)}return t.join("|")}}]),t}(p.a);t.a=y},function(e,t,n){var i=n(0),r=n.n(i),o=n(10),a=n.n(o),s=n(495),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(86),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fontVariation=t,this._defaultFontRuler=new s.a,this._customFontRuler=new s.a(this._fontVariation)}return l(e,[{key:"observe",value:function(){var e=this,t=u();return new a.a((function(n,i){var r=window.setInterval((function(){if(e._defaultFontRuler.getWidth()!==e._customFontRuler.getWidth())return window.clearInterval(r),n();if(u()-t>=5e3){var o=new Error("Failed to load font "+e._fontVariation.getFontFamily()+".");return o.font=e._fontVariation,i(o)}}),50)}))}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}]),e}();t.a=c},function(e,t,n){var i=n(0),r=n.n(i),o=n(199),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fontVariation=t||new o.a({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}return a(e,[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: "+this._fontVariation.getFontStyle()+" "+this._fontVariation.getFontWeight()+" 30px "+this._fontVariation.getFontFamily()+";\n    "}},{key:"setFontVariation",value:function(e){this._fontVariation=e,this._setRulerStyle()}},{key:"getWidth",value:function(){return this._ruler?this._ruler.offsetWidth:-1}},{key:"dispose",value:function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(10),c=n.n(u),f=n(1),h=n.n(f),p=n(203),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){return _(this,t),g(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"load",value:function(){return c.a.resolve()}}]),t}(p.a);t.a=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(204),a=n(205),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="1.0.1"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(206),a=n(207),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="2.0.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(o.l.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=t.getEditor().getSDK()._l.areCustomAssetsAllowed();var i=this._options,r=i.categories,a=i.replaceCategories;this._customAssetsAllowed&&this._options.categories?this._addCategories(r,a):this._updateAllCategory()}return a(e,[{key:"_addCategories",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?e.slice(0):o.m.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach((function(e){t._categoriesById[e.identifier]=e}));var i=this._options.availableFrames;this._customAssetsAllowed&&i&&this._categories.forEach((function(e){e.frames=e.frames.filter((function(e){return-1!==i.indexOf(e.identifier)}))})),this._categories.forEach((function(e){e.frames.forEach((function(e){t._framesById[e.identifier]=e}))})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map((function(e){return e.frames})).reduce((function(e,t){return e.concat(t)}),[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown frame category '"+e+"'");return this._categoriesById[e].frames}},{key:"getFrameByIdentifier",value:function(e){return this._framesById[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._overlays=o.l.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};var r=t.getEditor().getSDK()._l.areCustomAssetsAllowed();r&&n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),r&&n.availableOverlays&&(this._overlays=this._overlays.filter((function(e){return-1!==n.availableOverlays.indexOf(e.identifier)}))),this._overlays.forEach((function(e){i._overlaysByIdentifier[e.identifier]=e}))}return a(e,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(e){return this._overlaysByIdentifier[e]}}]),e}();t.a=s},function(e,t,n){var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),u=n(10),c=n.n(u),f=n(1),h=n.n(f),p=n(9),d=n(72),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=p.j.OptionType,v=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t);var i=m(this,(t.__proto__||h()(t)).call(this,n));return i._loaded=!1,i._loading=!1,i._ui=e,i._frame=p.j.Utils.deepClone(i._options),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,e),_(t,[{key:"load",value:function(){var e=this;if(this._loaded)return c.a.resolve();if(this._loading)return c.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var t=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach((function(i){if(i in t){var r=t[i];["start","mid","end"].forEach((function(t){t in r&&n.push(e._loadPart(i,t))}))}})),c.a.all(n).then((function(){e._loaded=!0,e._loading=!1})).catch((function(t){e._loaded=!1,e._loading=!1}))}},{key:"_loadPart",value:function(e,t){var n=this,i=this._frame.imageGroups[e][t],r=i;return"string"!=typeof i&&"image"in i&&(r=i.image),d.a.load(this._ui.getAssetPath(r)).then((function(r){return"string"!=typeof i?n._frame.imageGroups[e][t].image=r:n._frame.imageGroups[e][t]=r,r}))}},{key:"getFrame",value:function(){return this._frame}}]),t}(p.j.Configurable);t.a=v,v.prototype.availableOptions={identifier:{type:y.STRING,required:!0},defaultName:{type:y.STRING},thumbnail:{type:y.STRING},tintable:{type:y.BOOLEAN,default:!1},layoutMode:{type:y.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:y.OBJECT,required:!0}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(208),a=n(209),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.0.0"},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s),u=n(31);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.n(u);var h=function(e){function t(){return c(this,t),f(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(u.Configurable);t.a=h,h.prototype.availableOptions={identifier:{type:u.OptionType.STRING,required:!0},defaultName:{type:u.OptionType.STRING,required:!0},ratio:{type:u.OptionType.ALL,required:!1,default:null},selected:{type:u.OptionType.BOOLEAN,required:!1},dimensions:{type:u.OptionType.VECTOR2,required:!1},lockDimensions:{type:u.OptionType.BOOLEAN,required:!1,default:null},forceDimensions:{type:u.OptionType.BOOLEAN,required:!1,default:null}}},function(e,t,n){e.exports={default:n(505),__esModule:!0}},function(e,t,n){n(506),e.exports=n(11).Object.values},function(e,t,n){var i=n(14),r=n(507)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(19),r=n(49),o=n(35),a=n(58).f;e.exports=function(e){return function(t){for(var n,s=o(t),l=r(s),u=l.length,c=0,f=[];u>c;)n=l[c++],i&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(210),a=n(211),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.1.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(212),a=n(213),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.2.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(214),a=n(215),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.4.0"},function(e,t,n){var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(10),l=n.n(s),u=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._categoriesByIdentifier={},this._categories=[],this._artFiltersByIdentifier={},this._initCategories()}return c(e,[{key:"_initCategories",value:function(){var e=this,t={identifier:"standard",defaultName:"Standard",artFilters:u.l.DEFAULTS.ART_FILTERS||[]};if(this._categories=[t],this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=u.m.mergeCategories(this._categories,this._options.categories,"artFilters")),this._options.availableArtFilters){var n=[];this._categories.forEach((function(t){var i=t.artFilters.filter((function(t){return-1!==e._options.availableArtFilters.indexOf(t.identifier)}));i.length>0&&n.push({identifier:t.identifier,defaultName:t.defaultName,artFilters:i})})),this._categories=n}var i={identifier:"all",defaultName:"All",artFilters:this._categories.length<=0?[]:this._categories.map((function(e){return e.artFilters})).reduce((function(e,t){return e.concat(t)}))};this._categories.unshift(i),this._categoriesByIdentifier.all=i,this._categories.forEach((function(t){e._categoriesByIdentifier[t.identifier]=t})),i.artFilters.forEach((function(t){e._artFiltersByIdentifier[t.identifier]=t}))}},{key:"instantiateStyleTransferModelForArtFilterWithIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getArtFilterByIdentifier(e);if(!n)return l.a.reject(new Error("Unknown style with identifier `"+e+"`!"));var i=n.rootPath,r=this._ui.getEditor().getSDK(),o=r.getRenderer();t.weightURL=this._ui.getAssetPath(i+"/weights.json");var a=r.getInputTexture().getDimensions(),s=r.getOperationsStack().getByIdentifier("exif-orientation");return s&&(a=s.getNewDimensions(a)),u.j.Operations.ArtFilterOperation.StyleTransferModel.createWithOptions(t,a,o)}},{key:"updateLoadedModelWithWeightsForIdentifier",value:function(e,t){var n=this.getArtFilterByIdentifier(t);if(!n)return l.a.reject(new Error("Unknown style with identifier `"+t+"`!"));var i=n.rootPath,r=this._ui.getAssetPath(i+"/weights.json");return e.updateWithWeightsFromURL(r)}},{key:"getArtFiltersForCategory",value:function(e){if(!this._categoriesByIdentifier[e])throw new Error("Unknown art filter category '"+e+"'");return this._categoriesByIdentifier[e].artFilters}},{key:"getArtFilterByIdentifier",value:function(e){return this._artFiltersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getArtFilters",value:function(){var e=this,t=[];return this._categories.map((function(n){t.push.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(e.getArtFiltersForCategory(n.identifier)))})),t}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesByIdentifier[e]}}]),e}();t.a=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(216),a=n(217),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.5.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(218),a=n(219),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.6.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(220),a=n(221),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.7.0"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(516),a=n(517),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=l,l.version="3.8.0"},function(e,t,n){var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),l=n.n(s),u=n(3),c=n.n(u),f=n(1),h=n.n(f),p=n(220),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){return _(this,t),g(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,e),d(t,[{key:"_serializeSticker",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,n);return i.options.tintMode=n.getTintMode(),i}}]),t}(p.a);t.a=m,m.version="3.8.0"},function(e,t,n){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),l=n.n(s);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return u(this,t),c(this,(t.__proto__||l()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,e),t}(n(221).a);t.a=f,f.version="3.8.0"}])},e.exports=n()}));(te=ne)&&te.__esModule&&Object.prototype.hasOwnProperty.call(te,"default")&&te.default;var ie=ne.PhotoEditorSDK,re=ne.EngineWrapper;function oe(e){return void 0!==e.x}function ae(e){return f.fromTRS(e.position.x,e.position.y,e.rotation,e.scale.x,e.scale.y)}function se(e){var t=e.getParent(),n=function(e){return e.getBaseLocalToParentMatrix?e.getBaseLocalToParentMatrix():ae(e.getTransform())}(e);if(void 0===t)return n;var i=se(t);return f.multiply(i,n)}function le(e){return e.getLocalToParentMatrix?e.getLocalToParentMatrix():ae(e.getTransform())}function ue(e){var t=e.getParent(),n=le(e);if(void 0===t)return n;var i=ue(t);return f.multiply(i,n)}function ce(e,t,n,i){void 0===i&&(i=!1);var r="output"===t.type&&i?se(t):ue(t),o="output"===n.type&&i?se(n):ue(n),a=f.getInverted(o);return f.transformPoint(a,f.transformPoint(r,e))}function fe(e,t,n){var i=new u(e,0),r=new u(ce(i,t,n)),o=new u(ce(u.ZERO,t,n));return u.distance(o,r)}function he(e,t,n){var i=oe(e)?e.x:e.width,r=oe(e)?e.y:e.height;return{width:fe(i,t,n),height:fe(r,t,n)}}function pe(e,t){var n=ue(t);return f.transformPoint(n,e)}function de(e){var t=ue(e),n=e.getBounds(),i={x:n.width,y:0},r={x:0,y:n.height},o=new u(f.transformPoint(t,u.ZERO)),a=new u(f.transformPoint(t,i)),s=new u(f.transformPoint(t,r));return{width:u.distance(o,a),height:u.distance(o,s)}}function _e(e,t){var n=de(e),i=t.getTransform().scale,r=1/i.x,o=1/i.y;return{width:n.width*r,height:n.height*o}}function ge(e,t,n){void 0===n&&(n=!0);var i=t.getBounds();return{x:(e.x-(n?0:i.minX))/i.width,y:(e.y-(n?0:i.minY))/i.height}}function me(e,t){var n=ce({x:1,y:0},e,t,!0),i=ce(u.ZERO,e,t,!0);return Math.atan2(n.y-i.y,n.x-i.x)}var ye,ve=Object.freeze({__proto__:null,getScalarInWorldSpace:function(e,t){var n=new u(e,0),i=new u(pe(n,t)),r=new u(pe(u.ZERO,t));return u.distance(i,r)},getPointInWorldSpace:pe,getSizeInWorldSpace:de,getSizeInOutputSpace:_e,pointFromSpaceToSpace:ce,sizeFromSpaceToSpace:he,scalarFromSpaceToSpace:fe,relativeToAbsolutePoint:function(e,t,n){void 0===n&&(n=!0);var i=t.getBounds();return{x:(e.x-(n?0:i.minX))*i.width,y:(e.y-(n?0:i.minY))*i.height}},absoluteToRelativePoint:ge,relativeToAbsoluteSize:function(e,t){var n=t.getBounds();return{width:e.width*n.width,height:e.height*n.height}},absoluteToRelativeSize:function(e,t){var n=t.getBounds();return{width:e.width/n.width,height:e.height/n.height}},rectTransformToAffineTransform:ae,getLocalToParentMatrix:le,getLocalToWorldMatrix:ue,getBaseLocalToWorldMatrix:se,getRotationBetweenCoordinateSpaces:me});function be(e){return"string"!=typeof e&&!Array.isArray(e)&&void 0===e.a}function we(e){return"string"!=typeof e&&Array.isArray(e)&&3===e.length}function ke(e){return"string"!=typeof e&&!Array.isArray(e)&&void 0!==e.a}function xe(e){return"string"!=typeof e&&Array.isArray(e)&&4===e.length}function Te(e){return"string"==typeof e}!function(e){e.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",e.IMAGE_DOWNSCALED="imageDownscaled"}(ye||(ye={}));var Re=function(){function e(e,t){this.engine=t,this.transform=l.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=e}return Object.defineProperty(e.prototype,"quality",{get:function(){return this.previewQuality},enumerable:!0,configurable:!0}),e.prototype.setQuality=function(e){this.previewQuality=Math.min(Math.max(e,.01),1)},e.prototype.getTransform=function(){return this.transform},e.prototype.setTransform=function(e){this.transform=e},e.prototype.getPosition=function(){return this.transform.position},e.prototype.setPosition=function(e,t){var n;n="number"==typeof e?{x:e,y:void 0===t?e:t}:e;var i=this.transform.scale,r=this.transform.rotation;this.setTransform(new l(n,i,r))},e.prototype.getScale=function(){return this.transform.scale},e.prototype.setScale=function(e,t){var n;n="number"!=typeof e?e:{x:e,y:void 0===t?e:t};var i=this.transform.position,r=this.transform.rotation;this.setTransform(new l(i,n,r))},e.prototype.getRotation=function(){return this.transform.rotation},e.prototype.setRotation=function(e){var t=this.transform.position,n=this.transform.scale;this.setTransform(new l(t,n,e))},e.prototype.getCanvasPivot=function(){return this.canvasPivot},e.prototype.setCanvasPivot=function(e,t){this.canvasPivot="number"==typeof e?{x:e,y:void 0===typeof t?e:t}:e},e.prototype.getCanvasBounds=function(){var e=this.canvasPivot,t=this.canvas,n=t.width,i=t.height;return new c(-e.x*n,-e.y*i,n,i)},e}();function Ce(e){return void 0!==e.getTransform}function Ee(e){return void 0!==e.getContainer}var Oe=function(e){function n(t){var n=e.call(this)||this;return n.config=t,n}return t(n,e),n.prototype.getOutputDimensions=function(){var e=this.getOutputContainer();return e?e.getResolution():{width:0,height:0}},n.prototype.convertPointFromPreviewIntoOutputSpace=function(e,t){var n=f.getInverted(ae(t));return f.transformPoint(n,e)},n.prototype.convertPointFromPreviewIntoWorldSpace=function(e,t,n){var i=f.getInverted(ae(t)),r=n?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=f.multiply(r,i);return f.transformPoint(o,e)},n.prototype.convertPointFromPreviewIntoFlippedPreviewSpace=function(e){var t=this.getOutputContainer().getFlipTransformMatrix();return f.transformPoint(t,e)},n.prototype.convertPointFromWorldIntoPreviewSpace=function(e,t){var n=ae(t),i=f.getInverted(this.getOutputContainer().getLocalToParentMatrix()),r=f.multiply(n,i);return f.transformPoint(r,e)},n.prototype.convertPointFromOutputIntoPreviewSpace=function(e,t){var n=ae(t);return f.transformPoint(n,e)},n.prototype.getContainersAtPreviewPoint=function(e,t){var n,i,r=new Array,a=this.convertPointFromPreviewIntoWorldSpace(e,t),s=this.getRootContainers();try{for(var l=o(s),u=l.next();!u.done;u=l.next()){var c=u.value;this.accumulateContainersAtWorldPointInHierarchy(a,c,r)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return r},n.prototype.isPreviewPointInContainer=function(e,t,n){var i=this.convertPointFromPreviewIntoWorldSpace(e,n);return this.isWorldPointInContainer(i,t)},n.prototype.isWorldPointInContainer=function(e,t){var n=ue(t),i=f.getInverted(n),r=f.transformPoint(i,e);return c.contains(t.getBounds(),r)},n.prototype.accumulateContainersAtWorldPointInHierarchy=function(e,t,n){var i,r;this.isWorldPointInContainer(e,t)&&n.push(t);var a=t.getChildren();try{for(var s=o(a),l=s.next();!l.done;l=s.next()){var u=l.value;Ce(u)&&this.accumulateContainersAtWorldPointInHierarchy(e,u,n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},n}(S),Ie=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){return this._x=e,this._y=t,this},e.prototype.clone=function(){return new e(this._x,this._y)},e.prototype.copy=function(e){return this._x=e.x,this._y=e.y,this},e.prototype.clamped=function(e,t){void 0===e&&(e=this),void 0===t&&(t=this);var n="number"==typeof e?{x:e,y:e}:e,i="number"==typeof t?{x:t,y:t}:t;return this._x=Math.max(n.x,this._x),this._y=Math.max(n.y,this._y),this._x=Math.min(i.x,this._x),this._y=Math.min(i.y,this._y),this},e.prototype.divide=function(e,t){return"number"==typeof e||null===e?(this._x/=e,this._y/=void 0===t?e:t):(this._x/=e.x,this._y/=e.y),this},e.prototype.subtract=function(e,t){return"number"==typeof e||null===e?(this._x-=e,this._y-=void 0===t?e:t):(this._x-=e.x,this._y-=e.y),this},e.prototype.multiply=function(e,t){return"number"==typeof e||null===e?(this._x*=e,this._y*=void 0===t?e:t):(this._x*=e.x,this._y*=e.y),this},e.prototype.add=function(e,t){return"number"==typeof e||null===e?(this._x+=e,this._y+=void 0===t?e:t):(this._x+=e.x,this._y+=e.y),this},e.prototype.dot=function(e,t){return"number"==typeof e||null===e?this._x*e+this._y*(void 0===t?e:t):this._x*e.x+this._y*e.y},e.prototype.equals=function(e,t){return"number"==typeof e||null===e?e===this._x&&t===this._y:e.x===this._x&&e.y===this._y},e.prototype.flip=function(){var e=this._x;return this._x=this._y,this._y=e,this},e.prototype.round=function(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this},e.prototype.ceil=function(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this},e.prototype.floor=function(){return this._x=0|this._x,this._y=0|this._y,this},e.prototype.abs=function(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this},e.prototype.len=function(){return Math.sqrt(this._x*this._x+this._y*this._y)},e.prototype.min=function(){return Math.min(this._x,this._y)},e.prototype.max=function(){return Math.max(this._x,this._y)},e.prototype.toObject=function(){return{x:this._x,y:this._y}},e.prototype.toString=function(){return"Vector2({ x: "+this._x+", y: "+this._y+" })"},e.prototype.roundDecimal=function(e){return this._x=parseFloat(this._x.toFixed(e)),this._y=parseFloat(this._y.toFixed(e)),this},e.prototype.asArray=function(e){return void 0===e&&(e=!1),e?[this._y,this._x]:[this._x,this._y]},e.fromObject=function(t){return new e(t.x,t.y)},e.fromSize=function(t){return new e(t.width,t.height)},Object.defineProperty(e,"NULL",{get:function(){return new e(0,0)},enumerable:!0,configurable:!0}),e}(),Se=function(){function e(e){this.engine=e,this.id=h(),this.transform=l.IDENTITY,this.bounds=c.ZERO}return e.prototype.getID=function(){return this.id},e.prototype.getParent=function(){var e=this.engine.getRootContainers();if(0!==e.length&&this.id!==e[0].id)return e[0]},e.prototype.getIndexInParent=function(){for(var e=this.engine.rootOperations,t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1},e.prototype.setIndexInParent=function(e){this.engine.moveIndex(this,e)},e.prototype.getChildren=function(){var e=this.engine.getRootContainers();return e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]},e.prototype.getBounds=function(){return this.bounds},e.prototype.setPivotOnSelfAndSprite=function(e,t,n){"number"==typeof t?(this.setPivotInternal(t,n),e.setPivot(new Ie(t,n))):(this.setPivotInternal(t),e.setPivot(Ie.fromObject(t)))},e.prototype.setPivot=function(e,t){this.setPivotInternal(e,t)},e.prototype.getPivot=function(){var e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}},e.prototype.getTransform=function(){return this.transform},e.prototype.setTransform=function(e){this.transform=e},e.prototype.updateTransform=function(){this.setTransform(this.transform)},e.prototype.getPosition=function(){return this.transform.position},e.prototype.setPosition=function(e,t){var n;n="number"==typeof e?{x:e,y:void 0===t?e:t}:e;var i=this.transform.scale,r=this.transform.rotation;this.setTransform(new l(n,i,r))},e.prototype.getScale=function(){return this.transform.scale},e.prototype.setScale=function(e,t){var n;n="number"!=typeof e?e:{x:e,y:void 0===t?e:t};var i=this.transform,r=i.position,o=i.rotation;this.setTransform(new l(r,n,o))},e.prototype.getRotation=function(){return this.transform.rotation},e.prototype.setRotation=function(e){var t=this.transform,n=t.position,i=t.scale;this.setTransform(new l(n,i,e))},e.prototype.getSizeInWorldSpace=function(){return de(this)},e.prototype.getSizeInOutputSpace=function(){return _e(this,this.engine.getOutputContainer())},e.prototype.isValid=function(){return-1!==this.getIndexInParent()},e.prototype.setPivotInternal=function(e,t){var n=this.getBounds();"number"==typeof e?this.setBoundsFromSize(n.width,n.height,{x:e,y:t}):this.setBoundsFromSize(n.width,n.height,e)},e.prototype.setBoundsFromSize=function(e,t,n){void 0===n&&(n=this.getPivot()),this.bounds=new c(-n.x*e,-n.y*t,e,t)},e}();var Ae=function(e){function i(t,n){var i=e.call(this,n)||this;i.data=t,i.type="image";var r=n.configuration.downscaleOptions;if(r){var o=r.maxDimensions;i.downscaleOptions={maxMegaPixels:r.maxMegaPixels,maxDimensions:{width:Math.min(n.maxTextureDimension,o?o.width:Number.MAX_VALUE),height:Math.min(n.maxTextureDimension,o?o.height:Number.MAX_VALUE)}}}else i.downscaleOptions={maxDimensions:{width:n.maxTextureDimension,height:n.maxTextureDimension}};i.setData(t);var a=i.data.image;return i.bounds=new c(u.ZERO,{width:a.width,height:a.height}),i}return t(i,e),i.prototype.setData=function(e){var t=this;if(this.data=n({},this.data,e),e.image){var i=e.image,r=void 0;if(!function(e){return void 0!==e.getContext}(i)&&(r=this.engine.pesdk.parseExif(i))){var o=r.getTags();if(o&&o.Orientation){var a=1!==o.Orientation&&2!==o.Orientation,s=-1!==[2,4,5,7].indexOf(o.Orientation);if(a||s){var l=this.engine.pesdk.createOperation("exif-orientation",{},!1);l.setTags(o),i=l.applyTo(i),r.setOrientation(1),o.Orientation=1}}}var u=new A(i,this.downscaleOptions);u.on(I.IMAGE_DOWNSCALED,(function(){t.engine.emit(ye.IMAGE_DOWNSCALED)})),u.on(I.BEGAN_IMAGE_DOWNSCALING,(function(){t.engine.emit(ye.BEGAN_IMAGE_DOWNSCALING)})),i=u.downscaleIfNecessary(),this.data.image=i,this.engine.pesdk.setImage(i,r),this.setBoundsFromSize(i.width,i.height)}},i.prototype.getData=function(){return this.data},i.prototype.setPivot=function(e,t){throw new Error("This container does not support modifying the pivot")},i.prototype.getOperation=function(){throw new Error("This container has no associated operation")},i}(Se),Fe=function(e){if(ke(e))return new ie.Color(e.r,e.g,e.b,e.a);if(xe(e))return new ie.Color(e[0],e[1],e[2],e[3]);if(be(e))return new ie.Color(e.r,e.g,e.b,1);if(we(e))return new ie.Color(e[0],e[1],e[2],1);if(Te(e)){var t=a(e.match(/[0-9A-fa-f]{1,2}/g),3),n=t[0],i=t[1],r=t[2];return new ie.Color(parseInt(n,16)/255,parseInt(i,16)/255,parseInt(r,16)/255,1)}throw new Error("Invalid color type")},Me=function(e){function i(t,n){var i=e.call(this,n)||this;i.data=t,i.type="sticker";var r=t.image,o=i.engine.pesdk.parseExif(t.image);if(o){var a=o.getTags();if(a&&a.Orientation){var s=1!==a.Orientation&&2!==a.Orientation,u=-1!==[2,4,5,7].indexOf(a.Orientation);if(s||u){var f=i.engine.pesdk.createOperation("exif-orientation",{},!1);f.setTags(a),r=f.applyTo(t.image),o.setOrientation(1),a.Orientation=1}}}return r=new A(r,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),i.operation=n.createSpriteOperation(),i.sprite=i.operation.createSticker({identifier:"",image:r,position:new Ie(0,0),dimensions:new Ie(1,1),rotation:0,smoothDownscaling:!1}),i.operation.addSprite(i.sprite),i.bounds=new c({x:0,y:0},{width:r.width,height:r.height}),i.setTransform(l.IDENTITY),i.sprite.setPivot(new Ie(0,0)),i.operation.setDirty(!0),i.setData(t),i}return t(i,e),i.prototype.setData=function(e){this.data=n({},this.data,e),e.id&&(this.id=e.id),e.opacity&&this.sprite.setAlpha(e.opacity),e.tintColor&&this.sprite.setTintColor(Fe(e.tintColor)),e.tintMode&&this.sprite.setTintMode(e.tintMode),this.operation.setDirty(!0)},i.prototype.getData=function(){return this.data},i.prototype.updateData=function(){this.setData(this.getData())},i.prototype.setTransform=function(t){e.prototype.setTransform.call(this,t);var n=this.engine.getOutputContainer(),i=this.getParent(),r=he({x:this.bounds.width*t.scale.x,y:this.bounds.height*t.scale.y},i,n);this.sprite.setDimensions(Ie.fromSize(r));var o=ge(ce(t.position,i,n,!0),n,!1);this.sprite.setPosition(new Ie(o.x,o.y));var a=me(i,n),s=t.rotation+a;this.sprite.setRotation(s),this.operation.setDirty(!0)},i.prototype.setPivot=function(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)},i.prototype.getOperation=function(){return this.operation},i.prototype.setFlipHorizontally=function(e){this.sprite.setFlipHorizontally(e)},i.prototype.setFlipVertically=function(e){this.sprite.setFlipVertically(e)},i.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},i.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},i}(Se);var De=function(){function e(e){this.context=e,this.sourceLines=[],this.maxWidth=100}return e.buildWords=function(e){for(var t=[],n="",i=e.length,r=0;r<i;r+=1){var o=e[r];n+=o," "!==o&&"-"!==o&&r!==i-1||(t.push(n),n="")}return t},e.prototype.getLines=function(){for(var t=[],n=[],i=this.sourceLines.length,r=0;r<i;r+=1){for(var o=this.sourceLines[r],a=e.buildWords(o),s=a.length,l=0;l<s;l+=1){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this.getWidth(c)>this.maxWidth){n.length>0&&(t.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this.getWidth(f)>this.maxWidth){var h=this.splitWord(u);t=t.concat(h.lines),h.rest&&(n=[h.rest])}}else n.push(u)}t.push(n.join("")),n=[]}return t},e.prototype.splitWord=function(e){for(var t={lines:[],rest:null},n=e.length,i=[],r=0;r<n;r+=1){var o=e[r];this.getWidth(i.concat(o).join(""))>this.maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[o]):i.push(o),r===n-1&&i.length>0&&(t.rest=i.join(""))}return t},e.prototype.getWidth=function(e){return this.context.measureText(e).width},e.prototype.setText=function(e){this.sourceLines=e.split("\n")},e.prototype.setMaxWidth=function(e){this.maxWidth=e},e}();function Be(e,t,n,i,r,o,a){e.font=(n.fontStyle||"normal")+" "+(n.fontWeight||"normal")+" "+i+'px "'+n.fontFamily+'"';var s=new De(e);s.setText(t),s.setMaxWidth(o);var l=s.getLines().map((function(e){return e.replace(/\s+$/i,"")})),u=function(e,t){var n=1/t.unitsPerEm*e,i=t.ascender*n,r=t.descender*n;return i+Math.abs(r)}(i,a)*r;return{width:o,height:l.length*u}}var Pe=function(e){function i(t,n){var r=e.call(this,n)||this;if(r.text=t,r.type="text",!i.measureContext){var o=document.createElement("canvas");i.measureContext=o.getContext("2d")}r.operation=n.createSpriteOperation();var a=r.engine.getOutputContainer(),s=r.getParent(),u=a.getBounds();r.sprite=r.operation.createText({text:t.text,position:new Ie(0,0),rotation:0,fontSize:fe(t.fontSize/u.height,s,a),lineHeight:t.lineHeight,fontIdentifier:t.fontIdentifier,alignment:t.alignment,color:Fe(t.textColor),backgroundColor:Fe(t.backgroundColor),maxWidth:fe(t.width/u.width,s,a)});var f=n.assetProvider.getFontManager().getFontWithId(t.fontIdentifier);r.sprite.setFontFamily(f.fontFamily),r.sprite.setFontWeight(f.fontWeight||"normal"),r.sprite.setFontStyle(f.fontStyle||"normal"),r.sprite.setFontIdentifier(f.identifier),r.sprite.setTextMetrics(f.textMetrics),r.sprite.setPivot(new Ie(0,0)),r.operation.addSprite(r.sprite);var h=Be(i.measureContext,t.text,f,t.fontSize,t.lineHeight,t.width,f.textMetrics);return r.bounds=new c(0,0,h.width,h.height),r.setTransform(l.IDENTITY),r.operation.setDirty(!0),r}return t(i,e),i.prototype.setData=function(e){this.text=n({},this.text,e);var t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier&&(this.sprite.setFontFamily(t.fontFamily),this.sprite.setFontWeight(t.fontWeight||"normal"),this.sprite.setFontStyle(t.fontStyle||"normal"),this.sprite.setFontIdentifier(t.identifier),this.sprite.setTextMetrics(t.textMetrics)),e.id&&(this.id=e.id),e.text&&this.sprite.setText(e.text),e.fontSize){var r=this.engine.getOutputContainer(),o=this.getParent(),a=fe(e.fontSize,o,r),s=r.getBounds();this.sprite.setFontSize(a/s.height)}if(e.alignment&&this.sprite.setAlignment(e.alignment),e.lineHeight&&this.sprite.setLineHeight(e.lineHeight),e.textColor&&this.sprite.setColor(Fe(e.textColor)),e.backgroundColor&&this.sprite.setBackgroundColor(Fe(e.backgroundColor)),e.width){r=this.engine.getOutputContainer(),o=this.getParent();var l=fe(e.width,o,r);s=r.getBounds();this.sprite.setMaxWidth(l/s.width)}var u=Be(i.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(u.width,u.height),this.operation.setDirty(!0)},i.prototype.getData=function(){return this.text},i.prototype.updateData=function(){this.setData(this.getData())},i.prototype.setTransform=function(t){e.prototype.setTransform.call(this,t);var n=this.engine.getOutputContainer(),i=this.getParent(),r=ge(ce(t.position,i,n,!0),n,!1);this.sprite.setPosition(new Ie(r.x,r.y));var o=me(i,n);this.sprite.setRotation(t.rotation+o),this.operation.setDirty(!0)},i.prototype.setPivot=function(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)},i.prototype.getOperation=function(){return this.operation},i.prototype.setFlipHorizontally=function(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e})),this.sprite.setFlipHorizontally(e)},i.prototype.setFlipVertically=function(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e})),this.sprite.setFlipVertically(e)},i.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},i.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},i.prototype.getFlippedRotation=function(e){var t,n=e.flipVertically,i=e.flipHorizontally,r=n||this.getFlipVertically(),o=i||this.getFlipHorizontally(),a=this.getRotation();return(r||o)&&(t=a,a=2*Math.PI-t),a},i}(Se),Le=function(e){function i(t,n,r){var o=e.call(this,r)||this;o.textDesign=t,o.layout=n,o.type="text-design",o.layoutID=n.identifier,o.operation=r.createSpriteOperation();var a=o.engine.getOutputContainer(),s=o.getParent(),u=a.getBounds(),c=Math.min(u.width,u.height);n.seed(t.seed),o.bounds=i.calculateBounds(o.textDesign,o.layout);var f=o.getBoundsWidthWithoutPadding(o.bounds);return o.sprite=o.operation.createTextDesign({text:t.text,layout:n,inverted:t.inverted,color:Fe(t.color),width:fe(t.width/c,s,a),padding:t.padding/f,seed:t.seed}),o.updatePivot(),o.operation.addSprite(o.sprite),o.setTransform(l.IDENTITY),o.operation.setDirty(!0),o}return t(i,e),i.calculateBounds=function(e,t){var n=e.inverted?Math.max(0,2*e.padding):0,i=t.generateLayoutData(e.text,e.width).getSize();return new c(0,0,i.width+n,i.height+n)},i.prototype.setData=function(e){var t=this.textDesign.padding,r=this.bounds;if(this.textDesign=n({},this.textDesign,e),e.id&&(this.id=e.id),void 0!==e.padding){var o=this.getBoundsWidthWithoutPadding(r,t);this.sprite.setPadding(e.padding/o)}if(void 0!==e.seed&&(this.sprite.setSeed(e.seed),this.layout.seed(e.seed),this.sprite.setLayout(this.layout)),e.color&&this.sprite.setColor(Fe(e.color)),void 0!==e.inverted&&this.sprite.setInverted(e.inverted),e.text&&this.sprite.setText(e.text),e.width){var a=this.engine.getOutputContainer(),s=this.getParent(),l=a.getBounds(),u=Math.min(l.width,l.height),c=fe(e.width/u,s,a);this.sprite.setWidth(c)}if(void 0!==e.padding||void 0!==e.seed||void 0!==e.inverted||e.text||e.width){var f=i.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(f.width,f.height),this.updatePivot()}this.operation.setDirty(!0)},i.prototype.getData=function(){return this.textDesign},i.prototype.updateData=function(){this.setData(this.getData())},i.prototype.setTransform=function(t){e.prototype.setTransform.call(this,t);var n=this.engine.getOutputContainer(),i=this.getParent();if(1!==t.scale.x||1!==t.scale.y)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");var r=ge(ce(t.position,i,n,!0),n,!1);this.sprite.setPosition(new Ie(r.x,r.y));var o=me(i,n);this.sprite.setRotation(t.rotation+o),this.operation.setDirty(!0)},i.prototype.setPivot=function(t,n){"number"==typeof t?e.prototype.setPivot.call(this,t,n):e.prototype.setPivot.call(this,t),this.updatePivot()},i.prototype.getOperation=function(){return this.operation},i.prototype.getLayoutID=function(){return this.layoutID},i.prototype.setFlipHorizontally=function(e){this.sprite.setFlipHorizontally(e)},i.prototype.setFlipVertically=function(e){this.sprite.setFlipVertically(e)},i.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},i.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},i.prototype.getBoundsWidthWithoutPadding=function(e,t){return void 0===t&&(t=this.textDesign.padding),this.textDesign.inverted?e.width-2*t:e.width},i.prototype.updatePivot=function(){var e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,t=new u(this.bounds.width-2*e,this.bounds.height-2*e),n=this.getPivot(),i=new u(n.x*this.bounds.width,n.y*this.bounds.height),r=new u(e,e),o=i.subtract(r).divide(t);this.sprite.setPivot(new Ie(o.x,o.y))},i}(Se),ze=function(e){function i(t,n){var i=e.call(this,n)||this;i.type="drawing",i.drawing=t,i.operation=n.createSpriteOperation(),i.sprite=i.operation.createBrush({}),i.operation.addSprite(i.sprite),i.radialBrush=i.sprite._createRadialBrush();var r=n.getRootContainers()[0].getBounds();return i.bounds=new c(0,0,r.width,r.height),i.setTransform(l.IDENTITY),i.operation.setDirty(!0),i.setData(t),i}return t(i,e),i.prototype.beginStroke=function(e){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if("imgly_brush_radial"!==e.id)throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=e,this.currentStroke={brush:e,path:{controlPoints:[]}};var t=this.engine.getOutputContainer().getBounds(),n=Math.min(t.width,t.height);this.radialBrush.setColor(Fe(e.color)),this.radialBrush.setHardness(e.hardness),this.radialBrush.setSize(e.size/n),this.currentPath=this.sprite.createPath(this.radialBrush.clone())},i.prototype.addPointToCurrentStroke=function(e,t){if(void 0===t&&(t=!0),!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){var n=this.currentStroke.path.controlPoints,i=n[n.length-1],r=this.currentBrush.size/10;if(Math.sqrt(e.x-Math.pow(i.x,2)+(e.y-Math.pow(i.y,2)))<r)return}var o=this.engine.getOutputContainer(),a=ge(ce(e,this.engine.getRootContainers()[0],o,!0),o,!1),s=o.getBounds();this.currentPath.addControlPoint(Ie.fromObject(a)),this.currentStroke.path.controlPoints.push(e),t&&this.sprite.render(Ie.fromObject({x:s.width,y:s.height}))},i.prototype.endStroke=function(){if(this.currentStroke&&this.currentPath&&this.currentBrush){this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);var e=this.engine.getOutputContainer().getBounds();this.sprite.render(Ie.fromObject({x:e.width,y:e.height})),this.currentPath=void 0}},i.prototype.setData=function(e){this.drawing=n({},this.drawing,e),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(e.strokes)},i.prototype.getData=function(){return this.drawing},i.prototype.updateData=function(){this.setData(this.getData())},i.prototype.getOperation=function(){return this.operation},i.prototype.drawStrokes=function(e){var t,n,i,r;try{for(var a=o(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.beginStroke(l.brush);try{for(var u=o(l.path.controlPoints),c=u.next();!c.done;c=u.next()){var f=c.value;this.addPointToCurrentStroke(f,!0)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}this.endStroke()}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},i}(Se),Ue=function(e){function i(t,n,i,r){var o=e.call(this,r)||this;return o.settings=t,o.operation=n,o.flipOperation=i,o.type="output",o.flipTransform=f.IDENTITY,o.bounds=new c({x:0,y:0},o.settings.resolution),o.setData(t),o}return t(i,e),i.prototype.setData=function(e){if(this.settings=n({},this.settings,e),e.resolution&&(this.setBoundsFromSize(e.resolution.width,e.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new Ie(e.resolution.width,e.resolution.height)})),void 0!==e.flipHorizontally){var t=e.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:t})}if(void 0!==e.flipVertically){t=e.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:t})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)},i.prototype.getData=function(){return this.settings},i.prototype.setResolution=function(e){this.setData({resolution:e})},i.prototype.getResolution=function(){return this.getData().resolution},i.prototype.setTransform=function(e){this.transform=e;var t=this.flipTransform;this.flipTransform=f.IDENTITY;var n=ce({x:0,y:0},this.engine.getRootContainers()[0],this),i=-e.rotation,r=Ie.fromObject(n).clone().subtract(Ie.fromObject(this.getBounds().origin));this.operation.set({pivot:new Ie(0,0),position:r,scale:new Ie(1/e.scale.x,1/e.scale.y),rotation:i}),this.flipTransform=t,this.operation.setDirty(!0),this.updateChildrenContainers()},i.prototype.rotate90=function(e){void 0===e&&(e=!1);var t=e?.5*-Math.PI:.5*Math.PI,n=this.getResolution(),i=this.getPivot(),r=this.getBounds(),o=pe({x:r.midX,y:r.midY},this);this.setPivot(.5,.5),this.setPosition(o),this.setRotation(this.getRotation()-t);var a={width:n.height,height:n.width};this.setResolution(a);var s=pe({x:-a.width*(.5-i.x),y:-a.height*(.5-i.y)},this);this.setPivot(i),this.setPosition(s),this.updateChildrenContainers()},i.prototype.setPivot=function(t,n){e.prototype.setPivotInternal.call(this,t,n),this.setTransform(this.transform)},i.prototype.getTransform=function(){return this.transform},i.prototype.getBaseLocalToParentMatrix=function(){return ae(this.getTransform())},i.prototype.getLocalToParentMatrix=function(){var e=ae(this.getTransform());return f.multiply(e,this.flipTransform)},i.prototype.getFlipTransformMatrix=function(){return this.flipTransform},i.prototype.isValid=function(){return!0},i.prototype.getOperation=function(){return this.operation},i.prototype.updateFlipTransform=function(){var e=this.settings,t=e.flipHorizontally,n=e.flipVertically;if(t||n){var i=this.getPivot(),r=this.getBounds(),o=t?-1:1,a=t?-2*(i.x-.5)*r.width:0,s=n?-1:1,l=n?-2*(i.y-.5)*r.height:0;this.flipTransform=new f(o,0,0,s,a,l)}else this.flipTransform=f.IDENTITY},i.prototype.updateChildrenContainers=function(){this.engine.rootOperations.forEach((function(e){Ce(e)?(e.updateTransform(),"updateData"in e&&e.updateData()):"updateProperties"in e&&e.updateProperties()}))},i}(Se),Ne=function(){function e(e){this.engine=e,this.id=h()}return e.prototype.getID=function(){return this.id},e.prototype.getContainer=function(){return this.engine.getRootContainers()[0]},e.prototype.getIndexInParent=function(){for(var e=this.engine.rootOperations,t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1},e.prototype.setIndexInParent=function(e){this.engine.moveIndex(this,e)},e.prototype.isValid=function(){return-1!==this.getIndexInParent()},e}(),je=function(e){function n(t,n,i){var r=e.call(this,n)||this;return r.blurOperation=i,r.type="gaussian-blur",r.setProperties(t),r}return t(n,e),n.prototype.getProperties=function(){var e=this.engine.getOutputContainer(),t=e.getBounds(),n=Math.min(t.size.width,t.size.height);return{blurRadius:fe(this.blurOperation.getOptions().blurRadius*n,e,this.getContainer())}},n.prototype.setProperties=function(e){if(void 0!==e.blurRadius){var t=this.engine.pesdk.getOutputDimensions(),n=Math.min(t.x,t.y),i=this.getContainer(),r=this.engine.getOutputContainer(),o=fe(e.blurRadius,i,r)/n;this.blurOperation.set({blurRadius:o})}},n.prototype.getOperation=function(){return this.blurOperation},n.prototype.getTypeIdentifier=function(){return"blur"},n}(Ne),Ge=function(e){function i(t,n,i){var r=e.call(this,n)||this;return r.props=t,r.blurOperation=i,r.type="radial-blur",r.setProperties(t),r}return t(i,e),i.prototype.getProperties=function(){return this.props},i.prototype.setProperties=function(e){this.props=n({},this.props,e);var t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),o=this.getContainer(),a=i.getBaseLocalToParentMatrix(),s=se(o),l=f.multiply(f.getInverted(a),s),u=Math.min(r.size.width,r.size.height);if(void 0!==e.blurRadius){var c=fe(e.blurRadius,o,i);t.blurRadius=c/u}if(void 0!==e.center){var h=ge(f.transformPoint(l,e.center),i,!1);t.position=h}if(void 0!==e.radius){var p=fe(e.radius,o,i)/u;t.radius=p}if(void 0!==e.gradientSize){var d=fe(e.gradientSize,o,i)/u;t.gradientRadius=d}this.blurOperation.set(t)},i.prototype.updateProperties=function(){var e=this.getProperties();this.setProperties(e)},i.prototype.getOperation=function(){return this.blurOperation},i.prototype.getTypeIdentifier=function(){return"radial-focus"},i}(Ne),We=function(e){function i(t,n,i){var r=e.call(this,n)||this;return r.props=t,r.blurOperation=i,r.type="mirrored-blur",r.setProperties(t),r}return t(i,e),i.prototype.getProperties=function(){return this.props},i.prototype.setProperties=function(e){this.props=n({},this.props,e);var t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),o=this.getContainer(),a=i.getBaseLocalToParentMatrix(),s=se(o),l=f.multiply(f.getInverted(a),s),u=Math.min(r.size.width,r.size.height);if(void 0!==e.blurRadius){var c=fe(e.blurRadius,o,i);t.blurRadius=c/u}if(void 0!==e.gradientSize){var h=fe(e.gradientSize,o,i)/u;t.gradientSize=h}if(void 0!==e.clearAreaWidth){var p=fe(e.clearAreaWidth,o,i)/u;t.size=.5*p}if(void 0!==e.mirrorAxisOrigin){var d=ge(f.transformPoint(l,e.mirrorAxisOrigin),i,!1);t.start=d}if(void 0!==e.mirrorAxisDirection){var _=ge(f.transformPoint(l,e.mirrorAxisDirection),i,!1);t.end=_}this.blurOperation.set(t)},i.prototype.updateProperties=function(){var e=this.getProperties();this.setProperties(e)},i.prototype.getOperation=function(){return this.blurOperation},i.prototype.getTypeIdentifier=function(){return"mirrored-focus"},i}(Ne),Ve=function(e){function i(t,n,i){var r=e.call(this,n)||this;return r.props=t,r.blurOperation=i,r.type="linear-blur",r.setProperties(t),r}return t(i,e),i.prototype.getProperties=function(){return this.props},i.prototype.setProperties=function(e){this.props=n({},this.props,e);var t=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),o=this.getContainer(),a=i.getBaseLocalToParentMatrix(),s=se(o),l=f.multiply(f.getInverted(a),s),u=Math.min(r.size.width,r.size.height);if(void 0!==e.blurRadius){var c=fe(e.blurRadius,o,i);t.blurRadius=c/u}if(void 0!==e.start){var h=ge(f.transformPoint(l,e.start),i,!1);t.controlPoint1=h}if(void 0!==e.end){var p=ge(f.transformPoint(l,e.end),i,!1);t.controlPoint2=p}this.blurOperation.set(t)},i.prototype.updateProperties=function(){var e=this.getProperties();this.setProperties(e)},i.prototype.getOperation=function(){return this.blurOperation},i.prototype.getTypeIdentifier=function(){return"linear-focus"},i}(Ne),He=function(e){function n(t,n,i,r){var o=e.call(this,r)||this;return o.filterOperation=n,o.type="duotone-filter",n.set({intensity:.5*(i.colorIntensity+1)}),n.set({filter:t}),r.pesdk.setAllOperationsToDirty(),o}return t(n,e),n.prototype.getProperties=function(){return{colorIntensity:2*this.filterOperation.getOptions().intensity-1}},n.prototype.setProperties=function(e){var t=this.filterOperation.getOptions().intensity;void 0!==e.colorIntensity&&(t=.5*(Math.min(Math.max(e.colorIntensity,-1),1)+1)),this.filterOperation.set({intensity:t})},n.prototype.getOperation=function(){return this.filterOperation},n.prototype.getTypeIdentifier=function(){return"filter"},n}(Ne),qe=function(e){function n(t,n,i,r){var o=e.call(this,r)||this;return o.filter=t,o.filterOperation=n,o.props=i,o.type="lut-filter",n.set({intensity:i.intensity}),n.set({filter:t}),r.pesdk.setAllOperationsToDirty(),o}return t(n,e),n.prototype.getProperties=function(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}},n.prototype.setProperties=function(e){var t=this.filterOperation.getOptions(),n="number"==typeof e.intensity?e.intensity:t.intensity;this.filterOperation.set({intensity:n})},n.prototype.getOperation=function(){return this.filterOperation},n.prototype.getTypeIdentifier=function(){return"filter"},n}(Ne),Ye=function(e){function n(t,n,i){var r=e.call(this,n)||this;return r.operation=i,r.type="adjustments",r.setProperties(t),r}return t(n,e),n.prototype.getProperties=function(){var e=this.operation.getOptions();return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:Math.log2(e.gamma)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:.5*e.shadows||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}},n.prototype.setProperties=function(e){void 0!==e.gamma&&(e.gamma=Math.pow(2,e.gamma)),e.shadows&&(e.shadows=2*e.shadows),this.operation.set(e)},n.prototype.getOperation=function(){return this.operation},n.prototype.getTypeIdentifier=function(){return"adjustments"},n}(Ne),Xe=function(e){function n(t,n,i){var r=e.call(this,i)||this;r.overlayOperation=t,r.type="overlay";var o=n.blendMode||i.mapBlendMode(t.getBlendMode());return t.set({blendMode:i.reverseMapBlendMode(o)}),t.set({image:n.image}),i.pesdk.setAllOperationsToDirty(),r}return t(n,e),n.prototype.getProperties=function(){var e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}},n.prototype.setProperties=function(e){var t=this.overlayOperation.getOptions();"number"==typeof e.opacity&&(t.alpha=e.opacity),void 0!==e.blendMode&&(t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)),this.overlayOperation.set(t),this.overlayOperation.setDirty(!0)},n.prototype.getOperation=function(){return this.overlayOperation},n.prototype.getTypeIdentifier=function(){return"overlay"},n}(Ne),Qe=function(e){function i(t,n,i){var r=e.call(this,i)||this;return r.frameOperation=t,r.type="frame",r.setProperties(n),i.pesdk.setAllOperationsToDirty(),r}return t(i,e),i.prototype.setProperties=function(e){if(this.props=n({},this.props,e),e.opacity&&this.frameOperation.set({alpha:e.opacity}),e.tintColor&&this.frameOperation.set({tintColor:Fe(e.tintColor)}),e.width){var t=this.engine.getOutputContainer().getBounds(),i=Math.min(t.width,t.height),r=e.width/i;this.frameOperation.set({scale:r})}this.frameOperation.setDirty(!0)},i.prototype.getProperties=function(){return this.props},i.prototype.getOperation=function(){return this.frameOperation},i.prototype.getTypeIdentifier=function(){return"frame"},i}(Ne),Ze=function(){function e(e,t){this.engine=t,this.loaded=!1,this.loading=!1,this.asset=n({},e)}return e.prototype.load=function(){return i(this,void 0,void 0,(function(){var e,t,n=this;return r(this,(function(i){return this.loaded?[2,Promise.resolve()]:this.loading?[2,Promise.reject(new Error("Called Frame#load while it's already loading"))]:(this.loading=!0,e=this.asset.imageGroups,t=[],["top","left","right","bottom"].forEach((function(i){if(e[i]){var r=e[i];["start","mid","end"].forEach((function(e){e in r&&t.push(n.loadPart(i,e))}))}})),[2,Promise.all(t).then((function(){n.loaded=!0,n.loading=!1})).catch((function(){n.loaded=!1,n.loading=!1}))])}))}))},e.prototype.getFrame=function(){return n({},this.asset,{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})},e.prototype.getIdentifier=function(){return this.asset.identifier},e.prototype.getDefaultName=function(){return this.asset.name},e.prototype.getThumbnail=function(){return this.asset.thumbnailURI},e.prototype.getTintable=function(){return this.asset.tintable||!1},e.prototype.getLayoutMode=function(){return this.asset.layoutMode},e.prototype.getImageGroups=function(){return this.asset.imageGroups},e.prototype.loadPart=function(e,t){return i(this,void 0,void 0,(function(){var n=this;return r(this,(function(i){return[2,new Promise((function(i,r){var o=n.asset.imageGroups[e][t],a=o;"string"!=typeof o&&"image"in o&&(a=o.image);var s=new Image;s.addEventListener("load",(function(){"string"!=typeof o?n.asset.imageGroups[e][t].image=s:n.asset.imageGroups[e][t]=s,i(s)})),s.addEventListener("error",(function(){r(new Error("Failed to load image at "+s.src))})),s.crossOrigin=n.engine.configuration.crossOrigin||"anonymus",s.src=n.engine.assetProvider.getAssetSource("frame",a)}))]}))}))},e}(),Je=ie.Operations.FilterOperation.Filters.DuoToneFilter,Ke=ie.Operations.FilterOperation.Filters.ThreeDLUTFilter,$e="imgly_font_open_sans_bold",et=function(e){function a(t){var n=e.call(this,t)||this;n.previews=Array(),n.rootOperationStack=[],n.deferredRenderQueue=[],n.operationStackOffset=1,n.assetProvider=t.assetProvider||new ee,n.wrapper=new re({license:t.license,crossOrigin:t.crossOrigin,assets:{resolver:function(e,t){return n.resolveAssetForSDK(e,t)}},editor:{preferredRenderer:"webgl",pixelRatio:1}}),n.editor=n.wrapper.getEditor(),n.sdk=n.editor.getSDK(),n.sdk.setRenderMode("adapter"),n.tempCanvas=document.createElement("canvas"),n.sdk.setCanvas(n.tempCanvas);var i=document.createElement("canvas"),r=i.getContext("webgl")||i.getContext("experimental-webgl");return n.maxTextureDimension=r.getParameter(r.MAX_TEXTURE_SIZE),n}return t(a,e),Object.defineProperty(a.prototype,"configuration",{get:function(){return this.config},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pesdk",{get:function(){return this.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rootOperations",{get:function(){return this.rootOperationStack},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this.pesdk.dispose(),this.wrapper.dispose()},a.prototype.render=function(e){var t=this;return new Promise((function(n){var i=function(){return new Promise((function(i){var r=e.canvas,o=e.getTransform(),a=t.outputContainer.getPivot(),s=e.getCanvasBounds(),l=e.quality,u=t.tempCanvas;t.sdk.setTextureQuality(l);var c=t.sdk.getOutputDimensions();return u.width=c.x,u.height=c.y,t.sdk.getRenderer().resizeTo(new Ie(u.width,u.height)),t.sdk.render(!0).then((function(){var l=r.getContext("2d");l.clearRect(0,0,r.width,r.height),l.save(),l.translate(-s.minX,-s.minY),l.translate(o.position.x,o.position.y),l.rotate(o.rotation),l.scale(o.scale.x,o.scale.y),l.translate(-a.x*u.width,-a.y*u.height),l.scale(1/e.quality,1/e.quality),l.drawImage(u,0,0),l.restore(),n(),t.deferredRenderQueue.shift(),t.deferredRenderQueue.length?(t.sdk.setAllOperationsToDirty(),Promise.resolve(t.deferredRenderQueue[0]().then(i))):i()}))}))};t.deferredRenderQueue.push(i),1===t.deferredRenderQueue.length&&i()}))},a.prototype.createPreview=function(e){var t=new Re(e,this);return this.previews.push(t),t},a.prototype.export=function(e,t,n){return void 0===e&&(e=y.IMAGE),void 0===t&&(t=v.PNG),void 0===n&&(n=1),i(this,void 0,void 0,(function(){var i=this;return r(this,(function(r){return[2,new Promise((function(r){var o=function(){return new Promise((function(o){return i.sdk.export(i.mapToRenderType(e),i.mapToImageFormat(t),n).then((function(e){r(e),i.deferredRenderQueue.shift(),i.deferredRenderQueue.length?Promise.resolve(i.deferredRenderQueue[0]().then(o)):o()}))}))};i.deferredRenderQueue.push(o),1===i.deferredRenderQueue.length&&o()}))]}))}))},a.prototype.getRootContainers=function(){return[this.rootContainer]},a.prototype.getOutputContainer=function(){return this.outputContainer},a.prototype.findContainerByID=function(e){var t,n;if(e===this.rootContainer.getID())return this.rootContainer;try{for(var i=o(this.rootOperationStack),r=i.next();!r.done;r=i.next()){var a=r.value;if(a.getID()===e)return a}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},a.prototype.findEffectByID=function(e){var t,n;try{for(var i=o(this.rootOperationStack),r=i.next();!r.done;r=i.next()){var a=r.value;if(a.getID()===e)return a}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},a.prototype.addImage=function(e,t,n){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");var i=new Ae(e,this);if(this.rootContainer=i,!this.outputContainer){var r=i.getBounds(),o={resolution:{width:r.width,height:r.height},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),s=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(s,this.operationStackOffset),this.outputContainer=new Ue(o,a,s,this)}return i},a.prototype.addSticker=function(e,t,n){if(!t)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(t);var i=new Me(e,this);return this.addToStackAtIndex(i,n),i},a.prototype.addStickerFromAssets=function(e,t,n){var i=this;if(!t)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(t),new Promise((function(t,r){var o=new Image;o.onload=function(){var e=new Me({image:o,opacity:1},i);i.addToStackAtIndex(e,n),t(e)},o.onerror=function(e){r(e)},o.crossOrigin=i.config.crossOrigin||null,o.src=i.assetProvider.getAssetSource("sticker",e)}))},a.prototype.addText=function(e,t,i){if(!t)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(e.fontIdentifier||$e))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(t);var r=n({text:"",fontIdentifier:$e,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),o=new Pe(r,this);return this.addToStackAtIndex(o,i),o},a.prototype.addTextWithFontLoading=function(e,t,i){var r=this;if(!t)throw new Error("This engine does not support adding text as root elements.");var o=this.assetProvider.getFontManager(),a=e.fontIdentifier||$e;return new Promise((function(s,l){o.loadFontWithIdentifier(a).then((function(){r.ensureContainerIsRoot(t);var o=n({text:"",fontIdentifier:$e,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),a=new Pe(o,r);r.addToStackAtIndex(a,i),s(a)})).catch(l)}))},a.prototype.addTextDesignAsync=function(e,t,o,a){return void 0===e&&(e="imgly_text_design_blocks"),i(this,void 0,void 0,(function(){var i,s,l,u,c,f,h,p,d=this;return r(this,(function(r){switch(r.label){case 0:if(!o)throw new Error("This engine does not support adding TextDesign as a root element.");if(i=n({seed:Math.floor(1e3*Math.random()),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},t),!(s=this.wrapper.getTextDesignLayoutByID(e)))throw new Error("The layout could not be loaded for the given id: "+e);return l=s.getImagePaths().map((function(e){var t=e.split("/").pop()||"";return{path:e,fullPath:d.assetProvider.getAssetSource("textdesign",t)}})),u=this.wrapper.getTextDesignAssetManager(),c=this.wrapper.getTextDesignFontManager(),f=c.getVariationsByIdentifier(),u.setFonts(f),[4,u.loadImages(l)];case 1:for(p in r.sent(),s.onImagesLoaded(),h=[],f)f.hasOwnProperty(p)&&h.push(p);return[2,this.assetProvider.getFontManager().loadFontsWithIdentifiers(h).then((function(){d.ensureContainerIsRoot(o);var e=new Le(i,s,d);return d.addToStackAtIndex(e,a),Promise.resolve(e)}))]}}))}))},a.prototype.addDrawing=function(e,t,n){if(!t)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(t);var i=new ze(e,this);return this.addToStackAtIndex(i,n),i},a.prototype.addGaussianBlur=function(e,t,n){this.ensureContainerIsRoot(t);var i=new je(e,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(i,n),i},a.prototype.addRadialBlur=function(e,t,n){this.ensureContainerIsRoot(t);var i=new Ge(e,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(i,n),i},a.prototype.addMirroredBlur=function(e,t,n){this.ensureContainerIsRoot(t);var i=new We(e,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(i,n),i},a.prototype.addLinearBlur=function(e,t,n){this.ensureContainerIsRoot(t);var i=new Ve(e,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(i,n),i},a.prototype.addDuoToneFilter=function(e,t,n){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")},a.prototype.addDuoToneFilterFromAssets=function(e,t,n){var i=this;this.ensureContainerIsRoot(t);var r=this.sdk.getOperationsStack().getByIdentifier("filter");if(r&&r.getIdentifier()!==e)throw new Error("This engine doesn't support multiple types of filter operations at once!");var o=r||this.sdk.createOperation("filter",{},!1);return new Promise((function(t,r){try{var a=i.assetProvider.getDuotoneFilterAsset(e),s={colorIntensity:a.defaultIntensity||0},l=new Je({intensity:s.colorIntensity,lightColor:ie.Color.fromHex(a.lightColor),darkColor:ie.Color.fromHex(a.darkColor)}),u=new He(l,o,s,i);i.addToStackAtIndex(u,n),t(u)}catch(e){e&&r(e)}}))},a.prototype.addLUTFilter=function(e,t,n){throw new Error("Not supported! Use addLUTFilterFromAssets instead")},a.prototype.addLUTFilterFromAssets=function(e,t,i){var r=this;this.ensureContainerIsRoot(t);var o=this.sdk.getOperationsStack().getByIdentifier("filter");if(o&&o.getIdentifier()!==e)throw new Error("This engine doesn't support multiple types filter operations at once!");var a=o||this.sdk.createOperation("filter",{},!1);return new Promise((function(t,o){var s=new Image;s.addEventListener("load",(function(){var o=r.assetProvider.getLUTFilterAsset(e),l={horizontalTileCount:o.horizontalTileCount||5,verticalTileCount:o.verticalTileCount||5,intensity:o.defaultIntensity||1},u=new Ke(n({},l,{image:s})),c=n({},l,{lutImage:new Image}),f=new qe(u,a,c,r);r.addToStackAtIndex(f,i),t(f)})),s.addEventListener("error",(function(e){o(e)})),s.crossOrigin=r.config.crossOrigin||null,s.src=r.assetProvider.getAssetSource("filter",e)}))},a.prototype.addAdjustments=function(e,t,n){this.ensureContainerIsRoot(t);var i=new Ye(e,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(i,n),i},a.prototype.addOverlay=function(e,t,n){this.ensureContainerIsRoot(t);var i=new Xe(this.sdk.createOperation("overlay",{},!1),e,this);return this.addToStackAtIndex(i,n),i},a.prototype.addOverlayFromAssets=function(e,t,n){var i=this;return this.ensureContainerIsRoot(t),new Promise((function(t,r){var o=i.sdk.getOperationsStack().getByIdentifier("overlay");if(o&&o.getIdentifier()!==e)throw new Error("This engine doesn't support multiple types overlay operations at once!");var a=o||i.sdk.createOperation("overlay",{},!1),s=new Image;s.onload=function(){var e={image:s,opacity:1,blendMode:k.NORMAL},r=new Xe(a,e,i);i.addToStackAtIndex(r,n),t(r)},s.onerror=function(e){r(e)},s.crossOrigin=i.config.crossOrigin||null,s.src=i.assetProvider.getAssetSource("overlay",e)}))},a.prototype.addFrame=function(e,t,n){throw new Error("Not supported!")},a.prototype.addFrameFromAssets=function(e,t,n){return i(this,void 0,void 0,(function(){var i,o,a,s,l,u,c;return r(this,(function(r){switch(r.label){case 0:if(this.ensureContainerIsRoot(t),!(i=this.assetProvider.getFrameAsset(e)))throw new Error("The requested asset does not exist! "+e);return[4,(o=new Ze(i,this)).load()];case 1:return r.sent(),a=this.getOutputContainer().getBounds(),s=Math.min(a.width,a.height),(l=this.sdk.createOperation("frame",{},!1)).setFrame(o.getFrame()),u={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*s),imageGroups:o.getFrame().imageGroups},c=new Qe(l,u,this),this.addToStackAtIndex(c,n),[2,Promise.resolve(c)]}}))}))},a.prototype.removeEffect=function(e){if(e.isValid()){var t=e.getOperation();this.sdk.removeOperation(t),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}},a.prototype.removeContainer=function(e){if(e.isValid()&&"output"!==e.type){var t=e.getOperation();this.sdk.removeOperation(t),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}},a.prototype.refreshOutputIndex=function(){var e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)},a.prototype.refreshFlipIndex=function(){var e=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),t=this.sdk.getOperationsStack().getStack().length-1;e!==t&&this.moveInOperationsStack(e,t)},a.prototype.mapToRenderType=function(e){switch(e){case y.IMAGE:return"image";case y.DATA_URL:return"data-url";case y.BLOB:return"blob";case y.MSBLOB:return"ms-blob"}},a.prototype.mapToImageFormat=function(e){switch(e){case v.PNG:return"image/png";case v.JPEG:return"image/jpeg";default:return null}},a.prototype.mapBlendMode=function(e){switch(e){case 0:return k.NORMAL;case 1:return k.OVERLAY;case 2:return k.HARD_LIGHT;case 3:return k.SOFT_LIGHT;case 4:return k.MULTIPLY;case 5:return k.DARKEN;case 6:return k.LIGHTEN;case 7:return k.SCREEN;case 8:return k.COLOR_BURN;default:return k.NORMAL}},a.prototype.reverseMapBlendMode=function(e){switch(e){case k.NORMAL:return 0;case k.OVERLAY:return 1;case k.HARD_LIGHT:return 2;case k.SOFT_LIGHT:return 3;case k.MULTIPLY:return 4;case k.DARKEN:return 5;case k.LIGHTEN:return 6;case k.SCREEN:return 7;case k.COLOR_BURN:return 8;default:return 0}},a.prototype.createSpriteOperation=function(){return this.sdk.createOperation("sprite",{},!1)},a.prototype.moveIndex=function(e,t){var n=this.getSiblingIndex(e);if(-1===n)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,n,t);var i=this.operationStackOffset;this.moveInOperationsStack(n+i,t+i),this.refreshFlipIndex()},a.prototype.ensureContainerIsRoot=function(e){if(e.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")},a.prototype.addToStackAtIndex=function(e,t){if(t&&t<0)throw new Error("The given index may not be negative: "+t);void 0===t?this.rootOperationStack.push(e):this.rootOperationStack.splice(t,0,e);var n=this.rootOperationStack.length-1,i=void 0!==t?t:n;i+=this.operationStackOffset,Ee(e),this.insertIntoOperationsStack(e.getOperation(),i),this.sdk.setAllOperationsToDirty()},a.prototype.insertIntoOperationsStack=function(e,t){for(var n=this.sdk.getOperationsStack().getStack(),i=n.length,r=Math.max(Math.min(t,i),0),o=i-1;o>=r;o--){var a=n[o];n[o+1]=a}n[r]=e,this.sdk.setAllOperationsToDirty(),this.refreshFlipIndex()},a.prototype.moveInStack=function(e,t,n){var i=e.length,r=Math.max(Math.min(t,i-1),0),o=Math.max(Math.min(n,i-1),0);if(r!==o){var a=e[r];if(r<o)for(var s=r+1;s<=o;s+=1)e[s-1]=e[s];else for(s=r-1;s>=o;s--)e[s+1]=e[s];e[o]=a}},a.prototype.moveInOperationsStack=function(e,t){var n=this.sdk.getOperationsStack().getStack(),i=n.length,r=Math.min(Math.max(0,e),i-1),o=Math.min(Math.max(0,t),i-1);if(r!==o){var a=n[r];if(r<o)for(var s=r+1;s<=o;s+=1)n[s-1]=n[s];else for(s=r-1;s>=o;s-=1)n[s+1]=n[s];n[o]=a,this.sdk.getOperationsStack().setAllToDirty()}},a.prototype.getSiblingIndex=function(e){return e.getIndexInParent()},a.prototype.resolveAssetForSDK=function(e,t){switch(t=t,e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier)}return""},a}(Oe);export{ve as ConversionUtils,Oe as Engine,ye as EngineEvent,y as ExportFormat,v as ImageFormat,et as LegacyEngineAdapter,Re as Preview,Ce as isContainer,Ee as isEffect,Te as isHex,xe as isRGBAArray,ke as isRGBAObject,we as isRGBArray,be as isRGBObject};
