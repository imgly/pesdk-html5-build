var PhotoEditorSDK=(()=>{var Nxe=Object.create;var Fp=Object.defineProperty;var DL=Object.getOwnPropertyDescriptor;var qxe=Object.getOwnPropertyNames;var Hxe=Object.getPrototypeOf;var Wxe=Object.prototype.hasOwnProperty;var Gxe=(r,e,t)=>e in r?Fp(r,e,{enumerable:true,configurable:true,writable:true,value:t}):r[e]=t;var OL=r=>Fp(r,"__esModule",{value:true});var x=(r=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!=="undefined"?require:e)[t]}):r)(function(r){if(typeof require!=="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var p=(r,e)=>()=>(r&&(e=r(r=0)),e);var C=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var wt=(r,e)=>{for(var t in e)Fp(r,t,{get:e[t],enumerable:true})};var RL=(r,e,t,i)=>{if(e&&typeof e==="object"||typeof e==="function"){for(let o of qxe(e))if(!Wxe.call(r,o)&&(t||o!=="default"))Fp(r,o,{get:()=>e[o],enumerable:!(i=DL(e,o))||i.enumerable})}return r};var v=(r,e)=>{return RL(OL(Fp(r!=null?Nxe(Hxe(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:true}:{value:r,enumerable:true})),r)};var ui=(r=>{return(e,t)=>{return r&&r.get(e)||(t=RL(OL({}),e,1),r&&r.set(e,t),t)}})(typeof WeakMap!=="undefined"?new WeakMap:0);var g=(r,e,t,i)=>{var o=i>1?void 0:i?DL(e,t):e;for(var n=r.length-1,s;n>=0;n--)if(s=r[n])o=(i?s(e,t,o):s(o))||o;if(i&&o)Fp(e,t,o);return o};var ie=(r,e,t)=>{Gxe(r,typeof e!=="symbol"?e+"":e,t);return t};var UL=C((WZe,zL)=>{"use strict";zL.exports=WT;function WT(r){if(!Qn.length){$_();BL=true}Qn[Qn.length]=r}var Qn=[];var BL=false;var $_;var Zn=0;var Vxe=1024;function FL(){while(Zn<Qn.length){var r=Zn;Zn=Zn+1;Qn[r].call();if(Zn>Vxe){for(var e=0,t=Qn.length-Zn;e<t;e++){Qn[e]=Qn[e+Zn]}Qn.length-=Zn;Zn=0}}Qn.length=0;Zn=0;BL=false}var PL=typeof global!=="undefined"?global:self;var ML=PL.MutationObserver||PL.WebKitMutationObserver;if(typeof ML==="function"){$_=jxe(FL)}else{$_=LL(FL)}WT.requestFlush=$_;function jxe(r){var e=1;var t=new ML(r);var i=document.createTextNode("");t.observe(i,{characterData:true});return function o(){e=-e;i.data=e}}function LL(r){return function e(){var t=setTimeout(o,0);var i=setInterval(o,50);function o(){clearTimeout(t);clearInterval(i);r()}}}WT.makeRequestCallFromTimer=LL});var jT=C((GZe,HL)=>{"use strict";var $xe=UL();function X_(){}var Bp=null;var Mp={};function Kxe(r){try{return r.then}catch(e){Bp=e;return Mp}}function Xxe(r,e){try{return r(e)}catch(t){Bp=t;return Mp}}function Yxe(r,e,t){try{r(e,t)}catch(i){Bp=i;return Mp}}HL.exports=io;function io(r){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof r!=="function"){throw new TypeError("Promise constructor's argument is not a function")}this._U=0;this._V=0;this._W=null;this._X=null;if(r===X_)return;qL(r,this)}io._Y=null;io._Z=null;io._0=X_;io.prototype.then=function(r,e){if(this.constructor!==io){return Jxe(this,r,e)}var t=new io(X_);K_(this,new NL(r,e,t));return t};function Jxe(r,e,t){return new r.constructor(function(i,o){var n=new io(X_);n.then(i,o);K_(r,new NL(e,t,n))})}function K_(r,e){while(r._V===3){r=r._W}if(io._Y){io._Y(r)}if(r._V===0){if(r._U===0){r._U=1;r._X=e;return}if(r._U===1){r._U=2;r._X=[r._X,e];return}r._X.push(e);return}Zxe(r,e)}function Zxe(r,e){$xe(function(){var t=r._V===1?e.onFulfilled:e.onRejected;if(t===null){if(r._V===1){GT(e.promise,r._W)}else{Pp(e.promise,r._W)}return}var i=Xxe(t,r._W);if(i===Mp){Pp(e.promise,Bp)}else{GT(e.promise,i)}})}function GT(r,e){if(e===r){return Pp(r,new TypeError("A promise cannot be resolved with itself."))}if(e&&(typeof e==="object"||typeof e==="function")){var t=Kxe(e);if(t===Mp){return Pp(r,Bp)}if(t===r.then&&e instanceof io){r._V=3;r._W=e;VT(r);return}else if(typeof t==="function"){qL(t.bind(e),r);return}}r._V=1;r._W=e;VT(r)}function Pp(r,e){r._V=2;r._W=e;if(io._Z){io._Z(r,e)}VT(r)}function VT(r){if(r._U===1){K_(r,r._X);r._X=null}if(r._U===2){for(var e=0;e<r._X.length;e++){K_(r,r._X[e])}r._X=null}}function NL(r,e,t){this.onFulfilled=typeof r==="function"?r:null;this.onRejected=typeof e==="function"?e:null;this.promise=t}function qL(r,e){var t=false;var i=Yxe(r,function(o){if(t)return;t=true;GT(e,o)},function(o){if(t)return;t=true;Pp(e,o)});if(!t&&i===Mp){t=true;Pp(e,Bp)}}});var jL=C(KT=>{"use strict";var Y_=jT();var WL=[ReferenceError,TypeError,RangeError];var $T=false;KT.disable=VL;function VL(){$T=false;Y_._Y=null;Y_._Z=null}KT.enable=Qxe;function Qxe(r){r=r||{};if($T)VL();$T=true;var e=0;var t=0;var i={};Y_._Y=function(s){if(s._V===2&&i[s._1]){if(i[s._1].logged){n(s._1)}else{clearTimeout(i[s._1].timeout)}delete i[s._1]}};Y_._Z=function(s,a){if(s._U===0){s._1=e++;i[s._1]={displayId:null,error:a,timeout:setTimeout(o.bind(null,s._1),GL(a,WL)?100:2e3),logged:false}}};function o(s){if(r.allRejections||GL(i[s].error,r.whitelist||WL)){i[s].displayId=t++;if(r.onUnhandled){i[s].logged=true;r.onUnhandled(i[s].displayId,i[s].error)}else{i[s].logged=true;e0e(i[s].displayId,i[s].error)}}}function n(s){if(i[s].logged){if(r.onHandled){r.onHandled(i[s].displayId,i[s].error)}else if(!i[s].onUnhandled){console.warn("Promise Rejection Handled (id: "+i[s].displayId+"):");console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+i[s].displayId+".")}}}}function e0e(r,e){console.warn("Possible Unhandled Promise Rejection (id: "+r+"):");var t=(e&&(e.stack||e))+"";t.split("\n").forEach(function(i){console.warn("  "+i)})}function GL(r,e){return e.some(function(t){return r instanceof t})}});var KL=C((jZe,$L)=>{"use strict";var Dr=jT();$L.exports=Dr;var t0e=hc(true);var r0e=hc(false);var i0e=hc(null);var o0e=hc(void 0);var n0e=hc(0);var s0e=hc("");function hc(r){var e=new Dr(Dr._0);e._V=1;e._W=r;return e}Dr.resolve=function(r){if(r instanceof Dr)return r;if(r===null)return i0e;if(r===void 0)return o0e;if(r===true)return t0e;if(r===false)return r0e;if(r===0)return n0e;if(r==="")return s0e;if(typeof r==="object"||typeof r==="function"){try{var e=r.then;if(typeof e==="function"){return new Dr(e.bind(r))}}catch(t){return new Dr(function(i,o){o(t)})}}return hc(r)};var J_=function(r){if(typeof Array.from==="function"){J_=Array.from;return Array.from(r)}J_=function(e){return Array.prototype.slice.call(e)};return Array.prototype.slice.call(r)};Dr.all=function(r){var e=J_(r);return new Dr(function(t,i){if(e.length===0)return t([]);var o=e.length;function n(a,l){if(l&&(typeof l==="object"||typeof l==="function")){if(l instanceof Dr&&l.then===Dr.prototype.then){while(l._V===3){l=l._W}if(l._V===1)return n(a,l._W);if(l._V===2)i(l._W);l.then(function(d){n(a,d)},i);return}else{var u=l.then;if(typeof u==="function"){var c=new Dr(u.bind(l));c.then(function(d){n(a,d)},i);return}}}e[a]=l;if(--o===0){t(e)}}for(var s=0;s<e.length;s++){n(s,e[s])}})};Dr.reject=function(r){return new Dr(function(e,t){t(r)})};Dr.race=function(r){return new Dr(function(e,t){J_(r).forEach(function(i){Dr.resolve(i).then(e,t)})})};Dr.prototype["catch"]=function(r){return this.then(null,r)}});var YL=C((Z_,XL)=>{(function(r,e){typeof Z_==="object"&&typeof XL!=="undefined"?e(Z_):typeof define==="function"&&define.amd?define(["exports"],e):e(r.WHATWGFetch={})})(Z_,function(r){"use strict";var e=typeof globalThis!=="undefined"&&globalThis||typeof self!=="undefined"&&self||typeof e!=="undefined"&&e;var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(R){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function i(R){return R&&DataView.prototype.isPrototypeOf(R)}if(t.arrayBuffer){var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var n=ArrayBuffer.isView||function(R){return R&&o.indexOf(Object.prototype.toString.call(R))>-1}}function s(R){if(typeof R!=="string"){R=String(R)}if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R===""){throw new TypeError("Invalid character in header field name")}return R.toLowerCase()}function a(R){if(typeof R!=="string"){R=String(R)}return R}function l(R){var M={next:function(){var oe=R.shift();return{done:oe===void 0,value:oe}}};if(t.iterable){M[Symbol.iterator]=function(){return M}}return M}function u(R){this.map={};if(R instanceof u){R.forEach(function(M,oe){this.append(oe,M)},this)}else if(Array.isArray(R)){R.forEach(function(M){this.append(M[0],M[1])},this)}else if(R){Object.getOwnPropertyNames(R).forEach(function(M){this.append(M,R[M])},this)}}u.prototype.append=function(R,M){R=s(R);M=a(M);var oe=this.map[R];this.map[R]=oe?oe+", "+M:M};u.prototype["delete"]=function(R){delete this.map[s(R)]};u.prototype.get=function(R){R=s(R);return this.has(R)?this.map[R]:null};u.prototype.has=function(R){return this.map.hasOwnProperty(s(R))};u.prototype.set=function(R,M){this.map[s(R)]=a(M)};u.prototype.forEach=function(R,M){for(var oe in this.map){if(this.map.hasOwnProperty(oe)){R.call(M,this.map[oe],oe,this)}}};u.prototype.keys=function(){var R=[];this.forEach(function(M,oe){R.push(oe)});return l(R)};u.prototype.values=function(){var R=[];this.forEach(function(M){R.push(M)});return l(R)};u.prototype.entries=function(){var R=[];this.forEach(function(M,oe){R.push([oe,M])});return l(R)};if(t.iterable){u.prototype[Symbol.iterator]=u.prototype.entries}function c(R){if(R.bodyUsed){return Promise.reject(new TypeError("Already read"))}R.bodyUsed=true}function d(R){return new Promise(function(M,oe){R.onload=function(){M(R.result)};R.onerror=function(){oe(R.error)}})}function m(R){var M=new FileReader;var oe=d(M);M.readAsArrayBuffer(R);return oe}function h(R){var M=new FileReader;var oe=d(M);M.readAsText(R);return oe}function f(R){var M=new Uint8Array(R);var oe=new Array(M.length);for(var ce=0;ce<M.length;ce++){oe[ce]=String.fromCharCode(M[ce])}return oe.join("")}function b(R){if(R.slice){return R.slice(0)}else{var M=new Uint8Array(R.byteLength);M.set(new Uint8Array(R));return M.buffer}}function _(){this.bodyUsed=false;this._initBody=function(R){this.bodyUsed=this.bodyUsed;this._bodyInit=R;if(!R){this._bodyText=""}else if(typeof R==="string"){this._bodyText=R}else if(t.blob&&Blob.prototype.isPrototypeOf(R)){this._bodyBlob=R}else if(t.formData&&FormData.prototype.isPrototypeOf(R)){this._bodyFormData=R}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)){this._bodyText=R.toString()}else if(t.arrayBuffer&&t.blob&&i(R)){this._bodyArrayBuffer=b(R.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||n(R))){this._bodyArrayBuffer=b(R)}else{this._bodyText=R=Object.prototype.toString.call(R)}if(!this.headers.get("content-type")){if(typeof R==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(t.blob){this.blob=function(){var R=c(this);if(R){return R}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=c(this);if(R){return R}if(ArrayBuffer.isView(this._bodyArrayBuffer)){return Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength))}else{return Promise.resolve(this._bodyArrayBuffer)}}else{return this.blob().then(m)}}}this.text=function(){var R=c(this);if(R){return R}if(this._bodyBlob){return h(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(f(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(t.formData){this.formData=function(){return this.text().then(D)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(R){var M=R.toUpperCase();return y.indexOf(M)>-1?M:R}function T(R,M){if(!(this instanceof T)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}M=M||{};var oe=M.body;if(R instanceof T){if(R.bodyUsed){throw new TypeError("Already read")}this.url=R.url;this.credentials=R.credentials;if(!M.headers){this.headers=new u(R.headers)}this.method=R.method;this.mode=R.mode;this.signal=R.signal;if(!oe&&R._bodyInit!=null){oe=R._bodyInit;R.bodyUsed=true}}else{this.url=String(R)}this.credentials=M.credentials||this.credentials||"same-origin";if(M.headers||!this.headers){this.headers=new u(M.headers)}this.method=I(M.method||this.method||"GET");this.mode=M.mode||this.mode||null;this.signal=M.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&oe){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(oe);if(this.method==="GET"||this.method==="HEAD"){if(M.cache==="no-store"||M.cache==="no-cache"){var ce=/([?&])_=[^&]*/;if(ce.test(this.url)){this.url=this.url.replace(ce,"$1_="+new Date().getTime())}else{var ue=/\?/;this.url+=(ue.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function D(R){var M=new FormData;R.trim().split("&").forEach(function(oe){if(oe){var ce=oe.split("=");var ue=ce.shift().replace(/\+/g," ");var Se=ce.join("=").replace(/\+/g," ");M.append(decodeURIComponent(ue),decodeURIComponent(Se))}});return M}function P(R){var M=new u;var oe=R.replace(/\r?\n[\t ]+/g," ");oe.split(/\r?\n/).forEach(function(ce){var ue=ce.split(":");var Se=ue.shift().trim();if(Se){var Pt=ue.join(":").trim();M.append(Se,Pt)}});return M}_.call(T.prototype);function k(R,M){if(!(this instanceof k)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}if(!M){M={}}this.type="default";this.status=M.status===void 0?200:M.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in M?M.statusText:"";this.headers=new u(M.headers);this.url=M.url||"";this._initBody(R)}_.call(k.prototype);k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})};k.error=function(){var R=new k(null,{status:0,statusText:""});R.type="error";return R};var A=[301,302,303,307,308];k.redirect=function(R,M){if(A.indexOf(M)===-1){throw new RangeError("Invalid status code")}return new k(null,{status:M,headers:{location:R}})};r.DOMException=e.DOMException;try{new r.DOMException}catch(R){r.DOMException=function(M,oe){this.message=M;this.name=oe;var ce=Error(M);this.stack=ce.stack};r.DOMException.prototype=Object.create(Error.prototype);r.DOMException.prototype.constructor=r.DOMException}function Q(R,M){return new Promise(function(oe,ce){var ue=new T(R,M);if(ue.signal&&ue.signal.aborted){return ce(new r.DOMException("Aborted","AbortError"))}var Se=new XMLHttpRequest;function Pt(){Se.abort()}Se.onload=function(){var V={status:Se.status,statusText:Se.statusText,headers:P(Se.getAllResponseHeaders()||"")};V.url="responseURL"in Se?Se.responseURL:V.headers.get("X-Request-URL");var j="response"in Se?Se.response:Se.responseText;setTimeout(function(){oe(new k(j,V))},0)};Se.onerror=function(){setTimeout(function(){ce(new TypeError("Network request failed"))},0)};Se.ontimeout=function(){setTimeout(function(){ce(new TypeError("Network request failed"))},0)};Se.onabort=function(){setTimeout(function(){ce(new r.DOMException("Aborted","AbortError"))},0)};function ee(V){try{return V===""&&e.location.href?e.location.href:V}catch(j){return V}}Se.open(ue.method,ee(ue.url),true);if(ue.credentials==="include"){Se.withCredentials=true}else if(ue.credentials==="omit"){Se.withCredentials=false}if("responseType"in Se){if(t.blob){Se.responseType="blob"}else if(t.arrayBuffer&&ue.headers.get("Content-Type")&&ue.headers.get("Content-Type").indexOf("application/octet-stream")!==-1){Se.responseType="arraybuffer"}}if(M&&typeof M.headers==="object"&&!(M.headers instanceof u)){Object.getOwnPropertyNames(M.headers).forEach(function(V){Se.setRequestHeader(V,a(M.headers[V]))})}else{ue.headers.forEach(function(V,j){Se.setRequestHeader(j,V)})}if(ue.signal){ue.signal.addEventListener("abort",Pt);Se.onreadystatechange=function(){if(Se.readyState===4){ue.signal.removeEventListener("abort",Pt)}}}Se.send(typeof ue._bodyInit==="undefined"?null:ue._bodyInit)})}Q.polyfill=true;if(!e.fetch){e.fetch=Q;e.Headers=u;e.Request=T;e.Response=k}r.Headers=u;r.Request=T;r.Response=k;r.fetch=Q;Object.defineProperty(r,"__esModule",{value:true})})});var QL=C(($Ze,ZL)=>{"use strict";var JL=Object.getOwnPropertySymbols;var a0e=Object.prototype.hasOwnProperty;var l0e=Object.prototype.propertyIsEnumerable;function u0e(r){if(r===null||r===void 0){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(r)}function c0e(){try{if(!Object.assign){return false}var r=new String("abc");r[5]="de";if(Object.getOwnPropertyNames(r)[0]==="5"){return false}var e={};for(var t=0;t<10;t++){e["_"+String.fromCharCode(t)]=t}var i=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if(i.join("")!=="0123456789"){return false}var o={};"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n});if(Object.keys(Object.assign({},o)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(n){return false}}ZL.exports=c0e()?Object.assign:function(r,e){var t;var i=u0e(r);var o;for(var n=1;n<arguments.length;n++){t=Object(arguments[n]);for(var s in t){if(a0e.call(t,s)){i[s]=t[s]}}if(JL){o=JL(t);for(var a=0;a<o.length;a++){if(l0e.call(t,o[a])){i[o[a]]=t[o[a]]}}}}return i}});var Le=C((KZe,e4)=>{var Q_=function(r){return r&&r.Math==Math&&r};e4.exports=Q_(typeof globalThis=="object"&&globalThis)||Q_(typeof window=="object"&&window)||Q_(typeof self=="object"&&self)||Q_(typeof global=="object"&&global)||Function("return this")()});var Te=C((XZe,t4)=>{t4.exports=function(r){try{return!!r()}catch(e){return true}}});var nt=C((YZe,r4)=>{var d0e=Te();r4.exports=!d0e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})});var Tf=C(n4=>{"use strict";var i4={}.propertyIsEnumerable;var o4=Object.getOwnPropertyDescriptor;var p0e=o4&&!i4.call({1:2},1);n4.f=p0e?function r(e){var t=o4(this,e);return!!t&&t.enumerable}:i4});var da=C((ZZe,s4)=>{s4.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var oo=C((QZe,a4)=>{var m0e={}.toString;a4.exports=function(r){return m0e.call(r).slice(8,-1)}});var Lp=C((eQe,l4)=>{var h0e=Te();var f0e=oo();var g0e="".split;l4.exports=h0e(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return f0e(r)=="String"?g0e.call(r,""):Object(r)}:Object});var Kr=C((tQe,u4)=>{u4.exports=function(r){if(r==void 0)throw TypeError("Can't call method on "+r);return r}});var Ri=C((rQe,c4)=>{var y0e=Lp();var b0e=Kr();c4.exports=function(r){return y0e(b0e(r))}});var Ze=C((iQe,d4)=>{d4.exports=function(r){return typeof r==="object"?r!==null:typeof r==="function"}});var Mo=C((oQe,p4)=>{var ev=Ze();p4.exports=function(r,e){if(!ev(r))return r;var t,i;if(e&&typeof(t=r.toString)=="function"&&!ev(i=t.call(r)))return i;if(typeof(t=r.valueOf)=="function"&&!ev(i=t.call(r)))return i;if(!e&&typeof(t=r.toString)=="function"&&!ev(i=t.call(r)))return i;throw TypeError("Can't convert object to primitive value")}});var Zt=C((nQe,m4)=>{var _0e={}.hasOwnProperty;m4.exports=function(r,e){return _0e.call(r,e)}});var tv=C((sQe,f4)=>{var v0e=Le();var h4=Ze();var XT=v0e.document;var x0e=h4(XT)&&h4(XT.createElement);f4.exports=function(r){return x0e?XT.createElement(r):{}}});var YT=C((aQe,g4)=>{var C0e=nt();var S0e=Te();var w0e=tv();g4.exports=!C0e&&!S0e(function(){return Object.defineProperty(w0e("div"),"a",{get:function(){return 7}}).a!=7})});var Lr=C(b4=>{var T0e=nt();var I0e=Tf();var E0e=da();var k0e=Ri();var D0e=Mo();var O0e=Zt();var R0e=YT();var y4=Object.getOwnPropertyDescriptor;b4.f=T0e?y4:function r(e,t){e=k0e(e);t=D0e(t,true);if(R0e)try{return y4(e,t)}catch(i){}if(O0e(e,t))return E0e(!I0e.f.call(e,t),e[t])}});var rt=C((uQe,_4)=>{var A0e=Ze();_4.exports=function(r){if(!A0e(r)){throw TypeError(String(r)+" is not an object")}return r}});var Tt=C(C4=>{var F0e=nt();var P0e=YT();var v4=rt();var B0e=Mo();var x4=Object.defineProperty;C4.f=F0e?x4:function r(e,t,i){v4(e);t=B0e(t,true);v4(i);if(P0e)try{return x4(e,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");if("value"in i)e[t]=i.value;return e}});var Xr=C((dQe,S4)=>{var M0e=nt();var L0e=Tt();var z0e=da();S4.exports=M0e?function(r,e,t){return L0e.f(r,e,z0e(1,t))}:function(r,e,t){r[e]=t;return r}});var rv=C((pQe,T4)=>{var w4=Le();var U0e=Xr();T4.exports=function(r,e){try{U0e(w4,r,e)}catch(t){w4[r]=e}return e}});var JT=C((mQe,E4)=>{var N0e=Le();var q0e=rv();var I4="__core-js_shared__";var H0e=N0e[I4]||q0e(I4,{});E4.exports=H0e});var iv=C((hQe,k4)=>{var ZT=JT();var W0e=Function.toString;if(typeof ZT.inspectSource!="function"){ZT.inspectSource=function(r){return W0e.call(r)}}k4.exports=ZT.inspectSource});var QT=C((fQe,O4)=>{var G0e=Le();var V0e=iv();var D4=G0e.WeakMap;O4.exports=typeof D4==="function"&&/native code/.test(V0e(D4))});var Lo=C((gQe,R4)=>{R4.exports=false});var ov=C((yQe,F4)=>{var j0e=Lo();var A4=JT();(F4.exports=function(r,e){return A4[r]||(A4[r]=e!==void 0?e:{})})("versions",[]).push({version:"3.6.5",mode:j0e?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var zp=C((bQe,P4)=>{var $0e=0;var K0e=Math.random();P4.exports=function(r){return"Symbol("+String(r===void 0?"":r)+")_"+(++$0e+K0e).toString(36)}});var If=C((_Qe,M4)=>{var X0e=ov();var Y0e=zp();var B4=X0e("keys");M4.exports=function(r){return B4[r]||(B4[r]=Y0e(r))}});var Up=C((vQe,L4)=>{L4.exports={}});var Yr=C((xQe,H4)=>{var J0e=QT();var Z0e=Le();var Q0e=Ze();var eCe=Xr();var z4=Zt();var tCe=If();var rCe=Up();var iCe=Z0e.WeakMap;var nv;var Ef;var sv;var oCe=function(r){return sv(r)?Ef(r):nv(r,{})};var nCe=function(r){return function(e){var t;if(!Q0e(e)||(t=Ef(e)).type!==r){throw TypeError("Incompatible receiver, "+r+" required")}return t}};if(J0e){fc=new iCe;U4=fc.get;N4=fc.has;q4=fc.set;nv=function(r,e){q4.call(fc,r,e);return e};Ef=function(r){return U4.call(fc,r)||{}};sv=function(r){return N4.call(fc,r)}}else{Np=tCe("state");rCe[Np]=true;nv=function(r,e){eCe(r,Np,e);return e};Ef=function(r){return z4(r,Np)?r[Np]:{}};sv=function(r){return z4(r,Np)}}var fc;var U4;var N4;var q4;var Np;H4.exports={set:nv,get:Ef,has:sv,enforce:oCe,getterFor:nCe}});var zr=C((CQe,V4)=>{var sCe=Le();var W4=Xr();var aCe=Zt();var lCe=rv();var uCe=iv();var G4=Yr();var cCe=G4.get;var dCe=G4.enforce;var pCe=String(String).split("String");(V4.exports=function(r,e,t,i){var o=i?!!i.unsafe:false;var n=i?!!i.enumerable:false;var s=i?!!i.noTargetGet:false;if(typeof t=="function"){if(typeof e=="string"&&!aCe(t,"name"))W4(t,"name",e);dCe(t).source=pCe.join(typeof e=="string"?e:"")}if(r===sCe){if(n)r[e]=t;else lCe(e,t);return}else if(!o){delete r[e]}else if(!s&&r[e]){n=true}if(n)r[e]=t;else W4(r,e,t)})(Function.prototype,"toString",function r(){return typeof this=="function"&&cCe(this).source||uCe(this)})});var Bl=C((SQe,j4)=>{var mCe=Le();j4.exports=mCe});var no=C((wQe,K4)=>{var e2=Bl();var t2=Le();var $4=function(r){return typeof r=="function"?r:void 0};K4.exports=function(r,e){return arguments.length<2?$4(e2[r])||$4(t2[r]):e2[r]&&e2[r][e]||t2[r]&&t2[r][e]}});var so=C((TQe,X4)=>{var hCe=Math.ceil;var fCe=Math.floor;X4.exports=function(r){return isNaN(r=+r)?0:(r>0?fCe:hCe)(r)}});var gt=C((IQe,Y4)=>{var gCe=so();var yCe=Math.min;Y4.exports=function(r){return r>0?yCe(gCe(r),9007199254740991):0}});var pa=C((EQe,J4)=>{var bCe=so();var _Ce=Math.max;var vCe=Math.min;J4.exports=function(r,e){var t=bCe(r);return t<0?_Ce(t+e,0):vCe(t,e)}});var qp=C((kQe,Q4)=>{var xCe=Ri();var CCe=gt();var SCe=pa();var Z4=function(r){return function(e,t,i){var o=xCe(e);var n=CCe(o.length);var s=SCe(i,n);var a;if(r&&t!=t)while(n>s){a=o[s++];if(a!=a)return true}else for(;n>s;s++){if((r||s in o)&&o[s]===t)return r||s||0}return!r&&-1}};Q4.exports={includes:Z4(true),indexOf:Z4(false)}});var i2=C((DQe,e3)=>{var r2=Zt();var wCe=Ri();var TCe=qp().indexOf;var ICe=Up();e3.exports=function(r,e){var t=wCe(r);var i=0;var o=[];var n;for(n in t)!r2(ICe,n)&&r2(t,n)&&o.push(n);while(e.length>i)if(r2(t,n=e[i++])){~TCe(o,n)||o.push(n)}return o}});var av=C((OQe,t3)=>{t3.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Ml=C(r3=>{var ECe=i2();var kCe=av();var DCe=kCe.concat("length","prototype");r3.f=Object.getOwnPropertyNames||function r(e){return ECe(e,DCe)}});var lv=C(i3=>{i3.f=Object.getOwnPropertySymbols});var uv=C((FQe,o3)=>{var OCe=no();var RCe=Ml();var ACe=lv();var FCe=rt();o3.exports=OCe("Reflect","ownKeys")||function r(e){var t=RCe.f(FCe(e));var i=ACe.f;return i?t.concat(i(e)):t}});var o2=C((PQe,n3)=>{var PCe=Zt();var BCe=uv();var MCe=Lr();var LCe=Tt();n3.exports=function(r,e){var t=BCe(e);var i=LCe.f;var o=MCe.f;for(var n=0;n<t.length;n++){var s=t[n];if(!PCe(r,s))i(r,s,o(e,s))}}});var Hp=C((BQe,s3)=>{var zCe=Te();var UCe=/#|\.prototype\./;var kf=function(r,e){var t=qCe[NCe(r)];return t==WCe?true:t==HCe?false:typeof e=="function"?zCe(e):!!e};var NCe=kf.normalize=function(r){return String(r).replace(UCe,".").toLowerCase()};var qCe=kf.data={};var HCe=kf.NATIVE="N";var WCe=kf.POLYFILL="P";s3.exports=kf});var U=C((MQe,a3)=>{var n2=Le();var GCe=Lr().f;var VCe=Xr();var jCe=zr();var $Ce=rv();var KCe=o2();var XCe=Hp();a3.exports=function(r,e){var t=r.target;var i=r.global;var o=r.stat;var n,s,a,l,u,c;if(i){s=n2}else if(o){s=n2[t]||$Ce(t,{})}else{s=(n2[t]||{}).prototype}if(s)for(a in e){u=e[a];if(r.noTargetGet){c=GCe(s,a);l=c&&c.value}else l=s[a];n=XCe(i?a:t+(o?".":"#")+a,r.forced);if(!n&&l!==void 0){if(typeof u===typeof l)continue;KCe(u,l)}if(r.sham||l&&l.sham){VCe(u,"sham",true)}jCe(s,a,u,r)}}});var Ll=C((LQe,l3)=>{var YCe=oo();l3.exports=Array.isArray||function r(e){return YCe(e)=="Array"}});var Vt=C((zQe,u3)=>{var JCe=Kr();u3.exports=function(r){return Object(JCe(r))}});var zl=C((UQe,c3)=>{"use strict";var ZCe=Mo();var QCe=Tt();var eSe=da();c3.exports=function(r,e,t){var i=ZCe(e);if(i in r)QCe.f(r,i,eSe(0,t));else r[i]=t}});var cv=C((NQe,d3)=>{var tSe=Te();d3.exports=!!Object.getOwnPropertySymbols&&!tSe(function(){return!String(Symbol())})});var s2=C((qQe,p3)=>{var rSe=cv();p3.exports=rSe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var ht=C((HQe,h3)=>{var iSe=Le();var oSe=ov();var m3=Zt();var nSe=zp();var sSe=cv();var aSe=s2();var dv=oSe("wks");var Df=iSe.Symbol;var lSe=aSe?Df:Df&&Df.withoutSetter||nSe;h3.exports=function(r){if(!m3(dv,r)){if(sSe&&m3(Df,r))dv[r]=Df[r];else dv[r]=lSe("Symbol."+r)}return dv[r]}});var Wp=C((WQe,g3)=>{var uSe=Ze();var f3=Ll();var cSe=ht();var dSe=cSe("species");g3.exports=function(r,e){var t;if(f3(r)){t=r.constructor;if(typeof t=="function"&&(t===Array||f3(t.prototype)))t=void 0;else if(uSe(t)){t=t[dSe];if(t===null)t=void 0}}return new(t===void 0?Array:t)(e===0?0:e)}});var Of=C((GQe,y3)=>{var pSe=no();y3.exports=pSe("navigator","userAgent")||""});var mv=C((VQe,x3)=>{var mSe=Le();var a2=Of();var b3=mSe.process;var _3=b3&&b3.versions;var v3=_3&&_3.v8;var ma;var pv;if(v3){ma=v3.split(".");pv=ma[0]+ma[1]}else if(a2){ma=a2.match(/Edge\/(\d+)/);if(!ma||ma[1]>=74){ma=a2.match(/Chrome\/(\d+)/);if(ma)pv=ma[1]}}x3.exports=pv&&+pv});var Gp=C((jQe,C3)=>{var hSe=Te();var fSe=ht();var gSe=mv();var ySe=fSe("species");C3.exports=function(r){return gSe>=51||!hSe(function(){var e=[];var t=e.constructor={};t[ySe]=function(){return{foo:1}};return e[r](Boolean).foo!==1})}});var l2=C(()=>{"use strict";var bSe=U();var _Se=Te();var vSe=Ll();var xSe=Ze();var CSe=Vt();var SSe=gt();var S3=zl();var wSe=Wp();var TSe=Gp();var ISe=ht();var ESe=mv();var I3=ISe("isConcatSpreadable");var w3=9007199254740991;var T3="Maximum allowed index exceeded";var kSe=ESe>=51||!_Se(function(){var r=[];r[I3]=false;return r.concat()[0]!==r});var DSe=TSe("concat");var OSe=function(r){if(!xSe(r))return false;var e=r[I3];return e!==void 0?!!e:vSe(r)};var RSe=!kSe||!DSe;bSe({target:"Array",proto:true,forced:RSe},{concat:function r(e){var t=CSe(this);var i=wSe(t,0);var o=0;var n,s,a,l,u;for(n=-1,a=arguments.length;n<a;n++){u=n===-1?t:arguments[n];if(OSe(u)){l=SSe(u.length);if(o+l>w3)throw TypeError(T3);for(s=0;s<l;s++,o++)if(s in u)S3(i,o,u[s])}else{if(o>=w3)throw TypeError(T3);S3(i,o++,u)}}i.length=o;return i}})});var hv=C((XQe,k3)=>{var ASe=ht();var FSe=ASe("toStringTag");var E3={};E3[FSe]="z";k3.exports=String(E3)==="[object z]"});var Vp=C((YQe,D3)=>{var PSe=hv();var fv=oo();var BSe=ht();var MSe=BSe("toStringTag");var LSe=fv(function(){return arguments}())=="Arguments";var zSe=function(r,e){try{return r[e]}catch(t){}};D3.exports=PSe?fv:function(r){var e,t,i;return r===void 0?"Undefined":r===null?"Null":typeof(t=zSe(e=Object(r),MSe))=="string"?t:LSe?fv(e):(i=fv(e))=="Object"&&typeof e.callee=="function"?"Arguments":i}});var R3=C((JQe,O3)=>{"use strict";var USe=hv();var NSe=Vp();O3.exports=USe?{}.toString:function r(){return"[object "+NSe(this)+"]"}});var u2=C(()=>{var qSe=hv();var HSe=zr();var WSe=R3();if(!qSe){HSe(Object.prototype,"toString",WSe,{unsafe:true})}});var jp=C((eet,A3)=>{var GSe=i2();var VSe=av();A3.exports=Object.keys||function r(e){return GSe(e,VSe)}});var gv=C((tet,F3)=>{var jSe=nt();var $Se=Tt();var KSe=rt();var XSe=jp();F3.exports=jSe?Object.defineProperties:function r(e,t){KSe(e);var i=XSe(t);var o=i.length;var n=0;var s;while(o>n)$Se.f(e,s=i[n++],t[s]);return e}});var c2=C((ret,P3)=>{var YSe=no();P3.exports=YSe("document","documentElement")});var es=C((iet,N3)=>{var JSe=rt();var ZSe=gv();var B3=av();var QSe=Up();var e1e=c2();var t1e=tv();var r1e=If();var M3=">";var L3="<";var m2="prototype";var h2="script";var z3=r1e("IE_PROTO");var d2=function(){};var U3=function(r){return L3+h2+M3+r+L3+"/"+h2+M3};var i1e=function(r){r.write(U3(""));r.close();var e=r.parentWindow.Object;r=null;return e};var o1e=function(){var r=t1e("iframe");var e="java"+h2+":";var t;r.style.display="none";e1e.appendChild(r);r.src=String(e);t=r.contentWindow.document;t.open();t.write(U3("document.F=Object"));t.close();return t.F};var p2;var yv=function(){try{p2=document.domain&&new ActiveXObject("htmlfile")}catch(e){}yv=p2?i1e(p2):o1e();var r=B3.length;while(r--)delete yv[m2][B3[r]];return yv()};QSe[z3]=true;N3.exports=Object.create||function r(e,t){var i;if(e!==null){d2[m2]=JSe(e);i=new d2;d2[m2]=null;i[z3]=e}else i=yv();return t===void 0?i:ZSe(i,t)}});var f2=C((oet,W3)=>{var n1e=Ri();var q3=Ml().f;var s1e={}.toString;var H3=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a1e=function(r){try{return q3(r)}catch(e){return H3.slice()}};W3.exports.f=function r(e){return H3&&s1e.call(e)=="[object Window]"?a1e(e):q3(n1e(e))}});var g2=C(G3=>{var l1e=ht();G3.f=l1e});var mr=C((set,j3)=>{var V3=Bl();var u1e=Zt();var c1e=g2();var d1e=Tt().f;j3.exports=function(r){var e=V3.Symbol||(V3.Symbol={});if(!u1e(e,r))d1e(e,r,{value:c1e.f(r)})}});var mn=C((aet,K3)=>{var p1e=Tt().f;var m1e=Zt();var h1e=ht();var $3=h1e("toStringTag");K3.exports=function(r,e,t){if(r&&!m1e(r=t?r:r.prototype,$3)){p1e(r,$3,{configurable:true,value:e})}}});var ci=C((uet,X3)=>{X3.exports=function(r){if(typeof r!="function"){throw TypeError(String(r)+" is not a function")}return r}});var ts=C((cet,Y3)=>{var f1e=ci();Y3.exports=function(r,e,t){f1e(r);if(e===void 0)return r;switch(t){case 0:return function(){return r.call(e)};case 1:return function(i){return r.call(e,i)};case 2:return function(i,o){return r.call(e,i,o)};case 3:return function(i,o,n){return r.call(e,i,o,n)}}return function(){return r.apply(e,arguments)}}});var Or=C((det,J3)=>{var g1e=ts();var y1e=Lp();var b1e=Vt();var _1e=gt();var v1e=Wp();var x1e=[].push;var gc=function(r){var e=r==1;var t=r==2;var i=r==3;var o=r==4;var n=r==6;var s=r==5||n;return function(a,l,u,c){var d=b1e(a);var m=y1e(d);var h=g1e(l,u,3);var f=_1e(m.length);var b=0;var _=c||v1e;var y=e?_(a,f):t?_(a,0):void 0;var I,T;for(;f>b;b++)if(s||b in m){I=m[b];T=h(I,b,d);if(r){if(e)y[b]=T;else if(T)switch(r){case 3:return true;case 5:return I;case 6:return b;case 2:x1e.call(y,I)}else if(o)return false}}return n?-1:i||o?o:y}};J3.exports={forEach:gc(0),map:gc(1),filter:gc(2),some:gc(3),every:gc(4),find:gc(5),findIndex:gc(6)}});var A2=C(()=>{"use strict";var Kp=U();var rz=Le();var C1e=no();var S1e=Lo();var $p=nt();var yc=cv();var w1e=s2();var D2=Te();var hr=Zt();var T1e=Ll();var I1e=Ze();var C2=rt();var E1e=Vt();var bv=Ri();var O2=Mo();var S2=da();var Af=es();var iz=jp();var k1e=Ml();var oz=f2();var w2=lv();var nz=Lr();var sz=Tt();var az=Tf();var D1e=Xr();var y2=zr();var Ff=ov();var O1e=If();var lz=Up();var Z3=zp();var uz=ht();var R1e=g2();var A1e=mr();var F1e=mn();var cz=Yr();var _v=Or().forEach;var Ai=O1e("hidden");var vv="Symbol";var ha="prototype";var Q3=uz("toPrimitive");var P1e=cz.set;var ez=cz.getterFor(vv);var zo=Object[ha];var Fi=rz.Symbol;var Rf=C1e("JSON","stringify");var dz=nz.f;var Ul=sz.f;var pz=oz.f;var B1e=az.f;var fa=Ff("symbols");var Pf=Ff("op-symbols");var b2=Ff("string-to-symbol-registry");var _2=Ff("symbol-to-string-registry");var M1e=Ff("wks");var v2=rz.QObject;var T2=!v2||!v2[ha]||!v2[ha].findChild;var I2=$p&&D2(function(){return Af(Ul({},"a",{get:function(){return Ul(this,"a",{value:7}).a}})).a!=7})?function(r,e,t){var i=dz(zo,e);if(i)delete zo[e];Ul(r,e,t);if(i&&r!==zo){Ul(zo,e,i)}}:Ul;var x2=function(r,e){var t=fa[r]=Af(Fi[ha]);P1e(t,{type:vv,tag:r,description:e});if(!$p)t.description=e;return t};var E2=w1e?function(r){return typeof r=="symbol"}:function(r){return Object(r)instanceof Fi};var xv=function r(e,t,i){if(e===zo)xv(Pf,t,i);C2(e);var o=O2(t,true);C2(i);if(hr(fa,o)){if(!i.enumerable){if(!hr(e,Ai))Ul(e,Ai,S2(1,{}));e[Ai][o]=true}else{if(hr(e,Ai)&&e[Ai][o])e[Ai][o]=false;i=Af(i,{enumerable:S2(0,false)})}return I2(e,o,i)}return Ul(e,o,i)};var mz=function r(e,t){C2(e);var i=bv(t);var o=iz(i).concat(R2(i));_v(o,function(n){if(!$p||k2.call(i,n))xv(e,n,i[n])});return e};var L1e=function r(e,t){return t===void 0?Af(e):mz(Af(e),t)};var k2=function r(e){var t=O2(e,true);var i=B1e.call(this,t);if(this===zo&&hr(fa,t)&&!hr(Pf,t))return false;return i||!hr(this,t)||!hr(fa,t)||hr(this,Ai)&&this[Ai][t]?i:true};var hz=function r(e,t){var i=bv(e);var o=O2(t,true);if(i===zo&&hr(fa,o)&&!hr(Pf,o))return;var n=dz(i,o);if(n&&hr(fa,o)&&!(hr(i,Ai)&&i[Ai][o])){n.enumerable=true}return n};var fz=function r(e){var t=pz(bv(e));var i=[];_v(t,function(o){if(!hr(fa,o)&&!hr(lz,o))i.push(o)});return i};var R2=function r(e){var t=e===zo;var i=pz(t?Pf:bv(e));var o=[];_v(i,function(n){if(hr(fa,n)&&(!t||hr(zo,n))){o.push(fa[n])}});return o};if(!yc){Fi=function r(){if(this instanceof Fi)throw TypeError("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]);var t=Z3(e);var i=function(o){if(this===zo)i.call(Pf,o);if(hr(this,Ai)&&hr(this[Ai],t))this[Ai][t]=false;I2(this,t,S2(1,o))};if($p&&T2)I2(zo,t,{configurable:true,set:i});return x2(t,e)};y2(Fi[ha],"toString",function r(){return ez(this).tag});y2(Fi,"withoutSetter",function(r){return x2(Z3(r),r)});az.f=k2;sz.f=xv;nz.f=hz;k1e.f=oz.f=fz;w2.f=R2;R1e.f=function(r){return x2(uz(r),r)};if($p){Ul(Fi[ha],"description",{configurable:true,get:function r(){return ez(this).description}});if(!S1e){y2(zo,"propertyIsEnumerable",k2,{unsafe:true})}}}Kp({global:true,wrap:true,forced:!yc,sham:!yc},{Symbol:Fi});_v(iz(M1e),function(r){A1e(r)});Kp({target:vv,stat:true,forced:!yc},{"for":function(r){var e=String(r);if(hr(b2,e))return b2[e];var t=Fi(e);b2[e]=t;_2[t]=e;return t},keyFor:function r(e){if(!E2(e))throw TypeError(e+" is not a symbol");if(hr(_2,e))return _2[e]},useSetter:function(){T2=true},useSimple:function(){T2=false}});Kp({target:"Object",stat:true,forced:!yc,sham:!$p},{create:L1e,defineProperty:xv,defineProperties:mz,getOwnPropertyDescriptor:hz});Kp({target:"Object",stat:true,forced:!yc},{getOwnPropertyNames:fz,getOwnPropertySymbols:R2});Kp({target:"Object",stat:true,forced:D2(function(){w2.f(1)})},{getOwnPropertySymbols:function r(e){return w2.f(E1e(e))}});if(Rf){tz=!yc||D2(function(){var r=Fi();return Rf([r])!="[null]"||Rf({a:r})!="{}"||Rf(Object(r))!="{}"});Kp({target:"JSON",stat:true,forced:tz},{stringify:function r(e,t,i){var o=[e];var n=1;var s;while(arguments.length>n)o.push(arguments[n++]);s=t;if(!I1e(t)&&e===void 0||E2(e))return;if(!T1e(t))t=function(a,l){if(typeof s=="function")l=s.call(this,a,l);if(!E2(l))return l};o[1]=t;return Rf.apply(null,o)}})}var tz;if(!Fi[ha][Q3]){D1e(Fi[ha],Q3,Fi[ha].valueOf)}F1e(Fi,vv);lz[Ai]=true});var F2=C(()=>{var z1e=mr();z1e("asyncIterator")});var B2=C(()=>{"use strict";var U1e=U();var N1e=nt();var q1e=Le();var H1e=Zt();var W1e=Ze();var G1e=Tt().f;var V1e=o2();var ga=q1e.Symbol;if(N1e&&typeof ga=="function"&&(!("description"in ga.prototype)||ga().description!==void 0)){P2={};Xp=function r(){var e=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]);var t=this instanceof Xp?new ga(e):e===void 0?ga():ga(e);if(e==="")P2[t]=true;return t};V1e(Xp,ga);Cv=Xp.prototype=ga.prototype;Cv.constructor=Xp;gz=Cv.toString;yz=String(ga("test"))=="Symbol(test)";bz=/^Symbol\((.*)\)[^)]+$/;G1e(Cv,"description",{configurable:true,get:function r(){var e=W1e(this)?this.valueOf():this;var t=gz.call(e);if(H1e(P2,e))return"";var i=yz?t.slice(7,-1):t.replace(bz,"$1");return i===""?void 0:i}});U1e({global:true,forced:true},{Symbol:Xp})}var P2;var Xp;var Cv;var gz;var yz;var bz});var M2=C(()=>{var j1e=mr();j1e("hasInstance")});var L2=C(()=>{var $1e=mr();$1e("isConcatSpreadable")});var z2=C(()=>{var K1e=mr();K1e("iterator")});var U2=C(()=>{var X1e=mr();X1e("match")});var N2=C(()=>{var Y1e=mr();Y1e("matchAll")});var q2=C(()=>{var J1e=mr();J1e("replace")});var H2=C(()=>{var Z1e=mr();Z1e("search")});var W2=C(()=>{var Q1e=mr();Q1e("species")});var G2=C(()=>{var ewe=mr();ewe("split")});var V2=C(()=>{var twe=mr();twe("toPrimitive")});var j2=C(()=>{var rwe=mr();rwe("toStringTag")});var $2=C(()=>{var iwe=mr();iwe("unscopables")});var K2=C(()=>{var owe=mn();owe(Math,"Math",true)});var X2=C(()=>{var nwe=Le();var swe=mn();swe(nwe.JSON,"JSON",true)});var vz=C(($et,_z)=>{l2();u2();A2();F2();B2();M2();L2();z2();U2();N2();q2();H2();W2();G2();V2();j2();$2();K2();X2();var awe=Bl();_z.exports=awe.Symbol});var xz=C(()=>{var lwe=mr();lwe("asyncDispose")});var Cz=C(()=>{var uwe=mr();uwe("dispose")});var Sz=C(()=>{var cwe=mr();cwe("observable")});var wz=C(()=>{var dwe=mr();dwe("patternMatch")});var Tz=C(()=>{var pwe=mr();pwe("replaceAll")});var Ez=C((ott,Iz)=>{var mwe=vz();xz();Cz();Sz();wz();Tz();Iz.exports=mwe});var Bf=C((ntt,Dz)=>{var hwe=so();var fwe=Kr();var kz=function(r){return function(e,t){var i=String(fwe(e));var o=hwe(t);var n=i.length;var s,a;if(o<0||o>=n)return r?"":void 0;s=i.charCodeAt(o);return s<55296||s>56319||o+1===n||(a=i.charCodeAt(o+1))<56320||a>57343?r?i.charAt(o):s:r?i.slice(o,o+2):(s-55296<<10)+(a-56320)+65536}};Dz.exports={codeAt:kz(false),charAt:kz(true)}});var Sv=C((stt,Oz)=>{var gwe=Te();Oz.exports=!gwe(function(){function r(){}r.prototype.constructor=null;return Object.getPrototypeOf(new r)!==r.prototype})});var Uo=C((att,Az)=>{var ywe=Zt();var bwe=Vt();var _we=If();var vwe=Sv();var Rz=_we("IE_PROTO");var xwe=Object.prototype;Az.exports=vwe?Object.getPrototypeOf:function(r){r=bwe(r);if(ywe(r,Rz))return r[Rz];if(typeof r.constructor=="function"&&r instanceof r.constructor){return r.constructor.prototype}return r instanceof Object?xwe:null}});var Z2=C((ltt,Mz)=>{"use strict";var Fz=Uo();var Cwe=Xr();var Swe=Zt();var wwe=ht();var Twe=Lo();var Pz=wwe("iterator");var Bz=false;var Iwe=function(){return this};var Yp;var Y2;var J2;if([].keys){J2=[].keys();if(!("next"in J2))Bz=true;else{Y2=Fz(Fz(J2));if(Y2!==Object.prototype)Yp=Y2}}if(Yp==void 0)Yp={};if(!Twe&&!Swe(Yp,Pz)){Cwe(Yp,Pz,Iwe)}Mz.exports={IteratorPrototype:Yp,BUGGY_SAFARI_ITERATORS:Bz}});var Jp=C((utt,Lz)=>{Lz.exports={}});var wv=C((ctt,zz)=>{"use strict";var Ewe=Z2().IteratorPrototype;var kwe=es();var Dwe=da();var Owe=mn();var Rwe=Jp();var Awe=function(){return this};zz.exports=function(r,e,t){var i=e+" Iterator";r.prototype=kwe(Ewe,{next:Dwe(1,t)});Owe(r,i,false,true);Rwe[i]=Awe;return r}});var Q2=C((dtt,Uz)=>{var Fwe=Ze();Uz.exports=function(r){if(!Fwe(r)&&r!==null){throw TypeError("Can't set "+String(r)+" as a prototype")}return r}});var Nl=C((ptt,Nz)=>{var Pwe=rt();var Bwe=Q2();Nz.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=false;var e={};var t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;t.call(e,[]);r=e instanceof Array}catch(i){}return function i(o,n){Pwe(o);Bwe(n);if(r)t.call(o,n);else o.__proto__=n;return o}}():void 0)});var Ev=C((mtt,Xz)=>{"use strict";var Mwe=U();var Lwe=wv();var qz=Uo();var Hz=Nl();var zwe=mn();var Wz=Xr();var Uwe=zr();var Nwe=ht();var eI=Lo();var Gz=Jp();var Kz=Z2();var tI=Kz.IteratorPrototype;var Tv=Kz.BUGGY_SAFARI_ITERATORS;var Mf=Nwe("iterator");var Vz="keys";var Iv="values";var jz="entries";var $z=function(){return this};Xz.exports=function(r,e,t,i,o,n,s){Lwe(t,e,i);var a=function(y){if(y===o&&m)return m;if(!Tv&&y in c)return c[y];switch(y){case Vz:return function I(){return new t(this,y)};case Iv:return function I(){return new t(this,y)};case jz:return function I(){return new t(this,y)}}return function(){return new t(this)}};var l=e+" Iterator";var u=false;var c=r.prototype;var d=c[Mf]||c["@@iterator"]||o&&c[o];var m=!Tv&&d||a(o);var h=e=="Array"?c.entries||d:d;var f,b,_;if(h){f=qz(h.call(new r));if(tI!==Object.prototype&&f.next){if(!eI&&qz(f)!==tI){if(Hz){Hz(f,tI)}else if(typeof f[Mf]!="function"){Wz(f,Mf,$z)}}zwe(f,l,true,true);if(eI)Gz[l]=$z}}if(o==Iv&&d&&d.name!==Iv){u=true;m=function y(){return d.call(this)}}if((!eI||s)&&c[Mf]!==m){Wz(c,Mf,m)}Gz[e]=m;if(o){b={values:a(Iv),keys:n?m:a(Vz),entries:a(jz)};if(s)for(_ in b){if(Tv||u||!(_ in c)){Uwe(c,_,b[_])}}else Mwe({target:e,proto:true,forced:Tv||u},b)}return b}});var kv=C(()=>{"use strict";var qwe=Bf().charAt;var Yz=Yr();var Hwe=Ev();var Jz="String Iterator";var Wwe=Yz.set;var Gwe=Yz.getterFor(Jz);Hwe(String,"String",function(r){Wwe(this,{type:Jz,string:String(r),index:0})},function r(){var e=Gwe(this);var t=e.string;var i=e.index;var o;if(i>=t.length)return{value:void 0,done:true};o=qwe(t,i);e.index+=o.length;return{value:o,done:false}})});var rI=C((gtt,Qz)=>{var Zz=rt();Qz.exports=function(r,e,t,i){try{return i?e(Zz(t)[0],t[1]):e(t)}catch(n){var o=r["return"];if(o!==void 0)Zz(o.call(r));throw n}}});var Dv=C((ytt,e8)=>{var Vwe=ht();var jwe=Jp();var $we=Vwe("iterator");var Kwe=Array.prototype;e8.exports=function(r){return r!==void 0&&(jwe.Array===r||Kwe[$we]===r)}});var Zp=C((btt,t8)=>{var Xwe=Vp();var Ywe=Jp();var Jwe=ht();var Zwe=Jwe("iterator");t8.exports=function(r){if(r!=void 0)return r[Zwe]||r["@@iterator"]||Ywe[Xwe(r)]}});var iI=C((_tt,i8)=>{"use strict";var Qwe=ts();var eTe=Vt();var tTe=rI();var rTe=Dv();var iTe=gt();var r8=zl();var oTe=Zp();i8.exports=function r(e){var t=eTe(e);var i=typeof this=="function"?this:Array;var o=arguments.length;var n=o>1?arguments[1]:void 0;var s=n!==void 0;var a=oTe(t);var l=0;var u,c,d,m,h,f;if(s)n=Qwe(n,o>2?arguments[2]:void 0,2);if(a!=void 0&&!(i==Array&&rTe(a))){m=a.call(t);h=m.next;c=new i;for(;!(d=h.call(m)).done;l++){f=s?tTe(m,n,[d.value,l],true):d.value;r8(c,l,f)}}else{u=iTe(t.length);c=new i(u);for(;u>l;l++){f=s?n(t[l],l):t[l];r8(c,l,f)}}c.length=l;return c}});var Lf=C((vtt,a8)=>{var nTe=ht();var n8=nTe("iterator");var s8=false;try{o8=0;oI={next:function(){return{done:!!o8++}},"return":function(){s8=true}};oI[n8]=function(){return this};Array.from(oI,function(){throw 2})}catch(r){}var o8;var oI;a8.exports=function(r,e){if(!e&&!s8)return false;var t=false;try{var i={};i[n8]=function(){return{next:function(){return{done:t=true}}}};r(i)}catch(o){}return t}});var nI=C(()=>{var sTe=U();var aTe=iI();var lTe=Lf();var uTe=!lTe(function(r){Array.from(r)});sTe({target:"Array",stat:true,forced:uTe},{from:aTe})});var u8=C((Stt,l8)=>{kv();nI();var cTe=Bl();l8.exports=cTe.Array.from});var d8=C((wtt,c8)=>{var dTe=u8();c8.exports=dTe});var aI=C((Ttt,h8)=>{"use strict";var p8=nt();var pTe=Te();var sI=jp();var mTe=lv();var hTe=Tf();var fTe=Vt();var gTe=Lp();var Qp=Object.assign;var m8=Object.defineProperty;h8.exports=!Qp||pTe(function(){if(p8&&Qp({b:1},Qp(m8({},"a",{enumerable:true,get:function(){m8(this,"b",{value:3,enumerable:false})}}),{b:2})).b!==1)return true;var r={};var e={};var t=Symbol();var i="abcdefghijklmnopqrst";r[t]=7;i.split("").forEach(function(o){e[o]=o});return Qp({},r)[t]!=7||sI(Qp({},e)).join("")!=i})?function r(e,t){var i=fTe(e);var o=arguments.length;var n=1;var s=mTe.f;var a=hTe.f;while(o>n){var l=gTe(arguments[n++]);var u=s?sI(l).concat(s(l)):sI(l);var c=u.length;var d=0;var m;while(c>d){m=u[d++];if(!p8||a.call(l,m))i[m]=l[m]}}return i}:Qp});var g8=C(()=>{var yTe=U();var f8=aI();yTe({target:"Object",stat:true,forced:Object.assign!==f8},{assign:f8})});var y8=C(()=>{var bTe=U();var _Te=nt();var vTe=es();bTe({target:"Object",stat:true,sham:!_Te},{create:vTe})});var _8=C(()=>{var xTe=U();var b8=nt();var CTe=Tt();xTe({target:"Object",stat:true,forced:!b8,sham:!b8},{defineProperty:CTe.f})});var x8=C(()=>{var STe=U();var v8=nt();var wTe=gv();STe({target:"Object",stat:true,forced:!v8,sham:!v8},{defineProperties:wTe})});var lI=C((Ptt,S8)=>{var TTe=nt();var ITe=jp();var ETe=Ri();var kTe=Tf().f;var C8=function(r){return function(e){var t=ETe(e);var i=ITe(t);var o=i.length;var n=0;var s=[];var a;while(o>n){a=i[n++];if(!TTe||kTe.call(t,a)){s.push(r?[a,t[a]]:t[a])}}return s}};S8.exports={entries:C8(true),values:C8(false)}});var w8=C(()=>{var DTe=U();var OTe=lI().entries;DTe({target:"Object",stat:true},{entries:function r(e){return OTe(e)}})});var em=C((Ltt,T8)=>{var RTe=Te();T8.exports=!RTe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var ql=C((ztt,I8)=>{var ATe=Up();var FTe=Ze();var uI=Zt();var PTe=Tt().f;var BTe=zp();var MTe=em();var bc=BTe("meta");var LTe=0;var cI=Object.isExtensible||function(){return true};var dI=function(r){PTe(r,bc,{value:{objectID:"O"+ ++LTe,weakData:{}}})};var zTe=function(r,e){if(!FTe(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!uI(r,bc)){if(!cI(r))return"F";if(!e)return"E";dI(r)}return r[bc].objectID};var UTe=function(r,e){if(!uI(r,bc)){if(!cI(r))return true;if(!e)return false;dI(r)}return r[bc].weakData};var NTe=function(r){if(MTe&&qTe.REQUIRED&&cI(r)&&!uI(r,bc))dI(r);return r};var qTe=I8.exports={REQUIRED:false,fastKey:zTe,getWeakData:UTe,onFreeze:NTe};ATe[bc]=true});var E8=C(()=>{var HTe=U();var WTe=em();var GTe=Te();var VTe=Ze();var jTe=ql().onFreeze;var pI=Object.freeze;var $Te=GTe(function(){pI(1)});HTe({target:"Object",stat:true,forced:$Te,sham:!WTe},{freeze:function r(e){return pI&&VTe(e)?pI(jTe(e)):e}})});var _c=C((qtt,k8)=>{var KTe=rt();var XTe=Dv();var YTe=gt();var JTe=ts();var ZTe=Zp();var QTe=rI();var zf=function(r,e){this.stopped=r;this.result=e};var e2e=k8.exports=function(r,e,t,i,o){var n=JTe(e,t,i?2:1);var s,a,l,u,c,d,m;if(o){s=r}else{a=ZTe(r);if(typeof a!="function")throw TypeError("Target is not iterable");if(XTe(a)){for(l=0,u=YTe(r.length);u>l;l++){c=i?n(KTe(m=r[l])[0],m[1]):n(r[l]);if(c&&c instanceof zf)return c}return new zf(false)}s=a.call(r)}d=s.next;while(!(m=d.call(s)).done){c=QTe(s,n,m.value,i);if(typeof c=="object"&&c&&c instanceof zf)return c}return new zf(false)};e2e.stop=function(r){return new zf(true,r)}});var D8=C(()=>{var t2e=U();var r2e=_c();var i2e=zl();t2e({target:"Object",stat:true},{fromEntries:function r(e){var t={};r2e(e,function(i,o){i2e(t,i,o)},void 0,true);return t}})});var A8=C(()=>{var o2e=U();var n2e=Te();var s2e=Ri();var O8=Lr().f;var R8=nt();var a2e=n2e(function(){O8(1)});var l2e=!R8||a2e;o2e({target:"Object",stat:true,forced:l2e,sham:!R8},{getOwnPropertyDescriptor:function r(e,t){return O8(s2e(e),t)}})});var F8=C(()=>{var u2e=U();var c2e=nt();var d2e=uv();var p2e=Ri();var m2e=Lr();var h2e=zl();u2e({target:"Object",stat:true,sham:!c2e},{getOwnPropertyDescriptors:function r(e){var t=p2e(e);var i=m2e.f;var o=d2e(t);var n={};var s=0;var a,l;while(o.length>s){l=i(t,a=o[s++]);if(l!==void 0)h2e(n,a,l)}return n}})});var P8=C(()=>{var f2e=U();var g2e=Te();var y2e=f2().f;var b2e=g2e(function(){return!Object.getOwnPropertyNames(1)});f2e({target:"Object",stat:true,forced:b2e},{getOwnPropertyNames:y2e})});var M8=C(()=>{var _2e=U();var v2e=Te();var x2e=Vt();var B8=Uo();var C2e=Sv();var S2e=v2e(function(){B8(1)});_2e({target:"Object",stat:true,forced:S2e,sham:!C2e},{getPrototypeOf:function r(e){return B8(x2e(e))}})});var mI=C((Ztt,L8)=>{L8.exports=Object.is||function r(e,t){return e===t?e!==0||1/e===1/t:e!=e&&t!=t}});var z8=C(()=>{var w2e=U();var T2e=mI();w2e({target:"Object",stat:true},{is:T2e})});var U8=C(()=>{var I2e=U();var E2e=Te();var k2e=Ze();var hI=Object.isExtensible;var D2e=E2e(function(){hI(1)});I2e({target:"Object",stat:true,forced:D2e},{isExtensible:function r(e){return k2e(e)?hI?hI(e):true:false}})});var N8=C(()=>{var O2e=U();var R2e=Te();var A2e=Ze();var fI=Object.isFrozen;var F2e=R2e(function(){fI(1)});O2e({target:"Object",stat:true,forced:F2e},{isFrozen:function r(e){return A2e(e)?fI?fI(e):false:true}})});var q8=C(()=>{var P2e=U();var B2e=Te();var M2e=Ze();var gI=Object.isSealed;var L2e=B2e(function(){gI(1)});P2e({target:"Object",stat:true,forced:L2e},{isSealed:function r(e){return M2e(e)?gI?gI(e):false:true}})});var W8=C(()=>{var z2e=U();var U2e=Vt();var H8=jp();var N2e=Te();var q2e=N2e(function(){H8(1)});z2e({target:"Object",stat:true,forced:q2e},{keys:function r(e){return H8(U2e(e))}})});var G8=C(()=>{var H2e=U();var W2e=Ze();var G2e=ql().onFreeze;var V2e=em();var j2e=Te();var yI=Object.preventExtensions;var $2e=j2e(function(){yI(1)});H2e({target:"Object",stat:true,forced:$2e,sham:!V2e},{preventExtensions:function r(e){return yI&&W2e(e)?yI(G2e(e)):e}})});var V8=C(()=>{var K2e=U();var X2e=Ze();var Y2e=ql().onFreeze;var J2e=em();var Z2e=Te();var bI=Object.seal;var Q2e=Z2e(function(){bI(1)});K2e({target:"Object",stat:true,forced:Q2e,sham:!J2e},{seal:function r(e){return bI&&X2e(e)?bI(Y2e(e)):e}})});var j8=C(()=>{var eIe=U();var tIe=Nl();eIe({target:"Object",stat:true},{setPrototypeOf:tIe})});var $8=C(()=>{var rIe=U();var iIe=lI().values;rIe({target:"Object",stat:true},{values:function r(e){return iIe(e)}})});var Uf=C((yrt,K8)=>{"use strict";var oIe=Lo();var nIe=Le();var sIe=Te();K8.exports=oIe||!sIe(function(){var r=Math.random();__defineSetter__.call(null,r,function(){});delete nIe[r]})});var X8=C(()=>{"use strict";var aIe=U();var lIe=nt();var uIe=Uf();var cIe=Vt();var dIe=ci();var pIe=Tt();if(lIe){aIe({target:"Object",proto:true,forced:uIe},{__defineGetter__:function r(e,t){pIe.f(cIe(this),e,{get:dIe(t),enumerable:true,configurable:true})}})}});var Y8=C(()=>{"use strict";var mIe=U();var hIe=nt();var fIe=Uf();var gIe=Vt();var yIe=ci();var bIe=Tt();if(hIe){mIe({target:"Object",proto:true,forced:fIe},{__defineSetter__:function r(e,t){bIe.f(gIe(this),e,{set:yIe(t),enumerable:true,configurable:true})}})}});var J8=C(()=>{"use strict";var _Ie=U();var vIe=nt();var xIe=Uf();var CIe=Vt();var SIe=Mo();var wIe=Uo();var TIe=Lr().f;if(vIe){_Ie({target:"Object",proto:true,forced:xIe},{__lookupGetter__:function r(e){var t=CIe(this);var i=SIe(e,true);var o;do{if(o=TIe(t,i))return o.get}while(t=wIe(t))}})}});var Z8=C(()=>{"use strict";var IIe=U();var EIe=nt();var kIe=Uf();var DIe=Vt();var OIe=Mo();var RIe=Uo();var AIe=Lr().f;if(EIe){IIe({target:"Object",proto:true,forced:kIe},{__lookupSetter__:function r(e){var t=DIe(this);var i=OIe(e,true);var o;do{if(o=AIe(t,i))return o.set}while(t=RIe(t))}})}});var vI=C((Irt,e6)=>{"use strict";var FIe=ci();var PIe=Ze();var Q8=[].slice;var _I={};var BIe=function(r,e,t){if(!(e in _I)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";_I[e]=Function("C,a","return new C("+i.join(",")+")")}return _I[e](r,t)};e6.exports=Function.bind||function r(e){var t=FIe(this);var i=Q8.call(arguments,1);var o=function n(){var s=i.concat(Q8.call(arguments));return this instanceof o?BIe(t,s.length,s):t.apply(e,s)};if(PIe(t.prototype))o.prototype=t.prototype;return o}});var t6=C(()=>{var MIe=U();var LIe=vI();MIe({target:"Function",proto:true},{bind:LIe})});var i6=C(()=>{var zIe=nt();var UIe=Tt().f;var xI=Function.prototype;var NIe=xI.toString;var qIe=/^\s*function ([^ (]*)/;var r6="name";if(zIe&&!(r6 in xI)){UIe(xI,r6,{configurable:true,get:function(){try{return NIe.call(this).match(qIe)[1]}catch(r){return""}}})}});var a6=C(()=>{"use strict";var o6=Ze();var HIe=Tt();var WIe=Uo();var GIe=ht();var n6=GIe("hasInstance");var s6=Function.prototype;if(!(n6 in s6)){HIe.f(s6,n6,{value:function(r){if(typeof this!="function"||!o6(r))return false;if(!o6(this.prototype))return r instanceof this;while(r=WIe(r))if(this.prototype===r)return true;return false}})}});var l6=C(()=>{var VIe=U();var jIe=Le();VIe({global:true},{globalThis:jIe})});var u6=C(()=>{var $Ie=U();var KIe=Ll();$Ie({target:"Array",stat:true},{isArray:KIe})});var c6=C(()=>{"use strict";var XIe=U();var YIe=Te();var JIe=zl();var ZIe=YIe(function(){function r(){}return!(Array.of.call(r)instanceof r)});XIe({target:"Array",stat:true,forced:ZIe},{of:function r(){var e=0;var t=arguments.length;var i=new(typeof this=="function"?this:Array)(t);while(t>e)JIe(i,e,arguments[e++]);i.length=t;return i}})});var SI=C((Urt,d6)=>{"use strict";var QIe=Vt();var CI=pa();var eEe=gt();var tEe=Math.min;d6.exports=[].copyWithin||function r(e,t){var i=QIe(this);var o=eEe(i.length);var n=CI(e,o);var s=CI(t,o);var a=arguments.length>2?arguments[2]:void 0;var l=tEe((a===void 0?o:CI(a,o))-s,o-n);var u=1;if(s<n&&n<s+l){u=-1;s+=l-1;n+=l-1}while(l-- >0){if(s in i)i[n]=i[s];else delete i[n];n+=u;s+=u}return i}});var ya=C((Nrt,p6)=>{var rEe=ht();var iEe=es();var oEe=Tt();var wI=rEe("unscopables");var TI=Array.prototype;if(TI[wI]==void 0){oEe.f(TI,wI,{configurable:true,value:iEe(null)})}p6.exports=function(r){TI[wI][r]=true}});var m6=C(()=>{var nEe=U();var sEe=SI();var aEe=ya();nEe({target:"Array",proto:true},{copyWithin:sEe});aEe("copyWithin")});var rs=C((Wrt,h6)=>{"use strict";var lEe=Te();h6.exports=function(r,e){var t=[][r];return!!t&&lEe(function(){t.call(null,e||function(){throw 1},1)})}});var di=C((Grt,g6)=>{var uEe=nt();var cEe=Te();var Ov=Zt();var dEe=Object.defineProperty;var II={};var f6=function(r){throw r};g6.exports=function(r,e){if(Ov(II,r))return II[r];if(!e)e={};var t=[][r];var i=Ov(e,"ACCESSORS")?e.ACCESSORS:false;var o=Ov(e,0)?e[0]:f6;var n=Ov(e,1)?e[1]:void 0;return II[r]=!!t&&!cEe(function(){if(i&&!uEe)return true;var s={length:-1};if(i)dEe(s,1,{enumerable:true,get:f6});else s[1]=1;t.call(s,o,n)})}});var y6=C(()=>{"use strict";var pEe=U();var mEe=Or().every;var hEe=rs();var fEe=di();var gEe=hEe("every");var yEe=fEe("every");pEe({target:"Array",proto:true,forced:!gEe||!yEe},{every:function r(e){return mEe(this,e,arguments.length>1?arguments[1]:void 0)}})});var Rv=C(($rt,_6)=>{"use strict";var bEe=Vt();var b6=pa();var _Ee=gt();_6.exports=function r(e){var t=bEe(this);var i=_Ee(t.length);var o=arguments.length;var n=b6(o>1?arguments[1]:void 0,i);var s=o>2?arguments[2]:void 0;var a=s===void 0?i:b6(s,i);while(a>n)t[n++]=e;return t}});var v6=C(()=>{var vEe=U();var xEe=Rv();var CEe=ya();vEe({target:"Array",proto:true},{fill:xEe});CEe("fill")});var x6=C(()=>{"use strict";var SEe=U();var wEe=Or().filter;var TEe=Gp();var IEe=di();var EEe=TEe("filter");var kEe=IEe("filter");SEe({target:"Array",proto:true,forced:!EEe||!kEe},{filter:function r(e){return wEe(this,e,arguments.length>1?arguments[1]:void 0)}})});var EI=C(()=>{"use strict";var DEe=U();var OEe=Or().find;var REe=ya();var AEe=di();var Av="find";var C6=true;var FEe=AEe(Av);if(Av in[])Array(1)[Av](function(){C6=false});DEe({target:"Array",proto:true,forced:C6||!FEe},{find:function r(e){return OEe(this,e,arguments.length>1?arguments[1]:void 0)}});REe(Av)});var w6=C(()=>{"use strict";var PEe=U();var BEe=Or().findIndex;var MEe=ya();var LEe=di();var Fv="findIndex";var S6=true;var zEe=LEe(Fv);if(Fv in[])Array(1)[Fv](function(){S6=false});PEe({target:"Array",proto:true,forced:S6||!zEe},{findIndex:function r(e){return BEe(this,e,arguments.length>1?arguments[1]:void 0)}});MEe(Fv)});var kI=C((rit,I6)=>{"use strict";var UEe=Ll();var NEe=gt();var qEe=ts();var T6=function(r,e,t,i,o,n,s,a){var l=o;var u=0;var c=s?qEe(s,a,3):false;var d;while(u<i){if(u in t){d=c?c(t[u],u,e):t[u];if(n>0&&UEe(d)){l=T6(r,e,d,NEe(d.length),l,n-1)-1}else{if(l>=9007199254740991)throw TypeError("Exceed the acceptable array length");r[l]=d}l++}u++}return l};I6.exports=T6});var E6=C(()=>{"use strict";var HEe=U();var WEe=kI();var GEe=Vt();var VEe=gt();var jEe=so();var $Ee=Wp();HEe({target:"Array",proto:true},{flat:function r(){var e=arguments.length?arguments[0]:void 0;var t=GEe(this);var i=VEe(t.length);var o=$Ee(t,0);o.length=WEe(o,t,t,i,0,e===void 0?1:jEe(e));return o}})});var k6=C(()=>{"use strict";var KEe=U();var XEe=kI();var YEe=Vt();var JEe=gt();var ZEe=ci();var QEe=Wp();KEe({target:"Array",proto:true},{flatMap:function r(e){var t=YEe(this);var i=JEe(t.length);var o;ZEe(e);o=QEe(t,0);o.length=XEe(o,t,t,i,0,1,e,arguments.length>1?arguments[1]:void 0);return o}})});var DI=C((ait,D6)=>{"use strict";var eke=Or().forEach;var tke=rs();var rke=di();var ike=tke("forEach");var oke=rke("forEach");D6.exports=!ike||!oke?function r(e){return eke(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach});var R6=C(()=>{"use strict";var nke=U();var O6=DI();nke({target:"Array",proto:true,forced:[].forEach!=O6},{forEach:O6})});var A6=C(()=>{"use strict";var ske=U();var ake=qp().includes;var lke=ya();var uke=di();var cke=uke("indexOf",{ACCESSORS:true,1:0});ske({target:"Array",proto:true,forced:!cke},{includes:function r(e){return ake(this,e,arguments.length>1?arguments[1]:void 0)}});lke("includes")});var B6=C(()=>{"use strict";var dke=U();var pke=qp().indexOf;var mke=rs();var hke=di();var P6=[].indexOf;var F6=!!P6&&1/[1].indexOf(1,-0)<0;var fke=mke("indexOf");var gke=hke("indexOf",{ACCESSORS:true,1:0});dke({target:"Array",proto:true,forced:F6||!fke||!gke},{indexOf:function r(e){return F6?P6.apply(this,arguments)||0:pke(this,e,arguments.length>1?arguments[1]:void 0)}})});var M6=C(()=>{"use strict";var yke=U();var bke=Lp();var _ke=Ri();var vke=rs();var xke=[].join;var Cke=bke!=Object;var Ske=vke("join",",");yke({target:"Array",proto:true,forced:Cke||!Ske},{join:function r(e){return xke.call(_ke(this),e===void 0?",":e)}})});var RI=C((git,z6)=>{"use strict";var wke=Ri();var Tke=so();var Ike=gt();var Eke=rs();var kke=di();var Dke=Math.min;var OI=[].lastIndexOf;var L6=!!OI&&1/[1].lastIndexOf(1,-0)<0;var Oke=Eke("lastIndexOf");var Rke=kke("indexOf",{ACCESSORS:true,1:0});var Ake=L6||!Oke||!Rke;z6.exports=Ake?function r(e){if(L6)return OI.apply(this,arguments)||0;var t=wke(this);var i=Ike(t.length);var o=i-1;if(arguments.length>1)o=Dke(o,Tke(arguments[1]));if(o<0)o=i+o;for(;o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:OI});var N6=C(()=>{var Fke=U();var U6=RI();Fke({target:"Array",proto:true,forced:U6!==[].lastIndexOf},{lastIndexOf:U6})});var AI=C(()=>{"use strict";var Pke=U();var Bke=Or().map;var Mke=Gp();var Lke=di();var zke=Mke("map");var Uke=Lke("map");Pke({target:"Array",proto:true,forced:!zke||!Uke},{map:function r(e){return Bke(this,e,arguments.length>1?arguments[1]:void 0)}})});var Nf=C((xit,H6)=>{var Nke=ci();var qke=Vt();var Hke=Lp();var Wke=gt();var q6=function(r){return function(e,t,i,o){Nke(t);var n=qke(e);var s=Hke(n);var a=Wke(n.length);var l=r?a-1:0;var u=r?-1:1;if(i<2)while(true){if(l in s){o=s[l];l+=u;break}l+=u;if(r?l<0:a<=l){throw TypeError("Reduce of empty array with no initial value")}}for(;r?l>=0:a>l;l+=u)if(l in s){o=t(o,s[l],l,n)}return o}};H6.exports={left:q6(false),right:q6(true)}});var W6=C(()=>{"use strict";var Gke=U();var Vke=Nf().left;var jke=rs();var $ke=di();var Kke=jke("reduce");var Xke=$ke("reduce",{1:0});Gke({target:"Array",proto:true,forced:!Kke||!Xke},{reduce:function r(e){return Vke(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var G6=C(()=>{"use strict";var Yke=U();var Jke=Nf().right;var Zke=rs();var Qke=di();var eDe=Zke("reduceRight");var tDe=Qke("reduce",{1:0});Yke({target:"Array",proto:true,forced:!eDe||!tDe},{reduceRight:function r(e){return Jke(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var j6=C(()=>{"use strict";var rDe=U();var iDe=Ll();var oDe=[].reverse;var V6=[1,2];rDe({target:"Array",proto:true,forced:String(V6)===String(V6.reverse())},{reverse:function r(){if(iDe(this))this.length=this.length;return oDe.call(this)}})});var X6=C(()=>{"use strict";var nDe=U();var sDe=Ze();var $6=Ll();var K6=pa();var aDe=gt();var lDe=Ri();var uDe=zl();var cDe=ht();var dDe=Gp();var pDe=di();var mDe=dDe("slice");var hDe=pDe("slice",{ACCESSORS:true,0:0,1:2});var fDe=cDe("species");var gDe=[].slice;var yDe=Math.max;nDe({target:"Array",proto:true,forced:!mDe||!hDe},{slice:function r(e,t){var i=lDe(this);var o=aDe(i.length);var n=K6(e,o);var s=K6(t===void 0?o:t,o);var a,l,u;if($6(i)){a=i.constructor;if(typeof a=="function"&&(a===Array||$6(a.prototype))){a=void 0}else if(sDe(a)){a=a[fDe];if(a===null)a=void 0}if(a===Array||a===void 0){return gDe.call(i,n,s)}}l=new(a===void 0?Array:a)(yDe(s-n,0));for(u=0;n<s;n++,u++)if(n in i)uDe(l,u,i[n]);l.length=u;return l}})});var Y6=C(()=>{"use strict";var bDe=U();var _De=Or().some;var vDe=rs();var xDe=di();var CDe=vDe("some");var SDe=xDe("some");bDe({target:"Array",proto:true,forced:!CDe||!SDe},{some:function r(e){return _De(this,e,arguments.length>1?arguments[1]:void 0)}})});var eU=C(()=>{"use strict";var wDe=U();var TDe=ci();var J6=Vt();var Q6=Te();var IDe=rs();var FI=[];var Z6=FI.sort;var EDe=Q6(function(){FI.sort(void 0)});var kDe=Q6(function(){FI.sort(null)});var DDe=IDe("sort");var ODe=EDe||!kDe||!DDe;wDe({target:"Array",proto:true,forced:ODe},{sort:function r(e){return e===void 0?Z6.call(J6(this)):Z6.call(J6(this),TDe(e))}})});var tU=C(()=>{"use strict";var RDe=U();var ADe=pa();var FDe=so();var PDe=gt();var BDe=Vt();var MDe=Wp();var LDe=zl();var zDe=Gp();var UDe=di();var NDe=zDe("splice");var qDe=UDe("splice",{ACCESSORS:true,0:0,1:2});var HDe=Math.max;var WDe=Math.min;var GDe=9007199254740991;var VDe="Maximum allowed length exceeded";RDe({target:"Array",proto:true,forced:!NDe||!qDe},{splice:function r(e,t){var i=BDe(this);var o=PDe(i.length);var n=ADe(e,o);var s=arguments.length;var a,l,u,c,d,m;if(s===0){a=l=0}else if(s===1){a=0;l=o-n}else{a=s-2;l=WDe(HDe(FDe(t),0),o-n)}if(o+a-l>GDe){throw TypeError(VDe)}u=MDe(i,l);for(c=0;c<l;c++){d=n+c;if(d in i)LDe(u,c,i[d])}u.length=l;if(a<l){for(c=n;c<o-l;c++){d=c+l;m=c+a;if(d in i)i[m]=i[d];else delete i[m]}for(c=o;c>o-l+a;c--)delete i[c-1]}else if(a>l){for(c=o-l;c>n;c--){d=c+l-1;m=c+a-1;if(d in i)i[m]=i[d];else delete i[m]}}for(c=0;c<a;c++){i[c+n]=arguments[c+2]}i.length=o-l+a;return u}})});var vc=C((Mit,iU)=>{"use strict";var jDe=no();var $De=Tt();var KDe=ht();var XDe=nt();var rU=KDe("species");iU.exports=function(r){var e=jDe(r);var t=$De.f;if(XDe&&e&&!e[rU]){t(e,rU,{configurable:true,get:function(){return this}})}}});var oU=C(()=>{var YDe=vc();YDe("Array")});var nU=C(()=>{var JDe=ya();JDe("flat")});var sU=C(()=>{var ZDe=ya();ZDe("flatMap")});var qf=C((Wit,cU)=>{"use strict";var QDe=Ri();var PI=ya();var aU=Jp();var lU=Yr();var eOe=Ev();var uU="Array Iterator";var tOe=lU.set;var rOe=lU.getterFor(uU);cU.exports=eOe(Array,"Array",function(r,e){tOe(this,{type:uU,target:QDe(r),index:0,kind:e})},function(){var r=rOe(this);var e=r.target;var t=r.kind;var i=r.index++;if(!e||i>=e.length){r.target=void 0;return{value:void 0,done:true}}if(t=="keys")return{value:i,done:false};if(t=="values")return{value:e[i],done:false};return{value:[i,e[i]],done:false}},"values");aU.Arguments=aU.Array;PI("keys");PI("values");PI("entries")});var mU=C(()=>{var iOe=U();var oOe=pa();var dU=String.fromCharCode;var pU=String.fromCodePoint;var nOe=!!pU&&pU.length!=1;iOe({target:"String",stat:true,forced:nOe},{fromCodePoint:function r(e){var t=[];var i=arguments.length;var o=0;var n;while(i>o){n=+arguments[o++];if(oOe(n,1114111)!==n)throw RangeError(n+" is not a valid code point");t.push(n<65536?dU(n):dU(((n-=65536)>>10)+55296,n%1024+56320))}return t.join("")}})});var hU=C(()=>{var sOe=U();var aOe=Ri();var lOe=gt();sOe({target:"String",stat:true},{raw:function r(e){var t=aOe(e.raw);var i=lOe(t.length);var o=arguments.length;var n=[];var s=0;while(i>s){n.push(String(t[s++]));if(s<o)n.push(String(arguments[s]))}return n.join("")}})});var fU=C(()=>{"use strict";var uOe=U();var cOe=Bf().codeAt;uOe({target:"String",proto:true},{codePointAt:function r(e){return cOe(this,e)}})});var Hf=C((Yit,gU)=>{var dOe=Ze();var pOe=oo();var mOe=ht();var hOe=mOe("match");gU.exports=function(r){var e;return dOe(r)&&((e=r[hOe])!==void 0?!!e:pOe(r)=="RegExp")}});var Pv=C((Jit,yU)=>{var fOe=Hf();yU.exports=function(r){if(fOe(r)){throw TypeError("The method doesn't accept regular expressions")}return r}});var Bv=C((Zit,bU)=>{var gOe=ht();var yOe=gOe("match");bU.exports=function(r){var e=/./;try{"/./"[r](e)}catch(t){try{e[yOe]=false;return"/./"[r](e)}catch(i){}}return false}});var CU=C(()=>{"use strict";var bOe=U();var _Oe=Lr().f;var _U=gt();var vOe=Pv();var xOe=Kr();var COe=Bv();var SOe=Lo();var vU="".endsWith;var wOe=Math.min;var xU=COe("endsWith");var TOe=!SOe&&!xU&&!!function(){var r=_Oe(String.prototype,"endsWith");return r&&!r.writable}();bOe({target:"String",proto:true,forced:!TOe&&!xU},{endsWith:function r(e){var t=String(xOe(this));vOe(e);var i=arguments.length>1?arguments[1]:void 0;var o=_U(t.length);var n=i===void 0?o:wOe(_U(i),o);var s=String(e);return vU?vU.call(t,s,n):t.slice(n-s.length,n)===s}})});var SU=C(()=>{"use strict";var IOe=U();var EOe=Pv();var kOe=Kr();var DOe=Bv();IOe({target:"String",proto:true,forced:!DOe("includes")},{includes:function r(e){return!!~String(kOe(this)).indexOf(EOe(e),arguments.length>1?arguments[1]:void 0)}})});var tm=C((iot,wU)=>{"use strict";var OOe=rt();wU.exports=function(){var r=OOe(this);var e="";if(r.global)e+="g";if(r.ignoreCase)e+="i";if(r.multiline)e+="m";if(r.dotAll)e+="s";if(r.unicode)e+="u";if(r.sticky)e+="y";return e}});var Wf=C(BI=>{"use strict";var TU=Te();function IU(r,e){return RegExp(r,e)}BI.UNSUPPORTED_Y=TU(function(){var r=IU("a","y");r.lastIndex=2;return r.exec("abcd")!=null});BI.BROKEN_CARET=TU(function(){var r=IU("^r","gy");r.lastIndex=2;return r.exec("str")!=null})});var Gf=C((not,OU)=>{"use strict";var ROe=tm();var EU=Wf();var Mv=RegExp.prototype.exec;var AOe=String.prototype.replace;var kU=Mv;var MI=function(){var r=/a/;var e=/b*/g;Mv.call(r,"a");Mv.call(e,"a");return r.lastIndex!==0||e.lastIndex!==0}();var DU=EU.UNSUPPORTED_Y||EU.BROKEN_CARET;var LI=/()??/.exec("")[1]!==void 0;var FOe=MI||LI||DU;if(FOe){kU=function r(e){var t=this;var i,o,n,s;var a=DU&&t.sticky;var l=ROe.call(t);var u=t.source;var c=0;var d=e;if(a){l=l.replace("y","");if(l.indexOf("g")===-1){l+="g"}d=String(e).slice(t.lastIndex);if(t.lastIndex>0&&(!t.multiline||t.multiline&&e[t.lastIndex-1]!=="\n")){u="(?: "+u+")";d=" "+d;c++}o=new RegExp("^(?:"+u+")",l)}if(LI){o=new RegExp("^"+u+"$(?!\\s)",l)}if(MI)i=t.lastIndex;n=Mv.call(a?o:t,d);if(a){if(n){n.input=n.input.slice(c);n[0]=n[0].slice(c);n.index=t.lastIndex;t.lastIndex+=n[0].length}else t.lastIndex=0}else if(MI&&n){t.lastIndex=t.global?n.index+n[0].length:i}if(LI&&n&&n.length>1){AOe.call(n[0],o,function(){for(s=1;s<arguments.length-2;s++){if(arguments[s]===void 0)n[s]=void 0}})}return n}}OU.exports=kU});var Lv=C(()=>{"use strict";var POe=U();var RU=Gf();POe({target:"RegExp",proto:true,forced:/./.exec!==RU},{exec:RU})});var Vf=C((lot,MU)=>{"use strict";Lv();var AU=zr();var zv=Te();var zI=ht();var BOe=Gf();var MOe=Xr();var LOe=zI("species");var zOe=!zv(function(){var r=/./;r.exec=function(){var e=[];e.groups={a:"7"};return e};return"".replace(r,"$<a>")!=="7"});var FU=function(){return"a".replace(/./,"$0")==="$0"}();var PU=zI("replace");var BU=function(){if(/./[PU]){return/./[PU]("a","$0")===""}return false}();var UOe=!zv(function(){var r=/(?:)/;var e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"});MU.exports=function(r,e,t,i){var o=zI(r);var n=!zv(function(){var d={};d[o]=function(){return 7};return""[r](d)!=7});var s=n&&!zv(function(){var d=false;var m=/a/;if(r==="split"){m={};m.constructor={};m.constructor[LOe]=function(){return m};m.flags="";m[o]=/./[o]}m.exec=function(){d=true;return null};m[o]("");return!d});if(!n||!s||r==="replace"&&!(zOe&&FU&&!BU)||r==="split"&&!UOe){var a=/./[o];var l=t(o,""[r],function(d,m,h,f,b){if(m.exec===BOe){if(n&&!b){return{done:true,value:a.call(m,h,f)}}return{done:true,value:d.call(h,m,f)}}return{done:false}},{REPLACE_KEEPS_$0:FU,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:BU});var u=l[0];var c=l[1];AU(String.prototype,r,u);AU(RegExp.prototype,o,e==2?function(d,m){return c.call(d,this,m)}:function(d){return c.call(d,this)})}if(i)MOe(RegExp.prototype[o],"sham",true)}});var jf=C((uot,LU)=>{"use strict";var NOe=Bf().charAt;LU.exports=function(r,e,t){return e+(t?NOe(r,e).length:1)}});var $f=C((cot,zU)=>{var qOe=oo();var HOe=Gf();zU.exports=function(r,e){var t=r.exec;if(typeof t==="function"){var i=t.call(r,e);if(typeof i!=="object"){throw TypeError("RegExp exec method returned something other than an Object or null")}return i}if(qOe(r)!=="RegExp"){throw TypeError("RegExp#exec called on incompatible receiver")}return HOe.call(r,e)}});var NU=C(()=>{"use strict";var WOe=Vf();var GOe=rt();var VOe=gt();var jOe=Kr();var $Oe=jf();var UU=$f();WOe("match",1,function(r,e,t){return[function i(o){var n=jOe(this);var s=o==void 0?void 0:o[r];return s!==void 0?s.call(o,n):new RegExp(o)[r](String(n))},function(i){var o=t(e,i,this);if(o.done)return o.value;var n=GOe(i);var s=String(this);if(!n.global)return UU(n,s);var a=n.unicode;n.lastIndex=0;var l=[];var u=0;var c;while((c=UU(n,s))!==null){var d=String(c[0]);l[u]=d;if(d==="")n.lastIndex=$Oe(s,VOe(n.lastIndex),a);u++}return u===0?null:l}]})});var is=C((mot,HU)=>{var qU=rt();var KOe=ci();var XOe=ht();var YOe=XOe("species");HU.exports=function(r,e){var t=qU(r).constructor;var i;return t===void 0||(i=qU(t)[YOe])==void 0?e:KOe(i)}});var XU=C(()=>{"use strict";var JOe=U();var ZOe=wv();var WU=Kr();var GU=gt();var QOe=ci();var eRe=rt();var tRe=oo();var rRe=Hf();var VU=tm();var iRe=Xr();var oRe=Te();var nRe=ht();var sRe=is();var aRe=jf();var jU=Yr();var NI=Lo();var Uv=nRe("matchAll");var $U="RegExp String";var KU=$U+" Iterator";var lRe=jU.set;var uRe=jU.getterFor(KU);var Kf=RegExp.prototype;var cRe=Kf.exec;var qI="".matchAll;var UI=!!qI&&!oRe(function(){"a".matchAll(/./)});var dRe=function(r,e){var t=r.exec;var i;if(typeof t=="function"){i=t.call(r,e);if(typeof i!="object")throw TypeError("Incorrect exec result");return i}return cRe.call(r,e)};var pRe=ZOe(function r(e,t,i,o){lRe(this,{type:KU,regexp:e,string:t,global:i,unicode:o,done:false})},$U,function r(){var e=uRe(this);if(e.done)return{value:void 0,done:true};var t=e.regexp;var i=e.string;var o=dRe(t,i);if(o===null)return{value:void 0,done:e.done=true};if(e.global){if(String(o[0])=="")t.lastIndex=aRe(i,GU(t.lastIndex),e.unicode);return{value:o,done:false}}e.done=true;return{value:o,done:false}});var HI=function(r){var e=eRe(this);var t=String(r);var i,o,n,s,a,l;i=sRe(e,RegExp);o=e.flags;if(o===void 0&&e instanceof RegExp&&!("flags"in Kf)){o=VU.call(e)}n=o===void 0?"":String(o);s=new i(i===RegExp?e.source:e,n);a=!!~n.indexOf("g");l=!!~n.indexOf("u");s.lastIndex=GU(e.lastIndex);return new pRe(s,t,a,l)};JOe({target:"String",proto:true,forced:UI},{matchAll:function r(e){var t=WU(this);var i,o,n,s;if(e!=null){if(rRe(e)){i=String(WU("flags"in Kf?e.flags:VU.call(e)));if(!~i.indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes")}if(UI)return qI.apply(t,arguments);n=e[Uv];if(n===void 0&&NI&&tRe(e)=="RegExp")n=HI;if(n!=null)return QOe(n).call(e,t)}else if(UI)return qI.apply(t,arguments);o=String(t);s=new RegExp(e,"g");return NI?HI.call(s,o):s[Uv](o)}});NI||Uv in Kf||iRe(Kf,Uv,HI)});var Nv=C((got,YU)=>{"use strict";var mRe=so();var hRe=Kr();YU.exports="".repeat||function r(e){var t=String(hRe(this));var i="";var o=mRe(e);if(o<0||o==Infinity)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))if(o&1)i+=t;return i}});var qv=C((yot,ZU)=>{var fRe=gt();var gRe=Nv();var yRe=Kr();var bRe=Math.ceil;var JU=function(r){return function(e,t,i){var o=String(yRe(e));var n=o.length;var s=i===void 0?" ":String(i);var a=fRe(t);var l,u;if(a<=n||s=="")return o;l=a-n;u=gRe.call(s,bRe(l/s.length));if(u.length>l)u=u.slice(0,l);return r?o+u:u+o}};ZU.exports={start:JU(false),end:JU(true)}});var WI=C((bot,QU)=>{var _Re=Of();QU.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_Re)});var e9=C(()=>{"use strict";var vRe=U();var xRe=qv().end;var CRe=WI();vRe({target:"String",proto:true,forced:CRe},{padEnd:function r(e){return xRe(this,e,arguments.length>1?arguments[1]:void 0)}})});var t9=C(()=>{"use strict";var SRe=U();var wRe=qv().start;var TRe=WI();SRe({target:"String",proto:true,forced:TRe},{padStart:function r(e){return wRe(this,e,arguments.length>1?arguments[1]:void 0)}})});var r9=C(()=>{var IRe=U();var ERe=Nv();IRe({target:"String",proto:true},{repeat:ERe})});var i9=C(()=>{"use strict";var kRe=Vf();var DRe=rt();var ORe=Vt();var RRe=gt();var ARe=so();var FRe=Kr();var PRe=jf();var BRe=$f();var MRe=Math.max;var LRe=Math.min;var zRe=Math.floor;var URe=/\$([$&'`]|\d\d?|<[^>]*>)/g;var NRe=/\$([$&'`]|\d\d?)/g;var qRe=function(r){return r===void 0?r:String(r)};kRe("replace",2,function(r,e,t,i){var o=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;var n=i.REPLACE_KEEPS_$0;var s=o?"$":"$0";return[function l(u,c){var d=FRe(this);var m=u==void 0?void 0:u[r];return m!==void 0?m.call(u,d,c):e.call(String(d),u,c)},function(l,u){if(!o&&n||typeof u==="string"&&u.indexOf(s)===-1){var c=t(e,l,this,u);if(c.done)return c.value}var d=DRe(l);var m=String(this);var h=typeof u==="function";if(!h)u=String(u);var f=d.global;if(f){var b=d.unicode;d.lastIndex=0}var _=[];while(true){var y=BRe(d,m);if(y===null)break;_.push(y);if(!f)break;var I=String(y[0]);if(I==="")d.lastIndex=PRe(m,RRe(d.lastIndex),b)}var T="";var D=0;for(var P=0;P<_.length;P++){y=_[P];var k=String(y[0]);var A=MRe(LRe(ARe(y.index),m.length),0);var Q=[];for(var R=1;R<y.length;R++)Q.push(qRe(y[R]));var M=y.groups;if(h){var oe=[k].concat(Q,A,m);if(M!==void 0)oe.push(M);var ce=String(u.apply(void 0,oe))}else{ce=a(k,m,A,Q,M,u)}if(A>=D){T+=m.slice(D,A)+ce;D=A+k.length}}return T+m.slice(D)}];function a(l,u,c,d,m,h){var f=c+l.length;var b=d.length;var _=NRe;if(m!==void 0){m=ORe(m);_=URe}return e.call(h,_,function(y,I){var T;switch(I.charAt(0)){case"$":return"$";case"&":return l;case"`":return u.slice(0,c);case"'":return u.slice(f);case"<":T=m[I.slice(1,-1)];break;default:var D=+I;if(D===0)return y;if(D>b){var P=zRe(D/10);if(P===0)return y;if(P<=b)return d[P-1]===void 0?I.charAt(1):d[P-1]+I.charAt(1);return y}T=d[D-1]}return T===void 0?"":T})}})});var n9=C(()=>{"use strict";var HRe=Vf();var WRe=rt();var GRe=Kr();var o9=mI();var VRe=$f();HRe("search",1,function(r,e,t){return[function i(o){var n=GRe(this);var s=o==void 0?void 0:o[r];return s!==void 0?s.call(o,n):new RegExp(o)[r](String(n))},function(i){var o=t(e,i,this);if(o.done)return o.value;var n=WRe(i);var s=String(this);var a=n.lastIndex;if(!o9(a,0))n.lastIndex=0;var l=VRe(n,s);if(!o9(n.lastIndex,a))n.lastIndex=a;return l===null?-1:l.index}]})});var l9=C(()=>{"use strict";var jRe=Vf();var $Re=Hf();var KRe=rt();var s9=Kr();var XRe=is();var YRe=jf();var JRe=gt();var a9=$f();var ZRe=Gf();var QRe=Te();var eAe=[].push;var tAe=Math.min;var GI=4294967295;var rm=!QRe(function(){return!RegExp(GI,"y")});jRe("split",2,function(r,e,t){var i;if("abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length){i=function(o,n){var s=String(s9(this));var a=n===void 0?GI:n>>>0;if(a===0)return[];if(o===void 0)return[s];if(!$Re(o)){return e.call(s,o,a)}var l=[];var u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(o.sticky?"y":"");var c=0;var d=new RegExp(o.source,u+"g");var m,h,f;while(m=ZRe.call(d,s)){h=d.lastIndex;if(h>c){l.push(s.slice(c,m.index));if(m.length>1&&m.index<s.length)eAe.apply(l,m.slice(1));f=m[0].length;c=h;if(l.length>=a)break}if(d.lastIndex===m.index)d.lastIndex++}if(c===s.length){if(f||!d.test(""))l.push("")}else l.push(s.slice(c));return l.length>a?l.slice(0,a):l}}else if("0".split(void 0,0).length){i=function(o,n){return o===void 0&&n===0?[]:e.call(this,o,n)}}else i=e;return[function o(n,s){var a=s9(this);var l=n==void 0?void 0:n[r];return l!==void 0?l.call(n,a,s):i.call(String(a),n,s)},function(o,n){var s=t(i,o,this,n,i!==e);if(s.done)return s.value;var a=KRe(o);var l=String(this);var u=XRe(a,RegExp);var c=a.unicode;var d=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(rm?"y":"g");var m=new u(rm?a:"^(?:"+a.source+")",d);var h=n===void 0?GI:n>>>0;if(h===0)return[];if(l.length===0)return a9(m,l)===null?[l]:[];var f=0;var b=0;var _=[];while(b<l.length){m.lastIndex=rm?b:0;var y=a9(m,rm?l:l.slice(b));var I;if(y===null||(I=tAe(JRe(m.lastIndex+(rm?0:b)),l.length))===f){b=YRe(l,b,c)}else{_.push(l.slice(f,b));if(_.length===h)return _;for(var T=1;T<=y.length-1;T++){_.push(y[T]);if(_.length===h)return _}b=f=I}}_.push(l.slice(f));return _}]},!rm)});var d9=C(()=>{"use strict";var rAe=U();var iAe=Lr().f;var oAe=gt();var nAe=Pv();var sAe=Kr();var aAe=Bv();var lAe=Lo();var u9="".startsWith;var uAe=Math.min;var c9=aAe("startsWith");var cAe=!lAe&&!c9&&!!function(){var r=iAe(String.prototype,"startsWith");return r&&!r.writable}();rAe({target:"String",proto:true,forced:!cAe&&!c9},{startsWith:function r(e){var t=String(sAe(this));nAe(e);var i=oAe(uAe(arguments.length>1?arguments[1]:void 0,t.length));var o=String(e);return u9?u9.call(t,o,i):t.slice(i,i+o.length)===o}})});var Xf=C((Fot,p9)=>{p9.exports="	\n\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF"});var xc=C((Pot,m9)=>{var dAe=Kr();var pAe=Xf();var Hv="["+pAe+"]";var mAe=RegExp("^"+Hv+Hv+"*");var hAe=RegExp(Hv+Hv+"*$");var VI=function(r){return function(e){var t=String(dAe(e));if(r&1)t=t.replace(mAe,"");if(r&2)t=t.replace(hAe,"");return t}};m9.exports={start:VI(1),end:VI(2),trim:VI(3)}});var Wv=C((Bot,g9)=>{var fAe=Te();var h9=Xf();var f9="\u200B\x85\u180E";g9.exports=function(r){return fAe(function(){return!!h9[r]()||f9[r]()!=f9||h9[r].name!==r})}});var y9=C(()=>{"use strict";var gAe=U();var yAe=xc().trim;var bAe=Wv();gAe({target:"String",proto:true,forced:bAe("trim")},{trim:function r(){return yAe(this)}})});var v9=C(()=>{"use strict";var _Ae=U();var vAe=xc().start;var xAe=Wv();var _9=xAe("trimStart");var b9=_9?function r(){return vAe(this)}:"".trimStart;_Ae({target:"String",proto:true,forced:_9},{trimStart:b9,trimLeft:b9})});var S9=C(()=>{"use strict";var CAe=U();var SAe=xc().end;var wAe=Wv();var C9=wAe("trimEnd");var x9=C9?function r(){return SAe(this)}:"".trimEnd;CAe({target:"String",proto:true,forced:C9},{trimEnd:x9,trimRight:x9})});var Pi=C((Hot,w9)=>{var TAe=Kr();var IAe=/"/g;w9.exports=function(r,e,t,i){var o=String(TAe(r));var n="<"+e;if(t!=="")n+=" "+t+'="'+String(i).replace(IAe,"&quot;")+'"';return n+">"+o+"</"+e+">"}});var Bi=C((Wot,T9)=>{var EAe=Te();T9.exports=function(r){return EAe(function(){var e=""[r]('"');return e!==e.toLowerCase()||e.split('"').length>3})}});var I9=C(()=>{"use strict";var kAe=U();var DAe=Pi();var OAe=Bi();kAe({target:"String",proto:true,forced:OAe("anchor")},{anchor:function r(e){return DAe(this,"a","name",e)}})});var E9=C(()=>{"use strict";var RAe=U();var AAe=Pi();var FAe=Bi();RAe({target:"String",proto:true,forced:FAe("big")},{big:function r(){return AAe(this,"big","","")}})});var k9=C(()=>{"use strict";var PAe=U();var BAe=Pi();var MAe=Bi();PAe({target:"String",proto:true,forced:MAe("blink")},{blink:function r(){return BAe(this,"blink","","")}})});var D9=C(()=>{"use strict";var LAe=U();var zAe=Pi();var UAe=Bi();LAe({target:"String",proto:true,forced:UAe("bold")},{bold:function r(){return zAe(this,"b","","")}})});var O9=C(()=>{"use strict";var NAe=U();var qAe=Pi();var HAe=Bi();NAe({target:"String",proto:true,forced:HAe("fixed")},{fixed:function r(){return qAe(this,"tt","","")}})});var R9=C(()=>{"use strict";var WAe=U();var GAe=Pi();var VAe=Bi();WAe({target:"String",proto:true,forced:VAe("fontcolor")},{fontcolor:function r(e){return GAe(this,"font","color",e)}})});var A9=C(()=>{"use strict";var jAe=U();var $Ae=Pi();var KAe=Bi();jAe({target:"String",proto:true,forced:KAe("fontsize")},{fontsize:function r(e){return $Ae(this,"font","size",e)}})});var F9=C(()=>{"use strict";var XAe=U();var YAe=Pi();var JAe=Bi();XAe({target:"String",proto:true,forced:JAe("italics")},{italics:function r(){return YAe(this,"i","","")}})});var P9=C(()=>{"use strict";var ZAe=U();var QAe=Pi();var eFe=Bi();ZAe({target:"String",proto:true,forced:eFe("link")},{link:function r(e){return QAe(this,"a","href",e)}})});var B9=C(()=>{"use strict";var tFe=U();var rFe=Pi();var iFe=Bi();tFe({target:"String",proto:true,forced:iFe("small")},{small:function r(){return rFe(this,"small","","")}})});var M9=C(()=>{"use strict";var oFe=U();var nFe=Pi();var sFe=Bi();oFe({target:"String",proto:true,forced:sFe("strike")},{strike:function r(){return nFe(this,"strike","","")}})});var L9=C(()=>{"use strict";var aFe=U();var lFe=Pi();var uFe=Bi();aFe({target:"String",proto:true,forced:uFe("sub")},{sub:function r(){return lFe(this,"sub","","")}})});var z9=C(()=>{"use strict";var cFe=U();var dFe=Pi();var pFe=Bi();cFe({target:"String",proto:true,forced:pFe("sup")},{sup:function r(){return dFe(this,"sup","","")}})});var Yf=C((gnt,N9)=>{var mFe=Ze();var U9=Nl();N9.exports=function(r,e,t){var i,o;if(U9&&typeof(i=e.constructor)=="function"&&i!==t&&mFe(o=i.prototype)&&o!==t.prototype)U9(r,o);return r}});var W9=C(()=>{var hFe=nt();var H9=Le();var fFe=Hp();var gFe=Yf();var yFe=Tt().f;var bFe=Ml().f;var _Fe=Hf();var vFe=tm();var xFe=Wf();var CFe=zr();var SFe=Te();var wFe=Yr().set;var TFe=vc();var IFe=ht();var EFe=IFe("match");var ns=H9.RegExp;var jI=ns.prototype;var Jf=/a/g;var $I=/a/g;var YI=new ns(Jf)!==Jf;var JI=xFe.UNSUPPORTED_Y;var kFe=hFe&&fFe("RegExp",!YI||JI||SFe(function(){$I[EFe]=false;return ns(Jf)!=Jf||ns($I)==$I||ns(Jf,"i")!="/a/i"}));if(kFe){os=function r(e,t){var i=this instanceof os;var o=_Fe(e);var n=t===void 0;var s;if(!i&&o&&e.constructor===os&&n){return e}if(YI){if(o&&!n)e=e.source}else if(e instanceof os){if(n)t=vFe.call(e);e=e.source}if(JI){s=!!t&&t.indexOf("y")>-1;if(s)t=t.replace(/y/g,"")}var a=gFe(YI?new ns(e,t):ns(e,t),i?this:jI,os);if(JI&&s)wFe(a,{sticky:s});return a};q9=function(r){r in os||yFe(os,r,{configurable:true,get:function(){return ns[r]},set:function(e){ns[r]=e}})};KI=bFe(ns);XI=0;while(KI.length>XI)q9(KI[XI++]);jI.constructor=os;os.prototype=jI;CFe(H9,"RegExp",os)}var os;var q9;var KI;var XI;TFe("RegExp")});var G9=C(()=>{var DFe=nt();var OFe=Tt();var RFe=tm();var AFe=Wf().UNSUPPORTED_Y;if(DFe&&(/./g.flags!="g"||AFe)){OFe.f(RegExp.prototype,"flags",{configurable:true,get:RFe})}});var V9=C(()=>{var FFe=nt();var PFe=Wf().UNSUPPORTED_Y;var BFe=Tt().f;var MFe=Yr().get;var LFe=RegExp.prototype;if(FFe&&PFe){BFe(RegExp.prototype,"sticky",{configurable:true,get:function(){if(this===LFe)return void 0;if(this instanceof RegExp){return!!MFe(this).sticky}throw TypeError("Incompatible receiver, RegExp required")}})}});var j9=C(()=>{"use strict";Lv();var zFe=U();var UFe=Ze();var NFe=function(){var r=false;var e=/[ac]/;e.exec=function(){r=true;return/./.exec.apply(this,arguments)};return e.test("abc")===true&&r}();var qFe=/./.test;zFe({target:"RegExp",proto:true,forced:!NFe},{test:function(r){if(typeof this.exec!=="function"){return qFe.call(this,r)}var e=this.exec(r);if(e!==null&&!UFe(e)){throw new Error("RegExp exec method returned something other than an Object or null")}return!!e}})});var X9=C(()=>{"use strict";var HFe=zr();var WFe=rt();var GFe=Te();var VFe=tm();var ZI="toString";var $9=RegExp.prototype;var K9=$9[ZI];var jFe=GFe(function(){return K9.call({source:"a",flags:"b"})!="/a/b"});var $Fe=K9.name!=ZI;if(jFe||$Fe){HFe(RegExp.prototype,ZI,function r(){var e=WFe(this);var t=String(e.source);var i=e.flags;var o=String(i===void 0&&e instanceof RegExp&&!("flags"in $9)?VFe.call(e):i);return"/"+t+"/"+o},{unsafe:true})}});var QI=C((Ent,J9)=>{var KFe=Le();var XFe=xc().trim;var Y9=Xf();var Gv=KFe.parseInt;var YFe=/^[+-]?0[Xx]/;var JFe=Gv(Y9+"08")!==8||Gv(Y9+"0x16")!==22;J9.exports=JFe?function r(e,t){var i=XFe(String(e));return Gv(i,t>>>0||(YFe.test(i)?16:10))}:Gv});var Q9=C(()=>{var ZFe=U();var Z9=QI();ZFe({global:true,forced:parseInt!=Z9},{parseInt:Z9})});var tE=C((Ont,eN)=>{var QFe=Le();var ePe=xc().trim;var tPe=Xf();var eE=QFe.parseFloat;var rPe=1/eE(tPe+"-0")!==-Infinity;eN.exports=rPe?function r(e){var t=ePe(String(e));var i=eE(t);return i===0&&t.charAt(0)=="-"?-0:i}:eE});var rN=C(()=>{var iPe=U();var tN=tE();iPe({global:true,forced:parseFloat!=tN},{parseFloat:tN})});var aN=C(()=>{"use strict";var oPe=nt();var nN=Le();var nPe=Hp();var sPe=zr();var iN=Zt();var sN=oo();var aPe=Yf();var lPe=Mo();var uPe=Te();var cPe=es();var dPe=Ml().f;var pPe=Lr().f;var mPe=Tt().f;var hPe=xc().trim;var Qf="Number";var Wl=nN[Qf];var jv=Wl.prototype;var fPe=sN(cPe(jv))==Qf;var oN=function(r){var e=lPe(r,false);var t,i,o,n,s,a,l,u;if(typeof e=="string"&&e.length>2){e=hPe(e);t=e.charCodeAt(0);if(t===43||t===45){i=e.charCodeAt(2);if(i===88||i===120)return NaN}else if(t===48){switch(e.charCodeAt(1)){case 66:case 98:o=2;n=49;break;case 79:case 111:o=8;n=55;break;default:return+e}s=e.slice(2);a=s.length;for(l=0;l<a;l++){u=s.charCodeAt(l);if(u<48||u>n)return NaN}return parseInt(s,o)}}return+e};if(nPe(Qf,!Wl(" 0o1")||!Wl("0b1")||Wl("+0x1"))){Hl=function r(e){var t=arguments.length<1?0:e;var i=this;return i instanceof Hl&&(fPe?uPe(function(){jv.valueOf.call(i)}):sN(i)!=Qf)?aPe(new Wl(oN(t)),i,Hl):oN(t)};for(rE=oPe?dPe(Wl):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Vv=0;rE.length>Vv;Vv++){if(iN(Wl,Zf=rE[Vv])&&!iN(Hl,Zf)){mPe(Hl,Zf,pPe(Wl,Zf))}}Hl.prototype=jv;jv.constructor=Hl;sPe(nN,Qf,Hl)}var Hl;var rE;var Vv;var Zf});var lN=C(()=>{var gPe=U();gPe({target:"Number",stat:true},{EPSILON:Math.pow(2,-52)})});var cN=C((Lnt,uN)=>{var yPe=Le();var bPe=yPe.isFinite;uN.exports=Number.isFinite||function r(e){return typeof e=="number"&&bPe(e)}});var dN=C(()=>{var _Pe=U();var vPe=cN();_Pe({target:"Number",stat:true},{isFinite:vPe})});var iE=C((Nnt,pN)=>{var xPe=Ze();var CPe=Math.floor;pN.exports=function r(e){return!xPe(e)&&isFinite(e)&&CPe(e)===e}});var mN=C(()=>{var SPe=U();var wPe=iE();SPe({target:"Number",stat:true},{isInteger:wPe})});var hN=C(()=>{var TPe=U();TPe({target:"Number",stat:true},{isNaN:function r(e){return e!=e}})});var fN=C(()=>{var IPe=U();var EPe=iE();var kPe=Math.abs;IPe({target:"Number",stat:true},{isSafeInteger:function r(e){return EPe(e)&&kPe(e)<=9007199254740991}})});var gN=C(()=>{var DPe=U();DPe({target:"Number",stat:true},{MAX_SAFE_INTEGER:9007199254740991})});var yN=C(()=>{var OPe=U();OPe({target:"Number",stat:true},{MIN_SAFE_INTEGER:-9007199254740991})});var _N=C(()=>{var RPe=U();var bN=tE();RPe({target:"Number",stat:true,forced:Number.parseFloat!=bN},{parseFloat:bN})});var xN=C(()=>{var APe=U();var vN=QI();APe({target:"Number",stat:true,forced:Number.parseInt!=vN},{parseInt:vN})});var oE=C((tst,CN)=>{var FPe=oo();CN.exports=function(r){if(typeof r!="number"&&FPe(r)!="Number"){throw TypeError("Incorrect invocation")}return+r}});var TN=C(()=>{"use strict";var PPe=U();var BPe=so();var MPe=oE();var nE=Nv();var LPe=Te();var SN=1 .toFixed;var wN=Math.floor;var im=function(r,e,t){return e===0?t:e%2===1?im(r,e-1,t*r):im(r*r,e/2,t)};var zPe=function(r){var e=0;var t=r;while(t>=4096){e+=12;t/=4096}while(t>=2){e+=1;t/=2}return e};var UPe=SN&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!LPe(function(){SN.call({})});PPe({target:"Number",proto:true,forced:UPe},{toFixed:function r(e){var t=MPe(this);var i=BPe(e);var o=[0,0,0,0,0,0];var n="";var s="0";var a,l,u,c;var d=function(f,b){var _=-1;var y=b;while(++_<6){y+=f*o[_];o[_]=y%1e7;y=wN(y/1e7)}};var m=function(f){var b=6;var _=0;while(--b>=0){_+=o[b];o[b]=wN(_/f);_=_%f*1e7}};var h=function(){var f=6;var b="";while(--f>=0){if(b!==""||f===0||o[f]!==0){var _=String(o[f]);b=b===""?_:b+nE.call("0",7-_.length)+_}}return b};if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(t!=t)return"NaN";if(t<=-1e21||t>=1e21)return String(t);if(t<0){n="-";t=-t}if(t>1e-21){a=zPe(t*im(2,69,1))-69;l=a<0?t*im(2,-a,1):t/im(2,a,1);l*=4503599627370496;a=52-a;if(a>0){d(0,l);u=i;while(u>=7){d(1e7,0);u-=7}d(im(10,u,1),0);u=a-1;while(u>=23){m(1<<23);u-=23}m(1<<u);d(1,1);m(2);s=h()}else{d(0,l);d(1<<-a,0);s=h()+nE.call("0",i)}}if(i>0){c=s.length;s=n+(c<=i?"0."+nE.call("0",i-c)+s:s.slice(0,c-i)+"."+s.slice(c-i))}else{s=n+s}return s}})});var kN=C(()=>{"use strict";var NPe=U();var IN=Te();var EN=oE();var $v=1 .toPrecision;var qPe=IN(function(){return $v.call(1,void 0)!=="1"})||!IN(function(){$v.call({})});NPe({target:"Number",proto:true,forced:qPe},{toPrecision:function r(e){return e===void 0?$v.call(EN(this)):$v.call(EN(this),e)}})});var sE=C((sst,DN)=>{var HPe=Math.log;DN.exports=Math.log1p||function r(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:HPe(1+e)}});var RN=C(()=>{var WPe=U();var GPe=sE();var aE=Math.acosh;var VPe=Math.log;var ON=Math.sqrt;var jPe=Math.LN2;var $Pe=!aE||Math.floor(aE(Number.MAX_VALUE))!=710||aE(Infinity)!=Infinity;WPe({target:"Math",stat:true,forced:$Pe},{acosh:function r(e){return(e=+e)<1?NaN:e>9490626562425156e-8?VPe(e)+jPe:GPe(e-1+ON(e-1)*ON(e+1))}})});var PN=C(()=>{var KPe=U();var AN=Math.asinh;var XPe=Math.log;var YPe=Math.sqrt;function FN(r){return!isFinite(r=+r)||r==0?r:r<0?-FN(-r):XPe(r+YPe(r*r+1))}KPe({target:"Math",stat:true,forced:!(AN&&1/AN(0)>0)},{asinh:FN})});var MN=C(()=>{var JPe=U();var BN=Math.atanh;var ZPe=Math.log;JPe({target:"Math",stat:true,forced:!(BN&&1/BN(-0)<0)},{atanh:function r(e){return(e=+e)==0?e:ZPe((1+e)/(1-e))/2}})});var Kv=C((mst,LN)=>{LN.exports=Math.sign||function r(e){return(e=+e)==0||e!=e?e:e<0?-1:1}});var zN=C(()=>{var QPe=U();var eBe=Kv();var tBe=Math.abs;var rBe=Math.pow;QPe({target:"Math",stat:true},{cbrt:function r(e){return eBe(e=+e)*rBe(tBe(e),1/3)}})});var UN=C(()=>{var iBe=U();var oBe=Math.floor;var nBe=Math.log;var sBe=Math.LOG2E;iBe({target:"Math",stat:true},{clz32:function r(e){return(e>>>=0)?31-oBe(nBe(e+.5)*sBe):32}})});var tg=C((bst,NN)=>{var eg=Math.expm1;var aBe=Math.exp;NN.exports=!eg||eg(10)>22025.465794806718||eg(10)<22025.465794806718||eg(-2e-17)!=-2e-17?function r(e){return(e=+e)==0?e:e>-1e-6&&e<1e-6?e+e*e/2:aBe(e)-1}:eg});var HN=C(()=>{var lBe=U();var uBe=tg();var qN=Math.cosh;var cBe=Math.abs;var lE=Math.E;lBe({target:"Math",stat:true,forced:!qN||qN(710)===Infinity},{cosh:function r(e){var t=uBe(cBe(e)-1)+1;return(t+1/(t*lE*lE))*(lE/2)}})});var GN=C(()=>{var dBe=U();var WN=tg();dBe({target:"Math",stat:true,forced:WN!=Math.expm1},{expm1:WN})});var jN=C((Sst,VN)=>{var pBe=Kv();var mBe=Math.abs;var Yv=Math.pow;var cE=Yv(2,-52);var Xv=Yv(2,-23);var hBe=Yv(2,127)*(2-Xv);var uE=Yv(2,-126);var fBe=function(r){return r+1/cE-1/cE};VN.exports=Math.fround||function r(e){var t=mBe(e);var i=pBe(e);var o,n;if(t<uE)return i*fBe(t/uE/Xv)*uE*Xv;o=(1+Xv/cE)*t;n=o-(o-t);if(n>hBe||n!=n)return i*Infinity;return i*n}});var $N=C(()=>{var gBe=U();var yBe=jN();gBe({target:"Math",stat:true},{fround:yBe})});var XN=C(()=>{var bBe=U();var KN=Math.hypot;var _Be=Math.abs;var vBe=Math.sqrt;var xBe=!!KN&&KN(Infinity,NaN)!==Infinity;bBe({target:"Math",stat:true,forced:xBe},{hypot:function r(e,t){var i=0;var o=0;var n=arguments.length;var s=0;var a,l;while(o<n){a=_Be(arguments[o++]);if(s<a){l=s/a;i=i*l*l+1;s=a}else if(a>0){l=a/s;i+=l*l}else i+=a}return s===Infinity?Infinity:s*vBe(i)}})});var JN=C(()=>{var CBe=U();var SBe=Te();var YN=Math.imul;var wBe=SBe(function(){return YN(4294967295,5)!=-5||YN.length!=2});CBe({target:"Math",stat:true,forced:wBe},{imul:function r(e,t){var i=65535;var o=+e;var n=+t;var s=i&o;var a=i&n;return 0|s*a+((i&o>>>16)*a+s*(i&n>>>16)<<16>>>0)}})});var ZN=C(()=>{var TBe=U();var IBe=Math.log;var EBe=Math.LOG10E;TBe({target:"Math",stat:true},{log10:function r(e){return IBe(e)*EBe}})});var QN=C(()=>{var kBe=U();var DBe=sE();kBe({target:"Math",stat:true},{log1p:DBe})});var e7=C(()=>{var OBe=U();var RBe=Math.log;var ABe=Math.LN2;OBe({target:"Math",stat:true},{log2:function r(e){return RBe(e)/ABe}})});var t7=C(()=>{var FBe=U();var PBe=Kv();FBe({target:"Math",stat:true},{sign:PBe})});var o7=C(()=>{var BBe=U();var MBe=Te();var r7=tg();var LBe=Math.abs;var i7=Math.exp;var zBe=Math.E;var UBe=MBe(function(){return Math.sinh(-2e-17)!=-2e-17});BBe({target:"Math",stat:true,forced:UBe},{sinh:function r(e){return LBe(e=+e)<1?(r7(e)-r7(-e))/2:(i7(e-1)-i7(-e-1))*(zBe/2)}})});var a7=C(()=>{var NBe=U();var n7=tg();var s7=Math.exp;NBe({target:"Math",stat:true},{tanh:function r(e){var t=n7(e=+e);var i=n7(-e);return t==Infinity?1:i==Infinity?-1:(t-i)/(s7(e)+s7(-e))}})});var l7=C(()=>{var qBe=U();var HBe=Math.ceil;var WBe=Math.floor;qBe({target:"Math",stat:true},{trunc:function r(e){return(e>0?WBe:HBe)(e)}})});var u7=C(()=>{var GBe=U();GBe({target:"Date",stat:true},{now:function r(){return new Date().getTime()}})});var c7=C(()=>{"use strict";var VBe=U();var jBe=Te();var $Be=Vt();var KBe=Mo();var XBe=jBe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});VBe({target:"Date",proto:true,forced:XBe},{toJSON:function r(e){var t=$Be(this);var i=KBe(t);return typeof i=="number"&&!isFinite(i)?null:t.toISOString()}})});var h7=C((Kst,m7)=>{"use strict";var d7=Te();var Cc=qv().start;var YBe=Math.abs;var p7=Date.prototype;var JBe=p7.getTime;var dE=p7.toISOString;m7.exports=d7(function(){return dE.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!d7(function(){dE.call(new Date(NaN))})?function r(){if(!isFinite(JBe.call(this)))throw RangeError("Invalid time value");var e=this;var t=e.getUTCFullYear();var i=e.getUTCMilliseconds();var o=t<0?"-":t>9999?"+":"";return o+Cc(YBe(t),o?6:4,0)+"-"+Cc(e.getUTCMonth()+1,2,0)+"-"+Cc(e.getUTCDate(),2,0)+"T"+Cc(e.getUTCHours(),2,0)+":"+Cc(e.getUTCMinutes(),2,0)+":"+Cc(e.getUTCSeconds(),2,0)+"."+Cc(i,3,0)+"Z"}:dE});var g7=C(()=>{var ZBe=U();var f7=h7();ZBe({target:"Date",proto:true,forced:Date.prototype.toISOString!==f7},{toISOString:f7})});var _7=C(()=>{var QBe=zr();var pE=Date.prototype;var y7="Invalid Date";var b7="toString";var eMe=pE[b7];var tMe=pE.getTime;if(new Date(NaN)+""!=y7){QBe(pE,b7,function r(){var e=tMe.call(this);return e===e?eMe.call(this):y7})}});var x7=C((Qst,v7)=>{"use strict";var rMe=rt();var iMe=Mo();v7.exports=function(r){if(r!=="string"&&r!=="number"&&r!=="default"){throw TypeError("Incorrect hint")}return iMe(rMe(this),r!=="number")}});var w7=C(()=>{var oMe=Xr();var nMe=x7();var sMe=ht();var C7=sMe("toPrimitive");var S7=Date.prototype;if(!(C7 in S7)){oMe(S7,C7,nMe)}});var E7=C(()=>{var aMe=U();var lMe=no();var uMe=Te();var Jv=lMe("JSON","stringify");var cMe=/[\uD800-\uDFFF]/g;var T7=/^[\uD800-\uDBFF]$/;var I7=/^[\uDC00-\uDFFF]$/;var dMe=function(r,e,t){var i=t.charAt(e-1);var o=t.charAt(e+1);if(T7.test(r)&&!I7.test(o)||I7.test(r)&&!T7.test(i)){return"\\u"+r.charCodeAt(0).toString(16)}return r};var pMe=uMe(function(){return Jv("\uDF06\uD834")!=='"\\udf06\\ud834"'||Jv("\uDEAD")!=='"\\udead"'});if(Jv){aMe({target:"JSON",stat:true,forced:pMe},{stringify:function r(e,t,i){var o=Jv.apply(null,arguments);return typeof o=="string"?o.replace(cMe,dMe):o}})}});var mE=C((oat,k7)=>{var mMe=Le();k7.exports=mMe.Promise});var Sc=C((nat,D7)=>{var hMe=zr();D7.exports=function(r,e,t){for(var i in e)hMe(r,i,e[i],t);return r}});var ba=C((sat,O7)=>{O7.exports=function(r,e,t){if(!(r instanceof e)){throw TypeError("Incorrect "+(t?t+" ":"")+"invocation")}return r}});var hE=C((aat,R7)=>{var fMe=Of();R7.exports=/(iphone|ipod|ipad).*applewebkit/i.test(fMe)});var Zv=C((lat,U7)=>{var ss=Le();var gMe=Te();var yMe=oo();var bMe=ts();var A7=c2();var F7=tv();var _Me=hE();var vE=ss.location;var xE=ss.setImmediate;var CE=ss.clearImmediate;var P7=ss.process;var B7=ss.MessageChannel;var fE=ss.Dispatch;var gE=0;var rg={};var M7="onreadystatechange";var wc;var yE;var bE;var SE=function(r){if(rg.hasOwnProperty(r)){var e=rg[r];delete rg[r];e()}};var _E=function(r){return function(){SE(r)}};var L7=function(r){SE(r.data)};var z7=function(r){ss.postMessage(r+"",vE.protocol+"//"+vE.host)};if(!xE||!CE){xE=function r(e){var t=[];var i=1;while(arguments.length>i)t.push(arguments[i++]);rg[++gE]=function(){(typeof e=="function"?e:Function(e)).apply(void 0,t)};wc(gE);return gE};CE=function r(e){delete rg[e]};if(yMe(P7)=="process"){wc=function(r){P7.nextTick(_E(r))}}else if(fE&&fE.now){wc=function(r){fE.now(_E(r))}}else if(B7&&!_Me){yE=new B7;bE=yE.port2;yE.port1.onmessage=L7;wc=bMe(bE.postMessage,bE,1)}else if(ss.addEventListener&&typeof postMessage=="function"&&!ss.importScripts&&!gMe(z7)&&vE.protocol!=="file:"){wc=z7;ss.addEventListener("message",L7,false)}else if(M7 in F7("script")){wc=function(r){A7.appendChild(F7("script"))[M7]=function(){A7.removeChild(this);SE(r)}}}else{wc=function(r){setTimeout(_E(r),0)}}}U7.exports={set:xE,clear:CE}});var DE=C((uat,V7)=>{var nm=Le();var vMe=Lr().f;var xMe=oo();var CMe=Zv().set;var SMe=hE();var N7=nm.MutationObserver||nm.WebKitMutationObserver;var kE=nm.process;var wE=nm.Promise;var q7=xMe(kE)=="process";var H7=vMe(nm,"queueMicrotask");var G7=H7&&H7.value;var ig;var Tc;var og;var om;var TE;var IE;var EE;var W7;if(!G7){ig=function(){var r,e;if(q7&&(r=kE.domain))r.exit();while(Tc){e=Tc.fn;Tc=Tc.next;try{e()}catch(t){if(Tc)om();else og=void 0;throw t}}og=void 0;if(r)r.enter()};if(q7){om=function(){kE.nextTick(ig)}}else if(N7&&!SMe){TE=true;IE=document.createTextNode("");new N7(ig).observe(IE,{characterData:true});om=function(){IE.data=TE=!TE}}else if(wE&&wE.resolve){EE=wE.resolve(void 0);W7=EE.then;om=function(){W7.call(EE,ig)}}else{om=function(){CMe.call(nm,ig)}}}V7.exports=G7||function(r){var e={fn:r,next:void 0};if(og)og.next=e;if(!Tc){Tc=e;om()}og=e}});var Qv=C((cat,$7)=>{"use strict";var j7=ci();var wMe=function(r){var e,t;this.promise=new r(function(i,o){if(e!==void 0||t!==void 0)throw TypeError("Bad Promise constructor");e=i;t=o});this.resolve=j7(e);this.reject=j7(t)};$7.exports.f=function(r){return new wMe(r)}});var OE=C((dat,K7)=>{var TMe=rt();var IMe=Ze();var EMe=Qv();K7.exports=function(r,e){TMe(r);if(IMe(e)&&e.constructor===r)return e;var t=EMe.f(r);var i=t.resolve;i(e);return t.promise}});var Y7=C((pat,X7)=>{var kMe=Le();X7.exports=function(r,e){var t=kMe.console;if(t&&t.error){arguments.length===1?t.error(r):t.error(r,e)}}});var RE=C((mat,J7)=>{J7.exports=function(r){try{return{error:false,value:r()}}catch(e){return{error:true,value:e}}}});var yq=C(()=>{"use strict";var sg=U();var rx=Lo();var _a=Le();var sq=no();var tx=mE();var DMe=zr();var OMe=Sc();var RMe=mn();var AMe=vc();var FMe=Ze();var AE=ci();var PMe=ba();var BMe=oo();var MMe=iv();var Z7=_c();var LMe=Lf();var zMe=is();var aq=Zv().set;var lq=DE();var uq=OE();var UMe=Y7();var cq=Qv();var FE=RE();var ME=Yr();var NMe=Hp();var qMe=ht();var Q7=mv();var HMe=qMe("species");var as="Promise";var eq=ME.get;var WMe=ME.set;var GMe=ME.getterFor(as);var Jr=tx;var dq=_a.TypeError;var PE=_a.document;var ix=_a.process;var tq=sq("fetch");var lm=cq.f;var VMe=lm;var ng=BMe(ix)=="process";var jMe=!!(PE&&PE.createEvent&&_a.dispatchEvent);var pq="unhandledrejection";var $Me="rejectionhandled";var rq=0;var mq=1;var KMe=2;var LE=1;var hq=2;var ex;var iq;var zE;var oq;var ag=NMe(as,function(){var r=MMe(Jr)!==String(Jr);if(!r){if(Q7===66)return true;if(!ng&&typeof PromiseRejectionEvent!="function")return true}if(rx&&!Jr.prototype["finally"])return true;if(Q7>=51&&/native code/.test(Jr))return false;var e=Jr.resolve(1);var t=function(o){o(function(){},function(){})};var i=e.constructor={};i[HMe]=t;return!(e.then(function(){})instanceof t)});var XMe=ag||!LMe(function(r){Jr.all(r)["catch"](function(){})});var fq=function(r){var e;return FMe(r)&&typeof(e=r.then)=="function"?e:false};var UE=function(r,e,t){if(e.notified)return;e.notified=true;var i=e.reactions;lq(function(){var o=e.value;var n=e.state==mq;var s=0;while(i.length>s){var a=i[s++];var l=n?a.ok:a.fail;var u=a.resolve;var c=a.reject;var d=a.domain;var m,h,f;try{if(l){if(!n){if(e.rejection===hq)JMe(r,e);e.rejection=LE}if(l===true)m=o;else{if(d)d.enter();m=l(o);if(d){d.exit();f=true}}if(m===a.promise){c(dq("Promise-chain cycle"))}else if(h=fq(m)){h.call(m,u,c)}else u(m)}else c(o)}catch(b){if(d&&!f)d.exit();c(b)}}e.reactions=[];e.notified=false;if(t&&!e.rejection)YMe(r,e)})};var gq=function(r,e,t){var i,o;if(jMe){i=PE.createEvent("Event");i.promise=e;i.reason=t;i.initEvent(r,false,true);_a.dispatchEvent(i)}else i={promise:e,reason:t};if(o=_a["on"+r])o(i);else if(r===pq)UMe("Unhandled promise rejection",t)};var YMe=function(r,e){aq.call(_a,function(){var t=e.value;var i=nq(e);var o;if(i){o=FE(function(){if(ng){ix.emit("unhandledRejection",t,r)}else gq(pq,r,t)});e.rejection=ng||nq(e)?hq:LE;if(o.error)throw o.value}})};var nq=function(r){return r.rejection!==LE&&!r.parent};var JMe=function(r,e){aq.call(_a,function(){if(ng){ix.emit("rejectionHandled",r)}else gq($Me,r,e.value)})};var sm=function(r,e,t,i){return function(o){r(e,t,o,i)}};var am=function(r,e,t,i){if(e.done)return;e.done=true;if(i)e=i;e.value=t;e.state=KMe;UE(r,e,true)};var BE=function(r,e,t,i){if(e.done)return;e.done=true;if(i)e=i;try{if(r===t)throw dq("Promise can't be resolved itself");var o=fq(t);if(o){lq(function(){var n={done:false};try{o.call(t,sm(BE,r,n,e),sm(am,r,n,e))}catch(s){am(r,n,s,e)}})}else{e.value=t;e.state=mq;UE(r,e,false)}}catch(n){am(r,{done:false},n,e)}};if(ag){Jr=function r(e){PMe(this,Jr,as);AE(e);ex.call(this);var t=eq(this);try{e(sm(BE,this,t),sm(am,this,t))}catch(i){am(this,t,i)}};ex=function r(e){WMe(this,{type:as,done:false,notified:false,parent:false,reactions:[],rejection:false,state:rq,value:void 0})};ex.prototype=OMe(Jr.prototype,{then:function r(e,t){var i=GMe(this);var o=lm(zMe(this,Jr));o.ok=typeof e=="function"?e:true;o.fail=typeof t=="function"&&t;o.domain=ng?ix.domain:void 0;i.parent=true;i.reactions.push(o);if(i.state!=rq)UE(this,i,false);return o.promise},"catch":function(r){return this.then(void 0,r)}});iq=function(){var r=new ex;var e=eq(r);this.promise=r;this.resolve=sm(BE,r,e);this.reject=sm(am,r,e)};cq.f=lm=function(r){return r===Jr||r===zE?new iq(r):VMe(r)};if(!rx&&typeof tx=="function"){oq=tx.prototype.then;DMe(tx.prototype,"then",function r(e,t){var i=this;return new Jr(function(o,n){oq.call(i,o,n)}).then(e,t)},{unsafe:true});if(typeof tq=="function")sg({global:true,enumerable:true,forced:true},{fetch:function r(e){return uq(Jr,tq.apply(_a,arguments))}})}}sg({global:true,wrap:true,forced:ag},{Promise:Jr});RMe(Jr,as,false,true);AMe(as);zE=sq(as);sg({target:as,stat:true,forced:ag},{reject:function r(e){var t=lm(this);t.reject.call(void 0,e);return t.promise}});sg({target:as,stat:true,forced:rx||ag},{resolve:function r(e){return uq(rx&&this===zE?Jr:this,e)}});sg({target:as,stat:true,forced:XMe},{all:function r(e){var t=this;var i=lm(t);var o=i.resolve;var n=i.reject;var s=FE(function(){var a=AE(t.resolve);var l=[];var u=0;var c=1;Z7(e,function(d){var m=u++;var h=false;l.push(void 0);c++;a.call(t,d).then(function(f){if(h)return;h=true;l[m]=f;--c||o(l)},n)});--c||o(l)});if(s.error)n(s.value);return i.promise},race:function r(e){var t=this;var i=lm(t);var o=i.reject;var n=FE(function(){var s=AE(t.resolve);Z7(e,function(a){s.call(t,a).then(i.resolve,o)})});if(n.error)o(n.value);return i.promise}})});var bq=C(()=>{"use strict";var ZMe=U();var QMe=ci();var e5e=Qv();var t5e=RE();var r5e=_c();ZMe({target:"Promise",stat:true},{allSettled:function r(e){var t=this;var i=e5e.f(t);var o=i.resolve;var n=i.reject;var s=t5e(function(){var a=QMe(t.resolve);var l=[];var u=0;var c=1;r5e(e,function(d){var m=u++;var h=false;l.push(void 0);c++;a.call(t,d).then(function(f){if(h)return;h=true;l[m]={status:"fulfilled",value:f};--c||o(l)},function(f){if(h)return;h=true;l[m]={status:"rejected",reason:f};--c||o(l)})});--c||o(l)});if(s.error)n(s.value);return i.promise}})});var xq=C(()=>{"use strict";var i5e=U();var o5e=Lo();var lg=mE();var n5e=Te();var vq=no();var s5e=is();var _q=OE();var a5e=zr();var l5e=!!lg&&n5e(function(){lg.prototype["finally"].call({then:function(){}},function(){})});i5e({target:"Promise",proto:true,real:true,forced:l5e},{"finally":function(r){var e=s5e(this,vq("Promise"));var t=typeof r=="function";return this.then(t?function(i){return _q(e,r()).then(function(){return i})}:r,t?function(i){return _q(e,r()).then(function(){throw i})}:r)}});if(!o5e&&typeof lg=="function"&&!lg.prototype["finally"]){a5e(lg.prototype,"finally",vq("Promise").prototype["finally"])}});var ug=C((vat,Sq)=>{"use strict";var u5e=U();var c5e=Le();var Cq=Hp();var d5e=zr();var p5e=ql();var m5e=_c();var h5e=ba();var NE=Ze();var qE=Te();var f5e=Lf();var g5e=mn();var y5e=Yf();Sq.exports=function(r,e,t){var i=r.indexOf("Map")!==-1;var o=r.indexOf("Weak")!==-1;var n=i?"set":"add";var s=c5e[r];var a=s&&s.prototype;var l=s;var u={};var c=function(_){var y=a[_];d5e(a,_,_=="add"?function I(T){y.call(this,T===0?0:T);return this}:_=="delete"?function(I){return o&&!NE(I)?false:y.call(this,I===0?0:I)}:_=="get"?function I(T){return o&&!NE(T)?void 0:y.call(this,T===0?0:T)}:_=="has"?function I(T){return o&&!NE(T)?false:y.call(this,T===0?0:T)}:function I(T,D){y.call(this,T===0?0:T,D);return this})};if(Cq(r,typeof s!="function"||!(o||a.forEach&&!qE(function(){new s().entries().next()})))){l=t.getConstructor(e,r,i,n);p5e.REQUIRED=true}else if(Cq(r,true)){var d=new l;var m=d[n](o?{}:-0,1)!=d;var h=qE(function(){d.has(1)});var f=f5e(function(_){new s(_)});var b=!o&&qE(function(){var _=new s;var y=5;while(y--)_[n](y,y);return!_.has(-0)});if(!f){l=e(function(_,y){h5e(_,l,r);var I=y5e(new s,_,l);if(y!=void 0)m5e(y,I[n],I,i);return I});l.prototype=a;a.constructor=l}if(h||b){c("delete");c("has");i&&c("get")}if(b||m)c(n);if(o&&a.clear)delete a.clear}u[r]=l;u5e({global:true,forced:l!=s},u);g5e(l,r);if(!o)t.setStrong(l,r,i);return l}});var WE=C((xat,kq)=>{"use strict";var b5e=Tt().f;var _5e=es();var wq=Sc();var v5e=ts();var x5e=ba();var C5e=_c();var S5e=Ev();var w5e=vc();var cg=nt();var Tq=ql().fastKey;var Eq=Yr();var Iq=Eq.set;var HE=Eq.getterFor;kq.exports={getConstructor:function(r,e,t,i){var o=r(function(l,u){x5e(l,o,e);Iq(l,{type:e,index:_5e(null),first:void 0,last:void 0,size:0});if(!cg)l.size=0;if(u!=void 0)C5e(u,l[i],l,t)});var n=HE(e);var s=function(l,u,c){var d=n(l);var m=a(l,u);var h,f;if(m){m.value=c}else{d.last=m={index:f=Tq(u,true),key:u,value:c,previous:h=d.last,next:void 0,removed:false};if(!d.first)d.first=m;if(h)h.next=m;if(cg)d.size++;else l.size++;if(f!=="F")d.index[f]=m}return l};var a=function(l,u){var c=n(l);var d=Tq(u);var m;if(d!=="F")return c.index[d];for(m=c.first;m;m=m.next){if(m.key==u)return m}};wq(o.prototype,{clear:function l(){var u=this;var c=n(u);var d=c.index;var m=c.first;while(m){m.removed=true;if(m.previous)m.previous=m.previous.next=void 0;delete d[m.index];m=m.next}c.first=c.last=void 0;if(cg)c.size=0;else u.size=0},"delete":function(l){var u=this;var c=n(u);var d=a(u,l);if(d){var m=d.next;var h=d.previous;delete c.index[d.index];d.removed=true;if(h)h.next=m;if(m)m.previous=h;if(c.first==d)c.first=m;if(c.last==d)c.last=h;if(cg)c.size--;else u.size--}return!!d},forEach:function l(u){var c=n(this);var d=v5e(u,arguments.length>1?arguments[1]:void 0,3);var m;while(m=m?m.next:c.first){d(m.value,m.key,this);while(m&&m.removed)m=m.previous}},has:function l(u){return!!a(this,u)}});wq(o.prototype,t?{get:function l(u){var c=a(this,u);return c&&c.value},set:function l(u,c){return s(this,u===0?0:u,c)}}:{add:function l(u){return s(this,u=u===0?0:u,u)}});if(cg)b5e(o.prototype,"size",{get:function(){return n(this).size}});return o},setStrong:function(r,e,t){var i=e+" Iterator";var o=HE(e);var n=HE(i);S5e(r,e,function(s,a){Iq(this,{type:i,target:s,state:o(s),kind:a,last:void 0})},function(){var s=n(this);var a=s.kind;var l=s.last;while(l&&l.removed)l=l.previous;if(!s.target||!(s.last=l=l?l.next:s.state.first)){s.target=void 0;return{value:void 0,done:true}}if(a=="keys")return{value:l.key,done:false};if(a=="values")return{value:l.value,done:false};return{value:[l.key,l.value],done:false}},t?"entries":"values",!t,true);w5e(e)}}});var Oq=C((Cat,Dq)=>{"use strict";var T5e=ug();var I5e=WE();Dq.exports=T5e("Map",function(r){return function e(){return r(this,arguments.length?arguments[0]:void 0)}},I5e)});var Aq=C((Sat,Rq)=>{"use strict";var E5e=ug();var k5e=WE();Rq.exports=E5e("Set",function(r){return function e(){return r(this,arguments.length?arguments[0]:void 0)}},k5e)});var jE=C((wat,zq)=>{"use strict";var Fq=Sc();var ox=ql().getWeakData;var D5e=rt();var GE=Ze();var O5e=ba();var R5e=_c();var Bq=Or();var Pq=Zt();var Mq=Yr();var A5e=Mq.set;var F5e=Mq.getterFor;var P5e=Bq.find;var B5e=Bq.findIndex;var M5e=0;var nx=function(r){return r.frozen||(r.frozen=new Lq)};var Lq=function(){this.entries=[]};var VE=function(r,e){return P5e(r.entries,function(t){return t[0]===e})};Lq.prototype={get:function(r){var e=VE(this,r);if(e)return e[1]},has:function(r){return!!VE(this,r)},set:function(r,e){var t=VE(this,r);if(t)t[1]=e;else this.entries.push([r,e])},"delete":function(r){var e=B5e(this.entries,function(t){return t[0]===r});if(~e)this.entries.splice(e,1);return!!~e}};zq.exports={getConstructor:function(r,e,t,i){var o=r(function(a,l){O5e(a,o,e);A5e(a,{type:e,id:M5e++,frozen:void 0});if(l!=void 0)R5e(l,a[i],a,t)});var n=F5e(e);var s=function(a,l,u){var c=n(a);var d=ox(D5e(l),true);if(d===true)nx(c).set(l,u);else d[c.id]=u;return a};Fq(o.prototype,{"delete":function(a){var l=n(this);if(!GE(a))return false;var u=ox(a);if(u===true)return nx(l)["delete"](a);return u&&Pq(u,l.id)&&delete u[l.id]},has:function a(l){var u=n(this);if(!GE(l))return false;var c=ox(l);if(c===true)return nx(u).has(l);return c&&Pq(c,u.id)}});Fq(o.prototype,t?{get:function a(l){var u=n(this);if(GE(l)){var c=ox(l);if(c===true)return nx(u).get(l);return c?c[u.id]:void 0}},set:function a(l,u){return s(this,l,u)}}:{add:function a(l){return s(this,l,true)}});return o}}});var Wq=C((Tat,Hq)=>{"use strict";var Uq=Le();var L5e=Sc();var z5e=ql();var U5e=ug();var Nq=jE();var sx=Ze();var ax=Yr().enforce;var N5e=QT();var q5e=!Uq.ActiveXObject&&"ActiveXObject"in Uq;var lx=Object.isExtensible;var dg;var qq=function(r){return function e(){return r(this,arguments.length?arguments[0]:void 0)}};var H5e=Hq.exports=U5e("WeakMap",qq,Nq);if(N5e&&q5e){dg=Nq.getConstructor(qq,"WeakMap",true);z5e.REQUIRED=true;um=H5e.prototype;$E=um["delete"];pg=um.has;KE=um.get;XE=um.set;L5e(um,{"delete":function(r){if(sx(r)&&!lx(r)){var e=ax(this);if(!e.frozen)e.frozen=new dg;return $E.call(this,r)||e.frozen["delete"](r)}return $E.call(this,r)},has:function r(e){if(sx(e)&&!lx(e)){var t=ax(this);if(!t.frozen)t.frozen=new dg;return pg.call(this,e)||t.frozen.has(e)}return pg.call(this,e)},get:function r(e){if(sx(e)&&!lx(e)){var t=ax(this);if(!t.frozen)t.frozen=new dg;return pg.call(this,e)?KE.call(this,e):t.frozen.get(e)}return KE.call(this,e)},set:function r(e,t){if(sx(e)&&!lx(e)){var i=ax(this);if(!i.frozen)i.frozen=new dg;pg.call(this,e)?XE.call(this,e,t):i.frozen.set(e,t)}else XE.call(this,e,t);return this}})}var um;var $E;var pg;var KE;var XE});var Gq=C(()=>{"use strict";var W5e=ug();var G5e=jE();W5e("WeakSet",function(r){return function e(){return r(this,arguments.length?arguments[0]:void 0)}},G5e)});var ux=C((kat,Vq)=>{Vq.exports=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"});var YE=C((Dat,jq)=>{var V5e=so();var j5e=gt();jq.exports=function(r){if(r===void 0)return 0;var e=V5e(r);var t=j5e(e);if(e!==t)throw RangeError("Wrong length or index");return t}});var Kq=C((Oat,$q)=>{var JE=1/0;var $5e=Math.abs;var va=Math.pow;var K5e=Math.floor;var X5e=Math.log;var Y5e=Math.LN2;var J5e=function(r,e,t){var i=new Array(t);var o=t*8-e-1;var n=(1<<o)-1;var s=n>>1;var a=e===23?va(2,-24)-va(2,-77):0;var l=r<0||r===0&&1/r<0?1:0;var u=0;var c,d,m;r=$5e(r);if(r!=r||r===JE){d=r!=r?1:0;c=n}else{c=K5e(X5e(r)/Y5e);if(r*(m=va(2,-c))<1){c--;m*=2}if(c+s>=1){r+=a/m}else{r+=a*va(2,1-s)}if(r*m>=2){c++;m/=2}if(c+s>=n){d=0;c=n}else if(c+s>=1){d=(r*m-1)*va(2,e);c=c+s}else{d=r*va(2,s-1)*va(2,e);c=0}}for(;e>=8;i[u++]=d&255,d/=256,e-=8);c=c<<e|d;o+=e;for(;o>0;i[u++]=c&255,c/=256,o-=8);i[--u]|=l*128;return i};var Z5e=function(r,e){var t=r.length;var i=t*8-e-1;var o=(1<<i)-1;var n=o>>1;var s=i-7;var a=t-1;var l=r[a--];var u=l&127;var c;l>>=7;for(;s>0;u=u*256+r[a],a--,s-=8);c=u&(1<<-s)-1;u>>=-s;s+=e;for(;s>0;c=c*256+r[a],a--,s-=8);if(u===0){u=1-n}else if(u===o){return c?NaN:l?-JE:JE}else{c=c+va(2,e);u=u-n}return(l?-1:1)*c*va(2,u-e)};$q.exports={pack:J5e,unpack:Z5e}});var fg=C((Rat,cH)=>{"use strict";var ik=Le();var ZE=nt();var Q5e=ux();var eLe=Xr();var Xq=Sc();var QE=Te();var cx=ba();var tLe=so();var rLe=gt();var hx=YE();var nH=Kq();var iLe=Uo();var Yq=Nl();var oLe=Ml().f;var nLe=Tt().f;var sLe=Rv();var sH=mn();var aH=Yr();var cm=aH.get;var Jq=aH.set;var fx="ArrayBuffer";var gx="DataView";var hg="prototype";var aLe="Wrong length";var lH="Wrong index";var hn=ik[fx];var ao=hn;var fn=ik[gx];var dx=fn&&fn[hg];var Zq=Object.prototype;var yx=ik.RangeError;var uH=nH.pack;var Qq=nH.unpack;var eH=function(r){return[r&255]};var tH=function(r){return[r&255,r>>8&255]};var rH=function(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]};var iH=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]};var lLe=function(r){return uH(r,23,4)};var uLe=function(r){return uH(r,52,8)};var px=function(r,e){nLe(r[hg],e,{get:function(){return cm(this)[e]}})};var Gl=function(r,e,t,i){var o=hx(t);var n=cm(r);if(o+e>n.byteLength)throw yx(lH);var s=cm(n.buffer).bytes;var a=o+n.byteOffset;var l=s.slice(a,a+e);return i?l:l.reverse()};var Vl=function(r,e,t,i,o,n){var s=hx(t);var a=cm(r);if(s+e>a.byteLength)throw yx(lH);var l=cm(a.buffer).bytes;var u=s+a.byteOffset;var c=i(+o);for(var d=0;d<e;d++)l[u+d]=c[n?d:e-d-1]};if(!Q5e){ao=function r(e){cx(this,ao,fx);var t=hx(e);Jq(this,{bytes:sLe.call(new Array(t),0),byteLength:t});if(!ZE)this.byteLength=t};fn=function r(e,t,i){cx(this,fn,gx);cx(e,ao,gx);var o=cm(e).byteLength;var n=tLe(t);if(n<0||n>o)throw yx("Wrong offset");i=i===void 0?o-n:rLe(i);if(n+i>o)throw yx(aLe);Jq(this,{buffer:e,byteLength:i,byteOffset:n});if(!ZE){this.buffer=e;this.byteLength=i;this.byteOffset=n}};if(ZE){px(ao,"byteLength");px(fn,"buffer");px(fn,"byteLength");px(fn,"byteOffset")}Xq(fn[hg],{getInt8:function r(e){return Gl(this,1,e)[0]<<24>>24},getUint8:function r(e){return Gl(this,1,e)[0]},getInt16:function r(e){var t=Gl(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function r(e){var t=Gl(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function r(e){return iH(Gl(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function r(e){return iH(Gl(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function r(e){return Qq(Gl(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function r(e){return Qq(Gl(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function r(e,t){Vl(this,1,e,eH,t)},setUint8:function r(e,t){Vl(this,1,e,eH,t)},setInt16:function r(e,t){Vl(this,2,e,tH,t,arguments.length>2?arguments[2]:void 0)},setUint16:function r(e,t){Vl(this,2,e,tH,t,arguments.length>2?arguments[2]:void 0)},setInt32:function r(e,t){Vl(this,4,e,rH,t,arguments.length>2?arguments[2]:void 0)},setUint32:function r(e,t){Vl(this,4,e,rH,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function r(e,t){Vl(this,4,e,lLe,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function r(e,t){Vl(this,8,e,uLe,t,arguments.length>2?arguments[2]:void 0)}})}else{if(!QE(function(){hn(1)})||!QE(function(){new hn(-1)})||QE(function(){new hn;new hn(1.5);new hn(NaN);return hn.name!=fx})){ao=function r(e){cx(this,ao);return new hn(hx(e))};oH=ao[hg]=hn[hg];for(ek=oLe(hn),tk=0;ek.length>tk;){if(!((mx=ek[tk++])in ao)){eLe(ao,mx,hn[mx])}}oH.constructor=ao}if(Yq&&iLe(dx)!==Zq){Yq(dx,Zq)}mg=new fn(new ao(2));rk=dx.setInt8;mg.setInt8(0,2147483648);mg.setInt8(1,2147483649);if(mg.getInt8(0)||!mg.getInt8(1))Xq(dx,{setInt8:function r(e,t){rk.call(this,e,t<<24>>24)},setUint8:function r(e,t){rk.call(this,e,t<<24>>24)}},{unsafe:true})}var oH;var ek;var tk;var mx;var mg;var rk;sH(ao,fx);sH(fn,gx);cH.exports={ArrayBuffer:ao,DataView:fn}});var pH=C(()=>{"use strict";var cLe=U();var dLe=Le();var pLe=fg();var mLe=vc();var ok="ArrayBuffer";var dH=pLe[ok];var hLe=dLe[ok];cLe({global:true,forced:hLe!==dH},{ArrayBuffer:dH});mLe(ok)});var yt=C((Pat,xH)=>{"use strict";var fLe=ux();var lk=nt();var Mi=Le();var yH=Ze();var dm=Zt();var uk=Vp();var gLe=Xr();var nk=zr();var yLe=Tt().f;var ck=Uo();var pm=Nl();var bLe=ht();var _Le=zp();var gg=Mi.Int8Array;var sk=gg&&gg.prototype;var mH=Mi.Uint8ClampedArray;var hH=mH&&mH.prototype;var xa=gg&&ck(gg);var gn=sk&&ck(sk);var bH=Object.prototype;var fH=bH.isPrototypeOf;var gH=bLe("toStringTag");var ak=_Le("TYPED_ARRAY_TAG");var Ca=fLe&&!!pm&&uk(Mi.opera)!=="Opera";var _H=false;var lo;var yn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};var vLe=function r(e){var t=uk(e);return t==="DataView"||dm(yn,t)};var vH=function(r){return yH(r)&&dm(yn,uk(r))};var xLe=function(r){if(vH(r))return r;throw TypeError("Target is not a typed array")};var CLe=function(r){if(pm){if(fH.call(xa,r))return r}else for(var e in yn)if(dm(yn,lo)){var t=Mi[e];if(t&&(r===t||fH.call(t,r))){return r}}throw TypeError("Target is not a typed array constructor")};var SLe=function(r,e,t){if(!lk)return;if(t)for(var i in yn){var o=Mi[i];if(o&&dm(o.prototype,r)){delete o.prototype[r]}}if(!gn[r]||t){nk(gn,r,t?e:Ca&&sk[r]||e)}};var wLe=function(r,e,t){var i,o;if(!lk)return;if(pm){if(t)for(i in yn){o=Mi[i];if(o&&dm(o,r)){delete o[r]}}if(!xa[r]||t){try{return nk(xa,r,t?e:Ca&&gg[r]||e)}catch(n){}}else return}for(i in yn){o=Mi[i];if(o&&(!o[r]||t)){nk(o,r,e)}}};for(lo in yn){if(!Mi[lo])Ca=false}if(!Ca||typeof xa!="function"||xa===Function.prototype){xa=function r(){throw TypeError("Incorrect invocation")};if(Ca)for(lo in yn){if(Mi[lo])pm(Mi[lo],xa)}}if(!Ca||!gn||gn===bH){gn=xa.prototype;if(Ca)for(lo in yn){if(Mi[lo])pm(Mi[lo].prototype,gn)}}if(Ca&&ck(hH)!==gn){pm(hH,gn)}if(lk&&!dm(gn,gH)){_H=true;yLe(gn,gH,{get:function(){return yH(this)?this[ak]:void 0}});for(lo in yn)if(Mi[lo]){gLe(Mi[lo],ak,lo)}}xH.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ca,TYPED_ARRAY_TAG:_H&&ak,aTypedArray:xLe,aTypedArrayConstructor:CLe,exportTypedArrayMethod:SLe,exportTypedArrayStaticMethod:wLe,isView:vLe,isTypedArray:vH,TypedArray:xa,TypedArrayPrototype:gn}});var SH=C(()=>{var TLe=U();var CH=yt();var ILe=CH.NATIVE_ARRAY_BUFFER_VIEWS;TLe({target:"ArrayBuffer",stat:true,forced:!ILe},{isView:CH.isView})});var DH=C(()=>{"use strict";var ELe=U();var kLe=Te();var kH=fg();var wH=rt();var TH=pa();var DLe=gt();var OLe=is();var dk=kH.ArrayBuffer;var IH=kH.DataView;var EH=dk.prototype.slice;var RLe=kLe(function(){return!new dk(2).slice(1,void 0).byteLength});ELe({target:"ArrayBuffer",proto:true,unsafe:true,forced:RLe},{slice:function r(e,t){if(EH!==void 0&&t===void 0){return EH.call(wH(this),e)}var i=wH(this).byteLength;var o=TH(e,i);var n=TH(t===void 0?i:t,i);var s=new(OLe(this,dk))(DLe(n-o));var a=new IH(this);var l=new IH(s);var u=0;while(o<n){l.setUint8(u++,a.getUint8(o++))}return s}})});var OH=C(()=>{var ALe=U();var FLe=fg();var PLe=ux();ALe({global:true,forced:!PLe},{DataView:FLe.DataView})});var bx=C((qat,AH)=>{var RH=Le();var pk=Te();var BLe=Lf();var MLe=yt().NATIVE_ARRAY_BUFFER_VIEWS;var LLe=RH.ArrayBuffer;var Ic=RH.Int8Array;AH.exports=!MLe||!pk(function(){Ic(1)})||!pk(function(){new Ic(-1)})||!BLe(function(r){new Ic;new Ic(null);new Ic(1.5);new Ic(r)},true)||pk(function(){return new Ic(new LLe(2),1,void 0).length!==1})});var PH=C((Hat,FH)=>{var zLe=so();FH.exports=function(r){var e=zLe(r);if(e<0)throw RangeError("The argument can't be less than 0");return e}});var mk=C((Wat,BH)=>{var ULe=PH();BH.exports=function(r,e){var t=ULe(r);if(t%e)throw RangeError("Wrong offset");return t}});var hk=C((Gat,MH)=>{var NLe=Vt();var qLe=gt();var HLe=Zp();var WLe=Dv();var GLe=ts();var VLe=yt().aTypedArrayConstructor;MH.exports=function r(e){var t=NLe(e);var i=arguments.length;var o=i>1?arguments[1]:void 0;var n=o!==void 0;var s=HLe(t);var a,l,u,c,d,m;if(s!=void 0&&!WLe(s)){d=s.call(t);m=d.next;t=[];while(!(c=m.call(d)).done){t.push(c.value)}}if(n&&i>2){o=GLe(o,arguments[2],2)}l=qLe(t.length);u=new(VLe(this))(l);for(a=0;l>a;a++){u[a]=n?o(t[a],a):t[a]}return u}});var ls=C((Vat,xk)=>{"use strict";var LH=U();var $H=Le();var jLe=nt();var $Le=bx();var mm=yt();var KH=fg();var zH=ba();var KLe=da();var yg=Xr();var XLe=gt();var UH=YE();var fk=mk();var XH=Mo();var bg=Zt();var YLe=Vp();var bk=Ze();var JLe=es();var _x=Nl();var ZLe=Ml().f;var NH=hk();var QLe=Or().forEach;var e4e=vc();var YH=Tt();var JH=Lr();var ZH=Yr();var t4e=Yf();var _k=ZH.get;var r4e=ZH.set;var Ck=YH.f;var i4e=JH.f;var o4e=Math.round;var gk=$H.RangeError;var QH=KH.ArrayBuffer;var n4e=KH.DataView;var vx=mm.NATIVE_ARRAY_BUFFER_VIEWS;var qH=mm.TYPED_ARRAY_TAG;var HH=mm.TypedArray;var _g=mm.TypedArrayPrototype;var s4e=mm.aTypedArrayConstructor;var vk=mm.isTypedArray;var xx="BYTES_PER_ELEMENT";var yk="Wrong length";var WH=function(r,e){var t=0;var i=e.length;var o=new(s4e(r))(i);while(i>t)o[t]=e[t++];return o};var Cx=function(r,e){Ck(r,e,{get:function(){return _k(this)[e]}})};var GH=function(r){var e;return r instanceof QH||(e=YLe(r))=="ArrayBuffer"||e=="SharedArrayBuffer"};var eW=function(r,e){return vk(r)&&typeof e!="symbol"&&e in r&&String(+e)==String(e)};var VH=function r(e,t){return eW(e,t=XH(t,true))?KLe(2,e[t]):i4e(e,t)};var jH=function r(e,t,i){if(eW(e,t=XH(t,true))&&bk(i)&&bg(i,"value")&&!bg(i,"get")&&!bg(i,"set")&&!i.configurable&&(!bg(i,"writable")||i.writable)&&(!bg(i,"enumerable")||i.enumerable)){e[t]=i.value;return e}return Ck(e,t,i)};if(jLe){if(!vx){JH.f=VH;YH.f=jH;Cx(_g,"buffer");Cx(_g,"byteOffset");Cx(_g,"byteLength");Cx(_g,"length")}LH({target:"Object",stat:true,forced:!vx},{getOwnPropertyDescriptor:VH,defineProperty:jH});xk.exports=function(r,e,t){var i=r.match(/\d+$/)[0]/8;var o=r+(t?"Clamped":"")+"Array";var n="get"+r;var s="set"+r;var a=$H[o];var l=a;var u=l&&l.prototype;var c={};var d=function(f,b){var _=_k(f);return _.view[n](b*i+_.byteOffset,true)};var m=function(f,b,_){var y=_k(f);if(t)_=(_=o4e(_))<0?0:_>255?255:_&255;y.view[s](b*i+y.byteOffset,_,true)};var h=function(f,b){Ck(f,b,{get:function(){return d(this,b)},set:function(_){return m(this,b,_)},enumerable:true})};if(!vx){l=e(function(f,b,_,y){zH(f,l,o);var I=0;var T=0;var D,P,k;if(!bk(b)){k=UH(b);P=k*i;D=new QH(P)}else if(GH(b)){D=b;T=fk(_,i);var A=b.byteLength;if(y===void 0){if(A%i)throw gk(yk);P=A-T;if(P<0)throw gk(yk)}else{P=XLe(y)*i;if(P+T>A)throw gk(yk)}k=P/i}else if(vk(b)){return WH(l,b)}else{return NH.call(l,b)}r4e(f,{buffer:D,byteOffset:T,byteLength:P,length:k,view:new n4e(D)});while(I<k)h(f,I++)});if(_x)_x(l,HH);u=l.prototype=JLe(_g)}else if($Le){l=e(function(f,b,_,y){zH(f,l,o);return t4e(function(){if(!bk(b))return new a(UH(b));if(GH(b))return y!==void 0?new a(b,fk(_,i),y):_!==void 0?new a(b,fk(_,i)):new a(b);if(vk(b))return WH(l,b);return NH.call(l,b)}(),f,l)});if(_x)_x(l,HH);QLe(ZLe(a),function(f){if(!(f in l)){yg(l,f,a[f])}});l.prototype=u}if(u.constructor!==l){yg(u,"constructor",l)}if(qH){yg(u,qH,o)}c[o]=l;LH({global:true,forced:l!=a,sham:!vx},c);if(!(xx in l)){yg(l,xx,i)}if(!(xx in u)){yg(u,xx,i)}e4e(o)}}else xk.exports=function(){}});var tW=C(()=>{var a4e=ls();a4e("Int8",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var rW=C(()=>{var l4e=ls();l4e("Uint8",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var iW=C(()=>{var u4e=ls();u4e("Uint8",function(r){return function e(t,i,o){return r(this,t,i,o)}},true)});var oW=C(()=>{var c4e=ls();c4e("Int16",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var nW=C(()=>{var d4e=ls();d4e("Uint16",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var sW=C(()=>{var p4e=ls();p4e("Int32",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var aW=C(()=>{var m4e=ls();m4e("Uint32",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var lW=C(()=>{var h4e=ls();h4e("Float32",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var uW=C(()=>{var f4e=ls();f4e("Float64",function(r){return function e(t,i,o){return r(this,t,i,o)}})});var cW=C(()=>{"use strict";var g4e=bx();var y4e=yt().exportTypedArrayStaticMethod;var b4e=hk();y4e("from",b4e,g4e)});var pW=C(()=>{"use strict";var dW=yt();var _4e=bx();var v4e=dW.aTypedArrayConstructor;var x4e=dW.exportTypedArrayStaticMethod;x4e("of",function r(){var e=0;var t=arguments.length;var i=new(v4e(this))(t);while(t>e)i[e]=arguments[e++];return i},_4e)});var hW=C(()=>{"use strict";var mW=yt();var C4e=SI();var S4e=mW.aTypedArray;var w4e=mW.exportTypedArrayMethod;w4e("copyWithin",function r(e,t){return C4e.call(S4e(this),e,t,arguments.length>2?arguments[2]:void 0)})});var gW=C(()=>{"use strict";var fW=yt();var T4e=Or().every;var I4e=fW.aTypedArray;var E4e=fW.exportTypedArrayMethod;E4e("every",function r(e){return T4e(I4e(this),e,arguments.length>1?arguments[1]:void 0)})});var bW=C(()=>{"use strict";var yW=yt();var k4e=Rv();var D4e=yW.aTypedArray;var O4e=yW.exportTypedArrayMethod;O4e("fill",function r(e){return k4e.apply(D4e(this),arguments)})});var _W=C(()=>{"use strict";var Sk=yt();var R4e=Or().filter;var A4e=is();var F4e=Sk.aTypedArray;var P4e=Sk.aTypedArrayConstructor;var B4e=Sk.exportTypedArrayMethod;B4e("filter",function r(e){var t=R4e(F4e(this),e,arguments.length>1?arguments[1]:void 0);var i=A4e(this,this.constructor);var o=0;var n=t.length;var s=new(P4e(i))(n);while(n>o)s[o]=t[o++];return s})});var xW=C(()=>{"use strict";var vW=yt();var M4e=Or().find;var L4e=vW.aTypedArray;var z4e=vW.exportTypedArrayMethod;z4e("find",function r(e){return M4e(L4e(this),e,arguments.length>1?arguments[1]:void 0)})});var SW=C(()=>{"use strict";var CW=yt();var U4e=Or().findIndex;var N4e=CW.aTypedArray;var q4e=CW.exportTypedArrayMethod;q4e("findIndex",function r(e){return U4e(N4e(this),e,arguments.length>1?arguments[1]:void 0)})});var TW=C(()=>{"use strict";var wW=yt();var H4e=Or().forEach;var W4e=wW.aTypedArray;var G4e=wW.exportTypedArrayMethod;G4e("forEach",function r(e){H4e(W4e(this),e,arguments.length>1?arguments[1]:void 0)})});var EW=C(()=>{"use strict";var IW=yt();var V4e=qp().includes;var j4e=IW.aTypedArray;var $4e=IW.exportTypedArrayMethod;$4e("includes",function r(e){return V4e(j4e(this),e,arguments.length>1?arguments[1]:void 0)})});var DW=C(()=>{"use strict";var kW=yt();var K4e=qp().indexOf;var X4e=kW.aTypedArray;var Y4e=kW.exportTypedArrayMethod;Y4e("indexOf",function r(e){return K4e(X4e(this),e,arguments.length>1?arguments[1]:void 0)})});var BW=C(()=>{"use strict";var J4e=Le();var RW=yt();var Tk=qf();var Z4e=ht();var AW=Z4e("iterator");var OW=J4e.Uint8Array;var Q4e=Tk.values;var e3e=Tk.keys;var t3e=Tk.entries;var Ik=RW.aTypedArray;var Sx=RW.exportTypedArrayMethod;var wk=OW&&OW.prototype[AW];var FW=!!wk&&(wk.name=="values"||wk.name==void 0);var PW=function r(){return Q4e.call(Ik(this))};Sx("entries",function r(){return t3e.call(Ik(this))});Sx("keys",function r(){return e3e.call(Ik(this))});Sx("values",PW,!FW);Sx(AW,PW,!FW)});var LW=C(()=>{"use strict";var MW=yt();var r3e=MW.aTypedArray;var i3e=MW.exportTypedArrayMethod;var o3e=[].join;i3e("join",function r(e){return o3e.apply(r3e(this),arguments)})});var UW=C(()=>{"use strict";var zW=yt();var n3e=RI();var s3e=zW.aTypedArray;var a3e=zW.exportTypedArrayMethod;a3e("lastIndexOf",function r(e){return n3e.apply(s3e(this),arguments)})});var NW=C(()=>{"use strict";var Ek=yt();var l3e=Or().map;var u3e=is();var c3e=Ek.aTypedArray;var d3e=Ek.aTypedArrayConstructor;var p3e=Ek.exportTypedArrayMethod;p3e("map",function r(e){return l3e(c3e(this),e,arguments.length>1?arguments[1]:void 0,function(t,i){return new(d3e(u3e(t,t.constructor)))(i)})})});var HW=C(()=>{"use strict";var qW=yt();var m3e=Nf().left;var h3e=qW.aTypedArray;var f3e=qW.exportTypedArrayMethod;f3e("reduce",function r(e){return m3e(h3e(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})});var GW=C(()=>{"use strict";var WW=yt();var g3e=Nf().right;var y3e=WW.aTypedArray;var b3e=WW.exportTypedArrayMethod;b3e("reduceRight",function r(e){return g3e(y3e(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})});var jW=C(()=>{"use strict";var VW=yt();var _3e=VW.aTypedArray;var v3e=VW.exportTypedArrayMethod;var x3e=Math.floor;v3e("reverse",function r(){var e=this;var t=_3e(e).length;var i=x3e(t/2);var o=0;var n;while(o<i){n=e[o];e[o++]=e[--t];e[t]=n}return e})});var KW=C(()=>{"use strict";var $W=yt();var C3e=gt();var S3e=mk();var w3e=Vt();var T3e=Te();var I3e=$W.aTypedArray;var E3e=$W.exportTypedArrayMethod;var k3e=T3e(function(){new Int8Array(1).set({})});E3e("set",function r(e){I3e(this);var t=S3e(arguments.length>1?arguments[1]:void 0,1);var i=this.length;var o=w3e(e);var n=C3e(o.length);var s=0;if(n+t>i)throw RangeError("Wrong length");while(s<n)this[t+s]=o[s++]},k3e)});var XW=C(()=>{"use strict";var kk=yt();var D3e=is();var O3e=Te();var R3e=kk.aTypedArray;var A3e=kk.aTypedArrayConstructor;var F3e=kk.exportTypedArrayMethod;var P3e=[].slice;var B3e=O3e(function(){new Int8Array(1).slice()});F3e("slice",function r(e,t){var i=P3e.call(R3e(this),e,t);var o=D3e(this,this.constructor);var n=0;var s=i.length;var a=new(A3e(o))(s);while(s>n)a[n]=i[n++];return a},B3e)});var JW=C(()=>{"use strict";var YW=yt();var M3e=Or().some;var L3e=YW.aTypedArray;var z3e=YW.exportTypedArrayMethod;z3e("some",function r(e){return M3e(L3e(this),e,arguments.length>1?arguments[1]:void 0)})});var QW=C(()=>{"use strict";var ZW=yt();var U3e=ZW.aTypedArray;var N3e=ZW.exportTypedArrayMethod;var q3e=[].sort;N3e("sort",function r(e){return q3e.call(U3e(this),e)})});var rG=C(()=>{"use strict";var tG=yt();var H3e=gt();var eG=pa();var W3e=is();var G3e=tG.aTypedArray;var V3e=tG.exportTypedArrayMethod;V3e("subarray",function r(e,t){var i=G3e(this);var o=i.length;var n=eG(e,o);return new(W3e(i,i.constructor))(i.buffer,i.byteOffset+n*i.BYTES_PER_ELEMENT,H3e((t===void 0?o:eG(t,o))-n))})});var sG=C(()=>{"use strict";var j3e=Le();var oG=yt();var Dk=Te();var wx=j3e.Int8Array;var iG=oG.aTypedArray;var $3e=oG.exportTypedArrayMethod;var nG=[].toLocaleString;var K3e=[].slice;var X3e=!!wx&&Dk(function(){nG.call(new wx(1))});var Y3e=Dk(function(){return[1,2].toLocaleString()!=new wx([1,2]).toLocaleString()})||!Dk(function(){wx.prototype.toLocaleString.call([1,2])});$3e("toLocaleString",function r(){return nG.apply(X3e?K3e.call(iG(this)):iG(this),arguments)},Y3e)});var lG=C(()=>{"use strict";var J3e=yt().exportTypedArrayMethod;var Z3e=Te();var Q3e=Le();var aG=Q3e.Uint8Array;var eze=aG&&aG.prototype||{};var Tx=[].toString;var tze=[].join;if(Z3e(function(){Tx.call({})})){Tx=function r(){return tze.call(this)}}var rze=eze.toString!=Tx;J3e("toString",Tx,rze)});var uG=C(()=>{var ize=U();var oze=no();var nze=ci();var sze=rt();var aze=Te();var Ok=oze("Reflect","apply");var lze=Function.apply;var uze=!aze(function(){Ok(function(){})});ize({target:"Reflect",stat:true,forced:uze},{apply:function r(e,t,i){nze(e);sze(i);return Ok?Ok(e,t,i):lze.call(e,t,i)}})});var gG=C(()=>{var cze=U();var dze=no();var cG=ci();var pze=rt();var dG=Ze();var mze=es();var hze=vI();var mG=Te();var Rk=dze("Reflect","construct");var hG=mG(function(){function r(){}return!(Rk(function(){},[],r)instanceof r)});var fG=!mG(function(){Rk(function(){})});var pG=hG||fG;cze({target:"Reflect",stat:true,forced:pG,sham:pG},{construct:function r(e,t){cG(e);pze(t);var i=arguments.length<3?e:cG(arguments[2]);if(fG&&!hG)return Rk(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];o.push.apply(o,t);return new(hze.apply(e,o))}var n=i.prototype;var s=mze(dG(n)?n:Object.prototype);var a=Function.apply.call(e,s,t);return dG(a)?a:s}})});var _G=C(()=>{var fze=U();var gze=nt();var yG=rt();var yze=Mo();var bG=Tt();var bze=Te();var _ze=bze(function(){Reflect.defineProperty(bG.f({},1,{value:1}),1,{value:2})});fze({target:"Reflect",stat:true,forced:_ze,sham:!gze},{defineProperty:function r(e,t,i){yG(e);var o=yze(t,true);yG(i);try{bG.f(e,o,i);return true}catch(n){return false}}})});var vG=C(()=>{var vze=U();var xze=rt();var Cze=Lr().f;vze({target:"Reflect",stat:true},{deleteProperty:function r(e,t){var i=Cze(xze(e),t);return i&&!i.configurable?false:delete e[t]}})});var CG=C(()=>{var Sze=U();var wze=Ze();var Tze=rt();var Ize=Zt();var Eze=Lr();var kze=Uo();function xG(r,e){var t=arguments.length<3?r:arguments[2];var i,o;if(Tze(r)===t)return r[e];if(i=Eze.f(r,e))return Ize(i,"value")?i.value:i.get===void 0?void 0:i.get.call(t);if(wze(o=kze(r)))return xG(o,e,t)}Sze({target:"Reflect",stat:true},{get:xG})});var SG=C(()=>{var Dze=U();var Oze=nt();var Rze=rt();var Aze=Lr();Dze({target:"Reflect",stat:true,sham:!Oze},{getOwnPropertyDescriptor:function r(e,t){return Aze.f(Rze(e),t)}})});var wG=C(()=>{var Fze=U();var Pze=rt();var Bze=Uo();var Mze=Sv();Fze({target:"Reflect",stat:true,sham:!Mze},{getPrototypeOf:function r(e){return Bze(Pze(e))}})});var TG=C(()=>{var Lze=U();Lze({target:"Reflect",stat:true},{has:function r(e,t){return t in e}})});var EG=C(()=>{var zze=U();var Uze=rt();var IG=Object.isExtensible;zze({target:"Reflect",stat:true},{isExtensible:function r(e){Uze(e);return IG?IG(e):true}})});var kG=C(()=>{var Nze=U();var qze=uv();Nze({target:"Reflect",stat:true},{ownKeys:qze})});var DG=C(()=>{var Hze=U();var Wze=no();var Gze=rt();var Vze=em();Hze({target:"Reflect",stat:true,sham:!Vze},{preventExtensions:function r(e){Gze(e);try{var t=Wze("Object","preventExtensions");if(t)t(e);return true}catch(i){return false}}})});var BG=C(()=>{var jze=U();var $ze=rt();var OG=Ze();var Kze=Zt();var Xze=Te();var Ak=Tt();var RG=Lr();var FG=Uo();var AG=da();function PG(r,e,t){var i=arguments.length<4?r:arguments[3];var o=RG.f($ze(r),e);var n,s;if(!o){if(OG(s=FG(r))){return PG(s,e,t,i)}o=AG(0)}if(Kze(o,"value")){if(o.writable===false||!OG(i))return false;if(n=RG.f(i,e)){if(n.get||n.set||n.writable===false)return false;n.value=t;Ak.f(i,e,n)}else Ak.f(i,e,AG(0,t));return true}return o.set===void 0?false:(o.set.call(i,t),true)}var Yze=Xze(function(){var r=Ak.f({},"a",{configurable:true});return Reflect.set(FG(r),"a",1,r)!==false});jze({target:"Reflect",stat:true,forced:Yze},{set:PG})});var LG=C(()=>{var Jze=U();var Zze=rt();var Qze=Q2();var MG=Nl();if(MG)Jze({target:"Reflect",stat:true},{setPrototypeOf:function r(e,t){Zze(e);Qze(t);try{MG(e,t);return true}catch(i){return false}}})});var UG=C((Aut,zG)=>{A2();F2();B2();M2();L2();z2();U2();N2();q2();H2();W2();G2();V2();j2();$2();g8();y8();_8();x8();w8();E8();D8();A8();F8();P8();M8();z8();U8();N8();q8();W8();G8();V8();j8();$8();u2();X8();Y8();J8();Z8();t6();i6();a6();l6();nI();u6();c6();l2();m6();y6();v6();x6();EI();w6();E6();k6();R6();A6();B6();M6();N6();AI();W6();G6();j6();X6();Y6();eU();tU();oU();nU();sU();qf();mU();hU();fU();CU();SU();NU();XU();e9();t9();r9();i9();n9();l9();d9();y9();v9();S9();kv();I9();E9();k9();D9();O9();R9();A9();F9();P9();B9();M9();L9();z9();W9();Lv();G9();V9();j9();X9();Q9();rN();aN();lN();dN();mN();hN();fN();gN();yN();_N();xN();TN();kN();RN();PN();MN();zN();UN();HN();GN();$N();XN();JN();ZN();QN();e7();t7();o7();a7();K2();l7();u7();c7();g7();_7();w7();E7();X2();yq();bq();xq();Oq();Aq();Wq();Gq();pH();SH();DH();OH();tW();rW();iW();oW();nW();sW();aW();lW();uW();cW();pW();hW();gW();bW();_W();xW();SW();TW();EW();DW();BW();LW();UW();NW();HW();GW();jW();KW();XW();JW();QW();rG();sG();lG();uG();gG();_G();vG();CG();SG();wG();TG();EG();kG();DG();BG();LG();var e8e=Bl();zG.exports=e8e});var Fk=C((Fut,NG)=>{NG.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var HG=C(()=>{var t8e=Le();var r8e=Fk();var Pk=DI();var i8e=Xr();for(qG in r8e){Bk=t8e[qG];vg=Bk&&Bk.prototype;if(vg&&vg.forEach!==Pk)try{i8e(vg,"forEach",Pk)}catch(r){vg.forEach=Pk}}var Bk;var vg;var qG});var jG=C(()=>{var o8e=Le();var WG=Fk();var xg=qf();var Mk=Xr();var VG=ht();var Lk=VG("iterator");var GG=VG("toStringTag");var zk=xg.values;for(Ix in WG){Uk=o8e[Ix];us=Uk&&Uk.prototype;if(us){if(us[Lk]!==zk)try{Mk(us,Lk,zk)}catch(r){us[Lk]=zk}if(!us[GG]){Mk(us,GG,Ix)}if(WG[Ix])for(Ec in xg){if(us[Ec]!==xg[Ec])try{Mk(us,Ec,xg[Ec])}catch(r){us[Ec]=xg[Ec]}}}}var Uk;var us;var Ec;var Ix});var XG=C(()=>{var n8e=U();var $G=Le();var KG=Zv();var s8e=!$G.setImmediate||!$G.clearImmediate;n8e({global:true,bind:true,enumerable:true,forced:s8e},{setImmediate:KG.set,clearImmediate:KG.clear})});var JG=C(()=>{var a8e=U();var l8e=Le();var u8e=DE();var c8e=oo();var YG=l8e.process;var d8e=c8e(YG)=="process";a8e({global:true,enumerable:true,noTargetGet:true},{queueMicrotask:function r(e){var t=d8e&&YG.domain;u8e(t?t.bind(e):e)}})});var eV=C(()=>{var p8e=U();var ZG=Le();var m8e=Of();var h8e=[].slice;var f8e=/MSIE .\./.test(m8e);var QG=function(r){return function(e,t){var i=arguments.length>2;var o=i?h8e.call(arguments,2):void 0;return r(i?function(){(typeof e=="function"?e:Function(e)).apply(this,o)}:e,t)}};p8e({global:true,bind:true,forced:f8e},{setTimeout:QG(ZG.setTimeout),setInterval:QG(ZG.setInterval)})});var Nk=C((Gut,tV)=>{var g8e=Te();var y8e=ht();var b8e=Lo();var _8e=y8e("iterator");tV.exports=!g8e(function(){var r=new URL("b?a=1&b=2&c=3","http://a");var e=r.searchParams;var t="";r.pathname="c%20d";e.forEach(function(i,o){e["delete"]("b");t+=o+i});return b8e&&!r.toJSON||!e.sort||r.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[_8e]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||t!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var sV=C((Vut,nV)=>{"use strict";var qk=2147483647;var Cg=36;var oV=1;var Gk=26;var v8e=38;var x8e=700;var C8e=72;var S8e=128;var w8e="-";var T8e=/[^\0-\u007E]/;var I8e=/[.\u3002\uFF0E\uFF61]/g;var rV="Overflow: input needs wider integers to process";var Hk=Cg-oV;var hm=Math.floor;var Wk=String.fromCharCode;var E8e=function(r){var e=[];var t=0;var i=r.length;while(t<i){var o=r.charCodeAt(t++);if(o>=55296&&o<=56319&&t<i){var n=r.charCodeAt(t++);if((n&64512)==56320){e.push(((o&1023)<<10)+(n&1023)+65536)}else{e.push(o);t--}}else{e.push(o)}}return e};var iV=function(r){return r+22+75*(r<26)};var k8e=function(r,e,t){var i=0;r=t?hm(r/x8e):r>>1;r+=hm(r/e);for(;r>Hk*Gk>>1;i+=Cg){r=hm(r/Hk)}return hm(i+(Hk+1)*r/(r+v8e))};var D8e=function(r){var e=[];r=E8e(r);var t=r.length;var i=S8e;var o=0;var n=C8e;var s,a;for(s=0;s<r.length;s++){a=r[s];if(a<128){e.push(Wk(a))}}var l=e.length;var u=l;if(l){e.push(w8e)}while(u<t){var c=qk;for(s=0;s<r.length;s++){a=r[s];if(a>=i&&a<c){c=a}}var d=u+1;if(c-i>hm((qk-o)/d)){throw RangeError(rV)}o+=(c-i)*d;i=c;for(s=0;s<r.length;s++){a=r[s];if(a<i&&++o>qk){throw RangeError(rV)}if(a==i){var m=o;for(var h=Cg;;h+=Cg){var f=h<=n?oV:h>=n+Gk?Gk:h-n;if(m<f)break;var b=m-f;var _=Cg-f;e.push(Wk(iV(f+b%_)));m=hm(b/_)}e.push(Wk(iV(m)));n=k8e(o,d,u==l);o=0;++u}}++o;++i}return e.join("")};nV.exports=function(r){var e=[];var t=r.toLowerCase().replace(I8e,".").split(".");var i,o;for(i=0;i<t.length;i++){o=t[i];e.push(T8e.test(o)?"xn--"+D8e(o):o)}return e.join(".")}});var lV=C((jut,aV)=>{var O8e=rt();var R8e=Zp();aV.exports=function(r){var e=R8e(r);if(typeof e!="function"){throw TypeError(String(r)+" is not iterable")}return O8e(e.call(r))}});var Kk=C(($ut,SV)=>{"use strict";qf();var hV=U();var fV=no();var gV=Nk();var yV=zr();var A8e=Sc();var F8e=mn();var P8e=wv();var $k=Yr();var B8e=ba();var M8e=Zt();var L8e=ts();var z8e=Vp();var U8e=rt();var bV=Ze();var N8e=es();var uV=da();var _V=lV();var q8e=Zp();var H8e=ht();var cV=fV("fetch");var Vk=fV("Headers");var W8e=H8e("iterator");var gm="URLSearchParams";var vV=gm+"Iterator";var xV=$k.set;var bn=$k.getterFor(gm);var G8e=$k.getterFor(vV);var V8e=/\+/g;var dV=Array(4);var j8e=function(r){return dV[r-1]||(dV[r-1]=RegExp("((?:%[\\da-f]{2}){"+r+"})","gi"))};var $8e=function(r){try{return decodeURIComponent(r)}catch(e){return r}};var pV=function(r){var e=r.replace(V8e," ");var t=4;try{return decodeURIComponent(e)}catch(i){while(t){e=e.replace(j8e(t--),$8e)}return e}};var K8e=/[!'()~]|%20/g;var X8e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"};var Y8e=function(r){return X8e[r]};var mV=function(r){return encodeURIComponent(r).replace(K8e,Y8e)};var CV=function(r,e){if(e){var t=e.split("&");var i=0;var o,n;while(i<t.length){o=t[i++];if(o.length){n=o.split("=");r.push({key:pV(n.shift()),value:pV(n.join("="))})}}}};var J8e=function(r){this.entries.length=0;CV(this.entries,r)};var fm=function(r,e){if(r<e)throw TypeError("Not enough arguments")};var jk=P8e(function r(e,t){xV(this,{type:vV,iterator:_V(bn(e).entries),kind:t})},"Iterator",function r(){var e=G8e(this);var t=e.kind;var i=e.iterator.next();var o=i.value;if(!i.done){i.value=t==="keys"?o.key:t==="values"?o.value:[o.key,o.value]}return i});var Sg=function r(){B8e(this,Sg,gm);var e=arguments.length>0?arguments[0]:void 0;var t=this;var i=[];var o,n,s,a,l,u,c,d,m;xV(t,{type:gm,entries:i,updateURL:function(){},updateSearchParams:J8e});if(e!==void 0){if(bV(e)){o=q8e(e);if(typeof o==="function"){n=o.call(e);s=n.next;while(!(a=s.call(n)).done){l=_V(U8e(a.value));u=l.next;if((c=u.call(l)).done||(d=u.call(l)).done||!u.call(l).done)throw TypeError("Expected sequence with length 2");i.push({key:c.value+"",value:d.value+""})}}else for(m in e)if(M8e(e,m))i.push({key:m,value:e[m]+""})}else{CV(i,typeof e==="string"?e.charAt(0)==="?"?e.slice(1):e:e+"")}}};var Ex=Sg.prototype;A8e(Ex,{append:function r(e,t){fm(arguments.length,2);var i=bn(this);i.entries.push({key:e+"",value:t+""});i.updateURL()},"delete":function(r){fm(arguments.length,1);var e=bn(this);var t=e.entries;var i=r+"";var o=0;while(o<t.length){if(t[o].key===i)t.splice(o,1);else o++}e.updateURL()},get:function r(e){fm(arguments.length,1);var t=bn(this).entries;var i=e+"";var o=0;for(;o<t.length;o++){if(t[o].key===i)return t[o].value}return null},getAll:function r(e){fm(arguments.length,1);var t=bn(this).entries;var i=e+"";var o=[];var n=0;for(;n<t.length;n++){if(t[n].key===i)o.push(t[n].value)}return o},has:function r(e){fm(arguments.length,1);var t=bn(this).entries;var i=e+"";var o=0;while(o<t.length){if(t[o++].key===i)return true}return false},set:function r(e,t){fm(arguments.length,1);var i=bn(this);var o=i.entries;var n=false;var s=e+"";var a=t+"";var l=0;var u;for(;l<o.length;l++){u=o[l];if(u.key===s){if(n)o.splice(l--,1);else{n=true;u.value=a}}}if(!n)o.push({key:s,value:a});i.updateURL()},sort:function r(){var e=bn(this);var t=e.entries;var i=t.slice();var o,n,s;t.length=0;for(s=0;s<i.length;s++){o=i[s];for(n=0;n<s;n++){if(t[n].key>o.key){t.splice(n,0,o);break}}if(n===s)t.push(o)}e.updateURL()},forEach:function r(e){var t=bn(this).entries;var i=L8e(e,arguments.length>1?arguments[1]:void 0,3);var o=0;var n;while(o<t.length){n=t[o++];i(n.value,n.key,this)}},keys:function r(){return new jk(this,"keys")},values:function r(){return new jk(this,"values")},entries:function r(){return new jk(this,"entries")}},{enumerable:true});yV(Ex,W8e,Ex.entries);yV(Ex,"toString",function r(){var e=bn(this).entries;var t=[];var i=0;var o;while(i<e.length){o=e[i++];t.push(mV(o.key)+"="+mV(o.value))}return t.join("&")},{enumerable:true});F8e(Sg,gm);hV({global:true,forced:!gV},{URLSearchParams:Sg});if(!gV&&typeof cV=="function"&&typeof Vk=="function"){hV({global:true,enumerable:true,forced:true},{fetch:function r(e){var t=[e];var i,o,n;if(arguments.length>1){i=arguments[1];if(bV(i)){o=i.body;if(z8e(o)===gm){n=i.headers?new Vk(i.headers):new Vk;if(!n.has("content-type")){n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}i=N8e(i,{body:uV(0,String(o)),headers:uV(0,n)})}}t.push(i)}return cV.apply(this,t)}})}SV.exports={URLSearchParams:Sg,getState:bn}});var ZV=C(()=>{"use strict";kv();var Z8e=U();var pD=nt();var Q8e=Nk();var e6e=Le();var t6e=gv();var Rx=zr();var r6e=ba();var mD=Zt();var hD=aI();var bm=iI();var i6e=Bf().codeAt;var o6e=sV();var n6e=mn();var BV=Kk();var MV=Yr();var wg=e6e.URL;var s6e=BV.URLSearchParams;var oD=BV.getState;var a6e=MV.set;var Qt=MV.getterFor("URL");var l6e=Math.floor;var wV=Math.pow;var u6e="Invalid authority";var Xk="Invalid scheme";var Dc="Invalid host";var TV="Invalid port";var LV=/[A-Za-z]/;var c6e=/[\d+-.A-Za-z]/;var nD=/\d/;var d6e=/^(0x|0X)/;var p6e=/^[0-7]+$/;var m6e=/^\d+$/;var zV=/^[\dA-Fa-f]+$/;var h6e=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/;var f6e=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/;var g6e=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g;var y6e=/[\u0009\u000A\u000D]/g;var No;var Yk=function(r,e){var t,i,o;if(e.charAt(0)=="["){if(e.charAt(e.length-1)!="]")return Dc;t=_6e(e.slice(1,-1));if(!t)return Dc;r.host=t}else if(!Rr(r)){if(f6e.test(e))return Dc;t="";i=bm(e);for(o=0;o<i.length;o++){t+=jl(i[o],Ax)}r.host=t}else{e=o6e(e);if(h6e.test(e))return Dc;t=b6e(e);if(t===null)return Dc;r.host=t}};var b6e=function(r){var e=r.split(".");var t,i,o,n,s,a,l;if(e.length&&e[e.length-1]==""){e.pop()}t=e.length;if(t>4)return r;i=[];for(o=0;o<t;o++){n=e[o];if(n=="")return r;s=10;if(n.length>1&&n.charAt(0)=="0"){s=d6e.test(n)?16:8;n=n.slice(s==8?1:2)}if(n===""){a=0}else{if(!(s==10?m6e:s==8?p6e:zV).test(n))return r;a=parseInt(n,s)}i.push(a)}for(o=0;o<t;o++){a=i[o];if(o==t-1){if(a>=wV(256,5-t))return null}else if(a>255)return null}l=i.pop();for(o=0;o<i.length;o++){l+=i[o]*wV(256,3-o)}return l};var _6e=function(r){var e=[0,0,0,0,0,0,0,0];var t=0;var i=null;var o=0;var n,s,a,l,u,c,d;var m=function(){return r.charAt(o)};if(m()==":"){if(r.charAt(1)!=":")return;o+=2;t++;i=t}while(m()){if(t==8)return;if(m()==":"){if(i!==null)return;o++;t++;i=t;continue}n=s=0;while(s<4&&zV.test(m())){n=n*16+parseInt(m(),16);o++;s++}if(m()=="."){if(s==0)return;o-=s;if(t>6)return;a=0;while(m()){l=null;if(a>0){if(m()=="."&&a<4)o++;else return}if(!nD.test(m()))return;while(nD.test(m())){u=parseInt(m(),10);if(l===null)l=u;else if(l==0)return;else l=l*10+u;if(l>255)return;o++}e[t]=e[t]*256+l;a++;if(a==2||a==4)t++}if(a!=4)return;break}else if(m()==":"){o++;if(!m())return}else if(m())return;e[t++]=n}if(i!==null){c=t-i;t=7;while(t!=0&&c>0){d=e[t];e[t--]=e[i+c-1];e[i+--c]=d}}else if(t!=8)return;return e};var v6e=function(r){var e=null;var t=1;var i=null;var o=0;var n=0;for(;n<8;n++){if(r[n]!==0){if(o>t){e=i;t=o}i=null;o=0}else{if(i===null)i=n;++o}}if(o>t){e=i;t=o}return e};var Ig=function(r){var e,t,i,o;if(typeof r=="number"){e=[];for(t=0;t<4;t++){e.unshift(r%256);r=l6e(r/256)}return e.join(".")}else if(typeof r=="object"){e="";i=v6e(r);for(t=0;t<8;t++){if(o&&r[t]===0)continue;if(o)o=false;if(i===t){e+=t?":":"::";o=true}else{e+=r[t].toString(16);if(t<7)e+=":"}}return"["+e+"]"}return r};var Ax={};var UV=hD({},Ax,{" ":1,'"':1,"<":1,">":1,"`":1});var NV=hD({},UV,{"#":1,"?":1,"{":1,"}":1});var sD=hD({},NV,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1});var jl=function(r,e){var t=i6e(r,0);return t>32&&t<127&&!mD(e,r)?r:encodeURIComponent(r)};var Ox={ftp:21,file:null,http:80,https:443,ws:80,wss:443};var Rr=function(r){return mD(Ox,r.scheme)};var aD=function(r){return r.username!=""||r.password!=""};var Jk=function(r){return!r.host||r.cannotBeABaseURL||r.scheme=="file"};var Tg=function(r,e){var t;return r.length==2&&LV.test(r.charAt(0))&&((t=r.charAt(1))==":"||!e&&t=="|")};var IV=function(r){var e;return r.length>1&&Tg(r.slice(0,2))&&(r.length==2||((e=r.charAt(2))==="/"||e==="\\"||e==="?"||e==="#"))};var EV=function(r){var e=r.path;var t=e.length;if(t&&(r.scheme!="file"||t!=1||!Tg(e[0],true))){e.pop()}};var x6e=function(r){return r==="."||r.toLowerCase()==="%2e"};var C6e=function(r){r=r.toLowerCase();return r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"};var lD={};var kV={};var Zk={};var DV={};var OV={};var Qk={};var RV={};var AV={};var kx={};var Dx={};var uD={};var cD={};var dD={};var eD={};var FV={};var tD={};var ym={};var cs={};var PV={};var kc={};var Sa={};var ds=function(r,e,t,i){var o=t||lD;var n=0;var s="";var a=false;var l=false;var u=false;var c,d,m,h;if(!t){r.scheme="";r.username="";r.password="";r.host=null;r.port=null;r.path=[];r.query=null;r.fragment=null;r.cannotBeABaseURL=false;e=e.replace(g6e,"")}e=e.replace(y6e,"");c=bm(e);while(n<=c.length){d=c[n];switch(o){case lD:if(d&&LV.test(d)){s+=d.toLowerCase();o=kV}else if(!t){o=Zk;continue}else return Xk;break;case kV:if(d&&(c6e.test(d)||d=="+"||d=="-"||d==".")){s+=d.toLowerCase()}else if(d==":"){if(t&&(Rr(r)!=mD(Ox,s)||s=="file"&&(aD(r)||r.port!==null)||r.scheme=="file"&&!r.host))return;r.scheme=s;if(t){if(Rr(r)&&Ox[r.scheme]==r.port)r.port=null;return}s="";if(r.scheme=="file"){o=eD}else if(Rr(r)&&i&&i.scheme==r.scheme){o=DV}else if(Rr(r)){o=AV}else if(c[n+1]=="/"){o=OV;n++}else{r.cannotBeABaseURL=true;r.path.push("");o=PV}}else if(!t){s="";o=Zk;n=0;continue}else return Xk;break;case Zk:if(!i||i.cannotBeABaseURL&&d!="#")return Xk;if(i.cannotBeABaseURL&&d=="#"){r.scheme=i.scheme;r.path=i.path.slice();r.query=i.query;r.fragment="";r.cannotBeABaseURL=true;o=Sa;break}o=i.scheme=="file"?eD:Qk;continue;case DV:if(d=="/"&&c[n+1]=="/"){o=kx;n++}else{o=Qk;continue}break;case OV:if(d=="/"){o=Dx;break}else{o=cs;continue}case Qk:r.scheme=i.scheme;if(d==No){r.username=i.username;r.password=i.password;r.host=i.host;r.port=i.port;r.path=i.path.slice();r.query=i.query}else if(d=="/"||d=="\\"&&Rr(r)){o=RV}else if(d=="?"){r.username=i.username;r.password=i.password;r.host=i.host;r.port=i.port;r.path=i.path.slice();r.query="";o=kc}else if(d=="#"){r.username=i.username;r.password=i.password;r.host=i.host;r.port=i.port;r.path=i.path.slice();r.query=i.query;r.fragment="";o=Sa}else{r.username=i.username;r.password=i.password;r.host=i.host;r.port=i.port;r.path=i.path.slice();r.path.pop();o=cs;continue}break;case RV:if(Rr(r)&&(d=="/"||d=="\\")){o=kx}else if(d=="/"){o=Dx}else{r.username=i.username;r.password=i.password;r.host=i.host;r.port=i.port;o=cs;continue}break;case AV:o=kx;if(d!="/"||s.charAt(n+1)!="/")continue;n++;break;case kx:if(d!="/"&&d!="\\"){o=Dx;continue}break;case Dx:if(d=="@"){if(a)s="%40"+s;a=true;m=bm(s);for(var f=0;f<m.length;f++){var b=m[f];if(b==":"&&!u){u=true;continue}var _=jl(b,sD);if(u)r.password+=_;else r.username+=_}s=""}else if(d==No||d=="/"||d=="?"||d=="#"||d=="\\"&&Rr(r)){if(a&&s=="")return u6e;n-=bm(s).length+1;s="";o=uD}else s+=d;break;case uD:case cD:if(t&&r.scheme=="file"){o=tD;continue}else if(d==":"&&!l){if(s=="")return Dc;h=Yk(r,s);if(h)return h;s="";o=dD;if(t==cD)return}else if(d==No||d=="/"||d=="?"||d=="#"||d=="\\"&&Rr(r)){if(Rr(r)&&s=="")return Dc;if(t&&s==""&&(aD(r)||r.port!==null))return;h=Yk(r,s);if(h)return h;s="";o=ym;if(t)return;continue}else{if(d=="[")l=true;else if(d=="]")l=false;s+=d}break;case dD:if(nD.test(d)){s+=d}else if(d==No||d=="/"||d=="?"||d=="#"||d=="\\"&&Rr(r)||t){if(s!=""){var y=parseInt(s,10);if(y>65535)return TV;r.port=Rr(r)&&y===Ox[r.scheme]?null:y;s=""}if(t)return;o=ym;continue}else return TV;break;case eD:r.scheme="file";if(d=="/"||d=="\\")o=FV;else if(i&&i.scheme=="file"){if(d==No){r.host=i.host;r.path=i.path.slice();r.query=i.query}else if(d=="?"){r.host=i.host;r.path=i.path.slice();r.query="";o=kc}else if(d=="#"){r.host=i.host;r.path=i.path.slice();r.query=i.query;r.fragment="";o=Sa}else{if(!IV(c.slice(n).join(""))){r.host=i.host;r.path=i.path.slice();EV(r)}o=cs;continue}}else{o=cs;continue}break;case FV:if(d=="/"||d=="\\"){o=tD;break}if(i&&i.scheme=="file"&&!IV(c.slice(n).join(""))){if(Tg(i.path[0],true))r.path.push(i.path[0]);else r.host=i.host}o=cs;continue;case tD:if(d==No||d=="/"||d=="\\"||d=="?"||d=="#"){if(!t&&Tg(s)){o=cs}else if(s==""){r.host="";if(t)return;o=ym}else{h=Yk(r,s);if(h)return h;if(r.host=="localhost")r.host="";if(t)return;s="";o=ym}continue}else s+=d;break;case ym:if(Rr(r)){o=cs;if(d!="/"&&d!="\\")continue}else if(!t&&d=="?"){r.query="";o=kc}else if(!t&&d=="#"){r.fragment="";o=Sa}else if(d!=No){o=cs;if(d!="/")continue}break;case cs:if(d==No||d=="/"||d=="\\"&&Rr(r)||!t&&(d=="?"||d=="#")){if(C6e(s)){EV(r);if(d!="/"&&!(d=="\\"&&Rr(r))){r.path.push("")}}else if(x6e(s)){if(d!="/"&&!(d=="\\"&&Rr(r))){r.path.push("")}}else{if(r.scheme=="file"&&!r.path.length&&Tg(s)){if(r.host)r.host="";s=s.charAt(0)+":"}r.path.push(s)}s="";if(r.scheme=="file"&&(d==No||d=="?"||d=="#")){while(r.path.length>1&&r.path[0]===""){r.path.shift()}}if(d=="?"){r.query="";o=kc}else if(d=="#"){r.fragment="";o=Sa}}else{s+=jl(d,NV)}break;case PV:if(d=="?"){r.query="";o=kc}else if(d=="#"){r.fragment="";o=Sa}else if(d!=No){r.path[0]+=jl(d,Ax)}break;case kc:if(!t&&d=="#"){r.fragment="";o=Sa}else if(d!=No){if(d=="'"&&Rr(r))r.query+="%27";else if(d=="#")r.query+="%23";else r.query+=jl(d,Ax)}break;case Sa:if(d!=No)r.fragment+=jl(d,UV);break}n++}};var Oc=function r(e){var t=r6e(this,Oc,"URL");var i=arguments.length>1?arguments[1]:void 0;var o=String(e);var n=a6e(t,{type:"URL"});var s,a;if(i!==void 0){if(i instanceof Oc)s=Qt(i);else{a=ds(s={},String(i));if(a)throw TypeError(a)}}a=ds(n,o,null,s);if(a)throw TypeError(a);var l=n.searchParams=new s6e;var u=oD(l);u.updateSearchParams(n.query);u.updateURL=function(){n.query=String(l)||null};if(!pD){t.href=Fx.call(t);t.origin=qV.call(t);t.protocol=HV.call(t);t.username=WV.call(t);t.password=GV.call(t);t.host=VV.call(t);t.hostname=jV.call(t);t.port=$V.call(t);t.pathname=KV.call(t);t.search=XV.call(t);t.searchParams=YV.call(t);t.hash=JV.call(t)}};var fD=Oc.prototype;var Fx=function(){var r=Qt(this);var e=r.scheme;var t=r.username;var i=r.password;var o=r.host;var n=r.port;var s=r.path;var a=r.query;var l=r.fragment;var u=e+":";if(o!==null){u+="//";if(aD(r)){u+=t+(i?":"+i:"")+"@"}u+=Ig(o);if(n!==null)u+=":"+n}else if(e=="file")u+="//";u+=r.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"";if(a!==null)u+="?"+a;if(l!==null)u+="#"+l;return u};var qV=function(){var r=Qt(this);var e=r.scheme;var t=r.port;if(e=="blob")try{return new URL(e.path[0]).origin}catch(i){return"null"}if(e=="file"||!Rr(r))return"null";return e+"://"+Ig(r.host)+(t!==null?":"+t:"")};var HV=function(){return Qt(this).scheme+":"};var WV=function(){return Qt(this).username};var GV=function(){return Qt(this).password};var VV=function(){var r=Qt(this);var e=r.host;var t=r.port;return e===null?"":t===null?Ig(e):Ig(e)+":"+t};var jV=function(){var r=Qt(this).host;return r===null?"":Ig(r)};var $V=function(){var r=Qt(this).port;return r===null?"":String(r)};var KV=function(){var r=Qt(this);var e=r.path;return r.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""};var XV=function(){var r=Qt(this).query;return r?"?"+r:""};var YV=function(){return Qt(this).searchParams};var JV=function(){var r=Qt(this).fragment;return r?"#"+r:""};var qo=function(r,e){return{get:r,set:e,configurable:true,enumerable:true}};if(pD){t6e(fD,{href:qo(Fx,function(r){var e=Qt(this);var t=String(r);var i=ds(e,t);if(i)throw TypeError(i);oD(e.searchParams).updateSearchParams(e.query)}),origin:qo(qV),protocol:qo(HV,function(r){var e=Qt(this);ds(e,String(r)+":",lD)}),username:qo(WV,function(r){var e=Qt(this);var t=bm(String(r));if(Jk(e))return;e.username="";for(var i=0;i<t.length;i++){e.username+=jl(t[i],sD)}}),password:qo(GV,function(r){var e=Qt(this);var t=bm(String(r));if(Jk(e))return;e.password="";for(var i=0;i<t.length;i++){e.password+=jl(t[i],sD)}}),host:qo(VV,function(r){var e=Qt(this);if(e.cannotBeABaseURL)return;ds(e,String(r),uD)}),hostname:qo(jV,function(r){var e=Qt(this);if(e.cannotBeABaseURL)return;ds(e,String(r),cD)}),port:qo($V,function(r){var e=Qt(this);if(Jk(e))return;r=String(r);if(r=="")e.port=null;else ds(e,r,dD)}),pathname:qo(KV,function(r){var e=Qt(this);if(e.cannotBeABaseURL)return;e.path=[];ds(e,r+"",ym)}),search:qo(XV,function(r){var e=Qt(this);r=String(r);if(r==""){e.query=null}else{if(r.charAt(0)=="?")r=r.slice(1);e.query="";ds(e,r,kc)}oD(e.searchParams).updateSearchParams(e.query)}),searchParams:qo(YV),hash:qo(JV,function(r){var e=Qt(this);r=String(r);if(r==""){e.fragment=null;return}if(r.charAt(0)=="#")r=r.slice(1);e.fragment="";ds(e,r,Sa)})})}Rx(fD,"toJSON",function r(){return Fx.call(this)},{enumerable:true});Rx(fD,"toString",function r(){return Fx.call(this)},{enumerable:true});if(wg){rD=wg.createObjectURL;iD=wg.revokeObjectURL;if(rD)Rx(Oc,"createObjectURL",function r(e){return rD.apply(wg,arguments)});if(iD)Rx(Oc,"revokeObjectURL",function r(e){return iD.apply(wg,arguments)})}var rD;var iD;n6e(Oc,"URL");Z8e({global:true,forced:!Q8e,sham:!pD},{URL:Oc})});var QV=C(()=>{"use strict";var S6e=U();S6e({target:"URL",proto:true,enumerable:true},{toJSON:function r(){return URL.prototype.toString.call(this)}})});var tj=C((Zut,ej)=>{HG();jG();XG();JG();eV();ZV();QV();Kk();var w6e=Bl();ej.exports=w6e});var ij=C((Qut,rj)=>{UG();tj();var T6e=Bl();rj.exports=T6e});var nj=C((ect,gD)=>{var oj=function(r){"use strict";var e=Object.prototype;var t=e.hasOwnProperty;var i;var o=typeof Symbol==="function"?Symbol:{};var n=o.iterator||"@@iterator";var s=o.asyncIterator||"@@asyncIterator";var a=o.toStringTag||"@@toStringTag";function l(ee,V,j){Object.defineProperty(ee,V,{value:j,enumerable:true,configurable:true,writable:true});return ee[V]}try{l({},"")}catch(ee){l=function(V,j,be){return V[j]=be}}function u(ee,V,j,be){var pe=V&&V.prototype instanceof _?V:_;var De=Object.create(pe.prototype);var ke=new ue(be||[]);De._invoke=R(ee,j,ke);return De}r.wrap=u;function c(ee,V,j){try{return{type:"normal",arg:ee.call(V,j)}}catch(be){return{type:"throw",arg:be}}}var d="suspendedStart";var m="suspendedYield";var h="executing";var f="completed";var b={};function _(){}function y(){}function I(){}var T={};T[n]=function(){return this};var D=Object.getPrototypeOf;var P=D&&D(D(Se([])));if(P&&P!==e&&t.call(P,n)){T=P}var k=I.prototype=_.prototype=Object.create(T);y.prototype=k.constructor=I;I.constructor=y;y.displayName=l(I,a,"GeneratorFunction");function A(ee){["next","throw","return"].forEach(function(V){l(ee,V,function(j){return this._invoke(V,j)})})}r.isGeneratorFunction=function(ee){var V=typeof ee==="function"&&ee.constructor;return V?V===y||(V.displayName||V.name)==="GeneratorFunction":false};r.mark=function(ee){if(Object.setPrototypeOf){Object.setPrototypeOf(ee,I)}else{ee.__proto__=I;l(ee,a,"GeneratorFunction")}ee.prototype=Object.create(k);return ee};r.awrap=function(ee){return{__await:ee}};function Q(ee,V){function j(De,ke,Me,mt){var Bt=c(ee[De],ee,ke);if(Bt.type==="throw"){mt(Bt.arg)}else{var Oi=Bt.arg;var Ke=Oi.value;if(Ke&&typeof Ke==="object"&&t.call(Ke,"__await")){return V.resolve(Ke.__await).then(function(Pe){j("next",Pe,Me,mt)},function(Pe){j("throw",Pe,Me,mt)})}return V.resolve(Ke).then(function(Pe){Oi.value=Pe;Me(Oi)},function(Pe){return j("throw",Pe,Me,mt)})}}var be;function pe(De,ke){function Me(){return new V(function(mt,Bt){j(De,ke,mt,Bt)})}return be=be?be.then(Me,Me):Me()}this._invoke=pe}A(Q.prototype);Q.prototype[s]=function(){return this};r.AsyncIterator=Q;r.async=function(ee,V,j,be,pe){if(pe===void 0)pe=Promise;var De=new Q(u(ee,V,j,be),pe);return r.isGeneratorFunction(V)?De:De.next().then(function(ke){return ke.done?ke.value:De.next()})};function R(ee,V,j){var be=d;return function pe(De,ke){if(be===h){throw new Error("Generator is already running")}if(be===f){if(De==="throw"){throw ke}return Pt()}j.method=De;j.arg=ke;while(true){var Me=j.delegate;if(Me){var mt=M(Me,j);if(mt){if(mt===b)continue;return mt}}if(j.method==="next"){j.sent=j._sent=j.arg}else if(j.method==="throw"){if(be===d){be=f;throw j.arg}j.dispatchException(j.arg)}else if(j.method==="return"){j.abrupt("return",j.arg)}be=h;var Bt=c(ee,V,j);if(Bt.type==="normal"){be=j.done?f:m;if(Bt.arg===b){continue}return{value:Bt.arg,done:j.done}}else if(Bt.type==="throw"){be=f;j.method="throw";j.arg=Bt.arg}}}}function M(ee,V){var j=ee.iterator[V.method];if(j===i){V.delegate=null;if(V.method==="throw"){if(ee.iterator["return"]){V.method="return";V.arg=i;M(ee,V);if(V.method==="throw"){return b}}V.method="throw";V.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var be=c(j,ee.iterator,V.arg);if(be.type==="throw"){V.method="throw";V.arg=be.arg;V.delegate=null;return b}var pe=be.arg;if(!pe){V.method="throw";V.arg=new TypeError("iterator result is not an object");V.delegate=null;return b}if(pe.done){V[ee.resultName]=pe.value;V.next=ee.nextLoc;if(V.method!=="return"){V.method="next";V.arg=i}}else{return pe}V.delegate=null;return b}A(k);l(k,a,"Generator");k[n]=function(){return this};k.toString=function(){return"[object Generator]"};function oe(ee){var V={tryLoc:ee[0]};if(1 in ee){V.catchLoc=ee[1]}if(2 in ee){V.finallyLoc=ee[2];V.afterLoc=ee[3]}this.tryEntries.push(V)}function ce(ee){var V=ee.completion||{};V.type="normal";delete V.arg;ee.completion=V}function ue(ee){this.tryEntries=[{tryLoc:"root"}];ee.forEach(oe,this);this.reset(true)}r.keys=function(ee){var V=[];for(var j in ee){V.push(j)}V.reverse();return function be(){while(V.length){var pe=V.pop();if(pe in ee){be.value=pe;be.done=false;return be}}be.done=true;return be}};function Se(ee){if(ee){var V=ee[n];if(V){return V.call(ee)}if(typeof ee.next==="function"){return ee}if(!isNaN(ee.length)){var j=-1,be=function pe(){while(++j<ee.length){if(t.call(ee,j)){pe.value=ee[j];pe.done=false;return pe}}pe.value=i;pe.done=true;return pe};return be.next=be}}return{next:Pt}}r.values=Se;function Pt(){return{value:i,done:true}}ue.prototype={constructor:ue,reset:function(ee){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(ce);if(!ee){for(var V in this){if(V.charAt(0)==="t"&&t.call(this,V)&&!isNaN(+V.slice(1))){this[V]=i}}}},stop:function(){this.done=true;var ee=this.tryEntries[0];var V=ee.completion;if(V.type==="throw"){throw V.arg}return this.rval},dispatchException:function(ee){if(this.done){throw ee}var V=this;function j(mt,Bt){De.type="throw";De.arg=ee;V.next=mt;if(Bt){V.method="next";V.arg=i}return!!Bt}for(var be=this.tryEntries.length-1;be>=0;--be){var pe=this.tryEntries[be];var De=pe.completion;if(pe.tryLoc==="root"){return j("end")}if(pe.tryLoc<=this.prev){var ke=t.call(pe,"catchLoc");var Me=t.call(pe,"finallyLoc");if(ke&&Me){if(this.prev<pe.catchLoc){return j(pe.catchLoc,true)}else if(this.prev<pe.finallyLoc){return j(pe.finallyLoc)}}else if(ke){if(this.prev<pe.catchLoc){return j(pe.catchLoc,true)}}else if(Me){if(this.prev<pe.finallyLoc){return j(pe.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(ee,V){for(var j=this.tryEntries.length-1;j>=0;--j){var be=this.tryEntries[j];if(be.tryLoc<=this.prev&&t.call(be,"finallyLoc")&&this.prev<be.finallyLoc){var pe=be;break}}if(pe&&(ee==="break"||ee==="continue")&&pe.tryLoc<=V&&V<=pe.finallyLoc){pe=null}var De=pe?pe.completion:{};De.type=ee;De.arg=V;if(pe){this.method="next";this.next=pe.finallyLoc;return b}return this.complete(De)},complete:function(ee,V){if(ee.type==="throw"){throw ee.arg}if(ee.type==="break"||ee.type==="continue"){this.next=ee.arg}else if(ee.type==="return"){this.rval=this.arg=ee.arg;this.method="return";this.next="end"}else if(ee.type==="normal"&&V){this.next=V}return b},finish:function(ee){for(var V=this.tryEntries.length-1;V>=0;--V){var j=this.tryEntries[V];if(j.finallyLoc===ee){this.complete(j.completion,j.afterLoc);ce(j);return b}}},"catch":function(ee){for(var V=this.tryEntries.length-1;V>=0;--V){var j=this.tryEntries[V];if(j.tryLoc===ee){var be=j.completion;if(be.type==="throw"){var pe=be.arg;ce(j)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(ee,V,j){this.delegate={iterator:Se(ee),resultName:V,nextLoc:j};if(this.method==="next"){this.arg=i}return b}};return r}(typeof gD==="object"?gD.exports:{});try{regeneratorRuntime=oj}catch(r){Function("r","regeneratorRuntime = r")(oj)}});var yD=C((tct,sj)=>{var I6e=Le();var E6e=ts();var k6e=Function.call;sj.exports=function(r,e,t){return E6e(k6e,I6e[r].prototype[e],t)}});var lj=C((rct,aj)=>{EI();var D6e=yD();aj.exports=D6e("Array","find")});var cj=C((ict,uj)=>{var O6e=lj();uj.exports=O6e});var pj=C((oct,dj)=>{AI();var R6e=yD();dj.exports=R6e("Array","map")});var hj=C((nct,mj)=>{var A6e=pj();mj.exports=A6e});function kg(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return P6e}function uo(){return++_e.mobxGuid}function It(r){Kl(false,r);throw"X"}function Kl(r,e){if(!r)throw new Error("[mobx] "+(e||F6e))}function Ta(r,e){if(true)return false;if(e){return Ta("'"+r+"', use '"+e+"' instead.")}if(fj.indexOf(r)!==-1)return false;fj.push(r);console.error("[mobx] Deprecated: "+r);return true}function ED(r){var e=false;return function(){if(e)return;e=true;return r.apply(this,arguments)}}function B6e(r){var e=[];r.forEach(function(t){if(e.indexOf(t)===-1)e.push(t)});return e}function kD(r){return r!==null&&typeof r==="object"}function Cm(r){if(r===null||typeof r!=="object")return false;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function M6e(r){if(Sm(r)||gs(r)){return r}else if(Array.isArray(r)){return new Map(r)}else if(Cm(r)){var e=new Map;for(var t in r){e.set(t,r[t])}return e}else{return It("Cannot convert to map from '"+r+"'")}}function L6e(r,e){for(var t=0;t<e.length;t++){Oa(r,e[t],r[e[t]])}}function Oa(r,e,t){Object.defineProperty(r,e,{enumerable:false,writable:true,configurable:true,value:t})}function Og(r,e,t){Object.defineProperty(r,e,{enumerable:false,writable:false,configurable:true,value:t})}function z6e(r,e){if(false)It("Cannot make property '"+e+"' observable, it is not configurable and writable in the target object")}function eu(r,e){var t="isMobX"+r;e.prototype[t]=true;return function(i){return kD(i)&&i[t]===true}}function U6e(r,e){return typeof r==="number"&&typeof e==="number"&&isNaN(r)&&isNaN(e)}function Sm(r){if(kg().Map!==void 0&&r instanceof kg().Map)return true;return false}function Rg(r){return r instanceof Set}function Ia(r){var e=[];while(true){var t=r.next();if(t.done)break;e.push(t.value)}return e}function kj(){return typeof Symbol==="function"&&Symbol.toPrimitive||"@@toPrimitive"}function Dj(r){return r===null?null:typeof r==="object"?""+r:r}function yj(r,e){var t=r.next();while(!t.done){e(t.value);t=r.next()}}function Oj(){return typeof Symbol==="function"&&Symbol.iterator||"@@iterator"}function DD(r,e){Og(r,Oj(),e)}function Dg(r){r[Oj()]=N6e;return r}function OD(){return typeof Symbol==="function"&&Symbol.toStringTag||"@@toStringTag"}function N6e(){return this}function jx(r,e,t){if(e===void 0){e=gj}if(t===void 0){t=gj}var i=new Vx(r);CUe(i,e);$j(i,t);return i}function Rj(r,e){return r===e}function q6e(r,e){return UD(r,e)}function H6e(r,e){return UD(r,e,1)}function W6e(r,e){return U6e(r,e)||Rj(r,e)}function Aj(r,e){_D(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function vD(r,e){var t=typeof Symbol==="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,n=[],s;try{while((e===void 0||e-- >0)&&!(o=i.next()).done)n.push(o.value)}catch(a){s={error:a}}finally{try{if(o&&!o.done&&(t=i["return"]))t.call(i)}finally{if(s)throw s.error}}return n}function xD(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(vD(arguments[e]));return r}function j6e(r,e){var t=e?G6e:V6e;return t[r]||(t[r]={configurable:true,enumerable:e,get:function(){Ac(this);return this[r]},set:function(i){Ac(this);this[r]=i}})}function Ac(r){if(r.__mobxDidRunLazyInitializers===true)return;var e=r.__mobxDecorators;if(e){Oa(r,"__mobxDidRunLazyInitializers",true);for(var t in e){var i=e[t];i.propertyCreator(r,i.prop,i.descriptor,i.decoratorTarget,i.decoratorArguments)}}}function Fj(r,e){return function t(){var i;var o=function n(s,a,l,u){if(u===true){e(s,a,l,s,i);return null}if(false)It("This function is a decorator, but it wasn't invoked like a decorator");if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var c=s.__mobxDecorators;Oa(s,"__mobxDecorators",jt({},c))}s.__mobxDecorators[a]={prop:a,propertyCreator:e,descriptor:l,decoratorTarget:s,decoratorArguments:i};return j6e(a,r)};if($6e(arguments)){i=zx;return o.apply(null,arguments)}else{i=Array.prototype.slice.call(arguments);return o}}}function $6e(r){return(r.length===2||r.length===3)&&typeof r[1]==="string"||r.length===4&&r[3]===true}function Ag(r,e,t){if(Gx(r))return r;if(Array.isArray(r))return ae.array(r,{name:t});if(Cm(r))return ae.object(r,void 0,{name:t});if(Sm(r))return ae.map(r,{name:t});if(Rg(r))return ae.set(r,{name:t});return r}function K6e(r,e,t){if(r===void 0||r===null)return r;if(Pc(r)||Mc(r)||gs(r)||tu(r))return r;if(Array.isArray(r))return ae.array(r,{name:t,deep:false});if(Cm(r))return ae.object(r,void 0,{name:t,deep:false});if(Sm(r))return ae.map(r,{name:t,deep:false});if(Rg(r))return ae.set(r,{name:t,deep:false});return It(false)}function $x(r){return r}function X6e(r,e,t){if(false)throw"observable.struct should not be used with observable values";if(UD(r,e))return e;return r}function Kx(r){Kl(r);var e=Fj(true,function(i,o,n,s,a){if(false){Kl(!n||!n.get,'@observable cannot be used on getter (property "'+o+'"), use @computed instead.')}var l=n?n.initializer?n.initializer.call(i):n.value:void 0;zUe(i,o,l,r)});var t=typeof process!=="undefined"&&process.env&&false?function i(){if(arguments.length<2)return It("Incorrect decorator invocation. @observable decorator doesn't expect any arguments");return e.apply(null,arguments)}:e;t.enhancer=r;return t}function vm(r){if(r===null||r===void 0)return Pj;if(typeof r==="string")return{name:r,deep:true};if(false){if(typeof r!=="object")return It("expected options object");Object.keys(r).forEach(assertValidOption)}return r}function Px(r){return r.defaultDecorator?r.defaultDecorator.enhancer:r.deep===false?$x:Ag}function Q6e(r,e,t){if(typeof arguments[1]==="string"){return AD.apply(null,arguments)}if(Gx(r))return r;var i=Cm(r)?ae.object(r,e,t):Array.isArray(r)?ae.array(r,e):Sm(r)?ae.map(r,e):Rg(r)?ae.set(r,e):r;if(i!==r)return i;It(false)}function wa(r){It("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}function Eg(r){return r instanceof qx}function CD(r){switch(r.dependenciesState){case ct.UP_TO_DATE:return false;case ct.NOT_TRACKING:case ct.STALE:return true;case ct.POSSIBLY_STALE:{var e=Bc(true);var t=wm();var i=r.observing,o=i.length;for(var n=0;n<o;n++){var s=i[n];if(Xx(s)){if(_e.disableErrorBoundaries){s.get()}else{try{s.get()}catch(a){Xl(t);Ea(e);return true}}if(r.dependenciesState===ct.STALE){Xl(t);Ea(e);return true}}}Lj(r);Xl(t);Ea(e);return false}}}function xm(r){var e=r.observers.length>0;if(_e.computationDepth>0&&e)It(false);if(!_e.allowStateChanges&&(e||_e.enforceActions==="strict"))It(false)}function tUe(r){if(false){console.warn("[mobx] Observable "+r.name+" being read outside a reactive context")}}function Mj(r,e,t){var i=Bc(true);Lj(r);r.newObserving=new Array(r.observing.length+100);r.unboundDepsCount=0;r.runId=++_e.runId;var o=_e.trackingDerivation;_e.trackingDerivation=r;var n;if(_e.disableErrorBoundaries===true){n=e.call(t)}else{try{n=e.call(t)}catch(s){n=new qx(s)}}_e.trackingDerivation=o;iUe(r);if(r.observing.length===0){rUe(r)}Ea(i);return n}function rUe(r){if(true)return;if(_e.reactionRequiresObservable||r.requiresObservable){console.warn("[mobx] Derivation "+r.name+" is created/updated without reading any observable value")}}function iUe(r){var e=r.observing;var t=r.observing=r.newObserving;var i=ct.UP_TO_DATE;var o=0,n=r.unboundDepsCount;for(var s=0;s<n;s++){var a=t[s];if(a.diffValue===0){a.diffValue=1;if(o!==s)t[o]=a;o++}if(a.dependenciesState>i){i=a.dependenciesState}}t.length=o;r.newObserving=null;n=e.length;while(n--){var a=e[n];if(a.diffValue===0){qj(a,r)}a.diffValue=0}while(o--){var a=t[o];if(a.diffValue===1){a.diffValue=0;uUe(a,r)}}if(i!==ct.UP_TO_DATE){r.dependenciesState=i;r.onBecomeStale()}}function SD(r){var e=r.observing;r.observing=[];var t=e.length;while(t--)qj(e[t],r);r.dependenciesState=ct.NOT_TRACKING}function FD(r){var e=wm();var t=r();Xl(e);return t}function wm(){var r=_e.trackingDerivation;_e.trackingDerivation=null;return r}function Xl(r){_e.trackingDerivation=r}function Bc(r){var e=_e.allowStateReads;_e.allowStateReads=r;return e}function Ea(r){_e.allowStateReads=r}function Lj(r){if(r.dependenciesState===ct.UP_TO_DATE)return;r.dependenciesState=ct.UP_TO_DATE;var e=r.observing;var t=e.length;while(t--)e[t].lowestObserverState=ct.UP_TO_DATE}function Rc(r,e){if(false){Kl(typeof e==="function","`action` can only be invoked on functions");if(typeof r!=="string"||!r)It("actions should have valid names, got: '"+r+"'")}var t=function(){return zj(r,e,this,arguments)};if(false){if(sct){Object.defineProperty(t,"name",{value:r})}}t.isMobxAction=true;return t}function zj(r,e,t,i){var o=nUe(r,t,i);try{return e.apply(t,i)}catch(n){o.error=n;throw n}finally{sUe(o)}}function nUe(r,e,t){var i=Ur()&&!!r;var o=0;if(i){o=Date.now();var n=t&&t.length||0;var s=new Array(n);if(n>0)for(var a=0;a<n;a++)s[a]=t[a];vn({type:"action",name:r,object:e,arguments:s})}var l=wm();ka();var u=Fg(true);var c=Bc(true);var d={prevDerivation:l,prevAllowStateChanges:u,prevAllowStateReads:c,notifySpy:i,startTime:o,actionId:oUe++,parentActionId:Hx};Hx=d.actionId;return d}function sUe(r){if(Hx!==r.actionId){It("invalid action stack. did you forget to finish an action?")}Hx=r.parentActionId;if(r.error!==void 0){_e.suppressReactionErrors=true}Pg(r.prevAllowStateChanges);Ea(r.prevAllowStateReads);Da();Xl(r.prevDerivation);if(r.notifySpy){xn({time:Date.now()-r.startTime})}_e.suppressReactionErrors=false}function Uj(r,e){var t=Fg(r);var i;try{i=e()}finally{Pg(t)}return i}function Fg(r){var e=_e.allowStateChanges;_e.allowStateChanges=r;return e}function Pg(r){_e.allowStateChanges=r}function lUe(){if(_e.pendingReactions.length||_e.inBatch||_e.isRunningReactions)It("isolateGlobalState should be called before MobX is running any reactions");Nj=true;if(Lx){if(--kg().__mobxInstanceCount===0)kg().__mobxGlobals=void 0;_e=new Mx}}function uUe(r,e){var t=r.observers.length;if(t){r.observersIndexes[e.__mapid]=t}r.observers[t]=e;if(r.lowestObserverState>e.dependenciesState)r.lowestObserverState=e.dependenciesState}function qj(r,e){if(r.observers.length===1){r.observers.length=0;Hj(r)}else{var t=r.observers;var i=r.observersIndexes;var o=t.pop();if(o!==e){var n=i[e.__mapid]||0;if(n){i[o.__mapid]=n}else{delete i[o.__mapid]}t[n]=o}delete i[e.__mapid]}}function Hj(r){if(r.isPendingUnobservation===false){r.isPendingUnobservation=true;_e.pendingUnobservations.push(r)}}function ka(){_e.inBatch++}function Da(){if(--_e.inBatch===0){jj();var r=_e.pendingUnobservations;for(var e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=false;if(t.observers.length===0){if(t.isBeingObserved){t.isBeingObserved=false;t.onBecomeUnobserved()}if(t instanceof Jl){t.suspend()}}}_e.pendingUnobservations=[]}}function Wj(r){tUe(r);var e=_e.trackingDerivation;if(e!==null){if(e.runId!==r.lastAccessedBy){r.lastAccessedBy=e.runId;e.newObserving[e.unboundDepsCount++]=r;if(!r.isBeingObserved){r.isBeingObserved=true;r.onBecomeObserved()}}return true}else if(r.observers.length===0&&_e.inBatch>0){Hj(r)}return false}function cUe(r){if(r.lowestObserverState===ct.STALE)return;r.lowestObserverState=ct.STALE;var e=r.observers;var t=e.length;while(t--){var i=e[t];if(i.dependenciesState===ct.UP_TO_DATE){if(i.isTracing!==_n.NONE){Gj(i,r)}i.onBecomeStale()}i.dependenciesState=ct.STALE}}function dUe(r){if(r.lowestObserverState===ct.STALE)return;r.lowestObserverState=ct.STALE;var e=r.observers;var t=e.length;while(t--){var i=e[t];if(i.dependenciesState===ct.POSSIBLY_STALE)i.dependenciesState=ct.STALE;else if(i.dependenciesState===ct.UP_TO_DATE)r.lowestObserverState=ct.UP_TO_DATE}}function pUe(r){if(r.lowestObserverState!==ct.UP_TO_DATE)return;r.lowestObserverState=ct.POSSIBLY_STALE;var e=r.observers;var t=e.length;while(t--){var i=e[t];if(i.dependenciesState===ct.UP_TO_DATE){i.dependenciesState=ct.POSSIBLY_STALE;if(i.isTracing!==_n.NONE){Gj(i,r)}i.onBecomeStale()}}}function Gj(r,e){console.log("[mobx.trace] '"+r.name+"' is invalidated due to a change in: '"+e.name+"'");if(r.isTracing===_n.BREAK){var t=[];Vj(BD(r),t,1);new Function("debugger;\n/*\nTracing '"+r.name+"'\n\nYou are entering this break point because derivation '"+r.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(r instanceof Jl?r.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+t.join("\n")+"\n*/\n    ")()}}function Vj(r,e,t){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(t).join("	")+r.name);if(r.dependencies)r.dependencies.forEach(function(i){return Vj(i,e,t+1)})}function jj(){if(_e.inBatch>0||_e.isRunningReactions)return;wD(mUe)}function mUe(){_e.isRunningReactions=true;var r=_e.pendingReactions;var e=0;while(r.length>0){if(++e===vj){console.error("Reaction doesn't converge to a stable state after "+vj+" iterations."+(" Probably there is a cycle in the reactive function: "+r[0]));r.splice(0)}var t=r.splice(0);for(var i=0,o=t.length;i<o;i++)t[i].runReaction()}_e.isRunningReactions=false}function hUe(r){var e=wD;wD=function(t){return r(function(){return e(t)})}}function Ur(){return!!_e.spyListeners.length}function Fc(r){if(!_e.spyListeners.length)return;var e=_e.spyListeners;for(var t=0,i=e.length;t<i;t++)e[t](r)}function vn(r){var e=jt(jt({},r),{spyReportStart:true});Fc(e)}function xn(r){if(r)Fc(jt(jt({},r),{spyReportEnd:true}));else Fc(fUe)}function PD(r){_e.spyListeners.push(r);return ED(function(){_e.spyListeners=_e.spyListeners.filter(function(e){return e!==r})})}function gUe(){It(false)}function xj(r){return function(e,t,i){if(i){if(false){return It("@action cannot be used with getters")}if(i.value){return{value:Rc(r,i.value),enumerable:false,configurable:true,writable:true}}var o=i.initializer;return{enumerable:false,configurable:true,writable:true,initializer:function(){return Rc(r,o.call(this))}}}return yUe(r).apply(this,arguments)}}function yUe(r){return function(e,t,i){Object.defineProperty(e,t,{configurable:true,enumerable:false,get:function(){return void 0},set:function(o){Oa(this,t,S(r,o))}})}}function bUe(r,e,t,i){if(i===true){bD(r,e,t.value);return null}if(t){return{configurable:true,enumerable:false,get:function(){bD(this,e,t.value||t.initializer.call(this));return this[e]},set:gUe}}return{enumerable:false,configurable:true,set:function(o){bD(this,e,o)},get:function(){return void 0}}}function lr(r,e){var t=typeof r==="string"?r:r.name||"<unnamed action>";var i=typeof r==="function"?r:e;if(false){Kl(typeof i==="function"&&i.length===0,"`runInAction` expects a function without arguments");if(typeof t!=="string"||!t)It("actions should have valid names, got: '"+t+"'")}return zj(t,i,this,void 0)}function bD(r,e,t){Oa(r,e,Rc(e,t.bind(r)))}function _Ue(r,e){if(e===void 0){e=Ej}if(false){Kl(typeof r==="function","Autorun expects a function as first argument");Kl(isAction(r)===false,"Autorun does not accept actions since actions are untrackable")}var t=e&&e.name||r.name||"Autorun@"+uo();var i=!e.scheduler&&!e.delay;var o;if(i){o=new Zl(t,function(){this.track(a)},e.onError,e.requiresObservable)}else{var n=xUe(e);var s=false;o=new Zl(t,function(){if(!s){s=true;n(function(){s=false;if(!o.isDisposed)o.track(a)})}},e.onError,e.requiresObservable)}function a(){r(o)}o.schedule();return o.getDisposer()}function xUe(r){return r.scheduler?r.scheduler:r.delay?function(e){return setTimeout(e,r.delay)}:vUe}function CUe(r,e,t){return Kj("onBecomeObserved",r,e,t)}function $j(r,e,t){return Kj("onBecomeUnobserved",r,e,t)}function Kj(r,e,t,i){var o=typeof i==="function"?Ql(e,t):Ql(e);var n=typeof i==="function"?i:t;var s=o[r];if(typeof s!=="function")return It(false);o[r]=function(){s.call(this);n.call(this)};return function(){o[r]=s}}function Yx(r){var e=r.enforceActions,t=r.computedRequiresReaction,i=r.computedConfigurable,o=r.disableErrorBoundaries,n=r.arrayBuffer,s=r.reactionScheduler,a=r.reactionRequiresObservable,l=r.observableRequiresReaction;if(r.isolateGlobalState===true){lUe()}if(e!==void 0){if(typeof e==="boolean"||e==="strict")Ta(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var u=void 0;switch(e){case true:case"observed":u=true;break;case false:case"never":u=false;break;case"strict":case"always":u="strict";break;default:It("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}_e.enforceActions=u;_e.allowStateChanges=u===true||u==="strict"?false:true}if(t!==void 0){_e.computedRequiresReaction=!!t}if(a!==void 0){_e.reactionRequiresObservable=!!a}if(l!==void 0){_e.observableRequiresReaction=!!l;_e.allowStateReads=!_e.observableRequiresReaction}if(i!==void 0){_e.computedConfigurable=!!i}if(o!==void 0){if(o===true)console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on.");_e.disableErrorBoundaries=!!o}if(typeof n==="number"){LD(n)}if(s){hUe(s)}}function SUe(r,e,t,i){if(false){Kl(arguments.length>=2&&arguments.length<=4,"'extendObservable' expected 2-4 arguments");Kl(typeof r==="object","'extendObservable' expects an object as first argument");Kl(!gs(r),"'extendObservable' should not be used on maps, use map.merge instead");Kl(!Gx(e),"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540");if(t){for(var o in t)if(!(o in e))It("Trying to declare a decorator for unspecified property '"+o+"'")}}i=vm(i);var n=i.defaultDecorator||(i.deep===false?Bj:AD);Ac(r);zD(r,i.name,n.enhancer);ka();try{var s=Object.getOwnPropertyNames(e);for(var a=0,l=s.length;a<l;a++){var o=s[a];var u=Object.getOwnPropertyDescriptor(e,o);if(false){if(isComputed(u.value))It("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead")}var c=t&&o in t?t[o]:u.get?Nx:n;if(false)return It("Not a valid decorator for '"+o+"', got: "+c);var d=c(r,o,u,true);if(d)Object.defineProperty(r,o,d)}}finally{Da()}return r}function BD(r,e){return Xj(Ql(r,e))}function Xj(r){var e={name:r.name};if(r.observing&&r.observing.length>0)e.dependencies=B6e(r.observing).map(Xj);return e}function wUe(){this.message="FLOW_CANCELLED"}function TUe(r,e){if(r===null||r===void 0)return false;if(e!==void 0){if(false)return It("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");if(Pc(r)){var t=r.$mobx;return t.values&&!!t.values[e]}return false}return Pc(r)||!!r.$mobx||RD(r)||Wx(r)||Xx(r)}function Gx(r){if(arguments.length!==1)It(false);return TUe(r)}function IUe(r){if(Pc(r)){return r.$mobx.getKeys()}if(gs(r)){return Ia(r.keys())}if(tu(r)){return Ia(r.keys())}if(Mc(r)){return r.map(function(e,t){return t})}return It(false)}function _m(r,e,t,i){if(i.detectCycles)r.set(e,t);return t}function $l(r,e,t){if(!e.recurseEverything&&!Gx(r))return r;if(typeof r!=="object")return r;if(r===null)return null;if(r instanceof Date)return r;if(aUe(r))return $l(r.get(),e,t);if(Gx(r))IUe(r);var i=e.detectCycles===true;if(i&&r!==null&&t.has(r)){return t.get(r)}if(Mc(r)||Array.isArray(r)){var o=_m(t,r,[],e);var n=r.map(function(f){return $l(f,e,t)});o.length=n.length;for(var s=0,a=n.length;s<a;s++)o[s]=n[s];return o}if(tu(r)||Object.getPrototypeOf(r)===Set.prototype){if(e.exportMapsAsObjects===false){var l=_m(t,r,new Set,e);r.forEach(function(f){l.add($l(f,e,t))});return l}else{var u=_m(t,r,[],e);r.forEach(function(f){u.push($l(f,e,t))});return u}}if(gs(r)||Object.getPrototypeOf(r)===Map.prototype){if(e.exportMapsAsObjects===false){var c=_m(t,r,new Map,e);r.forEach(function(f,b){c.set(b,$l(f,e,t))});return c}else{var d=_m(t,r,{},e);r.forEach(function(f,b){d[b]=$l(f,e,t)});return d}}var m=_m(t,r,{},e);for(var h in r){m[h]=$l(r[h],e,t)}return m}function ve(r,e){if(typeof e==="boolean")e={detectCycles:e};if(!e)e=EUe;e.detectCycles=e.detectCycles===void 0?e.recurseEverything===true:e.detectCycles===true;var t;if(e.detectCycles)t=new Map;return $l(r,e,t)}function kUe(){var r=[];for(var e=0;e<arguments.length;e++){r[e]=arguments[e]}var t=false;if(typeof r[r.length-1]==="boolean")t=r.pop();var i=DUe(r);if(!i){return It(false)}if(i.isTracing===_n.NONE){console.log("[mobx.trace] '"+i.name+"' tracing enabled")}i.isTracing=t?_n.BREAK:_n.LOG}function DUe(r){switch(r.length){case 0:return _e.trackingDerivation;case 1:return Ql(r[0]);case 2:return Ql(r[0],r[1])}}function ps(r,e){if(e===void 0){e=void 0}ka();try{return r.apply(e)}finally{Da()}}function ms(r){return r.interceptors!==void 0&&r.interceptors.length>0}function Bg(r,e){var t=r.interceptors||(r.interceptors=[]);t.push(e);return ED(function(){var i=t.indexOf(e);if(i!==-1)t.splice(i,1)})}function hs(r,e){var t=wm();try{var i=r.interceptors;if(i)for(var o=0,n=i.length;o<n;o++){e=i[o](e);Kl(!e||e.type,"Intercept handlers should return nothing or a change object");if(!e)break}return e}finally{Xl(t)}}function Cn(r){return r.changeListeners!==void 0&&r.changeListeners.length>0}function Mg(r,e){var t=r.changeListeners||(r.changeListeners=[]);t.push(e);return ED(function(){var i=t.indexOf(e);if(i!==-1)t.splice(i,1)})}function Sn(r,e){var t=wm();var i=r.changeListeners;if(!i)return;i=i.slice();for(var o=0,n=i.length;o<n;o++){i[o](e)}Xl(t)}function AUe(r,e){if(typeof Object["setPrototypeOf"]!=="undefined"){Object["setPrototypeOf"](r.prototype,e)}else if(typeof r.prototype.__proto__!=="undefined"){r.prototype.__proto__=e}else{r["prototype"]=e}}function Jj(r){return{enumerable:false,configurable:false,get:function(){return this.get(r)},set:function(e){this.set(r,e)}}}function PUe(r){Object.defineProperty(fs.prototype,""+r,Jj(r))}function LD(r){for(var e=TD;e<r;e++)PUe(e);TD=r}function Mc(r){return kD(r)&&BUe(r.$mobx)}function Bx(r){if(r&&r.toString)return r.toString();else return new String(r).toString()}function zD(r,e,t){if(e===void 0){e=""}if(t===void 0){t=Ag}var i=r.$mobx;if(i)return i;if(!Cm(r))e=(r.constructor.name||"ObservableObject")+"@"+uo();if(!e)e="ObservableObject@"+uo();i=new Zj(r,e,t);Og(r,"$mobx",i);return i}function zUe(r,e,t,i){var o=zD(r);z6e(r,e);if(ms(o)){var n=hs(o,{object:r,name:e,type:"add",newValue:t});if(!n)return;t=n.newValue}var s=o.values[e]=new Yl(t,i,o.name+"."+e,false);t=s.value;Object.defineProperty(r,e,NUe(e));if(o.keys)o.keys.push(e);HUe(o,r,e,t)}function UUe(r,e,t){var i=zD(r);t.name=i.name+"."+e;t.context=r;i.values[e]=new Jl(t);Object.defineProperty(r,e,qUe(e))}function NUe(r){return Cj[r]||(Cj[r]={configurable:true,enumerable:true,get:function(){return this.$mobx.read(this,r)},set:function(e){this.$mobx.write(this,r,e)}})}function wj(r){var e=r.$mobx;if(!e){Ac(r);return r.$mobx}return e}function qUe(r){return Sj[r]||(Sj[r]={configurable:_e.computedConfigurable,enumerable:false,get:function(){return wj(this).read(this,r)},set:function(e){wj(this).write(this,r,e)}})}function HUe(r,e,t,i){var o=Cn(r);var n=Ur();var s=o||n?{type:"add",object:e,name:t,newValue:i}:null;if(n)vn(jt(jt({},s),{name:r.name,key:t}));if(o)Sn(r,s);if(n)xn()}function Pc(r){if(kD(r)){Ac(r);return WUe(r.$mobx)}return false}function Ql(r,e){if(typeof r==="object"&&r!==null){if(Mc(r)){if(e!==void 0)It(false);return r.$mobx.atom}if(tu(r)){return r.$mobx}if(gs(r)){var t=r;if(e===void 0)return t._keysAtom;var i=t._data.get(e)||t._hasMap.get(e);if(!i)It(false);return i}Ac(r);if(e&&!r.$mobx)r[e];if(Pc(r)){if(!e)return It(false);var i=r.$mobx.values[e];if(!i)It(false);return i}if(RD(r)||Xx(r)||Wx(r)){return r}}else if(typeof r==="function"){if(Wx(r.$mobx)){return r.$mobx}}return It(false)}function Qj(r,e){if(!r)It("Expecting some object");if(e!==void 0)return Qj(Ql(r,e));if(RD(r)||Xx(r)||Wx(r))return r;if(gs(r)||tu(r))return r;Ac(r);if(r.$mobx)return r.$mobx;It(false)}function GUe(r,e){var t;if(e!==void 0)t=Ql(r,e);else if(Pc(r)||gs(r)||tu(r))t=Qj(r);else t=Ql(r);return t.name}function UD(r,e,t){if(t===void 0){t=-1}return ID(r,e,t)}function ID(r,e,t,i,o){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return false;if(r!==r)return e!==e;var n=typeof r;if(n!=="function"&&n!=="object"&&typeof e!="object")return false;r=Ij(r);e=Ij(e);var s=Tj.call(r);if(s!==Tj.call(e))return false;switch(s){case"[object RegExp]":case"[object String]":return""+r===""+e;case"[object Number]":if(+r!==+r)return+e!==+e;return+r===0?1/+r===1/e:+r===+e;case"[object Date]":case"[object Boolean]":return+r===+e;case"[object Symbol]":return typeof Symbol!=="undefined"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(e)}var a=s==="[object Array]";if(!a){if(typeof r!="object"||typeof e!="object")return false;var l=r.constructor,u=e.constructor;if(l!==u&&!(typeof l==="function"&&l instanceof l&&typeof u==="function"&&u instanceof u)&&("constructor"in r&&"constructor"in e)){return false}}if(t===0){return false}else if(t<0){t=-1}i=i||[];o=o||[];var c=i.length;while(c--){if(i[c]===r)return o[c]===e}i.push(r);o.push(e);if(a){c=r.length;if(c!==e.length)return false;while(c--){if(!ID(r[c],e[c],t-1,i,o))return false}}else{var d=Object.keys(r);var m=void 0;c=d.length;if(Object.keys(e).length!==c)return false;while(c--){m=d[c];if(!(VUe(e,m)&&ID(r[m],e[m],t-1,i,o)))return false}}i.pop();o.pop();return true}function Ij(r){if(Mc(r))return r.peek();if(Sm(r)||gs(r))return Ia(r.entries());if(Rg(r)||tu(r))return Ia(r.entries());return r}function VUe(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var F6e,zx,Ej,P6e,fj,gj,Vx,RD,Ux,_D,jt,G6e,V6e,Pj,Y6e,AD,J6e,Bj,Z6e,bj,ae,Nx,eUe,w,ct,_n,qx,Hx,oUe,_j,sct,Yl,aUe,Jl,Xx,Mx,Lx,Nj,_e,Zl,vj,wD,Wx,fUe,S,vUe,EUe,OUe,RUe,TD,MD,Yj,fs,FUe,BUe,MUe,Jx,gs,LUe,Zx,tu,Zj,Cj,Sj,WUe,Tj,ND,act;var ze=p(()=>{F6e="An invariant failed, however the error is obfuscated because this is an production build.";zx=[];Object.freeze(zx);Ej={};Object.freeze(Ej);P6e={};fj=[];gj=function(){};Vx=function(){function r(e){if(e===void 0){e="Atom@"+uo()}this.name=e;this.isPendingUnobservation=false;this.isBeingObserved=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.lastAccessedBy=0;this.lowestObserverState=ct.NOT_TRACKING}r.prototype.onBecomeUnobserved=function(){};r.prototype.onBecomeObserved=function(){};r.prototype.reportObserved=function(){return Wj(this)};r.prototype.reportChanged=function(){ka();cUe(this);Da()};r.prototype.toString=function(){return this.name};return r}();RD=eu("Atom",Vx);Ux={identity:Rj,structural:q6e,default:W6e,shallow:H6e};_D=function(r,e){_D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)if(i.hasOwnProperty(o))t[o]=i[o]};return _D(r,e)};jt=function(){jt=Object.assign||function r(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]}return e};return jt.apply(this,arguments)};G6e={};V6e={};Pj={deep:true,name:void 0,defaultDecorator:void 0};Y6e={deep:false,name:void 0,defaultDecorator:void 0};Object.freeze(Pj);Object.freeze(Y6e);AD=Kx(Ag);J6e=Kx(K6e);Bj=Kx($x);Z6e=Kx(X6e);bj={box:function(r,e){if(arguments.length>2)wa("box");var t=vm(e);return new Yl(r,Px(t),t.name,true,t.equals)},shallowBox:function(r,e){if(arguments.length>2)wa("shallowBox");Ta("observable.shallowBox","observable.box(value, { deep: false })");return ae.box(r,{name:e,deep:false})},array:function(r,e){if(arguments.length>2)wa("array");var t=vm(e);return new fs(r,Px(t),t.name)},shallowArray:function(r,e){if(arguments.length>2)wa("shallowArray");Ta("observable.shallowArray","observable.array(values, { deep: false })");return ae.array(r,{name:e,deep:false})},map:function(r,e){if(arguments.length>2)wa("map");var t=vm(e);return new Jx(r,Px(t),t.name)},shallowMap:function(r,e){if(arguments.length>2)wa("shallowMap");Ta("observable.shallowMap","observable.map(values, { deep: false })");return ae.map(r,{name:e,deep:false})},set:function(r,e){if(arguments.length>2)wa("set");var t=vm(e);return new Zx(r,Px(t),t.name)},object:function(r,e,t){if(typeof arguments[1]==="string")wa("object");var i=vm(t);return SUe({},r,e,i)},shallowObject:function(r,e){if(typeof arguments[1]==="string")wa("shallowObject");Ta("observable.shallowObject","observable.object(values, {}, { deep: false })");return ae.object(r,{},{name:e,deep:false})},ref:Bj,shallow:J6e,deep:AD,struct:Z6e};ae=Q6e;Object.keys(bj).forEach(function(r){return ae[r]=bj[r]});Nx=Fj(false,function(r,e,t,i,o){if(false){Kl(t&&t.get,"Trying to declare a computed value for unspecified getter '"+e+"'")}var n=t.get,s=t.set;var a=o[0]||{};UUe(r,e,jt({get:n,set:s},a))});eUe=Nx({equals:Ux.structural});w=function r(e,t,i){if(typeof t==="string"){return Nx.apply(null,arguments)}if(e!==null&&typeof e==="object"&&arguments.length===1){return Nx.apply(null,arguments)}if(false){Kl(typeof e==="function","First argument to `computed` should be an expression.");Kl(arguments.length<3,"Computed takes one or two arguments if used as function")}var o=typeof t==="object"?t:{};o.get=e;o.set=typeof t==="function"?t:o.set;o.name=o.name||e.name||"";return new Jl(o)};w.struct=eUe;(function(r){r[r["NOT_TRACKING"]=-1]="NOT_TRACKING";r[r["UP_TO_DATE"]=0]="UP_TO_DATE";r[r["POSSIBLY_STALE"]=1]="POSSIBLY_STALE";r[r["STALE"]=2]="STALE"})(ct||(ct={}));(function(r){r[r["NONE"]=0]="NONE";r[r["LOG"]=1]="LOG";r[r["BREAK"]=2]="BREAK"})(_n||(_n={}));qx=function(){function r(e){this.cause=e}return r}();Hx=0;oUe=1;_j=Object.getOwnPropertyDescriptor(function(){},"name");sct=_j&&_j.configurable;Yl=function(r){Aj(e,r);function e(t,i,o,n,s){if(o===void 0){o="ObservableValue@"+uo()}if(n===void 0){n=true}if(s===void 0){s=Ux.default}var a=r.call(this,o)||this;a.enhancer=i;a.name=o;a.equals=s;a.hasUnreportedChange=false;a.value=i(t,void 0,o);if(n&&Ur()){Fc({type:"create",name:a.name,newValue:""+a.value})}return a}e.prototype.dehanceValue=function(t){if(this.dehancer!==void 0)return this.dehancer(t);return t};e.prototype.set=function(t){var i=this.value;t=this.prepareNewValue(t);if(t!==_e.UNCHANGED){var o=Ur();if(o){vn({type:"update",name:this.name,newValue:t,oldValue:i})}this.setNewValue(t);if(o)xn()}};e.prototype.prepareNewValue=function(t){xm(this);if(ms(this)){var i=hs(this,{object:this,type:"update",newValue:t});if(!i)return _e.UNCHANGED;t=i.newValue}t=this.enhancer(t,this.value,this.name);return this.equals(this.value,t)?_e.UNCHANGED:t};e.prototype.setNewValue=function(t){var i=this.value;this.value=t;this.reportChanged();if(Cn(this)){Sn(this,{type:"update",object:this,newValue:t,oldValue:i})}};e.prototype.get=function(){this.reportObserved();return this.dehanceValue(this.value)};e.prototype.intercept=function(t){return Bg(this,t)};e.prototype.observe=function(t,i){if(i)t({object:this,type:"update",newValue:this.value,oldValue:void 0});return Mg(this,t)};e.prototype.toJSON=function(){return this.get()};e.prototype.toString=function(){return this.name+"["+this.value+"]"};e.prototype.valueOf=function(){return Dj(this.get())};return e}(Vx);Yl.prototype[kj()]=Yl.prototype.valueOf;aUe=eu("ObservableValue",Yl);Jl=function(){function r(e){this.dependenciesState=ct.NOT_TRACKING;this.observing=[];this.newObserving=null;this.isBeingObserved=false;this.isPendingUnobservation=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.runId=0;this.lastAccessedBy=0;this.lowestObserverState=ct.UP_TO_DATE;this.unboundDepsCount=0;this.__mapid="#"+uo();this.value=new qx(null);this.isComputing=false;this.isRunningSetter=false;this.isTracing=_n.NONE;Kl(e.get,"missing option for computed: get");this.derivation=e.get;this.name=e.name||"ComputedValue@"+uo();if(e.set)this.setter=Rc(this.name+"-setter",e.set);this.equals=e.equals||(e.compareStructural||e.struct?Ux.structural:Ux.default);this.scope=e.context;this.requiresReaction=!!e.requiresReaction;this.keepAlive=!!e.keepAlive}r.prototype.onBecomeStale=function(){pUe(this)};r.prototype.onBecomeUnobserved=function(){};r.prototype.onBecomeObserved=function(){};r.prototype.get=function(){if(this.isComputing)It("Cycle detected in computation "+this.name+": "+this.derivation);if(_e.inBatch===0&&this.observers.length===0&&!this.keepAlive){if(CD(this)){this.warnAboutUntrackedRead();ka();this.value=this.computeValue(false);Da()}}else{Wj(this);if(CD(this)){if(this.trackAndCompute())dUe(this)}}var e=this.value;if(Eg(e))throw e.cause;return e};r.prototype.peek=function(){var e=this.computeValue(false);if(Eg(e))throw e.cause;return e};r.prototype.set=function(e){if(this.setter){Kl(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?");this.isRunningSetter=true;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=false}}else Kl(false,false)};r.prototype.trackAndCompute=function(){if(Ur()){Fc({object:this.scope,type:"compute",name:this.name})}var e=this.value;var t=this.dependenciesState===ct.NOT_TRACKING;var i=this.computeValue(true);var o=t||Eg(e)||Eg(i)||!this.equals(e,i);if(o){this.value=i}return o};r.prototype.computeValue=function(e){this.isComputing=true;_e.computationDepth++;var t;if(e){t=Mj(this,this.derivation,this.scope)}else{if(_e.disableErrorBoundaries===true){t=this.derivation.call(this.scope)}else{try{t=this.derivation.call(this.scope)}catch(i){t=new qx(i)}}}_e.computationDepth--;this.isComputing=false;return t};r.prototype.suspend=function(){if(!this.keepAlive){SD(this);this.value=void 0}};r.prototype.observe=function(e,t){var i=this;var o=true;var n=void 0;return _Ue(function(){var s=i.get();if(!o||t){var a=wm();e({type:"update",object:i,newValue:s,oldValue:n});Xl(a)}o=false;n=s})};r.prototype.warnAboutUntrackedRead=function(){if(true)return;if(this.requiresReaction===true){It("[mobx] Computed value "+this.name+" is read outside a reactive context")}if(this.isTracing!==_n.NONE){console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute")}if(_e.computedRequiresReaction){console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute")}};r.prototype.toJSON=function(){return this.get()};r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"};r.prototype.valueOf=function(){return Dj(this.get())};return r}();Jl.prototype[kj()]=Jl.prototype.valueOf;Xx=eu("ComputedValue",Jl);Mx=function(){function r(){this.version=5;this.UNCHANGED={};this.trackingDerivation=null;this.computationDepth=0;this.runId=0;this.mobxGuid=0;this.inBatch=0;this.pendingUnobservations=[];this.pendingReactions=[];this.isRunningReactions=false;this.allowStateChanges=true;this.allowStateReads=true;this.enforceActions=false;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.computedRequiresReaction=false;this.reactionRequiresObservable=false;this.observableRequiresReaction=false;this.computedConfigurable=false;this.disableErrorBoundaries=false;this.suppressReactionErrors=false}return r}();Lx=true;Nj=false;_e=function(){var r=kg();if(r.__mobxInstanceCount>0&&!r.__mobxGlobals)Lx=false;if(r.__mobxGlobals&&r.__mobxGlobals.version!==new Mx().version)Lx=false;if(!Lx){setTimeout(function(){if(!Nj){It("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}},1);return new Mx}else if(r.__mobxGlobals){r.__mobxInstanceCount+=1;if(!r.__mobxGlobals.UNCHANGED)r.__mobxGlobals.UNCHANGED={};return r.__mobxGlobals}else{r.__mobxInstanceCount=1;return r.__mobxGlobals=new Mx}}();Zl=function(){function r(e,t,i,o){if(e===void 0){e="Reaction@"+uo()}if(o===void 0){o=false}this.name=e;this.onInvalidate=t;this.errorHandler=i;this.requiresObservable=o;this.observing=[];this.newObserving=[];this.dependenciesState=ct.NOT_TRACKING;this.diffValue=0;this.runId=0;this.unboundDepsCount=0;this.__mapid="#"+uo();this.isDisposed=false;this._isScheduled=false;this._isTrackPending=false;this._isRunning=false;this.isTracing=_n.NONE}r.prototype.onBecomeStale=function(){this.schedule()};r.prototype.schedule=function(){if(!this._isScheduled){this._isScheduled=true;_e.pendingReactions.push(this);jj()}};r.prototype.isScheduled=function(){return this._isScheduled};r.prototype.runReaction=function(){if(!this.isDisposed){ka();this._isScheduled=false;if(CD(this)){this._isTrackPending=true;try{this.onInvalidate();if(this._isTrackPending&&Ur()){Fc({name:this.name,type:"scheduled-reaction"})}}catch(e){this.reportExceptionInDerivation(e)}}Da()}};r.prototype.track=function(e){ka();var t=Ur();var i;if(t){i=Date.now();vn({name:this.name,type:"reaction"})}this._isRunning=true;var o=Mj(this,e,void 0);this._isRunning=false;this._isTrackPending=false;if(this.isDisposed){SD(this)}if(Eg(o))this.reportExceptionInDerivation(o.cause);if(t){xn({time:Date.now()-i})}Da()};r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(_e.disableErrorBoundaries)throw e;var i="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";if(_e.suppressReactionErrors){console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)")}else{console.error(i,e)}if(Ur()){Fc({type:"error",name:this.name,message:i,error:""+e})}_e.globalReactionErrorHandlers.forEach(function(o){return o(e,t)})};r.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;if(!this._isRunning){ka();SD(this);Da()}}};r.prototype.getDisposer=function(){var e=this.dispose.bind(this);e.$mobx=this;return e};r.prototype.toString=function(){return"Reaction["+this.name+"]"};r.prototype.trace=function(e){if(e===void 0){e=false}kUe(this,e)};return r}();vj=100;wD=function(r){return r()};Wx=eu("Reaction",Zl);fUe={spyReportEnd:true};S=function r(e,t,i,o){if(arguments.length===1&&typeof e==="function")return Rc(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof t==="function")return Rc(e,t);if(arguments.length===1&&typeof e==="string")return xj(e);if(o===true){e[t]=Rc(e.name||t,i.value)}else{return xj(t).apply(null,arguments)}};S.bound=bUe;vUe=function(r){return r()};wUe.prototype=Object.create(Error.prototype);EUe={detectCycles:true,exportMapsAsObjects:true,recurseEverything:false};OUe=1e4;RUe=function(){var r=false;var e={};Object.defineProperty(e,"0",{set:function(){r=true}});Object.create(e)["0"]=1;return r===false}();TD=0;MD=function(){function r(){}return r}();AUe(MD,Array.prototype);if(Object.isFrozen(Array)){["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(r){Object.defineProperty(MD.prototype,r,{configurable:true,writable:true,value:Array.prototype[r]})})}Yj=function(){function r(e,t,i,o){this.array=i;this.owned=o;this.values=[];this.lastKnownLength=0;this.atom=new Vx(e||"ObservableArray@"+uo());this.enhancer=function(n,s){return t(n,s,e+"[..]")}}r.prototype.dehanceValue=function(e){if(this.dehancer!==void 0)return this.dehancer(e);return e};r.prototype.dehanceValues=function(e){if(this.dehancer!==void 0&&e.length>0)return e.map(this.dehancer);return e};r.prototype.intercept=function(e){return Bg(this,e)};r.prototype.observe=function(e,t){if(t===void 0){t=false}if(t){e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0})}return Mg(this,e)};r.prototype.getArrayLength=function(){this.atom.reportObserved();return this.values.length};r.prototype.setArrayLength=function(e){if(typeof e!=="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e===t)return;else if(e>t){var i=new Array(e-t);for(var o=0;o<e-t;o++)i[o]=void 0;this.spliceWithArray(t,0,i)}else this.spliceWithArray(e,t-e)};r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t;if(t>0&&e+t+1>TD)LD(e+t+1)};r.prototype.spliceWithArray=function(e,t,i){var o=this;xm(this.atom);var n=this.values.length;if(e===void 0)e=0;else if(e>n)e=n;else if(e<0)e=Math.max(0,n+e);if(arguments.length===1)t=n-e;else if(t===void 0||t===null)t=0;else t=Math.max(0,Math.min(t,n-e));if(i===void 0)i=zx;if(ms(this)){var s=hs(this,{object:this.array,type:"splice",index:e,removedCount:t,added:i});if(!s)return zx;t=s.removedCount;i=s.added}i=i.length===0?i:i.map(function(u){return o.enhancer(u,void 0)});var a=i.length-t;this.updateArrayLength(n,a);var l=this.spliceItemsIntoValues(e,t,i);if(t!==0||i.length!==0)this.notifyArraySplice(e,i,l);return this.dehanceValues(l)};r.prototype.spliceItemsIntoValues=function(e,t,i){var o;if(i.length<OUe){return(o=this.values).splice.apply(o,xD([e,t],i))}else{var n=this.values.slice(e,e+t);this.values=this.values.slice(0,e).concat(i,this.values.slice(e+t));return n}};r.prototype.notifyArrayChildUpdate=function(e,t,i){var o=!this.owned&&Ur();var n=Cn(this);var s=n||o?{object:this.array,type:"update",index:e,newValue:t,oldValue:i}:null;if(o)vn(jt(jt({},s),{name:this.atom.name}));this.atom.reportChanged();if(n)Sn(this,s);if(o)xn()};r.prototype.notifyArraySplice=function(e,t,i){var o=!this.owned&&Ur();var n=Cn(this);var s=n||o?{object:this.array,type:"splice",index:e,removed:i,added:t,removedCount:i.length,addedCount:t.length}:null;if(o)vn(jt(jt({},s),{name:this.atom.name}));this.atom.reportChanged();if(n)Sn(this,s);if(o)xn()};return r}();fs=function(r){Aj(e,r);function e(t,i,o,n){if(o===void 0){o="ObservableArray@"+uo()}if(n===void 0){n=false}var s=r.call(this)||this;var a=new Yj(o,i,s,n);Og(s,"$mobx",a);if(t&&t.length){var l=Fg(true);s.spliceWithArray(0,0,t);Pg(l)}if(RUe){Object.defineProperty(a.array,"0",FUe)}return s}e.prototype.intercept=function(t){return this.$mobx.intercept(t)};e.prototype.observe=function(t,i){if(i===void 0){i=false}return this.$mobx.observe(t,i)};e.prototype.clear=function(){return this.splice(0)};e.prototype.concat=function(){var t=[];for(var i=0;i<arguments.length;i++){t[i]=arguments[i]}this.$mobx.atom.reportObserved();return Array.prototype.concat.apply(this.peek(),t.map(function(o){return Mc(o)?o.peek():o}))};e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)};e.prototype.toJS=function(){return this.slice()};e.prototype.toJSON=function(){return this.toJS()};e.prototype.peek=function(){this.$mobx.atom.reportObserved();return this.$mobx.dehanceValues(this.$mobx.values)};e.prototype.find=function(t,i,o){if(o===void 0){o=0}if(arguments.length===3)Ta("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return n===-1?void 0:this.get(n)};e.prototype.findIndex=function(t,i,o){if(o===void 0){o=0}if(arguments.length===3)Ta("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");var n=this.peek(),s=n.length;for(var a=o;a<s;a++)if(t.call(i,n[a],a,this))return a;return-1};e.prototype.splice=function(t,i){var o=[];for(var n=2;n<arguments.length;n++){o[n-2]=arguments[n]}switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,i)}return this.$mobx.spliceWithArray(t,i,o)};e.prototype.spliceWithArray=function(t,i,o){return this.$mobx.spliceWithArray(t,i,o)};e.prototype.push=function(){var t=[];for(var i=0;i<arguments.length;i++){t[i]=arguments[i]}var o=this.$mobx;o.spliceWithArray(o.values.length,0,t);return o.values.length};e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]};e.prototype.shift=function(){return this.splice(0,1)[0]};e.prototype.unshift=function(){var t=[];for(var i=0;i<arguments.length;i++){t[i]=arguments[i]}var o=this.$mobx;o.spliceWithArray(0,0,t);return o.values.length};e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)};e.prototype.sort=function(t){var i=this.slice();return i.sort.apply(i,arguments)};e.prototype.remove=function(t){var i=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);if(i>-1){this.splice(i,1);return true}return false};e.prototype.move=function(t,i){Ta("observableArray.move is deprecated, use .slice() & .replace() instead");function o(a){if(a<0){throw new Error("[mobx.array] Index out of bounds: "+a+" is negative")}var l=this.$mobx.values.length;if(a>=l){throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}}o.call(this,t);o.call(this,i);if(t===i){return}var n=this.$mobx.values;var s;if(t<i){s=xD(n.slice(0,t),n.slice(t+1,i+1),[n[t]],n.slice(i+1))}else{s=xD(n.slice(0,i),[n[t]],n.slice(i,t),n.slice(t+1))}this.replace(s)};e.prototype.get=function(t){var i=this.$mobx;if(i){if(t<i.values.length){i.atom.reportObserved();return i.dehanceValue(i.values[t])}console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+i.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}return void 0};e.prototype.set=function(t,i){var o=this.$mobx;var n=o.values;if(t<n.length){xm(o.atom);var s=n[t];if(ms(o)){var a=hs(o,{type:"update",object:this,index:t,newValue:i});if(!a)return;i=a.newValue}i=o.enhancer(i,s);var l=i!==s;if(l){n[t]=i;o.notifyArrayChildUpdate(t,i,s)}}else if(t===n.length){o.spliceWithArray(t,0,[i])}else{throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+n.length)}};return e}(MD);DD(fs.prototype,function(){this.$mobx.atom.reportObserved();var r=this;var e=0;return Dg({next:function(){return e<r.length?{value:r[e++],done:false}:{done:true,value:void 0}}})});Object.defineProperty(fs.prototype,"length",{enumerable:false,configurable:true,get:function(){return this.$mobx.getArrayLength()},set:function(r){this.$mobx.setArrayLength(r)}});Oa(fs.prototype,OD(),"Array");["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(r){var e=Array.prototype[r];Kl(typeof e==="function","Base function not defined on Array prototype: '"+r+"'");Oa(fs.prototype,r,function(){return e.apply(this.peek(),arguments)})});["every","filter","forEach","map","some"].forEach(function(r){var e=Array.prototype[r];Kl(typeof e==="function","Base function not defined on Array prototype: '"+r+"'");Oa(fs.prototype,r,function(t,i){var o=this;var n=this.$mobx;n.atom.reportObserved();var s=n.dehanceValues(n.values);return s[r](function(a,l){return t.call(i,a,l,o)},i)})});["reduce","reduceRight"].forEach(function(r){Oa(fs.prototype,r,function(){var e=this;var t=this.$mobx;t.atom.reportObserved();var i=arguments[0];arguments[0]=function(o,n,s){n=t.dehanceValue(n);return i(o,n,s,e)};return t.values[r].apply(t.values,arguments)})});L6e(fs.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);FUe=Jj(0);LD(1e3);BUe=eu("ObservableArrayAdministration",Yj);MUe={};Jx=function(){function r(e,t,i){if(t===void 0){t=Ag}if(i===void 0){i="ObservableMap@"+uo()}this.enhancer=t;this.name=i;this.$mobx=MUe;this._keysAtom=jx(this.name+".keys()");if(typeof Map!=="function"){throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js")}this._data=new Map;this._hasMap=new Map;this.merge(e)}r.prototype._has=function(e){return this._data.has(e)};r.prototype.has=function(e){var t=this;if(!_e.trackingDerivation)return this._has(e);var i=this._hasMap.get(e);if(!i){var o=i=new Yl(this._has(e),$x,this.name+"."+Bx(e)+"?",false);this._hasMap.set(e,o);$j(o,function(){return t._hasMap.delete(e)})}return i.get()};r.prototype.set=function(e,t){var i=this._has(e);if(ms(this)){var o=hs(this,{type:i?"update":"add",object:this,newValue:t,name:e});if(!o)return this;t=o.newValue}if(i){this._updateValue(e,t)}else{this._addValue(e,t)}return this};r.prototype.delete=function(e){var t=this;xm(this._keysAtom);if(ms(this)){var i=hs(this,{type:"delete",object:this,name:e});if(!i)return false}if(this._has(e)){var o=Ur();var n=Cn(this);var i=n||o?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;if(o)vn(jt(jt({},i),{name:this.name,key:e}));ps(function(){t._keysAtom.reportChanged();t._updateHasMapEntry(e,false);var a=t._data.get(e);a.setNewValue(void 0);t._data.delete(e)});if(n)Sn(this,i);if(o)xn();return true}return false};r.prototype._updateHasMapEntry=function(e,t){var i=this._hasMap.get(e);if(i){i.setNewValue(t)}};r.prototype._updateValue=function(e,t){var i=this._data.get(e);t=i.prepareNewValue(t);if(t!==_e.UNCHANGED){var o=Ur();var n=Cn(this);var s=n||o?{type:"update",object:this,oldValue:i.value,name:e,newValue:t}:null;if(o)vn(jt(jt({},s),{name:this.name,key:e}));i.setNewValue(t);if(n)Sn(this,s);if(o)xn()}};r.prototype._addValue=function(e,t){var i=this;xm(this._keysAtom);ps(function(){var a=new Yl(t,i.enhancer,i.name+"."+Bx(e),false);i._data.set(e,a);t=a.value;i._updateHasMapEntry(e,true);i._keysAtom.reportChanged()});var o=Ur();var n=Cn(this);var s=n||o?{type:"add",object:this,name:e,newValue:t}:null;if(o)vn(jt(jt({},s),{name:this.name,key:e}));if(n)Sn(this,s);if(o)xn()};r.prototype.get=function(e){if(this.has(e))return this.dehanceValue(this._data.get(e).get());return this.dehanceValue(void 0)};r.prototype.dehanceValue=function(e){if(this.dehancer!==void 0){return this.dehancer(e)}return e};r.prototype.keys=function(){this._keysAtom.reportObserved();return this._data.keys()};r.prototype.values=function(){var e=this;var t=this.keys();return Dg({next:function(){var i=t.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:e.get(n)}}})};r.prototype.entries=function(){var e=this;var t=this.keys();return Dg({next:function(){var i=t.next(),o=i.done,n=i.value;return{done:o,value:o?void 0:[n,e.get(n)]}}})};r.prototype.forEach=function(e,t){var i=this;this._keysAtom.reportObserved();this._data.forEach(function(o,n){return e.call(t,i.get(n),n,i)})};r.prototype.merge=function(e){var t=this;if(gs(e)){e=e.toJS()}ps(function(){var i=Fg(true);try{if(Cm(e))Object.keys(e).forEach(function(o){return t.set(o,e[o])});else if(Array.isArray(e))e.forEach(function(o){var n=vD(o,2),s=n[0],a=n[1];return t.set(s,a)});else if(Sm(e)){if(e.constructor!==Map)It("Cannot initialize from classes that inherit from Map: "+e.constructor.name);else e.forEach(function(o,n){return t.set(n,o)})}else if(e!==null&&e!==void 0)It("Cannot initialize map from "+e)}finally{Pg(i)}});return this};r.prototype.clear=function(){var e=this;ps(function(){FD(function(){e._data.forEach(function(t,i){return e.delete(i)})})})};r.prototype.replace=function(e){var t=this;ps(function(){var i=M6e(e);var o=new Map;var n=false;yj(t._data.keys(),function(c){if(!i.has(c)){var d=t.delete(c);if(d){n=true}else{var m=t._data.get(c);o.set(c,m)}}});yj(i.entries(),function(c){var d=vD(c,2),m=d[0],h=d[1];var f=t._data.has(m);t.set(m,h);if(t._data.has(m)){var b=t._data.get(m);o.set(m,b);if(!f){n=true}}});if(!n){if(t._data.size!==o.size){t._keysAtom.reportChanged()}else{var s=t._data.keys();var a=o.keys();var l=s.next();var u=a.next();while(!l.done){if(l.value!==u.value){t._keysAtom.reportChanged();break}l=s.next();u=a.next()}}}t._data=o});return this};Object.defineProperty(r.prototype,"size",{get:function(){this._keysAtom.reportObserved();return this._data.size},enumerable:true,configurable:true});r.prototype.toPOJO=function(){var e=this;var t={};this.forEach(function(i,o){return t[typeof o==="symbol"?o:Bx(o)]=e.get(o)});return t};r.prototype.toJS=function(){return new Map(this)};r.prototype.toJSON=function(){return this.toPOJO()};r.prototype.toString=function(){var e=this;return this.name+"[{ "+Ia(this.keys()).map(function(t){return Bx(t)+": "+(""+e.get(t))}).join(", ")+" }]"};r.prototype.observe=function(e,t){return Mg(this,e)};r.prototype.intercept=function(e){return Bg(this,e)};return r}();DD(Jx.prototype,function(){return this.entries()});Og(Jx.prototype,OD(),"Map");gs=eu("ObservableMap",Jx);LUe={};Zx=function(){function r(e,t,i){if(t===void 0){t=Ag}if(i===void 0){i="ObservableSet@"+uo()}this.name=i;this.$mobx=LUe;this._data=new Set;this._atom=jx(this.name);if(typeof Set!=="function"){throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js")}this.enhancer=function(o,n){return t(o,n,i)};if(e){this.replace(e)}}r.prototype.dehanceValue=function(e){if(this.dehancer!==void 0){return this.dehancer(e)}return e};r.prototype.clear=function(){var e=this;ps(function(){FD(function(){e._data.forEach(function(t){e.delete(t)})})})};r.prototype.forEach=function(e,t){var i=this;this._atom.reportObserved();this._data.forEach(function(o){e.call(t,o,o,i)})};Object.defineProperty(r.prototype,"size",{get:function(){this._atom.reportObserved();return this._data.size},enumerable:true,configurable:true});r.prototype.add=function(e){var t=this;xm(this._atom);if(ms(this)){var i=hs(this,{type:"add",object:this,newValue:e});if(!i)return this}if(!this.has(e)){ps(function(){t._data.add(t.enhancer(e,void 0));t._atom.reportChanged()});var o=Ur();var n=Cn(this);var i=n||o?{type:"add",object:this,newValue:e}:null;if(o&&false)vn(i);if(n)Sn(this,i);if(o&&false)xn()}return this};r.prototype.delete=function(e){var t=this;if(ms(this)){var i=hs(this,{type:"delete",object:this,oldValue:e});if(!i)return false}if(this.has(e)){var o=Ur();var n=Cn(this);var i=n||o?{type:"delete",object:this,oldValue:e}:null;if(o&&false)vn(jt(jt({},i),{name:this.name}));ps(function(){t._atom.reportChanged();t._data.delete(e)});if(n)Sn(this,i);if(o&&false)xn();return true}return false};r.prototype.has=function(e){this._atom.reportObserved();return this._data.has(this.dehanceValue(e))};r.prototype.entries=function(){var e=0;var t=Ia(this.keys());var i=Ia(this.values());return Dg({next:function(){var o=e;e+=1;return o<i.length?{value:[t[o],i[o]],done:false}:{done:true}}})};r.prototype.keys=function(){return this.values()};r.prototype.values=function(){this._atom.reportObserved();var e=this;var t=0;var i;if(this._data.values!==void 0){i=Ia(this._data.values())}else{i=[];this._data.forEach(function(o){return i.push(o)})}return Dg({next:function(){return t<i.length?{value:e.dehanceValue(i[t++]),done:false}:{done:true}}})};r.prototype.replace=function(e){var t=this;if(tu(e)){e=e.toJS()}ps(function(){var i=Fg(true);try{if(Array.isArray(e)){t.clear();e.forEach(function(o){return t.add(o)})}else if(Rg(e)){t.clear();e.forEach(function(o){return t.add(o)})}else if(e!==null&&e!==void 0){It("Cannot initialize set from "+e)}}finally{Pg(i)}});return this};r.prototype.observe=function(e,t){return Mg(this,e)};r.prototype.intercept=function(e){return Bg(this,e)};r.prototype.toJS=function(){return new Set(this)};r.prototype.toString=function(){return this.name+"[ "+Ia(this.keys()).join(", ")+" ]"};return r}();DD(Zx.prototype,function(){return this.values()});Og(Zx.prototype,OD(),"Set");tu=eu("ObservableSet",Zx);Zj=function(){function r(e,t,i){this.target=e;this.name=t;this.defaultEnhancer=i;this.values={}}r.prototype.read=function(e,t){if(this.target!==e){this.illegalAccess(e,t);if(!this.values[t])return void 0}return this.values[t].get()};r.prototype.write=function(e,t,i){var o=this.target;if(o!==e){this.illegalAccess(e,t)}var n=this.values[t];if(n instanceof Jl){n.set(i);return}if(ms(this)){var s=hs(this,{type:"update",object:o,name:t,newValue:i});if(!s)return;i=s.newValue}i=n.prepareNewValue(i);if(i!==_e.UNCHANGED){var a=Cn(this);var l=Ur();var s=a||l?{type:"update",object:o,oldValue:n.value,name:t,newValue:i}:null;if(l)vn(jt(jt({},s),{name:this.name,key:t}));n.setNewValue(i);if(a)Sn(this,s);if(l)xn()}};r.prototype.remove=function(e){if(!this.values[e])return;var t=this.target;if(ms(this)){var i=hs(this,{object:t,name:e,type:"remove"});if(!i)return}try{ka();var o=Cn(this);var n=Ur();var s=this.values[e].get();if(this.keys)this.keys.remove(e);delete this.values[e];delete this.target[e];var i=o||n?{type:"remove",object:t,oldValue:s,name:e}:null;if(n)vn(jt(jt({},i),{name:this.name,key:e}));if(o)Sn(this,i);if(n)xn()}finally{Da()}};r.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")};r.prototype.observe=function(e,t){return Mg(this,e)};r.prototype.intercept=function(e){return Bg(this,e)};r.prototype.getKeys=function(){var e=this;if(this.keys===void 0){this.keys=new fs(Object.keys(this.values).filter(function(t){return e.values[t]instanceof Yl}),$x,"keys("+this.name+")",true)}return this.keys.slice()};return r}();Cj=Object.create(null);Sj=Object.create(null);WUe=eu("ObservableObjectAdministration",Zj);Tj=Object.prototype.toString;(function(){function r(){}if(r.name!=="testCodeMinification"&&false){var e=["process","env","NODE_ENV"].join(".");console.warn("[mobx] you are running a minified build, but '"+e+"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})();ND="$mobx";if(typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="object"){__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:PD,extras:{getDebugName:GUe},$mobx:ND})}if(false){act=false;Object.defineProperty(module.exports,"default",{enumerable:false,get:function(){if(!act){act=true;console.warn(`The MobX package does not have a default export. Use 'import { thing } from "mobx"' (recommended) or 'import * as mobx from "mobx"' instead."`)}return void 0}});["extras","Atom","BaseAtom","asFlat","asMap","asReference","asStructure","autorunAsync","createTranformer","expr","isModifierDescriptor","isStrictModeEnabled","map","useStrict","whyRun"].forEach(function(r){Object.defineProperty(module.exports,r,{enumerable:false,get:function(){It("'"+r+"' is no longer part of the public MobX api. Please consult the changelog to find out where this functionality went")},set:function(){}})})}});var e$;var t$=p(()=>{ze();e$=x("react");if(!e$.useState){throw new Error("mobx-react-lite requires React with Hooks support")}if(!PD){throw new Error("mobx-react-lite requires mobx at least version 4 to be available")}});var qD;var r$=p(()=>{qD=x("react-dom")});function HD(){var r=jUe((0,Lg.useState)(0),2),e=r[1];var t=(0,Lg.useCallback)(function(){e(function(i){return i+1})},[]);return t}function i$(r){if(typeof Symbol==="function"){return Symbol.for(r)}return"__$mobx-react "+r+"__"}function o$(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return $Ue}var Lg,jUe,$Ue;var Tm=p(()=>{Lg=x("react");jUe=function(r,e){var t=typeof Symbol==="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,n=[],s;try{while((e===void 0||e-- >0)&&!(o=i.next()).done)n.push(o.value)}catch(a){s={error:a}}finally{try{if(o&&!o.done&&(t=i["return"]))t.call(i)}finally{if(s)throw s.error}}return n};$Ue={}});function XUe(r){r()}function Qx(r){if(!r){r=XUe;if(false){console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")}}Yx({reactionScheduler:r});o$()[KUe]=true}var KUe;var WD=p(()=>{ze();Tm();KUe=i$("observerBatching")});function ys(){return YUe}var YUe;var e0=p(()=>{YUe=false});function n$(r){return BD(r)}var s$=p(()=>{ze()});function a$(r){var e={cleanAt:Date.now()+JUe,reaction:r};return e}function l$(){if(GD===void 0){GD=setTimeout(QUe,ZUe)}}function u$(r){zg.add(r);l$()}function c$(r){zg.delete(r)}function QUe(){GD=void 0;var r=Date.now();zg.forEach(function(e){var t=e.current;if(t){if(r>=t.cleanAt){t.reaction.dispose();e.current=null;zg.delete(e)}}});if(zg.size>0){l$()}}var JUe,ZUe,zg,GD;var d$=p(()=>{JUe=1e4;ZUe=1e4;zg=new Set});function VD(r){return function(){if(t0){r0.push(r)}else{r()}}}function jD(r){t0=true;r0=[];try{var e=r();t0=false;var t=r0.length>0?r0:void 0;p$.default.useLayoutEffect(function(){if(t){t.forEach(function(i){return i()})}},[t]);return e}finally{t0=false}}var p$,t0,r0;var $D=p(()=>{p$=v(x("react"));t0=false;r0=[]});function m$(r){return"observer"+r}function Im(r,e,t){if(e===void 0){e="observed"}if(t===void 0){t=e9e}if(ys()){return r()}var i=t.useForceUpdate||HD;var o=i();var n=VD(o);var s=i0.default.useRef(null);if(!s.current){var a=new Zl(m$(e),function(){if(l.mounted){n()}else{a.dispose();s.current=null}});var l=a$(a);s.current=l;u$(s)}var u=s.current.reaction;i0.default.useDebugValue(u,n$);i0.default.useEffect(function(){c$(s);if(s.current){s.current.mounted=true}else{s.current={reaction:new Zl(m$(e),function(){n()}),cleanAt:Infinity};n()}return function(){s.current.reaction.dispose();s.current=null}},[]);return jD(function(){var c;var d;u.track(function(){try{c=r()}catch(m){d=m}});if(d){throw d}return c})}var i0,e9e;var o0=p(()=>{ze();i0=v(x("react"));s$();d$();e0();Tm();$D();e9e={}});function XD(r,e){if(ys()){return r}var t=KD({forwardRef:false},e);var i=r.displayName||r.name;var o=function(s,a){return Im(function(){return r(s,a)},i)};o.displayName=i;var n;if(t.forwardRef){n=(0,Ug.memo)((0,Ug.forwardRef)(o))}else{n=(0,Ug.memo)(o)}r9e(r,n);n.displayName=i;return n}function r9e(r,e){Object.keys(r).forEach(function(t){if(!t9e[t]){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}})}var Ug,KD,t9e;var h$=p(()=>{Ug=x("react");e0();o0();KD=function(){KD=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o))r[o]=e[o]}return r};return KD.apply(this,arguments)};t9e={$$typeof:true,render:true,compare:true,type:true}});function Em(r){var e=r.children,t=r.render;var i=e||t;if(typeof i!=="function"){return null}return Im(i)}function f$(r,e,t,i,o){var n=e==="children"?"render":"children";var s=typeof r[e]==="function";var a=typeof r[n]==="function";if(s&&a){return new Error("MobX Observer: Do not use children and render in the same time in`"+t)}if(s||a){return null}return new Error("Invalid prop `"+o+"` of type `"+typeof r[e]+"` supplied to `"+t+"`, expected `function`.")}var g$=p(()=>{o0();Em.propTypes={children:f$,render:f$};Em.displayName="Observer"});var o9e;var YD=p(()=>{ze();o9e=v(x("react"));Tm()});var n9e;var y$=p(()=>{ze();n9e=v(x("react"));YD();Tm()});var JD=p(()=>{t$();r$();WD();e0();h$();o0();g$();Tm();YD();y$();$D();WD();Qx(qD.unstable_batchedUpdates)});function u9e(r){if(typeof Symbol==="function"){return Symbol(r)}var e="__$mobx-react "+r+" ("+b$+")";b$++;return e}function ru(r){if(!ZD[r]){ZD[r]=u9e(r)}return ZD[r]}function D$(r,e){if(_$(r,e))return true;if(typeof r!=="object"||r===null||typeof e!=="object"||e===null){return false}var t=Object.keys(r);var i=Object.keys(e);if(t.length!==i.length)return false;for(var o=0;o<t.length;o++){if(!Object.hasOwnProperty.call(e,t[o])||!_$(r[t[o]],e[t[o]])){return false}}return true}function _$(r,e){if(r===e){return r!==0||1/r===1/e}else{return r!==r&&e!==e}}function d9e(r,e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(r));Object.getOwnPropertyNames(r).forEach(function(i){if(!c9e[i]&&t.indexOf(i)===-1){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))}})}function Ra(r,e,t){if(!Object.hasOwnProperty.call(r,e)){Object.defineProperty(r,e,{enumerable:false,configurable:true,writable:true,value:t})}else{r[e]=t}}function p9e(r,e){var t=r[v$]=r[v$]||{};var i=t[e]=t[e]||{};i.locks=i.locks||0;i.methods=i.methods||[];return i}function x$(r,e){var t=this;for(var i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++){o[n-2]=arguments[n]}e.locks++;try{var s;if(r!==void 0&&r!==null){s=r.apply(this,o)}return s}finally{e.locks--;if(e.locks===0){e.methods.forEach(function(a){a.apply(t,o)})}}}function C$(r,e){var t=function i(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++){n[s]=arguments[s]}x$.call.apply(x$,[this,r,e].concat(n))};return t}function m9e(r,e,t){var i=p9e(r,e);if(i.methods.indexOf(t)<0){i.methods.push(t)}var o=Object.getOwnPropertyDescriptor(r,e);if(o&&o[O$]){return}var n=r[e];var s=R$(r,e,o?o.enumerable:void 0,i,n);Object.defineProperty(r,e,s)}function R$(r,e,t,i,o){var n;var s=C$(o,i);return n={},n[O$]=true,n.get=function a(){return s},n.set=function a(l){if(this===r){s=C$(l,i)}else{var u=R$(this,e,t,i,l);Object.defineProperty(this,e,u)}},n.configurable=true,n.enumerable=t,n}function h9e(r){var e=r.prototype;if(r[S$]){var t=eO(e);console.warn("The provided component class ("+t+") \n                has already been declared as an observer component.")}else{r[S$]=true}if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(r["__proto__"]!==er.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=w$;else if(e.shouldComponentUpdate!==w$)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}T$(e,"props");T$(e,"state");var i=e.render;e.render=function(){return f9e.call(this,i)};m9e(e,"componentWillUnmount",function(){var o;if(ys()===true)return;(o=this.render[QD])===null||o===void 0?void 0:o.dispose();this[A$]=true;if(!this.render[QD]){var n=eO(this);console.warn("The reactive render of an observer class component ("+n+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}});return r}function eO(r){return r.displayName||r.name||r.constructor&&(r.constructor.displayName||r.constructor.name)||"<component>"}function f9e(r){var e=this;if(ys()===true)return r.call(this);Ra(this,s0,false);Ra(this,n0,false);var t=eO(this);var i=r.bind(this);var o=false;var n=new Zl(t+".render()",function(){if(!o){o=true;if(e[A$]!==true){var a=true;try{Ra(e,n0,true);if(!e[s0])er.Component.prototype.forceUpdate.call(e);a=false}finally{Ra(e,n0,false);if(a)n.dispose()}}}});n["reactComponent"]=this;s[QD]=n;this.render=s;function s(){o=false;var a=void 0;var l=void 0;n.track(function(){try{l=Uj(false,i)}catch(u){a=u}});if(a){throw a}return l}return s.call(this)}function w$(r,e){if(ys()){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==e){return true}return!D$(this.props,r)}function T$(r,e){var t=ru("reactProp_"+e+"_valueHolder");var i=ru("reactProp_"+e+"_atomHolder");function o(){if(!this[i]){Ra(this,i,jx("reactive "+e))}return this[i]}Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function n(){var s=false;if(Bc&&Ea){s=Bc(true)}o.call(this).reportObserved();if(Bc&&Ea){Ea(s)}return this[t]},set:function n(s){if(!this[n0]&&!D$(this[t],s)){Ra(this,t,s);Ra(this,s0,true);o.call(this).reportChanged();Ra(this,s0,false)}else{Ra(this,t,s)}}})}function E(r){if(r["isMobxInjector"]===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(E$&&r["$$typeof"]===E$){throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.")}if(I$&&r["$$typeof"]===I$){var e=r["render"];if(typeof e!=="function")throw new Error("render property of ForwardRef was not a function");return(0,er.forwardRef)(function t(){var i=arguments;return(0,er.createElement)(Em,null,function(){return e.apply(void 0,i)})})}if(typeof r==="function"&&(!r.prototype||!r.prototype.render)&&!r["isReactClass"]&&!Object.prototype.isPrototypeOf.call(er.Component,r)){return XD(r)}return h9e(r)}function a0(){a0=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){r[i]=t[i]}}}return r};return a0.apply(this,arguments)}function g9e(r,e){if(r==null)return{};var t={};var i=Object.keys(r);var o,n;for(n=0;n<i.length;n++){o=i[n];if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function qg(r){var e=r.children,t=g9e(r,["children"]);var i=er.default.useContext(Ng);var o=er.default.useRef(a0({},i,t));var n=o.current;if(false){var s=a0({},n,t);if(!D$(n,s)){throw new Error("MobX Provider: The set of provided stores has changed. See: https://github.com/mobxjs/mobx-react#the-set-of-provided-stores-has-changed-error.")}}return er.default.createElement(Ng.Provider,{value:n},e)}function k$(r,e,t,i){var o=er.default.forwardRef(function(n,s){var a=a0({},n);var l=er.default.useContext(Ng);Object.assign(a,r(l||{},a)||{});if(s){a.ref=s}return er.default.createElement(e,a)});if(i)o=E(o);o["isMobxInjector"]=true;d9e(e,o);o["wrappedComponent"]=e;o.displayName=y9e(e,t);return o}function y9e(r,e){var t;var i=r.displayName||r.name||r.constructor&&r.constructor.name||"Component";if(e)t="inject-with-"+e+"("+i+")";else t="inject("+i+")";return t}function b9e(r){return function(e,t){r.forEach(function(i){if(i in t)return;if(!(i in e))throw new Error("MobX injector: Store '"+i+"' is not available! Make sure it is provided by some Provider");t[i]=e[i]});return t}}function me(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++){e[t]=arguments[t]}if(typeof arguments[0]==="function"){var i=arguments[0];return function(o){return k$(i,o,i.name,true)}}else{return function(o){return k$(b9e(e),o,e.join("-"),false)}}}var er,b$,ZD,c9e,v$,O$,QD,S$,A$,s0,n0,F$,I$,E$,Ng;var L=p(()=>{ze();er=v(x("react"));JD();JD();b$=0;ZD={};c9e={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};v$=ru("patchMixins");O$=ru("patchedDefinition");QD=ND||"$mobx";S$=ru("isMobXReactObserver");A$=ru("isUnmounted");s0=ru("skipRender");n0=ru("isForcingUpdate");F$=typeof Symbol==="function"&&Symbol.for;I$=F$?Symbol.for("react.forward_ref"):typeof er.forwardRef==="function"&&(0,er.forwardRef)(function(r){return null})["$$typeof"];E$=F$?Symbol.for("react.memo"):typeof er.memo==="function"&&(0,er.memo)(function(r){return null})["$$typeof"];Ng=er.default.createContext({});qg.displayName="MobXProvider";if(!er.Component)throw new Error("mobx-react requires React to be available");if(!ae)throw new Error("mobx-react requires mobx to be available")});var P$,l0;var tO=p(()=>{P$=x("styled-components");l0=P$.keyframes`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`});var B$,M$;var L$=p(()=>{B$=x("styled-components");M$=B$.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`});var z$,u0;var U$=p(()=>{z$=x("styled-components");u0=z$.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`});var rO=p(()=>{tO();L$();U$()});var Ho;var km=p(()=>{Ho=[]});var N$;var q$=p(()=>{km();N$=function(){return Ho.some(function(r){return r.activeTargets.length>0})}});var H$;var W$=p(()=>{km();H$=function(){return Ho.some(function(r){return r.skippedTargets.length>0})}});var G$,V$;var j$=p(()=>{G$="ResizeObserver loop completed with undelivered notifications.";V$=function(){var r;if(typeof ErrorEvent==="function"){r=new ErrorEvent("error",{message:G$})}else{r=document.createEvent("Event");r.initEvent("error",false,false);r.message=G$}window.dispatchEvent(r)}});var Lc;var iO=p(()=>{(function(r){r["BORDER_BOX"]="border-box";r["CONTENT_BOX"]="content-box";r["DEVICE_PIXEL_CONTENT_BOX"]="device-pixel-content-box"})(Lc||(Lc={}))});var oO;var $$=p(()=>{oO=function(){function r(e,t,i,o){this.x=e;this.y=t;this.width=i;this.height=o;this.top=this.y;this.left=this.x;this.bottom=this.top+this.height;this.right=this.left+this.width;return Object.freeze(this)}r.prototype.toJSON=function(){var e=this,t=e.x,i=e.y,o=e.top,n=e.right,s=e.bottom,a=e.left,l=e.width,u=e.height;return{x:t,y:i,top:o,right:n,bottom:s,left:a,width:l,height:u}};r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)};return r}()});var Hg,c0,nO,K$;var Wg=p(()=>{Hg=function(r){return r instanceof SVGElement&&"getBBox"in r};c0=function(r){if(Hg(r)){var e=r.getBBox(),t=e.width,i=e.height;return!t&&!i}var o=r,n=o.offsetWidth,s=o.offsetHeight;return!(n||s||r.getClientRects().length)};nO=function(r){var e,t;var i=(t=(e=r)===null||e===void 0?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(i&&r instanceof i.Element)};K$=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image"){break}case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return true}return false}});var zc;var sO=p(()=>{zc=typeof window!=="undefined"?window:{}});var d0,X$,_9e,v9e,bs,Dm,Y$,aO,p0;var m0=p(()=>{iO();$$();Wg();sO();d0=new WeakMap;X$=/auto|scroll/;_9e=/^tb|vertical/;v9e=/msie|trident/i.test(zc.navigator&&zc.navigator.userAgent);bs=function(r){return parseFloat(r||"0")};Dm=function(r,e,t){if(r===void 0){r=0}if(e===void 0){e=0}if(t===void 0){t=false}return Object.freeze({inlineSize:(t?e:r)||0,blockSize:(t?r:e)||0})};Y$=Object.freeze({devicePixelContentBoxSize:Dm(),borderBoxSize:Dm(),contentBoxSize:Dm(),contentRect:new oO(0,0,0,0)});aO=function(r,e){if(e===void 0){e=false}if(d0.has(r)&&!e){return d0.get(r)}if(c0(r)){d0.set(r,Y$);return Y$}var t=getComputedStyle(r);var i=Hg(r)&&r.ownerSVGElement&&r.getBBox();var o=!v9e&&t.boxSizing==="border-box";var n=_9e.test(t.writingMode||"");var s=!i&&X$.test(t.overflowY||"");var a=!i&&X$.test(t.overflowX||"");var l=i?0:bs(t.paddingTop);var u=i?0:bs(t.paddingRight);var c=i?0:bs(t.paddingBottom);var d=i?0:bs(t.paddingLeft);var m=i?0:bs(t.borderTopWidth);var h=i?0:bs(t.borderRightWidth);var f=i?0:bs(t.borderBottomWidth);var b=i?0:bs(t.borderLeftWidth);var _=d+u;var y=l+c;var I=b+h;var T=m+f;var D=!a?0:r.offsetHeight-T-r.clientHeight;var P=!s?0:r.offsetWidth-I-r.clientWidth;var k=o?_+I:0;var A=o?y+T:0;var Q=i?i.width:bs(t.width)-k-P;var R=i?i.height:bs(t.height)-A-D;var M=Q+_+P+I;var oe=R+y+D+T;var ce=Object.freeze({devicePixelContentBoxSize:Dm(Math.round(Q*devicePixelRatio),Math.round(R*devicePixelRatio),n),borderBoxSize:Dm(M,oe,n),contentBoxSize:Dm(Q,R,n),contentRect:new oO(d,l,Q,R)});d0.set(r,ce);return ce};p0=function(r,e,t){var i=aO(r,t),o=i.borderBoxSize,n=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(e){case Lc.DEVICE_PIXEL_CONTENT_BOX:return s;case Lc.BORDER_BOX:return o;default:return n}}});var lO;var uO=p(()=>{m0();lO=function(){function r(e){var t=aO(e);this.target=e;this.contentRect=t.contentRect;this.borderBoxSize=[t.borderBoxSize];this.contentBoxSize=[t.contentBoxSize];this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]}return r}()});var h0;var cO=p(()=>{Wg();h0=function(r){if(c0(r)){return Infinity}var e=0;var t=r.parentNode;while(t){e+=1;t=t.parentNode}return e}});var J$;var Z$=p(()=>{km();uO();cO();m0();J$=function(){var r=Infinity;var e=[];Ho.forEach(function n(s){if(s.activeTargets.length===0){return}var a=[];s.activeTargets.forEach(function l(u){var c=new lO(u.target);var d=h0(u.target);a.push(c);u.lastReportedSize=p0(u.target,u.observedBox);if(d<r){r=d}});e.push(function l(){s.callback.call(s.observer,a,s.observer)});s.activeTargets.splice(0,s.activeTargets.length)});for(var t=0,i=e;t<i.length;t++){var o=i[t];o()}return r}});var dO;var Q$=p(()=>{km();cO();dO=function(r){Ho.forEach(function e(t){t.activeTargets.splice(0,t.activeTargets.length);t.skippedTargets.splice(0,t.skippedTargets.length);t.observationTargets.forEach(function i(o){if(o.isActive()){if(h0(o.target)>r){t.activeTargets.push(o)}else{t.skippedTargets.push(o)}}})})}});var eK;var tK=p(()=>{q$();W$();j$();Z$();Q$();eK=function(){var r=0;dO(r);while(N$()){r=J$();dO(r)}if(H$()){V$()}return r>0}});var pO,rK,x9e,iK;var oK=p(()=>{rK=[];x9e=function(){return rK.splice(0).forEach(function(r){return r()})};iK=function(r){if(!pO){var e=0;var t=document.createTextNode("");var i={characterData:true};new MutationObserver(function(){return x9e()}).observe(t,i);pO=function(){t.textContent=""+(e?e--:e++)}}rK.push(r);pO()}});var nK;var sK=p(()=>{oK();nK=function(r){iK(function e(){requestAnimationFrame(r)})}});var f0,C9e,S9e,w9e,aK,lK,mO,T9e,g0,hO;var uK=p(()=>{tK();sO();sK();f0=0;C9e=function(){return!!f0};S9e=250;w9e={attributes:true,characterData:true,childList:true,subtree:true};aK=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"];lK=function(r){if(r===void 0){r=0}return Date.now()+r};mO=false;T9e=function(){function r(){var e=this;this.stopped=true;this.listener=function(){return e.schedule()}}r.prototype.run=function(e){var t=this;if(e===void 0){e=S9e}if(mO){return}mO=true;var i=lK(e);nK(function(){var o=false;try{o=eK()}finally{mO=false;e=i-lK();if(!C9e()){return}if(o){t.run(1e3)}else if(e>0){t.run(e)}else{t.start()}}})};r.prototype.schedule=function(){this.stop();this.run()};r.prototype.observe=function(){var e=this;var t=function(){return e.observer&&e.observer.observe(document.body,w9e)};document.body?t():zc.addEventListener("DOMContentLoaded",t)};r.prototype.start=function(){var e=this;if(this.stopped){this.stopped=false;this.observer=new MutationObserver(this.listener);this.observe();aK.forEach(function(t){return zc.addEventListener(t,e.listener,true)})}};r.prototype.stop=function(){var e=this;if(!this.stopped){this.observer&&this.observer.disconnect();aK.forEach(function(t){return zc.removeEventListener(t,e.listener,true)});this.stopped=true}};return r}();g0=new T9e;hO=function(r){!f0&&r>0&&g0.start();f0+=r;!f0&&g0.stop()}});var I9e,cK;var dK=p(()=>{iO();m0();Wg();I9e=function(r){return!Hg(r)&&!K$(r)&&getComputedStyle(r).display==="inline"};cK=function(){function r(e,t){this.target=e;this.observedBox=t||Lc.CONTENT_BOX;this.lastReportedSize={inlineSize:0,blockSize:0}}r.prototype.isActive=function(){var e=p0(this.target,this.observedBox,true);if(I9e(this.target)){this.lastReportedSize=e}if(this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize){return true}return false};return r}()});var pK;var mK=p(()=>{pK=function(){function r(e,t){this.activeTargets=[];this.skippedTargets=[];this.observationTargets=[];this.observer=e;this.callback=t}return r}()});var y0,hK,Gg;var fK=p(()=>{uK();dK();mK();km();y0=new WeakMap;hK=function(r,e){for(var t=0;t<r.length;t+=1){if(r[t].target===e){return t}}return-1};Gg=function(){function r(){}r.connect=function(e,t){var i=new pK(e,t);y0.set(e,i)};r.observe=function(e,t,i){var o=y0.get(e);var n=o.observationTargets.length===0;if(hK(o.observationTargets,t)<0){n&&Ho.push(o);o.observationTargets.push(new cK(t,i&&i.box));hO(1);g0.schedule()}};r.unobserve=function(e,t){var i=y0.get(e);var o=hK(i.observationTargets,t);var n=i.observationTargets.length===1;if(o>=0){n&&Ho.splice(Ho.indexOf(i),1);i.observationTargets.splice(o,1);hO(-1)}};r.disconnect=function(e){var t=this;var i=y0.get(e);i.observationTargets.slice().forEach(function(o){return t.unobserve(e,o.target)});i.activeTargets.splice(0,i.activeTargets.length)};return r}()});var Uc;var gK=p(()=>{fK();Wg();Uc=function(){function r(e){if(arguments.length===0){throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.")}if(typeof e!=="function"){throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.")}Gg.connect(this,e)}r.prototype.observe=function(e,t){if(arguments.length===0){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!nO(e)){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element")}Gg.observe(this,e,t)};r.prototype.unobserve=function(e){if(arguments.length===0){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!nO(e)){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element")}Gg.unobserve(this,e)};r.prototype.disconnect=function(){Gg.disconnect(this)};r.toString=function(){return"function ResizeObserver () { [polyfill code] }"};return r}()});var b0=p(()=>{gK();uO()});var Om=C((mpt,_K)=>{var E9e="Expected a function";var yK=0/0;var k9e="[object Symbol]";var D9e=/^\s+|\s+$/g;var O9e=/^[-+]0x[0-9a-f]+$/i;var R9e=/^0b[01]+$/i;var A9e=/^0o[0-7]+$/i;var F9e=parseInt;var P9e=typeof global=="object"&&global&&global.Object===Object&&global;var B9e=typeof self=="object"&&self&&self.Object===Object&&self;var M9e=P9e||B9e||Function("return this")();var L9e=Object.prototype;var z9e=L9e.toString;var U9e=Math.max;var N9e=Math.min;var fO=function(){return M9e.Date.now()};function q9e(r,e,t){var i,o,n,s,a,l,u=0,c=false,d=false,m=true;if(typeof r!="function"){throw new TypeError(E9e)}e=bK(e)||0;if(gO(t)){c=!!t.leading;d="maxWait"in t;n=d?U9e(bK(t.maxWait)||0,e):n;m="trailing"in t?!!t.trailing:m}function h(k){var A=i,Q=o;i=o=void 0;u=k;s=r.apply(Q,A);return s}function f(k){u=k;a=setTimeout(y,e);return c?h(k):s}function b(k){var A=k-l,Q=k-u,R=e-A;return d?N9e(R,n-Q):R}function _(k){var A=k-l,Q=k-u;return l===void 0||A>=e||A<0||d&&Q>=n}function y(){var k=fO();if(_(k)){return I(k)}a=setTimeout(y,b(k))}function I(k){a=void 0;if(m&&i){return h(k)}i=o=void 0;return s}function T(){if(a!==void 0){clearTimeout(a)}u=0;i=l=o=a=void 0}function D(){return a===void 0?s:I(fO())}function P(){var k=fO(),A=_(k);i=arguments;o=this;l=k;if(A){if(a===void 0){return f(l)}if(d){a=setTimeout(y,e);return h(l)}}if(a===void 0){a=setTimeout(y,e)}return s}P.cancel=T;P.flush=D;return P}function gO(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function H9e(r){return!!r&&typeof r=="object"}function W9e(r){return typeof r=="symbol"||H9e(r)&&z9e.call(r)==k9e}function bK(r){if(typeof r=="number"){return r}if(W9e(r)){return yK}if(gO(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=gO(e)?e+"":e}if(typeof r!="string"){return r===0?r:+r}r=r.replace(D9e,"");var t=R9e.test(r);return t||A9e.test(r)?F9e(r.slice(2),t?2:8):O9e.test(r)?yK:+r}_K.exports=q9e});var vK,$t;var co=p(()=>{vK=v(x("react"));$t=vK.default.createContext({})});var xK=p(()=>{});var st;var wn=p(()=>{st=r=>{if(r){r.width=1;r.height=1;const e=r.getContext("2d");if(e){e.clearRect(0,0,1,1)}}}});var Vg,po,Mt,CK,SK,wK,TK;var yO=p(()=>{wn();Vg=()=>{return typeof window!=="undefined"&&window.navigator&&window.navigator.userAgent||""};po=(r=Vg())=>{return r.indexOf("Edge")!==-1};Mt=(r=Vg())=>{return!!r.match(/msie|trident/i)};CK=(r=Vg())=>{return!!r.match(/windows/i)};SK=(r=Vg())=>{return r.indexOf("Safari")!==-1&&r.indexOf("Chrome")===-1};wK=(r=Vg())=>{return!!r.match(/iP(hone|od|ad)|AppleWebKit/)};TK=()=>{if(typeof document==="undefined"){return false}const r=document.createElement("canvas");const e=r.getContext("webgl")||r.getContext("experimental-webgl");const t=e&&e instanceof WebGLRenderingContext;st(r);return t}});var G9e,IK;var EK=p(()=>{G9e=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g);IK=r=>r.replace(G9e,"")});var _s;var bO=p(()=>{_s=r=>{try{new URL(r);return true}catch(e){return false}}});var kK;var _O=p(()=>{kK=r=>{return r instanceof HTMLImageElement}});function V9e(r){return!Object.prototype.hasOwnProperty.call(r,"name")}function j9e(r){return!Object.prototype.hasOwnProperty.call(r,"name")}var DK=p(()=>{});var Tn;var jg=p(()=>{Tn=(d=>{d["UNDO"]="undo";d["REDO"]="redo";d["DELETE"]="delete";d["BRING_TO_FRONT"]="bringtofront";d["EDIT"]="edit";d["DUPLICATE"]="duplicate";d["ADD"]="add";d["FLIP"]="flip";d["INVERT"]="invert";d["CLOSE"]="close";d["EXPORT"]="export";return d})(Tn||{})});var $;var vO=p(()=>{$=(m=>{m["LIBRARY"]="library";m["TRANSFORM"]="transform";m["FILTER"]="filter";m["ADJUSTMENT"]="adjustment";m["FOCUS"]="focus";m["STICKER"]="sticker";m["TEXT"]="text";m["TEXT_DESIGN"]="textdesign";m["OVERLAY"]="overlay";m["FRAME"]="frame";m["BRUSH"]="brush";m["CUSTOM"]="customTool";return m})($||{})});var OK=p(()=>{});var RK=p(()=>{});var AK=p(()=>{});var FK=p(()=>{});var vs;var Rm=p(()=>{vs=(t=>{t["TEXT"]="text";t["CARD"]="card";return t})(vs||{})});var PK=p(()=>{});var BK=p(()=>{});var ir;var MK=p(()=>{ir=(i=>{i["LARGE"]="large";i["MEDIUM"]="medium";i["SMALL"]="small";return i})(ir||{})});var LK=p(()=>{});var zK=p(()=>{});var UK=p(()=>{});var NK=p(()=>{});var qK=p(()=>{});var HK=p(()=>{});var WK=p(()=>{});var GK=p(()=>{});var VK=p(()=>{});var jK=p(()=>{});var $K=p(()=>{});var KK=p(()=>{});var XK=p(()=>{});var YK=p(()=>{});var xs;var JK=p(()=>{xs=(o=>{o["ERROR"]="error";o["WARNING"]="warning";o["INFO"]="info";o["TEXT_EDIT"]="textEdit";return o})(xs||{})});var ZK=p(()=>{});var QK=p(()=>{});var eX=p(()=>{});var tX=p(()=>{});var rX=p(()=>{});var fr;var iX=p(()=>{fr=(u=>{u["BrushSize"]="brush-size";u["BrushHardness"]="brush-hardness";u["FilterIntensity"]="filter-intensity";u["TextLineSpacing"]="text-line-spacing";u["StickerOpacity"]="sticker-opacity";u["OverlayOpacity"]="overlay-opacity";u["FrameSize"]="frame-size";u["FrameOpacity"]="frame-opacity";u["FocusIntensity"]="focus-intensity";return u})(fr||{})});var oX=p(()=>{});var nX=p(()=>{});var sX=p(()=>{});var aX=p(()=>{});var lX=p(()=>{});var uX=p(()=>{});var cX=p(()=>{});var dX,pX,_0;var mX=p(()=>{dX=class{constructor(){this.enabled=true;this.threshold=20;this.snapToHorizontalCenter=true;this.snapToVerticalCenter=true;this.snapToLeft=.1;this.snapToRight=.1;this.snapToTop=.1;this.snapToBottom=.1}};pX=class{constructor(){this.enabled=true;this.threshold=20;this.angles=[0,45,90,135,180,225,270,315]}};_0=class{constructor(){this.position=new dX;this.rotation=new pX}}});var hX,v0;var fX=p(()=>{hX=(n=>{n["CENTER"]="center";n["TOP_LEFT"]="top-left";n["TOP_RIGHT"]="top-right";n["BOTTOM_LEFT"]="bottom-left";n["BOTTOM_RIGHT"]="bottom-right";return n})(hX||{});v0=class{constructor(){this.watermarkURI="";this.alignment="top-right";this.inset=.05;this.size=.2}}});var gX,yX;var bX=p(()=>{gX=(e=>{e["OBJECT"]="object";return e})(gX||{});yX=class{}});var Nc;var _X=p(()=>{Nc=(o=>{o["IMAGE"]="image";o["DATA_URL"]="data-url";o["BLOB"]="blob";o["MSBLOB"]="ms-blob";return o})(Nc||{})});var Cs;var vX=p(()=>{Cs=(t=>{t["PNG"]="image/png";t["JPEG"]="image/jpeg";return t})(Cs||{})});var $g;var xX=p(()=>{$g=(l=>{l["BMP"]="image/bmp";l["GIF"]="image/gif";l["ICO"]="image/x-icon";l["JPEG"]="image/jpeg";l["PNG"]="image/png";l["SVG"]="image/svg+xml";l["TIFF"]="image/tiff";l["WEBP"]="image/webp";return l})($g||{})});var CX=p(()=>{});var SX=p(()=>{});var wX=p(()=>{});var TX=p(()=>{});var IX;var EX=p(()=>{vO();IX=class{constructor(){this.order="default";this.language="en";this.theme="dark";this.assetBaseUrl="assets/";this.assetResolver={};this.displayResizeWarning=false;this.displayCloseWarning=true;this.displayDiscardChangesWarning=true;this.displayCanvasRendererWarning=true;this.displayToolControlBarTitle=true;this.displaySerializationModal=true;this.forceCrop=false;this.enableZoom=true;this.scaleImageToFit=true;this.restrictZoomOutToDefault=true;this.defaultTool="filter"}};"filter","focus","adjustment","library","overlay","sticker","text","textdesign","frame","brush","transform","customTool"});var kX=p(()=>{});var Am,xO;var DX=p(()=>{Am=(m=>{m["BRIGHTNESS"]="brightness";m["CONTRAST"]="contrast";m["SATURATION"]="saturation";m["CLARITY"]="clarity";m["SHADOWS"]="shadows";m["HIGHLIGHTS"]="highlights";m["EXPOSURE"]="exposure";m["GAMMA"]="gamma";m["BLACKS"]="blacks";m["WHITES"]="whites";m["TEMPERATURE"]="temperature";m["SHARPNESS"]="sharpness";return m})(Am||{});xO=Object.values(Am).reduce((r,e)=>{r[e]=true;return r},{})});var CO,x0;var OX=p(()=>{CO=(o=>{o["RemoveAdjustmentButton"]="removeAdjustmentButton";o["Expandable"]="expandable";o["Separator"]="separator";o["Items"]="items";return o})(CO||{});x0=class{constructor(){this.categories=[];this.flattenCategories=false;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeAdjustmentButton","separator"]},"items"]}}});var RX=p(()=>{});var AX=p(()=>{DX();OX();RX()});var FX;var PX=p(()=>{FX=class{}});var SO,wO,C0;var BX=p(()=>{Rm();SO=(n=>{n["RemoveFilterButton"]="removeFilterButton";n["FilterIntensitySlider"]="filterIntensitySlider";n["Expandable"]="expandable";n["Separator"]="separator";n["Items"]="items";return n})(SO||{});wO=(e=>{e["FilterIntensity"]="filterIntensity";return e})(wO||{});C0=class{constructor(){this.categories=[];this.flattenCategories=false;this.categoryHeaderType="card";this.enablePreviewThumbnails=false;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFilterButton","filterIntensitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["filterIntensity"]}}});function Fm(r){return r.lightColor!==void 0}function TO(r){return r.lutURI!==void 0}var MX=p(()=>{});var Kg,Xg;var LX=p(()=>{Kg=(xe=>{xe["Desert"]="imgly_duotone_desert";xe["Peach"]="imgly_duotone_peach";xe["Clash"]="imgly_duotone_clash";xe["Plum"]="imgly_duotone_plum";xe["Breezy"]="imgly_duotone_breezy";xe["DeepBlue"]="imgly_duotone_deepblue";xe["Frog"]="imgly_duotone_frog";xe["Sunset"]="imgly_duotone_sunset";xe["AD1920"]="imgly_lut_ad1920";xe["Greyed"]="imgly_lut_bw";xe["Dusty"]="imgly_lut_x400";xe["Litho"]="imgly_lut_litho";xe["Sepia"]="imgly_lut_sepiahigh";xe["Weathered"]="imgly_lut_plate";xe["HardStuff"]="imgly_lut_sin";xe["Polaroid"]="imgly_lut_blues";xe["Sunny70s"]="imgly_lut_front";xe["Oldtimer"]="imgly_lut_texas";xe["Inferno"]="imgly_lut_celsius";xe["Snappy"]="imgly_lut_cool";xe["Chestnut"]="imgly_lut_chest";xe["Softy"]="imgly_lut_winter";xe["Pebble"]="imgly_lut_kdynamic";xe["Moss"]="imgly_lut_fall";xe["Lemon"]="imgly_lut_lenin";xe["GreenGap"]="imgly_lut_pola669";xe["Colla"]="imgly_lut_elder";xe["Solanus"]="imgly_lut_orchid";xe["Kalmen"]="imgly_lut_bleached";xe["Joran"]="imgly_lut_bleachedblue";xe["Levante"]="imgly_lut_breeze";xe["Zephyr"]="imgly_lut_blueshadows";xe["Golden"]="imgly_lut_sunset";xe["LowFire"]="imgly_lut_eighties";xe["Sunrise"]="imgly_lut_evening";xe["FlatBlack"]="imgly_lut_k2";xe["Pumpkin"]="imgly_lut_nogreen";xe["Ancient"]="imgly_lut_ancient";xe["Candy"]="imgly_lut_cottoncandy";xe["Classic"]="imgly_lut_classic";xe["Colorful"]="imgly_lut_colorful";xe["Creamy"]="imgly_lut_creamy";xe["Fixie"]="imgly_lut_fixie";xe["Food"]="imgly_lut_food";xe["Fridge"]="imgly_lut_fridge";xe["Glam"]="imgly_lut_glam";xe["Gobblin"]="imgly_lut_gobblin";xe["Hicon"]="imgly_lut_highcontrast";xe["HighCarb"]="imgly_lut_highcarb";xe["K1"]="imgly_lut_k1";xe["K6"]="imgly_lut_k6";xe["Keen"]="imgly_lut_keen";xe["Lomo"]="imgly_lut_lomo";xe["Lomo100"]="imgly_lut_lomo100";xe["Lucid"]="imgly_lut_lucid";xe["Mellow"]="imgly_lut_mellow";xe["Neat"]="imgly_lut_neat";xe["Pale"]="imgly_lut_pale";xe["Pitched"]="imgly_lut_pitched";xe["PolaSX"]="imgly_lut_polasx";xe["Pro400"]="imgly_lut_pro400";xe["Quozi"]="imgly_lut_quozi";xe["Settled"]="imgly_lut_settled";xe["Seventies"]="imgly_lut_seventies";xe["Soft"]="imgly_lut_soft";xe["Steel"]="imgly_lut_steel";xe["Summer"]="imgly_lut_summer";xe["Tender"]="imgly_lut_tender";xe["Twilight"]="imgly_lut_twilight";return xe})(Kg||{});Xg=(a=>{a["DuoTone"]="imgly_filter_category_duotone";a["BW"]="imgly_filter_category_bw";a["Vintage"]="imgly_filter_category_vintage";a["Smooth"]="imgly_filter_category_smooth";a["Cold"]="imgly_filter_category_cold";a["Warm"]="imgly_filter_category_warm";a["Legacy"]="imgly_filter_category_legacy";return a})(Xg||{})});var zX=p(()=>{BX();MX();LX()});var IO,UX,S0;var NX=p(()=>{IO=(n=>{n["RemoveFocusButton"]="removeFocusButton";n["FocusIntensitySlider"]="focusIntensitySlider";n["Expandable"]="expandable";n["Separator"]="separator";n["Items"]="items";return n})(IO||{});UX=(e=>{e["FocusIntensity"]="focusIntensity";return e})(UX||{});S0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFocusButton","focusIntensitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["focusIntensity"]}}});var qX=p(()=>{});var Aa;var HX=p(()=>{Aa=(o=>{o["RADIAL"]="radial";o["LINEAR"]="linear";o["MIRRORED"]="mirrored";o["GAUSSIAN"]="gaussian";return o})(Aa||{})});var WX=p(()=>{NX();qX();HX()});var EO,kO,w0;var GX=p(()=>{EO=(a=>{a["RemoveFrameButton"]="removeFrameButton";a["FrameOpacitySlider"]="frameOpacitySlider";a["FrameSizeSlider"]="frameSizeSlider";a["FrameColorList"]="frameColorList";a["Separator"]="separator";a["Items"]="items";a["Expandable"]="expandable";return a})(EO||{});kO=(i=>{i["FrameSize"]="frameSize";i["FrameOpacity"]="frameOpacity";i["FrameColor"]="frameColor";return i})(kO||{});w0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFrameButton","frameOpacitySlider","frameSizeSlider","frameColorList","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["frameOpacity","frameSize","frameColor"]}}});var VX=p(()=>{});var jX=p(()=>{GX();VX()});var T0;var DO=p(()=>{T0=class{constructor(e){this.name=e.name;this.coverImageUrl=e.coverImageUrl}loadCoverImage(e="anonymous"){return new Promise((t,i)=>{const o=new Image;o.addEventListener("load",()=>{t(o)});o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${this.coverImage}`))});o.crossOrigin=e;o.src=this.coverImageUrl;this.coverImage=o})}}});var I0;var OO=p(()=>{I0=class{constructor(e){this.title=e.title;this.category=e.category||e.title;this.thumbUrl=e.thumbUrl;this.rawUrl=e.rawUrl;this.authorName=e.authorName;this.authorAvatar=e.authorAvatar}loadThumbImage(e="anonymous"){return new Promise((t,i)=>{const o=new Image;o.addEventListener("load",()=>{t(o)});o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${this.thumbUrl}`))});o.crossOrigin=e;o.src=this.thumbUrl;this.thumbImage=o})}getThumbImage(){return this.thumbUrl}}});var E0;var $X=p(()=>{E0=class{getData(e){return new Promise((t,i)=>{const o=new XMLHttpRequest;o.open("GET",e,true);o.responseType="json";o.onload=()=>{const{status:n}=o;if(n===200){t(o.response)}else{i(new Error(`HTTP Status ${n}`))}};o.send()})}}});var k0;var RO=p(()=>{$X();k0=class{loadJSON(e){const t=new E0;return t.getData(e)}getCategories(){return Promise.resolve([])}searchImages(e){return Promise.resolve([])}}});var AO;var KX=p(()=>{DO();OO();RO();AO=class extends k0{loadData(){if(this.data){return Promise.resolve(this.data)}return this.loadJSON("https://img.ly/static/libraries/unsplash/metadata.json").then(e=>{if(typeof e==="string"){e=JSON.parse(e)}this.data=e;return e})}getCategories(){return this.loadData().then(e=>{return e.categories.map(t=>{return new T0({name:t.name,coverImageUrl:t.coverImage})})})}searchImages(e){return this.loadData().then(t=>{return t.images.filter(i=>{const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/);for(let n=0;n<o.length;n+=1){const s=o[n];const a=new RegExp(s,"i");if(!a.test(i.title)){return false}}return true}).map(i=>{return new I0(i)})})}}});var FO,D0;var XX=p(()=>{Rm();KX();FO=(n=>{n["UploadImageButton"]="uploadImageButton";n["OpenWebcamButton"]="openWebcamButton";n["SearchFieldInput"]="searchFieldInput";n["Separator"]="separator";n["Items"]="items";return n})(FO||{});D0=class{constructor(){this.enableWebcam=false;this.enableUpload=false;this.provider=AO;this.flattenCategories=false;this.categoryHeaderType="card";this.advancedUIToolControlBarOrder=["searchFieldInput","uploadImageButton","openWebcamButton","separator","items"]}}});var YX=p(()=>{DO();OO();XX();RO()});var PO,BO,O0;var JX=p(()=>{PO=(s=>{s["RemoveOverlayButton"]="removeOverlayButton";s["OverlayOpacitySlider"]="overlayOpacitySlider";s["OverlayBlendModeCarousel"]="overlayBlendModeCarousel";s["Expandable"]="expandable";s["Separator"]="separator";s["Items"]="items";return s})(PO||{});BO=(t=>{t["OverlayOpacity"]="overlayOpacity";t["OverlayBlendMode"]="overlayBlendMode";return t})(BO||{});O0=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeOverlayButton","overlayBlendModeCarousel","overlayOpacitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["overlayBlendMode","overlayOpacity"]}}});var ZX=p(()=>{});var Ss;var QX=p(()=>{Ss=(u=>{u["NORMAL"]="normal";u["OVERLAY"]="overlay";u["SOFT_LIGHT"]="softLight";u["HARD_LIGHT"]="hardLight";u["MULTIPLY"]="multiply";u["DARKEN"]="darken";u["COLOR_BURN"]="colorBurn";u["SCREEN"]="screen";u["LIGHTEN"]="lighten";return u})(Ss||{})});var Yg;var eY=p(()=>{Yg=(y=>{y["Bokeh"]="imgly_overlay_bokeh";y["Chop"]="imgly_overlay_chop";y["Clouds"]="imgly_overlay_clouds";y["Golden"]="imgly_overlay_golden";y["Grain"]="imgly_overlay_grain";y["Hearts"]="imgly_overlay_hearts";y["LightLeak1"]="imgly_overlay_lightleak1";y["LightLeak2"]="imgly_overlay_lightleak2";y["Metal"]="imgly_overlay_metal";y["Mosaic"]="imgly_overlay_mosaic";y["Painting"]="imgly_overlay_painting";y["Paper"]="imgly_overlay_paper";y["Rain"]="imgly_overlay_rain";y["Vintage"]="imgly_overlay_vintage";y["Wall1"]="imgly_overlay_wall1";y["Wall2"]="imgly_overlay_wall2";y["Wood"]="imgly_overlay_wood";return y})(Yg||{})});var tY=p(()=>{JX();ZX();QX();eY()});var MO,LO,R0;var rY=p(()=>{jg();Rm();MO=(n=>{n["UploadStickerButton"]="uploadStickerButton";n["StickerOpacitySlider"]="stickerOpacitySlider";n["StickerColorList"]="stickerColorList";n["Separator"]="separator";n["Items"]="items";return n})(MO||{});LO=(t=>{t["StickerColor"]="stickerColor";t["StickerOpacity"]="stickerOpacity";return t})(LO||{});R0=class{constructor(){this.categories=[];this.canvasActions=["bringtofront","flip","duplicate","delete"];this.flattenCategories=false;this.categoryHeaderType="card";this.enableCustomUpload=true;this.customStickerResizeMode="keepAspect";this.customStickerTintMode="none";this.advancedUIToolControlBarOrder=["uploadStickerButton","stickerOpacitySlider","stickerColorList","separator","items"];this.basicUIToolControlBarTabsOrder=["stickerColor","stickerOpacity"]}}});var iY=p(()=>{});var oY=p(()=>{rY();iY()});var zO,UO,A0;var nY=p(()=>{jg();zO=(u=>{u["NewTextButton"]="newTextButton";u["FontFamilyDropdown"]="fontFamilyDropdown";u["FontSizeInput"]="fontSizeInput";u["TextAligmentList"]="textAlignmentList";u["Separator"]="separator";u["Inline"]="inline";u["TextColorList"]="textColorList";u["BackgroundColorList"]="backgroundColorList";u["LineSpacingSlider"]="lineSpacingSlider";return u})(zO||{});UO=(n=>{n["FontSize"]="fontSize";n["TextAligment"]="textAlignment";n["TextColor"]="textColor";n["BackgroundColor"]="backgroundColor";n["LineSpacing"]="lineSpacing";return n})(UO||{});A0=class{constructor(){this.fonts=[];this.canvasActions=["edit","bringtofront","duplicate","delete"];this.allowEmojis=false;this.disableAutoScaling=false;this.addDefaultTextOnEnter=true;this.advancedUIToolControlBarOrder=["newTextButton","fontFamilyDropdown",{type:"inline",children:["fontSizeInput","textAlignmentList"]},"separator","textColorList","backgroundColorList","separator","lineSpacingSlider"];this.basicUIToolControlBarTabsOrder=["fontSize","textAlignment","textColor","backgroundColor","lineSpacing"]}}});function NO(r){return r.provider===void 0||r.provider==="file"}function qO(r){return r.provider==="google"}var sY=p(()=>{});var aY=p(()=>{});var lY=p(()=>{nY();sY();aY()});var HO,WO,F0;var uY=p(()=>{HO=(s=>{s["RemoveBrushButton"]="removeBrushButton";s["BrushColorList"]="brushColorList";s["BrushSizeSlider"]="brushSizeSlider";s["BrushHardnessSlider"]="brushHardnessSlider";s["Expandable"]="expandable";s["Separator"]="separator";return s})(HO||{});WO=(i=>{i["BrushSize"]="brushSize";i["BrushHardness"]="brushHardness";i["BrushColor"]="brushColor";return i})(WO||{});F0=class{constructor(){this.defaultSize=.05;this.defaultHardness=.5;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeBrushButton","separator"]},"brushHardnessSlider","brushSizeSlider","brushColorList"];this.basicUIToolControlBarTabsOrder=["brushColor","brushSize","brushHardness"]}}});var cY=p(()=>{uY()});var GO,P0;var dY=p(()=>{jg();GO=(n=>{n["NewTextDesignButton"]="newTextDesignButton";n["ShuffleLayoutButton"]="shuffleLayoutButton";n["TextDesignColorList"]="textDesignColorList";n["Separator"]="separator";n["Items"]="items";return n})(GO||{});P0=class{constructor(){this.items=[];this.canvasActions=["edit","bringtofront","invert","duplicate","delete"];this.allowEmojis=false;this.addDefaultTextOnEnter=true;this.advancedUIToolControlBarOrder=["newTextDesignButton","shuffleLayoutButton","textDesignColorList","separator","items"]}}});var pY=p(()=>{});var mY=p(()=>{dY();pY()});var VO,jO,B0;var hY=p(()=>{Rm();VO=(n=>{n["ResetTransformButton"]="resetTransformButton";n["KeepResolutionCheckbox"]="keepResolutionCheckbox";n["CropSizeInput"]="cropSizeInput";n["Separator"]="separator";n["Items"]="items";return n})(VO||{});jO=(i=>{i["CropSize"]="cropSize";i["FlipRotate"]="flipRotate";i["Resolution"]="resolution";return i})(jO||{});B0=class{constructor(){this.categories=[];this.enableRotation=true;this.enableFlip=true;this.flattenCategories=false;this.categoryHeaderType="text";this.advancedUIToolControlBarOrder=["resetTransformButton","keepResolutionCheckbox","cropSizeInput","separator","items"];this.basicUIToolControlBarTabsOrder=["cropSize","flipRotate","resolution"]}}});var fY=p(()=>{});var $O;var gY=p(()=>{$O=(D=>{D["CommonCategory"]="imgly_transforms_common";D["FacebookCategory"]="imgly_transforms_facebook";D["TwitterCategory"]="imgly_transforms_twitter";D["InstagramCategory"]="imgly_transforms_instagram";D["Custom"]="imgly_transform_common_custom";D["Square"]="imgly_transform_common_square";D["ThreeByFour"]="imgly_transform_common_3";D["FourByThree"]="imgly_transform_common_4";D["NineBySixteen"]="imgly_transform_common_9";D["SixteenByNine"]="imgly_transform_common_16";D["FacebookPost"]="imgly_transform_facebook_post";D["FacebookProfile"]="imgly_transform_facebook_profile";D["FacebookTitle"]="imgly_transform_facebook_title";D["InstagramLandscape"]="imgly_transform_instagram_landscape";D["InstagramPortrait"]="imgly_transform_instagram_portrait";D["InstagramSquare"]="imgly_transform_instagram_square";D["InstagramStory"]="imgly_transform_instagram_story";D["TwitterPost"]="imgly_transform_twitter_post";D["TwitterProfile"]="imgly_transform_twitter_profile";D["TwitterTitle"]="imgly_transform_twitter_title";return D})($O||{})});var yY=p(()=>{hY();fY();gY()});var Jg;var bY=p(()=>{Jg=(m=>{m["EXPORT"]="export";m["CLOSE"]="close";m["HISTORY_UNDO"]="historyUndo";m["HISTORY_REDO"]="historyRedo";m["HISTORY_CHANGE"]="historyChange";m["EDITOR_READY"]="editorReady";m["ERROR_IMAGE_LOADING"]="errorImageLoading";m["IMAGE_LOAD"]="imageLoad";m["TOOL_ENTER"]="toolEnter";m["STICKER_UPLOAD_ADD"]="stickerUploadAdd";m["ERROR_WEBGL_CONTEXT_LOST"]="errorWebGLContextLost";m["CROP_DIMENSIONS_CHANGE"]="cropDimensionsChange";return m})(Jg||{})});var mo;var _Y=p(()=>{mo=class{constructor(){this.events={}}addListener(e,t){const i=this.events[e]||(this.events[e]=[]);i.push(t);return this}removeListener(e,t){const i=this.events[e];if(!i){return this}const o=i.lastIndexOf(t);if(o===-1){return this}i.splice(o,1);return this}removeAllListeners(e){this.events[e]=void 0;return this}on(e,t){return this.addListener(e,t)}off(e,t){return this.removeListener(e,t)}emit(e,...t){const i=this.events[e];if(!i||!i.length){return false}i.slice(0).forEach(o=>o.apply(null,t));return true}}});var vY=p(()=>{});var xY=p(()=>{});var B=p(()=>{DK();jg();vO();OK();RK();AK();FK();Rm();PK();BK();MK();LK();zK();UK();NK();qK();HK();WK();GK();VK();jK();$K();KK();XK();YK();JK();ZK();QK();eX();tX();rX();iX();oX();nX();sX();aX();lX();uX();cX();mX();fX();bX();_X();vX();xX();CX();SX();wX();TX();EX();kX();AX();PX();zX();WX();jX();YX();tY();oY();lY();cY();mY();yY();bY();_Y();vY();xY()});var $9e,M0;var CY=p(()=>{B();$9e=[{identifier:"basics",name:"Basics",items:[{identifier:"brightness"},{identifier:"contrast"},{identifier:"saturation"},{identifier:"gamma"}]},{identifier:"refinements",name:"Refinements",items:[{identifier:"clarity"},{identifier:"shadows"},{identifier:"highlights"},{identifier:"exposure"},{identifier:"blacks"},{identifier:"whites"},{identifier:"temperature"},{identifier:"sharpness"}]}];M0=$9e});var K9e,L0;var SY=p(()=>{B();K9e=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}];L0=K9e});var X9e,KO;var wY=p(()=>{B();X9e=[{identifier:"radial",thumbnailURI:"./items/radial.png"},{identifier:"mirrored",thumbnailURI:"./items/mirrored.png"},{identifier:"linear",thumbnailURI:"./items/linear.png"},{identifier:"gaussian",thumbnailURI:"./items/gaussian.png"}];KO=X9e});var Y9e,z0;var TY=p(()=>{Y9e=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_allison_regular",fontFamily:"Allison",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_allison_regular.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:890,descender:-380}},{identifier:"imgly_font_cookie_regular",fontFamily:"Cookie",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_cookie_regular.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:789,descender:-320}},{identifier:"imgly_font_lexend_bold",fontFamily:"Lexend",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_lexend_bold.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_outfit_bold",fontFamily:"Outfit",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_outfit_bold.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}];z0=Y9e});var IY,EY;var kY=p(()=>{IY=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lexend_bold","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_outfit_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"];EY=["imgly_font_abril_fatface_regular","imgly_font_allison_regular","imgly_font_bungee_inline","imgly_font_cookie_regular","imgly_font_handycheera_regular","imgly_font_lexend_bold","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_outfit_bold","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra"]});var J9e,U0;var DY=p(()=>{J9e=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:true,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}];U0=J9e});var Z9e,N0;var OY=p(()=>{B();Z9e=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:"softLight",overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}];N0=Z9e});var Q9e,q0;var RY=p(()=>{Q9e=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}];q0=Q9e});var eNe,AY;var FY=p(()=>{eNe=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];AY=eNe});var tNe,PY;var BY=p(()=>{tNe=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];PY=tNe});var rNe,H0;var MY=p(()=>{rNe=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:true,lockDimensions:true}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:true,lockDimensions:true}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:true,lockDimensions:true}]}];H0=rNe});var Fa,ws;var XO=p(()=>{Fa={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco",imgly_font_wolesbro:"imgly_font_cookie_regular",imgly_font_campton_bold:"imgly_font_outfit_bold",imgly_font_galano_grotesque_bold:"imgly_font_lexend_bold",imgly_font_amberlight:"imgly_font_allison_regular)"};ws=(r,e=false)=>{if(Fa[r]){if(e){console.warn(`Font ${r} was deprecated. Please use ${Fa[r]} instead.`)}return Fa[r]}return r}});var Zg={};wt(Zg,{isMobile:()=>YO});function YO(){if(typeof navigator==="undefined"){return false}const r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}var JO=p(()=>{});function Ge(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;const t=r==="x"?e:e&3|8;return t.toString(16)})}var LY=p(()=>{});var zY,UY;var ZO=p(()=>{zY=r=>{r.preventDefault();r.stopPropagation()};UY=(...r)=>{}});var QO=p(()=>{});var Gft;var NY=p(()=>{ZO();QO();Gft=typeof window!=="undefined"?window.performance.now.bind(window.performance):UY()});var Qg;var eR=p(()=>{Qg=class{constructor(e){this.text=e;this.lastOffsetWidth=-1;const t="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div");this.element.setAttribute("aria-hidden","true");this.element.appendChild(document.createTextNode(e));this.collapsible=document.createElement("span");this.expandable=document.createElement("span");this.collapsibleInner=document.createElement("span");this.expandableInner=document.createElement("span");this.collapsible.style.cssText=t;this.expandable.style.cssText=t;this.expandableInner.style.cssText=t;this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.collapsible.appendChild(this.collapsibleInner);this.expandable.appendChild(this.expandableInner);this.element.appendChild(this.collapsible);this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(e){this.element.style.cssText=`max-width:none;
      min-width:20px;
      min-height:20px;
      display:inline-block;
      overflow:hidden;
      position:absolute;
      width:auto;
      margin:0;
      padding:0;
      top:-999px;
      white-space:nowrap;
      font-synthesis:none;
      font:${e};`}getWidth(){return this.element.offsetWidth}setWidth(e){this.element.style.width=`${e}px`}onResize(e){const t=()=>{this.onScroll(e)};this.collapsible.addEventListener("scroll",t);this.expandable.addEventListener("scroll",t);this.reset()}reset(){const e=this.getWidth();const t=e+100;this.expandableInner.style.width=`${t}px`;this.expandable.scrollLeft=t;this.collapsible.scrollLeft=this.collapsible.scrollWidth+100;if(this.lastOffsetWidth!==e){this.lastOffsetWidth=e;return true}return false}onScroll(e){if(this.reset()&&this.element.parentNode!==null){e(this.lastOffsetWidth)}}}});var Lt,iu;var qY=p(()=>{eR();Lt=class{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(Lt.HAS_WEBKIT_FALLBACK_BUG===null){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(Lt.getUserAgent());Lt.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||parseInt(e[1],10)===536&&parseInt(e[2],10)<=11)}return Lt.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(Lt.HAS_SAFARI_10_BUG===null){if(Lt.supportsNativeFontLoading()&&/Apple/.test(Lt.getNavigatorVendor())){const e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(Lt.getUserAgent());Lt.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else{Lt.HAS_SAFARI_10_BUG=false}}return Lt.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){if(Lt.SUPPORTS_NATIVE_FONT_LOADING===null){Lt.SUPPORTS_NATIVE_FONT_LOADING=!!document["fonts"]}return Lt.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(Lt.SUPPORTS_STRETCH===null){const e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch(t){Lt.SUPPORTS_STRETCH=false}Lt.SUPPORTS_STRETCH=e.style.font!==""}return Lt.SUPPORTS_STRETCH}constructor(e){this.font={fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal",...e}}load(e,t){const i="BESbswy";let o=null;const n=t||Lt.DEFAULT_TIMEOUT;const s=this.getTime();return new Promise((a,l)=>{if(Lt.supportsNativeFontLoading()&&!Lt.hasSafari10Bug()){const u=new Promise((d,m)=>{const h=()=>{const f=this.getTime();if(f-s>=n){m(new Error(""+n+"ms timeout exceeded"))}else{document["fonts"].load(this.getStyle(`"${this.font.fontFamily}"`),i).then(b=>{if(b.length>=1){d()}else{setTimeout(h,25)}},l)}};h()});const c=new Promise((d,m)=>{o=setTimeout(()=>{m(new Error(`${n} ms timeout exceeded`))},n)});Promise.race([c,u]).then(()=>{clearTimeout(o);a(this)},l)}else{const u=new Qg(i);const c=new Qg(i);const d=new Qg(i);let m=-1;let h=-1;let f=-1;let b=-1;let _=-1;let y=-1;const I=document.createElement("div");const T=()=>{if(I.parentNode!==null){I.parentNode.removeChild(I)}};const D=()=>{if(m!==-1&&h!==-1||m!==-1&&f!==-1||h!==-1&&f!==-1){if(m===h||m===f||h===f){if(Lt.hasWebKitFallbackBug()){if(m===b&&h===b&&f===b||m===_&&h===_&&f===_||m===y&&h===y&&f===y){return}}T();clearTimeout(o);a(this)}}};I.dir="ltr";u.setFont(this.getStyle("sans-serif"));c.setFont(this.getStyle("serif"));d.setFont(this.getStyle("monospace"));I.appendChild(u.getElement());I.appendChild(c.getElement());I.appendChild(d.getElement());document.body.appendChild(I);b=u.getWidth();_=c.getWidth();y=d.getWidth();const P=()=>{const k=this.getTime();if(k-s>=n){T();l(new Error(`${n} ms timeout exceeded`))}else{const A=document.hidden;if(A===true||A===void 0){m=u.getWidth();h=c.getWidth();f=d.getWidth();D()}o=setTimeout(P,50)}};P();u.onResize(k=>{m=k;D()});u.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`));c.onResize(k=>{h=k;D()});c.setFont(this.getStyle(`"${this.font.fontFamily}",serif`));d.onResize(k=>{f=k;D()});d.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}})}getStyle(e){return[this.font.fontStyle,this.font.fontWeight,Lt.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")}getTime(){return new Date().getTime()}};iu=Lt;iu.HAS_WEBKIT_FALLBACK_BUG=null;iu.HAS_SAFARI_10_BUG=null;iu.SUPPORTS_STRETCH=null;iu.SUPPORTS_NATIVE_FONT_LOADING=null;iu.DEFAULT_TIMEOUT=6e4});var Dt,F;var tR=p(()=>{Dt=class{static fromSize(e){return new Dt(e.width,e.height)}static distance(e,t){const i=t.x-e.x;const o=t.y-e.y;return Math.sqrt(i*i+o*o)}static dot(e,t){return e.x*t.x+e.y*t.y}static lerp(e,t,i){const o=Math.min(Math.max(i,0),1);return new Dt(e.x*o+t.x*(1-o),e.y*o+t.y*(1-o))}static lerpUnclamped(e,t,i){return new Dt(e.x*i+t.x*(1-i),e.y*i+t.y*(1-i))}static proportionalFit(e,t){const i=e.x/e.y;const o=t.x/t.y;if(i>o){return t.multiply(e.y/t.y)}else{return t.multiply(e.x/t.x)}}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const e=this.magnitude;return new Dt(this.x/e,this.y/e)}get floored(){return new Dt(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new Dt(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new Dt(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new Dt(this.y,this.x)}constructor(e,t){if(typeof e==="number"){this.x=e;this.y=t}else{this.x=e.x;this.y=e.y}}clone(){return new Dt(this.x,this.y)}add(e,t){if(typeof e==="number"){return new Dt(this.x+e,this.y+t)}else{return new Dt(this.x+e.x,this.y+e.y)}}subtract(e,t){if(typeof e==="number"){return new Dt(this.x-e,this.y-t)}else{return new Dt(this.x-e.x,this.y-e.y)}}multiply(e,t){if(typeof e==="number"){return new Dt(this.x*e,this.y*(t===void 0?e:t))}else{return new Dt(this.x*e.x,this.y*e.y)}}divide(e,t){if(typeof e==="number"){return new Dt(this.x/e,this.y/(t===void 0?e:t))}else{return new Dt(this.x/e.x,this.y/e.y)}}equals(e){return this.x===e.x&&this.y===e.y}clamp(e,t){const i=Math.max(e.x,Math.min(t.x,this.x));const o=Math.max(e.y,Math.min(t.y,this.y));return new Dt(i,o)}};F=Dt;F.ZERO=new Dt(0,0);F.ONE=new Dt(1,1);F.UP=new Dt(0,1);F.DOWN=new Dt(0,-1);F.RIGHT=new Dt(1,0);F.LEFT=new Dt(-1,0)});var rR=p(()=>{B()});var ey;var HY=p(()=>{tR();rR();JO();ey=class extends mo{constructor(e,t){super();this.image=e;this.options=t}needsResize(){const e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height}resizedDimensions(){const{options:e}=this;const t={width:this.image.width,height:this.image.height};let i=F.fromSize(t);let o=F.fromSize(t);const{maxMegaPixels:n}=e;if(n){const l=(YO()?n.mobile:n.desktop)*1e6;const u=t.width/t.height;const c=t.height/t.width;const d=new F(Math.floor(Math.sqrt(l*u)),Math.floor(Math.sqrt(l*c)));if(d.x<=t.width&&d.y<=t.height){i=d}}const s=e.maxDimensions;if(s){if(s.height<t.height||s.width<t.width){o=new F(s.width,s.height)}}const a=new F(Math.min(i.x,o.x),Math.min(i.y,o.y));return F.proportionalFit(a,F.fromSize(t)).floored}downscaleIfNecessary(){const e=this.resizedDimensions();const t=e.x<this.image.width||e.y<this.image.height;if(!t){return this.image}this.emit("beganImageDownscaling",this.image);const i=document.createElement("canvas");i.width=e.x;i.height=e.y;const o=i.getContext("2d");const{image:n}=this;o.imageSmoothingQuality="high";o.drawImage(n,0,0,n.width,n.height,0,0,e.x,e.y);this.emit("imageDownscaled",{width:e.x,height:e.y});return i}}});var iNe,oNe,WY,GY;var VY=p(()=>{iNe=r=>r.key==="Enter";oNe=r=>r.key==="Escape";WY=r=>e=>{if(iNe(e))r(e)};GY=r=>e=>{if(oNe(e))r(e)}});var iR,$Y,G,jY,rgt;var KY=p(()=>{iR=(Y=>{Y[Y["EditorContainer"]=0]="EditorContainer";Y[Y["ToolControlBar"]=1]="ToolControlBar";Y[Y["ToolControlBarExpandableControls"]=2]="ToolControlBarExpandableControls";Y[Y["CanvasContainer"]=3]="CanvasContainer";Y[Y["Canvas"]=4]="Canvas";Y[Y["MainBarButtonClose"]=5]="MainBarButtonClose";Y[Y["MainBarButtonExport"]=6]="MainBarButtonExport";Y[Y["MainBarButtonUndo"]=7]="MainBarButtonUndo";Y[Y["MainBarButtonRedo"]=8]="MainBarButtonRedo";Y[Y["MainBarButtonZoom"]=9]="MainBarButtonZoom";Y[Y["Tooltip"]=10]="Tooltip";Y[Y["Cursor"]=11]="Cursor";Y[Y["CursorContainer"]=12]="CursorContainer";Y[Y["NummericInput"]=13]="NummericInput";Y[Y["BrushSize"]=14]="BrushSize";Y[Y["BrushHardness"]=15]="BrushHardness";Y[Y["Dialog"]=16]="Dialog";Y[Y["DialogBody"]=17]="DialogBody";Y[Y["CardContainer"]=18]="CardContainer";Y[Y["CategoryItemsContainer"]=19]="CategoryItemsContainer";Y[Y["ToolbarItem"]=20]="ToolbarItem";Y[Y["ColorList"]=21]="ColorList";Y[Y["NoResult"]=22]="NoResult";Y[Y["CardLabel"]=23]="CardLabel";Y[Y["CardAvatar"]=24]="CardAvatar";Y[Y["Dropdown"]=25]="Dropdown";Y[Y["DropdownList"]=26]="DropdownList";Y[Y["TextAlignment"]=27]="TextAlignment";Y[Y["Sprite"]=28]="Sprite";Y[Y["SpriteTopLeft"]=29]="SpriteTopLeft";Y[Y["SpriteTopRight"]=30]="SpriteTopRight";Y[Y["SpriteBottomLeft"]=31]="SpriteBottomLeft";Y[Y["SpriteBottomRight"]=32]="SpriteBottomRight";Y[Y["Knob"]=33]="Knob";Y[Y["TextWidth"]=34]="TextWidth";Y[Y["ToolbarWrapper"]=35]="ToolbarWrapper";Y[Y["MainCanvasActionBar"]=36]="MainCanvasActionBar";Y[Y["SpriteActions"]=37]="SpriteActions";Y[Y["CarouselSlider"]=38]="CarouselSlider";Y[Y["CropMask"]=39]="CropMask";Y[Y["FlipRotateControls"]=40]="FlipRotateControls";Y[Y["RotateSlider"]=41]="RotateSlider";Y[Y["CropTopRight"]=42]="CropTopRight";Y[Y["CropTopLeft"]=43]="CropTopLeft";Y[Y["CropBottomRight"]=44]="CropBottomRight";Y[Y["CropBottomLeft"]=45]="CropBottomLeft";Y[Y["Watermark"]=46]="Watermark";Y[Y["Toolbar"]=47]="Toolbar";Y[Y["CanvasBar"]=48]="CanvasBar";Y[Y["Checkbox"]=49]="Checkbox";Y[Y["Focus"]=50]="Focus";Y[Y["SnappingLine"]=51]="SnappingLine";Y[Y["LibraryUploadButton"]=52]="LibraryUploadButton";Y[Y["LibraryWebcamButton"]=53]="LibraryWebcamButton";Y[Y["ZoomLevel"]=54]="ZoomLevel";Y[Y["BasicToolControlBar"]=55]="BasicToolControlBar";Y[Y["SliderTrack"]=56]="SliderTrack";Y[Y["SliderLabel"]=57]="SliderLabel";return Y})(iR||{});$Y={};for(const r in iR){const e=iR[r];if(typeof e==="string"){$Y[e]=e}}G=$Y;rgt=Boolean(typeof window!=="undefined"&&((jY=window.Cypress)==null?void 0:jY.env("pesdk")))});function nNe(r,e){let t=0;for(let i=r.length-1;i>=0;i--){const o=r[i];if(o==="."){r.splice(i,1)}else if(o===".."){r.splice(i,1);t++}else if(t){r.splice(i,1);t--}}if(e){for(;t--;t){r.unshift("..")}}return r}function sNe(r){return r.charAt(0)==="/"}function aNe(r){const e=sNe(r);const t=r.substr(-1)==="/";r=nNe(r.split("/").filter(Boolean),!e).join("/");if(!r&&!e){r="."}if(r&&t){r+="/"}return(e?"/":"")+r}var ty;var XY=p(()=>{ty=(...r)=>{return aNe(r.join("/"))}});var JY=C((ngt,YY)=>{var lNe=typeof Element!=="undefined";var uNe=typeof Map==="function";var cNe=typeof Set==="function";var dNe=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function W0(r,e){if(r===e)return true;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return false;var t,i,o;if(Array.isArray(r)){t=r.length;if(t!=e.length)return false;for(i=t;i--!==0;)if(!W0(r[i],e[i]))return false;return true}var n;if(uNe&&r instanceof Map&&e instanceof Map){if(r.size!==e.size)return false;n=r.entries();while(!(i=n.next()).done)if(!e.has(i.value[0]))return false;n=r.entries();while(!(i=n.next()).done)if(!W0(i.value[1],e.get(i.value[0])))return false;return true}if(cNe&&r instanceof Set&&e instanceof Set){if(r.size!==e.size)return false;n=r.entries();while(!(i=n.next()).done)if(!e.has(i.value[0]))return false;return true}if(dNe&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(e)){t=r.length;if(t!=e.length)return false;for(i=t;i--!==0;)if(r[i]!==e[i])return false;return true}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();o=Object.keys(r);t=o.length;if(t!==Object.keys(e).length)return false;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[i]))return false;if(lNe&&r instanceof Element)return false;for(i=t;i--!==0;){if((o[i]==="_owner"||o[i]==="__v"||o[i]==="__o")&&r.$$typeof){continue}if(!W0(r[o[i]],e[o[i]]))return false}return true}return r!==r&&e!==e}YY.exports=function r(e,t){try{return W0(e,t)}catch(i){if((i.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw i}}});var gr,oR,In;var ZY=p(()=>{gr=v(JY());oR=(r,e,[t,i],o=0)=>{const n=r[e];if(n){if(n<t){console.error(`${e} must be greater than or equal to ${t}`);return t}if(n>i){console.error(`${e} must be less than or equal to ${i}`);return i}}return n||o};In=(r,e,t=[1,1,1,1])=>{const i=r[e];let o=true;if(i){i.forEach(n=>{if(n<0){console.error(`${n} in ${e} must be greater than or equal to 0`);o=false}if(n>1){console.error(`${n} in ${e} must be less than or equal to 1`);o=false}})}if(!o)return t;return i||t}});var Ue,G0;var QY=p(()=>{Ue=r=>r*.08;G0=r=>r*.03});var eJ,tJ;var rJ=p(()=>{eJ=(r,e)=>{const t=r.indexOf(e);if(t===-1||!r.length)return void 0;if(t===r.length-1)return r[0];return r[t+1]};tJ=(r,e)=>{const t=r.indexOf(e);if(t===-1||!r.length)return void 0;if(t===0)return r[r.length-1];return r[t-1]}});var ry,nR;var iJ=p(()=>{ry={};nR=({src:r,crossOrigin:e,key:t,resolve:i,reject:o})=>{ry[t]=r;const n=new Image;n.onload=()=>{if(ry[t]===r){i(n);delete ry[t]}};n.onerror=s=>{if(ry[t]===r){o(s);delete ry[t]}};n.crossOrigin=e;n.src=r}});var En;var oJ=p(()=>{En=class extends Error{constructor(e){super(e);this.name="AssetNotFoundError"}}});var kn;var nJ=p(()=>{kn=()=>Math.max(window.devicePixelRatio||1,1)});var iy=p(()=>{XO();JO();LY();NY();QO();qY();eR();HY();rR();VY();KY();ZO();XY();ZY();QY();rJ();iJ();oJ();nJ()});var aJ=C((Rgt,sJ)=>{"use strict";sJ.exports=(r,e=1,t)=>{t={indent:" ",includeEmptyLines:false,...t};if(typeof r!=="string"){throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``)}if(typeof e!=="number"){throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``)}if(typeof t.indent!=="string"){throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof t.indent}\``)}if(e===0){return r}const i=t.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(i,t.indent.repeat(e))}});var lJ=C(()=>{});var pJ=C((Pgt,dJ)=>{"use strict";var uJ=lJ();var cJ=/\s+at.*(?:\(|\s)(.*)\)?/;var pNe=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/;var mNe=typeof uJ.homedir==="undefined"?"":uJ.homedir();dJ.exports=(r,e)=>{e=Object.assign({pretty:false},e);return r.replace(/\\/g,"/").split("\n").filter(t=>{const i=t.match(cJ);if(i===null||!i[1]){return true}const o=i[1];if(o.includes(".app/Contents/Resources/electron.asar")||o.includes(".app/Contents/Resources/default_app.asar")){return false}return!pNe.test(o)}).filter(t=>t.trim()!=="").map(t=>{if(e.pretty){return t.replace(cJ,(i,o)=>i.replace(o,o.replace(mNe,"~")))}return t}).join("\n")}});var fJ=C((Bgt,hJ)=>{"use strict";var hNe=aJ();var fNe=pJ();var gNe=r=>r.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var mJ=class extends Error{constructor(e){if(!Array.isArray(e)){throw new TypeError(`Expected input to be an Array, got ${typeof e}`)}e=[...e].map(i=>{if(i instanceof Error){return i}if(i!==null&&typeof i==="object"){return Object.assign(new Error(i.message),i)}return new Error(i)});let t=e.map(i=>{return typeof i.stack==="string"?gNe(fNe(i.stack)):String(i)}).join("\n");t="\n"+hNe(t,4);super(t);this.name="AggregateError";Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors){yield e}}};hJ.exports=mJ});var Pm=C((Mgt,gJ)=>{"use strict";var yNe=fJ();gJ.exports=async(r,e,{concurrency:t=Infinity,stopOnError:i=true}={})=>{return new Promise((o,n)=>{if(typeof e!=="function"){throw new TypeError("Mapper function is required")}if(!((Number.isSafeInteger(t)||t===Infinity)&&t>=1)){throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${t}\` (${typeof t})`)}const s=[];const a=[];const l=r[Symbol.iterator]();let u=false;let c=false;let d=0;let m=0;const h=()=>{if(u){return}const f=l.next();const b=m;m++;if(f.done){c=true;if(d===0){if(!i&&a.length!==0){n(new yNe(a))}else{o(s)}}return}d++;(async()=>{try{const _=await f.value;s[b]=await e(_,b);d--;h()}catch(_){if(i){u=true;n(_)}else{a.push(_);d--;h()}}})()};for(let f=0;f<t;f++){h();if(c){break}}})}});var yJ,bNe,oy;var sR=p(()=>{yJ=v(Pm());B();iy();bNe={italic:"i"};oy=class{constructor(e){this.assetManager=e;this.injectedFonts={};this.loadedFonts={};this.isFontLoaded=e=>{return this.loadedFonts[e]!==void 0};this.getGoogleFamiliesString=e=>{const t=e.reduce((i,o)=>{const{fontFamily:n,fontStyle:s,fontWeight:a=400}=o;i[n]=(i[n]||[]).concat(`${a}${bNe[s]||""}`);return i},{});return Object.keys(t).map(i=>{const o=t[i].length?`:${t[i].join(",")}`:"";const n=i.replace(" ","+")+o;return n}).join("|")}}static createFontFacesCSS(e,t){return e.map(i=>{const o=t(i.fontURI);return`@font-face {
        font-family: "${i.fontFamily}";
        src: url('${o}') format('${i.format||"woff"}');
        font-weight: ${i.fontWeight||"normal"};
        font-style: ${i.fontStyle||"normal"};
      }`})}getFontWithId(e){const t=this.assetManager.getFontAsset(e);if(!t){throw new Error("The requested font does not exist as an asset.")}return t}injectAllFonts(){const e=this.assetManager.getFontAssets();this.injectFonts(e)}async loadAllFonts(){const e=this.assetManager.getFontAssets();return this.loadFonts(e)}async loadFontsWithIdentifiers(e){const t=e.map(i=>this.getFontWithId(i));return this.loadFonts(t)}async loadFonts(e){this.injectFonts(e);return(0,yJ.default)(e,t=>this.loadFont(t,false),{stopOnError:false}).then(()=>void 0)}async loadFont(e,t=true){return new Promise((i,o)=>{if(this.isFontLoaded(e.identifier)){i()}if(t){this.injectFonts([e])}const n=new iu(e);n.load().then(()=>{this.loadedFonts[e.identifier]=e;i()}).catch(s=>{o(e.identifier)})})}async loadFontWithIdentifier(e,t=true){const i=this.assetManager.getFontAsset(e);if(!i){throw new Error(`The requested font asset with identifier ${e} does not exist!`)}return this.loadFont(i,t)}injectFonts(e,t=this.assetManager.getPathForCategory("font")){const i=e.filter(qO);const o=e.filter(NO);if(i.length>0){this.addGoogleFontLinks(i)}if(o.length>0){this.addWebFontCSS(o,t)}}addGoogleFontLinks(e){const t=e.filter(s=>!this.injectedFonts[s.identifier]);if(t.length===0){return}const i=this.getGoogleFamiliesString(t);const o=document.createElement("link");o.rel="stylesheet";o.href=`https://fonts.googleapis.com/css?family=${i}`;const n=document.getElementsByTagName("head")[0];n.appendChild(o);e.forEach(s=>{this.injectedFonts[s.identifier]=s})}addWebFontCSS(e,t){const i=e.filter(a=>!this.injectedFonts[a.identifier]);if(i.length===0){return}const o=oy.createFontFacesCSS(i,t);const n=`
      /* Injected by PhotoEditorSDK */
      ${o.join("\n")}
    `;const s=document.createElement("style");s.innerHTML=n;document.head.appendChild(s);e.forEach(a=>{this.injectedFonts[a.identifier]=a})}}});var ny;var bJ=p(()=>{B();CY();SY();wY();TY();kY();DY();OY();RY();FY();BY();MY();yO();bO();iy();sR();ny=class{constructor(e,t=false,i){this.assetResolver=i;this.basePath="assets/";this.areCustomAssetsAllowed=false;this.getAssets=e=>{switch(e){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories;default:return[]}return[]};this.getPath=(e,t)=>{const{assetResolver:i={}}=this;const o=t&&i.item?i.item(t,e):t;if(o==null?void 0:o.match(/data:image/g)){return o}if((o==null?void 0:o.match(/(ftp|http|https):\/\//))&&_s(o)){return o}if(!o&&_s(e)){return e}const n=o?ty(e,o):ty(e);let s;if(this.basePath.match(/(ftp|http|https):\/\//)){const{length:a}=this.basePath;if(this.basePath[a-1]!=="/"){this.basePath=`${this.basePath}/`}s=this.basePath+n}else{s=ty(this.basePath,n)}return i.path?i.path(s,e,o):s};this.getPathForCategory=e=>{return(...t)=>this.getPath(e,...t)};this.addCustomStickerAsset=(e,t,i)=>{e.forEach(o=>{const{thumbnailURI:n,name:s,stickerURI:a,identifier:l,tintMode:u,resizeMode:c}=o;const d=this.stickerCategories.find(h=>h.identifier===t);const m={identifier:l,name:s,thumbnailURI:n,stickerURI:a,tintMode:u,resizeMode:c};if(d){d.items.push(m);d.thumbnailURI=n}else{const h={identifier:t,name:i,thumbnailURI:n,items:[m]};this.stickerCategories=[h,...this.stickerCategories]}});this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])};this.getItemPath=(e,t,i)=>{const o=e.find(n=>n.identifier===t);return o?o[i]||o.path||"":""};this.isNonExistingFont=e=>!z0.find(t=>t.identifier===e.identifier)&&!Fa[e.identifier];this.replaceDeprecatedFont=e=>{if(Fa[e.identifier]){return z0.find(t=>t.identifier===ws(e.identifier,true))}return e};var d,m;if(e==null?void 0:e.basePath)this.basePath=e.basePath;this.areCustomAssetsAllowed=t;const o=L0.reduce(this.allOptions,[]);if(e&&e.filter){this.filterCategories=this.configuredCategory(L0,e.filter,o)}else{this.filterCategories=L0}this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>TO(h));this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>Fm(h));const n=M0.reduce(this.allOptions,[]);if(e&&e.adjustment){this.adjustmentCategories=this.configuredCategory(M0,e.adjustment,n)}else{this.adjustmentCategories=M0}this.fontAssets=z0.reduce(this.allOptions,[]);let s=IY.map(h=>this.getFontAsset(h));if(((m=(d=e==null?void 0:e.text)==null?void 0:d.fonts)==null?void 0:m.length)>0){s=e.text.fonts.map(f=>{if(this.isNonExistingFont(f))return f;const b=this.replaceDeprecatedFont(f);return this.getFontAsset(b.identifier)});const h=e.text.fonts.filter(this.isNonExistingFont);this.fontAssets=e.text.fonts?[...this.fontAssets,...h]:this.fontAssets}this.textToolFontAssets=s;const a=e&&e.focus&&e.focus.items&&e.focus.items.length?e.focus.items.map(h=>KO.find(f=>f.identifier===h.identifier)):KO;this.focusAssets=a;if(e&&e.overlay&&e.overlay.items){this.overlayAssets=this.configuredItem(e.overlay.items,N0,N0)}else{this.overlayAssets=N0}if(e&&e.frame&&e.frame.items){this.frameAssets=this.configuredItem(e.frame.items,U0,U0)}else{this.frameAssets=U0}const l=q0.reduce(this.allOptions,[]);if(e&&e.sticker){this.stickerCategories=this.configuredCategory(q0,e.sticker,l)}else{this.stickerCategories=q0}this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let u=AY;if(e&&e.theme==="light"){u=PY}this.textDesignAssets=e&&e.textdesign&&e.textdesign.items&&e.textdesign.items.length?e.textdesign.items.map(h=>u.find(f=>f.identifier===h.identifier)):u;this.textDesignToolFontAssets=EY.map(h=>this.getFontAsset(h));const c=H0.reduce(this.allOptions,[]);if(e&&e.transform){this.transformCategories=this.configuredCategory(H0,e.transform,c,"transform")}else{this.transformCategories=H0}this.transformAssets=this.transformCategories.reduce(this.allOptions,[]);this.fontManager=new oy(this)}getFontManager(){return this.fontManager}getAssetSource(e,t){switch(e){case"filter":const i=this.getLUTFilterAsset(t);if(i){return this.getPath(e,this.getItemPath(this.lutFilterAssets,t,"lutURI"))}break;case"overlay":return this.getPath(e,this.getItemPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getPath(e,this.getItemPath(this.fontAssets,t,"fontURI"));case"sticker":const o=this.stickerAssets.find(n=>n.identifier===t);if(o){if(o.stickerURI.substr(0,10)==="data:image"){return o.stickerURI}if(t.includes("imgly_sticker")&&o.stickerURI.includes(".svg")&&Mt()){const n=this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"));const s=n.split("/");s.splice(s.length-1,0,"base");s[s.length-1]=s[s.length-1].replace(".svg",".png");return s.join("/")}return this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(ty(e,"engine"),t);case"frame":return this.getPath(e,t);default:break}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(e){return this.duoToneFilterAssets.filter(t=>t.identifier===e)[0]}getLUTFilterAsset(e){return this.lutFilterAssets.filter(t=>t.identifier===e)[0]}getOverlayAsset(e){return this.overlayAssets.filter(t=>t.identifier===e)[0]}getStickerAsset(e){return this.stickerAssets.filter(t=>t.identifier===e)[0]}getFontAsset(e){const t=this.fontAssets.filter(i=>i.identifier===e)[0];if(t){return t}console.warn(`The font asset for ${e} was not found.`);return void 0}getTextDesignAssets(e){return this.textDesignAssets.filter(t=>t.identifier===e)[0]}getFrameAsset(e){return this.frameAssets.filter(t=>t.identifier===e)[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(e,t){if(Object.prototype.hasOwnProperty.call(t,"items")){return[...e,...t.items]}return[...e,t]}configuredCategory(e,t,i,o){if(t.categories&&t.categories.length){return t.categories.reduce((n,s)=>{const a=e.find(l=>l.identifier===s.identifier);if(a){n.push({...a,...s,items:this.configuredItem(s.items,i,a.items,o).filter(Boolean)})}else if(this.areCustomAssetsAllowed||o==="transform"){n.push({...s,items:this.configuredItem(s.items,i,s.items,o).filter(Boolean)})}return n},[])}return e}configuredItem(e,t,i,o){if(e&&e.length){return e.reduce((n,s)=>{const a=t.find(l=>l.identifier===s.identifier);if(a){n.push({...a,...s})}else if(this.areCustomAssetsAllowed||o==="transform"){n.push(s)}return n},[]).filter(Boolean)}return i}}});var aR,ur;var _J=p(()=>{aR=class{static contains(e,t){return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY}constructor(e,t,i,o){if(typeof e==="number"){if(typeof t==="number"&&i!==void 0&&o!==void 0){this.origin={x:e,y:t};this.size={width:i||0,height:o||0}}else{throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)")}}else{this.origin=e;if(typeof t==="number"){throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)")}this.size=t}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}};ur=aR;ur.ZERO=new aR({x:0,y:0},{width:0,height:0})});var Pa,Be;var vJ=p(()=>{Pa=class{constructor(e,t,i,o,n,s){this.a=e;this.b=t;this.c=i;this.d=o;this.tx=n;this.ty=s}static fromScale(e,t){return new Pa(e,0,0,t,0,0)}static fromRotation(e){const t=Math.cos(e);const i=Math.sin(e);return new Pa(t,-i,i,t,0,0)}static fromRotationDeg(e){const t=Math.PI*e/180;return this.fromRotation(t)}static fromTranslation(e,t){return new Pa(1,0,0,1,e,t)}static fromTRS(e,t,i,o,n){const s=Math.cos(i);const a=Math.sin(i);return new Pa(o*s,-n*a,o*a,n*s,e,t)}static multiply(e,t){const i=e.a*t.a+e.b*t.c;const o=e.a*t.b+e.b*t.d;const n=e.c*t.a+e.d*t.c;const s=e.c*t.b+e.d*t.d;const a=e.a*t.tx+e.b*t.ty+e.tx;const l=e.c*t.tx+e.d*t.ty+e.ty;return new Pa(i,o,n,s,a,l)}static transformPoint(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}}static getInverted(e){const t=e.a*e.d-e.b*e.c;if(t===0){return e}const i=1/t;const o=i*e.d;const n=-i*e.b;const s=-i*e.c;const a=i*e.a;const l=i*(e.b*e.ty-e.d*e.tx);const u=i*(e.c*e.tx-e.a*e.ty);return new Pa(o,n,s,a,l,u)}};Be=Pa;Be.IDENTITY=Pa.fromScale(1,1)});function Wo(r){return typeof r==="number"}var lR,uR;var cR=p(()=>{lR=r=>r<0;uR=r=>lR(r)?-r:r});var qc,j0,V0,xJ,sy,dR,pR,mR,CJ;var SJ=p(()=>{cR();iy();qc=r=>r*(Math.PI/180);j0=r=>r*(180/Math.PI);V0={[0]:qc(0),[90]:qc(90),[180]:qc(180),[270]:qc(270)};xJ=Object.values(V0);sy=r=>{let e=Math.round(j0(uR(r)));if(lR(r)){if(e===270){e=90}else if(e===90){e=270}}return V0[e%360]};dR=r=>r===0?r:360-uR(r);pR=r=>eJ(xJ,sy(r));mR=r=>tJ(xJ,sy(r));CJ=r=>{const e=sy(r);return e===V0[270]||e===V0[90]}});var wJ=p(()=>{tR();_J();vJ();cR();SJ()});var bt;var TJ=p(()=>{bt=class{static get IDENTITY(){return new bt({x:0,y:0})}constructor(e,t={x:1,y:1},i=0){this.position=e;this.scale=t;this.rotation=i}}});var W=p(()=>{xK();yO();EK();bO();_O();bJ();sR();wJ();TJ();iy();wn()});var ou,IJ,EJ,_Ne,hR;var kJ=p(()=>{ou=v(x("react"));b0();IJ=v(Om());EJ=v(x("styled-components"));co();W();_Ne=EJ.default.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${r=>r.theme.background};
  color: ${r=>r.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${r=>r.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${r=>r.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${r=>r.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`;hR=class extends ou.default.Component{constructor(e){super(e);this.node=ou.default.createRef();this.mounted=false;this.saveEditorDimensions=e=>{if(this.mounted){this.setState({contextValue:{element:e,rect:e.getBoundingClientRect()}})}};var t;if((t=ou.default)==null?void 0:t.version){const i=Number.parseInt(ou.default.version.split(".")[0],10);const o=Number.parseInt(ou.default.version.split(".")[1],10);if(i<16||i===16&&o<8)console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,IJ.default)(this.saveEditorDimensions,100);this.resizeObserver=new Uc(([i])=>{this.saveEditorDimensions(i.target)});this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var e;this.mounted=true;if((e=this.node)==null?void 0:e.current){this.resizeObserver.observe(this.node.current)}}componentWillUnmount(){this.mounted=false;this.resizeObserver.disconnect()}render(){const{children:e}=this.props;const{contextValue:t}=this.state;return ou.default.createElement(_Ne,{ref:this.node,"data-test":G.EditorContainer},ou.default.createElement($t.Provider,{value:t},e))}}});var $0,ay,vNe,K0;var ly=p(()=>{$0=v(x("styled-components"));ay=$0.css`
  position: absolute;
  top: 0;
  left: 0;
  height: ${r=>r.theme.measurements.colorItem.size}px;
  width: ${r=>r.theme.measurements.colorItem.size}px;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};
  pointer-events: none;
`;vNe=$0.default.div.attrs(r=>({style:{background:r.color}}))`
  ${ay}
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.background};
`;K0=vNe});var Hc,uy,xNe,fR,CNe,X0;var gR=p(()=>{Hc=v(x("react"));uy=v(x("styled-components"));ly();xNe=uy.default.div`
  ${ay}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${r=>r.isActive&&uy.css`
      border-color: ${r.theme.selectColor.activeBorderColor};
    `}
`;fR=uy.default.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`;CNe=({isActive:r,className:e,style:t})=>{return Hc.default.createElement(xNe,{isActive:r,className:e,style:t},r&&Hc.default.createElement(Hc.default.Fragment,null,Hc.default.createElement(fR,null),Hc.default.createElement(fR,null),Hc.default.createElement(fR,null)))};X0=CNe});var DJ,Ar;var OJ=p(()=>{DJ=x("styled-components");Ar=DJ.css`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${r=>r.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${r=>r.theme.focusOutlineColor};
  }
`});var RJ,Bm;var AJ=p(()=>{RJ=x("styled-components");Bm=RJ.css`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`});var Go=p(()=>{OJ();AJ()});var FJ,SNe,Y0;var yR=p(()=>{FJ=v(x("styled-components"));Go();SNe=FJ.default.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${r=>r.theme.measurements.colorItem.size}px;
  width: ${r=>r.theme.measurements.colorItem.size}px;
  margin: ${r=>r.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${r=>r.theme.colorItem.borderRadius||`${r.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${Ar}

  &:disabled {
    opacity: ${r=>r.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;Y0=SNe});var PJ,wNe,J0;var bR=p(()=>{PJ=v(x("styled-components"));ly();wNe=PJ.default.div.attrs(r=>{const e=r.url?{backgroundImage:`url(${r.url})`}:{};return{style:e,...r.style}})`
  ${ay}
  z-index: ${r=>r.theme.measurements.zIndex.colorItem.tiledBackground};
`;J0=wNe});var cy,TNe,BJ;var MJ=p(()=>{cy=v(x("react"));L();gR();ly();yR();bR();TNe=({isActive:r,onClick:e,color:t,label:i,isDisabled:o,tiledBackgroundUrl:n,className:s,style:a,children:l})=>{return cy.default.createElement(Y0,{disabled:o,onClick:e,"aria-label":i,className:s,style:a},cy.default.createElement(J0,{url:n}),cy.default.createElement(K0,{color:t}),cy.default.createElement(X0,{isActive:r}),l)};BJ=me("config")(E(TNe))});var LJ,INe,Z0;var _R=p(()=>{LJ=v(x("styled-components"));INe=LJ.default.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${r=>r.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${r=>r.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;Z0=INe});var zJ,Q0,ENe,eC;var vR=p(()=>{zJ=v(x("react"));Q0=v(x("styled-components"));ENe=Q0.default.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${r=>r.isVisible&&Q0.css`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`;eC=({isVisible:r,className:e,children:t})=>{return zJ.default.createElement(ENe,{isVisible:r,className:e},t)}});var UJ,kNe,tC;var xR=p(()=>{UJ=v(x("styled-components"));kNe=UJ.default.div.attrs(({style:r})=>({role:"dialog","aria-hidden":false,style:r}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${r=>r.top}px);
  left: calc(50% + ${r=>r.left}px);
  width: ${r=>r.width};
  height: ${r=>r.height};
  transform: translate(-50%, -50%);
  border-radius: ${r=>r.theme.shape.radiusLarge}px;
  background: ${r=>r.theme.modal.background};
  color: ${r=>r.theme.modal.bodyForeground};
  z-index: ${r=>r.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;tC=kNe});var rC,DNe,NJ;var qJ=p(()=>{rC=v(x("react"));W();_R();vR();xR();DNe=({isVisible:r=false,width:e="350px",height:t="fit-content",position:i,header:o,body:n,footer:s,className:a,style:l,children:u})=>rC.default.createElement(eC,{isVisible:r},rC.default.createElement(Z0,null),rC.default.createElement(tC,{height:t,width:e,left:i.x,top:i.y,className:a,style:l,"data-test":G.Dialog},o,n,u,s));NJ=DNe});var HJ,ONe,Ba;var dy=p(()=>{HJ=v(x("styled-components"));ONe=HJ.default.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;Ba=ONe});var WJ,RNe,Mm;var iC=p(()=>{WJ=v(x("styled-components"));RNe=WJ.default.div`
  display: flex;
  border-top: 2px solid
    ${r=>r.type==="error"?r.theme.error:r.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;Mm=RNe});var GJ,ANe,Lm;var oC=p(()=>{GJ=v(x("styled-components"));ANe=GJ.default.h3`
  font-size: ${r=>r.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline2.case};
  color: ${r=>r.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;Lm=ANe});var zm,py,FNe,PNe,nC,BNe,sC;var CR=p(()=>{zm=v(x("react"));py=v(x("styled-components"));FNe=py.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`;PNe=py.default.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`;nC=py.default.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${r=>r.theme.primary};
  border-radius: 50%;
  animation: ${FNe} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${r=>r.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`;BNe=({className:r,style:e})=>{return zm.default.createElement(PNe,{className:r,style:e},zm.default.createElement(nC,null),zm.default.createElement(nC,null),zm.default.createElement(nC,null),zm.default.createElement(nC,null))};sC=BNe});function MNe(r){let e="";let t=true;let i;for(i=0;i<r.length;i+=1){if(t){e+=r[i].toUpperCase();t=false}else if(r[i]==="-"){t=true}else{e+=r[i]}}return e}function wR(r,e){return e?`${e}${MNe(r)}`:r}function LNe(r="transform"){if(typeof window==="undefined"||typeof window.document==="undefined"){return""}const{style:e}=window.document.documentElement;if(r in e){return""}let t;for(t=0;t<SR.length;t+=1){if(wR(r,SR[t])in e){return SR[t]}}return""}var SR,VJ;var jJ=p(()=>{SR=["Moz","Webkit","O","ms"];VJ=LNe()});function aC(r,e){for(let t=0,{length:i}=r;t<i;t+=1){if(e.apply(e,[r[t],t,r])){return r[t]}}return null}function TR(r){return typeof r==="function"||Object.prototype.toString.call(r)==="[object Function]"}function Um(r){return typeof r==="number"&&!Number.isNaN(r)}function Fr(r){return parseInt(r,10)}var IR=p(()=>{});function zNe(r,e){if(!lC){lC=aC(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],t=>{return TR(r[t])})}if(!TR(r[lC])){return false}return r[lC](e)}function ER(r,e,t){let i=r;do{if(zNe(i,e)){return true}if(i===t){return false}i=i.parentNode}while(i);return false}function uC(r,e,t){if(!r){return}if(r.attachEvent){r.attachEvent(`on${e}`,t)}else if(r.addEventListener){r.addEventListener(e,t,true)}else{r[`on${e}`]=t}}function nu(r,e,t){if(!r){return}if(r.detachEvent){r.detachEvent(`on${e}`,t)}else if(r.removeEventListener){r.removeEventListener(e,t,true)}else{r[`on${e}`]=null}}function $J(r){let e=r.clientHeight;const t=r.ownerDocument.defaultView.getComputedStyle(r);e+=Fr(t.borderTopWidth);e+=Fr(t.borderBottomWidth);return e}function KJ(r){let e=r.clientWidth;const t=r.ownerDocument.defaultView.getComputedStyle(r);e+=Fr(t.borderLeftWidth);e+=Fr(t.borderRightWidth);return e}function XJ(r){let e=r.clientHeight;const t=r.ownerDocument.defaultView.getComputedStyle(r);e-=Fr(t.paddingTop);e-=Fr(t.paddingBottom);return e}function YJ(r){let e=r.clientWidth;const t=r.ownerDocument.defaultView.getComputedStyle(r);e-=Fr(t.paddingLeft);e-=Fr(t.paddingRight);return e}function JJ(r,e){const t=e===e.ownerDocument.body;const i=t?{left:0,top:0}:e.getBoundingClientRect();const o=r.clientX+e.scrollLeft-i.left;const n=r.clientY+e.scrollTop-i.top;return{x:o,y:n}}function ZJ({x:r,y:e,rotation:t}){const i=`translate(${r}px,${e}px) rotate(${t}rad)`;return{[wR("transform",VJ)]:i}}function QJ(r,e){let t=null;if(r.targetTouches){t=aC(r.targetTouches,i=>e===i.identifier)}if(r.changedTouches&&!t){t=aC(r.changedTouches,i=>e===i.identifier)}return t}function eZ(r){if(r.targetTouches&&r.targetTouches[0]){return r.targetTouches[0].identifier}if(r.changedTouches&&r.changedTouches[0]){return r.changedTouches[0].identifier}return null}var lC;var cC=p(()=>{jJ();IR();lC=""});function kR(r){const e=r.findDOMNode();if(!e){return null}return e}function UNe(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}}function tZ(r,e,t){if(!r.props.bounds)return[e,t];let{bounds:i}=r.props;i=typeof i==="string"?i:UNe(i);const o=kR(r);if(!o)return[e,t];if(typeof i==="string"){const{ownerDocument:n}=o;const s=n.defaultView;let a;if(i==="parent"){a=o.parentNode}else{a=n.querySelector(i)}const l=s.getComputedStyle(o);const u=s.getComputedStyle(a);i={left:-o.offsetLeft+Fr(u.paddingLeft)+Fr(l.marginLeft),top:-o.offsetTop+Fr(u.paddingTop)+Fr(l.marginTop),right:YJ(a)-KJ(o)-o.offsetLeft+Fr(u.paddingRight)-Fr(l.marginRight),bottom:XJ(a)-$J(o)-o.offsetTop+Fr(u.paddingBottom)-Fr(l.marginBottom)}}if(Um(i.right))e=Math.min(e,i.right);if(Um(i.bottom))t=Math.min(t,i.bottom);if(Um(i.left))e=Math.max(e,i.left);if(Um(i.top))t=Math.max(t,i.top);return[e,t]}function dC(r,e,t){const{state:i}=r;const o=!Um(i.lastX);const n=kR(r);if(o){return{node:n,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}}return{node:n,deltaX:e-i.lastX,deltaY:t-i.lastY,lastX:i.lastX,lastY:i.lastY,x:e,y:t}}function pC(r,e){return{node:e.node,x:r.state.x+e.deltaX,y:r.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:r.state.x,lastY:r.state.y}}function rZ(r){return r.props.axis==="both"||r.props.axis==="x"}function iZ(r){return r.props.axis==="both"||r.props.axis==="y"}function mC(r,e){const t=kR(e);if(!t)return{x:0,y:0};let{offsetParent:i}=e.props;if(!i&&t instanceof HTMLElement){i=t.offsetParent||t.ownerDocument.body}return JJ(r,i)}var DR=p(()=>{cC();IR()});var hC,Ts,ho,OR,Wc;var RR=p(()=>{hC=v(x("react"));cC();DR();Ts={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};ho=Ts.mouse;OR={cancel:null,disabled:false,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};Wc=class extends hC.default.Component{constructor(){super(...arguments);this.state={dragging:false,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{const{nodeRef:e}=this.props;return(e==null?void 0:e.current)||null};this.getTouchFromEvent=e=>{const t=eZ(e);this.setState({touchIdentifier:t});return QJ(e,t)};this.preventDefault=e=>{if(e.stopPropagation){e.stopPropagation()}};this.handleDragStart=e=>{const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body){throw new Error("<DraggableCore> not mounted on DragStart!")}const{ownerDocument:i}=t;if(this.props.disabled||!(e.target instanceof Node)||this.props.handle&&!ER(e.target,this.props.handle,t)||this.props.cancel&&ER(e.target,this.props.cancel,t)){return false}const o=mC(e,this);if(o==null){return false}const{x:n,y:s}=o;const a=dC(this,n,s);const l=this.props.onStart(e,a);if(l===false){return false}this.setState({dragging:true,lastX:n,lastY:s});if(ho.move==="touchmove"){uC(i,ho.move,this.onTouchDrag)}else{uC(i,ho.move,this.onMouseDrag)}uC(i,ho.stop,this.handleDragStop)};this.handleDrag=e=>{const t=mC(e,this);if(t==null){return}const{x:i,y:o}=t;const n=dC(this,i,o);const s=this.props.onDrag(e,n);if(s===false){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(a){const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.handleDragStop(l)}return}this.setState({lastX:i,lastY:o})};this.handleDragStop=e=>{if(!this.state.dragging){return}const t=mC(e,this);if(t==null){return}const{x:i,y:o}=t;const n=dC(this,i,o);const s=this.findDOMNode();this.setState({dragging:false,lastX:NaN,lastY:NaN});this.props.onStop(e,n);if(s){if(ho.move==="touchmove"){nu(s.ownerDocument,ho.move,this.onTouchDrag)}else{nu(s.ownerDocument,ho.move,this.onMouseDrag)}nu(s.ownerDocument,ho.stop,this.handleDragStop)}};this.onMouseDown=e=>{this.preventDefault(e);ho=Ts.mouse;this.props.onMouseDown(e);if(e.button&&typeof e.button==="number"&&e.button!==0){return false}return this.handleDragStart(e)};this.onMouseDrag=e=>{this.preventDefault(e);return this.handleDrag(e)};this.onMouseUp=e=>{this.preventDefault(e);ho=Ts.mouse;return this.handleDragStop(e)};this.onTouchStart=e=>{this.preventDefault(e);ho=Ts.touch;const t=this.getTouchFromEvent(e);return this.handleDragStart(t)};this.onTouchDrag=e=>{this.preventDefault(e);ho=Ts.touch;const t=this.getTouchFromEvent(e);return this.handleDrag(t)};this.onTouchEnd=e=>{this.preventDefault(e);ho=Ts.touch;const t=this.getTouchFromEvent(e);return this.handleDragStop(t)}}componentWillUnmount(){const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;nu(t,Ts.mouse.move,this.onMouseDrag);nu(t,Ts.touch.move,this.onTouchDrag);nu(t,Ts.mouse.stop,this.handleDragStop);nu(t,Ts.touch.stop,this.handleDragStop)}}render(){return hC.default.cloneElement(hC.default.Children.only(this.props.children),{style:{touchAction:"none",...this.props.children.props.style},onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Wc.defaultProps=OR;Wc.displayName="DraggableCore"});var my,NNe,fC,oZ;var nZ=p(()=>{my=v(x("react"));RR();cC();DR();NNe={...OR,axis:"both",bounds:false,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:false};fC=class extends my.default.Component{constructor(e){super(e);this.onDragStart=(e,t)=>{const i=this.props.onStart(e,pC(this,t));if(i===false){return false}this.setState({dragging:true,dragged:true})};this.onDrag=(e,t)=>{const{position:i,defaultPosition:o,onDrag:n,bounds:s}=this.props;if(!this.state.dragging){return false}const a=pC(this,t);const l=Boolean(i);const u={x:l?a.x:o.x,y:l?a.y:o.y,slackX:0,slackY:0};if(s){const{x:d,y:m}=u;u.x+=this.state.slackX;u.y+=this.state.slackY;const[h,f]=tZ(this,u.x,u.y);u.x=h;u.y=f;u.slackX=this.state.slackX+(d-u.x);u.slackY=this.state.slackY+(m-u.y);a.x=u.x;a.y=u.y;a.deltaX=u.x-this.state.x;a.deltaY=u.y-this.state.y}const c=n(e,a);if(c===false){return false}this.setState(u)};this.onDragStop=(e,t)=>{if(!this.state.dragging){return false}const i=this.props.onStop(e,pC(this,t));if(i===false){return false}const o={dragging:false,slackX:0,slackY:0,x:0,y:0};const n=Boolean(this.props.position);if(n){const{x:s,y:a}=this.props.position;o.x=s;o.y=a}this.setState(o)};this.findDOMNode=()=>{const{nodeRef:e}=this.props;return(e==null?void 0:e.current)||null};this.state={dragging:false,dragged:false,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(e){const t=Boolean(this.props.position);if(t){if(this.props.updateOnPosition){if(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}else{if(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}}}componentWillUnmount(){this.setState({dragging:false})}render(){const{position:e,defaultPosition:t,rotation:i,defaultClassName:o,defaultClassNameDragging:n,defaultClassNameDragged:s,...a}=this.props;const{x:l,y:u,dragging:c,dragged:d}=this.state;let m={};const h=Boolean(e);const f=!h||c;const b=e||t;const _={x:rZ(this)&&f?l:b.x,y:iZ(this)&&f?u:b.y,rotation:i};m=ZJ(_);const y=my.default.Children.only(this.props.children);const I=[y.props.className||"",o,c?n:"",d?s:""].join(" ").trim();const T=my.default.cloneElement(y,{className:I,style:{...y.props.style,...m}});return my.default.createElement(Wc,{...a,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop},T)}};fC.defaultProps=NNe;fC.displayName="Draggable";oZ=fC});var Nm=C((Sbt,uZ)=>{var lZ="Expected a function";var sZ=0/0;var qNe="[object Symbol]";var HNe=/^\s+|\s+$/g;var WNe=/^[-+]0x[0-9a-f]+$/i;var GNe=/^0b[01]+$/i;var VNe=/^0o[0-7]+$/i;var jNe=parseInt;var $Ne=typeof global=="object"&&global&&global.Object===Object&&global;var KNe=typeof self=="object"&&self&&self.Object===Object&&self;var XNe=$Ne||KNe||Function("return this")();var YNe=Object.prototype;var JNe=YNe.toString;var ZNe=Math.max;var QNe=Math.min;var AR=function(){return XNe.Date.now()};function e7e(r,e,t){var i,o,n,s,a,l,u=0,c=false,d=false,m=true;if(typeof r!="function"){throw new TypeError(lZ)}e=aZ(e)||0;if(gC(t)){c=!!t.leading;d="maxWait"in t;n=d?ZNe(aZ(t.maxWait)||0,e):n;m="trailing"in t?!!t.trailing:m}function h(k){var A=i,Q=o;i=o=void 0;u=k;s=r.apply(Q,A);return s}function f(k){u=k;a=setTimeout(y,e);return c?h(k):s}function b(k){var A=k-l,Q=k-u,R=e-A;return d?QNe(R,n-Q):R}function _(k){var A=k-l,Q=k-u;return l===void 0||A>=e||A<0||d&&Q>=n}function y(){var k=AR();if(_(k)){return I(k)}a=setTimeout(y,b(k))}function I(k){a=void 0;if(m&&i){return h(k)}i=o=void 0;return s}function T(){if(a!==void 0){clearTimeout(a)}u=0;i=l=o=a=void 0}function D(){return a===void 0?s:I(AR())}function P(){var k=AR(),A=_(k);i=arguments;o=this;l=k;if(A){if(a===void 0){return f(l)}if(d){a=setTimeout(y,e);return h(l)}}if(a===void 0){a=setTimeout(y,e)}return s}P.cancel=T;P.flush=D;return P}function t7e(r,e,t){var i=true,o=true;if(typeof r!="function"){throw new TypeError(lZ)}if(gC(t)){i="leading"in t?!!t.leading:i;o="trailing"in t?!!t.trailing:o}return e7e(r,e,{"leading":i,"maxWait":e,"trailing":o})}function gC(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function r7e(r){return!!r&&typeof r=="object"}function i7e(r){return typeof r=="symbol"||r7e(r)&&JNe.call(r)==qNe}function aZ(r){if(typeof r=="number"){return r}if(i7e(r)){return sZ}if(gC(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=gC(e)?e+"":e}if(typeof r!="string"){return r===0?r:+r}r=r.replace(HNe,"");var t=GNe.test(r);return t||VNe.test(r)?jNe(r.slice(2),t?2:8):WNe.test(r)?sZ:+r}uZ.exports=t7e});var qm,yC,FR,pi,Hm,bC,_C;var Gc=p(()=>{qm=v(x("styled-components"));tO();yC=qm.default.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;FR=(0,qm.default)(yC)``;pi=(0,qm.default)(yC)``;Hm=(0,qm.default)(yC)``;bC={display:"none",left:0,top:0};_C=(0,qm.default)(yC)`
  display: ${({display:r})=>r};
  left: ${({left:r})=>r}px;
  top: ${({top:r})=>r}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${l0} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`});var Wm,vC,Dn,o7e,Nr;var su=p(()=>{Wm=v(x("react"));vC=v(x("styled-components"));Go();Gc();Dn=vC.css`
  color: ${r=>r.theme.button.activeForeground};
  border-color: ${r=>r.theme.button.activeForeground};

  svg {
    color: ${r=>r.theme.button.activeForeground};
  }
`;o7e=vC.default.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  font-size: ${r=>r.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button1.case};
  font-family: ${r=>r.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${Ar}

  /* Active */

  &:active {
    ${Dn}
  }

  ${({isActive:r})=>r&&Dn}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${pi} {
      background-color: ${r=>r.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${Hm} {
      background-color: ${r=>r.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${r=>r.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`;Nr=class extends Wm.default.Component{constructor(){super(...arguments);this.state=bC;this.timeout=null;this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect();const i=e.pageX-t.left;const o=e.pageY-t.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(i,o)})}else{this.setRippleState(i,o)}this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{isActive:e,isDisabled:t,label:i,ariaLabel:o,children:n,className:s,...a}=this.props;const{left:l,top:u,display:c}=this.state;return Wm.default.createElement(o7e,{"data-test":o,className:s,isActive:e,disabled:t,"aria-label":o,...a,onClick:this.onClick},i,n,Wm.default.createElement(_C,{display:c,left:l,top:u}),Wm.default.createElement(pi,null),Wm.default.createElement(Hm,null))}};Nr.defaultProps={type:"button",isDisabled:false,isActive:false}});var cZ,hy,n7e,s7e,mi;var au=p(()=>{cZ=v(x("react"));hy=v(x("styled-components"));Go();n7e=hy.default.label`
  ${Bm}
`;s7e=hy.default.label`
  display: block;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:r})=>r&&hy.css`
      opacity: ${e=>e.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`;mi=({id:r,"data-test":e,label:t,htmlFor:i,show:o,style:n,isDisabled:s,className:a})=>{const l=o?s7e:n7e;const u=i||(t?t.replace(" ","-"):void 0);return cZ.default.createElement(l,{id:r,"data-test":e,style:n,isDisabled:s,htmlFor:u,className:a},t)};mi.defaultProps={show:true}});var Vo,mZ,jo,a7e,l7e,dZ,u7e,c7e,d7e,p7e,pZ,PR,hZ;var fZ=p(()=>{Vo=v(x("react"));mZ=v(Nm());jo=v(x("styled-components"));W();su();au();a7e=jo.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`;l7e=(0,jo.default)(mi)`
  align-self: flex-start;
`;dZ=(0,jo.default)(Nr)`
  color: ${r=>r.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`;u7e=jo.default.div`
  display: flex;
  justify-content: space-between;
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width-48}px;
`;c7e=jo.default.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${r=>.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};
`;d7e=jo.default.div`
  width: ${r=>.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`;p7e=jo.default.span`
  width: ${r=>Math.round(r.length*.6*r.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${r=>r.activeIndex*.6*r.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
`;pZ=jo.default.div`
  border: solid ${r=>r.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:r})=>r==="left"?jo.css`
          margin-left: 2px;
          transform: rotate(135deg);
        `:jo.css`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;PR=class extends Vo.default.PureComponent{constructor(e){super(e);this.updateIndex=(e,t=false)=>{let i=e+(t?-1:1);const o=this.props.list.length-1;if(i>o){i=0}if(i<0){i=o}this.props.onSelect(this.props.list[i].identifier)};this.getActiveIndex=e=>{const{list:t}=this.props;const i=t.findIndex(o=>o.identifier===e);return i!==-1?i:0};this.throttledUpdateIndex=(0,mZ.default)(this.updateIndex,600)}render(){const{list:e,label:t,showLabel:i=true}=this.props;const o=this.getActiveIndex(this.props.defaultIdentifier);const n=e.length<=1;return Vo.default.createElement(a7e,{"data-test":G.CarouselSlider},Vo.default.createElement(l7e,{show:i,label:t}),Vo.default.createElement(u7e,{id:`photoeditorsdk-${t.replace(" ","-")}`},Vo.default.createElement(dZ,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o,true)},Vo.default.createElement(pZ,{direction:"left"})),Vo.default.createElement(d7e,null,Vo.default.createElement(p7e,{activeIndex:o,length:e.length},e.map(s=>Vo.default.createElement(c7e,{key:s.identifier},s.value)))),Vo.default.createElement(dZ,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o)},Vo.default.createElement(pZ,{direction:"right"}))))}};PR.defaultProps={showLabel:true};hZ=PR});var gZ,m7e,xC;var BR=p(()=>{gZ=v(x("styled-components"));m7e=gZ.default.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${r=>r.theme.measurements.inputs.checkbox.maxWidth}px;
`;xC=m7e});var fy,h7e,gy;var MR=p(()=>{fy=v(x("styled-components"));Go();h7e=fy.default.div`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${r=>r.theme.checkbox.background};
  border-radius: ${r=>r.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${Ar}

  &:hover {
    opacity: ${r=>r.theme.checkbox.hoverOpacity};
  }
  ${r=>r.isChecked&&fy.css`
      background-color: ${r.theme.checkbox.activeBackground};
      &::after {
        color: ${r.theme.checkbox.activeForeground};
        border-color: ${r.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${r.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${r=>r.isDisabled&&fy.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;gy=h7e});var yZ,f7e,CC;var LR=p(()=>{yZ=v(x("styled-components"));Go();f7e=yZ.default.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${Ar}
`;CC=f7e});var Gm,bZ,_Z;var vZ=p(()=>{Gm=v(x("react"));W();au();BR();MR();LR();bZ=({label:r,value:e,checkMarkPosition:t,onClick:i,isDisabled:o,className:n,style:s})=>{const a=`photoeditorsdk-${r.replace(" ","-")}`;return Gm.default.createElement(xC,{"data-test":G.Checkbox,className:n,style:s},t==="left"&&Gm.default.createElement(gy,{onClick:i,isDisabled:o,isChecked:e}),Gm.default.createElement(mi,{isDisabled:o,label:r,htmlFor:a}),Gm.default.createElement(CC,{id:a,disabled:o,checked:e,"aria-checked":e,onChange:i}),t==="right"&&Gm.default.createElement(gy,{onClick:i,isDisabled:o,isChecked:e}))};_Z=bZ;bZ.defaultProps={value:false,checkMarkPosition:"left"}});var xZ,SC;var zR=p(()=>{xZ=v(x("styled-components"));SC=xZ.default.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${r=>r.theme.dropdown.caretColor};
  transform: rotate(${r=>r.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`});var wC,CZ,SZ;var wZ=p(()=>{wC=v(x("styled-components"));CZ=wC.css`
  opacity: ${r=>r.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`;SZ=wC.default.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${CZ}
  }

  ${({isDisabled:r})=>r&&CZ}
`});var TC,TZ;var IZ=p(()=>{TC=v(x("styled-components"));Go();TZ=TC.default.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${r=>r.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${r=>r.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:r})=>r&&TC.css`
      border-left: 2px solid ${e=>e.theme.primary};
    `}

  ${Ar}
`});var UR,Is,g7e,y7e,On;var EZ=p(()=>{UR=v(x("react"));Is=v(x("styled-components"));W();g7e=Is.default.div`
  display: flex;
  ${r=>{if(Mt()||po()){return Is.css`
        overflow: hidden;
      `}if(r.direction==="vertical"){return Is.css`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `}return Is.css`
      overflow-y: hidden;
      overflow-x: auto;
    `}};
`;y7e=Is.default.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${r=>r.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${r=>{if(Mt()||po()){return Is.css`
        ${()=>{if(r.direction==="vertical"){return Is.css`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `}return Is.css`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}}

        scrollbar-face-color: ${r.theme.scrollbar.handleColor};
        scrollbar-track-color: ${r.theme.toolbar.background};
        scrollbar-base-color: ${r.theme.toolbar.background};
        scrollbar-3dlight-color: ${r.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${r.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${r.theme.toolbar.background};
        scrollbar-shadow-color: ${r.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${r.theme.scrollbar.handleColor};
      `}return""}}
`;On=({direction:r="horizontal","data-test":e,className:t,children:i,...o})=>UR.default.createElement(g7e,{...o,direction:r,className:t},UR.default.createElement(y7e,{direction:r,"data-test":e},i))});var NR=p(()=>{EZ()});var yy,qR;var kZ=p(()=>{yy=v(x("styled-components"));W();NR();qR=(0,yy.default)(On)`
  position: absolute;

  background: ${r=>r.theme.dropdown.listBackground};
  color: ${r=>r.theme.dropdown.listForeground};
  border: 1px solid ${r=>r.theme.dropdown.listBorderColor};
  box-shadow: ${r=>r.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${r=>{if(r.isOpen){return yy.css`
        visibility: visible;
        opacity: 1;
        display: flex;
      `}return""}}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>{if(Mt()){return yy.css`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `}return""}}

  border-radius: 0 0 ${r=>r.theme.shape.radiusMedium}px
    ${r=>r.theme.shape.radiusMedium}px;
  z-index: ${r=>r.theme.measurements.zIndex.input.list};
`;qR.defaultProps={direction:"vertical"}});var DZ,OZ;var RZ=p(()=>{DZ=v(x("styled-components"));Go();OZ=DZ.default.div`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.dropdown.foreground};
  background-color: ${r=>r.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${r=>r.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${r=>r.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${r=>r.theme.dropdown.hoverBorderColor};
  }

  ${Ar}
`});var Es,AZ,b7e,HR;var FZ=p(()=>{Es=v(x("react"));AZ=v(x("styled-components"));W();zR();wZ();IZ();kZ();RZ();au();b7e=AZ.default.div``;HR=class extends Es.default.PureComponent{constructor(e){super(e);this.state={isOpen:false};this.dropdownId="";this.dropdownLabelId="";this.handleOutsideClick=e=>{if(this.node&&this.node.contains(e.target)){return}this.setState({isOpen:false})};this.onSelect=e=>{const{onSelect:t}=this.props;t(e);this.setState({isOpen:false})};this.handleKeyDownItem=e=>t=>{if(t.nativeEvent.code==="Space"||t.nativeEvent.code==="Enter"){this.onSelect(e)}};this.onClick=()=>{this.setState(e=>({isOpen:!e.isOpen}))};this.listItem=e=>{const{itemStyle:t,selectedItem:i}=this.props;const{isOpen:o}=this.state;const{value:n,label:s}=e;let a={};if(typeof t==="function"){a=t(e)}else if(t!==null&&typeof t==="object"){a=t}return Es.default.createElement(TZ,{role:"option","aria-hidden":!o,tabIndex:0,style:a,onClick:()=>this.onSelect(n),key:n,isActive:i===n,onKeyDown:this.handleKeyDownItem(n)},s)};this.onKeyDown=e=>{if(e.nativeEvent.code==="Space"||e.nativeEvent.code==="Enter"){this.onClick()}};this.nodeRef=t=>{this.node=t};this.dropdownId=Ge().slice(0,8);this.dropdownLabelId=`${this.dropdownId}-label`}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false)}render(){const{selectedItem:e,list:t,label:i,style:o,isDisabled:n}=this.props;const{isOpen:s}=this.state;const a=t.length>1;return Es.default.createElement(b7e,null,Es.default.createElement(mi,{id:this.dropdownLabelId,isDisabled:n,style:{paddingLeft:"0px"},label:i}),Es.default.createElement("div",{ref:this.nodeRef},Es.default.createElement(SZ,{isOpen:s,isDisabled:n},Es.default.createElement(OZ,{role:"combobox","aria-controls":this.dropdownId,"aria-expanded":s,"aria-labelledby":this.dropdownLabelId,"data-test":G.Dropdown,"aria-hidden":n,showList:a,style:o,onClick:a?this.onClick:void 0,onKeyDown:this.onKeyDown,tabIndex:n?-1:0},e,a&&Es.default.createElement(SC,{rotation:s?180:0})),Es.default.createElement(qR,{id:this.dropdownId,role:"listbox",tabIndex:-1,"aria-labelledby":this.dropdownLabelId,"data-test":G.DropdownList,isOpen:s},a&&t.map(this.listItem)))))}}});var PZ,BZ;var MZ=p(()=>{PZ=v(x("styled-components"));BZ=PZ.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`});var LZ,_7e,zZ;var UZ=p(()=>{LZ=v(x("react"));_7e=({children:r})=>{const e=t=>{t.preventDefault()};return LZ.default.createElement("form",{onSubmit:e},r)};zZ=_7e});var NZ,Vc;var IC=p(()=>{NZ=x("styled-components");Vc=NZ.css`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${r=>r.theme.textInput.foreground};
  padding: 0;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${r=>r.theme.textInput.borderColor};
  background: ${r=>r.theme.textInput.background};
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${r=>r.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }
`});var EC,GR,v7e,x7e,WR,kC;var VR=p(()=>{EC=v(x("react"));GR=v(x("styled-components"));IC();v7e=GR.default.div`
  ${Vc}
  position: relative;
  display: flex;
  align-items: center;
  height: unset;

  &:focus-within {
    border-color: ${r=>r.theme.textInput.hoverBorderColor};
  }
`;x7e=GR.default.input`
  ${Vc}
  border-bottom: none;
  &:disabled {
    opacity: ${r=>r.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`;WR=class extends EC.default.Component{constructor(){super(...arguments);this.onChange=e=>{const{onChange:t}=this.props;if(t){t(e.target.value)}}}render(){const{"aria-label":e,"aria-labeledby":t,id:i,testId:o,value:n,type:s,min:a,max:l,onBlur:u,onFocus:c,onKeyUp:d,onKeyDown:m,onMouseUp:h,onTouchEnd:f,isDisabled:b,className:_,children:y}=this.props;return EC.default.createElement(v7e,{className:_},EC.default.createElement(x7e,{"aria-label":e,"aria-labelledby":t,id:i,"data-test":o,"aria-hidden":b,disabled:b,value:n,type:s,min:a,max:l,onChange:this.onChange,onBlur:u,onFocus:c,onKeyUp:d,onKeyDown:m,onMouseUp:h,onTouchEnd:f}),y)}};WR.defaultProps={type:"text"};kC=WR});var Vm,_y,C7e,by,jR,DC;var $R=p(()=>{Vm=v(x("react"));_y=v(x("styled-components"));W();au();VR();C7e=_y.default.div`
  ${Mt()?_y.css``:_y.css`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;by=class extends Vm.default.Component{constructor(e){super(e);this.node=null;this.handleOutsideClick=e=>{if(this.node&&this.node.current&&this.node.current.contains(e.target)){return}this.onSubmit()};this.onSubmit=()=>{const{onSubmit:e}=this.props;const{value:t,isActive:i}=this.state;if(e){const o=parseFloat(by.cleanValue(t));if(!Number.isNaN(o)&&i){e(`${o}`)}}this.setState({isActive:false})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:true})};this.onKeyDown=e=>{const{value:t}=this.state;if(e.key==="Enter"){this.onSubmit()}else if(e.key==="ArrowUp"){const i=parseFloat(by.cleanValue(t));if(typeof i==="number"){this.setState({value:(i+1).toString(),isActive:true})}}else if(e.key==="ArrowDown"){const i=parseFloat(by.cleanValue(t));if(typeof i==="number"){this.setState({value:(i-1).toString(),isActive:true})}}};this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isActive:true})};this.state={value:this.props.value||"",isActive:false};this.node=Vm.default.createRef()}static getDerivedStateFromProps({value:e},{value:t,isActive:i}){if(e!==t&&!i){return{value:e}}return null}static cleanValue(e){return e?e.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false)}render(){const{id:e,label:t,"aria-label":i,isDisabled:o,showLabel:n,ariaHidden:s,onMouseUp:a,onTouchEnd:l,className:u,style:c}=this.props;const{value:d}=this.state;return Vm.default.createElement(C7e,{ref:this.node,"data-test":G.NummericInput,className:u,style:c},t&&n&&Vm.default.createElement(mi,{htmlFor:e,label:t,show:!!t,isDisabled:o}),Vm.default.createElement(kC,{id:e,value:d,isDisabled:o,"aria-hidden":s,"aria-label":!t?i:void 0,"aria-labelledby":t?e:void 0,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:a,onTouchEnd:l}))}};jR=by;jR.defaultProps={showLabel:true};DC=jR});var vy,qZ,S7e,HZ;var WZ=p(()=>{vy=v(x("react"));qZ=v(x("styled-components"));IC();S7e=qZ.default.input.attrs({type:"search"})`
  ${Vc}
`;HZ=(0,vy.forwardRef)(({value:r,onChange:e,onKeyDown:t,placeholder:i,className:o,style:n},s)=>{const a=l=>{if(e)e(l.target.value)};return vy.default.createElement("div",{className:o,style:n},vy.default.createElement(S7e,{ref:s,value:r,onChange:a,onKeyDown:t,placeholder:i,autoComplete:"off"}))})});var OC,xy,w7e,GZ,T7e,VZ;var jZ=p(()=>{OC=v(x("react"));xy=v(x("styled-components"));au();w7e=xy.default.div``;GZ=({label:r,children:e,inline:t,showLabel:i,isDisabled:o,"data-test":n})=>{const s=`photoeditorsdk-${r.replace(" ","-")}-label`;return OC.default.createElement(w7e,{"data-test":n},OC.default.createElement(mi,{id:s,isDisabled:o,label:r,show:i}),OC.default.createElement(T7e,{"aria-labelledby":s,inline:!!t},e))};T7e=xy.default.div`
  display: inline-flex;
  ${r=>!r.inline&&xy.css`
        flex-wrap: wrap;
      `||""}
`;GZ.defaultProps={showLabel:true};VZ=GZ});var $Z,RC;var KZ=p(()=>{$Z=v(x("styled-components"));RC=$Z.default.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`});var KR=p(()=>{KZ()});var XZ,AC;var YZ=p(()=>{XZ=v(x("styled-components"));AC=XZ.default.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${r=>r.centerSlider?-56:0}px;
  width: ${r=>r.centerSlider?"calc(100% + 56px)":"100%"};
`});var XR=p(()=>{YZ()});var FC,JZ,I7e,PC;var ZZ=p(()=>{FC=v(x("react"));JZ=v(x("styled-components"));$R();I7e=(0,JZ.default)(DC)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;PC=({id:r,"aria-label":e,value:t,min:i,max:o,divider:n,suffix:s,decimal:a,isDisabled:l,"aria-hidden":u,onChange:c,onMouseUp:d,onTouchEnd:m,className:h,style:f})=>{const b=`${r}-input`;const _=`${(t*n).toFixed(a)}${s}`;const y=(0,FC.useCallback)(I=>{const T=I.replace(s,"");if(T){const D=parseFloat(T)/n;const P=Math.max(i,Math.min(o,D));if(!Number.isNaN(P)){c(P);if(d){d(P)}else if(m){m(P)}}}},[i,o,s,c,d,m]);return FC.default.createElement(I7e,{className:h,style:f,"aria-label":e,id:b,value:_,isDisabled:l,"aria-hidden":u,onSubmit:y})}});var YR=p(()=>{ZZ()});var QZ,BC;var eQ=p(()=>{QZ=v(x("styled-components"));au();BC=(0,QZ.default)(mi)`
  padding-bottom: 2px;
`});var JR=p(()=>{eQ()});var lu,Ma,ZR,E7e,k7e,MC;var tQ=p(()=>{lu=v(x("react"));Ma=v(x("styled-components"));co();W();Go();ZR=Ma.css`
  ${po()||Mt()?Ma.css`
        width: 16px;
        height: 16px;
      `:Ma.css`
        width: 20px;
        height: 20px;
      `}
  background: ${r=>r.theme.slider.thumbBackground};
  border: 2px solid ${r=>r.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`;E7e=r=>{let e=(r.value-r.min)*100/(r.max-r.min);if(r.adjust){if(r.value>0){e=r.value*(r.max/2)*100;return`${r.theme.slider.trackColor} 0%,
      ${r.theme.slider.trackColor} 50%,
      ${r.theme.slider.activeTrackColor} 50%,
      ${r.theme.slider.activeTrackColor} ${50+e}%,
      ${r.theme.slider.trackColor} ${50+e}%,
      ${r.theme.slider.trackColor} 100%
      `}if(r.value<0){e=r.value*(r.min/2)*100;return`${r.theme.slider.trackColor} 0%,
      ${r.theme.slider.trackColor} ${50-e}%,
      ${r.theme.slider.activeTrackColor} ${50-e}%,
      ${r.theme.slider.activeTrackColor} 50%,
      ${r.theme.slider.trackColor} 50%,
      ${r.theme.slider.trackColor} 100%
      `}return`${r.theme.slider.trackColor} 0%,
    ${r.theme.slider.trackColor} 100%`}return`${r.theme.slider.activeTrackColor} 0%,
    ${r.theme.slider.activeTrackColor} ${e}%,
    ${r.theme.slider.trackColor} ${e}%,
    ${r.theme.slider.trackColor} 100%`};k7e=Ma.default.input.attrs(r=>({style:!po()&&!Mt()?{background:`linear-gradient(to right, ${E7e(r)})`}:{}}))`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  width: 100%;
  max-width: ${r=>r.showInput?"calc(100% - 50px)":"100%"};
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  border: none;

  ${Ar}

  ${r=>{if(po()||Mt()){return Ma.css`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `}if(r.smallContainer){return Ma.css`
        height: 4px;
      `}return Ma.css`
      height: 2px;
    `}}

  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${r=>r.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${r=>r.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${ZR}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${ZR}
  }
  &::-ms-thumb {
    appearance: none;
    ${ZR}
  }
  &::-ms-fill-lower {
    background: ${r=>`${r.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${r=>`${r.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
`;MC=({id:r,label:e,value:t,min:i,max:o,step:n,adjust:s,showInput:a,"aria-hidden":l,isDisabled:u,onChange:c,onMouseUp:d,onTouchEnd:m,"data-test":h,className:f,style:b})=>{const{rect:_}=(0,lu.useContext)($t);const y=(0,lu.useCallback)(D=>{const P=parseFloat(D.target.value);c(P)},[c]);const I=(0,lu.useCallback)(D=>{const{value:P}=D.target;const k=parseFloat(P);if(m){m(k)}},[m]);const T=(0,lu.useCallback)(D=>{const{value:P}=D.target;const k=parseFloat(P);if(d){d(k)}},[m]);return lu.default.createElement(k7e,{type:"range",role:"slider","aria-valuenow":t,"aria-valuemin":i,"aria-valuemax":o,"aria-label":e,"data-test":h,id:r,name:e,tabIndex:0,value:t,min:i,max:o,step:n,style:b,className:f,adjust:s,showInput:a,disabled:u,smallContainer:!!_&&_.width<600,"aria-hidden":l,onChange:y,onKeyUp:y,onKeyDown:y,onMouseUp:T,onTouchEnd:I})}});var QR=p(()=>{tQ()});var uu,rQ;var iQ=p(()=>{uu=v(x("react"));W();KR();XR();YR();JR();QR();rQ=({"data-test":r,label:e,identifier:t,showLabel:i=true,showInput:o=true,centerSlider:n=false,min:s=-1,max:a=1,value:l=0,step:u=.01,decimal:c=0,divider:d=100,suffix:m="",adjust:h=false,"aria-hidden":f,isDisabled:b,onChange:_,onMouseUp:y,onTouchEnd:I,style:T,className:D})=>{const[P]=(0,uu.useState)(`photoeditorsdk-slider-${Ge()}`);return uu.default.createElement(RC,{className:D,"data-test":r||t||P,style:T},uu.default.createElement(BC,{isDisabled:b,label:e,show:i}),uu.default.createElement(AC,{centerSlider:o&&n},uu.default.createElement(MC,{id:P,label:e,value:l,min:s,max:a,step:u,adjust:h,showInput:o,isDisabled:b,"aria-hidden":f,onChange:_,onMouseUp:y,onTouchEnd:I}),o&&uu.default.createElement(PC,{id:P,"aria-label":e,value:l,min:s,max:a,divider:d,suffix:m,decimal:c,isDisabled:b,"aria-hidden":f,onChange:_,onMouseUp:y,onTouchEnd:I})))}});var oQ=p(()=>{iQ();KR();XR();YR();QR();JR()});var nQ,jc;var LC=p(()=>{nQ=v(x("styled-components"));su();Gc();jc=(0,nQ.default)(Nr)`
  color: ${r=>r.theme.button.textPrimaryForeground};

  svg {
    color: ${r=>r.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Dn}

  ${pi} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`});var sQ,Rn;var zC=p(()=>{sQ=v(x("styled-components"));su();Gc();Rn=(0,sQ.default)(Nr)`
  color: ${r=>r.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Dn}

  ${pi} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${r=>r.theme.button.textSecondaryForeground};
  }
`});var ks,eA;var aQ=p(()=>{ks=v(x("react"));W();LC();zC();dy();iC();oC();eA=class extends ks.default.Component{constructor(){super(...arguments);this.onDismiss=()=>{const{handleClose:e,handleDismiss:t}=this.props;if(e)e();if(t)t()};this.onConfirm=()=>{const{handleClose:e,handleConfirm:t}=this.props;if(e)e();if(t)t()}}render(){const{headerLabel:e,bodyLabel:t,confirmLabel:i,dismissLabel:o,type:n,children:s}=this.props;const a=ks.default.Children.toArray(s)[0];if(!ks.default.isValidElement(a))throw new Error("Child is not a valid react element");return ks.default.cloneElement(a,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:ks.default.createElement(Lm,null,e),body:ks.default.createElement(Ba,{"data-test":G.DialogBody},t),footer:ks.default.createElement(Mm,{type:n},o&&ks.default.createElement(Rn,{label:o,ariaLabel:o,onClick:this.onDismiss}),i&&ks.default.createElement(jc,{label:i,ariaLabel:i,onClick:this.onConfirm}))});return null}}});var An,Cy,D7e,O7e,R7e,A7e,tA;var lQ=p(()=>{An=v(x("react"));Cy=v(x("styled-components"));W();dy();oC();CR();D7e=Cy.default.div`
  display: flex;
`;O7e=(0,Cy.default)(Lm)`
  padding: 0;
`;R7e=Cy.default.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`;A7e=(0,Cy.default)(Ba)`
  padding: 0;
  margin: 0;
`;tA=class extends An.default.PureComponent{render(){const{headerLabel:e,bodyLabel:t,children:i}=this.props;const o=An.default.Children.toArray(i)[0];if(!An.default.isValidElement(o))throw new Error("Child is not a valid react element");return An.default.cloneElement(o,{height:"90px",body:An.default.createElement(Ba,{"data-test":G.DialogBody},An.default.createElement(D7e,null,An.default.createElement(sC,null),An.default.createElement(R7e,null,An.default.createElement(O7e,null,e),An.default.createElement(A7e,null,t))))});return null}}});var fo,jm,F7e,P7e,B7e,M7e,L7e,rA,uQ;var cQ=p(()=>{fo=v(x("react"));jm=v(x("styled-components"));W();LC();zC();dy();iC();IC();F7e=jm.default.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;P7e=jm.default.textarea`
  display: flex;
  caret-color: ${r=>r.theme.primary};
  ${Vc}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${r=>r.theme.modal.bodyForeground};
  resize: none;
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${r=>r.theme.primary};
    color: ${r=>r.theme.foreground};
  }
`;B7e=jm.default.label`
  padding: 11px 20px 8px;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  color: ${r=>r.theme.modal.headerForeground};
`;M7e=(0,jm.default)(Ba)`
  height: 100%;
`;L7e=(0,jm.default)(Mm)`
  border-top: none;
`;rA=class extends fo.default.Component{constructor(){super(...arguments);this.state={value:""};this.input=fo.default.createRef();this.handleKeydown=e=>{GY(this.handleDismiss)(e)};this.handleDismiss=()=>{const{handleDismiss:e}=this.props;if(e)e(false)};this.handleConfirm=()=>{const{handleConfirm:e}=this.props;const{value:t}=this.input.current;if(t){if(e)e(t);this.handleDismiss()}};this.onChange=e=>{const{allowEmojis:t}=this.props;const i=t?e.target.value:IK(e.target.value);this.input.current.value=i;this.setState({value:i})};this.onSubmit=e=>{e.preventDefault()}}componentDidMount(){const{text:e,defaultText:t}=this.props;this.input.current.focus();this.input.current.value=e||t||"";this.setState({value:this.input.current.value});document.addEventListener("keydown",this.handleKeydown,false);if(e===t){this.input.current.select()}}componentDidUpdate(e){const{isVisible:t}=this.props;if(e.isVisible!==t){if(t){this.input.current.focus()}}}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,false)}render(){const{headerLabel:e,dismissLabel:t,confirmLabel:i,maxLength:o,type:n,children:s}=this.props;const{value:a}=this.state;const l=fo.default.Children.toArray(s)[0];if(!fo.default.isValidElement(l))throw new Error("Child is not a valid react element");return fo.default.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!a,height:"150px",header:fo.default.createElement(B7e,{htmlFor:"photoeditorsdk-TextInput"},e),body:fo.default.createElement(M7e,null,fo.default.createElement(F7e,{onSubmit:this.onSubmit},fo.default.createElement(P7e,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:true,onChange:this.onChange,maxLength:o}))),footer:fo.default.createElement(L7e,{type:n},fo.default.createElement(Rn,{label:t,ariaLabel:t,onClick:this.handleDismiss}),fo.default.createElement(jc,{label:i,ariaLabel:i,isDisabled:!a,onClick:this.handleConfirm}))});return null}};rA.defaultProps={defaultText:"Write Something",allowEmojis:false};uQ=rA});var dQ,iA;var pQ=p(()=>{dQ=v(x("styled-components"));iA=dQ.default.div`
  padding-bottom: ${r=>(r.count||1)*8}px;
`;iA.defaultProps={count:1}});var $c,oA,UC,NC;var mQ=p(()=>{$c=v(x("react"));oA=class extends $c.default.Component{getChildren(){const e=[];const t=[];$c.default.Children.forEach(this.props.children,i=>{switch(i.type.componentName){case"case":if(this.props.type===i.props.value){e.push(i)}break;case"default":t.push(i);break}});if(e.length>0){return e}return t}render(){const e=this.getChildren();return e.length===0?null:$c.default.createElement($c.default.Fragment,null,e)}};UC=class extends $c.default.Component{render(){return this.props.children}};UC.componentName="case";NC=class extends $c.default.Component{render(){return this.props.children}};NC.componentName="default"});var $m,z7e,U7e,hQ;var fQ=p(()=>{$m=v(x("styled-components"));z7e=$m.keyframes`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`;U7e=$m.default.div`
  position: absolute;
  top: ${r=>r.position.y}px;
  left: ${r=>r.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${r=>r.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:r})=>r&&$m.css`
      visibility: visible;
      animation: ${z7e} 0.5s, fadeout 0.5s 2.5s;
    `}
`;hQ=U7e});var Km,$o,gQ,N7e,yQ,q7e,bQ,H7e,Fn;var Sy=p(()=>{Km=v(x("react"));$o=v(x("styled-components"));co();su();gQ=$o.css`
  display: flex;
  flex: 0 0 auto;
  justify-content: center;
  align-items: center;
  padding: 4px;
`;N7e=(0,$o.default)(Nr)`
  ${({fullWidth:r})=>r&&$o.css`
      width: 100%;
    `}

  ${({hasIcon:r,smallContainer:e})=>r&&e&&gQ}
  ${({hasIcon:r})=>r&&$o.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        ${gQ}
      }
    `}
`;yQ=$o.css`
  display: flex;
`;q7e=$o.default.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  ${r=>r.smallContainer&&yQ}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${yQ}
  }
`;bQ=$o.css`
  display: none;
`;H7e=$o.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:r})=>r&&$o.css`
      opacity: ${e=>e.theme.button.textInactiveOpacity};
    `}

  ${({hasIcon:r,smallContainer:e})=>r&&e&&bQ}
  ${({hasIcon:r})=>r&&$o.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        ${bQ}
      }
    `}
`;Fn=({label:r,children:e,icon:t,fullWidth:i,isDisabled:o,...n})=>{const{rect:s}=(0,Km.useContext)($t);const a=!!s&&s.width<600;const l=Km.default.createElement(H7e,{hasIcon:!!t,isDisabled:o,smallContainer:a},r,e);return Km.default.createElement(N7e,{fullWidth:i,isDisabled:o,hasIcon:!!t,smallContainer:a,...n},t&&Km.default.createElement(q7e,{smallContainer:a},t),(e||r)&&l)}});var _Q,wy;var vQ=p(()=>{_Q=v(x("styled-components"));Sy();wy=(0,_Q.default)(Fn)`
  background: ${r=>r.theme.button.outlinedPrimaryBackground};
  color: ${r=>r.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${r=>r.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${r=>r.theme.button.outlinedPrimaryForeground};
  }
`});var xQ,cu;var CQ=p(()=>{xQ=v(x("styled-components"));su();Sy();cu=(0,xQ.default)(Fn)`
  background: ${r=>r.theme.button.outlinedSecondaryBackground};
  color: ${r=>r.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${r=>r.theme.button.outlinedBorderColor};

  svg {
    color: ${r=>r.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:r})=>r&&Dn}
`});var nA,sA,W7e,G7e,La;var SQ=p(()=>{nA=v(x("react"));sA=v(x("styled-components"));su();Gc();W7e=(0,sA.default)(Nr)`
  color: ${r=>r.theme.foreground};

  svg {
    color: ${r=>r.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:r})=>r&&Dn}

  ${pi} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`;G7e=sA.default.div`
  display: flex;
  &:focus {
    outline: none;
  }
`;La=({label:r,icon:e,children:t,...i})=>nA.default.createElement(W7e,{...i},nA.default.createElement(G7e,null,e))});var wQ,Ty;var TQ=p(()=>{wQ=v(x("styled-components"));Sy();Ty=(0,wQ.default)(Fn)`
  background: ${r=>r.theme.button.containedPrimaryBackground};
  color: ${r=>r.theme.button.containedPrimaryForeground};
  border: 1px solid ${r=>r.theme.button.containedPrimaryBackground};

  &:active {
    color: ${r=>r.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${r=>r.theme.button.containedPrimaryForeground};

    &:active {
      color: ${r=>r.theme.button.containedPrimaryForeground};
    }
  }
`});var Kc,Iy,V7e,j7e,$7e,go;var IQ=p(()=>{Kc=v(x("react"));Iy=v(x("styled-components"));rO();Gc();Go();V7e=()=>Iy.css`
    animation: ${u0} 0.2s linear;
  `;j7e=Iy.css`
  border: 1px solid ${r=>r.theme.card.activeBorderColor};
  ${FR} {
    background-color: ${r=>r.theme.card.activeOverlayColor};
  }
`;$7e=Iy.default.button.attrs(r=>{const e={};if(r.image){e.backgroundImage=`url(${r.image})`}return{style:e,...r.style}})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${r=>r.theme.card.background};
  color: ${r=>r.theme.card.foreground};

  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  ${V7e};
  animation-fill-mode: both;
  overflow: hidden;

  ${Ar}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:r})=>r&&j7e}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${pi} {
      background-color: ${r=>r.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${Hm} {
      background-color: ${r=>r.theme.card.hoverOverlayColor};
    }
  }
`;go=class extends Kc.default.Component{constructor(){super(...arguments);this.state=bC;this.timeout=null;this.onKeyDown=e=>{if(e.key==="Space"||e.key==="Enter"){if(this.props.onClick){this.props.onClick()}}};this.onClick=e=>{const t=e.currentTarget.getBoundingClientRect();const i=e.pageX-t.left;const o=e.pageY-t.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(i,o)})}else{this.setRippleState(i,o)}this.props.onClick(e)};this.setRippleState=(e,t)=>{this.setState({left:e,top:t,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:e,label:t,role:i,"aria-label":o,"aria-expanded":n,isActive:s,isDisabled:a,image:l,style:u,className:c}=this.props;const{left:d,top:m,display:h}=this.state;return Kc.default.createElement($7e,{role:i,"aria-expanded":n,isActive:s,"aria-label":o,"data-test":t,disabled:a,image:l,onClick:this.onClick,onKeyDown:this.onKeyDown,style:u,className:c},e,Kc.default.createElement(_C,{display:h,left:d,top:m}),Kc.default.createElement(FR,null),Kc.default.createElement(pi,null),Kc.default.createElement(Hm,null))}};go.defaultProps={isActive:false}});var Xm,yo,K7e,X7e,Y7e,J7e,Z7e,zt;var EQ=p(()=>{Xm=v(x("react"));yo=v(x("styled-components"));W();Go();K7e=yo.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  ${r=>r.withBackground?yo.css`
          color: ${r.theme.card.labelForeground};
        `:yo.css`
          color: ${r.theme.card.foreground};
        `}
`;X7e=yo.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${r=>r.theme.shape.radiusMedium}px;
  left: 0;
  ${r=>r.withBackground?yo.css`
          color: ${r.theme.card.labelForeground};
          height: 40px;
          background: ${r.theme.card.labelBackground};
        `:yo.css`
          color: ${r.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`;Y7e=yo.default.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${r=>r.theme.card.labelForeground};
  ${r=>r.withBackground?yo.css`
          border-top-color: ${r.theme.card.labelForeground};
        `:yo.css`
          border-top-color: ${r.theme.card.foreground};
        `}
  transform: rotate(${r=>r.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`;J7e=yo.default.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`;Z7e=yo.default.div`
  ${Bm}
`;zt=({children:r,className:e,caret:t,isActive:i,style:o,withBackground:n,hidden:s})=>{if(s){return Xm.default.createElement(Z7e,null,r)}const a=()=>Xm.default.createElement(J7e,null,Xm.default.createElement(Y7e,{"aria-hidden":true,rotation:i?180:0,withBackground:n}));return Xm.default.createElement(X7e,{className:e,withBackground:n,style:o},Xm.default.createElement(K7e,{"data-test":G.CardLabel,withBackground:n},r,t&&a()))}});var kQ,Xc;var DQ=p(()=>{kQ=v(x("styled-components"));W();Xc=kQ.default.div.attrs(r=>({"data-test":G.CardAvatar,style:{backgroundImage:`url(${r.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`});var OQ,aA,qC,lA;var RQ=p(()=>{OQ=r=>{const e=[];e[0]=requestAnimationFrame(()=>{e[1]=requestAnimationFrame(()=>{r()})});return e};aA=r=>{r.forEach(e=>cancelAnimationFrame(e))};qC=r=>{return!Number.isNaN(parseFloat(r))&&Number.isFinite(r)};lA=r=>{return typeof r==="string"&&r.search("%")===r.length-1&&qC(r.substr(0,r.length-1))}});var Ey,uA,cA;var AQ=p(()=>{Ey=v(x("react"));RQ();cA=(uA=class extends Ey.default.Component{constructor(r){super(r);this.contentRef=null;this.contentRef=Ey.default.createRef();this.animationFrameIDs=[];let e="auto";let t="visible";if(qC(r.height)){e=r.height<0||r.height==="0"?0:r.height;t="hidden"}else if(lA(r.height)){e=r.height==="0%"?0:r.height;t="hidden"}const i=typeof window!=="undefined";if(i&&window.matchMedia){this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches}this.state={height:e,overflow:t,shouldUseTransitions:false}}componentDidMount(){const{height:r}=this.state;if(this.contentRef.current&&this.contentRef.current.style){this.hideContent(r)}}componentDidUpdate(r,e){const{height:t}=this.props;const{duration:i,delay:o}=this.getTimings();if(this.contentRef.current&&t!==r.height){this.showContent(e.height);this.contentRef.current.style.overflow="hidden";const n=this.contentRef.current.offsetHeight;this.contentRef.current.style.overflow="";const s=i+o;let a=null;const l={height:null,overflow:"hidden"};const u=e.height==="auto";if(qC(t)){a=t<0||t==="0"?0:t;l.height=a}else if(lA(t)){a=t==="0%"?0:t;l.height=a}else{a=n;l.height="auto";l.overflow=null}if(u){l.height=a;a=n}this.setState({height:a,overflow:"hidden",shouldUseTransitions:!u});clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);if(u){aA(this.animationFrameIDs);this.animationFrameIDs=OQ(()=>{this.setState({height:l.height,overflow:l.overflow,shouldUseTransitions:true})});this.animationClassesTimeoutID=setTimeout(()=>{this.setState({shouldUseTransitions:false});this.hideContent(l.height)},s)}else{this.timeoutID=setTimeout(()=>{this.setState({height:l.height,overflow:"visible",shouldUseTransitions:false});if(t!=="auto"){this.hideContent(a)}},s)}}}componentWillUnmount(){aA(this.animationFrameIDs);clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);this.timeoutID=null}getTimings(){if(this.prefersReducedMotion){return{delay:0,duration:0}}const{delay:r,duration:e}=this.props;return{delay:r,duration:e}}showContent(r){if(r===0){this.contentRef.current.style.display=""}}hideContent(r){if(r===0){this.contentRef.current.style.display="none"}}render(){const{animateOpacity:r,children:e,className:t,easing:i}=this.props;const{height:o,overflow:n,shouldUseTransitions:s}=this.state;const{duration:a,delay:l}=this.getTimings();const u={height:o,overflow:n};if(s){u.transition=`height ${a}ms ${i} ${l}ms`;u.WebkitTransition=u.transition}const c={};if(r){c.transition=`opacity ${a}ms ${i} ${l}ms`;c.WebkitTransition=c.transition;if(o===0){c.opacity=0}}return Ey.default.createElement("div",{"aria-hidden":o===0,className:t,style:u},Ey.default.createElement("div",{style:c,ref:this.contentRef},e))}},uA.defaultProps={animateOpacity:false,duration:250,delay:0,easing:"ease"},uA)});var FQ=p(()=>{AQ()});var HC,PQ,z;var de=p(()=>{rO();kJ();MJ();gR();ly();yR();bR();qJ();_R();vR();dy();xR();iC();oC();CR();nZ();RR();fZ();vZ();BR();MR();LR();FZ();MZ();UZ();au();$R();WZ();jZ();oQ();VR();aQ();lQ();cQ();pQ();Go();mQ();fQ();Gc();su();Sy();vQ();zC();LC();CQ();SQ();TQ();IQ();EQ();DQ();NR();FQ();HC={Focused:Ar,VisuallyHidden:Bm};PQ={ripple:l0,scale:M$,slide:u0};z={Container:hR,ColorItem:BJ,ColorItemBase:Y0,ColorItemBackground:K0,ColorItemTiledBackground:J0,ColorItemActiveOverlay:X0,Dialog:NJ,DialogBase:eC,DialogContainer:tC,DialogBackdrop:Z0,DialogHeader:Lm,DialogBody:Ba,DialogFooter:Mm,DialogSpinner:sC,TextEditModal:uQ,ActionModal:eA,InfoModal:tA,Spacer:iA,Draggable:oZ,DraggableCore:Wc,Toast:hQ,Input:{Label:mi,File:BZ,Search:HZ,Slider:rQ,SliderBase:RC,SliderContainer:AC,SliderInput:PC,SliderTrack:MC,SliderLabel:BC,CarouselSlider:hZ,Selection:VZ,Checkbox:_Z,CheckboxBase:xC,CheckboxInput:CC,CheckboxCheckMark:gy,Dropdown:HR,Text:kC,NumericInput:DC,Form:zZ},Switch:{Index:oA,Case:UC,Default:NC}}});var BQ,WC;var MQ=p(()=>{BQ=v(x("styled-components"));de();WC=(0,BQ.default)(Fn)`
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  color: ${r=>r.theme.button.textSecondaryForeground};

  ${pi} {
    display: none;
  }

  &:disabled {
    opacity: ${r=>r.theme.button.textInactiveOpacity};
  }
`});var dA,pA,Q7e,eqe,LQ;var zQ=p(()=>{dA=v(x("react"));pA=v(x("styled-components"));de();Q7e=(0,pA.default)(Nr)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${r=>r.theme.measurements.zIndex.button.float};
  padding: 2px;
`;eqe=pA.default.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${r=>r.theme.webcam.floatButton};
`;LQ=r=>{return dA.default.createElement(Q7e,{...r},dA.default.createElement(eqe,null))}});var Yc,UQ,Ds,ky;var NQ=p(()=>{Yc=v(x("styled-components"));de();UQ=Yc.default.div`
  display: inline-flex;
`;Ds=(0,Yc.default)(Fn)`
  background: ${r=>r.theme.canvasActionBar.background};
  color: ${r=>r.theme.canvasActionBar.foreground};
  font-size: ${r=>r.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`;ky=Yc.default.div`
  ${({show:r})=>r?Yc.css`
          opacity: 1;
        `:Yc.css`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${r=>r.theme.canvasActionBar.background};
  color: ${r=>r.theme.canvasActionBar.foreground};
  border-radius: ${r=>r.theme.canvasActionBar.borderRadius?r.theme.canvasActionBar.borderRadius:r.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.buttonGroup};

  ${Ds} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${r=>r.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`});var GC=p(()=>{MQ();zQ();NQ()});function O(){return(0,qQ.useContext)(Ng)}var qQ;var K=p(()=>{qQ=x("react");L()});var za,tqe,HQ;var WQ=p(()=>{za=v(x("react"));tqe=()=>za.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},za.default.createElement("defs",null,za.default.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),za.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},za.default.createElement("path",{d:"M0 0H48V48H0z"}),za.default.createElement("mask",{fill:"currentColor"},za.default.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),za.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));HQ=tqe});var du,rqe,GQ;var VQ=p(()=>{du=v(x("react"));rqe=()=>du.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},du.default.createElement("defs",null,du.default.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),du.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},du.default.createElement("mask",null,du.default.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),du.default.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));GQ=rqe});var Ua,iqe,jQ;var $Q=p(()=>{Ua=v(x("react"));iqe=()=>Ua.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ua.default.createElement("defs",null,Ua.default.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),Ua.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ua.default.createElement("path",{d:"M0 0H48V48H0z"}),Ua.default.createElement("mask",{fill:"currentColor"},Ua.default.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),Ua.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));jQ=iqe});var Na,oqe,KQ;var XQ=p(()=>{Na=v(x("react"));oqe=()=>Na.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Na.default.createElement("defs",null,Na.default.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),Na.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Na.default.createElement("path",{d:"M0 0H48V48H0z"}),Na.default.createElement("mask",{fill:"currentColor"},Na.default.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),Na.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));KQ=oqe});var qa,nqe,YQ;var JQ=p(()=>{qa=v(x("react"));nqe=()=>qa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},qa.default.createElement("defs",null,qa.default.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),qa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},qa.default.createElement("path",{d:"M0 0H48V48H0z"}),qa.default.createElement("mask",{fill:"currentColor"},qa.default.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),qa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));YQ=nqe});var Ha,sqe,ZQ;var QQ=p(()=>{Ha=v(x("react"));sqe=()=>Ha.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ha.default.createElement("defs",null,Ha.default.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Ha.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ha.default.createElement("path",{d:"M0 0H48V48H0z"}),Ha.default.createElement("mask",{fill:"#fff"},Ha.default.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),Ha.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));ZQ=sqe});var Wa,aqe,eee;var tee=p(()=>{Wa=v(x("react"));aqe=()=>Wa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Wa.default.createElement("defs",null,Wa.default.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),Wa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wa.default.createElement("path",{d:"M0 0H48V48H0z"}),Wa.default.createElement("mask",{fill:"currentColor"},Wa.default.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),Wa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));eee=aqe});var Ga,lqe,ree;var iee=p(()=>{Ga=v(x("react"));lqe=()=>Ga.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ga.default.createElement("defs",null,Ga.default.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),Ga.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ga.default.createElement("path",{d:"M0 0H48V48H0z"}),Ga.default.createElement("mask",{fill:"currentColor"},Ga.default.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),Ga.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));ree=lqe});var Va,uqe,oee;var nee=p(()=>{Va=v(x("react"));uqe=()=>Va.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Va.default.createElement("defs",null,Va.default.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),Va.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Va.default.createElement("path",{d:"M0 0H48V48H0z"}),Va.default.createElement("mask",{fill:"currentColor"},Va.default.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),Va.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));oee=uqe});var ja,cqe,see;var aee=p(()=>{ja=v(x("react"));cqe=()=>ja.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ja.default.createElement("defs",null,ja.default.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),ja.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ja.default.createElement("path",{d:"M0 0H48V48H0z"}),ja.default.createElement("mask",{fill:"currentColor"},ja.default.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),ja.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));see=cqe});var $a,dqe,lee;var uee=p(()=>{$a=v(x("react"));dqe=()=>$a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},$a.default.createElement("defs",null,$a.default.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),$a.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$a.default.createElement("path",{d:"M0 0H48V48H0z"}),$a.default.createElement("mask",{fill:"currentColor"},$a.default.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),$a.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));lee=dqe});var Ka,pqe,cee;var dee=p(()=>{Ka=v(x("react"));pqe=()=>Ka.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ka.default.createElement("defs",null,Ka.default.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),Ka.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ka.default.createElement("path",{d:"M0 0H48V48H0z"}),Ka.default.createElement("mask",{fill:"currentColor"},Ka.default.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),Ka.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));cee=pqe});var pu,mqe,pee;var mee=p(()=>{pu=v(x("react"));mqe=()=>pu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},pu.default.createElement("defs",null,pu.default.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),pu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},pu.default.createElement("mask",{fill:"currentColor"},pu.default.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),pu.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));pee=mqe});function hqe(){return mu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},mu.default.createElement("defs",null,mu.default.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),mu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},mu.default.createElement("mask",{fill:"#fff"},mu.default.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),mu.default.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var mu,hee;var fee=p(()=>{mu=v(x("react"));hee=hqe});var hu,fqe,gee;var yee=p(()=>{hu=v(x("react"));fqe=()=>hu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},hu.default.createElement("defs",null,hu.default.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),hu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hu.default.createElement("mask",{fill:"currentColor"},hu.default.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),hu.default.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));gee=fqe});var fu,gqe,bee;var _ee=p(()=>{fu=v(x("react"));gqe=()=>fu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},fu.default.createElement("defs",null,fu.default.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),fu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fu.default.createElement("mask",{fill:"currentColor"},fu.default.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),fu.default.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));bee=gqe});function yqe(){return gu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},gu.default.createElement("defs",null,gu.default.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),gu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},gu.default.createElement("mask",{fill:"#fff"},gu.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),gu.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var gu,vee;var xee=p(()=>{gu=v(x("react"));vee=yqe});var yu,bqe,Cee;var See=p(()=>{yu=v(x("react"));bqe=()=>{return yu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},yu.default.createElement("defs",null,yu.default.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),yu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},yu.default.createElement("mask",{fill:"#fff"},yu.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),yu.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))};Cee=bqe});function _qe(){return Xa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},Xa.default.createElement("defs",null,Xa.default.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Xa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Xa.default.createElement("path",{d:"M0 0H48V48H0z"}),Xa.default.createElement("mask",{fill:"#fff"},Xa.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),Xa.default.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Xa,wee;var Tee=p(()=>{Xa=v(x("react"));wee=_qe});var qr,vqe,Iee;var Eee=p(()=>{qr=v(x("react"));vqe=()=>qr.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},qr.default.createElement("g",{fill:"none",fillRule:"evenodd"},qr.default.createElement("g",null,qr.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},qr.default.createElement("rect",{width:"48",height:"48"})),qr.default.createElement("g",{transform:"translate(12 12)"},qr.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),qr.default.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},qr.default.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),qr.default.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),qr.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),qr.default.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},qr.default.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),qr.default.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},qr.default.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),qr.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));Iee=vqe});function xqe(){return bu.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},bu.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},bu.default.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),bu.default.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),bu.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),bu.default.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),bu.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var bu,kee;var Dee=p(()=>{bu=v(x("react"));kee=xqe});var Pn,Cqe,Oee;var Ree=p(()=>{Pn=v(x("react"));Cqe=()=>Pn.default.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Pn.default.createElement("g",{fill:"none",fillRule:"evenodd"},Pn.default.createElement("g",null,Pn.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},Pn.default.createElement("rect",{width:"48",height:"48"})),Pn.default.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Pn.default.createElement("g",null,Pn.default.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Pn.default.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Pn.default.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));Oee=Cqe});var Ko,Sqe,Aee;var Fee=p(()=>{Ko=v(x("react"));Sqe=()=>Ko.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Ko.default.createElement("g",{fill:"none",fillRule:"evenodd"},Ko.default.createElement("g",null,Ko.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},Ko.default.createElement("rect",{width:"48",height:"48"})),Ko.default.createElement("g",{transform:"translate(12 12)"},Ko.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Ko.default.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},Ko.default.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),Ko.default.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),Ko.default.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));Aee=Sqe});var Jc,wqe,Pee;var Bee=p(()=>{Jc=v(x("react"));wqe=()=>Jc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Jc.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Jc.default.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Jc.default.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Jc.default.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Jc.default.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));Pee=wqe});var bo,Tqe,Mee;var Lee=p(()=>{bo=v(x("react"));Tqe=()=>bo.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},bo.default.createElement("g",{fill:"none",fillRule:"evenodd"},bo.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},bo.default.createElement("g",null,bo.default.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),bo.default.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),bo.default.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),bo.default.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),bo.default.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),bo.default.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},bo.default.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),bo.default.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));Mee=Tqe});var Ym,Iqe,zee;var Uee=p(()=>{Ym=v(x("react"));Iqe=()=>Ym.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Ym.default.createElement("g",{fill:"none",fillRule:"evenodd"},Ym.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Ym.default.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),Ym.default.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));zee=Iqe});var Os,Eqe,Nee;var qee=p(()=>{Os=v(x("react"));Eqe=()=>Os.default.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},Os.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Os.default.createElement("g",null,Os.default.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},Os.default.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},Os.default.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),Os.default.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),Os.default.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),Os.default.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));Nee=Eqe});var Jm,kqe,Hee;var Wee=p(()=>{Jm=v(x("react"));kqe=()=>{return Jm.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},Jm.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jm.default.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),Jm.default.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),Jm.default.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))};Hee=kqe});var Zm,Dqe,Gee;var Vee=p(()=>{Zm=v(x("react"));Dqe=()=>{return Zm.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Zm.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Zm.default.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),Zm.default.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),Zm.default.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))};Gee=Dqe});function Oqe(){return _u.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},_u.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},_u.default.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),_u.default.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),_u.default.createElement("g",{fillOpacity:"0.2"},_u.default.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),_u.default.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var _u,jee;var $ee=p(()=>{_u=v(x("react"));jee=Oqe});var vu,Rqe,Kee;var Xee=p(()=>{vu=v(x("react"));Rqe=()=>vu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},vu.default.createElement("defs",null,vu.default.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),vu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},vu.default.createElement("mask",{fill:"currentColor"},vu.default.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),vu.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));Kee=Rqe});var mA,Aqe,Yee;var Jee=p(()=>{mA=v(x("react"));Aqe=()=>mA.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},mA.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));Yee=Aqe});var hA,Fqe,Zee;var Qee=p(()=>{hA=v(x("react"));Fqe=()=>hA.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},hA.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));Zee=Fqe});function Pqe(){return xu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},xu.default.createElement("defs",null,xu.default.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),xu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xu.default.createElement("mask",{fill:"currentColor"},xu.default.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),xu.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var xu,ete;var tte=p(()=>{xu=v(x("react"));ete=Pqe});var Cu,Bqe,rte;var ite=p(()=>{Cu=v(x("react"));Bqe=()=>Cu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Cu.default.createElement("defs",null,Cu.default.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Cu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Cu.default.createElement("mask",{fill:"currentColor"},Cu.default.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Cu.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));rte=Bqe});var Ya,Mqe,ote;var nte=p(()=>{Ya=v(x("react"));Mqe=()=>Ya.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ya.default.createElement("defs",null,Ya.default.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),Ya.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ya.default.createElement("path",{d:"M0 0H24V24H0z"}),Ya.default.createElement("mask",{fill:"currentColor"},Ya.default.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),Ya.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));ote=Mqe});var yr,Lqe,ste;var ate=p(()=>{yr=v(x("react"));Lqe=({highlight:r="currentColor",width:e=48,height:t=48})=>yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},yr.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},yr.default.createElement("g",{fill:r,transform:"translate(13 13)"},yr.default.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),yr.default.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),yr.default.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),yr.default.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),yr.default.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),yr.default.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),yr.default.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),yr.default.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),yr.default.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),yr.default.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),yr.default.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),yr.default.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),yr.default.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),yr.default.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),yr.default.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),yr.default.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));ste=Lqe});var VC,zqe,lte;var ute=p(()=>{VC=v(x("react"));zqe=({highlight:r="currentColor",width:e=48,height:t=48})=>VC.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},VC.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},VC.default.createElement("path",{fill:r,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));lte=zqe});var Zc,Uqe,cte;var dte=p(()=>{Zc=v(x("react"));Uqe=({highlight:r="currentColor",width:e=48,height:t=48})=>Zc.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},Zc.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Zc.default.createElement("g",{fill:r,transform:"translate(13 13)"},Zc.default.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),Zc.default.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),Zc.default.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));cte=Uqe});var jC,Nqe,pte;var mte=p(()=>{jC=v(x("react"));Nqe=({highlight:r="currentColor",width:e=48,height:t=48})=>jC.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 48 48"},jC.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jC.default.createElement("path",{fill:r,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));pte=Nqe});var hte,qqe,hi;var Su=p(()=>{hte=v(x("styled-components"));qqe=hte.default.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;hi=qqe});var _t,Hqe,fte;var gte=p(()=>{_t=v(x("react"));Su();Hqe=({highlight:r="#565656",width:e=32,height:t=32})=>_t.default.createElement(hi,{width:e,height:t,viewBox:"0 0 32 32"},_t.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_t.default.createElement("g",{fill:r,transform:"translate(-8 -8)"},_t.default.createElement("g",{transform:"translate(8 8)"},_t.default.createElement("g",null,_t.default.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),_t.default.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),_t.default.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),_t.default.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),_t.default.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),_t.default.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),_t.default.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),_t.default.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),_t.default.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),_t.default.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),_t.default.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),_t.default.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),_t.default.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),_t.default.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),_t.default.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),_t.default.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),_t.default.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),_t.default.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),_t.default.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),_t.default.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),_t.default.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),_t.default.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),_t.default.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),_t.default.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));fte=Hqe});var Dy,Wqe,yte;var bte=p(()=>{Dy=v(x("react"));Su();Wqe=({highlight:r="#565656",width:e=32,height:t=48})=>Dy.default.createElement(hi,{width:e,height:t,viewBox:"0 0 42 32"},Dy.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Dy.default.createElement("g",{fill:r,transform:"translate(-3 -8)"},Dy.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));yte=Wqe});var Oy,Gqe,_te;var vte=p(()=>{Oy=v(x("react"));Su();Gqe=({highlight:r="#565656",width:e=26,height:t=46})=>Oy.default.createElement(hi,{width:e,height:t,viewBox:"0 0 26 46"},Oy.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oy.default.createElement("g",{fill:r,transform:"translate(-11 -1)"},Oy.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));_te=Gqe});var Ry,Vqe,xte;var Cte=p(()=>{Ry=v(x("react"));Su();Vqe=({highlight:r="#565656",width:e=26,height:t=46})=>Ry.default.createElement(hi,{width:e,height:t,viewBox:"0 0 26 46"},Ry.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ry.default.createElement("g",{fill:r,transform:"translate(-11 -1)"},Ry.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));xte=Vqe});var Rs,jqe,Ste;var wte=p(()=>{Rs=v(x("react"));Su();jqe=({highlight:r="#565656",mask:e="#fff",width:t=32,height:i=32})=>Rs.default.createElement(hi,{width:t,height:i,viewBox:"0 0 32 32"},Rs.default.createElement("defs",null,Rs.default.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),Rs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Rs.default.createElement("g",{transform:"translate(-8 -8)"},Rs.default.createElement("g",{transform:"translate(7.08 7.293)"},Rs.default.createElement("mask",{fill:e},Rs.default.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),Rs.default.createElement("use",{fill:r,xlinkHref:"#photoeditorsdk-square-icon"})))));Ste=jqe});var Ay,$qe,Tte;var Ite=p(()=>{Ay=v(x("react"));Su();$qe=({highlight:r="#565656",width:e=32,height:t=42})=>Ay.default.createElement(hi,{width:e,height:t,viewBox:"0 0 32 42"},Ay.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ay.default.createElement("g",{fill:r,transform:"translate(-8 -3)"},Ay.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));Tte=$qe});var As,Kqe,Ete;var kte=p(()=>{As=v(x("react"));Kqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>As.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},As.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},As.default.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),As.default.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),As.default.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),As.default.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),As.default.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:r,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),As.default.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:r,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),As.default.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:r,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));Ete=Kqe});var Fs,Xqe,Dte;var Ote=p(()=>{Fs=v(x("react"));Xqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Fs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Fs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fs.default.createElement("g",null,Fs.default.createElement("path",{fill:r,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Fs.default.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:r,rx:"1"}),Fs.default.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:r,rx:"1"}),Fs.default.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:r,rx:"1"}),Fs.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}),Fs.default.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:r,rx:"1"}))));Dte=Xqe});var Ps,Yqe,Rte;var Ate=p(()=>{Ps=v(x("react"));Yqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Ps.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Ps.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ps.default.createElement("g",{transform:"translate(5 5)"},Ps.default.createElement("path",{fill:e,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Ps.default.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:r,rx:"1"}),Ps.default.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:r,rx:"1"}),Ps.default.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:r,rx:"1"}),Ps.default.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:r,rx:"1"}),Ps.default.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:r,rx:"1"}))));Rte=Yqe});var Ja,Jqe,Fte;var Pte=p(()=>{Ja=v(x("react"));Jqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Ja.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Ja.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ja.default.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:r,rx:"1"}),Ja.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),Ja.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),Ja.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),Ja.default.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:r,rx:"1"}),Ja.default.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:e,rx:"1"})));Fte=Jqe});var Za,Zqe,Bte;var Mte=p(()=>{Za=v(x("react"));Zqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Za.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Za.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Za.default.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:r,rx:"1"}),Za.default.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:e,rx:"1"}),Za.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),Za.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),Za.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),Za.default.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:r,rx:"1"})));Bte=Zqe});var Qa,Qqe,Lte;var zte=p(()=>{Qa=v(x("react"));Qqe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Qa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Qa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Qa.default.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:r,rx:"1"}),Qa.default.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:e,rx:"1"}),Qa.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:r,rx:"1"}),Qa.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:r,rx:"1"}),Qa.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:r,rx:"1"}),Qa.default.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:r,rx:"1"})));Lte=Qqe});var Fy,eHe,Ute;var Nte=p(()=>{Fy=v(x("react"));eHe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Fy.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Fy.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fy.default.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:e,rx:"1.5"}),Fy.default.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:r,rx:"1"})));Ute=eHe});var fi,tHe,qte;var Hte=p(()=>{fi=v(x("react"));tHe=({main:r="#424242",highlight:e="#565656",shadow:t="#333333",width:i="48px",height:o="48px"})=>fi.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},fi.default.createElement("defs",null,fi.default.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},fi.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),fi.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fi.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),fi.default.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:t,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),fi.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"})));qte=tHe});var Bn,rHe,Wte;var Gte=p(()=>{Bn=v(x("react"));rHe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Bn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Bn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Bn.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),Bn.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"})));Wte=rHe});var Mn,iHe,Vte;var jte=p(()=>{Mn=v(x("react"));iHe=({main:r="#424242",highlight:e="#565656",width:t="48px",height:i="48px"})=>Mn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 48 48"},Mn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Mn.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),Mn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:r,rx:"0.5"}),Mn.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"})));Vte=iHe});var wu,oHe,$te;var Kte=p(()=>{wu=v(x("react"));oHe=()=>wu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},wu.default.createElement("defs",null,wu.default.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),wu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},wu.default.createElement("mask",{fill:"currentColor"},wu.default.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),wu.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));$te=oHe});var _o,nHe,Xte;var Yte=p(()=>{_o=v(x("react"));nHe=({height:r=3,width:e=102,x:t=-102,className:i,style:o})=>_o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 102 3",className:i,style:o},_o.default.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},_o.default.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),_o.default.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),_o.default.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-e*1.5,y:"0",width:e*4,height:"3",transform:`translate(${t}, 0)`}));Xte=nHe});var Tu,sHe,Jte;var Zte=p(()=>{Tu=v(x("react"));sHe=()=>Tu.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Tu.default.createElement("defs",null,Tu.default.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Tu.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Tu.default.createElement("mask",{fill:"currentColor"},Tu.default.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Tu.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));Jte=sHe});var fA,aHe,Qte;var ere=p(()=>{fA=v(x("react"));aHe=()=>fA.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},fA.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));Qte=aHe});var el,lHe,tre;var rre=p(()=>{el=v(x("react"));lHe=({className:r})=>el.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:r},el.default.createElement("title",null,"Flip Horizontal"),el.default.createElement("defs",null,el.default.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),el.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},el.default.createElement("mask",{fill:"none"},el.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),el.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));tre=lHe});var tl,uHe,ire;var ore=p(()=>{tl=v(x("react"));uHe=({className:r})=>tl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:r},tl.default.createElement("title",null,"Flip Vertical"),tl.default.createElement("defs",null,tl.default.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),tl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},tl.default.createElement("mask",{fill:"none"},tl.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),tl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));ire=uHe});var rl,cHe,nre;var sre=p(()=>{rl=v(x("react"));cHe=({alt:r="Rotate",className:e})=>rl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:e},rl.default.createElement("title",null,r),rl.default.createElement("defs",null,rl.default.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),rl.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},rl.default.createElement("mask",{fill:"none"},rl.default.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),rl.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));nre=cHe});var $C,KC,Kt,Py,it,are;var Ut=p(()=>{B();WQ();VQ();$Q();XQ();JQ();QQ();tee();iee();nee();aee();uee();dee();mee();fee();yee();_ee();xee();See();Tee();Eee();Dee();Ree();Fee();Bee();Lee();Uee();qee();Wee();Vee();$ee();Xee();Jee();Qee();tte();ite();nte();ate();ute();dte();mte();Su();gte();bte();vte();Cte();wte();Ite();kte();Ote();Ate();Pte();Mte();zte();Nte();Hte();Gte();jte();Kte();Yte();Zte();ere();rre();ore();sre();$C={["adjustment"]:Iee,["filter"]:Oee,["library"]:Mee,["overlay"]:zee,["focus"]:Aee,["sticker"]:Nee,["text"]:Hee,["textdesign"]:Gee,["frame"]:Pee,["transform"]:jee,["brush"]:kee};KC={left:Cee,right:wee,center:vee};Kt={addText:Kee,openWebcam:Yee,reset:Zee,shuffle:ete,uploadImage:rte};Py={undo:bee,redo:gee,close:pee,export:hee};it={categories:{["imgly_transforms_common"]:ste,["imgly_transforms_facebook"]:lte,["imgly_transforms_twitter"]:pte,["imgly_transforms_instagram"]:cte},crops:{["imgly_transform_common_custom"]:fte,["imgly_transform_common_square"]:Ste,["imgly_transform_common_3"]:Tte,["imgly_transform_common_4"]:yte,["imgly_transform_common_9"]:_te,["imgly_transform_common_16"]:xte,["imgly_transform_facebook_post"]:Ete,["imgly_transform_facebook_profile"]:Dte,["imgly_transform_facebook_title"]:Rte,["imgly_transform_instagram_landscape"]:Fte,["imgly_transform_instagram_portrait"]:Bte,["imgly_transform_instagram_square"]:Lte,["imgly_transform_instagram_story"]:Ute,["imgly_transform_twitter_post"]:qte,["imgly_transform_twitter_profile"]:Wte,["imgly_transform_twitter_title"]:Vte},dots:Xte,duplicate:Jte,edit:Qte,bringToFront:ote,delete:$te,flipHorizontal:tre,flipVertical:ire,rotate:nre};are={["brightness"]:GQ,["contrast"]:KQ,["saturation"]:ree,["clarity"]:jQ,["shadows"]:oee,["highlights"]:eee,["exposure"]:YQ,["gamma"]:ZQ,["blacks"]:HQ,["whites"]:cee,["temperature"]:lee,["sharpness"]:see}});var lre,ure,dHe,Iu;var gA=p(()=>{lre=v(x("react"));ure=v(x("styled-components"));K();dHe=ure.default.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
  max-width: calc(100% - ${r=>r.maxWidth}px);
`;Iu=({children:r})=>{const{config:e}=O();let t=0;if(e.isLayoutAdvanced){t=e.measurements.advancedUIToolbar.width+e.measurements.advancedUIToolControlBar.width}return lre.default.createElement(dHe,{maxWidth:t},r)}});var By,cre;var dre=p(()=>{By=v(x("styled-components"));W();cre=By.default.div.attrs(()=>({"data-test":G.MainCanvasActionBar}))`
  &&& {
    display: ${r=>r.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${r=>r.theme.measurements.mainCanvasActionBar.height}px;
    color: ${r=>r.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${r=>r.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${r=>r.theme.measurements.zIndex.canvas.bar};
    background: ${r=>r.transparentBackgound?"transparent":r.theme.mainCanvasActionBar.background};
    ${r=>r.bottom?By.css`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:By.css`
            justify-content: space-between;
          `}
  }
`});var pre,mre;var hre=p(()=>{pre=v(x("styled-components"));mre=pre.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var fre,gre;var yre=p(()=>{fre=v(x("styled-components"));gre=fre.default.div.attrs({role:"main"})`
  background-color: ${r=>r.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${r=>r.theme.measurements.canvas.marginTop}px;
`});var bre,_re;var vre=p(()=>{bre=v(x("styled-components"));_re=bre.default.div.attrs(({height:r,width:e})=>({style:{height:`${r}px`,width:`${e}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${r=>r.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`});var xre,Cre;var Sre=p(()=>{xre=v(x("styled-components"));Cre=xre.default.div.attrs(({radius:r})=>({style:{height:`${r*2}px`,width:`${r*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${r=>r.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`});var wre,Tre;var Ire=p(()=>{wre=v(x("styled-components"));Tre=wre.default.div`
  position: relative;
  height: inherit;
  width: inherit;
`});var Ot,pHe,XC;var yA=p(()=>{Ot=v(x("styled-components"));pHe=Ot.default.div(r=>{const{desktop:e,mobile:t}=r.theme.measurements.canvasControls.corner.touchable;const i=e/4;const o=t/2;return Ot.css`
    position: absolute;
    width: ${e}px;
    height: ${e}px;
    ${n=>n.vertical==="top"?Ot.css`
            top: 0px;
          `:Ot.css`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?Ot.css`
            left: 0px;
          `:Ot.css`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?Ot.css`
            margin-top: -${i}px;
          `:Ot.css`
            margin-bottom: -${i}px;
          `}
  ${n=>n.horizontal==="left"?Ot.css`
            margin-left: -${i}px;
          `:Ot.css`
            margin-right: -${i}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${t}px;
      height: ${t}px;
      ${n=>n.vertical==="top"?Ot.css`
              margin-top: -${o}px;
            `:Ot.css`
              margin-bottom: -${o}px;
            `}
      ${n=>n.horizontal==="left"?Ot.css`
              margin-left: -${o}px;
            `:Ot.css`
              margin-right: -${o}px;
            `}
    }
  `});XC=(0,Ot.default)(pHe)(r=>{const e=r.horizontal==="right"?r.borderWidth:0;const t=r.vertical==="bottom"?r.borderWidth:0;const i=r.horizontal==="left"?r.borderWidth:0;const o=r.vertical==="top"?r.borderWidth:0;const n=`${o}px ${e}px ${t}px ${i}px`;const s=r.horizontal==="left"&&r.vertical==="bottom"||r.horizontal==="right"&&r.vertical==="top"?"nesw-resize":"nwse-resize";const a=r.theme.measurements.canvasControls.corner.touchable.desktop/4-r.borderWidth;const l=r.theme.measurements.canvasControls.corner.touchable.mobile/4+r.borderWidth;return Ot.css`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${u=>u.theme.measurements.canvasControls.corner.size}px;
      height: ${u=>u.theme.measurements.canvasControls.corner.size}px;
      z-index: ${u=>u.theme.measurements.zIndex.canvas.controls};
      border-color: ${u=>u.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${r.vertical==="top"?Ot.css`
            top: ${a}px;
          `:Ot.css`
            bottom: ${a}px;
          `}
      ${r.horizontal==="left"?Ot.css`
            left: ${a}px;
          `:Ot.css`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${r.vertical==="top"?Ot.css`
              margin-top: ${l}px;
            `:Ot.css`
              margin-bottom: ${l}px;
            `}
        ${r.horizontal==="left"?Ot.css`
              margin-left: ${l}px;
            `:Ot.css`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `})});var Ere,kre;var Dre=p(()=>{Ere=v(x("styled-components"));W();kre=Ere.default.div.attrs(()=>({"data-test":G.Knob}))`
  position: absolute;
  height: ${r=>r.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${r=>r.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${r=>r.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${r=>r.theme.measurements.canvasControls.knob.size}px;
    height: ${r=>r.theme.measurements.canvasControls.knob.size}px;
    top: ${r=>r.theme.measurements.canvasControls.knob.size/4}px;
    left: ${r=>r.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`});var Ore,Rre;var Are=p(()=>{Ore=v(x("styled-components"));Rre=Ore.default.div`
  position: absolute;
  color: ${r=>r.theme.canvas.controlsOutline};
`});var Fre,Pre;var Bre=p(()=>{Fre=v(x("styled-components"));Pre=Fre.default.div.attrs(r=>({style:{left:`${r.x}px`}}))`
  position: absolute;
  bottom: -${r=>r.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${r=>r.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${r=>r.theme.canvas.controlsOutline};
`});var Mre,Lre;var zre=p(()=>{Mre=v(x("styled-components"));Lre=Mre.default.div.attrs(({height:r,width:e,theme:t})=>({style:{height:`${r+t.measurements.canvasControls.sprite.controlPadding}px`,width:`${e+t.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${r=>r.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${r=>r.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${r=>r.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`});var Ure,Nre;var qre=p(()=>{Ure=v(x("styled-components"));W();Nre=Ure.default.div.attrs(()=>({"data-test":G.TextWidth}))`
  position: absolute;
  height: ${r=>r.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.controls};
  background: ${r=>r.theme.canvas.controlsColor};
  cursor: pointer;
`});var Hre,Wre;var Gre=p(()=>{Hre=v(x("styled-components"));Wre=Hre.default.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${r=>r.height}px;
  width: ${r=>r.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`});var Eu,YC,Vre,jre,$re,Qc;var bA=p(()=>{Eu=v(x("styled-components"));W();yA();YC=SK()?Eu.css`
      transition: unset;
    `:Eu.css`
      transition: all 0.4s ease-in-out;
    `;Vre=Eu.default.div`
  position: absolute;
  background: ${r=>r.theme.canvas.cropBackdrop};
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.backdrop};
  ${YC}
`;jre=Eu.default.div.attrs({"data-test":G.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${r=>r.theme.canvas.controlsOutline};
  cursor: move;
  ${YC}
`;$re=Eu.default.div`
  position: absolute;
  background: ${r=>r.theme.canvas.controlsOutline};
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.grid};
  ${YC}
`;Qc=(0,Eu.default)(XC)`
  z-index: ${r=>r.theme.measurements.zIndex.canvas.controls};
  ${YC};
`});var Kre,Xre;var Yre=p(()=>{Kre=v(x("styled-components"));Xre=Kre.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var Jre,Zre;var Qre=p(()=>{Jre=v(x("styled-components"));Zre=Jre.default.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`});var eie,tie;var rie=p(()=>{eie=v(x("styled-components"));tie=eie.default.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${r=>r.theme.webcam.background};
`});var we;var cr=p(()=>{GC();gA();dre();hre();yre();vre();Sre();Ire();yA();Dre();Are();Bre();zre();qre();Gre();bA();Yre();Qre();rie();we={Index:mre,Area:Iu,Bar:{Index:cre,ButtonGroup:UQ},Button:{TextSecondary:WC,Float:LQ},Container:gre,Element:Xre,Wrapper:tie,Webcam:Zre,Controls:{Knob:kre,Circle:Cre,Corner:XC,Line:Rre,Area:_re,Sprite:Lre,RotateHandle:Pre,Container:Tre,Wrapper:Wre,SpriteActionsWrapper:ky,SpriteActionButton:Ds,Width:Nre},Crop:{Mask:jre,GridLine:$re,Backdrop:Vre,Control:Qc}}});var Li={};wt(Li,{FragmentPrecision:()=>JC,ImageFormat:()=>ed,OptionType:()=>te,RenderType:()=>vo,RendererType:()=>dr,UniformType:()=>xt});var vo,ed,te,xt,dr,JC;var xo=p(()=>{vo={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"};ed={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"};te=(h=>{h["NUMBER"]="number";h["VECTOR2"]="vector2";h["COLOR_MATRIX"]="color-matrix";h["COLOR"]="color";h["ARRAY"]="array";h["OBJECT"]="object";h["STRING"]="string";h["BOOLEAN"]="boolean";h["CONFIGURABLE"]="configurable";h["IMAGE"]="image";h["FUNCTION"]="function";h["TEXTURE"]="texture";h["ALL"]="*";return h})(te||{});xt=(b=>{b["SAMPLER2D"]="sampler2d";b["INT"]="i";b["INT1"]="1i";b["INT2"]="2i";b["INT3"]="3i";b["INT4"]="4i";b["FLOAT"]="f";b["FLOAT1"]="1f";b["FLOAT2"]="2f";b["FLOAT_VECTOR2"]="2fv";b["FLOAT3"]="3f";b["FLOAT4"]="4f";b["MAT3"]="mat3";b["MAT3FV"]="mat3fv";b["MAT4"]="mat4";return b})(xt||{});dr=(t=>{t["WEBGL"]="webgl";t["CANVAS"]="canvas";return t})(dr||{});JC=(i=>{i["High"]="highp";i["Medium"]="mediump";i["Low"]="lowp";return i})(JC||{})});var My,iie;var oie=p(()=>{My=()=>document.createElement("canvas");iie=(r,e)=>{const t=e||My();t.width=r.width;t.height=r.height;const i=t.getContext("2d");if(!i){throw new Error("Cannot render context")}i.clearRect(0,0,t.width,t.height);i.drawImage(r,0,0,r.width,r.height);return t}});var Qm;var _A=p(()=>{Qm=class{constructor(e,t,i){this.width=e;this.height=t;this.data=i}}});var nie={};wt(nie,{glGet:()=>ZC,webUtils:()=>gHe});var ZC,mHe,hHe,fHe,gHe;var sie=p(()=>{oie();wn();_A();ZC=r=>{const e={preserveDrawingBuffer:true};return r.getContext("webgl",e)||r.getContext("experimental-webgl",e)};mHe=()=>{const r=My();const e=ZC(r);const t=e.getParameter(e.MAX_TEXTURE_SIZE);const i=e.getExtension("WEBGL_lose_context");if(i){i.loseContext()}st(r);return t};hHe=(r,e)=>{if(e instanceof Qm){r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width,e.height,0,r.RGBA,r.UNSIGNED_BYTE,e.data)}else{const t=iie(e);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);st(t)}};fHe=r=>Boolean(r.tagName&&r.tagName.toUpperCase()==="IMG");gHe={isSupported:()=>Boolean(ZC(My())),isCanvas:r=>r.constructor.name==="Canvas"||Boolean(r.tagName&&r.tagName.toUpperCase()==="CANVAS"),isImage:fHe,Image:typeof window!=="undefined"?window.Image:void 0,glMaxTexture:mHe,glGet:ZC,createCanvas:My,glResize(r,e){return r},glTexImage:hHe}});var aie,Pr,eh,vA,lie;var Bs=p(()=>{xo();if(true){aie=(sie(),ui(nie)).webUtils}if(false){aie=null.serverUtils}Pr=aie;eh=r=>r._type==="webgl";vA=r=>Boolean(r&&"tagName"in r&&r.tagName&&r.tagName.toUpperCase()==="CANVAS");lie=r=>Boolean("tagName"in r&&r.tagName.toUpperCase()==="IMG")});var QC,uie;var cie=p(()=>{QC=class{static head(e){return e[0]}static tail(e){return e.slice(1)}static last(e){return e[e.length-1]}static init(e){return e.slice(0,e.length-1)}static remove(e,t){return e.filter((i,o,n)=>!t(i,o,n))}static findIndex(e,t){for(let i=0;i<e.length;i++){if(t(e[i])){return i}}return-1}static find(e,t){for(let i=0;i<e.length;i++){if(t(e[i])){return e[i]}}return void 0}static flatten(e){return e.reduce(function(t,i){return t.concat(Array.isArray(i)?QC.flatten(i):i)},[])}static range(e,t){const i=[];if(t>e){for(let o=e;o<t;o++){i.push(o)}}return i}static repeat(e,t){const i=[];for(let o=0;o<t;o++){i[o]=e}return i}static zip(e,t){const i=Math.min(e.length,t.length);const o=[];for(let n=0;n<i;n++){o[n]=[e[n],t[n]]}return o}};uie=QC});var ku,yHe,Xo;var th=p(()=>{ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";yHe={encode(r){let e="";let t;let i;let o;let n;let s;let a;let l;let u=0;do{t=r[u++];i=r[u++];o=r[u++];n=t>>2;s=(t&3)<<4|i>>4;a=(i&15)<<2|o>>6;l=o&63;if(isNaN(i)){a=l=64}else if(isNaN(o)){l=64}e=e+ku.charAt(n)+ku.charAt(s)+ku.charAt(a)+ku.charAt(l);t=i=o="";n=s=a=l=""}while(u<r.length);return e},decode(r){let e;let t;let i;let o;let n;let s;let a;let l=0;const u=[];const c=/[^A-Za-z0-9+/=]/g;if(c.exec(r)){throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}r=r.replace(/[^A-Za-z0-9+/=]/g,"");do{o=ku.indexOf(r.charAt(l++));n=ku.indexOf(r.charAt(l++));s=ku.indexOf(r.charAt(l++));a=ku.indexOf(r.charAt(l++));e=o<<2|n>>4;t=(n&15)<<4|s>>2;i=(s&3)<<6|a;u.push(e);if(s!==64){u.push(t)}if(a!==64){u.push(i)}e=t=i="";o=n=s=a=""}while(l<r.length);return u}};Xo=yHe});var td,xA,H;var Ms=p(()=>{Bs();cie();th();td=class{static mapRange(e,t,i){return(e-t.getMin())*i.getLength()/t.getLength()+i.getMin()}static isPlainObject(e){if(typeof e!=="object"||!e){return false}if(typeof Object.getPrototypeOf==="function"){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}static isMobile(){if(typeof navigator==="undefined")return false;const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}static isBrowser(){return typeof window!=="undefined"}static values(e){const t=[];for(const i in e){t.push(e[i])}return t}static generateUUID(){let e=new Date().getTime();if(true){if(typeof window.performance!=="undefined"&&typeof window.performance.now==="function"){e+=window.performance.now()}}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t==="x"?i:i&3|8).toString(16)})}static resizeVectorToFit(e,t){const i=Math.min(t.x/e.x,t.y/e.y);const o=e.clone().multiply(i);return o}static resizeVectorToFill(e,t){const i=e.x/e.y;const o=t.x/t.y;if(i>o){return t.clone().set(t.y*i,t.y)}return t.clone().set(t.x,t.x/i)}static isExtendable(e){return typeof e!=="undefined"&&e!==null&&(typeof e==="object"||typeof e==="function")}static defaults(e,...t){const i={};for(const o in e){i[o]=e[o]}for(let o=0;o<t.length;o++){const n=t[o];for(const s in n){if(typeof i[s]==="undefined"){i[s]=n[s]}}}return i}static deepMerge(e,...t){const i=(o,n)=>{if(n===void 0){return i(null,o)}if(Array.isArray(n)){return[...n]}if(!td.isPlainObject(n)){return n}if(!td.isPlainObject(o)){return{...n}}const s={...o};Object.keys(n).forEach(a=>{const l=n[a];if(l===void 0){return}s[a]=i(o[a],l)});return s};return t.reduce(i,e)}static deepDefaults(e,...t){const i=[...t].reverse();return td.deepMerge(...i,e)}static deepClone(e){const t={};for(const i in e){if(td.isExtendable(e[i])){t[i]=td.deepClone(e[i])}else{t[i]=e[i]}}return t}static extend(e,...t){const i={};for(const o in e){i[o]=e[o]}for(let o=0;o<t.length;o++){const n=t[o];for(const s in n){i[s]=n[s]}}return i}static clone(e){return this.extend({},e)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;const i=e==="x"?t:t&3|8;return i.toString(16)})}static createCanvas(){return Pr.createCanvas()}static isPowerOfTwo(e){return(e.x&e.x-1)===0&&(e.y&e.y-1)===0}static nextLowestPOT(e){for(let t=1;t<32;t<<=1){e|=e>>t}return e-(e>>1)}static nextHighestPOT(e){e--;for(let t=1;t<32;t<<=1){e|=e>>t}return e+1}static moveArrayItem(e,t,i){if(i>=e.length){let o=i-e.length;while(o--+1){e.push(void 0)}}e.splice(i,0,e.splice(t,1)[0])}static ensureCanvasDimensions(e,t){if(e.width!==t.x||e.height!==t.y){e.width=t.x;e.height=t.y;return true}return false}static byteArrayToString(e){return e.map(t=>String.fromCharCode(t)).join("")}static clamp(e,t,i){return Math.max(t,Math.min(e,i))}static wildCardMatch(e,t){return new RegExp(`^${t.split("*").join(".*")}$`).test(e)}static flipObject(e){const t={};for(const i in e){t[e[i]]=i}return t}static ISODateString(e){function t(i){return i<10?`0${i}`:i}return`${e.getUTCFullYear()}-${t(e.getUTCMonth()+1)}-${t(e.getUTCDate())}T${t(e.getUTCHours())}:${t(e.getUTCMinutes())}:${t(e.getUTCSeconds())}Z`}static getCrossOriginValue(e){if(!e){return"anonymous"}if(e==="none"){return void 0}return e}static invariant(e,t){if(!e){const i=new Error(t);throw i}}static executePromises(e){const t=e.length;let i=0;const o=[];const n=[];return new Promise((s,a)=>{const l=()=>{i++;if(i>=t){if(n.length<=0){s(o)}else{a(n)}}};const u=d=>{o.push(d);l()};const c=d=>{n.push(d);l()};e.forEach(d=>{d.then(u).catch(c)})})}};xA=td;ie(xA,"Array",uie);H=xA});var bHe,die,_He,vHe,pie,CA,ne;var Ln=p(()=>{Ms();bHe=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}];die=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd;_He=()=>typeof navigator!=="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/);vHe=(r,e)=>{if(true){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${r}; color: ${e}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]}if(false){const t=null;return[t.bgHex("#2D7BFF"),t.bgHex("#2B2B2B").white,t.bgHex("#2D7BFF"),t.bgHex(r).hex(e).bold,t.bgHex("#2B2B2B").white,t.bgHex("#2D7BFF")]}};pie=class{constructor(e="warn",t=bHe){this._levels=[...t];this._maxLevel=this.getLevelIndexByName(e);this._consoleFuncs={trace:(...i)=>{if(die()){console.groupCollapsed(...i);console.trace();console.groupEnd()}else{console.trace(...i)}}};this._levels.forEach(({name:i})=>{this[i]=(o,...n)=>{this._log(i,o,...n)}})}getLevelIndexByName(e){return H.Array.findIndex(this._levels,t=>t.name===e)}getLevelObjectByName(e){return H.Array.find(this._levels,t=>t.name===e)}canLog(e){const t=this.getLevelIndexByName(e);if(t<0){return false}return t>=this._maxLevel}setLevel(e){const t=this.getLevelIndexByName(e);if(t<0){return}this._maxLevel=t}_log(e,t,...i){const o=this.getLevelObjectByName(e);if(!o||!this.canLog(e)){return}const{name:n,type:s,background:a,color:l}=o;const u=i.filter(h=>h!==void 0).map(h=>{if(h.toObject){return JSON.parse(JSON.stringify(h.toObject()))}return h});const c=this._consoleFuncs[s]||console[s]?(...h)=>console[s](...h):(...h)=>console.log(...h);const d=u.length;const m=vHe(a,l);if(true){if(!_He()){const h=u.length;if(h<=0){c(`PhotoEditorSDK | ${t} `);return}if(h===1&&typeof u[0]==="string"){c(`PhotoEditorSDK | ${t} | ${u[0]}`);return}c(`PhotoEditorSDK | ${t} | `,...u);return}if(d<=0){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c %c  `,...m);return}if(d===1&&typeof u[0]==="string"){c(`%c  %c PhotoEditorSDK %c  %c ${t} %c  ${u[0]}  %c  `,...m);return}if(die()){console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...H.Array.init(m));c(...u);console.groupEnd()}else{c(`%c  %c PhotoEditorSDK %c  %c ${t} %c`,...H.Array.init(m),...u)}}if(false){const h=`${m[0](" ")} ${m[1]("PhotoEditorSDK")} ${m[2](" ")} ${m[3](t)}`;const f=`${m[5](" ")} `;if(d<=0){c(`${h} ${f}`);return}if(d===1&&typeof u[0]==="string"){c(`${h} ${m[4](u[0])} ${f}`);return}if(die()){console.groupCollapsed(`${h} ${f}`);c(...u);console.groupEnd()}else{c(`${h} ${f}`,...u)}}}image(e="",t){if(true){let i=new window.Image;const o=()=>{const{width:n}=i;const{height:s}=i;if(e){console.log(e)}console.log(`%c+`,`
        font-size: 1px;
        padding: 0px ${Math.floor(n/2)}px;
        line-height: ${s}px;
        background: url(${i.src});
        color: transparent;
        background-repeat: no-repeat;
        background-size: ${n}px ${s}px;`)};i.onload=o;if(t instanceof window.HTMLCanvasElement){i.src=t.toDataURL()}else if(t instanceof window.Image){i=t;o()}else if(typeof t==="string"){i.src=t}else{this.log(e,t)}return i}}texture(e="",t){if(true){if(!t){this.log(e,"texture: null or undefined");return}const i=t.getBaseTexture();const o=i.getRenderers();const n=H.Array.find(o,l=>l&&l.constructor.type==="webgl");const{width:s,height:a}=i.getFrame();if(n){const l=n.getContext();const u=i.getGLTextureForRenderer(n);this.logGlTexture(l,u,s,a,e)}else{CA.image(e,i.getSource())}}}logGlTexture(e,t,i=150,o=150,n){if(true){e.bindTexture(e.TEXTURE_2D,t);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);const a=new Uint8Array(i*o*4);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,a);e.deleteFramebuffer(s);const l=document.createElement("canvas");l.width=i;l.height=o;const u=l.getContext("2d");const c=u.createImageData(i,o);c.data.set(a);u.putImageData(c,0,0);return CA.image(n,l)}}};CA=new pie("warn");ne=CA});var gi;var rh=p(()=>{gi={load(r,e={cors:true,value:"anonymous"}){const t=()=>{if(true){return Promise.resolve([r,r])}if(false){if(r.substr(0,5)==="data:"){return Promise.resolve([r,r])}if(!r.match(/^(https?|ftp|file):\/\//)){return readFileAsync(r)}return loadRemoteFile(r)}};return t().then(([i,o])=>{return this._createAndLoadImage(i,o,e)})},loadImage(r,e={cors:true,value:"anonymous"}){if(true){return this._loadWithoutExif(r,e)}return this.load(r,e)},_loadWithoutExif(r,e={cors:true,value:"anonymous"}){return new Promise((t,i)=>{const o=new window.Image;o.addEventListener("load",()=>{t(o)});o.addEventListener("error",()=>{i(new Error(`Failed to load image at ${r}`))});if(e.cors){o.crossOrigin=e.value}o.src=r})},_createAndLoadImage(r,e,t={cors:true,value:"anonymous"}){return new Promise((i,o)=>{if(true){const n=this._loadWithoutExif(e,t).then(a=>i(a));const s=new Promise((a,l)=>{this._loadAsDataURL(e,t).then(u=>{const c=new window.Image;c.addEventListener("load",()=>{a(c)});c.src=u;c.rawSource=u}).catch(u=>{n.then(c=>a(c))})});if(this._stringEndsWith(e,".svg")){return n.then(a=>i(a))}return s.then(a=>i(a))}if(false){const n=null;const s=new n.Image;s.src=e;s.rawSource=e;s.filePath=r;i(s)}})},_stringEndsWith(r,e,t=r.length){if(t===void 0||t>r.length){t=r.length}return r.substring(t-e.length,t)===e},_loadAsDataURL(r,e={cors:true,value:"anonymous"}){if(true){return new Promise((t,i)=>{const o=new XMLHttpRequest;o.onload=function(){const n=new FileReader;n.onloadend=function(){if(n.error){i(n.error)}t(n.result)};n.readAsDataURL(o.response)};o.open("GET",r);o.responseType="blob";o.withCredentials=e.cors&&e.value==="use-credentials";o.send()})}return Promise.reject(new Error(`Loading images as data urls is only supported in browser environments.`))},loadXHR(r,e){return new Promise((t,i)=>{let o;if(window.XDomainRequest){o=new window.XDomainRequest;if(e)o.overrideMimeType(e);o.onload=function(){t(o)};o.onerror=function(n){i(n)}}else if(window.XMLHttpRequest){o=new window.XMLHttpRequest;if(e)o.overrideMimeType(e);o.onreadystatechange=function(n){if(o.readyState===4){if(o.status===200){t(o)}else{i(new Error(`HTTP Status ${o.status}`))}}}}o.open("GET",r,true);o.send()})}}});var hie=C((uwt,mie)=>{"use strict";function xHe(r,e){return Object.prototype.hasOwnProperty.call(r,e)}mie.exports=function(r,e,t,i){e=e||"&";t=t||"=";var o={};if(typeof r!=="string"||r.length===0){return o}var n=/\+/g;r=r.split(e);var s=1e3;if(i&&typeof i.maxKeys==="number"){s=i.maxKeys}var a=r.length;if(s>0&&a>s){a=s}for(var l=0;l<a;++l){var u=r[l].replace(n,"%20"),c=u.indexOf(t),d,m,h,f;if(c>=0){d=u.substr(0,c);m=u.substr(c+1)}else{d=u;m=""}h=decodeURIComponent(d);f=decodeURIComponent(m);if(!xHe(o,h)){o[h]=f}else if(Array.isArray(o[h])){o[h].push(f)}else{o[h]=[o[h],f]}}return o}});var gie=C((cwt,fie)=>{"use strict";var Ly=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};fie.exports=function(r,e,t,i){e=e||"&";t=t||"=";if(r===null){r=void 0}if(typeof r==="object"){return Object.keys(r).map(function(o){var n=encodeURIComponent(Ly(o))+t;if(Array.isArray(r[o])){return r[o].map(function(s){return n+encodeURIComponent(Ly(s))}).join(e)}else{return n+encodeURIComponent(Ly(r[o]))}}).join(e)}if(!i)return"";return encodeURIComponent(Ly(i))+t+encodeURIComponent(Ly(r))}});var yie=C(zy=>{"use strict";zy.decode=zy.parse=hie();zy.encode=zy.stringify=gie()});function Uy(r){typeof r=="string"&&(r=oh(r));var e=function(t,i,o){var n=t.auth,s=t.hostname,a=t.protocol||"",l=t.pathname||"",u=t.hash||"",c=t.query||"",d=false;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",t.host?d=n+t.host:s&&(d=n+(~s.indexOf(":")?"["+s+"]":s),t.port&&(d+=":"+t.port)),c&&typeof c=="object"&&(c=i.encode(c));var m=t.search||c&&"?"+c||"";return a&&a.substr(-1)!==":"&&(a+=":"),t.slashes||(!a||o.test(a))&&d!==false?(d="//"+(d||""),l&&l[0]!=="/"&&(l="/"+l)):d||(d=""),u&&u[0]!=="#"&&(u="#"+u),m&&m[0]!=="?"&&(m="?"+m),{protocol:a,host:d,pathname:l=l.replace(/[?#]/g,encodeURIComponent),search:m=m.replace("#","%23"),hash:u}}(r,EA.default,CHe);return""+e.protocol+e.host+e.pathname+e.search+e.hash}function bie(r,e){var t=typeof r=="string"?oh(r):r;r=typeof r=="object"?Uy(r):r;var i=oh(e),o="";t.protocol&&!t.slashes&&(o=t.protocol,r=r.replace(t.protocol,""),o+=e[0]==="/"||r[0]==="/"?"/":""),o&&i.protocol&&(o="",i.slashes||(o=i.protocol,e=e.replace(i.protocol,"")));var n=r.match(SHe);n&&!i.protocol&&(r=r.substr((o=n[1]+(n[2]||"")).length),/^\/\/[^/]/.test(e)&&(o=o.slice(0,-1)));var s=new URL(r,IA+"/"),a=new URL(e,s).toString().replace(IA,""),l=i.protocol||t.protocol;return l+=t.slashes||i.slashes?"//":"",!o&&l?a=a.replace(wA,l):o&&(a=a.replace(wA,"")),wHe.test(a)||~e.indexOf(".")||r.slice(-1)==="/"||e.slice(-1)==="/"||a.slice(-1)!=="/"||(a=a.slice(0,-1)),o&&(a=o+(a[0]==="/"?a.substr(1):a)),a}function ih(){}function oh(r,e,t){if(e===void 0&&(e=false),t===void 0&&(t=false),r&&typeof r=="object"&&r instanceof ih)return r;var i=(r=r.trim()).match(THe);r=i?i[1].replace(/\\/g,"/")+i[2]:r.replace(/\\/g,"/"),kHe.test(r)&&r.slice(-1)!=="/"&&(r+="/");var o=!/(^javascript)/.test(r)&&r.match(IHe),n=EHe.test(r),s="";o&&(SA.test(o[1])||(s=o[1].toLowerCase(),r=""+o[2]+o[3]),o[2]||(n=false,SA.test(o[1])?(s=o[1],r=""+o[3]):r="//"+o[3]),o[2].length!==3&&o[2].length!==1||(s=o[1],r="/"+o[3]));var a,l=(i?i[1]:r).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),u=l&&l[1],c=new ih,d="",m="";try{a=new URL(r)}catch(b){d=b,s||t||!/^\/\//.test(r)||/^\/\/.+[@.]/.test(r)||(m="/",r=r.substr(1));try{a=new URL(r,IA)}catch(_){return c.protocol=s,c.href=s,c}}c.slashes=n&&!m,c.host=a.host===TA?"":a.host,c.hostname=a.hostname===TA?"":a.hostname.replace(/(\[|\])/g,""),c.protocol=d?s||null:a.protocol,c.search=a.search.replace(/\\/g,"%5C"),c.hash=a.hash.replace(/\\/g,"%5C");var h=r.split("#");!c.search&&~h[0].indexOf("?")&&(c.search="?"),c.hash||h[1]!==""||(c.hash="#"),c.query=e?EA.default.decode(a.search.substr(1)):c.search.substr(1),c.pathname=m+(o?function(b){return b.replace(/['^|`]/g,function(_){return"%"+_.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(_,y){try{return decodeURIComponent(y).split("").map(function(I){var T=I.charCodeAt();return T>256||/^[a-z0-9]$/i.test(I)?I:"%"+T.toString(16).toUpperCase()}).join("")}catch(I){return y}})}(a.pathname):a.pathname),c.protocol==="about:"&&c.pathname==="blank"&&(c.protocol="",c.pathname=""),d&&r[0]!=="/"&&(c.pathname=c.pathname.substr(1)),s&&!SA.test(s)&&r.slice(-1)!=="/"&&c.pathname==="/"&&(c.pathname=""),c.path=c.pathname+c.search,c.auth=[a.username,a.password].map(decodeURIComponent).filter(Boolean).join(":"),c.port=a.port,u&&!c.host.endsWith(u)&&(c.host+=u,c.port=u.slice(1)),c.href=m?""+c.pathname+c.search+c.hash:Uy(c);var f=/^(file)/.test(c.href)?["host","hostname"]:[];return Object.keys(c).forEach(function(b){~f.indexOf(b)||(c[b]=c[b]||null)}),c}var EA,CHe,wA,TA,IA,SHe,wHe,SA,THe,IHe,EHe,kHe;var _ie=p(()=>{EA=v(yie(),1);CHe=/https?|ftp|gopher|file/;wA="http://";TA="w.w";IA=wA+TA;SHe=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i;wHe=/https?|ftp|gopher|file/;ih.prototype.parse=oh,ih.prototype.format=Uy,ih.prototype.resolve=bie,ih.prototype.resolveObject=bie;SA=/^https?|ftp|gopher|file/;THe=/^(.*?)([#?].*)/;IHe=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i;EHe=/^([a-z0-9.+-]*:)?\/\/\/*/i;kHe=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i});var DHe,Ny,Yo;var nh=p(()=>{_ie();DHe=5e3;Ny=typeof window!=="undefined"?window:global;Yo=class{constructor(e){this._url=e;this._parsedUrl=oh(this._url,true)}_isJSONPRequest(){const{query:e}=this._parsedUrl;for(const t in e){const i=e[t];if(i==="?"){return true}}return false}load(){if(this._isJSONPRequest()){return this._loadJSONP()}return this._loadJSON()}_loadJSON(){return new Promise((e,t)=>{let i;if(Ny.XDomainRequest){i=new Ny.XDomainRequest;i.onload=function(){const o=JSON.parse(i.responseText);e(o)};i.onerror=function(o){t(o)};i.open("GET",this._url,true);i.send()}else if(Ny.XMLHttpRequest){i=new XMLHttpRequest;i.onreadystatechange=function(o){if(i.readyState===4){if(i.status===200){const n=JSON.parse(i.responseText);e(n)}else{t(new Error(`HTTP Status ${i.status}`))}}};i.open("GET",this._url,true);i.send()}})}_loadJSONP(){let e=false;let t=false;const i=`pesdk${Math.round(Math.random()*99999999999999)}`;return new Promise((o,n)=>{const s=this._createJSONPNode(i);Ny[i]=a=>{this._removeJSONPNode(s);if(!e){t=true;o(a)}};Ny.setTimeout(()=>{if(!t){this._removeJSONPNode(s);e=true;n(new Error("Timeout of 5 seconds exceeded."))}},DHe)})}_createJSONPNode(e){const t=this._buildJSONPUrl(e);const i=document.querySelector("head");const o=document.createElement("script");o.src=t;i.appendChild(o);return o}_removeJSONPNode(e){e.parentNode.removeChild(e)}_buildJSONPUrl(e){const{query:t}=this._parsedUrl;let i=null;for(const o in t){if(t[o]==="?"){i=o;break}}delete this._parsedUrl.search;t[i]=e;return Uy(this._parsedUrl)}}});var kA={};wt(kA,{ImageLoader:()=>gi,JSONLoader:()=>Yo});var vie=p(()=>{rh();nh()});var yi,X;var rd=p(()=>{yi=class{constructor(e,t,i,o=1){this.r=e;this.g=t;this.b=i;this.a=o}toRGBA(){const e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a.toFixed(2)];return`rgba(${e.join(",")})`}set(e,t,i,o=this.a){this.r=e;this.g=t;this.b=i;this.a=o;return this}toRGB(){return[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)]}toHex(){const e=[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))];return`#${e.join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){const e=Math.max(this.r,this.g,this.b);const t=Math.min(this.r,this.g,this.b);let i;let o;const n=e;const s=e-t;o=e===0?0:s/e;if(e===t){i=0}else{switch(e){case this.r:i=(this.g-this.b)/s;if(this.g<this.b){i+=6}break;case this.g:i=(this.b-this.r)/s+2;break;case this.b:i=(this.r-this.g)/s+4;break}i/=6}return[i,o,n]}fromHSV(e,t,i){this.copy(yi.fromHSV(e,t,i));return this}static fromHSV(e,t,i,o=1){let[n,s,a]=[];const l=Math.floor(e*6);const u=e*6-l;const c=i*(1-t);const d=i*(1-u*t);const m=i*(1-(1-u)*t);switch(l%6){case 0:n=i;s=m;a=c;break;case 1:n=d;s=i;a=c;break;case 2:n=c;s=i;a=m;break;case 3:n=c;s=d;a=i;break;case 4:n=m;s=c;a=i;break;case 5:n=i;s=c;a=d;break}return new yi(n,s,a,o)}static fromArray(e){return new yi(e[0],e[1],e[2],e[3])}static fromHex(e){const[t,i,o]=e.match(/[0-9A-fa-f]{1,2}/g);return new yi(parseInt(t,16)/255,parseInt(i,16)/255,parseInt(o,16)/255,1)}clone(){return new yi(this.r,this.g,this.b,this.a)}cloneRGB(){return new yi(this.r,this.g,this.b,1)}add(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;this.a+=e.a;return this}minus(e){this.r-=e.r;this.g-=e.g;this.b-=e.b;this.a-=e.a;return this}multiplyScalar(e){this.r*=e;this.g*=e;this.b*=e;this.a*=e;return this}divideScalar(e){this.r/=e;this.g/=e;this.b/=e;this.a/=e;return this}clamp(e,t){this.r=Math.min(Math.max(this.r,e),t);this.g=Math.min(Math.max(this.g,e),t);this.b=Math.min(Math.max(this.b,e),t);this.a=Math.min(Math.max(this.a,e),t);return this}mix(e,t){this.r=(1-t)*this.r+t*e.r;this.g=(1-t)*this.g+t*e.g;this.b=(1-t)*this.b+t*e.b;this.a=(1-t)*this.a+t*e.a;return this}copy(e){this.r=e.r;this.g=e.g;this.b=e.b;this.a=e.a;return this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}_componentToHex(e){const t=e.toString(16);return t.length===1?`0${t}`:t}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new yi(0,0,0,0)}static get WHITE(){return new yi(1,1,1,1)}static get BLACK(){return new yi(0,0,0,1)}static get RED(){return new yi(1,0,0,1)}static get BLUE(){return new yi(0,0,1,1)}static get GREEN(){return new yi(0,1,0,1)}};X=yi});var OHe,xie,bi;var sh=p(()=>{Ln();OHe=12;xie=class{constructor(){this._maxListeners=OHe;this._events={};this._pipeDestinations=[]}pipeEvents(e){this._pipeDestinations.push(e)}unpipeEvents(e){const t=this._pipeDestinations.indexOf(e);if(t===-1){return}this._pipeDestinations.splice(t,1)}on(e,t){if(typeof e==="undefined"){throw new Error(`Invalid event type: \`${e}\``)}if(typeof t!=="function"){throw new TypeError}const i=this._events[e]||(this._events[e]=[]);if(i.indexOf(t)!==-1){return this}i.push(t);if(this._maxListeners&&i.length>this._maxListeners){ne.warn("EventEmitter",`Possible memory leak detected, added ${i.length} \`${e}\` listeners (current limit is ${this._maxListeners})`);if(typeof console!=="undefined"){console.trace()}}return this}once(e,t){if(typeof e==="undefined"){throw new Error(`Invalid event type: \`${e}\``)}const i=this;function o(){i.off(e,o);t.apply(null,arguments)}return this.on(e,o)}off(e,...t){if(typeof e==="undefined"){throw new Error(`Invalid event type: \`${e}\``)}if(t.length===0){this._events[e]=null;return this}const i=t[0];if(typeof i!=="function"){throw new TypeError}const o=this._events[e];if(!o||!o.length){return this}const n=o.indexOf(i);if(n===-1){return this}o.splice(n,1);return this}emit(e,...t){if(typeof e==="undefined"){throw new Error(`Invalid event type: \`${e}\``)}this._pipeDestinations.forEach(o=>{o.emit(e,...t)});const i=this._events[e];if(!i||!i.length){return false}i.slice(0).forEach(o=>o.apply(null,t));return true}setMaxListeners(e){if(parseInt(e,10)!==e){throw new TypeError}this._maxListeners=e}};bi=xie});var id;var DA=p(()=>{Ln();wn();id={checkFramebufferStatus(r,e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);const i={[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[e.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};if(t!==e.FRAMEBUFFER_COMPLETE){ne.warn(r,`Framebuffer incomplete: ${i[t]}`)}},determineGPUName(r){let e=null;let t=null;if(!r){t=document.createElement("canvas");r=t.getContext("experimental-webgl")||t.getContext("webgl")}const i=r&&r.getExtension("WEBGL_debug_renderer_info");if(i){e=r.getParameter(i.UNMASKED_RENDERER_WEBGL);t&&t.remove()}st(t);return e},isGPUBlacklisted(r,e=null){return false}}});var eS;var Cie=p(()=>{eS=r=>typeof r==="number"});var RHe,od,tS,he;var il=p(()=>{Cie();RHe=r=>r instanceof he;od=(r,e)=>{if(RHe(r)){return{x:r.x,y:r.y}}return{x:r,y:eS(e)?e:r}};tS=(r,e)=>(t,i)=>{const{x:o,y:n}=od(t,i);r.x=e(r.x,o);r.y=e(r.y,n);return r};he=class{constructor(e=0,t=0){this.add=tS(this,(e,t)=>e+t);this.subtract=tS(this,(e,t)=>e-t);this.divide=tS(this,(e,t)=>e/t);this.multiply=tS(this,(e,t)=>e*t);this.x=e;this.y=t}set(e,t){const{x:i,y:o}=od(e,t);this.x=i;this.y=o;return this}clone(){return new he(this.x,this.y)}copy(e){this.x=e.x;this.y=e.y;return this}clamp(e,t){if(eS(e)){e=new he(e,e)}if(eS(t)){t=new he(t,t)}if(e){this.x=Math.max(e.x,this.x);this.y=Math.max(e.y,this.y)}if(t){this.x=Math.min(t.x,this.x);this.y=Math.min(t.y,this.y)}return this}dot(e,t){const{x:i,y:o}=od(e,t);return this.x*i+this.y*o}equals(e,t){const{x:i,y:o}=od(e,t);return i===this.x&&o===this.y}flip(){const e=this.x;this.x=this.y;this.y=e;return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}floor(){this.x|=0;this.y|=0;return this}abs(){this.x=Math.abs(this.x);this.y=Math.abs(this.y);return this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(e){this.x=parseFloat(this.x.toFixed(e));this.y=parseFloat(this.y.toFixed(e));return this}asArray(e=false){if(e){return[this.y,this.x]}return[this.x,this.y]}static fromObject(e){return new he(e.x,e.y)}static get NULL(){return new he(0,0)}}});var zi;var OA=p(()=>{il();zi=class{constructor(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;this.reset()}multiply(e){let t;let i;let o;let n;let s;let a;t=this.a*e.a+this.b*e.c;i=this.a*e.b+this.b*e.d;o=this.c*e.a+this.d*e.c;n=this.c*e.b+this.d*e.d;s=this.tx*e.a+this.ty*e.c+e.tx;a=this.tx*e.b+this.ty*e.d+e.ty;this.a=t;this.b=i;this.c=o;this.d=n;this.tx=s;this.ty=a;return this}applyToVector(e){const{x:t,y:i}=e;e=e.clone();e.x=this.a*t+this.c*i+this.tx;e.y=this.b*t+this.d*i+this.tx;return e}applyInverseToVector(e){const t=1/(this.a*this.d+this.c*-this.b);const{x:i,y:o}=e;e=e.clone();e.x=this.d*t*i+-this.c*t*o+(this.ty*this.c-this.tx*this.d)*t;e.y=this.a*t*o+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t;return e}rectangleToCoordinates(e,t=new he(0,0)){const i=e.width*(1-t.x);const o=e.width*-t.x;const n=e.height*(1-t.y);const s=e.height*-t.y;const a=[];a.push(new he(this.a*o+this.c*s+this.tx,this.d*s+this.b*o+this.ty));a.push(new he(this.a*i+this.c*s+this.tx,this.d*s+this.b*i+this.ty));a.push(new he(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty));a.push(new he(this.a*o+this.c*n+this.tx,this.d*n+this.b*o+this.ty));return a}reset(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}toArray(){const e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];if(typeof Float32Array==="undefined"){return e}return new Float32Array(e)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new zi}}});var Ct;var RA=p(()=>{il();Ct=class{constructor(e=0,t=0,i=0,o=0){this.x=0;this.y=0;this.width=0;this.height=0;this.x=e;this.y=t;this.width=i;this.height=o}set(e,t,i,o){this.x=e;this.y=t;this.width=i;this.height=o;return this}clone(){return new Ct(this.x,this.y,this.width,this.height)}copy(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return this}equals(e,t,i,o){if(e instanceof Ct){return e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}return e===this.x&&t===this.y&&i===this.width&&o===this.height}translate(e,t){const{x:i,y:o}=od(e,t);this.x+=i;this.y+=o;return this}scale(e,t){const{x:i,y:o}=od(e,t);this.width*=i;this.height*=o;return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.width=Math.round(this.width);this.height=Math.round(this.height);return this}getPosition(){return new he(this.x,this.y)}getSize(){return new he(this.width,this.height)}insetBy(e,t){this.x+=e;this.y+=t;this.width-=2*e;this.height-=2*t;return this}intersects(e){const t=new he(this.x,this.y);const i=new he(this.x+this.width,this.y+this.height);const o=new he(e.x,e.y);const n=new he(e.x+e.width,e.y+e.height);if(o.x>i.x||t.x>n.x||n.y<t.y||i.y<o.y){return false}return true}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(e,t){let i=false;if(t.x-e.x<0){i=true}const o=i?t:e;const n=i?e:t;const s=n.x-o.x;const a=n.y-o.y;return new Ct(o.x,o.y,s,a)}}});var ah,AHe,Du;var tr=p(()=>{Ln();xo();rd();sh();DA();OA();RA();il();Ms();ah=2e3;AHe=5;Du=AHe*4});var nd;var rS=p(()=>{tr();nd=class{constructor(){this._position=new he(0,0);this._scale=new he(1,1);this._pivot=new he(0,0);this._rotation=0;this._lastRotation=null;this._alpha=1;this._visible=true;this._worldTransform=new zi;this._parent=null;this._shaders=[];this._boundsNeedUpdate=true;this._bounds=new Ct(0,0,1,1);this._localBoundsNeedUpdate=true;this._localBounds=new Ct(0,0,1,1);this._filterRectangle=new Ct(0,0,0,0)}renderWebGL(e){ne.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(e){ne.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){const e=this._parent?this._parent.getWorldTransform():zi.IDENTITY;const t=this._worldTransform;const i=Math.sin(this._rotation);const o=Math.cos(this._rotation);t.a=o*this._scale.x;t.b=i*this._scale.x;t.c=-i*this._scale.y;t.d=o*this._scale.y;t.tx=this._position.x;t.ty=this._position.y;if(this._pivot.x||this._pivot.y){t.tx-=this._pivot.x*t.a+this._pivot.y*t.c;t.ty-=this._pivot.x*t.b+this._pivot.y*t.d}t.multiply(e);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}addShader(e){this._shaders.push(e)}removeShader(e){const t=this._shaders.indexOf(e);if(t!==-1){this._shaders.splice(t,1);return true}return false}removeShaderAt(e){if(!this._shaders[e]){return false}this._shaders.splice(e,1);return true}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(e,t){this._position.set(e,t);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getScale(){return this._scale}setScale(e,t){this._scale.set(e,t);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getPivot(){return this._pivot}setPivot(e,t){this._pivot.set(e,t);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getRotation(){return this._rotation}setRotation(e){this._rotation=e;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getAlpha(){return this._alpha}setAlpha(e){this._alpha=e}getWorldAlpha(){if(this._parent){return this._parent.getAlpha()*this._alpha}return this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(e){this._parent=e}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(e){this._filterRectangle.copy(e)}isVisible(){return this._visible}setVisible(e){this._visible=e}}});var Ls;var iS=p(()=>{tr();rS();Ls=class extends nd{constructor(){super();this._children=[];this._filters=[]}addFilter(e){this._filters.push(e)}removeFilter(e){const t=this._filters.indexOf(e);if(t!==-1){this._filters.splice(t,1);return true}return false}setFilters(e){this._filters=e}addChild(e){const t=e.getParent();if(t instanceof Ls){t.removeChild(e)}e.setParent(this);this._children.push(e)}prependChild(e){const t=e.getParent();if(t instanceof Ls){t.removeChild(e)}e.setParent(this);this._children.unshift(e)}hasChild(e){const t=this._children.indexOf(e);return t!==-1}removeChild(e){const t=this._children.indexOf(e);if(t!==-1){this._children.splice(t,1);e.setParent(null)}else{ne.info(this.constructor.name,"Tried to remove a child that does not exist")}}clearChildren(){this._children=[]}renderWebGL(e){if(!this._visible){return}const t=e.getFilterManager();if(this._filters&&this._filters.length){t.pushFilters(this,this._filters)}e.getCurrentObjectRenderer().start();this._renderWebGL(e);this._children.forEach(i=>{i.renderWebGL(e)});e.getCurrentObjectRenderer().flush();if(this._filters&&this._filters.length){t.popFilters()}e.getCurrentObjectRenderer().start()}_renderWebGL(e){}renderCanvas(e){if(!this._visible){return}const t=e.getFilterManager();if(this._filters&&this._filters.length){t.pushFilters(this,this._filters)}this._renderCanvas(e);this._children.forEach(i=>{i.renderCanvas(e)});if(this._filters&&this._filters.length){t.popFilters()}}_renderCanvas(e){}updateTransform(){super.updateTransform();this._children.forEach(e=>{e.updateTransform()})}getLocalBounds(){if(this._localBoundsNeedUpdate){this._localBoundsNeedUpdate=false}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate){this._boundsNeedUpdate=false}return this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}});function Tie(r,e,t,i,o,n){if(isNaN(n)||n<1){return}n|=0;var s=r.data;var a,l,u,c,d,m,h,f,b,_,y,I,T,D,P,k,A,Q,R,M,oe,ce,ue,Se;var Pt=n+n+1;var ee=i-1;var V=o-1;var j=n+1;var be=j*(j+1)/2;var pe=new wie;var De;var ke=pe;for(u=1;u<Pt;u++){ke=ke.next=new wie;if(u==j)De=ke}ke.next=pe;var Me=null;var mt=null;h=m=0;var Bt=FHe[n];var Oi=PHe[n];for(l=0;l<o;l++){k=A=Q=R=f=b=_=y=0;I=j*(M=s[m]);T=j*(oe=s[m+1]);D=j*(ce=s[m+2]);P=j*(ue=s[m+3]);f+=be*M;b+=be*oe;_+=be*ce;y+=be*ue;ke=pe;for(u=0;u<j;u++){ke.r=M;ke.g=oe;ke.b=ce;ke.a=ue;ke=ke.next}for(u=1;u<j;u++){c=m+((ee<u?ee:u)<<2);f+=(ke.r=M=s[c])*(Se=j-u);b+=(ke.g=oe=s[c+1])*Se;_+=(ke.b=ce=s[c+2])*Se;y+=(ke.a=ue=s[c+3])*Se;k+=M;A+=oe;Q+=ce;R+=ue;ke=ke.next}Me=pe;mt=De;for(a=0;a<i;a++){s[m+3]=ue=y*Bt>>Oi;if(ue!==0){ue=255/ue;s[m]=(f*Bt>>Oi)*ue;s[m+1]=(b*Bt>>Oi)*ue;s[m+2]=(_*Bt>>Oi)*ue}else{s[m]=s[m+1]=s[m+2]=0}f-=I;b-=T;_-=D;y-=P;I-=Me.r;T-=Me.g;D-=Me.b;P-=Me.a;c=h+((c=a+n+1)<ee?c:ee)<<2;k+=Me.r=s[c];A+=Me.g=s[c+1];Q+=Me.b=s[c+2];R+=Me.a=s[c+3];f+=k;b+=A;_+=Q;y+=R;Me=Me.next;I+=M=mt.r;T+=oe=mt.g;D+=ce=mt.b;P+=ue=mt.a;k-=M;A-=oe;Q-=ce;R-=ue;mt=mt.next;m+=4}h+=i}for(a=0;a<i;a++){A=Q=R=k=b=_=y=f=0;m=a<<2;I=j*(M=s[m]);T=j*(oe=s[m+1]);D=j*(ce=s[m+2]);P=j*(ue=s[m+3]);f+=be*M;b+=be*oe;_+=be*ce;y+=be*ue;ke=pe;for(u=0;u<j;u++){ke.r=M;ke.g=oe;ke.b=ce;ke.a=ue;ke=ke.next}d=i;for(u=1;u<=n;u++){m=d+a<<2;f+=(ke.r=M=s[m])*(Se=j-u);b+=(ke.g=oe=s[m+1])*Se;_+=(ke.b=ce=s[m+2])*Se;y+=(ke.a=ue=s[m+3])*Se;k+=M;A+=oe;Q+=ce;R+=ue;ke=ke.next;if(u<V){d+=i}}m=a;Me=pe;mt=De;for(l=0;l<o;l++){c=m<<2;s[c+3]=ue=y*Bt>>Oi;if(ue>0){ue=255/ue;s[c]=f*Bt>>Oi;s[c+1]=b*Bt>>Oi;s[c+2]=_*Bt>>Oi}else{s[c]=s[c+1]=s[c+2]=0}f-=I;b-=T;_-=D;y-=P;I-=Me.r;T-=Me.g;D-=Me.b;P-=Me.a;c=a+((c=l+j)<V?c:V)*i<<2;f+=k+=Me.r=s[c];b+=A+=Me.g=s[c+1];_+=Q+=Me.b=s[c+2];y+=R+=Me.a=s[c+3];Me=Me.next;I+=M=mt.r;T+=oe=mt.g;D+=ce=mt.b;P+=ue=mt.a;k-=M;A-=oe;Q-=ce;R-=ue;mt=mt.next;m+=i}}}function wie(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var FHe,PHe;var Iie=p(()=>{"use strict";FHe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];PHe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]});var zs,qy;var AA=p(()=>{rd();zs=class{constructor(e=1,t=0,i=0,o=0,n=0,s=0,a=1,l=0,u=0,c=0,d=0,m=0,h=1,f=0,b=0,_=0,y=0,I=0,T=1,D=0){this.set(e,t,i,o,n,s,a,l,u,c,d,m,h,f,b,_,y,I,T,D)}set(e,t,i,o,n,s,a,l,u,c,d,m,h,f,b,_,y,I,T,D){this.a=e;this.b=t;this.c=i;this.d=o;this.e=n;this.f=s;this.g=a;this.h=l;this.i=u;this.j=c;this.k=d;this.l=m;this.m=h;this.n=f;this.o=b;this.p=_;this.q=y;this.r=I;this.s=T;this.t=D}reset(){this.a=1;this.b=0;this.c=0;this.d=0;this.e=0;this.f=0;this.g=1;this.h=0;this.i=0;this.j=0;this.k=0;this.l=0;this.m=1;this.n=0;this.o=0;this.p=0;this.q=0;this.r=0;this.s=1;this.t=0}apply(e){const t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e;const i=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j;const o=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o;const n=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new X(t,i,o,n)}multiply(e){let t;let i;let o;let n;let s;let a;let l;let u;let c;let d;let m;let h;let f;let b;let _;let y;let I;let T;let D;let P;const k=e;const A=this;t=k.a*A.a+k.b*A.f+k.c*A.k+k.d*A.p;i=k.a*A.b+k.b*A.g+k.c*A.l+k.d*A.q;o=k.a*A.c+k.b*A.h+k.c*A.m+k.d*A.r;n=k.a*A.d+k.b*A.i+k.c*A.n+k.d*A.s;a=k.f*A.a+k.g*A.f+k.h*A.k+k.i*A.p;l=k.f*A.b+k.g*A.g+k.h*A.l+k.i*A.q;u=k.f*A.c+k.g*A.h+k.h*A.m+k.i*A.r;c=k.f*A.d+k.g*A.i+k.h*A.n+k.i*A.s;m=k.k*A.a+k.l*A.f+k.m*A.k+k.n*A.p;h=k.k*A.b+k.l*A.g+k.m*A.l+k.n*A.q;f=k.k*A.c+k.l*A.h+k.m*A.m+k.n*A.r;b=k.k*A.d+k.l*A.i+k.m*A.n+k.n*A.s;y=k.p*A.a+k.q*A.f+k.r*A.k+k.s*A.p;I=k.p*A.b+k.q*A.g+k.r*A.l+k.s*A.q;T=k.p*A.c+k.q*A.h+k.r*A.m+k.s*A.r;D=k.p*A.d+k.q*A.i+k.r*A.n+k.s*A.s;s=k.a*A.e+k.b*A.j+k.c*A.o+k.d*A.t+k.e;d=k.f*A.e+k.g*A.j+k.h*A.o+k.i*A.t+k.j;_=k.k*A.e+k.l*A.j+k.m*A.o+k.n*A.t+k.o;P=k.p*A.e+k.q*A.j+k.r*A.o+k.s*A.t+k.t;this.a=t;this.b=i;this.c=o;this.d=n;this.e=s;this.f=a;this.g=l;this.h=u;this.i=c;this.j=d;this.k=m;this.l=h;this.m=f;this.n=b;this.o=_;this.p=y;this.q=I;this.r=T;this.s=D;this.t=P;return this}clone(){const e=new zs;e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t);return e}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},
      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},
      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},
      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map(e=>this[e])}static get IDENTITY(){return new zs}static createBrightnessMatrix(e){const t=new zs;t.e=e;t.j=e;t.o=e;return t}static createContrastMatrix(e){const t=new zs;const i=(1-e)/2;t.a=t.g=t.m=e;t.e=t.j=t.o=i;return t}static createSaturationMatrix(e=1){const t=new zs;const i=1-e;const o=.213*i;const n=.715*i;const s=.072*i;t.a=o+e;t.b=n;t.c=s;t.f=o;t.g=n+e;t.h=s;t.k=o;t.l=n;t.m=s+e;return t}static createExposureMatrix(e=0){const t=Math.pow(2,e);return new zs(t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0)}static createLinearMatrix(e=1,t=0){const i=new zs;i.a=i.g=i.m=e;i.e=i.j=i.o=t;return i}};qy=zs});var lh,Oe;var uh=p(()=>{xo();Bs();rd();sh();AA();il();Ms();lh=class extends bi{constructor(e={},t={}){super();this.availableOptions={...Object.getPrototypeOf(this).availableOptions,...t};this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this);this._initOptions(e)}_buildConfigError(e){let t="";if(this.constructor.name){t=`${this.constructor.name}: `}t+=e;return new Error(t)}_onOptionsChange(){}validateSettings(){return new Promise((e,t)=>{for(const i in this.availableOptions){const o=this.availableOptions[i];if(o.required&&typeof this._options[i]==="undefined"){return t(this._buildConfigError(`Option \`${i}\` is required.`))}}e()})}_initOptions(e={}){this._options={};let t;let i;let o;const n=this;for(t in this.availableOptions){o=t.charAt(0).toUpperCase()+t.slice(1);i=this.availableOptions[t];if(["string","number","boolean","object","vector2","color","configurable","color-matrix","array","image","function","*"].indexOf(i.type)===-1){throw this._buildConfigError(`Unknown option type: \`${i.type}\``)}const s=function a(l){n[`set${o}`]=function(u,c,d){n.setOption(l,u,c,d)};n[`get${o}`]=function(){return n.getOption(l)}};s(t);if(i.type==="configurable"){this._options[t]=new lh(void 0,i.structure||{});this._options[t].on("update",this._onConfigurableUpdate)}if(!(t in e)||typeof e[t]==="undefined"){if(typeof i.default!=="undefined"){let a=i.default;if(typeof i.default==="function"){a=i.default()}this[`set${o}`](a,false,true)}else if(i.type!=="configurable"){this._options[t]=void 0}}}for(t in e){if(typeof this.availableOptions[t]==="undefined"){throw new Error(`Invalid option: ${t}`)}if(typeof e[t]!=="undefined"){o=t.charAt(0).toUpperCase()+t.slice(1);this[`set${o}`](e[t],false,true)}}}set(e,t=true){Object.keys(e).forEach(i=>{this.setOption(i,e[i],false)});this._onOptionsChange();if(t){this.emit("update",this,e)}}getOption(e){return this._options[e]}hasOption(e){return!!this.availableOptions[e]}getOptionDefault(e){const t=this.availableOptions[e];if(!t){throw new Error(`Invalid option: ${e}`)}return t.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){const e={};for(const t in this.availableOptions){const i=this.availableOptions[t].default;if(typeof i==="undefined")continue;e[t]=i}return e}getOptions(){return{...this._options}}equals(e){const t=e.getOptions();return this.optionsEqual(t)}optionsEqual(e){for(const t in e){const i=e[t];if(!this._optionEquals(t,i)){return false}}return true}_optionEquals(e,t){const i=this.availableOptions[e];if(typeof i==="undefined"){throw new Error(`Invalid option: ${e}`)}const o=this.availableOptions[e].type;const n=this._options[e];if(n===t)return true;if(typeof t==="undefined"||typeof n==="undefined")return false;switch(o){case"object":if(typeof n.optionsEqual==="function"){return n.optionsEqual(t._options)}return n===t;case"string":case"number":case"boolean":case"function":case"*":return n===t;case"vector2":return n.equals(t);case"color":case"color-matrix":return t.equals(n);case"configurable":return n.optionsEqual(t);case"array":return this._arrayOptionEquals(e,t);case"image":return n.src===t.src}}_arrayOptionEquals(e,t){const i=this._options[e];if(t.length!==i.length){return false}let o=true;for(let n=0;n<i.length;n++){const s=i[n];const a=t[n];if(s instanceof lh){if(typeof a==="undefined"||!s.optionsEqual(a)){o=false;break}}else if(a!==s){o=false;break}}return o}serializeOptions(e=Object.keys(this._options),t=false){const i={};e.forEach(o=>{if(typeof this.availableOptions[o]==="undefined"){return Log.warn(`Trying to serialize a key that does not exist: ${o}`)}if(this.availableOptions[o].serializable===false)return;i[o]=this.serializeOption(o,t)});return i}serializeOption(e,t=false){const i=this.availableOptions[e];const o=i.type;const n=this._options[e];if(!n)return n;if(i.serializable===false){throw new Error(`Option \`${e}\` is not serializable.`)}switch(o){case"string":case"number":case"boolean":case"object":case"function":case"*":return n;case"vector2":return t?n.toObject():n.clone();case"color":case"color-matrix":return t?n.toArray():n.clone();case"configurable":return n.serializeOptions(void 0,t);case"array":return n.slice(0);case"image":return t?n.src:n}}setOption(e,t,i=true,o=false){const n=this.availableOptions[e];if(!n){throw new Error(`Invalid option: ${e}`)}if(typeof n.setter!=="undefined"){t=n.setter.call(this,t,o)}if(typeof n.validation!=="undefined"){n.validation(t)}if(t===null||typeof t==="undefined"){if(n.required){throw this._buildConfigError(`Option \`${e}\` is required.`)}this._options[e]=t}else{switch(n.type){case"string":{if(typeof t!=="string"){throw this._buildConfigError(`Option \`${e}\` has to be a string.`)}const{available:s}=n;if(typeof s!=="undefined"&&s.indexOf(t)===-1){throw this._buildConfigError(`Invalid value for \`${e}\` (valid values are: ${n.available.join(", ")})`)}this._options[e]=t;break}case"number":if(typeof t!=="number"){throw this._buildConfigError(`Option \`${e}\` has to be a number.`)}this._options[e]=t;break;case"boolean":if(typeof t!=="boolean"){throw this._buildConfigError(`Option \`${e}\` has to be a boolean.`)}this._options[e]=t;break;case"vector2":if(!(t instanceof he)&&!(typeof t==="object"&&"x"in t&&"y"in t)){throw this._buildConfigError(`Option \`${e}\` has to be an instance of Vector2 or an Object holding x and y values.`)}if(t instanceof he){this._options[e]=t.clone()}else{this._options[e]=he.fromObject(t)}break;case"color":if(!(t instanceof X)){throw this._buildConfigError(`Option \`${e}\` has to be an instance of Color.`)}this._options[e]=t;break;case"color-matrix":if(!(t instanceof qy)){throw this._buildConfigError(`Option \`${e}\` has to be an instance of ColorMatrix.`)}this._options[e]=t.clone();break;case"function":if(typeof t!=="function"){throw this._buildConfigError(`Option \`${e}\` has to be a function.`)}this._options[e]=t;break;case"object":case"*":this._options[e]=t;break;case"image":{const{Image:s}=Pr;if(typeof t==="string"){const a=new s;if(lie(a)){a.crossOrigin=H.getCrossOriginValue(n.crossOrigin)}a.src=t;this._options[e]=a}else if(t instanceof s||typeof HTMLCanvasElement!=="undefined"&&t instanceof HTMLCanvasElement||typeof HTMLImageElement!=="undefined"&&t instanceof HTMLImageElement){this._options[e]=t}else{throw this._buildConfigError(`Option \`${e}\` has to be an Image, Canvas or String.`)}break}case"configurable":if(t instanceof lh){this._options[e]=t}else{this._options[e].set(t)}break;case"array":if(!(t instanceof Array)){throw this._buildConfigError(`Option \`${e}\` has to be an Array.`)}this._options[e]=t.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${n.type}\``)}}if(i){this._onOptionsChange();this.emit("update",this,{[e]:t})}}_onConfigurableUpdate(...e){this.emit("update",...e)}hasChanges(){const e=this.getDefaultOptions();return!this.optionsEqual(e)}};Oe=lh});var Hy;var FA=p(()=>{xo();tr();tr();Hy=class{constructor(e,t,i,o={},n=[]){this._program=null;this._renderer=e;this._vertexSource=t;this._fragmentSource=i;this._uniforms=o;this._uniformLocations={};this._attributes=n;this._attributeLocations={};this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._init()}_init(){this._compile();const e=this._renderer.getContext();e.useProgram(this._program);this._cacheUniformLocations();this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(e,t){const i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,e);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t);i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,false,Du,0);i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,false,Du,2*4);i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,true,Du,4*4)}syncUniforms(){Object.keys(this._uniforms).forEach(e=>{this.syncUniform(e)})}syncUniform(e){const t=this._renderer.getContext();const i=this._uniforms[e];const o=this._uniformLocations[e];switch(i.type){case"sampler2d":t.uniform1i(o,i.value);break;case"i":case"1i":t.uniform1i(o,i.value);break;case"2i":t.uniform2i(o,i.value[0],i.value[1]);break;case"3i":t.uniform3i(o,i.value[0],i.value[1],i.value[2]);break;case"4i":t.uniform4i(o,i.value[0],i.value[1],i.value[2],i.value[3]);break;case"f":case"1f":t.uniform1f(o,i.value);break;case"2f":t.uniform2f(o,i.value[0],i.value[1]);break;case"3f":t.uniform3f(o,i.value[0],i.value[1],i.value[2]);break;case"4f":t.uniform4f(o,i.value[0],i.value[1],i.value[2],i.value[3]);break;case"2fv":t.uniform2fv(o,i.value);break;case"mat3":case"mat3fv":t.uniformMatrix3fv(o,false,i.value);break;case"mat4":t.uniformMatrix4fv(o,false,i.value);break;default:ne.warn(this.constructor.name,`Unknown uniform type: ${i.type}`)}}_cacheAttributeLocations(){const e=this._renderer.getContext();this._attributes.forEach(t=>{if(this._program){this._attributeLocations[t]=e.getAttribLocation(this._program,t)}})}_cacheUniformLocations(){const e=this._renderer.getContext();const t=Object.keys(this._uniforms);t.forEach(i=>{if(this._program){const o=e.getUniformLocation(this._program,i);if(o){this._uniformLocations[i]=o}}})}_addPrecisionToSource(e){const t=this._renderer.getMaxFloatPrecision();let i="mediump";if(H.isMobile()&&t==="highp"){i="highp"}return`precision ${i} float;
${e}`}_compile(){const e=this._renderer.getContext();const t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;const i=this._addPrecisionToSource(this._fragmentSource);const o=this._compileShader(e.FRAGMENT_SHADER,i);this._fragmentShader=o;const n=e.createProgram();if(!n){return}e.attachShader(n,t);e.attachShader(n,o);e.linkProgram(n);const s=e.getProgramParameter(n,e.LINK_STATUS);if(!s){let a=e.getProgramInfoLog(n);if(e.isContextLost())a="WebGL context lost";e.deleteProgram(n);ne.error(this.constructor.name,`WebGL program linking error: ${a}`)}else{this._program=n}}_compileShader(e,t){const i=this._renderer.getContext();const o=i.createShader(e);if(!o){throw new Error(`Cannot create shared: ${JSON.stringify(e)}`)}i.shaderSource(o,t);i.compileShader(o);const n=i.getShaderParameter(o,i.COMPILE_STATUS);if(!n){let s=i.getShaderInfoLog(o);if(i.isContextLost())s="WebGL context lost";i.deleteShader(o);ne.error(this.constructor.name,`WebGL shader compilation error: ${s}`)}return o}setUniform(e,t,i=false){this._uniforms[e].value=t;if(i){this.syncUniform(e)}}setUniforms(e,t=false){Object.keys(e).forEach(i=>{this._uniforms[i].value=e[i];if(t){this.syncUniform(i)}})}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){const e=this._renderer.getContext();e.deleteProgram(this._program);e.deleteShader(this._vertexShader);e.deleteShader(this._fragmentShader);this._renderer.off("context",this._onContextChange)}}});var kie;var Eie=p(()=>{kie="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"});var Oie;var Die=p(()=>{Oie="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"});var LHe,ol,PA;var Rie=p(()=>{xo();tr();FA();Eie();Die();LHe=new zi;ol={vertexSource:Oie,fragmentSource:kie,uniforms:{u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:LHe.toArray()}},attributes:["a_position","a_texCoord","a_color"]};PA=class extends Hy{constructor(e,t=ol.vertexSource,i=ol.fragmentSource){super(e,t,i,ol.uniforms,ol.attributes)}}});var BA=p(()=>{FA();Rie()});var zn;var ch=p(()=>{wn();Iie();xo();uh();tr();BA();Bs();zn=class extends Oe{constructor(e={},t={}){super(e,t);this._initOptions(e)}_initOptions(e={}){this._shaders=[];this._availableUniforms=ol.uniforms;this._attributes=ol.attributes;this._vertexSource=ol.vertexSource;this._fragmentSource=ol.fragmentSource;this._initUniforms();super._initOptions(e)}_initUniforms(){this._uniforms={};for(const e in this._availableUniforms){const t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(const e in this.availableOptions){const t=this.availableOptions[e];if(!t.uniformType){ne.trace(this.constructor.name,`Option \`${e}\` is missing a \`uniformType\`!`)}else{this._uniforms[`u_${e}`]={type:t.uniformType,value:t.default||null}}}}setOption(e,t,i=true){super.setOption(e,t,i);let o=t;const n=this.availableOptions[e];if(!n.uniformType){return}const s=`u_${e}`;switch(n.type){case"color":if(n.uniformType==="4f"){o=t.toGLColor()}else if(n.uniformType==="3f"){o=t.toRGBGLColor()}break;case"vector2":o=[t.x,t.y];break;case"color-matrix":{o=[t.a,t.b,t.c,t.d,t.f,t.g,t.h,t.i,t.k,t.l,t.m,t.n,t.p,t.q,t.r,t.s];const a=[t.e,t.j,t.o,t.t];this._uniforms[`${s}_vec`]={value:a,type:"4f"}}}this.setUniform(s,o)}setUniform(e,t,i=false){this._uniforms[e].value=t}setUniforms(e,t=false){Object.entries(e).forEach(([i,o])=>{this._uniforms[i].value=o;if(t){this.syncUniform(i)}})}syncUniform(e){this._shaders.forEach(t=>{t.syncUniform(e)})}syncUniforms(){this._shaders.forEach(e=>{e.syncUniforms()})}getShaderForRenderer(e){const{id:t}=e;if(!this._shaders)this._shaders=[];let i=this._shaders[t];if(!i){i=new Hy(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes);this._shaders[t]=i}return i}apply(e,t,i,o=false){if(eh(e)){this._applyWebGL(e,t,i,o)}else{this._applyCanvas(e,t,i,o)}}_applyWebGL(e,t,i,o=false){const n=e.getContext();const s=this.getShaderForRenderer(e);e.setRenderTarget(i);if(o){i.clear()}e.setShader(s);const a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",a);s.syncUniforms();n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,t.getTexture());n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=i.getContext();ne.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.");s.clearRect(0,0,n.width,n.height);s.drawImage(n,0,0)}dispose(){this._shaders.forEach(e=>e.dispose());this._shaders=[]}_blurImage(e,t,i){const o=10;const n=e.getCanvas();const s=Math.min(1,o/(i*Math.min(n.width,n.height)));const a=H.createCanvas();a.width=Math.round(n.width*s);a.height=Math.round(n.height*s);const l=a.getContext("2d");l.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height);const u=i*Math.min(a.width,a.height);const c=l.getImageData(0,0,a.width,a.height);Tie(c,0,0,a.width,a.height,u);l.putImageData(c,0,0);t.getContext().drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height);st(a)}}});var Fie;var Aie=p(()=>{Fie="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"});var dh;var Pie=p(()=>{ch();Aie();dh=class extends zn{constructor(){super();this._fragmentSource=Fie}}});var Mie;var Bie=p(()=>{Mie="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"});var NHe,qHe,MA,Lie;var zie=p(()=>{tr();ch();Bie();({OptionType:NHe,UniformType:qHe}=Li);MA=class extends zn{constructor(...e){super(...e);this._fragmentSource=Mie}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const{color:l}=this._options;const u=s.getImageData(0,0,n.width,n.height);const c=a.getImageData(0,0,n.width,n.height);const d=n.width*n.height;const m=new X;const h=new X;for(let f=0;f<d*4;f+=4){m.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255);h.set(c.data[f]/255,c.data[f+1]/255,c.data[f+2]/255,c.data[f+3]/255);const b=h.r+m.a*(m.r-h.r);c.data[f]=(b+m.a*(l.r-b))*255;const _=h.g+m.a*(m.g-h.g);c.data[f+1]=(_+m.a*(l.g-_))*255;const y=h.b+m.a*(m.b-h.b);c.data[f+2]=(y+m.a*(l.b-y))*255}a.putImageData(c,0,0)}};MA.prototype.availableOptions={color:{type:NHe.COLOR,default:X.WHITE,uniformType:qHe.FLOAT4}};Lie=MA});var Nie;var Uie=p(()=>{Nie="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\nconst float EPSILON = 0.0000001;\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord); // Is premultiplied.\n    color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha.\n    vec4 newColor;\n    if (u_mode == 0) {\n        newColor = vec4(color.rgb, 1.0); // We use alpha 1.0 becaue color is not premultiplied.\n        newColor *= color.a; // Premultiply the result\n    } else if (u_mode == 1) {\n        newColor = vec4(u_color.rgb, 1.0); // Use alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    } else if (u_mode == 2) {\n        float luminance = dot(color.rgb, W); // Convert to color to gray value.\n        newColor = vec4(vec3(luminance) * u_color.rgb, 1.0); // Colorize and with alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    }\n    gl_FragColor = newColor;\n}"});var qie,Hie,Ou,Wie;var Gie=p(()=>{tr();ch();Uie();({OptionType:qie,UniformType:Hie}=Li);Ou=class extends zn{constructor(...e){super(...e);this._fragmentSource=Nie}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{mode:u,color:c}=this._options;const{r:d,g:m,b:h,a:f}=c;const b=[.2125,.7154,.0721];switch(u){case Ou.MODES.SOLID:for(let _=0;_<n.width*n.height;_++){const y=_*4;l.data[y]+=(d*255-l.data[y])*f;l.data[y+1]+=(m*255-l.data[y+1])*f;l.data[y+2]+=(h*255-l.data[y+2])*f}break;case Ou.MODES.COLORIZED:for(let _=0;_<n.width*n.height;_++){const y=_*4;const I=l.data[y]/255*b[0]+l.data[y+1]/255*b[1]+l.data[y+2]/255*b[2];const T=new X(I*d,I*m,I*h);l.data[y]+=(T.r*255-l.data[y])*f;l.data[y+1]+=(T.g*255-l.data[y+1])*f;l.data[y+2]+=(T.b*255-l.data[y+2])*f}break}a.putImageData(l,0,0)}};Ou.MODES={NONE:0,SOLID:1,COLORIZED:2};Ou.prototype.availableOptions={color:{type:qie.COLOR,default:X.WHITE,uniformType:Hie.FLOAT4},mode:{type:qie.NUMBER,default:Ou.MODES.NONE,uniformType:Hie.INT}};Wie=Ou});var jie;var Vie=p(()=>{jie="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"});var oS,LA,zA,_i,$ie;var Kie=p(()=>{tr();ch();Vie();({OptionType:oS,UniformType:LA}=Li);zA=1e-6;_i=class extends zn{constructor(...e){super(...e);this._fragmentSource=jie;this._lastImage=null}_applyCanvas(e,t,i,o=false){const n=this._options.overlayTexture.getRenderTarget().getContext();const s=t.getCanvas();const a=t.getContext();const l=i.getContext();const u=a.getImageData(0,0,s.width,s.height);const c=n.getImageData(0,0,s.width,s.height);const{blendMode:d,alpha:m}=this._options;const h=new X;const f=new X;const b=new X;for(let _=0;_<s.width*s.height*4;_+=4){h.set(u.data[_]/255,u.data[_+1]/255,u.data[_+2]/255,u.data[_+3]/255);f.set(c.data[_]/255,c.data[_+1]/255,c.data[_+2]/255,c.data[_+3]/255);let y;let I;let T;let D;let P;let k;let A;let Q;let R;switch(d){case _i.BLEND_MODES.NORMAL:b.set(h.r+f.a*m*(f.r-h.r),h.g+f.a*m*(f.g-h.g),h.b+f.a*m*(f.b-h.b),h.a);break;case _i.BLEND_MODES.OVERLAY:y=1-2*(1-h.r)*(1-f.r);I=2*h.r*f.r;T=y+(h.r<.5?1:0)*(I-y);D=1-2*(1-h.g)*(1-f.g);P=2*h.g*f.g;k=D+(h.g<.5?1:0)*(P-D);A=1-2*(1-h.b)*(1-f.b);Q=2*h.b*f.b;R=A+(h.b<.5?1:0)*(Q-A);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.HARD_LIGHT:y=1-2*(1-f.r)*(1-h.r);I=2*f.r*h.r;T=y+(f.r<.5?1:0)*(I-y);D=1-2*(1-f.g)*(1-h.g);P=2*f.g*h.g;k=D+(f.g<.5?1:0)*(P-D);A=1-2*(1-f.b)*(1-h.b);Q=2*f.b*h.b;R=A+(f.b<.5?1:0)*(Q-A);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.SOFT_LIGHT:y=2*h.r*(1-f.r)+(2*f.r-1)*Math.sqrt(h.r);I=2*h.r*f.r+h.r*h.r*(1-2*f.r);T=y+(f.r<.5?1:0)*(I-y);D=2*h.g*(1-f.g)+(2*f.g-1)*Math.sqrt(h.g);P=2*h.g*f.g+h.g*h.g*(1-2*f.g);k=D+(f.g<.5?1:0)*(P-D);A=2*h.b*(1-f.b)+(2*f.b-1)*Math.sqrt(h.b);Q=2*h.b*f.b+h.b*h.b*(1-2*f.b);R=A+(f.b<.5?1:0)*(Q-A);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.MULTIPLY:T=h.r*f.r;k=h.g*f.g;R=h.b*f.b;b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.DARKEN:T=Math.min(h.r,f.r);k=Math.min(h.g,f.g);R=Math.min(h.b,f.b);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.LIGHTEN:T=Math.max(h.r,f.r);k=Math.max(h.g,f.g);R=Math.max(h.b,f.b);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.SCREEN:T=1-(1-h.r)*(1-f.r);k=1-(1-h.g)*(1-f.g);R=1-(1-h.b)*(1-f.b);b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break;case _i.BLEND_MODES.COLOR_BURN:T=Math.max(0,Math.min(1,1-(1-h.r)/Math.max(f.r,zA)));k=Math.max(0,Math.min(1,1-(1-h.g)/Math.max(f.g,zA)));R=Math.max(0,Math.min(1,1-(1-h.b)/Math.max(f.b,zA)));b.set(h.r+f.a*m*(T-h.r),h.g+f.a*m*(k-h.g),h.b+f.a*m*(R-h.b),h.a);break}u.data[_]=b.r*255;u.data[_+1]=b.g*255;u.data[_+2]=b.b*255;u.data[_+3]=b.a*255}l.putImageData(u,0,0)}};_i.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8};_i.prototype.availableOptions={blendMode:{type:oS.NUMBER,default:_i.BLEND_MODES.NORMAL,uniformType:LA.INT},overlayImage:{type:oS.NUMBER,required:true,uniformType:LA.SAMPLER2D},overlayTexture:{type:oS.OBJECT,required:true},alpha:{type:oS.NUMBER,default:1,uniformType:LA.FLOAT}};$ie=_i});var UA={};wt(UA,{ColorOverlayFilter:()=>Lie,OverlayFilter:()=>$ie,TintFilter:()=>Wie,UnpremultiplyFilter:()=>dh});var NA=p(()=>{Pie();zie();Gie();Kie()});var Xie,ph,Xt;var mh=p(()=>{tr();Bs();Xie={[1]:"LINEAR",[0]:"NEAREST",[2]:"LINEAR_MIPMAP_NEAREST",[3]:"LINEAR_MIPMAP_LINEAR"};ph=class extends bi{constructor(e){super();this._renderers=[];this._glTextures={};this._dirty=true;this._mipMapping=false;this._glUnit=0;this._magFilter=ph.DefaultMagFilter;this._minFilter=ph.DefaultMinFilter;this._repeatX=0;this._repeatY=0;this._pixelRatio=1;this._loaded=false;this._frame=new Ct(0,0,100,100);this._onSourceLoaded=this._onSourceLoaded.bind(this);this._source=e;this._loadSource()}resizeTo(e){if(this._frame.width===e.x&&this._frame.height===e.y){return}this._frame.width=e.x;this._frame.height=e.y;this._dirty=true}_loadSource(){const e=this._source;if(!e)return;if(Pr.isCanvas(e)){return this._onSourceLoaded()}if(e.complete){return this._onSourceLoaded()}e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}_onSourceLoaded(){this._loaded=true;this.emit("loaded");this.update()}_updateGLFilters(){if(!this._source)return;const e=new he(this._source.width,this._source.height);if(H.isPowerOfTwo(e)){ne.info(this.constructor.name,"Mip-mapping enabled");this._minFilter=ph.TrilinearFilter;this._mipMapping=true}else{this._minFilter=ph.LinearFilter;this._mipMapping=false}}update(){if(!this._source)return;if(this._frame.width!==this._source.width||this._frame.height!==this._source.height){this._frame=new Ct(0,0,this._source.width,this._source.height);this._dirty=true}this._updateGLFilters();this.emit("update")}getRenderers(){return[...this._renderers]}getGLFilter(e,t){switch(t){case"min":return e[Xie[this._minFilter]];case"mag":return e[Xie[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(e){this._loaded=e}getSource(){return this._source}setSource(e){this._source=e}getGLTextureForRenderer(e){return this._glTextures[e.id]}setGLTextureForRenderer(e,t){this._renderers[t.id]=t;this._glTextures[t.id]=e}getFrame(){return this._frame}setFrame(e){this._frame=e}getDimensions(){return new he(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getGLUnit(){return this._glUnit}setGLUnit(e){this._glUnit=e}setMinFilter(e){this._minFilter=e}getMinFilter(){return this._minFilter}setMagFilter(e){this._magFilter=e}getMagFilter(){return this._magFilter}setRepeatX(e){this._repeatX=e}getRepeatX(){return this._repeatX}setRepeatY(e){this._repeatY=e}getRepeatY(){return this._repeatY}getGLRepeat(e,t){const i=t==="x"?this.getRepeatX():this.getRepeatY();switch(i){case 0:return e.CLAMP_TO_EDGE;case 1:return e.REPEAT;case 2:return e.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(e){this._dirty=e}disposeGLTextures(){this._renderers.forEach(e=>{if(eh(e)){this.disposeGLTexturesForRenderer(e)}})}disposeGLTexturesForRenderer(e){if(!this._glTextures[e.id])return;const t=e.getContext();t.deleteTexture(this._glTextures[e.id]);delete this._glTextures[e.id];if(!this._renderers[e.id]){delete this._renderers[e.id]}}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(e){this._mipMapping=e}dispose(){this.disposeGLTextures();this._source=void 0}};Xt=ph;Xt.NearestFilter=0;Xt.LinearFilter=1;Xt.BilinearFilter=2;Xt.TrilinearFilter=3;Xt.DefaultMagFilter=1;Xt.DefaultMinFilter=1;Xt.Repeat=1;Xt._id=0});var nl;var Wy=p(()=>{tr();mh();Bs();nl=class{constructor(e,t,i,o=Pr.createCanvas(),n){this._width=e;this._height=t;this._pixelRatio=i;this._baseTexture=new Xt;this._canvas=o;const s=n||this._canvas.getContext("2d");if(!s){throw new Error("Cannot get canvas context")}this._context=s;this._baseTexture.setSource(this._canvas);this._canvas.width=this._width*this._pixelRatio;this._canvas.height=this._height*this._pixelRatio;this._filterStack=[{renderTarget:this,filters:[]}]}clear(){const e=this._context;e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(e){this._baseTexture.resizeTo(e);if(this._width!==e.x){this._width=e.x;this._canvas.width=this._width*this._pixelRatio}if(this._height!==e.y){this._height=e.y;this._canvas.height=this._height*this._pixelRatio}}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e}getDimensions(){return new he(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas;delete this._context;this._baseTexture.dispose()}}});var sd;var nS=p(()=>{tr();Wy();sd=class{constructor(e){this._renderer=e;this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}];this._textures=[];this._textureFrame=new Ct(0,0,e.getWidth(),e.getHeight())}resizeTo(e){this._textureFrame.width=e.x;this._textureFrame.height=e.y;this._textures.forEach(t=>t.resizeTo(e))}pushFilters(e,t){this._currentFrame=e.getBounds();const i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i);this._filterStack.push({renderTarget:i,filters:t});i.clear()}popFilters(){const e=this._filterStack.pop();if(!e)return void 0;const{filters:t,renderTarget:i}=e;const o=this._filterStack[this._filterStack.length-1];const n=i;const s=o.renderTarget;if(t.length===1){const a=t[0];a.apply(this._renderer,n,s);this._textures.push(n)}else{this._applyFilters(t,n,s)}return t}_applyFilters(e,t,i){let o=t;let n=this._getOrCreateRenderTarget(true);const s=e[e.length-1];e.forEach(a=>{const l=a===s;if(!l){a.apply(this._renderer,o,n);const u=o;o=n;n=u}else{a.apply(this._renderer,o,i)}});this._textures.push(o);this._textures.push(n)}_getOrCreateRenderTarget(e=false){let t=this._textures.pop();if(!t){t=new nl(this._textureFrame.width,this._textureFrame.height,1)}if(e){t.clear()}return t}setFilterStack(e){this._filterStack=e}dispose(){}}});var Vy=C((Yie,Gy)=>{(function(){var r,e,t,i,o,n;if(typeof performance!=="undefined"&&performance!==null&&performance.now){Gy.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){Gy.exports=function(){return(r()-o)/1e6};e=process.hrtime;r=function(){var s;s=e();return s[0]*1e9+s[1]};i=r();n=process.uptime()*1e9;o=i-n}else if(Date.now){Gy.exports=function(){return Date.now()-t};t=Date.now()}else{Gy.exports=function(){return new Date().getTime()-t};t=new Date().getTime()}}).call(Yie)});var Jie,Zie,sS;var qA=p(()=>{tr();Jie=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Vy();Zie=class{constructor(e){this._context=e;this._tracking=false;const t=this;for(const i in e){const o=e[i];if(typeof o==="function"){this[i]=function(...n){const s=e[i];if(!t._tracking){return s.apply(e,n)}const a=Jie();const l=s.apply(e,n);const u=Jie()-a;const c={functionName:i,arguments:n,duration:u};t._trackedCalls.push(c);return l}}else{this._makePropertyWrapper(i)}}}_makePropertyWrapper(e){const t=["_context","_trackedCalls","_tracking"];if(t.indexOf(e)!==-1)return;const i=this._context;this.__defineGetter__(e,()=>{return i[e]});this.__defineSetter__(e,o=>{i[e]=o})}startFrame(){this._tracking=true;this._trackedCalls=[]}endFrame(){const e="Rendering";ne.log(e,"Frame rendering results:");ne.log(e,`Context calls: ${this._trackedCalls.length}`);const t={};this._trackedCalls.forEach(({functionName:o,duration:n})=>{t[o]=t[o]||{totalDuration:0,calls:0};t[o].totalDuration+=n;t[o].calls++});let i=[];for(const o in t){const n=t[o];n.averageDuration=n.totalDuration/n.calls;i.push({functionName:o,data:n})}i.sort((o,n)=>n.data.totalDuration-o.data.totalDuration);i=i.slice(0,3);i.forEach(o=>{ne.log(e,`${o.functionName}: ${o.data.calls} calls, ${o.data.totalDuration.toFixed(2)}ms`)})}};sS=Zie});var jy;var HA=p(()=>{tr();jy=class extends bi{constructor(e=800,t=600,i){super();this._maxTextureSize=null;this._options={debug:false,transparent:false,clearColor:X.TRANSPARENT,...i,pixelRatio:1};this.setMaxListeners(0);this._width=e;this._height=t;this._dimensions=new he(this._width,this._height);this._maxTextureSize=null;this._pixelRatio=this._options.pixelRatio;this._canvas=this._options.canvas;this._clearColor=this._options.transparent?X.TRANSPARENT:this._options.clearColor||X.BLACK}setCanvas(e){const t=this._canvas;this._canvas=e;if(t!==e){this._createContext();this._onBeforeContext();this._setupContext()}this.resizeTo(new he(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(e,t=true){this._width=e.x*this._pixelRatio;this._height=e.y*this._pixelRatio;if(t&&this._canvas){this._canvas.width=this._width;this._canvas.height=this._height;if("style"in this._canvas){this._canvas.style.width=`${this._width/this._pixelRatio}px`;this._canvas.style.height=`${this._height/this._pixelRatio}px`}}this._dimensions=e.clone()}_createContext(){ne.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){ne.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(e){ne.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e;if(this._defaultRenderTarget){this._defaultRenderTarget.setPixelRatio(e)}}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(e){this._filterManager=e}setClearColor(e){this._clearColor=e}getClearColor(){return this._clearColor}isOfType(e){return this._type===e}dispose(){ne.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}});var Qie,WA,hh;var eoe=p(()=>{wn();rS();tr();nS();Wy();qA();Bs();HA();({RendererType:Qie}=Li);WA=class extends jy{constructor(e=800,t=600,i){super(e,t,{...i});this.id=0;this.setCanvas((i==null?void 0:i.canvas)||Pr.createCanvas());this._type=Qie.CANVAS}_createContext(){const e=this._canvas;let t=e.getContext("2d");if(!t)return;if(this._options.debug){t=new sS(t)}this.id=WA.contextId++;this._context=t;this.emit("context",t);return t}_setupContext(){const e=this._context;if(!("imageSmoothingEnabled"in e)){["moz","webkit","ms"].forEach(t=>{if(e[t]){e[t]=true}})}else{e.imageSmoothingEnabled=true}this._defaultRenderTarget=new nl(this._width,this._height,this._pixelRatio,this._canvas,this._context);this.setRenderTarget(this._defaultRenderTarget);this._filterManager=new sd(this)}render(e){const t=this._renderTarget.getContext();const i=e.getParent();e.setParent(new nd);e.updateTransform();if(i){e.setParent(i)}t.setTransform(1,0,0,1,0,0);t.globalAlpha=1;const{width:o,height:n}=this._canvas;t.clearRect(0,0,o,n);if(this._clearColor.a!==0){t.save();t.fillStyle=this._clearColor.toRGBA();t.fillRect(0,0,o,n);t.restore()}this.renderDisplayObject(e,this._renderTarget)}renderDisplayObject(e,t){const i=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack());this.setRenderTarget(t);e.renderCanvas(this);this.setRenderTarget(i)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getContext(){return this._renderTarget.getContext()}dispose(){st(this._canvas);this._filterManager.dispose()}};hh=WA;hh.contextId=0;hh.type=Qie.CANVAS});var toe;var roe=p(()=>{toe=r=>{if(typeof window!=="undefined"){const{WebGLDebugUtils:e}=window;if(e){const t=(i,o)=>{console.error(`gl.${i}(${e.glFunctionArgsToString(i,o)})`)};r=e.makeDebugContext(r,null,t)}}return r}});var GA;var ioe=p(()=>{GA=class{constructor(e){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.vertexBuffer=null;this.indexBuffer=null;this.gl=e;this.initBuffers();this.uploadBuffers()}map(e,t){const{x:i,y:o}=t;this.uvs[2]=t.width/e.width;this.uvs[4]=this.uvs[2];this.uvs[5]=t.height/e.height;this.uvs[7]=this.uvs[5];this.vertices[0]=i;this.vertices[1]=o;this.vertices[2]=i+t.width;this.vertices[3]=o;this.vertices[4]=this.vertices[2];this.vertices[5]=o+t.height;this.vertices[6]=i;this.vertices[7]=this.vertices[5];this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){const{gl:e}=this;this.cleanBuffer();this.vertexBuffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.bufferData(e.ARRAY_BUFFER,(8+8+16)*4,e.DYNAMIC_DRAW);this.indexBuffer=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)}uploadBuffers(){const{gl:e}=this;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);e.bufferSubData(e.ARRAY_BUFFER,8*4,this.uvs);e.bufferSubData(e.ARRAY_BUFFER,(8+8)*4,this.colors)}cleanBuffer(){const{gl:e}=this;e.deleteBuffer(this.vertexBuffer);e.deleteBuffer(this.indexBuffer)}}});var sl;var $y=p(()=>{tr();mh();sl=class{constructor(e,t,i,o,n=false){this._renderer=e;this._gl=e.getContext();this._width=t;this._height=i;this._frame=null;this._pixelRatio=o;this._projectionMatrix=new zi;this._mipMapping=false;this._baseTexture=new Xt;const s=this._baseTexture.getFrame();s.width=t;s.height=i;this._baseTexture.setPixelRatio(o);this._baseTexture.setLoaded(true);this._framebuffer=null;this._isRoot=n;this._filterStack=[{renderTarget:this,filters:[]}];if(!n){this._initFrameBuffer()}}resizeTo(e){this._width=e.x|0;this._height=e.y|0;this._baseTexture.resizeTo(e);if(!this._isRoot){this._resizeTexture()}this._baseTexture.setMinFilter(this._getMinFilter());this._baseTexture.setMagFilter(this._getMagFilter());this._calculateProjectionMatrix()}_getMinFilter(){let e=Xt.DefaultMinFilter;if(this._mipMapping){e=Xt.TrilinearFilter}return e}_getMagFilter(){return Xt.DefaultMagFilter}_resizeTexture(){const e=this._gl;const t=this._width*this._pixelRatio;const i=this._height*this._pixelRatio;if(this._texture){e.deleteTexture(this._texture);this._texture=null}this._texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,this._texture);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0);if(this._texture){this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer)}if(this._renderer._options.debug){id.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}const o=new he(this._width,this._height);if(H.isPowerOfTwo(o)){ne.info("WebGLRenderTarget","Mip-mapping enabled");this._mipMapping=true}else{this._mipMapping=false}this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer);this._calculateProjectionMatrix();e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio);e.disable(e.STENCIL_TEST)}clear(e=X.TRANSPARENT){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer);if(this._renderer._options.debug){id.checkFramebufferStatus("WebGLRenderTarget#clear",t)}t.clearColor.apply(t,e.toGLColor());t.clear(t.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){const e=this._projectionMatrix;e.reset();const t=this._frame||new Ct(0,0,this._width,this._height);const{x:i,y:o}=t;if(!this._isRoot){e.a=1/this._width*2;e.d=1/this._height*2;e.tx=-1-i*e.a;e.ty=-1-o*e.d}else{e.a=1/this._width*2;e.d=-1/this._height*2;e.tx=-1-i*e.a;e.ty=1-o*e.d}}_initFrameBuffer(){const e=this._gl;if(this._framebuffer){e.deleteFramebuffer(this._framebuffer);this._framebuffer=null}if(this._texture){e.deleteTexture(this._texture);this._texture=null}this._framebuffer=e.createFramebuffer();this._texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,this._texture);e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0);if(this._texture){this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer)}this.resizeTo(new he(this._width,this._height));if(this._renderer._options.debug){id.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(e){this._frame=e}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){this._pixelRatio=e;if(!this._isRoot){this._resizeTexture()}}getBaseTexture(){return this._baseTexture}dispose(){const e=this._gl;this._baseTexture.dispose();if(this._framebuffer){e.deleteFramebuffer(this._framebuffer);this._framebuffer=null}if(this._texture){e.deleteTexture(this._texture);this._texture=null}}}});var Ky;var VA=p(()=>{NA();tr();ioe();Bs();$y();Ky=class{constructor(e){this._renderer=e;this._filterStack=[];this._currentFrame=null;this._renderTargets=[];this._textureFrame=new Ct(0,0,e.getWidth(),e.getHeight());this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._onContextChange()}resizeTo(e){this._textureFrame.width=e.x;this._textureFrame.height=e.y;this._renderTargets.forEach(t=>t.resizeTo(e))}getFilterStack(){return this._filterStack}setFilterStack(e){this._filterStack=e}_getOrCreateRenderTarget(e=false){let t=this._renderTargets.pop();if(!t){t=new sl(this._renderer,this._textureFrame.width,this._textureFrame.height,1)}if(this._currentFrame){t.setFrame(this._currentFrame)}if(e){t.clear()}return t}pushFilters(e,t){const i=e.getBounds();this._currentFrame=i;const o=e.getFilterRectangle();if(o.width>0&&o.height>0){this._currentFrame=o}const n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n);const s=t[0]instanceof dh;if(s){n.clear(this._renderer.getClearColor())}else{n.clear()}this._filterStack.push({renderTarget:n,filters:t})}popFilters(){const e=this._filterStack.pop();if(!e)return void 0;const{filters:t,renderTarget:i}=e;const o=this._filterStack[this._filterStack.length-1];const n=i;const s=o.renderTarget;const a=n.getFrame();if(a){this._quad.map(this._textureFrame,a)}const l=t[0].getShaderForRenderer(this._renderer);const u=this._quad.getVertexBuffer();const c=this._quad.getIndexBuffer();const d=this._renderer.getContext();d.bindBuffer(d.ARRAY_BUFFER,u);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c);const m=l.getAttributeLocations();d.vertexAttribPointer(m.a_position,2,d.FLOAT,false,0,0);d.vertexAttribPointer(m.a_texCoord,2,d.FLOAT,false,0,2*4*4);d.vertexAttribPointer(m.a_color,4,d.FLOAT,false,0,4*4*4);this._renderer.updateTexture(n.getBaseTexture(),false);if(t.length===1){t[0].apply(this._renderer,n,s);this._renderTargets.push(n)}else{this._applyFilters(t,n,s)}return t}_applyFilters(e,t,i){let o=t;let n=this._getOrCreateRenderTarget(true);this._renderer.updateTexture(n.getBaseTexture(),false);const s=e[e.length-1];e.forEach(a=>{const l=a===s;if(!l){a.apply(this._renderer,o,n,true);const u=o;o=n;n=u}else{a.apply(this._renderer,o,i,true)}});this._renderTargets.push(o);this._renderTargets.push(n)}_onContextChange(){this._renderTargets.length=0;if(eh(this._renderer)){if(this._quad){this._quad.dispose()}this._quad=new GA(this._renderer.getContext())}}dispose(){this._renderer.off("context",this._onContextChange);if(this._quad){this._quad.dispose()}this._renderTargets.forEach(e=>{e.dispose()})}}});var ooe=C((O2t,jA)=>{var Xy=function(){function r(c){i.appendChild(c.dom);return c}function e(c){for(var d=0;d<i.children.length;d++)i.children[d].style.display=d===c?"block":"none";t=c}var t=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";i.addEventListener("click",function(c){c.preventDefault();e(++t%i.children.length)},false);var o=(performance||Date).now(),n=o,s=0,a=r(new Xy.Panel("FPS","#0ff","#002")),l=r(new Xy.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=r(new Xy.Panel("MB","#f08","#201"));e(0);return{REVISION:16,dom:i,addPanel:r,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){s++;var c=(performance||Date).now();l.update(c-o,200);if(c>n+1e3&&(a.update(1e3*s/(c-n),100),n=c,s=0,u)){var d=performance.memory;u.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){o=this.end()},domElement:i,setMode:e}};Xy.Panel=function(r,e,t){var i=Infinity,o=0,n=Math.round,s=n(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,c=2*s,d=3*s,m=15*s,h=74*s,f=30*s,b=document.createElement("canvas");b.width=a;b.height=l;b.style.cssText="width:80px;height:48px";var _=b.getContext("2d");_.font="bold "+9*s+"px Helvetica,Arial,sans-serif";_.textBaseline="top";_.fillStyle=t;_.fillRect(0,0,a,l);_.fillStyle=e;_.fillText(r,u,c);_.fillRect(d,m,h,f);_.fillStyle=t;_.globalAlpha=.9;_.fillRect(d,m,h,f);return{dom:b,update:function(y,I){i=Math.min(i,y);o=Math.max(o,y);_.fillStyle=t;_.globalAlpha=1;_.fillRect(0,0,a,m);_.fillStyle=e;_.fillText(n(y)+" "+r+" ("+n(i)+"-"+n(o)+")",u,c);_.drawImage(b,d+s,m,h-s,f,d,m,h-s,f);_.fillRect(d+h-s,m,s,f);_.fillStyle=t;_.globalAlpha=.9;_.fillRect(d+h-s,m,s,n((1-y/I)*f))}}};typeof jA==="object"&&(jA.exports=Xy)});var Ru,aS;var noe=p(()=>{Ru=v(ooe());aS=class{constructor(e){this._context=e;this._domAvailable=typeof document!=="undefined";this._hookIntoContext();this._textures={};this._framebuffers={};this._programs={};this._shaders={};this._buffers={};this._boundTexture=null;this._id=0;this._enums={};this._setupStats();this._createEnumMap();this._updateMemoryStats=this._updateMemoryStats.bind(this);this._updateMemoryStats()}_createEnumMap(){for(const e in this._context){const t=this._context[e];if(typeof t==="number"){this._enums[t]=e}}}_enumValueToString(e){const t=this._enums[e];return typeof t==="undefined"?e:t}_setupStats(){if(!this._domAvailable)return;this._stats=new Ru.default;this._stats.showPanel(3);this._memPanel=this._stats.addPanel(new Ru.default.Panel("MB [WebGL]","#43ADEB","#282828"));this._texPanel=this._stats.addPanel(new Ru.default.Panel("Textures","#43ADEB","#282828"));this._bufPanel=this._stats.addPanel(new Ru.default.Panel("Buffers","#43ADEB","#282828"));this._fboPanel=this._stats.addPanel(new Ru.default.Panel("FBOs","#43ADEB","#282828"));this._prgPanel=this._stats.addPanel(new Ru.default.Panel("Programs","#43ADEB","#282828"));this._shdPanel=this._stats.addPanel(new Ru.default.Panel("Shaders","#43ADEB","#282828"))}_updatePanel(e){if(!this._domAvailable)return;this._stats.begin();switch(e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50);break}this._stats.end()}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;const e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400);setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let e=0;for(const t in this._textures){e+=this._textures[t].memory}for(const t in this._buffers){e+=this._buffers[t].memory}return e}_hookIntoContext(){for(const e in this._context){const t=this._context[e];if(typeof t==="function"){this[e]=function(...i){const o=this._context[e];return this._trackGLCall(o,e,i)}}else{this._makePropertyWrapper(e)}}}_makePropertyWrapper(e){const t=["_context"];if(t.indexOf(e)!==-1)return;const i=this._context;this.__defineGetter__(e,()=>{return i[e]});this.__defineSetter__(e,o=>{i[e]=o})}_trackGLCall(e,t,i){const o=["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"];let n;if(o.indexOf(t)!==-1){n=this[`_${t}`](i)}else{n=e.apply(this._context,i)}const s=this._context.getError();if(s!==0){let a=i.join(", ");if(a.length>100){a=`${a.substr(0,100)}...`}console.error(new Error(`WebGL Error ${this._enumValueToString(s)} in ${t}(${a})`))}return n}_createProgram(){const e=this._context.createProgram();e._wmmId=this._id++;this._programs[e._wmmId]=e;this._updatePanel("prg");return e}_deleteProgram([e]){if(!e||!this._programs[e._wmmId])return;delete this._programs[e._wmmId];this._context.deleteProgram(e);this._updatePanel("prg")}_createShader([e]){const t=this._context.createShader(e);t._wmmId=this._id++;this._shaders[t._wmmId]=t;this._updatePanel("shd");return t}_deleteShader([e]){if(!e||!this._shaders[e._wmmId])return;delete this._shaders[e._wmmId];this._context.deleteShader(e);this._updatePanel("shd")}_createFramebuffer(){const e=this._context.createFramebuffer();e._wmmId=this._id++;this._framebuffers[e._wmmId]=e;this._updatePanel("fbo");return e}_deleteFramebuffer([e]){if(!e||!this._framebuffers[e._wmmId])return;delete this._framebuffers[e._wmmId];this._context.deleteFramebuffer(e);this._updatePanel("fbo")}_createBuffer(){const e=this._context.createBuffer();e._wmmId=this._id++;this._buffers[e._wmmId]={buffer:e,memory:0};this._updatePanel("buf");return e}_bindBuffer([e,t]){this._context.bindBuffer(e,t);this._boundBuffer=t._wmmId}_bufferData([e,t,i]){this._context.bufferData(e,t,i);let o;if(typeof t==="number"){o=t}else if("byteLength"in t){o=t.byteLength}else if("length"in t){o=t.length}this._buffers[this._boundBuffer].memory=o}_deleteBuffer([e]){if(!e||!this._buffers[e._wmmId])return;delete this._buffers[e._wmmId];this._context.deleteBuffer(e);this._updatePanel("buf")}_createTexture(){const e=this._context.createTexture();e._wmmId=this._id++;this._textures[e._wmmId]={texture:e,memory:0};this._updatePanel("tex");return e}_deleteTexture([e]){if(!e||!this._textures[e._wmmId])return;delete this._textures[e._wmmId];this._context.deleteTexture(e);this._updatePanel("tex")}_bindTexture([e,t]){this._context.bindTexture(e,t);this._boundTexture=t._wmmId}_texImage2D(e){let[,,t,i,o,n,,,s]=e;if(typeof s==="undefined"){s=n}this._context.texImage2D.apply(this._context,e);const a=this._calculateByteCountForTexture(t,i,o,s);this._textures[this._boundTexture].memory=a}_calculateByteCountForTexture(e,t,i,o){if(o!==null){if("width"in o){t=o.width;i=o.height}else{return o.length}}let n=1;switch(e){case this._context.ALPHA:n=1;break;case this._context.RGB:n=3;break;case this._context.RGBA:n=4;break}return t*i*n}}});var Yy;var $A=p(()=>{Yy=class{constructor(e){this._renderer=e;this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange);delete this._renderer}}});var KA;var soe=p(()=>{tr();$A();KA=class extends Yy{constructor(e){super(e);this._vertexBuffer=null;this._indexBuffer=null;this._maxBatchSize=ah;this._vertices=new ArrayBuffer(ah*4*Du);this._positions=new Float32Array(this._vertices);this._colors=new Uint32Array(this._vertices);this._indices=new Uint16Array(ah*6);for(let t=0,i=0;t<ah*6;t+=6,i+=4){this._indices[t+0]=i+0;this._indices[t+1]=i+1;this._indices[t+2]=i+2;this._indices[t+3]=i+0;this._indices[t+4]=i+2;this._indices[t+5]=i+3}this._sprites=[];this._currentBatchSize=0;this._onContextChange()}render(e){const t=e.getTexture();if(!t)return;const i=t.getFrame();const o=t.getBaseTexture();if(this._currentBatchSize>=this._maxBatchSize){this.flush()}const n=t.getUVs();if(!n){return}const s=this._currentBatchSize*Du;this._addVertexCoordinates(e,s,i);this._addTextureUVs(e,s,n);this._addColors(e,s);this._sprites[this._currentBatchSize]=e;this._currentBatchSize++}_addColors(e,t){const i=this._colors;const o=16777215;const n=(o>>16)+(o&65280)+((o&255)<<16)+(e.getWorldAlpha()*255<<24);i[t+4]=i[t+9]=i[t+14]=i[t+19]=n}_addTextureUVs(e,t,i){const o=this._positions;const[n,s,a,l]=i;o[t+2]=n.x;o[t+3]=n.y;o[t+7]=s.x;o[t+8]=s.y;o[t+12]=a.x;o[t+13]=a.y;o[t+17]=l.x;o[t+18]=l.y}_addVertexCoordinates(e,t,i){const o=this._positions;const n=e.getWorldTransform();const s=e.getAnchor();const a=n.rectangleToCoordinates(i,s);const l=5;for(let u=0;u<4;u++){o[t+u*l]=a[u].x;o[t+u*l+1]=a[u].y}}_onContextChange(){const e=this._renderer.getContext();this._shader=this._renderer.shaders.default;if(this._vertexBuffer){this._vertexBuffer=null}if(this._indexBuffer){this._indexBuffer=null}this._vertexBuffer=e.createBuffer();this._indexBuffer=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW);e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}start(){if(this._vertexBuffer&&this._indexBuffer){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}}flush(){var m;const e=this._renderer;const t=e.getContext();if(this._currentBatchSize===0){return}if(this._currentBatchSize>ah*.5){t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices)}else{const h=this._positions.subarray(0,this._currentBatchSize*Du);t.bufferSubData(t.ARRAY_BUFFER,0,h)}let i=0;let o=null;let n=null;let s=null;let a=null;let l=false;let u=false;let c=null;let d=0;for(let h=0,f=this._currentBatchSize;h<f;h++){c=this._sprites[h];n=(m=c.getTexture())==null?void 0:m.getBaseTexture();a=c.getShader()||this._shader;l=s!==a;u=o!==n;if(u||l){if(o){this._renderBatch(o,i,d)}d=h;i=0;o=n;if(l){s=a;e.setShader(s);const b=e.getCurrentRenderTarget();const _=b.getProjectionMatrix().toArray();s.setUniform("u_projMatrix",_);s.syncUniforms();t.activeTexture(t.TEXTURE0)}}i++}if(o){this._renderBatch(o,i,d)}this._currentBatchSize=0;this._sprites=[]}_renderBatch(e,t,i){if(t===0){return}const o=this._renderer;const n=o.getContext();let s=e.getGLTextureForRenderer(o);if(!s){s=o.getOrCreateGLTexture(e)}if(e.isDirty()){o.updateTexture(e);e.setDirty(false)}n.activeTexture(n.TEXTURE0+e.getGLUnit());n.bindTexture(n.TEXTURE_2D,s);const a=t*6;const l=i*6*2;n.drawElements(n.TRIANGLES,a,n.UNSIGNED_SHORT,l)}dispose(){const e=this._renderer;const t=e.getContext();this._sprites.forEach(i=>{i.dispose()});if(this._vertexBuffer){t.deleteBuffer(this._vertexBuffer);this._vertexBuffer=null}if(this._indexBuffer){t.deleteBuffer(this._indexBuffer);this._indexBuffer=null}delete this._vertices;delete this._positions;delete this._colors;delete this._indices;super.dispose()}}});var XA,lS;var aoe=p(()=>{roe();wn();xo();rS();tr();VA();BA();qA();Bs();$y();noe();HA();$A();soe();XA=class extends jy{constructor(e=800,t=600,i){super(e,t,i);this.type="webgl";this.maxTextureDimensions=null;this._type="webgl";this._onContextLost=this._onContextLost.bind(this);this._onContextRestored=this._onContextRestored.bind(this);this.setCanvas(this._options.canvas||Pr.createCanvas());this.shaders={default:new PA(this,void 0,void 0)};this.renderers={sprite:new KA(this)}}_onContextLost(e){e.preventDefault();ne.warn(this.constructor.name,"WebGL context has been lost - trying to restore.");this.emit("context-lost")}_onContextCreationError(e){e.preventDefault();ne.warn(this.constructor.name,`Failed to create WebGL context: ${e.statusMessage||"Unknown error"}`)}_onContextRestored(){ne.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures.");this._createContext();this._setupContext();this.emit("context-restored")}_onBeforeContext(){if(this._filterManager){this._filterManager.dispose()}this._filterManager=new Ky(this);this._currentObjectRenderer=new Yy(this)}setShader(e){this._currentShader=e;this._context.useProgram(e.getProgram());this._setAttributesForShader(e)}setCanvas(e){if(this._canvas){this._removeContextEventListeners()}super.setCanvas(e);this._addContextEventListeners()}_addContextEventListeners(){if(vA(this._canvas)){this._canvas.addEventListener("webglcontextlost",this._onContextLost);this._canvas.addEventListener("webglcontextrestored",this._onContextRestored);this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}}_removeContextEventListeners(){if(vA(this._canvas)){this._canvas.removeEventListener("webglcontextlost",this._onContextLost);this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored);this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}}_setAttributesForShader(e){if(!this._canvas)return;const t=this._context;const i=e.getAttributes();const o=e.getAttributeLocations();i.forEach(n=>{const s=o[n];t.enableVertexAttribArray(s)})}_createContext(){if(!this._canvas)return;let e=Pr.glGet(this._canvas);if(this._options.debug){toe(e)}if(this._options.debug){e=new sS(e);e=new aS(e)}this.id=XA.contextId++;this._context=e;this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE);this.emit("context",e);return e}_setupContext(){const e=this._context;e.disable(e.DEPTH_TEST);e.disable(e.CULL_FACE);e.enable(e.BLEND);e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);this._defaultRenderTarget=new sl(this,this._width,this._height,this._pixelRatio,true);this.setRenderTarget(this._defaultRenderTarget);this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){const e=this._context;const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=(t==null?void 0:t.precision)!==0?"highp":"mediump";const i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=(i==null?void 0:i.rangeMax)!==0?"highp":"lowp"}resizeTo(e,t=true){super.resizeTo(e,t);if(this._currentRenderTarget){this._currentRenderTarget.resizeTo(e)}this._context=Pr.glResize(this._context,e)}setRenderTarget(e=this._defaultRenderTarget){this._currentRenderTarget=e;this._currentRenderTarget.activate()}setObjectRenderer(e){this._currentObjectRenderer.stop();this._currentObjectRenderer=e;this._currentObjectRenderer.start()}render(e){this.setRenderTarget(this._defaultRenderTarget);this._defaultRenderTarget.clear(this._clearColor);const t=e.getParent();e.setParent(new nd);e.updateTransform();if(t){e.setParent(t)}this.renderDisplayObject(e,this._defaultRenderTarget)}renderDisplayObject(e,t){this.setRenderTarget(t);this._filterManager.setFilterStack(t.getFilterStack());e.renderWebGL(this);this._currentObjectRenderer.flush()}clear(){const e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor);e.clear(e.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(e){this.setRenderTarget(e.renderTarget);this._filterManager.setFilterStack(e.filterStack);this._currentObjectRenderer=e.objectRenderer}getOrCreateGLTexture(e){const t=this._context;let i=e.getGLTextureForRenderer(this);if(!i){i=t.createTexture();e.setGLTextureForRenderer(i,this)}return i}updateTexture(e,t=true){const i=e.getSource();const o=this._context;const n=e.getGLUnit();const s=this.getOrCreateGLTexture(e);o.activeTexture(o.TEXTURE0+n);o.bindTexture(o.TEXTURE_2D,s);o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true);if(t&&i){Pr.glTexImage(o,i)}if(e.isMipMappingEnabled()){o.generateMipmap(o.TEXTURE_2D)}else{o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,e.getGLRepeat(o,"x"));o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,e.getGLRepeat(o,"y"))}o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,e.getGLFilter(o,"min"));o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e.getGLFilter(o,"mag"));o.activeTexture(o.TEXTURE0)}getMaxDimensions(){if(!this.maxTextureDimensions){this.maxTextureDimensions=Pr.glMaxTexture(this._context)}return this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){if(this._canvas){st(this._canvas)}this._filterManager.dispose();this._currentObjectRenderer.dispose();this._defaultRenderTarget.dispose();for(const i in this.shaders){this.shaders[i].dispose();delete this.shaders[i]}this._removeContextEventListeners();const e=this._context;const t=e.getExtension("WEBGL_lose_context");if(t){t.loseContext()}}};lS=XA;lS.contextId=0});var GHe,VHe,YA;var loe=p(()=>{il();GHe=()=>[new he(0,0),new he(1,0),new he(1,1),new he(0,1)];VHe=(r,e,t)=>{const[i,o,n,s]=r;i.x=e.x/t.width;i.y=e.y/t.height;o.x=(e.x+e.width)/t.width;o.y=e.y/t.height;n.x=(e.x+e.width)/t.width;n.y=(e.y+e.height)/t.height;s.x=e.x/t.width;s.y=(e.y+e.height)/t.height;return r};YA={create:GHe,updateViaFrames:VHe}});var Au;var JA=p(()=>{loe();tr();mh();Au=class extends bi{constructor(e,t){super();if(!(e instanceof Xt)){throw new Error("`baseTexture` should be an instance of BaseTexture")}this._uvs=YA.create();this._frame=t?t.clone():new Ct(0,0,1,1);this._frameLocked=Boolean(t);this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this);this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this);this.setBaseTexture(e)}static fromImage(e){const t=new Xt(e);return new Au(t)}static fromCanvas(e){const t=new Xt(e);return new Au(t)}_onBaseTextureLoaded(){if(!this._frameLocked){const e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){const{width:e,height:t}=this._baseTexture.getFrame();this._frame.width=e;this._frame.height=t;this.emit("update")}_updateUVs(){this._uvs=YA.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(e){this._baseTexture=e;if(!this._baseTexture.isLoaded()){this._baseTexture.once("loaded",this._onBaseTextureLoaded)}else{const{width:t,height:i}=e.getFrame();if(!this._frameLocked){this._frame=new Ct(0,0,t,i)}this._onBaseTextureLoaded()}}getFrame(){return this._frame}setFrame(e){this._frame=e;this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new he(this._frame.width,this._frame.height)}dispose(e=true){e&&this._baseTexture.dispose()}}});var Jy,Zy;var ZA=p(()=>{xo();tr();nS();VA();Wy();$y();mh();JA();Jy=r=>r._type==="webgl";Zy=class extends Au{constructor(e,t=100,i=100,o=1){super(new Xt,new Ct(0,0,t,i));this._loaded=true;this._width=t;this._height=i;this._pixelRatio=o;this._renderer=e;this._setupFilterManager();this._setupBuffer();this.setBaseTexture(this._renderTarget.getBaseTexture());this._updateUVs()}_setupFilterManager(){if(this._filterManager){this._filterManager.dispose()}if(Jy(this._renderer)){this._filterManager=new Ky(this._renderer)}else{this._filterManager=new sd(this._renderer)}this._filterManager.resizeTo(new he(this._width,this._height))}_setupBuffer(){if(this._renderTarget){this._renderTarget.dispose()}if(Jy(this._renderer)){this._renderTarget=new sl(this._renderer,this._width,this._height,this._pixelRatio)}else{this._renderTarget=new nl(this._width,this._height,this._pixelRatio)}}clear(e){this._renderTarget.clear(e)}resizeTo(e){if(this._width===e.x&&this._height===e.y){return}this._width=e.x;this._height=e.y;this._frame.width=e.x;this._frame.height=e.y;this._renderTarget.resizeTo(e);this._filterManager.resizeTo(e)}render(e){if(Jy(this._renderer)){this._renderWebGL(e)}else{this._renderCanvas(e)}}_renderWebGL(e){if(!Jy(this._renderer))return;this._renderTarget.activate();e.getWorldTransform().reset();e.getChildren().forEach(i=>{i.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(e,this._renderTarget);this._renderer.setFilterManager(t)}_renderCanvas(e){if(Jy(this._renderer))return;e.getWorldTransform().reset();e.getChildren().forEach(i=>{i.updateTransform()});const t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(e,this._renderTarget);this._renderer.setFilterManager(t)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose();this._filterManager.dispose();super.dispose()}}});var fh,al;var Qy=p(()=>{fh={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};al={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:true,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}});function re(r,e,t){if(r!=null)if(typeof r=="number")this.fromNumber(r,e,t);else if(e==null&&typeof r!="string")this.fromString(r,256);else this.fromString(r,e)}function Qe(){return new re(null)}function $He(r,e,t,i,o,n){while(--n>=0){var s=e*this[r++]+t[i]+o;o=Math.floor(s/67108864);t[i++]=s&67108863}return o}function KHe(r,e,t,i,o,n){var s=e&32767,a=e>>15;while(--n>=0){var l=this[r]&32767;var u=this[r++]>>15;var c=a*l+u*s;l=s*l+((c&32767)<<15)+t[i]+(o&1073741823);o=(l>>>30)+(c>>>15)+a*u+(o>>>30);t[i++]=l&1073741823}return o}function XHe(r,e,t,i,o,n){var s=e&16383,a=e>>14;while(--n>=0){var l=this[r]&16383;var u=this[r++]>>14;var c=a*l+u*s;l=s*l+((c&16383)<<14)+t[i]+o;o=(l>>28)+(c>>14)+a*u;t[i++]=l&268435455}return o}function coe(r){return YHe.charAt(r)}function doe(r,e){var t=uS[r.charCodeAt(e)];return t==null?-1:t}function JHe(r){for(var e=this.t-1;e>=0;--e)r[e]=this[e];r.t=this.t;r.s=this.s}function ZHe(r){this.t=1;this.s=r<0?-1:0;if(r>0)this[0]=r;else if(r<-1)this[0]=r+this.DV;else this.t=0}function Fu(r){var e=Qe();e.fromInt(r);return e}function QHe(r,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==256)t=8;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else{this.fromRadix(r,e);return}this.t=0;this.s=0;var i=r.length,o=false,n=0;while(--i>=0){var s=t==8?r[i]&255:doe(r,i);if(s<0){if(r.charAt(i)=="-")o=true;continue}o=false;if(n==0)this[this.t++]=s;else if(n+t>this.DB){this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n;this[this.t++]=s>>this.DB-n}else this[this.t-1]|=s<<n;n+=t;if(n>=this.DB)n-=this.DB}if(t==8&&(r[0]&128)!=0){this.s=-1;if(n>0)this[this.t-1]|=(1<<this.DB-n)-1<<n}this.clamp();if(o)re.ZERO.subTo(this,this)}function eWe(){var r=this.s&this.DM;while(this.t>0&&this[this.t-1]==r)--this.t}function tWe(r){if(this.s<0)return"-"+this.negate().toString(r);var e;if(r==16)e=4;else if(r==8)e=3;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else return this.toRadix(r);var t=(1<<e)-1,i,o=false,n="",s=this.t;var a=this.DB-s*this.DB%e;if(s-- >0){if(a<this.DB&&(i=this[s]>>a)>0){o=true;n=coe(i)}while(s>=0){if(a<e){i=(this[s]&(1<<a)-1)<<e-a;i|=this[--s]>>(a+=this.DB-e)}else{i=this[s]>>(a-=e)&t;if(a<=0){a+=this.DB;--s}}if(i>0)o=true;if(o)n+=coe(i)}}return o?n:"0"}function rWe(){var r=Qe();re.ZERO.subTo(this,r);return r}function iWe(){return this.s<0?this.negate():this}function oWe(r){var e=this.s-r.s;if(e!=0)return e;var t=this.t;e=t-r.t;if(e!=0)return this.s<0?-e:e;while(--t>=0)if((e=this[t]-r[t])!=0)return e;return 0}function cS(r){var e=1,t;if((t=r>>>16)!=0){r=t;e+=16}if((t=r>>8)!=0){r=t;e+=8}if((t=r>>4)!=0){r=t;e+=4}if((t=r>>2)!=0){r=t;e+=2}if((t=r>>1)!=0){r=t;e+=1}return e}function nWe(){if(this.t<=0)return 0;return this.DB*(this.t-1)+cS(this[this.t-1]^this.s&this.DM)}function sWe(r,e){var t;for(t=this.t-1;t>=0;--t)e[t+r]=this[t];for(t=r-1;t>=0;--t)e[t]=0;e.t=this.t+r;e.s=this.s}function aWe(r,e){for(var t=r;t<this.t;++t)e[t-r]=this[t];e.t=Math.max(this.t-r,0);e.s=this.s}function lWe(r,e){var t=r%this.DB;var i=this.DB-t;var o=(1<<i)-1;var n=Math.floor(r/this.DB),s=this.s<<t&this.DM,a;for(a=this.t-1;a>=0;--a){e[a+n+1]=this[a]>>i|s;s=(this[a]&o)<<t}for(a=n-1;a>=0;--a)e[a]=0;e[n]=s;e.t=this.t+n+1;e.s=this.s;e.clamp()}function uWe(r,e){e.s=this.s;var t=Math.floor(r/this.DB);if(t>=this.t){e.t=0;return}var i=r%this.DB;var o=this.DB-i;var n=(1<<i)-1;e[0]=this[t]>>i;for(var s=t+1;s<this.t;++s){e[s-t-1]|=(this[s]&n)<<o;e[s-t]=this[s]>>i}if(i>0)e[this.t-t-1]|=(this.s&n)<<o;e.t=this.t-t;e.clamp()}function cWe(r,e){var t=0,i=0,o=Math.min(r.t,this.t);while(t<o){i+=this[t]-r[t];e[t++]=i&this.DM;i>>=this.DB}if(r.t<this.t){i-=r.s;while(t<this.t){i+=this[t];e[t++]=i&this.DM;i>>=this.DB}i+=this.s}else{i+=this.s;while(t<r.t){i-=r[t];e[t++]=i&this.DM;i>>=this.DB}i-=r.s}e.s=i<0?-1:0;if(i<-1)e[t++]=this.DV+i;else if(i>0)e[t++]=i;e.t=t;e.clamp()}function dWe(r,e){var t=this.abs(),i=r.abs();var o=t.t;e.t=o+i.t;while(--o>=0)e[o]=0;for(o=0;o<i.t;++o)e[o+t.t]=t.am(0,i[o],e,o,0,t.t);e.s=0;e.clamp();if(this.s!=r.s)re.ZERO.subTo(e,e)}function pWe(r){var e=this.abs();var t=r.t=2*e.t;while(--t>=0)r[t]=0;for(t=0;t<e.t-1;++t){var i=e.am(t,e[t],r,2*t,0,1);if((r[t+e.t]+=e.am(t+1,2*e[t],r,2*t+1,i,e.t-t-1))>=e.DV){r[t+e.t]-=e.DV;r[t+e.t+1]=1}}if(r.t>0)r[r.t-1]+=e.am(t,e[t],r,2*t,0,1);r.s=0;r.clamp()}function mWe(r,e,t){var i=r.abs();if(i.t<=0)return;var o=this.abs();if(o.t<i.t){if(e!=null)e.fromInt(0);if(t!=null)this.copyTo(t);return}if(t==null)t=Qe();var n=Qe(),s=this.s,a=r.s;var l=this.DB-cS(i[i.t-1]);if(l>0){i.lShiftTo(l,n);o.lShiftTo(l,t)}else{i.copyTo(n);o.copyTo(t)}var u=n.t;var c=n[u-1];if(c==0)return;var d=c*(1<<this.F1)+(u>1?n[u-2]>>this.F2:0);var m=this.FV/d,h=(1<<this.F1)/d,f=1<<this.F2;var b=t.t,_=b-u,y=e==null?Qe():e;n.dlShiftTo(_,y);if(t.compareTo(y)>=0){t[t.t++]=1;t.subTo(y,t)}re.ONE.dlShiftTo(u,y);y.subTo(n,n);while(n.t<u)n[n.t++]=0;while(--_>=0){var I=t[--b]==c?this.DM:Math.floor(t[b]*m+(t[b-1]+f)*h);if((t[b]+=n.am(0,I,t,_,0,u))<I){n.dlShiftTo(_,y);t.subTo(y,t);while(t[b]<--I)t.subTo(y,t)}}if(e!=null){t.drShiftTo(u,e);if(s!=a)re.ZERO.subTo(e,e)}t.t=u;t.clamp();if(l>0)t.rShiftTo(l,t);if(s<0)re.ZERO.subTo(t,t)}function hWe(r){var e=Qe();this.abs().divRemTo(r,null,e);if(this.s<0&&e.compareTo(re.ZERO)>0)r.subTo(e,e);return e}function ad(r){this.m=r}function fWe(r){if(r.s<0||r.compareTo(this.m)>=0)return r.mod(this.m);else return r}function gWe(r){return r}function yWe(r){r.divRemTo(this.m,null,r)}function bWe(r,e,t){r.multiplyTo(e,t);this.reduce(t)}function _We(r,e){r.squareTo(e);this.reduce(e)}function vWe(){if(this.t<1)return 0;var r=this[0];if((r&1)==0)return 0;var e=r&3;e=e*(2-(r&15)*e)&15;e=e*(2-(r&255)*e)&255;e=e*(2-((r&65535)*e&65535))&65535;e=e*(2-r*e%this.DV)%this.DV;return e>0?this.DV-e:-e}function ld(r){this.m=r;this.mp=r.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<r.DB-15)-1;this.mt2=2*r.t}function xWe(r){var e=Qe();r.abs().dlShiftTo(this.m.t,e);e.divRemTo(this.m,null,e);if(r.s<0&&e.compareTo(re.ZERO)>0)this.m.subTo(e,e);return e}function CWe(r){var e=Qe();r.copyTo(e);this.reduce(e);return e}function SWe(r){while(r.t<=this.mt2)r[r.t++]=0;for(var e=0;e<this.m.t;++e){var t=r[e]&32767;var i=t*this.mpl+((t*this.mph+(r[e]>>15)*this.mpl&this.um)<<15)&r.DM;t=e+this.m.t;r[t]+=this.m.am(0,i,r,e,0,this.m.t);while(r[t]>=r.DV){r[t]-=r.DV;r[++t]++}}r.clamp();r.drShiftTo(this.m.t,r);if(r.compareTo(this.m)>=0)r.subTo(this.m,r)}function wWe(r,e){r.squareTo(e);this.reduce(e)}function TWe(r,e,t){r.multiplyTo(e,t);this.reduce(t)}function IWe(){return(this.t>0?this[0]&1:this.s)==0}function EWe(r,e){if(r>4294967295||r<1)return re.ONE;var t=Qe(),i=Qe(),o=e.convert(this),n=cS(r)-1;o.copyTo(t);while(--n>=0){e.sqrTo(t,i);if((r&1<<n)>0)e.mulTo(i,o,t);else{var s=t;t=i;i=s}}return e.revert(t)}function kWe(r,e){var t;if(r<256||e.isEven())t=new ad(e);else t=new ld(e);return this.exp(r,t)}function DWe(){var r=Qe();this.copyTo(r);return r}function OWe(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function RWe(){return this.t==0?this.s:this[0]<<24>>24}function AWe(){return this.t==0?this.s:this[0]<<16>>16}function FWe(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function PWe(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function BWe(r){if(r==null)r=10;if(this.signum()==0||r<2||r>36)return"0";var e=this.chunkSize(r);var t=Math.pow(r,e);var i=Fu(t),o=Qe(),n=Qe(),s="";this.divRemTo(i,o,n);while(o.signum()>0){s=(t+n.intValue()).toString(r).substr(1)+s;o.divRemTo(i,o,n)}return n.intValue().toString(r)+s}function MWe(r,e){this.fromInt(0);if(e==null)e=10;var t=this.chunkSize(e);var i=Math.pow(e,t),o=false,n=0,s=0;for(var a=0;a<r.length;++a){var l=doe(r,a);if(l<0){if(r.charAt(a)=="-"&&this.signum()==0)o=true;continue}s=e*s+l;if(++n>=t){this.dMultiply(i);this.dAddOffset(s,0);n=0;s=0}}if(n>0){this.dMultiply(Math.pow(e,n));this.dAddOffset(s,0)}if(o)re.ZERO.subTo(this,this)}function LWe(r,e,t){if(typeof e=="number"){if(r<2)this.fromInt(1);else{this.fromNumber(r,t);if(!this.testBit(r-1))this.bitwiseTo(re.ONE.shiftLeft(r-1),tF,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(e)){this.dAddOffset(2,0);if(this.bitLength()>r)this.subTo(re.ONE.shiftLeft(r-1),this)}}}else{var i=new Array,o=r&7;i.length=(r>>3)+1;e.nextBytes(i);if(o>0)i[0]&=(1<<o)-1;else i[0]=0;this.fromString(i,256)}}function zWe(){var r=this.t,e=new Array;e[0]=this.s;var t=this.DB-r*this.DB%8,i,o=0;if(r-- >0){if(t<this.DB&&(i=this[r]>>t)!=(this.s&this.DM)>>t)e[o++]=i|this.s<<this.DB-t;while(r>=0){if(t<8){i=(this[r]&(1<<t)-1)<<8-t;i|=this[--r]>>(t+=this.DB-8)}else{i=this[r]>>(t-=8)&255;if(t<=0){t+=this.DB;--r}}if((i&128)!=0)i|=-256;if(o==0&&(this.s&128)!=(i&128))++o;if(o>0||i!=this.s)e[o++]=i}}return e}function UWe(r){return this.compareTo(r)==0}function NWe(r){return this.compareTo(r)<0?this:r}function qWe(r){return this.compareTo(r)>0?this:r}function HWe(r,e,t){var i,o,n=Math.min(r.t,this.t);for(i=0;i<n;++i)t[i]=e(this[i],r[i]);if(r.t<this.t){o=r.s&this.DM;for(i=n;i<this.t;++i)t[i]=e(this[i],o);t.t=this.t}else{o=this.s&this.DM;for(i=n;i<r.t;++i)t[i]=e(o,r[i]);t.t=r.t}t.s=e(this.s,r.s);t.clamp()}function WWe(r,e){return r&e}function GWe(r){var e=Qe();this.bitwiseTo(r,WWe,e);return e}function tF(r,e){return r|e}function VWe(r){var e=Qe();this.bitwiseTo(r,tF,e);return e}function poe(r,e){return r^e}function jWe(r){var e=Qe();this.bitwiseTo(r,poe,e);return e}function moe(r,e){return r&~e}function $We(r){var e=Qe();this.bitwiseTo(r,moe,e);return e}function KWe(){var r=Qe();for(var e=0;e<this.t;++e)r[e]=this.DM&~this[e];r.t=this.t;r.s=~this.s;return r}function XWe(r){var e=Qe();if(r<0)this.rShiftTo(-r,e);else this.lShiftTo(r,e);return e}function YWe(r){var e=Qe();if(r<0)this.lShiftTo(-r,e);else this.rShiftTo(r,e);return e}function JWe(r){if(r==0)return-1;var e=0;if((r&65535)==0){r>>=16;e+=16}if((r&255)==0){r>>=8;e+=8}if((r&15)==0){r>>=4;e+=4}if((r&3)==0){r>>=2;e+=2}if((r&1)==0)++e;return e}function ZWe(){for(var r=0;r<this.t;++r)if(this[r]!=0)return r*this.DB+JWe(this[r]);if(this.s<0)return this.t*this.DB;return-1}function QWe(r){var e=0;while(r!=0){r&=r-1;++e}return e}function eGe(){var r=0,e=this.s&this.DM;for(var t=0;t<this.t;++t)r+=QWe(this[t]^e);return r}function tGe(r){var e=Math.floor(r/this.DB);if(e>=this.t)return this.s!=0;return(this[e]&1<<r%this.DB)!=0}function rGe(r,e){var t=re.ONE.shiftLeft(r);this.bitwiseTo(t,e,t);return t}function iGe(r){return this.changeBit(r,tF)}function oGe(r){return this.changeBit(r,moe)}function nGe(r){return this.changeBit(r,poe)}function sGe(r,e){var t=0,i=0,o=Math.min(r.t,this.t);while(t<o){i+=this[t]+r[t];e[t++]=i&this.DM;i>>=this.DB}if(r.t<this.t){i+=r.s;while(t<this.t){i+=this[t];e[t++]=i&this.DM;i>>=this.DB}i+=this.s}else{i+=this.s;while(t<r.t){i+=r[t];e[t++]=i&this.DM;i>>=this.DB}i+=r.s}e.s=i<0?-1:0;if(i>0)e[t++]=i;else if(i<-1)e[t++]=this.DV+i;e.t=t;e.clamp()}function aGe(r){var e=Qe();this.addTo(r,e);return e}function lGe(r){var e=Qe();this.subTo(r,e);return e}function uGe(r){var e=Qe();this.multiplyTo(r,e);return e}function cGe(){var r=Qe();this.squareTo(r);return r}function dGe(r){var e=Qe();this.divRemTo(r,e,null);return e}function pGe(r){var e=Qe();this.divRemTo(r,null,e);return e}function mGe(r){var e=Qe(),t=Qe();this.divRemTo(r,e,t);return new Array(e,t)}function hGe(r){this[this.t]=this.am(0,r-1,this,0,0,this.t);++this.t;this.clamp()}function fGe(r,e){if(r==0)return;while(this.t<=e)this[this.t++]=0;this[e]+=r;while(this[e]>=this.DV){this[e]-=this.DV;if(++e>=this.t)this[this.t++]=0;++this[e]}}function eb(){}function hoe(r){return r}function gGe(r,e,t){r.multiplyTo(e,t)}function yGe(r,e){r.squareTo(e)}function bGe(r){return this.exp(r,new eb)}function _Ge(r,e,t){var i=Math.min(this.t+r.t,e);t.s=0;t.t=i;while(i>0)t[--i]=0;var o;for(o=t.t-this.t;i<o;++i)t[i+this.t]=this.am(0,r[i],t,i,0,this.t);for(o=Math.min(r.t,e);i<o;++i)this.am(0,r[i],t,i,0,e-i);t.clamp()}function vGe(r,e,t){--e;var i=t.t=this.t+r.t-e;t.s=0;while(--i>=0)t[i]=0;for(i=Math.max(e-this.t,0);i<r.t;++i)t[this.t+i-e]=this.am(e-i,r[i],t,0,0,this.t+i-e);t.clamp();t.drShiftTo(1,t)}function yh(r){this.r2=Qe();this.q3=Qe();re.ONE.dlShiftTo(2*r.t,this.r2);this.mu=this.r2.divide(r);this.m=r}function xGe(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);else if(r.compareTo(this.m)<0)return r;else{var e=Qe();r.copyTo(e);this.reduce(e);return e}}function CGe(r){return r}function SGe(r){r.drShiftTo(this.m.t-1,this.r2);if(r.t>this.m.t+1){r.t=this.m.t+1;r.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(r.compareTo(this.r2)<0)r.dAddOffset(1,this.m.t+1);r.subTo(this.r2,r);while(r.compareTo(this.m)>=0)r.subTo(this.m,r)}function wGe(r,e){r.squareTo(e);this.reduce(e)}function TGe(r,e,t){r.multiplyTo(e,t);this.reduce(t)}function IGe(r,e){var t=r.bitLength(),i,o=Fu(1),n;if(t<=0)return o;else if(t<18)i=1;else if(t<48)i=3;else if(t<144)i=4;else if(t<768)i=5;else i=6;if(t<8)n=new ad(e);else if(e.isEven())n=new yh(e);else n=new ld(e);var s=new Array,a=3,l=i-1,u=(1<<i)-1;s[1]=n.convert(this);if(i>1){var c=Qe();n.sqrTo(s[1],c);while(a<=u){s[a]=Qe();n.mulTo(c,s[a-2],s[a]);a+=2}}var d=r.t-1,m,h=true,f=Qe(),b;t=cS(r[d])-1;while(d>=0){if(t>=l)m=r[d]>>t-l&u;else{m=(r[d]&(1<<t+1)-1)<<l-t;if(d>0)m|=r[d-1]>>this.DB+t-l}a=i;while((m&1)==0){m>>=1;--a}if((t-=a)<0){t+=this.DB;--d}if(h){s[m].copyTo(o);h=false}else{while(a>1){n.sqrTo(o,f);n.sqrTo(f,o);a-=2}if(a>0)n.sqrTo(o,f);else{b=o;o=f;f=b}n.mulTo(f,s[m],o)}while(d>=0&&(r[d]&1<<t)==0){n.sqrTo(o,f);b=o;o=f;f=b;if(--t<0){t=this.DB-1;--d}}}return n.revert(o)}function EGe(r){var e=this.s<0?this.negate():this.clone();var t=r.s<0?r.negate():r.clone();if(e.compareTo(t)<0){var i=e;e=t;t=i}var o=e.getLowestSetBit(),n=t.getLowestSetBit();if(n<0)return e;if(o<n)n=o;if(n>0){e.rShiftTo(n,e);t.rShiftTo(n,t)}while(e.signum()>0){if((o=e.getLowestSetBit())>0)e.rShiftTo(o,e);if((o=t.getLowestSetBit())>0)t.rShiftTo(o,t);if(e.compareTo(t)>=0){e.subTo(t,e);e.rShiftTo(1,e)}else{t.subTo(e,t);t.rShiftTo(1,t)}}if(n>0)t.lShiftTo(n,t);return t}function kGe(r){if(r<=0)return 0;var e=this.DV%r,t=this.s<0?r-1:0;if(this.t>0)if(e==0)t=this[0]%r;else for(var i=this.t-1;i>=0;--i)t=(e*t+this[i])%r;return t}function DGe(r){var e=r.isEven();if(this.isEven()&&e||r.signum()==0)return re.ZERO;var t=r.clone(),i=this.clone();var o=Fu(1),n=Fu(0),s=Fu(0),a=Fu(1);while(t.signum()!=0){while(t.isEven()){t.rShiftTo(1,t);if(e){if(!o.isEven()||!n.isEven()){o.addTo(this,o);n.subTo(r,n)}o.rShiftTo(1,o)}else if(!n.isEven())n.subTo(r,n);n.rShiftTo(1,n)}while(i.isEven()){i.rShiftTo(1,i);if(e){if(!s.isEven()||!a.isEven()){s.addTo(this,s);a.subTo(r,a)}s.rShiftTo(1,s)}else if(!a.isEven())a.subTo(r,a);a.rShiftTo(1,a)}if(t.compareTo(i)>=0){t.subTo(i,t);if(e)o.subTo(s,o);n.subTo(a,n)}else{i.subTo(t,i);if(e)s.subTo(o,s);a.subTo(n,a)}}if(i.compareTo(re.ONE)!=0)return re.ZERO;if(a.compareTo(r)>=0)return a.subtract(r);if(a.signum()<0)a.addTo(r,a);else return a;if(a.signum()<0)return a.add(r);else return a}function RGe(r){var e,t=this.abs();if(t.t==1&&t[0]<=vi[vi.length-1]){for(e=0;e<vi.length;++e)if(t[0]==vi[e])return true;return false}if(t.isEven())return false;e=1;while(e<vi.length){var i=vi[e],o=e+1;while(o<vi.length&&i<OGe)i*=vi[o++];i=t.modInt(i);while(e<o)if(i%vi[e++]==0)return false}return t.millerRabin(r)}function AGe(r){var e=this.subtract(re.ONE);var t=e.getLowestSetBit();if(t<=0)return false;var i=e.shiftRight(t);r=r+1>>1;if(r>vi.length)r=vi.length;var o=Qe();for(var n=0;n<r;++n){o.fromInt(vi[Math.floor(Math.random()*vi.length)]);var s=o.modPow(i,this);if(s.compareTo(re.ONE)!=0&&s.compareTo(e)!=0){var a=1;while(a++<t&&s.compareTo(e)!=0){s=s.modPowInt(2,this);if(s.compareTo(re.ONE)==0)return false}if(s.compareTo(e)!=0)return false}}return true}var QA,Pu,jHe,uoe,eF,YHe,uS,gh,Jo,vi,OGe,foe;var goe=p(()=>{QA={};if(true){QA=typeof window!=="undefined"?window.navigator:{}}jHe=244837814094590;uoe=(jHe&16777215)==15715070;if(uoe&&QA.appName=="Microsoft Internet Explorer"){re.prototype.am=KHe;Pu=30}else if(uoe&&QA.appName!="Netscape"){re.prototype.am=$He;Pu=26}else{re.prototype.am=XHe;Pu=28}re.prototype.DB=Pu;re.prototype.DM=(1<<Pu)-1;re.prototype.DV=1<<Pu;eF=52;re.prototype.FV=Math.pow(2,eF);re.prototype.F1=eF-Pu;re.prototype.F2=2*Pu-eF;YHe="0123456789abcdefghijklmnopqrstuvwxyz";uS=new Array;gh="0".charCodeAt(0);for(Jo=0;Jo<=9;++Jo)uS[gh++]=Jo;gh="a".charCodeAt(0);for(Jo=10;Jo<36;++Jo)uS[gh++]=Jo;gh="A".charCodeAt(0);for(Jo=10;Jo<36;++Jo)uS[gh++]=Jo;ad.prototype.convert=fWe;ad.prototype.revert=gWe;ad.prototype.reduce=yWe;ad.prototype.mulTo=bWe;ad.prototype.sqrTo=_We;ld.prototype.convert=xWe;ld.prototype.revert=CWe;ld.prototype.reduce=SWe;ld.prototype.mulTo=TWe;ld.prototype.sqrTo=wWe;re.prototype.copyTo=JHe;re.prototype.fromInt=ZHe;re.prototype.fromString=QHe;re.prototype.clamp=eWe;re.prototype.dlShiftTo=sWe;re.prototype.drShiftTo=aWe;re.prototype.lShiftTo=lWe;re.prototype.rShiftTo=uWe;re.prototype.subTo=cWe;re.prototype.multiplyTo=dWe;re.prototype.squareTo=pWe;re.prototype.divRemTo=mWe;re.prototype.invDigit=vWe;re.prototype.isEven=IWe;re.prototype.exp=EWe;re.prototype.toString=tWe;re.prototype.negate=rWe;re.prototype.abs=iWe;re.prototype.compareTo=oWe;re.prototype.bitLength=nWe;re.prototype.mod=hWe;re.prototype.modPowInt=kWe;re.ZERO=Fu(0);re.ONE=Fu(1);eb.prototype.convert=hoe;eb.prototype.revert=hoe;eb.prototype.mulTo=gGe;eb.prototype.sqrTo=yGe;yh.prototype.convert=xGe;yh.prototype.revert=CGe;yh.prototype.reduce=SGe;yh.prototype.mulTo=TGe;yh.prototype.sqrTo=wGe;vi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];OGe=(1<<26)/vi[vi.length-1];re.prototype.chunkSize=FWe;re.prototype.toRadix=BWe;re.prototype.fromRadix=MWe;re.prototype.fromNumber=LWe;re.prototype.bitwiseTo=HWe;re.prototype.changeBit=rGe;re.prototype.addTo=sGe;re.prototype.dMultiply=hGe;re.prototype.dAddOffset=fGe;re.prototype.multiplyLowerTo=_Ge;re.prototype.multiplyUpperTo=vGe;re.prototype.modInt=kGe;re.prototype.millerRabin=AGe;re.prototype.clone=DWe;re.prototype.intValue=OWe;re.prototype.byteValue=RWe;re.prototype.shortValue=AWe;re.prototype.signum=PWe;re.prototype.toByteArray=zWe;re.prototype.equals=UWe;re.prototype.min=NWe;re.prototype.max=qWe;re.prototype.and=GWe;re.prototype.or=VWe;re.prototype.xor=jWe;re.prototype.andNot=$We;re.prototype.not=KWe;re.prototype.shiftLeft=XWe;re.prototype.shiftRight=YWe;re.prototype.getLowestSetBit=ZWe;re.prototype.bitCount=eGe;re.prototype.testBit=tGe;re.prototype.setBit=iGe;re.prototype.clearBit=oGe;re.prototype.flipBit=nGe;re.prototype.add=aGe;re.prototype.subtract=lGe;re.prototype.multiply=uGe;re.prototype.divide=dGe;re.prototype.remainder=pGe;re.prototype.divideAndRemainder=mGe;re.prototype.modPow=IGe;re.prototype.modInverse=DGe;re.prototype.pow=bGe;re.prototype.gcd=EGe;re.prototype.isProbablePrime=RGe;re.prototype.square=cGe;foe=re});function yoe(r){var e=8;var t=0;function i(_,y){var I=(_&65535)+(y&65535);var T=(_>>16)+(y>>16)+(I>>16);return T<<16|I&65535}function o(_,y){return _>>>y|_<<32-y}function n(_,y){return _>>>y}function s(_,y,I){return _&y^~_&I}function a(_,y,I){return _&y^_&I^y&I}function l(_){return o(_,2)^o(_,13)^o(_,22)}function u(_){return o(_,6)^o(_,11)^o(_,25)}function c(_){return o(_,7)^o(_,18)^n(_,3)}function d(_){return o(_,17)^o(_,19)^n(_,10)}function m(_,y){var I=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);var T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225);var D=new Array(64);var P,k,A,Q,R,M,oe,ce,ue,Se;var Pt,ee;_[y>>5]|=128<<24-y%32;_[(y+64>>9<<4)+15]=y;for(var ue=0;ue<_.length;ue+=16){P=T[0];k=T[1];A=T[2];Q=T[3];R=T[4];M=T[5];oe=T[6];ce=T[7];for(var Se=0;Se<64;Se++){if(Se<16)D[Se]=_[Se+ue];else D[Se]=i(i(i(d(D[Se-2]),D[Se-7]),c(D[Se-15])),D[Se-16]);Pt=i(i(i(i(ce,u(R)),s(R,M,oe)),I[Se]),D[Se]);ee=i(l(P),a(P,k,A));ce=oe;oe=M;M=R;R=i(Q,Pt);Q=A;A=k;k=P;P=i(Pt,ee)}T[0]=i(P,T[0]);T[1]=i(k,T[1]);T[2]=i(A,T[2]);T[3]=i(Q,T[3]);T[4]=i(R,T[4]);T[5]=i(M,T[5]);T[6]=i(oe,T[6]);T[7]=i(ce,T[7])}return T}function h(_){var y=Array();var I=(1<<e)-1;for(var T=0;T<_.length*e;T+=e){y[T>>5]|=(_.charCodeAt(T/e)&I)<<24-T%32}return y}function f(_){_=_.replace(/\r\n/g,"\n");var y="";for(var I=0;I<_.length;I++){var T=_.charCodeAt(I);if(T<128){y+=String.fromCharCode(T)}else if(T>127&&T<2048){y+=String.fromCharCode(T>>6|192);y+=String.fromCharCode(T&63|128)}else{y+=String.fromCharCode(T>>12|224);y+=String.fromCharCode(T>>6&63|128);y+=String.fromCharCode(T&63|128)}}return y}function b(_){var y=t?"0123456789ABCDEF":"0123456789abcdef";var I="";for(var T=0;T<_.length*4;T++){I+=y.charAt(_[T>>2]>>(3-T%4)*8+4&15)+y.charAt(_[T>>2]>>(3-T%4)*8&15)}return I}r=f(r);return b(m(h(r),r.length*e))}var boe=p(()=>{});var FGe,PGe,ud;var _oe=p(()=>{FGe=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;PGe=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;ud=class{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(e,t=false){const i=t?PGe:FGe;const o=i.exec(e);i.lastIndex=0;this._major=o[1];this._minor=o[2];this._patch=o[3]||0}equals(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}isMoreRecentThan(e){if(this._major<e.major)return false;if(this._major>e.major)return true;if(this._minor<e.minor)return false;if(this._minor>e.minor)return true;if(this._patch<=e.patch)return false;if(this._patch>e.patch)return true}}});function BGe(r){return r.map(e=>{return`0${(e&255).toString(16)}`.slice(-2)}).join("")}var Hr,MGe,LGe,voe,zGe,xoe,rF,UGe,NGe,iF,qGe,Coe,oF,dS;var nF=p(()=>{nh();goe();boe();th();_oe();Ms();Hr=r=>H.byteArrayToString(Xo.decode(r));MGe="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=";LGe="ZW50ZXJwcmlzZV9saWNlbnNl";voe="YXBwX2lkZW50aWZpZXJz";zGe="cGxhdGZvcm0=";xoe="ZmVhdHVyZXM=";rF="ZXhwaXJlc19hdA==";UGe="ZG9tYWlucw==";NGe="YXBpX3Rva2Vu";iF="c2lnbmF0dXJl";qGe="dmVyc2lvbg==";Coe=class{constructor(e){this._version="2.4";this._l=typeof e==="string"?e.trim():e;this._e=this._parseBigInt("65537",10);this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10);this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch(e){this._decLic={};return false}return true}_hostnameValid(){if(typeof window==="undefined")return true;if(!this._decLic[Hr(voe)].length)return true;const{hostname:e}=window.location;let t=false;this._decLic[Hr(voe)].forEach(i=>{if(H.wildCardMatch(e,i)){t=true}});return t}_platformValid(){const e=this._decLic[Hr(zGe)];const t=true?"HTML5":"Server";return t===e}c(){return new Promise((e,t)=>{const i=this._validateError();if(i!==null){t(i)}e()})}validate(){const e=this._validateError();if(e!==null){return false}return true}_validateError(){const e=typeof this._l;if(e!=="string"||!this._jsonValid()){const t=new Error;t.code="ELICINVFMT";return t}if(!this._sigValid()){const t=new Error;t.code="ELICINV";return t}if(!this._hostnameValid()){const t=new Error;t.code="ELICINVHOST";return t}if(!this._platformValid()){const t=new Error;t.code="ELICINVPLAT";return t}if(this.isExp()){const t=new Error;t.code="ELICEXP";return t}return null}isToolAllowed(e){return this._includesFeature(e)}isWhiteLabel(){return this._includesFeature("whitelabel",new ud("2.4",true))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new ud("2.4",true))}t(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new ud("2.4",true)))return Promise.resolve();const e=this._decLic[Hr(UGe)][0]+Hr(Hr(MGe))+this._decLic[Hr(NGe)];const t=new Yo(e);return t.load().catch(()=>{})}isENT(){if(!this._decLic)return false;return this._decLic[Hr(LGe)]}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[Hr(rF)]}dl(){return Math.ceil((this._expAt()-Date.now())/(60*60*24*1e3))}isExp(e=Date.now()){if(this._decLic[Hr(rF)]===null)return false;return e>this._expAt()}_expAt(){return this._decLic[Hr(rF)]*1e3}_verify(e,t){let i;let o;o=this._encodeMessage(e);i=this._decodeSignature(t);i=i.substr(-64);const n=o===i;return n}_encodeMessage(e){const t=yoe(e);return t}_decodeSignature(e){let t;e=Xo.decode(e);e=BGe(e);e=this._parseBigInt(e,16);t=e.modPowInt(this._e,this._n);t=t.toString(16);return t}_parseBigInt(e,t){return new foe(e,t)}_parseLicense(){if(typeof this._l!=="string")return;if(!this._jsonValid())return;this._sig=this._decLic[Hr(iF)]||"";delete this._decLic[Hr(iF)];this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,"");this._message=this._l.replace(new RegExp(`,"${Hr(iF)}":"([^"]*)"`),"")}_includesFeature(e,t=new ud("1.0",true)){const i=new ud(this._decLic[Hr(qGe)],true);if(t.isMoreRecentThan(i))return true;return this._decLic[Hr(xoe)]&&this._decLic[Hr(xoe)].indexOf(e)!==-1}};oF=class{v(){return true}c(){return Promise.resolve()}isToolAllowed(e){return true}isWhiteLabel(){return false}areCustomAssetsAllowed(){return true}t(){return Promise.resolve()}isENT(){return false}exp(){return false}dl(){return 0}isExp(e=Date.now()){return false}};dS=Coe});var cd,ll,Bu,Soe,pS;var woe=p(()=>{cd=typeof window==="undefined"?global:window;ll=cd.requestAnimationFrame;Bu=cd.cancelAnimationFrame;Soe=0;pS=["ms","moz","webkit","o"];for(let r=0;r<pS.length&&!ll;++r){ll=cd[`${pS[r]}RequestAnimationFrame`];Bu=cd[`${pS[r]}CancelAnimationFrame`]||cd[`${pS[r]}CancelRequestAnimationFrame`]}if(ll){ll=ll.bind(cd)}if(Bu){Bu=Bu.bind(cd)}if(!ll){ll=function(r,e){const t=new Date().getTime();const i=Math.max(0,16-(t-Soe));const o=setTimeout(function(){r(t+i)},i);Soe=t+i;return o}}if(!Bu){Bu=function(r){clearTimeout(r)}}});var Toe,sF;var Ioe=p(()=>{Ln();il();Toe=class{constructor(e=new he(0,0),t=new he(1,1),i=new he(2,-1),o=new he(2,0)){this._p0=e.clone();this._p1=t.clone();this._p2=i.clone();this._p3=o.clone();this._segments=[];this._length=-1;this._sample=[]}set(e=new he(0,0),t=new he(1,1),i=new he(2,1),o=new he(2,0)){this._p0=e.clone();this._p1=t.clone();this._p2=i.clone();this._p3=o.clone()}getLength(){return this._length}calculateSegments(e=100){let t=0;let i=0;const o=[];const n=1/e;let s=this._p0.clone();for(let a=1;a<=e;a++){const l=[];l.push({t,s:i,point:s});t+=n;t=Math.min(t,1);const u=this.evalAt(t);const c=u.clone().subtract(s);i+=c.len();l.push({t,s:i,point:u});o.push(l);s=u}this._segments=o;this._length=i;return i}evalAt(e){e=this.normalizeParameter(e);const t=this._p0.clone().multiply((1-e)**3);const i=this._p1.clone().multiply(3*(1-e)*(1-e)*e);const o=this._p2.clone().multiply(3*(1-e)*e*e);const n=this._p3.clone().multiply(e*e*e);return t.add(i).add(o).add(n)}isInSegment(e,t){e=this.normalizeArcLength(e);return e>=t[0].s&&e<=t[1].s}getArcLengthSegment(e){e=this.normalizeArcLength(e);for(let t=0;t<this._segments.length;t++){const i=this._segments[t];if(this.isInSegment(e,i)){return i}}return null}normalizeArcLength(e){return Math.max(Math.min(this._length,e),0)}normalizeParameter(e){return Math.max(Math.min(1,e),0)}getParameterForArcLength(e){const t=this.normalizeArcLength(e);const i=this.getArcLengthSegment(t);if(!i){ne.warn("CubicBezierCurve#getParameterForArcLength","Segment not found.");return-1}const o=(t-i[1].s)/(i[0].s-i[1].s);return o*i[0].t+(1-o)*i[1].t}evalAtArcLength(e){return this.evalAt(this.getParameterForArcLength(e))}approximateAtArcLength(e){const t=this.normalizeArcLength(e);const i=this.getArcLengthSegment(t);if(!i){return-1}const o=(t-i[1].s)/(i[0].s-i[1].s);return i[0].point.clone().multiply(o).add(i[1].point.clone().multiply(1-o))}parameterSample(e=100){const t=1/e;const i=[];let o=0;for(let n=0;n<=e+1;n++){i.push(this.evalAt(o));o+=t}this._sample=i;return[...i]}arcLengthApproxSample(e=100,t=false,i=false){const o=this._length/e;const n=[];let s=0;for(let a=t?1:0;a<e+1;a++){n.push(this.approximateAtArcLength(s));s+=o}if(i){n.pop()}this._sample=n;return[...n]}};sF=Toe});var Eoe,aF;var koe=p(()=>{Eoe=class{constructor(e,t){this.min=e;this.max=t}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(e){return this.min<=e&&e<=this.max}};aF=Eoe});var xi,lF;var Doe=p(()=>{xi=class{constructor(e,t,i){this.x=e;this.y=t;this.z=i;if(typeof this.x==="undefined"){this.x=0}if(typeof this.y==="undefined"){this.y=0}if(typeof this.z==="undefined"){this.z=0}}set(e,t,i){this.x=e;this.y=t;this.z=i;return this}clone(){return new xi(this.x,this.y,this.z)}copy(e){this.x=e.x;this.y=e.y;this.z=e.z;return this}clamp(e,t){const i=e!==null&&typeof e!=="undefined";const o=t!==null&&typeof t!=="undefined";if(!(e instanceof xi)&&i){e=new xi(e,e,e)}if(!(t instanceof xi)&&o){t=new xi(t,t,t)}if(i){this.x=Math.max(e.x,this.x);this.y=Math.max(e.y,this.y);this.z=Math.max(e.z,this.z)}if(o){this.x=Math.min(t.x,this.x);this.y=Math.min(t.y,this.y);this.z=Math.min(t.z,this.z)}return this}divide(e){if(e instanceof xi){this.x/=e.x;this.y/=e.y;this.z/=e.z}else{this.x/=e;this.y/=e;this.z/=e}return this}subtract(e){if(e instanceof xi){this.x-=e.x;this.y-=e.y;this.z-=e.z}else{this.x-=e;this.y-=e;this.z-=e}return this}multiply(e){if(e instanceof xi){this.x*=e.x;this.y*=e.y;this.z*=e.z}else{this.x*=e;this.y*=e;this.z*=e}return this}add(e){if(e instanceof xi){this.x+=e.x;this.y+=e.y;this.z+=e.z}else{this.x+=e;this.y+=e;this.z+=e}return this}equals(e){if(e instanceof xi){return e.x===this.x&&e.y===this.y&&e.z===this.z}return e===this.x&&e===this.y&&e===this.z}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}fract(){this.x%=1;this.y%=1;this.z%=1;return this}toInt(){this.x|=0;this.y|=0;this.z|=0;return this}abs(){this.x=Math.abs(this.x);this.y=Math.abs(this.y);this.z=Math.abs(this.z);return this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(e){this.x=parseFloat(this.x.toFixed(e));this.y=parseFloat(this.y.toFixed(e));this.z=parseFloat(this.z.toFixed(e));return this}static fromObject(e){return new xi(e.x,e.y,e.z)}static get NULL(){return new xi(0,0,0)}};lF=xi});var se={};wt(se,{ColorMatrix:()=>qy,CubicBezierCurve:()=>sF,Matrix:()=>zi,Range:()=>aF,Rectangle:()=>Ct,Vector2:()=>he,Vector3:()=>lF});var uF=p(()=>{AA();Ioe();OA();koe();RA();il();Doe()});var tb={};wt(tb,{Base64:()=>Xo,Color:()=>X,ColorMatrix:()=>qy,Configurable:()=>Oe,Constants:()=>Li,CubicBezierCurve:()=>sF,Engine:()=>q,EventEmitter:()=>bi,Events:()=>fh,FreeLicenseChecker:()=>oF,GLUtils:()=>id,LicenseChecker:()=>dS,Log:()=>ne,Matrix:()=>zi,Range:()=>aF,Rectangle:()=>Ct,Utils:()=>H,Vector2:()=>he,Vector3:()=>lF,cancelAnimationFrame:()=>Bu,requestAnimationFrame:()=>ll});var dd=p(()=>{Ln();Qy();xo();rb();th();rd();uh();sh();DA();nF();Ms();woe();uF()});var cF;var Ooe=p(()=>{iS();dF();ZA();dd();cF=class{constructor(){this._container=new Ls;this._sprite=new ib;this._container.addChild(this._sprite)}render(e,t,i){const o=i.getDimensions();const n=this._getNextHighestPOT(o);if(!this._renderTexture){this._renderTexture=new Zy(e,n.x,n.y)}else{this._renderTexture.resizeTo(n)}const s=this._renderTexture.getDimensions();this._sprite.setTexture(i);this._sprite.updateTransform();this._renderTexture.clear();this._renderTexture.render(this._container);this._updateSprite(e,t,o,s)}_updateSprite(e,t,i,o){t.setTexture(this._renderTexture);this._renderTexture.setFrame(new Ct(0,0,i.x,i.y))}_getNextHighestPOT(e){return new he(H.nextHighestPOT(e.x),H.nextHighestPOT(e.y))}getRenderTexture(){return this._renderTexture}dispose(){if(!this._renderTexture){return}this._renderTexture.dispose();delete this._renderTexture}}});var ib;var dF=p(()=>{Ooe();iS();tr();ib=class extends Ls{constructor(e){super();this._shader=null;this._width=0;this._height=0;this._anchor=new he(0,0);this._canvasSmoothingEnabled=true;this._smoothDownscaling=false;this._onTextureUpdate=this._onTextureUpdate.bind(this);this.setTexture(e)}_onTextureUpdate(){this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}_renderWebGL(e){const t=e.save();if(this._smoothDownscaling){if(!this._potRenderer){this._potRenderer=new cF}if(this._texture){this._potRenderer.render(e,this,this._texture)}}e.restore(t);e.setObjectRenderer(e.renderers.sprite);e.renderers.sprite.render(this)}_renderCanvas(e){if(!this._texture)return;const t=this._worldTransform;const i=this._texture.getFrame();const{width:o,height:n}=i;const s=e.getCurrentRenderTarget().getPixelRatio();const a=this._anchor.x*-o|0;const l=this._anchor.y*-n|0;const u=e.getContext();u.setTransform(t.a,t.b,t.c,t.d,t.tx*s,t.ty*s);u.globalAlpha=this.getWorldAlpha();if(!this._texture)return;const c=this._texture.getBaseTexture();const d=c.getPixelRatio();const m=c.getSource();u.imageSmoothingEnabled=this._canvasSmoothingEnabled;if("beforeDraw"in e){e.beforeDraw(u)}u.drawImage(m,0,0,(m.naturalWidth||o)*d,(m.naturalHeight||n)*d,a*s,l*s,o*s,n*s)}isAtPosition(e){if(!this._texture)return void 0;const t=this._worldTransform.applyInverseToVector(e);const i=this._texture.getFrame();const{width:o,height:n}=i;const s=new he(-o,-n);s.multiply(this._anchor);const a=s.clone().add(o,n);if(t.x<s.x||t.x>a.x||t.y<s.y||t.y>a.y){return false}return true}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){const e=this._localBounds;const t=this._texture.getFrame();e.x=-t.width*this._anchor.x;e.y=-t.height*this._anchor.y;e.width=t.width;e.height=t.height;this._localBoundsNeedUpdate=false}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){const e=this._bounds;const t=this._texture.getFrame();const i=this._worldTransform;const o=this._anchor;const n=i.rectangleToCoordinates(t,o);let s=n[0].x;let a=n[0].y;let l=s;let u=a;n.forEach(({x:c,y:d})=>{s=Math.min(s,c);a=Math.min(a,d);l=Math.max(l,c);u=Math.max(u,d)});e.x=s;e.width=Math.abs(l-s);e.y=a;e.height=Math.abs(u-a);this._boundsNeedUpdate=false}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(e=true){if(!this._texture){return}this._texture.off("update",this._onTextureUpdate);e&&this._texture.dispose();this._texture=null;if(this._potRenderer){e&&this._potRenderer.dispose();delete this._potRenderer}}setTexture(e){if(!e)return;if(this._texture){this._texture.off("update",this._onTextureUpdate)}if(this._potRenderer){this._potRenderer.getRenderTexture().getBaseTexture().setDirty(true)}this._texture=e;if(e.getBaseTexture().isLoaded()){this._onTextureUpdate()}e.on("update",this._onTextureUpdate)}getShader(){return this._shader}setShader(e){this._shader=e}getWidth(){return this._width}setWidth(e){if(!this._texture)return;this._scale.x=e/this._texture.getFrame().width;this._width=e;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getHeight(){return this._height}setHeight(e){if(!this._texture)return;this._scale.y=e/this._texture.getFrame().height;this._height=e;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getDimensions(){return new he(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(e,t){this._anchor.set(e,t);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(e){this._smoothDownscaling=e}dispose(e=false,t=false){if(this._texture){this._texture.off("update",this._onTextureUpdate)}(e||t)&&this._texture&&this._texture.dispose(t);if(this._potRenderer){this._potRenderer.dispose()}}}});var HGe,q;var rb=p(()=>{iS();NA();ch();nS();eoe();aoe();dF();mh();ZA();JA();Wy();_A();Bs();$y();HGe={CanvasFilterManager:sd,Container:Ls,BaseTexture:Xt,Texture:Au,RenderTexture:Zy,WebGLRenderTarget:sl,CanvasRenderTarget:nl,Sprite:ib,Filter:zn,Filters:UA,PixelArrayImage:Qm,autoDetectRenderer(r,e,t={}){if(Pr.isSupported()){return new lS(r,e,t)}return new hh(r,e,t)},canvasRenderer(r,e,t={}){return new hh(r,e,t)}};q=HGe});var Roe,Aoe;var Foe=p(()=>{Roe=class{static current(){return process.env.ENV}static isTest(){return process.env.ENV==="test"}static isDevelopment(){return process.env.ENV==="development"}static isProduction(){return process.env.ENV==="production"||!this.isTest()&&!this.isDevelopment()}};Aoe=Roe});var Poe,pd;var mS=p(()=>{Poe=class{constructor(e){this._head=0;this._buf=e}peekInt8(){return this._buf[this._head]}peekInt16(e=false){const t=this._buf[this._head];const i=this._buf[this._head+1];if(!e){return(t<<8)+i}return(i<<8)+t}peekInt24(e=false){const t=this._buf[this._head];const i=this._buf[this._head+1];const o=this._buf[this._head+2];if(!e){return(t<<16)+(i<<8)+o}return(o<<16)+(i<<8)+t}peekInt32(e=false){const t=this._buf[this._head];const i=this._buf[this._head+1];const o=this._buf[this._head+2];const n=this._buf[this._head+3];if(!e){return(t<<32)+(i<<16)+(o<<8)+n}return(n<<32)+(o<<16)+(i<<8)+t}writeInt8(e){this._buf[this._head]=e&255}writeInt16(e){this._buf[this._head]=e>>8;this._buf[this._head+1]=e&255}readInt8(){const e=this.peekInt8();this._head+=1;return e}readInt16(e=false){const t=this.peekInt16(e);this._head+=2;return t}readInt24(e=false){const t=this.peekInt24(e);this._head+=3;return t}readInt32(e=false){const t=this.peekInt32(e);this._head+=4;return t}readString(e){let t="";for(let i=0;i<e;i++){const o=this.readInt8();t+=String.fromCharCode(o)}return t}getHead(){return this._head}setHead(e){this._head=e}};pd=Poe});var WGe,GGe,bh;var hS=p(()=>{WGe={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505};GGe={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};bh={MARKERS:WGe,EXIF_TAGS:GGe}});var pF,VGe,Boe,Moe,Loe;var zoe=p(()=>{mS();Ms();hS();({invariant:pF}=H);({MARKERS:VGe,EXIF_TAGS:Boe}=bh);Moe=class{constructor(e){this._buf=e;this._stream=new pd(this._buf);this._stream.setHead(0);this._parse();this._bigEndian=false}isValid(){this._stream.setHead(0);const e=this._stream.readInt16();if(e!==VGe.EXIF){return false}const t=this._stream.readInt16();if(!(t>0)){return false}const i=this._stream.readString(4);if(i!=="Exif"){return false}return true}_parse(){if(!this.isValid()){return}this._stream.setHead(10);const e=this._stream.getHead();this._bigEndian=false;const t=this._stream.readInt16();if(t===18761){this._bigEndian=false}else if(t===19789){this._bigEndian=true}else{pF(false,"Invalid TIFF data: No endian type found")}pF(this._stream.readInt16(!this._bigEndian)===42,"Invalid TIFF data: No 0x002A");const i=this._stream.readInt32(!this._bigEndian);pF(i>=8,"Invalid TIFF data: First IFD offset < 8");const o=e+i;const n=this._readTags(this._stream,e,o,this._bigEndian);this._tags=n.tags;this._tagData=n.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(e){if(this._tagData.Orientation){const{entryOffset:t}=this._tagData.Orientation;this._stream.setHead(t+8);this._stream.writeInt16(this._bigEndian?e:(e&255)<<8|e>>8&255)}}_readTags(e,t,i,o){e.setHead(i);const n=e.readInt16(!o);const s={};const a=[];for(let l=0;l<n;l++){const u=i+l*12+2;e.setHead(u);let c=e.readInt16(!o);let d;let m;let h;if(Boe[c]){c=Boe[c];d=e.readInt16(!o);m=e.readInt32(!o);h=e.readInt32(!o)+t;let f=null;switch(d){case 1:case 7:if(m===1){f=e.readInt8(!o)}else{f=[];for(let b=0;b<m;b++){f.push(e.readInt8(!o))}}break;case 2:e.setHead(m>4?h:u+8);f=e.readString(m);break;case 3:e.setHead(m>2?h:u+8);if(m===1){f=e.readInt16(!o)}else{f=[];for(let b=0;b<m;b++){f.push(e.readInt16(!o))}}break;case 4:case 9:e.setHead(m>1?h:u+8);if(m===1){f=e.readInt32(!o)}else{f=[];for(let b=0;b<m;b++){f.push(e.readInt32(!o))}}break;case 5:case 10:e.setHead(h);if(m===1){const b=e.readInt32(!o);const _=e.readInt32(!o);f=b/_}else{f=[];for(let b=0;b<m;b++){const _=e.readInt32(!o);const y=e.readInt32(!o);const I=_/y;f.push(I)}}break}s[c]=f;a[c]={value:f,numValues:m,entryOffset:u,valueOffset:h,type:d}}}return{tags:s,tagData:a}}getBuffer(){return this._buf}};Loe=Moe});var jGe,Uoe,mF;var Noe=p(()=>{mS();hS();({MARKERS:jGe}=bh);Uoe=class{constructor(e){this._buf=e;this._stream=new pd(this._buf);this._stream.setHead(0)}isValid(){this._stream.setHead(0);const e=this._stream.readInt16();if(e!==jGe.APP0){return false}const t=this._stream.readInt16();if(!(t>=16)){return false}const i=this._stream.readString(4);const o=this._stream.readInt8();if(!(i==="JFIF")){return false}if(!(o===0)){return false}return true}setUnitDensity(e){this._stream.setHead(11);this._stream.writeInt8(e)}setDensityX(e){this._stream.setHead(12);this._stream.writeInt16(e)}setDensityY(e){this._stream.setHead(14);this._stream.writeInt16(e)}getUnitDensity(){this._stream.setHead(11);return this._stream.readInt8()}getDensityX(){this._stream.setHead(12);return this._stream.readInt16()}getDensityY(){this._stream.setHead(14);return this._stream.readInt16()}getBuffer(){return this._buf}};mF=Uoe});var FEt,ob,fS,$Ge,Us,nb;var hF=p(()=>{mS();th();hS();zoe();Noe();Ms();({invariant:FEt}=H);({MARKERS:ob}=bh);fS="data:image/jpeg;base64,";$Ge=new RegExp(`^${fS}`,"i");Us=class{constructor(e){this._buf=e;this._stream=new pd(this._buf);this._stream.setHead(0);this._segments=this._sliceIntoSegments(this._buf);this._exifData=new Loe(this._getMarkerBuffer(ob.EXIF));this._jfifData=new mF(this._getMarkerBuffer(ob.JFIF))}static toDataURL(e){return fS+Xo.encode(e)}static fromDataURL(e){const t=e.replace(fS,"");const i=Xo.decode(t);return i}restoreSegmentsInArray(e){e=this.restoreExifTagsToImageData(e);return this.restoreJfifSegmentToImageData(e)}restoreSegments(e){let t=Us.fromDataURL(e);t=this.restoreSegmentsInArray(t);return Us.toDataURL(t)}restoreExifTagsToImageData(e){if(!this._exifData.isValid()){return e}const t=this._sliceIntoSegments(e);const i=t[1][0];const o=e.slice(0,i);const n=e.slice(i);let s=o.concat(this._exifData.getBuffer());s=s.concat(n);return s}restoreJfifSegmentToImageData(e){if(!this._jfifData.isValid()){return e}const t=this._sliceIntoSegments(e);const i=this._findSegment(ob.JFIF,t);let o=[];if(i){const n=i[0];const s=i[1];const a=e.slice(0,n);const l=e.slice(n,s);const u=e.slice(s);const c=new mF(l);c.setDensityX(this._jfifData.getDensityX());c.setDensityY(this._jfifData.getDensityY());c.setUnitDensity(this._jfifData.getUnitDensity());o=a.concat(l).concat(u)}else{return e}return o}restoreExifTags(e){const t=Us.fromDataURL(e);const i=this.restoreExifTagsToImageData(t);return Us.toDataURL(i)}restoreJfifSegment(e){if(!this._jfifData.isValid()){return e}const t=Us.fromDataURL(e);const i=this.restoreJfifSegmentToImageData(t);return Us.toDataURL(i)}setOrientation(e){return this._exifData.setOrientation(e)}static isJPEG(e){return $Ge.test(e)}static bufferIsJPEG(e){return e[0]===255&&e[1]===216&&e[2]===255}static fromBase64String(e){const t=e.replace(fS,"");const i=Xo.decode(t);return new Us(i)}_findSegment(e,t=this._segments){for(let i=0;i<t.length;i++){const o=t[i][0];const n=t[i][1];this._stream.setHead(o);const s=this._stream.peekInt16();if(s===e){return[o,n]}}return false}_getLastSegment(e=this._segments){return e[e.length-1]}_getMarkerBuffer(e,t=this._segments){const i=this._findSegment(e,t);if(i){const o=i[0];const n=i[1];return this._buf.slice(o,n)}return false}_sliceIntoSegments(e){const t=new pd(e);const i=[];while(t.getHead()<e.length){const o=t.readInt16();if(o===ob.SOI){continue}if(o===ob.SOS){break}if(o>=65280&&o<=65535){const n=t.readInt16();const s=t.getHead()+n-2;i.push([t.getHead()-4,s]);t.setHead(s)}else{throw new Error(`Invalid marker: 0x${o.toString(16)}`)}}this._stream.setHead(0);return i}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[];this._segments=[]}};nb=Us});var qoe,Ci;var gS=p(()=>{if(true){qoe=typeof window!=="undefined"&&window.Image}if(false){qoe=null.Image}Ci=qoe});var yS,bS;var fF=p(()=>{dd();sh();yS=class extends bi{constructor(e=[]){super();this._onOperationUpdate=this._onOperationUpdate.bind(this);this._cacheEnabled=true;this._stack=e;this._stack.forEach(t=>{t.on("update",this._onOperationUpdate)})}clear(){this.forEach(e=>this.remove(e));this._stack=[]}hasChanges(){return this._stack.filter(e=>!!e).some(e=>e.hasChanges())}_onOperationUpdate(e,t){this.emit(fh.OPERATION_UPDATED,e,t)}enableCache(){this._cacheEnabled=true}disableCache(){this._cacheEnabled=false}forEach(e){return this._stack.filter(t=>!!t).forEach(e)}render(e,t){const i=t;const o=this._stack.filter(u=>!!u).filter(u=>u.getEnabled());o.reverse();const n=o.filter(u=>!u.isDirtyForRenderer(e.getRenderer()))[0];const s=o.indexOf(n);o.reverse();let a=0;if(s!==-1){a=o.length-s-1}for(let u=0;u<a;u++){ne.info(this.constructor.name,`Skipping ${o[u].constructor.name}`)}let l=Promise.resolve(i);for(let u=a;u<o.length;u++){const c=o[u];let d;let m;l=l.then(h=>{return c.render(h).then(f=>{if(d&&f!==d&&!this._cacheEnabled){m.disposeRenderTextures()}d=f;m=c;return f})})}return l.then(u=>{const c=!o.some(d=>d.isDirtyForRenderer(e.getRenderer()));return{outputTexture:u,renderDone:c}})}validateSettings(){return Promise.all(this._stack.filter(e=>!!e).map(e=>e.validateSettings()))}setAllToDirty(e=false){this.forEach(t=>t.setDirty(true,e))}updateDirtinessForRenderer(e){let t=false;for(let i=0;i<this._stack.length;i++){const o=this._stack[i];if(!o)continue;if(o.isDirtyForRenderer(e)){t=true}if(t){o.setDirtyForRenderer(true,e)}}}push(e){this._stack.push(e);e.on("update",this._onOperationUpdate)}pop(){const e=this._stack.pop();if(e){e.off("update",this._onOperationUpdate);e.dispose()}}unshift(e){this._stack.unshift(e);e.on("update",this._onOperationUpdate)}clone(){return new yS(this._stack.slice(0))}get(e){return this._stack[e]}getByIdentifier(e){return H.Array.find(this._stack,t=>t&&t.constructor.identifier===e)}getIndexByIdentifier(e){return H.Array.findIndex(this._stack,t=>t&&t.constructor.identifier===e)}moveToTop(e){const t=H.Array.findIndex(this._stack,o=>o&&o.constructor.identifier===e);if(t<0||t===this._stack.length-1){return}const i=this.getByIdentifier(e);this._stack.splice(t,1);this._stack[this._stack.length]=i}set(e,t){if(this._stack[e]){this._stack[e].off("update",this._onOperationUpdate);this._stack[e].dispose()}this._stack[e]=t;t.on("update",this._onOperationUpdate)}remove(e){const t=this._stack.indexOf(e);if(t===-1){return}if(this._stack[t]){this._stack[t].off("update",this._onOperationUpdate);this._stack[t].dispose()}this._stack.splice(t,1)}removeAt(e){if(this._stack[e]){this._stack[e].off("update",this._onOperationUpdate);this._stack[e].dispose()}delete this._stack[e]}getStack(){return this._stack}dispose(){this.forEach(e=>{e.dispose()})}};bS=yS});var Hoe,Woe,_S;var gF=p(()=>{dd();Hoe=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Vy();Woe=class{constructor(e,t){this._tag=e;this._name=t;this._start=Hoe()}stop(){const e=Hoe();const t=e-this._start;const i=Math.round(1e3/t);ne.info(this._tag,`${this._name} took ${t.toFixed(2)}ms (${i} FPS)`)}};_S=Woe});var yF,Xe;var bF=p(()=>{Ln();xo();rb();uh();gF();yF=class extends Oe{constructor(e,t={}){super(t,{enabled:{type:"boolean",default:true,serializable:false}});this._sdk=e;this._cacheEnabled=false;this._dirtiness={};this._sprite=new q.Sprite;this._container=new q.Container;this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(true)}render(e){if(!this.getEnabled()){ne.info(this.constructor.name,"Disabled - skipping");return Promise.resolve(e)}if(!this._renderTexture){const n=e.getDimensions().floor();this._renderTexture=new q.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}const t=this._sdk.getRenderer();let i;let o;if(ne.canLog("info")){o=new _S(this.constructor.name,"Rendering")}if(this.isDirtyForRenderer(t)){this._sprite.setTexture(e);const n=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(n);this._renderTexture.clear();i=this._render(e).then((s=false)=>{this.setDirtyForRenderer(s,t);return this._renderTexture})}else{ne.info(this.constructor.name,"Rendering from cache");i=Promise.resolve(this._renderTexture)}return i.then(n=>{if(o)o.stop();return n})}_render(e){let t;if(this._sdk.getRenderer().isOfType("webgl")){t=this._renderWebGL.bind(this)}else{t=this._renderCanvas.bind(this)}return t(e)}_renderWebGL(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(e){return e.clone()}onBeforeExport(){if(this.transform&&this._tempTransformChange){this.transform(this._tempTransformChange)}this._onBeforeExport()}onAfterExport(){if(this.transform&&this._tempInverseTransformChange){this.transform(this._tempInverseTransformChange)}this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(e,t){this._tempTransformChange=e;this._tempInverseTransformChange=t}reset(){this._dirty=true;this._glslPrograms={}}isDirtyForRenderer(e){const t=this._dirtiness[e.id];return typeof t==="undefined"?true:t}setDirtyForRenderer(e,t,i=false){this._dirtiness[t.id]=e}setDirty(e,t=false){for(const i in this._dirtiness){this.setDirtyForRenderer(e,{id:i},t)}}getSDK(){return this._sdk}getInputDimensions(e=true){let t=this._sdk.getInputDimensions();if(e){t.multiply(this._sdk.getZoom()).floor()}let i;this._sdk.getOperationsStack().forEach(o=>{if(i)return;if(o===this){i=true;return}t=o.getNewDimensions(t)});return t.floor()}clone(){const e=this.constructor;return new e(this._sdk,this.serializeOptions())}disposeRenderTextures(){if(this._renderTexture){this._renderTexture.dispose()}this._renderTexture=null}dispose(){this.disposeRenderTextures();this._sprite.dispose()}};yF.identifier=null;Xe=yF});var KGe,vS,Goe;var Voe=p(()=>{dd();il();bF();({OptionType:KGe}=Li);vS=class extends Xe{getRotation(){let e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90;break}return e}_getFlipVertically(){const{Orientation:e}=this.getTags();return[5,7].indexOf(e)!==-1}_getFlipHorizontally(){const{Orientation:e}=this.getTags();return[2,4].indexOf(e)!==-1}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(e){const t=this._getFinalOptions();const i=t.rotation%360;const o=i*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1);this._sprite.setRotation(o);this._sprite.setAnchor(.5,.5);this._sprite.updateTransform();const n=this._sprite.getBounds();this._renderTexture.resizeTo(new he(n.width,n.height));this._sprite.setPosition(this._renderTexture.getDimensions().divide(2));this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(e){const t=this._getFinalOptions();e=e.clone();if(t.rotation%180){e.flip()}return e}applyTo(e){const t=this._getFinalOptions();const i=H.createCanvas();if(Math.abs(t.rotation%180)===90){i.width=e.height;i.height=e.width}else{i.width=e.width;i.height=e.height}const o=i.getContext("2d");const n=t.rotation*Math.PI/180;const s=.5*(i.width-e.width);const a=.5*(i.height-e.height);o.translate(s,a);o.translate(.5*e.width,.5*e.height);o.rotate(n);o.translate(-.5*e.width,-.5*e.height);if(t.flipVertically){o.translate(0,e.height);o.scale(1,-1)}if(t.flipHorizontally){o.translate(e.width,0);o.scale(-1,1)}o.drawImage(e,0,0);return i}};vS.identifier="exif-orientation";vS.prototype.availableOptions={tags:{type:KGe.OBJECT,default:{}}};Goe=vS});var _h={};wt(_h,{ExifOrientationOperation:()=>Goe});var _F=p(()=>{Voe()});var vF,joe;var $oe=p(()=>{wn();xo();rb();rd();uh();gS();Ms();vF=class extends Oe{constructor(e,t={}){super(t);this._sdk=e}export(){const{imageFormat:e,transparent:t}=this._options;const i=o=>{if(!o.renderDone){return this._sdk.render().then(n=>{return i(n)})}return o};return this.validateSettings().then(()=>{return this._prepareSDK().then(o=>{return i(o)})}).then(o=>{const{outputTexture:n,renderDone:s}=o;const a=this._sdk.getRenderer();const l=a.getClearColor();if(e==="image/png"&&t){a.setClearColor(new X(0,0,0,0))}let u=a.getCanvas();if(a.isOfType("webgl")){u=this._createCanvasFromTexture(n)}a.setClearColor(l);return this._encodeImageFormat(u)}).then(o=>{return this._restoreExifMetadata(o,e)}).then(o=>{return this._restoreSDK().then(()=>o)})}_restoreExifMetadata(e,t,i){if(t===ed.JPEG){const o=this._sdk.getExif();if(o){if(true){if(typeof e==="string"){e=o.restoreSegments(e)}}if(false){const{renderType:n}=this._options;if(n===vo.BUFFER){e=Buffer.from(o.restoreSegmentsInArray([...e]))}else if(n===vo.DATAURL&&typeof e==="string"){e=o.restoreSegments(e)}}}}return Promise.resolve(e)}_encodeAsDataURL(e,t,i){if(H.isBrowser){const o=e.toDataURL(t,i);st(e);return Promise.resolve(o)}try{const o=e.toDataURL(t,i);st(e);return Promise.resolve(o)}catch(o){return Promise.error(o)}}_encodeAsHTMLImage(e,t,i){return this._encodeAsDataURL(e,t,i).then(o=>{const n=new Ci;n.src=o;st(e);return Promise.resolve(n)})}_encodeAsBuffer(e,t,i){if(false){if(t===ed.JPEG){const o=e.toBuffer(t,{quality:i,progressive:true,chromaSubsampling:false});st(e);return Promise.resolve(o)}if(t===ed.PNG){const o=e.toBuffer(t,{quality:i});st(e);return Promise.resolve(o)}if(t===ed.RAW){const o=e.toBuffer(t);st(o);return Promise.resolve(o)}return Promise.reject(new Error(`Unsupported imageFormat: ${t}`))}return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(e,t,i){const o=e.msToBlob();st(e);return Promise.resolve(o)}_encodeAsBLOB(e,t,i){return new Promise((o,n)=>{e.toBlob(s=>{o(s)},t,i)})}_encodeImageFormat(e){const{imageFormat:t,quality:i}=this._options;let{renderType:o}=this._options;if(o===vo.BLOB&&e.msToBlob&&!e.toBlob){o=vo.MSBLOB}switch(o){case vo.IMAGE:{return this._encodeAsHTMLImage(e,t,i)}case vo.DATAURL:{return this._encodeAsDataURL(e,t,i)}case vo.BUFFER:{return this._encodeAsBuffer(e,t,i)}case vo.MSBLOB:{return this._encodeAsMSBlob(e,t,i)}case vo.BLOB:{return this._encodeAsBLOB(e,t,i)}}return Promise.reject(new Error(`Unsupported RenderType: ${o}!`))}_prepareSDK(){const e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),rendererPixelRatio:e.getPixelRatio(),renderMode:this._sdk.getRenderMode()};this._sdk.setRenderMode("export");this._sdk.setTextureQuality(1);const t=e.isOfType("canvas");e.setPixelRatio(1);e.resizeTo(this._sdk.getFinalDimensions(),t);this._sdk.setAllOperationsToDirty(true);const i=this._sdk.getOperationsStack();i.forEach(o=>{o.disposeRenderTextures()});i.disableCache();return this._sdk.render()}_restoreSDK(){const e=this._sdk.getOperationsStack();e.enableCache();this._sdk.setRenderMode(this._sdkSettings.renderMode);const t=this._sdk.getRenderer();const i=t.isOfType("canvas");t.setPixelRatio(this._sdkSettings.rendererPixelRatio);t.resizeTo(this._sdkSettings.dimensions,i);this._sdk.setTextureQuality(this._sdkSettings.textureQuality);this._sdk.setAllOperationsToDirty(true);return this._sdk.render()}_createCanvasFromTexture(e){const t=this._sdk.getRenderer();const i=this._sdk.getFinalDimensions();const o=this._sdk.getRenderer().getContext();const n=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,n);const s=e.getBaseTexture().getGLTextureForRenderer(t);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0);const a=new Uint8Array(i.x*i.y*4);o.readPixels(0,0,i.x,i.y,o.RGBA,o.UNSIGNED_BYTE,a);const l=this._checkPixelsForTransparency(a);let u;if(l){const h=new q.Sprite(e);h.setFilters([new q.Filters.UnpremultiplyFilter]);const f=new q.Container;f.addChild(h);u=new q.RenderTexture(t,i.x,i.y);u.render(f);const b=u.getBaseTexture().getGLTextureForRenderer(t);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,b,0);o.readPixels(0,0,i.x,i.y,o.RGBA,o.UNSIGNED_BYTE,a);t.setRenderTarget();u.dispose()}const c=H.createCanvas();c.width=i.x;c.height=i.y;const d=c.getContext("2d");const m=d.createImageData(i.x,i.y);m.data.set(a);d.putImageData(m,0,0);o.deleteFramebuffer(n);return c}_checkPixelsForTransparency(e){const t=this._sdk.getFinalDimensions();const i=t.x*t.y*4;let o;for(let n=3;n<i;n+=4){o=e[n];if(o!==255){return true}}return false}};vF.prototype.availableOptions={renderType:{type:"string",available:H.values(vo),default:vo.IMAGE},imageFormat:{type:"string",available:H.values(ed),default:ed.PNG},quality:{type:"number",default:.8},transparent:{type:"boolean",default:true}};joe=vF});var XGe,YGe,Zo,Xoe,JGe,xF,CF,ul,ZGe,dkt,Rt,QGe,eVe,Koe,Yoe,Nt;var Joe=p(()=>{dd();hF();gS();$oe();fF();gF();_F();({Rectangle:XGe,Constants:YGe,Engine:Zo,Utils:Xoe,EventEmitter:JGe,Events:xF,Vector2:CF,Log:ul,Base64:ZGe,Color:dkt}=tb);Rt=r=>Xoe.byteArrayToString(ZGe.decode(r));({RenderType:QGe,ImageFormat:eVe,RendererType:Koe}=YGe);Yoe=class extends JGe{constructor(e,t={}){super();ie(this,"_onContextLost",()=>{this.emit("context-lost")});ie(this,"_initWatermark",()=>{if(this._options.watermark&&this._options.watermark.watermarkURI){this._watermarkOperation=this.createOperation("watermark",{watermarkURI:this._options.watermark.watermarkURI,alignment:this._options.watermark.alignment,inset:this._options.watermark.inset,size:this._options.watermark.size,crossOrigin:this._options.crossOrigin})}});this._onOperationUpdate=this._onOperationUpdate.bind(this);this._onContextRestored=this._onContextRestored.bind(this);this.version="3.9.0";this[Rt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=true;this._preferredRenderer=e;this._options={...t,extensions:{},renderMode:"dynamic",versionCheck:true,displayWelcomeMessage:true,image:null,canvas:null,transparent:false,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:false,smoothUpscaling:false,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:Math.max(typeof window!=="undefined"&&window.devicePixelRatio||1,1)};if(this._options.smoothUpscaling){Zo.BaseTexture.DefaultMagFilter=Zo.BaseTexture.LinearFilter}this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]});ul.setLevel(this._options.logLevel);this[Rt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=false;if(!this[Rt("X29wdGlvbnM=")][Rt("bGljZW5zZQ==")]){this[Rt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=true;this._l=new tb[Rt("RnJlZUxpY2Vuc2VDaGVja2Vy")]}else{const o=tb[Rt("TGljZW5zZUNoZWNrZXI=")];this._l=new o(this[Rt("X29wdGlvbnM=")][Rt("bGljZW5zZQ==")]);this._cv(true).then(()=>{this._ct()}).catch(n=>{ul.error(Rt("TGljZW5zaW5n"),n.message)})}this._defaultRenderMode=this._options.renderMode;this._renderMode=this._options.renderMode;this._textureQuality=this._options.textureQuality;this._offset=new CF;this._zoom=this._options.zoom;this._spriteScale=this._options.spriteScale;this._rotation=this._options.rotation;this._operations={};this._operationsStack=null;this.setOperationsStack(new bS);this._container=new Zo.Container;this._sprite=new Zo.Sprite;this._container.addChild(this._sprite);this._inputTexture=this._options.inputTexture;this._currentInputTexture=null;this._currentTexture=null;this._resizedTexture=null;this._resizedContainer=new Zo.Container;this._resizedSprite=new Zo.Sprite;this._resizedContainer.addChild(this._resizedSprite);this._texturesToDispose=[];this.setSmoothDownscaling(this._options.smoothDownscaling);this._registerOperations();this._initRenderer();const i=this._renderer.constructor.type;if(this._options.displayWelcomeMessage){if(false){ul.log("Version:",`${this.version} (${i}) - https://img.ly/photo-sdk`)}}if(this[Rt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]){ul.log(Rt("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LmltZy5seS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LmltZy5seS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2ltZy5seS9kb2NzL3Blc2RrL3dlYi9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg=="))}if(this._options.image){this.setImage(this._options.image,this._options.exif)}}_ct(){if(this._l.exp()){const e=this._l.isExp();if(e){ul.error(Rt("TGljZW5zaW5n"),Rt("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg=="))}else{ul.warn(Rt("TGljZW5zaW5n"),Rt("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}}}_cv(e=false){return this._l.c().catch(t=>{this[Rt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=false;let i=Rt("SW52YWxpZCBsaWNlbnNlLg==");if(e){if(t.code==="ELICEXP"){i=Rt("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg==")}else if(t.code==="ELICINVHOST"){i=Rt("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5pbWcubHkvbG9naW4u")}else if(t.code==="ELICINVPLAT"){i=Rt("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg==")}else if(t.code==="ELICINVFMT"){i=Rt("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license)}else if(t.code==="ELICINV"){i=Rt("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg==")}else{i=Rt("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5IHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")}}t.message=i;throw new Error(t)})}_t(){this._l.t()}_fl(){return this[Rt("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...e){this.emit(xF.OPERATION_UPDATED,...e)}_onContextRestored(){ul.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored.");this.setAllOperationsToDirty();this._operationsStack.forEach(e=>{e.disposeRenderTextures()});this.render()}export(e=QGe.DATAURL,t=eVe.PNG,i=.8,o=true,n=false){return this._cv(true).then(()=>{if(this.hasChanges()&&!n){this._t()}this._operationsStack.forEach(a=>{a.onBeforeExport()});const s=new joe(this,{renderType:e,imageFormat:t,quality:i,transparent:o});return s.export().then(a=>{this._operationsStack.forEach(l=>{l.onAfterExport()});return Promise.resolve(a)})})}render(e=true){if(!this._inputTexture){throw new Error("You need to set an image before calling PhotoEditorSDK#render.")}const t=this._renderer.getContext();if(t.startFrame){t.startFrame()}let i;if(ul.canLog("info")){i=new _S("\u26A1\u26A1\u26A1","Frame rendering")}ul.info("\u26A1\u26A1\u26A1","Rendering starts");const o=this._operationsStack;o.updateDirtinessForRenderer(this._renderer);return this._prepareTexture().then(n=>{if(this._renderMode==="export"){n=this._inputTexture}this._currentTexture=n;this._sprite.setTexture(n);this._container.updateTransform()}).then(()=>o.validateSettings()).then(()=>{if(this._fl()||!this[Rt("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]){if(!o.getByIdentifier("license-watermark")){this.createOperation("license-watermark")}else{o.moveToTop("license-watermark")}}if(!o.getByIdentifier("watermark")){this._initWatermark()}else{o.moveToTop("watermark")}return o.render(this,this._currentTexture)}).then(n=>{const{outputTexture:s}=n;this._currentTexture=s;this._sprite.setTexture(this._currentTexture);switch(this._renderMode){case"dynamic":{const a=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale());this._container.setPosition(a);this._sprite.setAnchor(.5,.5);this._sprite.setScale(this._spriteScale,this._spriteScale);this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1);this._container.setPosition(0,0);this._sprite.setAnchor(0,0);this._sprite.setPosition(0,0);this._sprite.setScale(this._spriteScale,this._spriteScale);this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1);this._container.setPosition(0,0);this._sprite.setAnchor(0,0);this._sprite.setPosition(0,0);this._sprite.setScale(1,1);this._sprite.setRotation(0);break}if(e){this._renderer.render(this._container)}return n}).then(n=>{if(i){i.stop()}if(t.endFrame){t.endFrame()}this._disposeTextures();return n})}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise((e,t)=>{const i=this.getTextureScale();if(this._textureQuality===1){return e(this._inputTexture)}const o=this.getInputDimensions().multiply(i).floor();let n;if(!this._resizedTexture){this._resizedTexture=new Zo.RenderTexture(this._renderer,o.x,o.y);n=true}else if(!this._resizedTexture.getDimensions().equals(o)){this._resizedTexture.resizeTo(o);n=true}if(n){this._resizedSprite.setScale(i,i);this._resizedSprite.setTexture(this._inputTexture);this._resizedTexture.render(this._resizedContainer)}e(this._resizedTexture)})}_registerOperations(){this._operations={};for(const e in _h){const t=_h[e];this._operations[t.identifier]=t}this._operations={...this._operations,...this._options.extensions.operations}}registerOperations(e){e.forEach(t=>{this._operations[t.identifier]=t})}setAllOperationsToDirty(e=false){this._operationsStack.setAllToDirty(e)}createOperation(e,t={},i=true){const o=this._operations[e];if(!o){throw new Error(`No operation with identifier \`${e}\` found.`)}const n=new o(this,t);if(i){this.addOperation(n)}return n}addOperation(e){this._operationsStack.push(e)}removeOperation(e){this._operationsStack.remove(e)}getInputDimensions(){const e=this._inputTexture.getFrame();return new CF(e.width,e.height)}getFinalDimensions(e=false){let t=this.getInputDimensions();const i=this._operationsStack;i.forEach(o=>{if(!o.getEnabled())return;t=o.getNewDimensions(t)});if(e){t.multiply(this._spriteScale)}return t.floor()}getOutputDimensions(e=false){return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(e=false){const t=this.getTextureScale();let i=this.getInputDimensions().multiply(t).floor();this._operationsStack.forEach(o=>{i=o.getNewDimensions(i)});return i}getCrossOrigin(){return Xoe.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){const e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};let t;let i;if(this._renderMode!=="export"&&this._options.canvas){const{canvas:o}=this._options;t=o.width;i=o.height}else if(this._inputTexture){const o=this.getFinalDimensions();t=o.x;i=o.y}else{t=1;i=1}switch(this._preferredRenderer){case Koe.WEBGL:this._renderer=Zo.autoDetectRenderer(t,i,e);this._renderer.on("context-restored",this._onContextRestored);this._renderer.on("context-lost",this._onContextLost);break;case Koe.CANVAS:this._renderer=Zo.canvasRenderer(t,i,e);this._renderer.on("context-restored",this._onContextRestored);break;default:ul.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`);this._renderer=Zo.autoDetectRenderer(t,i,e)}}resizeTo(e){this._renderer.resizeTo(e,true)}reset(){this._operationsStack.clear()}parseExif(e){if(!e){return}let{src:t}=e;let i=false;let o=null;if(true){i=nb.isJPEG(t);o=t}else if(e instanceof Ci&&e.rawSource){let n=e.rawSource;if(!(e.rawSource instanceof Buffer)){const s=e.rawSource.replace("data:image/jpeg;base64,","");n=Buffer.from(s,"base64");t=e.rawSource}else{t=e.rawSource.toString("base64")}i=nb.bufferIsJPEG(n);if(i){o=t}}if(i){let n=null;try{n=nb.fromBase64String(o)}catch(s){}if(!n){return}return n}}_handleExifOrientation(){const e=this._exif.getTags();if(e&&e.Orientation){const t=e.Orientation!==1&&e.Orientation!==2;const i=[2,4,5,7].indexOf(e.Orientation)!==-1;if(t||i){if(typeof navigator==="undefined"){if(!this._exifOperation){this._exifOperation=this.createOperation("exif-orientation")}this._exifOperation.setTags(e)}else{const o=window&&window.navigator&&window.navigator.userAgent||"";if(!!o.match(/msie|trident/i)||o.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){if(!this._exifOperation){this._exifOperation=this.createOperation("exif-orientation")}this._exifOperation.setTags(e)}}this._exif.setOrientation(1)}}}correctExifOrientation(e){const t=this.parseExif(e);if(!t){return e}const i=t.getTags();if(i&&i.Orientation){const o=i.Orientation!==1&&i.Orientation!==2;const n=[2,4,5,7].indexOf(i.Orientation)!==-1;if(o||n){if(typeof navigator==="undefined"){const s=this.createOperation("exif-orientation",{},false);s.setTags(i);e=s.applyTo(e)}else{const s=window&&window.navigator&&window.navigator.userAgent||"";if(!!s.match(/msie|trident/i)||s.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){const a=this.createOperation("exif-orientation",{},false);a.setTags(i);e=a.applyTo(e)}}t.setOrientation(1);i.Orientation=1;return e}}return e}hasImage(){return this._image!==null&&typeof this._image!=="undefined"}getImage(){return this._image}disposeTexture(e){this._texturesToDispose.push(e)}_disposeTextures(){for(let e=0;e<this._texturesToDispose.length;e++){this._texturesToDispose[e].dispose()}this._texturesToDispose=[]}setImage(e,t=null,i=null){this._disposeTextures();if(this._exifOperation){this.removeOperation(this._exifOperation);this._exifOperation=null}this._options.image=e;this._image=e;this._exif=t||this.parseExif(e);if(this._exif){this._handleExifOrientation()}const o=new Zo.BaseTexture(this._image);const n=new XGe(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);if(i){n.width=i.x;n.height=i.y}if(this._resizedTexture){this._resizedTexture.dispose()}this._resizedTexture=null;if(this._inputTexture){this.disposeTexture(this._inputTexture.getBaseTexture())}this._inputTexture=new Zo.Texture(o,n);this._currentTexture=this._inputTexture;this._sprite.clearTexture(false);this._sprite.setTexture(this._inputTexture);this.emit("new-image");this.setAllOperationsToDirty(true)}setInputTexture(e){this._inputTexture=e}getCanvas(){return this._renderer.getCanvas()}setCanvas(e){this._renderer.setCanvas(e)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(e){if(this._operationsStack){this._operationsStack.off(xF.OPERATION_UPDATED,this._onOperationUpdate)}this._operationsStack=e;this._operationsStack.on(xF.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(e,t){if(e instanceof CF){this._offset.copy(e)}else{this._offset.set(e,t)}}getRenderMode(){return this._renderMode}setRenderMode(e){this._renderMode=e}getZoom(){return this._zoom}setZoom(e){this._zoom=e;this._container.setScale(this._zoom,this._zoom);this._container.updateTransform()}getTextureQuality(){if(this._renderMode==="export"){return 1}return this._textureQuality}setTextureQuality(e){if(e!==this._textureQuality){this.setAllOperationsToDirty(true)}this._textureQuality=Math.min(1,e);if(this._textureQuality===1&&this._resizedTexture){this._resizedTexture.dispose();this._resizedTexture=null}}getSpriteScale(){return this._spriteScale}setSpriteScale(e){this._spriteScale=e;this._sprite.setScale(e,e);this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(e){this._options.smoothDownscaling=e;this._sprite.setSmoothDownscaling(e);this._resizedSprite.setSmoothDownscaling(e)}setRotation(e){this._rotation=e}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose();this._renderer.dispose();if(this._exif){this._exif.dispose()}if(this._resizedTexture){this._resizedTexture.dispose()}}};Nt=Yoe});var tVe,Ie;var sb=p(()=>{Ln();vie();xo();rb();th();rd();uh();Foe();sh();hF();gS();nF();uF();fF();Ms();_F();bF();Joe();Nt.version="3.9.0";Nt.Math=se;Nt.Operations=_h;Nt.Engine=q;Nt.Color=X;Nt.LicenseChecker=dS;Nt.Operation=Xe;Nt.EventEmitter=bi;Nt.Utils=H;Nt.Env=Aoe;Nt.OperationsStack=bS;Nt.EXIF=nb;Nt.Image=Ci;Nt.Configurable=Oe;Nt.Log=ne;Nt.Loaders=kA;Nt.RenderType=vo;Nt.ImageFormat=ed;Nt.OptionType=te;Nt.RendererType=dr;Nt.UniformType=xt;Nt.Base64=Xo;tVe={};Nt.UI=tVe;Ie=Nt});var Z=p(()=>{sb();sb()});var Qoe;var Zoe=p(()=>{Qoe="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"});function SF(r,e,t,i,o){return(r-e)*(o-i)/(t-e)+i}var iVe,vh,oVe,wF,xS;var TF=p(()=>{Z();Zoe();({ColorMatrix:iVe}=se);vh=1e-7;oVe=r=>{const e=Math.max(r.r,r.g,r.b);const t=Math.min(r.r,r.g,r.b);return(e+t)/2};wF=class extends q.Filter{constructor(){super();this._fragmentSource=Qoe}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{colorMatrix:u,gamma:c,shadows:d,highlights:m,whites:h,blacks:f}=this._options;const b=c!==1;const _=d!==0||m!==0;let y=new X(0,0,0,0);for(let I=0;I<n.width*n.height;I++){const T=I*4;y.r=l.data[T]/255;y.g=l.data[T+1]/255;y.b=l.data[T+2]/255;if(b){y.r=Math.pow(y.r,1/Math.max(c,vh));y.g=Math.pow(y.g,1/Math.max(c,vh));y.b=Math.pow(y.b,1/Math.max(c,vh))}if(_){const D=oVe(y);const P=d>=0?H.clamp(Math.pow(D,1/(d+1))+Math.pow(D,2/(d+1))*-.76-D,0,Math.max(d,1)):-H.clamp(Math.pow(D,1/(-d+1))+Math.pow(D,2/(-d+1))*-.76-D,0,Math.max(-d,1));const k=m<0?H.clamp(1-Math.pow(1-D,1/(1-m))-Math.pow(1-D,2/(1-m))*-.8-D,-1,0):-H.clamp(1-Math.pow(1-D,1/(1+m))-Math.pow(1-D,2/(1+m))*-.8-D,-1,0);const A=P*D*D;const Q=P-A;const R=D+A+k;y.r=H.clamp(R*((y.r+Q)/Math.max(D,vh)),0,1);y.g=H.clamp(R*((y.g+Q)/Math.max(D,vh)),0,1);y.b=H.clamp(R*((y.b+Q)/Math.max(D,vh)),0,1)}y=u.apply(y).clamp(0,1);y.r=SF(y.r,0,1,f/2,1+h/2);y.g=SF(y.g,0,1,f/2,1+h/2);y.b=SF(y.b,0,1,f/2,1+h/2);l.data[T]=y.r*255;l.data[T+1]=y.g*255;l.data[T+2]=y.b*255}a.putImageData(l,0,0)}};wF.prototype.availableOptions={gamma:{type:"number",default:1,uniformType:"f"},shadows:{type:"number",default:0,uniformType:"f"},highlights:{type:"number",default:1,uniformType:"f"},whites:{type:"number",default:0,uniformType:"f"},blacks:{type:"number",default:0,uniformType:"f"},colorMatrix:{type:"color-matrix",default:new iVe,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}};xS=wF});var tne;var ene=p(()=>{tne="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"});var sVe,aVe,IF,rne;var ine=p(()=>{Z();ene();({Vector2:sVe,ColorMatrix:aVe}=se);IF=class extends q.Filter{constructor(){super();this._fragmentSource=tne}_applyCanvas(e,t,i,o=false){const n=i.getContext();const s=t.getCanvas();const a=t.getContext();const{clarity:l}=this._options;const{colorMatrix:u}=this._options;const c=new X(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]);const{width:d}=s;const{height:m}=s;const h=a.getImageData(0,0,d,m);const f=n.createImageData(d,m);this.canvasShader(h,f,l,u,c);n.putImageData(f,0,0)}canvasShader(e,t,i,o,n){const s=(y,I,T)=>Math.min(Math.max(y,I),T);const a=(y,I,T)=>{const D=s((T-y)/(I-y),0,1);return D*D*(3-2*D)};const l=e.width*4;const{length:u}=e.data;const c=u-1;const d=0;const m=e.data;const h=t.data;const f=new X;const b=255*9;const _=y=>{y=y<d?d:y;y=y>c?c:y;return m[y]};for(let y=0;y<u;y+=4){let I=_(y+0);let T=_(y+1);let D=_(y+2);let P=_(y+3);const k=(I+_(y-4-l+0)+_(y-4+0)+_(y-4+l+0)+_(y-l+0)+_(y+l+0)+_(y+4-l+0)+_(y+4+0)+_(y+4+l))/b;const A=(T+_(y-4-l+1)+_(y-4+1)+_(y-4+l+1)+_(y-l+1)+_(y+l+1)+_(y+4-l+1)+_(y+4+1)+_(y+4+l+1))/b;const Q=(D+_(y-4-l+2)+_(y-4+2)+_(y-4+l+2)+_(y-l+2)+_(y+l+2)+_(y+4-l+2)+_(y+4+2)+_(y+4+l+2))/b;const R=(P+_(y-4-l+3)+_(y-4+3)+_(y-4+l+3)+_(y-l+3)+_(y+l+3)+_(y+4-l+3)+_(y+4+3)+_(y+4+l+3))/b;I/=255;T/=255;D/=255;P/=255;const M=s(I*.3+T*.59+D*.1,.111111,.999999);const oe=Math.min(a(1-M,0,.11),a(M,0,.11));const ce=i*3.7*oe;const ue=Math.pow(2,i*.27*oe);const Se=s(I+s((I-k)*ce,0,10),0,1)*ue;const Pt=s(T+s((T-A)*ce,0,10),0,1)*ue;const ee=s(D+s((D-Q)*ce,0,10),0,1)*ue;const V=s(P+s((P-R)*ce,0,10),0,1);f.set(Se,Pt,ee,V);const j=o.apply(f).clamp(0,1);h[y+0]=j.r*255;h[y+1]=j.g*255;h[y+2]=j.b*255;h[y+3]=j.a*255}}};IF.prototype.availableOptions={clarity:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new sVe(100,100),uniformType:"2f"},colorMatrix:{type:"color-matrix",default:new aVe,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}};rne=IF});var nne;var one=p(()=>{nne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"});var uVe,EF,sne;var ane=p(()=>{Z();one();({Vector2:uVe}=se);EF=class extends q.Filter{constructor(){super();this._fragmentSource=nne}_applyCanvas(e,t,i,o=false){const n=i.getContext();const s=t.getCanvas();const a=t.getContext();const{sharpness:l}=this._options;const{width:u}=s;const{height:c}=s;const d=a.getImageData(0,0,u,c);const m=n.createImageData(u,c);this.canvasShader(d,m,l);n.putImageData(m,0,0)}canvasShader(e,t,i){const o=(D,P,k)=>Math.min(Math.max(D,P),k);const n=1e-6;const{width:s}=e;const{height:a}=e;const l=e.data;const u=t.data;const c=(D,P,k)=>{return D*(1-k)+P*k};const d=D=>{return o(l[D]/255,0,1)};const m=(D,P)=>{const k=o(D,0,s-1);const A=o(P,0,a-1);return 4*(k+s*A)};const h=[];const f=[];const b=[-1,0,0,1];const _=[0,-1,1,0];const y=i>0?-1:.2;const I=i>0?5:.2;const T=Math.abs(i);for(let D=0;D<s;D++){for(let P=0;P<a;P++){const k=m(D,P);h[0]=d(k+0);h[1]=d(k+1);h[2]=d(k+2);h[3]=d(k+3);f[0]=I*h[0]*h[3];f[1]=I*h[1]*h[3];f[2]=I*h[2]*h[3];f[3]=I*h[3];for(let A=0;A<4;A++){const Q=b[A];const R=_[A];const M=m(D+Q,P+R);const oe=d(M+3);f[3]+=y*oe;for(let ce=0;ce<3;ce++){f[ce]+=y*d(M+ce)*oe}}for(let A=0;A<3;A++){f[A]/=Math.max(f[3],n);f[A]=o(f[A],0,1)}f[3]=o(f[3],0,1);for(let A=0;A<4;A++){h[A]=o(c(h[A],f[A],T),0,1);u[k+A]=h[A]*255}}}}};EF.prototype.availableOptions={sharpness:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new uVe(100,100),uniformType:"2f"}};sne=EF});var une;var lne=p(()=>{une="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"});var $kt,kF,cne;var dne=p(()=>{Z();lne();({Vector3:$kt}=se);kF=class extends q.Filter{constructor(){super();this._fragmentSource=une}_applyCanvas(e,t,i,o=false){const n=i.getContext();const s=t.getCanvas();const a=t.getContext();const{temperature:l}=this._options;const{width:u}=s;const{height:c}=s;const d=a.getImageData(0,0,u,c);const m=n.createImageData(u,c);this.canvasShader(d,m,l);n.putImageData(m,0,0)}canvasShader(e,t,i){const o=(y,I,T)=>Math.min(Math.max(y,I),T);const n=(y,I,T)=>y*(1-T)+I*T;const s=(y,I)=>{const T=y[0]*I[0]+y[3]*I[1]+y[6]*I[2];const D=y[1]*I[0]+y[4]*I[1]+y[7]*I[2];const P=y[2]*I[0]+y[5]*I[1]+y[8]*I[2];return[T,D,P]};const{length:a}=e.data;const l=a-1;const u=0;const c=e.data;const d=t.data;const m=y=>{y=y<u?u:y;y=y>l?l:y;return c[y]};const h=[.93,.54,0];const f=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311];const b=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702];const _=0;for(let y=0;y<a;y+=4){const I=m(y+0)/255;const T=m(y+1)/255;const D=m(y+2)/255;const P=m(y+3)/255;const k=[I,T,D];const A=s(f,k);A.z=o(A.z+_*.5226*.1,-.5226,.5226);const Q=s(b,A);const R=[Q[0]<.5?2*Q[0]*h[0]:1-2*(1-Q[0])*(1-h[0]),Q[1]<.5?2*Q[1]*h[1]:1-2*(1-Q[1])*(1-h[1]),Q[2]<.5?2*Q[2]*h[2]:1-2*(1-Q[2])*(1-h[2])];d[y+0]=n(Q[0],R[0],i)*255;d[y+1]=n(Q[1],R[1],i)*255;d[y+2]=n(Q[2],R[2],i)*255;d[y+3]=P*255}}};kF.prototype.availableOptions={temperature:{type:"number",default:0,uniformType:"f"}};cne=kF});var Mu,ab,pne;var mne=p(()=>{Z();TF();ine();ane();dne();({ColorMatrix:Mu}=se);ab=class extends Xe{constructor(...e){super(...e);this._clarityFilter=new rne;this._temperatureFilter=new cne;this._sharpnessFilter=new sne;this._filter=new xS;this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(e){const t=e.getDimensions();t.x=1/t.x;t.y=1/t.y;const i=new Mu;i.multiply(Mu.createSaturationMatrix(-.3*this._options.clarity+1));i.multiply(Mu.createContrastMatrix(.1*this._options.clarity+1));this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:i,colorOffset:i.getOffsets()});this._temperatureFilter.set({temperature:this._options.temperature});this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});const o=new Mu;o.multiply(Mu.createExposureMatrix(this._options.exposure));o.multiply(Mu.createSaturationMatrix(this._options.saturation+1));o.multiply(Mu.createContrastMatrix((this._options.contrast>0?this._options.contrast*2:this._options.contrast)+1));o.multiply(Mu.createBrightnessMatrix(this._options.brightness));this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:o,colorOffset:o.getOffsets()});const n=[];if(this._options.clarity!==0){n.push(this._clarityFilter)}if(this._options.sharpness!==0){n.push(this._sharpnessFilter)}if(this._options.temperature!==0){n.push(this._temperatureFilter)}n.push(this._filter);this._sprite.setFilters(n);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._clarityFilter.dispose();this._temperatureFilter.dispose();this._sharpnessFilter.dispose()}};ab.identifier="adjustments";ab.prototype.availableOptions={brightness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:"number",default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:"number",default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1}};Ie.Operations.AdjustmentsOperation=ab;pne=ab});var fne;var hne=p(()=>{fne="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var CS,DF,Ui;var xh=p(()=>{Z();hne();({Vector2:CS}=se);DF=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=fne;this._lastBlurRadius=null;this._lastDimensions=new CS(0,0);this._blurredRenderTarget=new q.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=false,n=null){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}const s=t.getCanvas();const a=t.getContext();const l=i.getContext();if(this._lastBlurRadius===this._options.blurRadius){l.drawImage(s,0,0)}const u=a.getImageData(0,0,s.width,s.height);const c=l.getImageData(0,0,s.width,s.height);let d=this._options.blurRadius;const{delta:m}=this._options;const h=30;for(let f=0;f<s.width;f++){for(let b=0;b<s.height;b++){const _=f+b*s.width;const y=_*4;let I=0;let T=0;let D=0;let P=0;let k=0;if(n){d=n(f/s.width,b/s.height)}const A=this._random(f,1-b/s.height);for(let Q=-h;Q<=h;Q++){const R=(Q+A-.5)/h;const M=1-Math.abs(R);const oe=m.x*R*d;const ce=m.y*R*d;const ue=Math.max(Math.min(f+oe,s.width-1),0);const Se=Math.max(Math.min(b+ce,s.height-1),0);const Pt=(Math.round(Se)*s.width+Math.round(ue))*4;const ee=u.data[Pt+3];const V=ee*u.data[Pt];const j=ee*u.data[Pt+1];const be=ee*u.data[Pt+2];I+=V*M;T+=j*M;D+=be*M;P+=ee*M;k+=M}I/=k;T/=k;D/=k;P/=k;c.data[y]=I/P;c.data[y+1]=T/P;c.data[y+2]=D/P;c.data[y+3]=P}}l.putImageData(c,0,0);this._lastDimensions.copy(new CS(s.width,s.height))}_renderLQBlur(e,t,i,o){const n=t.getDimensions();const s=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());i.setPixelRatio(t.getPixelRatio());i.resizeTo(t.getDimensions());if(this._lastBlurRadius!==this._options.blurRadius||s){this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}const a=i.getContext();a.drawImage(this._blurredRenderTarget.getCanvas(),0,0);this._lastDimensions.copy(n)}_random(e,t){const i=12.9898;const o=78.233;const n=43758.5453;const s=e*i+t*o;const a=s-3.14*Math.floor(s/3.14);const l=Math.sin(a)*n;return l-Math.floor(l)}};DF.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},delta:{type:"vector2",default:new CS(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new CS(100,100),uniformType:"2f"},blurQuality:{type:"string",default:"low"}};Ui=DF});var gne,lb,yne;var bne=p(()=>{Z();xh();({Vector2:gne}=se);lb=class extends Xe{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;const t={blurQuality:{type:"string"}};this._horizontalFilter=new Ui({},t);this._verticalFilter=new Ui({},t);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new gne(.5,.5));this._verticalFilter.setDelta(new gne(-.5,.5));this._filter=new Ui({},t)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){if(this._options.highQualityCanvasBlur){return this._renderBlur(e)}return this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions();const i=t.min();const{blurRadius:o}=this._options;const n={blurRadius:o*i,texSize:t,blurQuality:"high"};this._horizontalFilter.set(n);this._verticalFilter.set(n);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t}=this._options;const i=e.getDimensions();this._filter.set({blurRadius:t,texSize:i,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}transform(e){const t=this.getBlurRadius();const i=e.applyToRelativeSize(t);this.set({blurRadius:i},false)}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};lb.identifier="blur";lb.prototype.availableOptions={blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};Ie.Operations.BlurOperation=lb;yne=lb});var vne;var _ne=p(()=>{vne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"});var OF,xne,RF;var Cne=p(()=>{Z();_ne();OF=class extends q.Filter{constructor(){super();this._fragmentSource=vne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=i.getContext();const{filteredCanvas:a}=this._options;s.save();s.drawImage(n,0,0);s.globalAlpha=this._options.intensity;s.drawImage(a,0,0);s.restore()}};OF.prototype.availableOptions={filteredImage:{type:"number",default:1,uniformType:"i"},filteredCanvas:{type:"object",default:null},intensity:{type:"number",default:1,uniformType:"f"}};xne=class{constructor(e=1){this._intensity=e;this._stack=[];this._dirtiness={};this._renderTextures={};this._container=new q.Container;this._sprite=new q.Sprite;this._container.addChild(this._sprite);this._blendFilter=new OF}push(e){this._stack.push(e)}clear(){this._stack=[]}render(e,t,i){if(this.isEmpty()){return Promise.resolve()}const o=e.getRenderer();this._sprite.setTexture(t);let n=this._renderTextures[o.id];if(!n){const l=e.getSprite().getTexture().getFrame();n=new q.RenderTexture(e.getRenderer(),l.width,l.height);this._renderTextures[o.id]=n}const s=i.getDimensions();n.resizeTo(s);const a=this.isDirtyForRenderer(o);if(a){this._stack.forEach(u=>{u.update(e)});const l=this._stack.map(u=>u.getFilter());this._sprite.setFilters(l);n.render(this._container);this.setDirtyForRenderer(false,o)}this._blendFilter.setIntensity(this._intensity);if(o.isOfType("canvas")){this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas())}else if(o.isOfType("webgl")){const l=n.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage());o.updateTexture(l,false)}this._sprite.setFilters([this._blendFilter]);i.clear(X.TRANSPARENT);i.render(this._container);if(a){this.disposeRenderTextures()}return Promise.resolve()}setIntensity(e){this._intensity=e}isEmpty(){return this._stack.length===0}isDirtyForRenderer(e){if(!(e.id in this._dirtiness)){this._dirtiness[e.id]=true}return this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness){this._dirtiness[t]=e}}disposeRenderTextures(){for(const e in this._renderTextures){this._renderTextures[e].dispose();delete this._renderTextures[e]}}dispose(){this.disposeRenderTextures();this._stack.forEach(e=>e.dispose());this._stack=[];this._blendFilter.dispose();this._sprite.dispose()}};RF=xne});var Ch,Ce;var et=p(()=>{Z();Cne();Ch=class extends Oe{constructor(e={},t={}){super(e,{intensity:{type:"number",default:1,setter(i){this._stack&&this._stack.setIntensity(i);return i}},dirty:{type:"boolean",default:true},...t});this._stack=new RF(this._options.intensity)}render(e,t,i){return this._stack.render(e,t,i).then(o=>{this.setDirty(false);return o})}setDirtyForRenderer(e,t){this._stack.setDirtyForRenderer(e,t)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}};Ch.identifier=null;Ch.isIdentity=false;Ch.displayName=null;Ch.PrimitivesStack=RF;Ce=Ch});var wne;var Sne=p(()=>{wne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"});var Tne,vt;var Zr=p(()=>{Z();Tne=class extends Oe{update(){}getFilter(){return this._filter}dispose(){if(this._filter){this._filter.dispose();this._filter=null}}};vt=Tne});var SS,AF,md;var Ine=p(()=>{Z();Sne();Zr();SS=class extends q.Filter{constructor(){super();this._fragmentSource=wne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);let{brightness:u}=this._options;if(u===0){a.putImageData(l,0,0);return}u*=255;for(let c=0;c<n.width*n.height;c++){const d=c*4;l.data[d]+=u;l.data[d+1]+=u;l.data[d+2]+=u}a.putImageData(l,0,0)}};SS.prototype.availableOptions={brightness:{type:"number",default:0,uniformType:"f"}};AF=class extends vt{constructor(...e){super(...e);this._filter=new SS}update(){this._filter.setBrightness(this._options.brightness)}};AF.prototype.availableOptions=SS.prototype.availableOptions;md=AF});var kne;var Ene=p(()=>{kne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"});var wS,FF,Ni;var Dne=p(()=>{Z();Ene();Zr();wS=class extends q.Filter{constructor(){super();this._fragmentSource=kne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{contrast:u}=this._options;if(u===1){return}for(let c=0;c<n.width*n.height;c++){const d=c*4;l.data[d]=(l.data[d]-127)*u+127;l.data[d+1]=(l.data[d+1]-127)*u+127;l.data[d+2]=(l.data[d+2]-127)*u+127}a.putImageData(l,0,0)}};wS.prototype.availableOptions={contrast:{type:"number",default:1,uniformType:"f"}};FF=class extends vt{constructor(...e){super(...e);this._filter=new wS}update(){this._filter.setContrast(this._options.contrast)}};FF.prototype.availableOptions=wS.prototype.availableOptions;Ni=FF});var Rne;var One=p(()=>{Rne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"});var gVe,TS,PF,IS;var Ane=p(()=>{Z();One();Zr();({ColorMatrix:gVe}=se);TS=class extends q.Filter{constructor(){super();this._fragmentSource=Rne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{colorMatrix:u}=this._options;let c=new X(0,0,0,0);for(let d=0;d<n.width*n.height;d++){const m=d*4;c.r=l.data[m]/255;c.g=l.data[m+1]/255;c.b=l.data[m+2]/255;c=u.apply(c);l.data[m]=c.r*255;l.data[m+1]=c.g*255;l.data[m+2]=c.b*255}a.putImageData(l,0,0)}};TS.prototype.availableOptions={colorMatrix:{type:"color-matrix",default:new gVe,uniformType:"mat4"},colorMatrixOffset:{type:"array",default:[],uniformType:"4f"}};PF=class extends vt{constructor(...e){super(...e);this._filter=new TS}update(){this._filter.setColorMatrix(this._options.colorMatrix)}};PF.prototype.availableOptions=TS.prototype.availableOptions;IS=PF});var Pne;var Fne=p(()=>{Pne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"});var ES,BF,Ns;var Bne=p(()=>{Z();Fne();Zr();ES=class extends q.Filter{constructor(){super();this._fragmentSource=Pne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const u=[.3,.59,.11];const{desaturation:c}=this._options;for(let d=0;d<n.width*n.height;d++){const m=d*4;const h=u[0]*l.data[m]/255+u[1]*l.data[m+1]/255+u[2]*l.data[m+2]/255;l.data[m]+=(h*255-l.data[m])*c;l.data[m+1]+=(h*255-l.data[m+1])*c;l.data[m+2]+=(h*255-l.data[m+2])*c}a.putImageData(l,0,0)}};ES.prototype.availableOptions={desaturation:{type:"number",default:1,uniformType:"f"}};BF=class extends vt{constructor(...e){super(...e);this._filter=new ES}update(){this._filter.setDesaturation(this._options.desaturation)}};BF.prototype.availableOptions=ES.prototype.availableOptions;Ns=BF});var Lne;var Mne=p(()=>{Lne='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'});var kS,MF,DS;var zne=p(()=>{Z();Mne();Zr();kS=class extends q.Filter{constructor(){super();this._fragmentSource=Lne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{lightColor:u,darkColor:c,intensity:d}=this._options;for(let m=0;m<n.width*n.height;m++){const h=m*4;const f=l.data[h]/255;const b=l.data[h+1]/255;const _=l.data[h+2]/255;const y=l.data[h+3]/255;const I=new X(f,b,_,y);const T=this._duoToneKernel(I,u,c,d);l.data[h]=T.r*255;l.data[h+1]=T.g*255;l.data[h+2]=T.b*255;l.data[h+3]=T.a*255}a.putImageData(l,0,0)}_duoToneKernel(e,t,i,o){const n=1e-7;e.clone().clamp(0,1);if(o>0){const u=Math.max(o+1,n);e.r=1-Math.pow(1-e.r,u);e.g=1-Math.pow(1-e.g,u);e.b=1-Math.pow(1-e.b,u)}else{const u=Math.max(-o+1,n);e.r=Math.pow(e.r,u);e.g=Math.pow(e.g,u);e.b=Math.pow(e.b,u)}const s=.2126*e.r+.7152*e.g+.0722*e.b;const a=Math.min(Math.max(s,0),1);const l=i.clone().mix(t,a);l.a*=e.a;return l}};kS.prototype.availableOptions={lightColor:{type:"color",default:X.RED,uniformType:"4f"},darkColor:{type:"color",default:X.BLACK,uniformType:"4f"},intensity:{type:"number",default:.5,uniformType:"f"}};MF=class extends vt{constructor(...e){super(...e);this._filter=new kS}update(){this._filter.setLightColor(this._options.lightColor);this._filter.setDarkColor(this._options.darkColor);const e=2*this._options.intensity-1;this._filter.setIntensity(e)}};MF.prototype.availableOptions=kS.prototype.availableOptions;DS=MF});var Nne;var Une=p(()=>{Nne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"});var OS,LF,RS;var qne=p(()=>{Z();Une();Zr();OS=class extends q.Filter{constructor(){super();this._fragmentSource=Nne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{gamma:u}=this._options;const c=new Float32Array(256);for(let h=0;h<256;h++){c[h]=255*Math.pow(h/255,u.r)}const d=new Float32Array(256);for(let h=0;h<256;h++){d[h]=255*Math.pow(h/255,u.g)}const m=new Float32Array(256);for(let h=0;h<256;h++){m[h]=255*Math.pow(h/255,u.b)}for(let h=0;h<n.width*n.height;h++){const f=h*4;l.data[f]=c[l.data[f]];l.data[f+1]=d[l.data[f+1]];l.data[f+2]=m[l.data[f+2]]}a.putImageData(l,0,0)}};OS.prototype.availableOptions={gamma:{type:"color",default:X.WHITE,uniformType:"3f"}};LF=class extends vt{constructor(...e){super(...e);this._filter=new OS}update(){this._filter.setGamma(this._options.gamma)}};LF.prototype.availableOptions=OS.prototype.availableOptions;RS=LF});var Wne;var Hne=p(()=>{Wne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"});var AS,zF,Sh;var Gne=p(()=>{Z();Hne();Zr();AS=class extends q.Filter{constructor(){super();this._fragmentSource=Wne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{color:u}=this._options;let c;for(let d=0;d<n.width;d++){for(let m=0;m<n.height;m++){const h=(n.width*m+d)*4;const f=d/n.width;const b=m/n.height;const _=(f-.5)/.75;const y=(b-.5)/.75;const I=_*_;const T=y*y;c=1-(I+T);c=Math.min(Math.max(c,.1),1);l.data[h]*=c*u.r;l.data[h+1]=l.data[h+1]*(c*u.g);l.data[h+2]=l.data[h+2]*(c*u.b);l.data[h+3]=255}}a.putImageData(l,0,0)}};AS.prototype.availableOptions={color:{type:"color",default:X.WHITE,uniformType:"3f"}};zF=class extends vt{constructor(...e){super(...e);this._filter=new AS}update(){this._filter.setColor(this._options.color)}};zF.prototype.availableOptions=AS.prototype.availableOptions;Sh=zF});var jne;var Vne=p(()=>{jne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"});var $ne,Kne,FS;var Xne=p(()=>{Z();Vne();Zr();$ne=class extends q.Filter{constructor(){super();this._fragmentSource=jne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let u=0;u<n.width;u++){for(let c=0;c<n.height;c++){const d=(n.width*c+u)*4;l.data[d+2]=l.data[d+1]*.33;l.data[d]*=.6;l.data[d+2]+=l.data[d]*.33;l.data[d+1]=l.data[d+1]*.7;l.data[d+3]=255}}a.putImageData(l,0,0)}};Kne=class extends vt{constructor(...e){super(...e);this._filter=new $ne}};FS=Kne});var Jne;var Yne=p(()=>{Jne="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"});var Zne,Qne,wh;var ese=p(()=>{Z();Yne();Zr();Zne=class extends q.Filter{constructor(){super();this._fragmentSource=Jne}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let u=0;u<n.width;u++){for(let c=0;c<n.height;c++){const d=(n.width*c+u)*4;const m=l.data[d]*.2125+l.data[d+1]*.7154+l.data[d+2]*.0721;l.data[d]=m;l.data[d+1]=m;l.data[d+2]=m}}a.putImageData(l,0,0)}};Qne=class extends vt{constructor(...e){super(...e);this._filter=new Zne}};wh=Qne});var rse;var tse=p(()=>{rse="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"});var UF,ise,PS;var NF=p(()=>{Z();tse();Zr();UF=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=rse}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const u=this._options.lookupTableData;for(let c=0;c<n.width*n.height;c++){const d=c*4;const m=l.data[d];l.data[d]=u[m*4];const h=l.data[d+1];l.data[d+1]=u[1+h*4];const f=l.data[d+2];l.data[d+2]=u[2+f*4]}a.putImageData(l,0,0)}};UF.prototype.availableOptions={lookupTable:{type:"number",default:1,uniformType:"i"},lookupTableData:{type:"array",default:[]}};ise=class extends vt{constructor(...e){super(...e);this._filter=new UF({lookupTable:this._options.textureGLUnit});this._textures={};this._renderers={}}update(e){const t=e.getRenderer();if(t.isOfType("webgl")){this._updateWebGLTexture(e)}else if(t.isOfType("canvas")){this._filter.setLookupTableData(this._options.data)}}_updateWebGLTexture(e){if(typeof this._options.data==="undefined"){throw new Error("LookupTable: No data specified.")}const t=new Uint8Array(this._options.data);const i=e.getRenderer();const{id:o}=i;this._renderers[o]=i;if(!this._textures[o]){this._textures[o]=new q.BaseTexture}const n=this._textures[o];const s=new q.PixelArrayImage(256,1,t);n.setSource(s);n.setGLUnit(this._options.textureGLUnit);if(i.isOfType("webgl")){i.updateTexture(n)}}dispose(){super.dispose();for(const e in this._textures){this._textures[e].dispose();delete this._textures[e]}delete this._options.data}};PS=ise});var nse;var ose=p(()=>{nse="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"});var sse,ase,qF,HF,BS;var lse=p(()=>{Z();ose();Zr();({Vector2:sse}=se);ase=3;qF=class extends q.Filter{constructor(){super();this._precomputeQuads();this._fragmentSource=nse}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63;const i=new sse;i.y=(t|0)*.125|0;i.x=(t|0)-i.y*8;this._quads.push(i)}}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=this._options.lookupTableImage;const u=this._createImageCanvas(l);const c=u.getContext("2d");const d=s.getImageData(0,0,n.width,n.height);const m=c.getImageData(0,0,l.width,l.height);const h=new sse;for(let f=0;f<n.width*n.height*4;f+=4){const b=d.data[f];const _=d.data[f+1];const y=d.data[f+2];const I=d.data[f+3]/255;const T=this._quads[y];const D=64;h.x=T.x*D;h.y=T.y*D;h.x+=Math.floor(b/4);h.y+=Math.floor(_/4);const P=(l.width*h.y+h.x)*4|0;let k=m.data[P];k=b*(1-I)+k*I;let A=m.data[P+1];A=_*(1-I)+A*I;let Q=m.data[P+2];Q=y*(1-I)+Q*I;d.data[f]=k;d.data[f+1]=A;d.data[f+2]=Q}a.putImageData(d,0,0)}_createImageCanvas(e){const t=H.createCanvas();t.width=e.width;t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0);return t}};qF.prototype.availableOptions={lookupTable:{type:"number",default:ase,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null}};HF=class extends vt{constructor(...e){super(...e);this._filter=new qF;this._textures={}}update(e){const t=e.getRenderer();if(t.isOfType("webgl")){this._updateWebGLTexture(e)}else if(t.isOfType("canvas")){this._filter.setLookupTableImage(this._options.image)}}_updateWebGLTexture(e){const t=e.getRenderer();const{id:i}=t;if(!this._textures[i]){this._textures[i]=new q.BaseTexture}const o=this._textures[i];o.setSource(this._options.image);o.setGLUnit(ase);t.updateTexture(o)}dispose(){super.dispose();for(const e in this._textures){delete this._textures[e]}}};HF.prototype.availableOptions={image:{type:"image"}};BS=HF});var cse;var use=p(()=>{cse="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"});var MS,WF,qi;var dse=p(()=>{Z();use();Zr();MS=class extends q.Filter{constructor(){super();this._fragmentSource=cse}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);const{saturation:u}=this._options;for(let c=0;c<n.width;c++){for(let d=0;d<n.height;d++){const m=(n.width*d+c)*4;const h=l.data[m]*.2125+l.data[m+1]*.7154+l.data[m+2]*.0721;l.data[m]=h*(1-u)+l.data[m]*u;l.data[m+1]=h*(1-u)+l.data[m+1]*u;l.data[m+2]=h*(1-u)+l.data[m+2]*u}}a.putImageData(l,0,0)}};MS.prototype.availableOptions={saturation:{type:"number",default:0,uniformType:"f"}};WF=class extends vt{constructor(...e){super(...e);this._filter=new MS}update(){this._filter.setSaturation(this._options.saturation)}};WF.prototype.availableOptions=MS.prototype.availableOptions;qi=WF});var mse;var pse=p(()=>{mse="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"});var LS,GF,zS;var hse=p(()=>{Z();pse();Zr();LS=class extends q.Filter{constructor(){super();this._fragmentSource=mse}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let u=0;u<n.width;u++){for(let c=0;c<n.height;c++){const d=(n.width*c+u)*4;l.data[d]=Math.max(this._options.color.r*255,l.data[d]);l.data[d+1]=Math.max(this._options.color.g*255,l.data[d+1]);l.data[d+2]=Math.max(this._options.color.b*255,l.data[d+2])}}a.putImageData(l,0,0)}};LS.prototype.availableOptions={color:{type:"color",default:X.WHITE,uniformType:"3f"}};GF=class extends vt{constructor(...e){super(...e);this._filter=new LS}update(){this._filter.setColor(this._options.color)}};GF.prototype.availableOptions=LS.prototype.availableOptions;zS=GF});var VF,Fe;var fse=p(()=>{Z();NF();VF=class extends PS{constructor(...e){super(...e);if(!this._options.rgbControlPoints){this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}}this._updateLookupTable()}_updateLookupTable(){const e=this._calculateSplineCurve(this._options.rgbControlPoints.red);const t=this._calculateSplineCurve(this._options.rgbControlPoints.green);const i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,i)}_buildLookupTable(e,t,i){const o=[];for(let n=0;n<256;n++){o.push(Math.min(Math.max(n+e[n],0),255));o.push(Math.min(Math.max(n+t[n],0),255));o.push(Math.min(Math.max(n+i[n],0),255));o.push(255)}return o}_calculateSplineCurve(e){e=e.sort(function(s,a){return s[0]>a[0]});const t=this._getSplineCurve(e);const i=t[0];let o;if(i[0]>0){for(o=0;o<i[0];o++){t.unshift([0,0])}}const n=[];for(o=0;o<t.length;o++){const s=t[o];const a=[s[0],s[0]];let l=Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2));if(a[1]>s[1]){l=-l}n.push(l)}return n}_getSplineCurve(e){const t=this._secondDerivative(e);const i=t.length;const o=[];let n;for(n=0;n<i;n++){o[n]=t[n]}const s=[];for(n=0;n<i-1;n++){const a=e[n];const l=e[n+1];for(let u=a[0];u<l[0];u++){const c=(u-a[0])/(l[0]-a[0]);const d=1-c;const m=c;const h=l[0]-a[0];let f=d*a[1]+m*l[1]+h*h/6*((d*d*d-d)*o[n]+(m*m*m-m)*o[n+1]);if(f>255){f=255}else if(f<0){f=0}s.push([u,f])}}if(s.length===255){s.push(e[e.length-1])}return s}_secondDerivative(e){const t=e.length;if(t<=0||t===1){return null}const i=[];const o=[];let n;let s;i[0]=[0,1,0];for(n=1;n<t-1;n++){const l=e[n-1];const u=e[n];const c=e[n+1];i[n]=i[n]||[];i[n][0]=(u[0]-l[0])/6;i[n][1]=(c[0]-l[0])/3;i[n][2]=(c[0]-u[0])/6;o[n]=(c[1]-u[1])/(c[0]-u[0])-(u[1]-l[1])/(u[0]-l[0])}o[0]=0;o[t-1]=0;i[t-1]=[0,1,0];for(n=1;n<t;n++){s=i[1][0]/i[n-1][1];i[n][1]-=s*i[n-1][2];i[n][0]=0;o[n]-=s*o[n-1]}for(n=t-2;n>0;n--){s=i[n][2]/i[n+1][1];i[n][1]-=s*i[n+1][0];i[n][2]=0;o[n]-=s*o[n+1]}const a=[];for(n=0;n<t;n++){a[n]=o[n]/i[n][1]}return a}};VF.prototype.availableOptions={rgbControlPoints:{type:"object"},controlPoints:{type:"array",default:[]},textureGLUnit:{type:"number",default:1}};Fe=VF});var yse;var gse=p(()=>{yse="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"});var bse,_se,US;var vse=p(()=>{Z();gse();Zr();bse=class extends q.Filter{constructor(){super();this._fragmentSource=yse}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let u=0;u<n.width;u++){for(let c=0;c<n.height;c++){const d=(n.width*c+u)*4;let m=l.data[d]/255*.3+l.data[d+1]/255*.3+l.data[d+2]/255*.3;m-=.2;m=Math.max(0,Math.min(1,m));m+=.15;m*=1.4;m*=255;l.data[d]=m;l.data[d+1]=m;l.data[d+2]=m}}a.putImageData(l,0,0)}};_se=class extends vt{constructor(...e){super(...e);this._filter=new bse}};US=_se});var Cse;var xse=p(()=>{Cse="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"});var NS,Sse,wse,jF,$F,qS;var Tse=p(()=>{Z();xse();Zr();({Vector2:NS,Vector3:Sse}=se);wse=3;jF=class extends q.Filter{constructor(){super();this._precomputeQuads();this._fragmentSource=Cse}_precomputeQuads(){this._quads=[];for(let e=0;e<256;e++){const t=e/255*63;const i=new NS;i.y=(t|0)*.125|0;i.x=(t|0)-i.y*8;this._quads.push(i)}}_applyCanvas(e,t,i,o=false){const{resolution:n,horizontalTileCount:s,verticalTileCount:a}=this._options;const l=t.getCanvas();const u=t.getContext();const c=i.getContext();const d=this._options.lookupTableImage;const m=this._createImageCanvas(d);const h=m.getContext("2d");let f={width:128,height:128};if(n){f={width:n,height:n}}else if(d.width&&d.height){f={width:d.width,height:d.height}}const b=u.getImageData(0,0,l.width,l.height);const _=h.getImageData(0,0,f.width,f.height);const y=new Sse(f.width/s-1|0,f.height/a-1|0,s*a-1|0);const I=new X;const T=new X;const D=new X;const P=new X;const k=new X;const A=new X;const Q=new X;const R=new X;const M=new NS;const oe=new NS;const ce=(j,be,pe,De)=>{j.r=be.r*(1-De)+pe.r*De;j.g=be.g*(1-De)+pe.g*De;j.b=be.b*(1-De)+pe.b*De};const ue=(j,be,pe)=>{be=.5+be|0;pe=.5+pe|0;const De=(pe*f.width+be)*4;j.r=_.data[De]/255;j.g=_.data[De+1]/255;j.b=_.data[De+2]/255;j.a=_.data[De+3]/255};const Se=new X;const Pt=new X;const ee=(j,be,pe,De,ke,Me,mt)=>{ce(Se,be,De,Me);ce(Pt,pe,ke,Me);ce(j,Se,Pt,mt)};const V=new NS(f.width,f.height).divide(s,a).floor();for(let j=0;j<l.width*l.height*4;j+=4){I.set(b.data[j]/255,b.data[j+1]/255,b.data[j+2]/255,b.data[j+3]/255);const be=new Sse(I.r*y.x,I.g*y.y,I.b*y.z);const pe=be.clone().floor().toInt();const De=be.clone().ceil().toInt();const ke=be.clone().fract();M.y=pe.z/s|0;M.x=pe.z-M.y*s|0;oe.y=De.z/s|0;oe.x=De.z-oe.y*s|0;M.multiply(V);oe.multiply(V);ue(k,M.x+pe.x,M.y+pe.y);ue(A,M.x+pe.x,M.y+De.y);ue(Q,M.x+De.x,M.y+pe.y);ue(R,M.x+De.x,M.y+De.y);ee(D,k,A,Q,R,ke.x,ke.y);ue(k,oe.x+pe.x,oe.y+pe.y);ue(A,oe.x+pe.x,oe.y+De.y);ue(Q,oe.x+De.x,oe.y+pe.y);ue(R,oe.x+De.x,oe.y+De.y);ee(P,k,A,Q,R,ke.x,ke.y);ce(T,D,P,ke.z);b.data[j]=Math.ceil(T.r*255);b.data[j+1]=Math.ceil(T.g*255);b.data[j+2]=Math.ceil(T.b*255)}c.putImageData(b,0,0)}_createImageCanvas(e){const t=H.createCanvas();t.width=e.width;t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0);return t}};jF.prototype.availableOptions={lookupTable:{type:"number",default:wse,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null},resolution:{type:"number",uniformType:"f"},horizontalTileCount:{type:"number",default:5,uniformType:"f"},verticalTileCount:{type:"number",default:5,uniformType:"f"}};$F=class extends vt{constructor(...e){super(...e);this._filter=new jF;this._textures={}}update(e){const t=e.getRenderer();if(t.isOfType("webgl")){this._updateWebGLTexture(e)}else if(t.isOfType("canvas")){this._filter.setLookupTableImage(this._options.image)}const{resolution:i,verticalTileCount:o,horizontalTileCount:n,image:s}=this._options;this._filter.set({resolution:i||s.width,verticalTileCount:o,horizontalTileCount:n})}_updateWebGLTexture(e){const t=e.getRenderer();const{id:i}=t;if(!this._textures[i]){this._textures[i]=new q.BaseTexture}const o=this._textures[i];o.setSource(this._options.image);o.setGLUnit(wse);o.setMinFilter(q.BaseTexture.NearestFilter);t.updateTexture(o)}dispose(){super.dispose();for(const e in this._textures){delete this._textures[e]}}};$F.prototype.availableOptions={image:{type:"image"},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}};qS=$F});var Ye={};wt(Ye,{Brightness:()=>md,ColorMatrixPrimitive:()=>IS,Contrast:()=>Ni,Desaturation:()=>Ns,DuoTone:()=>DS,Gamma:()=>RS,Glow:()=>Sh,Gobblin:()=>FS,Grayscale:()=>wh,LookupTable:()=>PS,LookupTableImage:()=>BS,Saturation:()=>qi,SoftColorOverlay:()=>zS,ThreeDLookupTableImage:()=>qS,ToneCurve:()=>Fe,X400:()=>US});var tt=p(()=>{Ine();Dne();Ane();Bne();zne();qne();Gne();Xne();ese();NF();lse();dse();hse();fse();vse();Tse()});var HS,WS;var KF=p(()=>{et();tt();HS=class extends Ce{constructor(...e){super(...e);this._stack.push(new md({brightness:0}))}render(e,t,i){if(this._stack.isEmpty()){this._stack.push(new md({brightness:0}))}return super.render(e,t,i)}};HS.isIdentity=true;HS.identifier="identity";WS=HS});var XF,Ise;var Ese=p(()=>{et();tt();XF=class extends Ce{constructor(...e){super(...e);this._stack.push(new Ni({contrast:.63}));this._stack.push(new md({brightness:.12}));this._stack.push(new Fe({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}};XF.identifier="a15";Ise=XF});var YF,kse;var Dse=p(()=>{et();tt();YF=class extends Ce{constructor(...e){super(...e);this._stack.push(new Ns({desaturation:.5}));this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}};YF.identifier="breeze";kse=YF});var JF,Ose;var Rse=p(()=>{et();tt();JF=class extends Ce{constructor(...e){super(...e);this._stack.push(new wh)}};JF.identifier="bw";Ose=JF});var ZF,Ase;var Fse=p(()=>{et();tt();ZF=class extends Ce{constructor(...e){super(...e);this._stack.push(new wh);this._stack.push(new Ni({contrast:1.5}))}};ZF.identifier="bwhard";Ase=ZF});var QF,Pse;var Bse=p(()=>{et();tt();QF=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}};QF.identifier="celsius";Pse=QF});var eP,Mse;var Lse=p(()=>{et();tt();eP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}};eP.identifier="chest";Mse=eP});var GS,zse;var Use=p(()=>{Z();et();tt();GS=class extends Ce{constructor(...e){super(...e,{intensity:{type:"number",default:.5,required:true,setter(t){if(this._filterPrimitive){this._filterPrimitive.setIntensity(t);this._stack.setIntensity(1)}this._dirty=true;return t}}});this._filterPrimitive=new DS({lightColor:this._options.lightColor||X.WHITE,darkColor:this._options.darkColor||X.BLACK,intensity:this._options.intensity||.5});this._stack.push(this._filterPrimitive)}};GS.prototype.availableOptions={lightColor:{type:"color",default:X.WHITE,required:true,setter(r){if(this._filterPrimitive){this._filterPrimitive.setLightColor(r)}this.setDirty&&this.setDirty(true);return r}},darkColor:{type:"color",default:X.BLACK,required:true,setter(r){if(this._filterPrimitive){this._filterPrimitive.setDarkColor(r)}this.setDirty&&this.setDirty(true);return r}},intensity:{type:"number",default:.5,required:true}};GS.identifier="duotone";zse=GS});var tP,Nse;var qse=p(()=>{et();tt();tP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}};tP.identifier="fixie";Nse=tP});var rP,Hse;var Wse=p(()=>{et();tt();rP=class extends Ce{constructor(...e){super(...e);this._stack.push(new qi({saturation:1.35}));this._stack.push(new Ni({contrast:1.1}))}};rP.identifier="food";Hse=rP});var iP,Gse;var Vse=p(()=>{et();tt();iP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}};iP.identifier="fridge";Gse=iP});var oP,jse;var $se=p(()=>{et();tt();oP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}};oP.identifier="front";jse=oP});var nP,Kse;var Xse=p(()=>{et();tt();nP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Ni({contrast:1.1}));this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}};nP.identifier="glam";Kse=nP});var sP,Yse;var Jse=p(()=>{et();tt();sP=class extends Ce{constructor(...e){super(...e);this._stack.push(new FS)}};sP.identifier="gobblin";Yse=sP});var aP,Zse;var Qse=p(()=>{et();tt();aP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]}));this._stack.push(new qi({saturation:.9}))}};aP.identifier="k1";Zse=aP});var lP,eae;var tae=p(()=>{Z();et();tt();lP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]}));this._stack.push(new zS({color:new X(40/255,40/255,40/255)}))}};lP.identifier="k2";eae=lP});var uP,rae;var iae=p(()=>{et();tt();uP=class extends Ce{constructor(...e){super(...e);this._stack.push(new qi({saturation:.5}))}};uP.identifier="k6";rae=uP});var cP,oae;var nae=p(()=>{et();tt();cP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]}));this._stack.push(new qi({saturation:.7}))}};cP.identifier="kdynamic";oae=cP});var dP,sae;var aae=p(()=>{et();tt();dP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Ns({desaturation:.4}));this._stack.push(new Fe({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}};dP.identifier="lenin";sae=dP});var pP,lae;var uae=p(()=>{et();tt();pP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}};pP.identifier="lomo";lae=pP});var mP,cae;var dae=p(()=>{et();tt();mP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}};mP.identifier="mellow";cae=mP});var DVe,hP,pae;var mae=p(()=>{Z();et();tt();({ColorMatrix:DVe}=se);hP=class extends Ce{constructor(...e){super(...e);const t=new DVe(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new IS({colorMatrix:t}));const i=new X(.8,.6,.9);this._stack.push(new RS({gamma:i}))}};hP.identifier="metal";pae=hP});var fP,hae;var fae=p(()=>{et();tt();fP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}}));this._stack.push(new Sh)}};fP.identifier="morning";hae=fP});var gP,gae;var yae=p(()=>{et();tt();gP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2}));this._stack.push(new Fe({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3}));this._stack.push(new Ns({desaturation:.65}))}};gP.identifier="orchid";gae=gP});var yP,bae;var _ae=p(()=>{et();tt();yP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}));this._stack.push(new qi({saturation:.8}));this._stack.push(new Ni({contrast:1.5}))}};yP.identifier="pola";bae=yP});var bP,vae;var xae=p(()=>{et();tt();bP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}}));this._stack.push(new qi({saturation:.8}));this._stack.push(new Ni({contrast:1.5}))}};bP.identifier="pola669";vae=bP});var _P,Cae;var Sae=p(()=>{et();tt();_P=class extends Ce{constructor(...e){super(...e);this._stack.push(new Ns({desaturation:.65}));this._stack.push(new Fe({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}};_P.identifier="quozi";Cae=_P});var vP,wae;var Tae=p(()=>{et();tt();vP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}}));this._stack.push(new Sh)}};vP.identifier="semired";wae=vP});var xP,Iae;var Eae=p(()=>{et();tt();xP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2}));this._stack.push(new Fe({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}};xP.identifier="sunny";Iae=xP});var CP,kae;var Dae=p(()=>{et();tt();CP=class extends Ce{constructor(...e){super(...e);this._stack.push(new Fe({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}};CP.identifier="texas";kae=CP});var SP,Oae;var Rae=p(()=>{et();tt();SP=class extends Ce{constructor(...e){super(...e);this._stack.push(new US)}};SP.identifier="x400";Oae=SP});var VS,Aae;var Fae=p(()=>{Z();et();tt();VS=class extends Ce{constructor(...e){super(...e);this._lutPrimitive=new BS({image:this._options.image});this._stack.push(this._lutPrimitive)}};VS.prototype.availableOptions={image:{type:"image",required:true,setter(r){if(this._lutPrimitive){this._lutPrimitive.setImage(r)}this.setDirty(true);return r}}};VS.identifier="lut";Aae=VS});var jS,Pae;var Bae=p(()=>{Z();et();tt();jS=class extends Ce{constructor(...e){super(...e);const{image:t,resolution:i,verticalTileCount:o,horizontalTileCount:n}=this._options;this._lutPrimitive=new qS({image:t,resolution:i,verticalTileCount:o,horizontalTileCount:n});this._stack.push(this._lutPrimitive)}};jS.prototype.availableOptions={image:{type:"image",required:true,setter(r){if(this._lutPrimitive){this._lutPrimitive.setImage(r)}this.setDirty(true);return r}},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}};jS.identifier="3d-lut";Pae=jS});var wP={};wt(wP,{A15Filter:()=>Ise,BWFilter:()=>Ose,BWHardFilter:()=>Ase,BreezeFilter:()=>kse,CelsiusFilter:()=>Pse,ChestFilter:()=>Mse,DuoToneFilter:()=>zse,FixieFilter:()=>Nse,FoodFilter:()=>Hse,FridgeFilter:()=>Gse,FrontFilter:()=>jse,GlamFilter:()=>Kse,GobblinFilter:()=>Yse,IdentityFilter:()=>WS,K1Filter:()=>Zse,K2Filter:()=>eae,K6Filter:()=>rae,KDynamicFilter:()=>oae,LUTFilter:()=>Aae,LeninFilter:()=>sae,LomoFilter:()=>lae,MellowFilter:()=>cae,MetalFilter:()=>pae,MorningFilter:()=>hae,OrchidFilter:()=>gae,Pola669Filter:()=>vae,PolaFilter:()=>bae,QuoziFilter:()=>Cae,SemiredFilter:()=>wae,SunnyFilter:()=>Iae,TexasFilter:()=>kae,ThreeDLUTFilter:()=>Pae,X400Filter:()=>Oae});var Mae=p(()=>{KF();Ese();Dse();Rse();Fse();Bse();Lse();Use();qse();Wse();Vse();$se();Xse();Jse();Qse();tae();iae();nae();aae();uae();dae();mae();fae();yae();_ae();xae();Sae();Tae();Eae();Dae();Rae();Fae();Bae()});var Lu,Lae;var zae=p(()=>{Z();Mae();et();KF();tt();Lu=class extends Xe{_render(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}render(e){if(this._selectedFilter.getDirty()){this.setDirty(true)}if(!this.getEnabled()){this.setDirtyForRenderer(false,this._sdk.getRenderer());return Promise.resolve(e)}return super.render(e)}setDirtyForRenderer(e,t){super.setDirtyForRenderer(e,t);this._selectedFilter.setDirtyForRenderer(e,t)}disposeRenderTextures(){super.disposeRenderTextures();if(this._selectedFilter){this._selectedFilter.disposeRenderTextures()}}dispose(){super.dispose();if(this._selectedFilter){this._selectedFilter.dispose()}}restoreSnapshot(e){const t={...e};delete t.filter;if(e.filter){const i=e.filter.constructor;if(i.identifier==="3d-lut"){this.setFilter(new i({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()}))}else if(i.identifier==="duotone"){this.setFilter(new i({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()}))}else{this.setFilter(new i)}}this.set(t)}resetToDefaultFilterIntensity(){const e=this._selectedFilter&&this._selectedFilter.availableOptions;const t=e&&e.intensity.default;this.setIntensity(t||1)}};Lu.identifier="filter";Lu.prototype.availableOptions={identifier:{type:"string",default:"identity"},intensity:{type:"number",default:1,setter(r){this._selectedFilter&&this._selectedFilter.setIntensity(r);return r}},filter:{type:"object",default:new WS,setter(r){if(this._selectedFilter){this._selectedFilter.dispose();this._selectedFilter=null}this._selectedFilter=r;if(typeof this._options.intensity!=="undefined"){this._selectedFilter.set({intensity:this._options.intensity})}return r}}};Lu.FilterPrimitives=Ye;Lu.Filters=wP;Lu.Filter=Ce;Ie.Operations.FilterOperation=Lu;Lae=Lu});var oFt,ub,Uae;var Nae=p(()=>{Z();({Vector2:oFt}=se);ub=class extends Xe{constructor(...e){super(...e);this._flipContainer=new q.Container}_render(e){const{outputResolution:t,flipHorizontally:i,flipVertically:o}=this._options;if(i||o){const n=e.getDimensions();if(!this._flipRenderTexture){this._flipRenderTexture=new q.RenderTexture(this._sdk.getRenderer(),n.x,n.y);this._flipSprite=new q.Sprite(this._flipRenderTexture);this._flipContainer.addChild(this._flipSprite)}else{this._flipRenderTexture.resizeTo(n)}const s=i?-1:1;const a=o?-1:1;this._flipSprite.setScale(s,a);this._flipSprite.setPivot(0,0);this._flipSprite.setPosition(n.x*(1-s)*.5,n.y*(1-a)*.5);this._flipRenderTexture.clear();this._flipRenderTexture.render(this._container);this._renderTexture.render(this._flipContainer)}else{this._renderTexture.render(this._container)}return Promise.resolve()}};ub.identifier="flip";ub.prototype.availableOptions={flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};Ie.Operations.FlipOperation=ub;Uae=ub});var Th,Ih,qae;var Hae=p(()=>{Z();({Vector2:Th}=se);Ih=class extends Xe{constructor(...e){super(...e);this._colorOverlayFilter=new q.Filters.ColorOverlayFilter({color:this.getTintColor()});this._frameContainer=new q.Container;this._resetSprites();if(this._options.frame){this._createSpritesForFrame(this._options.frame)}}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}};this._sprites=[];this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(e){if(!e)return this._disposeSprites();const{imageGroups:t,layoutMode:i}=e;this._layoutMode=i||"horizontal-inside";this._disposeSprites();["top","left","right","bottom"].forEach(o=>{if(typeof t[o]==="undefined")return;["start","mid","end"].forEach(n=>{if(typeof t[o][n]==="undefined")return;let s=t[o][n];if("image"in s){s=s.image}const a=q.Texture.fromImage(s);const l=new q.Sprite(a);this._spriteGroups[o][n]=l;this._sprites.push(l);this._frameContainer.addChild(l)})})}_render(e){const t=this._renderTexture.getDimensions();if(this._options.frame){this._colorOverlayFilter.setColor(this.getTintColor());this._updateSprites(e)}if(!this._frameRenderTexture){this._frameRenderTexture=new q.RenderTexture(this._sdk.getRenderer(),t.x,t.y);this._frameSprite=new q.Sprite(this._frameRenderTexture);this._container.addChild(this._frameSprite)}else{this._frameRenderTexture.resizeTo(t)}this._frameSprite.setAlpha(this._options.alpha);if(this._options.frame&&this._options.frame.tintable){this._frameSprite.setFilters([this._colorOverlayFilter])}else{this._frameSprite.setFilters([])}this._frameRenderTexture.clear();this._frameRenderTexture.render(this._frameContainer);this._renderTexture.render(this._container);return Promise.resolve()}_updateSprites(e){const t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale);this._updateHorizontalSpriteGroup(e,"top",0);this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth);this._updateVerticalSpriteGroup(e,"left",0);this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}_updateHorizontalSpriteGroup(e,t,i=0){const o=e.getDimensions();const n=this._layoutMode==="vertical-inside";const s=this._spriteGroups[t].start;const a=this._spriteGroups[t].mid;const l=this._spriteGroups[t].end;let u=0;let c=0;let d;let m;if(s){d=s.getTexture().getDimensions();m=d.y/d.x;u=Math.floor(this._frameWidth/m);const h=new Th(0,i);h.x=n?this._frameWidth:0;s.setPosition(h);s.setHeight(this._frameWidth);s.setWidth(u)}if(l){d=l.getTexture().getDimensions();m=d.y/d.x;c=Math.floor(this._frameWidth*m);const h=new Th(o.x-c,i);h.x-=n?this._frameWidth:0;l.setPosition(h);l.setHeight(this._frameWidth);l.setWidth(c)}if(a){d=a.getTexture().getDimensions();m=d.y/d.x;const h=new Th(u,i);let f=o.x-u-c;if(n){h.x+=this._frameWidth;f-=this._frameWidth*2}a.setPosition(h);a.setWidth(f);a.setHeight(this._frameWidth);if(false){a._canvasSmoothingEnabled=false}if(this._options.frame.imageGroups[t].mid.mode==="repeat"){const b=this._frameWidth/m;const _=Math.ceil(f/b);let y=0;if(_!==-1){let I=Math.round(f/_);a.setWidth(I);y+=I;this._ensureRepeatSpritesExist(_-1,t,a);for(let T=0;T<_-1;T++){I=Math.round((f-y)/(_-T-1));const D=this._repeatSprites[t][T];const P=h.clone().add(y,0).floor();D.setPosition(P);D.setWidth(I);D.setHeight(this._frameWidth);y+=I}}}}}_ensureRepeatSpritesExist(e,t,i){i.getTexture().setMaxListeners(e+1);const o=this._repeatSprites[t].length;if(e>o){const n=e-o;for(let s=0;s<n;s++){const a=new q.Sprite(i.getTexture());this._repeatSprites[t].push(a);this._frameContainer.addChild(a);this._sprites.push(a)}}else if(e<o){const n=this._repeatSprites[t].splice(e);n.forEach(s=>{const a=this._sprites.indexOf(s);if(a===-1)return;this._sprites.splice(a,1);this._frameContainer.removeChild(s);s.dispose()})}}_updateVerticalSpriteGroup(e,t,i=0){const o=e.getDimensions();const n=this._layoutMode==="horizontal-inside";const s=this._spriteGroups[t].start;const a=this._spriteGroups[t].mid;const l=this._spriteGroups[t].end;let u=0;let c=0;let d;let m;if(s){d=s.getTexture().getDimensions();m=d.y/d.x;u=Math.floor(this._frameWidth*m);const h=new Th(i,0);h.y=n?this._frameWidth:0;s.setPosition(h);s.setWidth(this._frameWidth);s.setHeight(u)}if(l){d=l.getTexture().getDimensions();m=d.y/d.x;c=Math.floor(this._frameWidth*m);const h=new Th(i,o.y-c);h.y-=n?this._frameWidth:0;l.setPosition(h);l.setWidth(this._frameWidth);l.setHeight(c)}if(a){d=a.getTexture().getDimensions();m=d.y/d.x;const h=new Th(i,u);let f=o.y-u-c;if(n){h.y+=this._frameWidth;f-=this._frameWidth*2}a.setPosition(h);a.setHeight(f);a.setWidth(this._frameWidth);if(false){a._canvasSmoothingEnabled=false}if(this._options.frame.imageGroups[t].mid.mode==="repeat"){const b=this._frameWidth*m;const _=Math.ceil(f/b);let y=0;if(_!==-1){let I=Math.round(f/_);a.setHeight(I);y+=I;this._ensureRepeatSpritesExist(_-1,t,a);for(let T=0;T<_-1;T++){I=Math.round((f-y)/(_-T-1));const D=this._repeatSprites[t][T];const P=h.clone().add(0,y).floor();D.setPosition(P);D.setHeight(I);D.setWidth(this._frameWidth);y+=I}}}}}_disposeSprites(){this._sprites.forEach(e=>{this._frameContainer.removeChild(e);e.getTexture().dispose();e.dispose()});this._resetSprites()}dispose(){super.dispose();this._disposeSprites();if(this._colorOverlayFilter)this._colorOverlayFilter.dispose();if(this._frameRenderTexture)this._frameRenderTexture.dispose()}static validateFrame(e){if(!e)return;const{imageGroups:t,layoutMode:i}=e;if(typeof e.identifier!=="string"){throw new Error("Frame needs a property `identifier` of type String.")}if(typeof e.imageGroups!=="object"){throw new Error("Frame needs a property `imageGroups` of type Object.")}const o=n=>{const{start:s,end:a,mid:l}=t[n];if(typeof t[n]==="undefined")return;if(typeof t[n]!=="object"){throw new Error(`Frame: \`imageGroups.${n}\` needs to be of type Object.`)}if(typeof s!=="undefined"&&!(s instanceof Ci||typeof HTMLImageElement!=="undefined"&&s instanceof HTMLImageElement)){throw new Error(`Frame: \`imageGroups.${n}.start\` needs to be of type Image.`)}if(typeof l!=="undefined"&&!(s instanceof Ci||typeof HTMLImageElement!=="undefined"&&s instanceof HTMLImageElement)&&typeof l!=="object"){throw new Error(`Frame: \`imageGroups.${n}.mid\` needs to be of type Image or Object.`)}if(typeof a!=="undefined"&&!(a instanceof Ci||typeof HTMLImageElement!=="undefined"&&a instanceof HTMLImageElement)){throw new Error(`Frame: \`imageGroups.${n}.end\` needs to be of type Image.`)}};if(typeof i!=="undefined"&&["vertical-inside","horizontal-inside"].indexOf(i)===-1){throw new Error(`Frame: \`layoutMode\` must be one of vertical-inside, horizontal-inside`)}if(typeof tintable!=="undefined"&&typeof tintable!=="boolean"){throw new Error(`Frame: \`tintable\` needs to be of type Boolean.`)}o("top");o("left");o("right");o("bottom")}};Ih.identifier="frame";Ih.prototype.availableOptions={frame:{type:"object",validation:Ih.validateFrame,setter(r,e){if(!e){this._createSpritesForFrame(r)}return r},default:null},alpha:{type:"number",default:1},tintColor:{type:"color",default:new X(1,1,1,0)},scale:{type:"number",default:.1}};Ie.Operations.FrameOperation=Ih;qae=Ih});var Wae;var Gae=p(()=>{Wae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAAAAADRE4smAAAsTElEQVR4Ae1d4bHjOM5ECAgBISgEZLDOwMrAysDMwMpAzkCTAUNQCAyBIfCr2ifI1DNh+c1tfTMg3b9udtZXC7tJdgMgCP8foJAUBIJx92eoEy5puAKkHH1jX0AchqoJcLwGlv1fDVAnyKtfQMoB1WLQKBBCyuCgVvQhvQGoF3RPb2Bs/AsgEDS6BqbGvwACaHsT+AV1AK/4W18AQy3gCxTAR2vAQxW4xHSD3/kC/qlI9NK7hqg6H8SLspiPv4C+kv0v6ouZQuUEEMfndUtcOQH6qJ9nR2sg1kD+FSdQ4GLS4MA82B+uZvJJRQXkFwT8uRp2VQl99xuGiOyTX4//+AuYqtj/BBGPiVITATjtEel4pdRFAJ/2uP08K9KBYXwPaT5OC9Vlg/kneQ0cUwHcQvz6F7BAXVuA/3GNsG8ofqBQmw3uUg7dCglcZQSgJHizvO1qy4OM3wPCH64BV1fnR8QfdkqAcWD86Q86KP9+o/EjGMfwrhVSpPPUWvy9YoMbsEIqAVrSgXBSCFC3FdK/sV+txc/Kv93OEpgrawiYfybsSWkIaMcK3SurB1P8Ufyk2OB2rNCoEKCV+BW2tGOFXG2N0RiUkkgZUfmumrFCfW0EgNOPKlxB6YtvQAcqRrix+BfFBjdjhVgnQL3xk+cyWwYQVG6FLjOs6PTjotaSCF5T8iUXJLSo3gqxT4kLPig6BKheB1/+/dvzEwGi/KParSDN+arAtMFTA/Gz3+8KTiF/tVZoaxx034zwwlAPvsc/7cifx+8U8tdqhfqwXxVihOMAgnp1sJA/lzu9Tv4KrRD7fFVki2VE+IuB3anvT0z/Y/x9KBRKexPkJ+77njv835YA3kvuaPm79z+6zDGtiP5Mv1sSObMv7gr8l5MfkMclCZaJf9sK0TUWd4U58N8b/NWnb5jo9+KPShM4EvzN4DGmPcL5p1ZIgVghhr8VNBZjuP4P8Rsr/fReGW72UyukIKDJeRYz/rQkoiAYHWkSTz+2QgrOVq657bG8xYAlHWBEQzcdf+OH43SAcPp7o3/N3un34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQV8iu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6P3wT5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvJT0y5+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1Wp5DfxAqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD5ZIL8gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mhfyaTOQKZl7e9RWg1ggnVO4D/TJ+q5UV8mstLX0Fjz/E1wW/Uo/EoGb9gu1O5vhWgTzqBGAwAER9C3RKj4SqlIO5sacEpPNfJ38OBstHAIdJlwD/vDXk3wNYPQLwFmHO/6wE9rKwPWilv2DkcRNWy9esng45olr9PhuYbQ+JtQ3Qq4VdTSo6S+FvZ5pXNSC/1+NL2ZdkpuNXDjTI42f9BNPj90ohMRh42UyYqhRuemUJ6GJ3MLMC5ECDlAaFAPG9MnEoN9IFMvCymaxUhQCjniXL0ZeXiTPR8Qqi449nNnL5ik8oCqURDb1l7RQCeM0kRX2jGIKBxP8lJgHk8XdpB1eO32F8ofV49H6+oKWXfVIkpRkCi0sgcP/qpOhn7ye2sfmlBLmKobK8FbB0RATbo037qCazx9dL4L4WtXtrCS/dzcLuN4yvbcy4bmzRMgHQv0hmDOoSEB044pMaYMvsh10I/nUqE4fCRjFazfaWWNwdXF7tu8JGgXbHdwkBgvK3DgowvQFq15WGstWLeFw0DaYn14DEf/zwn1ozNoZRKWm8//Bfb3i0JZYJIPHHN24BX5NxDfjqzdrhjQkGFCxvgaFIgHRTVsd01DR5tj7OX0D7M0CXeLiYrvneiwSQ0h0fzoK4Ku0AhhBfpbTno1kQtNh+7HZQCOA1hRToVUnU2Z/jK2BtpsFVSaLZ1ECsEECPP02kNgQGsj/NXxBUkxDOek+UA2NAjQABdZPkXX/qR68PSrG8BjYM+t+G+XLq+zEqrDGFRSFAcppE0jGBRWAqI6JmE3WQ9Unu8BS/SwewpADZB3p/eNdNqXtbHXOHt3Q9ssHwvJ6X9CYCWah7BDq+AK1YoUO4v7/j5Xpgg+FZB1Os4/cXyRo6RQWqVnCs4fdnr031jBoBJH6u4vfvo+bks5KPL2d9vPXfP/frE2rFkCWmBCVR36djeAQ7Qx4HbXKRi0VVg0s6RBysdLwspKjA6FKCoqrrjZ9+eE97XBUn5IdyXMcMCJ2dmn8gpSDIIUH5dz2F4zlxpobcXpU1AF6p/45mh9yyks0tqMChT6DUfynYnHCqXuCasOiEmLXUxhBNDrnFosWJXdEG/wIPapf/EEwOeew0AbdQcQ08VQb4cFh6OMNfC3XC97lUDInAcNfiB3IFCsSRrOV5BYEKTsg/uV5/MC7cn420O+mH4JAnPlCLv/BcQvQXNFbvVhiQrQFwL9YK3UPKEUa2NOFBYQDv7JF7md1EdrMPIYRlujDaerNSV+5Z0AwYXia4u370SwghzGNPxjL9Snsb7u4vY1B0sFW4N6a8nnK+99YrvDr/leaeZdf3zjXEj1d+a9bt9fsa8HJwmn6+mafCAa8L4fu++uHtlzgvMS1lHagwIORrgBUrZAXkc/EejvP3w/7A72zHL2p9KEhh9SS857ZHt0I2Nr+9cuHjCk73Le0xWo4faM7Fi8SnY8anNaBbIRObn3bFWU8JbfFGoEL8wRT/47a2VSnsn05CzoTwgRUyUvSKqPW9h+fhlz4JYJAzwaYO7PPgOk0KB/d9H8QkiGDXCtFccHmFzMY+umu+QmASX2AvfmVqcYnRw/CNAVnEnS0rpBe9WOV/950BfRJALAoHYZOxtJcqhSP2307CMd/ubVohWf7H/Hffyts3SgJYI/UmdeC91KWqMLqLiiz4VSSTN8j/k6YDI+KeLXNGgKHUCBjPNtNeuhRm9SnIWBSOHu2lfXX+T2qNBNJUEA4zGU376lLY6z0O3TOZ4mCc/4Uit1MIEOX/TG93MPTEmS6FWWOAeL7BzstmgkGb51AocisMgE3uDAr5jZX/dSmMGgN+fSuReDJ3zUsw61ZQYUA2KNIL+U3Bvy+FtUeR445Mgc3zX81suCIBpJDEOvkrkcLajLDu8YE41ML/U0kf9CUCxE04LDr565DCYh2VxC/FEcEWKCqxKEVujs8E2HIeevD1SOHiPvgL7H4Dig9Si9xdeCZADzoqk8JlBkQQVMN/vchL4YkAE+ioTAorDOgq4n8ijRsLFBgAevW3Vil8XP21rwOVMAsMAL32V6UUVh74a4v/uRkG/U3LOqWwMCPqN32sTz0LKjduz6MOQc/7ViqFV3RRz/tWy//0/DAC6KhZCstJeFz3qq0kJhiVza8RKSwMsL//6SUxhf8Cp2x+DUhhAS0D1IGT4mtf9vs6ZfNrRQofo9KSmIrWpDA0wf/3+30blMI6Ki6JKfxvUwq/j6q6IxW0I4W7tvgfj940b0wK+w5qRFAHeTtlvGGbUjgw6KjUB0VlvF2DUjg6bJD/vbL5tSeFp5r5T/pkOK9sfo1JYc/N8l/Z/JqSwvHcMP/vyubXkBRmhHpx3B3JoKANHdgAlO5IDQ1JYQUf/rcmhQUf/rcqhVsAxWb5r0hhT9AU3NGzNm1J4cAN8l/J+zYohaOD9tD/DZvfnyUe/3n+I8Ifg//jmx/58Oel8B/N+/Z/cu/hP7z54e2Pdx5STOEEfwzs/2zn3f3PHv7zX9B5ODj80zJs+pPzY/nPZ2Ju0CrEifEn/laBsc0cHLYXv/IN9E3m4Pp43WViTtAY8Ba3aWON5aBlbvuMz/ETNIJrfFxG4awdA7GJ6LNHqfL4Ox8RWgCG3ZNU960d4xKnlkpwgTIrSHhrxw/E7DaK6KD5a2PklhLQoXsUJZfYkB9Y8iepxAr5NmryMq81PMSvU14eqBf37QsI9O2emkeoFnilx0Ocp7AdgxhaqUjy7WF9fP9gADexAK4xzY8dcKAHA06///KAwSc7ZQ/E/nEO+tpvIsmUJd52QL/NXcKv+MOp+txHSml57IH/iBgaVkZ4qt/6+G0HjCgMWAi4bvLnfn/Y9sARoM+e5lu4kfhlB2S4xM0O9tRKE27ETQUC3pMwAIdm4pcdcPZJMEETkNKnJMBvMQn+qTrvG1OcSF7rcPtGvFC/9cOrT2m5kGTAut3LJUvlhz/N35+gpWz06Ii01H74c5CDLit94sP29YFrJn9MgnMW/yC2r3p0Pr90MmzZzlCr7dMf645Z/Czjh6ov+n67f71I6fMuJ38D5J8uX0d+v/I+rDtggMohNic697Xgs9LnIJaoWuD2sJ4YgCmLP3z54KpB4FehIwWvTqzQ15dT+eE/SLCS650yK3iv/hoe+Yji+0T2sjBhAqxXAIjyjbj6PiHAmFnhE9du/f4N8+H7vPwP6YJ1VP3hL/HTVgeQ+CO1cfh3m+85i+hZrdDYgvL14vtWLzjRGn/1RV8vJn/1PYPPHtzoK099bQl+3l++li9gEPdfd+pLCL8kwfbizFz34S+hFudwTQSC6lNfJymBtTSD4ZYEAfP4fWil4yskgcvvX8dx/Yula2XulNuXAF1sYgOA8fvYPfF9dK99A5D4w2nO4xcrTN5zI1f9PIv4391+7MOI9ccfHK6kn9+4/VkhJYaFt6CPbz8i16J888O9EP8vRS8PUAl4waf+t+Xw9ieHiJUo3/Acv89aoEnRyxGrSX255/dIhk0HRYdKwuxWS9F3F3+/i39hvVTsqkl9RVL6/4DTiHrCrKsj7RUH0OLHF59yWE3qy3dPfkiWd/fiU1xH3nfCkh90x58yD17KGR6pg+gJsypsYU5jhAx3PX4RhvHfT3FXw0VXh/IFvDf6xT0WAF7R8JAT9+hz9f4p/tAdTQbqvOXZGLj7nS9xeIpx1oLbbMIlJmdV+fot/q9N/Vv8+gEvNgFvpnXgJQ6yBZwK8/5C8nx0TYa9yEeTh/9Z6n1TfJr3h8W0FxLhI/5oeEjc+ovLiJv5WfTwAOVvQGSyIJ6sKt8t/jcFbf81lvUs8RuWwXSXXzyvf+BhxiSk9HVNhvRP2VK+nBf7jz8ldyS6/FNosugr7L2r87aVT8k1GfmUtS+A/I6582O0Q3c7/pQwYFTkowWcQj5imzJPc+GDTwmmVT4tIiYMYc74fpL4py9ZwMfk37eLiZiwBIyZ9esyT8OKpxHJkGOQazIiJuyAokg39om3+C9Rv+zRxfV37/u7XBTL5WNAm/Nt8RrD5mlo1j2NNMdF11+CXJRaFPloJf5/A172I45id5j56cQ5B7ONUlLs4vBlfk+Zp5mV/f9pKNgAbPCRenfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK88OKdURvy4Bb+uxIuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs2QjE60giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOloBkfkwhT10PUv8BD8BBL9/KtoEwbicF4GIsfKV5fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYC3zozWvbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgvhhge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSsxu/fo/7JfjRJDz0KSWULJB5DBLIYfzrybeElDxYjl8J7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxtwtxfk3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaCBw98KPvjggw8++OCDDz744IMPPvjggw8++OCDDz744IMP8NZD22APDeMaU9sEIN9w+4k81dAu8CpjdxqAPoqpVcgYcmyY/A01oOlz+Klh8rdLAJqTgNokv+AXtAH9AT5ul/zN3kAKSdDiDaQh5QjQHkLK0TfH/+YJsKQcAzSGLuWIrd6/EbRnhCntAO1hVAZWt4KYchBA2yqoPSMcWifAqXECzClHB82hS40ZYTzrGqiNPAjvosSUY2kh7xsIHnAt2WCpe11VFRQaKPru3W7fFAGk7hVIUUGxhaJvyq/dc8rhWql7hbOigmonvyB0xUSAa6bulW5YVEFYPfkFcg4244Kk7iUIVFJBVD/5BQs9H4FTE0VfwbWggromyJ+fg0vK4Nso+u6kUFe/ERbyP+EmR2DlBOh8KiMwANXvgygkBYFgbMEGu6ThCqAQoI0vIA6DToAm1sBCoYWGAPLqF9CIDR40CoTQhhHuQ3oDUC/ont7A2PgXQCBodA1MjX8BBND2JvCrmrwHvvsFVGqD+aJUw17DV5P3vcHvfAH/VCR66V1DVJ0P4kVZzMdfQF9R3tfrjlBHqMfxedUS106APurn2dEaiBUVPU6gwMWkwdVU9wov14iCCsgvCPhzNTxWJfTdbxgiqqjo637uCKeqir4RD4hSGQE47RHpYKVURwBfKHf+cA10NdzyEMwHaaHqbDD/JK+BYyqAW4hf/wIWqGsL8D+uEfYtxK9/AaGqez5ihXS4yghA6RuGHzYKhLou++pWSF0Drq7Oj4g/7JQA48D40x900P/9FuNHMI7hXSukSOeptfh73QY3YIV0ArSiA+GkEKBuK6R/Y79ai5/1f7uRJTBX1hAw/0zYk94Q0IgVuldWD6b4o/hJt8GNWKFRJ0AT8etsacQKudoaozHoJZECov5dtWGF+toIAKcfVbiC3hDQhg7UjXAb8S+6DW7DCrFCgKrjJ89ltgwgqNwKXWZlXK4QoNaSiEyL8SUXJLSo3gqxT4kLPig6BKhcB8u0mPMTAaL8o9qtIM35qsC0wVMD8bPf7wpOIX+1VmhrHHTfjPDCFc4AFkw5+XfxO4X8tVqhPuxXhRjhOICgXh0s5M/lTq+Qv04rxD5fFdliGRH+YmB36vsT0/8Yfx8KhdLeBPmJ+77nDv+3JYD3kjta/u79jy5zTCuiP9PvlkTO7Iu7Av/l5AfkcUmCZeLftkJ0jcVdYQ789wZ/9YXZZr8Vf1SawJHgbwaPsTje7n0rpEKsEMPfChqLMVz/h/iNlX56rww3+6kVUhDQ5DyLGX9aElEQjI40iacfWyEFZ1OzTTcs+LMX0RSMaGm87c9/OE4HCKe/fbK/hun34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQJ8uu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6I3xL5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvsXoSR+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1WZ4L8ygqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD4J+S0gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mjfyKTOQKZl7e9RWg1ggnVO4D/TJ+q5U18istLX0Fjz9EreCnP4E5qFm/YLuTOb5VII86ARgMAFHfAp3aI6Eo5WBu7CkB6fzXyZ+DwfIRwGHSJcA/bw359wBWjwC8RZjzP2uBvSpsD1rpLxh53ITV8jWrp0OOqFa/zwZm20NibQP0emFXkYrOUvjbmeZVDcjv9fhS9iWZ6fiVAw3y+Fk/wfT4vVJIDAZeNhOmKoWbXlsCqtgdzKwAOdAgpUEhQHyvTBzKjXSBDLxsJitVIcCoZ8ly9OVl4kx0vILo+OOZjVy+4hOKQmlEQ29ZO4UAXjNJUd8ohmAg8X+JSQB5/F3awZXjdxhfaD0evZ8vaOllnxRJaYbA4hII3L86KfrZ+4ltbH4pQa5iqCxvBSwdEcH2aNM+qsns8fUSuK9F7d5gwktxs7D7DeNrGzOuG1u0TAD0L5IZg7oERAeO+KQG2DL7YReCf53KxKGwUYxWs70lFncHl1f7rrBRoN3xXUKAoPytgwIMb4D6daWhbPUiHhdNg+nJNSDxHz/8p9aMjWFUShrvP/zXGx5tiWUCSPzxjVvA12RcA756tHh4Y4IBBctbYCgSIN2U1TEdNU2erY/zF9D+DNAlHi6ma773IgGkdMeHsyCuSjuAIcRXKe35aBYELbYfux0UAnhNIQV6VRJ19uf4ClibaXBVkmg2NRArBNDjTxOpDYGB7E/zFwTVJISz3hPlwBhQI0BA3SR515/60WuDUmyvgQ2D/rdhvpz6fowKa0xhUQiQnC6RNExgEZjKiKjbRA1kfZI7PMXv0gEsKUD2gd4f3nXT694mx9zhLV2PbDA8r+clvYlAFuoegY4vQCtW6BDu7+94uR7YYHjWwRTr+P1FsoZOVYGKFRxr+P3Za1M9o0YAiZ+r+P37qDj5vOTjy1kfb/33z/36hFoxZIkpQUnU9+kYHsHOkMdBm1zkYlHV4JIOEQcrHS8LKSowupSgqOp646cf3tMeV8UJ+aEc1zEDQmen5h9IKQhySFD+XU/heE6cqSG3V2UNgFfqv6PZIbesZHMLKnDoEyj1XwomJ5zqF7gmLDohZi21MUSTQ26xaHFiV7TBv8CD2uU/BJNDHjtNwC1UXANPlQE+HJYezvDXQp3wfS4VQyIw3LX4gVyBAnEka3leQaCCE/JPrtcfjAv3ZyPtTvohOOSJDyzErz2XEP0FbdW7FQbkawDci7VC95ByhJEtTXhQGMA7e+ReZjeR3exDCGGZLozW3qxUlHseNAOGlwnurh/9EkII89iTsUy/0t6Gu/vLGBQdbBXujSmvp5zvvfUKr85/pbln2fW9cw3x45XfmnV7/b4GvBycpp9v5qlwwOtC+L6vfnj7Jc5LTEtZByoMCPkaYMUKWQH5XLyH4/z9sD/wO9vxi1ofClJYPQnvue1RrJCZzW+vXPi4gtN9S3uMluMHmnPxIvHpmPFpDShWyMjmp15x1lNCW7wRqBB/MMX/uK1tVQr7p5OQMyF8YIWMFL0ian3v4Xn4pU8CGORMsKkD+zy4TpPCwX3fBzEJIti1QjQXXF4hs7GP7pqvEJjEFxiLX59aXGL0MHxjQBZxZ84KKUUvVvnffWdAnwQQi8JB2GQs7aVK4Yj9t5NwzLZ7o1ZIlv8x/9238vaNkgDWSL1JHXgvdakqjO6iIgt+FcnkDfL/pOnAiLhny5wRYCg1AsazzbSXLoVZfQoyFoWjR3tpX53/k1ojgTQVhMNMRtO+uhT2eo9D90ymOBjnf6HI7RQCRPk/09odTD1xpkth1hggnm+w87KZYNDmORSK3AoDYJM7g0J+Y+V/XQqjxoBf30oknsxd8xLMuhVUGJANivRCflPw70th7VHkuCNTYPP8VzMbrkgAKSSxQv56pLA2I6x7fCAOtfD/VNIHfYkAcRMOi0L+aqSwWEcl8UtxRLAFikosSpGb4zMBtpyHEnxVUri4D/4C5Ruw7IOUIncXngnQg4L6pHCZAREENfFfKfJSeCLABDoqk8IKA7qK+J9I48YCBQaAXv2tVQofV3/t60AlzAIDQK/9VSuF9Qf+GuF/boZBf9OyTikszIjaTR/7U8+Cyo3b86hD0PO+lUrhFV1U8r418z89P4wAOqqVwnISHte9KiyJCUZl82tECgsD7O9/eklM4b/AKZtfA1JYQMsAdeCk+NqX/b5O2fxakcIHqLckpqI1KQxN8P/9ft/mpLCOqktiCv/blMLvo6ruSAXtSOGuLf7HozfNG5PCvoMaEdRB3k4Zb9imFA4MCur1QVEZb9egFI4OG+R/r2x+7UnhqWb+kz4ZziubX2NS2HOz/Fc2v6akcDw3zP+7svk1JIUZoWocdEcyKGhABzYAvTtSQ0NSWMGH/61J4Q//Bc1J4YZAsU3+61LYEzQFd/SsTVtSOHCD/Ffyvg1K4eigPfTK5tcQuG3++9Y2P+Ur8Nwy/6ODhkExhRM0i7tsfu1icNgy/2eGD+zDMhAaByI0DPIB2kbfsgbDmxSiWwV7aURoErNy/aSxXNwErYKU6yetpeP5E3/bW4BvL+724le+gb7JQmwfr7ty3Kk99Ru7PBcdsDXlm2Z8jp+gBci77UNejnINpQSu2cukefydb8QPYNi9S3rfenIvcWqpDytQZgUJb+34gZhdSRYdNH9tjNxSF0LoHp1pS2zIDyz5u6RihXwbjZkytD88xK/Tn5+qFPftCwj0bViBR6gWeKXHa+ynsB2DGFppS+Pbw/r4/sEAbmIBXGOaHzvgQA8GnH7/+SmD77bLHoj94xz0tV9Hl1GbvO2Afhu+iV/xh1P1uY+U0vLYA/8RMTSsjPBUv/Xx2w4YURiwEHDd5M/9/rDtgSNAn73PvHAj8csOyHCJmx3sqZX204ibCgS8J2EADs3ELzvg7JNgaqv0KQnwW0yCf6rO+8YUJ5In29z+Nkao3/rh1ae0XEgyYN3u+bql8sOfZtnlJH7K5s+PSEvthz8HOeiy0ic+bF8fuGbyxyQ4Z/EP1ds+Qefzm8fDlu0MVds+QR/SAzGLn2UGZQstjxscwCKlz7uc/A2Qf7p8Hfn9yvuw7oABKofYnOjc14LPSp+DWKJqgdvrymIApiz+8OWDqwaBX4WOFLw6sUJfX07lh/8gwUqud8qs4L3668jkI4rvE9nLwoQJsF4BIMo3ovi+lQBjZoVPXLv1+zfMh+/z8j+kC9ZR9Ye/xE9bHUDij9TG4d9tvucsome1QmMLyteL71u94ERr/NUXfb2Y/NX3DD57da2vPPW1Jfh5P4FHvoChbvcvqS8h/JI2yLODc92Hv4RaHMY6EQiqT32dpATW0iCuWxIEzOP3oZWOr5AELh/CE8f1L5auleGjbl8CdLGJDQDG77OXxffRvfYNQOIPpzmPX6wwec+NXPXzLOJ/d/uxDyPWH39wuJJ+fuP2Z4WUGBbegj6+/Yhci/LND/dC/L8UvTxAJeAFn/rflsPbnxwiVqJ8w3P8PmuBJkUvR6wm9eWeH6UbNh0UHSoJs1stRd9d/P0u/oX1UrGrJvUVSen/A04j6gmzro60VxxAix9ffMphNakv3z35IVne3YtPcR153wlLftAdf8o8eClneKQOoifMqrCFOY0RMtz1+EUYxn8/xV0NF10dyhfw3ugX91gAeEXDQ07co8/V+6f4Q3c0Gajzlmdj4O53vsThKcZZC26zCZeYnFXl67f4vzb1b/HrB7zYBLyZ1oGXOMgWcCrM+wvJ89E1GfYiH00e/mep903xad4fFtNeSISP+KMoJbsTHmXEzfwseniA8jcgMlkQT1aV7xb/m4K2/5rNf5b4Dctgussvntc/8DBjElL6uiZD+qdsKV/Oi/3Hn5I7El3+KTRZ9BX23oXK9Oan5JqMfMraF0B+x9z5Mdqhux1/ShgwavLRAE4hf2eFMk9z4YNPCaZVPi0iJgxhzvh+kvinL1nAx+Tft4uJmLAEjJn16zJPw+JpFMmQY5BrMvbGRVMU6cY+8Rb/JeqXPbq4/u59f5eLYrl8DGhzvi1eY9g8Dc26p5HmuOj6S5CLUosmH43E/2/Ay37EUewOMz+dOOdgtlFKil0cvszvKfM0s7L/Pw0FG3L56DuwAXfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK29PKtURvy4Bb+vFSuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs+QjE40giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOl4BkfiwhT10PUv8BD8BBL9/KtoEwbicF4GIpfL15fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYCvzozevbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgrhlge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSMx2/co/7JfjRJDz0KSWULJB5DIeBSPzrybeElDyYjV8P7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxNwtxfm3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaC5w/+DDz744IMPPvjggw8++OCDDz744IMPDABvPbQN9tAwrjG1TQDyDdceZU53u8CrzFxoAPocjlYhM2ixXfK31H2gD2GmhsnfLgFoTgJqk/yCX9AMlNeXuF3yN9t+HpKgxfbzIeUI0B5CytE3x//mCbCkHAM0hi7liK02XwvaM8KUdoD2MCrTSltBTDkIoG0V1J4RDq0T4NQ4AeaUo4Pm0KXGjDCeFQ3UTB6Ed1FiyrG0kPcNBA+4lmyw1L2uqgoKLRR9d263b4oAUvcKpKig2ELRN+V3LjnlcK3UvcJZUUG1k18QumIiwDVT90o3LKogrJ78AjkHm3FBUvcSBCqpIKqf/IKFno/AqYmir+BaUEFdE+TPz8ElZfBtFH13Uqir3wgL+Z9wkyOwcgJ0PpURGID+qA/6P9HpZtdg1QgHAAAAAElFTkSuQmCC"});var jae;var Vae=p(()=>{jae="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"});var $S;var $ae=p(()=>{Z();Vae();$S=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=jae}_applyWebGL(e,t,i,o=false){const n=e.getContext();const{canvas:s}=n;const a=this.getShaderForRenderer(e);const l=t.getFrame();const u=this._watermarkCanvas;if(!u||l.width!==u.width||l.height!==u.height){this._createWatermarkCanvas(l.width,l.height)}const c=q.Texture.fromCanvas(this._watermarkCanvas);const d=c.getBaseTexture();e.updateTexture(d);d.setGLUnit(1);e.setRenderTarget(i);if(o){i.clear()}e.setShader(a);const m=e.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",m);a.syncUniforms();n.uniform1i(n.getUniformLocation(a.getProgram(),"u_watermarkTex"),1);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,t.getTexture());n.activeTexture(n.TEXTURE1);n.bindTexture(n.TEXTURE_2D,d.getGLTextureForRenderer(e));n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);c.dispose()}_createWatermarkCanvas(e,t){const i=this._options.watermarkImage;const o=H.createCanvas();o.width=e;o.height=t;const n=o.getContext("2d");const s=n.createPattern(i,"repeat");n.fillStyle=s;n.fillRect(0,0,o.width,o.height);this._watermarkCanvas=o;this._watermarkContext=n}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const l=this._options.watermarkImage;this._createWatermarkCanvas(n.width,n.height);const u=s.getImageData(0,0,n.width,n.height);const c=this._watermarkContext.getImageData(0,0,n.width,n.height);const d=new X;const m=new X;const h=new X;for(let f=0;f<n.width*n.height*4;f+=4){d.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255);m.set(c.data[f]/255,c.data[f+1]/255,c.data[f+2]/255,c.data[f+3]/255);if(m.r>.8){h.copy(d.clone().mix(m,.3))}else{h.copy(d)}u.data[f]=h.r*255;u.data[f+1]=h.g*255;u.data[f+2]=h.b*255;u.data[f+3]=h.a*255}a.putImageData(u,0,0)}};$S.prototype.availableOptions={watermarkImage:{type:"object",required:true}}});var cb,Kae;var Xae=p(()=>{Z();Gae();$ae();cb=class extends Xe{constructor(...e){super(...e);ie(this,"_applyWatermarkFilter",()=>{if(!this._watermarkFilter){this._watermarkFilter=new $S({watermarkImage:this._watermarkImage})}this._sprite.setFilters([this._watermarkFilter]);this._renderTexture.render(this._container);return Promise.resolve()});ie(this,"_loadWatermarkImage",()=>{if(!this._watermarkImage){return new Promise((e,t)=>{this._watermarkImage=new Ci;this._watermarkImage.onload=e;this._watermarkImage.src=Wae})}return Promise.resolve()});this._watermarkFilter=null;this._watermarkImage=null}_render(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){if(this._watermarkFilter){this._watermarkFilter.dispose()}super.dispose()}};cb.identifier="license-watermark";cb.prototype.availableOptions={};Ie.Operations.LicenseWatermarkOperation=cb;Kae=cb});var Jae;var Yae=p(()=>{Jae="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var cl,TP,KS;var Zae=p(()=>{Z();xh();Yae();({Vector2:cl}=se);TP=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=Jae;this._lastBlurRadius=null;this._lastControlPoint1=new cl;this._lastControlPoint2=new cl;this._blurFilter=new Ui;this._blurredRenderTarget=new q.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new q.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}const n=t.getDimensions();const s=!i.getDimensions().equals(n);const a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){const l=new cl(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);const u={blurRadius:this._options.blurRadius,texSize:n};const c=(b,_,y)=>Math.min(Math.max(b,_),y);const d=(b,_,y)=>{const I=c((y-b)/(_-b),0,1);return I*I*(3-2*I)};const m=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone());const{blurRadius:h}=this._options;const f=(b,_)=>{return d(0,1,Math.abs(c(new cl(b,_).subtract(this._options.controlPoint1).dot(m)/m.dot(m),0,1)))*h};this._blurFilter.set(u);this._blurFilter._applyCanvas(e,t,i,o,f);this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,i,o=false){const n=t.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._maskRenderTarget.setPixelRatio(t.getPixelRatio());this._maskRenderTarget.resizeTo(t.getDimensions());const a=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||s;const l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastControlPoint1=this._options.controlPoint1.clone();this._lastControlPoint2=this._options.controlPoint2.clone()}if(l){this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(t,i)}_renderMask(){const e=this._maskRenderTarget.getCanvas();const t=this._maskRenderTarget.getContext();const i=new cl(e.width,e.height);const o=this._options.controlPoint1.clone().multiply(i);const n=this._options.controlPoint2.clone().multiply(i);const s=t.createLinearGradient(o.x,o.y,n.x,n.y);s.addColorStop(0,"#FFFFFF");s.addColorStop(1,"#000000");t.fillStyle=s;t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const i=t.getContext();const o=e.getCanvas();const n=e.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const u=l.data;const c=s.getImageData(0,0,o.width,o.height).data;const d=a.getImageData(0,0,o.width,o.height).data;let m;for(let h=0;h<o.width*o.height*4;h+=4){m=d[h]/255;u[h]=m*u[h]+(1-m)*c[h];u[h+1]=m*u[h+1]+(1-m)*c[h+1];u[h+2]=m*u[h+2]+(1-m)*c[h+2]}i.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose();this._blurredRenderTarget.dispose();this._maskRenderTarget.dispose()}};TP.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},controlPoint1:{type:"vector2",default:new cl(0,.5),uniformType:"2f"},controlPoint2:{type:"vector2",default:new cl(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new cl(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new cl(100,100),uniformType:"2f"}};KS=TP});var XS,db,Qae;var ele=p(()=>{Z();Zae();({Vector2:XS}=se);db=class extends Xe{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;this._lastControlPoint1=this._options.controlPoint1.clone();this._lastControlPoint2=this._options.controlPoint2.clone();const t={blurQuality:{type:"string"}};this._horizontalFilter=new KS({},t);this._verticalFilter=new KS({},t);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new XS(.5,.5));this._verticalFilter.setDelta(new XS(-.5,.5));this._filter=new KS({},t)}rotate(e){const{controlPoint1:t}=this._options;const{controlPoint2:i}=this._options;if(e===90){t.flip();t.x=1-t.x;i.flip();i.x=1-i.x}else if(e===-90){t.flip();t.y=1-t.y;i.flip();i.y=1-i.y}this.set({controlPoint1:t,controlPoint2:i})}flip(e){const{controlPoint1:t}=this._options;const{controlPoint2:i}=this._options;switch(e){case"horizontal":t.x=1-t.x;i.x=1-i.x;break;case"vertical":t.y=1-t.y;i.y=1-i.y;break}this.set({controlPoint1:t,controlPoint2:i})}transform(e){const t={};["controlPoint1","controlPoint2"].forEach(i=>{const o=this.getOption(i);t[i]=e.applyToRelativePoint(o)});["blurRadius"].forEach(i=>{const o=this.getOption(i);t[i]=e.applyToRelativeSize(o)});this.set(t,false)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){if(this._options.highQualityCanvasBlur){return this._renderBlur(e)}return this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions();const i=t.min();const{blurRadius:o,controlPoint1:n,controlPoint2:s}=this._options;const a={blurRadius:o*i,controlPoint1:n.clone(),controlPoint2:s.clone(),texSize:t,blurQuality:"high"};this._horizontalFilter.set(a);this._verticalFilter.set(a);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions();const{blurRadius:i,controlPoint1:o,controlPoint2:n}=this._options;this._filter.set({blurRadius:i,controlPoint1:o.clone(),controlPoint2:n.clone(),texSize:t,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};db.identifier="linear-focus";db.prototype.availableOptions={controlPoint1:{type:"vector2",default:new XS(0,.5)},controlPoint2:{type:"vector2",default:new XS(1,.5)},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};Ie.Operations.LinearFocusOperation=db;Qae=db});var rle;var tle=p(()=>{rle="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var dl,IP,YS;var ile=p(()=>{Z();xh();tle();({Vector2:dl}=se);IP=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=rle;this._lastBlurRadius=null;this._lastGradientRadius=null;this._lastStart=new dl;this._lastEnd=new dl;this._blurFilter=new Ui;this._blurredRenderTarget=new q.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new q.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}const n=t.getDimensions();const s=!i.getDimensions().equals(n);const a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){const l=new dl(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);const u={blurRadius:this._options.blurRadius,texSize:n};const c=(D,P,k)=>Math.min(Math.max(D,P),k);const d=(D,P,k)=>{const A=c((k-D)/(P-D),0,1);return A*A*(3-2*A)};const{blurRadius:m,gradientSize:h,size:f,start:b,end:_,texSize:y}=this._options;const I=new dl(b.y-_.y,_.x-b.x);I.divide(I.len());const T=(D,P)=>{return d(0,1,(Math.abs(y.clone().multiply(D,P).subtract(b).dot(I))-f)/h)*m};this._blurFilter.set(u);this._blurFilter._applyCanvas(e,t,i,o,T);this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(e,t,i,o=false){const n=t.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._maskRenderTarget.setPixelRatio(t.getPixelRatio());this._maskRenderTarget.resizeTo(t.getDimensions());const a=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||s;const l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastStart=this._options.start.clone();this._lastEnd=this._options.end.clone();this._lastGradientRadius=this._options.size}if(l){this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(t,i)}_renderMask(){const e=this._maskRenderTarget.getCanvas();const t=this._maskRenderTarget.getContext();const i=this._maskRenderTarget.getPixelRatio();const o=new dl(e.width,e.height);const n=this._options.size*o.min()*i;const s=this._options.gradientSize*o.min()*i;const a=this._options.start.clone().multiply(o);const l=this._options.end.clone().multiply(o);const u=l.clone().subtract(a);const c=a.clone().add(u.clone().divide(2));const d=u.len();const m=u.clone().divide(d);const h=c.clone().add((n+s)*m.y,-(n+s)*m.x);const f=c.clone().add(-(n+s)*m.y,(n+s)*m.x);const b=t.createLinearGradient(h.x,h.y,f.x,f.y);const _=f.clone().subtract(h).len();b.addColorStop(0,"#000000");b.addColorStop(s/2/_,"#FFFFFF");b.addColorStop(1-s/2/_,"#FFFFFF");b.addColorStop(1,"#000000");t.fillStyle=b;t.fillRect(0,0,e.width,e.height)}_applyMask(e,t){const i=t.getContext();const o=e.getCanvas();const n=e.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const u=l.data;const c=s.getImageData(0,0,o.width,o.height).data;const d=a.getImageData(0,0,o.width,o.height).data;let m;for(let h=0;h<o.width*o.height*4;h+=4){m=d[h]/255;u[h]=m*u[h]+(1-m)*c[h];u[h+1]=m*u[h+1]+(1-m)*c[h+1];u[h+2]=m*u[h+2]+(1-m)*c[h+2]}i.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose()}};IP.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},size:{type:"number",default:50,uniformType:"f"},gradientSize:{type:"number",default:50,uniformType:"f"},start:{type:"vector2",default:new dl(0,.5),uniformType:"2f"},end:{type:"vector2",default:new dl(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new dl(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new dl(100,100),uniformType:"2f"}};YS=IP});var JS,pb,ole;var nle=p(()=>{Z();ile();({Vector2:JS}=se);pb=class extends Xe{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;this._lastSize=this._options.size;this._lastGradientSize=this._options.gradientSize;const t={blurQuality:{type:"string"}};this._horizontalFilter=new YS({},t);this._verticalFilter=new YS({},t);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new JS(.5,.5));this._verticalFilter.setDelta(new JS(-.5,.5));this._filter=new YS({},t);this._renderBlur.bind(this)}rotate(e){const{start:t}=this._options;const{end:i}=this._options;if(e===90){t.flip();t.x=1-t.x;i.flip();i.x=1-i.x}else if(e===-90){t.flip();t.y=1-t.y;i.flip();i.y=1-i.y}this.set({start:t,end:i})}flip(e){const{start:t}=this._options;const{end:i}=this._options;switch(e){case"horizontal":t.x=1-t.x;i.x=1-i.x;break;case"vertical":t.y=1-t.y;i.y=1-i.y;break}this.set({start:t,end:i})}transform(e){const t={};["start","end"].forEach(i=>{const o=this.getOption(i);t[i]=e.applyToRelativePoint(o)});["blurRadius","size","gradientSize"].forEach(i=>{const o=this.getOption(i);t[i]=e.applyToRelativeSize(o)});this.set(t,false)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){if(this._options.highQualityCanvasBlur){return this._renderBlur(e)}return this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions();const i=t.min();const o=this._options.start.clone();const n=this._options.end.clone();const{blurRadius:s,size:a,gradientSize:l}=this._options;const u={blurRadius:s*i,size:a*i,gradientSize:l*i,start:o.clone().multiply(t),end:n.clone().multiply(t),texSize:t,blurQuality:"high"};this._horizontalFilter.set(u);this._verticalFilter.set(u);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(e){const t=e.getDimensions();const{blurRadius:i,size:o,gradientSize:n,start:s,end:a}=this._options;this._filter.set({blurRadius:i,gradientSize:n,size:o,start:s.clone(),end:a.clone(),texSize:t,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};pb.identifier="mirrored-focus";pb.prototype.availableOptions={start:{type:"vector2",default:new JS(0,.5)},end:{type:"vector2",default:new JS(1,.5)},blurRadius:{type:"number",default:.025},size:{type:"number",default:.1},gradientSize:{type:"number",default:.1},highQualityCanvasBlur:{type:"boolean",default:false}};Ie.Operations.MirroredFocusOperation=pb;ole=pb});var FVe,mb,sle;var ale=p(()=>{Z();({Vector2:FVe}=se);mb=class extends Xe{_render(e){const t=this._options.rotation%360;const i=t*(Math.PI/180);const o=t===90||t===270;const n=this._options.flipHorizontally!==this._options.flipVertically;const s=o&&n?!this._options.flipVertically:this._options.flipVertically;const a=o&&n?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,s?-1:1);this._sprite.setRotation(i);this._sprite.setAnchor(.5,.5);this._sprite.updateTransform();const l=this._sprite.getBounds();this._renderTexture.resizeTo(new FVe(l.width,l.height));this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round());this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(e){e=e.clone();if(this._options.rotation%180){e.flip()}return e}flip(e){const{rotation:t}=this._options;if(t===90||t===270){if(e==="vertical"){e="horizontal"}else{e="vertical"}}switch(e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally());break}}};mb.identifier="orientation";mb.prototype.availableOptions={rotation:{type:"number",default:0,validation(r){if(r%90!==0){throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")}},setter:r=>(r+360)%360},flipVertically:{type:"boolean",default:false},flipHorizontally:{type:"boolean",default:false}};Ie.Operations.OrientationOperation=mb;sle=mb});var ZS,hb,lle;var ule=p(()=>{Z();({Vector2:ZS}=se);hb=class extends Xe{constructor(...e){super(...e);this._flipContainer=new q.Container}_render(e){const{position:t,rotation:i,scale:o,pivot:n,outputResolution:s}=this._options;const a=this._sdk.getTextureScale();const l=s.clone().multiply(a).ceil();this._renderTexture.resizeTo(l);this._sprite.setRotation(i);this._sprite.setPosition(t);this._sprite.setPivot(n);this._sprite.setScale(o);this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(e){const t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}};hb.identifier="output";hb.prototype.availableOptions={position:{type:"vector2",default:new ZS(0,0)},rotation:{type:"number",default:0},scale:{type:"vector2",default:new ZS(1,1)},pivot:{type:"vector2",default:new ZS(0,0)},outputResolution:{type:"vector2",default:new ZS(100,100)}};Ie.Operations.OutputOperation=hb;lle=hb});var QS,cle,PVe,Eh,dle;var ple=p(()=>{Z();({OverlayFilter:QS}=q.Filters);({Vector2:cle}=se);PVe=4;Eh=class extends Xe{constructor(...e){super(...e);this._overlayTexture=q.Texture.fromImage(this._options.image);this._overlayContainer=new q.Container;this._overlaySprite=new q.Sprite;this._overlaySprite.setTexture(this._overlayTexture);this._overlaySprite.setAnchor(0,0);this._overlayContainer.addChild(this._overlaySprite);this._overlayFilter=new q.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture});this._sprite.setFilters([this._overlayFilter]);this._renderedOverlaySprite=new q.Sprite;this._renderedOverlayContainer=new q.Container;this._renderedOverlayContainer.addChild(this._renderedOverlaySprite);this._overlayRendered=false;this._lastInputDimensions=new cle(0,0)}setOption(e,t){super.setOption(e,t);if(e==="image"&&t&&this._sdk){const i=this._sdk.getRenderer();const o=this._overlayTexture.getBaseTexture();o.setSource(t);if(i.isOfType("webgl")){i.updateTexture(o)}this._overlayRendered=false}}_render(e){const t=e.getDimensions();const{image:i,alpha:o,blendMode:n}=this._options;if(!i){this._sprite.setFilters([]);this._renderTexture.render(this._container);return Promise.resolve()}if(!this._overlayRendered||!this._lastInputDimensions.equals(t)){this._renderOverlayToRenderTexture(e);this._overlayRendered=true;this._lastInputDimensions.copy(t)}this._overlayFilter.set({blendMode:n,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:o});this._sprite.setFilters([this._overlayFilter]);this._renderTexture.render(this._container);return Promise.resolve()}_renderOverlayToRenderTexture(e){const t=this._sdk.getRenderer();const i=e.getDimensions();if(!this._overlayRenderTexture){this._overlayRenderTexture=new q.RenderTexture(t,i.x,i.y);this._renderedOverlaySprite.setTexture(this._overlayRenderTexture)}const{width:o,height:n}=this._options.image;const s=H.resizeVectorToFill(new cle(o,n),i);const{flipHorizontally:a,flipVertically:l}=this._options;const u=a?-1:1;const c=l?-1:1;this._overlaySprite.setWidth(s.x*u);this._overlaySprite.setHeight(s.y*c);this._overlaySprite.setPosition(i.x*(1-u)*.5,i.y*(1-c)*.5);const d=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(i);if(t.isOfType("webgl")){d.setGLUnit(PVe);t.updateTexture(d,false)}this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose();if(this._overlaySprite)this._overlaySprite.dispose();if(this._overlayRenderTexture)this._renderedOverlaySprite.dispose();if(this._overlayFilter)this._overlayFilter.dispose();if(this._overlayTexture)this._overlayTexture.dispose();if(this._overlayRenderTexture)this._overlayRenderTexture.dispose();if(this._renderedOverlaySprite)this._renderedOverlaySprite.dispose()}};Eh.identifier="overlay";Eh.BLEND_MODES=QS.BLEND_MODES;Eh.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},blendMode:{type:"number",default:QS.BLEND_MODES.MULTIPLY,available:Object.keys(QS.BLEND_MODES).map(r=>QS.BLEND_MODES[r])},alpha:{type:"number",default:1},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};Ie.Operations.OverlayOperation=Eh;dle=Eh});var hle;var mle=p(()=>{hle="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"});var kh,EP,e1;var fle=p(()=>{Z();xh();mle();({Vector2:kh}=se);EP=class extends q.Filter{constructor(...e){super(...e);this._fragmentSource=hle;this._lastBlurRadius=null;this._lastGradientRadius=null;this._lastPosition=new kh;this._blurFilter=new Ui;this._blurredRenderTarget=new q.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new q.CanvasRenderTarget(100,100,1)}_applyCanvas(e,t,i,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(e,t,i,o);return}const n=t.getDimensions();const s=!i.getDimensions().equals(n);const{blurRadius:a,position:l,texSize:u,gradientRadius:c}=this._options;const d=t.getBaseTexture().isDirty()||this._lastBlurRadius!==a||s;if(d){const m=new kh(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(m);const h={blurRadius:a,texSize:n};const f=(y,I,T)=>Math.min(Math.max(y,I),T);const b=(y,I,T)=>{const D=f((T-y)/(I-y),0,1);return D*D*(3-2*D)};const _=(y,I)=>{return b(0,1,(Math.abs(u.clone().multiply(y,I).subtract(l).len())-this._options.radius)/(c*2))*a};this._blurFilter.set(h);this._blurFilter._applyCanvas(e,t,i,o,_);this._lastBlurRadius=a}}_renderLQBlur(e,t,i,o=false){const n=t.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._maskRenderTarget.setPixelRatio(t.getPixelRatio());this._maskRenderTarget.resizeTo(t.getDimensions());const a=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||s;const l=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastPosition=this._options.position.clone();this._lastGradientRadius=this._options.gradientRadius}if(l){this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(t,i)}_renderMask(){const e=this._maskRenderTarget.getCanvas();const t=this._maskRenderTarget.getContext();const i=new kh(e.width,e.height);const o=this._maskRenderTarget.getPixelRatio();const n=this._options.position.clone().multiply(i);let{radius:s,gradientRadius:a}=this._options;s*=e.height;a*=e.height;const l=t.createRadialGradient(n.x,n.y,0,n.x,n.y,(s+a)*o);l.addColorStop(0,"#FFFFFF");l.addColorStop(s/(s+a),"#FFFFFF");l.addColorStop(1,"#000000");t.fillStyle=l;t.fillRect(0,0,i.x,i.y)}_applyMask(e,t){const i=t.getContext();const o=e.getCanvas();const n=e.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const u=l.data;const c=s.getImageData(0,0,o.width,o.height).data;const d=a.getImageData(0,0,o.width,o.height).data;let m;for(let h=0;h<o.width*o.height*4;h+=4){m=d[h]/255;u[h]=m*u[h]+(1-m)*c[h];u[h+1]=m*u[h+1]+(1-m)*c[h+1];u[h+2]=m*u[h+2]+(1-m)*c[h+2]}i.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose();this._blurredRenderTarget.dispose();this._maskRenderTarget.dispose()}};EP.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},radius:{type:"number",default:50,uniformType:"f"},gradientRadius:{type:"number",default:25,uniformType:"f"},position:{type:"vector2",default:new kh(.5,.5),uniformType:"2f"},delta:{type:"vector2",default:new kh(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new kh(100,100),uniformType:"2f"}};e1=EP});var kP,fb,gle;var yle=p(()=>{Z();fle();({Vector2:kP}=se);fb=class extends Xe{constructor(...e){super(...e);this._lastBlurRadius=this._options.blurRadius;this._lastGradientRadius=this._options.gradientRadius;const t={blurQuality:{type:"string"}};this._horizontalFilter=new e1({},t);this._verticalFilter=new e1({},t);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new kP(.5,.5));this._verticalFilter.setDelta(new kP(-.5,.5));this._filter=new e1({},t)}rotate(e){const{position:t}=this._options;if(e===90){t.flip();t.x=1-t.x}else if(e===-90){t.flip();t.y=1-t.y}this.set({position:t})}flip(e){const{position:t}=this._options;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y;break}this.set({position:t})}transform(e){const t={};const i=this.getPosition();t.position=e.applyToRelativePoint(i);["radius","blurRadius","gradientRadius"].forEach(o=>{const n=this.getOption(o);t[o]=e.applyToRelativeSize(n)});this.set(t,false)}_renderWebGL(e){return this._renderBlur(e)}_renderCanvas(e){if(this._options.highQualityCanvasBlur){return this._renderBlur(e)}return this._renderLQCanvasBlur(e)}_renderBlur(e){const t=e.getDimensions();const i=t.min();const{position:o,blurRadius:n,radius:s,gradientRadius:a}=this._options;const l={blurRadius:n*i,radius:s*i,gradientRadius:a*i,position:o.clone().multiply(t),texSize:t,blurQuality:"high"};this._horizontalFilter.set(l);this._verticalFilter.set(l);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(e){const{blurRadius:t,radius:i,gradientRadius:o,position:n}=this._options;const s=e.getDimensions();this._filter.set({blurRadius:t,radius:i,gradientRadius:o,position:n,texSize:s,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};fb.identifier="radial-focus";fb.prototype.availableOptions={position:{type:"vector2",default:new kP(.5,.5)},radius:{type:"number",default:.25},gradientRadius:{type:"number",default:.125},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};Ie.Operations.RadialFocusOperation=fb;gle=fb});var _le;var ble=p(()=>{_le="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"});var DP,vle;var xle=p(()=>{Z();ble();DP=class extends q.Filter{constructor(){super();this._fragmentSource=_le}_applyCanvas(e,t,i,o=false){const n=t.getCanvas();const s=t.getContext();const a=i.getContext();const{maskCanvas:l,filterCanvas:u}=this._options;const c=l.getContext("2d");const d=u.getContext("2d");const m=c.getImageData(0,0,n.width,n.height).data;const h=s.getImageData(0,0,n.width,n.height);const f=h.data;const b=d.getImageData(0,0,n.width,n.height).data;let _;for(let y=0;y<n.width*n.height*4;y+=4){_=m[y]/255;f[y]=_*b[y]+(1-_)*f[y];f[y+1]=_*b[y+1]+(1-_)*f[y+1];f[y+2]=_*b[y+2]+(1-_)*f[y+2]}a.putImageData(h,0,0)}};DP.prototype.availableOptions={maskImage:{type:"number",default:1,uniformType:"i"},maskCanvas:{type:"object",default:null},filterImage:{type:"number",default:2,uniformType:"i"},filterCanvas:{type:"object",default:null}};vle=DP});var t1,Cle,qs;var Dh=p(()=>{Z();({Vector2:t1}=se);Cle=class extends Oe{constructor(e,t){super(t);this._isDisposed=false;this._operation=e;this._dirtiness={};this.id=H.getUUID();this._renderTextures={};this._identitySprite=new q.Sprite;this._sprite=new q.Sprite;this._hitTestSprite=new q.Sprite;this._renderers=[]}applyScale(e){}applyRotation(e){const t=this._operation.getInputDimensions();let i=this.getRotation()*180/Math.PI;i+=e;this.setRotation(i*Math.PI/180);const o=(e+360)%360;const n=o*Math.PI/180;const s=Math.cos(n);const a=Math.sin(n);const l=this._options.position.clone().subtract(.5).multiply(t);const u=new t1(l.x*s-l.y*a,l.x*a+l.y*s).divide(t.clone().flip());this.setPosition(new t1(.5,.5).add(u))}applyFlip(e){const t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y;break}this.setPosition(t)}applyTransform(e){const t={};t.rotation=e.applyToRotation(this.getRotation());t.position=e.applyToRelativePoint(this.getPosition());if(this._options.dimensions){t.dimensions=e.applyToDimensions(this.getDimensions())}this.set(t,false)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(e){if(!this._renderTexture){const t=this._getTexture();this._renderTextureContainer=new q.Container;this._renderTextureSprite=new q.Sprite(t);this._renderTextureContainer.addChild(this._renderTextureSprite);this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}else{this._renderTexture.clear()}}_rendersToRenderTexture(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType("webgl")}_optionEquals(e,t){if(e==="type"){return true}return super._optionEquals(e,t)}update(e,t){if(this._isDisposed){return}if(this._rendersToRenderTexture(e)){this._prepareRenderTexture(e);this._renderToRenderTexture(e)}this._updateSprite(t)}_updateSprite(e){const t=[this._sprite,this._hitTestSprite];t.forEach(i=>{if(!i.getTexture())return;i.setAnchor(this._options.anchor);i.setPosition(this._options.position.clone().multiply(e));if(typeof this._options.alpha!=="undefined"){i.setAlpha(this._options.alpha)}let{dimensions:o}=this._options;if(o){o=o.clone().multiply(this._operation.getSDK().getTextureScale());i.setWidth(o.x);i.setHeight(o.y)}i.updateTransform();const n=i.getTexture().getFrame();const s=new t1(n.width,n.height);i.setPivot(this._options.pivot.clone().multiply(s));i.setRotation(this._options.rotation);i.updateTransform()})}_renderToRenderTexture(e){const t=this._getTexture().getDimensions();const i=this._getRenderTexture(e.getRenderer(),t);const o=t.clone();if(this._options.smoothDownscaling){o.x=H.nextHighestPOT(o.x);o.y=H.nextHighestPOT(o.y)}this._renderTexture.resizeTo(o);this._renderTexture.render(this._renderTextureContainer);if(this._options.smoothDownscaling){const n=o.clone().subtract(t.x,t.y).divide(o);const s=i.getUVs().getUVs();s[0].x=s[3].x=0;s[1].x=s[2].x=1-n.x;s[0].y=s[1].y=0;s[2].y=s[3].y=1-n.y}this._sprite.setTexture(i)}isDirtyForRenderer(e){if(!(e.id in this._dirtiness)){this._dirtiness[e.id]=true}return this._dirtiness[e.id]}setDirtyForRenderer(e,t){this._renderers[t.id]=t;this._dirtiness[t.id]=e}setDirty(e){for(const t in this._dirtiness){this.setDirtyForRenderer(e,this._renderers[t])}}_getRenderTexture(e,t=new t1(100,100)){if(!this._renderTextures[e.id]){this._renderTextures[e.id]=new q.RenderTexture(e,t.x,t.y,1)}return this._renderTextures[e.id]}dispose(){this._isDisposed=true;for(const e in this._renderTextures){this._renderTextures[e].dispose()}}canBeDuplicated(){return true}canBeDeleted(){return true}canMaskCanvas(){return false}canAdjustPadding(){return false}canBeTakenToFront(){return true}canBeFlippedHorizontally(){return true}};qs=Cle});var LVe,zu;var OP=p(()=>{Z();({Vector2:LVe}=se);zu=class extends Oe{constructor(...e){super(...e);this._lastOptions={};this._lastInputDimensions=new LVe(0,0);this._brush=null}getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions)){return this._brush}const{image:t,size:i}=this._options;t.width=t.height=Math.ceil(i*e.min());const o=H.createCanvas();o.width=t.width;o.height=t.height;const n=o.getContext("2d");n.drawImage(t,0,0,o.width,o.height);const s=this._tintImageData(n.getImageData(0,0,o.width,o.height),o.width,o.height);n.putImageData(s,0,0);this._lastOptions=this.serializeOptions(["size","color"]);this._brush=o;this._lastInputDimensions=e.clone();return o}_tintImageData(e){const{color:t}=this._options;for(let i=0;i<e.data.length;i+=4){e.data[i]+=(t.r*255-e.data[i])*t.a;e.data[i+1]+=(t.g*255-e.data[i+1])*t.a;e.data[i+2]+=(t.b*255-e.data[i+2])*t.a}return e}clone(){const e=this.constructor;return new e(this._options)}};zu.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},size:{type:"number",default:.05},color:{type:"color",default:X.RED}}});var hd;var Sle=p(()=>{Z();OP();hd=class extends zu{getBrushImage(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions)){return this._brush}let{size:t,hardness:i,color:o}=this._options;const n=H.createCanvas();n.width=n.height=Math.ceil(t*e.min());const s=n.getContext("2d");o=o.clone();o.a=1;if(n.width===1){s.fillStyle=o.toRGBA();s.fillRect(0,0,1,1)}else{const a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());const l=o.clone();l.a=0;a.addColorStop(1,l.toRGBA());s.fillStyle=a;s.fillRect(0,0,n.width,n.height)}this._lastOptions=this.serializeOptions(["size","color","hardness"]);this._brush=n;this._lastInputDimensions=e.clone();return n}};hd.identifier="imgly_brush_radial";hd.prototype.availableOptions={...zu.prototype.availableOptions,hardness:{type:"number",default:1}}});var zVe,UVe,wle,Tle;var Ile=p(()=>{Z();({Vector2:zVe,CubicBezierCurve:UVe}=se);wle=class{constructor(e,t,i=3){this._path=e;this._drawnCanvases=[];this._position=t;this._smooth=i}getBezierCurve(e,t,i,o){if(!t){return null}let n;let s;if(!o){n=(i.x-t.x)/this._smooth;s=(i.y-t.y)/this._smooth}else{n=(o.x-t.x)/this._smooth;s=(o.y-t.y)/this._smooth}let a;let l;if(!e){a=(i.x-t.x)/this._smooth;l=(i.y-t.y)/this._smooth}else{a=(i.x-e.x)/this._smooth;l=(i.y-e.y)/this._smooth}const u=t.clone().add(a,l);const c=i.clone().subtract(n,s);return new UVe(t,u,c,i)}renderToCanvas(e,t,i,o,n,s=1){if(this._drawnCanvases.indexOf(t)!==-1){return}const a=new zVe(t.width,t.height);const l=t.getContext("2d");const u=this._position.clone().multiply(a);const c=o?o.getPosition().clone().multiply(a):null;const d=i?i.getPosition().clone().multiply(a):null;const m=n?n.getPosition().clone().multiply(a):null;const h=u.clone().subtract(c).len();const f=e.width/10;const b=this.getBezierCurve(d,c,u,m);let _;if(!b){_=[u]}else{b.calculateSegments(20);const y=b.getLength();_=b.arcLengthApproxSample(Math.ceil(y/f))}for(let y=0;y<_.length;y++){const I=_[y];let T=e.width*.5/(f*2);T*=1-s;T=1/(1+T);l.globalAlpha=T;l.drawImage(e,I.x-e.width/2,I.y-e.height/2,e.width,e.height)}l.globalAlpha=1;this._drawnCanvases.push(t)}setPosition(e){this._position=e}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}};Tle=wle});var RP,gb;var Ele=p(()=>{Z();Ile();RP=class extends Oe{constructor(e,t,i){super(t);this._operation=e;this._canvas=i||H.createCanvas();this._context=this._canvas.getContext("2d")}serializeOption(e,t=false){if(e==="controlPoints"){return this._options.controlPoints.map(i=>{const o=i.getPosition();return t?o.toObject():o.clone()})}return super.serializeOption(e,t)}_optionEquals(e,t){if(e==="controlPoints"){const{controlPoints:i}=this._options;for(let o=0,n=i.length;o<n;o++){if(!i[o].getPosition().equals(t[o])){return false}}return true}return super._optionEquals(e,t)}render(e){const{controlPoints:t,size:i}=this._options;if(t.length<2){return}const o=this.getBrush();const n=o&&o.getHardness?o.getHardness():1;H.ensureCanvasDimensions(this._canvas,e);if(!this._brush||this._lastBrushSize!==i||!e.equals(this._brushInputDimensions)){this._brushInputDimensions=e.clone();this._lastBrushSize=i}let s;let a;let l;let u;for(let c=0;c<t.length;c++){s=t[c-2];a=t[c-1];l=t[c];u=t[c+1];l.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,s,a,u,n)}}_createBrush(e){let{size:t,hardness:i,color:o}=this._options;const n=H.createCanvas();n.width=n.height=Math.ceil(t*e.min());const s=n.getContext("2d");o=o.clone();o.a=1;if(n.width===1){s.fillStyle=o.toRGBA();s.fillRect(0,0,1,1)}else{const a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());const l=o.clone();l.a=0;a.addColorStop(1,l.toRGBA());s.fillStyle=a;s.fillRect(0,0,n.width,n.height)}return n}addControlPoint(e){const t=new Tle(this,e);this._options.controlPoints.push(t);this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(e){this._canvas=e;this._context=e.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);this._options.controlPoints.forEach(e=>{e.setDirty()})}forEachControlPoint(e){this._options.controlPoints.forEach(e)}renderToCanvas(e){const t=e.getContext("2d");t.save();t.globalAlpha=this._options.brush.getColor().a;t.drawImage(this._canvas,0,0);t.restore()}getCanvasDimensions(){return this._canvasDimensions}};RP.prototype.availableOptions={id:{type:"string",default:()=>H.getUUID()},brush:{type:"object",required:true},controlPoints:{type:"array",default:[]},closed:{type:"boolean",default:false}};gb=RP});var r1,fd,gd;var AP=p(()=>{Z();Dh();OP();Sle();Ele();({Vector2:r1}=se);fd=class extends qs{constructor(...e){super(...e);this._persistedPaths=[];this._outputCanvasDirty=true;this._outputCanvas=H.createCanvas();this._outputContext=this._outputCanvas.getContext("2d");this._persistCanvas=H.createCanvas();this._persistContext=this._persistCanvas.getContext("2d");this._nextCanvas=H.createCanvas();this._texture=q.Texture.fromCanvas(this._outputCanvas);this._sprite.setTexture(this._texture);this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(e){this._options.paths.forEach(t=>{t.forEachControlPoint(i=>{const o=i.getPosition().clone();switch(e){case"horizontal":o.x=1-o.x;break;case"vertical":o.y=1-o.y;break}i.setPosition(o)});t.setDirty(true)});this._reset()}applyRotation(e){this._options.paths.forEach(t=>{t.forEachControlPoint(i=>{const o=i.getPosition().clone();if(e===90){o.flip();o.x=1-o.x}else if(e===-90){o.flip();o.y=1-o.y}i.setPosition(o)});t.setDirty(true)});this._reset()}applyTransform(e){let t=null;this._options.paths.forEach(i=>{i.forEachControlPoint(n=>{n.setPosition(e.applyToRelativePoint(n.getPosition()))});const o=i.getBrush();if(o!==t){o.setSize(e.applyToRelativeSize(o.getSize()));t=o}i.setDirty(true)});this._reset()}clearCanvas(){if(!this._outputCanvas){return}this._outputCanvasDirty=true;const{width:e,height:t}=this._outputCanvas;this._outputContext.clearRect(0,0,e,t)}clearPersistCanvas(){if(!this._persistCanvas){return}const{width:e,height:t}=this._persistCanvas;this._persistContext.clearRect(0,0,e,t)}serializeOptions(e,t=false){const i=super.serializeOptions(e,t);if(!e)i.type="brush";return i}serializeOption(e,t=false){if(e==="paths"){return this._options.paths.map(i=>i.serializeOptions(void 0,t))}return super.serializeOption(e,t)}createPath(e){const t=new gb(this._operation,{brush:e},this._nextCanvas);t.on("update",this._onPathUpdate);this._options.paths.push(t);this.setDirty(true);return t}_onPathUpdate(){this._operation.setDirty(true);this.setDirty(true)}_onPathPersist(e){e.renderToCanvas(this._persistCanvas);this._nextCanvas=e.getCanvas();const t=this._nextCanvas.getContext("2d");t.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height);this._persistedPaths.push(e)}_getTexture(){return this._texture}setDirtyForRenderer(e,t,i=false){super.setDirtyForRenderer(e,t,i);if(e&&i){this._persistedPaths=[];this.clearPersistCanvas();this._options.paths.forEach(o=>{o.setDirty(true)})}}setDirty(e,t=false){for(const i in this._dirtiness){this.setDirtyForRenderer(e,this._renderers[i],t)}}render(e){const t=this._operation.getSDK().getRenderer();if(!this.isDirtyForRenderer(t)){return}H.ensureCanvasDimensions(this._outputCanvas,e);H.ensureCanvasDimensions(this._persistCanvas,e);this._options.paths.forEach(i=>{i.render(e);if(i.getClosed()&&this._persistedPaths.indexOf(i)===-1){this._onPathPersist(i)}});this.clearCanvas();this._outputContext.drawImage(this._persistCanvas,0,0);this._options.paths.forEach(i=>{if(!i.getClosed()){i.renderToCanvas(this._outputCanvas)}});this.setDirtyForRenderer(false,t)}update(e,t){if(t){H.ensureCanvasDimensions(this._outputCanvas,t);H.ensureCanvasDimensions(this._persistCanvas,t);this._texture.getBaseTexture().update()}this.render(t);const i=e.getRenderer();if(i.isOfType("webgl")){i.updateTexture(this._texture.getBaseTexture())}super.update(e,t)}_reset(){this._persistedPaths=[];if(this._operation){this._operation.setDirty(true)}this.setDirty(true);this.clearCanvas();this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new hd}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose();this._texture&&this._texture.getBaseTexture().dispose()}};fd.prototype.availableOptions={id:{type:"string",default:()=>H.getUUID()},position:{type:"vector2",default:new r1(0,0)},scale:{type:"vector2",default:new r1(1,1)},anchor:{type:"vector2",default:new r1(0,0)},pivot:{type:"vector2",default:new r1(0,0)},rotation:{type:"number",default:0},paths:{type:"array",default:[],setter(r){r=r.map(e=>{if(e instanceof gb)return e;const{brush:t,closed:i}=e;const o=new gb(this._operation,{brush:t,closed:i},this._nextCanvas);e.controlPoints.forEach(n=>{o.addControlPoint(n)});return o});this._reset();return r}}};fd.type="brush";fd.Brush=zu;fd.Path=gb;fd.Brushes={RadialBrush:hd};gd=fd});var kle,yb,Dle;var Ole=p(()=>{Z();xh();xle();AP();({Vector2:kle}=se);yb=class extends Xe{constructor(...e){super(...e);const t=this._sdk.getRenderer();this._lastBlurRadius=null;this._blurredRenderTexture=new q.RenderTexture(t,100,100,1);this._maskRenderTexture=new q.RenderTexture(t,100,100,1);this._brushSprite=new gd(this);this._brushSpriteContainer=new q.Container;const i=this._brushSprite.getDisplayObject();this._brushSpriteContainer.addChild(i);this._outputSprite=new q.Sprite;this._outputContainer=new q.Container;this._outputContainer.addChild(this._outputSprite);this._maskFilter=new vle;if(t.isOfType("webgl")){this._horizontalFilter=new Ui;this._verticalFilter=new Ui;this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new kle(1,1));this._verticalFilter.setDelta(new kle(-1,1));let o=this._maskRenderTexture.getBaseTexture();o.setGLUnit(this._maskFilter.getMaskImage());t.updateTexture(o,false);o=this._blurredRenderTexture.getBaseTexture();o.setGLUnit(this._maskFilter.getFilterImage());t.updateTexture(o,false)}else if(t.isOfType("canvas")){this._blurFilter=new Ui;this._sprite.setFilters([this._blurFilter]);this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas());this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas())}this._outputSprite.setFilters([this._maskFilter])}flip(e){this._brushSprite.applyFlip(e);this.setDirty(true,true);this._lastBlurRadius=null}rotate(e){this._brushSprite.applyRotation(e);this.setDirty(true,true);this._lastBlurRadius=null}transform(e,t){this._brushSprite.applyTransform(e,t);this.setDirty(true,true);this._lastBlurRadius=null}_render(e){this._renderBlur(e);this._renderMask(e);this._outputSprite.setTexture(e);this._renderTexture.render(this._outputContainer);return Promise.resolve()}_renderMask(e){const t=e.getDimensions();const i=this._maskRenderTexture.getDimensions();if(!i.equals(t)){this._maskRenderTexture.resizeTo(t)}this._brushSprite.update(this._sdk,t);this._maskRenderTexture.clear(X.BLACK);this._maskRenderTexture.render(this._brushSpriteContainer);const o=this._sdk.getRenderer();if(o.isOfType("webgl")){o.updateTexture(this._maskRenderTexture.getBaseTexture(),false)}}_renderBlur(e){const t=e.getDimensions();const i=this._blurredRenderTexture.getDimensions();if(!i.equals(t)){this._blurredRenderTexture.resizeTo(t)}const{blurRadius:o}=this._options;if(this._lastBlurRadius!==o||!i.equals(t)){const s=this._sdk.getRenderer();let a;if(s.isOfType("webgl")){const l=t.min();a={blurRadius:o*l,texSize:t};this._horizontalFilter.set(a);this._verticalFilter.set(a)}else if(s.isOfType("canvas")){a={blurRadius:o};this._blurFilter.set(a)}this._blurredRenderTexture.render(this._container);this._lastBlurRadius=o}const n=this._sdk.getRenderer();if(n.isOfType("webgl")){n.updateTexture(this._blurredRenderTexture.getBaseTexture(),false)}}getBrush(){return this._brushSprite}createPath(e,t=1){const i=new gd.Brushes.RadialBrush({size:e,hardness:t,color:X.WHITE});const o=this._brushSprite.createPath(i);this._options.paths.push(o);this.setDirty(true);return o}setDirtyForRenderer(e,t,i){super.setDirtyForRenderer(e,t,i);this._brushSprite.setDirtyForRenderer(e,t,i)}dispose(){super.dispose();const e=this._sdk.getRenderer();if(e.isOfType("webgl")){this._verticalFilter.dispose();this._horizontalFilter.dispose()}else{this._blurFilter.dispose()}this._brushSprite.dispose();this._maskFilter.dispose();this._blurredRenderTexture.dispose();this._maskRenderTexture.dispose()}hasChanges(){return true}};yb.identifier="selective-blur";yb.prototype.availableOptions={blurRadius:{type:"number",default:.05},paths:{type:"array",default:[],setter(r){if(this._brushSprite){this._brushSprite.setPaths(r)}return r}}};Ie.Operations.SelectiveBlurOperation=yb;Dle=yb});var yd,i1,o1,n1;var Rle=p(()=>{Z();TF();Dh();({Vector2:yd,ColorMatrix:i1}=se);o1=class extends qs{constructor(...e){super(...e);const{image:t}=this._options;const i=t.src||t.filePath||t.toDataUrl&&t.toDataURL();this._isSVG=i&&(!!i.match(/\w+\.svg(?=\?|$)/i)||i.match(/data:image\/svg/i));if(this._isSVG){this._canvas=H.createCanvas();this._context=this._canvas.getContext("2d");this._options.smoothDownscaling=false}if(t){this._onImageUpdate()}this._tintFilter=new q.Filters.TintFilter;this._adjustmentsFilter=new xS;this._lastRenderedDimensions=yd.NULL;this._lastRenderedInputDimensions=yd.NULL;this._onOptionsChange=this._onOptionsChange.bind(this);this._options.adjustments.on("update",this._onOptionsChange)}applyScale(e){this.setDimensions(this.getDimensions().multiply(e))}serializeOptions(e,t=false){const i=super.serializeOptions(e,t);if(!e)i.type="sticker";return i}_rendersToRenderTexture(e){const t=this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType("webgl");return t||this._hasAdjustments()||this._options.tintMode!=="none"}_getTexture(){return this._inputTexture}update(e,t){const{dimensions:i,image:o}=this._options;if(i.equals(yd.NULL)){i.set(o.width,o.height)}this._sprite.setSmoothDownscaling(this._isSVG?false:this.getSmoothDownscaling());const n=!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==o;if(n&&this._isSVG&&e.getRenderer().isOfType("webgl")){o.width=Math.round(i.x);o.height=Math.round(i.y);const a=4096;const l=o.width/o.height;if(o.width>a){o.width=a;o.height=Math.round(o.width/l)}if(o.height>a){o.height=a;o.width=Math.round(o.height*l)}this._canvas.width=o.width;this._canvas.height=o.height;this._context.clearRect(0,0,o.width,o.height);this._context.drawImage(o,0,0,o.width,o.height);this._inputTexture.getBaseTexture().update()}if(this._rendersToRenderTexture(e)){this._prepareRenderTexture(e)}const s=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);const{adjustments:a}=this._options;const l=new i1;l.multiply(i1.createBrightnessMatrix(a.getBrightness()));l.multiply(i1.createSaturationMatrix(a.getSaturation()));l.multiply(i1.createContrastMatrix(a.getContrast()));this._adjustmentsFilter.set({colorMatrix:l})}if(this._options.tintMode&&this._options.tintMode!=="none"){s.push(this._tintFilter);this._tintFilter.set({mode:q.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor});if(this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture){this._sprite.getTexture()._baseTexture.setDirty(true)}}this._renderTextureSprite.setFilters(s)}if(this._rendersToRenderTexture(e)){this._renderToRenderTexture(e)}else{this._sprite.setTexture(this._inputTexture)}this._updateSprite(t);this._applyFlip();this._lastRenderedDimensions.copy(i);this._lastRenderedInputDimensions.copy(t);this._lastRenderedImage=o}_applyFlip(){const e=this._sprite.getScale();const{flipHorizontally:t,flipVertically:i}=this._options;if(t&&e.x>0||!t&&e.x<0){e.x*=-1}if(i&&e.y>0||!i&&e.y<0){e.y*=-1}this._sprite.setScale(e)}applyFlip(e){super.applyFlip(e);const t={rotation:this._options.rotation};const i=t.rotation/Math.PI*180;const o=i*-1;t.rotation=o*Math.PI/180;switch(e){case"horizontal":t.flipHorizontally=!this._options.flipHorizontally;this.set(t);break;case"vertical":t.flipVertically=!this._options.flipVertically;this.set(t);break}}_hasAdjustments(){const{adjustments:e}=this._options;return e.getBrightness()!==0||e.getSaturation()!==1||e.getContrast()!==1}_onImageUpdate(){let e=this._options.image;const t=this._operation.getSDK().getRenderer();if(this._isSVG&&t.isOfType("webgl")){e=this._canvas}if(this._inputTexture){this._inputTexture.dispose();this._inputTexture=null}this._inputTexture=q.Texture.fromImage(e);this._identitySprite.setTexture(this._inputTexture);this._sprite.setTexture(this._inputTexture);if(this._renderTexture){this._renderTextureSprite.setTexture(this._inputTexture);this._renderTexture.resizeTo(this._inputTexture.getDimensions())}this.setDirty(true)}scalesUniformly(){return this._options.resizeMode==="keepAspect"}setOption(e,t,i=true){super.setOption(e,t,i);if(e==="image"&&this._identitySprite){this._onImageUpdate()}}_onOptionsChange(){const e=this._dirtiness;for(const t in e){e[t]=true}}dispose(){super.dispose();if(this._inputTexture){this._inputTexture.dispose();this._inputTexture=null}this._tintFilter.dispose();this._adjustmentsFilter.dispose();this._options.adjustments.off("updated",this._onOptionsChange)}};o1.prototype.availableOptions={id:{type:"string",default:()=>H.getUUID()},identifier:{type:"string",default:""},image:{type:"image",required:true},position:{type:"vector2",default:yd.NULL},dimensions:{type:"vector2",default:yd.NULL},anchor:{type:"vector2",default:new yd(0,0)},pivot:{type:"vector2",default:new yd(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false},smoothDownscaling:{type:"boolean",default:false},tintColor:{type:"color",default:X.WHITE},tintMode:{type:"string",default:"none",available:["none","solid","colorized"]},resizeMode:{type:"string",default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:"number",default:1},adjustments:{type:"configurable",structure:{brightness:{type:"number",default:0},saturation:{type:"number",default:1},contrast:{type:"number",default:1}}}};o1.type="sticker";n1=o1});var Hs,Ne;var Co=p(()=>{Hs=class{constructor(e){this._seed=e===void 0?Hs.TimeSeed():e}seed(e){this._seed=e===void 0?Hs.TimeSeed():e}next(){let e=this._seed|0;const t=e/Hs.SEED_DIVIDER|0;const i=e%Hs.SEED_DIVIDER|0;e=Hs.SEED_LOW_MULTIPLY*i-Hs.SEED_HIGH_MULTIPLY*t;if(e<=0){e+=Hs.MAX}if(e===-1){e=Hs.MAX-1}this._seed=e;return e}nextInRange(e,t){if(t===void 0){t=e;e=0}return e+this.next()%(t-e+1)}nextBool(e=1,t=1){return this.nextInRange(e+t-1)>=e}static TimeSeed(){return Date.now()}pickNext(e){if(!Array.isArray(e)){return null}return e[this.next()%e.length]}};Ne=Hs;ie(Ne,"MAX",2147483647);ie(Ne,"SEED_DIVIDER",127773);ie(Ne,"SEED_LOW_MULTIPLY",16807);ie(Ne,"SEED_HIGH_MULTIPLY",2836)});var NVe,At;var Ws=p(()=>{Z();({Rectangle:NVe}=se);At=class{constructor(e=0,t=0){this.width=e;this.height=t}set(e,t){this.width=e;this.height=t}aspect(){return this.width/this.height}rectangle(e,t){return new NVe(e,t,this.width,this.height)}clone(){return new At(this.width,this.height)}scale(e,t){if(t===void 0){t=e}this.width*=e;this.height*=t;return this}copy(e){this.width=e.width;this.height=e.height;return this}fitInWidthWithOther(e,t=new At){this.copy(At.fitTwoInWidth(e,this,t)[0]);return this}static fitTwoInWidth(e,t,i){const o=t.width*i.height+t.height*i.width;const n=i.height*e/o;const s=t.width*n;const a=t.height*n;return[new At(s,a),new At(e-s,a)]}}});var Ale,FP,at;var Qo=p(()=>{Z();Ale=v(Pm());FP=class extends Oe{async loadImages(e){return(0,Ale.default)(e,async t=>this.addImage(t.path,t.fullPath,t.image))}addImage(e,t,i,o="anonymous"){const n=this.getImages();if(!i){return new Promise((s,a)=>{i=new Ci;i.onload=()=>{n[e]={fullPath:t,image:i};s({fullPath:t,image:i})};i.crossOrigin=H.getCrossOriginValue(o);i.onerror=a;i.src=t})}n[e]={fullPath:t,image:i};return Promise.resolve({fullPath:t,image:i})}getImage(e){const t=this.getImages();const i=t[e];return i?i.image:null}getVariation(e){return this.getFonts()[e]}addFont(e,t){const i=this.getFonts();i[e]=t;return t}};FP.prototype.availableOptions={images:{type:"object",default:{}},fonts:{type:"object",default:{}}};at=new FP});var qVe,HVe,Fle,WVe,GVe,VVe,jVe,$Ve,Si;var Oh=p(()=>{Z();Ws();Qo();qVe=(r,e,t,i)=>{const o=t*(i*4)+e*4;const n={r:r[o],g:r[o+1],b:r[o+2],a:r[o+3]};return n};HVe=r=>r.a<=254;Fle=(r,e,t)=>{let i=true;for(let o=0;o<t;o++){const n=qVe(r,o,e,t);if(!HVe(n)){i=false;break}}return i};WVe=(r,e,t,i,o=false)=>{let n=0;for(let s=i+1;s<t;s++){if(!Fle(r,s,e)){n=s-i+1}else if(o){break}}return n};GVe=(r,e,t,i,o=false)=>{let n=0;for(let s=i-1;s>=0;s--){if(!Fle(r,s,e)){n=i-s}else if(o){break}}return n};VVe=(r,e,t,i,o)=>{r.beginPath();r.moveTo(e,t);r.lineTo(i,o);r.stroke()};jVe=(r,e,t,i,o="red")=>{r.save();r.strokeStyle=o;VVe(r,t,e,i,e);r.restore()};$Ve=(r,e,t,i,o,n="blue")=>{r.save();r.strokeStyle=n;r.strokeRect(e,t,i,o);r.restore()};Si=class extends Oe{constructor(e){super(e);const t=at.getVariation(this.getFontIdentifier());if(!t){ne.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.set({fontVariation:t});this._metrics=null;this._canvas=H.createCanvas();this._context=this._canvas.getContext("2d");this._isDirty=true}_onOptionsChange(){this._isDirty=true}setOption(e,t,i=true,o=false){super.setOption(e,t,i,o);if(e==="fontIdentifier"&&!o){this.updateFontVariation()}}updateFontVariation(){const e=at.getVariation(this.getFontIdentifier());if(!e){ne.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.setFontVariation(e);return e}setOptions(e={}){this._options={...this._options,...e};this._isDirty=true}_applyTextOptions(e=this._context,t={}){const{fontSize:i,fontVariation:o,lineHeight:n,textColor:s,alignment:a}={...this._options,...t};const{fontStyle:l,fontWeight:u,fontFamily:c}=o.serializeOptions();if(false){e.font=`${l} ${u} ${i}px ${c}`}if(true){e.font=`${l} ${u} ${i}px / ${n} ${c}`}e.fillStyle=s;e.textBaseline="alphabetic";e.textAlign=a||"left"}getTextMetrics(){if(!this._metrics||this._isDirty){this._calculateTextMetrics()}return{...this._metrics}}getSizeValue(){if(!this._metrics||this._isDirty){this._calculateTextMetrics()}return new At(this._metrics.width,this._metrics.height)}fitWidth(e){const t=this.getFontVariation();if(!t){ne.warn("TextDesignFont#fitText: missing font variation");return}this._applyTextOptions(this._context,{fontSize:50});const i=this._context.measureText(this.getText()).width;const o=e/i;const n=Math.floor(o*50);this.setFontSize(n);this._calculateTextMetrics();return this.getTextMetrics()}fitHeight(e){const t=this.getFontVariation();if(!t){ne.warn("TextDesignFont#fitText: missing font variation");return}const i=this._calculateTextMetrics({fontSize:50}).height;const o=e/i;const n=Math.floor(o*50);this.setFontSize(n);this._calculateTextMetrics();return this.getTextMetrics()}_calculateTextMetrics(e={}){const t=this._canvas;const i=this._context;const o={...this._options,...e};const n=this.getText();this._applyTextOptions(i,o);const s=Math.ceil(i.measureText(n).width);const a=Math.floor(s+o.fontSize*2);const l=Math.floor(o.fontSize*3);t.width=a;t.height=l;const u=Math.floor(o.fontSize);const c=Math.floor(l*(3/5));this._applyTextOptions(i,o);i.fillText(n,u,c);const d=i.getImageData(0,0,t.width,t.height).data;const m=GVe(d,a,l,c,this._options.excludeAccents);const h=WVe(d,a,l,c,this._options.excludeAccents);const f=s;const b=m+h;this._metrics={width:f,height:b,ascender:m,descender:h};this._isDirty=false;return{...this._metrics}}draw(e=this._context,t=0,i=0,o,n=false){e.save();if(!this._metrics||this._isDirty){this._calculateTextMetrics()}this._applyTextOptions(e,o);e.fillText(this.getText(),t,i+this._metrics.ascender);if(n){$Ve(e,t,i,this._metrics.width,this._metrics.height);jVe(e,i+this._metrics.ascender,t,t+this._metrics.width)}e.restore()}};Si.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:false}}});var wi;var bd=p(()=>{Z();wi=class extends Oe{};wi.prototype.availableOptions={text:{type:"string",default:""},frame:{type:"object",default:null},font:{type:"object",default:null}}});var en;var Rh=p(()=>{Z();en=class extends Oe{};en.prototype.availableOptions={tintColor:{type:"color",default:X.BLACK},textColor:{type:"color",default:X.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},lineSpacing:{type:"number",default:1},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"}}});var KVe,Hi;var bb=p(()=>{Z();Ws();Rh();({Rectangle:KVe}=se);Hi=class extends Oe{constructor(e){super(e);this.setSize(new At(this.getWidth(),0));this.serverImageSmoothingFix=false}_getFrame(){const e=this.getSize();return new KVe(0,0,e.width,e.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(e){return e.getFrame().clone()}_calculateLayoutElements(){ne.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){if(this._options.elements.length<=0){this.layout()}return this.getElements()}_fontSize(e){ne.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?");return 0}layout(){this.setElements(this._calculateLayoutElements());return this}textFrame(e,t){return e.getFrame().clone()}willRender(e){}didRender(e){}render(e){e.save();this._getLayoutElements().forEach(t=>{const{text:i,frame:o,font:n}=t.serializeOptions();const s=this.getAttributes();n.draw(e,o.x,o.y,{textColor:s.getTextColor().toRGBA(),alignment:s.getAlignment()})});e.restore()}};Hi.prototype.availableOptions={words:{type:"object",default:null},width:{type:"number",default:100},attributes:{type:"configurable",default:new en},shearingAngle:{type:"number",default:0},elements:{type:"array",default:[]},size:{type:"object",default:null}}});var XVe,_b,Un;var Ple=p(()=>{Z();Oh();bd();bb();({Rectangle:XVe}=se);_b=class extends Hi{_calculateLayoutElements(){if(this.getWords().size()<=0){return[]}const{orientation:e,width:t,size:i,relativeRowOffset:o,attributes:n}=this.serializeOptions();const{fontIdentifier:s}=n;const a=this.getWords().joined(3);const l=e===_b.Orientations.Left?[a[0],a[1],a[2]]:[a[1],a[2],a[0]];const u=H.Array.range(0,2).map(ce=>new Si({text:l[ce],fontIdentifier:s,fontSize:60}));const c=u.map(ce=>ce.getSizeValue());const d=c[0].width>c[1].width?0:1;const m=(d+1)%2;u[m].fitWidth(c[d].width);c[m]=u[m].getSizeValue();const h=(c[m].height+c[d].height)/(1-o);const f=new Si({text:l[2],fontIdentifier:s});f.fitHeight(h);const b=f.getSizeValue().width;const _=c[d].width;const y=t/(b+_);const I=y*b;const T=y*_;const D=y*h;const P=o*D;i.set(t,D);const k=H.Array.range(0,3).map(ce=>new Si({text:l[ce],fontIdentifier:s}));k[0].fitWidth(T);k[1].fitWidth(T);k[2].fitWidth(I);const A=e===_b.Orientations.Left?0:I;const Q=e===_b.Orientations.Left?T:0;const R=[A,A,Q];const M=[0,k[0].getSizeValue().height+P,0];const oe=k.map((ce,ue)=>new XVe(R[ue],M[ue],ce.getSizeValue().width,ce.getSizeValue().height));return k.map((ce,ue)=>new wi({text:l[ue],font:k[ue],frame:oe[ue]}))}};Un=_b;ie(Un,"Orientations",{Right:"RIGHT",Left:"LEFT"});Un.prototype.availableOptions={...Hi.prototype.availableOptions,orientation:{type:"string",default:Un.Orientations.Left,available:[Un.Orientations.Right,Un.Orientations.Left]},relativeRowOffset:{type:"number",default:.05}}});var YVe,Ae;var So=p(()=>{Z();({Rectangle:YVe}=se);Ae=class{constructor(e=0,t=0,i=0,o=0){this.top=e;this.left=t;this.bottom=i;this.right=o}multiply(e){this.top*=e;this.left*=e;this.bottom*=e;this.right*=e}toObject(){return{...this}}equals(e,t=0){return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}scale(e=1,t){if(t===void 0){t=e}this.top*=t;this.bottom*=t;this.left*=e;this.right*=e;return this}clone(){return new Ae(this.top,this.left,this.bottom,this.right)}applyToRectangle(e){return new YVe(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}static get ZERO(){return new Ae(0,0,0,0)}}});var Ft;var tn=p(()=>{Z();Oh();So();bd();bb();Ft=class extends Hi{_calculateLayoutElements(){const{attributes:e,imageInsets:t,size:i,width:o}=this.serializeOptions();const n=this.getWords().joined(1)[0]||"";const{fontIdentifier:s}=e;const a=new Si({text:n,fontIdentifier:s});a.fitWidth(this._getTextFrame().width);const l=a.getTextMetrics().height+t.top+t.bottom;i.height=l;const u=this._getTextFrame();const c=new wi({text:n,frame:u,font:a});return[c]}};Ft.prototype.availableOptions={...Hi.prototype.availableOptions,imageInsets:{type:"object",default:new Ae}}});var pl,Qr,PP,rn,s1,Ah,BP,Ble,Mle,ml;var Uu=p(()=>{Z();({Rectangle:pl,Vector2:Qr}=se);PP=(r,e,t,i)=>{r.drawImage(e,t.x,t.y,t.width,t.height,i.x,i.y,i.width,i.height)};rn=(r,e,t,i="source-over",o=false)=>{r.save();r.fillStyle=t.toRGBA();r.globalCompositeOperation=i;r.fillRect(e.x,e.y,e.width,e.height);if(o){r.strokeStyle=t.toRGBA();r.strokeWith=1;r.strokeRect(e.x,e.y,e.width,e.height)}r.restore()};s1=(r,e,t,i,o="source-over",n=false)=>{r.save();r.fillStyle=i.toRGBA();r.globalCompositeOperation=o;t=Math.min(Math.max(t,0),Math.min(e.height,e.width)*.5);const s=e.x;const a=e.x+e.width;const l=e.y;const u=e.y+e.height;r.beginPath();r.moveTo(s+t,l);r.arcTo(a,l,a,u,t);r.arcTo(a,u,s,u,t);r.arcTo(s,u,s,l,t);r.arcTo(s,l,a,l,t);r.closePath();r.fill();if(n){r.stroke()}r.restore()};Ah=(r,e,t,i=4)=>{r.save();r.strokeStyle=t.toRGBA();r.lineWidth=i;r.strokeRect(e.x,e.y,e.width,e.height);r.restore()};BP=(r,e,t,i="source-over")=>{r.save();const o=e.height/2;const n=e.y+o;let s=e.x+o;const a=e.x+e.width;r.fillStyle=t.toRGBA();r.globalCompositeOperation=i;while(s<a){r.beginPath();r.arc(s,n,o,0,2*Math.PI);r.fill();s+=o*4}r.restore()};Ble=(r,e)=>{const t=e.applyToRectangle(r);const{x:i,y:o,width:n,height:s}=r;const a=[pl.FromDiagonalPoints(new Qr(0,0),new Qr(t.x,t.y)),pl.FromDiagonalPoints(new Qr(0,t.y+t.height),new Qr(t.x,s)),pl.FromDiagonalPoints(new Qr(t.x+t.width,t.y+t.height),new Qr(n,s)),pl.FromDiagonalPoints(new Qr(t.x+t.width,0),new Qr(n,t.y))].map(u=>u.translate(i,o));const l=[pl.FromDiagonalPoints(new Qr(t.x,0),new Qr(t.x+t.width,t.y)),pl.FromDiagonalPoints(new Qr(0,t.y),new Qr(t.x,t.y+t.height)),pl.FromDiagonalPoints(new Qr(t.x,t.y+t.height),new Qr(t.x+t.width,s)),pl.FromDiagonalPoints(new Qr(t.x+t.width,t.y),new Qr(n,t.y+t.height))].map(u=>u.translate(i,o));return{corners:a,bars:l,center:t}};Mle=(r,e,t,i)=>{const o=e.naturalWidth||e.width;const n=e.naturalHeight||e.height;const s=Ble(new pl(0,0,o,n),i);const a=Ble(t,i);PP(r,e,s.center,a.center);H.Array.zip(s.corners,a.corners).forEach(([l,u])=>PP(r,e,l,u));H.Array.zip(s.bars,a.bars).forEach(([l,u])=>PP(r,e,l,u))};ml=(r,e,t,i,o="source-atop")=>{r.save();if(i){r.globalAlpha=i.a}r.drawImage(e,t.x,t.y,t.width,t.height);if(i){r.globalAlpha=1}if(i){const n=i.clone();n.a=1;rn(r,t,n,o)}r.restore()}});var hl;var a1=p(()=>{Z();Uu();So();tn();hl=class extends Ft{_getTextColor(){if(this.getAutoAdjustTextColor()&&!this.getIsMasked()){if(this.getBackgroundColor().equals(X.WHITE)){return X.BLACK}return X.WHITE}return this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(e){const t=super._getTextFrameForElement(e);const i=this.getImageInsets();if(this.getIsMasked()||this.getIsUsedInInvertedLayout()){t.y-=i.top}return t}willRender(e){if(false){if(this.serverImageSmoothingFix){e.imageSmoothingEnabled=true}}const t=this.getAttributes();t.setTextColor(this._getTextColor());const i=this.getImage();if(i){const o=this.getCapInsets();const n=this._getFrame();if(o&&!o.equals(Ae.ZERO)){Mle(e,i,n,o)}else{e.drawImage(i,n.x,n.y,n.width,n.height)}rn(e,n,this.getBackgroundColor(),"source-atop",true)}if((this.getIsMasked()||this.getIsUsedInInvertedLayout())&&i){e.save();e.globalCompositeOperation="destination-out"}}didRender(e){super.didRender(e);if(this.getIsMasked()||this.getIsUsedInInvertedLayout()){e.restore()}}};hl.prototype.availableOptions={...Ft.prototype.availableOptions,image:{type:"image",default:null},capInsets:{type:"object",default:new Ae},backgroundColor:{type:"color",default:X.WHITE},autoAdjustTextColor:{type:"boolean",default:true},isMasked:{type:"boolean",default:true},isUsedInInvertedLayout:{type:"boolean",default:false}}});var Wi;var l1=p(()=>{Z();So();Wi=class extends Oe{insetsForWidth(e){return this.getRelativeInsets().clone().scale(e)}static get Small(){return new Wi({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_outfit_bold",relativeInsets:new Ae(.05,.2,.05,.2)})}static get Rectangle(){return new Wi({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_outfit_bold",relativeInsets:new Ae(.05,.05,.05,.05),needsImageSmoothingFix:true})}static get Celebrate1(){return new Wi({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Ae(.05,.2,.05,.2)})}static get Celebrate2(){return new Wi({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Ae(.05,.2,.05,.2)})}};Wi.prototype.availableOptions={image:{type:"image",default:null},imagePath:{type:"string",default:null},relativeInsets:{type:"object",default:new Ae},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:"boolean",default:false}}});var u1;var Lle=p(()=>{Z();So();Ws();u1=class extends Oe{getSize(){const e=this.getRows();const t=this.getWidth();const i=e.length-1;let o=e.reduce((s,a)=>s+a.getSize().height,0);o+=(i+1)*this.getRelativeLineSpacing()*t;const n=this.getRelativeInsets().clone().scale(t);o+=n.top+n.bottom;return new At(t,o)}};u1.prototype.availableOptions={text:{type:"string",default:""},lines:{type:"array",default:[]},relativeInsets:{type:"object",default:new Ae},relativeLineSpacing:{type:"number",default:0},rows:{type:"object",default:[]},background:{type:"object",default:null},width:{type:"number",default:0}}});var Br;var Nu=p(()=>{Z();Br=class{constructor(e){this.words=[];if(e){this.splitIntoWords(e)}}splitIntoWords(e){this.words=e.match(/\S+/g)||[];return[...this.words]}get(){return[...this.words]}getWord(e){return this.words[e]}set(e){this.words=[...e];return this}slice(e,t){return Br.fromWords(this.words.slice(e,t))}getLowerCase(){return this.words.map(e=>e.toLowerCase())}getUpperCase(){return this.words.map(e=>e.toUpperCase())}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce((e,t)=>e+t.length,0)}joined(e){const t=this.size();const i=Math.floor(t/e);const o=t%e;let n=0;let s=0;return H.Array.range(0,e).map(a=>{n=s;const l=i+(a<o?1:0);s=Math.min(n+l,t);return H.Array.range(n,s).reduce((u,c)=>u+(c===n?"":" ")+this.words[c],"")})}static fromWords(e){const t=new Br;t.words=[...e];return t}}});var JVe,ZVe,QVe,Cr;var Fh=p(()=>{Z();Co();So();tn();Rh();Lle();Nu();JVe=10;ZVe=4;QVe=.4;Cr=class extends Oe{constructor(e){super(e);this._relativeInsets=new Ae;this._background=null;this._fontRandomizer=new Ne(0);this._lineNumberRandomizer=new Ne(0);this._wordsPerLineRandomizer=new Ne(0);this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(e){this._seedPool.forEach(t=>t.seed(e))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return JVe}getMinLineCountOfRandom(){return ZVe}getRandomAdditionalLinePercentage(){return QVe}_fontForRow(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(e){return e.replace("\n"," ").replace("	"," ")}_minimumNumberOfLines(e){return Math.ceil(Math.sqrt(e.size()))}_maximumNumberOfLines(e){return e.size()}_calculatedNumberOfLines(e){let t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){const i=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,i)}return Math.min(t,this._maximumNumberOfLines(e))}_randomizedNumberOfWordsPerLine(e,t){if(e>t){ne.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines");return t}const i=H.Array.repeat(1,e);H.Array.range(e,t).forEach(o=>{const n=this._wordsPerLineRandomizer.nextInRange(0,e-1);i[n]+=1});return i}_textLines(e){const t=new Br(e);const i=this._calculatedNumberOfLines(t);const o=this._randomizedNumberOfWordsPerLine(i,t.size());return o.reduce((n,s)=>({index:n.index+s,lines:[...n.lines,t.slice(n.index,Math.min(n.index+s,t.size()))]}),{index:0,lines:[]}).lines}_validTextLines(e){let t=this._textLines(e);let i=0;do{i=H.Array.findIndex(t,o=>o.countNumberOfCharacters()<3);if(i>=0){const o=t[i-1];const n=t[i+1];const s=o?o.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;const a=n?n.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;if(s<a&&o){o.words=[...o.words,...t[i].words];t=[...t.slice(0,i),...t.slice(i+1)]}else if(n){n.words=[...t[i].words,...n.words];t=[...t.slice(0,i),...t.slice(i+1)]}}}while(i>-1&&t.length>1);return t}_modifiedLines(e){return e}_getBackground(){return this._background}generateLayoutData(e,t){const i=this._modifiedText(e);const o=this._modifiedLines(this._validTextLines(i));const n=t*(1-this._relativeInsets.left-this._relativeInsets.right);const s=this._layoutRows(o,n);return new u1({text:i,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:o,rows:s,width:t})}_layoutRows(e,t){return e.map((i,o)=>this._randomLayoutRow(i,o,t,new en({fontIdentifier:this._fontForRow(o,i)})).layout())}_randomLayoutRow(e,t,i,o){return new Ft({words:e,width:i,attributes:o})}};ie(Cr,"defaultFontIdentifiers",[]);ie(Cr,"identifier","textdesign");Cr.prototype.availableOptions={fontIdentifiers:{type:"array",default:[]},relativeLineSpacing:{type:"number",default:0}}});var Sr;var Ph=p(()=>{Z();Co();Ple();tn();a1();Rh();l1();Qo();Fh();Sr=class extends Cr{constructor(...e){super(...e);ie(this,"getImagePaths",()=>{const e=this.getBanderoles();return e&&e.map(t=>t.getImagePath())||[]});ie(this,"onImagesLoaded",()=>{const e=this.getBanderoles();if(e){e.forEach(t=>{const i=at.getImage(t.getImagePath());if(!i){ne.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(i)})}});this._rowTypeLessThan3WordsRandomizer=new Ne(0);this._rowTypeMoreThan3WordsRandomizer=new Ne(0);this._banderolesRandomizer=new Ne(0);this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}generateLayoutData(e,t){this._options.hasMaskedText=false;return super.generateLayoutData(e,t)}_randomLayoutRow(e,t,i,o){if(e.size()<3){const s=this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2)===0;return this._layoutRow(e,i,o,s)}const n=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(n){case 0:return new Un({words:e,width:i,attributes:o,orientation:Un.Orientations.Left});case 1:return new Un({words:e,width:i,attributes:o,orientation:Un.Orientations.Right});case 2:return this._layoutRow(e,i,o,true);case 3:return new Ft({words:e,width:i,attributes:o});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${n}.`)}}_layoutRow(e,t,i,o){if(this.getHasMaskedText()){o=false}if(o){this.setHasMaskedText(true);const n=this._banderolesRandomizer.pickNext(this.getBanderoles());const s=new hl({words:e,width:t,attributes:new en({alignment:"left",fontIdentifier:n.getFontIdentifier()}),image:n.getImage(),imageInsets:n.insetsForWidth(t),capInsets:null,backgroundColor:X.WHITE});if(n.getNeedsImageSmoothingFix()){s.serverImageSmoothingFix=true}return s}return new Ft({words:e,width:t,attributes:i})}};ie(Sr,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);ie(Sr,"identifier","imgly_text_design_blocks");ie(Sr,"defaultBanderoles",[Wi.Rectangle,Wi.Small]);Sr.prototype.availableOptions={...Cr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Sr.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},hasMaskedText:{type:"boolean",default:false},banderoles:{type:"array",default:Sr.defaultBanderoles}}});var _d;var zle=p(()=>{Z();tn();Ph();_d=class extends Sr{constructor(...e){super(...e);this._exclusiveFont=null}generateLayoutData(e,t){this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers());return super.generateLayoutData(e,t)}_fontForRow(e,t){return this._exclusiveFont||super._fontForRow(e,t)}_layoutRow(e,t,i,o){return new Ft({words:e,width:t,attributes:i})}};ie(_d,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]);ie(_d,"identifier","imgly_text_design_blocks_condensed");_d.prototype.availableOptions={...Sr.prototype.availableOptions,fontIdentifiers:{type:"array",default:_d.defaultFontIdentifiers}}});var vb,qu,Gi;var MP=p(()=>{Z();Uu();Ws();bd();bb();({Rectangle:vb}=se);qu=class extends Hi{constructor(...e){super(...e);this.setSize(new At(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new wi({frame:this._getTextFrame()})]}render(e){const t=this._getFrame();const i=this.getType();const o=this.getAttributes();const n=o.getTextColor();const s=t.height/3;let a=new vb(t.x,t.y,t.width,s);let l=new vb(t.x,t.y+s*2,t.width,s);switch(i){case qu.FormType.Rect:rn(e,t,n);break;case qu.FormType.DoubleRect:rn(e,a,n);rn(e,l,n);break;case qu.FormType.DoubleRectFirstPunctuated:BP(e,a,n);rn(e,l,n);break;case qu.FormType.DoubleRectSecondPunctuated:rn(e,a,n);BP(e,l,n);break;case qu.FormType.LongLine:{const u=t.height/2;const c=new vb(t.x,t.y,t.width,u);s1(e,c,c.height*.5,n);break}case qu.FormType.LongAndShortLine:{const u=t.height*.2;const c=u*.75;a=new vb(t.x,t.y+u,t.width,u);const d=t.x+t.width*.25;const m=t.y+t.height-c;l=new vb(d,m,t.width*.5,c);s1(e,a,a.height*.5,n);s1(e,l,l.height*.5,n);break}default:break}}};Gi=qu;ie(Gi,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"});Gi.prototype.availableOptions={...Hi.prototype.availableOptions,height:{type:"number",default:100},type:{type:"string",default:Gi.FormType.Rect,available:H.values(Gi.FormType)}}});var Gs;var LP=p(()=>{Z();tn();MP();Ph();Gs=class extends Sr{_layoutRow(e,t,i,o){return new Ft({words:e,width:t,attributes:i})}_layoutRows(e,t){const i=super._layoutRows(e,t);const o=.032*t;const n=.08*t;const s=new Gi({width:t,height:o,type:Gi.FormType.LongLine,shearingAngle:0}).layout();const a=new Gi({width:t,height:n,type:Gi.FormType.LongAndShortLine,shearingAngle:0}).layout();return[s,...i,a]}};ie(Gs,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]);ie(Gs,"identifier","imgly_text_design_blocks_light");Gs.prototype.availableOptions={...Sr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Gs.defaultFontIdentifiers}}});var vd;var Ule=p(()=>{Z();tn();Rh();LP();vd=class extends Gs{_layoutRows(e,t){return e.map((i,o)=>this._randomLayoutRow(i,o,t,new en({fontIdentifier:this._fontForRow(o,i)})).layout())}_layoutRow(e,t,i,o){return new Ft({words:e,width:t,attributes:i})}};ie(vd,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]);ie(vd,"identifier","imgly_text_design_blocks_light-v3_1_0");vd.prototype.availableOptions={...Gs.prototype.availableOptions,fontIdentifiers:{type:"array",default:vd.defaultFontIdentifiers}}});var eje,c1,Nn;var d1=p(()=>{Z();Oh();Uu();Ws();bd();tn();({Rectangle:eje}=se);c1=class extends Ft{getImageSize(){const e=this.getLeftImage();const t=this.getRightImage();const i=this.getWords();const o=this.getAttributes();const n=o.getFontIdentifier();const s=e?new At(e.width,e.height):new At;const a=i.joined(1)[0];if(!a){return s}const l=new Si({text:a,fontIdentifier:n,fontSize:50});const u=l.getSizeValue();const c=t?2:1;s.scale(c,1);const d=s.clone().fitInWidthWithOther(this._getFrame().width,u);d.scale(1/c,1);return d}_getTextFrame(){const e=super._getTextFrame().clone();const t=this.getImageSize();const i=this.getRightImage();const o=this.getImagePosition();if(!i){if(o===c1.ImagePosition.Left){e.x+=t.width}}else{e.x+=t.width;e.width-=2*t.width}return e}_calculateLayoutElements(){const e=super._calculateLayoutElements();const t=this._getFrame();const i=this.getRightImage();const o=this.getImageSize();const n=this.getImagePosition();const s=this._getTextFrame();const a=this.getAttributes();const l=a.getFontIdentifier();const u=new Si({text:"stickerClock",fontIdentifier:l});u.fitWidth(this._getTextFrame().width);const c=new eje().set(t.x,t.y,o.width,o.height);if(!i&&n===c1.ImagePosition.Right){c.x+=s.width}e.push(new wi({text:"stickerClock",frame:c,font:u}));if(i){const d=e[0];if(d){const m=c.clone();m.translate(d.getFrame().width+m.width,0);e.push(new wi({text:"stickerClock",frame:m,font:u}))}}return e}render(e){const t=this._getLayoutElements();const i=this.getAttributes();const o=i.getTextColor();const n=this.getLeftImage();const s=this.getRightImage();const a=t[0];const l=t[1];const{font:u}=a.serializeOptions();const c=this._getTextFrameForElement(a);u.draw(e,c.x,c.y,{textColor:i.getTextColor().toRGBA(),alignment:i.getAlignment()});if(n){const d=l.getFrame();e.drawImage(n,d.x,d.y,d.width,d.height);rn(e,d,o,"source-atop")}if(t.length>2){const d=t[2];const m=d.getFrame().clone();e.drawImage(s,m.x,m.y,m.width,m.height);rn(e,m,o,"source-atop")}}};Nn=c1;ie(Nn,"ImagePosition",{Left:"LEFT",right:"RIGHT"});Nn.prototype.availableOptions={...Ft.prototype.availableOptions,leftImage:{type:"image",default:null},rightImage:{type:"image",default:null},imagePosition:{type:"string",default:Nn.ImagePosition.Left,available:[Nn.ImagePosition.Left,Nn.ImagePosition.Right]}}});var xb,wo;var zP=p(()=>{Z();tn();d1();l1();Nu();Ph();xb=class extends Sr{_fontForRow(e,t){const i=this.getFontIdentifiers();return i[e%i.length]}_minimumNumberOfLines(e){return Math.max(Math.floor(super._minimumNumberOfLines(e)*.7),1)}_maximumNumberOfLines(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}_randomLayoutRow(e,t,i,o){return this._createSingleRow(xb.RowType.Single,e,i,o)}_createSingleRow(e,t,i,o){const n=o.getFontIdentifier();const s=n==="imgly_font_allison_regular"||n==="imgly_font_handycheera_regular"?new Br().set(t.getLowerCase()):t;switch(e){case xb.RowType.Single:return new Ft({words:s,width:i,attributes:o});case xb.RowType.SingleImage:return new Nn({words:s,width:i,attributes:o});default:ne.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${e}'`);return null}}};wo=xb;ie(wo,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]);ie(wo,"defaultBanderoles",[Wi.Celebrate1,Wi.Celebrate2]);ie(wo,"identifier","imgly_text_design_celebrate");ie(wo,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"});wo.prototype.availableOptions={...Sr.prototype.availableOptions,relativeLineSpacing:{type:"number",default:.01875},fontIdentifiers:{type:"array",default:wo.defaultFontIdentifiers},banderoles:{type:"array",default:wo.defaultBanderoles}}});var wr;var p1=p(()=>{Z();Oh();Nu();Uu();Ws();Rh();bd();bb();wr=class extends Hi{constructor(...e){super(...e);this.setSize(new At(this.getWidth(),this.getHeight()))}_getImageFrame(){const e=this._getTextFrame().clone();const t=this.getImage();if(this.getDrawingModeAspectFit()&&t){const i=Math.min(e.width/t.width,e.height/t.height);const o=t.width*i;const n=t.height*i;e.x+=(e.width-o)/2;e.y+=(e.height-n)/2;e.width=o;e.height=n}return e}_calculateLayoutElements(){return[new wi({text:"",frame:this._getImageFrame(),font:new Si})]}render(e){const t=this.getImage();const i=this._getImageFrame();const o=this.getAttributes();const n=o.getTextColor();ml(e,t,i,n)}};ie(wr,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"});wr.prototype.availableOptions={...Hi.prototype.availableOptions,words:{type:"object",default:new Br},height:{type:"number",default:0},image:{type:"image",default:null},imagePath:{type:"string",default:wr.RowImages.decorative1},drawingModeAspectFit:{type:"boolean",default:false},attributes:{type:"configurable",default:new en}}});var xd;var Nle=p(()=>{Z();Co();tn();d1();p1();l1();Qo();Nu();Ph();zP();xd=class extends wo{constructor(...e){super(...e);ie(this,"getImagePaths",()=>{const e=this.getBanderoles();return[...e&&e.map(t=>t.getImagePath())||[],...this._celebrateTypes]});ie(this,"onImagesLoaded",()=>{const e=this.getBanderoles();if(e){e.forEach(t=>{const i=at.getImage(t.getImagePath());if(!i){ne.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`);return}t.setImage(i)})}});this._celebrateTypes=[wr.RowImages.celebrate1,wr.RowImages.celebrate2,wr.RowImages.celebrate3];this._exclusiveFont=null;this._typeRandomizer=new Ne(0);this._useMaskedRandomizer=new Ne(0);this._seedPool.push(this._typeRandomizer);this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(e,t){const i=this.getFontIdentifiers();return i[e%(i.length-1)]}_layoutRows(e,t){const i=this._typeRandomizer.pickNext(this._celebrateTypes);const o=at.getImage(i);if(!o){ne.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${i}'`)}const n=new wr({width:t,height:t*.5,drawingModeAspectFit:true,image:o}).layout();const s=super._layoutRows(e,t);return[n,...s]}_randomLayoutRow(e,t,i,o){const n=e.countNumberOfCharacters();const s=13;const a=4;if(n<a){o.setFontIdentifier("imgly_font_rasa_regular")}const l=this._useMaskedRandomizer.nextBool(2,1);if(n<s&&l&&!this.getHasMaskedText()){return this._layoutRow(e,i,o,true)}return super._randomLayoutRow(e,t,i,o)}};ie(xd,"identifier","imgly_text_design_celebrate_simple");ie(xd,"defaultFontIdentifiers",["imgly_font_allison_regular","imgly_font_rasa_regular","imgly_font_rasa_500"]);xd.prototype.availableOptions={...wo.prototype.availableOptions,fontIdentifiers:{type:"array",default:xd.defaultFontIdentifiers}}});var Cd;var UP=p(()=>{Z();Cd=class extends Oe{render(e,t,i,o,n){ne.warn("TextDesignBackground#render: Abstract class")}};Cd.prototype.availableOptions={}});var m1,Vs;var qle=p(()=>{Z();Qo();Uu();UP();({Rectangle:m1}=se);Vs=class extends Cd{getImagePaths(){const{topImagePath:e,bottomImagePath:t,leftImagePath:i,rightImagePath:o}=this._options;return[e,t,i,o].filter(n=>n!=="")}render(e,t,i,o,n){const s=i.clone().scale(t.width);const a=t.rectangle(0,0);const l=at.getImage(this.getTopImagePath());const u=at.getImage(this.getLeftImagePath());const c=at.getImage(this.getRightImagePath());const d=at.getImage(this.getBottomImagePath());if(l){const m=l.width/l.height;const h=s.top*this.getTopImageFillRate();const f=h*m;const b=a.width/2;const _=b-f/2;const y=new m1(_,0,f,h);ml(e,l,y,o)}if(d){const m=d.width/d.height;const h=s.bottom*this.getBottomImageFillRate();const f=h*m;const b=a.width/2;const _=b-f/2;const y=new m1(_,a.height-h,f,h);ml(e,d,y,o)}if(u){const m=u.width/u.height;const h=s.left*this.getLeftImageFillRate();const f=h/m;const b=a.height/2;const _=b-f/2;const y=new m1(0,_,h,f);ml(e,u,y,o)}if(c){const m=c.width/c.height;const h=s.right*this.getRightImageFillRate();const f=h/m;const b=a.height/2;const _=b-f/2;const y=new m1(a.width-h,_,h,f);ml(e,c,y,o)}}};Vs.prototype.availableOptions={topImagePath:{type:"string",default:""},leftImagePath:{type:"string",default:""},bottomImagePath:{type:"string",default:""},rightImagePath:{type:"string",default:""},topImageFillRate:{type:"number",default:1},leftImageFillRate:{type:"number",default:1},bottomImageFillRate:{type:"number",default:1},rightImageFillRate:{type:"number",default:1}};Vs.Backgrounds=[new Vs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new Vs({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new Vs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new Vs({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]});var js;var NP=p(()=>{Z();qle();Co();So();tn();Nu();Fh();js=class extends Cr{constructor(...e){super(...e);this._relativeInsets=new Ae(.1,.1,.1,.1);this._alreadyContainsARowWithScriptFont=false;this._backgroundsRandomizer=new Ne(0);this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return H.Array.flatten(Vs.Backgrounds.map(e=>e.getImagePaths()))}_getBackground(){return this._backgroundsRandomizer.pickNext(Vs.Backgrounds)}generateLayoutData(e,t){this._alreadyContainsARowWithScriptFont=false;this._background=this._getBackground();return super.generateLayoutData(e,t)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_fontForRow(e,t){let i=super._fontForRow(e,t);if(i==="imgly_font_petit_formal_script"){if(this._alreadyContainsARowWithScriptFont){i="imgly_font_bungee_inline"}this._alreadyContainsARowWithScriptFont=true}return i}_randomLayoutRow(e,t,i,o){const n=o.getFontIdentifier()==="imgly_font_petit_formal_script";return new Ft({words:n?new Br().set(e.getLowerCase()):e,width:i,attributes:o})}};ie(js,"identifier","imgly_text_design_equal_width");ie(js,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]);js.prototype.availableOptions={...Cr.prototype.availableOptions,fontIdentifiers:{type:"array",default:js.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025}}});var Sd;var Hle=p(()=>{Z();So();NP();Sd=class extends js{constructor(...e){super(...e);this._relativeInsets=new Ae}_getBackground(){return null}};ie(Sd,"defaultFontIdentifiers",["imgly_font_ultra"]);ie(Sd,"identifier","imgly_text_design_equal_width_fat");Sd.prototype.availableOptions={...js.prototype.availableOptions,fontIdentifiers:{type:"array",default:Sd.defaultFontIdentifiers}}});var Re;var Bh=p(()=>{Z();So();Re=class extends Oe{insetsForWidth(e){const t=this.getRelativeInsets().clone();return t.scale(e)}};Re.prototype.availableOptions={imagePath:{type:"string",default:""},minimumHeightRatio:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:true},capInsets:{type:"object",default:new Ae},relativeInsets:{type:"object",default:new Ae}};Re.Box=new Re({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new Ae(.1,.1,.1,.1)});Re.Badge1=new Re({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new Ae(.3,.18,.2,.18)});Re.Badge2=new Re({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new Ae(.3,.18,.2,.18)});Re.Badge3=new Re({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new Ae(.3,.18,.2,.18)});Re.Badge4=new Re({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new Ae(.3,.18,.2,.18)});Re.SpeechBubble1=new Re({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new Ae(.04,.07,.12,.07),capInsets:new Ae(19*3,57*3,41*3,17*3)});Re.SpeechBubble2=new Re({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new Ae(.04,.07,.12,.07),capInsets:new Ae(2*3,35*3,29*3,5*3)});Re.SpeechBubble3=new Re({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new Ae(.165664675,.2,.165664675,.2),minimumHeightRatio:.7});Re.SpeechBubble4=new Re({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new Ae(.124800224,.2,.291200523,.2),minimumHeightRatio:.7});Re.SpeechBubble5=new Re({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new Ae(.114892823,.27,.15984926,.27)});Re.Watercolor1=new Re({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new Ae(.2,.25,.2,.25)});Re.Watercolor2=new Re({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new Ae(.08,.25,.3,.25)});Re.Watercolor3=new Re({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new Ae(.1,.2,.15,.2)})});var Wle=C(h1=>{"use strict";Object.defineProperty(h1,"__esModule",{value:true});h1.arabic=void 0;var tje="\u0620-\u064A\u066E-\u066F\u0671-\u06D5\u06EE-\u06EF\u06FA-\u06FF";var rje="\u0750-\u077F";var ije="[".concat(tje).concat(rje,"]");var oje="[\u064B-\u065F\u0670]";var nje="".concat(ije).concat(oje,"*");h1.arabic=nje});var Vle=C(f1=>{"use strict";Object.defineProperty(f1,"__esModule",{value:true});f1.bengali=void 0;var Gle="[\\u{0980}-\\u{09FF}]";var sje="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]";var aje="\\u{09CD}";var lje="".concat(Gle,"(").concat(aje).concat(Gle,"|").concat(sje,")*");f1.bengali=lje});var $le=C(g1=>{"use strict";Object.defineProperty(g1,"__esModule",{value:true});g1.devanagari=void 0;var jle="[\\u{0900}-\\u{097F}]";var uje="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]";var cje="\\u{094D}";var dje="".concat(jle,"(").concat(cje).concat(jle,"|").concat(uje,")*");g1.devanagari=dje});var Xle=C(y1=>{"use strict";Object.defineProperty(y1,"__esModule",{value:true});y1.gujarati=void 0;var Kle="[\\u{0A80}-\\u{0AFF}]";var pje="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]";var mje="\\u{0ACD}";var hje="".concat(Kle,"(").concat(mje).concat(Kle,"|").concat(pje,")*");y1.gujarati=hje});var Yle=C(b1=>{"use strict";Object.defineProperty(b1,"__esModule",{value:true});b1.hebrew=void 0;var fje="[\u05D0-\u05EA]";var gje="[\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7]";var yje="".concat(fje).concat(gje,"*");b1.hebrew=yje});var Jle=C(_1=>{"use strict";Object.defineProperty(_1,"__esModule",{value:true});_1.japaneseKana=void 0;var bje="[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]";var _je="[\\u{30A0}-\\u{30FF}]";var vje="[\\u{3099}-\\u{309A}]";var xje="[\\u{309B}-\\u{309C}]";var Cje="((".concat(_je,"|").concat(bje,")").concat(vje,"?|").concat(xje,")");_1.japaneseKana=Cje});var Qle=C(v1=>{"use strict";Object.defineProperty(v1,"__esModule",{value:true});v1.kannada=void 0;var Zle="[\\u{0C80}-\\u{0CFF}]";var Sje="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]";var wje="\\u{0CCD}";var Tje="".concat(Zle,"(").concat(wje).concat(Zle,"|").concat(Sje,")*");v1.kannada=Tje});var tue=C(x1=>{"use strict";Object.defineProperty(x1,"__esModule",{value:true});x1.khmer=void 0;var eue="[\\u{1780}-\\u{17FF}]";var Ije="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]";var Eje="\\u{17D2}";var kje="".concat(eue,"(").concat(Eje).concat(eue,"|").concat(Ije,")*");x1.khmer=kje});var rue=C(C1=>{"use strict";Object.defineProperty(C1,"__esModule",{value:true});C1.lao=void 0;var Dje="[\\u{0E80}-\\u{0EFF}]";var Oje="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]";var Rje="".concat(Dje).concat(Oje,"*");C1.lao=Rje});var oue=C(S1=>{"use strict";Object.defineProperty(S1,"__esModule",{value:true});S1.malayalam=void 0;var iue="[\\u{0D00}-\\u{0D7F}]";var Aje="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]";var Fje="\\u{0D4D}";var Pje="".concat(iue,"(").concat(Fje).concat(iue,"|").concat(Aje,")*");S1.malayalam=Pje});var sue=C(w1=>{"use strict";Object.defineProperty(w1,"__esModule",{value:true});w1.myanmar=void 0;var nue="[\\u{1000}-\\u{109F}]";var Bje=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"];var Mje="[".concat(Bje.join(""),"]");var Lje="\\u{1039}";var zje="".concat(nue,"(").concat(Lje).concat(nue,"|").concat(Mje,")*");w1.myanmar=zje});var aue=C(T1=>{"use strict";Object.defineProperty(T1,"__esModule",{value:true});T1.tamil=void 0;var Uje="[\\u{0B80}-\\u{0BFF}]";var Nje="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]";var qje="".concat(Uje).concat(Nje,"*");T1.tamil=qje});var uue=C(I1=>{"use strict";Object.defineProperty(I1,"__esModule",{value:true});I1.telugu=void 0;var lue="[\\u{0C00}-\\u{0C7F}]";var Hje="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]";var Wje="\\u{0C4D}";var Gje="".concat(lue,"(").concat(Wje).concat(lue,"|").concat(Hje,")*");I1.telugu=Gje});var cue=C(E1=>{"use strict";Object.defineProperty(E1,"__esModule",{value:true});E1.thai=void 0;var Vje="[\\u0E00-\\u0E7F]";var jje="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]";var $je="".concat(Vje).concat(jje,"*");E1.thai=$je});var due=C(k1=>{"use strict";Object.defineProperty(k1,"__esModule",{value:true});k1.tibetan=void 0;var Kje="[\\u{0F00}-\\u{0FFF}]";var Xje="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]";var Yje="".concat(Kje).concat(Xje,"*");k1.tibetan=Yje});var mue=C(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:true});Hu.emojiVariation=Hu.keyCap=Hu.countryFlag=void 0;var Jje="[\\u{1F1E6}-\\u{1F1FF}]{2}";Hu.countryFlag=Jje;var Zje="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";Hu.keyCap=Zje;var Qje=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"];var pue="(".concat(Qje.join("|"),")");var e$e="\\u{200D}";var t$e="[\\u{FE0E}\\u{FE0F}]";var r$e="[\\u{1F3FB}-\\u{1F3FF}]";var i$e="".concat(pue,"(").concat(e$e).concat(pue,"|").concat(r$e,"|").concat(t$e,")*");Hu.emojiVariation=i$e});var fue=C((b5t,hue)=>{"use strict";var o$e=Wle();var n$e=Vle();var s$e=$le();var a$e=Xle();var l$e=Yle();var u$e=Jle();var c$e=Qle();var d$e=tue();var p$e=rue();var m$e=oue();var h$e=sue();var f$e=aue();var g$e=uue();var y$e=cue();var b$e=due();var qP=mue();var _$e=[qP.countryFlag,qP.keyCap,qP.emojiVariation,o$e.arabic,n$e.bengali,s$e.devanagari,a$e.gujarati,l$e.hebrew,u$e.japaneseKana,c$e.kannada,d$e.khmer,p$e.lao,m$e.malayalam,h$e.myanmar,f$e.tamil,g$e.telugu,y$e.thai,b$e.tibetan,"."];var v$e=new RegExp("(".concat(_$e.join("|"),")"),"gu");function x$e(r){return r.match(v$e)||[]}hue.exports={splitGraphemes:x$e}});var gue,yue,D1;var HP=p(()=>{gue=v(fue());yue=class{constructor(e){this._context=e;this._lastFontStyle={}}getLines(){let e=[];let t=[];const i=this._lines.length;for(let o=0;o<i;o++){const n=this._lines[o];const s=this._buildWords(n);const a=s.length;for(let l=0;l<a;l++){const u=s[l];const c=t.concat(u).join("").replace(/\s+$/i,"");const d=this._getWidth(c);if(d>this._maxWidth){if(t.length>0){e.push(t.join(""));t=[u]}const m=u.replace(/\s+$/i,"");if(this._getWidth(m)>this._maxWidth){const h=this._splitWord(u);e=e.concat(h.lines);if(h.rest){t=[h.rest]}}}else{t.push(u)}}e.push(t.join(""));t=[]}return e.map(o=>this._trimLine(o,this._context.textAlign))}_trimLine(e,t){return e}_buildWords(e){const t=[];let i="";const o=e.length;for(let n=0;n<o;n++){const s=e[n];i+=s;if(s===" "||s==="-"||n===o-1){t.push(i);i=""}}return t}_splitWord(e){const t={lines:[],rest:null};const i=(0,gue.splitGraphemes)(e);const o=i.length;let n=[];for(let s=0;s<o;s++){const a=i[s];if(this._getWidth(n.concat(a).join(""))>this._maxWidth){if(n.length>0){t.lines.push(n.join(""))}n=[a]}else{n.push(a)}if(s===o-1&&n.length>0){t.rest=n.join("")}}return t}_fontStyleChanged(){if(this._context.font!==this._lastFontStyle){this._lastFontStyle=this._context.font;return true}return false}_getWidth(e){return this._context.measureText(e).width}setText(e){this._text=e;this._lines=e.split("\n")}setMaxWidth(e){this._maxWidth=e}};D1=yue});var WP,bue,GP;var VP=p(()=>{Z();HP();({Vector2:WP}=se);bue=class{constructor(e,t){this._text=e;this._operation=t;this._textOptions={};this.rotation=0;this._createCanvas();this._createTexture()}_createCanvas(){this._canvas=H.createCanvas();this._context=this._canvas.getContext("2d");this._textSplitter=new D1(this._context);this._finalCanvas=H.createCanvas();this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=q.Texture.fromCanvas(this._canvas);this._finalTexture=q.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(e,t){t.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${e.fontSize}px "${this._text.getFontFamily()}"`;if(this._text.getTextMetrics()){t.textBaseline="alphabetic"}else{t.textBaseline="top"}t.textAlign=this._text.getAlignment();t.fillStyle=this._text.getColor().toRGBA();t.strokeStyle=this._text.getOutlineColor().toRGBA();const i=this._text.getOutlineWidth();if(i>0){t.lineWidth=i}}_buildOutputLines(e){this._textSplitter.setText(this._text.getText());this._textSplitter.setMaxWidth(e);return this._textSplitter.getLines().map(t=>{return t.replace(/\s+$/i,"")})}_renderTextLine(e,t,i){const o=this._text.getAlignment();const n=new WP(0,t);switch(o){case"left":n.x=i;break;case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width-i;break}this._context.save();this._context.translate(n.x,n.y);this._context.fillText(e,0,0);this._context.restore();const s=this._text.getOutlineWidth();if(s>0){this._context.miterLimit=2;this._context.strokeText(e,n.x,n.y)}}update(e,t){const i=this.calculateFontStyles(e,t);if(i){const{dimensions:o,lines:n}=this._calculateText(e,i,t);this._renderText(e,o,n,i,t);this._updateFinalTexture()}}_updateFinalTexture(){const{width:e,height:t}=this._canvas;const{rotation:i}=this;const o=Math.cos(i);const n=Math.sin(i);const s=new WP(Math.abs(e*o)+Math.abs(t*n),Math.abs(e*n)+Math.abs(t*o));this._finalCanvas.width=s.x;this._finalCanvas.height=s.y;this._finalContext.save();this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2);this._finalContext.rotate(i);this._finalContext.drawImage(this._canvas,-e/2,-t/2);this._finalContext.restore()}_renderText(e,t,i,o,n){this._canvas.width=t.x;this._canvas.height=t.y;if(this._text.getMaxHeight()){this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)}this._context=this._canvas.getContext("2d");this._context.fillStyle=this._text.getBackgroundColor().toRGBA();this._context.fillRect(0,0,t.x,t.y);this._applyTextOptions(o,this._context);const s=this._padding(n);const a=this._text.getTextMetrics();const l=this._text.getFontSize()*n.y;const u=1/a.unitsPerEm*l;const c=a.ascender*u;for(let d=0;d<i.length;d++){const m=i[d];this._renderTextLine(m,o.topPadding+o.lineHeight*d+s+c,s)}}calculateFontStyles(e,t){const i=this._text.getFontFamily();const o=this._text.getFontSize()*t.y;const n=this._text.getAbsoluteTextHeight(t);const s=n*this._text.getLineHeight();const a=n*(this._text.getLineHeight()-1)/2;const l={fontFamily:i,fontSize:o,lineHeight:s,topPadding:a};if(this._textOptions.fontFamily!==i||this._textOptions.fontSize!==o||this._textOptions.lineHeight!==s){this._textOptions=l}return l}_calculateText(e,t,i){const o=this._text.getMaxWidth()*i.x;this._applyTextOptions(t,this._context);const n=new WP;let s=this._text.getText().split("\n");if(typeof o!=="undefined"){n.x=o;s=this._buildOutputLines(o)}for(let u=0;u<s.length;u++){const c=s[u];n.x=Math.max(n.x,this._context.measureText(c).width)}const{lineHeight:a}=t;n.y=s.length*a;const l=this._padding(i);n.y+=l*2;n.x+=l*2;return{dimensions:n,lines:s}}_padding(e){const t=this._text.getAbsoluteTextHeight(e);const i=.2;return t*i}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(e,t){const i=this.calculateFontStyles(e,t);const{dimensions:o}=this._calculateText(e,i,t);return o}dispose(){if(this._measurementElement){document.body.removeChild(this._measurementElement)}if(this._texture){this._texture.dispose();this._texture=null}if(this._finalTexture){this._finalTexture.dispose();this._finalTexture=null}}};GP=bue});var _ue,Cb;var vue=p(()=>{Z();HP();Ws();Qo();({Vector2:_ue}=se);Cb=class extends Oe{constructor(e){super(e);this._textOptions={};this._createCanvas()}_createCanvas(){this._canvas=H.createCanvas();this._context=this._canvas.getContext("2d");this._textSplitter=new D1(this._context);this._finalCanvas=H.createCanvas();this._finalContext=this._finalCanvas.getContext("2d");this.updateFontVariation()}setOption(e,t,i=true,o=false){super.setOption(e,t,i,o);if(e==="fontIdentifier"&&!o){this.updateFontVariation()}}updateFontVariation(){const e=at.getVariation(this.getFontIdentifier());if(!e){ne.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.setFontVariation(e);return e}_applyTextOptions(e={},t=this._context){const{fontSize:i,fontVariation:o,lineHeight:n,textColor:s,alignment:a}={...this._options,...e};const{fontStyle:l,fontWeight:u,fontFamily:c}=o.serializeOptions();t.font=`${l} ${u} ${i}px "${c}"`;t.fillStyle=s;t.textBaseline="top";t.textAlign=a||"left"}_buildOutputLines(e){this._textSplitter.setText(this.getText());this._textSplitter.setMaxWidth(e);return this._textSplitter.getLines()}_renderTextLine(e,t){const i=this.getAlignment();const o=new _ue(0,t);switch(i){case"center":o.x=this._canvas.width/2;break;case"right":o.x=this._canvas.width;break}this._context.fillText(e,o.x,o.y)}update(){const e=this.calculateFontStyles();if(e){const{dimensions:t,lines:i}=this._calculateText(e);this._dimensions=t;this._renderText(t,i,e)}}draw(e,t=0,i=0){this.update();e.drawImage(this._canvas,t,i,this._dimensions.x,this._dimensions.y)}_renderText(e,t,i){this._canvas.width=e.x;this._canvas.height=e.y;this._context=this._canvas.getContext("2d");this._applyTextOptions(i,this._context);for(let o=0;o<t.length;o++){const n=t[o];this._renderTextLine(n,i.topPadding+i.lineHeight*o)}}getFontFamily(){const e=this.getFontVariation();return e.getFontFamily()}calculateFontStyles(){const e=this.getFontFamily();const t=this.getFontSize();const i=this.getAbsoluteTextHeight();const o=i*this.getLineHeight();const n=i*(this.getLineHeight()-1)/2;const s={fontFamily:e,fontSize:t,textHeight:i,lineHeight:o,topPadding:n};this._textOptions={...s};return s}getTextMetrics(){const e=this.getFontVariation();return e.getTextMetrics()}getAbsoluteTextHeight(){const e=this.getFontSize();const t=this.getTextMetrics();if(t){const i=1/t.unitsPerEm*e;const o=t.ascender*i;const n=t.descender*i;return o+Math.abs(n)}return e*this.getLineHeight()*1.1}_calculateText(e){this._applyTextOptions(e,this._context);const t=new _ue;let i=this.getText().split("\n");let o;if(typeof o!=="undefined"){t.x=o;i=this._buildOutputLines(o)}else{for(let s=0;s<i.length;s++){const a=i[s];t.x=Math.max(t.x,this._context.measureText(a).width)}}const{lineHeight:n}=e;t.y=i.length*n;return{dimensions:t,lines:i}}getDimensions(){const e=this.calculateFontStyles();const{dimensions:t}=this._calculateText(e);return t}fitMaxHeight(){this.update();const e=this.getDimensions();const t=this.getText().split("\n");const i=this.getMaxHeight()/e.y}fitMaxWidth(){const e=this.getDimensions().x;const t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t);this._textOptions.fontSize=this.getFontSize()}fitInFrame(e){this.setMaxWidth(e.width);this.setMaxHeight(e.height);this.fitMaxWidth();this.fitMaxHeight()}getSize(){const e=this.getDimensions();return new At(e.x,e.y)}};Cb.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:true},maxWidth:{type:"number",default:100},maxHeight:{type:"number",default:0},alignment:{type:"string",default:"left",available:["left","center","right"]}}});var Wu;var O1=p(()=>{Z();VP();Oh();vue();bd();a1();Wu=class extends hl{_calculateLayoutElements(){const e=this.getWords();const t=this._getTextFrame();const i=this.getAttributes();const o=i.getFontIdentifier();const n=this.getImageInsets();const s=new Si({text:e.getWord(0),fontIdentifier:o});s.fitWidth(t.width);const a=new wi({text:e.getWord(0),frame:t,font:s});a.setFrame(this._getTextFrameForElement(a));const l=this.getSize();if(this.getSizeToFitContent()||l.height<=1){l.height=n.top+a.getFrame().height+n.bottom}l.height=Math.max(l.height,this.getMinimumHeight());return[a]}_getTextFrameForElement(e){const t=this.getWords();const i=t.getWord(0);const o=this.getAttributes();const n=o.getFontIdentifier();const s=this.getImageInsets();const a=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor());const l=new Cb({text:i,fontIdentifier:n,alignment:o.getAlignment(),lineHeight:1});l.fitInFrame(a);const u=l.getSize();a.height=u.height;let c=u.height*this.getRowScaleFactor();if(this.getSizeToFitContent()){c+=s.top+s.bottom}const d=this._getFrame();const m=o.getAlignment();if(this.getCenteredVertically()){a.y=d.height/2-c/2+s.top}else{switch(m){case"left":a.y=d.height-c-s.bottom;break;case"center":a.y=d.height/2-c/2+c*this.getCenterOffset();a.x=(d.width-a.width)/2;break;case"right":a.x=d.width-a.width-s.right;break;default:break}}return a}render(e){e.save();this._getLayoutElements().forEach(t=>{let{text:i,frame:o}=t.serializeOptions();const n=this.getAttributes();const s=n.getFontIdentifier();const a=new Cb({text:i,fontIdentifier:s,alignment:n.getAlignment(),lineHeight:1,textColor:n.getTextColor().toRGBA()});o=this._getTextFrameForElement(t);a.fitInFrame(o);a.draw(e,o.x,o.y)});e.restore()}};Wu.prototype.availableOptions={...hl.prototype.availableOptions,centerOffset:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:false},textScaleFactor:{type:"number",default:.95},rowScaleFactor:{type:"number",default:1},minimumHeight:{type:"number",default:0},centeredVertically:{type:"boolean",default:false}}});var Mh,qt;var wd=p(()=>{Z();Bh();Co();O1();Qo();Nu();Fh();Mh=class extends Cr{constructor(...e){super(...e);this._rowType=Re.Box;this._alignmentRandomizer=new Ne(0);this._isMaskedRandomizer=new Ne(0);this._seedPool.push(this._alignmentRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[Re.Box.getImagePath()]}_modifiedText(e){return super._modifiedText(e).toLowerCase()}_modifiedLines(e){const t=new Br;t.set([e.reduce((i,o)=>`${i}${i===""?"":"\n"}${o.joined(1)[0]}`,"")]);return[t]}_layoutRows(e,t){const i=super._layoutRows(e,t);const o=i[0];if(o&&this.getSquareLayout()){const n=o.getSize();n.height=n.width}return i}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Mh.ValidAlignments)}_randomLayoutRow(e,t,i,o){const n=this.getAlignment();const s=this._rowType;const a=at.getImage(s.getImagePath());o.setAlignment(n);const l=new Wu({words:e,width:i,attributes:o,image:a,imageInsets:s.insetsForWidth(i),capInsets:s.getCapInsets(),backgroundColor:X.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});if(this._rowType===Re.Box){l.serverImageSmoothingFix=true}const u=l.getSize();if(this.getSquareLayout()){u.height=u.width}else{u.height=Math.max(u.height,u.width*s.getMinimumHeightRatio())}return l}};qt=Mh;ie(qt,"defaultFontIdentifiers",["imgly_font_lexend_bold"]);ie(qt,"Alignment",{Left:"left",Center:"center",Right:"right"});ie(qt,"ValidAlignments",[Mh.Alignment.Left,Mh.Alignment.Center,Mh.Alignment.Right]);ie(qt,"identifier","imgly_text_design_masked");qt.prototype.availableOptions={...Cr.prototype.availableOptions,fontIdentifiers:{type:"array",default:qt.defaultFontIdentifiers},squareLayout:{type:"boolean",default:true}}});var Gu;var xue=p(()=>{Z();Bh();Co();wd();Gu=class extends qt{constructor(...e){super(...e);this._possibleRowTypes=[Re.Badge1,Re.Badge2,Re.Badge3,Re.Badge4];this._rowTypesRandomizer=new Ne(0);this._isMaskedRandomizer=new Ne(0);this._seedPool.push(this._rowTypesRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_randomLayoutRow(e,t,i,o){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes);o.setLineSpacing(.9);const n=super._randomLayoutRow(e,t,i,o);n.set({textScaleFactor:.9});return n}};ie(Gu,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);ie(Gu,"identifier","imgly_text_design_masked_badge");ie(Gu,"ValidAlignments",[qt.Alignment.Center]);Gu.prototype.availableOptions={...qt.prototype.availableOptions,fontIdentifiers:{type:"array",default:Gu.defaultFontIdentifiers}}});var To;var R1=p(()=>{Z();Bh();Co();wd();To=class extends qt{constructor(...e){super(...e);this._possibleRowTypes=[Re.SpeechBubble1,Re.SpeechBubble3];this._rowTypesRandomizer=new Ne(0);this._isMaskedRandomizer=new Ne(0);this._seedPool.push(this._rowTypesRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(e=>e.getImagePath())}_rowTypes(e){return this._possibleRowTypes}_randomLayoutRow(e,t,i,o){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e));o.setLineSpacing(.9);const n=super._randomLayoutRow(e,t,i,o);n.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:true});return n}};ie(To,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]);ie(To,"identifier","imgly_text_design_masked_speech_bubble");To.prototype.availableOptions={...qt.prototype.availableOptions,fontIdentifiers:{type:"array",default:To.defaultFontIdentifiers},squareLayout:{type:"boolean",default:false},alignment:{type:"string",default:"left",available:qt.ValidAlignments}}});var Td;var Cue=p(()=>{Z();Bh();wd();R1();Td=class extends To{constructor(...e){super(...e);this._possibleRowTypes=[Re.SpeechBubble2,Re.SpeechBubble4,Re.SpeechBubble2,Re.SpeechBubble4,Re.SpeechBubble5];this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2);this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}};ie(Td,"defaultFontIdentifiers",["imgly_font_permanent_marker"]);ie(Td,"identifier","imgly_text_design_masked_speech_bubble_comic");Td.prototype.availableOptions={...To.prototype.availableOptions,fontIdentifiers:{type:"array",default:Td.defaultFontIdentifiers}}});var Id;var Sue=p(()=>{Z();O1();wd();Id=class extends qt{_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,i,o){const n=this._alignmentRandomizer.pickNext(qt.ValidAlignments);o.setAlignment(n);return new Wu({words:e,width:i,attributes:o,image:null,backgroundColor:X.WHITE,centerOffset:0,sizeToFitContent:true,isMasked:false,autoAdjustTextColor:false})}};ie(Id,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]);ie(Id,"identifier","imgly_text_design_multiline");Id.prototype.availableOptions={...qt.prototype.availableOptions,fontIdentifiers:{type:"array",default:Id.defaultFontIdentifiers}}});var C$e,A1;var wue=p(()=>{Z();({Rectangle:C$e}=se);A1=class extends Oe{getContentFrame(){const e=this.getFrame().clone();const t=e.width*.1;return e.insetBy(t,t)}intersects(e){return this.getFrame().intersects(e.getFrame())}};A1.prototype.availableOptions={frame:{type:"object",default:new C$e}}});var Tue,qn;var F1=p(()=>{Z();Qo();Uu();UP();wue();({Rectangle:Tue}=se);qn=class extends Cd{constructor(...e){super(...e);this._MAX_TRIES=1e3;this._PRECISION=1e3}render(e,t,i,o,n){const{imagePaths:s,relativeParticleSize:a}=this._options;if(s.length<=0){return}const l=t.width/t.height;const u=new Tue(Math.round(i.left*this._PRECISION),Math.round(i.top*this._PRECISION*l),this._PRECISION,this._PRECISION);u.width-=u.x+Math.round(i.right*this._PRECISION);u.height-=u.y+Math.round(i.bottom*this._PRECISION*l);const c=[];let d=0;let m=0;while(d<this.getParticleCount()&&m<this._MAX_TRIES){const h=a/2;const f=Math.round(h*this._PRECISION);const b=Math.round(h*this._PRECISION*l);const _=Math.floor(this._PRECISION)-f;const y=Math.floor(this._PRECISION)-b;const I=n.nextInRange(f,_);const T=n.nextInRange(b,y);const D=new Tue(I-f,T-b,2*f,2*b);if(!D.intersects(u)&&!this.hasCollision(c,D)){c.push(new A1({frame:D}));d+=1}m+=1}for(let h=0;h<c.length;h++){const f=c[h];const b=n.pickNext(s);const _=at.getImage(b);const y=n.nextInRange(140,230)/255;const I=t.width/this._PRECISION;const T=t.height/this._PRECISION;const D=f.getContentFrame();D.x*=I;D.y*=T;D.width*=I;D.height*=T;const P=o.clone();P.a=y;ml(e,_,D,P,"source-atop")}}hasCollision(e,t){for(let i=0;i<e.length;i++){if(t.intersects(e[i].getFrame())){return true}}return false}};qn.prototype.availableOptions={...Cd.prototype.availableOptions,particleCount:{type:"number",default:50},relativeParticleSize:{type:"number",default:.08},imagePaths:{type:"array",default:[]}}});var Lh;var Iue=p(()=>{Z();F1();Lh=class extends qn{};ie(Lh,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]);Lh.prototype.availableOptions={...qn.prototype.availableOptions,imagePaths:{type:"array",default:[...Lh.Images]},relativeParticleSize:{type:"number",default:.12}}});var zh;var Eue=p(()=>{Z();F1();zh=class extends qn{};ie(zh,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]);zh.prototype.availableOptions={...qn.prototype.availableOptions,imagePaths:{type:"array",default:[...zh.Images]},relativeParticleSize:{type:"number",default:.12}}});var Uh;var kue=p(()=>{Z();F1();Uh=class extends qn{};ie(Uh,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]);Uh.prototype.availableOptions={...qn.prototype.availableOptions,imagePaths:{type:"array",default:[...Uh.Images]}}});var Vu,Wr;var P1=p(()=>{Z();Co();So();tn();d1();p1();Qo();Nu();Fh();Vu=class extends Cr{constructor(...e){super(...e);this._relativeInsets=new Ae(0,0,0,0);this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"];this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_cookie_regular"];this._lineCount=0;this._decorativeRowCreated=false;this._useImageRowRandomizer=new Ne(0);this._rowTypeRandomizer=new Ne(0);this._lineDecorativeTypeRandomizer=new Ne(0);this._seedPool.push(this._useImageRowRandomizer);this._seedPool.push(this._rowTypeRandomizer);this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...Vu.DecoratorImages,...Vu.RowImages]}_fontForRow(e,t){const i=t.countNumberOfCharacters();let o=this.getFontIdentifiers();if(i<4){o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(n)<0)}else if(i<5){o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(n)<0)}return o[e%o.length]}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_modifiedLines(e){this._lineCount=e.length;return e}generateLayoutData(e,t){this._decorativeRowCreated=false;return super.generateLayoutData(e,t)}_randomLayoutRow(e,t,i,o){const n=o.getFontIdentifier();let s=e;switch(n){case"imgly_font_cookie_regular":s=new Br().set(e.getLowerCase());break;case"imgly_font_permanent_marker":s=new Br().set(e.getUpperCase());break;default:break}const a=this.getDecorativeRowsInTheMiddleOnly()&&(t===0||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||a){return new Ft({words:s,width:i,attributes:o})}this._decorativeRowCreated=true;const[l,u]=this._randomDecoratorImages();return new Nn({words:e,width:i,attributes:o,leftImage:l,rightImage:u})}_layoutRows(e,t){const i=super._layoutRows(e,t);if(!this.getDecorationsVisible()){return i}const o=.0625*t;const n=new wr({width:t,height:o,image:at.getImage(this._rowTypeRandomizer.pickNext(Vu.RowImages))}).layout();const s=new wr({width:t,height:o,image:at.getImage(this._rowTypeRandomizer.pickNext(Vu.RowImages))}).layout();return[n,...i,s]}_randomDecoratorImages(){if(this._lineDecorativeTypeRandomizer.nextInRange(0,1)){return Vu.DecoratorImages.slice(0,2).map(e=>at.getImage(e))}return Vu.DecoratorImages.slice(2).map(e=>at.getImage(e))}};Wr=Vu;ie(Wr,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular","imgly_font_montserrat_light"]);ie(Wr,"identifier","imgly_text_design_sunshine");ie(Wr,"RowImages",[wr.RowImages.decorative1,wr.RowImages.decorative2,wr.RowImages.decorative3,wr.RowImages.decorative4]);ie(Wr,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]);Wr.prototype.availableOptions={...Cr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Wr.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3*4},decorationsVisible:{type:"boolean",default:true},decorativeRowsInTheMiddleOnly:{type:"boolean",default:false}}});var ju,fl;var Due=p(()=>{Z();Iue();Eue();kue();Co();So();Qo();P1();ju=class extends Wr{constructor(...e){super(...e);this._relativeInsets=new Ae(.3,.3,.3,.3);this._backgroundRandomizer=new Ne(0);this._decoTypeRandomizer=new Ne(0);this._seedPool.push(this._backgroundRandomizer);this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...Wr.RowImages,...H.Array.flatten(ju.Backgrounds.map(e=>e.getImagePaths())),...ju.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(ju.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return ju.DecoratorImages.slice(0,2).map(e=>at.getImage(e));case 1:case 2:return ju.DecoratorImages.slice(2).map(e=>at.getImage(e));default:ne.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range.");return ju.DecoratorImages.slice(2).map(e=>at.getImage(e))}}};fl=ju;ie(fl,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular","imgly_font_montserrat_light"]);ie(fl,"identifier","imgly_text_design_particles");ie(fl,"Backgrounds",[new Lh,new zh,new Uh]);ie(fl,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]);fl.prototype.availableOptions={...Wr.prototype.availableOptions,fontIdentifiers:{type:"array",default:fl.defaultFontIdentifiers},decorationsVisible:{type:"boolean",default:false},decorativeRowsInTheMiddleOnly:{type:"boolean",default:true}}});var Ed;var Oue=p(()=>{Z();Co();So();MP();Fh();Ed=class extends Cr{constructor(...e){super(...e);this._relativeInsets=new Ae(.1,0,0,0);this._rowTypeRandomizer=new Ne(0);this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(e){return super._modifiedText(e).toUpperCase()}_randomLayoutRow(e,t,i,o){const n=super._randomLayoutRow(e,t,i,o);n.setShearingAngle(this.getShearingAngle());return n}_layoutRows(e,t){const i=super._layoutRows(e,t);const o=H.values(Gi.FormType);const n=30;const s=new Gi({width:t,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout();const a=new Gi({width:t,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout();return[s,...i,a]}};ie(Ed,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);ie(Ed,"identifier","imgly_text_design_rotated");Ed.prototype.availableOptions={...Cr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Ed.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},shearingAngle:{type:"number",default:-.1}}});var B1;var Rue=p(()=>{So();p1();Qo();P1();B1=class extends Wr{constructor(...e){super(...e);this._relativeInsets=new Ae(0,.3,0,.3)}_layoutRows(e,t){const i=super._layoutRows(e,t);if(!this.getDecorationsVisible()){return i}const o=25;const n=new wr({width:t,height:o,image:at.getImage(this._rowTypeRandomizer.pickNext(Wr.RowImages))}).layout();const s=new wr({width:t,height:o,image:at.getImage(this._rowTypeRandomizer.pickNext(Wr.RowImages))}).layout();return[n,...i,s]}};ie(B1,"identifier","imgly_text_design_sunshine-v3_1_0")});var kd;var Aue=p(()=>{Z();Bh();wd();R1();kd=class extends To{constructor(...e){super(...e);this._possibleRowTypes=[Re.Watercolor1,Re.Watercolor2,Re.Watercolor3]}};ie(kd,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular"]);ie(kd,"identifier","imgly_text_design_watercolor");kd.prototype.availableOptions={...To.prototype.availableOptions,fontIdentifiers:{type:"array",default:kd.defaultFontIdentifiers},alignment:{type:"string",default:qt.Alignment.Center,available:qt.ValidAlignments}}});var S$e,M1,jP;var Fue=p(()=>{Z();Co();a1();O1();Ws();Uu();({Rectangle:S$e}=se);M1=1e3;jP=class{constructor(){this._layoutData=null;this._layout=null;this._text="";this._seed=0;this._debugMode=false;this.randomizer=new Ne}createLayout(e,t,i){this._layout=e;this._text=t;this._seed=i;e.seed(i);this._layoutData=e.generateLayoutData(t,M1)}calculateAspect(){if(!this._layoutData){ne.warn("TextDesignRenderer#calculateAspect: No layout data");return 1}return this._layoutData.getSize().aspect()}draw(e,t,i,o){const n=this._layoutData;if(this._layoutData){const s=new At(M1,M1/t.aspect());const a=t.width/M1;const l=n.getRelativeInsets().clone().scale(s.width);const u=n.getRelativeLineSpacing()*s.width;let c=l.top;e.save();this.randomizer.seed(this._seed);const d=n.getBackground();if(d){d.render(e,t,n.getRelativeInsets(),o?X.WHITE:i,this.randomizer)}e.scale(a,a);n.getRows().forEach(m=>{e.save();const h=m.getAttributes();e.transform(1,m.getShearingAngle(),0,1,l.left,c);h.setTextColor(o?X.WHITE:i.clone());h.setTintColor(o?X.WHITE:i.clone());if(m instanceof hl||m instanceof Wu){m.setBackgroundColor(o?X.WHITE:i.clone());m.setIsUsedInInvertedLayout(o)}if(this._debugMode){m._debugMode=true}m.willRender(e);m.render(e);m.didRender(e);if(this._debugMode){const f=m._getFrame();const b=m._getTextFrame();Ah(e,f,X.GREEN);Ah(e,b,X.BLUE);m._getLayoutElements().forEach(_=>{const y=_.getFrame();const I=m._getTextFrameForElement(_);Ah(e,y,new X(1,1,0));Ah(e,I,new X(0,1,1))})}c+=m.getSize().height+u;e.restore()});if(this._debugMode){Ah(e,new S$e(0,0,s.width,s.height),X.RED)}e.restore()}}}});var $u,Nh,L1;var Pue=p(()=>{Z();Dh();Ph();zle();LP();Ule();zP();Nle();NP();Hle();wd();xue();R1();Cue();Sue();Due();Oue();P1();Rue();Aue();Co();Ws();Qo();Fue();({Vector2:$u}=se);Nh=class extends qs{constructor(e,t){super(e,t);this._isDisposed=false;this._renderer=new jP;this._canvas=H.createCanvas();this._context=this._canvas.getContext("2d");this._texture=q.Texture.fromCanvas(this._canvas);this._sprite.setTexture(this._texture);this._aspect=1;this._isLayoutDirty=true;if(this.getSeed()<0){this.setSeed(Ne.TimeSeed())}}seed(e){this.setSeed(e||Ne.TimeSeed());this._isLayoutDirty=true}_updateLayout(){const e=this.getLayout();if(!e){return null}this._renderer.createLayout(e,this.getText(),this.getSeed());this._aspect=this._renderer.calculateAspect();this._isLayoutDirty=false;return true}applyTransform(e){super.applyTransform(e);const t={};if(this._options.dimensions){t.width=e.applyToRelativeSize(this.getWidth())}this.set(t,false)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2;this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2;this.setRotation(t);break}}update(e,t){const i=this._isLayoutDirty;if(this._isDisposed||i&&!this._updateLayout()){return}const o=this.getWidth()*t.min()/e.getTextureScale();const n=o/this._aspect;const s=new $u(o,n);const a=new $u(Math.round(o*2),Math.round(n*2)).clamp(new $u(1,1),new $u(Infinity,Infinity));const l=e.getRenderer();const u=l.getMaxDimensions()||Infinity;if(a.x>u){a.x=u;a.y=Math.round(a.x/this._aspect)}if(a.y>u){a.y=u;a.x=Math.round(a.y*this._aspect)}const c=H.ensureCanvasDimensions(this._canvas,a);if(i||c){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);this._renderer.draw(this._context,new At(a.x,a.y),this.getColor(),this.getInverted());this.setDimensions(s);this._texture.getBaseTexture().update();if(l.isOfType("webgl")){l.updateTexture(this._texture.getBaseTexture())}}super.update(e,t);this._applyFlip()}_applyFlip(){const e=this._sprite.getScale();const{flipHorizontally:t,flipVertically:i}=this._options;if(t&&e.x>0||!t&&e.x<0){e.x*=-1}if(i&&e.y>0||!i&&e.y<0){e.y*=-1}this._sprite.setScale(e)}_optionEquals(e,t){if(e==="layout"){const{layout:i}=this._options;if(!i&&t||!t&&i){return false}if(!t.constructor||!i.constructor){return false}if(i.constructor.identifier!==t.constructor.identifier){return false}return true}return super._optionEquals(e,t)}serializeOptions(e,t=false){if(e&&this.getPadding()<0){const o=e.indexOf("padding");if(o>-1){e.splice(o,1)}}const i=super.serializeOptions(e,t);if(!e)i.type="textdesign";return i}_getTexture(){return this._texture}canBeFlippedHorizontally(){return false}canBeDuplicated(){return true}canMaskCanvas(){return true}canAdjustPadding(){return true}dispose(){this._isDisposed=true;this._texture.dispose();this._sprite.dispose()}};Nh.Layouts={TextDesignBlocks:Sr,TextDesignBlocksCondensed:_d,TextDesignBlocksLight:Gs,TextDesignCelebrate:wo,TextDesignCelebrateSimple:xd,TextDesignEqualWidth:js,TextDesignEqualWidthFat:Sd,TextDesignMasked:qt,TextDesignMaskedBadge:Gu,TextDesignMaskedSpeechBubble:To,TextDesignMaskedSpeechBubbleComic:Td,TextDesignMultiline:Id,TextDesignWatercolor:kd,TextDesignSunshine:Wr,TextDesignParticles:fl,TextDesignRotated:Ed};Nh.LegacyLayouts={TextDesignBlocksLightV310:vd,TextDesignSunshineV310:B1};Nh.AssetManager=at;Nh.prototype.availableOptions={id:{type:"string",default:()=>H.getUUID()},position:{type:"vector2",default:new $u(.5,.5)},dimensions:{type:"vector2",default:$u.NULL},anchor:{type:"vector2",default:new $u(0,0)},pivot:{type:"vector2",default:new $u(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false},layout:{type:"object",default:null,setter(r){this._isLayoutDirty=true;return r}},text:{type:"string",default:"",setter(r){this._isLayoutDirty=true;return r}},color:{type:"color",default:X.BLACK,setter(r){this._isLayoutDirty=true;return r}},padding:{type:"number",default:.01,minValue:.01},width:{type:"number",default:.8},inverted:{type:"boolean",default:false,setter(r){this._isLayoutDirty=true;return r}},seed:{type:"number",default:-1}};L1=Nh});var $P,z1,U1;var Bue=p(()=>{Z();Dh();VP();({Vector2:$P}=se);z1=class extends qs{constructor(...e){super(...e);this._textRenderer=new GP(this,this._operation);this._textRenderer.rotation=this.getRotation();this._sprite.setTexture(this._textRenderer.getFinalTexture());this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(e,t=false){const i=super.serializeOptions(e,t);if(!e)i.type="text";return i}getDOMStyle(e,t){const i=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:`${i}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:`${this.getAbsoluteTextHeight(t)*this.getLineHeight()}px`,color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(e){const t=this.getFontSize()*e.y;const i=this.getTextMetrics();if(i){const o=1/i.unitsPerEm*t;const n=i.ascender*o;const s=i.descender*o;return n+Math.abs(s)}return t*this.getLineHeight()*1.1}getDimensions(e,t){return this._textRenderer.getDimensions(e,t)}applyFlip(e){super.applyFlip(e);let{rotation:t}=this._options;switch(e){case"horizontal":t+=(Math.PI-t)*2;this.setRotation(t);break;case"vertical":t+=(Math.PI/2-t)*2;this.setRotation(t);break}}applyTransform(e){super.applyTransform(e);this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},false)}applyRotation(e){super.applyRotation(e);const t=(e+360)%360;const i=this._operation.getInputDimensions();if(t===90||t===270){this.setMaxWidth(this.getMaxWidth()/i.x*i.y);this.setFontSize(this.getFontSize()/i.y*i.x)}}setOption(e,t){const{flipHorizontally:i,flipVertically:o}=this._options;if(e==="rotation"){let n=t;if(i){n=Math.PI*2-n}if(o){n=Math.PI*2-n}this._options.rotation=n;if(this._textRenderer){this._textRenderer.rotation=n}this._rotation=n;this.emit("update");return}super.setOption(e,t)}getOption(e){if(e==="rotation"){return this._rotation}return super.getOption(e)}getHitTestDisplayObject(){return this._hitTestSprite}update(e,t){this._sprite.setVisible(this._options.visible);if(!this._options.visible)return;this._textRenderer.update(e,t);const i=this._textRenderer.getFinalTexture();const o=i.getBaseTexture();o.update();const n=e.getRenderer();if(n.isOfType("webgl")){n.updateTexture(i.getBaseTexture())}super.update(e,t);this._sprite.setRotation(0);this._textRenderer.getTexture().getBaseTexture().update();this._hitTestSprite.setRotation(this._rotation);this._hitTestSprite.updateTransform();this._applyFlip()}_applyFlip(){const e=this._sprite.getScale();const{flipHorizontally:t,flipVertically:i}=this._options;if(t&&e.x>0||!t&&e.x<0){e.x*=-1;this.setRotation(this._rotation)}if(i&&e.y>0||!i&&e.y<0){e.y*=-1;this.setRotation(this._rotation)}this._sprite.setScale(e)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose();this._textRenderer.dispose();this._hitTestSprite.dispose();this._sprite.dispose()}canBeFlippedHorizontally(){return false}canAdjustPadding(){return false}};z1.prototype.availableOptions={id:{type:"string",default:()=>H.getUUID()},fontSize:{type:"number",default:.1},characterSpacing:{type:"number",default:0},lineHeight:{type:"number",default:1.1},fontIdentifier:{type:"string"},fontFamily:{type:"string",default:"Times New Roman"},fontWeight:{type:"*",default:"normal"},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},outlineWidth:{type:"number",default:0},outlineColor:{type:"color",default:X.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},verticalAlignment:{type:"string",default:"top",available:["top","center","bottom"]},color:{type:"color",default:new X(1,0,0,1)},backgroundColor:{type:"color",default:X.TRANSPARENT},position:{type:"vector2",default:new $P(.5,.5)},anchor:{type:"vector2",default:new $P(0,0)},pivot:{type:"vector2",default:new $P(.5,.5)},rotation:{type:"number",default:0},text:{type:"string",required:true},maxWidth:{type:"number",default:.5},maxHeight:{type:"number",default:0},visible:{type:"boolean",default:true},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};z1.type="text";U1=z1});var KP,gl,Mue;var Lue=p(()=>{Z();Dh();AP();Rle();Pue();Bue();({Vector2:KP}=se);gl=class extends Xe{constructor(...e){super(...e);this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling);this._onSpriteUpdate=this._onSpriteUpdate.bind(this);this._maskCanvas=H.createCanvas();const t=this._options.sprites.slice();t.forEach(i=>{this.removeSprite(i);this.addSprite(i)})}getSpritesOfType(e){return this._options.sprites.filter(t=>t instanceof e)}rotate(e){this._options.sprites.forEach(t=>{t.applyRotation(e)})}flip(e){this._options.sprites.forEach(t=>{t.applyFlip(e)})}_onSpriteUpdate(e,t){this.emit("update",this);this.setDirty(true)}_applyRotation(e,t){this._options.sprites.forEach(i=>i.applyRotation(e,t))}transform(e){this._options.sprites.forEach(t=>t.applyTransform(e))}scale(e){this._options.sprites.forEach(t=>t.applyScale(e))}serializeOption(e,t=false){if(e==="sprites"){return this._options.sprites.map(i=>{return i.serializeOptions(void 0,t)})}return super.serializeOption(e,t)}createSticker(e){return new n1(this,e)}createText(e){return new U1(this,e)}createBrush(e){return new gd(this,e)}createTextDesign(e){return new L1(this,e)}addSprite(e){this._options.sprites.push(e);const t=this.getSmoothDownscaling();if(e.setSmoothDownscaling)e.setSmoothDownscaling(t);this._container.addChild(e.getDisplayObject());this.setDirty(true);e.on("update",this._onSpriteUpdate);this.emit("update",this,this._options.sprites)}removeSprite(e){const{sprites:t}=this._options;const i=t.indexOf(e);if(i!==-1){e.off("update",this._onSpriteUpdate);this._container.removeChild(e.getDisplayObject());t.splice(i,1);this.setDirty(true);return true}return false}_getOrientatedStageSize(){const e=this._sdk.getSprite().getTexture().getFrame();const t=this._sdk.getOperationsStack().getByIdentifier("orientation");if(t){const o=t?t.getRotation():0;const n=o===270||o===90;return n?new KP(e.height,e.width):new KP(e.width,e.height)}const i=this._sdk.getOperationsStack().getByIdentifier("output");if(i){return i.getOutputResolution()}return new KP(e.width,e.height)}_render(e){const t=this._container;const{sprites:i}=this._options;const o=e.getDimensions().clone().floor();let n=new q.Container;n.addChild(this._sprite);return Promise.all(i.map(s=>s.validateSettings())).then(()=>{i.forEach(s=>s.update(this._sdk,o))}).then(()=>{this._renderTexture.clear();i.forEach(s=>{if(s.getInverted&&s.getInverted()){this._renderTexture.render(n);this._renderTexture.render(this._renderMaskedSprite(s.getDisplayObject(),s.getColor?s.getColor():X.WHITE,s.getPadding?s.getPadding():-1));n=new q.Container}else{n.addChild(s.getDisplayObject())}});this._renderTexture.render(n);t.addChild(this._sprite);i.forEach(s=>t.addChild(s.getDisplayObject()))})}_renderMaskedSprite(e,t,i){const o=this._maskCanvas;const n=e.getWorldTransform();const s=this._getOrientatedStageSize();H.ensureCanvasDimensions(o,s);const a=o.getContext("2d");a.clearRect(0,0,o.width,o.height);a.save();a.fillStyle=t.toRGBA();if(i<0){a.fillRect(0,0,s.x,s.y)}else{const c=Math.abs(e.getWidth()/e.getScale().x);const d=Math.abs(e.getHeight()/e.getScale().y);const m=c*i;a.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);a.fillRect(-m,-m,c+m*2,d+m*2)}a.restore();a.save();a.globalCompositeOperation="destination-out";e._renderCanvas({getCurrentRenderTarget:()=>{return{getPixelRatio:()=>1}},beforeDraw:c=>{const d=e.getWidth();const m=e.getHeight();const h=e.getScale();const f=h.x<0;const b=h.y<0;c.translate(d,m);c.scale(f?-1:1,b?-1:1);c.translate(-d,-m)},getContext:()=>a});a.restore();const l=new q.Container;const u=new q.Sprite(q.Texture.fromCanvas(o));l.addChild(u);return l}takeSpriteToFront(e){const{sprites:t}=this._options;const i=t.indexOf(e);if(i===-1)return;H.moveArrayItem(t,i,t.length-1);const o=e.getDisplayObject();this._container.removeChild(o);this._container.addChild(o);this.setDirty(true)}getSpritesAtPosition(e,t){const i=[];this._options.sprites.forEach(c=>c.update(this._sdk,t));const o=this._sdk.getSprite();const n=o.getWorldTransform().applyInverseToVector(e);const{width:s,height:a}=o.getTexture().getFrame();const l=o.getAnchor().clone().multiply(-s,-a);n.subtract(l);const u=this._options.sprites.slice(0).reverse();for(let c=0,d=u.length;c<d;c++){const m=u[c];if(m.getHitTestDisplayObject().isAtPosition(n)){i.push(m)}}return i}setDirtyForRenderer(e,t,i){super.setDirtyForRenderer(e,t,i);this._options.sprites.forEach(o=>{o.setDirtyForRenderer(e,t,i)})}dispose(){super.dispose();this._options.sprites.forEach(e=>{e.dispose()})}};gl.StickerSprite=n1;gl.TextSprite=U1;gl.BrushSprite=gd;gl.TextDesignSprite=L1;gl.identifier="sprite";gl.prototype.availableOptions={sprites:{type:"array",default:[],setter(r,e){r=r.map((t,i)=>{if(t instanceof qs){return t}const o={...t};delete o.type;switch(t.type){case"text":return new U1(this,o);case"sticker":return new n1(this,o);case"brush":return new gd(this,o);case"textdesign":return new L1(this,o);default:{ne.error(this.constructor.name,`Invalid sprite type: ${t.type}`);return null}}});if(!e){if(this._options.sprites){const t=this._options.sprites.slice();t.forEach(i=>{i.dispose();this.removeSprite(i)})}r.forEach(t=>{this.addSprite(t)})}return r}},smoothDownscaling:{type:"boolean",default:false}};Ie.Operations.SpriteOperation=gl;Mue=gl});var zue,Uue,Nue;var que=p(()=>{Z();({Vector2:zue}=se);Uue=class{constructor(e,t){this._options=t;this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()};this._inputDimensions=e.getInputDimensions(false);this._rotationDelta=t.rotation-e.getRotation();this._deltaCos=Math.cos(this._rotationDelta);this._deltaSin=Math.sin(this._rotationDelta);this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions);this._newAbsoluteSize=t.end.clone().subtract(t.start).multiply(this._inputDimensions);this._absoluteStartDiff=this._oldOptions.start.clone().subtract(t.start).multiply(this._inputDimensions);this._scaleRatio=e.calculateScale(t.rotation)/e.calculateScale();this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize);this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}applyToRelativePoint(e){const t=this._oldOptions.start;const i=this._oldOptions.end;const o=t.clone().add(i.clone().subtract(t).divide(2));const n=o.multiply(this._inputDimensions);const s=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2));const a=n.clone().add(s);const l=a.clone().subtract(this._inputDimensions.clone().divide(2));const u=new zue(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos);const c=this._inputDimensions.clone().divide(2).add(u);const d=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(d).divide(this._newAbsoluteSize)}applyToRelativeSize(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(e){e=e.clone().multiply(this._scaleRatio);if(this._options.textureScale){e.multiply(this._textureScaleFactor)}return e}scaleSize(e,t="y"){return e/this._sizeFactor[t]}applyToRotation(e){return(e+this._rotationDelta)%(Math.PI*2)}invert(){const e=this._options.start.clone();const t=this._options.end.clone();const i=this._inputDimensions;const o=-this._rotationDelta;const n=Math.cos(o);const s=Math.sin(o);const a=this._oldAbsoluteSize;const l=this._newAbsoluteSize;const u=e.clone().subtract(t).multiply(i);const c=1/this._scaleRatio;const d=new zue(1/this._sizeFactor.x,1/this._sizeFactor.y);const m=1/this._textureScaleFactor;const h=this._oldOptions;this._oldOptions=this._options;this._options=h;this._inputDimensions=i;this._rotationDelta=o;this._deltaCos=n;this._deltaSin=s;this._oldAbsoluteSize=l;this._newAbsoluteSize=a;this._absoluteStartDiff=u;this._scaleRatio=c;this._sizeFactor=d;this._textureScaleFactor=m;return this}};Nue=Uue});var XP,qh,Hue;var Wue=p(()=>{Z();que();({Vector2:XP}=se);qh=class extends Xe{_render(e){this._sprite.setRotation(0);const t=e.getDimensions();const{start:i,end:o,rotation:n,textureScale:s}=this._options;const a=o.clone().subtract(i);const l=a.clone().divide(2);const u=i.clone().add(l);const c=this.calculateScale();const d=c*s;const m=t.clone().multiply(d).multiply(l);this._sprite.setAnchor(u);this._sprite.setRotation(n);this._sprite.setScale(d,d);this._sprite.setPosition(m);this._renderTexture.render(this._container);return Promise.resolve()}calculateScale(e=this._options.rotation){const t=this.getInputDimensions(false);const i=new XP(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e)));const o=t.clone().subtract(i.clone()).divide(2).abs();let n=1;if(o.y>o.x){n=o.y*2/t.y+1}else{n=o.x*2/t.x+1}return n}getNewDimensions(e){const{start:t,end:i,textureScale:o}=this._options;const n=this.calculateScale();const s=e.clone().multiply(o*n).multiply(i.clone().subtract(t));return s.round()}flip(e){const{start:t,end:i}=this._options;const o=t.clone();if(e==="horizontal"){t.set(1-i.x,t.y);i.set(1-o.x,i.y)}else if(e==="vertical"){t.set(t.x,1-i.y);i.set(i.x,1-o.y)}}rotate(e){const{start:t,end:i}=this._options;const o=(e+360)%360;const n=Math.floor(o/90);for(let s=0;s<n;s++){const a=t.clone();t.set(1-i.y,a.x);i.set(1-a.y,i.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled();this.setEnabled(true)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,true)}};qh.identifier="transform";qh.prototype.availableOptions={start:{type:"vector2",default:new XP(0,0)},end:{type:"vector2",default:new XP(1,1)},textureScale:{type:"number",default:1},rotation:{type:"number",default:0}};qh.TransformChange=Nue;Ie.Operations.TransformOperation=qh;Hue=qh});var Sb,Gue;var Vue=p(()=>{St();Z();dd();Sb=class extends Xe{constructor(...e){super(...e);this._watermarkImage=null;this._watermarkTexture=null;this._loadWatermarkImage=()=>{if(!this._watermarkImage){if(!(this._options.watermarkURI instanceof window.Image)){const e={value:this._options.crossOrigin,cors:true};return gi.loadImage(this._options.watermarkURI,e).then(t=>{this._watermarkImage=t})}this._watermarkImage=this._options.watermarkURI}return Promise.resolve()};this._setWatermarkalignment=(e,t)=>{const i=Math.min(t.x,t.y)*H.clamp(this._options.inset,0,1);switch(this._options.alignment){case"center":this._watermarkSprite.setPosition(new he(t.x-e.x,t.y-e.y).divide(2));break;case"top-left":this._watermarkSprite.setPosition(new he(i,i));break;case"top-right":this._watermarkSprite.setPosition(new he(t.x-e.x-i,i));break;case"bottom-left":this._watermarkSprite.setPosition(new he(i,t.y-e.y-i));break;case"bottom-right":this._watermarkSprite.setPosition(new he(t.x-e.x-i,t.y-e.y-i));break;default:this._watermarkSprite.setPosition(new he(0,0));break}};this._watermarkSprite=new q.Sprite;this._watermarkSprite.setAnchor(0,0);this._container.addChild(this._watermarkSprite)}_render(e){const{alpha:t,size:i}=this._options;return this._loadWatermarkImage().then(()=>{if(this._watermarkImage){if(!this._watermarkTexture){this._watermarkTexture=q.Texture.fromImage(this._watermarkImage);this._watermarkSprite.setTexture(this._watermarkTexture)}const o=e.getDimensions();const{width:n,height:s}=this._watermarkImage;const a=H.resizeVectorToFit(new he(n,s),o.clone().multiply(H.clamp(i,0,1)));this._setWatermarkalignment(a,o);this._watermarkSprite.setWidth(a.x);this._watermarkSprite.setHeight(a.y);this._watermarkSprite.setAlpha(t);if(this._renderTexture){this._renderTexture.render(this._container)}}return Promise.resolve()})}dispose(){super.dispose();this._watermarkSprite.dispose()}};Sb.identifier="watermark";Sb.prototype.availableOptions={watermarkURI:{type:"string",required:true},alignment:{type:"string",default:"top-right"},inset:{type:"number",default:"0.05"},size:{type:"number",default:"0.2"},alpha:{type:"number",default:1},crossOrigin:{type:"string",default:"anonymous"}};Ie.Operations.WatermarkOperation=Sb;Gue=Sb});var w$e;var jue=p(()=>{Z();mne();bne();zae();Nae();Hae();Xae();ele();nle();ale();ule();ple();yle();Ole();Lue();Wue();Vue();w$e=[pne,yne,Lae,qae,Kae,Qae,ole,sle,dle,gle,Dle,Mue,Hue,Gue,lle,Uae];Ie.AllOperations=w$e});var $s=p(()=>{jue();sb();sb()});var $ue;var Kue=p(()=>{$ue=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]},{fontFamily:"Lexend",variations:[{identifier:"imgly_font_lexend_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_lexend_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Outfit",variations:[{identifier:"imgly_font_outfit_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_outfit_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}]}]});var Xue;var Yue=p(()=>{Xue=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Allison",variations:[{identifier:"imgly_font_allison_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_allison_regular.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:890,descender:-380}}]},{fontFamily:"Cookie",variations:[{identifier:"imgly_font_cookie_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_cookie_regular.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:789,descender:-320}}]},{fontFamily:"Lexend",variations:[{identifier:"imgly_font_lexend_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_lexend_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Outfit",variations:[{identifier:"imgly_font_outfit_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_outfit_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}]}]});var Jue;var Zue=p(()=>{Jue=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:true},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:false,lockDimensions:true},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]});var Que,ece;var tce=p(()=>{$s();Kue();Yue();Zue();Que=[];if(typeof Ie.Operations.SpriteOperation!=="undefined"){Que.push(Ie.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush)}ece={TRANSFORM_RATIO_CATEGORIES:Jue,FONTS:$ue,TEXT_DESIGN_FONTS:Xue,BRUSHES:Que}});var T$e,rce;var ice=p(()=>{Qy();T$e={...fh,LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"};rce=T$e});var Et;var oce=p(()=>{tce();ice();Et={EVENTS:rce,DEFAULTS:ece}});function I$e(){const{userAgent:r,appVersion:e}=navigator;if(e.indexOf("MSIE")!==-1){return e.match(/MSIE\s+?([0-9]+)/i)[1]}if(r.indexOf("Trident")!==-1){return r.match(/rv:([0-9]+)/i)[1]}return false}var nce;var sce=p(()=>{nce={getIEVersion:I$e}});var E$e,N1,k$e,Ti;var ace=p(()=>{$s();nh();Ln();wn();sce();E$e=Ie.Utils;({Vector2:N1}=Ie.Math);k$e={getInnerDimensionsForElement(r){const e=new N1(r.offsetWidth,r.offsetHeight);const t=window.getComputedStyle(r,null);e.x-=parseInt(t.getPropertyValue("padding-left"),10);e.x-=parseInt(t.getPropertyValue("padding-right"),10);e.y-=parseInt(t.getPropertyValue("padding-top"),10);e.y-=parseInt(t.getPropertyValue("padding-bottom"),10);return e},getEventPosition(r){let e=r.clientX;let t=r.clientY;if(r.type.indexOf("touch")!==-1){if(!r.touches.length)return;e=r.touches[0].clientX;t=r.touches[0].clientY}return new N1(e,t)},createTransparentPatternCanvas(){const r=document.createElement("canvas");const e=r.getContext("2d");r.width=10;r.height=10;e.fillStyle="white";e.fillRect(0,0,r.width,r.height);e.fillStyle="#cccccc";e.fillRect(0,0,r.width/2,r.height/2);e.fillRect(r.width/2,r.height/2,r.width,r.height);return r},supportsMSBlob(){const r=document.createElement("canvas");const e=typeof r.msToBlob!=="undefined";st(r);return e},translate(r,e,t={}){let i=this.fetch(r,e);if(!i){ne.info("Utils#translate",`Unable to translate \`${e}\``);return null}for(const o in t){i=i.replace(`\${${o}}`,t[o])}return i},fetch(r,e,t){e=e.replace(/\[(\w+)]/g,".$1");e=e.replace(/^\./,"");const i=e.split(".");for(let o=0;o<i.length;o++){const n=i[o];r=r[n];if(!r){break}}if(typeof r==="undefined"){return false}return r},isMobile(){const r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))},select(r,e,t=null){if(!t)t=o=>o;const i=[];e.forEach(o=>{r.forEach(n=>{const s=t(n);if(s===o){i.push(n)}})});return i},getJSONP(r){const e=new Yo(r);return e.load()},cloneCategories(r,e){return r.map(t=>{t=E$e.clone(t);t[e]=t[e].slice(0);return t})},mergeCategories(r,e,t){r=this.cloneCategories(r,t);let i=null;e.forEach(o=>{r.forEach(n=>{if(o.identifier===n.identifier){i=n}});if(!i){r.push(o)}else{i[t]=i[t].concat(o[t])}});return r},wrapFiltersInCategories(r,e){return r.map(t=>{let i=t;if(!(e in i)){i={identifier:`imgly_filters_wrapped-${t.identifier}`,displayFlat:true,[e]:[t]}}return i})},getStyleObject(r){const e=window.getComputedStyle(r);const t={};for(const i in e){const o=e.getPropertyValue(i);const n=i.replace(/-([a-z])/g,(s,a)=>a.toUpperCase());if(o!==""){t[n]=o}}return t},styleElement(r,e){for(const t in e){r.style[t]=e[t]}},debounce(r,e,t){let i;return function(...o){const n=()=>{i=null;if(!t)r.apply(this,o)};const s=t&&!i;clearTimeout(i);i=setTimeout(n,e);if(s)r.apply(this,o)}},getScrollbarWidth(){const r=document.createElement("div");r.style.visibility="hidden";r.style.width="100px";r.style.msOverflowStyle="scrollbar";document.body.appendChild(r);const e=r.offsetWidth;r.style.overflow="scroll";const t=document.createElement("div");t.style.width="100%";r.appendChild(t);const i=t.offsetWidth;r.parentNode.removeChild(r);return e-i},findIntegerFraction(r,e=100){let t=Number.MAX_VALUE;let i=0;let o=0;let n=1;let s=1;for(let a=0;a<e;a++){const l=n/s-r;if(l<0){n++}else if(l>0){s++}else{return new N1(n,s)}const u=Math.abs(n/s-r);if(u<t){t=u;i=n;o=s}}return new N1(i,o)},toFixed(r,e=2){const t=r.toFixed(e);return parseFloat(t)},capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)},flipObject(r){const e={};for(const t in r){e[r[t]]=t}return e},Browser:nce};Ti=k$e});var YP,Je,Z3t,wb,Q3t,ezt,dt,Ku,JP,ge,tzt,qe,rzt,izt,ozt;var St=p(()=>{$s();Qy();rh();Ln();oce();ace();({Base64:YP}=Ie);({Color:Je}=Ie);({ColorMatrix:Z3t}=Ie.Math);({EventEmitter:wb}=Ie);({EXIF:Q3t}=Ie);({OptionType:ezt}=Ie);dt=Ie.Utils;({RenderType:Ku}=Ie);({ImageFormat:JP}=Ie);ge=Ie;({UniformType:tzt}=Ie);({Vector2:qe}=Ie.Math);({Rectangle:rzt}=Ie.Math);({Range:izt}=Ie.Math);ozt=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Vy()});var Hh,Dd;var ZP=p(()=>{St();Hh=class{constructor(e,t,i=false){this._ui=e;this._options=t;this._categoriesById={};this._filtersByIdentifier={identity:ge.Operations.FilterOperation.Filters.IdentityFilter};this._categories=Ti.wrapFiltersInCategories(al.DEFAULTS.FILTERS.slice(0),Hh.CATEGORY_ITEMS_PROPERTY);this._customAssetsAllowed=i||e.getEditor().getSDK()._l.areCustomAssetsAllowed();if(this._customAssetsAllowed&&this._options.categories){this._options.categories=Ti.wrapFiltersInCategories(this._options.categories,Hh.CATEGORY_ITEMS_PROPERTY)}this._initCategories()}instantiateFilterWithIdentifier(e){const t={value:this._ui._options.crossOrigin,cors:true};const i=this.getFilterByIdentifier(e);if(!i){return Promise.reject(new Error(`Unknown filter with identifier \`${e}\`!`))}if(!(i.prototype instanceof ge.Operations.FilterOperation.Filter)){const{lutImage:o,resolution:n,horizontalTileCount:s,verticalTileCount:a}=i;let{lightColor:l,darkColor:u}=i;if(l&&u){l=Je.fromHex(l);u=Je.fromHex(u);return Promise.resolve(new ge.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:l,darkColor:u}))}let c;if(this._ui.getPreloader){c=this._ui.getPreloader().getAsset(o)}let d;if(c){d=Promise.resolve(c)}else{d=gi.loadImage(this._ui.getAssetPath(o),t)}return d.then(()=>{return gi.loadImage(this._ui.getAssetPath(o),t).then(m=>{return new ge.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:m,resolution:n,horizontalTileCount:s,verticalTileCount:a})})})}return Promise.resolve(new i)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories){if(this._options.replaceCategories){this._categories=Ti.wrapFiltersInCategories(this._options.categories,Hh.CATEGORY_ITEMS_PROPERTY)}else{this._categories=Ti.mergeCategories(this._categories,this._options.categories,Hh.CATEGORY_ITEMS_PROPERTY)}}if(this._customAssetsAllowed&&this._options.availableFilters){const t=[];this._categories.forEach(i=>{const o=i.filters.filter(n=>this._options.availableFilters.indexOf(n.identifier)!==-1);if(o.length>0){t.push({identifier:i.identifier,defaultName:i.defaultName,filters:o})}});this._categories=t}const e={identifier:"all",defaultName:"All",visible:false,filters:this._categories.length<=0?[]:this._categories.map(t=>t.filters).reduce((t,i)=>t.concat(i))};this._categories.unshift(e);this._categoriesById.all=e;this._categories.forEach(t=>{this._categoriesById[t.identifier]=t});e.filters.forEach(t=>{this._filtersByIdentifier[t.identifier]=t})}getFiltersForCategory(e){if(!this._categoriesById[e]){throw new Error(`Unknown filter category '${e}'`)}return this._categoriesById[e].filters}getItemsByCategory(e){return this.getFiltersForCategory(e)}getFilterByIdentifier(e){return this._filtersByIdentifier[e]}getCategories(){return this._categories}getCategoryByIdentifier(e){return this._categoriesById[e]}};Dd=Hh;ie(Dd,"CATEGORY_ITEMS_PROPERTY","filters")});var Tb;var lce=p(()=>{$s();Tb=class extends Oe{};Tb.prototype.availableOptions={fontFamily:{type:"string",required:true},variations:{type:"array",required:true}}});var D$e,Od;var QP=p(()=>{$s();D$e={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"};Od=class extends Oe{getLabel(){let e=D$e[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic";break}return e}};Od.prototype.availableOptions={identifier:{type:"string",required:true},fontFamily:{type:"string",required:true},fontWeight:{type:"*",default:400},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},provider:{type:"string",available:["google","file"]},filePath:{type:"string"},default:{type:"boolean",default:false},font:{type:"object"}}});var ei;var Xu=p(()=>{St();lce();QP();Ln();XO();ei=class{constructor(e,t){this._ui=e;this._options=t;this._fonts=[];this._variationsByIdentifier={};this._fontsByFontFamily={};this._initFonts()}_initFonts(){const{fonts:e,replaceFonts:t,availableVariations:i,isTextDesign:o}=this._options;let n=true;if(true){n=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed()}if(e&&n){e.forEach(({variations:l},u)=>{if(l){l.forEach((c,d)=>{if(Fa[c.identifier]){const m=ws(c.identifier,true);e[u].variations[d].identifier=m;const{fontFamily:h}=Et.DEFAULTS.FONTS.find(f=>f.variations.some(b=>b.identifier===m));e[u].fontFamily=h}})}})}let s=o?Et.DEFAULTS.TEXT_DESIGN_FONTS:Et.DEFAULTS.FONTS;if(n){if(t){s=e}else{s=s.concat(e||[])}}let a;s=s.map(l=>{const{fontFamily:u}=l;let{variations:c}=l;if(n&&i){c=c.filter(m=>i.indexOf(m.identifier)!==-1)}if(c.length===0)return null;const d=new Tb({fontFamily:u});c=c.map(m=>{const h=new Od(m);h.setFontFamily(u);h.setFont(d);if(m.default&&!a){a=h}if(h.getTextMetrics()==null){ne.warn(`Missing font metrics for ${h.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`)}this._variationsByIdentifier[h.getIdentifier()]=h;return h});d.setVariations(c);this._fontsByFontFamily[u]=d;return d}).filter(l=>l);if(!a){[a]=s[0].getVariations()}this._defaultVariation=a;this._fonts=s}getFonts(){return this._fonts}getFontByFontFamily(e){return this._fontsByFontFamily[e]}getVariationByIdentifier(e){return this._variationsByIdentifier[ws(e)]}getVariationsByIdentifier(){return{...this._variationsByIdentifier}}getDefaultVariation(){return this._defaultVariation}}});var on;var Wh=p(()=>{St();on=class{constructor(e,t={}){this._ui=e;this._options=t;this._defaultLayouts=ge.Operations.SpriteOperation.TextDesignSprite.Layouts;this._legacyLayouts=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts;this._layouts=[];this._init()}_init(){const{availableLayouts:e}=this._options;const t={...this._defaultLayouts,...this._legacyLayouts};this._layouts=Object.keys(t).map(i=>({identifier:t[i].identifier,layout:t[i]}));if(e){e.push(...Object.values(this._legacyLayouts).map(i=>i.identifier));this._layouts=this._layouts.filter(i=>e.indexOf(i.identifier)>=0)}}getLayoutByIdentifier(e){const t=dt.Array.find(this._layouts,i=>i.identifier===e);return t&&t.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}});var Rd;var eB=p(()=>{St();Rd=class{static downloadDataURL(e,t="photoeditorsdk-export"){const i=this.createBlobURLFromDataURL(e);const o=this.getExtensionFromDataURL(e);const n=document.createElement("a");n.download=`${t}.${o}`;n.href=i;document.body.appendChild(n);n.click();document.body.removeChild(n)}static downloadMSBlob(e,t="photoeditorsdk-export"){if(navigator.msSaveBlob){navigator.msSaveBlob(e,`${t}.png`)}}static getExtensionFromDataURL(e){const t=e.split(",")[0].split(":")[1].split(";")[0];return t.split("/").pop()}static createBlobURLFromDataURL(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array){return e}const t=YP.decode(e.split(",")[1]);const i=e.split(",")[0].split(":")[1].split(";")[0];const o=new ArrayBuffer(t.length);const n=new Uint8Array(o);for(let a=0;a<t.length;a++){n[a]=t[a]}const s=new window.Blob([o],{type:i});return window.URL.createObjectURL(s)}}});var q1;var uce=p(()=>{St();eB();q1=class{constructor(e,t,i){this._sdk=e;this._options=t;this._download=i}export(){const e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(t=>{if(this._download){this._downloadData(e,t)}return t})}_downloadData(e,t){switch(e){case Ku.DATAURL:Rd.downloadDataURL(t,this._options.fileBasename);break;case Ku.MSBLOB:Rd.downloadMSBlob(t,this._options.fileBasename);break}}_getRenderType(){const e=this._options;if(e.type!==Ku.IMAGE||!this._download){return e.type}if(Ti.supportsMSBlob()){return Ku.MSBLOB}return Ku.DATAURL}}});var H1;var cce=p(()=>{St();H1=class{constructor(e,t,i){this._editor=e;this._sdk=t;this._mediator=i;this._available=this._sdk.getOperations();this._map={};this._stack=this._sdk.getOperationsStack();this._preferredOrder=this._editor.getOptions().editor.operationsOrder;this._fixStack()}exists(e){return!!this._map[e]}add(e){const{identifier:t}=e.constructor;e.on("update",()=>{this._mediator.emit(Et.EVENTS.OPERATION_UPDATED,e)});const i=this._preferredOrder.indexOf(t);if(i===-1){throw new Error(`EditorOperations#add: \`${t}\` does not appear in \`operationsOrder\``)}this._stack.set(i,e);this._map[t]=e;this._mediator.emit(Et.EVENTS.OPERATION_CREATED,e)}remove(e,t=true){const i=typeof e==="object"?e.constructor.identifier:e;const o=this._stack.getStack();e=this.get(i);delete this._map[i];const n=o.map(s=>s.constructor.identifier).indexOf(i);if(n!==-1){this._stack.removeAt(n);for(let s=n+1;s<o.length;s++){const a=o[s];if(!a)continue;a.setDirty(true)}if(t){this._mediator.emit(Et.EVENTS.OPERATION_REMOVED,e)}}}get(e){return this._map[e]}getOrCreate(e,t={}){if(this._map[e]){const n=this._map[e];n.set(t,false);return n}const i=this._available[e];const o=new i(this._sdk,t);this.add(o);return o}getStack(){return this._stack}reset(){this._map={}}_fixStack(){const e=this._stack.getStack().slice();this._stack.clear();e.forEach(t=>{this.add(t)})}}});var W1;var dce=p(()=>{St();W1=class{constructor(e,t,i){this._image=e;this._maxPixels=t;this._maxDimensions=i}needsResize(){const e=new qe(this._image.width,this._image.height);const t=e.x*e.y;const i=t>this._maxPixels;const o=this._maxDimensions!==null&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return i||o}resize(){let e=null;let t=null;const i=this._maxDimensions;return new Promise((o,n)=>{window.setTimeout(()=>{const s=new qe(this._image.width,this._image.height);const a=s.clone();if(a.x*a.y>this._maxPixels){a.copy(this._getDimensionsByMaxPixels());e="maxMegaPixels"}if(i!==null&&(a.x>i||a.y>i)){const l=Math.min(i/a.x,i/a.y);a.multiply(l);e="maxDimensions"}a.floor();t=this._createResizedImageCanvas(a);o({canvas:t,dimensions:a,reason:e})},1e3)})}_createResizedImageCanvas(e,t=e){const i=this._image;const o=document.createElement("canvas");o.width=e.x;o.height=e.y;const n=e.clone().subtract(t).divide(2);const s=o.getContext("2d");s.drawImage(i,0,0,i.width,i.height,n.x,n.y,t.x,t.y);return o}_getDimensionsByMaxPixels(){const e=this._image;const t=this._maxPixels;const i=e.width/e.height;const o=e.height/e.width;return new qe(Math.sqrt(t*i),Math.sqrt(t*o)).floor()}}});var O$e,R$e,Ib;var pce=p(()=>{QP();O$e=30;R$e="abcdefghijklmnopqrstuvwxzy";Ib=class{constructor(e){this._fontVariation=e||new Od({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"});this._createRuler()}_createRuler(){this._ruler=document.createElement("div");this._ruler.innerText=R$e;document.body.appendChild(this._ruler);this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      display: inline-block;
      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} ${O$e}px ${this._fontVariation.getFontFamily()};
    `}setFontVariation(e){this._fontVariation=e;this._setRulerStyle()}getWidth(){return!this._ruler?-1:this._ruler.offsetWidth}dispose(){if(this._ruler){this._ruler.parentNode.removeChild(this._ruler);this._ruler=null}}}});var mce,A$e,F$e,G1;var hce=p(()=>{pce();mce=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Vy();A$e=50;F$e=5e3;G1=class{constructor(e){this._fontVariation=e;this._defaultFontRuler=new Ib;this._customFontRuler=new Ib(this._fontVariation)}observe(){const e=mce();return new Promise((t,i)=>{const o=window.setInterval(()=>{const n=this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth();if(n){window.clearInterval(o);return t()}if(mce()-e>=F$e){const s=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);s.font=this._fontVariation;return i(s)}},A$e)})}dispose(){this._defaultFontRuler.dispose();this._customFontRuler.dispose()}}});var Gh;var tB=p(()=>{$s();hce();Gh=class{constructor(e){this._ui=e;this._fonts=[];this._observers=[]}add(e){this._fonts.push(e)}load(){if(this._fonts.length===0){return Promise.resolve()}this._observers=[];this._fonts.forEach(e=>{this._observers.push(new G1(e))});return H.executePromises(this._observers.map(e=>e.observe()))}dispose(){this._observers.forEach(e=>e.dispose())}}});var V1;var fce=p(()=>{tB();V1=class extends Gh{load(){return Promise.resolve()}}});var P$e,j1;var gce=p(()=>{tB();P$e={italic:"i"};j1=class extends Gh{load(){if(this._fonts.length){this._addStylesheetTag()}return super.load()}_addStylesheetTag(){const e=this._getFamiliesString();const t=document.createElement("link");t.rel="stylesheet";t.href=`https://fonts.googleapis.com/css?family=${e}`;const i=document.getElementsByTagName("head")[0];i.appendChild(t)}_getFamiliesString(){const e={};this._fonts.forEach(i=>{const o=i.getFontFamily();const n=i.getFontStyle();const s=i.getFontWeight();e[o]=e[o]||[];if(typeof s!=="undefined"){e[o].push(`${s}${P$e[n]||""}`)}else{e[o].push(400)}});const t=[];for(const i in e){const o=e[i];const n=o.length?`:${o.join(",")}`:"";const s=i.replace(" ","+")+n;t.push(s)}return t.join("|")}}});var Yu;var $1=p(()=>{fce();gce();Yu=class{constructor(e,t){this._ui=e;this._fonts=t;this._loadedFonts=[]}setFonts(e){this._fonts=e}needsToLoad(){for(let e=0;e<this._fonts.length;e++){let t;this._fonts[e].getVariations().forEach(i=>{t=t||i.getProvider()});if(!t)continue;return true}}fontLoaded(e){const t=e.getFontFamily();return this._loadedFonts.indexOf(t)!==-1}setFontLoaded(e){if(!this.fontLoaded(e)){const t=e.getFontFamily();this._loadedFonts.push(t)}}load(){const e=this._fonts;const t={google:new j1(this._ui),file:new V1(this._ui)};const i=()=>{for(const n in t){const s=t[n];s.dispose()}};e.filter(n=>!this.fontLoaded(n)).forEach(n=>{n.getVariations().forEach(s=>{const a=s.getProvider();if(!a)return;const l=t[a];l.add(s)})});const o=[];for(const n in t){o.push(t[n].load())}return Promise.all(o).then(()=>{i();e.forEach(n=>{this.setFontLoaded(n)})}).catch(n=>{i();throw n})}}});var K1;var yce=p(()=>{St();K1=class{constructor(e,t){this._ui=e;this._options=t;this._brushes=[];this._brushesById={};this._addBrushes(Et.DEFAULTS.BRUSHES);const{brushes:i,replaceBrushes:o,availableBrushes:n}=this._options;if(this._options.brushes){this._addBrushes(i,o)}if(n){this._brushes=this._brushes.filter(s=>n.indexOf(s.identifier)!==-1)}}_addBrushes(e,t){if(t){this._brushes=[];this._brushesById={}}e.forEach(i=>{this._brushes.push(i);this._brushesById[i.identifier]=i})}getBrushByIdentifier(e){return this._brushesById[e]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}});var bce,_ce;var vce=p(()=>{bce=class{constructor(){this._assetsByGroupId={}}addAsset(e,t,i=false){if(!this._assetsByGroupId[e]){this._assetsByGroupId[e]=[t]}else if(i){this._assetsByGroupId[e].unshift(t)}else{this._assetsByGroupId[e].push(t)}}setAssets(e,t){this._assetsByGroupId[e]=t}getAssets(e){this._assetsByGroupId[e]=this._assetsByGroupId[e]||[];return this._assetsByGroupId[e]}};_ce=bce});var rB,Ju;var X1=p(()=>{St();$s();vce();Qy();nh();rB="imgly_sticker_custom";Ju=class{constructor(e,t,i){this._ui=e;this._options=t;this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new _ce;this._categoriesById={};this._categories=[];this._stickersById={};this._customStickerCanvas=H.createCanvas();this.reload()}reload(){this._categoriesById={};this._categories=[];this._stickersById={};const e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(al.DEFAULTS.STICKER_CATEGORIES);const{categories:t,replaceCategories:i}=this._options;if(e&&this._options.categories){this._addCategories(t,i)}else{this._updateCategoriesMap();this._updateAllCategory()}if(e){const o=this._dynamicAssetsLibrary.getAssets("sticker");if(o.length>0){const n=this._createCustomStickerCategory(o);this._addCategories([n],false,true)}}}loadExternal(e){const t=new Yo(e);return t.load().then(i=>{this._addCategories(i.categories,this._options.replaceCategories)})}_addCategories(e,t=false,i=false){if(t){this._categories=e.slice(0)}else if(i){this._categories=this._mergeCategories(e,this._categories)}else{this._categories=this._mergeCategories(this._categories,e)}this._updateCategoriesMap();this._updateAllCategory()}_mergeCategories(e,t){e=Ti.cloneCategories(e,"stickers");for(const i of t){let o=false;for(const n of e){if(i.identifier===n.identifier){for(const s of i.stickers){let a=false;for(const l of n.stickers){if(s.identifier===l.identifier){Object.assign(l,s);a=true;break}}if(!a){n.stickers.push(s)}}o=true;break}}if(!o){e.push(i)}}return e}_updateCategoriesMap(){this._categoriesById={};this._categories.forEach(e=>{this._categoriesById[e.identifier]=e});this._categories.forEach(e=>{e.stickers.forEach(t=>{this._stickersById[t.identifier]=t})});if(typeof this._options.availableStickers!=="undefined"&&this._options.availableStickers!==null){this._categories.forEach(e=>{if(e.identifier!==rB){e.stickers=e.stickers.filter(t=>this._options.availableStickers.indexOf(t.identifier)!==-1)}});this._categories=this._categories.filter(e=>e.stickers.length>0)}this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(e=>e.stickers).reduce((e,t)=>e.concat(t),[])};this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(e){const t=this._customStickerCanvas;const i=t.getContext("2d");i.save();const o=62;const n=o/e.width;const s=n*e.height;t.width=o;t.height=o;i.clearRect(0,0,e.width,e.height);i.translate(0,.5*(t.height-s));i.scale(n,n);i.drawImage(e,0,0);const a=t.toDataURL("image/png");i.restore();return{data:a,width:o,height:s}}addCustomStickerFromImage(e,t,i="none"){const o=y=>{const I=this._ui.getEditor().getSDK();const T=I.getRenderer();const D=new qe(y.width,y.height);const P=this._ui.getEditor().getMaxMegapixels()*1e6;let k=T.getMaxDimensions();const A=D.x*D.y>P;const Q=k!==null&&(D.x>k||D.y>k);if(A){const M=y.width/y.height;const oe=y.height/y.width;k=new qe(Math.sqrt(P*M),Math.sqrt(P*oe)).floor().max()}const R=D.clone();if(A||Q){if(D.x/D.y>1){R.x=k;R.y=k/D.x*D.y}else{R.x=k/D.y*D.x;R.y=k}}return R};const n=(y,I)=>{const T=y.x/y.y;if(T>1){return new qe(I,I/T)}return new qe(I*T,I)};const s=e.src.substring(0,14)==="data:image/svg";const a=this._ui.getEditor().getSDK();e=a.correctExifOrientation(e);const l=n(new qe(e.width,e.height),2048);const u=s?l:o(e);const c=this._customStickerCanvas;const d=c.getContext("2d");d.save();const m=this.renderStickerThumbnailFromImage(e);if(s){if(e.width>e.height){c.width=2048;c.height=2048/e.width*e.height}else{c.height=2048;c.width=2048/e.height*e.width}e.width=c.width;e.height=c.height}else{c.width=u.x;c.height=u.y;d.scale(u.x/e.width,u.y/e.height)}d.drawImage(e,0,0,e.width,e.height);const h=c.toDataURL();d.restore();const f={identifier:H.generateUUID(),defaultName:t||"",tintMode:i,images:{mediaThumb:{uris:[m.data],rawData:true,width:m.width,height:m.height},mediaBase:{uris:s?[h,e.src]:[h],rawData:true,isSVG:s,width:u.x,height:u.y}}};const b=this._dynamicAssetsLibrary;b.addAsset("sticker",f,true);const _=b.getAssets("sticker");if(_.length===1){const y=this._createCustomStickerCategory(_);this._addCategories([y],false,true)}else{this.getCategory(rB).stickers=_;this._updateAllCategory()}this._updateCategoriesMap()}_createCustomStickerCategory(e){return{identifier:rB,defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:true},stickers:e}}getStickersForCategory(e){if(!this._categoriesById[e]){throw new Error(`Unknown sticker category '${e}'`)}return this._categoriesById[e].stickers}getStickerByIdentifier(e){return this._stickersById[e]}getCategories(e=false){if(e){return[this._allCategory].concat(this._categories)}return this._categories}getCategory(e){return this._categoriesById[e]}static getURLForSticker(e,t="base"){const{images:i}=e;const o=t==="base"?i.mediaBase||i.mediaThumb:i.mediaThumb;const n=o.uris||[o.uri];if(true){if(!Ti.Browser.getIEVersion()){const a=n.filter(l=>/\.svg$/i.test(l));return a.length?a[0]:n[0]}}const s=n.filter(a=>!/\.svg$/i.test(a));return s.length?s[0]:n[0]}}});var xce,iB,Ad;var oB=p(()=>{St();$1();yce();ZP();Xu();X1();xce=v(Pm());if(typeof ge.Operations.SpriteOperation!=="undefined"){iB=ge.Operations.SpriteOperation.BrushSprite}Ad=class{constructor(e,t){this._editor=e;this._ui=this._editor.getUI();this._data=t;this._filterManager=new Dd(this._ui,this._getOptions("filter"));this._stickerManager=new Ju(this._ui,this._getOptions("sticker"));this._brushManager=new K1(this._ui,this._getOptions("brush"));this._fontManager=new ei(this._ui,this._getOptions("text"))}_getOptions(e){const{controls:t}=this._editor;let i={};if(t&&t.get(e)){i=t.get(e).defaultOptions}const o=this._editor.getOptions();return dt.deepDefaults({},o.editor.controlsOptions[e]||{},i)}deserialize(){return this._validateVersion().then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_validateVersion(){if(this._data.version!==this.constructor.version){return Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`))}return Promise.resolve()}_deserializeInputImage(){return new Promise((e,t)=>{const{data:i,type:o}=this._data.inputImage;if(i&&o){const n=new window.Image;n.addEventListener("load",()=>{this._editor.setImage(n);e()});n.src=`data:${o};base64,${i}`}else{e()}})}async _deserializeOperations(){const{operations:e}=this._data;return(0,xce.default)(e,async t=>this._deserializeOperation(t))}_deserializeOperation(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}_deserializeCropOperation(e){const{options:t}=e;let{rotation:i}=t;const o=qe.fromObject(t.start);const n=qe.fromObject(t.end);if(i>Math.PI){i-=Math.PI*2}const s={start:o,end:n};if(typeof i!=="undefined"){s.rotation=i}const a=this._editor.operations.getOrCreate("transform");this._editor.broadcastTransform(a,s);a.set(s);return Promise.resolve(a)}_deserializeOrientationOperation(e){const{options:t}=e;const i=this._editor.operations.getOrCreate("orientation");if(!i)return Promise.resolve();i.set(t);return Promise.resolve(i)}_deserializeFilterOperation(e){const{options:t}=e;if(!this._filterManager.getFilterByIdentifier(t.name)){ne.warn("Deserializer",`Unknown filter \`${t.name}\``);return Promise.resolve()}return this._filterManager.instantiateFilterWithIdentifier(t.name).then(i=>{const o=this._editor.operations.getOrCreate("filter");o.set({identifier:t.name,filter:i,intensity:t.intensity});return o})}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=ge.Operations;const{options:i}=e;const o=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];const n={};o.forEach(s=>{if(typeof i[s]==="undefined")return;const{minValue:a,midValue:l,maxValue:u}=t.prototype.availableOptions[s];let c=i[s];c=c<0?l+(l-a)*c:l+(u-l)*c;n[s]=c});return Promise.resolve(this._editor.operations.getOrCreate("adjustments",n))}_deserializeSpriteOperation(e){const{options:t}=e;const i=this._editor.operations.getOrCreate("sprite");if(!i)return Promise.resolve();const o=t.sprites.map(n=>{return this._deserializeSprite(i,n)}).filter(n=>n);return Promise.all(o).then(n=>{i.setSprites(n.filter(s=>s));return i})}_deserializeSprite(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}_deserializeSticker(e,t){const{SpriteOperation:i}=ge.Operations;const{options:o}=t;const n=this._stickerManager.getStickerByIdentifier(o.name);const s=this._stickerManager.getURLForSticker(n);if(!n){ne.warn("Deserializer",`Unknown sticker '${o.name}'. Skipping sprite.`);return Promise.resolve()}return new Promise((a,l)=>{const u=new window.Image;u.addEventListener("load",()=>{const c=i.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:d,flipHorizontally:m,flipVertically:h}=o;const f={identifier:o.name,image:u,position:qe.fromObject(o.position),dimensions:qe.fromObject(o.dimensions),rotation:d,flipHorizontally:m,flipVertically:h,adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(b=>{if(typeof o.adjustments[b]!=="undefined"){f.adjustments[b]=o.adjustments[b]+c[b].default}})}a(e.createSticker(f))});u.crossOrigin=this._editor.getCrossOrigin();u.src=this._editor.getUI().getAssetPath(s)})}_deserializeText(e,t){const{options:i}=t;const{fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:u,maxWidth:c,color:d,backgroundColor:m}=i;const h=new Yu(this._ui);let f=this._fontManager.getFontByFontFamily(s);if(!f)f=this._fontManager.getDefaultFont();h.setFonts([f]);return h.load().then(()=>{const b=e.createText({fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:u,maxWidth:c,text:i.text,color:Je.fromArray(d),backgroundColor:Je.fromArray(m),position:qe.fromObject(i.position)});b._edited=true;return b})}_deserializeBrush(e,t){const{options:i}=t;const{paths:o}=i;const n=e.createBrush();o.forEach(s=>{this._deserializeBrushPath(n,s)});return Promise.resolve(n)}_deserializeBrushPath(e,t){const{points:i}=t;const o=this._createBrushForPath(t);const n=e.createPath(o);n.setClosed(true);i.forEach(s=>{n.addControlPoint(qe.fromObject(s))})}_createBrushForPath(e){const{color:t,size:i}=e;const o=Je.fromArray(t);const n={color:o,size:i};const s=this._brushManager.getFirstBrush();if(s.prototype&&s.prototype instanceof iB){const u=s;return new u(n)}const a={...s};delete a.image;class l extends iB{}l.identifier=s.identifier;return new l({...a,...n})}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":{const{position:i,radius:o,gradientRadius:n,blurRadius:s}=t;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:qe.fromObject(i),radius:o,gradientRadius:n,blurRadius:s}))}case"linear":{const{start:i,end:o,size:n,gradientSize:s,blurRadius:a}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:qe.fromObject(i),end:qe.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}}}_getInputDimensionsForOperation(e){let t=false;let i=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(o=>{if(o===e)t=true;if(t)return;i=o.getNewDimensions(i)});return i}};Ad.version="1.0.0"});var Vh,Fd;var nB=p(()=>{St();Vh=Math.PI*2;Fd=class{constructor(e){this._editor=e;this._serializeOperations=this._serializeOperations.bind(this)}serialize(e={}){this._options={...e,image:true};const t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}_serializeInputImage(e){const t=this._editor.getImage();const{width:i,height:o}=t;if(!this._options.image){e.inputImage={width:i,height:o};return Promise.resolve(e)}const n=dt.createCanvas();n.width=t.width;n.height=t.height;const s=n.getContext("2d");s.drawImage(t,0,0);const a=n.toDataURL(JP.PNG);e.inputImage={type:JP.PNG,data:a.replace(/^data:image\/(.*?);base64,/,""),width:i,height:o};return Promise.resolve(e)}_serializeOperations(e){const t=[];const i=this._editor.operations.getStack();i.forEach(o=>{const n=this._serializeOperation(o,t);if(n){t.push(n)}});e.operations=t.filter(o=>o);return Promise.resolve(e)}_serializeOperation(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:ne.warn(`Unable to serialize operation of type ${e.constructor.identifier}`)}}_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation"],true);t.rotation=(t.rotation+Vh)%Vh;return{type:"crop",options:t}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],true)}}_serializeFilterOperation(e){if(e.getIdentifier()==="identity")return null;return{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}_serializeAdjustmentsOperation(e){const{availableOptions:t}=e;const i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];const o={};i.forEach(n=>{const s=t[n];const a=e.getOption(n);const{minValue:l,midValue:u,maxValue:c}=s;o[n]=a<=u?(a-l)/(u-l)-1:(a-u)/(c-u)});return{type:"adjustments",options:o}}_serializeSpriteOperation(e,t){const i=t.filter(s=>s.type==="sprite");let o;let n=true;if(i.length){o=i.pop();n=false}else{o={type:"sprite",options:{sprites:[]}}}e.getSprites().forEach(s=>{let a=null;if(s instanceof e.constructor.StickerSprite){a=this._serializeSticker(e,s)}else if(s instanceof e.constructor.TextSprite){a=this._serializeText(e,s)}else if(s instanceof e.constructor.BrushSprite){a=this._serializeBrush(e,s)}else if(s instanceof e.constructor.TextDesignSprite){a=this._serializeTextDesign&&this._serializeTextDesign(e,s)}if(a){o.options.sprites.push(a)}});if(n){return o}}_serializeSticker(e,t){const i=t.getAdjustments();const o=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],true);o.name=o.identifier;delete o.identifier;o.rotation=(o.rotation+Vh)%Vh;const n=i.availableOptions;o.adjustments={brightness:i.getBrightness()-n.brightness.default,saturation:i.getSaturation()-n.saturation.default,contrast:i.getContrast()-n.contrast.default};return{type:"sticker",options:o}}_serializeText(e,t){const i=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],true);i.rotation=(i.rotation+Vh)%Vh;return{type:"text",options:i}}_serializeBrush(e,t){return{type:"brush",options:{paths:t.getPaths().map(i=>this._serializePath(i))}}}_serializePath(e){const t=e.getBrush().serializeOptions(["color","size"],true);t.points=e.getControlPoints().map(i=>i.getPosition().toObject());return t}_serializeRadialFocusOperation(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],true)}}}_serializeLinearFocusOperation(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}_getInputDimensionsForOperation(e){let t=false;let i=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(o=>{if(o===e)t=true;if(t)return;i=o.getNewDimensions(i)});return i}};Fd.version="1.0.0"});var Cce={};wt(Cce,{default:()=>Y1});var Y1;var Sce=p(()=>{oB();nB();Y1=class{constructor(e){this._editor=e}serialize(...e){const t=new Fd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Ad(this._editor,e);return t.deserialize()}};Y1.version="1.0.0"});var Pd;var sB=p(()=>{St();oB();Pd=class extends Ad{_deserializeOperation(e){if(e.type==="selective-blur"){return this._deserializeSelectiveBlurOperation(e)}return super._deserializeOperation(e)}_deserializeCropOperation(e){const{options:t}=e;let{rotation:i}=t;const o=qe.fromObject(t.start);const n=qe.fromObject(t.end);const s=t.dimensions?qe.fromObject(t.dimensions):null;if(n.x-o.x<=0||n.y-o.y<=0){throw new Error(`A crop should not result in negative or zero dimensions - start: ${o} - end: ${n}`)}if(i>Math.PI){i-=Math.PI*2}const a={start:o,end:n};if(typeof i!=="undefined")a.rotation=i;const l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();this._editor.broadcastTransform(l,a);l.set(a);if(s){const u=n.clone().subtract(o);const c=l.getInputDimensions(false).multiply(u);l.setTextureScale(s.x/c.x)}return Promise.resolve(l)}};Pd.version="1.0.1"});var wce,Bd;var aB=p(()=>{nB();wce=Math.PI*2;Bd=class extends Fd{_serializeTransformOperation(e){const t=e.serializeOptions(["start","end","rotation","textureScale"],true);t.rotation=(t.rotation+wce)%wce;if(t.textureScale!==1){t.dimensions=e.getNewDimensions(e.getInputDimensions(false))}delete t.textureScale;return{type:"crop",options:t}}};Bd.version="1.0.1"});var Tce={};wt(Tce,{default:()=>J1});var J1;var Ice=p(()=>{sB();aB();J1=class{constructor(e){this._editor=e}serialize(...e){const t=new Bd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Pd(this._editor,e);return t.deserialize()}};J1.version="1.0.1"});var jh,Eb;var Ece=p(()=>{rh();St();({OptionType:jh}=ge);Eb=class extends ge.Configurable{constructor(e,t={}){super(t);this._loaded=false;this._loading=false;this._ui=e;this._frame=ge.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=true;const{imageGroups:e}=this._frame;const t=[];["top","left","right","bottom"].forEach(i=>{if(!(i in e))return;const o=e[i];["start","mid","end"].forEach(n=>{if(!(n in o))return;t.push(this._loadPart(i,n))})});return Promise.all(t).then(()=>{this._loaded=true;this._loading=false}).catch(i=>{this._loaded=false;this._loading=false})}_loadPart(e,t){const{imageGroups:i}=this._frame;const o=i[e][t];let n=o;if(typeof o!=="string"&&"image"in o){n=o.image}return gi.load(this._ui.getAssetPath(n)).then(s=>{if(typeof o!=="string"){this._frame.imageGroups[e][t].image=s}else{this._frame.imageGroups[e][t]=s}return s})}getFrame(){return this._frame}};Eb.prototype.availableOptions={identifier:{type:jh.STRING,required:true},defaultName:{type:jh.STRING},thumbnail:{type:jh.STRING},tintable:{type:jh.BOOLEAN,default:false},layoutMode:{type:jh.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:jh.OBJECT,required:true}}});var Z1;var kce=p(()=>{St();Z1=class{constructor(e,t){this._ui=e;this._options=t;this._categoriesById={};this._categories=[];this._framesById={};this._addCategories(al.DEFAULTS.FRAME_CATEGORIES);this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();const{categories:i,replaceCategories:o}=this._options;if(this._customAssetsAllowed&&this._options.categories){this._addCategories(i,o)}else{this._updateAllCategory()}}_addCategories(e,t=false){if(t){this._categories=e.slice(0)}else{this._categories=Ti.mergeCategories(this._categories,e,"frames")}this._categoriesById={};this._categories.forEach(o=>{this._categoriesById[o.identifier]=o});const{availableFrames:i}=this._options;if(this._customAssetsAllowed&&i){this._categories.forEach(o=>{o.frames=o.frames.filter(n=>i.indexOf(n.identifier)!==-1)})}this._categories.forEach(o=>{o.frames.forEach(n=>{this._framesById[n.identifier]=n})});this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(e=>e.frames).reduce((e,t)=>e.concat(t),[])};this._categoriesById.all=this._allCategory}getFramesForCategory(e){if(!this._categoriesById[e]){throw new Error(`Unknown frame category '${e}'`)}return this._categoriesById[e].frames}getFrameByIdentifier(e){return this._framesById[e]}getCategories(){return this._categories}getCategory(e){return this._categoriesById[e]}}});var Q1;var Dce=p(()=>{St();Q1=class{constructor(e,t){this._ui=e;this._options=t;this._overlays=al.DEFAULTS.OVERLAYS.slice(0);this._overlaysByIdentifier={};const i=e.getEditor().getSDK()._l.areCustomAssetsAllowed();if(i&&t.overlays){if(t.replaceOverlays){this._overlays=t.overlays}else{this._overlays=this._overlays.concat(t.overlays)}}if(i&&t.availableOverlays){this._overlays=this._overlays.filter(o=>t.availableOverlays.indexOf(o.identifier)!==-1)}this._overlays.forEach(o=>{this._overlaysByIdentifier[o.identifier]=o})}getOverlays(){return this._overlays}getOverlayByIdentifier(e){return this._overlaysByIdentifier[e]}}});var yl,$h;var ew=p(()=>{St();({OverlayFilter:yl}=ge.Engine.Filters);$h={[yl.BLEND_MODES.NORMAL]:"normal",[yl.BLEND_MODES.OVERLAY]:"overlay",[yl.BLEND_MODES.HARD_LIGHT]:"hard light",[yl.BLEND_MODES.SOFT_LIGHT]:"soft light",[yl.BLEND_MODES.MULTIPLY]:"multiply",[yl.BLEND_MODES.DARKEN]:"darken",[yl.BLEND_MODES.LIGHTEN]:"lighten",[yl.BLEND_MODES.SCREEN]:"screen",[yl.BLEND_MODES.COLOR_BURN]:"color burn"}});var B$e,Md;var lB=p(()=>{St();$1();Ece();rh();kce();Dce();X1();sB();ew();B$e=dt.flipObject($h);Md=class extends Pd{constructor(...e){super(...e);this._frameManager=new Z1(this._ui,this._getOptions("frame"));const t=this._getOptions("overlay");if(t){this._overlayManager=new Q1(this._ui,t)}}_deserializeSprite(e,t){if(t.type==="frame"){return this._deserializeFrame(e,t)}if(t.type==="overlay"){return this._deserializeOverlay(e,t)}return super._deserializeSprite(e,t)}_deserializeOperation(e){if(e.type==="transform"){return this._deserializeTransformOperation(e)}return super._deserializeOperation(e)}_deserializeOrientationOperation(e){if(this._data.meta&&this._data.meta.platform!=="html5"){return super._deserializeOrientationOperation(e)}const{rotation:t,flipHorizontally:i,flipVertically:o}=e.options;let n=t===90&&!i&&!o;n|=t===90&&i&&o;n|=t===270&&!i&&!o;n|=t===270&&i&&o;if(n){e.options.flipHorizontally=!e.options.flipHorizontally;e.options.flipVertically=!e.options.flipVertically}return super._deserializeOrientationOperation(e)}_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const i=dt.Array.find(this._data.operations,o=>o.type==="orientation");if(i){const{options:o}=i;let{rotation:n,flipHorizontally:s,flipVertically:a}=o;if(n===90||n===270){if(!s&&a||s&&!a){s=!s;a=!a}}t.rotate(o.rotation);if(s){t.flip("horizontal");t.setRotation(t.getRotation()*-1)}if(a){t.flip("vertical");t.setRotation(t.getRotation()*-1)}}return t})}_deserializeFrame(e,t){const{identifier:i}=t.options;const o=this._frameManager.getFrameByIdentifier(i);if(!o){ne.warn("Deserializer",`Unknown frame \`${i}\`. Skipping frame.`);return Promise.resolve()}const n=new Eb(this._ui,o);return n.load().then(()=>{this._editor.operations.getOrCreate("frame",{frame:n.getFrame()})})}_deserializeOverlay(e,t){const{blendMode:i,intensity:o,identifier:n}=t.options;const s=this._overlayManager.getOverlayByIdentifier(n);if(!s){ne.warn("Deserializer",`Unknown overlay \`${n}\`. Skipping overlay.`);return Promise.resolve()}const a=this._editor.getUI().getAssetPath(s.image);return gi.load(a).then(l=>{this._editor.operations.getOrCreate("overlay",{alpha:o,identifier:n,blendMode:parseInt(B$e[i||s.blendMode],10),image:l})})}_createBrushForPath(e){const t=super._createBrushForPath(e);if(typeof e.hardness!=="undefined"&&t.hasOption("hardness")){t.setHardness(e.hardness)}return t}_deserializeSticker(e,t){const{SpriteOperation:i}=ge.Operations;const{options:o}=t;const n=this._stickerManager.getStickerByIdentifier(o.identifier);const s=Ju.getURLForSticker(n,"base");if(!n){ne.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`);return Promise.resolve()}const a=e.getInputDimensions(false);return new Promise((l,u)=>{const c=new window.Image;c.addEventListener("load",()=>{const d=i.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:m,flipHorizontally:h,flipVertically:f}=o;const b={identifier:o.identifier,image:c,position:qe.fromObject(o.position),dimensions:qe.fromObject(o.dimensions).multiply(a.min()),rotation:m,flipHorizontally:h,flipVertically:f,adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(_=>{if(typeof o.adjustments[_]!=="undefined"){b.adjustments[_]=o.adjustments[_]+d[_].default}})}if(typeof o.tintColor!=="undefined"&&typeof n.tintMode!=="undefined"){b.tintColor=Je.fromArray(o.tintColor);b.tintMode=n.tintMode}l(e.createSticker(b))});c.crossOrigin=this._editor.getCrossOrigin();c.src=this._editor.getUI().getAssetPath(s)})}_deserializeFilterOperation(e){const{options:t}=e;if(!this._filterManager.getFilterByIdentifier(t.identifier)){ne.warn("Deserializer",`Unknown filter \`${t.identifier}\``);return Promise.resolve()}return this._filterManager.instantiateFilterWithIdentifier(t.identifier).then(i=>{const o=this._editor.operations.getOrCreate("filter");if(!o)return;o.set({identifier:t.identifier,filter:i,intensity:t.intensity});return o})}_deserializeFocusOperation(e){const{options:t,type:i}=e.options;if(i!=="radial")return super._deserializeFocusOperation(e);const o=this._editor.getImage();const n=o.width/o.height;const{start:s,end:a,gradientRadius:l,blurRadius:u}=t;const c=qe.fromObject(a).subtract(qe.fromObject(s)).multiply(n,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:qe.fromObject(s),radius:c,gradientRadius:l,blurRadius:u}))}_deserializeText(e,t){const{options:i}=t;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:u,color:c,backgroundColor:d}=i;const m=new Yu(this._ui);let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultFont()}else{m.setFonts([h.getFont()])}return m.load().then(()=>{const f=e.getInputDimensions(false);const b=u*f.min()/f.x;const _=e.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:l,maxWidth:b,text:i.text,color:Je.fromArray(c),backgroundColor:Je.fromArray(d),position:qe.fromObject(i.position)});_._edited=true;return _})}};Md.version="2.0.0"});var Ld;var uB=p(()=>{aB();ew();Ld=class extends Bd{_serializeSticker(e,t){const i=e.getInputDimensions(false);const o=super._serializeSticker(e,t);if(t.getTintMode()!=="none"){o.options.tintColor=t.serializeOption("tintColor",true)}o.options.dimensions=t.getDimensions().clone().divide(i.min()).toObject();o.options.identifier=o.options.name;delete o.options.name;return o}_serializePath(e){const t=super._serializePath(e);const i=e.getBrush();if(i.hasOption("hardness")){t.hardness=i.getOption("hardness")}return t}_serializeOperation(e,t){if(e.constructor.identifier==="frame"){this._serializeFrameOperation(e,t);return null}if(e.constructor.identifier==="overlay"){this._serializeOverlayOperation(e,t);return null}return super._serializeOperation(e,t)}_serializeFrameOperation(e,t){const i=t.filter(n=>n.type==="sprite");let o;if(i.length){o=i.pop()}else{o={type:"sprite",options:{sprites:[]}};t.push(o)}o.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}_serializeOverlayOperation(e,t){if(!e.getIdentifier())return;const i=t.filter(n=>n.type==="sprite");let o;if(i.length){o=i.pop()}else{o={type:"sprite",options:{sprites:[]}};t.push(o)}o.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:$h[e.getBlendMode()]}})}_getFrameOptions(e){return{identifier:e.getFrame().identifier}}_serializeOrientationOperation(e){const t=super._serializeOrientationOperation(e);if(t.options.rotation===90||t.options.rotation===270){t.options.flipHorizontally=!t.options.flipHorizontally;t.options.flipVertically=!t.options.flipVertically}return t}_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const o=t.get("orientation");e.rotate(-o.getRotation());if(o.getFlipVertically()){e.flip("vertical");e.setRotation(e.getRotation()*-1)}if(o.getFlipHorizontally()){e.flip("horizontal");e.setRotation(e.getRotation()*-1)}}const i=super._serializeTransformOperation(e);i.type="transform";return i}_serializeText(e,t){const i=super._serializeText(e,t);const o=e.getInputDimensions(false);i.options.fontIdentifier=t.getFontIdentifier();i.options.maxWidth=i.options.maxWidth*o.x/o.min();delete i.options.fontFamily;return i}_serializeFilterOperation(e){const t=super._serializeFilterOperation(e);if(!t)return null;t.options.identifier=t.options.name;delete t.options.name;return t}_serializeRadialFocusOperation(e){const t=super._serializeRadialFocusOperation(e);const i=t.options.options;i.start=i.position;delete i.position;i.end={x:i.start.x+i.radius,y:i.start.y};delete i.radius;return t}};Ld.version="2.0.0"});var Oce={};wt(Oce,{default:()=>tw});var tw;var Rce=p(()=>{lB();uB();tw=class{constructor(e){this._editor=e}serialize(...e){const t=new Ld(this._editor);return t.serialize(...e)}deserialize(e){const t=new Md(this._editor,e);return t.deserialize()}};tw.version="2.0.0"});var cB,zd;var dB=p(()=>{St();rh();Xu();X1();Wh();lB();if(typeof ge.Operations.SpriteOperation!=="undefined"){cB=ge.Operations.SpriteOperation.BrushSprite.Brush}zd=class extends Md{_deserializeSticker(e,t){const{SpriteOperation:i}=ge.Operations;const{options:o}=t;const n=this._stickerManager.getStickerByIdentifier(o.identifier);if(!n){ne.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`);return Promise.resolve()}const{mediaBase:s}=n.images;const a=Ju.getURLForSticker(n,"base");const l=s.rawData?s.uris[0]:this._editor.getUI().getAssetPath(a);const u=e.getInputDimensions(false);return gi.load(l).then(c=>{const d=i.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:m,flipHorizontally:h,flipVertically:f}=o;const b={identifier:o.identifier,image:c,position:qe.fromObject(o.position),dimensions:qe.fromObject(o.dimensions).multiply(u.min()),rotation:m||0,flipHorizontally:h,flipVertically:f,resizeMode:n.resizeMode||"keepAspect",adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(_=>{if(typeof o.adjustments[_]!=="undefined"){b.adjustments[_]=o.adjustments[_]+d[_].default}})}if(typeof o.tintMode!=="undefined"&&typeof o.tintColor!=="undefined"){b.tintColor=Je.fromArray(o.tintColor.rgba);b.tintMode=o.tintMode}else if(typeof o.tintColor!=="undefined"&&typeof n.tintMode!=="undefined"){b.tintColor=Je.fromArray(o.tintColor.rgba);b.tintMode=n.tintMode}if(typeof o.alpha!=="undefined"){b.alpha=o.alpha}return e.createSticker(b)})}_deserializeTransformOperation(e){return super._deserializeTransformOperation(e).then(t=>{if(!t)return;t._ratio=null;return t})}_deserializeInputImage(){let{data:e,type:t,uri:i}=this._data.image;if(e&&t){i=`data:${t};base64,${e}`}if(i){return gi.load(i).then(o=>{this._editor.setImage(o)})}return Promise.resolve()}_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=ge.Operations;return super._deserializeAdjustmentsOperation(e).then(i=>{if(!i)return null;const{options:o}=e;const n=["gamma","whites","blacks","temperature"];const s={};n.forEach(a=>{if(typeof o[a]==="undefined")return;const{minValue:l,midValue:u,maxValue:c}=t.prototype.availableOptions[a];let d=o[a];d=d<0?u+(u-l)*d:u+(c-u)*d;s[a]=d});i.set(s);return i})}_deserializeFocusOperation(e){const{options:t}=e.options;switch(e.options.type){case"radial":return super._deserializeFocusOperation(e);case"linear":{const{start:i,end:o,blurRadius:n}=t;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:qe.fromObject(i),controlPoint2:qe.fromObject(o),blurRadius:n}))}case"mirrored":{const{start:i,end:o,size:n,gradientSize:s,blurRadius:a}=t;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:qe.fromObject(i),end:qe.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}case"gaussian":{const{blurRadius:i}=t;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:i}))}}}_deserializeText(e,t){const{options:i}=t;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:u,color:c,backgroundColor:d}=i;const m=this._ui.getFontLoader();let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultVariation()}else{m.setFonts([h.getFont()])}return m.load().then(()=>{const f=e.getInputDimensions(false);const b=u*f.min()/f.x;const _=e.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:b,text:i.text,color:Je.fromArray(c.rgba),backgroundColor:Je.fromArray(d.rgba),position:qe.fromObject(i.position)});_._edited=true;return _})}_createBrushForPath(e){const{identifier:t,color:i,size:o,hardness:n}=e.brush;const s=Je.fromArray(i.rgba);const a={color:s,size:o};if(typeof n!=="undefined"){a.hardness=n}let l=this._brushManager.getBrushByIdentifier(t);if(!l){l=this._brushManager.getFirstBrush()}if(l.prototype&&l.prototype instanceof cB){const d=l;return new d(a)}const u={...l};delete u.image;class c extends cB{}c.identifier=l.identifier;return new c({...u,...a})}_deserializeFrame(e,t){return super._deserializeFrame(e,t).then(()=>{const i=this._editor.operations.get("frame");const{size:o,alpha:n,tintColor:s}=t.options;const a={};if(typeof o!=="undefined"){a.scale=o}if(typeof n!=="undefined"){a.alpha=n}if(typeof s!=="undefined"){a.tintColor=Je.fromArray(s.rgba)}i.set(a)})}_deserializeTextDesign(e,t){const{options:i}=t;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:u,width:c,seed:d,inverted:m}=i;let{identifier:h}=i;if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const f=new on(this._ui,this._getOptions("textdesign"));const b=new ei(this._ui,{fonts:Et.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:_}=e.constructor.TextDesignSprite;const y=this._ui.getFontLoader();const I=f.getLayoutByIdentifier(h);const T=new I;y.setFonts(b.getFonts());_.setFonts({..._.getFonts(),...b.getVariationsByIdentifier()});return y.load().then(()=>{const D=T.getImagePaths().map(P=>({path:P,fullPath:this._ui.getAssetPath(P),image:null}));return _.loadImages(D).then(()=>{T.onImagesLoaded();return e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:Je.fromArray(u.rgba),width:c,seed:d,inverted:m,layout:T})})})}};zd.version="3.0.0"});var Ud;var pB=p(()=>{$s();Ud=class extends Oe{};Ud.prototype.availableOptions={identifier:{type:"string",required:true},defaultName:{type:"string",required:true},ratio:{type:"*",required:false,default:null},selected:{type:"boolean",required:false},dimensions:{type:"vector2",required:false},lockDimensions:{type:"boolean",required:false,default:null},forceDimensions:{type:"boolean",required:false,default:null}}});var Nd;var mB=p(()=>{St();pB();uB();Nd=class extends Ld{serialize(e={}){return super.serialize(e).then(t=>{t.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:dt.ISODateString(new Date)};t.image=t.inputImage;delete t.inputImage;return t})}_serializeSticker(e,t){const i=super._serializeSticker(e,t);i.options.alpha=t.getAlpha();if(i.options.tintColor){i.options.tintColor={rgba:i.options.tintColor}}return i}_serializeText(e,t){const i=super._serializeText(e,t);i.options.color={rgba:i.options.color};i.options.backgroundColor={rgba:i.options.backgroundColor};i.options.flipHorizontally=false;i.options.flipVertically=false;delete i.options.fontWeight;return i}_serializePath(e){const t=super._serializePath(e);delete t.hardness;delete t.size;delete t.color;const i=e.getBrush();t.brush=i.serializeOptions(["identifier","size","color"],true);if(typeof t.brush.identifier==="undefined"){delete t.brush.identifier}t.brush.color={rgba:t.brush.color};const o=i.getOption("hardness");if(o!=="undefined"){t.brush.hardness=o}return t}_serializeFrameOperation(e,t){super._serializeFrameOperation(e,t);const i=t.filter(n=>n.type==="sprite");let o;if(i.length){o=i.pop();const n=o.options.sprites.filter(l=>l.type==="frame")[0];const s=e.getTintColor();if(!s.equals(new Je(1,1,1,0))){n.options.tintColor={rgba:e.serializeOption("tintColor",true)}}const a=e.serializeOptions(["scale","alpha"],true);n.options={...n.options,...a};n.options.size=n.options.scale;delete n.options.scale}}_serializeTransformOperation(e){const t=super._serializeTransformOperation(e);if(e._ratio){let i;if(e._ratio instanceof Ud){i=e._ratio.getIdentifier()}else{i=e._ratio.identifier}t.options.meta={identifier:i}}delete t.options.scale;return t}_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e);const i=["gamma","whites","blacks","temperature"];const{availableOptions:o}=e;const n={};i.forEach(s=>{const a=o[s];const l=e.getOption(s);const{minValue:u,midValue:c,maxValue:d}=a;n[s]=l<=c?(l-u)/(c-u)-1:(l-c)/(d-c)});t.options={...t.options,...n};return t}_serializeOperation(e,t){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return super._serializeOperation(e,t)}}_serializeMirroredFocusOperation(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}_serializeLinearFocusOperation(e){const t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],true);t.start=t.controlPoint1;delete t.controlPoint1;t.end=t.controlPoint2;delete t.controlPoint2;return{type:"focus",options:{type:"linear",options:t}}}_serializeBlurOperation(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],true)}}}};Nd.version="3.0.0"});var Ace={};wt(Ace,{default:()=>rw});var rw;var Fce=p(()=>{dB();mB();rw=class{constructor(e){this._editor=e}serialize(...e){const t=new Nd(this._editor);return t.serialize(...e)}deserialize(e){const t=new zd(this._editor,e);return t.deserialize()}};rw.version="3.0.0"});var qd;var hB=p(()=>{St();Xu();Wh();dB();qd=class extends zd{_deserializeTextDesign(e,t){const{options:i}=t;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:u,width:c,seed:d,inverted:m}=i;let{identifier:h}=i;if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const f=new on(this._ui,this._getOptions("textdesign"));const b=new ei(this._ui,{fonts:Et.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:_}=e.constructor.TextDesignSprite;const y=this._ui.getFontLoader();const I=f.getLayoutByIdentifier(h);const T=new I;y.setFonts(b.getFonts());_.setFonts({..._.getFonts(),...b.getVariationsByIdentifier()});return y.load().then(()=>{const D=T.getImagePaths().map(P=>({path:P,fullPath:this._ui.getAssetPath(P),image:null}));return _.loadImages(D).then(()=>{T.onImagesLoaded();return e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:Je.fromArray(u.rgba),width:c,seed:d,inverted:m,layout:T})})})}};qd.version="3.1.0"});var Hd;var fB=p(()=>{St();mB();Hd=class extends Nd{_serializeTextDesign(e,t){const i=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],true);i.color={rgba:i.color};const o=t.getLayout();if(o){i.identifier=o.constructor.identifier}return{type:"textdesign",options:i}}};Hd.version="3.1.0"});var Pce={};wt(Pce,{default:()=>iw});var iw;var Bce=p(()=>{hB();fB();iw=class{constructor(e){this._editor=e}serialize(...e){const t=new Hd(this._editor);return t.serialize(...e)}deserialize(e){const t=new qd(this._editor,e);return t.deserialize()}};iw.version="3.1.0"});var Wd;var gB=p(()=>{St();Xu();Wh();hB();Wd=class extends qd{_deserializeTextDesign(e,t){const{options:i}=t;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:u,width:c,seed:d,inverted:m}=i;let{identifier:h}=i;if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===ge.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=ge.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const f="padding"in i?i.padding/c:-1;const b=new on(this._ui,this._getOptions("textdesign"));const _=new ei(this._ui,{fonts:Et.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:y}=e.constructor.TextDesignSprite;const I=this._ui.getFontLoader();const T=b.getLayoutByIdentifier(h);const D=new T;I.setFonts(_.getFonts());y.setFonts({...y.getFonts(),..._.getVariationsByIdentifier()});return I.load().then(()=>{const P=D.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return y.loadImages(P).then(()=>{D.onImagesLoaded();return e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:Je.fromArray(u.rgba),width:c,seed:d,inverted:m,layout:D,padding:f})})})}};Wd.version="3.2.0"});var Gd;var yB=p(()=>{fB();Gd=class extends Hd{_serializeTextDesign(e,t){const i=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],true);i.color={rgba:i.color};const o=t.getLayout();if(o){i.identifier=o.constructor.identifier}i.padding*=i.width;return{type:"textdesign",options:i}}};Gd.version="3.2.0"});var Mce={};wt(Mce,{default:()=>ow});var ow;var Lce=p(()=>{gB();yB();ow=class{constructor(e){this._editor=e}serialize(...e){const t=new Gd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Wd(this._editor,e);return t.deserialize()}};ow.version="3.2.0"});var Vd;var bB=p(()=>{gB();Vd=class extends Wd{_deserializeOperation(e){return super._deserializeOperation(e)}_deserializeOrientationOperation(e){const{options:t}=e;const i=this._editor.operations.getOrCreate("orientation");if(!i)return Promise.resolve();i.set(t);return Promise.resolve(i)}};Vd.version="3.4.0"});var jd;var _B=p(()=>{ew();yB();jd=class extends Gd{_serializeOperation(e,t){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return super._serializeOperation(e,t)}}_serializeOrientationOperation(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],true)}}_serializeStyle(e){const{identifier:t,intensity:i,blendMode:o}=e.getOptions();const{tileEdgeLength:n,overlappingFactor:s}=e.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:t,intensity:i,blendMode:$h[o],tileEdgeLength:n,overlappingFactor:s}}}};jd.version="3.4.0"});var zce={};wt(zce,{default:()=>nw});var nw;var Uce=p(()=>{bB();_B();nw=class{constructor(e){this._editor=e}serialize(...e){const t=new jd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Vd(this._editor,e);return t.deserialize()}};nw.version="3.4.0"});var $d;var vB=p(()=>{St();Xu();Wh();bB();$d=class extends Vd{_deserializeTextDesign(e,t){const{options:i}=t;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:u,width:c,seed:d,inverted:m,identifier:h}=i;const f="padding"in i?i.padding/c:-1;const b=new on(this._ui,this._getOptions("textdesign"));const _=new ei(this._ui,{fonts:Et.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:y}=e.constructor.TextDesignSprite;const I=this._ui.getFontLoader();const T=b.getLayoutByIdentifier(h);const D=new T;I.setFonts(_.getFonts());y.setFonts({...y.getFonts(),..._.getVariationsByIdentifier()});return I.load().then(()=>{const P=D.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return y.loadImages(P).then(()=>{D.onImagesLoaded();return e.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:Je.fromArray(u.rgba),width:c,seed:d,inverted:m,layout:D,padding:f})})})}};$d.version="3.5.0"});var Kd;var xB=p(()=>{_B();Kd=class extends jd{};Kd.version="3.5.0"});var Nce={};wt(Nce,{default:()=>sw});var sw;var qce=p(()=>{vB();xB();sw=class{constructor(e){this._editor=e}serialize(...e){const t=new Kd(this._editor);return t.serialize(...e)}deserialize(e){const t=new $d(this._editor,e);return t.deserialize()}};sw.version="3.5.0"});var Xd;var CB=p(()=>{St();vB();Xd=class extends $d{_deserializeAdjustmentsOperation(e){const{AdjustmentsOperation:t}=ge.Operations;return super._deserializeAdjustmentsOperation(e).then(i=>{if(!i)return null;const{options:o}=e;const n="sharpness";const s={};if(typeof o[n]==="undefined")return;const{minValue:a,midValue:l,maxValue:u}=t.prototype.availableOptions[n];let c=o[n];c=c<0?l+(l-a)*c:l+(u-l)*c;s[n]=c;i.set(s);return i})}};Xd.version="3.6.0"});var Yd;var SB=p(()=>{xB();Yd=class extends Kd{_serializeAdjustmentsOperation(e){const t=super._serializeAdjustmentsOperation(e);const i="sharpness";const{availableOptions:o}=e;const n={};const s=o[i];const a=e.getOption(i);const{minValue:l,midValue:u,maxValue:c}=s;n[i]=a<=u?(a-l)/(u-l)-1:(a-u)/(c-u);t.options={...t.options,...n};return t}};Yd.version="3.6.0"});var Hce={};wt(Hce,{default:()=>aw});var aw;var Wce=p(()=>{CB();SB();aw=class{constructor(e){this._editor=e}serialize(...e){const t=new Yd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Xd(this._editor,e);return t.deserialize()}};aw.version="3.6.0"});var Jd;var wB=p(()=>{$s();CB();Jd=class extends Xd{deserialize(){return this._validateVersion().then(()=>this._deserializeAssetLibrary()).then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_deserializeAssetLibrary(){return new Promise((e,t)=>{const i=this._data;if(!i.assetLibrary){e();return}const{assets:o}=i.assetLibrary;const n=[];for(const s in o){n.push(this._deserializeCustomAssets(s,o[s]))}return Promise.all(n).then(()=>{e()}).catch(s=>{console.error(s);t(s)})})}_deserializeCustomAssets(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return Promise.reject(new Error(`Unknown asset type: ${e}`))}}_deserializeCustomStickerAssets(e){let t="none";const i=this._editor.getOptions().editor;if(i&&i.controlsOptions&&i.controlsOptions.sticker){t=i.controlsOptions.sticker.customStickerTintMode||"none"}const o=e.map(n=>{return new Promise((s,a)=>{const{identifier:l,raster:u}=n;const c=n.svg!==void 0;let d=`data:${u.type};base64,${u.data}`;let m=new Ci;m.onload=()=>{const h=this._editor.getSDK();m=h.correctExifOrientation(m);if(m.toDataURL){d=m.toDataURL()}let f={data:"",width:1,height:1};if(true){f=this._stickerManager.renderStickerThumbnailFromImage(m)}const b={identifier:l,defaultName:n.name||"",tintMode:t,images:{mediaBase:{uris:[d],rawData:true,isSVG:c,width:m.width,height:m.height},mediaThumb:{uris:[f.data],rawData:true,width:f.width,height:f.height}}};if(c){const _=`data:image/svg+xml;base64,${n.svg.data}`;b.images.mediaBase.uris.push(_)}s(b)};m.onerror=()=>{a(new Error(`Invalid base64 data: ${d}`))};m.src=d})});return Promise.all(o).then(n=>{const s=this._editor.getDynamicAssetsLibrary();s.setAssets("sticker",n);this._stickerManager.reload()})}};Jd.version="3.7.0"});var Zd;var TB=p(()=>{SB();Zd=class extends Yd{serialize(e={}){return super.serialize(e).then(t=>{return this._serializeAssetLibrary(t).then(i=>{return i})})}_serializeAssetLibrary(e){if(!this._editor.getDynamicAssetsLibrary){return Promise.resolve(e)}const t=this._editor.getDynamicAssetsLibrary();const i=this._serializeCustomStickerAssets(e,t);if(i.length===0){return Promise.resolve(e)}e.assetLibrary={assets:{stickers:i}};return Promise.resolve(e)}_serializeCustomStickerAssets(e,t){const i=t.getAssets("sticker");if(i.length===0){return[]}const o=e.operations.filter(a=>{return a.type==="sprite"}).flatMap(a=>a.options.sprites).filter(a=>a.type==="sticker").map(a=>a.options.identifier);const n={};o.forEach(a=>{n[a]=true});const s=i.filter(a=>{return n[a.identifier]});return s.map(a=>{const{identifier:l,defaultName:u,images:c}=a;const d=c.mediaBase.uris[0];const{isSVG:m}=c.mediaBase;const h=/^data:(image\/(jpeg|png));base64,(.*)$/g;const f=h.exec(d);const b=f[1];const _=f[3];const y={identifier:l,name:u,raster:{type:b,data:_}};if(u){y.name=u}if(m){y.svg={data:c.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}}return y})}};Zd.version="3.7.0"});var Gce={};wt(Gce,{default:()=>lw});var lw;var Vce=p(()=>{wB();TB();lw=class{constructor(e){this._editor=e}serialize(...e){const t=new Zd(this._editor);return t.serialize(...e)}deserialize(e){const t=new Jd(this._editor,e);return t.deserialize()}};lw.version="3.7.0"});var Qd;var IB=p(()=>{wB();Qd=class extends Jd{};Qd.version="3.8.0"});var ep;var EB=p(()=>{TB();ep=class extends Zd{_serializeSticker(e,t){const i=super._serializeSticker(e,t);i.options.tintMode=t.getTintMode();return i}};ep.version="3.8.0"});var jce={};wt(jce,{default:()=>uw});var uw;var $ce=p(()=>{IB();EB();uw=class{constructor(e){this._editor=e}serialize(...e){const t=new ep(this._editor);return t.serialize(...e)}deserialize(e){const t=new Qd(this._editor,e);return t.deserialize()}};uw.version="3.8.0"});var tp;var kB=p(()=>{St();IB();tp=class extends Qd{_deserializeTransformOperation(e){return super._deserializeCropOperation(e).then(t=>{if(!t)return;const i=dt.Array.find(this._data.operations,o=>o.type==="orientation");if(i){const{options:o}=i;t.rotate(o.rotation);if(o.flipHorizontally){t.flip("horizontal");t.setRotation(t.getRotation()*-1)}if(o.flipVertically){t.flip("vertical");t.setRotation(t.getRotation()*-1)}}t._ratio=null;return t})}_deserializeText(e,t){const{options:i}=t;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:u,color:c,backgroundColor:d}=i;const m=this._ui.getFontLoader();let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultVariation()}else{m.setFonts([h.getFont()])}return m.load().then(()=>{const f=e.getInputDimensions(false);const b=f.min();const _=f.x;const y=f.y;const I=u*b/_;const T=o*b/y;const D=e.createText({fontSize:T,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:I,text:i.text,color:Je.fromArray(c.rgba),backgroundColor:Je.fromArray(d.rgba),position:qe.fromObject(i.position)});D._edited=true;return D})}};tp.version="3.9.0"});var Kce,rp;var DB=p(()=>{pB();EB();Kce=Math.PI*2;rp=class extends ep{_serializeTransformOperation(e){const{operations:t}=this._editor;if(t.exists("orientation")){e=e.clone();const n=t.get("orientation");if(n.getFlipVertically()){e.flip("vertical");e.setRotation(e.getRotation()*-1)}if(n.getFlipHorizontally()){e.flip("horizontal");e.setRotation(e.getRotation()*-1)}e.rotate(-n.getRotation())}const i=e.serializeOptions(["start","end","rotation","textureScale"],true);i.rotation=(i.rotation+Kce)%Kce;if(i.textureScale!==1){i.dimensions=e.getNewDimensions(e.getInputDimensions(false))}delete i.textureScale;const o={type:"transform",options:i};if(e._ratio){let n;if(e._ratio instanceof Ud){n=e._ratio.getIdentifier()}else{n=e._ratio.identifier}o.options.meta={identifier:n}}delete o.options.scale;return o}_serializeText(e,t){const i=e.getInputDimensions(false);const o=super._serializeText(e,t);o.options.fontSize=o.options.fontSize*i.y/i.min();return o}};rp.version="3.9.0"});var Xce={};wt(Xce,{default:()=>cw});var cw;var Yce=p(()=>{kB();DB();cw=class{constructor(e){this._editor=e}serialize(...e){const t=new rp(this._editor);return t.serialize(...e)}deserialize(e){const t=new tp(this._editor,e);return t.deserialize()}};cw.version="3.9.0"});var kb;var Jce=p(()=>{kB();kb=class extends tp{};kb.version="3.12.0"});var Db;var Zce=p(()=>{DB();Db=class extends rp{_serializeCustomStickerAssets(e,t){const i=t.getAssets("sticker");if(i.length===0){return[]}const o=e.operations.filter(a=>{return a.type==="sprite"}).flatMap(a=>a.options.sprites).filter(a=>a.type==="sticker").map(a=>a.options.identifier);const n={};o.forEach(a=>{n[a]=true});const s=i.filter(a=>{return n[a.identifier]});return s.map(a=>{const{identifier:l,defaultName:u,images:c}=a;const d=c.mediaBase.uris[0];const{isSVG:m}=c.mediaBase;const h=/^data:(image\/(jpeg|png|gif));base64,(.*)$/g;const f=h.exec(d);const b=f[1];const _=f[3];const y={identifier:l,name:u,raster:{type:b,data:_}};if(u){y.name=u}if(m){y.svg={data:c.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}}return y})}};Db.version="3.12.0"});var Qce={};wt(Qce,{default:()=>dw});var dw;var ede=p(()=>{Jce();Zce();dw=class{constructor(e){this._editor=e}serialize(...e){const t=new Db(this._editor);return t.serialize(...e)}deserialize(e){const t=new kb(this._editor,e);return t.deserialize()}};dw.version="3.12.0"});var tde,rde;var ide=p(()=>{eB();uce();Xu();wn();St();cce();dce();tde=class extends wb{constructor(e,t,i,o=false){super();this._ui=e;this._options=t;this._mediator=i;this._shallow=o;if(!o){this._initSDK();this.operations=new H1(this,this._sdk,this._mediator)}}_initFonts(){const e=dt.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:false,availableVariations:null});this._fontManager=new ei(this._ui,e);const t=this._fontManager.getFonts();const i=this._ui.getFontLoader();i.setFonts(t);i.load()}setImage(e=this._options.editor.image,t=true){if(t){this.reset()}let i=null;i=this._sdk.parseExif(e);this._setImage(e,i)}_initSDK(){const{logLevel:e,displayWelcomeMessage:t,debug:i,license:o,crossOrigin:n,watermark:s}=this._options;const{smoothDownscaling:a,smoothUpscaling:l,preferredRenderer:u,pixelRatio:c,transparent:d,clearColor:m}=this._options.editor;let h;if(Array.isArray(m)){h=Je.fromArray(m)}else if(typeof m==="string"){h=Je.fromHex(m)}else if(m instanceof Je){h=m.clone()}const f={logLevel:e,debug:i,displayWelcomeMessage:t,pixelRatio:c,smoothDownscaling:a,smoothUpscaling:l,transparent:d,crossOrigin:n,clearColor:h,license:o,watermark:s};this._sdk=new ge(u,f)}getMaxMegapixels(){const{maxMegaPixels:e}=this._options.editor;return e}getCrossOrigin(){return dt.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(e=false){return this._sdk.getOutputDimensions(e)}getOutputTextureDimensions(e=false){return this._sdk.getOutputTextureDimensions(e)}getFinalDimensions(e=false){return this._sdk.getFinalDimensions(e)}_setImage(e=this._options.editor.image,t=null){this._sdk.setAllOperationsToDirty();this._options.editor.image=e;this._sdk.setImage(e,t)}_ensureImageIsResized(){const e=this._sdk.getImage();const t=this._sdk.getRenderer();const i=this.getMaxMegapixels();const o=i?i*1e6:null;const n=t.getMaxDimensions();const s=new W1(e,o,n);if(!this._resizedImage&&s.needsResize()){return s.resize().then(({canvas:a,dimensions:l,reason:u})=>{this._resizedImage=a;this._sdk.setImage(a);return a})}return Promise.resolve(e)}export(e=false){if(this._watermarkOperation){this._watermarkOperation.setEnabled(false)}this._sdk.setAllOperationsToDirty();return this._ensureImageIsResized().then(t=>{const i=this._options.editor.export;const o=new q1(this._sdk,i,e);return o.export().then(n=>{this.emit("export",n);this._mediator.emit(Et.EVENTS.EXPORT,n,this);if(this._watermarkOperation){this._watermarkOperation.setEnabled(true);this._sdk.render()}this._sdk.setAllOperationsToDirty();return n})})}broadcastTransform(e,t){const i=new ge.Operations.TransformOperation.TransformChange(e,t);const o=["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"];o.forEach(n=>{const s=this.operations.get(n);if(!s){return}s.transform(i)})}broadcastFlip(e){const t=["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"];t.forEach(i=>{const o=this.operations.get(i);if(!o){return}o.flip(e)})}broadcastRotate(e){const t=["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"];t.forEach(i=>{const o=this.operations.get(i);if(!o){return}o.rotate(e)})}_initSerializers(){this._serializers={"1.0.0":(Sce(),ui(Cce)).default,"1.0.1":(Ice(),ui(Tce)).default,"2.0.0":(Rce(),ui(Oce)).default,"3.0.0":(Fce(),ui(Ace)).default,"3.1.0":(Bce(),ui(Pce)).default,"3.2.0":(Lce(),ui(Mce)).default,"3.4.0":(Uce(),ui(zce)).default,"3.5.0":(qce(),ui(Nce)).default,"3.6.0":(Wce(),ui(Hce)).default,"3.7.0":(Vce(),ui(Gce)).default,"3.8.0":($ce(),ui(jce)).default,"3.9.0":(Yce(),ui(Xce)).default,"3.12.0":(ede(),ui(Qce)).default}}serialize(e={},t="3.12.0"){const i=this._serializers[t];if(!i){return Promise.reject(new Error(`No serializer for version ${t} found.`))}const o=new i(this);return o.serialize(e)}deserialize(e){const t=this._serializers[e.version];if(!t){return Promise.reject(new Error(`No serializer for version ${e.version} found.`))}const i=new t(this);return i.deserialize(e)}save(e=false,t=false){const i=this._options.editor.save;return this.serialize({image:t}).then(o=>{const n=JSON.stringify(o,null,2);if(e){const s=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(n))}`;Rd.downloadDataURL(s,i.fileBasename)}return n})}reset(){this._sdk.reset();this.operations.reset()}dispose(){this.stop();if(this._resizedImage){st(this._resizedImage)}this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}};rde=tde});var bl;var ode=p(()=>{St();nh();ZP();Xu();Wh();ide();$1();bl=class extends wb{constructor(e={}){super();this._mediator=new wb;this._fontLoader=new Yu(this);this._options=e;this._initOptions();this._initEvents();this._disposed=false;this._isReady=false;this._editor=new rde(this,this._options,this._mediator);if(this._options.editor.image){this._editor.setImage(this._options.editor.image)}this._mediator.once(Et.EVENTS.EDITOR_READY,()=>{this._isReady=true});ne.setLevel(this._options.logLevel)}export(...e){return this._editor.export(...e)}serialize(...e){return this._editor.serialize(...e)}deserialize(e){return this._editor.deserialize(e)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(e){if(!this._isReady){this._mediator.once(Et.EVENTS.EDITOR_READY,e)}else{e()}}createFilter(e){const t=new Dd(this,this._getOptions("filter"));return t.instantiateFilterWithIdentifier(e)}getTextDesignLayoutByID(e){const t=new on(this,this._getOptions("textDesign"));return new(t.getLayoutByIdentifier(e))}getTextDesignAssetManager(){return ge.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){const e=new ei(this,{fonts:Et.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true,isTextDesign:true});return e}_getOptions(e){const t=this.getEditor();const{controls:i}=t;let o={};if(i&&i.get(e)){o=i.get(e).defaultOptions}const n=t.getOptions();return dt.deepDefaults({},n.editor.controlsOptions[e]||{},o)}_initOptions(){this._options=dt.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:false,preloader:true,autoRun:true});this._options.editor=dt.defaults(this._options.editor||{},{enableZoom:true,enableDrag:true,enableExport:true,enableKeyboardControls:true,enablePositionSnapping:true,enableRotationSnapping:true,enableSave:false,enableLoad:false,pixelRatio:Math.max(typeof window!=="undefined"&&window.devicePixelRatio||1,1),preferredRenderer:"webgl",transparent:true,clearColor:[0,0,0,0],displayResizeMessage:true,maxMegaPixels:{},displayCloseButton:false,undoMode:"global",defaultControl:"filter",forceCrop:false,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame"],controlsOptions:{focus:{highQualityCanvasBlur:false}}});this._options.editor.snappingOptions=dt.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}});this._options.editor.snappingOptions.position=dt.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20});this._options.editor.snappingOptions.position.padding=dt.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1});this._options.editor.snappingOptions.rotation=dt.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20});this._options.editor.controlsOptions.focus=dt.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:false});this._options.editor.maxMegaPixels=dt.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10});this._options.editor.export=dt.defaults(this._options.editor.export||{},{format:"image/png",type:Ku.IMAGE,download:true,fileBasename:"photoeditorsdk-export",quality:.8});this._options.editor.save=dt.defaults(this._options.editor.save||{},{format:"text/json",download:true,fileBasename:"photoeditorsdk-save"});this._options.extensions=dt.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]});this._options.assets=dt.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null});if(!(this._options.editor.image instanceof window.Image)){const e=new window.Image;if(this._options.editor.image){e.src=this._options.editor.image;this._options.editor.image=e}}}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(e){this._editor.setImage(e)}getAssetPath(e,t=false,i=false){let{baseUrl:o,resolver:n}=this._options.assets;let s=`${o}/${e}`;n=n||(c=>{return c});if(e.match(/(ftp|http|https):\/\//)){s=e}const a=e.replace(/assets\//,"").split("/");const l=a[0];let u={};switch(l){case"art-filters":u={identifier:a[1],type:a[2].split(".")[0]};return n("art-filter",u);case"filters":u={identifier:a[1].replace(/\.png$/g,"")};return n("filter",u);case"fonts":u={identifier:a[1].replace(/\.(woff|otf|ttf)$/g,"")};return n("font",u);case"frames":u={identifier:a[1],filename:a[2]};return n("frame",u);case"overlays":u={identifier:a[1].replace(/\.(png|jpg|jpeg)$/g,"")};return n("overlay",u);case"stickers":{const c=a[3].endsWith(".svg");const d=a[3]==="thumbs";u={category:a[1],identifier:(c?a[3]:a[4]).replace(/\.(png|svg)$/g,""),variant:c?"svg":d?"thumb":"base"};return n("sticker",u)}case"text-design":u={type:a[1]==="fonts"?"font":"image",identifier:a[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")};return n("text-design",u)}if(typeof n!=="undefined"&&n!==null){s=n(s)}return s}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed){throw new Error("This instance of PhotoEditorSDK is already disposed.")}this._disposed=true;this._disposeEvents()}render(e){return this.deserialize(e).then(()=>this.export())}};bl.prototype.identifier="engine-wrapper";bl.Constants=Et;bl.Events=Et.EVENTS;bl.Utils=Ti;bl.JSONLoader=Yo;bl.SDK=ge});var Ob=p(()=>{ode()});var ye={};wt(ye,{absoluteToRelativePoint:()=>W$e,absoluteToRelativeSize:()=>q$e,getBaseLocalToWorldMatrix:()=>pw,getLocalToParentMatrix:()=>sde,getLocalToWorldMatrix:()=>Kh,getPointInWorldSpace:()=>RB,getRotationBetweenCoordinateSpaces:()=>G$e,getScalarInWorldSpace:()=>z$e,getSizeInOutputSpace:()=>U$e,getSizeInWorldSpace:()=>ade,pointFromSpaceToSpace:()=>Rb,rectTransformToAffineTransform:()=>AB,relativeToAbsolutePoint:()=>H$e,relativeToAbsoluteSize:()=>N$e,scalarFromSpaceToSpace:()=>OB,sizeFromSpaceToSpace:()=>L$e});function nde(r){return r.x!==void 0}function AB(r){return Be.fromTRS(r.position.x,r.position.y,r.rotation,r.scale.x,r.scale.y)}function M$e(r){if(r.getBaseLocalToParentMatrix){return r.getBaseLocalToParentMatrix()}return AB(r.getTransform())}function pw(r){const e=r.getParent();const t=M$e(r);if(e===void 0){return t}const i=pw(e);return Be.multiply(i,t)}function sde(r){if(r.getLocalToParentMatrix){return r.getLocalToParentMatrix()}return AB(r.getTransform())}function Kh(r){const e=r.getParent();const t=sde(r);if(e===void 0){return t}const i=Kh(e);return Be.multiply(i,t)}function Rb(r,e,t,i=false){const o=e.type==="output"&&i?pw(e):Kh(e);const n=t.type==="output"&&i?pw(t):Kh(t);const s=Be.getInverted(n);return Be.transformPoint(s,Be.transformPoint(o,r))}function OB(r,e,t){const i=new F(r,0);const o=new F(Rb(i,e,t));const n=new F(Rb(F.ZERO,e,t));return F.distance(n,o)}function L$e(r,e,t){const i=nde(r)?r.x:r.width;const o=nde(r)?r.y:r.height;const n=OB(i,e,t);const s=OB(o,e,t);return{width:n,height:s}}function RB(r,e){const t=Kh(e);return Be.transformPoint(t,r)}function z$e(r,e){const t=new F(r,0);const i=new F(RB(t,e));const o=new F(RB(F.ZERO,e));return F.distance(i,o)}function ade(r){const e=Kh(r);const t=r.getBounds();const i={x:t.width,y:0};const o={x:0,y:t.height};const n=new F(Be.transformPoint(e,F.ZERO));const s=new F(Be.transformPoint(e,i));const a=new F(Be.transformPoint(e,o));const l=F.distance(n,s);const u=F.distance(n,a);return{width:l,height:u}}function U$e(r,e){const t=ade(r);const i=e.getTransform().scale;const o={x:1/i.x,y:1/i.y};const n={width:t.width*o.x,height:t.height*o.y};return n}function N$e(r,e){const t=e.getBounds();return{width:r.width*t.width,height:r.height*t.height}}function q$e(r,e){const t=e.getBounds();return{width:r.width/t.width,height:r.height/t.height}}function H$e(r,e,t=true){const i=e.getBounds();return{x:r.x*i.width+(t?0:i.minX),y:r.y*i.height+(t?0:i.minY)}}function W$e(r,e,t=true){const i=e.getBounds();return{x:(r.x-(t?0:i.minX))/i.width,y:(r.y-(t?0:i.minY))/i.height}}function G$e(r,e){const t={x:1,y:0};const i=Rb(t,r,e,true);const o=Rb(F.ZERO,r,e,true);return Math.atan2(i.y-o.y,i.x-o.x)}var lde=p(()=>{W()});function mw(r){return typeof r!=="string"&&!Array.isArray(r)&&r.a===void 0}function hw(r){return typeof r!=="string"&&Array.isArray(r)&&r.length===3}function fw(r){return typeof r!=="string"&&!Array.isArray(r)&&r.a!==void 0}function gw(r){return typeof r!=="string"&&Array.isArray(r)&&r.length===4}function ude(r){return typeof r==="string"}var FB=p(()=>{});var cde=p(()=>{});var PB;var dde=p(()=>{W();PB=class{constructor(e,t){this.engine=t;this.transform=bt.IDENTITY;this.canvasPivot={x:0,y:0};this.previewQuality=1;this.canvas=e}get quality(){return this.previewQuality}setQuality(e){this.previewQuality=Math.min(Math.max(e,.01),1)}getTransform(){return this.transform}setTransform(e){this.transform=e}getPosition(){return this.transform.position}setPosition(e,t){let i;if(typeof e==="number"){i={x:e,y:t===void 0?e:t}}else{i=e}const{scale:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new bt(i,o,n))}getScale(){return this.transform.scale}setScale(e,t){let i;if(typeof e!=="number"){i=e}else{i={x:e,y:t===void 0?e:t}}const{position:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new bt(o,i,n))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t}=this.transform;const{scale:i}=this.transform;this.setTransform(new bt(t,i,e))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(e,t){if(typeof e==="number"){this.canvasPivot={x:e,y:typeof t===void 0?e:t}}else{this.canvasPivot=e}}getCanvasBounds(){const e=this.canvasPivot;const{width:t,height:i}=this.canvas;return new ur(-e.x*t,-e.y*i,t,i)}}});function yw(r){return r.getTransform!==void 0}function pde(r){return r.getContainer!==void 0}var mde=p(()=>{});var hde=p(()=>{});var fde=p(()=>{});var gde=p(()=>{});var yde=p(()=>{});var bde=p(()=>{});var _de=p(()=>{});var vde=p(()=>{});var xde=p(()=>{});var Cde=p(()=>{});var Sde=p(()=>{});var wde=p(()=>{});var Tde=p(()=>{});var Ide=p(()=>{});var Ede=p(()=>{});var kde=p(()=>{});var Dde=p(()=>{});var BB=p(()=>{lde();B();FB();cde();dde();mde();hde();fde();gde();yde();bde();_de();vde();xde();Cde();Sde();wde();Tde();Ide();Ede();kde();Dde()});var MB;var Ode=p(()=>{W();BB();MB=class extends mo{constructor(e){super();this.config=e}getOutputDimensions(){const e=this.getOutputContainer();if(!e){return{width:0,height:0}}return e.getResolution()}getSmallerOutputSide(){const e=this.getOutputContainer();if(!e){return 0}const t=e.getResolution();return Math.min(t.width,t.height)}convertPointFromPreviewIntoOutputSpace(e,t){const i=Be.getInverted(ye.rectTransformToAffineTransform(t));return Be.transformPoint(i,e)}convertPointFromPreviewIntoWorldSpace(e,t,i){const o=Be.getInverted(ye.rectTransformToAffineTransform(t));const n=i?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix();const s=Be.multiply(n,o);return Be.transformPoint(s,e)}convertPointFromPreviewIntoFlippedPreviewSpace(e){const t=this.getOutputContainer().getFlipTransformMatrix();return Be.transformPoint(t,e)}convertPointFromWorldIntoPreviewSpace(e,t){const i=ye.rectTransformToAffineTransform(t);const o=Be.getInverted(this.getOutputContainer().getLocalToParentMatrix());const n=Be.multiply(i,o);return Be.transformPoint(n,e)}convertPointFromOutputIntoPreviewSpace(e,t){const i=ye.rectTransformToAffineTransform(t);return Be.transformPoint(i,e)}getContainersAtPreviewPoint(e,t){const i=new Array;const o=this.convertPointFromPreviewIntoWorldSpace(e,t);const n=this.getRootContainers();for(const s of n){this.accumulateContainersAtWorldPointInHierarchy(o,s,i)}return i}isPreviewPointInContainer(e,t,i){const o=this.convertPointFromPreviewIntoWorldSpace(e,i);return this.isWorldPointInContainer(o,t)}isWorldPointInContainer(e,t){const i=ye.getLocalToWorldMatrix(t);const o=Be.getInverted(i);const n=Be.transformPoint(o,e);return ur.contains(t.getBounds(),n)}accumulateContainersAtWorldPointInHierarchy(e,t,i){if(this.isWorldPointInContainer(e,t)){i.push(t)}const o=t.getChildren();for(const n of o){if(yw(n)){this.accumulateContainersAtWorldPointInHierarchy(e,n,i)}}}}});var Vi=p(()=>{BB();Ode()});var Tr;var Hn=p(()=>{W();Tr=class{constructor(e){this.engine=e;this.id=Ge()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1){if(e[t].getID()===this.id){return t}}return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}isValid(){return this.getIndexInParent()!==-1}}});var LB;var zB=p(()=>{Hn();LB=class extends Tr{constructor(e,t,i){super(t);this.operation=i;this.type="adjustments";this.setProperties(e)}getProperties(){const e=this.operation.getOptions();const t=e.gamma-1;return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:(t<0?2*t:t)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:e.shadows*.5||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}}setProperties(e){if(e.gamma!==void 0){e.gamma=1+(e.gamma<0?.5*e.gamma:e.gamma)}if(e.shadows){e.shadows=e.shadows*2}this.operation.set(e)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}}});var ji;var Xh=p(()=>{Ob();FB();ji=r=>{if(fw(r)){return new ge.Color(r.r,r.g,r.b,r.a)}if(gw(r)){return new ge.Color(r[0],r[1],r[2],r[3])}if(mw(r)){return new ge.Color(r.r,r.g,r.b,1)}if(hw(r)){return new ge.Color(r[0],r[1],r[2],1)}if(ude(r)){const[e,t,i]=r.match(/[0-9A-fa-f]{1,2}/g);return new ge.Color(parseInt(e,16)/255,parseInt(t,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")}});var ot;var Zu=p(()=>{ot=class{get x(){return this._x}get y(){return this._y}constructor(e=0,t=0){this._x=e;this._y=t}set(e,t){this._x=e;this._y=t;return this}clone(){return new ot(this._x,this._y)}copy(e){this._x=e.x;this._y=e.y;return this}clamped(e=this,t=this){let i=typeof e==="number"?{x:e,y:e}:e;let o=typeof t==="number"?{x:t,y:t}:t;this._x=Math.max(i.x,this._x);this._y=Math.max(i.y,this._y);this._x=Math.min(o.x,this._x);this._y=Math.min(o.y,this._y);return this}divide(e,t){if(typeof e==="number"||e===null){this._x/=e;this._y/=typeof t==="undefined"?e:t}else{this._x/=e.x;this._y/=e.y}return this}subtract(e,t){if(typeof e==="number"||e===null){this._x-=e;this._y-=typeof t==="undefined"?e:t}else{this._x-=e.x;this._y-=e.y}return this}multiply(e,t){if(typeof e==="number"||e===null){this._x*=e;this._y*=typeof t==="undefined"?e:t}else{this._x*=e.x;this._y*=e.y}return this}add(e,t){if(typeof e==="number"||e===null){this._x+=e;this._y+=typeof t==="undefined"?e:t}else{this._x+=e.x;this._y+=e.y}return this}dot(e,t){if(typeof e==="number"||e===null){return this._x*e+this._y*(typeof t==="undefined"?e:t)}else{return this._x*e.x+this._y*e.y}}equals(e,t){if(typeof e==="number"||e===null){return e===this._x&&t===this._y}else{return e.x===this._x&&e.y===this._y}}flip(){let e=this._x;this._x=this._y;this._y=e;return this}round(){this._x=Math.round(this._x);this._y=Math.round(this._y);return this}ceil(){this._x=Math.ceil(this._x);this._y=Math.ceil(this._y);return this}floor(){this._x=this._x|0;this._y=this._y|0;return this}abs(){this._x=Math.abs(this._x);this._y=Math.abs(this._y);return this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(e){this._x=parseFloat(this._x.toFixed(e));this._y=parseFloat(this._y.toFixed(e));return this}asArray(e=false){if(e){return[this._y,this._x]}return[this._x,this._y]}static fromObject(e){return new ot(e.x,e.y)}static fromSize(e){return new ot(e.width,e.height)}static get NULL(){return new ot(0,0)}}});var Io;var Qu=p(()=>{W();Vi();Zu();Io=class{constructor(e){this.engine=e;this.id=Ge();this.transform=bt.IDENTITY;this.bounds=ur.ZERO}getID(){return this.id}getParent(){const e=this.engine.getRootContainers();if(e.length===0||this.id===e[0].id){return void 0}return e[0]}getIndexInParent(){const{rootOperations:e}=this.engine;for(let t=0;t<e.length;t+=1){if(e[t].getID()===this.id){return t}}return-1}setIndexInParent(e){this.engine.moveIndex(this,e)}getChildren(){const e=this.engine.getRootContainers();if(e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)){return this.engine.rootOperations}return[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(e,t,i){if(typeof t==="number"){this.setPivotInternal(t,i);e.setPivot(new ot(t,i))}else{this.setPivotInternal(t);e.setPivot(ot.fromObject(t))}}setPivot(e,t){this.setPivotInternal(e,t)}getPivot(){const e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}}getTransform(){return this.transform}setTransform(e){this.transform=e}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(e,t){let i;if(typeof e==="number"){i={x:e,y:t===void 0?e:t}}else{i=e}const{scale:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new bt(i,o,n))}getScale(){return this.transform.scale}setScale(e,t){let i;if(typeof e!=="number"){i=e}else{i={x:e,y:t===void 0?e:t}}const{position:o,rotation:n}=this.transform;this.setTransform(new bt(o,i,n))}getRotation(){return this.transform.rotation}setRotation(e){const{position:t,scale:i}=this.transform;this.setTransform(new bt(t,i,e))}getSizeInWorldSpace(){return ye.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return ye.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(e){const t=this.getBounds();this.setScale(e.width/t.width,e.height/t.height)}setSizeInOutputSpace(e){const t=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:e.width/t.x,height:e.height/t.y})}isValid(){return this.getIndexInParent()!==-1}setPivotInternal(e,t){const i=this.getBounds();if(typeof e==="number"){this.setBoundsFromSize(i.width,i.height,{x:e,y:t})}else{this.setBoundsFromSize(i.width,i.height,e)}}setBoundsFromSize(e,t,i=this.getPivot()){this.bounds=new ur(-i.x*e,-i.y*t,e,t)}}});var UB;var Rde=p(()=>{W();Vi();Xh();Qu();Zu();UB=class extends Io{constructor(e,t){super(t);this.type="drawing";this.drawing=e;this.operation=t.createSpriteOperation();this.sprite=this.operation.createBrush({});this.operation.addSprite(this.sprite);this.radialBrush=this.sprite._createRadialBrush();const i=t.getRootContainers()[0];const o=i.getBounds();this.bounds=new ur(0,0,o.width,o.height);this.setTransform(bt.IDENTITY);this.operation.setDirty(true);this.setData(e)}beginStroke(e){if(this.currentStroke){throw new Error("A brush stroke has already been started but not finished.")}if(e.id!=="imgly_brush_radial"){throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.")}this.currentBrush=e;this.currentStroke={brush:e,path:{controlPoints:[]}};this.radialBrush.setColor(ji(e.color));this.radialBrush.setHardness(e.hardness);this.radialBrush.setSize(e.size);this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(e,t=true){if(!this.currentStroke||!this.currentBrush||!this.currentPath){throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"')}if(this.currentStroke.path.controlPoints.length){const l=this.currentStroke.path.controlPoints;const u=l[l.length-1];const c=this.currentBrush.size/10;const d=Math.sqrt(e.x-u.x**2+(e.y-u.y**2));if(d<c){return}}const i=this.engine.getOutputContainer();const o=this.engine.getRootContainers()[0];const n=ye.pointFromSpaceToSpace(e,o,i,true);const s=ye.absoluteToRelativePoint(n,i,false);const a=i.getBounds();this.currentPath.addControlPoint(ot.fromObject(s));this.currentStroke.path.controlPoints.push(e);if(t){this.sprite.render(ot.fromObject({x:a.width,y:a.height}))}}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush){return}if(this.currentStroke.path.controlPoints.length){this.drawing.strokes.push(this.currentStroke)}this.currentStroke=void 0;this.currentBrush=void 0;this.currentPath.setClosed(true);const e=this.engine.getOutputContainer().getBounds();this.sprite.render(ot.fromObject({x:e.width,y:e.height}));this.currentPath=void 0}setData(e){this.drawing={...this.drawing,...e};if(this.drawing.strokes){this.drawing.strokes=[]}this.sprite.clearPersistCanvas();this.sprite.clearCanvas();this.sprite.setPaths([]);this.drawStrokes(e.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(e){e.forEach(t=>{this.beginStroke(t.brush);t.path.controlPoints.forEach(i=>{this.addPointToCurrentStroke(i,true)});this.endStroke()})}}});var NB;var qB=p(()=>{Hn();NB=class extends Tr{constructor(e,t,i,o){super(o);this.filterOperation=t;this.type="duotone-filter";t.set({intensity:i.colorIntensity});t.set({filter:e});o.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.filterOperation.getOptions();return{colorIntensity:e.intensity}}setProperties(e){const t=this.filterOperation.getOptions();let i=t.intensity;if(e.colorIntensity!==void 0){i=Math.min(Math.max(e.colorIntensity,0),1)}this.filterOperation.set({intensity:i})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var HB;var Ade=p(()=>{HB=class{constructor(e,t){this.engine=t;this.loaded=false;this.loading=false;this.asset={...e}}async load(){if(this.loaded){return Promise.resolve()}if(this.loading){return Promise.reject(new Error("Called Frame#load while it's already loading"))}this.loading=true;const{imageGroups:e}=this.asset;const t=[];["top","left","right","bottom"].forEach(i=>{if(!e[i]){return}const o=e[i];["start","mid","end"].forEach(n=>{if(!(n in o)){return}t.push(this.loadPart(i,n))})});return Promise.all(t).then(()=>{this.loaded=true;this.loading=false}).catch(()=>{this.loaded=false;this.loading=false})}getFrame(){return{...this.asset,defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI}}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||false}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}async loadPart(e,t){return new Promise((i,o)=>{const{imageGroups:n}=this.asset;const s=n[e][t];let a=s;if(typeof s!=="string"&&"image"in s){a=s.image}const l=new Image;l.addEventListener("load",()=>{if(typeof s!=="string"){this.asset.imageGroups[e][t].image=l}else{this.asset.imageGroups[e][t]=l}i(l)});l.addEventListener("error",()=>{o(new Error(`Failed to load image at ${l.src}`))});l.crossOrigin=this.engine.configuration.crossOrigin||"anonymus";l.src=this.engine.assetProvider.getAssetSource("frame",a)})}}});var WB;var Fde=p(()=>{Xh();Hn();WB=class extends Tr{constructor(e,t,i){super(i);this.frameOperation=e;this.type="frame";this.setProperties(t);i.pesdk.setAllOperationsToDirty()}setProperties(e){this.props={...this.props,...e};if(typeof e.opacity==="number"){this.frameOperation.set({alpha:e.opacity})}if(e.tintColor){this.frameOperation.set({tintColor:ji(e.tintColor)})}if(e.width){const t=this.engine.getOutputContainer().getBounds();const i=Math.min(t.width,t.height);const o=e.width/i;this.frameOperation.set({scale:o})}this.frameOperation.setDirty(true)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}}});var GB;var VB=p(()=>{Vi();Hn();GB=class extends Tr{constructor(e,t,i){super(t);this.blurOperation=i;this.type="gaussian-blur";this.setProperties(e)}getProperties(){const e=this.engine.getOutputContainer();const t=e.getBounds();const i=Math.min(t.size.width,t.size.height);const o=ye.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*i,e,this.getContainer());return{blurRadius:o}}setProperties(e){if(e.blurRadius!==void 0){const t=this.engine.pesdk.getOutputDimensions();const i=Math.min(t.x,t.y);const o=this.getContainer();const n=this.engine.getOutputContainer();const s=ye.scalarFromSpaceToSpace(e.blurRadius,o,n);const a=s/i;this.blurOperation.set({blurRadius:a})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}}});var bw;var jB=p(()=>{W();Vi();Qu();bw=class extends Io{constructor(e,t){super(t);this.data=e;this.type="image";this.dispose=()=>{var e;if(((e=this.data)==null?void 0:e.image)instanceof HTMLCanvasElement){st(this.data.image)}};const i=t.configuration.downscaleOptions;if(!i){this.downscaleOptions={maxDimensions:{width:t.maxTextureDimension,height:t.maxTextureDimension}}}else{const{maxDimensions:n}=i;this.downscaleOptions={maxMegaPixels:i.maxMegaPixels,maxDimensions:{width:Math.min(t.maxTextureDimension,n?n.width:Number.MAX_VALUE),height:Math.min(t.maxTextureDimension,n?n.height:Number.MAX_VALUE)}}}this.setData(e);const{image:o}=this.data;this.bounds=new ur(F.ZERO,{width:o.width,height:o.height})}setData(e){this.data={...this.data,...e};if(e.image){let{image:t}=e;let i;if(t instanceof HTMLImageElement){i=this.engine.pesdk.parseExif(t);if(i){const n=i.getTags();if(n&&n.Orientation){const s=n.Orientation!==1&&n.Orientation!==2;const a=[2,4,5,7].indexOf(n.Orientation)!==-1;if(s||a){if(Mt()||po()||!CSS.supports("image-orientation","from-image")){const l=this.engine.pesdk.createOperation("exif-orientation",{},false);l.setTags(n);t=l.applyTo(t)}i.setOrientation(1);n.Orientation=1}}}}const o=new ey(t,this.downscaleOptions);o.on("imageDownscaled",({width:n,height:s})=>{this.engine.emit("imageDownscaled",{width:n,height:s})});o.on("beganImageDownscaling",()=>{this.engine.emit("beganImageDownscaling")});t=o.downscaleIfNecessary();this.data.image=t;this.engine.pesdk.setImage(t,i);this.setBoundsFromSize(t.width,t.height)}}getData(){return this.data}setPivot(e,t){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}}});var $B;var KB=p(()=>{W();Vi();Hn();$B=class extends Tr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="linear-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props={...this.props,...e};const t=this.blurOperation.getOptions();const i=this.engine.getOutputContainer();const o=i.getBounds();const n=this.getContainer();const s=i.getBaseLocalToParentMatrix();const a=ye.getBaseLocalToWorldMatrix(n);const l=Be.multiply(Be.getInverted(s),a);const u=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){const c=ye.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=c/u}if(e.start!==void 0){const c=Be.transformPoint(l,e.start);const d=ye.absoluteToRelativePoint(c,i,false);t.controlPoint1=d}if(e.end!==void 0){const c=Be.transformPoint(l,e.end);const d=ye.absoluteToRelativePoint(c,i,false);t.controlPoint2=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}}});var XB;var YB=p(()=>{Hn();XB=class extends Tr{constructor(e,t,i,o){super(o);this.filter=e;this.filterOperation=t;this.props=i;this.type="lut-filter";t.set({intensity:i.intensity});t.set({filter:e});o.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.filterOperation.getOptions();return{intensity:e.intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(e){const t=this.filterOperation.getOptions();const i=typeof e.intensity==="number"?e.intensity:t.intensity;this.filterOperation.set({intensity:i})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var JB;var ZB=p(()=>{W();Vi();Hn();JB=class extends Tr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="mirrored-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props={...this.props,...e};const t=this.blurOperation.getOptions();const i=this.engine.getOutputContainer();const o=i.getBounds();const n=this.getContainer();const s=i.getBaseLocalToParentMatrix();const a=ye.getBaseLocalToWorldMatrix(n);const l=Be.multiply(Be.getInverted(s),a);const u=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){const c=ye.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=c/u}if(e.gradientSize!==void 0){const c=ye.scalarFromSpaceToSpace(e.gradientSize,n,i);const d=c/u;t.gradientSize=d}if(e.clearAreaWidth!==void 0){const c=ye.scalarFromSpaceToSpace(e.clearAreaWidth,n,i);const d=c/u;t.size=d*.5}if(e.mirrorAxisOrigin!==void 0){const c=Be.transformPoint(l,e.mirrorAxisOrigin);const d=ye.absoluteToRelativePoint(c,i,false);t.start=d}if(e.mirrorAxisDirection!==void 0){const c=Be.transformPoint(l,e.mirrorAxisDirection);const d=ye.absoluteToRelativePoint(c,i,false);t.end=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}}});var _w;var QB=p(()=>{W();Vi();Qu();Zu();_w=class extends Io{constructor(e,t,i,o){super(o);this.settings=e;this.operation=t;this.flipOperation=i;this.type="output";this.flipTransform=Be.IDENTITY;this.blockTransformUpdate=false;this.transformUpdateWhileBlock=false;this.bounds=new ur({x:0,y:0},this.settings.resolution);this.setData(e)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=false;this.blockTransformUpdate=true}resumeChildrenUpdates(){this.blockTransformUpdate=false;if(this.transformUpdateWhileBlock){this.updateChildrenContainers()}}setData(e){this.settings={...this.settings,...e};if(e.resolution){this.setBoundsFromSize(e.resolution.width,e.resolution.height);this.setTransform(this.transform);this.operation.set({outputResolution:new ot(e.resolution.width,e.resolution.height)})}if(e.flipHorizontally!==void 0){const t=e.flipHorizontally;this.updateFlipTransform();this.flipOperation.set({flipHorizontally:t})}if(e.flipVertically!==void 0){const t=e.flipVertically;this.updateFlipTransform();this.flipOperation.set({flipVertically:t})}this.operation.setDirty(true);this.flipOperation.setDirty(true)}getData(){return this.settings}setResolution(e){this.setData({resolution:e})}getResolution(){return this.getData().resolution}setTransform(e){if(this.transform.rotation!==e.rotation||this.transform.position!==e.position||this.transform.scale!==e.scale){this.transform=e;const t=this.flipTransform;this.flipTransform=Be.IDENTITY;const i=this.engine.getRootContainers()[0];const o=ye.pointFromSpaceToSpace({x:0,y:0},i,this);const n=-e.rotation;const s=ot.fromObject(o).clone().subtract(ot.fromObject(this.getBounds().origin));this.operation.set({pivot:new ot(0,0),position:s,scale:new ot(1/e.scale.x,1/e.scale.y),rotation:n});this.flipTransform=t;this.operation.setDirty(true);this.updateChildrenContainers()}}rotate(e,t){const i=this.getPivot();const o=this.getBounds();const n={x:o.midX,y:o.midY};const s=ye.getPointInWorldSpace(n,this);this.setPivot(.5,.5);this.setPosition(s);this.setRotation(e);this.setResolution(t);const a={x:-t.width*(.5-i.x),y:-t.height*(.5-i.y)};const l=ye.getPointInWorldSpace(a,this);this.setPivot(i);this.setPosition(l);this.updateChildrenContainers()}setPivot(e,t){super.setPivotInternal(e,t);this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return ye.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){const e=ye.rectTransformToAffineTransform(this.getTransform());return Be.multiply(e,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return true}getOperation(){return this.operation}updateFlipTransform(){const{flipHorizontally:e,flipVertically:t}=this.settings;if(!e&&!t){this.flipTransform=Be.IDENTITY}else{const i=this.getPivot();const o=this.getBounds();const n=e?-1:1;const s=e?-2*(i.x-.5)*o.width:0;const a=t?-1:1;const l=t?-2*(i.y-.5)*o.height:0;this.flipTransform=new Be(n,0,0,a,s,l)}}updateChildrenContainers(){if(this.blockTransformUpdate){this.transformUpdateWhileBlock=true;return}this.engine.rootOperations.forEach(e=>{if(yw(e)){e.updateTransform();if("updateData"in e){e.updateData()}}else if("updateProperties"in e){e.updateProperties()}})}}});var vw;var eM=p(()=>{Hn();vw=class extends Tr{constructor(e,t,i){super(i);this.overlayOperation=e;this.type="overlay";const o=t.blendMode||i.mapBlendMode(e.getBlendMode());e.set({blendMode:i.reverseMapBlendMode(o)});e.set({image:t.image});i.pesdk.setAllOperationsToDirty()}getProperties(){const e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}}setProperties(e){const t=this.overlayOperation.getOptions();if(typeof e.opacity==="number"){t.alpha=e.opacity}if(e.blendMode!==void 0){t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)}this.overlayOperation.set(t);this.overlayOperation.setDirty(true)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(e){this.overlayOperation.setFlipHorizontally(e)}setFlipVertically(e){this.overlayOperation.setFlipVertically(e)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}}});var tM;var rM=p(()=>{W();Vi();Hn();tM=class extends Tr{constructor(e,t,i){super(t);this.props=e;this.blurOperation=i;this.type="radial-blur";this.setProperties(e)}getProperties(){return this.props}setProperties(e){this.props={...this.props,...e};const t=this.blurOperation.getOptions();const i=this.engine.getOutputContainer();const o=i.getBounds();const n=this.getContainer();const s=i.getBaseLocalToParentMatrix();const a=ye.getBaseLocalToWorldMatrix(n);const l=Be.multiply(Be.getInverted(s),a);const u=Math.min(o.size.width,o.size.height);if(e.blurRadius!==void 0){const c=ye.scalarFromSpaceToSpace(e.blurRadius,n,i);t.blurRadius=c/u}if(e.center!==void 0){const c=Be.transformPoint(l,e.center);const d=ye.absoluteToRelativePoint(c,i,false);t.position=d}if(e.radius!==void 0){const c=ye.scalarFromSpaceToSpace(e.radius,n,i);const d=c/u;t.radius=d}if(e.gradientSize!==void 0){const c=ye.scalarFromSpaceToSpace(e.gradientSize,n,i);const d=c/u;t.gradientRadius=d}this.blurOperation.set(t)}updateProperties(){const e=this.getProperties();this.setProperties(e)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}}});var xw;var Pde=p(()=>{W();Vi();Xh();Qu();Zu();xw=class extends Io{constructor(e,t){super(t);this.data=e;this.type="sticker";let i=e.image;const o=this.engine.pesdk.parseExif(e.image);if(o){const s=o.getTags();if(s&&s.Orientation){const a=s.Orientation!==1&&s.Orientation!==2;const l=[2,4,5,7].indexOf(s.Orientation)!==-1;if(a||l){const u=this.engine.pesdk.createOperation("exif-orientation",{},false);u.setTags(s);i=u.applyTo(e.image);o.setOrientation(1);s.Orientation=1}}}const n=new ey(i,{maxMegaPixels:{desktop:10,mobile:5}});i=n.downscaleIfNecessary();this.operation=t.createSpriteOperation();this.sprite=this.operation.createSticker({identifier:"",image:i,position:new ot(0,0),dimensions:new ot(1,1),rotation:0,smoothDownscaling:false});this.operation.addSprite(this.sprite);this.bounds=new ur({x:0,y:0},{width:i.width,height:i.height});this.setTransform(bt.IDENTITY);this.sprite.setPivot(new ot(0,0));this.operation.setDirty(true);this.setData(e)}setData(e){this.data={...this.data,...e};if(e.id){this.id=e.id}if(Wo(e.opacity)&&e.opacity>=0){this.sprite.setAlpha(e.opacity)}if(e.tintColor){this.sprite.setTintColor(ji(e.tintColor))}if(e.tintMode){this.sprite.setTintMode(e.tintMode)}this.operation.setDirty(true)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer();const i=this.getParent();const o={width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y};const n=ye.sizeFromSpaceToSpace(o,i,t);this.sprite.setDimensions(ot.fromSize(n));const s=ye.pointFromSpaceToSpace(e.position,i,t,true);const a=ye.absoluteToRelativePoint(s,t,false);this.sprite.setPosition(new ot(a.x,a.y));const l=ye.getRotationBetweenCoordinateSpaces(i,t);const u=e.rotation+l;this.sprite.setRotation(u);this.operation.setDirty(true)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}}});var Yh,j$e,Ab;var Jh=p(()=>{Yh=r=>{return 2*Math.PI-r};j$e=r=>{return-r};Ab=({rotation:r,outputRotation:e=0,flipHorizontally:t,flipVertically:i})=>{let o=r;if(t){o=Yh(o)}if(i){o=j$e(o)}return o+e}});function $$e(r,e){if(e){const t=1/e.unitsPerEm*r;const i=e.ascender*t;const o=e.descender*t;return i+Math.abs(o)}return r*1.1}function ip(r,e,t,i,o,n,s){r.font=`${t.fontStyle||"normal"} ${t.fontWeight||"normal"} ${i}px "${t.fontFamily}"`;const a=new Cw(r);a.setText(e);a.setMaxWidth(n);const l=a.getLines().map(m=>{return m.replace(/\s+$/i,"")});const u=$$e(i,s);const c=u*o;const d=u/5;return{width:n+d*2,height:l.length*c+d*2}}var Cw;var iM=p(()=>{Cw=class{constructor(e){this.context=e;this.sourceLines=[];this.maxWidth=100}static buildWords(e){const t=[];let i="";const o=e.length;for(let n=0;n<o;n+=1){const s=e[n];i+=s;if(s===" "||s==="-"||n===o-1){t.push(i);i=""}}return t}getLines(){let e=[];let t=[];const i=this.sourceLines.length;for(let o=0;o<i;o+=1){const n=this.sourceLines[o];const s=Cw.buildWords(n);const a=s.length;for(let l=0;l<a;l+=1){const u=s[l];const c=t.concat(u).join("").replace(/\s+$/i,"");const d=this.getWidth(c);if(d>this.maxWidth){if(t.length>0){e.push(t.join(""));t=[u]}const m=u.replace(/\s+$/i,"");if(this.getWidth(m)>this.maxWidth){const h=this.splitWord(u);e=e.concat(h.lines);if(h.rest){t=[h.rest]}}}else{t.push(u)}}e.push(t.join(""));t=[]}return e}splitWord(e){const t={lines:[],rest:null};const i=e.length;let o=[];for(let n=0;n<i;n+=1){const s=e[n];if(this.getWidth(o.concat(s).join(""))>this.maxWidth){if(o.length>0){t.lines.push(o.join(""))}o=[s]}else{o.push(s)}if(n===i-1&&o.length>0){t.rest=o.join("")}}return t}getWidth(e){return this.context.measureText(e).width}setText(e){this.sourceLines=e.split("\n")}setMaxWidth(e){this.maxWidth=e}}});var _l;var Bde=p(()=>{W();Jh();Vi();Xh();Qu();iM();Zu();_l=class extends Io{constructor(e,t){super(t);this.text=e;this.type="text";if(!_l.measureContext){const l=document.createElement("canvas");_l.measureContext=l.getContext("2d")}this.operation=t.createSpriteOperation();const i=this.engine.getOutputContainer();const o=this.getParent();const n=i.getBounds();this.sprite=this.operation.createText({text:e.text,position:new ot(0,0),rotation:0,fontSize:ye.scalarFromSpaceToSpace(e.fontSize/n.height,o,i),lineHeight:e.lineHeight,fontIdentifier:e.fontIdentifier,alignment:e.alignment,color:ji(e.textColor),backgroundColor:ji(e.backgroundColor),maxWidth:ye.scalarFromSpaceToSpace(e.width/n.width,o,i)});const s=t.assetProvider.getFontManager().getFontWithId(e.fontIdentifier);this.sprite.setFontFamily(s.fontFamily);this.sprite.setFontWeight(s.fontWeight||"normal");this.sprite.setFontStyle(s.fontStyle||"normal");this.sprite.setFontIdentifier(s.identifier);this.sprite.setTextMetrics(s.textMetrics);this.sprite.setPivot(new ot(0,0));this.operation.addSprite(this.sprite);const a=ip(_l.measureContext,e.text,s,e.fontSize,e.lineHeight,e.width,s.textMetrics);this.bounds=new ur(0,0,a.width,a.height);this.setTransform(bt.IDENTITY);this.operation.setDirty(true)}setData(e){this.text={...this.text,...e};const t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier){this.sprite.setFontFamily(t.fontFamily);this.sprite.setFontWeight(t.fontWeight||"normal");this.sprite.setFontStyle(t.fontStyle||"normal");this.sprite.setFontIdentifier(t.identifier);this.sprite.setTextMetrics(t.textMetrics)}if(e.id){this.id=e.id}if(e.text){this.sprite.setText(e.text)}if(e.fontSize){const o=this.engine.getOutputContainer();const n=this.getParent();const s=ye.scalarFromSpaceToSpace(e.fontSize,n,o);const a=o.getBounds();this.sprite.setFontSize(s/a.height)}if(e.alignment){this.sprite.setAlignment(e.alignment)}if(e.lineHeight){this.sprite.setLineHeight(e.lineHeight)}if(e.textColor){this.sprite.setColor(ji(e.textColor))}if(e.backgroundColor){this.sprite.setBackgroundColor(ji(e.backgroundColor))}if(e.width){const o=this.engine.getOutputContainer();const n=this.getParent();const s=ye.scalarFromSpaceToSpace(e.width,n,o);const a=o.getBounds();this.sprite.setMaxWidth(s/a.width)}const i=ip(_l.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(i.width,i.height);this.operation.setDirty(true)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer();const i=this.getParent();const o=ye.pointFromSpaceToSpace(e.position,i,t,true);const n=ye.absoluteToRelativePoint(o,t,false);this.sprite.setPosition(new ot(n.x,n.y));const s=ye.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+s);this.operation.setDirty(true)}setPivot(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}getOperation(){return this.operation}setFlipHorizontally(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e}));this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e}));this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:e,flipHorizontally:t}){const i=e||this.getFlipVertically();const o=t||this.getFlipHorizontally();let n=this.getRotation();if(i||o){n=Yh(n)}return n}}});var oM,op;var Mde=p(()=>{W();Vi();Xh();Qu();Zu();oM=1e3;op=class extends Io{constructor(e,t,i){super(i);this.textDesign=e;this.layout=t;this.type="text-design";this.currentLayoutSize=void 0;this.layoutID=t.identifier;this.operation=i.createSpriteOperation();const o=this.engine.getOutputContainer();const n=this.getParent();const s=o.getBounds();const a=Math.min(s.width,s.height);t.seed(e.seed);this.bounds=this.calculateBounds(this.textDesign,this.layout);const l=e.width;this.sprite=this.operation.createTextDesign({text:e.text,layout:t,inverted:e.inverted,color:ji(e.color),width:ye.scalarFromSpaceToSpace(e.width/a,n,o),padding:e.padding/l,seed:e.seed});this.updatePivot();this.operation.addSprite(this.sprite);this.setTransform(bt.IDENTITY);this.operation.setDirty(true)}static stringify(e){return JSON.stringify(e,op.serializer())}static serializer(){const e=[];const t=[];const i=(o,n)=>{if(e[0]===n)return"[Circular ~]";return`[Circular ~.${t.slice(0,e.indexOf(n)).join(".")}]`};return function o(n,s){const a=this;if(e.length>0){const l=e.indexOf(a);if(~l){e.splice(l+1);t.splice(l,Infinity,n)}else{e.push(a);t.push(n)}if(~e.indexOf(s)){s=i.call(a,n,s)}}else{e.push(s)}return s}}calculateBounds(e,t,i=true){const o=e.inverted&&i?Math.max(0,2*e.padding):0;const n=e.width/oM;if(this.currentLayoutSize===void 0){t.seed(e.seed);const s=t.generateLayoutData(e.text,oM);this.currentLayoutData=s;this.currentLayoutSize=s.getSize()}return new ur(0,0,this.currentLayoutSize.width*n+o,this.currentLayoutSize.height*n+o)}findNextUniqueSeed(e,t,i){let o=i;const n=this.currentLayoutData?op.stringify(this.currentLayoutData.getRows()):"";let s;for(let a=0;a<20;a+=1){t.seed(o);s=t.generateLayoutData(e.text,oM);if(n===op.stringify(s.getRows())){o+=1}else{break}}t.seed(o);this.currentLayoutData=s;return o}setData(e){this.textDesign={...this.textDesign,...e};if(e.id){this.id=e.id}if(e.padding!==void 0){const t=this.textDesign.width;this.sprite.setPadding(e.padding/t)}else if(e.width){this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width}if(e.seed!==void 0){if(e.seed<0){e.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now());this.textDesign.seed=e.seed}this.currentLayoutSize=void 0;this.layout.seed(e.seed);this.sprite.setSeed(e.seed);this.sprite.setLayout(this.layout)}if(e.color){this.sprite.setColor(ji(e.color))}if(e.inverted!==void 0){this.sprite.setInverted(e.inverted)}if(e.text){this.currentLayoutSize=void 0;this.sprite.setText(e.text)}if(e.width){const t=this.engine.getOutputContainer();const i=this.getParent();const o=t.getBounds();const n=Math.min(o.width,o.height);const s=ye.scalarFromSpaceToSpace(e.width/n,i,t);this.sprite.setWidth(s)}if(e.padding!==void 0||e.seed!==void 0||e.inverted!==void 0||e.text||e.width){const t=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(t.width,t.height);this.updatePivot()}this.operation.setDirty(true)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(e){super.setTransform(e);const t=this.engine.getOutputContainer();const i=this.getParent();if(e.scale.x!==1||e.scale.y!==1){throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.")}const o=ye.pointFromSpaceToSpace(e.position,i,t,true);const n=ye.absoluteToRelativePoint(o,t,false);this.sprite.setPosition(new ot(n.x,n.y));const s=ye.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+s);this.operation.setDirty(true)}setPivot(e,t){if(typeof e==="number"){super.setPivot(e,t)}else{super.setPivot(e)}this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(e){this.sprite.setFlipHorizontally(e)}setFlipVertically(e){this.sprite.setFlipVertically(e)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){const e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0;const t=new F(this.bounds.width-2*e,this.bounds.height-2*e);const i=this.getPivot();const o=new F(i.x*this.bounds.width,i.y*this.bounds.height);const n=new F(e,e);const s=o.subtract(n);const a=s.divide(t);this.sprite.setPivot(new ot(a.x,a.y))}}});var Ir,Sw,Zh;var Lde=p(()=>{Ob();ze();B();W();Vi();zB();Rde();qB();Ade();Fde();VB();jB();KB();YB();ZB();QB();eM();rM();Pde();Bde();Mde();Zu();({BLEND_MODES:Ir}=ge.Operations.OverlayOperation);Sw="imgly_font_open_sans_bold";Zh=class extends MB{constructor(e){super(e);this.previews=Array();this.rootOperationStack=[];this.deferredRenderQueue=[];this.operationStackOffset=1;this.enforceOperationOrder=()=>{this.refreshFlipIndex();this.refreshFrameIndex()};this.isSpriteTop=e=>{const t=this.rootOperationStack.findIndex(({id:o})=>e===o);let i=1;if(this.rootOperationStack.find(o=>o.type==="frame")){i+=1}return t+i===this.rootOperationStack.length};this.setWatermarkOpacity=e=>{const t=this.sdk.getOperationsStack();const i=t.getByIdentifier("watermark");if(i){i.set({alpha:e})}};var i,o;this.assetProvider=e.assetProvider||new ny;let t;if(((i=e==null?void 0:e.watermark)==null?void 0:i.watermarkURI)&&typeof e.watermark.watermarkURI==="string"&&e.watermark.watermarkURI.slice(0,5)==="data:"){t=e.watermark.watermarkURI}else if(((o=e==null?void 0:e.watermark)==null?void 0:o.watermarkURI)&&typeof e.watermark.watermarkURI==="string"&&e.watermark.watermarkURI.trim()){t=_s(e.watermark.watermarkURI)?e.watermark.watermarkURI:this.assetProvider.getPath(e.watermark.watermarkURI)}this.wrapper=new bl({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:(n,s)=>{return this.resolveAssetForSDK(n,s)}},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1,clearColor:ve(e.backgroundColor)},watermark:{...ve(e.watermark),watermarkURI:t}});this.editor=this.wrapper.getEditor();this.sdk=this.editor.getSDK();this.sdk.setRenderMode("adapter");this.tempCanvas=document.createElement("canvas");this.sdk.setCanvas(this.tempCanvas);if(e.preferredRenderer==="webgl"){const n=document.createElement("canvas");const s=n.getContext("webgl")||n.getContext("experimental-webgl");this.maxTextureDimension=s.getParameter(s.MAX_TEXTURE_SIZE);st(n)}else{this.maxTextureDimension=Infinity}}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){st(this.tempCanvas);this.rootContainer.dispose();this.pesdk.dispose();this.wrapper.dispose()}render(e){return new Promise(t=>{const i=()=>{return new Promise(o=>{const{canvas:n}=e;const s=e.getTransform();const a=this.outputContainer.getPivot();const l=e.getCanvasBounds();const u=e.quality;const{tempCanvas:c}=this;this.sdk.setTextureQuality(u);const d=this.sdk.getOutputDimensions();c.width=d.x;c.height=d.y;this.sdk.getRenderer().resizeTo(new ot(c.width,c.height));return this.sdk.render(true).then(()=>{const m=n.getContext("2d");m.clearRect(0,0,n.width,n.height);m.save();m.translate(-l.minX,-l.minY);m.translate(s.position.x,s.position.y);m.rotate(s.rotation);m.scale(s.scale.x,s.scale.y);m.translate(-a.x*c.width,-a.y*c.height);m.scale(1/e.quality,1/e.quality);m.drawImage(c,0,0);m.restore();t();this.deferredRenderQueue.shift();if(this.deferredRenderQueue.length){this.sdk.setAllOperationsToDirty();Promise.resolve(this.deferredRenderQueue[0]().then(o))}else{o()}})})};this.deferredRenderQueue.push(i);if(this.deferredRenderQueue.length===1){i()}})}createPreview(e){const t=new PB(e,this);this.previews.push(t);return t}async export(e="image",t="image/png",i=1,o=true,n=false){return new Promise(s=>{const a=()=>{return new Promise(l=>{return this.sdk.export(this.mapToRenderType(e),this.mapToImageFormat(t),i,o,n).then(u=>{s(u);this.deferredRenderQueue.shift();if(this.deferredRenderQueue.length){Promise.resolve(this.deferredRenderQueue[0]().then(l))}else{l()}})})};this.deferredRenderQueue.push(a);if(this.deferredRenderQueue.length===1){a()}})}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(e){if(e===this.rootContainer.getID()){return this.rootContainer}return this.rootOperationStack.find(t=>t.getID()===e)}findEffectByID(e){return this.rootOperationStack.find(t=>t.getID()===e)}addImage(e,t,i){if(this.rootContainer){throw new Error("A background image already exists - did you mean to use addSticker?")}const o=new bw(e,this);this.rootContainer=o;if(!this.outputContainer){const{width:n,height:s}=o.getBounds();const a={resolution:{width:n,height:s},flipHorizontally:false,flipVertically:false};const l=this.sdk.createOperation("output",{},false);const u=this.sdk.createOperation("flip",{},false);this.insertIntoOperationsStack(l,this.operationStackOffset-1);this.insertIntoOperationsStack(u,this.operationStackOffset);this.outputContainer=new _w(a,l,u,this)}return o}addSticker(e,t,i){if(!t){throw new Error("This engine does not support adding stickers as root elements.")}this.ensureContainerIsRoot(t);const o=new xw(e,this);this.addToStackAtIndex(o,i);return o}addStickerFromAssets(e,t,i){if(!t){throw new Error("This engine does not support adding stickers as root elements.")}this.ensureContainerIsRoot(t);return new Promise((o,n)=>{const s=new Image;s.onload=()=>{const a={image:s,opacity:1};const l=new xw(a,this);this.addToStackAtIndex(l,i);o(l)};s.onerror=a=>{n(a)};s.crossOrigin=this.config.crossOrigin||null;s.src=this.assetProvider.getAssetSource("sticker",e)})}addText(e,t,i){if(!t){throw new Error("This engine does not support adding text as root elements.")}const o=this.assetProvider.getFontManager();if(!o.isFontLoaded(e.fontIdentifier||Sw)){throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!")}this.ensureContainerIsRoot(t);const n={text:"",fontIdentifier:Sw,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100,...e};const s=new _l(n,this);this.addToStackAtIndex(s,i);return s}addTextWithFontLoading(e,t,i){if(!t){throw new Error("This engine does not support adding text as root elements.")}const o=this.assetProvider.getFontManager();const n=e.fontIdentifier||Sw;return new Promise((s,a)=>{o.loadFontWithIdentifier(n).then(()=>{this.ensureContainerIsRoot(t);const l={text:"",fontIdentifier:Sw,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100,...e};const u=new _l(l,this);this.addToStackAtIndex(u,i);s(u)}).catch(a)})}async addTextDesignAsync(e="imgly_text_design_blocks",t,i,o){if(!i){throw new Error("This engine does not support adding TextDesign as a root element.")}const n={seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:false,width:100,...t};const s=this.wrapper.getTextDesignLayoutByID(e);if(!s){throw new Error(`The layout could not be loaded for the given id: ${e}`)}const a=s.getImagePaths().map(h=>{const f=h.split("/").pop()||"";return{path:h,fullPath:this.assetProvider.getAssetSource("textdesign",f)}});const l=this.wrapper.getTextDesignAssetManager();const u=this.wrapper.getTextDesignFontManager();const c=u.getVariationsByIdentifier();l.setFonts(c);await l.loadImages(a);s.onImagesLoaded();const d=Object.keys(c);const m=this.assetProvider.getFontManager();return m.loadFontsWithIdentifiers(d).then(()=>{this.ensureContainerIsRoot(i);const h=new op(n,s,this);this.addToStackAtIndex(h,o);return Promise.resolve(h)})}addDrawing(e,t,i){if(!t){throw new Error("This engine does not support DrawingContainers as root elements.")}this.ensureContainerIsRoot(t);const o=new UB(e,this);this.addToStackAtIndex(o,i);return o}addGaussianBlur(e,t,i){this.ensureContainerIsRoot(t);const o=new GB(e,this,this.sdk.createOperation("blur",{},false));this.addToStackAtIndex(o,i);return o}addRadialBlur(e,t,i){this.ensureContainerIsRoot(t);const o=new tM(e,this,this.sdk.createOperation("radial-focus",{},false));this.addToStackAtIndex(o,i);return o}addMirroredBlur(e,t,i){this.ensureContainerIsRoot(t);const o=new JB(e,this,this.sdk.createOperation("mirrored-focus",{},false));this.addToStackAtIndex(o,i);return o}addLinearBlur(e,t,i){this.ensureContainerIsRoot(t);const o=new $B(e,this,this.sdk.createOperation("linear-focus",{},false));this.addToStackAtIndex(o,i);return o}addDuoToneFilter(e,t,i){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(e,t,i){this.ensureContainerIsRoot(t);const o=this.sdk.getOperationsStack();const n=o.getByIdentifier("filter");if(n&&n.getIdentifier()!==e){this.sdk.removeOperation(n)}const s=n||this.sdk.createOperation("filter",{identifier:e},false);return new Promise((a,l)=>{try{const u=this.assetProvider.getDuotoneFilterAsset(e);const c={colorIntensity:u.defaultIntensity||0};const d=new ge.Operations.FilterOperation.Filters.DuoToneFilter({intensity:c.colorIntensity,lightColor:ge.Color.fromHex(u.lightColor),darkColor:ge.Color.fromHex(u.darkColor)});const m=new NB(d,s,c,this);this.addToStackAtIndex(m,i);a(m)}catch(u){if(u){l(u)}}})}addLUTFilter(e,t,i){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(e,t,i){this.ensureContainerIsRoot(t);const o=this.sdk.getOperationsStack();const n=o.getByIdentifier("filter");if(n&&n.getIdentifier()!==e){this.sdk.removeOperation(n)}const s=n||this.sdk.createOperation("filter",{identifier:e},false);return this.getLutFilterImage(e).then(a=>{const l=this.assetProvider.getLUTFilterAsset(e);const u={horizontalTileCount:l.horizontalTileCount||5,verticalTileCount:l.verticalTileCount||5,intensity:l.defaultIntensity||1};const c=new ge.Operations.FilterOperation.Filters.ThreeDLUTFilter({...u,image:a});const d={...u,lutImage:new Image};const m=new XB(c,s,d,this);this.addToStackAtIndex(m,i);return m})}getLutFilterImage(e){return new Promise((t,i)=>{nR({src:this.assetProvider.getAssetSource("filter",e),crossOrigin:this.config.crossOrigin||null,key:"filter",resolve:t,reject:i})})}addAdjustments(e,t,i){this.ensureContainerIsRoot(t);const o=new LB(e,this,this.sdk.createOperation("adjustments",{},false));this.addToStackAtIndex(o,i);return o}addOverlay(e,t,i){this.ensureContainerIsRoot(t);const o=new vw(this.sdk.createOperation("overlay",{},false),e,this);this.addToStackAtIndex(o,i);return o}addOverlayFromAssets(e,t,i){this.ensureContainerIsRoot(t);return new Promise((o,n)=>{nR({src:this.assetProvider.getAssetSource("overlay",e),crossOrigin:this.config.crossOrigin||null,key:"overlay",resolve:s=>{const a=this.sdk.getOperationsStack();const l=a.getByIdentifier("overlay");if(l&&l.getIdentifier()!==e){a.remove(l)}const u=l||this.sdk.createOperation("overlay",{},false);const c={image:s,opacity:1,blendMode:"normal"};const d=new vw(u,c,this);this.addToStackAtIndex(d,i);o(d)},reject:n})})}addFrame(e,t,i){throw new Error("Not supported!")}async addFrameFromAssets(e,t,i){this.ensureContainerIsRoot(t);const o=this.assetProvider.getFrameAsset(e);if(!o){throw new Error(`The requested asset does not exist! ${e}`)}const n=new HB(o,this);await n.load();const s=this.getOutputContainer().getBounds();const a=Math.min(s.width,s.height);const l=this.sdk.createOperation("frame",{},false);l.setFrame(n.getFrame());const u={opacity:1,tintColor:[1,1,1],tintable:false,width:Math.max(1,.1*a),imageGroups:n.getFrame().imageGroups};const c=new WB(l,u,this);this.addToStackAtIndex(c,i);return Promise.resolve(c)}removeEffect(e){if(!e.isValid()){return}const t=e;const i=t.getOperation();this.sdk.removeOperation(i);this.sdk.setAllOperationsToDirty();this.rootOperationStack.splice(e.getIndexInParent(),1)}removeContainer(e){if(!e.isValid()||e.type==="output"){return}const t=e;const i=t.getOperation();this.sdk.removeOperation(i);this.sdk.setAllOperationsToDirty();this.rootOperationStack.splice(e.getIndexInParent(),1)}refreshOutputIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)}refreshFlipIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("flip");const t=this.sdk.getOperationsStack().getStack().length-1;if(e!==t){this.moveInOperationsStack(e,t)}}refreshFrameIndex(){const e=this.sdk.getOperationsStack().getIndexByIdentifier("frame");const t=this.sdk.getOperationsStack().getStack().length-1;if(e!==-1&&e!==t){this.moveInOperationsStack(e,t)}}mapToRenderType(e){switch(e){case"image":return ge.RenderType.IMAGE;case"data-url":return ge.RenderType.DATAURL;case"blob":return ge.RenderType.BLOB;case"ms-blob":return ge.RenderType.MSBLOB;default:return ge.RenderType.IMAGE}}mapToImageFormat(e){switch(e){case"image/png":return ge.ImageFormat.PNG;case"image/jpeg":return ge.ImageFormat.JPEG;default:return null}}mapBlendMode(e){switch(e){case Ir.NORMAL:return"normal";case Ir.OVERLAY:return"overlay";case Ir.HARD_LIGHT:return"hardLight";case Ir.SOFT_LIGHT:return"softLight";case Ir.MULTIPLY:return"multiply";case Ir.DARKEN:return"darken";case Ir.LIGHTEN:return"lighten";case Ir.SCREEN:return"screen";case Ir.COLOR_BURN:return"colorBurn";default:return"normal"}}reverseMapBlendMode(e){switch(e){case"normal":return Ir.NORMAL;case"overlay":return Ir.OVERLAY;case"hardLight":return Ir.HARD_LIGHT;case"softLight":return Ir.SOFT_LIGHT;case"multiply":return Ir.MULTIPLY;case"darken":return Ir.DARKEN;case"lighten":return Ir.LIGHTEN;case"screen":return Ir.SCREEN;case"colorBurn":return Ir.COLOR_BURN;default:return Ir.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},false)}moveIndex(e,t){const i=this.getSiblingIndex(e);if(i===-1){throw new Error("The item to be moved is not part of any stack.")}this.moveInStack(this.rootOperationStack,i,t);const o=this.operationStackOffset;this.moveInOperationsStack(i+o,t+o);this.enforceOperationOrder()}ensureContainerIsRoot(e){const t=e.getID();if(t!==this.rootContainer.getID()){throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}}addToStackAtIndex(e,t){if(t&&t<0){throw new Error(`The given index may not be negative: ${t}`)}if(t===void 0){this.rootOperationStack.push(e)}else{this.rootOperationStack.splice(t,0,e)}const i=this.rootOperationStack.length-1;let o=t!==void 0?t:i;o+=this.operationStackOffset;if(pde(e)){this.insertIntoOperationsStack(e.getOperation(),o)}else{this.insertIntoOperationsStack(e.getOperation(),o)}this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(e,t){const i=this.sdk.getOperationsStack().getStack();const o=i.length;const n=Math.max(Math.min(t,o),0);for(let s=o-1;s>=n;s-=1){const a=i[s];i[s+1]=a}i[n]=e;this.sdk.setAllOperationsToDirty();this.enforceOperationOrder()}moveInStack(e,t,i){const o=e.length;const n=Math.max(Math.min(t,o-1),0);const s=Math.max(Math.min(i,o-1),0);if(n===s){return}const a=e[n];if(n<s){for(let l=n+1;l<=s;l+=1){e[l-1]=e[l]}}else{for(let l=n-1;l>=s;l-=1){e[l+1]=e[l]}}e[s]=a}moveInOperationsStack(e,t){const i=this.sdk.getOperationsStack().getStack();const o=i.length;const n=Math.min(Math.max(0,e),o-1);const s=Math.min(Math.max(0,t),o-1);if(n===s){return}const a=i[n];if(n<s){for(let l=n+1;l<=s;l+=1){i[l-1]=i[l]}}else{for(let l=n-1;l>=s;l-=1){i[l+1]=i[l]}}i[s]=a;this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(e){return e.getIndexInParent()}resolveAssetForSDK(e,t){t=t;switch(e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier);default:return""}return""}}});var ww;var zde=p(()=>{Ob();B();ww=class{constructor(e){this.isEmpty=false;this.isValid=false;this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel();this.areCustomAssetsAllowed=()=>this.isEmpty||!this.isValid||this.licenseChecker.areCustomAssetsAllowed();if(e&&e.length!==0){this.licenseChecker=new ge.LicenseChecker(e);this.isValid=this.licenseChecker.validate()}else if(e===""){this.isEmpty=true}}isToolAllowed(e){if(this.licenseChecker&&this.isValid&&e!=="customTool"){return this.licenseChecker.isToolAllowed(e)}return true}}});var Ude=p(()=>{Lde();Qu();Hn();jB();QB();VB();rM();ZB();KB();qB();YB();zB();eM();iM();zde()});var Ks=p(()=>{Ude();Vi()});var nM,Nde,Xs,Wn,$i,sM;var Ki=p(()=>{Ks();nM=r=>{let e=Number(r).toString(16);if(e.length<2){e=`0${e}`}return e};Nde=(r,e,t)=>{const i=nM(r*255);const o=nM(e*255);const n=nM(t*255);return`#${i}${o}${n}`};Xs=r=>{if(gw(r)){const[e,t,i,o]=r;return`rgba(${e*255}, ${t*255}, ${i*255}, ${o})`}if(fw(r)){const{r:e,g:t,b:i,a:o}=r;return`rgba(${e*255}, ${t*255}, ${i*255}, ${o})`}if(hw(r)){const[e,t,i]=r;return Nde(e,t,i)}if(mw(r)){const{r:e,g:t,b:i}=r;return Nde(e,t,i)}return r};Wn=r=>{return r.map(e=>({identifier:e.name,color:e.color,colorString:Xs(e.color)}))};$i={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};sM={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]}});var Tw;var aM=p(()=>{B();Tw=["library",["transform","filter","adjustment"],["focus","frame","overlay"],["text","textdesign","sticker","brush"]]});var ec;var Iw=p(()=>{B();W();aM();ec={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:["undo","redo","export","close"],displayResizeWarning:false,displayCloseWarning:true,displayCanvasRendererWarning:true,displayToolControlBarTitle:true,displaySerializationModal:true,displayDiscardChangesWarning:true,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:TK()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:true,scaleImageToFit:true,restrictZoomOutToDefault:true,forceCrop:false,assetBaseUrl:"assets/",defaultTool:"filter",tools:Tw,snapping:new _0,filter:new C0,focus:new S0,adjustment:new x0,library:new D0,overlay:new O0,sticker:new R0,text:new A0,textdesign:new P0,frame:new w0,brush:new F0,transform:new B0,export:{image:{exportType:"image",format:"image/png",quality:.9,enableDownload:true,transparent:true},filename:"photoeditorsdk-export"},custom:{},watermark:new v0}});var qde=p(()=>{});var np;var Ew=p(()=>{B();np={["brightness"]:0,["saturation"]:0,["contrast"]:0,["gamma"]:0,["clarity"]:0,["exposure"]:0,["shadows"]:0,["highlights"]:0,["whites"]:0,["blacks"]:0,["temperature"]:0,["sharpness"]:0}});var Ii=p(()=>{});var or;var Ys=p(()=>{W();or=class{constructor(e,t){this.assets=[];this.entityMapper=e=>{if("items"in e){return this.categoryMapper(e)}return this.itemMapper(e)};this.categoryMapper=e=>e?{...e,thumbnailURI:this.getCategoryThumbnailURI(e),name:this.config.locale[e.identifier]||e.name,items:e.items.map(this.itemMapper)}:null;this.itemMapper=e=>{return{...e,thumbnailURI:this.getItemThumbnailURI(e),name:this.config.locale[e.identifier]||("name"in e?e.name:"")}};this.getCategoryThumbnailURI=e=>{if(e.thumbnailURI){if(_s(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image"){return e.thumbnailURI}return this.config.getAssetPath(e.thumbnailURI||"")}return""};this.getItemThumbnailURI=e=>{var i;if((i=e.thumbnailURI)==null?void 0:i.trim()){if(_s(e.thumbnailURI)||e.thumbnailURI.substr(0,10)==="data:image"){return e.thumbnailURI}return this.config.getAssetPath(e.thumbnailURI||"")}const t=e[this.config.itemFallbackKey];if(!t)return"";return this.config.getAssetPath(t)};this.config=t;this.assets=e.map(this.entityMapper).filter(Boolean)}static isCategory(e){return Object.prototype.hasOwnProperty.call(e,"items")}get categories(){return this.assets.reduce((e,t)=>{if(or.isCategory(t)){return[...e,t]}return void 0},[]).filter(Boolean)}get items(){return this.assets.reduce((e,t)=>{if(or.isCategory(t)){return[...e,...t.items]}return[...e,t]},[]).filter(Boolean)}}});var vl;var Fb=p(()=>{vl=class{constructor(e,t){this.from=e;this.to=t}contains(e){return this.from<=e&&e<=this.to}clamp(e){return Math.min(Math.max(this.from,e),this.to)}}});var K$e,Qh;var Hde=p(()=>{ze();B();Fb();Ew();K$e=new vl(-1,1);Qh=class{constructor(e){this.editAdjustments=({type:e,value:t})=>{const i=K$e.clamp(t);this.state[e]=i};this.reset=()=>{lr(()=>{if(this.indexInContainer===-1){Object.keys(np).forEach(e=>{this.state[e]=np[e]});this.orderHelper.removeIndex("adjustment")}})};this.setAdjustmentEffect=e=>{const t=this.orderHelper.addIndex("adjustment");if(this.effect){this.effect.setProperties(e)}else{this.effect=this.engineMediator.engine.addAdjustments(e,this.engineMediator.image.container,t)}return this.effect.getProperties()};this.removeAdjustmentEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.engineMediator=e;this.state=np}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get orderHelper(){return this.engineMediator.orderHelper}};g([ae],Qh.prototype,"state",2);g([S],Qh.prototype,"editAdjustments",2);g([S],Qh.prototype,"reset",2)});var pt;var Wde=p(()=>{ze();B();W();Ii();Ys();Ew();Hde();pt=class{constructor(e){this.dirty=ae.box(false);this.isHistoryChanged=false;this.editAdjustments=({type:e,value:t})=>{this.isHistoryChanged=!(0,gr.default)(this.state[e],t);this.pureSetAdjustment({type:e,value:t});this.editor.render()};this.toolSnapshot=()=>{if((0,gr.default)(this.state,np)){this.dirty.set(false)}else{this.dirty.set(true)}if(this.isHistoryChanged){this.addSnapshot("edit","adjustment");this.isHistoryChanged=false}};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.toggleOptionSelection=e=>{this.selectedOption=e};this.pureSetAdjustment=({type:e,value:t})=>{const i=this.adjustmentsStore.setAdjustmentEffect({[e]:t});this.adjustmentsStore.editAdjustments({type:e,value:i[e]})};this.pureReset=()=>{this.dirty.set(false);this.adjustmentsStore.removeAdjustmentEffect();this.adjustmentsStore.reset();this.selectedOption=""};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=e=>{if((0,gr.default)(e,this.state)){return}if((0,gr.default)(e,np)){this.pureReset();return}lr(()=>{this.dirty.set(Object.values(e).some(t=>t!==0));Object.keys(e).forEach(t=>{this.pureSetAdjustment({type:t,value:e[t]})})})};this.updateStateFromSerialization=e=>{this.updateStateFromHistory(e)};this.editor=e;this.adjustmentsStore=new Qh(this.editor.engineMediator);this.selectedOption="";const t=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new or(t,{...this.config,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("adjustment")})}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const e=this.items.find(t=>t?t.identifier===this.selectedOption:false);return e?e.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["adjustment"]}get locale(){return this.editor.configStore.locale["adjustment"]}};g([ae],pt.prototype,"selectedOption",2);g([ae],pt.prototype,"dirty",2);g([S],pt.prototype,"editAdjustments",2);g([S],pt.prototype,"toggleOptionSelection",2);g([S],pt.prototype,"pureSetAdjustment",2);g([S],pt.prototype,"pureReset",2);g([S],pt.prototype,"reset",2);g([S],pt.prototype,"updateStateFromHistory",2);g([S],pt.prototype,"updateStateFromSerialization",2);g([w],pt.prototype,"selectedAdjustmentType",1);g([w],pt.prototype,"isDirty",1);g([w],pt.prototype,"state",1);g([w],pt.prototype,"selectedOptionLabel",1);g([w],pt.prototype,"brightness",1);g([w],pt.prototype,"saturation",1);g([w],pt.prototype,"contrast",1);g([w],pt.prototype,"gamma",1);g([w],pt.prototype,"clarity",1);g([w],pt.prototype,"exposure",1);g([w],pt.prototype,"shadows",1);g([w],pt.prototype,"highlights",1);g([w],pt.prototype,"whites",1);g([w],pt.prototype,"blacks",1);g([w],pt.prototype,"temperature",1);g([w],pt.prototype,"sharpness",1);g([w],pt.prototype,"categories",1);g([w],pt.prototype,"items",1);g([w],pt.prototype,"config",1);g([w],pt.prototype,"locale",1)});var lM=p(()=>{Ew();Wde()});var kw;var uM=p(()=>{kw={identifier:"identity",intensity:1,isDuotone:false}});var X$e,tc;var Gde=p(()=>{ze();B();Fb();uM();X$e=new vl(0,1);tc=class{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeIfDuotone=e=>{this.state.isDuotone=e};this.changeIntensity=e=>{const t=X$e.clamp(e);this.state.intensity=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=kw.identifier;this.state.intensity=kw.intensity;this.removeIndex()}};this.setFilterEffect=({identifier:e,intensity:t,isDuotone:i})=>{const o=this.state;const n=()=>{this.changeIdentifier(e);this.changeIntensity(t);this.changeIfDuotone(i)};this.removeFilterEffect();const s=this.engineMediator.orderHelper.addIndex("filter");if(i){return new Promise((a,l)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(e,this.engineMediator.image.container,s).then(u=>{n();this.effect=u;this.effect.setProperties({colorIntensity:t});a()}).catch(u=>{this.fallbackOnError(o);l(u)})})}return new Promise((a,l)=>{this.engineMediator.engine.addLUTFilterFromAssets(e,this.engineMediator.image.container,s).then(u=>{n();this.effect=u;this.effect.setProperties({intensity:t});a()}).catch(u=>{this.fallbackOnError(o);l(u)})})};this.removeFilterEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.setEffectProperties=({intensity:e})=>{if(this.effect){if(this.state.isDuotone){this.effect.setProperties({colorIntensity:e})}else{this.effect.setProperties({intensity:e})}return this.effect.getProperties()}return null};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("filter")};this.fallbackOnError=e=>{this.changeIdentifier(e.identifier);this.changeIntensity(e.intensity);if(e.identifier==="identity"){this.removeIndex()}};this.engineMediator=e;this.state=kw}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};g([ae],tc.prototype,"state",2);g([S],tc.prototype,"changeIdentifier",2);g([S],tc.prototype,"changeIfDuotone",2);g([S],tc.prototype,"changeIntensity",2);g([S],tc.prototype,"reset",2)});var Vde,Dw,nr;var jde=p(()=>{Vde=v(Nm());ze();B();W();Ii();Ys();Gde();Dw="identity";nr=class{constructor(e){this.throttledRender=(0,Vde.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFilter=async(e,t=1)=>{if(e!==this.identifier){const i=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:this.isOptionDuoTone(e)});if(this.selectedCategory===Dw){this.selectedCategory=i}this.editor.render();this.addSnapshot("add","filter")}};this.changeIntensity=e=>{const t=this.isOptionDuoTone(this.identifier);const i=this.filterStore.setEffectProperties({intensity:e});if(i){const o=t?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(o);this.throttledRender()}};this.setImageAndGetPreviews=async()=>{const{image:e}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(e);await this.getAllFilterPreview()};this.getAllFilterPreview=async()=>{const e=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)}));const t=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(e);await this.editor.wait();const{config:i}=this;const o=this.editor.configStore.assetProvider.getAssets("filter").map(n=>{return{...n,items:n.items.map(s=>({...s,thumbnailURI:t[s.identifier]}))}});this.entityManager=new or(o,{...i,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderIntensity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.selectedCategory=Dw;this.filterStore.removeFilterEffect();this.filterStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?Dw:e};this.updateStateFromSerialization=({identifier:e,intensity:t})=>{const i=this.doesFilterAssetExist(e);if(i){const o=Fm(i);return this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:o})}throw new En(e)};this.updateStateFromHistory=async e=>{if(e.identifier==="identity"){this.pureReset();return new Promise(t=>{t()})}return this.filterStore.setFilterEffect(e)};this.doesFilterAssetExist=e=>{return this.entityManager.items.find(t=>e===t.identifier)};this.isOptionDuoTone=e=>{const t=this.doesFilterAssetExist(e);if(t){return Fm(t)}return false};this.editor=e;this.selectedCategory=Dw;this.filterStore=new tc(this.editor.engineMediator);const{config:t}=this;const i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new or(i,{...t,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["filter"]}get locale(){return this.editor.configStore.locale["filter"]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};g([ae],nr.prototype,"selectedCategory",2);g([ae],nr.prototype,"entityManager",2);g([S],nr.prototype,"selectFilter",2);g([S],nr.prototype,"changeIntensity",2);g([S],nr.prototype,"pureReset",2);g([S],nr.prototype,"reset",2);g([S],nr.prototype,"toggleCategorySelection",2);g([S],nr.prototype,"updateStateFromSerialization",2);g([S],nr.prototype,"updateStateFromHistory",2);g([w],nr.prototype,"state",1);g([w],nr.prototype,"identifier",1);g([w],nr.prototype,"intensity",1);g([w],nr.prototype,"isDuotone",1);g([w],nr.prototype,"selectedCategoryIdentifier",1);g([w],nr.prototype,"isOptionSelected",1);g([w],nr.prototype,"config",1);g([w],nr.prototype,"locale",1);g([w],nr.prototype,"categories",1);g([w],nr.prototype,"items",1)});var cM=p(()=>{jde();uM()});var ef;var $de=p(()=>{ef=(r,e=0,t=3)=>{const i=Math.tan(e);const o=Math.sqrt(i**2+1);return{x:r.x+t/o,y:r.y+t*i/o}}});var Ow,Y$e,J$e,Z$e,Q$e,sp;var Rw=p(()=>{Ow={blurRadius:40,gradientSize:.2};Y$e={start:{x:0,y:0},end:{x:0,y:0},...Ow};J$e={center:{x:0,y:0},radius:0,...Ow};Z$e={origin:{x:0,y:0},rotation:0,size:0,...Ow};Q$e=Ow;sp={identifier:"identity",linear:Y$e,radial:J$e,mirrored:Z$e,gaussian:Q$e}});var ti;var Kde=p(()=>{ze();B();W();Rw();ti=class{constructor(e){this.selectFocus=(e,t)=>{lr(()=>{this.state.identifier=e;if(t){this.state[e].blurRadius=t}})};this.changeBlurRadius=(e,t)=>{if(e!=="identity"){this.state[e].blurRadius=t}};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=sp.identifier;if(this.state.identifier!=="identity"){this.state[this.state.identifier].blurRadius=sp[this.state.identifier].blurRadius}}};this.setLinear=({start:e,end:t})=>{this.state.linear.start.x=e.x;this.state.linear.start.y=e.y;this.state.linear.end.x=t.x;this.state.linear.end.y=t.y};this.setLinearStart=e=>{this.state.linear.start.x=e.x;this.state.linear.start.y=e.y};this.setLinearEnd=e=>{this.state.linear.end.x=e.x;this.state.linear.end.y=e.y};this.setRadialCenter=e=>{this.state.radial.center.x=e.x;this.state.radial.center.y=e.y};this.setRadialRadius=e=>{this.state.radial.radius=e};this.setMirroredOrigin=e=>{this.state.mirrored.origin.x=e.x;this.state.mirrored.origin.y=e.y};this.setMirroredRotation=e=>{this.state.mirrored.rotation=e};this.setMirroredSize=e=>{this.state.mirrored.size=e};this.getEffectProperties=()=>{if(this.effect){return this.effect.getProperties()}return null};this.setLinearFocus=e=>{this.effect=this.engineMediator.engine.addLinearBlur(e,this.imageContainer,this.order);this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=e=>{this.effect=this.engineMediator.engine.addGaussianBlur(e,this.imageContainer,this.order);this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=e=>{this.effect=this.engineMediator.engine.addRadialBlur(e,this.imageContainer,this.order);this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=e=>{this.effect=this.engineMediator.engine.addMirroredBlur(e,this.imageContainer,this.order);this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=e=>{const t=this.getEffectProperties();if(t&&e!=="identity"){switch(e){case"linear":this.updateLinearState(t);break;case"radial":this.updateRadialState(t);break;case"mirrored":this.updateMirroredState(t);break;default:break}}};this.updateGaussianState=e=>{this.changeBlurRadius("gaussian",e.blurRadius)};this.updateMirroredState=e=>{const t=this.editor.worldToPreview(e.mirrorAxisOrigin);const i=new F(this.editor.worldToPreview(e.mirrorAxisDirection));const o=i.subtract(t);const n=Math.atan2(o.y,o.x);this.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin));this.setMirroredRotation(n);this.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth));this.changeBlurRadius("mirrored",e.blurRadius)};this.updateRadialState=e=>{this.setRadialCenter(this.editor.worldToPreview(e.center));this.setRadialRadius(this.editor.worldToPreview(e.radius));this.changeBlurRadius("radial",e.blurRadius)};this.updateLinearState=e=>{this.setLinearStart(this.editor.worldToPreview(e.start));this.setLinearEnd(this.editor.worldToPreview(e.end));this.changeBlurRadius("linear",e.blurRadius)};this.setEffectProperties=e=>{if(this.effect){this.effect.setProperties(e);return this.effect.getProperties()}return null};this.removeFocus=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.engineMediator.orderHelper.removeIndex("focus")}};this.editor=e;this.engineMediator=this.editor.engineMediator;this.state=sp}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get order(){return this.engineMediator.orderHelper.addIndex("focus")}get imageContainer(){return this.engineMediator.image.container}};g([ae],ti.prototype,"state",2);g([S],ti.prototype,"selectFocus",2);g([S],ti.prototype,"changeBlurRadius",2);g([S],ti.prototype,"reset",2);g([S],ti.prototype,"setLinear",2);g([S],ti.prototype,"setLinearStart",2);g([S],ti.prototype,"setLinearEnd",2);g([S],ti.prototype,"setRadialCenter",2);g([S],ti.prototype,"setRadialRadius",2);g([S],ti.prototype,"setMirroredOrigin",2);g([S],ti.prototype,"setMirroredRotation",2);g([S],ti.prototype,"setMirroredSize",2);g([S],ti.prototype,"updateFromEngineState",2)});var Xde,ap,Ve;var Yde=p(()=>{Xde=v(Nm());ze();B();W();Ii();Jh();Ys();$de();Rw();Kde();ap=class{constructor(e){this.throttledRender=(0,Xde.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFocus=e=>{if(e!==this.identifier){this.focusStore.removeFocus();const t=this.maxIntensity*.2;const{width:i}=this.editor.engine.getOutputContainer().getBounds();const o=this.editor.shortestOutputSide*.2;switch(e){case"linear":const n=this.editor.outputToWorld({x:-i/2,y:0});const s=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:n,end:s,blurRadius:t});break;case"radial":const a=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:a,radius:o,blurRadius:t});break;case"mirrored":const l=this.editor.outputToWorld({x:0,y:0});const u=o;const c=this.editor.outputToWorld(ef({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:l,clearAreaWidth:u,blurRadius:t,mirrorAxisDirection:c});break;case"gaussian":this.setGaussianFocus({blurRadius:t});break;default:break}this.focusStore.selectFocus(e,t);this.editor.render();this.addSnapshot("add","focus")}};this.changeIntensity=e=>{const t=this.focusStore.setEffectProperties({blurRadius:e});if(t){this.focusStore.changeBlurRadius(this.identifier,t.blurRadius);this.throttledRender()}};this.changeRelativeIntensity=e=>{const t=(this.maxIntensity-ap.minIntensity)*e/100+ap.minIntensity;const i=this.focusStore.setEffectProperties({blurRadius:t});if(i){this.focusStore.changeBlurRadius(this.identifier,i.blurRadius);this.throttledRender()}};this.toolSnapshot=e=>{this.addSnapshot("edit",e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.pureReset=()=>{this.focusStore.removeFocus();this.focusStore.reset()};this.reset=()=>{this.pureReset();this.editor.render();this.addSnapshot("delete",this.locale.controls.buttonReset)};this.setStart=e=>{const t=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(e)});if(t){this.focusStore.setLinearStart(this.editor.worldToPreview(t.start));this.throttledRender()}};this.setEnd=e=>{const t=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(e)});if(t){this.focusStore.setLinearEnd(this.editor.worldToPreview(t.end));this.throttledRender()}};this.setCenter=e=>{const t=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(e)});if(t){this.focusStore.setRadialCenter(this.editor.worldToPreview(t.center));this.throttledRender()}};this.setRadius=e=>{const t=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(e)});if(t){this.focusStore.setRadialRadius(this.editor.worldToPreview(t.radius));this.throttledRender()}};this.setOrigin=e=>{const t=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(e),mirrorAxisDirection:this.editor.previewToWorld(ef(e,this.rotation))});if(t){this.focusStore.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin));this.throttledRender()}};this.setSize=e=>{const t=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(e)});if(t){this.focusStore.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth));this.throttledRender()}};this.setRotation=e=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(ef(this.origin,e))});this.focusStore.setMirroredRotation(e);this.throttledRender()};this.updateStateFromHistory=(e,t)=>{this.focusStore.removeFocus();const{magnitude:i}=t;lr(()=>{this.focusStore.selectFocus(e.identifier);switch(e.identifier){case"linear":this.setLinearFocus({start:this.editor.previewToWorld(new F(e.linear.start).multiply(t)),end:this.editor.previewToWorld(new F(e.linear.end).multiply(t)),blurRadius:e.linear.blurRadius});break;case"gaussian":this.setGaussianFocus({blurRadius:e.gaussian.blurRadius});break;case"radial":this.setRadialFocus({center:this.editor.previewToWorld(new F(e.radial.center).multiply(t)),radius:this.editor.previewToWorld(e.radial.radius*i),blurRadius:e.radial.blurRadius});break;case"mirrored":{const o=new F(e.mirrored.origin).multiply(t);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(o),mirrorAxisDirection:this.editor.previewToWorld(ef(o,e.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(e.mirrored.size*i),blurRadius:e.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=async e=>{if(ap.doesFocusIdentifierExist(e.identifier)){this.focusStore.removeFocus();lr(()=>{this.focusStore.selectFocus(e.identifier);switch(e.identifier){case"linear":this.setLinearFocus(e.linear);break;case"gaussian":this.setGaussianFocus(e.gaussian);break;case"radial":this.setRadialFocus(e.radial);break;case"mirrored":this.setMirroredFocus({mirrorAxisOrigin:e.mirrored.origin,clearAreaWidth:e.mirrored.size,blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:ef(e.mirrored.origin,e.mirrored.rotation)});break;default:break}})}else{throw new En(e.identifier)}};this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{const e=this.editor.canvasStore.sizeVector;const{linear:t}=this.focusStore.state;const{radial:i}=this.focusStore.state;const{mirrored:o}=this.focusStore.state;const n=e;const{magnitude:s}=n;return{...this.focusStore.state,linear:{...t,start:new F(t.start).divide(n),end:new F(t.end).divide(n)},radial:{...i,center:new F(i.center).divide(n),radius:i.radius/s},mirrored:{...o,origin:new F(o.origin).divide(n),size:o.size/s},gaussian:{...this.focusStore.state.gaussian}}};this.editor=e;this.focusStore=new ti(this.editor);const t=this.editor.assetProvider.getAssets("focus");this.entityManager=new or(t,{...this.config,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")})}static get minIntensity(){return 0}static doesFocusIdentifierExist(e){return Object.keys(Aa).map(t=>Aa[t]).findIndex(t=>t===e)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case"linear":return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case"radial":return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case"mirrored":const e=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:e.blurRadius,origin:e.mirrorAxisOrigin,rotation:ve(this.state.mirrored.rotation),size:e.clearAreaWidth}};case"gaussian":return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return sp}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();return Ab({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:t})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:e,height:t}=this.editor.canvasStore.canvasSize;return Math.sqrt(e**2+t**2)*2}get identifier(){return this.state.identifier}get intensity(){if(this.identifier==="identity"){return sp.gaussian.blurRadius}return this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:e}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(e-ap.minIntensity)*100/(this.maxIntensity-ap.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["focus"]}get locale(){return this.editor.configStore.locale["focus"]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:e}){this.focusStore.setGaussianFocus({blurRadius:e})}setLinearFocus({start:e,end:t,blurRadius:i}){this.focusStore.setLinearFocus({start:e,end:t,blurRadius:i})}setRadialFocus({center:e,radius:t,blurRadius:i}){this.focusStore.setRadialFocus({center:e,radius:t,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:i,mirrorAxisDirection:o}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:t,blurRadius:i,mirrorAxisDirection:o})}};Ve=ap;g([S],Ve.prototype,"selectFocus",2);g([S],Ve.prototype,"changeIntensity",2);g([S],Ve.prototype,"changeRelativeIntensity",2);g([S],Ve.prototype,"clickableCanvas",2);g([S],Ve.prototype,"pureReset",2);g([S],Ve.prototype,"reset",2);g([S],Ve.prototype,"setStart",2);g([S],Ve.prototype,"setEnd",2);g([S],Ve.prototype,"setCenter",2);g([S],Ve.prototype,"setRadius",2);g([S],Ve.prototype,"setOrigin",2);g([S],Ve.prototype,"setSize",2);g([S],Ve.prototype,"setRotation",2);g([S],Ve.prototype,"updateStateFromHistory",2);g([S],Ve.prototype,"updateStateFromSerialization",2);g([S],Ve.prototype,"updateCanvasControls",2);g([w],Ve.prototype,"state",1);g([w],Ve.prototype,"start",1);g([w],Ve.prototype,"startOnPreview",1);g([w],Ve.prototype,"end",1);g([w],Ve.prototype,"endOnPreview",1);g([w],Ve.prototype,"center",1);g([w],Ve.prototype,"radius",1);g([w],Ve.prototype,"origin",1);g([w],Ve.prototype,"rotation",1);g([w],Ve.prototype,"rotationOnPreview",1);g([w],Ve.prototype,"size",1);g([w],Ve.prototype,"mirroredAreaWidth",1);g([w],Ve.prototype,"identifier",1);g([w],Ve.prototype,"intensity",1);g([w],Ve.prototype,"relativeIntensity",1);g([w],Ve.prototype,"maxIntensity",1);g([w],Ve.prototype,"isOptionSelected",1);g([w],Ve.prototype,"config",1);g([w],Ve.prototype,"locale",1);g([w],Ve.prototype,"items",1)});var dM=p(()=>{Yde();Rw()});var Pb;var pM=p(()=>{B();Pb={identifier:"identity",opacity:1,blendMode:"lighten"}});var eKe,xl;var Jde=p(()=>{ze();B();Fb();pM();eKe=new vl(0,1);xl=class{constructor(e,t){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{const t=eKe.clamp(e);this.state.opacity=t};this.changeBlendMode=e=>{this.state.blendMode=e};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Pb.identifier;this.state.opacity=Pb.opacity;this.state.blendMode=Pb.blendMode;this.removeIndex()}};this.correctOverlayFlip=()=>{const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();if(this.effect){this.effect.setFlipHorizontally(e);this.effect.setFlipVertically(t)}};this.removeOverlayEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.removeIndex();this.effect=void 0}};this.setEffectProperties=e=>{if(this.effect){this.effect.setProperties(e);return this.effect.getProperties()}return null};this.setOverlayEffect=({identifier:e,blendMode:t,opacity:i})=>{const o={...this.state};this.removeOverlayEffect();const n=this.engineMediator.orderHelper.addIndex("overlay");return new Promise((s,a)=>{this.engineMediator.engine.addOverlayFromAssets(e,this.engineMediator.image.container,n).then(l=>{this.changeIdentifier(e);this.changeOpacity(i);this.changeBlendMode(t);this.effect=l;this.effect.setProperties({blendMode:t,opacity:i});this.correctOverlayFlip();s()}).catch(l=>{this.changeIdentifier(o.identifier);this.changeOpacity(o.opacity);this.changeBlendMode(o.blendMode);if(o.identifier==="identity"){this.removeIndex()}a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("overlay")};this.engineMediator=e;this.editor=t;this.state=Pb}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};g([ae],xl.prototype,"state",2);g([S],xl.prototype,"changeIdentifier",2);g([S],xl.prototype,"changeOpacity",2);g([S],xl.prototype,"changeBlendMode",2);g([S],xl.prototype,"reset",2);g([S],xl.prototype,"correctOverlayFlip",2)});var Zde,br;var Qde=p(()=>{Zde=v(Nm());ze();B();W();Ii();Ys();Jde();br=class{constructor(e){this.throttledRender=(0,Zde.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectOverlay=async e=>{if(e!==this.identifier){const t=this.defaultBlendModeForIdentifier(e);await this.overlayStore.setOverlayEffect({identifier:e,opacity:1,blendMode:t});this.addSnapshot("add","overlay");this.editor.render()}};this.changeOpacity=e=>{const t=this.overlayStore.setEffectProperties({opacity:e});if(t){this.overlayStore.changeOpacity(t.opacity);this.throttledRender()}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderOpacity)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.changeBlendMode=e=>{const t=this.overlayStore.setEffectProperties({blendMode:e});if(t){this.overlayStore.changeBlendMode(t.blendMode);this.addSnapshot("edit",this.locale.controls.carouselBlendMode);this.editor.render()}};this.pureReset=()=>{this.overlayStore.removeOverlayEffect();this.overlayStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromSerialization=async e=>{const t=this.entityManager.items.find(i=>i.identifier===e.identifier);if(t){return this.overlayStore.setOverlayEffect(e).then(()=>{this.editor.transformToolStore.setOverlayOpacity(e.opacity)})}throw new En(e.identifier)};this.updateStateFromHistory=async e=>{if(e.identifier==="identity"){this.pureReset();return new Promise(t=>{t()})}return this.overlayStore.setOverlayEffect(e)};this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=e=>{const t=this.entityManager.items.findIndex(i=>i.identifier===e);return t!==-1?this.entityManager.items[t].defaultBlendMode:"lighten"};this.editor=e;this.overlayStore=new xl(this.editor.engineMediator,e);const t=this.editor.assetProvider.getAssets("overlay");const{config:i}=this;this.entityManager=new or(t,{...i,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")})}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["overlay"]}get locale(){return this.editor.configStore.locale["overlay"]}get items(){return this.entityManager.items}get allBlendModes(){const e=this.locale.controls;return Object.keys(Ss).map(t=>{const i=Ss[t];const o=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:e[o]}})}};g([S],br.prototype,"selectOverlay",2);g([S],br.prototype,"changeOpacity",2);g([S],br.prototype,"changeBlendMode",2);g([S],br.prototype,"pureReset",2);g([S],br.prototype,"reset",2);g([S],br.prototype,"updateStateFromSerialization",2);g([S],br.prototype,"updateStateFromHistory",2);g([S],br.prototype,"correctOverlayFlip",2);g([w],br.prototype,"state",1);g([w],br.prototype,"identifier",1);g([w],br.prototype,"opacity",1);g([w],br.prototype,"blendMode",1);g([w],br.prototype,"isOptionSelected",1);g([w],br.prototype,"config",1);g([w],br.prototype,"locale",1);g([w],br.prototype,"items",1);g([w],br.prototype,"allBlendModes",1)});var mM=p(()=>{Qde();pM()});var tKe,ko,hM;var fM=p(()=>{Ki();tKe="white";ko={identifier:"identity",opacity:1,tintColor:$i[tKe],tintMode:"none",resizeMode:"keepAspect"};hM={}});var Js;var tf=p(()=>{lt();Ki();Js=()=>{return Object.keys($i).map(r=>{const e=$i[r];return{identifier:r,color:e,colorString:Xs(e)}})}});function Aw(r,e=null){return new Promise((t,i)=>{const o=new Image;o.addEventListener("load",()=>{const n=document.createElement("canvas");const s=n.getContext("2d");n.width=o.width;n.height=o.height;if(e){n.width=e;n.height=e*o.height/o.width}s.drawImage(o,0,0,n.width,n.height);const a=n.toDataURL("image/png");st(n);t(a)});o.addEventListener("error",()=>{i()});o.src=r})}var epe;var gM=p(()=>{B();W();epe=r=>{return new Promise((e,t)=>{const i=new FileReader;i.onload=async o=>{try{const{result:n}=o.target;const s=await Aw(n,150);e({stickerURI:n,thumbnailURI:s,name:r.name||"",type:r.type,identifier:Ge()})}catch(n){t(n)}};i.onerror=o=>{t(o)};i.readAsDataURL(r)})}});var tpe,yM,je;var bM=p(()=>{ze();B();W();tf();Ii();Ys();gM();Ki();fM();tpe="identity";yM="imgly_sticker_custom";je=class{constructor(e){this.state=ae.map(hM);this.customStickers=[];this.colorList=Js();this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=e=>{return this.entityManager.items.findIndex(t=>t.identifier===e)!==-1};this.add=e=>{const t=this.entityManager.items.find(n=>n.identifier===e);const i=t?t.tintMode:ko.tintMode;const o=t?t.resizeMode:ko.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:e,tintMode:i,tintColor:ko.tintColor,opacity:ko.opacity,resizeMode:o}})};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);const t=this.editor.spriteStore.getDuplicateContainerFlip(this.id);const{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:ve(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==t.flipHorizontally,flipVertically:o!==t.flipVertically},transform:e})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.flipHorizontally=()=>{if(this.id){this.editor.spriteStore.flipHorizontally(this.id)}};this.delete=()=>{if(this.id){const e=this.id;this.editor.spriteStore.removeSprite(e);this.state.delete(e);this.selectLast()}};this.updateStateFromHistory=(e,t)=>{if((0,gr.default)(t,this.state.get(e))){return}this.setState(e,t);this.editor.spriteStore.setContainerProperties(e,t)};this.setState=(e,t)=>{const i=this.state.get(e);if(i){if("opacity"in t){i.opacity=t.opacity}if(t.tintColor){i.tintColor=t.tintColor}if(t.tintMode){i.tintMode=t.tintMode}if(t.resizeMode){i.resizeMode=t.resizeMode}this.state.set(e,i)}else{this.state.set(e,{identifier:t.identifier,opacity:t.opacity,tintMode:t.tintMode,resizeMode:t.resizeMode,tintColor:t.tintColor?t.tintColor:ko.tintColor})}};this.changeOpacity=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{opacity:e});const i=this.editor.spriteStore.getContainerProperties(this.id);t.opacity=i.opacity;this.state.set(this.id,t)}}};this.changeTintColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){const{tintMode:i}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:e,tintMode:i});const o=this.editor.spriteStore.getContainerProperties(this.id);t.tintColor=o.tintColor;t.tintMode=o.tintMode||ko.tintMode;this.state.set(this.id,t)}}};this.tintColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.addFiles=async e=>{this.editor.modalStore.showInfoModal("loading");if(e.length){let t=0;const i=[];for(t=0;t<e.length;t+=1){i.push(epe(e[t]))}try{const o=await Promise.all(i);this.addCustomStickerAsset(o);this.editor.configStore.events.onStickerUploadedAdd(o.map(({identifier:n,stickerURI:s},a)=>({identifier:n,stickerURI:s,file:e[a]})))}catch(o){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}};this.addCustomStickerAsset=async e=>{const t=[];e.forEach(({stickerURI:s,thumbnailURI:a,name:l,identifier:u,type:c})=>{t.push({stickerURI:s,thumbnailURI:a,name:l,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:u});this.customStickers.push({identifier:u,type:c,stickerURI:s,name:l})});const i=this.locale.categories[yM];this.editor.assetProvider.addCustomStickerAsset(t,yM,i);const o=this.editor.assetProvider.getAssets("sticker");const{config:n}=this;this.entityManager=new or(o,{...n,itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")});this.selectedCategory=yM;this.editor.modalStore.hideModal()};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.opacity)};this.addSnapshot=(e,t)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.sticker)&&(0,gr.default)(i.sticker,ve(this.state))){return}if(this.currentSticker){this.editor.spriteStore.addSnapshot(e,t)}};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory===e?tpe:e};this.pureReset=()=>{this.state=ae.map(hM)};this.dispose=()=>{this.state=null;this.selectedCategory=null;this.editor=null;this.entityManager=null};this.editor=e;this.selectedCategory=tpe;const{config:t}=this;const i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new or(i,{...t,itemFallbackKey:"stickerURI",locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("sticker")});ko.tintColor=ve(In(this.config,"defaultTintColor",ko.tintColor));if(this.config.colors&&this.config.colors.length>0){this.colorList=Wn(ve(this.config.colors))}}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e){return e}}return void 0}get identifier(){if(this.isStickerSelected){const e=this.state.get(this.id);if(e){return e.identifier}}return"none"}get id(){if(this.isStickerSelected){return this.editor.spriteStore.id}return void 0}get opacity(){if(this.currentSticker){return this.currentSticker.opacity}return ko.opacity}get tintMode(){if(this.currentSticker){return this.currentSticker.tintMode}return ko.tintMode}get resizeMode(){if(this.currentSticker){return this.currentSticker.resizeMode}return ko.resizeMode}get tintable(){if(this.currentSticker){return this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized"}return false}get tintColor(){if(this.currentSticker){return this.currentSticker.tintColor}return ko.tintColor}get config(){return this.editor.configStore.config["sticker"]}get locale(){return this.editor.configStore.locale["sticker"]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};g([ae],je.prototype,"selectedCategory",2);g([ae],je.prototype,"entityManager",2);g([S],je.prototype,"selectLast",2);g([S],je.prototype,"add",2);g([S],je.prototype,"duplicate",2);g([S],je.prototype,"bringToFront",2);g([S],je.prototype,"flipHorizontally",2);g([S],je.prototype,"delete",2);g([S],je.prototype,"updateStateFromHistory",2);g([S],je.prototype,"setState",2);g([S],je.prototype,"changeOpacity",2);g([S],je.prototype,"changeTintColor",2);g([S],je.prototype,"addFiles",2);g([S],je.prototype,"addCustomStickerAsset",2);g([S],je.prototype,"toggleCategorySelection",2);g([S],je.prototype,"pureReset",2);g([S],je.prototype,"dispose",2);g([w],je.prototype,"isStickerSelected",1);g([w],je.prototype,"isCustomStickerEnabled",1);g([w],je.prototype,"customStickerTintMode",1);g([w],je.prototype,"customStickerResizeMode",1);g([w],je.prototype,"currentSticker",1);g([w],je.prototype,"identifier",1);g([w],je.prototype,"id",1);g([w],je.prototype,"opacity",1);g([w],je.prototype,"tintMode",1);g([w],je.prototype,"resizeMode",1);g([w],je.prototype,"tintable",1);g([w],je.prototype,"tintColor",1);g([w],je.prototype,"config",1);g([w],je.prototype,"locale",1);g([w],je.prototype,"localeColor",1);g([w],je.prototype,"selectedCategoryIdentifier",1);g([w],je.prototype,"items",1);g([w],je.prototype,"categories",1)});var rpe=p(()=>{fM();bM()});var rKe,ft,_M;var vM=p(()=>{Ki();rKe="imgly_font_open_sans_bold";ft={text:"Write Something",identifier:rKe,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:$i.white,backgroundColor:$i.transparent||[0,0,0,0],width:0};_M={}});var ipe;var ope=p(()=>{Ki();ipe=()=>{return Object.keys(sM).map(r=>{const e=sM[r];return{identifier:r,color:e,colorString:Xs(e)}})}});var npe,rf,Ee;var xM=p(()=>{ze();B();Ks();W();ope();tf();Ii();Ki();vM();npe={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};rf=class{constructor(e){this.state=ae.map(_M);this.colorList=Js();this.backgroundColorList=ipe();this.fontsLoadStatus=ae.object({pending:false,loaded:false});this.doesTextAssetExist=e=>{return this.editor.assetProvider.getFontAssets().findIndex(t=>t.identifier===e)!==-1};this.validFontWithConfig=e=>{return this.fonts.find(t=>t.identifier===e)||this.fonts[0]};this.addOrselect=()=>{if(!this.state.size){this.add()}else{this.selectLast();this.loadFonts()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=async()=>{const{fontsLoadStatus:e}=this;const t=()=>{this.editor.spriteStore.addText({state:{identifier:ft.identifier,text:ft.text,textColor:ft.textColor,backgroundColor:ft.backgroundColor,lineHeight:ft.lineHeight,alignment:ft.alignment,fontSize:0}})};if(!e.pending&&!e.loaded){this.fontsLoadStatus.pending=true;const i=this.editor.assetProvider.getFontManager();try{await i.loadFontsWithIdentifiers([ft.identifier]);t()}catch(o){this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:ft.identifier})}await this.loadFonts()}else{t()}};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:ve(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:ve(this.backgroundColor),width:this.width},transform:e})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.delete=()=>{if(this.id){const e=this.id;this.editor.spriteStore.removeSprite(e);this.state.delete(e);this.selectLast()}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.changeFont=e=>{const t=this.fonts.find(i=>i.identifier===e);this.changeIdentifier(t,this.id);if(this.id){this.addSnapshot("edit",this.locale.history.fontFamily)}};this.changeIdentifier=(e,t)=>{lr(()=>{if(e&&t){const i=this.state.get(t);if(i){this.editor.spriteStore.setContainerProperties(t,{fontIdentifier:e.identifier},true);const o=this.editor.spriteStore.getContainerProperties(t);i.identifier=o.fontIdentifier;i.fontFamily=e.fontFamily;i.fontStyle=e.fontStyle;i.fontWeight=e.fontWeight;i.fontSize=o.fontSize;i.width=o.width;i.defaultFontSize=i.fontSize;this.state.set(t,i)}}})};this.changeFontSize=(e,t=false)=>{if(this.id){const i=this.state.get(this.id);if(i){i.fontSize=e;if(t){i.defaultFontSize=e}this.state.set(this.id,i)}}};this.updateDefaultFontSize=()=>{if(this.id){const e=this.state.get(this.id);if(e){e.defaultFontSize=e.fontSize;this.state.set(this.id,e)}}};this.changeSize=(e,t)=>{const i=this.state.get(e);if(i){i.width=t.width;i.fontSize=t.fontSize;i.defaultFontSize=t.fontSize;this.state.set(e,i)}};this.changeWidth=e=>{if(this.id){const t=this.state.get(this.id);if(t){t.width=e;this.state.set(this.id,t)}}};this.changeText=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},true);let i=this.editor.spriteStore.getContainerProperties(this.id);const o=this.editor.outputContainer.getSizeInOutputSpace();const n=this.editor.spriteStore.getSize(this.id);if(!this.config.disableAutoScaling){if(n.height>o.height){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,o.height)},true)}}i=this.editor.spriteStore.getContainerProperties(this.id);t.text=i.text;t.fontSize=i.fontSize;t.defaultFontSize=i.fontSize;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.edit)}}};this.calculateFitFontSize=(e,t)=>{if(!rf.measureContext){const h=document.createElement("canvas");rf.measureContext=h.getContext("2d")}const i=this.editor.spriteStore.getContainerProperties(e);const o=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier);const n=this.config.minFontSizeForAutoScaling;const s=ip(rf.measureContext,i.text,o,i.fontSize,i.lineHeight,i.width,o.textMetrics);const a=Math.min(Math.floor(i.fontSize*(t/s.height)),1);const l=Math.round(i.fontSize);let u=0;let c=l-a;let d=Math.floor((l-a)*2);let m=c;while(u<=d){c=u+Math.floor((d-u)/2);const h=ip(rf.measureContext,i.text,o,c,i.lineHeight,i.width,o.textMetrics);if(t<h.height){d=c-1;m=c-1}else if(t>h.height){u=c+1;if(a+c>=l){return l}}else{m=c;break}}if(n&&m<n){return n}return m};this.changeLineHeight=e=>{if(this.id){const t=this.state.get(this.id);if(t&&e){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:e},true);const i=this.editor.spriteStore.getContainerProperties(this.id);t.lineHeight=i.lineHeight;this.state.set(this.id,t)}}};this.changeColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{textColor:e});const i=this.editor.spriteStore.getContainerProperties(this.id);t.textColor=i.textColor;this.state.set(this.id,t)}}};this.changeBackgroundColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:e});const i=this.editor.spriteStore.getContainerProperties(this.id);t.backgroundColor=i.backgroundColor;this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.backgroundColor)};this.changeAlignment=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{alignment:e});const i=this.editor.spriteStore.getContainerProperties(this.id);t.alignment=i.alignment;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.lineSpacing)};this.addSnapshot=(e,t)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.text)&&(0,gr.default)(i.text,ve(this.state))){return}if(this.currentText){this.editor.spriteStore.addSnapshot(e,t)}};this.updateStateFromHistory=(e,t)=>{if((0,gr.default)(t,this.state.get(e))){return}this.setState(e,t);this.editor.spriteStore.setContainerProperties(e,t)};this.setState=(e,t)=>{const i=this.state.get(e);if(i){if(t.alignment){i.alignment=t.alignment}if(t.text){i.text=t.text}if(t.lineHeight){i.lineHeight=t.lineHeight}if(t.textColor){i.textColor=t.textColor}if(t.backgroundColor){i.backgroundColor=t.backgroundColor}if(t.fontIdentifier){i.identifier=t.fontIdentifier}if(t.fontSize){i.fontSize=t.fontSize;i.defaultFontSize=t.fontSize}if(t.width){i.width=t.width}}else{const o=this.validFontWithConfig(t.fontIdentifier);if(o){this.state.set(e,{text:t.text,identifier:o.identifier,alignment:t.alignment,textColor:t.textColor?t.textColor:ft.textColor,backgroundColor:t.backgroundColor?t.backgroundColor:ft.backgroundColor,fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontSize:t.fontSize,fontWeight:o.fontWeight,lineHeight:t.lineHeight,width:t.width,defaultFontSize:t.fontSize})}}};this.setFontSize=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:e},true);const i=this.editor.spriteStore.getContainerProperties(this.id);t.fontSize=i.fontSize;t.defaultFontSize=i.fontSize;this.state.set(this.id,t)}}};this.pureReset=()=>{this.state=ae.map(_M)};this.dispose=()=>{this.state=null;this.fontsLoadStatus=null;this.editor=null;this.backgroundColorList=null;this.colorList=null};this.editor=e;if(!this.fonts.find(t=>t.identifier===ft.identifier)){ft.identifier=this.fonts[0].identifier}ft.textColor=ve(In(this.config,"defaultColor",ft.textColor));ft.backgroundColor=ve(In(this.config,"defaultBackgroundColor",ft.backgroundColor));ft.text=this.locale.canvasControls.placeholderText;if(this.config.colors&&this.config.colors.length>0){this.colorList=Wn(ve(this.config.colors))}if(this.config.backgroundColors&&this.config.backgroundColors.length>0){this.backgroundColorList=Wn(ve(this.config.backgroundColors))}}static defaultText(){return ft.text}static getDisplayFontStyle(e){const t=e.fontWeight&&npe[e.fontWeight].toLowerCase()!=="regular"?npe[e.fontWeight]:"";const i=e.fontStyle&&e.fontStyle.toLowerCase()!=="normal"?e.fontStyle:"";return`${e.fontFamily.toLowerCase().includes(t.toLowerCase())?"":t} ${i}`.trim()}async loadFonts(){const{fontsLoadStatus:e}=this;if(e.loaded)return;const t=this.editor.assetProvider.getFontManager();const i=this.editor.assetProvider.getFontAssetsForText().filter(Boolean).map(o=>o.identifier);try{await t.loadFontsWithIdentifiers(i)}catch(o){const n=i.filter(s=>!t.isFontLoaded(s)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:n})}e.loaded=true}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const e=this.state.get(this.id);if(e){return e}}return void 0}get text(){if(this.currentText){return this.currentText.text}return ft.text}get fontSize(){if(this.currentText){return this.currentText.fontSize}return ft.fontSize}get defaultFontSize(){if(this.currentText){return this.currentText.defaultFontSize}return ft.defaultFontSize}get width(){if(this.currentText){return this.currentText.width}return ft.width}get fontFamily(){if(this.currentText){return this.currentText.fontFamily}return ft.fontFamily}get fontStyle(){if(this.currentText){return this.currentText.fontStyle}return ft.fontStyle}get fontWeight(){if(this.currentText){return this.currentText.fontWeight}return ft.fontWeight}get lineHeight(){if(this.currentText){return this.currentText.lineHeight}return ft.lineHeight}get identifier(){if(this.currentText){return this.currentText.identifier}return ft.identifier}get id(){if(this.isTextSelected){return this.editor.spriteStore.id}return void 0}get alignment(){if(this.currentText){return this.currentText.alignment}return ft.alignment}get textColor(){if(this.currentText){return this.currentText.textColor}return ft.textColor}get backgroundColor(){if(this.currentText){return this.currentText.backgroundColor}return ft.backgroundColor}get config(){return this.editor.configStore.config["text"]}get locale(){return this.editor.configStore.locale["text"]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get availableOptions(){if(this.config.fonts.length){return this.config.fonts.map(e=>e.identifier)}return this.rawOptions.filter(Boolean).map(e=>e.identifier)}get fonts(){return this.rawOptions.filter(Boolean).reduce((e,t)=>{if(this.availableOptions.indexOf(t.identifier)!==-1){return[...e,{identifier:t.identifier,fontFamily:t.fontFamily,fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||""}]}return e},[])}get fontFamilies(){return[...new Set(this.fonts)]}};Ee=rf;g([S],Ee.prototype,"addOrselect",2);g([S],Ee.prototype,"selectLast",2);g([S],Ee.prototype,"add",2);g([S],Ee.prototype,"duplicate",2);g([S],Ee.prototype,"bringToFront",2);g([S],Ee.prototype,"delete",2);g([S],Ee.prototype,"setEditMode",2);g([S],Ee.prototype,"changeFont",2);g([S],Ee.prototype,"changeIdentifier",2);g([S],Ee.prototype,"changeFontSize",2);g([S],Ee.prototype,"updateDefaultFontSize",2);g([S],Ee.prototype,"changeSize",2);g([S],Ee.prototype,"changeWidth",2);g([S],Ee.prototype,"changeText",2);g([S],Ee.prototype,"changeLineHeight",2);g([S],Ee.prototype,"changeColor",2);g([S],Ee.prototype,"changeBackgroundColor",2);g([S],Ee.prototype,"changeAlignment",2);g([S],Ee.prototype,"updateStateFromHistory",2);g([S],Ee.prototype,"setState",2);g([S],Ee.prototype,"setFontSize",2);g([S],Ee.prototype,"pureReset",2);g([S],Ee.prototype,"dispose",2);g([w],Ee.prototype,"isEditMode",1);g([w],Ee.prototype,"isTextSelected",1);g([w],Ee.prototype,"fontsLoaded",1);g([w],Ee.prototype,"currentText",1);g([w],Ee.prototype,"text",1);g([w],Ee.prototype,"fontSize",1);g([w],Ee.prototype,"defaultFontSize",1);g([w],Ee.prototype,"width",1);g([w],Ee.prototype,"fontFamily",1);g([w],Ee.prototype,"fontStyle",1);g([w],Ee.prototype,"fontWeight",1);g([w],Ee.prototype,"lineHeight",1);g([w],Ee.prototype,"identifier",1);g([w],Ee.prototype,"id",1);g([w],Ee.prototype,"alignment",1);g([w],Ee.prototype,"textColor",1);g([w],Ee.prototype,"backgroundColor",1);g([w],Ee.prototype,"config",1);g([w],Ee.prototype,"locale",1);g([w],Ee.prototype,"localeColor",1);g([w],Ee.prototype,"rawOptions",1);g([w],Ee.prototype,"availableOptions",1);g([w],Ee.prototype,"fonts",1);g([w],Ee.prototype,"fontFamilies",1)});var spe=p(()=>{vM();xM()});var iKe,_r,CM,SM;var wM=p(()=>{Ki();iKe="imgly_text_design_blocks";_r={identifier:iKe,color:$i.white,isInverted:false,text:"Write Something With Style",seed:0,padding:0,width:0};CM={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831};SM={}});var $e;var TM=p(()=>{ze();B();W();tf();Ii();Ys();Ki();wM();$e=class{constructor(e){this.state=ae.map(SM);this.colorList=Js();this.fontsLoaded=false;this.doesTextDesignAssetExist=e=>{return this.entityManager.items.findIndex(t=>t.identifier===e)!==-1};this.addOrselect=async()=>{await this.loadFonts();if(!this.state.size){this.add()}else{this.selectLast()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:_r.identifier,text:_r.text,color:_r.color,isInverted:_r.isInverted,seed:CM[_r.identifier]||_r.seed,padding:0}})};this.updateStateFromHistory=(e,t)=>{if((0,gr.default)(t,this.state.get(e))){return}const i=this.state.get(e);if(t.identifier===i.identifier){this.setState(e,t);this.editor.spriteStore.setContainerProperties(e,t)}else{this.changeIdentifier(t.identifier,false,t.seed,e)}};this.setState=(e,t)=>{const i=this.state.get(e);if(i){if(t.inverted){i.isInverted=t.inverted}if(t.seed){i.seed=t.seed}if(t.color){i.color=t.color}if(t.padding){i.padding=t.padding}if(t.width){i.width=t.width}}else{this.state.set(e,{width:t.width,text:t.text,isInverted:t.inverted,identifier:t.identifier,seed:t.seed,color:t.color?t.color:_r.color,padding:t.padding})}};this.changeText=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{text:e},true);const i=this.editor.spriteStore.getContainerProperties(this.id);t.text=i.text;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.edit)}}};this.setEditMode=e=>{this.editor.spriteStore.setEditMode(e)};this.duplicate=()=>{if(this.id){const e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:ve(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:e})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.addSnapshot=(e,t)=>{const i=this.editor.historyStore.getCurrentSpritesState();if((i==null?void 0:i.textdesign)&&(0,gr.default)(i.textdesign,ve(this.state))){return}if(this.currentTextDesign){this.editor.spriteStore.addSnapshot(e,t)}};this.delete=(e=this.id)=>{if(e){this.editor.spriteStore.removeSprite(e);this.state.delete(e);this.selectLast()}};this.changeSeed=()=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},true);const t=this.editor.spriteStore.getContainerProperties(this.id);e.seed=t.seed;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.shuffle)}}};this.changeIdentifier=(e,t=true,i=null,o=this.id)=>{if(o&&e!==this.identifier){const n=this.state.get(o);const s=this.editor.spriteStore.getContainerTransform(o);this.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:e,text:n.text,color:ve(n.color),isInverted:n.isInverted,seed:i||CM[e]||n.seed,padding:n.padding,width:n.width},transform:s},t,true)}};this.changeColor=e=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{color:e});const i=this.editor.spriteStore.getContainerProperties(this.id);t.color=i.color;this.state.set(this.id,t)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.invertBackground=()=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!e.isInverted},true);const t=this.editor.spriteStore.getContainerProperties(this.id);e.isInverted=t.inverted;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.invert)}}};this.changeWidth=e=>{if(this.id){const t=this.state.get(this.id);if(t){t.width=e;this.state.set(this.id,t)}}};this.changePadding=e=>{if(this.id){const t=this.state.get(this.id);if(t){t.padding=e;this.state.set(this.id,t)}}};this.pureReset=()=>{this.state=ae.map(SM)};this.dispose=()=>{this.state=null;this.fontsLoaded=null;this.editor=null;this.colorList=null};this.editor=e;const t=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new or(t,{...this.config,flattenCategories:true,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")});if(!this.entityManager.items.find(i=>i.identifier===_r.identifier)){_r.identifier=this.entityManager.items[0].identifier}_r.text=this.locale.canvasControls.placeholderText;_r.color=ve(In(this.config,"defaultColor",_r.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Wn(ve(this.config.colors))}}static defaultText(){return _r.text}async loadFonts(){if(this.fontsLoaded)return;const e=this.editor.assetProvider.getFontManager();const t=this.editor.assetProvider.getFontAssetsForTextDesign().map(i=>i.identifier);try{await e.loadFontsWithIdentifiers(t)}catch(i){const o=t.filter(n=>!e.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:o})}this.fontsLoaded=true}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const e=this.state.get(this.id);if(e){return e}}return void 0}get id(){if(this.isTextDesignSelected){return this.editor.spriteStore.id}return void 0}get text(){if(this.currentTextDesign){return this.currentTextDesign.text}return _r.text}get seed(){if(this.currentTextDesign){return this.currentTextDesign.seed}return _r.seed}get padding(){if(this.currentTextDesign){return this.currentTextDesign.padding}return _r.padding}get width(){if(this.currentTextDesign){return this.currentTextDesign.width}return _r.width}get identifier(){if(this.currentTextDesign){return this.currentTextDesign.identifier}return null}get isInverted(){if(this.currentTextDesign){return this.currentTextDesign.isInverted}return _r.isInverted}get color(){if(this.currentTextDesign){return this.currentTextDesign.color}return _r.color}get config(){return this.editor.configStore.config["textdesign"]}get locale(){return this.editor.configStore.locale["textdesign"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};g([S],$e.prototype,"addOrselect",2);g([S],$e.prototype,"selectLast",2);g([S],$e.prototype,"add",2);g([S],$e.prototype,"updateStateFromHistory",2);g([S],$e.prototype,"setState",2);g([S],$e.prototype,"changeText",2);g([S],$e.prototype,"setEditMode",2);g([S],$e.prototype,"duplicate",2);g([S],$e.prototype,"bringToFront",2);g([S],$e.prototype,"delete",2);g([S],$e.prototype,"changeSeed",2);g([S],$e.prototype,"changeIdentifier",2);g([S],$e.prototype,"changeColor",2);g([S],$e.prototype,"invertBackground",2);g([S],$e.prototype,"changeWidth",2);g([S],$e.prototype,"changePadding",2);g([S],$e.prototype,"pureReset",2);g([S],$e.prototype,"dispose",2);g([w],$e.prototype,"isTextDesignSelected",1);g([w],$e.prototype,"isEditMode",1);g([w],$e.prototype,"currentTextDesign",1);g([w],$e.prototype,"id",1);g([w],$e.prototype,"text",1);g([w],$e.prototype,"seed",1);g([w],$e.prototype,"padding",1);g([w],$e.prototype,"width",1);g([w],$e.prototype,"identifier",1);g([w],$e.prototype,"isInverted",1);g([w],$e.prototype,"color",1);g([w],$e.prototype,"config",1);g([w],$e.prototype,"locale",1);g([w],$e.prototype,"localeColor",1);g([w],$e.prototype,"items",1)});var ape=p(()=>{wM();TM()});var Zs;var Fw=p(()=>{Ki();Zs={identifier:"identity",opacity:1,width:0,color:$i.white}});var oKe,Cl;var lpe=p(()=>{ze();Fb();Fw();oKe=new vl(0,1);Cl=class{constructor(e){this.changeIdentifier=e=>{this.state.identifier=e};this.changeOpacity=e=>{const t=oKe.clamp(e);this.state.opacity=t};this.changeWidth=e=>{this.state.width=e};this.changeColor=e=>{this.state.color=e};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Zs.identifier;this.state.opacity=Zs.opacity;this.state.width=Zs.width;this.state.color=Zs.color;this.removeIndex()}};this.removeFrameEffect=()=>{if(this.effect){this.engine.removeEffect(this.effect);this.effect=void 0}};this.setEffectProperties=e=>{if(this.effect){this.removeIndex();this.effect.setProperties(e);return this.effect.getProperties()}return null};this.setFrameEffect=({identifier:e,width:t,opacity:i,color:o})=>{const n={...this.state};this.changeIdentifier(e);this.changeWidth(t);this.changeOpacity(i);this.changeColor(o);this.removeFrameEffect();return new Promise((s,a)=>{this.engine.addFrameFromAssets(e,this.engineMediator.image.container).then(l=>{this.effect=l;this.effect.setProperties({tintColor:o,opacity:i,width:t});s()}).catch(l=>{this.changeIdentifier(n.identifier);this.changeOpacity(n.opacity);this.changeWidth(n.width);this.changeColor(n.color);if(n.identifier==="identity"){this.removeIndex()}a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=e;this.state=Zs}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};g([ae],Cl.prototype,"state",2);g([S],Cl.prototype,"changeIdentifier",2);g([S],Cl.prototype,"changeOpacity",2);g([S],Cl.prototype,"changeWidth",2);g([S],Cl.prototype,"changeColor",2);g([S],Cl.prototype,"reset",2)});var upe,Yt;var cpe=p(()=>{upe=v(Nm());ze();B();W();tf();Ii();Ys();Ki();Fw();lpe();Yt=class{constructor(e){this.colorList=Js();this.throttledRender=(0,upe.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFrame=async e=>{if(e!==this.identifier){const t=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:e,width:t,opacity:1,color:Zs.color});this.editor.render();this.addSnapshot("add","frame")}};this.changeOpacity=e=>{const t=this.frameStore.setEffectProperties({opacity:e});if(t){this.frameStore.changeOpacity(t.opacity);this.throttledRender()}};this.changeWidth=e=>{const t=this.frameStore.setEffectProperties({width:e});if(t){this.frameStore.changeWidth(t.width);this.throttledRender()}};this.changeColor=e=>{const t=this.frameStore.setEffectProperties({tintColor:e});if(t){this.frameStore.changeColor(t.tintColor);this.throttledRender()}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.selectColor)};this.toolSnapshot=e=>{this.addSnapshot("edit",e)};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.pureReset=()=>{this.frameStore.removeFrameEffect();this.frameStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=e=>{if(e.identifier==="identity"){this.pureReset();return new Promise(t=>{t()})}return this.frameStore.setFrameEffect(e)};this.updateStateFromSerialization=async e=>{const t=this.entityManager.items.find(i=>i.identifier===e.identifier);if(t){return this.frameStore.setFrameEffect(e).then(()=>{this.editor.transformToolStore.setFrameOpacity(e.opacity)})}return new Promise((i,o)=>{o(new Error(`Frame Asset doesn't exist`))})};this.editor=e;this.frameStore=new Cl(this.editor.engineMediator);const t=this.editor.assetProvider.getAssets("frame");const{config:i}=this;this.entityManager=new or(t,{...i,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")});Zs.color=ve(In(this.config,"defaultColor",Zs.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Wn(ve(this.config.colors))}}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const e=this.entityManager.items.find(t=>t.identifier===this.identifier);return e&&e.tintable||false}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config["frame"]}get locale(){return this.editor.configStore.locale["frame"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};g([S],Yt.prototype,"selectFrame",2);g([S],Yt.prototype,"changeOpacity",2);g([S],Yt.prototype,"changeWidth",2);g([S],Yt.prototype,"changeColor",2);g([S],Yt.prototype,"pureReset",2);g([S],Yt.prototype,"reset",2);g([S],Yt.prototype,"updateStateFromHistory",2);g([S],Yt.prototype,"updateStateFromSerialization",2);g([w],Yt.prototype,"state",1);g([w],Yt.prototype,"identifier",1);g([w],Yt.prototype,"color",1);g([w],Yt.prototype,"size",1);g([w],Yt.prototype,"tintable",1);g([w],Yt.prototype,"opacity",1);g([w],Yt.prototype,"minSize",1);g([w],Yt.prototype,"maxSize",1);g([w],Yt.prototype,"config",1);g([w],Yt.prototype,"locale",1);g([w],Yt.prototype,"localeColor",1);g([w],Yt.prototype,"items",1);g([w],Yt.prototype,"isOptionSelected",1)});var IM=p(()=>{Fw();cpe()});var Bb;var EM=p(()=>{Ki();Bb={size:0,color:$i.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0}});var Ht;var kM=p(()=>{ze();B();W();tf();Ii();Ki();EM();Ht=class{constructor(e){this.strokes={strokes:[]};this.colorList=Js();this.dirty=ae.box(false);this.id="";this.containerId=()=>{return this.id};this.initSize=()=>{const{minimumSize:e,maximumSize:t}=this.state;const{size:i}=this;if(i===0){this.changeSize(oR(this.config,"defaultSize",[e,t]))}};this.changeColor=e=>{this.state.color=e};this.changeSize=e=>{this.state.size=e};this.changeRelativeSize=e=>{const{maximumSize:t,minimumSize:i}=this.state;this.state.size=(t-i)*e/100+i};this.changeHardness=e=>{this.state.hardness=e};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.editor=e;this.state={...Bb,hardness:oR(this.config,"defaultHardness",[Bb.minimumHardness,Bb.maximumHardness]),color:ve(In(this.config,"defaultColor",Bb.color))};if(this.config.colors&&this.config.colors.length>0){this.colorList=Wn(ve(this.config.colors))}}addSnapshot(e,t){this.editor.addSnapshot(void 0,e,t)}clickableCanvas(e){this.editor.clickableCanvas(e)}beginStroke(e=[]){if(!this.drawingContainer){const t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e},this.editor.imageContainer,t)}this.id=this.drawingContainer.getID();this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:ve(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(e){if(this.drawingContainer){const t=this.editor.previewToWorld(e,false);this.drawingContainer.addPointToCurrentStroke(t);this.editor.render()}}endStroke(){if(this.drawingContainer){this.drawingContainer.endStroke();this.editor.render();this.strokes=this.drawingContainer.getData();this.addSnapshot("edit",this.locale.history.brushStroke);this.dirty.set(true)}}updateStateFromHistory(e){if((0,gr.default)(e,this.strokes)){return}if((0,gr.default)(e,{strokes:[]})||!e){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===e.strokes.length){this.dirty.set(false);return}this.strokes=e;this.drawingContainer.setData(this.strokes)}else{const t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e.strokes},this.editor.imageContainer,t);this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0);this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(false);this.strokes={strokes:[]};if(this.drawingContainer){this.editor.engine.removeContainer(this.drawingContainer);this.drawingContainer=void 0}}get config(){return this.editor.configStore.config["brush"]}get locale(){return this.editor.configStore.locale["brush"]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:e,maximumSize:t,minimumSize:i}=this.state;return(e-i)*100/(t-i)}get sizeOnScreenSpace(){const e=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*e)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};g([ae],Ht.prototype,"state",2);g([ae],Ht.prototype,"dirty",2);g([S],Ht.prototype,"initSize",2);g([S],Ht.prototype,"changeColor",2);g([S],Ht.prototype,"changeSize",2);g([S],Ht.prototype,"changeRelativeSize",2);g([S],Ht.prototype,"changeHardness",2);g([S],Ht.prototype,"clickableCanvas",1);g([S],Ht.prototype,"beginStroke",1);g([S],Ht.prototype,"strokePosition",1);g([S],Ht.prototype,"endStroke",1);g([S],Ht.prototype,"updateStateFromHistory",1);g([S],Ht.prototype,"reset",2);g([w],Ht.prototype,"config",1);g([w],Ht.prototype,"locale",1);g([w],Ht.prototype,"localeColor",1);g([w],Ht.prototype,"color",1);g([w],Ht.prototype,"size",1);g([w],Ht.prototype,"relativeSize",1);g([w],Ht.prototype,"sizeOnScreenSpace",1);g([w],Ht.prototype,"hardness",1);g([w],Ht.prototype,"isDirty",1)});var dpe=p(()=>{EM();kM()});var Gn;var DM=p(()=>{Gn={position:{x:0,y:0},size:{height:0,width:0},lockResolution:false,forceDimensions:false,ratio:"*"}});function OM(r){const e=r&&typeof r==="object";return e&&!sKe(r)&&!lKe(r)&&!aKe(r)}function uKe(r){return Array.isArray(r)?[]:{}}function RM(r,e){const t=e&&e.clone===true;return t&&OM(r)?AM(uKe(r),r,e):r}function cKe(r,e,t){const i={};if(OM(r)){Object.keys(r).forEach(o=>{i[o]=RM(r[o],t)})}Object.keys(e).forEach(o=>{const n=OM(e[o])&&r[o];i[o]=n?AM(r[o],e[o],t):RM(e[o],t)});return i}function AM(r,e,t){const i=Array.isArray(e);if(i){return Array.isArray(r)?e:RM(e,t)}return cKe(r,e,t)}function ri(r,e=null){if(!Array.isArray(r)||r.length<2){throw new Error("first argument should be an array with at least two elements")}return r.reduce((t,i)=>{return AM(t,i,e)})}var nKe,sKe,aKe,lKe;var rc=p(()=>{nKe=typeof Symbol==="function"&&Symbol.for;sKe=r=>{return Object.prototype.toString.call(r)==="[object RegExp]"||Object.prototype.toString.call(r)==="[object Date]"||Object.prototype.toString.call(r).includes("HTML")||Object.prototype.toString.call(r)==="[object Array]"};aKe=r=>{if(nKe&&Object.hasOwnProperty.call(r,"$$typeof")){return r.$$typeof===Symbol.for("react.element")||r.$$typeof===Symbol.for("react.forward_ref")}return false};lKe=r=>{return Object.hasOwnProperty.call(r,"__ngContext__")}});var FM;var PM=p(()=>{B();FM=class extends mo{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(e){this.emit("export",e)}onClose(){this.emit("close")}onUndo(){this.emit("historyUndo")}onRedo(){this.emit("historyRedo")}onHistoryChange(){this.emit("historyChange")}onEditorReady(){this.emit("editorReady")}onErrorImageLoading(e){this.emit("errorImageLoading",e)}onImageLoaded(){this.emit("imageLoad")}onStickerUploadedAdd(e){this.emit("stickerUploadAdd",e)}onToolChanged(e){this.emit("toolEnter",e)}onErrorWebGLContextLost(){this.emit("errorWebGLContextLost")}onCropDimensionsChanged(e){if(this.prevDimensions.width!==e.width||this.prevDimensions.height!==e.height){this.emit("cropDimensionsChange",e);this.prevDimensions=e}}}});var BM;var ppe=p(()=>{rc();Iw();BM=ri([ec,{layout:"basic",defaultTool:null}])});var mpe=p(()=>{Iw();ppe()});var MM;var hpe=p(()=>{B();MM={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse",itemAriaLabel:"Bild mit ${label} ersetzen"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t",itemAriaLabel:"${label} Filter hinzuf\xFCgen"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t",itemAriaLabel:"${label} Fokus hinzuf\xFCgen"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus",itemAriaLabel:"Overlay ${label} hinzuf\xFCgen"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz",itemAriaLabel:"Sticker ${label} hinzuf\xFCgen"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle",itemAriaLabel:"Text Design ${label} hinzuf\xFCgen"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke",itemAriaLabel:"Rahmen ${label} hinzuf\xFCgen"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe",itemAriaLabel:"Zuschneiden ${label}",inputHeightAriaLabel:"H\xF6he",inputWidthAriaLabel:"Breite"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},["customTool"]:{title:"Benutzerdefiniert"}}});var lp;var fpe=p(()=>{B();lp={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results",itemAriaLabel:"Replace image with ${label}"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity",itemAriaLabel:"Add ${label} filter"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity",itemAriaLabel:"Add ${label} focus"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode",itemAriaLabel:"Add ${name} overlay"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity",itemAriaLabel:"Add ${label} sticker"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle",itemAriaLabel:"Add ${label} text design"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size",itemAriaLabel:"Add ${label} frame"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size",itemAriaLabel:"Apply ${label} crop",inputHeightAriaLabel:"crop height",inputWidthAriaLabel:"crop width"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},["customTool"]:{title:"Custom"}}});var Mb=p(()=>{hpe();fpe()});var gpe,ype;var bpe=p(()=>{rc();Mb();gpe=r=>{if(r==="de"){return MM}return lp};ype=(r,e)=>{if(e&&e[r]){return ri([gpe(r),e[r]])}return gpe(r)||lp}});var pKe,mKe,LM,Pw;var Lb=p(()=>{rc();pKe={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}};mKe={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}};LM=(r,e=8)=>{const t=r;const i=3*e;const o=t-2*i;const n=(o-2*e)/3;const s=(o-e)/2;return{advancedUIToolControlBar:{width:t,paddingTop:2*e,paddingBottom:2*e,paddingLeft:i,paddingRight:i,marginBottom:0,controls:{gutter:2*e}},advancedUICard:{small:{height:n,width:n},medium:{height:s,width:s},large:{height:86,width:o}},advancedUISpacer:e,inputs:{cropSize:{maxWidth:t},checkbox:{maxWidth:t}}}};Pw=()=>{const r=LM(230);const e={advancedUIToolbar:{width:55,itemHeight:48,separatorHeight:20,marginBottom:0},basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:pKe,zIndex:mKe};return ri([r,e])}});var hKe,Bw;var _pe=p(()=>{hKe=({primary:r="#365afc",background:e="#0B0B0B",foreground:t="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const i="rgba(255, 255, 255, 0.90)";const o="rgba(255, 255, 255, 0.60)";const n="rgba(255, 255, 255, 0.38)";const s="#424242";const a="#333333";const l="#242424";const u="#171717";const c="#0B0B0B";const d="rgba(255, 255, 255, 0.08)";const m="rgba(0, 0, 0, 0.3)";const h="rgba(89, 121, 252, 0.20)";const f="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:e,foreground:t,primary:r,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:i,outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:r,textSecondaryForeground:o,outlinedInactiveOverlayColor:m,textInactiveOpacity:"0.5",hoverOverlayColor:d},checkbox:{background:a,foreground:t,activeForeground:t,activeBackground:r,inactiveOpacity:f,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:r,activeOverlayColor:h,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:i,inactiveOverlayColor:m,hoverOverlayColor:d},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,caretColor:n,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:o,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:f},textInput:{foreground:i,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:f},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:r,thumbBackground:u,thumbBorderColor:r,inactiveOpacity:f,hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:f},toolbar:{foreground:i,background:l,activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:f},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:c,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:t,background:c},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};Bw=hKe});var fKe,zM;var vpe=p(()=>{fKe=({primary:r="#1e47fb",background:e="#FBFBFB",foreground:t="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const i="rgba(0, 0, 0, 0.90)";const o="rgba(0, 0, 0, 0.60)";const n="rgba(0, 0, 0, 0.38)";const s="#CCCCCC";const a="#D4D4D4";const l="#E6E6E6";const u="#EEEEEE";const c="#FBFBFB";const d="rgba(125, 125, 125, 0.12)";const m="rgba(30, 71, 251, 0.2)";const h="rgba(0, 0, 0, 0.1)";const f="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:e,foreground:t,primary:r,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:i,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:r,textSecondaryForeground:o,outlinedInactiveOverlayColor:h,textInactiveOpacity:"0.5",hoverOverlayColor:d},checkbox:{background:a,foreground:t,activeForeground:t,activeBackground:r,inactiveOpacity:f,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:i,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:i,activeBorderColor:r,activeOverlayColor:m,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:h,hoverOverlayColor:d},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:i},dropdown:{background:"transparent",foreground:i,hoverBorderColor:o,borderColor:a,listBackground:a,caretColor:n,listForeground:o,listBorderColor:a,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:f},textInput:{foreground:i,hoverBorderColor:i,background:"transparent",borderColor:a,inactiveOpacity:f},slider:{trackColor:s,activeTrackColor:r,thumbBackground:u,thumbBorderColor:r,inactiveOpacity:f,hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:f},toolbar:{foreground:i,background:a,activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:s,foreground:i},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:u,shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:f},mainCanvasActionBar:{background:"transparent",foreground:i,borderColor:"none"},canvasActionBar:{background:s,foreground:i,separatorColor:n},canvas:{background:c,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:t,background:c},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};zM=fKe});var zb,Mw,Do;var Ub=p(()=>{Lb();_pe();vpe();zb=Bw();Mw=Pw();Do={...zb,measurements:Mw}});var yKe,xpe;var Cpe=p(()=>{rc();Ub();yKe=r=>{if(r==="light"){return zM}return Bw};xpe=(r,e)=>{const t=yKe(r);if(e&&e[r]){const{primary:i,background:o,foreground:n}=e[r];const s={primary:i,background:o,foreground:n};const a=Object.keys(s).reduce((l,u)=>{if(s[u]){return{...l,[u]:s[u]}}return l},{});return ri([t(a),e[r]])}return t()||zb}});var bKe,Spe;var wpe=p(()=>{rc();Lb();bKe=["canvas","advancedUIToolbar","advancedUIToolControlBar","advancedUICard","advancedUISpacer","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","inputs","colorItem","fontSystem"];Spe=r=>{const e=Pw();if(r){const t={};Object.keys(r).forEach(i=>{if(bKe.indexOf(i)!==-1){t[i]=r[i]}});return ri([e,t])}return e}});var Tpe=p(()=>{bpe();Cpe();wpe()});var _Ke,Ei;var Lw=p(()=>{ze();B();Ks();W();rc();PM();mpe();aM();Mb();Tpe();Ub();_Ke={config:ec,locale:lp,theme:zb,measurements:Mw,initialMeasurements:Mw};Ei=class{constructor(){this.dispose=()=>{this.state=null;this.events=null;this.assetProvider=null};this.checkDefaultToolAvailability=(e,t)=>{return t.indexOf(e)!==-1};this.state=ae(_Ke);this.events=new FM;this.licenseChecker=null}saveConfig(e){if(e.mainCanvasActions&&e.mainCanvasActions.length!==4){e.mainCanvasActions.length=4}const t=e.layout&&e.layout==="basic"?BM:ec;const i=ri([t,e],{clone:true});this.licenseChecker=new ww(i.license);if(!this.licenseChecker.areCustomAssetsAllowed()){i.sticker.enableCustomUpload=false}const o=ype(i.language,i.custom.languages);const n=xpe(i.theme,i.custom.themes);const s=Spe(i.custom.measurements);const{provider:a}=i.library;const l=[];i.adjustment.categories=i.adjustment.categories.reduce((d,m)=>{d.push({...m,items:m.items.filter(h=>{if(!xO[h.identifier]){l.push(h.identifier);return false}return true})});return d},[]);if(l.length!==0){console.error(`The following identifier are incorrect for the adjustment tool: ${l.join(", ")}`)}delete i.language;delete i.custom.languages;delete i.custom.themes;delete i.library.provider;let u=i.tools.reduce((d,m)=>{if(typeof m==="object"){return[...d,...m]}return[...d,m]},[]);if(!u.length){console.error(`Empty list input for tools`);u=Tw.reduce((d,m)=>{if(typeof m==="object"){return[...d,...m]}return[...d,m]},[])}u=u.filter(d=>this.licenseChecker.isToolAllowed(d));if(i.defaultTool){const d=this.checkDefaultToolAvailability(i.defaultTool,u);if(!d){[i.defaultTool]=u}}i.tools=u;this.state.config=i;this.state.locale=o;this.state.theme=n;this.state.measurements=s;this.state.initialMeasurements=s;const c=this.buildCustomAssetsConfig();this.assetProvider=new ny(c,this.licenseChecker.areCustomAssetsAllowed(),i.assetResolver);this.loadThemeFont();return a}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get initialMeasurements(){return this.state.initialMeasurements}get tools(){return this.config.tools.reduce((e,t)=>{if(typeof t==="string"){return[...e,t]}return[...e,"",...t]},[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf("close")!==-1}loadThemeFont(){const{typography:e}=this.theme;if(!e.skipLoading){this.assetProvider.getFontManager().injectFonts([e])}}buildCustomAssetsConfig(){const e=this.tools;const t=ve(this.state.config);const i=this.state.config.assetBaseUrl;const{theme:o}=this.state;const n=e.indexOf("filter")!==-1?t["filter"]:void 0;const s=e.indexOf("focus")!==-1?t["focus"]:void 0;const a=e.indexOf("adjustment")!==-1?t["adjustment"]:void 0;const l=e.indexOf("sticker")!==-1?t["sticker"]:void 0;const u=e.indexOf("frame")!==-1?t["frame"]:void 0;const c=e.indexOf("overlay")!==-1?t["overlay"]:void 0;const d=e.indexOf("transform")!==-1?t["transform"]:void 0;const m=e.indexOf("text")!==-1?t["text"]:void 0;const h=e.indexOf("textdesign")!==-1?t["textdesign"]:void 0;return{basePath:i,theme:o,filter:n,focus:s,sticker:l,frame:u,overlay:c,transform:d,text:m,adjustment:a,textdesign:h}}};g([S],Ei.prototype,"saveConfig",1);g([S],Ei.prototype,"dispose",2);g([w],Ei.prototype,"config",1);g([w],Ei.prototype,"locale",1);g([w],Ei.prototype,"theme",1);g([w],Ei.prototype,"measurements",1);g([w],Ei.prototype,"initialMeasurements",1);g([w],Ei.prototype,"tools",1);g([w],Ei.prototype,"defaultTool",1);g([w],Ei.prototype,"isOrderDefault",1);g([w],Ei.prototype,"isLayoutAdvanced",1);g([w],Ei.prototype,"displayCloseButton",1)});var UM;var NM=p(()=>{B();_O();UM=class{constructor(e){this.editor=e}setBackgroundImage(e){if(!this.container){this.container=this.engine.addImage({image:e,originalImage:e,blendMode:"normal",opacity:1})}else{this.container.setData({image:e,originalImage:e})}}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((e,t)=>{const{image:i}=this.editor.activeStore;if(kK(i)){this.setBackgroundImage(i);e()}else{const o=this.editor.libraryStore.getRawUrl(i);this.getImageElement(o).then(n=>{this.setBackgroundImage(n);e()}).catch(n=>{t({identifier:"imageLoading",message:n.message})})}})}getImageElement(e){return new Promise((t,i)=>{const o=new Image;o.addEventListener("load",()=>{t(o)});o.addEventListener("error",n=>{i(n)});o.crossOrigin=this.editor.configStore.config.engine.crossOrigin;o.src=e})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}});var qM;var HM=p(()=>{W();qM=class{constructor(e){this.applyNewImageTransform=()=>{const{size:e,width:t,height:i}=this.editor.engineMediator.image.container.getBounds();const o=this.container;o.setTransform(bt.IDENTITY);o.setResolution(e);o.setPivot(.5,.5);o.setPosition({x:t/2,y:i/2})};this.editor=e}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}});function Nb(r,e){const t=r.width/r.height;const i=e.width/e.height;if(t>i){return r.height/e.height}return r.width/e.width}var Ipe=p(()=>{});var vKe,Sl;var WM=p(()=>{ze();W();Ipe();vKe={transform:bt.IDENTITY};Sl=class{constructor(e){this.initialTransform=bt.IDENTITY;this.editor=e;this.state=ae(vKe)}createPreview(e){this.container=this.editor.engine.createPreview(e)}updateTransform(e=0,t=true){const i=this.calculateTransform(e);if(i.scale.x){if(t){this.saveInitialTransform(i)}else{this.savePreviewTransform(i)}this.container.setTransform(this.state.transform);return true}return false}saveInitialTransform(e){this.initialTransform=e;this.savePreviewTransform(e)}savePreviewTransform(e){lr(()=>{this.state.transform.position=e.position;this.state.transform.scale=e.scale;this.state.transform.rotation=e.rotation;const t=kn();const i=new F(e.scale).divide(t);this.previewTransformWithoutDpr={position:new F(e.position).divide(t),scale:i,rotation:e.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(e=0){const t=kn();const{scaleImageToFit:i}=this.editor.configStore.config;const{width:o,height:n}=this.editor.canvasStore.canvasSize;const s=this.editor.engine.getOutputDimensions();const a=Nb({width:o,height:n},s);let l=i?a:Math.min(1,a);const u=n-s.height*l;const c=this.editor.configStore.measurements.mainCanvasActionBar.height*2;if(u<c){l=Nb({width:o,height:n-c},s)}const d=.95;if(s.height*l>n*d){l=Nb({width:o,height:n*d},s)}if(s.width*l>o*d){l=Nb({width:o*d,height:n},s)}l*=t;const m={x:o*t/2,y:n*t/2};const h={x:l,y:l};return new bt(m,h,e)}};g([S],Sl.prototype,"updateTransform",1);g([S],Sl.prototype,"savePreviewTransform",1);g([w],Sl.prototype,"transform",1);g([w],Sl.prototype,"position",1);g([w],Sl.prototype,"scale",1);g([w],Sl.prototype,"rotation",1)});var ic,zw;var GM=p(()=>{B();ic=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(e){if(["sticker","text","textdesign","brush"].indexOf(e)!==-1){throw new Error("addIndex is used for non sprites, for sprites use addSprite")}}static remove(e,t){const i=t.findIndex(o=>o===e);if(i!==-1){t.splice(i,1)}return void 0}static indexForOrder(e,t,i){const o=e[i];const n=t.findIndex(a=>a===i);if(n!==-1){return{index:n,order:t}}const{length:s}=t;if(s){let a;for(a=0;a<s;a+=1){const l=t[a];const u=e[l];if(o<u){t=[...t.slice(0,a),i,...t.slice(a)];return{index:a,order:t}}}}t.push(i);return{index:t.length-1,order:t}}addIndex(e){ic.checkTool(e);const{index:t,order:i}=ic.indexForOrder(ic.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e);this.imageContainerOrder=i;return t}removeIndex(e){ic.checkTool(e);ic.remove(e,this.imageContainerOrder)}addSprite(e){this.spriteContainerOrder.push(e);return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(e){ic.remove(e,this.spriteContainerOrder)}renameSprite(e,t){const i=this.spriteContainerOrder.findIndex(o=>o===e);if(i!==-1){this.spriteContainerOrder[i]=t}}bringToFront(e){const t=this.spriteContainerOrder.findIndex(i=>i===e);if(t!==-1){this.spriteContainerOrder.splice(t,1);this.spriteContainerOrder.push(e)}return this.getLastSpriteIndex()}getLastSpriteId(){const{length:e}=this.spriteContainerOrder;return this.spriteContainerOrder[e-1]}getSpriteIndex(e){const t=this.spriteContainerOrder.findIndex(i=>i===e);return t+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}};zw=ic;zw.IMAGE_CONTAINER_INDEX={["filter"]:0,["adjustment"]:1,["focus"]:2,["overlay"]:3}});var VM;var jM=p(()=>{Ks();W();NM();HM();WM();GM();VM=class{constructor(e){this.orderHelper=new zw;this.init=()=>{const e=this.editor.configStore.config.engine;this.engine=new Zh({...e,license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark});this.image=new UM(this.editor);this.output=new qM(this.editor);this.preview=new Sl(this.editor)};this.dispose=()=>{if(this.engine){this.engine.dispose();this.engine=null}this.image=null;this.output=null;this.preview=null};this.editor=e}render(e){return this.engine.render(e)}previewSpaceToWorldSpace(e,t){const i=this.preview.previewTransformWithoutDpr;if(Wo(e)){const o=this.editor.engine.convertPointFromPreviewIntoWorldSpace(F.ZERO,i,t);const n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},i,t);return F.distance(new F(o),new F(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,i,t)}worldSpaceToPreviewSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Wo(e)){const i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(F.ZERO,t);const o=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return F.distance(new F(i),new F(o))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)}outputSpaceToWorldSpace(e){if(Wo(e)){return ye.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer())}return ye.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(e){const t=this.preview.previewTransformWithoutDpr;if(Wo(e)){const i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(F.ZERO,t);const o=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return F.distance(new F(i),new F(o))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)}previewSpaceToFlippedPreviewSpace(e){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(e)}}});var of;var Epe=p(()=>{ze();of=class{constructor(){this.snapshots=[];this.observeIndex=ae.box(-1)}addSnapshot(e){if(this.index===this.snapshots.length-1){this.snapshots=this.snapshots.concat(JSON.stringify(e))}else{this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(e)]}this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[];this.observeIndex.set(-1)}undo(){if(this.canUndo){this.observeIndex.set(this.index-1);return JSON.parse(this.getCurrentState())}return null}redo(){if(this.canRedo){this.observeIndex.set(this.index+1);return JSON.parse(this.getCurrentState())}return null}discardSnapshotsfromIndex(e){if(e>0&&e<this.snapshots.length-1){this.snapshots=this.snapshots.slice(0,e);this.observeIndex.set(this.snapshots.length-1)}}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};g([w],of.prototype,"index",1);g([w],of.prototype,"canUndo",1);g([w],of.prototype,"canRedo",1)});var up;var Uw=p(()=>{ze();B();Epe();Ii();up=class{constructor(e){this.awaitHistoryChange=false;this.isDirtySinceSave=false;this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo();this.awaitHistoryChange=true;const e=this.appHistoryManager.undo();await this.applyState(e);this.awaitHistoryChange=false;if(!this.canUndo){this.isDirtySinceSave=false}}};this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo();this.awaitHistoryChange=true;const e=this.appHistoryManager.redo();await this.applyState(e);this.awaitHistoryChange=false}};this.editor=e;this.appHistoryManager=new of}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const e=ve(this.editor.adjustmentsToolStore.state);const t=ve(this.editor.filterToolStore.state);const i=this.editor.focusToolStore.getFocusStateForHistory();const o=ve(this.editor.overlayToolStore.state);const n=ve(this.editor.frameToolStore.state);const{strokes:s}=this.editor.brushToolStore;const a=this.editor.spriteStore.getSpriteHistoryState();const l=this.editor.transformToolStore.serializableState;return{["adjustment"]:e,["filter"]:t,["focus"]:i,["overlay"]:o,["frame"]:n,["brush"]:s,sprite:a,["transform"]:l}}addInitialSnapshot(){const e=this.getHistoryState();this.appHistoryManager.addSnapshot({state:e,type:"add",description:"Initial State"})}addSnapshot(e,t,i){let o;if(!e){o=this.getHistoryState()}else if(e.sprite||e.transform){o={...this.getHistoryState(),...e}}else{o=e}this.appHistoryManager.addSnapshot({state:o,type:t,description:i});this.editor.configStore.events.onHistoryChange();if(!this.isDirtySinceSave){this.isDirtySinceSave=true}}async applyState({state:e}){try{if(e){const t=Object.keys(e);for(const i of t){switch(i){case"filter":await this.editor.filterToolStore.updateStateFromHistory(e[i]);break;case"adjustment":await this.editor.adjustmentsToolStore.updateStateFromHistory(e[i]);break;case"overlay":await this.editor.overlayToolStore.updateStateFromHistory(e[i]);break;case"frame":await this.editor.frameToolStore.updateStateFromHistory(e[i]);break;case"focus":await this.editor.focusToolStore.updateStateFromHistory(e[i],this.editor.canvasStore.sizeVector);break;case"brush":await this.editor.brushToolStore.updateStateFromHistory(e[i]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(e[i]);break;case"transform":this.editor.outputContainer.pauseChildrenUpdates();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.updateStateFromSerialization(e[i]);this.editor.transformToolStore.onLeave();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.onLeave();this.editor.outputContainer.resumeChildrenUpdates();await this.editor.wait();break;default:break}}await this.editor.renderPromise()}}catch(t){console.error(t);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:t,handleConfirm:()=>{this.applyState({state:e})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset();this.isDirtySinceSave=false}getCurrentSpritesState(){var e,t;return(t=(e=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:e.state)==null?void 0:t.sprite}};g([S],up.prototype,"undo",2);g([S],up.prototype,"redo",2);g([w],up.prototype,"canUndo",1);g([w],up.prototype,"canRedo",1)});var xKe,kpe,CKe,$M;var Dpe=p(()=>{xKe=(r,e)=>new Promise((t,i)=>{const o=new XMLHttpRequest;o.onload=()=>{const n=new FileReader;n.onloadend=()=>{if(typeof n.result==="string"&&n.result.substr(0,10)==="data:image"){t(n.result)}else{i(new Error(`The image could not be loaded from ${r}`))}};n.onerror=s=>{i(s)};n.readAsDataURL(o.response)};o.open("GET",r);o.responseType="blob";o.withCredentials=e==="use-credentials";o.send()});kpe=(r,e)=>{return new Promise((t,i)=>{const o=new Image;o.onload=()=>{t(o)};o.onerror=()=>{i(new Error(`Failed to load image with src:${r}`))};o.crossOrigin=e;o.src=r})};CKe=(r,e)=>new Promise((t,i)=>{xKe(r,e).then(o=>{const n=new Image;n.addEventListener("load",()=>{t(n)});n.src=o}).catch(()=>{kpe(r,e).then(o=>t(o)).catch(o=>{i(o)})})});$M=async({url:r,image:e,crossOrigin:t="anonymous"})=>{try{if(e&&e.src&&e.src.substr(0,5)==="data:"||e&&e.src&&e.src.includes(".svg")){return e}if(typeof r==="string"&&r.substr(0,5)==="data:"||typeof r==="string"&&r.includes(".svg")){return kpe(r,t)}return CKe(r||e.src,t)}catch(i){throw new Error(i)}}});var SKe,Xi;var Nw=p(()=>{ze();B();W();Dpe();SKe={tool:null,isWebcam:false,image:"",imageLoadedToEngine:false};Xi=class{constructor(e){this.setImage=async e=>{try{const{crossOrigin:t}=this.editor.configStore.config.engine;if(typeof e==="string"&&!e.trim()||e===void 0||e===null){this.state.image=null}else if(typeof e==="string"){this.state.image=await $M({url:_s(e)?e:this.editor.assetProvider.getPath(e),crossOrigin:t})}else if(e instanceof HTMLImageElement){this.state.image=await $M({image:e,crossOrigin:t})}if(this.isWebcam){this.state.isWebcam=false}}catch(t){throw new Error(t)}};this.setImageLoadedToEngine=e=>{this.state.imageLoadedToEngine=e};this.newImage=e=>{this.editor.init(e)};this.dispose=()=>{this.state=null;this.editor=null};this.editor=e;this.state=ae(SKe)}selectTool(e){var i,o,n;const{licenseChecker:t}=this.editor.configStore;if(this.state.tool!==e&&(t==null?void 0:t.isToolAllowed(e))&&(this.image||e==="library"||e==="customTool")){if(this.editor.configStore.isLayoutAdvanced){const s=(n=(o=(i=this.editor.configStore.state.config["customTool"])==null?void 0:i.measurements)==null?void 0:o.advancedUIToolControlBar)==null?void 0:n.width;if(s){if(e==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=s}else if(this.state.tool==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=this.editor.configStore.initialMeasurements.advancedUIToolControlBar.width}}}this.editor.onToolChange(this.state.tool,e);this.state.tool=e;this.editor.configStore.events.onToolChanged(e);switch(e){case"text":if(this.editor.configStore.config.text.addDefaultTextOnEnter){this.editor.spriteStore.textToolStore.addOrselect()}else{this.editor.spriteStore.textToolStore.loadFonts()}break;case"textdesign":if(this.editor.configStore.config.textdesign.addDefaultTextOnEnter){this.editor.spriteStore.textDesignToolStore.addOrselect()}break;case"brush":{this.editor.brushToolStore.initSize();break}case"transform":this.editor.transformToolStore.applyDefaultCrop();break;default:break}}}selectWebcam(e){this.state.isWebcam=e}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};g([S],Xi.prototype,"selectTool",1);g([S],Xi.prototype,"selectWebcam",1);g([S],Xi.prototype,"setImage",2);g([S],Xi.prototype,"setImageLoadedToEngine",2);g([S],Xi.prototype,"newImage",2);g([S],Xi.prototype,"dispose",2);g([w],Xi.prototype,"webcamLabel",1);g([w],Xi.prototype,"tool",1);g([w],Xi.prototype,"isWebcam",1);g([w],Xi.prototype,"image",1);g([w],Xi.prototype,"imageLoadedToEngine",1)});var wKe,KM,XM,ii;var qw=p(()=>{ze();B();W();wKe={height:150,width:150};KM={height:0,width:0};XM=class{constructor(e){this.canvasClickDisabled=ae.box(false);this.resizeCanvas=(e=null)=>{const t=this.editor.activeStore.tool;const i=e==="transform"||!e&&t==="transform";const{isLayoutAdvanced:o,measurements:n}=this.editor.configStore;const{storedSize:s}=this.editor.canvasStore;let a=0;if(!o&&i){a=n.basicUIToolControlBar.controlsBarHeight*-1;if(e==="transform"&&t==="brush"){a-=n.basicUIToolControlBar.itemsBarHeight+4}}this.setCanvasSize({width:s.width,height:s.height+a})};this.setCanvasSize=e=>{this.state.canvasSize=e};this.dispose=()=>{this.state=null;this.canvas=null;this.canvasClickDisabled=null;this.editor=null};this.editor=e;this.state=ae(XM.initialState)}setCanvasElement(e){this.canvas=e;this.editor.engineMediator.preview.createPreview(e);if(this.editor.activeStore.image){this.editor.init(this.editor.activeStore.image)}}saveDimensions({height:e,width:t,render:i}){const{imageLoadedToEngine:o}=this.editor.activeStore;if(e>KM.height&&t>KM.width){this.state.storedSize={width:t,height:e};if(this.state.canvasSize.height===0){this.state.canvasSize={width:t,height:e}}if(i&&o){this.editor.resize()}}}disableCanvasClick(){this.canvasClickDisabled.set(true)}enableCanvasClick(){this.canvasClickDisabled.set(false)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return F.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(e){const t=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(i=>i.getID()).filter(i=>i!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(t)}};ii=XM;ii.initialState={canvasSize:KM,storedSize:wKe};g([S],ii.prototype,"setCanvasElement",1);g([S],ii.prototype,"saveDimensions",1);g([S],ii.prototype,"resizeCanvas",2);g([S],ii.prototype,"disableCanvasClick",1);g([S],ii.prototype,"enableCanvasClick",1);g([S],ii.prototype,"setCanvasSize",2);g([S],ii.prototype,"dispose",2);g([w],ii.prototype,"isCanvasClickable",1);g([w],ii.prototype,"canvasSize",1);g([w],ii.prototype,"storedSize",1);g([w],ii.prototype,"sizeVector",1);g([w],ii.prototype,"sizeVectorMagnitude",1)});var TKe,Oo;var Hw=p(()=>{ze();B();TKe={type:null,identifier:null,isVisible:false,error:""};Oo=class{constructor(e){this.showActionModal=({type:e,identifier:t,error:i,handleConfirm:o,handleDismiss:n})=>{this.resetHandlers();this.state.isVisible=true;this.state.identifier=t;this.state.type=e;this.state.error=i||"";this.handleConfirm=o;this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=false;this.state.type=null;this.state.error="";this.state.identifier=null;this.resetHandlers()};this.dispose=()=>{this.state=null;this.configStore=null};this.resetHandlers=()=>{this.handleConfirm=null;this.handleDismiss=null};this.configStore=e.configStore;this.state=ae(TKe)}showInfoModal(e){this.resetHandlers();this.state.isVisible=true;this.state.type="info";this.state.identifier=e;this.state.error=""}showTextEditModal(){this.resetHandlers();this.state.isVisible=true;this.state.type="textEdit";this.state.identifier="inputText";this.state.error=""}get modalProps(){const{isVisible:e}=this.state;const t=this.getModalLocale();if(t){const{bodyLabel:i,headerLabel:o,buttonYes:n,buttonNo:s}=t;return{headerLabel:o,bodyLabel:i,confirmLabel:n,dismissLabel:s,isVisible:e,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:false}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:e,measurements:{basicCanvasOffset:t,advancedUIToolControlBar:i,advancedUIToolbar:o},isOrderDefault:n}=this.configStore;const s=(i.width+o.width)*(!n?-1:1);const a=t;return e?{x:s/2,y:0}:{x:0,y:-a}}getModalLocale(){const{identifier:e,error:t,type:i}=this.state;const{locale:o}=this.configStore;if(!i||!e||i==="textEdit")return null;if(i&&e&&o[`${i}Modals`]&&o[`${i}Modals`][e]){const n=o[`${i}Modals`][e];let{body:s}=n;if(s&&typeof t==="object"){Object.keys(t).forEach(l=>{s=s.replace(`\${${l}}`,t[l])})}else if(s){s=s.replace("${error}",t)}let a=n.heading;if(i==="error"||i==="warning"){const l={error:o.common.error,warning:o.common.warning};const u=i==="error"?l.error:l.warning;a=`${u}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:s,headerLabel:a,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};g([S],Oo.prototype,"showActionModal",2);g([S],Oo.prototype,"showInfoModal",1);g([S],Oo.prototype,"showTextEditModal",1);g([S],Oo.prototype,"hideModal",2);g([S],Oo.prototype,"dispose",2);g([w],Oo.prototype,"modalProps",1);g([w],Oo.prototype,"isVisible",1);g([w],Oo.prototype,"type",1);g([w],Oo.prototype,"identifier",1);g([w],Oo.prototype,"positionOffset",1)});var vr;var Ww=p(()=>{ze();W();vr=class{constructor(e){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(e=>e/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{if(this.canZoomIn){this.state.scaleIndex+=1;this.scaleRender()}};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:e,maxOffsetY:t}=this.checkOffset({x:0,y:0});if(this.state.scaleIndex===this.defaultIndex){this.offset.y=t}if(this.state.scaleIndex===this.defaultIndex){this.offset.x=e}this.savePosition();this.scaleRender()}};this.setOffset=e=>{const{canDragX:t,canDragY:i}=this.checkOffset(e);if(t){this.offset.x=e.x}if(i){this.offset.y=e.y}this.scaleRender()};this.editor=e}setInitialTransform(e=0){const t=kn();const{scaleImageToFit:i}=this.editor.configStore.config;const{transform:o}=this.editor.engineMediator.preview;lr(()=>{const n=Math.abs(e||o.scale.x);this.setDefaultScale(i?n:Math.min(1*t,n));this.setPosition(o.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:e,height:t}=this.editor.canvasStore.canvas;this.setPosition({x:e/2,y:t/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(e){this.state.position.x=e.x;this.state.position.y=e.y}savePosition(){this.setPosition(this.getPositionWithOffset());this.offset={x:0,y:0}}setDefaultScale(e){if(this.defaultScale!==1){const i=this.SCALE_LEVELS.findIndex(o=>o===this.defaultScale);if(i!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),...this.SCALE_LEVELS.slice(i+1)]}}const t=this.SCALE_LEVELS.findIndex(i=>i===e);if(t!==-1){this.state.scaleIndex=t}else{const i=this.SCALE_LEVELS.findIndex((o,n)=>{if(n===0){return e<o}return this.SCALE_LEVELS[n-1]<e&&e<o});if(i!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,i),e,...this.SCALE_LEVELS.slice(i)];this.state.scaleIndex=i}else{this.SCALE_LEVELS=[...this.SCALE_LEVELS,e];this.state.scaleIndex=this.SCALE_LEVELS.length-1}}this.defaultScale=e}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(e){const t=kn();const{scaledSize:i}=this;const{previewSize:o}=this;const n=this.editor.engineMediator.preview.initialTransform.position;const s=this.getPositionWithOffset(e);const a=(i.width-o.width)*t/2;const l=(i.height-o.height)*t/2;const u=n.x-s.x;const c=n.y-s.y;const d=Math.abs(u);const m=Math.abs(c);const h=u>0;const f=c>0;const b=d-a;const _=m-l;return{canDragX:b<0,canDragY:_<0,maxOffsetX:h?-b:b,maxOffsetY:f?-_:_}}calculateScale(e=0,t=this.previewSize,i=this.defaultScale){const{width:o,height:n}=t;const s=new F({x:o,y:n});const a=new F(Math.abs(s.x*Math.cos(e))+Math.abs(s.y*Math.sin(e)),Math.abs(s.x*Math.sin(e))+Math.abs(s.y*Math.cos(e)));const l=s.subtract(a).divide(2).multiply(i).abs;if(l.y>l.x){return l.y*2/s.y+i}return l.x*2/s.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex(e=>e===this.defaultScale)}getPositionWithOffset(e=this.offset){const{position:t}=this;return{x:t.x-e.x,y:t.y-e.y}}scaleRender(e=false){const t=this.editor.scale.getPositionWithOffset();const i=e?this.defaultScale:this.scale;const o={x:i,y:i};this.editor.engineMediator.preview.container.setScale(o);this.editor.engineMediator.preview.container.setPosition(t);this.editor.engineMediator.preview.savePreviewTransform({scale:o,position:t,rotation:0});if(!e){this.editor.render()}}get scale(){const e=this.state.scaleIndex;return e!==-1?this.SCALE_LEVELS[e]:this.defaultScale}get zoomLevel(){const e=kn();return(this.scale/e*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:e}=this.editor.configStore.config;if(e){return this.state.scaleIndex>this.defaultIndex}return this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const e=this.state.scaleIndex;const t=e!==-1?this.SCALE_LEVELS[e]:this.defaultScale;const{previewSize:i}=this;return{width:i.width*t/this.defaultScale,height:i.height*t/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};g([ae],vr.prototype,"state",2);g([S],vr.prototype,"in",2);g([S],vr.prototype,"out",2);g([S],vr.prototype,"setInitialTransform",1);g([S],vr.prototype,"resetScale",1);g([S],vr.prototype,"resetPosition",1);g([S],vr.prototype,"setPosition",1);g([S],vr.prototype,"savePosition",1);g([S],vr.prototype,"setDefaultScale",1);g([S],vr.prototype,"setScaleToDefault",1);g([w],vr.prototype,"scale",1);g([w],vr.prototype,"zoomLevel",1);g([w],vr.prototype,"canDrag",1);g([w],vr.prototype,"canZoomOut",1);g([w],vr.prototype,"canZoomIn",1);g([w],vr.prototype,"position",1);g([w],vr.prototype,"scaledSize",1)});var Ope,IKe,Qs,rr;var YM=p(()=>{ze();W();Ope=[[0,0],[0,1],[1,0],[1,1]];IKe=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];Qs=class{constructor(e,t,i="center",o=true,n=false){this.considerRotation=true;this.considerFlip=true;this.store=t;this.m=i==="center"?Qs.movePivotTo([.5,.5]):Ope;this.considerRotation=o;this.considerFlip=n;this.configStore=e.configStore}static getFlippedEdgeIndex(e,t,i){return IKe[(t?1:0)+(i?2:0)][e]}static movePivotTo(e){return Ope.map(t=>[t[0]-e[0],t[1]-e[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:false}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:false}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(e,t,i){const o=Qs.getFlippedEdgeIndex(e,t,i);const n=this.m[o][0]*this.size.width;const s=this.m[o][1]*this.size.height;return{width:n,height:s}}get leftTop(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(0,t,i);return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottom(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(1,t,i);return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightTop(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(2,t,i);return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottom(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(3,t,i);return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(1,t,i);o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get rightBottomHandle(){const{position:e,flipHorizontally:t,flipVertically:i}=this;const o=this.handleOrigin(3,t,i);o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return Qs.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)}get leftMid(){const e=new F(this.leftTop);const t=new F(this.leftBottom);return e.add(t).divide(2)}get rightMid(){const e=new F(this.rightTop);const t=new F(this.rightBottom);return e.add(t).divide(2)}};rr=Qs;rr.coordinatesWithRotation=({width:e,height:t},i,o,n,s,a)=>{let l=e*Math.cos(i)-t*Math.sin(i)+a.x;let u=e*Math.sin(i)+t*Math.cos(i)+a.y;if(o){l=s.x*2-l}if(n){u=s.y*2-u}return new F({x:l,y:u}).rounded};g([w],rr.prototype,"position",1);g([w],rr.prototype,"size",1);g([w],rr.prototype,"rotation",1);g([w],rr.prototype,"flipHorizontally",1);g([w],rr.prototype,"flipVertically",1);g([w],rr.prototype,"flipCenter",1);g([w],rr.prototype,"leftTop",1);g([w],rr.prototype,"leftBottom",1);g([w],rr.prototype,"rightTop",1);g([w],rr.prototype,"rightBottom",1);g([w],rr.prototype,"leftBottomHandle",1);g([w],rr.prototype,"rightBottomHandle",1);g([w],rr.prototype,"leftMid",1);g([w],rr.prototype,"rightMid",1)});var JM=p(()=>{Lw();Mb();Ub();Lb();jM();GM();NM();HM();WM();Uw();Nw();qw();Hw();Ww();YM()});var He;var Rpe=p(()=>{ze();W();DM();He=class{constructor(e,t){this.minCropSize=0;this.id="";this.dispose=()=>{this.state=null;this.defaults=null;this.configStore=null};this.state={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:false,flipVertically:false,cropState:ae.map({})};this.configStore=e.configStore;this.id=Ge();this.minCropSize=this.configStore.measurements.crop.minSize;this.defaults=t}changeIdentifier(e){this.state.identifier=e;const t=this.state.cropState.get(`${this.id}-${e}`);if(!t){this.state.cropState.set(`${this.id}-${e}`,{...Gn})}}changeRatio(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){this.state.cropState.set(`${this.id}-${this.identifier}`,{...t,ratio:e})}}changeSize(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){if(e.width&&e.width>0){t.size.width=Math.round(e.width)}if(e.height&&e.height>0){t.size.height=Math.round(e.height)}this.state.cropState.set(`${this.id}-${this.identifier}`,t)}}changeHeight(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){if(e){t.size.height=Math.round(e);this.state.cropState.set(`${this.id}-${this.identifier}`,t)}}}changeWidth(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){if(e){t.size.width=Math.round(e);this.state.cropState.set(`${this.id}-${this.identifier}`,t)}}}changePositionX(e,t){const i=this.state.cropState.get(`${this.id}-${this.identifier}`);if(i&&e<=t-this.minCropSize&&e>=0){i.position.x=Math.round(e);this.state.cropState.set(`${this.id}-${this.identifier}`,i);return true}return false}changePositionY(e,t){const i=this.state.cropState.get(`${this.id}-${this.identifier}`);if(i&&e<=t-this.minCropSize&&e>=0){i.position.y=Math.round(e);this.state.cropState.set(`${this.id}-${this.identifier}`,i);return true}return false}changePosition(e,t){const i=this.state.cropState.get(`${this.id}-${this.identifier}`);if(i){if(e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0){i.position.x=Math.round(e.x);i.position.y=Math.round(e.y);this.state.cropState.set(`${this.id}-${this.identifier}`,i);return true}}return false}changeLockResolution(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){t.lockResolution=e!==void 0?e:!t.lockResolution;this.state.cropState.set(`${this.id}-${this.identifier}`,t)}}changeForceDimensions(e){const t=this.state.cropState.get(`${this.id}-${this.identifier}`);if(t){t.forceDimensions=e;this.state.cropState.set(`${this.id}-${this.identifier}`,t)}}clearState(){this.state.cropState.forEach((e,t)=>t.startsWith(this.id)&&this.state.cropState.delete(t))}setRotation(e){this.state.rotationInDegrees=e}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=false;this.state.flipVertically=false}updateFlip({flipHorizontally:e,flipVertically:t}){this.state.flipHorizontally=e;this.state.flipVertically=t}setOutputRotation(e){this.state.outputRotation=e}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:e,height:t}=this.defaults.maxCropMaskSize;return new F(e/2,t/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:Gn.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:Gn.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:Gn.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:Gn.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:Gn.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:Gn.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:Gn.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:Gn.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:Gn.forceDimensions}get selectedCrop(){return this.state.cropState.get(`${this.id}-${this.identifier}`)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};g([ae],He.prototype,"state",2);g([S],He.prototype,"changeIdentifier",1);g([S],He.prototype,"changeRatio",1);g([S],He.prototype,"changeSize",1);g([S],He.prototype,"changeHeight",1);g([S],He.prototype,"changeWidth",1);g([S],He.prototype,"changePositionX",1);g([S],He.prototype,"changePositionY",1);g([S],He.prototype,"changePosition",1);g([S],He.prototype,"changeLockResolution",1);g([S],He.prototype,"changeForceDimensions",1);g([S],He.prototype,"clearState",1);g([S],He.prototype,"setRotation",1);g([S],He.prototype,"resetRotation",1);g([S],He.prototype,"resetOutputRotation",1);g([S],He.prototype,"resetFlip",1);g([S],He.prototype,"updateFlip",1);g([S],He.prototype,"setOutputRotation",1);g([S],He.prototype,"flipHorizontally",1);g([S],He.prototype,"flipVertically",1);g([S],He.prototype,"dispose",2);g([w],He.prototype,"flipCenter",1);g([w],He.prototype,"isFlippedHorizontal",1);g([w],He.prototype,"isFlippedVertical",1);g([w],He.prototype,"identifier",1);g([w],He.prototype,"height",1);g([w],He.prototype,"width",1);g([w],He.prototype,"position",1);g([w],He.prototype,"ratio",1);g([w],He.prototype,"size",1);g([w],He.prototype,"x",1);g([w],He.prototype,"y",1);g([w],He.prototype,"lockResolution",1);g([w],He.prototype,"forceDimensions",1);g([w],He.prototype,"selectedCrop",1);g([w],He.prototype,"rotationInDegrees",1);g([w],He.prototype,"outputRotation",1)});var ZM;var Ape=p(()=>{ze();W();Jh();ZM=class{constructor(e){this.transforms={output:JSON.stringify(bt.IDENTITY),preview:JSON.stringify(bt.IDENTITY)};this.setFrameOpacity=e=>{this.frameOpacity=e;if(this.entered&&this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(0)}};this.setOverlayOpacity=e=>{this.overlayOpacity=e;if(this.entered&&this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(0)}};this.editor=e;this.overlayOpacity=0;this.frameOpacity=0;this.entered=false}onLeave(){const{flipHorizontally:e,flipVertically:t,rotation:i,outputRotation:o}=this.transformToolStore.rotateFlipState;this.entered=false;if(this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(this.overlayOpacity)}if(this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(this.frameOpacity)}this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new F(this.transformToolStore.leftTopRespectFlip).add(new F(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new F(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),true);const s=this.engineMediator.preview.container;const{outputContainer:a}=this.editor;a.setResolution(ve(this.transformToolStore.localOutputImageSize));a.setData({flipVertically:t,flipHorizontally:e});const l=s.getScale();this.editor.overlayToolStore.correctOverlayFlip();this.saveTransforms();let u=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:f,defaultImageSize:b}=this.transformToolStore;const _=this.transformToolStore.maxCropMaskSize;const y={height:f.height*b.height/_.height,width:f.width*b.width/_.width};u=y.width/this.transformToolStore.localOutputImageSize.width}const c=Math.abs(l.x);const d=u/(c/this.transformToolStore.defaultScale);const m={x:d,y:d};const h=-(i-o);a.setTransform({scale:m,position:n,rotation:h});this.editor.engineMediator.preview.updateTransform(0,false);this.editor.scale.setInitialTransform();this.editor.spriteStore.updateCanvasControls();this.editor.focusToolStore.updateCanvasControls()}resetTransforms(e){this.transforms=e}onEnter(){this.entered=true;if(this.editor.overlayToolStore.identifier!=="identity"){this.overlayOpacity=this.editor.overlayToolStore.opacity;this.editor.overlayToolStore.changeOpacity(0)}if(this.editor.frameToolStore.identifier!=="identity"){this.frameOpacity=this.editor.frameToolStore.opacity;this.editor.frameToolStore.changeOpacity(0)}this.editor.engine.setWatermarkOpacity(0);this.editor.scale.setScaleToDefault();const e=this.engineMediator.preview.container;const{outputContainer:t}=this.editor;const i=JSON.parse(this.transforms.preview);t.setResolution(ve(this.transformToolStore.defaultImageSize));e.setTransform(i);t.setTransform(JSON.parse(this.transforms.output));const o=i.scale;t.setData({flipVertically:false,flipHorizontally:false});this.transformToolStore.transformStore.updateFlip({flipVertically:o.y<0,flipHorizontally:o.x<0});this.engineMediator.preview.savePreviewTransform(i);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(e,t=true){const{width:i,height:o}=this.editor.engineMediator.image.container.getBounds();const n=CJ(e)?{width:o,height:i}:{width:i,height:o};this.editor.outputContainer.rotate(e,n);this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:s}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(s);lr(()=>{this.editor.scale.setInitialTransform();const a=this.getScaleWithFlip(s);this.engineMediator.preview.container.setScale(a);this.transformToolStore.setCropDefaults(true);this.transformToolStore.updateCropMask()});if(t){this.editor.render()}}applyPreviewTransform(){const{rotation:e,flipHorizontally:t,flipVertically:i}=this.transformToolStore.rotateFlipState;const o=this.editor.scale.getPositionWithOffset();const n=this.getScaleWithFlip();let s=e;if(t){s=Yh(s)}if(i){s=Yh(s)}const a={position:o,rotation:s,scale:n};this.engineMediator.preview.savePreviewTransform(a);this.engineMediator.preview.container.setTransform(a)}getScaleWithFlip(e=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:t,flipVertically:i}=this.transformToolStore.rotateFlipState;const o=t?-1:1;const n=i?-1:1;const s=this.editor.scale.calculateScale(e);return{x:s*o,y:s*n}}saveTransforms(){const e=JSON.stringify(this.engineMediator.preview.container.getTransform());const t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}}saveTransformsBasedOnFlip(){const e=this.engineMediator.preview.container.getTransform();const{scale:t}=e;const{flipVertically:i,flipHorizontally:o}=this.editor.outputContainer.getData();const n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify({...e,scale:{x:o?-t.x:t.x,y:i?-t.y:t.y}}),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}});var QM;var Fpe=p(()=>{W();QM=class{constructor(e){this.store=e;this.initialState={};this.state={};this.dispose=()=>{this.initialState=null;this.state=null}}init(){this.initialState=this.store.serializableState;this.state={...this.initialState}}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,gr.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}}});var Ppe,cp,le;var e5=p(()=>{ze();B();W();JM();Ii();Ys();Rpe();Ape();Fpe();Ppe="identity";cp=class{constructor(e){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=ae.box(false);this.minCropSize=0;this.transformHistory=new QM(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=e=>{if(!e.trim())return false;let t=this.editor.configStore.config.assetBaseUrl;const{length:i}=t;if(t[i-1]!=="/"){t+="/"}if(`${t}transform`===e){return false}const o=new Image;try{o.src=e;return true}catch(n){return false}};this.reset=()=>{this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.resetCrop();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);const e=this.editor.outputContainer.getRotation();if(e!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();this.editor.render();this.trackChanges()};this.changeLocalOutputSize=e=>{this.localOutputSize.height=Math.round(e.height);this.localOutputSize.width=Math.round(e.width);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(e.width),height:Math.round(e.height)})};this.changeDefaultScale=e=>{this.defaults.scale=e};this.changeLocalOutputHeight=e=>{this.localOutputSize.height=Math.round(e)};this.changeLocalOutputWidth=e=>{this.localOutputSize.width=Math.round(e)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution();this.trackChanges()};this.rotateClockwise=()=>{const e=this.editor.outputContainer.getRotation();const t=this.isFlippedVertical?pR:mR;this.rotateOutputContainer(t(e))};this.rotateAntiClockwise=()=>{const e=this.editor.outputContainer.getRotation();const t=this.isFlippedVertical?mR:pR;this.rotateOutputContainer(t(e))};this.flipHorizontally=(e=true)=>{this.transformStore.flipHorizontally();this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal);this.transformRender(e);if(e){this.trackChanges()}};this.flipVertically=(e=true)=>{this.transformStore.flipVertically();this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical);this.transformRender(e);if(e){this.trackChanges()}};this.applyDefaultCrop=(e=false)=>{if(this.identifier==="identity"){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,e)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,true)};this.onLeftTop=({x:e,y:t})=>{const i=this.getRatio();const o=this.rightBottom;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.min(Math.max(0,e),o.x-n.width);const l=Math.min(Math.max(0,t),o.y-n.height);const u=o.x-a;const c=o.y-l;const d={width:Math.max(this.minCropSize,Math.min(u,s.width-a)),height:Math.max(this.minCropSize,Math.min(c,s.height-l))};if(i==="*"){if(this.changePosition({x:a,y:l})){this.changeCropAndOutputSize(d)}}else{const m=this.proportionalSize(i,d);const h=new F(o).subtract({x:m.width,y:m.height});if(this.changePosition(h)){this.changeCropAndOutputSize(m,i)}}};this.onLeftBottom=({x:e,y:t})=>{const i=this.getRatio();const o=this.rightTop;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.min(Math.max(0,e),o.x-n.width);const l=Math.max(0,t,o.y+n.height);const u=o.x-a;const c=l-o.y;const d={width:Math.max(1,Math.min(u,s.width-a)),height:Math.max(1,Math.min(c,s.height-o.y))};if(i==="*"){if(this.changePositionX(a)){this.changeCropAndOutputSize(d)}}else{const m=this.proportionalSize(i,d);if(this.changePositionX(o.x-m.width)){this.changeCropAndOutputSize(m,i)}}};this.onRightTop=({x:e,y:t})=>{const i=this.getRatio();const o=this.leftBottom;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.max(0,e,o.x+n.width);const l=Math.min(Math.max(0,t),o.y-n.height);const u=a-o.x;const c=o.y-l;const d={width:Math.max(1,Math.min(u,s.width-o.x)),height:Math.max(1,Math.min(c,s.height-l))};if(i==="*"){if(this.changePositionY(l)){this.changeCropAndOutputSize(d)}}else{const m=this.proportionalSize(i,d);if(this.changePositionY(o.y-m.height)){this.changeCropAndOutputSize(m,i)}}};this.onRightBottom=({x:e,y:t})=>{const i=this.getRatio();const o=this.leftTop;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.max(0,e,o.x+n.width);const l=Math.max(0,t,o.y+n.height);const u=a-o.x;const c=l-o.y;const d={width:Math.max(1,Math.min(u,s.width-o.x)),height:Math.max(1,Math.min(c,s.height-o.y))};if(i==="*"){this.changeCropAndOutputSize(d)}else{const m=this.proportionalSize(i,d);this.changeCropAndOutputSize(m,i)}};this.onPixelWidth=e=>{const t=JSON.stringify(ve(this.localOutputSize));const i=this.entityManager.items.find(n=>n.identifier===this.identifier);const o=this.defaults.imageSize;if(i&&i.ratio){let n=e;let s=this.localOutputSize.height;let{ratio:a}=i;if(a==="*"&&this.lockResolution){a=this.localOutputSize.width/this.localOutputSize.height}if(a==="*"&&!this.lockResolution){n=Math.max(Math.min(e,o.width),this.minCropSize);this.changeLocalOutputWidth(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(s)})}else{const l=cp.placeCropMask(a,o);n=Math.max(Math.min(n,l.width),this.minCropSize);s=n/a;this.changeLocalOutputSize({height:s,width:n})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(t));return Math.round(n)}return e};this.onPixelHeight=e=>{const t=JSON.stringify(ve(this.localOutputSize));const i=this.entityManager.items.find(n=>n.identifier===this.identifier);const o=this.defaults.imageSize;if(i&&i.ratio){let n=e;let s=this.localOutputSize.width;let{ratio:a}=i;if(a==="*"&&this.lockResolution){a=this.localOutputSize.width/this.localOutputSize.height}if(a==="*"&&!this.lockResolution){n=Math.max(Math.min(e,o.height),this.minCropSize);this.changeLocalOutputHeight(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(s),height:Math.round(n)})}else{const l=cp.placeCropMask(a,o);n=Math.max(Math.min(n,l.height),this.minCropSize);s=n*a;this.changeLocalOutputSize({height:n,width:s})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(t));return Math.round(n)}return e};this.dispose=()=>{if(this.transformStore){this.transformStore.dispose();this.transformStore=null}if(this.transformHistory){this.transformHistory.dispose();this.transformHistory=null}this.editor=null;this.dragMode=null;this.selectedCategory=null;this.defaults=null;this.localOutputSize=null;this.rect=null;this.transformations=null;this.entityManager=null};this.setFrameOpacity=e=>{this.transformations.setFrameOpacity(e)};this.setOverlayOpacity=e=>{this.transformations.setOverlayOpacity(e)};this.closestRatioReducer=e=>(t,i)=>{if(i===null)return-1;return Math.abs(e-t.ratio)<Math.abs(e-i.ratio)?-1:1};this.closestDimensionsReducer=e=>(t,i)=>{if(i===null)return-1;const o=Math.abs(t.dimensions.x/t.dimensions.y);const n=Math.abs(i.dimensions.x/i.dimensions.y);if(o===n){return t.dimensions.x*t.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1}return Math.abs(e-o)<Math.abs(e-n)?-1:1};this.getMatchingItem=()=>{const e=this.entityManager.items.findIndex(l=>l.identifier==="imgly_transform_common_custom");if(e!==-1)return this.entityManager.items[e];const t=this.entityManager.items.findIndex(l=>l.ratio==="*");if(t!==-1)return this.entityManager.items[t];const i=ve(this.editor.outputContainer.getResolution());const o=Math.abs(i.width/i.height);const[n]=this.entityManager.items.filter(l=>l.ratio&&typeof l.ratio==="number").sort(this.closestRatioReducer(o));const[s]=this.entityManager.items.filter(l=>l.dimensions&&!l.ratio).sort(this.closestDimensionsReducer(o));if(!n||!s||!n.ratio&&!s.dimensions){return this.entityManager.items[0]}if(!s||!s.dimensions)return n;if(!n||!n.ratio)return s;const a=Math.abs(s.dimensions.x/s.dimensions.y);if(a===n.ratio)return n;return Math.abs(o-n.ratio)<Math.abs(o-a)?n:s};this.getTransform=e=>{let t=this.entityManager.items.find(i=>i.identifier===e);if(!t){t=this.getMatchingItem()}return t};this.editor=e;this.selectedCategory=Ppe;this.transformStore=new He(e,this.defaults);this.transformations=new ZM(e);const{enableRotation:t,enableFlip:i,...o}=this.config;const n=this.editor.assetProvider.getAssets("transform");this.entityManager=new or(n,{...o,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("transform")});this.rect=new rr(this.editor,this.transformStore,"topLeft",false,false);this.rectForUi=new rr(this.editor,this.transformStore,"topLeft",false,true);this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(e){return e*Math.PI/180}static placeCropMask(e,t){if(t.height*e>t.width){const o=t.width/e;return{height:o,width:t.width,yChanged:true}}const i=t.height*e;return{height:t.height,width:i,yChanged:false}}changeIdentifier(e,t=false){this.transformStore.changeIdentifier(e);const i=this.getCropMask(e,this.defaults.imageSize);if(i){this.transformStore.changeRatio(i.ratio);this.changeLocalOutputSize(i);this.updatePreviewSizeWRTImageSize();if(i.yChanged!==void 0){this.updateInitialCropMaskPosition(i.yChanged)}if(i.dimensions){this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y})}if(t){this.trackChanges()}}}setDragMode(e){this.dragMode.set(e)}getCropMask(e,t){const i=this.getTransform(e);if(i){const{ratio:o,forceDimensions:n,lockDimensions:s,dimensions:a=null}=i;if(n){this.transformStore.changeForceDimensions(n)}if(s){this.transformStore.changeLockResolution(s)}if(o){switch(o){case"*":this.changePosition({x:0,y:0});return{...t,yChanged:void 0,ratio:"*",dimensions:a};default:return{...cp.placeCropMask(i.ratio,t),ratio:i.ratio,dimensions:a}}}else{const{x:l,y:u}=i.dimensions;return{...cp.placeCropMask(l/u,t),ratio:null,dimensions:a}}}return null}setCropDefaults(e=false){const t=this.editor.outputContainer.getResolution();this.setDefaultImageSize(t);const i=this.editor.getPreviewSize();const{position:o}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i);this.setDefaultCropPosition({x:o.x-i.width/2,y:o.y-i.height/2});this.changeDefaultScale(this.editor.scale.defaultScale);if(!e){this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition;this.unRotatedDefaults.scale=this.defaultScale}}setDefaultImageSize(e){this.defaults.imageSize={...ve(e)};if(!this.lockResolution){this.localOutputSize={...ve(e)}}}setMaxCropSize(e){this.defaults.maxCropMaskSize.height=e.height;this.defaults.maxCropMaskSize.width=e.width}setDefaultCropPosition(e){this.defaults.cropMaskPosition.x=e.x;this.defaults.cropMaskPosition.y=e.y}resetCrop(){this.transformStore.clearState();this.transformStore.changeIdentifier("identity")}toggleCategorySelection(e){this.selectedCategory=this.selectedCategory===e?Ppe:e}pureReset(){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);this.engineMediator.output.applyNewImageTransform();this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const e=JSON.stringify(this.engineMediator.preview.container.getTransform());const t=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:e,output:t})}changePosition(e){return this.transformStore.changePosition(e,this.defaults.maxCropMaskSize)}changePositionX(e){return this.transformStore.changePositionX(e,this.defaults.maxCropMaskSize.width)}changePositionY(e){return this.transformStore.changePositionY(e,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:e,height:t},i,o=true){this.transformStore.changeWidth(e);this.transformStore.changeHeight(t);if(!this.lockResolution){const{height:n,width:s}=this.defaults.maxCropMaskSize;const{height:a,width:l}=this.defaults.imageSize;let u=a/n*t;const c=l/s*e;if(i){u=c/i}if(o){this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(c),height:Math.round(u)})}if(t>=this.minCropSize){this.changeLocalOutputHeight(u)}if(e>=this.minCropSize){this.changeLocalOutputWidth(c)}}}transformRender(e=true){this.transformations.applyPreviewTransform();if(e){this.editor.render()}}addSnapshot(){if(this.transformHistory.isEqual())return;this.editor.addSnapshot({["transform"]:this.serializableState},"edit","Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:e,flipVertically:t}=this.rotateFlipState;const{identifier:i,rotationInDegrees:o}=this;const n=qc(o);const s=dR(j0(this.editor.engineMediator.output.container.getRotation())+o);const{start:a,end:l}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:e,flipVertically:t,rotation:n,start:a,end:l,identifier:i,outputRotation:s}}getStartEndForOperation(e){const{leftTop:t,rightBottom:i,maxCropMaskSize:o}=this;const n=t.y;const s=t.x;const a=i.x;const l=i.y;switch(e){case 270:return{leftTop:{x:o.height-l,y:s},rightBottom:{x:o.height-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 90:return{leftTop:{x:n,y:o.width-a},rightBottom:{x:l,y:o.width-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}getStartEndForUI(e,t,i){const{maxCropMaskSize:o}=this;const n=t.y;const s=t.x;const a=i.x;const l=i.y;switch(e){case 90:return{leftTop:{x:o.width-l,y:s},rightBottom:{x:o.width-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 270:return{leftTop:{x:n,y:o.height-a},rightBottom:{x:l,y:o.height-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}convertOperationOptionsToUI({start:e,end:t,rotation:i,outputRotation:o}){const n=o===90||o===270;const s=n?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const a=Math.cos(i);const l=Math.sin(i);const u=this.calculateScale(i);const c=new F(Math.min(e.x,t.x),Math.min(e.y,t.y));const d=new F(Math.max(e.x,t.x),Math.max(e.y,t.y));const m=d.subtract(c).divide(2);const h=c.add(m).multiply(s);const f=h.subtract(s.multiply(.5));const b=new F(f.x*a-f.y*l,f.x*l+f.y*a).multiply(u);const _=s.multiply(.5).add(b);const y=_.divide(s);const I=y.subtract(m.multiply(u));const T=y.add(m.multiply(u));const D=n?F.fromSize(this.maxCropMaskSize).swapped:F.fromSize(this.maxCropMaskSize);const P=I.multiply(D);const k=T.multiply(D);const{leftTop:A,rightBottom:Q}=this.getStartEndForUI(o,P,k);return{start:new F(A),end:new F(Q)}}convertUIToOperationOptions(e,t){const i=t===90||t===270;const o=i?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const n=i?F.fromSize(this.maxCropMaskSize).swapped:F.fromSize(this.maxCropMaskSize);const s=Math.cos(-e);const a=Math.sin(-e);const l=this.calculateScale(e,i);const{leftTop:u,rightBottom:c}=this.getStartEndForOperation(t);const d=new F(u).divide(n);const m=new F(c).divide(n);const h=m.subtract(d).divide(2);const f=d.add(h).multiply(o);const b=f.subtract(o.multiply(.5));const _=new F(b.x*s-b.y*a,b.x*a+b.y*s).divide(l);const y=o.multiply(.5).add(_);const I=y.divide(o);const T=I.subtract(h.divide(l));const D=I.add(h.divide(l));return{start:T,end:D}}calculateScale(e,t=false){const i=t?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const o=new F(Math.abs(i.x*Math.cos(e))+Math.abs(i.y*Math.sin(e)),Math.abs(i.x*Math.sin(e))+Math.abs(i.y*Math.cos(e)));const n=i.subtract(o.clone()).divide(2).abs;return n.y>n.x?n.y*2/i.y+1:n.x*2/i.x+1}updateStateFromSerialization(e){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.setDefaultAngle(0);if(this.editor.outputContainer.getRotation()!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const t=Math.round(j0(e.rotation));this.transformStore.setRotation(t>180?t-360:t);this.transformations.rotateOutputContainer(qc(dR(e.outputRotation||0)));if(e.identifier){this.transformStore.changeIdentifier(e.identifier)}if(e.start&&e.end){if(e.end.x===0||e.end.y===0){e.end.x=1;e.end.y=1}const{start:i,end:o}=this.convertOperationOptionsToUI({start:new F(e.start),end:new F(e.end),rotation:e.rotation,outputRotation:e.outputRotation});this.changePositionX(i.x);this.changePositionY(i.y);const n=o.x-i.x;const s=o.y-i.y;this.transformStore.changeSize({width:n,height:s});const{maxCropMaskSize:a,imageSize:l}=this.defaults;const u={height:s*l.height/a.height,width:n*l.width/a.width};this.changeLocalOutputSize(u)}if(e.flipHorizontally){this.flipHorizontally(false)}if(e.flipVertically){this.flipVertically(false)}this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(e){this.defaultAngle=e}updateCanvasControls(e){const t=ve(this.cropMaskPosition);const i=ve(this.cropMaskSize);const o=ve(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:o.height*i.height/e.height,width:o.width*i.width/e.width},void 0,false);this.changePosition({y:o.height*t.y/e.height,x:o.width*t.x/e.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter();this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(e){this.transformStore.setRotation(e);this.transformRender()}async rotateOutputContainer(e,t=true){this.setDragMode(true);this.transformations.rotateOutputContainer(e,t);await this.editor.wait();this.setDragMode(false)}applyInitialCrop(){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,false)}clickableCanvas(e){this.editor.clickableCanvas(e)}proportionalSize(e,t,i=this.defaults.maxCropMaskSize,o=this.minCropSize){let n=t.height*e;let{height:s}=t;if(n>i.width||n<o||s<o){n=t.width;s=t.width/e}return{width:Math.round(n),height:Math.round(s)}}checkAndAddSnapshot(e){const t=ve(this.localOutputSize);if(e.width!==t.width||e.height!==t.height){this.trackChanges()}}updateInitialCropMaskPosition(e){const{cropMaskSize:t}=this;const i=this.defaults.maxCropMaskSize;if(e){this.changePosition({x:0,y:Math.abs(i.height-t.height)/2})}else{this.changePosition({x:Math.abs(i.width-t.width)/2,y:0})}}updatePreviewSizeWRTImageSize(){const e=ve(this.localOutputSize);const t=ve(this.defaults.imageSize);const i=ve(this.defaults.maxCropMaskSize);const o={height:i.height*e.height/t.height,width:i.width*e.width/t.width};this.transformStore.changeSize(o)}getScaleWithFlip(e=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(e)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:e,flipVertically:t,rotationInDegrees:i,outputRotation:o}=this.transformStore.state;return{flipHorizontally:e,flipVertically:t,rotation:cp.inRadians(i),outputRotation:o}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["transform"]}get locale(){return this.editor.configStore.locale["transform"]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const e=this.getRatio();if(e==="*"||e===1){return{width:this.minCropSize,height:this.minCropSize}}if(e>1){return{width:this.minCropSize*e,height:this.minCropSize}}return{width:this.minCropSize,height:this.minCropSize*e}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const e=this.getTransform(this.identifier);if(e){if(Object.prototype.hasOwnProperty.call(e,"ratio")){if(this.lockResolution){return this.localOutputWidth/this.localOutputHeight}return e.ratio}const{x:t,y:i}=e.dimensions;return t/i}return"*"}};le=cp;g([ae],le.prototype,"selectedCategory",2);g([ae],le.prototype,"defaults",2);g([ae],le.prototype,"localOutputSize",2);g([S],le.prototype,"changeIdentifier",1);g([S],le.prototype,"setDragMode",1);g([S],le.prototype,"setCropDefaults",1);g([S],le.prototype,"setDefaultImageSize",1);g([S],le.prototype,"setMaxCropSize",1);g([S],le.prototype,"setDefaultCropPosition",1);g([S],le.prototype,"resetCrop",1);g([S],le.prototype,"toggleCategorySelection",1);g([S],le.prototype,"pureReset",1);g([S],le.prototype,"reset",2);g([S],le.prototype,"changePosition",1);g([S],le.prototype,"changePositionX",1);g([S],le.prototype,"changePositionY",1);g([S],le.prototype,"changeCropAndOutputSize",1);g([S],le.prototype,"onLeave",1);g([S],le.prototype,"onEnter",1);g([S],le.prototype,"changeLocalOutputSize",2);g([S],le.prototype,"changeDefaultScale",2);g([S],le.prototype,"changeLocalOutputHeight",2);g([S],le.prototype,"changeLocalOutputWidth",2);g([S],le.prototype,"changeLockResolution",2);g([S],le.prototype,"setRotation",1);g([S],le.prototype,"rotateClockwise",2);g([S],le.prototype,"rotateAntiClockwise",2);g([S],le.prototype,"rotateOutputContainer",1);g([S],le.prototype,"flipHorizontally",2);g([S],le.prototype,"flipVertically",2);g([S],le.prototype,"applyDefaultCrop",2);g([S],le.prototype,"applyInitialCrop",1);g([S],le.prototype,"updateCropMask",2);g([S],le.prototype,"clickableCanvas",1);g([S],le.prototype,"onLeftTop",2);g([S],le.prototype,"onLeftBottom",2);g([S],le.prototype,"onRightTop",2);g([S],le.prototype,"onRightBottom",2);g([S],le.prototype,"proportionalSize",1);g([S],le.prototype,"onPixelWidth",2);g([S],le.prototype,"onPixelHeight",2);g([S],le.prototype,"updateInitialCropMaskPosition",1);g([S],le.prototype,"updatePreviewSizeWRTImageSize",1);g([S],le.prototype,"dispose",2);g([w],le.prototype,"cropState",1);g([w],le.prototype,"identifier",1);g([w],le.prototype,"ratio",1);g([w],le.prototype,"height",1);g([w],le.prototype,"width",1);g([w],le.prototype,"localOutputImageSize",1);g([w],le.prototype,"localOutputHeight",1);g([w],le.prototype,"localOutputWidth",1);g([w],le.prototype,"lockResolution",1);g([w],le.prototype,"forceDimensions",1);g([w],le.prototype,"rotationInDegrees",1);g([w],le.prototype,"outputRotation",1);g([w],le.prototype,"isDragMode",1);g([w],le.prototype,"rotateFlipState",1);g([w],le.prototype,"selectedCategoryIdentifier",1);g([w],le.prototype,"categories",1);g([w],le.prototype,"items",1);g([w],le.prototype,"config",1);g([w],le.prototype,"locale",1);g([w],le.prototype,"isOptionSelected",1);g([w],le.prototype,"leftTop",1);g([w],le.prototype,"leftBottom",1);g([w],le.prototype,"rightTop",1);g([w],le.prototype,"rightBottom",1);g([w],le.prototype,"isFlippedHorizontal",1);g([w],le.prototype,"isFlippedVertical",1);g([w],le.prototype,"leftTopRespectFlip",1);g([w],le.prototype,"leftBottomRespectFlip",1);g([w],le.prototype,"rightTopRespectFlip",1);g([w],le.prototype,"rightBottomRespectFlip",1);g([w],le.prototype,"cropMaskPosition",1);g([w],le.prototype,"cropMaskSize",1);g([w],le.prototype,"state",1);g([w],le.prototype,"defaultImageSize",1);g([w],le.prototype,"maxCropMaskSize",1);g([w],le.prototype,"minCropMaskSize",1);g([w],le.prototype,"defaultCropMaskPosition",1);g([w],le.prototype,"defaultScale",1)});var Bpe=p(()=>{DM();e5()});var Mpe,EKe,t5,kKe,qb,fe;var r5=p(()=>{ze();Mpe=v(Pm());B();W();Ii();YM();Jh();gM();bM();xM();TM();EKe={};t5="none";kKe={position:{x:0,y:0},rotation:0};qb=class{constructor(e){this.state=ae.map(EKe);this.selectedId=ae.box(t5);this.editMode=ae.box(false);this.dragMode=ae.box(false);this.minLength=0;this.counter=0;this.addSticker=async(e,t=true)=>{await this.addStickerAsync(e,t)};this.addStickerAsync=async({spriteId:e,state:t,transform:i},o=true)=>{return new Promise((n,s)=>{i=this.getInitialTransform(i);const{identifier:a}=t;const l=this.editor.orderHelper.addSprite(a);this.editor.engine.addStickerFromAssets(a,this.editor.engineMediator.image.container,l).then(async u=>{if(e){u.setData({id:e})}const c=u.getID();this.container[c]=u;this.editor.orderHelper.renameSprite(a,c);const d=this.getSize(c);d.width*=u.getScale().x;d.height*=u.getScale().y;u.setPivot(.5,.5);let m;if(i.scale){m=i.scale}else if(i.size){m={x:i.size.width/d.width,y:i.size.height/d.height}}else{const _=this.editor.shortestOutputSide*.4;const y=qb.magnitude(_)/qb.sizeMagnitude(u.getSizeInWorldSpace());m={x:y,y}}const{flipHorizontally:h,flipVertically:f}=this.editor.outputContainer.getData();u.setFlipHorizontally(h);u.setFlipVertically(f);u.setTransform({position:i.position,scale:m,rotation:i.rotation});if(t.flipHorizontally!==void 0){u.setFlipHorizontally(t.flipHorizontally!==h)}if(t.flipVertically!==void 0){u.setFlipVertically(t.flipVertically!==f)}this.setContainerProperties(c,{...t});const b=u.getData();this.setInitialSpriteState(c,"sticker");this.stickerToolStore.setState(c,{...b,identifier:a});await this.editor.renderPromise();if(o){this.setId(c);this.addSnapshot("add",this.stickerLocale.add)}n()}).catch(u=>{console.error(u);s()})})};this.addText=async(e,t=true)=>{await this.addTextAsync(e,t)};this.addTextAsync=({spriteId:e,state:t,transform:i},o=true)=>{return new Promise((n,s)=>{i=this.getInitialTransform(i);const a=this.editor.orderHelper.addSprite(t.identifier);const l=this.editor.shortestOutputSide;const u={fontIdentifier:t.identifier,text:t.text,width:t.width||l*.6,fontSize:t.fontSize||l*.1,lineHeight:t.lineHeight,alignment:t.alignment,textColor:t.textColor,backgroundColor:t.backgroundColor};this.editor.engine.addTextWithFontLoading(u,this.editor.engineMediator.image.container,a).then(async c=>{if(e){c.setData({id:e})}const d=c.getID();this.container[d]=c;this.editor.orderHelper.renameSprite(t.identifier,d);const{flipHorizontally:m,flipVertically:h}=this.editor.outputContainer.getData();c.setFlipHorizontally(m);c.setFlipVertically(h);c.setPivot(.5,.5);c.setPosition(i.position);c.setRotation(i.rotation);this.setInitialSpriteState(d,"text");const f=c.getData();this.textToolStore.setState(d,{...f});await this.editor.renderPromise();if(o){this.setId(d);this.addSnapshot("add",this.textLocale.add)}n()}).catch(c=>{console.error(c);s()})})};this.addTextDesign=async(e,t=true,i=false)=>{try{await this.addTextDesignAsync(e,t,i)}catch(o){console.warn(o)}};this.addTextDesignAsync=({spriteId:e,state:t,transform:i},o=true,n=false)=>{return new Promise((s,a)=>{i=this.getInitialTransform(i);const l=this.editor.orderHelper.addSprite(t.identifier);const u=this.editor.shortestOutputSide;const c={width:t.width||u*.6,text:t.text,color:t.color,inverted:t.isInverted,seed:t.seed,padding:t.padding};this.editor.engine.addTextDesignAsync(t.identifier,c,this.editor.engineMediator.image.container,l).then(async d=>{if(e){if(n){this.pureRemoveSprite(e);this.textDesignToolStore.state.delete(e)}d.setData({id:e})}const m=d.getID();this.container[m]=d;this.editor.orderHelper.renameSprite(t.identifier,m);const{flipHorizontally:h,flipVertically:f}=this.editor.outputContainer.getData();d.setFlipHorizontally(h);d.setFlipVertically(f);d.setPivot(.5,.5);d.setPosition(i.position);d.setRotation(i.rotation);this.setInitialSpriteState(m,"textdesign");const b=d.getData();this.textDesignToolStore.setState(m,{...b,identifier:t.identifier});await this.editor.renderPromise();if(o){this.setId(m);this.addSnapshot("add",this.textDesignLocale.add)}s()}).catch(d=>{a(d)})})};this.spriteLocalTransform=()=>{return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}};this.clickableCanvas=e=>{this.editor.clickableCanvas(e)};this.setContainerProperties=(e,t,i=false)=>{this.container[e].setData(t);if(i){this.updatePositionAndSize()}this.editor.render()};this.setContainerPosition=(e,t)=>{this.container[e].setPosition(t)};this.pureRemoveSprite=e=>{this.editor.engine.removeContainer(this.container[e]);const t=this.container[e].getIndexInParent();if(t===-1){delete this.container[e];this.state.delete(e);this.editor.orderHelper.removeSprite(e);return true}return false};this.deleteSprite=(e=this.id)=>{const t=this.state.get(e);if(t.tool==="sticker"){this.stickerToolStore.delete()}else if(t.tool==="text"){this.textToolStore.delete()}else if(t.tool==="textdesign"){this.textDesignToolStore.delete()}};this.removeSprite=e=>{const t=this.pureRemoveSprite(e);if(t){this.selectLast();this.spriteSnapshot("delete");this.editor.render()}};this.addSnapshot=(e,t)=>{this.editor.addSnapshot(void 0,e,t)};this.spriteSnapshot=e=>{this.addSnapshot("edit",this.historyLocale[e])};this.addNewText=async(e,t)=>{if(this.textToolStore.doesTextAssetExist(t.identifier)){await this.addTextAsync({...e,state:t},false)}else{throw new En(t.identifier)}};this.addNewTextDesign=async(e,t)=>{if(this.textDesignToolStore.doesTextDesignAssetExist(t.identifier)){await this.addTextDesignAsync({...e,state:t},false)}else{throw new En(t.identifier)}};this.addNewSticker=async(e,t)=>{if(this.stickerToolStore.doesStickerAssetExist(t.identifier)){await this.addStickerAsync({...e,state:t},false)}else{throw new En(t.identifier)}};this.getSpriteHistoryState=()=>{const e=ve(this.textToolStore.state);const t=ve(this.textDesignToolStore.state);const i={common:ve(this.state),["sticker"]:ve(this.stickerToolStore.state),["text"]:e,["textdesign"]:t,spriteIdList:Object.keys(this.container)};Object.keys(i.common).forEach(o=>{i.common[o].size=this.container[o].getSizeInWorldSpace();i.common[o].position=this.container[o].getPosition();i.common[o].order=this.container[o].getIndexInParent()});return i};this.updateStateFromSerialization=async(e,t,i)=>{if(t&&t.length){try{const o=await Promise.all(t.map(async({svg:n,raster:s,name:a,identifier:l})=>{const u=(n==null?void 0:n.data)?"image/svg+xml":s.type;const c=`data:${u};base64,${(n==null?void 0:n.data)||s.data}`;const d=await Aw(c,150);return{stickerURI:c,thumbnailURI:d,name:a,type:u,identifier:l}}));await this.stickerToolStore.addCustomStickerAsset(o)}catch(o){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}if(e.text){await this.textToolStore.loadFonts()}if(e.textdesign){await this.textDesignToolStore.loadFonts()}await this.updateStateByHistoryState(e.spriteIdList,e,i)};this.updateStateFromHistory=async e=>{const t=Object.keys(this.container);const i=t.filter(o=>e.spriteIdList.indexOf(o)===-1);i.forEach(o=>{this.pureRemoveSprite(o)});await this.updateStateByHistoryState(e.spriteIdList,e,0)};this.serializableState=async()=>{const e=this.editor.spriteStore.getSpriteHistoryState();Object.keys(e.common).forEach(i=>{const{flipHorizontally:o,flipVertically:n}=this.editor.outputContainer.getData();const s=this.editor.outputContainer.getRotation();const a=n!==o?-e.common[i].rotation:e.common[i].rotation;e.common[i].rotation=n!==o?a+s:a-s});const t=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(async({identifier:i,type:o,stickerURI:n,name:s})=>{const a={identifier:i,name:s,raster:{data:"",type:"image/jpeg"}};if(o==="image/svg+xml"){a.svg={data:n.split(",")[1]}}if(o==="image/jpeg"||o==="image/png"||o==="image/gif"){[,a.raster.data]=n.split(",");a.raster.type=o}else{const l=await Aw(n);[,a.raster.data]=l.split(",");a.raster.type="image/png"}return a}));return{sprite:e,customStickers:t}};this.updateCanvasControls=()=>{Object.keys(this.container).forEach(e=>{this.updatePositionAndSize(e,true);const t=this.state.get(e);if(t){if(t.tool==="text"){const i=this.getContainerProperties(e);this.textToolStore.changeSize(e,i)}else if(t.tool==="textdesign"){const i=this.getContainerProperties(e);this.textToolStore.changeWidth(i.width)}}})};this.setEditMode=e=>{if(this.currentSprite){if(["text","textdesign"].indexOf(this.tool)!==-1){if(e){this.editor.modalStore.showTextEditModal()}else{this.editor.modalStore.hideModal()}this.editMode.set(e)}}};this.setDragMode=e=>{this.dragMode.set(e)};this.setPosition=e=>{const t=this.currentSprite;const i=this.container[this.id];if(t&&i){i.setPosition(this.editor.previewToWorld(e));const{position:o}=this.getSizePositionFromContainer();t.position.x=o.x;t.position.y=o.y;this.state.set(this.id,t);this.editor.render()}};this.setSize=e=>{const t=this.currentSprite;if(t){t.size.width=e.width;t.size.height=e.height;this.state.set(this.id,t)}};this.setRotation=e=>{const t=this.currentSprite;if(t){const{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData();const n=this.editor.outputContainer.getRotation();const s=Ab({rotation:e,outputRotation:n,flipHorizontally:i,flipVertically:o});this.container[this.id].setRotation(s);t.rotation=this.container[this.id].getRotation();this.state.set(this.id,t);this.editor.render()}};this.onCanvasClick=e=>{if(!this.isEditMode){this.selectHighestOrderSprite(e)}};this.select=e=>{const t=this.state.get(e);if(t){const i=this.editor.activeStore.tool;if(i!==t.tool){this.editor.activeStore.selectTool(t.tool)}this.setId(e)}};this.selectLast=()=>{const e=this.editor.orderHelper.getLastSpriteId();if(e){this.select(e)}};this.selectNext=()=>{if(this.currentSprite){const e=this.container[this.id];const t=e.getIndexInParent();if(t){const i=Object.keys(this.container).find(o=>this.container[o].getIndexInParent()===t-1);if(i){this.select(i)}}}};this.deselect=()=>{this.setId(t5)};this.bringToFront=async e=>{const t=this.editor.orderHelper.bringToFront(e);this.container[e].setIndexInParent(t);this.spriteSnapshot("order");await this.editor.render();this.counter+=1};this.flipHorizontally=e=>{const t=this.state.get(e);const i=this.container[e];i.setFlipHorizontally(!i.getFlipHorizontally());t.flipHorizontally=i.getFlipHorizontally();this.spriteSnapshot("flip");this.state.set(e,t);this.editor.render()};this.pureReset=()=>{this.deselect();Array.from(this.state.keys()).forEach(e=>{this.pureRemoveSprite(e)});this.stickerToolStore.pureReset();this.textToolStore.pureReset();this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=e=>{const t=this.editor.brushToolStore.containerId();e=e.filter(n=>n!==t);if(e.length<1){this.deselect();return}let i="";let o=0;e.forEach(n=>{const s=this.container[n];const a=s&&s.getIndexInParent()||0;if(a>=o){o=a;i=n}});this.select(i)};this.onCornerDrag=({x:e,y:t})=>{if(this.currentSprite){const i=new F(this.currentSprite.position);const o=new F(e,t);const n=o.subtract(i).magnitude;const s=this.getSize();const a=n*2/qb.sizeMagnitude(s);if(n>this.minLength){if(this.isSpriteSticker){if(this.stickerToolStore.resizeMode!=="unrestricted"){this.setStickerSize({width:s.width*a,height:s.height*a})}else{const l=this.rotationWRTOutputRotation;const u=o.subtract(i);const c=Math.cos(l);const d=Math.sin(l);const m=Math.max(Math.abs(u.x*c*2+u.y*d*2),this.minLength);const h=Math.max(Math.abs(u.x*-d*2+u.y*c*2),this.minLength);this.setStickerSize({width:m,height:h})}}else if(this.isSpriteText){this.setTextSize(s.width*a)}else if(this.isSpriteTextDesign){this.setTextDesignScale(a)}}this.editor.render()}};this.onWidthDrag=({x:e,y:t})=>{const i=new F(this.currentSprite.position);const o=new F(e,t);const n=o.subtract(i).magnitude;const s=this.editor.previewToWorld(2*n);if(s>this.minLength){this.setContainerProperties(this.id,{width:s},true);if(this.isSpriteText){const a=this.getContainerProperties(this.id);this.textToolStore.changeWidth(a.width)}}};this.onPaddingDrag=({x:e,y:t})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id);const o=new F(this.currentSprite.position);const n=new F(e,t);const s=n.subtract(o).magnitude;const a=Math.max(this.editor.previewToWorld(s)-i.width/2,0);this.setContainerProperties(this.id,{padding:a},true);if(this.isSpriteTextDesign){i=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(i.padding)}}};this.correctTextFlip=()=>{const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();Object.values(this.container).forEach(i=>{if(i.type==="text"||i.type==="text-design"){i.setFlipHorizontally(e);i.setFlipVertically(t)}})};this.reverseTextHorizontally=e=>{Object.values(this.container).forEach(t=>{if(t.type==="text"||t.type==="text-design"){t.setFlipHorizontally(e)}})};this.reverseTextVertically=e=>{Object.values(this.container).forEach(t=>{if(t.type==="text"||t.type==="text-design"){t.setFlipVertically(e)}})};this.dispose=()=>{this.state=null;if(this.stickerToolStore){this.stickerToolStore.dispose();this.stickerToolStore=null}if(this.textToolStore){this.textToolStore.dispose();this.textToolStore=null}if(this.textDesignToolStore){this.textDesignToolStore.dispose();this.textDesignToolStore=null}this.selectedId=null;this.editMode=null;this.dragMode=null;this.editor=null;this.rect=null};this.getOutputProperties=()=>{return this.editor.outputContainer.getData()};this.getContainerProperties=e=>{return this.container[e].getData()};this.getContainerTransform=e=>{return this.container[e].getTransform()};this.getDuplicateContainerTransform=e=>{const t=this.container[e].getTransform();const i=this.editor.shortestOutputSide*.1;const o=new F(t.position).add(new F(i,i));return{...t,position:o}};this.getDuplicateContainerFlip=e=>{const t=this.container[e].getFlipHorizontally();const i=this.container[e].getFlipVertically();return{flipHorizontally:t,flipVertically:i}};this.updatePositionAndSize=(e=this.id,t=false)=>{const{position:i,size:o}=this.getSizePositionFromContainer(e);const n=this.state.get(e);if(n){n.position.x=i.x;n.position.y=i.y;n.size.width=o.width;n.size.height=o.height;if(t){const s=this.container[e].getRotation();this.container[e].setRotation(s);n.rotation=this.container[e].getRotation()}this.state.set(e,n)}};this.getInitialTransform=e=>{const t=this.editor.outputToWorld(kKe.position);if(!e){const i=this.editor.outputContainer.getRotation();return{rotation:i,position:t}}return{position:t,...e}};this.setInitialSpriteState=(e,t)=>{const i=this.container[e];const{position:o,size:n}=this.getSizePositionFromContainer(e);const s=i.getRotation();const a=t!=="sticker"?false:i.getFlipHorizontally();const l=t!=="sticker"?false:i.getFlipVertically();this.state.set(e,{tool:t,position:o,rotation:s,size:n,flipHorizontally:a,flipVertically:l})};this.setStickerSize=e=>{const t=this.container[this.id];t.setSizeInWorldSpace(this.editor.previewSizeToWorld(e));const i=this.currentSprite;if(i){i.size=this.editor.worldSizeToPreview(t.getSizeInWorldSpace());this.state.set(this.id,i)}};this.setTextSize=e=>{let t=this.getContainerProperties(this.id);const i={width:this.editor.previewToWorld(e)};const o=i.width/t.width;const n={fontSize:Math.round(t.fontSize*o)};const s=this.isSpriteText?{...i,...n}:i;if(i.width>this.minLength&&n.fontSize){this.setContainerProperties(this.id,s,true);t=this.getContainerProperties(this.id);this.textToolStore.changeFontSize(t.fontSize,true);this.textToolStore.changeWidth(t.width)}};this.setTextDesignScale=e=>{let t=this.getContainerProperties(this.id);const i=t.width*e;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},true);const{width:o}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(o);t=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(t.padding)}};this.getSizePositionFromContainer=(e=this.id)=>{const t=this.container[e];if(t){const i=this.editor.worldToPreview(t.getPosition());const o=this.editor.worldSizeToPreview(t.getSizeInWorldSpace());return{position:i,size:o}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(e=this.id)=>{const t=this.container[e];if(t){return this.editor.worldSizeToPreview(t.getSizeInWorldSpace())}return{width:0,height:0}};this.editor=e;this.container={};this.stickerToolStore=new je(e);this.textToolStore=new Ee(e);this.textDesignToolStore=new $e(e);this.rect=new rr(this.editor,this);this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(e,t){return new F(e,t||e).magnitude}static sizeMagnitude(e){return Math.sqrt(e.width*e.width+e.height*e.height)}async updateStateByHistoryState(e,t,i){await(0,Mpe.default)(e,async o=>{const n=t.common[o];if(!n)return;if(this.state.get(o)){this.updateExistingItem(o,t)}else{await this.addNewItem(o,t)}});e.forEach(o=>{const n=t.common[o];const s=this.container[o];if(!n||!s)return;s.setIndexInParent(n.order+i)});this.counter+=1}async addNewItem(e,t){const i=t.common[e];const o=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0;const{flipHorizontally:n,flipVertically:s}=this.editor.outputContainer.getData();const a=this.editor.outputContainer.getRotation();const l=s!==n?i.rotation-a:i.rotation+a;const u=s!==n?-l:l;const c={spriteId:e,transform:{size:o,position:new F(i.position),rotation:u}};if(t.text[e]){const d=t.text[e];const m=this.textToolStore.validFontWithConfig(d.identifier);d.identifier=m==null?void 0:m.identifier;await this.addNewText(c,d);return}if(t.textdesign[e]){await this.addNewTextDesign(c,t.textdesign[e]);return}if(t.sticker[e]){const d=this.stickerToolStore.items.find(m=>m.identifier===t.sticker[e].identifier);await this.addNewSticker(c,{...t.sticker[e],flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically,resizeMode:t.sticker[e].resizeMode||(d==null?void 0:d.resizeMode)||"keepAspect"})}}updateExistingItem(e,t){const i=t.common[e];const o=this.state.get(e);this.state.set(e,o);const n=this.container[e];n.setPosition(new F(i.position));n.setRotation(i.rotation);o.rotation=n.getRotation();if(i.flipHorizontally!==void 0){n.setFlipHorizontally(i.flipHorizontally)}if(i.flipVertically!==void 0){n.setFlipVertically(i.flipVertically)}if(t.text[e]){const s=t.text[e];this.textToolStore.updateStateFromHistory(e,{...s,fontIdentifier:s.identifier})}if(t.textdesign[e]){const s=t.textdesign[e];this.textDesignToolStore.updateStateFromHistory(e,{...s,inverted:s.isInverted})}if(t.sticker[e]){n.setSizeInWorldSpace(i.size);this.stickerToolStore.updateStateFromHistory(e,t.sticker[e])}this.updatePositionAndSize(e)}get currentSprite(){if(this.isSpriteSelected){return this.state.get(this.id)}return void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==t5}get position(){if(this.currentSprite){return this.currentSprite.position}return void 0}get tool(){if(this.currentSprite){return this.currentSprite.tool}return void 0}get size(){if(this.currentSprite){return this.currentSprite.size}return void 0}get rotation(){if(this.currentSprite){return this.currentSprite.rotation}return void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:e,flipVertically:t}=this.editor.outputContainer.getData();const i=this.editor.outputContainer.getRotation();return Ab({rotation:this.currentSprite.rotation-i,flipHorizontally:e,flipVertically:t})}return void 0}get flipHorizontal(){if(this.currentSprite){return this.currentSprite.flipHorizontally}return void 0}get isSpriteSticker(){return this.tool==="sticker"}get isSpriteText(){return this.tool==="text"}get isSpriteTextDesign(){return this.tool==="textdesign"}get isOnTop(){const e=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:e,y:t}=this.currentSprite.position;const{height:i,width:o}=this.currentSprite.size;return{x:Math.round(e-o/2),y:Math.round(t-i/2)}}return void 0}get currentRect(){if(this.currentSprite){return this.rect}return void 0}get leftTopPosition(){if(this.currentSprite){return this.rect.leftTop}return void 0}get leftBottomPosition(){if(this.currentSprite){return this.rect.leftBottom}return void 0}get leftMidPosition(){if(this.currentSprite){return this.rect.leftMid}return void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:e}=this.rect;return{x:e.x-this.editor.worldToPreview(this.padding),y:e.y}}return void 0}get rightTopPosition(){if(this.currentSprite){return this.rect.rightTop}return void 0}get rightBottomPosition(){if(this.currentSprite){return this.rect.rightBottom}return void 0}get rightMidPosition(){if(this.currentSprite){return this.rect.rightMid}return void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:e}=this.rect;return{x:e.x+this.editor.worldToPreview(this.padding),y:e.y}}return void 0}get leftBottomHandlePosition(){if(this.currentSprite){return this.rect.leftBottomHandle}return void 0}get rightBottomHandlePosition(){if(this.currentSprite){return this.rect.rightBottomHandle}return void 0}get historyLocale(){if(this.isSpriteSticker){return this.stickerLocale}if(this.isSpriteText){return this.textDesignLocale}return this.textLocale}get stickerLocale(){return this.editor.configStore.locale["sticker"].history}get textLocale(){return this.editor.configStore.locale["text"].history}get textDesignLocale(){return this.editor.configStore.locale["textdesign"].history}setId(e){this.selectedId.set(e)}};fe=qb;g([ae],fe.prototype,"counter",2);g([S],fe.prototype,"addSticker",2);g([S],fe.prototype,"addStickerAsync",2);g([S],fe.prototype,"addText",2);g([S],fe.prototype,"addTextAsync",2);g([S],fe.prototype,"addTextDesign",2);g([S],fe.prototype,"addTextDesignAsync",2);g([S],fe.prototype,"clickableCanvas",2);g([S],fe.prototype,"setContainerProperties",2);g([S],fe.prototype,"setContainerPosition",2);g([S],fe.prototype,"pureRemoveSprite",2);g([S],fe.prototype,"deleteSprite",2);g([S],fe.prototype,"removeSprite",2);g([S],fe.prototype,"addSnapshot",2);g([S],fe.prototype,"addNewText",2);g([S],fe.prototype,"addNewTextDesign",2);g([S],fe.prototype,"addNewSticker",2);g([S],fe.prototype,"updateStateFromSerialization",2);g([S],fe.prototype,"updateStateFromHistory",2);g([S],fe.prototype,"updateCanvasControls",2);g([S],fe.prototype,"setEditMode",2);g([S],fe.prototype,"setDragMode",2);g([S],fe.prototype,"setPosition",2);g([S],fe.prototype,"setSize",2);g([S],fe.prototype,"setRotation",2);g([S],fe.prototype,"onCanvasClick",2);g([S],fe.prototype,"select",2);g([S],fe.prototype,"selectLast",2);g([S],fe.prototype,"selectNext",2);g([S],fe.prototype,"deselect",2);g([S],fe.prototype,"bringToFront",2);g([S],fe.prototype,"flipHorizontally",2);g([S],fe.prototype,"pureReset",2);g([S],fe.prototype,"onCornerDrag",2);g([S],fe.prototype,"onWidthDrag",2);g([S],fe.prototype,"onPaddingDrag",2);g([S],fe.prototype,"correctTextFlip",2);g([S],fe.prototype,"reverseTextHorizontally",2);g([S],fe.prototype,"reverseTextVertically",2);g([S],fe.prototype,"dispose",2);g([w],fe.prototype,"currentSprite",1);g([w],fe.prototype,"padding",1);g([w],fe.prototype,"isEditMode",1);g([w],fe.prototype,"isDragMode",1);g([w],fe.prototype,"id",1);g([w],fe.prototype,"isSpriteSelected",1);g([w],fe.prototype,"position",1);g([w],fe.prototype,"tool",1);g([w],fe.prototype,"size",1);g([w],fe.prototype,"rotation",1);g([w],fe.prototype,"rotationWRTOutputRotation",1);g([w],fe.prototype,"flipHorizontal",1);g([w],fe.prototype,"isSpriteSticker",1);g([w],fe.prototype,"isSpriteText",1);g([w],fe.prototype,"isSpriteTextDesign",1);g([w],fe.prototype,"isOnTop",1);g([w],fe.prototype,"spritePosition",1);g([w],fe.prototype,"currentRect",1);g([w],fe.prototype,"leftTopPosition",1);g([w],fe.prototype,"leftBottomPosition",1);g([w],fe.prototype,"leftMidPosition",1);g([w],fe.prototype,"leftMidPadPosition",1);g([w],fe.prototype,"rightTopPosition",1);g([w],fe.prototype,"rightBottomPosition",1);g([w],fe.prototype,"rightMidPosition",1);g([w],fe.prototype,"rightMidPadPosition",1);g([w],fe.prototype,"leftBottomHandlePosition",1);g([w],fe.prototype,"rightBottomHandlePosition",1);g([w],fe.prototype,"historyLocale",1);g([w],fe.prototype,"stickerLocale",1);g([w],fe.prototype,"textLocale",1);g([w],fe.prototype,"textDesignLocale",1)});var Lpe=p(()=>{r5()});var DKe,Yi;var i5=p(()=>{ze();B();DKe={categories:[],query:""};Yi=class{constructor(e){this.initProvider=e=>{if(e){this.libraryProvider=new e}};this.fetchImages=async(e="")=>{if(this.libraryProvider){let t=null;try{const i=await this.libraryProvider.getCategories();const o=await this.libraryProvider.searchImages(e);t=i.map((n,s)=>{const a=o.filter(l=>l.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:a.map(l=>({name:l.title||`image${s}`,identifier:`${n.name}-${l.title}-${s}`,thumbnailURI:l.thumbUrl,rawUrl:l.rawUrl,authorName:l.authorName,authorAvatar:l.authorAvatar}))}}).filter(n=>n.items.length)}catch(i){console.log(i)}lr(()=>{this.state.query=e;this.state.categories=t})}};this.toggleCategorySelection=e=>{this.selectedCategory=this.selectedCategory!==e?e:""};this.dispose=()=>{this.state=null;this.configStore=null;this.libraryProvider=null;this.selectedCategory=null};this.getRawUrl=e=>{const t=this.items.findIndex(i=>i.identifier===e);if(t!==-1){return this.items[t].rawUrl}return e};this.configStore=e.configStore;this.state=ae(DKe);this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(e=>e.items).reduce((e,t)=>[...e,...t],[])}get query(){return this.state.query}get config(){return this.configStore.config["library"]}get locale(){return this.configStore.locale["library"]}};g([ae],Yi.prototype,"selectedCategory",2);g([S],Yi.prototype,"initProvider",2);g([S],Yi.prototype,"fetchImages",2);g([S],Yi.prototype,"toggleCategorySelection",2);g([S],Yi.prototype,"dispose",2);g([w],Yi.prototype,"selectedCategoryIdentifier",1);g([w],Yi.prototype,"categories",1);g([w],Yi.prototype,"items",1);g([w],Yi.prototype,"query",1);g([w],Yi.prototype,"config",1);g([w],Yi.prototype,"locale",1)});var zpe=p(()=>{i5()});var Upe,oi;var Npe=p(()=>{B();Ks();W();Upe=(r="image/png")=>`data:${r};base64,`;oi=class{constructor(e){this.version="3.12.0";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{const t=ye.relativeToAbsolutePoint(e,this.cropSpace,false);return ye.pointFromSpaceToSpace(t,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=e=>{return e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=e=>{return e*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return{...e}}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){if(e){if(e.rgba){return e.rgba}}return[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:oi.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!=="string"&&this.validateVersion(e.version))return true;if(typeof e==="string"){throw new Error("Invalid input of type string, please provide an object")}return false}deserializeImage(e){const t={};if(e.image){t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(Upe(),""):""};t.image.data=t.image.data?Upe()+t.image.data:""}return t}deserializeTransformation(e){const t={};const i=e.operations.find(s=>s.type==="orientation");const o=e.operations.find(s=>s.type==="transform");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;t.transform=oi.initializeEmptyTransform();if(i!=null){t.transform.outputRotation=i.options.rotation;t.transform.flipHorizontally=i.options.flipHorizontally||false;t.transform.flipVertically=i.options.flipVertically||false}if(o){t.transform.start=o.options.start;t.transform.end=o.options.end;t.transform.rotation=o.options.rotation||0;t.transform.identifier=o.options.meta?o.options.meta.identifier:""}return t}deserialize(e){var n,s;const t={};if(e.meta?!oi.checkIfPlatformHTML(e.meta.platform):false){console.warn("Read serialisation from another Platform")}const i=this.editor.engineMediator.output.container.getResolution();const{size:o}=this.editor.engineMediator.image.container.getBounds();this.outputSize=i;this.imageSize=o;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();e.operations.forEach(a=>{switch(a.type){case"filter":t.filter=oi.deserializeFilter(a.options);break;case"adjustments":t.adjustment=oi.deserializeAdjustments(a.options);break;case"focus":t.focus=this.deserializeFocus(a.options);break;case"sprite":const{sprites:l}=a.options;l.forEach(u=>{switch(u.type){case"frame":t.frame=this.deserializeFrame(u.options);break;case"overlay":t.overlay=oi.deserializeOverlay(u.options);break;case"brush":if(!t.brush){t.brush=this.deserializeBrush(u.options)}else{t.brush.strokes.push(...this.deserializeBrush(u.options).strokes)}break;case"sticker":case"text":case"textdesign":if(!t.sprite){t.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const c=Ge();t.sprite.spriteIdList.push(c);t.sprite.common[c]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(u.options.position),tool:"sticker",rotation:u.options.rotation||0,flipHorizontally:u.options.flipHorizontally,flipVertically:u.options.flipVertically};this.spriteOrder+=1;if(u.type==="sticker"){t.sprite.common[c].tool="sticker";t.sprite.common[c].size={width:this.mapRelativeCropSizeToScaledImageSize(u.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(u.options.dimensions.y)};t.sprite.sticker[c]=oi.deserializeStickers(u.options)}else if(u.type==="text"){t.sprite.common[c].tool="text";t.sprite.text[c]=this.deserializeTexts(u.options)}else if(u.type==="textdesign"){t.sprite.common[c].tool="textdesign";t.sprite.textdesign[c]=this.deserializeTextDesign(u.options)}break;default:break}});break;default:break}});if(e.assetLibrary){t.customStickers=((s=(n=e.assetLibrary)==null?void 0:n.assets)==null?void 0:s.stickers)||[]}return t}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:oi.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)};default:break}return void 0}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new F(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const t=new F(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new F(this.mapRelativeCropPointToImageSpace(e.start)).add(new F(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:ws(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:oi.deserialzeColor(e.color),backgroundColor:oi.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:oi.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>{return{path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:oi.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}})}}}});var qpe,ni;var Hpe=p(()=>{B();Ks();W();qpe=(r="image/png")=>`data:${r};base64,`;ni=class{constructor(e){this.version="3.9.0";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{const t=ye.relativeToAbsolutePoint(e,this.cropSpace,false);return ye.pointFromSpaceToSpace(t,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=e=>{return e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=e=>{return e*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return{...e}}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,t=>t.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){if(e){if(e.rgba){return e.rgba}}return[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e==="html5"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||"none",tintColor:ni.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!=="string"&&this.validateVersion(e.version))return true;if(typeof e==="string"){throw new Error("Invalid input of type string, please provide an object")}return false}deserializeImage(e){const t={};if(e.image){t.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(qpe(),""):""};t.image.data=t.image.data?qpe()+t.image.data:""}return t}deserializeTransformation(e){const t={};const i=e.operations.find(s=>s.type==="orientation");const o=e.operations.find(s=>s.type==="transform");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;t.transform=ni.initializeEmptyTransform();if(i!=null){t.transform.outputRotation=i.options.rotation;t.transform.flipHorizontally=i.options.flipHorizontally||false;t.transform.flipVertically=i.options.flipVertically||false}if(o){t.transform.start=o.options.start;t.transform.end=o.options.end;t.transform.rotation=o.options.rotation||0;t.transform.identifier=o.options.meta?o.options.meta.identifier:""}return t}deserialize(e){var n,s;const t={};if(e.meta?!ni.checkIfPlatformHTML(e.meta.platform):false){console.warn("Read serialisation from another Platform")}const i=this.editor.engineMediator.output.container.getResolution();const{size:o}=this.editor.engineMediator.image.container.getBounds();this.outputSize=i;this.imageSize=o;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();e.operations.forEach(a=>{switch(a.type){case"filter":t.filter=ni.deserializeFilter(a.options);break;case"adjustments":t.adjustment=ni.deserializeAdjustments(a.options);break;case"focus":t.focus=this.deserializeFocus(a.options);break;case"sprite":const{sprites:l}=a.options;l.forEach(u=>{switch(u.type){case"frame":t.frame=this.deserializeFrame(u.options);break;case"overlay":t.overlay=ni.deserializeOverlay(u.options);break;case"brush":if(!t.brush){t.brush=this.deserializeBrush(u.options)}else{t.brush.strokes.push(...this.deserializeBrush(u.options).strokes)}break;case"sticker":case"text":case"textdesign":if(!t.sprite){t.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const c=Ge();t.sprite.spriteIdList.push(c);t.sprite.common[c]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(u.options.position),tool:"sticker",rotation:u.options.rotation||0,flipHorizontally:u.options.flipHorizontally,flipVertically:u.options.flipVertically};this.spriteOrder+=1;if(u.type==="sticker"){t.sprite.common[c].tool="sticker";t.sprite.common[c].size={width:this.mapRelativeCropSizeToScaledImageSize(u.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(u.options.dimensions.y)};t.sprite.sticker[c]=ni.deserializeStickers(u.options)}else if(u.type==="text"){t.sprite.common[c].tool="text";t.sprite.text[c]=this.deserializeTexts(u.options)}else if(u.type==="textdesign"){t.sprite.common[c].tool="textdesign";t.sprite.textdesign[c]=this.deserializeTextDesign(u.options)}break;default:break}});break;default:break}});if(e.assetLibrary){t.customStickers=((s=(n=e.assetLibrary)==null?void 0:n.assets)==null?void 0:s.stickers)||[]}return t}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:ni.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(e.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(e.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(e.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(e.options)};default:return void 0}}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new F(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const t=new F(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new F(this.mapRelativeCropPointToImageSpace(e.start)).add(new F(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(t.y,t.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:ws(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:ni.deserialzeColor(e.color),backgroundColor:ni.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:ni.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(t=>{return{path:{controlPoints:t.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:ni.deserialzeColor(t.brush.color),size:t.brush.size,hardness:t.brush.hardness}}})}}}});var OKe,RKe,AKe,FKe,PKe,BKe,MKe,LKe,zKe,UKe,NKe,qKe,HKe,WKe,GKe,Gpe;var Wpe=p(()=>{OKe="@photoeditorsdk/root";RKe="5.19.4";AKe="The most comprehensive photo editor SDK for HTML5";FKe="http://github.com/imgly/pesdk-html5";PKe="PhotoEditorSDK (img.ly GmbH) <contact@img.ly>";BKe="SEE LICENSE IN LICENSE.md";MKe=true;LKe={};zKe={start:"yarn workspace @example/react start",build:"yarn sdk-script build","build:rollup":"yarn sdk-script build rollup","package:release":"cd dist/photoeditorsdk && npm publish","package:pre-release":"cd dist/photoeditorsdk && npm publish --tag next","lint:css":"stylelint './packages/**/*.tsx'","lint:ts":"eslint ./packages/**/*.{ts,tsx}","lint:ts-engine":"eslint ./engine/**/*.ts","lint:types":"tsc --noEmit -p tsconfig.json --skipLibCheck","lint:types-engine":"tsc --noEmit -p engine/tsconfig.json --skipLibCheck",lint:"run-p lint:*",test:"$(npm bin)/jest",e2e:"cypress open","e2e:server":"sdk-script ui -P 3000 -D build","e2e:ci":"CYPRESS_RETRIES=2 cypress run --browser chrome --headed",deploy:"yarn workspace examp run deploy:pages",docs:"rm -rf ./docs && typedoc",postinstall:"yarn sdk-script server:build"};UKe={"@elv1n/cypress-plugin-snapshots":"1.4.4","@types/jest":"^24.0.11","@types/pixelmatch":"^5.2.2","@types/pngjs":"^3.4.2","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"4.4.0","@typescript-eslint/eslint-plugin":"4.6.0","@typescript-eslint/parser":"4.6.0",autoprefixer:"^9.7.4","cross-env":"^7.0.2",cypress:"6.6.0",eslint:"7.10.0","eslint-config-airbnb":"18.2.0","eslint-config-prettier":"6.12.0","eslint-import-resolver-typescript":"^2.3.0","eslint-plugin-cypress":"^2.11.2","eslint-plugin-import":"2.22.1","eslint-plugin-jsx-a11y":"6.3.1","eslint-plugin-no-only-tests":"^2.4.0","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.21.3",husky:"4.3.0",jest:"24.9.0",jsdoc:"^3.6.3","lint-staged":"10.4.0","lodash.defaults":"^4.2.0","mobx-react-devtools":"^6.1.1","native-url":"0.3.4","npm-run-all":"^4.1.5",prettier:"^2.0.5",react:"16.8.6","react-dom":"16.8.6","start-server-and-test":"1.11.5","styled-components":"4.4.1",stylelint:"^13.7.2","stylelint-config-recommended":"^3.0.0","stylelint-config-standard":"^20.0.0","stylelint-config-styled-components":"^0.1.1","stylelint-processor-styled-components":"^1.10.0","ts-jest":"24.3.0",typedoc:"^0.17.8",typescript:"3.8.3","utility-types":"^3.10.0"};NKe={"@juggle/resize-observer":"3.2.0","@reach/portal":"^0.13.0","can-use-dom":"0.1.0","lodash.debounce":"4.0.8","lodash.memoize":"4.1.2","lodash.throttle":"4.1.1",mobx:"4.15.7","mobx-react":"6.3.1",photoeditorsdk:"1.0.0","react-app-polyfill":"1.0.6","react-transition-group":"^4.4.1"};qKe={node:"10.x || 11.x || 12.x || 13.x || 14.x || 15.x"};HKe={eslint:"7.10.0"};WKe=["examples/server","examples/material-ui","examples/ssr","examples/react","packages/*","!packages/ui","packages/ui/*","!packages/ui/components","packages/ui/components/*","engine/*","test/*","scripts"];GKe={hooks:{"pre-commit":"lint-staged","pre-push":"true"}};Gpe={name:OKe,version:RKe,description:AKe,repository:FKe,author:PKe,license:BKe,private:MKe,bin:LKe,scripts:zKe,devDependencies:UKe,dependencies:NKe,devEngines:qKe,resolutions:HKe,workspaces:WKe,husky:GKe}});var dp;var Vpe=p(()=>{B();Ks();Wpe();dp=class{constructor(e,t,i,o,n,s){this.version="3.12.0";this.mapImagePointToRelativeCropPoint=e=>{const t=ye.pointFromSpaceToSpace(e,this.imageSpace,this.cropSpace,false);return ye.absoluteToRelativePoint(t,this.cropSpace,false)};this.mapSizeToRelativeUnscaledCropSize=e=>{return e/Math.min(this.outputSize.height,this.outputSize.width)};this.mapSizeToRelativeScaledCropSize=e=>{return e/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.getPointInDirection=(e,t=0,i=3)=>{const o=Math.tan(t);const n=Math.sqrt(o**2+1);return{x:e.x+i/n,y:e.y+i*o/n}};this.previewPosition=e;this.previewSize=t;this.outputSize=i;this.imageSize=o;this.imageSpace=n;this.cropSpace=s;this.outputScale=s.getScale()}static serializeFilters(e){return{type:"filter",options:{intensity:e.intensity,identifier:e.identifier}}}static serializeAdjustments(e){return{type:"adjustments",options:e}}static serializeOverlay(e){return{type:"overlay",options:{identifier:e.identifier,intensity:e.opacity,blendMode:e.blendMode.replace(/[A-Z]/g,t=>` ${t.toLowerCase()}`)}}}static serializeMetaData(){return{platform:"html5",version:Gpe.version,createdAt:new Date().toISOString()}}serialise(e,t,i){const o=dp.serializeMetaData();const n={width:this.imageSize.width,height:this.imageSize.height};if(t){n.type=i;n.data=t}const s=[];const a=[];const{adjustment:l}=e;if(Object.keys(l).map(b=>l[b]).filter(Boolean).length){s.push(dp.serializeAdjustments(l))}const{filter:u}=e;if(u.identifier!=="identity"){s.push(dp.serializeFilters(u))}const{overlay:c}=e;if(c.identifier!=="identity"){a.push(dp.serializeOverlay(c))}if(e.transform){const{transform:b,orientation:_}=this.serializeTransform(e.transform);const y=[b.options.start.x!==0,b.options.start.y!==0,b.options.end.x!==1,b.options.end.y!==1,b.options.rotation!==0];const I=[_.options.rotation!==0,_.options.flipVertically!==false,_.options.flipHorizontally!==false];if(y.some(T=>T)){s.push(b)}if(I.some(T=>T)){s.push(_)}}const{frame:d}=e;if(d.identifier!=="identity"){a.push(this.serialzeFrame(d))}const{focus:m}=e;if(m.identifier!=="identity"){s.push(this.serializeFocus(m))}if(e.sprite){e.sprite.spriteIdList.forEach(b=>{const _=e.sprite.common[b];switch(_.tool){case"sticker":const y=e.sprite.sticker[b];a.push(this.serializeSticker(y,_,e.transform));break;case"text":const I=e.sprite.text[b];a.push(this.serializeText(I,_));break;case"textdesign":const T=e.sprite.textdesign[b];a.push(this.serializeTextDesign(T,_));break;default:break}})}if(e.brush.strokes.length){a.push({type:"brush",options:{paths:e.brush.strokes.map(b=>{return{points:b.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:b.brush.color},size:b.brush.size,hardness:b.brush.hardness}}})}})}if(a.length){const b={type:"sprite",options:{sprites:a}};s.push(b)}const h=e.customStickers;const f={assets:{stickers:h}};return{version:this.version,meta:o,image:n,operations:s,assetLibrary:f}}serialzeFrame(e){return{type:"frame",options:{identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.color},size:this.mapSizeToRelativeUnscaledCropSize(e.width)}}}serializeFocus(e){const t=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(e.identifier){case"linear":return{type:"focus",options:{type:"linear",options:{start:this.mapImagePointToRelativeCropPoint(e.linear.start),end:this.mapImagePointToRelativeCropPoint(e.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(e.linear.blurRadius)}}};case"radial":return{type:"focus",options:{type:"radial",options:{start:this.mapImagePointToRelativeCropPoint(e.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(e.radial.center,0,e.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(e.radial.blurRadius),gradientRadius:.1}}};case"mirrored":const{mirrored:i}=e;return{type:"focus",options:{type:"mirrored",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(i.origin,i.rotation,t/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(i.origin,i.rotation,-t/2)),size:this.mapSizeToRelativeScaledCropSize(e.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(e.mirrored.blurRadius),gradientSize:.1}}};default:return{type:"focus",options:{type:"gaussian",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(e.gaussian.blurRadius)}}}}}serializeSticker(e,t,i){return{type:"sticker",options:{position:this.mapImagePointToRelativeCropPoint(t.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(t.size.width),y:this.mapSizeToRelativeScaledCropSize(t.size.height)},rotation:t.rotation,flipVertically:(t.flipVertically||false)!==(i.flipVertically||false),flipHorizontally:(t.flipHorizontally||false)!==(i.flipHorizontally||false),identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.tintColor},tintMode:e.tintMode}}}serializeText(e,t){return{type:"text",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:false,flipHorizontally:false,fontIdentifier:e.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(e.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(e.width),text:e.text,lineHeight:e.lineHeight,color:{rgba:e.textColor},backgroundColor:{rgba:e.backgroundColor},alignment:e.alignment}}}serializeTextDesign(e,t){return{type:"textdesign",options:{position:this.mapImagePointToRelativeCropPoint(t.position),rotation:t.rotation,flipVertically:false,flipHorizontally:false,identifier:e.identifier,inverted:e.isInverted,text:e.text,seed:e.seed,width:this.mapSizeToRelativeScaledCropSize(e.width),padding:this.mapSizeToRelativeScaledCropSize(e.padding),color:{rgba:e.color}}}}serializeTransform(e){const{start:t,end:i}=e;const o={type:"transform",options:{start:t,end:i,rotation:e.rotation,meta:{identifier:e.identifier}}};const n={type:"orientation",options:{rotation:e.outputRotation,flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}};return{transform:o,orientation:n}}}});var o5={};wt(o5,{Deserializers:()=>VKe,Serializer:()=>dp});var VKe;var n5=p(()=>{Npe();Hpe();Vpe();VKe={"3.9.0":ni,"3.12.0":oi}});var jpe,jKe,$Ke,KKe,Hb;var $pe=p(()=>{ze();B();W();jpe=/^data:image\/(.+?);base64,/;jKe=r=>jpe.test(r);$Ke=r=>r.match(/^data:([^;]+)/)[1];KKe=r=>r.replace(jpe,"");Hb=class{constructor(e){this.applySerialization=async(e,t,i,o)=>{this.editor.resetToolStates();const n=this.editor.activeStore.tool==="transform";if(!n){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.reset();if(!n){this.editor.transformToolStore.onLeave()}const s="Unexpected error occured";const a=t.deserializeImage(e);if(a.image&&a.image.data){const c=a.image.data;await this.editor.setImage(c);this.editor.scale.defaultScale=1;this.editor.scale.resetOffset();this.editor.transformToolStore.reset();this.editor.activeStore.setImage(c);await this.editor.engineMediator.image.addImageToContainer();this.editor.engineMediator.output.applyNewImageTransform();this.editor.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.editor.transformToolStore.setCropDefaults();this.editor.historyStore.addInitialSnapshot();this.editor.transformToolStore.saveTransforms()}const l=t.deserializeTransformation(e);if(!l){o(s);return}await this.applyStateOnUI(l);const u=t.deserialize(e);if(!u){o(s);return}await this.applyStateOnUI(u);this.editor.historyStore.addInitialSnapshot();if(n){this.editor.transformToolStore.onEnter()}await this.editor.render();if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}i()};this.editor=e}serialize({image:e}={image:false}){const t=this.editor.activeStore.tool==="transform";const{displaySerializationModal:i}=this.editor.configStore.config;if(i){this.editor.modalStore.showInfoModal("saving")}return new Promise((o,n)=>{Promise.resolve().then(()=>(n5(),o5)).then(async({Serializer:s})=>{try{if(t){this.editor.transformToolStore.onLeave()}await this.editor.wait();this.editor.transformToolStore.applyDefaultCrop(false);const{originalImage:a}=this.editor.imageContainer.getData();const l=this.editor.engineMediator.output.container.getResolution();const u={width:a.width,height:a.height};const c=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,l,u,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer());const d={["adjustment"]:ve(this.editor.adjustmentsToolStore.state),["filter"]:ve(this.editor.filterToolStore.state),["focus"]:ve(this.editor.focusToolStore.serializableState),["overlay"]:ve(this.editor.overlayToolStore.state),["frame"]:ve(this.editor.frameToolStore.state),["brush"]:this.editor.brushToolStore.strokes||{strokes:[]}};const{sprite:m,customStickers:h}=await this.editor.spriteStore.serializableState();m.spriteIdList=m.spriteIdList.sort((_,y)=>{const I=m.common[_].order;const T=m.common[y].order;return I-T});d.sprite=m;d.customStickers=h;d.transform=this.editor.transformToolStore.serializableState;let f;let b;if(e){const _=Hb.getDataURL(a);b=$Ke(_);f=KKe(_)}if(i){this.editor.modalStore.hideModal()}o(c.serialise(d,f,b));if(t){this.editor.transformToolStore.onEnter()}}catch(a){if(i){this.editor.modalStore.hideModal()}n(a)}})})}deserialize(e){this.editor.modalStore.showInfoModal("loading");return new Promise((t,i)=>{try{Promise.resolve().then(()=>(n5(),o5)).then(({Deserializers:o})=>{const n=e.version.match(/[0-3].[0-8].[0-9]/i);let s=null;if(n&&o["3.9.0"]){s=new o["3.9.0"](this.editor)}else if(o[e.version]){s=new o[e.version](this.editor)}else{s=new o["3.12.0"](this.editor)}if(n){this.editor.modalStore.hideModal();this.editor.modalStore.showActionModal({type:"warning",identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(e,s,t,i)})}else{this.applySerialization(e,s,t,i)}})}catch(o){if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}i(o)}})}static getDataURL(e){if(e instanceof HTMLImageElement){const{src:n}=e;if(jKe(n)){return n}}if(e instanceof HTMLCanvasElement){return e.toDataURL("image/png")}const t=document.createElement("canvas");t.width=e.width;t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0);const o=t.toDataURL("image/png");st(t);return o}async applyStateOnUI(e){const t=this.editor.activeStore.tool==="transform";try{if(e.transform){if(!t){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.updateStateFromSerialization(e.transform);await this.editor.wait();this.editor.transformToolStore.onLeave();if(!t){this.editor.transformToolStore.onEnter();await this.editor.wait();this.editor.transformToolStore.onLeave()}}if(e.filter){await this.editor.filterToolStore.updateStateFromSerialization(e.filter)}if(e.adjustment){this.editor.adjustmentsToolStore.updateStateFromSerialization(e.adjustment)}if(e.focus){await this.editor.focusToolStore.updateStateFromSerialization(e.focus)}if(e.overlay){await this.editor.overlayToolStore.updateStateFromSerialization(e.overlay)}if(e.sprite){let i=Object.keys(e).length-1;if(e.customStickers){i-=1}e.sprite.spriteIdList=e.sprite.spriteIdList.sort((o,n)=>{const s=e.sprite.common[o].order;const a=e.sprite.common[n].order;return s-a});await this.editor.spriteStore.updateStateFromSerialization(e.sprite,e.customStickers,Math.max(0,i))}if(e.brush){this.editor.brushToolStore.updateStateFromHistory(e.brush)}if(e.frame){await this.editor.frameToolStore.updateStateFromSerialization(e.frame)}this.editor.outputContainer.updateChildrenContainers()}catch(i){if(i.name==="AssetNotFoundError"){console.error(i)}else{console.error(i);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:i.message,handleConfirm:()=>{this.applyStateOnUI(e)}})}}}}});var XKe,s5;var Kpe=p(()=>{XKe=r=>{const e=atob(r.split(",")[1]);const t=r.split(",")[0].split(":")[1].split(";")[0];const i=new ArrayBuffer(e.length);const o=new Uint8Array(i);for(let n=0;n<e.length;n+=1){o[n]=e.charCodeAt(n)}return new Blob([i],{type:t})};s5=XKe});var Xpe,Ype;var Jpe=p(()=>{B();Xpe=r=>r.split(",")[0].split(":")[1].split(";")[0];Ype=r=>{if(typeof r==="string"){return Xpe(r)}if(r.src.includes(".svg")){return"image/svg+xml"}if(r.src){return Xpe(r.src)}return"image/jpeg"}});var Gw,Wb;var Zpe=p(()=>{Ob();Gw=v(Pm());B();Ks();Wb=class{static isImageElement(e){return e instanceof HTMLImageElement}constructor({license:e,assetProvider:t,crossOrigin:i,backgroundColor:o}){this.crossOrigin=i;this.engine=new Zh({license:e,crossOrigin:i,assetProvider:t,downscaleOptions:{maxDimensions:{width:174,height:174}},backgroundColor:o})}getAllFilterPreviewThumbnails(e){return new Promise((t,i)=>{const o=[];const n=[];e.forEach(s=>{if(s.isDuotone)o.push(s.identifier);else n.push(s.identifier)});this.getAllDuotonePreview(o).then(s=>{this.getAllLutPreview(n).then(a=>{t(Object.assign(s,a))}).catch(a=>{i(a)})}).catch(s=>{i(s)})})}async getAllDuotonePreview(e){const t={};if(!e.length)return t;const i=await this.engine.addDuoToneFilterFromAssets(e[0],this.container);await(0,Gw.default)(e,async o=>{const n=this.engine.assetProvider.getDuotoneFilterAsset(o);const s=i.filterOperation.getFilter();s.set({intensity:.5,lightColor:ge.Color.fromHex(n.lightColor),darkColor:ge.Color.fromHex(n.darkColor)});const a=await this.engine.export("data-url","image/jpeg",.8,false,true);t[o]=a},{concurrency:1});this.engine.removeEffect(i);return t}async loadLutAssets(e){const t={};await(0,Gw.default)(e,async i=>{t[i]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",i))});return t}async getAllLutPreview(e){const t={};if(!e.length)return t;const i=await this.loadLutAssets(e);const o=await this.engine.addLUTFilterFromAssets(e[0],this.container);await(0,Gw.default)(e,async n=>{const s=this.engine.assetProvider.getLUTFilterAsset(n);const a=o.filterOperation.getFilter();const l={horizontalTileCount:s.horizontalTileCount||5,verticalTileCount:s.verticalTileCount||5,image:i[n]};a.set({...l,intensity:s.defaultIntensity||1});o.setProperties({intensity:1});a._lutPrimitive.set(l);const u=await this.engine.export("data-url","image/jpeg",.8,false,true);t[n]=u},{concurrency:1});this.engine.removeEffect(o);return t}addImageToContainer(e){return new Promise((t,i)=>{let o;if(Wb.isImageElement(e)){o=e;this.setBackgroundImage(o);t()}else{this.getImageElement(e).then(n=>{o=n;this.setBackgroundImage(o);t()}).catch(n=>{i({identifier:"imageLoading",message:n.message})})}})}getImageElement(e){return new Promise((t,i)=>{const o=new Image;o.addEventListener("load",()=>{t(o)});o.addEventListener("error",n=>{i(n)});o.crossOrigin=this.crossOrigin;o.src=e})}setBackgroundImage(e){if(!this.container){this.container=this.engine.addImage({image:e,blendMode:"normal",opacity:1})}else{this.container.setData({image:e})}const{size:t}=this.container.getBounds();const i=this.engine.getOutputContainer();i.setResolution(t)}}});var YKe,Vn;var a5=p(()=>{ze();W();YKe={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};Vn=class{constructor(e){this.previewTopLeftPosition={x:0,y:0};this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig();this.state.rotationGuides=this.getRotationGuidesFromConfig()};this.getGuideValue=(e,t)=>{const{height:i,width:o}=this.editor.getPreviewSize();const{snapToLeft:n,snapToRight:s,snapToTop:a,snapToBottom:l}=this.configStore.config.snapping.position;const u=Math.min(i,o);let c=0;if(t==="bottom"){c=Math.round(i-u*l)}else if(t==="top"){c=Math.round(u*a)}else if(t==="right"){c=Math.round(o-u*s)}else if(t==="left"){c=Math.round(u*n)}else if(e==="vertical"&&t==="center"){c=Math.round(o/2)}else if(e==="horizontal"&&t==="center"){c=Math.round(i/2)}return c};this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:e,snapToLeft:t,snapToRight:i}=this.configStore.config.snapping.position;const o=[];if(e){o.push({value:this.getGuideValue("vertical","center"),edge:"center",isVisible:false,direction:"vertical"})}if(t){o.push({value:this.getGuideValue("vertical","left"),edge:"leading",isVisible:false,direction:"vertical"})}if(i){o.push({value:this.getGuideValue("vertical","right"),edge:"trailing",isVisible:false,direction:"vertical"})}return o};this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:e,snapToTop:t,snapToBottom:i}=this.configStore.config.snapping.position;const o=[];if(e){o.push({value:this.getGuideValue("horizontal","center"),edge:"center",isVisible:false,direction:"horizontal"})}if(t){o.push({value:this.getGuideValue("horizontal","top"),edge:"leading",isVisible:false,direction:"horizontal"})}if(i){o.push({value:this.getGuideValue("horizontal","bottom"),edge:"trailing",isVisible:false,direction:"horizontal"})}return o};this.getRotationGuidesFromConfig=()=>{const{angles:e}=this.configStore.config.snapping.rotation;const t=[];e.forEach(o=>{t.push(o);t.push(o+360);t.push(o-360)});const i=t.filter((o,n)=>t.indexOf(o)===n);return i.map(o=>({value:o*Math.PI/180,edge:"center",isVisible:false,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:e,leftBottom:t,rightTop:i,rightBottom:o})=>{const n=Math.min(e.y,i.y,t.y,o.y);const s=Math.max(e.y,i.y,t.y,o.y);const a=Math.min(e.x,i.x,t.x,o.x);const l=Math.max(e.x,i.x,t.x,o.x);return{height:Math.round(s-n),width:Math.round(l-a)}};this.mapRange=({value:e,fromMin:t,fromLength:i,toMin:o,toLength:n})=>{return(e-t)*n/i+o};this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(e,t,i,o)=>{if(t.length===0){return e}if(t[0]>e){return e-i}for(let n=0;n<t.length-1;n+=1){const s=t[n];const a=t[n+1];let l=s+i;let u=a-i;let c=0;if(o){c=n*i*2;l+=c;u+=c+i*2}const d=1e-5;if(s<=e&&e<=a){if(e<=s+d){return s+c}if(e>=a-d){return a+c+(o?i*2:0)}return this.mapRange({value:e,fromMin:s,fromLength:a-s,toMin:l,toLength:u-l})}}if(o){return e+(t.length-1)*i*2+i}return e};this.mapFromSnapSystem=(e,t,i,o)=>{if(t.length===0){return e}if(t[0]>e){if(e>=t[0]-i){return t[0]}return e+i}let n=e;for(let a=0;a<t.length-1;a+=1){const l=t[a];const u=t[a+1];const c=l+i;let d=u-i;let m=u;if(o){d+=i*2;m+=i*2;n=e-a*i*2}if(l<=n&&n<=m){if(c<=n&&n<=d){return this.mapRange({value:n,fromMin:c,fromLength:d-c,toMin:l,toLength:u-l})}if(n<c){return l}return u}}n-=i*3;const s=t[t.length-1];if(n<=s){return s}return n};this.centerSnapValue=(e,t)=>{const i=t*.5;const{value:o,edge:n}=e;let s=o;if(n==="leading"){s+=i}else if(n==="trailing"){s-=i}return s};this.mapSnappingGuidesToCenter=(e,t)=>{const i=[];e.forEach(o=>{i.push(this.centerSnapValue(o,t))});return i};this.calcSnapThresholdInRadians=(e,t)=>{if(e===0){return 0}return t/e};this.calculatePreviewTopLeftPosition=()=>{const e=this.editor.engineMediator.preview.container.getPosition();const t=this.editor.getPreviewSize();const i=kn();this.previewTopLeftPosition={x:e.x/i-t.width/2,y:e.y/i-t.height/2}};this.snapToRotation=(e,t,i)=>{const{rotationGuides:o}=this.state;const{enabled:n,threshold:s}=this.configStore.config.snapping.rotation;const{x:a,y:l}=this.previewTopLeftPosition;const{width:u}=this.editor.getPreviewSize();let c=(e+Math.PI*2)%(Math.PI*2);if(n){const d=new F(t).magnitude;const m=o.map(b=>b.value).sort((b,_)=>b-_);const h=this.calcSnapThresholdInRadians(d,s);if(!this.rotationOffset){const b=this.mapToSnapSystem(e,m,h,false);this.rotationOffset=b-c}c=this.mapFromSnapSystem(c+this.rotationOffset,m,h,false);const f={x:i.position.x-a-u,y:i.position.y-l};o.forEach(b=>{b.isVisible=b.value===c;b.position=f});return c}return e};this.snapToPosition=(e,t)=>{const{horizontalGuides:i,verticalGuides:o}=this.state;const{enabled:n,threshold:s}=this.configStore.config.snapping.position;const a=new F(this.previewTopLeftPosition);const{height:l,width:u}=this.getSpriteDimensions(t);const{x:c,y:d}=new F(e).subtract(a);if(n){const m=this.mapSnappingGuidesToCenter(i,l).sort((_,y)=>_-y);const h=this.mapSnappingGuidesToCenter(o,u).sort((_,y)=>_-y);if(!this.positionOffset){const _=this.mapToSnapSystem(c,h,s,true);const y=this.mapToSnapSystem(d,m,s,true);this.positionOffset=new F(_,y).subtract(new F(c,d))}let f=this.mapFromSnapSystem(c+this.positionOffset.x,h,s,true);let b=this.mapFromSnapSystem(d+this.positionOffset.y,m,s,true);f=Math.round(f);b=Math.round(b);i.forEach(_=>{const y=Math.round(this.centerSnapValue(_,l));_.isVisible=y===b});o.forEach(_=>{const y=Math.round(this.centerSnapValue(_,u));_.isVisible=y===f});return new F(f,b).add(a)}return{x:c,y:d}};this.dispose=()=>{this.state=null;this.editor=null;this.configStore=null};this.editor=e;this.configStore=e.configStore;this.state=ae(YKe);this.rotationOffset=null;this.positionOffset=null}hidePositionGuides(){this.positionOffset=null;this.state.verticalGuides=this.state.verticalGuides.map(e=>({...e,isVisible:false}));this.state.horizontalGuides=this.state.horizontalGuides.map(e=>({...e,isVisible:false}))}hideRotationGuides(){this.rotationOffset=null;this.state.rotationGuides=this.state.rotationGuides.map(e=>({...e,isVisible:false}))}get positionGuides(){const{verticalGuides:e,horizontalGuides:t}=this.state;return[...e,...t]}get rotationGuides(){return this.state.rotationGuides}};g([ae],Vn.prototype,"state",2);g([S],Vn.prototype,"snapToRotation",2);g([S],Vn.prototype,"snapToPosition",2);g([S],Vn.prototype,"hidePositionGuides",1);g([S],Vn.prototype,"hideRotationGuides",1);g([S],Vn.prototype,"dispose",2);g([w],Vn.prototype,"positionGuides",1);g([w],Vn.prototype,"rotationGuides",1)});var oc;var Qpe=p(()=>{ze();B();Ks();W();Nw();qw();Lw();jM();Uw();Hw();Ww();$pe();lM();cM();dM();IM();i5();mM();Kpe();Jpe();Zpe();kM();a5();r5();e5();oc=class{constructor(e,t){this.initWithImage=async e=>{try{this.modalStore.showInfoModal("loading");this.engineMediator.init();this.snappingStore.init();await this.activeStore.setImage(e);if(this.configStore.config.displayResizeWarning){this.checkImageResize()}if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const t=this.configStore.config.engine;this.previewThumbnails=new Wb({...t,license:this.configStore.config.license,assetProvider:this.configStore.assetProvider})}if(this.engine){this.engine.pesdk.on("context-lost",()=>{this.configStore.events.onErrorWebGLContextLost()})}}catch(t){this.configStore.events.onErrorImageLoading(t);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:t.identifier?t.identifier:"rendering",error:t,handleConfirm:()=>{this.initWithImage(e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.checkImageResize=()=>{this.engine.on("beganImageDownscaling",()=>{this.modalStore.showInfoModal("resizing")});this.engine.on("imageDownscaled",({width:e,height:t})=>{const{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions;const o=Zg.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal();this.modalStore.showActionModal({type:"warning",identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${o}`,width:`${e}`,height:`${t}`}})})};this.init=e=>{var o,n;if(!((o=this.activeStore)==null?void 0:o.image)){this.initWithImage(e);return}if(!this.historyStore||!((n=this.configStore)==null?void 0:n.config)){return}const t=this.historyStore.isDirty();const{displayDiscardChangesWarning:i}=this.configStore.config;if(t&&i){this.modalStore.showActionModal({type:"warning",identifier:"discardChanges",handleConfirm:()=>{this.setImage(e);this.resetToolStates()},handleDismiss:()=>{this.setImage(e,true)}});return}if(t&&!i){this.setImage(e,true);return}this.historyStore.reset();this.setImage(e,true).then(()=>{if(this.modalStore.identifier!=="imageResized"){this.modalStore.hideModal()}const{engine:s,displayCanvasRendererWarning:a}=this.configStore.config;if(s.preferredRenderer==="canvas"&&a){this.modalStore.showActionModal({type:"warning",identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}}).catch(()=>{return null})};this.setImage=async(e,t=false)=>{try{if(!this.activeStore.image){this.initWithImage(e)}else{this.activeStore.setImageLoadedToEngine(false);this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading");this.scale.defaultScale=1;this.scale.resetOffset();await this.activeStore.setImage(e);await this.engineMediator.image.addImageToContainer();this.canvasStore.resizeCanvas();this.engineMediator.output.applyNewImageTransform();this.engineMediator.preview.updateTransform();this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();const{flipHorizontally:i,flipVertically:o,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:o,flipHorizontally:i});await this.transformToolStore.rotateOutputContainer(sy(n),false);if(t){this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();this.transformToolStore.resetCrop();this.transformToolStore.applyDefaultCrop();this.transformToolStore.saveTransforms();this.transformToolStore.onEnter();this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees);this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}else{this.transformToolStore.saveTransforms()}this.snappingStore.calculatePreviewTopLeftPosition();this.historyStore.addInitialSnapshot();await this.renderPromise();if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){this.filterToolStore.setImageAndGetPreviews()}const s=this.activeStore.tool;if(!s){this.onReady()}else{this.configStore.events.onImageLoaded()}if(!(this.modalStore.identifier==="imageResized")){this.modalStore.hideModal()}this.activeStore.setImageLoadedToEngine(true);this.resize()}}catch(i){this.configStore.events.onErrorImageLoading(i);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:i.identifier?i.identifier:"rendering",error:i,handleConfirm:()=>{this.setImage(e,t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}});throw new Error(i)}};this.onToolChange=(e,t=null,i=true)=>{var o,n;if(e===t){return}if((n=(o=this.engineMediator)==null?void 0:o.preview)==null?void 0:n.container){if([e,t].indexOf("transform")!==-1){if(e==="transform"){this.transformToolStore.onLeave();this.transformToolStore.addSnapshot();this.snappingStore.calculatePreviewTopLeftPosition()}else if(t==="transform"){this.transformToolStore.onEnter()}this.resize(t)}else{this.scale.resetOffset();this.scale.resetPosition();this.scale.setScaleToDefault();this.scale.scaleRender(true)}if(i){this.render()}}};this.resize=(e=null)=>{if(!this.engineMediator)return;try{const t=this.activeStore.tool;const i=e==="transform"||!e&&t==="transform";this.canvasStore.resizeCanvas(e);this.transformToolStore.applyDefaultCrop();const o=ve(this.transformToolStore.maxCropMaskSize);if(!i){this.transformToolStore.onEnter()}const n=this.engineMediator.preview.container.getRotation();const s=this.engineMediator.preview.updateTransform(n);if(s){this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();this.transformToolStore.updateCanvasControls(o);this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();const a=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(a);if(!i){this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}this.snappingStore.calculatePreviewTopLeftPosition();this.render()}}catch(t){this.configStore.events.onErrorImageLoading(t);this.modalStore.showActionModal({type:"error",identifier:"rendering",handleConfirm:()=>{this.resize(e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.export=async({preventExportEvent:e,...t}={})=>{const i=this.activeStore.tool==="transform";try{this.modalStore.showInfoModal("exporting");if(i){this.transformToolStore.onLeave()}const{config:o}=this.configStore;const n={...o.export.image,...t};const{exportType:s,format:a,quality:l,enableDownload:u,transparent:c}=n;const d=await this.engineMediator.engine.export(s,a,l,c);if(i&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}if(this.historyStore){this.historyStore.isDirtySinceSave=false}if(this.modalStore){this.modalStore.hideModal()}if(u){this.triggerFileDownload(o.export.filename,a,s,d)}if(!e){this.configStore.events.onExport(d)}return d}catch(o){if(this.modalStore){this.modalStore.hideModal()}if(i&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}throw new Error(o)}};this.serialize=({image:e}={image:true})=>{if(this.serializationMediator){return this.serializationMediator.serialize({image:e})}return Promise.resolve({})};this.deserialize=e=>{if(this.serializationMediator){return this.serializationMediator.deserialize(e)}return Promise.resolve()};this.close=()=>{var e,t,i,o,n,s;if((((e=this.historyStore)==null?void 0:e.isDirtySinceSave)||((i=(t=this.transformToolStore)==null?void 0:t.transformHistory)==null?void 0:i.hasChanges()))&&((n=(o=this.configStore)==null?void 0:o.config)==null?void 0:n.displayCloseWarning)&&this.modalStore){this.modalStore.showActionModal({type:"warning",identifier:"unsavedChanges",handleConfirm:()=>{var a;if((a=this.configStore)==null?void 0:a.events){this.configStore.events.onClose()}}})}else if((s=this.configStore)==null?void 0:s.events){this.configStore.events.onClose()}};this.hasChanges=()=>{if(this.historyStore){return this.historyStore.isDirtySinceSave}return false};this.getImageDimensions=()=>{if(this.engine){const{width:e,height:t}=this.engine.getOutputDimensions();return{width:e,height:t}}return{width:0,height:0}};this.wait=(e=0)=>new Promise(t=>setTimeout(t,e));this.clickableCanvas=async e=>{if(e){await new Promise(t=>setTimeout(t,0));this.canvasStore.enableCanvasClick()}else{this.canvasStore.disableCanvasClick()}};this.onReady=async()=>{const{forceCrop:e}=this.configStore.config;this.activeStore.selectTool(this.configStore.defaultTool);if(e){const t=this.transformToolStore.localOutputImageSize;const i=t.width/t.height;const o=this.transformToolStore.entityManager.items.map(n=>{if(n.ratio){return n.ratio}return n.dimensions.x/n.dimensions.y});if(o.indexOf("*")!==-1){console.error('ForceCrop will not work if "*" is one of the ratios')}else if(o.indexOf(parseFloat(i.toFixed(2)))===-1){this.activeStore.selectTool("transform")}}this.configStore.events.onEditorReady()};this.addSnapshot=(e,t,i)=>{this.historyStore.addSnapshot(e,t,i)};this.resetToolStates=()=>{this.transformToolStore.pureReset();this.filterToolStore.pureReset();this.focusToolStore.pureReset();this.adjustmentsToolStore.pureReset();this.overlayToolStore.pureReset();this.frameToolStore.pureReset();this.brushToolStore.pureReset();this.spriteStore.pureReset();this.historyStore.reset();this.render()};this.getAssetPath=e=>this.assetProvider.getPathForCategory(e);this.render=async()=>{await this.renderPromise()};this.applyFlipToPreview=e=>{if(!this.engineMediator)return{x:0,y:0};return this.engineMediator.previewSpaceToFlippedPreviewSpace(e)};this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:e,height:t}=this.engine.getOutputDimensions();if(e&&t){return{width:Math.round(this.worldToPreview(this.outputToWorld(e))),height:Math.round(this.worldToPreview(this.outputToWorld(t)))}}return{height:t,width:e}};this.getImageMimeType=()=>{return Ype(this.activeStore.image)};this.cleanUpCanvasMemory=()=>{var e,t,i;(i=(t=(e=this.engineMediator)==null?void 0:e.image)==null?void 0:t.container)==null?void 0:i.dispose()};this.dispose=()=>{if(this.engineMediator){this.engineMediator.dispose();this.engineMediator=null}this.serializationMediator=null;if(this.spriteStore){this.spriteStore.dispose();this.spriteStore=null}this.scale=null;this.filterToolStore=null;this.adjustmentsToolStore=null;this.focusToolStore=null;this.overlayToolStore=null;this.frameToolStore=null;this.brushToolStore=null;if(this.transformToolStore){this.transformToolStore.dispose();this.transformToolStore=null}if(this.libraryStore){this.libraryStore.dispose();this.libraryStore=null}if(this.modalStore){this.modalStore.dispose();this.modalStore=null}if(this.snappingStore){this.snappingStore.dispose();this.snappingStore=null}if(this.activeStore){this.activeStore.dispose();this.activeStore=null}if(this.canvasStore){this.canvasStore.dispose();this.canvasStore=null}this.historyStore=null;if(this.configStore){this.configStore.dispose();this.configStore=null}};this.triggerFileDownload=(e,t,i,o)=>{const n=t==="image/jpeg"&&i!=="ms-blob"?".jpeg":".png";const s=e+n;const a=this.blobFromExportData(o);this.triggerBlobDownload(s,a)};this.triggerBlobDownload=(e,t)=>{if(navigator.msSaveBlob){navigator.msSaveBlob(t,e)}else{const i=document.createElement("a");const o=URL.createObjectURL(t);i.href=o;i.download=e;document.body.appendChild(i);i.click();document.body.removeChild(i);if(!wK()){URL.revokeObjectURL(o)}}};this.blobFromExportData=e=>{if(typeof e==="string"){return s5(e)}if(e instanceof HTMLImageElement){return s5(e.src)}return e};this.configStore=new Ei;if(t){Object.entries(t).forEach(([o,n])=>{this.configStore.events.on(o,n)})}const i=this.configStore.saveConfig(e);this.engineMediator=new VM(this);this.serializationMediator=new Hb(this);this.spriteStore=new fe(this);this.scale=new vr(this);this.filterToolStore=new nr(this);this.adjustmentsToolStore=new pt(this);this.focusToolStore=new Ve(this);this.overlayToolStore=new br(this);this.frameToolStore=new Yt(this);this.brushToolStore=new Ht(this);this.transformToolStore=new le(this);this.libraryStore=new Yi(this);this.modalStore=new Oo(this);this.snappingStore=new Vn(this);this.activeStore=new Xi(this);this.canvasStore=new ii(this);this.historyStore=new up(this);this.libraryStore.initProvider(i);this.libraryStore.fetchImages();if(this.configStore.config.image){this.initWithImage(this.configStore.config.image)}else{this.configStore.events.onEditorReady();if(this.configStore.defaultTool==="library"||this.configStore.defaultTool==="customTool"){this.activeStore.selectTool(this.configStore.defaultTool)}}}get shortestOutputSide(){const e=this.outputContainer.getBounds();return Math.min(e.width,e.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){if(!this.engineMediator)return null;return this.engineMediator.engine}get imageContainer(){if(!this.engineMediator)return null;return this.engineMediator.image.container}get orderHelper(){if(!this.engineMediator)return null;return this.engineMediator.orderHelper}renderPromise(){if(!this.engineMediator)return null;return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(e,t){if(!this.engineMediator)return{x:0,y:0};if(Wo(e)){return this.engineMediator.previewSpaceToWorldSpace(e,t)}return this.engineMediator.previewSpaceToWorldSpace(e,t)}worldToPreview(e){if(!this.engineMediator)return{x:0,y:0};if(Wo(e)){return this.engineMediator.worldSpaceToPreviewSpace(e)}return this.engineMediator.worldSpaceToPreviewSpace(e)}worldSizeToPreview(e){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.worldSpaceToPreviewSpace(e.width),height:this.engineMediator.worldSpaceToPreviewSpace(e.height)}}previewSizeToWorld(e,t){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.previewSpaceToWorldSpace(e.width,t),height:this.engineMediator.previewSpaceToWorldSpace(e.height,t)}}outputToWorld(e){if(!this.engineMediator)return{x:0,y:0};if(Wo(e)){return this.engineMediator.outputSpaceToWorldSpace(e)}return this.engineMediator.outputSpaceToWorldSpace(e)}previewToOutput(e){if(!this.engineMediator)return{x:0,y:0};if(Wo(e)){return this.engineMediator.previewSpaceToOutputSpace(e)}return this.engineMediator.previewSpaceToOutputSpace(e)}get outputContainer(){return this.engineMediator.output.container}};g([S],oc.prototype,"resize",2);g([S],oc.prototype,"export",2);g([S],oc.prototype,"clickableCanvas",2)});var lt=p(()=>{W();Ki();Iw();qde();lM();cM();dM();mM();rpe();spe();ape();IM();dpe();Bpe();Lpe();zpe();Ww();Uw();Qpe();PM();Lw();Nw();qw();Hw();a5();Mb();Ub();Lb();rc();Ys();Jh()});var Gb,Vb,eme,tme,JKe,ZKe,rme;var ime=p(()=>{Gb=v(x("react"));L();Vb=v(x("styled-components"));B();lt();W();cr();eme=we.Button.TextSecondary;tme=Vb.default.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${r=>r.theme.canvasActionBar.foreground};
  letter-spacing: ${r=>r.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`;JKe=Vb.default.div`
  display: inline-flex;
  ${r=>r.isDisabled&&Vb.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;ZKe=({isDisabled:r,scale:e,active:t})=>{const{canZoomIn:i}=e;const{canZoomOut:o}=e;const{zoomLevel:n}=e;const s=["transform","brush","focus","sticker","text","textdesign"].indexOf(t.tool)!==-1;return!s?Gb.default.createElement(JKe,{isDisabled:r},Gb.default.createElement(eme,{"data-test":G.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!o,onClick:e.out},"-"),Gb.default.createElement(tme,{"data-test":G.ZoomLevel},n," %"),Gb.default.createElement(eme,{ariaLabel:"Zoom in",isDisabled:!i,onClick:e.in},"+")):null};rme=me("scale","active")(E(ZKe));tme.defaultProps={theme:Do}});var Ro,nme,ome,nf;var sme=p(()=>{Ro=v(x("react"));L();nme=v(x("styled-components"));B();K();Ut();W();cr();ime();ome=(0,nme.default)(we.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`;nf=E(function r(){const{config:e,editor:t,history:i,custom:o,active:n}=O();const s=e.locale.mainCanvasActions;const{canUndo:a}=i;const{canRedo:l}=i;const u=e.config.mainCanvasActions;const c=()=>{t.export()};const d=()=>{if(t.activeStore.tool==="transform"){return null}const _=o.getButton("mainCanvasActionUndo");return Ro.default.createElement(_,{key:"mainCanvasActionUndo","data-test":G.MainBarButtonUndo,onClick:i.undo,isDisabled:!a||!n.image,label:s.buttonUndo,ariaLabel:s.buttonUndo,icon:Ro.default.createElement(Py.undo,null)})};const m=()=>{if(t.activeStore.tool==="transform"){return null}const _=o.getButton("mainCanvasActionRedo");return Ro.default.createElement(_,{key:"mainCanvasActionRedo","data-test":G.MainBarButtonRedo,onClick:i.redo,isDisabled:!l||!n.image,label:s.buttonRedo,ariaLabel:s.buttonRedo,icon:Ro.default.createElement(Py.redo,null)})};const h=()=>{const _=o.getButton("mainCanvasActionExport");return Ro.default.createElement(_,{key:"mainCanvasActionExport","data-test":G.MainBarButtonExport,onClick:c,isDisabled:!n.image,label:s.buttonExport,ariaLabel:s.buttonExport,icon:Ro.default.createElement(Py.export,null)})};const f=()=>{if(!e.displayCloseButton){return null}const _=o.getButton("mainCanvasActionClose");return Ro.default.createElement(_,{key:"mainCanvasActionClose","data-test":G.MainBarButtonClose,onClick:t.close,isDisabled:!n.image,label:s.buttonClose,ariaLabel:s.buttonClose,icon:Ro.default.createElement(Py.close,null)})};const b=u.map(_=>{switch(_){case"undo":return d;case"redo":return m;case"export":return h;case"close":return f;default:return null}});return Ro.default.createElement(we.Bar.Index,null,Ro.default.createElement(ome,null,b[0]&&b[0]()||null,b[1]&&b[1]()||null),e.config.enableZoom?Ro.default.createElement(rme,{isDisabled:!n.image}):null,Ro.default.createElement(ome,null,b[2]&&b[2]()||null,b[3]&&b[3]()||null))})});function QKe(r){return typeof r==="string"&&r.includes("%")}function eXe(r){return typeof r==="string"&&r.includes(".")&&parseFloat(r)===1}function Er(r,e){if(eXe(r)){r="100%"}const t=QKe(r);r=e===360?r:Math.min(e,Math.max(0,parseFloat(r)));if(t){r=parseInt(String(r*e),10)/100}if(Math.abs(r-e)<1e-6){return 1}if(e===360){r=(r<0?r%e+e:r%e)/parseFloat(String(e))}else{r=r%e/parseFloat(String(e))}return r}function Vw(r){r=parseFloat(r);if(Number.isNaN(r)||r<0||r>1){r=1}return r}function jb(r){if(r<=1){return`${Number(r)*100}%`}return r}function nc(r){return r.length===1?`0${r}`:String(r)}var jw=p(()=>{});function l5(r,e,t){return{r:Er(r,255)*255,g:Er(e,255)*255,b:Er(t,255)*255}}function u5(r,e,t){r=Er(r,255);e=Er(e,255);t=Er(t,255);const i=Math.max(r,e,t);const o=Math.min(r,e,t);let n=0;let s=0;const a=(i+o)/2;if(i===o){s=0;n=0}else{const l=i-o;s=a>.5?l/(2-i-o):l/(i+o);switch(i){case r:n=(e-t)/l+(e<t?6:0);break;case e:n=(t-r)/l+2;break;case t:n=(r-e)/l+4;break;default:break}n/=6}return{h:n,s,l:a}}function ame(r,e,t){let i;let o;let n;r=Er(r,360);e=Er(e,100);t=Er(t,100);function s(a,l,u){if(u<0){u+=1}if(u>1){u-=1}if(u<1/6){return a+(l-a)*(6*u)}if(u<1/2){return l}if(u<2/3){return a+(l-a)*(2/3-u)*6}return a}if(e===0){o=t;n=t;i=t}else{const a=t<.5?t*(1+e):t+e-t*e;const l=2*t-a;i=s(l,a,r+1/3);o=s(l,a,r);n=s(l,a,r-1/3)}return{r:i*255,g:o*255,b:n*255}}function c5(r,e,t){r=Er(r,255);e=Er(e,255);t=Er(t,255);const i=Math.max(r,e,t);const o=Math.min(r,e,t);let n=0;const s=i;const a=i-o;const l=i===0?0:a/i;if(i===o){n=0}else{switch(i){case r:n=(e-t)/a+(e<t?6:0);break;case e:n=(t-r)/a+2;break;case t:n=(r-e)/a+4;break;default:break}n/=6}return{h:n,s:l,v:s}}function lme(r,e,t){r=Er(r,360)*6;e=Er(e,100);t=Er(t,100);const i=Math.floor(r);const o=r-i;const n=t*(1-e);const s=t*(1-o*e);const a=t*(1-(1-o)*e);const l=i%6;const u=[t,s,n,n,a,t][l];const c=[a,t,t,s,n,n][l];const d=[n,n,a,t,t,s][l];return{r:u*255,g:c*255,b:d*255}}function d5(r,e,t,i){const o=[nc(Math.round(r).toString(16)),nc(Math.round(e).toString(16)),nc(Math.round(t).toString(16))];if(i&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)){return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)}return o.join("")}function tXe(r){return Math.round(parseFloat(r)*255).toString(16)}function Ji(r){return parseInt(r,16)}function p5(r){return Ji(r)/255}function ume(r,e,t,i,o){const n=[nc(Math.round(r).toString(16)),nc(Math.round(e).toString(16)),nc(Math.round(t).toString(16)),nc(tXe(i))];if(o&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0)}return n.join("")}var m5=p(()=>{jw()});var sf;var h5=p(()=>{sf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}});function nn(r){return Boolean(jn.CSS_UNIT.exec(String(r)))}function oXe(r){r=r.trim().toLowerCase();if(r.length===0){return false}let e=false;if(sf[r]){r=sf[r];e=true}else if(r==="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}let t=jn.rgb.exec(r);if(t){return{r:t[1],g:t[2],b:t[3]}}t=jn.rgba.exec(r);if(t){return{r:t[1],g:t[2],b:t[3],a:t[4]}}t=jn.hsl.exec(r);if(t){return{h:t[1],s:t[2],l:t[3]}}t=jn.hsla.exec(r);if(t){return{h:t[1],s:t[2],l:t[3],a:t[4]}}t=jn.hsv.exec(r);if(t){return{h:t[1],s:t[2],v:t[3]}}t=jn.hsva.exec(r);if(t){return{h:t[1],s:t[2],v:t[3],a:t[4]}}t=jn.hex8.exec(r);if(t){return{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),a:p5(t[4]),format:e?"name":"hex8"}}t=jn.hex6.exec(r);if(t){return{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),format:e?"name":"hex"}}t=jn.hex4.exec(r);if(t){return{r:Ji(t[1]+t[1]),g:Ji(t[2]+t[2]),b:Ji(t[3]+t[3]),a:p5(t[4]+t[4]),format:e?"name":"hex8"}}t=jn.hex3.exec(r);if(t){return{r:Ji(t[1]+t[1]),g:Ji(t[2]+t[2]),b:Ji(t[3]+t[3]),format:e?"name":"hex"}}return false}function cme(r){let e={r:0,g:0,b:0};let t=1;let i=null;let o=null;let n=null;let s=false;let a=false;if(typeof r==="string"){r=oXe(r)}if(Array.isArray(r)){const[l,u,c]=r;if(nn(l)&&nn(u)&&nn(c)){e=l5(l*255,u*255,c*255);s=true;a="rgb"}if(r.length===4){t=r[3]}}if(typeof r==="object"){if(nn(r.r)&&nn(r.g)&&nn(r.b)){e=l5(r.r,r.g,r.b);s=true;a=String(r.r).substr(-1)==="%"?"prgb":"rgb"}else if(nn(r.h)&&nn(r.s)&&nn(r.v)){i=jb(r.s);o=jb(r.v);e=lme(r.h,i,o);s=true;a="hsv"}else if(nn(r.h)&&nn(r.s)&&nn(r.l)){i=jb(r.s);n=jb(r.l);e=ame(r.h,i,n);s=true;a="hsl"}if(Object.prototype.hasOwnProperty.call(r,"a")){t=r.a}}t=Vw(t);return{ok:s,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var rXe,iXe,sc,f5,g5,jn;var dme=p(()=>{m5();h5();jw();rXe="[-\\+]?\\d+%?";iXe="[-\\+]?\\d*\\.\\d+%?";sc=`(?:${iXe})|(?:${rXe})`;f5=`[\\s|\\(]+(${sc})[,|\\s]+(${sc})[,|\\s]+(${sc})\\s*\\)?`;g5=`[\\s|\\(]+(${sc})[,|\\s]+(${sc})[,|\\s]+(${sc})[,|\\s]+(${sc})\\s*\\)?`;jn={CSS_UNIT:new RegExp(sc),rgb:new RegExp(`rgb${f5}`),rgba:new RegExp(`rgba${g5}`),hsl:new RegExp(`hsl${f5}`),hsla:new RegExp(`hsla${g5}`),hsv:new RegExp(`hsv${f5}`),hsva:new RegExp(`hsva${g5}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}});var Ao;var y5=p(()=>{m5();h5();dme();jw();Ao=class{constructor(e="",t={}){if(e instanceof Ao){return e}this.originalInput=e;const i=cme(e);this.originalInput=e;this.r=i.r;this.g=i.g;this.b=i.b;this.a=i.a;this.roundA=Math.round(100*this.a)/100;this.format=t.format||i.format;this.gradientType=t.gradientType;if(this.r<1){this.r=Math.round(this.r)}if(this.g<1){this.g=Math.round(this.g)}if(this.b<1){this.b=Math.round(this.b)}this.isValid=i.ok}getAlpha(){return this.a}setAlpha(e){this.a=Vw(e);this.roundA=Math.round(100*this.a)/100;return this}toHsv(){const e=c5(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){const e=c5(this.r,this.g,this.b);const t=Math.round(e.h*360);const i=Math.round(e.s*100);const o=Math.round(e.v*100);return this.a===1?`hsv(${t}, ${i}%, ${o}%)`:`hsva(${t}, ${i}%, ${o}%, ${this.roundA})`}toHsl(){const e=u5(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){const e=u5(this.r,this.g,this.b);const t=Math.round(e.h*360);const i=Math.round(e.s*100);const o=Math.round(e.l*100);return this.a===1?`hsl(${t}, ${i}%, ${o}%)`:`hsla(${t}, ${i}%, ${o}%, ${this.roundA})`}toHex(e=false){return d5(this.r,this.g,this.b,e)}toHexString(e=false){return`#${this.toHex(e)}`}toHex8(e=false){return ume(this.r,this.g,this.b,this.a,e)}toHex8String(e=false){return`#${this.toHex8(e)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const e=Math.round(this.r);const t=Math.round(this.g);const i=Math.round(this.b);return`rgba(${e}, ${t}, ${i}, ${this.roundA})`}toPercentageRgb(){const e=t=>`${Math.round(Er(t,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){const e=t=>Math.round(Er(t,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toName(){if(this.a===0){return"transparent"}if(this.a<1){return false}const e=`#${d5(this.r,this.g,this.b,false)}`;for(const t of Object.keys(sf)){if(sf[t]===e){return t}}return false}toString(e){const t=Boolean(e);e=e||this.format;const i=this.a<1&&this.a>=0;const o=!t&&i&&e&&(e.startsWith("hex")||e==="name");if(o){if(e==="name"&&this.a===0){return this.toName()}return this.toRgbString()}switch(e){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(true);case"hex4":return this.toHex8String(true);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Ao(this.toString())}}});var pp,nXe,pme;var mme=p(()=>{pp=v(x("styled-components"));nXe=pp.default.div`
  position: absolute;
  width: ${r=>r.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${r=>r.direction==="bottom"?pp.css`
          bottom: 100%;
        `:pp.css`
          top: 100%;
        `}
  left: ${r=>r.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${r=>r.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${r=>r.direction==="bottom"?pp.css`
            transform: translate(-50%, 50%) rotate(45deg);
          `:pp.css`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${r=>r.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`;pme=nXe});var $w,b5,sXe,aXe,lXe,Kw;var hme=p(()=>{$w=v(x("react"));b5=v(x("styled-components"));de();sXe=b5.default.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`;aXe=(0,b5.default)(z.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${r=>r.theme.colorPicker.inputBorderColor};
  }
`;lXe=({value:r,label:e,onChange:t})=>$w.default.createElement(sXe,null,$w.default.createElement(z.Input.Label,{label:e}),$w.default.createElement(aXe,{min:0,max:255,value:r,onChange:t}));Kw=lXe});var Xw,_5,uXe,cXe,dXe,fme;var gme=p(()=>{Xw=v(x("react"));_5=v(x("styled-components"));de();uXe=_5.default.div`
  text-align: left;
  width: 62px;
`;cXe=(0,_5.default)(z.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${r=>r.theme.colorPicker.inputBorderColor};
  }
`;dXe=({value:r,label:e,onChange:t})=>Xw.default.createElement(uXe,null,Xw.default.createElement(z.Input.Label,{label:e}),Xw.default.createElement(cXe,{value:r.toUpperCase(),onChange:t}));fme=dXe});var yme,mp;var Yw=p(()=>{yme=v(x("styled-components"));lt();mp=yme.default.div.attrs(r=>({style:{left:r.position[0]||`${0}px`,top:r.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${r=>r.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${r=>r.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${r=>r.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;mp.defaultProps={theme:Do}});var Fo,bme,_me,pXe,mXe,af;var Jw=p(()=>{Fo=v(x("react"));bme=v(Om());_me=v(x("styled-components"));de();K();pXe=_me.default.div`
  position: relative;
  height: 14px;
  width: 100%;
`;mXe=r=>{return e=>{r.forEach(t=>{if(typeof t==="function"){t(e)}else if(t!=null){t.current=e}})}};af=(0,Fo.forwardRef)(({surface:r,onChange:e,className:t,children:i},o)=>{const n=(0,Fo.useRef)(null);const s=(0,Fo.useRef)(null);const{config:a}=O();const[l,u]=(0,Fo.useState)(false);const c=f=>{const b=a.measurements.color.colorPicker.thumb.size/2;const _=a.measurements.color.colorPicker.thumb.size;let y=0;let I=0;y=f.clientX;I=f.clientY;const{top:T,left:D,width:P,height:k}=n.current.getBoundingClientRect();let A=y-D-b;let Q=I-T-b;A=Math.max(0,Math.min(P-_,A));Q=Math.max(0,Math.min(k-_,Q));if(e){e([A,Q])}};const d=f=>{u(true);c(f)};const m=(0,Fo.useCallback)((0,bme.default)(f=>{if(l){c(f)}},10),[l]);const h=()=>{if(l){u(false)}};return Fo.default.createElement(pXe,{ref:mXe([n,o]),className:t},Fo.default.createElement(z.DraggableCore,{nodeRef:s,onStart:d,onDrag:m,onStop:h},Fo.default.createElement("div",{ref:s},r)),i)})});var vme,hXe,hp;var Zw=p(()=>{vme=x("styled-components");hXe=vme.css`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`;hp=hXe});var ea,xme,fXe,Cme;var Sme=p(()=>{ea=v(x("react"));xme=v(x("styled-components"));K();Yw();Jw();Zw();fXe=xme.default.div`
  ${hp}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`;Cme=({hue:r,onChange:e})=>{const[t,i]=(0,ea.useState)(0);const o=(0,ea.useRef)(null);const{config:n}=O();const s=a=>{if(o.current){const[l]=a;const{offsetWidth:u}=o.current;const c=u-n.measurements.color.colorPicker.thumb.size;const d=l*u/c;const m=Math.max(0,Math.min(360,d/u*360));e(m);i(l)}};(0,ea.useEffect)(()=>{if(o.current){const{offsetWidth:a}=o.current;let l=0;const u=a-n.measurements.color.colorPicker.thumb.size;l=r*a/360;i(l*u/a)}},[r]);return ea.default.createElement(af,{surface:ea.default.createElement(fXe,null),ref:o,onChange:s},ea.default.createElement(mp,{position:[t,0]}))}});var $n,v5,gXe,yXe,wme;var Tme=p(()=>{$n=v(x("react"));v5=v(x("styled-components"));K();Yw();Jw();Zw();gXe=v5.default.div.attrs(r=>({style:{background:`linear-gradient(to left, ${r.transparentColor} 0%, ${r.opaqueColor} 100%)`}}))`
  ${hp}
  z-index: 1;
`;yXe=v5.default.div.attrs(r=>({style:{backgroundImage:`url(${r.url})`}}))`
  ${hp}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`;wme=({color:r,opaqueColor:e,transparentColor:t,onChange:i})=>{const{config:o}=O();const[n,s]=(0,$n.useState)(0);const a=(0,$n.useRef)(null);const l=o.assetProvider.getPath("controls","/tiled-background.png");const u=c=>{if(a.current){const{offsetWidth:d}=a.current;const[m]=c;const h=d-o.measurements.color.colorPicker.thumb.size;const f=m*d/h;const b=(d-f)/d;const _=Math.round((b+Number.EPSILON)*100)/100;const y=Math.min(1,Math.max(0,_));i(y);s(m)}};(0,$n.useEffect)(()=>{if(a.current){const{offsetWidth:c}=a.current;let d=0;const m=c-o.measurements.color.colorPicker.thumb.size;d=(1-r.toHsv().a)*c;s(d*m/c)}},[r.toString()]);return $n.default.createElement(af,{ref:a,surface:$n.default.createElement(gXe,{opaqueColor:e,transparentColor:t}),onChange:u},$n.default.createElement(yXe,{url:l}),$n.default.createElement(mp,{position:[n,0]}))}});var ta,x5,bXe,_Xe,Ime;var Eme=p(()=>{ta=v(x("react"));x5=v(x("styled-components"));K();Yw();Jw();Zw();bXe=x5.default.div.attrs(r=>({style:{backgroundColor:`hsl(${r.hue}, 100%, 50%)`}}))`
  ${hp}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${r=>r.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`;_Xe=(0,x5.default)(af)`
  height: ${r=>r.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`;Ime=({color:r,hue:e,onChange:t})=>{const[i,o]=(0,ta.useState)([0,0]);const n=(0,ta.useRef)(null);const{config:s}=O();(0,ta.useEffect)(()=>{const{s:l,v:u}=r.toHsv();if(n.current){const{offsetWidth:c,offsetHeight:d}=n.current;const m=c-s.measurements.color.colorPicker.thumb.size;const h=d-s.measurements.color.colorPicker.thumb.size;const f=l*c;const b=(1-u)*d;o([f*m/c,b*h/d])}},[r.toString()]);const a=l=>{if(n.current){const[u,c]=l;const{offsetHeight:d,offsetWidth:m}=n.current;const h=m-s.measurements.color.colorPicker.thumb.size;const f=d-s.measurements.color.colorPicker.thumb.size;const b=u*m/h;const _=c*d/f;const y=Math.min(1,Math.max(0,b/m));const I=Math.min(1,Math.max(0,(d-_)/d));t(y,I);o([u,c])}};return ta.default.createElement(_Xe,{ref:n,surface:ta.default.createElement(bXe,{hue:e}),onChange:a},ta.default.createElement(mp,{position:i}))}});var xr,ra,vXe,kme,xXe,CXe,SXe,wXe,$b;var Dme=p(()=>{xr=v(x("react"));ra=v(x("styled-components"));de();lt();y5();mme();hme();gme();Sme();Tme();Eme();vXe=ra.default.div`
  position: absolute;
  left: ${r=>r.leftOffset}px;
  top: ${r=>r.topOffset}px;
  z-index: ${r=>r.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${r=>r.show&&ra.css`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`;kme=ra.default.div`
  &&& {
    position: absolute;
    ${r=>r.direction==="top"&&ra.css`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${r=>r.theme.colorPicker.listShadow};
    background: ${r=>r.theme.colorPicker.listBackground};
    border-radius: ${r=>r.theme.shape.radiusMedium}px;
    width: ${r=>r.theme.measurements.color.colorPicker.width}px;
    height: ${r=>r.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`;xXe=(0,ra.default)(Cme)`
  margin-top: 8px;
`;CXe=(0,ra.default)(wme)`
  margin-top: 8px;
`;SXe=ra.default.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`;wXe=ra.default.div`
  display: flex;
`;$b=class extends xr.default.Component{constructor(e){super(e);this.node=xr.default.createRef();this.checkId=(e,t,i)=>{let o=e;let n=0;while(o.parentElement&&n<i){o=o.parentElement;n+=1;if(o.id===t){return true}}return false};this.handleOutsideClick=e=>{var s;const{onRequestClose:t,onAddSnapshot:i,show:o}=this.props;const{color:n}=this.state;if(o){if((s=this.node.current)==null?void 0:s.contains(e.target)){return}this.setState({hexInputValue:n.toHexString()});if(t){t()}if(i){i()}}};this.onChange=e=>{const{onChange:t}=this.props;t({color:e.toRgbArray(),colorString:e.toRgbString()})};this.onHexValueChange=e=>{if(e.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const t=new Ao(e);this.onChange(t);this.setState({color:t,hue:t.toHsl().h})}this.setState({hexInputValue:e})};this.onAlphaChange=e=>{const{color:t}=this.state;const i=t.setAlpha(e);this.onChange(i);this.setState({color:i,hexInputValue:i.toHexString()})};this.onHueChange=e=>{const{color:t}=this.state;const{s:i,v:o,a:n}=t.toHsv();const s=new Ao({h:e,s:i,v:o,a:n});this.onChange(s);this.setState({color:s,hexInputValue:s.toHexString(),hue:e})};this.onSaturationBrightnessChange=(e,t)=>{const{color:i,hue:o}=this.state;const{a:n}=i.toHsv();const s=new Ao({h:o,s:e,v:t,a:n});this.onChange(s);this.setState({color:s,hexInputValue:s.toHexString()})};this.onInputChange=e=>t=>{const{color:i}=this.state;if(t.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!t.trim()){const o=i.toRgb();o[e]=parseInt(t,10)||0;const n=new Ao(o);this.onChange(n);this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};const{color:t}=this.props;const i=new Ao(t);this.state={color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false);document.addEventListener("keydown",this.handleOutsideClick,false)}componentDidUpdate(e){const{color:t,show:i}=this.props;if(i&&!e.show){const o=new Ao(t);this.setState({color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false);document.removeEventListener("keydown",this.handleOutsideClick,false)}render(){const{show:e,showArrow:t,direction:i,arrowOffset:o,topOffset:n,leftOffset:s,labelHex:a,labelR:l,labelG:u,labelB:c,labelSliderHue:d,labelSliderOpacity:m}=this.props;const{color:h,hexInputValue:f,hue:b}=this.state;const{r:_,g:y,b:I}=h.toRgb();const T=h.clone().setAlpha(1).toRgbString();const D=h.clone().setAlpha(0).toRgbString();return xr.default.createElement("div",{ref:this.node},xr.default.createElement(vXe,{show:e,direction:i,leftOffset:s,topOffset:n},xr.default.createElement(kme,{direction:i},t&&xr.default.createElement(pme,{direction:i,arrowOffset:o}),xr.default.createElement(Ime,{color:h,hue:b,onChange:this.onSaturationBrightnessChange}),xr.default.createElement(z.Spacer,{count:2}),xr.default.createElement(z.Input.Label,{label:d}),xr.default.createElement(xXe,{hue:b,onChange:this.onHueChange}),xr.default.createElement(z.Spacer,{count:2}),xr.default.createElement(z.Input.Label,{label:m}),xr.default.createElement(CXe,{color:h,opaqueColor:T,transparentColor:D,onChange:this.onAlphaChange}),xr.default.createElement(SXe,null,xr.default.createElement(fme,{value:f,label:a,onChange:this.onHexValueChange}),xr.default.createElement(wXe,null,xr.default.createElement(Kw,{value:_,label:l,onChange:this.onInputChange("r")}),xr.default.createElement(Kw,{value:y,label:u,onChange:this.onInputChange("g")}),xr.default.createElement(Kw,{value:I,label:c,onChange:this.onInputChange("b")}))))))}};$b.defaultProps={direction:"bottom",showArrow:true};kme.defaultProps={theme:Do}});var Ome=p(()=>{y5();Dme()});var lf,Rme,TXe,C5,Ame;var Fme=p(()=>{lf=v(x("react"));ze();L();Rme=v(x("styled-components"));Ome();lt();W();TXe=Rme.default.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`;C5=class extends lf.default.Component{constructor(e){super(e);this.containerRef=null;this.onClick=e=>t=>{const{onAddSnapshot:i,config:o,onChange:n,colorPickerDirection:s,rect:a}=this.props;const{activeIdentifier:l,showColorPicker:u,colorList:c}=this.state;const d=c.find(m=>m.identifier===e);if(l===d.identifier&&!u){const{left:m,width:h,top:f,height:b}=t.currentTarget.getBoundingClientRect();const{left:_,top:y}=this.containerRef.current.getBoundingClientRect();const{colorPicker:I}=o.measurements.color;const T=I.arrow.width/2;let D=m-_+h/2-2;let P=s==="bottom"?f-y+b+T:f-y-T;let k=-24;const A=I.width-I.arrow.width-12;if(D>A){k+=D-A;D-=k}let Q=true;if(s==="bottom"&&a){const R=a.height;const M=a.top;const oe=f-M;const ce=R-(oe+b);const ue=o.measurements.color.colorPicker.height+T;if(ce<ue){P=ce-ue}if(oe+P<oe+b/2){P+=T;Q=false}}this.setState({showColorPicker:true,showColorPickerArrow:Q,arrowOffset:D,topOffset:P,leftOffset:k})}else if(u){this.setState({showColorPicker:false})}else{n(d.color);this.setState({activeIdentifier:e});if(i){i()}}};this.onChange=({color:e,colorString:t})=>{const{onChange:i}=this.props;const{activeIdentifier:o,colorList:n}=this.state;const s=n.findIndex(a=>a.identifier===o);if(s!==-1){const a=[...n];a[s]={identifier:n[s].identifier,colorString:t,color:e};this.setState({colorList:a})}i(e)};this.onChangeColorPicker=({color:e,colorString:t})=>{this.onChange({color:[e[0]/255,e[1]/255,e[2]/255,e[3]],colorString:t})};this.closeColorPicker=()=>{this.setState({showColorPicker:false})};this.getColorPicker=()=>{const{activeColor:e,labelsColor:t,colorPickerDirection:i,onAddSnapshot:o}=this.props;const{showColorPicker:n,showColorPickerArrow:s,arrowOffset:a,leftOffset:l,topOffset:u}=this.state;return lf.default.createElement($b,{color:ve(e),show:n,showArrow:s,direction:i,arrowOffset:a,leftOffset:l,topOffset:u,labelHex:t.hex,labelR:t.r,labelG:t.g,labelB:t.b,labelSliderOpacity:t.sliderOpacity,labelSliderHue:t.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:o})};const{colors:t}=this.props;this.containerRef=lf.default.createRef();this.state={activeIdentifier:"",activeSprite:"",colorList:[...t],showColorPicker:false,showColorPickerArrow:false,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:e,activeColor:t},{activeSprite:i,colorList:o}){if(e!==i||!e){const n=Xs(ve(t));const s=o.find(({colorString:a})=>a===n);return{activeSprite:e,activeIdentifier:s?s.identifier:""}}return null}render(){const{tool:e,isDisabled:t,custom:i,config:o,className:n}=this.props;const{activeIdentifier:s,colorList:a}=this.state;const l=i.getColorItem();const u=o.assetProvider.getPath("controls","/tiled-background.png");const c=a.map(d=>{if(!l){return null}return lf.default.createElement(l,{tool:e,key:`${d.colorString}-item-${d.identifier}`,isActive:d.identifier===s,isDisabled:t,onClick:this.onClick(d.identifier),color:d.colorString,label:d.identifier,tiledBackgroundUrl:u})});return lf.default.createElement(TXe,{className:n,"data-test":G.ColorList,ref:this.containerRef},c,this.getColorPicker())}};C5.defaultProps={colorPickerDirection:"bottom",isDisabled:false};Ame=me("config","custom")(E(C5))});var S5,Wt;var Pme=p(()=>{S5=v(x("react"));co();Fme();Wt=r=>S5.default.createElement($t.Consumer,null,({rect:e})=>S5.default.createElement(Ame,{...r,rect:e}))});var Kb,w5,IXe,EXe,Bme,Mme;var Lme=p(()=>{Kb=v(x("react"));L();w5=v(x("styled-components"));lt();W();cr();IXe=(0,w5.default)(we.Controls.Container)`
  cursor: none;
`;EXe=w5.default.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${r=>r.theme.foreground};
`;Bme=class extends Kb.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDrawing:false};this.containerElementRef=null;this.getCursorCoordinates=e=>{let t=0;let i=0;if(e.type.indexOf("touch")!==-1){const a=e;if(!a.touches.length){return{...this.INITIAL_POSITION,height:0,width:0}}t=a.touches[0].clientX;i=a.touches[0].clientY}else{const a=e;t=a.clientX;i=a.clientY}const o=this.containerElementRef.current.getBoundingClientRect();const n=t-o.left;const s=i-o.top;return{x:n,y:s,height:o.height,width:o.width}};this.draw=e=>{e.preventDefault();e.stopPropagation();this.touchDraw(e)};this.touchDraw=e=>{const{x:t,y:i}=this.getCursorCoordinates(e);if(t!==void 0&&i!==void 0){this.setState({x:t,y:i});if(this.state.isDrawing){this.brushTool.strokePosition({x:t,y:i})}}};this.touchStart=()=>{this.brushTool.clickableCanvas(false);this.setState({isDrawing:true});this.brushTool.beginStroke()};this.start=e=>{if(e.button===0){this.touchStart()}else{this.stop(e)}};this.stop=e=>{if(this.state.isDrawing){e.preventDefault();e.stopPropagation();this.setState({isDrawing:false});this.brushTool.endStroke();this.brushTool.clickableCanvas(true)}};this.setInitialPosition=()=>{this.setState({...this.INITIAL_POSITION})};this.mouseOut=e=>{const{config:t}=this.props;e.preventDefault();e.stopPropagation();const i=this.brushTool.sizeOnScreenSpace/2;const{x:o,y:n,height:s,width:a}=this.getCursorCoordinates(e);if(o&&n){if(o<0||n<0||o>a-i||n>s-i||n<t.measurements.mainCanvasActionBar.height){this.setInitialPosition()}}};this.touchEnd=e=>{e.preventDefault();e.stopPropagation();const{x:t,y:i}=this.state;if(t&&i){this.setInitialPosition()}};this.getCursor=()=>{const{x:e,y:t}=this.state;if(e&&t){const i=Xs(this.brushTool.color);const o=`${this.brushTool.sizeOnScreenSpace}px`;const n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:i,height:o,width:o};return Kb.default.createElement(EXe,{style:n,"data-test":G.Cursor})}return null};this.containerElementRef=Kb.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:false})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get brushTool(){return this.props.brushTool}render(){return Kb.default.createElement(IXe,{ref:this.containerElementRef,"data-test":G.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}};Mme=me("brushTool","config")(E(Bme))});var sn;var Qw=p(()=>{sn=(r,e)=>{return r!==void 0&&e!==void 0&&!Number.isNaN(r)&&!Number.isNaN(e)}});var an,zme,T5,kXe,Ume,Nme;var qme=p(()=>{an=v(x("react"));L();zme=v(x("styled-components"));de();lt();cr();Qw();T5=(0,zme.default)(we.Controls.Knob)`
  margin-top: -${r=>r.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${r=>r.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`;({Container:kXe}=we.Controls);Ume=class extends an.default.Component{constructor(e){super(e);this.start=(e,{x:t,y:i})=>{if(sn(t,i)){this.focusTool.setStart({x:t,y:i})}};this.end=(e,{x:t,y:i})=>{if(sn(t,i)){this.focusTool.setEnd({x:t,y:i})}};this.onKnob1DragStart=(e,t)=>{this.focusTool.clickableCanvas(false);this.start(e,t)};this.onKnob1DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition);this.start(e,t);this.focusTool.clickableCanvas(true)};this.onKnob2DragStart=(e,t)=>{this.focusTool.clickableCanvas(false);this.end(e,t)};this.onKnob2DragStop=(e,t)=>{this.addSnapshot(t,this.historyLocale.focusPosition);this.end(e,t);this.focusTool.clickableCanvas(true)};this.addSnapshot=({x:e,y:t},i)=>{if(sn(e,t)){this.focusTool.toolSnapshot(i)}};this.getLine=()=>{const{height:e,width:t}=this.props.canvas.canvasSize;const i=this.focusTool.startOnPreview;const o=this.focusTool.endOnPreview;return an.default.createElement("svg",{focusable:"false",height:e,width:t},an.default.createElement("line",{x1:i.x,y1:i.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=an.default.createRef();this.endRef=an.default.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return an.default.createElement(kXe,null,an.default.createElement(we.Controls.Line,null,this.getLine()),an.default.createElement(z.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},an.default.createElement(T5,{ref:this.startRef})),an.default.createElement(z.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},an.default.createElement(T5,{ref:this.endRef})))}};T5.defaultProps={theme:Do};Nme=me("canvas","focusTool")(E(Ume))});var wl,Xb;var Hme=p(()=>{wl=v(x("react"));L();de();lt();W();cr();Qw();Xb=class extends wl.default.Component{constructor(e){super(e);this.getKnobPosition=()=>{const{focusTool:e}=this.props;const{origin:t,size:i}=e;const o=i/2;const n=Math.PI/2+e.rotation;return{x:t.x+o*Math.cos(n),y:t.y+o*Math.sin(n)}};this.onArea=(e,{x:t,y:i})=>{const{editor:o}=this.props;const n=o.configStore.measurements.canvasControls.knob.size;if(sn(t,i)){const{canvas:s,focusTool:a}=this.props;const{size:l,mirroredAreaWidth:u}=a;const c=t+u/2;const d=i+l/2;const m=new F(this.getKnobPosition());const h=new F({x:t,y:i});const f=h.subtract(new F(this.areaPosition));const b=m.add(f);if(b.x>n&&b.x<s.canvasSize.width-n){if(b.y>n&&b.y<s.canvasSize.height-n){a.setOrigin({x:c,y:d})}}}};this.onKnob=(e,{x:t,y:i})=>{const{focusTool:o}=this.props;if(sn(t,i)){o.clickableCanvas(false);const n=new F(o.origin);const s=new F(t,i);const a=n.subtract(s);const l=a.magnitude;const u=Math.PI/2+Math.atan2(a.y,a.x);o.setSize(l*2);o.setRotation(u)}};this.onAreaDragStop=(e,t)=>{const{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusPosition);this.onArea(e,t);i.clickableCanvas(true)};this.onKnobDragStop=(e,t)=>{const{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusSize);this.onKnob(e,t);i.clickableCanvas(true)};this.addSnapshot=({x:e,y:t},i)=>{const{focusTool:o}=this.props;if(sn(e,t)){o.toolSnapshot(i)}};this.knobRef=wl.default.createRef();this.areaRef=wl.default.createRef()}get areaPosition(){const{focusTool:e}=this.props;const{origin:t,size:i,mirroredAreaWidth:o}=e;return{x:t.x-o/2,y:t.y-i/2}}render(){const{x:e,y:t}=this.areaPosition;const{focusTool:i}=this.props;return wl.default.createElement(we.Controls.Container,null,wl.default.createElement(z.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},wl.default.createElement(we.Controls.Knob,{ref:this.knobRef})),wl.default.createElement(z.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:t},rotation:i.rotation},wl.default.createElement(we.Controls.Area,{ref:this.areaRef,"data-test":G.Focus,height:i.size,width:i.mirroredAreaWidth})))}};Xb=g([me("focusTool","canvas","editor"),E],Xb)});var Tl,Yb;var Wme=p(()=>{Tl=v(x("react"));L();de();lt();W();cr();Qw();Yb=class extends Tl.default.Component{constructor(e){super(e);this.state={knobAngle:2.35};this.onCircle=(e,{x:t,y:i})=>{if(sn(t,i)){const{focusTool:o}=this.props;o.setCenter({x:t+o.radius,y:i+o.radius})}};this.onKnob=(e,{x:t,y:i})=>{if(sn(t,i)){const{focusTool:o}=this.props;const n=new F(t,i);const s=new F(o.center.x,o.center.y);const a=s.subtract(n);const l=a.magnitude;const u=-Math.atan2(a.y,a.x);this.setState({knobAngle:u});o.setRadius(l)}};this.onCircleDragStart=(e,t)=>{const{focusTool:i}=this.props;i.clickableCanvas(false);this.onCircle(e,t)};this.onCircleDragStop=(e,t)=>{const{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusPosition);this.onCircle(e,t);i.clickableCanvas(true)};this.onKnobDragStart=(e,t)=>{const{focusTool:i}=this.props;i.clickableCanvas(false);this.onKnob(e,t)};this.onKnobDragStop=(e,t)=>{const{focusTool:i}=this.props;this.addSnapshot(t,i.locale.history.focusSize);this.onKnob(e,t);i.clickableCanvas(true)};this.addSnapshot=({x:e,y:t},i)=>{const{focusTool:o}=this.props;if(sn(e,t)){o.toolSnapshot(i)}};this.knobRef=Tl.default.createRef();this.circleRef=Tl.default.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:e}=this.props;const{knobAngle:t}=this.state;const{center:i,radius:o}=e;const n={x:i.x-o,y:i.y-o};const s=Math.PI-t;const a={x:i.x+o*Math.cos(s),y:i.y+o*Math.sin(s)};return Tl.default.createElement(we.Controls.Container,null,Tl.default.createElement(z.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:a},Tl.default.createElement(we.Controls.Knob,{ref:this.knobRef})),Tl.default.createElement(z.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},Tl.default.createElement(we.Controls.Circle,{ref:this.circleRef,"data-test":G.Focus,radius:o})))}};Yb=g([me("focusTool","canvas"),E],Yb)});var Gme,Vme;var jme=p(()=>{Gme=v(x("react"));L();B();K();qme();Hme();Wme();Vme=E(()=>{const{focusTool:r}=O();const{state:e}=r;const t=()=>{switch(e.identifier){case"linear":return Nme;case"radial":return Yb;case"mirrored":return Xb;default:return null}};const i=t();return r.isOptionSelected&&i?Gme.default.createElement(i,null):null})});var $me,Kme;var Xme=p(()=>{$me=v(x("react"));K();Kme=({customButtonKey:r,onClick:e,label:t,icon:i,disabled:o})=>{const{custom:n}=O();const s=n.getButton(r);if(!s){return null}return $me.default.createElement(s,{onClick:e,label:t,ariaLabel:t,icon:i,isDisabled:o})}});var Yme=p(()=>{Xme()});var I5,uf;var Jme=p(()=>{I5=v(x("react"));W();cr();Yme();uf=({availableKeys:r,actions:e})=>{return I5.default.createElement(we.Bar.ButtonGroup,{onClick:zY},r.map(t=>{const i=e[t];if(i){return I5.default.createElement(Kme,{key:t,...i})}return null}))}});var eT=p(()=>{Jme()});var cf,DXe,Zme;var Qme=p(()=>{cf=v(x("react"));L();B();Ut();eT();DXe=({sprite:r,stickerTool:e})=>{const t=e.locale.canvasActions;const i={["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:t.buttonBringToFront,icon:cf.default.createElement(it.bringToFront,null),disabled:r.isOnTop},["flip"]:{customButtonKey:"canvasActionFlip",onClick:e.flipHorizontally,label:t.buttonFlipHorizontal,icon:cf.default.createElement(it.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:t.buttonDuplicate,icon:cf.default.createElement(it.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:e.delete,label:t.buttonDelete,icon:cf.default.createElement(it.delete,null)}};if(!e.isStickerSelected){return null}return cf.default.createElement(uf,{availableKeys:e.config.canvasActions,actions:i})};Zme=me("sprite","stickerTool")(E(DXe))});var df,OXe,ehe;var the=p(()=>{df=v(x("react"));L();B();Ut();eT();OXe=({textTool:r,sprite:e})=>{const t=r.locale.canvasActions;const i={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>r.setEditMode(true),label:t.buttonEdit,icon:df.default.createElement(it.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:r.bringToFront,label:t.buttonBringToFront,icon:df.default.createElement(it.bringToFront,null),disabled:e.isOnTop},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:r.duplicate,label:t.buttonDuplicate,icon:df.default.createElement(it.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:r.delete,label:t.buttonDelete,icon:df.default.createElement(it.delete,null)}};if(!e.isSpriteText){return null}return df.default.createElement(uf,{availableKeys:r.config.canvasActions,actions:i})};ehe=me("textTool","sprite")(E(OXe))});var fp,RXe,rhe;var ihe=p(()=>{fp=v(x("react"));L();B();Ut();eT();RXe=({sprite:r,textDesignTool:e})=>{const t=e.locale.canvasActions;const i={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(true),label:t.buttonEdit,icon:fp.default.createElement(it.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:t.buttonBringToFront,icon:fp.default.createElement(it.bringToFront,null),disabled:r.isOnTop},["invert"]:{customButtonKey:"canvasActionInvert",onClick:e.invertBackground,label:t.buttonInvert,icon:fp.default.createElement(it.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:e.duplicate,label:t.buttonDuplicate,icon:fp.default.createElement(it.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:()=>e.delete(),label:t.buttonDelete,icon:fp.default.createElement(it.delete,null)}};if(!e.isTextDesignSelected){return null}return fp.default.createElement(uf,{availableKeys:e.config.canvasActions,actions:i})};rhe=me("sprite","textDesignTool")(E(RXe))});var gp,Jb;var ohe=p(()=>{gp=v(x("react"));L();B();W();cr();Qme();the();ihe();Jb=class extends gp.default.Component{constructor(e){super(e);this.actionsRef=null;this.spriteControlPosition=()=>{const{config:e,sprite:t,canvas:{canvasSize:i}}=this.props;const{controlPadding:o,controlOffset:n}=e.measurements.canvasControls.sprite;const{x:s,y:a}=t.position;const{height:l,width:u}=t.currentSprite.size;const c=t.rotationWRTOutputRotation;const d=this.actionsRef.current;let m=new F(0,0);if(d){const b=d.getBoundingClientRect();m=new F(b.width/2+n,b.height+n)}const h=Math.abs(u*Math.sin(c))+Math.abs(l*Math.cos(c));const f=new F(s,a-h/2-o-n).clamp(m,new F(i.width,i.height).subtract(m));return{left:f.x,top:f.y}};this.getSpriteControls=()=>{const{sprite:e}=this.props;switch(e.tool){case"text":return gp.default.createElement(ehe,null);case"textdesign":return gp.default.createElement(rhe,null);case"sticker":return gp.default.createElement(Zme,null);default:return null}};this.actionsRef=gp.default.createRef();this.state={isMounted:false}}componentDidMount(){this.setState({isMounted:true})}render(){const{sprite:e}=this.props;const{isMounted:t}=this.state;const i=!e.isDragMode&&!e.isEditMode;const o=this.spriteControlPosition();return gp.default.createElement(we.Controls.SpriteActionsWrapper,{"data-test":G.SpriteActions,ref:this.actionsRef,show:i&&t,style:{...o}},this.getSpriteControls())}};Jb=g([me("sprite","config","editor","canvas"),E],Jb)});var ai,tT,rT,E5,k5,nhe;var she=p(()=>{ai=v(x("react"));L();de();lt();K();W();cr();({Corner:tT}=we.Controls);({Draggable:rT}=z);E5=new F(0,0);k5=new F(0,0);nhe=E(()=>{const r=(0,ai.useRef)(null);const e=(0,ai.useRef)(null);const t=(0,ai.useRef)(null);const i=(0,ai.useRef)(null);const{config:o,sprite:n}=O();const{leftTopPosition:s,leftBottomPosition:a,rightTopPosition:l,rightBottomPosition:u}=n;const{borderWidth:c}=o.measurements.canvasControls.corner;const d=({clientX:b,clientY:_})=>{if(b!==void 0&&_!==void 0){n.onCornerDrag(k5.subtract(E5.subtract(new F(b,_))))}};const m=b=>{switch(b){case"leftTop":return s;case"leftBottom":return a;case"rightTop":return l;case"rightBottom":return u;default:return s}};const h=(b,_)=>{const{clientX:y,clientY:I}=b;E5=new F(y,I);k5=new F(m(_));n.clickableCanvas(false);n.setDragMode(true)};const f=()=>{n.clickableCanvas(true);n.setDragMode(false);n.spriteSnapshot("size");E5=new F(0,0);k5=new F(0,0)};return ai.default.createElement(ai.default.Fragment,null,ai.default.createElement(rT,{nodeRef:r,onStop:f,onDrag:d,onStart:b=>h(b,"leftTop")},ai.default.createElement(tT,{ref:r,"data-test":G.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:c})),ai.default.createElement(rT,{nodeRef:t,onStop:f,onDrag:d,onStart:b=>h(b,"leftBottom")},ai.default.createElement(tT,{ref:t,"data-test":G.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:c})),ai.default.createElement(rT,{nodeRef:e,onStop:f,onDrag:d,onStart:b=>h(b,"rightTop")},ai.default.createElement(tT,{ref:e,"data-test":G.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:c})),ai.default.createElement(rT,{nodeRef:i,onStop:f,onDrag:d,onStart:b=>h(b,"rightBottom")},ai.default.createElement(tT,{ref:i,"data-test":G.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:c})))})});var ia,R5,AXe,FXe,D5,O5,PXe,ahe;var lhe=p(()=>{ia=v(x("react"));L();R5=v(x("styled-components"));de();lt();Ii();AXe=R5.default.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;FXe=R5.default.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;D5=new F(0,0);O5=new F(0,0);PXe=({sprite:r,config:e})=>{const t=(0,ia.useRef)(null);const i=(0,ia.useRef)(null);const o=r.leftMidPosition;const n=r.rightMidPosition;const s=e.assetProvider.getPath("controls","/arrow-left.png");const a=e.assetProvider.getPath("controls","/arrow-right.png");const l=(d,m)=>{r.setDragMode(true);r.clickableCanvas(false);const{clientX:h,clientY:f}=d;D5=new F(h,f);O5=new F(m==="left"?o:n)};const u=()=>{r.clickableCanvas(true);r.setDragMode(false);r.addSnapshot("edit",r.textDesignLocale.padding);D5=new F(0,0);O5=new F(0,0)};const c=({clientX:d,clientY:m})=>{if(d!==void 0&&m!==void 0){const h=O5.subtract(D5.subtract(new F(d,m)));r.onPaddingDrag(h)}};return ia.default.createElement(ia.default.Fragment,null,ia.default.createElement(z.Draggable,{nodeRef:t,onStart:d=>l(d,"left"),onDrag:c,onStop:u},ia.default.createElement(AXe,{ref:t,src:s})),ia.default.createElement(z.Draggable,{nodeRef:i,onStart:d=>l(d,"right"),onDrag:c,onStop:u},ia.default.createElement(FXe,{ref:i,src:a})))};ahe=me("sprite","config")(E(PXe))});var Zb,uhe,che,A5,F5,BXe,dhe;var phe=p(()=>{Zb=v(x("react"));L();uhe=v(x("styled-components"));de();lt();W();cr();che=(0,uhe.default)(we.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${r=>r.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${r=>r.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;A5=new F(0,0);F5=new F(0,0);BXe=({config:r,sprite:e,snapping:t})=>{const i=(0,Zb.useRef)(null);const o=e.rightBottomHandlePosition;const n=e.leftBottomHandlePosition;const s={x:(o.x+n.x)/2,y:(o.y+n.y)/2};const a=({clientX:m,clientY:h})=>{A5=new F(m,h);F5=new F(s);e.setDragMode(true);e.clickableCanvas(false)};const l=()=>{e.clickableCanvas(true);e.setDragMode(false);e.spriteSnapshot("rotation");t.hideRotationGuides();A5=new F(0,0);F5=new F(0,0)};const u=({clientX:m,clientY:h})=>{if(m!==void 0&&h!==void 0){const f=F5.subtract(A5.subtract(new F(m,h)));const b=e.position;const _=new F(b.x,b.y);const y=f.subtract(_);const I=Math.atan2(y.y,y.x)-Math.PI/2;const T=t.snapToRotation(I,y,e.currentRect);e.setRotation(T)}};const c=m=>{u(m)};const d=r.assetProvider.getPath("controls",`/${CK()?"rotate-windows":"rotate-osx"}.png`);return Zb.default.createElement(z.Draggable,{nodeRef:i,onStart:a,onDrag:c,onStop:l},Zb.default.createElement(che,{ref:i,url:d}))};che.defaultProps={theme:Do};dhe=me("sprite","snapping","config")(E(BXe))});var oa,iT,mhe,hhe,fhe,P5,B5,MXe,ghe;var yhe=p(()=>{oa=v(x("react"));L();iT=v(x("styled-components"));de();lt();Ii();cr();mhe=(0,iT.default)(we.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`;hhe=(0,iT.default)(mhe)`
  left: -3px;
  top: calc(
    50% - ${r=>r.theme.measurements.canvasControls.width.size/2}px
  );
`;fhe=(0,iT.default)(mhe)`
  right: -3px;
  top: calc(
    50% - ${r=>r.theme.measurements.canvasControls.width.size/2}px
  );
`;P5=new F(0,0);B5=new F(0,0);MXe=({sprite:r,textTool:e})=>{const t=(0,oa.useRef)(null);const i=(0,oa.useRef)(null);const o=r.leftMidPadPosition;const n=r.rightMidPadPosition;const s=(u,c)=>{r.setDragMode(true);r.clickableCanvas(false);const{clientX:d,clientY:m}=u;P5=new F(d,m);B5=new F(c==="left"?o:n)};const a=()=>{r.clickableCanvas(true);r.setDragMode(false);r.addSnapshot("edit",r.textLocale.width);e.updateDefaultFontSize();P5=new F(0,0);B5=new F(0,0)};const l=({clientX:u,clientY:c})=>{if(u!==void 0&&c!==void 0){const d=B5.subtract(P5.subtract(new F(u,c)));r.onWidthDrag(d)}};return oa.default.createElement(oa.default.Fragment,null,oa.default.createElement(z.Draggable,{nodeRef:t,onStart:u=>s(u,"left"),onDrag:l,onStop:a},oa.default.createElement(hhe,{ref:t})),oa.default.createElement(z.Draggable,{nodeRef:i,onStart:u=>s(u,"right"),onDrag:l,onStop:a},oa.default.createElement(fhe,{ref:i})))};hhe.defaultProps={theme:Do};fhe.defaultProps={theme:Do};ghe=me("sprite","textTool")(E(MXe))});var ln,LXe,oT,M5,bhe;var _he=p(()=>{ln=v(x("react"));L();de();lt();K();W();cr();ohe();she();lhe();phe();yhe();({Draggable:LXe}=z);oT=new F(0,0);M5=new F(0,0);bhe=E(()=>{const r=(0,ln.useRef)();const{active:e,config:t,snapping:i,sprite:o}=O();const n=({clientX:y,clientY:I})=>{const T=M5.subtract(oT.subtract(new F(y,I)));const{x:D,y:P}=i.snapToPosition({x:T.x,y:T.y},o.currentRect);o.setPosition({x:D,y:P})};const s=y=>{const{clientX:I,clientY:T}=y;oT=new F(I,T);M5=new F(o.position);o.setDragMode(true);i.updateGuides()};const a=y=>{const{clientX:I,clientY:T}=y;const{x:D,y:P}=oT;oT=new F(0,0);M5=new F(0,0);o.setDragMode(false);if(D!==I&&P!==T){o.spriteSnapshot("position")}i.hidePositionGuides()};const l=y=>{y.preventDefault();y.stopPropagation();o.setEditMode(true)};const u=()=>{const y=e.tool;const I=o.tool;return o.isSpriteSelected&&y===I};if(!u()){return null}const{isSpriteText:c}=o;const d=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted;const{height:m,width:h}=o.size;const f=o.spritePosition;const b=o.rotationWRTOutputRotation;const{controlPadding:_}=t.measurements.canvasControls.sprite;return ln.default.createElement(we.Controls.Container,null,ln.default.createElement(LXe,{nodeRef:r,onStart:s,onDrag:n,onStop:a,rotation:b,position:f},ln.default.createElement(we.Controls.Sprite,{ref:r,"data-test":G.Sprite,onDoubleClick:l,height:m,width:h},c&&ln.default.createElement(ghe,null)||null,d&&ln.default.createElement(ahe,null)||null,ln.default.createElement(nhe,null),ln.default.createElement(we.Controls.RotateHandle,{x:h/2+_/2},ln.default.createElement(dhe,null)))),ln.default.createElement(Jb,null))})});var sr,Il,nT,zXe,Qb,ac,UXe,NXe,qXe,HXe,WXe,vhe;var xhe=p(()=>{sr=v(x("react"));L();Il=v(x("styled-components"));de();W();JM();cr();bA();({GridLine:nT}=we.Crop);zXe=we.Crop.Mask;({Draggable:Qb}=z);ac=3;UXe=(0,Il.default)(Qc)`
  left: ${ac}px;
  top: ${ac}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`;NXe=(0,Il.default)(Qc)(r=>{const{desktop:e}=r.theme.measurements.canvasControls.corner.touchable;const t=e/4-r.borderWidth;return Il.css`
    left: ${t-e}px;
    top: ${ac}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `});qXe=(0,Il.default)(Qc)(r=>{const{desktop:e}=r.theme.measurements.canvasControls.corner.touchable;const t=e/4-r.borderWidth;return Il.css`
    left: ${t-e}px;
    top: ${t-e}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `});HXe=(0,Il.default)(Qc)(r=>{const{desktop:e}=r.theme.measurements.canvasControls.corner.touchable;const t=e/4-r.borderWidth;return Il.css`
    top: ${t-e}px;
    left: ${ac}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `});WXe=({transformTool:r})=>{const e=(0,sr.useRef)(null);const t=(0,sr.useRef)(null);const i=(0,sr.useRef)(null);const o=(0,sr.useRef)(null);const n=(0,sr.useRef)(null);const{leftTopRespectFlip:s,leftBottomRespectFlip:a,rightTopRespectFlip:l,rightBottomRespectFlip:u}=r;const{height:c,width:d}=r.cropMaskSize;const{maxCropMaskSize:m,defaultCropMaskPosition:h}=r;const{isFlippedHorizontal:f,isFlippedVertical:b}=r;const _=m.width/2;const y=m.height/2;const I={...m,left:h.x,top:h.y};const T={height:c,width:d};const D=r.isDragMode?{transition:"unset"}:{};const P=Ke=>{return f?_*2-Ke:Ke};const k=Ke=>{return b?y*2-Ke:Ke};const A=(Ke,Pe,We)=>{const Ap=P(Ke);const j_=k(Pe);switch(rr.getFlippedEdgeIndex(We,f,b)){case 0:r.onLeftTop({x:Ap,y:j_});break;case 1:r.onLeftBottom({x:Ap,y:j_});break;case 2:r.onRightTop({x:Ap,y:j_});break;case 3:r.onRightBottom({x:Ap,y:j_});break;default:break}};const Q=(Ke,Pe,We)=>{r.setDragMode(true);r.clickableCanvas(false);A(Ke,Pe,We)};const R=(Ke,Pe,We)=>{A(Ke,Pe,We)};const M=(Ke,Pe,We)=>{r.setDragMode(false);A(Ke,Pe,We);r.clickableCanvas(true);r.trackChanges()};const oe=(Ke,{x:Pe,y:We})=>{Q(Pe,We,0)};const ce=(Ke,{x:Pe,y:We})=>{R(Pe,We,0)};const ue=(Ke,{x:Pe,y:We})=>{M(Pe,We,0)};const Se=(Ke,{x:Pe,y:We})=>{Q(Pe,We,1)};const Pt=(Ke,{x:Pe,y:We})=>{R(Pe,We,1)};const ee=(Ke,{x:Pe,y:We})=>{M(Pe,We,1)};const V=(Ke,{x:Pe,y:We})=>{Q(Pe,We,2)};const j=(Ke,{x:Pe,y:We})=>{R(Pe,We,2)};const be=(Ke,{x:Pe,y:We})=>{M(Pe,We,2)};const pe=(Ke,{x:Pe,y:We})=>{Q(Pe,We,3)};const De=(Ke,{x:Pe,y:We})=>{R(Pe,We,3)};const ke=(Ke,{x:Pe,y:We})=>{M(Pe,We,3)};const Me=(Ke,Pe)=>{const We=P(Ke+d/2)-d/2;const Ap=k(Pe+c/2)-c/2;r.changePosition({x:We,y:Ap})};const mt=(Ke,{x:Pe,y:We})=>{r.setDragMode(true);r.clickableCanvas(false);Me(Pe,We)};const Bt=(Ke,{x:Pe,y:We})=>{Me(Pe,We)};const Oi=(Ke,{x:Pe,y:We})=>{r.setDragMode(false);Me(Pe,We);r.clickableCanvas(true);r.trackChanges()};return sr.default.createElement("div",{style:{...I,position:"absolute"}},sr.default.createElement(Qb,{nodeRef:n,bounds:"parent",position:s,onStart:mt,onDrag:Bt,onStop:Oi},sr.default.createElement(zXe,{ref:n,style:{...T,...D}})),sr.default.createElement(nT,{style:{left:s.x+d/3,top:s.y,height:c,width:1,...D}}),sr.default.createElement(nT,{style:{left:s.x+d/3*2,top:s.y,height:c,width:1,...D}}),sr.default.createElement(nT,{style:{left:s.x,top:s.y+c/3,height:1,width:d,...D}}),sr.default.createElement(nT,{style:{left:s.x,top:s.y+c/3*2,height:1,width:d,...D}}),sr.default.createElement(Qb,{nodeRef:e,bounds:"parent",position:{...s},onStart:oe,onDrag:ce,onStop:ue},sr.default.createElement(UXe,{ref:e,"data-test":G.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:ac,style:D})),sr.default.createElement(Qb,{nodeRef:i,bounds:"parent",position:a,onStart:Se,onDrag:Pt,onStop:ee},sr.default.createElement(HXe,{ref:i,"data-test":G.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:ac,style:D})),sr.default.createElement(Qb,{nodeRef:t,bounds:"parent",position:l,onStart:V,onDrag:j,onStop:be},sr.default.createElement(NXe,{ref:t,"data-test":G.CropTopRight,vertical:"top",horizontal:"right",borderWidth:ac,style:D})),sr.default.createElement(Qb,{nodeRef:o,bounds:"parent",position:u,onStart:pe,onDrag:De,onStop:ke},sr.default.createElement(qXe,{ref:o,"data-test":G.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:ac,style:D})))};vhe=me("transformTool")(E(WXe))});var Kn,lc,Che,GXe,VXe,jXe,She,whe;var The=p(()=>{Kn=v(x("react"));L();lc=v(x("styled-components"));de();Ut();W();Che=lc.default.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${r=>r.isVisible&&lc.css`
      display: inline-block;
    `}

  svg {
    color: ${r=>r.theme.foreground};
  }
`;GXe=lc.default.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`;VXe=lc.default.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${r=>r.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${r=>r.isVisible&&lc.css`
      display: inline-block;
    `}
`;jXe=lc.default.div`
  transform: translate(0, 0) !important;
`;She=class extends Kn.default.Component{constructor(e){super(e);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(e,{x:t})=>{const{flipHorizontally:i,flipVertically:o}=this.transformTool.rotateFlipState;if(i!==o){t*=-1}const n=this.transformTool.defaultAngle-t*this.DEGREES_PER_PIXEL;const s=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${s}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees);this.transformTool.trackChanges()};this.rotateRef=Kn.default.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:e,canvasWidth:t,transformTool:i,className:o}=this.props;const{flipHorizontally:n,flipVertically:s}=this.transformTool.rotateFlipState;const a=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minSliderWidth;const l=!e.isLayoutAdvanced||e.isLayoutAdvanced&&t>e.measurements.canvas.transform.minValueWidth;const u=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle;const c=n===s?u*-1:u;const d=n!==s?i.rotationInDegrees*-1:i.rotationInDegrees;return Kn.default.createElement(GXe,{"data-test":G.RotateSlider,className:o},Kn.default.createElement(z.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:true,disabled:!a},Kn.default.createElement(jXe,{ref:this.rotateRef},Kn.default.createElement(Che,{isVisible:a},Kn.default.createElement(it.dots,{width:90,height:15,x:c})),Kn.default.createElement(VXe,{isVisible:l},d,"\xB0"),Kn.default.createElement(Che,{isVisible:a},Kn.default.createElement(it.dots,{width:90,height:15,x:c})))))}};whe=me("transformTool","config")(E(She))});var un,Zi,Ihe,$Xe,Ehe,KXe,khe,XXe,YXe,JXe,ZXe,QXe,Dhe,eYe,tYe,e_;var L5=p(()=>{un=v(x("react"));L();Zi=v(x("styled-components"));co();Ut();W();The();Ihe=Zi.css`
  grid-column-start: span 2;
`;$Xe=(0,Zi.default)(whe)`
  ${r=>r.smallContainer&&Ihe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${Ihe}
  }
`;Ehe=Zi.css`
  grid-column-start: 1;
  grid-row-start: 2;
`;KXe=Zi.default.div`
  display: flex;
  gap: 5px;
  ${r=>r.smallContainer&&Ehe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${Ehe}
  }
`;khe=Zi.css`
  justify-content: flex-end;
  grid-column-start: 2;
  grid-row-start: 2;
`;XXe=Zi.default.div`
  display: flex;
  gap: 5px;
  ${r=>r.smallContainer&&khe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${khe}
  }
`;YXe=(0,Zi.default)(it.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`;JXe=(0,Zi.default)(it.rotate)`
  height: 16px;
  width: 16px;
`;ZXe=(0,Zi.default)(it.flipHorizontal)`
  height: 16px;
  width: 16px;
`;QXe=(0,Zi.default)(it.flipVertical)`
  height: 16px;
  width: 16px;
`;Dhe=Zi.css`
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  margin-bottom: 0.5rem;
`;eYe=Zi.default.div`
  display: inline-flex;
  gap: 5px;

  svg {
    color: ${r=>r.theme.foreground};
  }

  ${r=>r.smallContainer&&Dhe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${Dhe}
  }
`;tYe=({transformTool:r,config:e,custom:t,canvas:i})=>{const{rect:o}=(0,un.useContext)($t);const n=r.locale.transformActions;const s=i.canvasSize.width;const a=!e.isLayoutAdvanced||e.isLayoutAdvanced&&s>e.measurements.canvas.transform.minFlipWidth;const l=({customButtonKey:b,onClick:_,label:y,icon:I})=>{const T=t.getButton(b);return un.default.createElement(T,{key:y,onClick:_,label:y,ariaLabel:y,icon:I})};const u=l({label:n.buttonFlipHorizontal,icon:un.default.createElement(ZXe,null),onClick:()=>{r.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"});const c=l({label:n.buttonFlipVertical,icon:un.default.createElement(QXe,null),onClick:()=>{r.flipVertically()},customButtonKey:"transformActionFlipVertical"});const d=l({label:n.buttonRotateClockwise,icon:un.default.createElement(YXe,null),onClick:r.rotateClockwise,customButtonKey:"transformActionRotateClockwise"});const m=l({label:n.buttonRotateAntiClockwise,icon:un.default.createElement(JXe,null),onClick:r.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"});const h=!!o&&o.width<600;const f=e.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return un.default.createElement(eYe,{style:f,"data-test":G.FlipRotateControls,smallContainer:h},r.config.enableFlip&&a&&un.default.createElement(KXe,{smallContainer:h},u,c),r.config.enableRotation&&un.default.createElement($Xe,{canvasWidth:s,smallContainer:h}),r.config.enableRotation&&un.default.createElement(XXe,{smallContainer:h},m,d))};e_=me("transformTool","config","custom","canvas")(E(tYe))});var El,rYe,sT,iYe,Ohe;var Rhe=p(()=>{El=v(x("react"));L();cr();xhe();L5();rYe=we.Bar.Index;({Backdrop:sT}=we.Crop);iYe=({transformTool:r,canvas:e,config:t})=>{const{leftTopRespectFlip:i,leftBottomRespectFlip:o,rightTopRespectFlip:n}=r;const{height:s}=r.cropMaskSize;const{height:a,width:l}=e.canvasSize;const{defaultCropMaskPosition:u}=r;const c=r.isDragMode?{transition:"unset"}:{};return El.default.createElement(we.Controls.Container,null,El.default.createElement(sT,{style:{left:0,top:0,width:l,height:i.y+u.y,...c}}),El.default.createElement(sT,{style:{left:0,top:i.y+u.y,width:u.x+i.x,height:s,...c}}),El.default.createElement(sT,{style:{left:n.x+u.x,top:n.y+u.y,width:l-n.x-u.x,height:s,...c}}),El.default.createElement(sT,{style:{left:0,top:o.y+u.y,width:l,height:a-o.y-u.y+t.measurements.basicUIToolControlBar.controlsBarHeight,...c}}),El.default.createElement(vhe,null),t.isLayoutAdvanced?El.default.createElement(rYe,{bottom:true},El.default.createElement(e_,null)):null)};Ohe=me("transformTool","canvas","config")(E(iYe))});var aT,lT,oYe,Ahe,Fhe;var Phe=p(()=>{aT=v(x("react"));L();lT=v(x("styled-components"));cr();oYe=(0,lT.default)(we.Controls.Container)`
  ${r=>r.activeCursor?lT.css`
          cursor: move;
        `:""}
  z-index: ${r=>r.theme.measurements.zIndex.canvas.crop.dragImage};
`;Ahe=class extends aT.default.Component{constructor(e){super(e);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDragging:false};this.containerRef=null;this.getCursorCoordinates=e=>{let t=0;let i=0;if(e.type.indexOf("touch")!==-1){const a=e;if(!a.touches.length){return this.INITIAL_POSITION}t=a.touches[0].clientX;i=a.touches[0].clientY}else{const a=e;t=a.clientX;i=a.clientY}const o=this.containerRef.current.getBoundingClientRect();const n=t-o.left;const s=i-o.top;return{x:n,y:s}};this.move=e=>{if(this.scale.canDrag){const{x:t,y:i}=this.getCursorCoordinates(e);if(t!==void 0&&i!==void 0){if(this.state.isDragging){const o={x:this.state.x-t,y:this.state.y-i};this.scale.setOffset(o)}}}};this.touchDrag=e=>{if(this.scale.canDrag){const{x:t,y:i}=this.getCursorCoordinates(e);if(t!==void 0&&i!==void 0){this.setState({x:t,y:i,isDragging:true})}}};this.drag=e=>{e.preventDefault();this.touchDrag(e)};this.stop=()=>{if(this.scale.canDrag){this.scale.savePosition();this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.touchEnd=e=>{e.preventDefault();e.stopPropagation();const{x:t,y:i}=this.state;if(t&&i){this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.containerRef=aT.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:true})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get scale(){return this.props.scale}render(){return aT.default.createElement(oYe,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}};Fhe=me("scale")(E(Ahe))});var na,Bhe;var Mhe=p(()=>{na=v(x("react"));L();B();K();Lme();cr();jme();_he();Rhe();Phe();Bhe=E(({children:r})=>{const e=(0,na.useRef)(null);const{active:t,sprite:i,canvas:o}=O();const n=()=>{switch(t.tool){case"focus":return na.default.createElement(Vme,null);case"text":case"textdesign":case"sticker":return na.default.createElement(bhe,null);case"brush":return na.default.createElement(Mme,null);case"transform":return na.default.createElement(Ohe,null);default:return na.default.createElement(we.Controls.Container,null,na.default.createElement(Fhe,null))}};const s=u=>{u.preventDefault();u.stopPropagation();if(o==null?void 0:o.isCanvasClickable){let{clientX:c}=u;let{clientY:d}=u;if(u.type.indexOf("touch")!==-1){const b=u;if(!b.touches.length){return}c=b.touches[0].clientX;d=b.touches[0].clientY}const m=e.current.getBoundingClientRect();const h=c-m.left;const f=d-m.top;o.getContainersAtPreviewPoint({x:h,y:f})}};const a=u=>{if(u.code==="Tab"){i.selectLast()}};const{canvasSize:l}=o;return na.default.createElement(we.Controls.Wrapper,{"aria-hidden":true,ref:e,onClick:s,onKeyDown:a,height:l.height,width:l.width},r,n())})});var Lhe,zhe,nYe,sYe,z5;var Uhe=p(()=>{Lhe=v(x("react"));zhe=v(x("styled-components"));nYe=zhe.default.div`
  display: ${({isVisible:r})=>r?"block":"none"};
  position: absolute;
  z-index: ${r=>r.theme.measurements.zIndex.canvas.snappingGuide};
`;sYe=({isVisible:r,className:e})=>{return Lhe.default.createElement(nYe,{isVisible:r,className:e})};z5=sYe});var uT,yp,aYe,lYe,uYe,cYe,Nhe;var qhe=p(()=>{uT=v(x("react"));L();yp=v(x("styled-components"));W();Uhe();aYe=(0,yp.default)(z5)`
  background: ${r=>r.theme.snapping.positionGuideColor};
  ${r=>{if(r.direction==="horizontal"){return yp.css`
        width: 100%;
        height: 2px;
        top: ${()=>r.position}px;
      `}return yp.css`
      width: 2px;
      height: 100%;
      left: ${()=>r.position}px;
    `}}
`;lYe=(0,yp.default)(z5)`
  border: none;
  border-top: 2px dashed ${r=>r.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:r})=>r.x}px;
  top: ${({position:r})=>r.y}px;
  transform: rotate(${({rotation:r})=>r}rad);
  width: 200%;
`;uYe=yp.default.div`
  position: absolute;
  width: ${({width:r})=>r}px;
  height: ${({height:r})=>r}px;
  top: ${({top:r})=>r}px;
  left: ${({left:r})=>r}px;
  overflow: hidden;
`;cYe=({snapping:r,editor:e})=>{const{width:t,height:i}=e.getPreviewSize();const{x:o,y:n}=r.previewTopLeftPosition;const s=r.positionGuides.map(({direction:l,value:u,isVisible:c},d)=>uT.default.createElement(aYe,{key:`positionGuide-${d}`,direction:l,position:u,isVisible:c}));const a=r.rotationGuides.find(({isVisible:l})=>l);return uT.default.createElement(uYe,{"data-test":G.SnappingLine,width:t,height:i,left:o,top:n},s,uT.default.createElement(lYe,{key:"rotationGuide",rotation:a?a.value:0,position:a?a.position:{x:0,y:0},isVisible:!!a}))};Nhe=me("snapping","editor")(E(cYe))});var Hhe,Whe,dYe,Ghe;var Vhe=p(()=>{Hhe=v(x("react"));Whe=v(x("styled-components"));W();dYe=Whe.default.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`;Ghe=()=>Hhe.default.createElement(dYe,{alt:"watermark","data-test":G.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="})});var Po,jhe,pf;var $he=p(()=>{Po=v(x("react"));b0();jhe=v(Om());L();K();W();cr();Mhe();qhe();Vhe();pf=E(function r(){const e=(0,Po.useRef)(null);const{canvas:t,config:i}=O();const o=(a=true)=>{if(e==null?void 0:e.current){const{clientWidth:l,clientHeight:u}=e.current;const c=kn();e.current.width=l*c;e.current.height=u*c;t.saveDimensions({width:l,height:u,render:a})}};const n=new Uc((0,jhe.default)(()=>o(),100,{trailing:true}));(0,Po.useEffect)(()=>{const a=e.current;t.setCanvasElement(a);return()=>{n.disconnect()}},[]);(0,Po.useLayoutEffect)(()=>{o(false);n.observe(e.current)});const{licenseChecker:s}=i;return Po.default.createElement(Po.default.Fragment,null,s&&s.isWhiteLabel()?null:Po.default.createElement(Ghe,null),Po.default.createElement(we.Element,{ref:e,"aria-label":"Canvas","data-test":G.Canvas}),Po.default.createElement(Bhe,null,Po.default.createElement(Nhe,null)))})});var U5,cT;var Khe=p(()=>{U5=v(x("react"));cT=({children:r})=>U5.default.createElement(U5.default.Fragment,null,r)});var N5=p(()=>{Khe()});var mf;var Xhe=p(()=>{de();lt();cr();N5();mf=class{constructor(e={},t={}){this.getAdvancedCategoryCard=()=>{return this.components.advancedUICategoryCard};this.getAdvancedItemCard=()=>{return this.components.advancedUIItemCard};this.getAdvancedToolbarItem=()=>{return this.components.advancedUIToolbarItem};this.getAdvancedToolbar=()=>{return this.components.advancedUIToolbar};this.getAdvancedToolControlBar=()=>{return this.components.advancedUIToolControlBar};this.getBasicToolbar=()=>{return this.components.basicUIToolbar};this.getBasicToolControlBar=()=>{return this.components.basicUIToolControlBar};this.getBasicToolItemsBar=()=>{return this.components.basicUIToolItemsBar};this.getDialog=()=>{return this.components.dialog};this.getButton=e=>{return this.components.buttons[e]};this.getColorItem=()=>{return this.components.colorItem};this.getCheckbox=()=>{return this.components.checkbox};this.getWindowContainer=()=>{return this.components.windowContainer};this.getSlider=()=>{return this.components.slider};const i={dialog:z.Dialog,colorItem:z.ColorItem,checkbox:z.Input.Checkbox,slider:z.Input.Slider,buttons:{mainCanvasActionUndo:we.Button.TextSecondary,mainCanvasActionRedo:we.Button.TextSecondary,mainCanvasActionExport:Ty,mainCanvasActionClose:cu,canvasActionEdit:we.Controls.SpriteActionButton,canvasActionBringToFront:we.Controls.SpriteActionButton,canvasActionDuplicate:we.Controls.SpriteActionButton,canvasActionDelete:we.Controls.SpriteActionButton,canvasActionInvert:we.Controls.SpriteActionButton,canvasActionFlip:we.Controls.SpriteActionButton,transformActionFlipHorizontal:La,transformActionFlipVertical:La,transformActionRotateClockwise:La,transformActionRotateAntiClockwise:La,textAlignment:La,toolControlBarPrimaryButton:wy,toolControlBarSecondaryButton:cu},windowContainer:cT};this.components=ri([i,t,e])}}});var kl,pYe,hf;var Yhe=p(()=>{kl=v(x("react"));L();B();de();lt();pYe=({modal:r,textTool:e,textDesignTool:t,custom:i})=>{const{type:o,identifier:n,isVisible:s,modalProps:a,positionOffset:l}=r;const{headerLabel:u,bodyLabel:c,confirmLabel:d,dismissLabel:m,handleClose:h,handleConfirm:f,handleDismiss:b}=a;const _=i.getDialog();if(o==="info"){return kl.default.createElement(z.InfoModal,{headerLabel:u,bodyLabel:c},kl.default.createElement(_,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,headerLabel:u,bodyLabel:c}))}if(o==="textEdit"){const{buttonSave:y,buttonClose:I}=e.locale.canvasControls;const T={type:o,isVisible:r.isVisible,confirmLabel:y,dismissLabel:I,headerLabel:e.locale.canvasControls.inputText};if(e.isTextSelected){return kl.default.createElement(z.TextEditModal,{...T,defaultText:Ee.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis},kl.default.createElement(_,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:y,dismissLabel:I,headerLabel:e.locale.canvasControls.inputText}))}if(t.isTextDesignSelected){return kl.default.createElement(z.TextEditModal,{...T,defaultText:$e.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis},kl.default.createElement(_,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:y,dismissLabel:I,headerLabel:e.locale.canvasControls.inputText}))}}return kl.default.createElement(z.ActionModal,{type:o,headerLabel:u,bodyLabel:c,confirmLabel:d,dismissLabel:m,handleClose:h,handleConfirm:f,handleDismiss:b},kl.default.createElement(_,{type:o,isVisible:s,identifier:n,position:l,confirmLabel:d,dismissLabel:m,headerLabel:u,bodyLabel:c,handleClose:h}))};hf=me("textTool","textDesignTool","modal","custom")(E(pYe))});var dT,Jhe,mYe,Zhe,q5;var Qhe=p(()=>{dT=v(x("react"));Jhe=v(x("styled-components"));de();W();mYe=(0,Jhe.default)(z.Input.Label)`
  padding: 0;
  padding-left: 4px;
`;Zhe=class extends dT.default.Component{constructor(e){super(e);this.onChange=e=>{this.setState({value:e.replace(/[^\d.,-]/g,""),isSubmitted:false})};this.onSubmit=()=>{const{getCorrectValue:e}=this.props;const{isSubmitted:t,value:i}=this.state;if(!t){this.setState({value:e(parseInt(i,10)||0).toString(),isSubmitted:true})}};this.state={isSubmitted:false,value:e.value.toString()}}componentDidUpdate(e){const{value:t}=this.props;if(e.value!==t){this.setState({value:t.toString()})}}render(){const{id:e,isDisabled:t,label:i,"aria-label":o}=this.props;const{value:n}=this.state;return dT.default.createElement(z.Input.Text,{id:e,"aria-label":o,value:n,isDisabled:t,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:WY(this.onSubmit)},dT.default.createElement(mYe,{label:i,htmlFor:e}))}};q5=Zhe});var bp,H5,hYe,fYe,gYe,yYe,bYe,t_;var efe=p(()=>{bp=v(x("react"));H5=v(x("styled-components"));de();Qhe();hYe=H5.default.div`
  display: grid;
  grid-template-columns: 1fr min-content 1fr;
  gap: 1rem;
  align-items: center;
  max-width: ${r=>r.theme.measurements.inputs.cropSize.maxWidth}px;
`;fYe=H5.default.span`
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.body.case};
  color: ${r=>r.theme.textInput.foreground};
`;gYe="photoeditorsdk-transformScaleWidth";yYe="photoeditorsdk-transformScaleHeight";bYe=({showLabel:r=true,label:e,isDisabled:t,valueHeight:i,valueWidth:o,labelWidth:n,labelHeight:s,ariaLabelWidth:a,ariaLabelHeight:l,onSubmitWidth:u,onSubmitHeight:c})=>{return bp.default.createElement("div",null,bp.default.createElement(z.Input.Label,{id:"photoeditorsdk-crop-size-label",label:e,show:r}),bp.default.createElement(hYe,{"aria-labelledby":"photoeditorsdk-crop-size-label"},bp.default.createElement(q5,{id:gYe,value:o,getCorrectValue:u,label:n,"aria-label":a,isDisabled:t}),bp.default.createElement(fYe,null,"x"),bp.default.createElement(q5,{id:yYe,value:i,getCorrectValue:c,label:s,"aria-label":l,isDisabled:t})))};t_=bYe});var ar=p(()=>{GC();sme();Pme();gA();$he();Xhe();Yhe();L5();efe()});var Dfe=C((Ktr,kfe)=>{"use strict";var FYe=false;var Efe=function(){};if(FYe){Ife=function r(e,t){var i=arguments.length;t=new Array(i>1?i-1:0);for(var o=1;o<i;o++){t[o-1]=arguments[o]}var n=0;var s="Warning: "+e.replace(/%s/g,function(){return t[n++]});if(typeof console!=="undefined"){console.error(s)}try{throw new Error(s)}catch(a){}};Efe=function(r,e,t){var i=arguments.length;t=new Array(i>2?i-2:0);for(var o=2;o<i;o++){t[o-2]=arguments[o]}if(e===void 0){throw new Error("`warning(condition, format, ...args)` requires a warning message argument")}if(!r){Ife.apply(null,[e].concat(t))}}}var Ife;kfe.exports=Efe});var Bfe=C((orr,Pfe)=>{"use strict";var LYe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Pfe.exports=LYe});var Ufe=C((nrr,zfe)=>{"use strict";var zYe=Bfe();function Mfe(){}function Lfe(){}Lfe.resetWarningCache=Mfe;zfe.exports=function(){function r(i,o,n,s,a,l){if(l===zYe){return}var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");u.name="Invariant Violation";throw u};r.isRequired=r;function e(){return r};var t={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Lfe,resetWarningCache:Mfe};t.PropTypes=t;return t}});var qfe=C((lrr,Nfe)=>{if(false){srr=null;arr=true;Nfe.exports=null(srr.isElement,arr)}else{Nfe.exports=Ufe()()}var srr;var arr});var Gr,Gfe,Q5,l_;var eL=p(()=>{Gr=v(x("react"));b0();Gfe=v(Om());L();B();de();K();W();cr();Q5=24;l_=E(function r(){const{active:e,modal:t,editor:i}=O();const o=(0,Gr.useRef)(null);const n=(0,Gr.useRef)(null);const[s,a]=(0,Gr.useState)(0);const[l,u]=(0,Gr.useState)(null);const[c,d]=(0,Gr.useState)(0);const[m,h]=(0,Gr.useState)(0);(0,Gr.useLayoutEffect)(()=>{const y=()=>{const{measurements:D}=i.configStore;const{height:P,width:k}=n.current.getBoundingClientRect();const A=P*.95;const Q=k*.95;const R=(P-A)/2;a(R<Q5+D.buttons.float.size?P-Q5*2-D.buttons.float.size/2:P-R+Q5);d(A);h(Q)};const I=new Uc((0,Gfe.default)(()=>y(),100,{trailing:true}));if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(D=>{o.current.srcObject=D}).catch(()=>{t.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{e.selectWebcam(false)}})})}else{t.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{e.selectWebcam(false)}})}y();I.observe(n.current);const T=document.createElement("canvas");u(T);return()=>{st(T);I.disconnect()}},[i,t,e]);const f=()=>{const y=o.current.srcObject;const I=y.getTracks();I.forEach(T=>{T.stop()});o.current.srcObject=null;e.selectWebcam(false)};const b=()=>{if(l){l.width=o.current.videoWidth;l.height=o.current.videoHeight;l.getContext("2d").drawImage(o.current,0,0);e.newImage(l.toDataURL("image/webp"));f()}};const _=e.webcamLabel;return Gr.default.createElement(we.Wrapper,{ref:n},Gr.default.createElement(we.Bar.Index,{transparentBackgound:true,style:{justifyContent:"flex-end"}},Gr.default.createElement(we.Bar.ButtonGroup,null,Gr.default.createElement(cu,{ariaLabel:_,onClick:f},_))),Gr.default.createElement(we.Webcam,{style:{height:c,width:m},autoPlay:true,ref:o}),Gr.default.createElement(we.Button.Float,{ariaLabel:"Click and Save",style:{top:s},onClick:b}))})});var Vfe,u_;var tL=p(()=>{Vfe=v(x("react"));W();cr();u_=({children:r})=>{return Vfe.default.createElement(we.Container,{"data-test":G.CanvasContainer},r)}});var _T,Fge;var Pge=p(()=>{_T=x("react");Fge=()=>{const[r,e]=(0,_T.useState)([]);(0,_T.useEffect)(()=>{var t;if(typeof window!==void 0&&((t=window.navigator)==null?void 0:t.mediaDevices)){let i=true;const o=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{if(i){e(n.map(({deviceId:s,groupId:a,kind:l,label:u})=>({deviceId:s,groupId:a,kind:l,label:u})))}}).catch(()=>null)};window.navigator.mediaDevices.addEventListener("devicechange",o);o();return()=>{i=false;window.navigator.mediaDevices.removeEventListener("devicechange",o)}}return null},[]);return r}});var Bge,vT;var Mge=p(()=>{Bge=v(x("react"));L();Pge();K();W();vT=E(({tool:r,fullWidth:e=false,icon:t,label:i,onClick:o})=>{const{custom:n}=O();const s=Fge();if(!s.some(({kind:l})=>l==="videoinput")){return null}const a=n.getButton("toolControlBarSecondaryButton");if(!a){return null}return Bge.default.createElement(a,{"data-test":G.LibraryWebcamButton,tool:r,label:i,ariaLabel:i,onClick:o,fullWidth:e,icon:t})})});var Lge=p(()=>{Mge()});var sL=p(()=>{Lge()});var jye,$ye;var Kye=p(()=>{jye=v(x("styled-components"));de();$ye=(0,jye.default)(go)`
  margin: 2px;
  min-width: ${r=>r.theme.measurements.basicCard.large.width}px;
  height: ${r=>r.theme.measurements.basicCard.large.height}px;
  color: ${r=>r.theme.card.foreground};
`});var Xye,Yye;var Jye=p(()=>{Xye=v(x("styled-components"));de();Yye=(0,Xye.default)(go)`
  margin: 2px;
  min-width: ${r=>r.theme.measurements.basicCard.medium.width}px;
  height: ${r=>r.theme.measurements.basicCard.medium.height}px;
  color: ${r=>r.theme.card.foreground};
`});var Zye,Qye;var ebe=p(()=>{Zye=v(x("react"));B();Kye();Jye();Qye=({type:r="medium",...e})=>{const t=r==="large";let i=Yye;if(t){i=$ye}return Zye.default.createElement(i,{type:r,...e})}});var tbe,rbe;var ibe=p(()=>{tbe=v(x("styled-components"));de();W();rbe=(0,tbe.default)(On).attrs(()=>({"data-test":G.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${r=>r.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`});var obe,nbe;var sbe=p(()=>{obe=v(x("styled-components"));de();nbe=(0,obe.default)(zt)`
  &&& {
    min-height: 32px;
    font-size: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${r=>r.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`});var abe=p(()=>{ebe();ibe();sbe()});var lbe,ube;var cbe=p(()=>{lbe=v(x("styled-components"));ube=lbe.default.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`});var I_,dbe,pbe;var mbe=p(()=>{I_=v(x("styled-components"));W();dbe=I_.default.div.attrs(()=>({"data-test":G.BasicToolControlBar}))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${r=>r.show?I_.css`
          max-height: 80px;
        `:I_.css`
          max-height: 0px;
        `}
`;pbe=dbe;dbe.defaultProps={show:true}});var ST,wT,hbe,iJe,fbe;var gbe=p(()=>{ST=v(x("react"));wT=v(x("styled-components"));co();hbe=wT.css`
  width: 100%;
`;iJe=wT.default.div`
  position: relative;

  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  align-self: flex-end;

  height: auto;
  box-shadow: ${r=>r.theme.toolControlBar.shadow};

  ${r=>r.smallContainer&&hbe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${hbe}
  }
`;fbe=({children:r,...e})=>{const{rect:t}=(0,ST.useContext)($t);return ST.default.createElement(iJe,{...e,smallContainer:!!t&&t.width<600},r)}});var E_,Op,ybe,oJe,bbe,nJe,_be;var vbe=p(()=>{E_=v(x("react"));Op=v(x("styled-components"));co();W();ybe=Op.css`
  padding: 0 1rem;
  height: unset;
  min-height: ${r=>r.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
`;oJe=Op.default.div`
  display: flex;
  box-sizing: border-box;
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 100%;
  height: ${r=>r.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.controlsBar};
  background: ${r=>r.theme.toolControlBar.background};
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  ${({show:r})=>r&&Op.css`
      transform: translateY(-100%) scaleY(1);
    `}

  ${r=>r.smallContainer&&ybe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${ybe}
  }
`;bbe=Op.css`
  gap: 0 0.5rem;
`;nJe=Op.default.div`
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;

  gap: 0 10vw;

  ${r=>r.smallContainer&&bbe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${bbe}
  }
`;_be=({children:r,...e})=>{const{rect:t}=(0,E_.useContext)($t);return E_.default.createElement(oJe,{...e,"data-test":G.ToolControlBarExpandableControls,smallContainer:!!t&&t.width<600},E_.default.createElement(nJe,{smallContainer:!!t&&t.width<600},r))}});var xbe,Cbe,sJe,aJe,Fl;var Sbe=p(()=>{xbe=v(x("react"));Cbe=v(x("styled-components"));sJe=Cbe.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;aJe=({label:r,className:e,children:t})=>xbe.default.createElement(sJe,{"aria-label":r,className:e},t);Fl=aJe});var TT,IT,wbe,lJe,Tbe;var Ibe=p(()=>{TT=v(x("react"));IT=v(x("styled-components"));de();co();wbe=IT.css`
  min-width: unset;
  height: unset;
  min-height: 40px;
`;lJe=IT.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${PQ.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;

  ${r=>r.smallContainer&&wbe}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${wbe}
  }
`;Tbe=({children:r,...e})=>{const{rect:t}=(0,TT.useContext)($t);return TT.default.createElement(lJe,{...e,smallContainer:!!t&&t.width<600},r)}});var fL,ET,Ebe,uJe,kT;var kbe=p(()=>{fL=v(x("react"));ET=v(x("styled-components"));ar();Ebe=ET.css`
  background: ${r=>r.theme.tabTitle.activeBackground};
  color: ${r=>r.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${r=>r.theme.tabTitle.activeBorderColor};
`;uJe=(0,ET.default)(Ds)`
  display: inline-flex;
  align-items: center;
  font-size: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${r=>r.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${r=>r.theme.tabTitle.background};

  ${({isActive:r})=>r&&Ebe}

  &:active {
    ${Ebe}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`;kT=class extends fL.default.Component{constructor(){super(...arguments);this.onClick=()=>{const{label:e,onClick:t}=this.props;t(e)}}render(){const{activeTab:e,label:t}=this.props;return fL.default.createElement(uJe,{ariaLabel:t,isActive:e===t,onClick:this.onClick},t)}}});var $r,Cf,cJe,dJe,Dbe,pJe,k_;var Obe=p(()=>{$r=v(x("react"));Cf=v(x("styled-components"));ar();de();co();Ibe();kbe();cJe=Cf.default.div``;dJe=(0,Cf.default)(Rn)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`;Dbe=Cf.css`
  left: 0;
  right: 0;
  transform: translateY(-120%);
  background: transparent;
  button {
    &:first-child {
      border-bottom-right-radius: 0;
      border-top-right-radius: 0;
    }
    &:last-child {
      border-bottom-left-radius: 0;
      border-top-left-radius: 0;
    }
    &:not(:first-child):not(:last-child) {
      border-radius: 0;
    }
  }
`;pJe=(0,Cf.default)(ky)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);

  ${r=>r.smallContainer&&Dbe}
  @media all and (min-width: 0) and (max-width: 499px) {
    ${Dbe}
  }
`;k_=({length:r,children:e})=>{const t=$r.default.Children.toArray(e);const i=$r.default.Children.count(e);const[o,n]=(0,$r.useState)((0,$r.isValidElement)(t[0])&&t[0].props.label||"");const[s,a]=(0,$r.useState)(false);const{rect:l}=(0,$r.useContext)($t);const u=f=>{n(f);a(false)};const c=()=>{a(f=>!f)};const d=()=>{const f=t.slice(r,i);return $r.default.createElement(pJe,{show:s,smallContainer:!!l&&l.width<500},f.map(b=>{const _=b.props.label||"";return $r.default.createElement(Ds,{onClick:()=>u(_),key:_,ariaLabel:"More Options"},_)}))};const m=t.slice(0,r);const h=i>r;return $r.default.createElement(cJe,null,m.map(f=>{if(f){const b=f.props.label||"";return $r.default.createElement(kT,{activeTab:o,key:b,label:b,onClick:u})}return null}),h&&$r.default.createElement(dJe,{onClick:c,ariaLabel:"Select Next"},"..."),s&&d(),$r.default.Children.map(e,f=>{if(!f||f.props&&f.props.label!==o){return null}return $r.default.createElement(Tbe,{key:f.props.label},f.props.children)}))}});var DT=p(()=>{Sbe();Obe()});var Yn,Abe,Fbe,Rbe,mJe,Pbe;var Bbe=p(()=>{Yn=v(x("react"));Abe=v(Om());Fbe=v(x("styled-components"));co();DT();Rbe=100;mJe=Fbe.default.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  flex-direction: column;
  transition: all 0.2s linear;
`;Pbe=({children:r})=>{const[e,t]=(0,Yn.useState)(Yn.default.Children.count(r));const{rect:i}=(0,Yn.useContext)($t);(0,Yn.useEffect)(()=>{window.addEventListener("resize",o);o();return()=>{window.removeEventListener("resize",o)}},[i]);const o=(0,Abe.default)(()=>{const n=(i==null?void 0:i.width)||0;const s=Yn.default.Children.count(r);const a=n-32-64-s*Rbe;if(a<0){const l=Math.round(Math.abs(a/Rbe));t(s-l)}else{t(s)}},100);if(!e){return null}return Yn.default.createElement(mJe,null,Yn.default.createElement(k_,{length:e},r))}});var OT,hJe,Mbe;var Lbe=p(()=>{OT=v(x("styled-components"));hJe=OT.default.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${r=>r.full?OT.css`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${r=>r.theme.toolControlBar.separatorColor};
  }
`;Mbe=hJe});var D_,RT,zbe,fJe,Ube;var Nbe=p(()=>{D_=v(x("react"));RT=v(x("styled-components"));co();K();zbe=RT.css`
  width: 100%;
`;fJe=RT.default.div`
  display: flex;
  justify-content: center;
  width: 100%;

  > div {
    position: relative;
    width: 224px;

    ${r=>r.smallContainer&&zbe}
    @media all and (min-width: 0) and (max-width: 599px) {
      ${zbe}
    }
  }
`;Ube=({children:r,...e})=>{const{custom:t}=O();const{rect:i}=(0,D_.useContext)($t);const o=t.getSlider();if(!o){return null}return D_.default.createElement(fJe,{smallContainer:!!i&&i.width<600},D_.default.createElement(o,{centerSlider:true,...e},r))}});var AT,gJe,qbe;var Hbe=p(()=>{AT=v(x("styled-components"));W();gJe=AT.default.div.attrs(()=>({"data-test":G.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:r})=>r&&AT.css`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`;qbe=gJe});var O_,gL;var Wbe=p(()=>{O_=v(x("styled-components"));W();gL=O_.default.div.attrs(()=>({"data-test":G.ToolControlBar}))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${r=>r.theme.measurements.zIndex.toolControlBar};

  ${r=>r.show?O_.css`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${r.theme.toolControlBar.background};
          color: ${r.theme.toolControlBar.inputLabelForeground};
        `:O_.css`
          max-height: 0px;
        `}
`;gL.defaultProps={show:true}});var Gbe,yJe,Vbe;var jbe=p(()=>{Gbe=v(x("styled-components"));yJe=Gbe.default.div`
  height: ${r=>r.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${r=>r.theme.toolControlBar.separatorColor};
  }
`;Vbe=yJe});var Pl,Kbe,$be,FT,Xbe,PT;var yL=p(()=>{Pl=v(x("styled-components"));de();Kbe=Pl.default.span`
  display: flex;
  cursor: pointer;
  z-index: ${r=>r.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${r=>r.theme.toolbar.foreground};
  letter-spacing: ${r=>r.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${r=>r.theme.measurements.fontSystem.body.size}px;

  ${({isActive:r})=>r&&Pl.css`
      color: ${e=>e.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${r=>r.theme.toolbar.activeForeground};
  }
`;$be=Pl.css`
  background-color: ${r=>r.theme.toolbar.activeBackground};
  color: ${r=>r.theme.toolbar.activeForeground};

  svg {
    color: ${r=>r.theme.toolbar.activeForeground};
  }
`;FT=(0,Pl.default)(Nr)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${r=>r.theme.toolbar.foreground};
  background-color: ${r=>r.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  ${({isActive:r})=>r&&$be}
  ${({isDisabled:r})=>r&&Pl.css`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${e=>e.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${$be}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`;Xbe=Pl.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${r=>r.theme.toolbar.foreground};
  }
`;PT=Pl.default.div.attrs({role:"none"})`
  display: flex;
  height: ${r=>r.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`});var bL,R_,bJe,Ybe;var Jbe=p(()=>{bL=v(x("react"));R_=v(x("styled-components"));de();W();yL();bJe=R_.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${r=>r.theme.toolbar.background};
  color: ${r=>r.theme.toolbar.foreground};
  z-index: ${r=>r.theme.measurements.zIndex.toolbar};

  ${r=>r.show?R_.css`
          height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
          ${FT} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${PT} {
            height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:R_.css`
          height: ${r.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`;Ybe=({show:r=false,className:e,style:t,children:i})=>bL.default.createElement(bJe,{"data-test":G.Toolbar,show:r,className:e,style:t},bL.default.createElement(On,null,i))});var A_,Zbe;var Qbe=p(()=>{A_=v(x("react"));W();yL();Zbe=({children:r,label:e,isActive:t,isDisabled:i,onClick:o})=>A_.default.createElement(PT,{"aria-haspopup":true,"aria-expanded":t},A_.default.createElement(FT,{"data-test":G.ToolbarItem,ariaLabel:e,onClick:o,isActive:t,isDisabled:i},A_.default.createElement(Xbe,null,r,A_.default.createElement(Kbe,{isActive:t},e))))});var F_,_Je,e_e;var t_e=p(()=>{F_=v(x("styled-components"));_Je=F_.default.li.attrs({role:"none"})`
  ${r=>!r.active?F_.css`
          height: ${r.theme.measurements.basicUIToolbar.openHeight}px;
        `:F_.css`
          height: ${r.theme.measurements.basicUIToolbar.closeHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${r=>r.theme.toolControlBar.separatorColor};
  }
`;e_e=_Je});var N;var ut=p(()=>{de();abe();cbe();mbe();gbe();vbe();Bbe();Lbe();Nbe();DT();Hbe();Wbe();jbe();Jbe();Qbe();t_e();N={CardContainer:rbe,ExpandableContainer:qbe,CategoryContainer:ube,Card:Qye,CardAvatar:Xc,CardLabel:nbe,Toolbar:{Index:Ybe,Item:Zbe,Separator:e_e},BarSeparator:Mbe,ItemsSeparator:Vbe,Itemsbar:gL,Controlsbar:pbe,ControlsbarContainer:_be,ResponsiveTabWrapper:Pbe,Slider:Ube,TabWrapper:k_,Tab:Fl,Other:{ControlsWrapper:fbe}}});var Sf,r_e;var i_e=p(()=>{Sf=v(x("react"));L();B();K();Ut();ut();r_e=E(function r(){const{config:e,active:t,custom:i}=O();const{tools:o}=e;const n=t.tool;const s=c=>{const d=e.state.config[c];if("icon"in d){const h=d.icon;return Sf.default.createElement(h,null)}const m=$C[c];return Sf.default.createElement(m,null)||null};const a=c=>{return e.locale[c].title};const l=(c,d)=>c&&Sf.default.createElement(N.Toolbar.Item,{onClick:()=>t.selectTool(c),key:c,label:a(c),isActive:n===c,isDisabled:!(t.image||c==="library"||c==="customTool")},s(c))||Sf.default.createElement(N.Toolbar.Separator,{key:c+d,active:!!n});const u=i.getBasicToolbar();if(!u){return null}return Sf.default.createElement(u,{show:!!n},o.map(l))})});var sa,o_e,vJe,xJe,n_e;var s_e=p(()=>{sa=v(x("react"));L();o_e=v(x("styled-components"));B();de();Ut();ut();vJe=(0,o_e.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;xJe=({adjustmentsTool:r,custom:e})=>{const t=r.selectedAdjustmentType.toLowerCase();const i=r[t];const o=e.getButton("toolControlBarSecondaryButton");return sa.default.createElement(vJe,{show:Boolean(t)},o&&sa.default.createElement("div",null,sa.default.createElement(o,{tool:"adjustment",ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:sa.default.createElement(Kt.reset,null),label:r.locale.controls.buttonReset})),sa.default.createElement(N.Other.ControlsWrapper,null,sa.default.createElement(z.Spacer,{count:2}),sa.default.createElement(N.Slider,{identifier:r.selectedAdjustmentType,tool:"adjustment","aria-hidden":!t,adjust:true,label:r.selectedOptionLabel,value:i,onChange:n=>{r.editAdjustments({type:t,value:n})},onMouseUp:()=>r.toolSnapshot(),onTouchEnd:()=>r.toolSnapshot(),snap:0}),sa.default.createElement(z.Spacer,{count:2})),sa.default.createElement(N.BarSeparator,null))};n_e=me("adjustmentsTool","custom")(E(xJe))});var P_,a_e;var l_e=p(()=>{P_=v(x("react"));L();B();ar();de();K();a_e=E(()=>{const{brushTool:r}=O();const{colorList:e,locale:t,localeColor:i}=r;const o=t.controls;const n=i.colorPicker;return P_.default.createElement(P_.default.Fragment,null,P_.default.createElement(z.Input.Selection,{showLabel:false,label:o.selectColor},P_.default.createElement(Wt,{tool:"brush",activeColor:r.color,colors:e,labelsColor:n,colorPickerDirection:"top",onChange:r.changeColor})))})});var u_e=p(()=>{l_e()});var c_e,d_e;var p_e=p(()=>{c_e=v(x("react"));L();B();K();W();ut();d_e=E(()=>{const{brushTool:r}=O();const{locale:e}=r;const t=e.controls;return c_e.default.createElement(N.Slider,{identifier:"brush-hardness",tool:"brush","data-test":G.BrushHardness,showLabel:false,label:t.sliderHardness,value:r.hardness,min:0,max:1,onChange:r.changeHardness})})});var m_e=p(()=>{p_e()});var h_e,f_e;var g_e=p(()=>{h_e=v(x("react"));L();B();K();W();ut();f_e=E(()=>{const{brushTool:r}=O();const{locale:e}=r;const t=e.controls;return h_e.default.createElement(N.Slider,{identifier:"brush-size",tool:"brush","data-test":G.BrushSize,showLabel:false,label:t.sliderSize,value:r.relativeSize,min:1,max:100,divider:1,onChange:r.changeRelativeSize})})});var y_e=p(()=>{g_e()});var Qi,b_e,CJe,_L,SJe,__e;var v_e=p(()=>{Qi=v(x("react"));L();b_e=v(x("styled-components"));B();de();K();Ut();ut();u_e();m_e();y_e();CJe=N.ResponsiveTabWrapper;({Tab:_L}=N);SJe=(0,b_e.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;__e=E(()=>{const{brushTool:r,custom:e}=O();const{locale:t,config:i}=r;const{basicUIToolControlBarTabsOrder:o}=i;const n=t.controls;const s=e.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"brushColor":return Qi.default.createElement(_L,{key:l,label:n.tabColor},Qi.default.createElement(a_e,null));case"brushSize":return Qi.default.createElement(_L,{key:l,label:n.tabSize},Qi.default.createElement(f_e,null));case"brushHardness":return Qi.default.createElement(_L,{key:l,label:n.tabHardness},Qi.default.createElement(d_e,null));default:return null}};return Qi.default.createElement(SJe,{style:{justifyContent:"center"},show:true},s&&Qi.default.createElement("div",null,Qi.default.createElement(s,{tool:"brush",ariaLabel:n.buttonReset,onClick:r.reset,icon:Qi.default.createElement(Kt.reset,null),isDisabled:!r.isDirty,label:n.buttonReset})),Qi.default.createElement(N.Other.ControlsWrapper,null,Qi.default.createElement(z.Input.Form,null,Qi.default.createElement(CJe,null,o.map(l=>a(l))))))})});var B_,x_e;var C_e=p(()=>{B_=v(x("react"));L();B();de();K();ut();x_e=E(()=>{const{filterTool:r}=O();const{state:e}=r;const t=r.locale.controls;const i=()=>{r.toolSnapshot()};return B_.default.createElement(N.Other.ControlsWrapper,null,B_.default.createElement(z.Spacer,{count:2}),B_.default.createElement(N.Slider,{identifier:"filter-intensity",tool:"filter","aria-hidden":!r.isOptionSelected,label:t.sliderIntensity,value:e.intensity,min:0,max:1,onMouseUp:i,onTouchEnd:i,onChange:r.changeIntensity,snap:e.isDuotone?.5:null}),B_.default.createElement(z.Spacer,{count:2}))})});var S_e=p(()=>{C_e()});var Rp,w_e,wJe,T_e;var I_e=p(()=>{Rp=v(x("react"));L();w_e=v(x("styled-components"));B();K();Ut();ut();S_e();wJe=(0,w_e.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;T_e=E(()=>{const{filterTool:r,custom:e}=O();const{config:t}=r;const{basicUIToolControlBarTabsOrder:i}=t;const o=e.getButton("toolControlBarSecondaryButton");const n=s=>{switch(s){case"filterIntensity":return Rp.default.createElement(x_e,{key:s});default:return null}};return Rp.default.createElement(wJe,{show:r.isOptionSelected},o&&Rp.default.createElement("div",null,Rp.default.createElement(o,{tool:"filter",ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:Rp.default.createElement(Kt.reset,null),label:r.locale.controls.buttonReset})),i.map(s=>n(s)),Rp.default.createElement(N.BarSeparator,null))})});var aa,E_e,TJe,k_e;var D_e=p(()=>{aa=v(x("react"));L();E_e=v(x("styled-components"));B();de();K();Ut();ut();TJe=(0,E_e.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;k_e=E(()=>{const{focusTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.toolSnapshot(t.sliderIntensity)};return aa.default.createElement(TJe,{show:r.isOptionSelected},i&&aa.default.createElement("div",null,aa.default.createElement(i,{tool:"focus",ariaLabel:t.buttonReset,onClick:r.reset,icon:aa.default.createElement(Kt.reset,null),label:t.buttonReset})),aa.default.createElement(N.Other.ControlsWrapper,null,aa.default.createElement(z.Spacer,{count:2}),aa.default.createElement(N.Slider,{identifier:"focus-intensity",tool:"focus","aria-hidden":!r.isOptionSelected,label:t.sliderIntensity,value:r.relativeIntensity,min:0,max:100,divider:1,onChange:r.changeRelativeIntensity,onMouseUp:o,onTouchEnd:o}),aa.default.createElement(z.Spacer,{count:2})),aa.default.createElement(N.BarSeparator,null))})});var vL,O_e;var R_e=p(()=>{vL=v(x("react"));L();B();ar();de();K();O_e=E(()=>{const{frameTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{colorList:i}=r;return vL.default.createElement(z.Input.Selection,{label:e.selectColor,showLabel:false},vL.default.createElement(Wt,{tool:"frame",activeColor:r.color,colors:i,labelsColor:t,colorPickerDirection:"top",onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))})});var A_e=p(()=>{R_e()});var F_e,P_e;var B_e=p(()=>{F_e=v(x("react"));L();B();K();ut();P_e=E(()=>{const{frameTool:r}=O();const e=r.locale.controls;const t=()=>{r.toolSnapshot(e.sliderOpacity)};return F_e.default.createElement(N.Slider,{identifier:"frame-opacity",tool:"frame","aria-hidden":!r.isOptionSelected,showLabel:false,label:e.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:t,onTouchEnd:t})})});var M_e=p(()=>{B_e()});var L_e,z_e;var U_e=p(()=>{L_e=v(x("react"));L();B();K();ut();z_e=E(()=>{const{frameTool:r}=O();const e=r.locale.controls;const t=()=>{r.toolSnapshot(e.sliderSize)};return L_e.default.createElement(N.Slider,{identifier:"frame-size",tool:"frame","aria-hidden":!r.isOptionSelected,showLabel:false,label:e.sliderSize,value:r.size,min:r.minSize,max:r.maxSize,divider:1,onChange:r.changeWidth,onMouseUp:t,onTouchEnd:t})})});var N_e=p(()=>{U_e()});var eo,q_e,IJe,xL,EJe,H_e;var W_e=p(()=>{eo=v(x("react"));L();q_e=v(x("styled-components"));B();K();Ut();ut();A_e();M_e();N_e();IJe=N.TabWrapper;({Tab:xL}=N);EJe=(0,q_e.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;H_e=E(()=>{const{frameTool:r,custom:e}=O();const t=r.locale.controls;const{tintable:i,config:o}=r;const{basicUIToolControlBarTabsOrder:n}=o;const s=e.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"frameOpacity":return eo.default.createElement(xL,{key:l,label:t.tabOpacity},eo.default.createElement(P_e,null));case"frameSize":return eo.default.createElement(xL,{key:l,label:t.tabSize},eo.default.createElement(z_e,null));case"frameColor":return i&&eo.default.createElement(xL,{key:l,label:t.tabColor},eo.default.createElement(O_e,null));default:return null}};return eo.default.createElement(EJe,{show:r.isOptionSelected},s&&eo.default.createElement("div",null,eo.default.createElement(s,{tool:"frame",ariaLabel:t.buttonReset,onClick:r.reset,icon:eo.default.createElement(Kt.reset,null),label:t.buttonReset})),eo.default.createElement(N.Other.ControlsWrapper,null,eo.default.createElement(IJe,null,n.map(l=>a(l)))),eo.default.createElement(N.BarSeparator,null))})});var cn,M_,kJe,DJe,OJe,G_e;var V_e=p(()=>{cn=v(x("react"));L();M_=v(x("styled-components"));B();de();Ut();W();sL();ut();kJe=(0,M_.default)(N.ControlsbarContainer)`
  ${r=>r.firstChildMargin&&M_.css`
      > :first-child {
        margin-right: 16px;
      }
    `}
`;DJe=(0,M_.default)(N.Other.ControlsWrapper)`
  grid-column-start: 2;
  align-self: center;
`;OJe=({library:r,active:e,custom:t})=>{const i=r.locale.controls.placeholderSearch;const{config:o}=r;const n=t.getButton("toolControlBarPrimaryButton");const s=c=>{r.fetchImages(c)};const a=c=>{const{files:d}=c.target;if(d.length){const m=new FileReader;m.onload=h=>{e.newImage(h.target.result)};m.readAsDataURL(d[0])}};const l=()=>{e.selectWebcam(true)};const u=()=>{const c=document.getElementById("fileUpload");if(c){c.click()}};return cn.default.createElement(kJe,{firstChildMargin:o.enableWebcam&&!r.libraryProvider,show:true},o.enableUpload&&n&&cn.default.createElement("div",null,cn.default.createElement(n,{tool:"library","data-test":G.LibraryUploadButton,ariaLabel:r.locale.controls.buttonUpload,onClick:u,icon:cn.default.createElement(Kt.uploadImage,null),label:r.locale.controls.buttonUpload},cn.default.createElement(z.Input.File,{onChange:a}))),r.libraryProvider&&cn.default.createElement(DJe,null,cn.default.createElement(z.Input.Search,{onChange:s,placeholder:i})),o.enableWebcam&&cn.default.createElement("div",null,cn.default.createElement(vT,{tool:"library",onClick:l,icon:cn.default.createElement(Kt.openWebcam,null),label:r.locale.controls.buttonWebcamOpen})),cn.default.createElement(N.BarSeparator,null))};G_e=me("library","active","custom")(E(OJe))});var j_e,$_e;var K_e=p(()=>{j_e=v(x("react"));L();de();K();$_e=E(()=>{const{overlayTool:r}=O();const e=r.locale.controls;const{blendMode:t,allBlendModes:i}=r;const o=n=>{r.changeBlendMode(n)};return j_e.default.createElement(z.Input.CarouselSlider,{showLabel:false,label:e.carouselBlendMode,defaultIdentifier:t,onSelect:o,list:i})})});var X_e=p(()=>{K_e()});var Y_e,J_e;var Z_e=p(()=>{Y_e=v(x("react"));L();B();K();ut();J_e=E(()=>{const{overlayTool:r}=O();const e=r.locale.controls;const{state:t}=r;const i=()=>{r.toolSnapshot()};return Y_e.default.createElement(N.Slider,{identifier:"overlay-opacity",tool:"overlay","aria-hidden":!r.isOptionSelected,showLabel:false,label:e.sliderOpacity,value:t.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:i,onTouchEnd:i})})});var Q_e=p(()=>{Z_e()});var dn,RJe,eve,tve;var rve=p(()=>{dn=v(x("react"));L();B();K();Ut();ut();X_e();Q_e();RJe=N.TabWrapper;({Tab:eve}=N);tve=E(()=>{const{overlayTool:r,custom:e}=O();const{config:t}=r;const{basicUIToolControlBarTabsOrder:i}=t;const o=r.locale.controls;const n=e.getButton("toolControlBarSecondaryButton");const s=a=>{switch(a){case"overlayBlendMode":return dn.default.createElement(eve,{key:a,label:o.tabBlendMode},dn.default.createElement($_e,null));case"overlayOpacity":return dn.default.createElement(eve,{key:a,label:o.tabOpacity},dn.default.createElement(J_e,null));default:return null}};return dn.default.createElement(N.ControlsbarContainer,{show:r.isOptionSelected},n&&dn.default.createElement("div",null,dn.default.createElement(n,{tool:"overlay",ariaLabel:o.buttonReset,onClick:r.reset,icon:dn.default.createElement(Kt.reset,null),label:o.buttonReset})),dn.default.createElement(N.Other.ControlsWrapper,null,dn.default.createElement(RJe,null,i.map(a=>s(a)))),dn.default.createElement(N.BarSeparator,null))})});var L_,ive;var ove=p(()=>{L_=v(x("react"));L();B();ar();de();K();ive=E(()=>{const{stickerTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{colorList:i}=r;return L_.default.createElement(L_.default.Fragment,null,L_.default.createElement(z.Input.Selection,{isDisabled:!r.isStickerSelected,showLabel:false,label:e.selectColor},L_.default.createElement(Wt,{tool:"sticker",activeSprite:r.id,activeColor:r.tintColor,colors:i,labelsColor:t,isDisabled:!r.isStickerSelected,colorPickerDirection:"top",onChange:r.changeTintColor,onAddSnapshot:r.tintColorSnapshot})))})});var nve=p(()=>{ove()});var sve,ave;var lve=p(()=>{sve=v(x("react"));L();B();K();ut();ave=E(()=>{const{stickerTool:r}=O();const e=r.locale.controls;const t=()=>{r.toolSnapshot()};return sve.default.createElement(N.Slider,{identifier:"sticker-opacity",tool:"sticker",isDisabled:!r.isStickerSelected,showLabel:false,label:e.sliderOpacity,value:r.opacity,min:0,max:1,onMouseUp:t,onTouchEnd:t,onChange:r.changeOpacity})})});var uve=p(()=>{lve()});var Bo,CL,AJe,cve,FJe,PJe,dve;var pve=p(()=>{Bo=v(x("react"));L();CL=v(x("styled-components"));B();de();K();Ut();ut();nve();uve();AJe=N.TabWrapper;({Tab:cve}=N);FJe=CL.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:true})`
  ${HC.VisuallyHidden}
`;PJe=(0,CL.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;dve=E(()=>{const{stickerTool:r,custom:e}=O();const{config:t}=r;const{basicUIToolControlBarTabsOrder:i}=t;const o=r.locale.controls;const n=e.getButton("toolControlBarPrimaryButton");const s=()=>{const c=document.getElementById("fileUpload");if(c){c.value=null;c.click()}};const a=c=>{const{files:d}=c.target;r.addFiles(d)};const l=c=>{switch(c){case"stickerColor":if(!r.tintable)return null;return Bo.default.createElement(cve,{key:c,label:o.tabColor},Bo.default.createElement(ive,null));case"stickerOpacity":return Bo.default.createElement(cve,{key:c,label:o.tabOpacity},Bo.default.createElement(ave,null));default:return null}};const u=()=>{if(r.isCustomStickerEnabled&&n){return Bo.default.createElement("div",null,Bo.default.createElement(n,{tool:"sticker",ariaLabel:o.buttonUpload,onClick:s,icon:Bo.default.createElement(Kt.uploadImage,null),label:o.buttonUpload},Bo.default.createElement(FJe,{onChange:a})))}return null};return Bo.default.createElement(PJe,{show:true},u(),Bo.default.createElement(N.Other.ControlsWrapper,null,Bo.default.createElement(AJe,null,i.map(c=>l(c)))),Bo.default.createElement(N.BarSeparator,null))})});var SL,mve;var hve=p(()=>{SL=v(x("react"));L();B();ar();de();K();mve=E(()=>{const{textTool:r}=O();const{backgroundColorList:e}=r;const t=r.locale.controls;const i=r.localeColor.colorPicker;return SL.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:false,label:t.selectBackgroundColor},SL.default.createElement(Wt,{tool:"text",activeSprite:r.id,activeColor:r.backgroundColor,colors:e,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextSelected,onChange:r.changeBackgroundColor,onAddSnapshot:r.backgroundColorSnapshot}))})});var fve=p(()=>{hve()});var gve,yve,BJe,bve;var _ve=p(()=>{gve=v(x("react"));L();yve=v(x("styled-components"));de();K();BJe=(0,yve.default)(z.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`;bve=E(()=>{var i;const{textTool:r}=O();const{locale:e}=r;const t=o=>{const n=o?parseFloat(o):0;r.setFontSize(Math.max(10,Math.min(690,n)))};return gve.default.createElement(BJe,{id:"photoeditorsdk-text-font-size-input",value:r.fontSize.toFixed(0),onSubmit:t,isDisabled:!r.isTextSelected,label:(i=e.controls)==null?void 0:i.textFontSize,showLabel:false})})});var vve=p(()=>{_ve()});var xve,Cve;var Sve=p(()=>{xve=v(x("react"));L();B();K();ut();Cve=E(()=>{const{textTool:r}=O();const e=r.locale.controls;const t=()=>{r.toolSnapshot()};return xve.default.createElement(N.Slider,{identifier:"text-line-spacing",tool:"text",isDisabled:!r.isTextSelected,showLabel:false,label:e.sliderLineSpacing,value:r.lineHeight,min:.5,max:3,onChange:r.changeLineHeight,onMouseUp:t,onTouchEnd:t,snap:1,divider:1,decimal:1})})});var wve=p(()=>{Sve()});var BT,Tve;var Ive=p(()=>{BT=v(x("react"));L();de();K();Ut();W();Tve=E(()=>{const{textTool:r,custom:e}=O();const t=r.locale.controls;const i=["left","center","right"];const o=e.getButton("textAlignment");return BT.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:false,label:t.selectAlignment,"data-test":G.TextAlignment},i.map(n=>{const s=KC[n];return BT.default.createElement(o,{tool:n,isDisabled:!r.isTextSelected,ariaLabel:`Align ${n}`,isActive:n===r.alignment,key:n,icon:BT.default.createElement(s,null),onClick:()=>r.changeAlignment(n)})}))})});var Eve=p(()=>{Ive()});var wL,kve;var Dve=p(()=>{wL=v(x("react"));L();B();ar();de();K();kve=E(()=>{const{textTool:r}=O();const{colorList:e}=r;const t=r.locale.controls;const i=r.localeColor.colorPicker;return wL.default.createElement(z.Input.Selection,{isDisabled:!r.isTextSelected,showLabel:false,label:t.selectFontColor},wL.default.createElement(Wt,{tool:"text",activeSprite:r.id,activeColor:r.textColor,colors:e,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextSelected,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))})});var Ove=p(()=>{Dve()});var Mr,Rve,MJe,LJe,Ave;var Fve=p(()=>{Mr=v(x("react"));L();Rve=v(x("styled-components"));B();K();Ut();ut();DT();fve();vve();wve();Eve();Ove();MJe=N.ResponsiveTabWrapper;LJe=(0,Rve.default)(N.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;Ave=E(()=>{const{textTool:r,custom:e}=O();const{config:t}=r;const{basicUIToolControlBarTabsOrder:i}=t;const o=r.locale.controls;const n=e.getButton("toolControlBarPrimaryButton");const s=a=>{switch(a){case"fontSize":return Mr.default.createElement(Fl,{key:a,label:o.tabFontSize},Mr.default.createElement(bve,null));case"textAlignment":return Mr.default.createElement(Fl,{key:a,label:o.tabAlignment},Mr.default.createElement(Tve,null));case"textColor":return Mr.default.createElement(Fl,{key:a,label:o.tabColor},Mr.default.createElement(kve,null));case"backgroundColor":return Mr.default.createElement(Fl,{key:a,label:o.tabBgColor},Mr.default.createElement(mve,null));case"lineSpacing":return Mr.default.createElement(Fl,{key:a,label:o.tabLineHeight},Mr.default.createElement(Cve,null));default:return null}};return Mr.default.createElement(LJe,{show:true},Mr.default.createElement("div",null,Mr.default.createElement(n,{tool:"text",ariaLabel:o.buttonNew,onClick:r.add,icon:Mr.default.createElement(Kt.addText,null),label:o.buttonNew})),Mr.default.createElement(N.Other.ControlsWrapper,null,Mr.default.createElement(MJe,null,i.map(a=>s(a)))),Mr.default.createElement(N.BarSeparator,null))})});var pn,Pve,zJe,UJe,Bve;var Mve=p(()=>{pn=v(x("react"));L();Pve=v(x("styled-components"));B();ar();de();Ut();ut();zJe=(0,Pve.default)(Wt)`
  height: 40px;
`;UJe=({textDesignTool:r,custom:e})=>{const t=r.locale.controls;const i=r.localeColor.colorPicker;const{colorList:o}=r;const n=e.getButton("toolControlBarSecondaryButton");const s=e.getButton("toolControlBarPrimaryButton");return pn.default.createElement(N.ControlsbarContainer,{show:true},s&&pn.default.createElement("div",null,pn.default.createElement(s,{tool:"textdesign",ariaLabel:t.buttonNew,onClick:r.add,icon:pn.default.createElement(Kt.addText,null),label:t.buttonNew})),pn.default.createElement(N.Other.ControlsWrapper,null,pn.default.createElement(z.Input.Selection,{isDisabled:!r.isTextDesignSelected,label:t.selectColor},pn.default.createElement(zJe,{tool:"textdesign",activeSprite:r.id,activeColor:r.color,colors:o,labelsColor:i,colorPickerDirection:"top",isDisabled:!r.isTextDesignSelected,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))),n&&pn.default.createElement("div",null,pn.default.createElement(n,{tool:"textdesign",ariaLabel:t.buttonShuffle,onClick:r.changeSeed,icon:pn.default.createElement(Kt.shuffle,null),label:t.buttonShuffle})),pn.default.createElement(N.BarSeparator,null))};Bve=me("textDesignTool","custom")(E(UJe))});var Lve,zve;var Uve=p(()=>{Lve=v(x("react"));L();ar();K();zve=E(()=>{const{transformTool:r}=O();const e=r.locale.controls;const{forceDimensions:t}=r;return Lve.default.createElement(t_,{isDisabled:t,showLabel:false,valueHeight:r.localOutputHeight,valueWidth:r.localOutputWidth,onSubmitWidth:r.onPixelWidth,onSubmitHeight:r.onPixelHeight,label:e.inputCropSize,labelHeight:e.inputHeight,labelWidth:e.inputWidth,ariaLabelHeight:e.inputHeightAriaLabel,ariaLabelWidth:e.inputWidthAriaLabel})})});var Nve=p(()=>{Uve()});var qve,Hve;var Wve=p(()=>{qve=v(x("react"));ar();Hve=()=>qve.default.createElement(e_,null)});var Gve=p(()=>{Wve()});var Vve,jve;var $ve=p(()=>{Vve=v(x("react"));L();B();K();jve=E(()=>{const{transformTool:r,custom:e}=O();const t=r.locale.controls;const{forceDimensions:i}=r;const o=e.getCheckbox();if(!o){return null}return Vve.default.createElement(o,{tool:"transform",isDisabled:i,style:{paddingTop:"5px",justifyContent:"center"},value:r.lockResolution,checkMarkPosition:"left",label:t.checkboxKeepResolution,onClick:r.changeLockResolution})})});var Kve=p(()=>{$ve()});var li,MT,NJe,TL,Xve,qJe,Yve;var Jve=p(()=>{li=v(x("react"));L();MT=v(x("styled-components"));B();co();K();Ut();ut();Nve();Gve();Kve();NJe=N.ResponsiveTabWrapper;({Tab:TL}=N);Xve=MT.css`
  min-width: unset;
`;qJe=(0,MT.default)(N.Other.ControlsWrapper)`
  min-width: 365px;

  ${r=>r.smallContainer&&Xve}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${Xve}
  }
`;Yve=E(()=>{const{transformTool:r,custom:e}=O();const{rect:t}=(0,li.useContext)($t);const{config:i}=r;const{basicUIToolControlBarTabsOrder:o}=i;const n=r.locale.controls;const s=e.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"flipRotate":return li.default.createElement(TL,{key:l,label:n.tabFlipAndRotate},li.default.createElement(Hve,null));case"resolution":return li.default.createElement(TL,{key:l,label:n.tabResolution},li.default.createElement(jve,null));case"cropSize":return li.default.createElement(TL,{key:l,label:n.tabCropSize},li.default.createElement(zve,null));default:return null}};return li.default.createElement(N.ControlsbarContainer,{show:true},s&&li.default.createElement("div",null,li.default.createElement(s,{tool:"transform",ariaLabel:r.locale.controls.buttonReset,onClick:r.reset,icon:li.default.createElement(Kt.reset,null),label:r.locale.controls.buttonReset})),li.default.createElement(qJe,{smallContainer:!!t&&t.width<600},li.default.createElement(NJe,null,o.map(l=>a(l)))),li.default.createElement(N.BarSeparator,null))})});var Gt,Zve;var Qve=p(()=>{Gt=v(x("react"));L();B();de();K();s_e();v_e();I_e();D_e();W_e();V_e();rve();pve();Fve();Mve();Jve();Zve=E(function r(){const{active:e,custom:t}=O();const i=e.tool;const o=t.getBasicToolControlBar();if(!o){return null}return Gt.default.createElement(o,{show:!!i,tool:i},Gt.default.createElement(z.Switch.Index,{type:i},Gt.default.createElement(z.Switch.Case,{value:"filter"},Gt.default.createElement(T_e,null)),Gt.default.createElement(z.Switch.Case,{value:"focus"},Gt.default.createElement(k_e,null)),Gt.default.createElement(z.Switch.Case,{value:"adjustment"},Gt.default.createElement(n_e,null)),Gt.default.createElement(z.Switch.Case,{value:"overlay"},Gt.default.createElement(tve,null)),Gt.default.createElement(z.Switch.Case,{value:"sticker"},Gt.default.createElement(dve,null)),Gt.default.createElement(z.Switch.Case,{value:"text"},Gt.default.createElement(Ave,null)),Gt.default.createElement(z.Switch.Case,{value:"textdesign"},Gt.default.createElement(Bve,null)),Gt.default.createElement(z.Switch.Case,{value:"library"},Gt.default.createElement(G_e,null)),Gt.default.createElement(z.Switch.Case,{value:"frame"},Gt.default.createElement(H_e,null)),Gt.default.createElement(z.Switch.Case,{value:"brush"},Gt.default.createElement(__e,null)),Gt.default.createElement(z.Switch.Case,{value:"transform"},Gt.default.createElement(Yve,null))))})});var wf,exe,HJe,WJe,txe;var rxe=p(()=>{wf=v(x("react"));L();exe=v(x("styled-components"));B();Ut();W();ut();HJe=exe.default.div`
  position: relative;
  top: -8px;
  color: ${r=>r.theme.card.foreground};
`;WJe=({adjustmentsTool:r})=>{const e=(t,i)=>{const o=are[t.identifier];return wf.default.createElement(N.Card,{"data-test":t.identifier,tool:"adjustment",type:"medium",onClick:()=>r.toggleOptionSelection(t.identifier),isActive:t.identifier===r.selectedAdjustmentType,key:`${t.identifier}-${i}`,label:t.name,style:{animationDelay:`${Ue(i)}s`}},wf.default.createElement(HJe,null,wf.default.createElement(o,null)),wf.default.createElement(N.CardLabel,null,r.locale.items[t.identifier]||t.name))};return wf.default.createElement(N.CardContainer,null,r.items.map(e))};txe=me("adjustmentsTool")(E(WJe))});var ixe,oxe;var nxe=p(()=>{ixe=v(x("react"));B();K();oxe=()=>{const{config:r}=O();const e=r.state.config["customTool"].toolControlBar;return ixe.default.createElement(e,{language:r.state.locale["customTool"]})}});var sxe=p(()=>{nxe()});var la,z_;var axe=p(()=>{la=v(x("react"));L();B();W();ut();z_=class extends la.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{filterTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{var n,s;const{filterTool:i}=this.props;const o=(s=(n=i.locale)==null?void 0:n.controls)==null?void 0:s.itemAriaLabel;return la.default.createElement(N.Card,{tool:"filter",type:"medium",onClick:()=>i.selectFilter(e.identifier,e.defaultIntensity),isActive:i.identifier===e.identifier,key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,"aria-label":o==null?void 0:o.replace(`\${label}`,e.name),style:{animationDelay:`${Ue(t)}s`}},la.default.createElement(N.CardLabel,{withBackground:true},i.locale.categories[e.identifier]||i.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{var l;const{filterTool:i}=this.props;const{selectedCategoryIdentifier:o,locale:n}=i;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===e.identifier;if(!e.items)return null;return la.default.createElement(N.CategoryContainer,{key:e.identifier},la.default.createElement(N.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,e.name),tool:"filter",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Ue(t)}s`}},la.default.createElement(N.CardLabel,{withBackground:true},e.name)),la.default.createElement(N.ExpandableContainer,{show:a},e.items.map(this.renderItem)))}}render(){const{filterTool:e}=this.props;const{categories:t,config:i,items:o}=e;if(i.flattenCategories)return la.default.createElement(N.CardContainer,null,o.map(this.renderItem));return la.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};z_=g([me("filterTool","active"),E],z_)});var LT,GJe,lxe;var uxe=p(()=>{LT=v(x("react"));L();B();W();ut();GJe=({focusTool:r})=>{var o,n;const e=(n=(o=r.locale)==null?void 0:o.controls)==null?void 0:n.itemAriaLabel;const t=s=>{r.selectFocus(s)};const i=(s,a)=>LT.default.createElement(N.Card,{isActive:s.identifier===r.identifier,tool:"focus",type:"medium",onClick:()=>t(s.identifier),key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,"aria-label":e==null?void 0:e.replace(`\${label}`,s.name),style:{animationDelay:`${Ue(a)}s`}},LT.default.createElement(N.CardLabel,{withBackground:true},r.locale.items[s.identifier]||s.name));return LT.default.createElement(N.CardContainer,null,r.items.map(i))};lxe=me("focusTool")(E(GJe))});var zT,VJe,cxe;var dxe=p(()=>{zT=v(x("react"));L();B();W();ut();VJe=({frameTool:r})=>{var o,n;const e=r.identifier;const t=(n=(o=r.locale)==null?void 0:o.controls)==null?void 0:n.itemAriaLabel;const i=(s,a)=>zT.default.createElement(N.Card,{tool:"frame",type:"medium",onClick:()=>r.selectFrame(s.identifier),isActive:s.identifier===e,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,"aria-label":t==null?void 0:t.replace(`\${label}`,s.name),style:{animationDelay:`${Ue(a)}s`,backgroundSize:"60%"}}," ",zT.default.createElement(N.CardLabel,{hidden:true},r.locale.items[s.identifier]||s.name));return zT.default.createElement(N.CardContainer,null,r.items.map(i))};cxe=me("frameTool")(E(VJe))});var pxe,mxe;var hxe=p(()=>{pxe=v(x("styled-components"));mxe=pxe.default.p`
  height: ${r=>r.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`});var fxe=p(()=>{hxe()});var Jn,U_;var gxe=p(()=>{Jn=v(x("react"));L();B();W();ut();fxe();U_=class extends Jn.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{library:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{var s,a;const{active:i,library:o}=this.props;const n=(a=(s=o.locale)==null?void 0:s.controls)==null?void 0:a.itemAriaLabel;return Jn.default.createElement(N.Card,{tool:"library",type:"medium",onClick:()=>i.newImage(e.rawUrl),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,"aria-label":n==null?void 0:n.replace(`\${label}`,e.name),style:{animationDelay:`${Ue(t)}s`}})};this.renderCategory=(e,t)=>{var l;const{library:i}=this.props;const{selectedCategoryIdentifier:o,locale:n}=i;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===e.identifier;if(!e.items)return null;return Jn.default.createElement(N.CategoryContainer,{key:e.identifier},Jn.default.createElement(N.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,e.name),tool:"library",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Ue(t)}s`}},Jn.default.createElement(N.CardLabel,{withBackground:true},e.name)),Jn.default.createElement(N.ExpandableContainer,{show:a},e.items.map(this.renderItem)))}}render(){const{library:e}=this.props;const{query:t,categories:i,items:o,locale:n,config:s}=e;if(t){return o.length?Jn.default.createElement(N.CardContainer,null,o.map(this.renderItem)):Jn.default.createElement(mxe,{"data-test":G.NoResult},n.controls.noResults)}if(s.flattenCategories)return Jn.default.createElement(N.CardContainer,null,o.map(this.renderItem));return Jn.default.createElement(N.CardContainer,null,i.map(this.renderCategory))}};U_=g([me("library","active"),E],U_)});var UT,jJe,yxe;var bxe=p(()=>{UT=v(x("react"));L();B();W();ut();jJe=({overlayTool:r})=>{var a;const{identifier:e,items:t,selectOverlay:i,locale:o}=r;const n=(a=o.controls)==null?void 0:a.itemAriaLabel;const s=(l,u)=>UT.default.createElement(N.Card,{tool:"overlay",type:"medium",onClick:()=>i(l.identifier),isActive:l.identifier===e,key:`${l.identifier}-${u}`,image:l.thumbnailURI,label:l.name,"aria-label":n==null?void 0:n.replace(`\${label}`,l.name),style:{animationDelay:`${Ue(u)}s`}},UT.default.createElement(N.CardLabel,{withBackground:true},o.items[l.identifier]||l.name));return UT.default.createElement(N.CardContainer,null,t.map(s))};yxe=me("overlayTool")(E(jJe))});var ua,N_;var _xe=p(()=>{ua=v(x("react"));L();B();W();ut();N_=class extends ua.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{stickerTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{var n,s;const{stickerTool:i}=this.props;const o=(s=(n=i.locale)==null?void 0:n.controls)==null?void 0:s.itemAriaLabel;return ua.default.createElement(N.Card,{tool:"sticker",type:"medium",onClick:()=>i.add(e.identifier),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,"aria-label":o==null?void 0:o.replace(`\${label}`,e.name),style:{backgroundSize:"55%",animationDelay:`${G0(t)}s`}},ua.default.createElement(N.CardLabel,{hidden:true},i.locale.items[e.identifier]||e.name))};this.renderCategory=(e,t)=>{var l;const{stickerTool:i}=this.props;const{selectedCategoryIdentifier:o,locale:n}=i;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===e.identifier;if(!e.items)return null;return ua.default.createElement(N.CategoryContainer,{key:e.identifier},ua.default.createElement(N.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,e.name),tool:"sticker",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:e.thumbnailURI,label:e.name,style:{animationDelay:`${Ue(t)}s`}},ua.default.createElement(N.CardLabel,{withBackground:true},n.categories[e.identifier]||e.name)),ua.default.createElement(N.ExpandableContainer,{show:a},e.items.map(this.renderItem)))}}render(){const{stickerTool:e}=this.props;const{categories:t,items:i,config:o}=e;if(o.flattenCategories)return ua.default.createElement(N.CardContainer,null,i.map(this.renderItem));return ua.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};N_=g([me("stickerTool","active"),E],N_)});var q_,vxe,$Je,xxe,Cxe;var Sxe=p(()=>{q_=v(x("react"));L();vxe=v(x("styled-components"));B();lt();W();ut();$Je=vxe.default.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`;xxe=class extends q_.default.Component{constructor(){super(...arguments);this.getWidth=({fontFamily:e,fontStyle:t,fontWeight:i},o)=>{const n=document.createElement("canvas");const s=n.getContext("2d");s.font=`${t} ${i} 20px ${e}`;s.fillText(o,0,0);return s.measureText(o).width};this.renderItem=(e,t)=>{const{config:i,textTool:o}=this.props;const{fontFamily:n,fontWeight:s,fontStyle:a,identifier:l}=e;const u=`${e.fontFamily} ${Ee.getDisplayFontStyle(e)}`;const c=this.getWidth(e,u);const d=(i.measurements.basicCard.medium.width-20)/c;return q_.default.createElement(N.Card,{tool:"text",type:"medium",onClick:()=>o.changeFont(l),isDisabled:!this.textTool.isTextSelected,isActive:o.identifier===l,key:`${e.identifier}-${t}`,label:u,style:{animationDelay:`${Ue(t)}s`}},q_.default.createElement($Je,{style:{transform:`scale(${d}) translate(-50%, -50%)`,fontFamily:n,fontStyle:a,fontWeight:s}},u))}}get textTool(){return this.props.textTool}render(){const{textTool:e}=this.props;const{fontsLoaded:t,fontFamilies:i}=e;if(!t)return null;return q_.default.createElement(N.CardContainer,null,i.map(this.renderItem))}};Cxe=me("textTool","config")(E(xxe))});var NT,KJe,wxe;var Txe=p(()=>{NT=v(x("react"));L();B();W();ut();KJe=({textDesignTool:r})=>{var l;const{items:e,changeIdentifier:t,isTextDesignSelected:i,identifier:o,locale:n}=r;const s=(l=n.controls)==null?void 0:l.itemAriaLabel;const a=(u,c)=>{return NT.default.createElement(N.Card,{tool:"textdesign",type:"medium",onClick:()=>t(u.identifier),isDisabled:!i,isActive:o===u.identifier,key:`${u.identifier}-${c}`,image:u.thumbnailURI,label:u.name,"aria-label":s==null?void 0:s.replace(`\${label}`,u.name),style:{animationDelay:`${Ue(c)}s`,backgroundSize:"60%"}},NT.default.createElement(N.CardLabel,{hidden:true},u.name))};return NT.default.createElement(N.CardContainer,null,e.map(a))};wxe=me("textDesignTool")(E(KJe))});var to,IL,XJe,YJe,H_;var Ixe=p(()=>{to=v(x("react"));L();IL=v(x("styled-components"));B();Ut();W();ut();XJe=IL.default.div`
  svg {
    margin-bottom: 12px;
  }
`;YJe=IL.default.div`
  svg {
    width: ${r=>r.theme.measurements.basicCard.medium.height}px;
    height: ${r=>r.theme.measurements.basicCard.medium.height}px;
  }

  ${hi} {
    width: ${r=>r.theme.measurements.basicCard.medium.width-32}px;
    height: ${r=>r.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`;H_=class extends to.default.Component{constructor(){super(...arguments);this.onCategoryClick=e=>{const{transformTool:t}=this.props;t.toggleCategorySelection(e)};this.renderItem=(e,t)=>{var m;const{transformTool:i,config:o}=this.props;const{locale:n,identifier:s}=i;const a=(m=n.controls)==null?void 0:m.itemAriaLabel;const l=i.checkIfTransformThumbnailExits(e.thumbnailURI);const u=it.crops[e.identifier]||it.crops.imgly_transform_common_custom;const c=to.default.createElement(N.CardLabel,null,n.items[e.identifier]||e.name);const d=l?c:to.default.createElement(YJe,null,to.default.createElement(u,{main:o.theme.transform.crops.main,highlight:o.theme.transform.crops.highlight,shadow:o.theme.transform.crops.shadow}),c);return to.default.createElement(N.Card,{tool:"transform",type:"medium",onClick:()=>i.changeIdentifier(e.identifier,true),key:`${e.identifier}-${t}`,image:e.thumbnailURI,label:e.name,"aria-label":a==null?void 0:a.replace(`\${label}`,e.name),isActive:e.identifier===s,style:{backgroundSize:"55%",animationDelay:`${Ue(t)}s`}},d)};this.renderCategory=(e,t)=>{var d;const{transformTool:i}=this.props;const{selectedCategoryIdentifier:o,locale:n}=i;const s=(d=n.controls)==null?void 0:d.categoryAriaLabel;const a=o===e.identifier;if(!e.items)return null;const l=i.checkIfTransformThumbnailExits(e.thumbnailURI);const u=to.default.createElement(N.CardLabel,null,n.categories[e.identifier]||e.name);const c=l?u:to.default.createElement(XJe,null,it.categories[e.identifier]&&to.default.createElement(it.categories[e.identifier]),u);return to.default.createElement(N.CategoryContainer,{key:e.identifier},to.default.createElement(N.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,e.name),tool:"transform",type:"large",onClick:()=>this.onCategoryClick(e.identifier),image:l?e.thumbnailURI:"",label:e.name,style:{animationDelay:`${Ue(t)}s`}},c),to.default.createElement(N.ExpandableContainer,{show:a},e.items.map(this.renderItem)))}}render(){const{transformTool:e}=this.props;const{categories:t,config:i,items:o}=e;if(i.flattenCategories)return to.default.createElement(N.CardContainer,null,o.map(this.renderItem));return to.default.createElement(N.CardContainer,null,t.map(this.renderCategory))}};H_=g([me("transformTool","config"),E],H_)});var Di,Exe;var kxe=p(()=>{Di=v(x("react"));L();B();K();rxe();sxe();axe();uxe();dxe();gxe();bxe();_xe();Sxe();Txe();Ixe();Exe=E(function r(){const{active:e,library:t,custom:i}=O();const o=e.tool;const n=(0,Di.useMemo)(()=>{switch(o){case"library":return Di.default.createElement(U_,null);case"filter":return Di.default.createElement(z_,null);case"focus":return Di.default.createElement(lxe,null);case"adjustment":return Di.default.createElement(txe,null);case"overlay":return Di.default.createElement(yxe,null);case"sticker":return Di.default.createElement(N_,null);case"text":return Di.default.createElement(Cxe,null);case"textdesign":return Di.default.createElement(wxe,null);case"frame":return Di.default.createElement(cxe,null);case"transform":return Di.default.createElement(H_,null);case"customTool":return Di.default.createElement(oxe,null);default:return null}},[o]);const s=i.getBasicToolItemsBar();if(!s||o==="brush"||o==="library"&&!t.libraryProvider){return null}return Di.default.createElement(s,{show:!!o},n)})});var ro,Dxe,JJe,W_;var Oxe=p(()=>{ro=v(x("react"));L();Dxe=v(x("styled-components"));ar();eL();tL();de();W();i_e();Qve();kxe();JJe=Dxe.default.div`
  position: absolute;
  width: 100%;
  height: ${r=>r.theme.measurements.basicUIToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${r=>r.theme.webcam.backdrop};
  z-index: ${r=>r.theme.measurements.zIndex.disable};
`;W_=class extends ro.default.Component{static getDerivedStateFromError(e){console.error(e);return{hasError:true}}render(){const{active:e,custom:t}=this.props;const i=t.getWindowContainer();return ro.default.createElement(z.Container,{"data-test":G.EditorContainer},e.isWebcam?ro.default.createElement(JJe,null):null,ro.default.createElement(hf,null),ro.default.createElement(Iu,null,ro.default.createElement(nf,null),i&&ro.default.createElement(i,{tool:e.tool},ro.default.createElement(u_,null,e.isWebcam?ro.default.createElement(l_,null):null,e.image&&ro.default.createElement(pf,null))),ro.default.createElement(Zve,null),ro.default.createElement(Exe,null),ro.default.createElement(r_e,null)))}};W_=g([me("active","custom"),E],W_)});var G_,Rxe,EL;var Axe=p(()=>{G_=v(x("react"));L();Rxe=x("styled-components");ar();ut();Oxe();EL=class extends G_.default.Component{constructor(){super(...arguments);this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e;this.storeProps=t;const i=new mf(this.editor.configStore.config.custom.components,{basicUIToolbar:N.Toolbar.Index,basicUIToolControlBar:N.Controlsbar,basicUIToolItemsBar:N.Itemsbar});const o={getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox,getSlider:i.getSlider,getBasicToolbar:i.getBasicToolbar,getBasicToolControlBar:i.getBasicToolControlBar,getBasicToolItemsBar:i.getBasicToolItemsBar,getWindowContainer:i.getWindowContainer};this.storeProps.custom=o;this.forceUpdate()}render(){return this.storeProps?G_.default.createElement(qg,{...this.storeProps},G_.default.createElement(Rxe.ThemeProvider,{theme:{...this.editor.configStore.theme,measurements:this.editor.configStore.measurements}},G_.default.createElement(W_,null))):null}}});var Fxe={};wt(Fxe,{default:()=>EL});var Pxe=p(()=>{Axe()});var qZe={};wt(qZe,{AdjustmentConfiguration:()=>x0,AdjustmentIdentifier:()=>Am,AdjustmentIdentifierKeys:()=>xO,AdvancedAdjustmentControlBarItem:()=>CO,AdvancedBrushControlBarItem:()=>HO,AdvancedFilterControlBarItem:()=>SO,AdvancedFocusControlBarItem:()=>IO,AdvancedFrameControlBarItem:()=>EO,AdvancedLibraryControlBarItem:()=>FO,AdvancedOverlayControlBarItem:()=>PO,AdvancedStickerControlBarItem:()=>MO,AdvancedTextControlBarItem:()=>zO,AdvancedTextDesignControlBarItem:()=>GO,AdvancedTransformControlBarItem:()=>VO,AdvancedUICardLabel:()=>zt,AdvancedUICategoryCard:()=>AZe,AdvancedUIControlsBarSection:()=>LZe,AdvancedUIItemCard:()=>FZe,AdvancedUIToolControlBar:()=>MZe,AdvancedUIToolbar:()=>BZe,AdvancedUIToolbarItem:()=>w_,AlignmentMode:()=>hX,BasicBrushControlBarTabs:()=>WO,BasicFilterControlBarTabs:()=>wO,BasicFocusControlBarTabs:()=>UX,BasicFrameControlBarTabs:()=>kO,BasicOverlayControlBarTabs:()=>BO,BasicStickerControlBarTabs:()=>LO,BasicTextControlBarTabs:()=>UO,BasicTransformControlBarTabs:()=>jO,BasicUIToolControlBar:()=>UZe,BasicUIToolItemsBar:()=>NZe,BasicUIToolbar:()=>zZe,BlendMode:()=>Ss,BrushConfiguration:()=>F0,CanvasAction:()=>Tn,CanvasBarTextSecondaryButton:()=>WC,CardAvatar:()=>Xc,CardType:()=>ir,CategoryHeaderType:()=>vs,Checkbox:()=>xZe,CheckboxBase:()=>CZe,CheckboxCheckMark:()=>wZe,CheckboxInput:()=>SZe,ColorItem:()=>sZe,ColorItemActiveOverlay:()=>cZe,ColorItemBackground:()=>lZe,ColorItemBase:()=>aZe,ColorItemTiledBackground:()=>uZe,Configuration:()=>IX,ContainedPrimaryButton:()=>Ty,Container:()=>oZe,CustomToolConfiguration:()=>FX,Dialog:()=>dZe,DialogBackdrop:()=>hZe,DialogBase:()=>pZe,DialogBody:()=>gZe,DialogContainer:()=>mZe,DialogFooter:()=>yZe,DialogHeader:()=>fZe,DialogSpinner:()=>bZe,Dropdown:()=>TZe,DropdownCaret:()=>SC,EventEmitter:()=>mo,ExportConfiguration:()=>yX,ExportFormat:()=>Nc,FilterCategoryIdentifier:()=>Xg,FilterConfiguration:()=>C0,FilterIdentifier:()=>Kg,FocusConfiguration:()=>S0,FocusIdentifier:()=>Aa,FrameConfiguration:()=>w0,IconButton:()=>La,ImageFormat:()=>Cs,ImageMimeType:()=>$g,Label:()=>vZe,LibraryCategory:()=>T0,LibraryConfiguration:()=>D0,LibraryImage:()=>I0,LibraryProvider:()=>k0,ModalType:()=>xs,OutlinedPrimaryButton:()=>wy,OutlinedSecondaryButton:()=>cu,OverlayConfiguration:()=>O0,OverlayIdentifier:()=>Yg,PhotoEditorSDKUI:()=>Lxe,PhotoEditorSDKUIComponent:()=>Uxe,SearchField:()=>PZe,SerializationExportType:()=>gX,Slider:()=>IZe,SliderBase:()=>EZe,SliderContainer:()=>kZe,SliderIdentifier:()=>fr,SliderInput:()=>DZe,SliderLabel:()=>RZe,SliderTrack:()=>OZe,SnappingConfiguration:()=>_0,SpriteActionButton:()=>Ds,StickerConfiguration:()=>R0,TextConfiguration:()=>A0,TextDesignConfiguration:()=>P0,TextPrimaryButton:()=>jc,TextSecondaryButton:()=>Rn,Tool:()=>$,TransformConfiguration:()=>B0,TransformIdentifier:()=>$O,UIEvent:()=>Jg,WatermarkConfiguration:()=>v0,WindowContainer:()=>cT,calculateAdvancedUIToolControlBarMeasurements:()=>LM,deepmergeAll:()=>ri,defaultConfig:()=>ec,isDuoToneFilterAsset:()=>Fm,isExistingCategory:()=>j9e,isExistingItem:()=>V9e,isGoogleFontAsset:()=>qO,isLUTFilterAsset:()=>TO,isWebFontAsset:()=>NO,useGetImage:()=>rZe,useIsLayoutAdvanced:()=>iZe,useSetImage:()=>tZe});var AL={react:"React","react-dom":"ReactDOM","react-dom/server":"ReactDOMServer","styled-components":"styled"};window.require=r=>{if(Object.hasOwnProperty.call(AL,r)){const e=AL[r];if(Object.hasOwnProperty.call(window,e)){return window[e]}console.log(`Cannot find umd script for ${r}`)}return void 0};if(typeof Promise==="undefined"){jL().enable();self.Promise=KL()}if(typeof window!=="undefined"){YL()}Object.assign=QL();Ez();d8();ij();nj();var Oxr=v(cj());var Rxr=v(hj());ze();var T_=v(x("react"));L();var Vye=x("styled-components");ar();var lfe=v(x("react"));B();var tfe=v(x("react"));var rfe=v(x("styled-components"));de();var _Ye=(0,rfe.default)(go)`
  width: ${r=>r.theme.measurements.advancedUICard.large.width}px;
  height: ${r=>r.theme.measurements.advancedUICard.large.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedUISpacer}px;
  color: ${r=>r.theme.card.foreground};
`;var vYe=({isActive:r,...e})=>{return tfe.default.createElement(_Ye,{...e})};var ife=vYe;var ofe=v(x("styled-components"));de();var nfe=(0,ofe.default)(go)`
  width: ${r=>r.theme.measurements.advancedUICard.medium.width}px;
  height: ${r=>r.theme.measurements.advancedUICard.medium.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedUISpacer}px;
  color: ${r=>r.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${r=>r.theme.measurements.advancedUISpacer}px;
  }
`;var sfe=v(x("styled-components"));de();var afe=(0,sfe.default)(go)`
  width: ${r=>r.theme.measurements.advancedUICard.small.width}px;
  height: ${r=>r.theme.measurements.advancedUICard.small.height}px;
  margin-bottom: ${r=>r.theme.measurements.advancedUISpacer}px;
  color: ${r=>r.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${r=>r.theme.measurements.advancedUISpacer}px;
  }
`;var r_=({type:r,...e})=>{const t=r==="large";const i=r==="small";let o=nfe;if(t){o=ife}else if(i){o=afe}return lfe.default.createElement(o,{type:r,...e})};var ufe=v(x("styled-components"));W();var pT=ufe.default.div.attrs(r=>({"data-test":r["data-test"]||G.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width-48}px;
`;var cfe=v(x("react"));var i_=v(x("styled-components"));W();var xYe=i_.default.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${r=>r.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${r=>r.theme.measurements.zIndex.toolControlBar};

  background: ${r=>r.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${r=>!r.reverse?i_.css`
          border-right: 1px solid ${r.theme.toolControlBar.borderColor};
        `:i_.css`
          border-left: 1px solid ${r.theme.toolControlBar.borderColor};
        `}
`;var dfe=({reverse:r=false,style:e,className:t,children:i})=>cfe.default.createElement(xYe,{"data-test":G.ToolControlBar,reverse:r,className:t,style:e},i);var ff=v(x("styled-components"));W();var pfe=ff.default.div.attrs(()=>({"data-test":G.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${r=>r.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:r})=>r&&ff.css`
      opacity: 1;
      visibility: visible;
      ${Mt()?ff.css`
            display: block;
          `:ff.css`
            display: flex;
          `}
    `}
`;var W5=v(x("react"));var G5=v(x("styled-components"));de();W();var CYe=(0,G5.default)(cA)`
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  /* the padding and margin should only be applied to the children */
  margin: 0 !important;
  padding: 0 !important;
`;var SYe=G5.default.div`
  display: flex;
  flex-direction: column;

  > * {
    margin-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`;var mfe=({show:r,children:e})=>{return W5.default.createElement(CYe,{duration:300,height:r?"auto":0,easing:"ease-in-out",animateOpacity:true},W5.default.createElement(SYe,{"data-test":G.ToolControlBarExpandableControls},e))};var mT=v(x("styled-components"));de();W();var o_=(0,mT.default)(On)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${r=>r.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>{if(Mt()||po()){return mT.css`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `}return""}}
`;o_.defaultProps={direction:"vertical"};var hT=v(x("styled-components"));var wYe=hT.default.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${r=>r.full?hT.css`
            left: -${3*r.theme.measurements.advancedUISpacer/2}px;
            width: calc(
              100% + ${3*r.theme.measurements.advancedUISpacer}px
            );
          `:`
      left: ${3*r.theme.measurements.advancedUISpacer/2}px;
      width: calc(100% - ${3*r.theme.measurements.advancedUISpacer}px);
    `}
    border-bottom: 2px solid ${r=>r.theme.toolControlBar.separatorColor};
  }
`;var fT=wYe;var hfe=v(x("styled-components"));var TYe=hfe.default.h2`
  color: ${r=>r.theme.toolControlBar.titleForeground};
  font-size: ${r=>r.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${r=>2*r.theme.measurements.advancedUISpacer}px;
  margin-top: 0;
`;var gT=TYe;var Dl=v(x("react"));var ffe=v(x("styled-components"));de();W();var IYe=ffe.default.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`;var gfe=({name:r,isFirstCategory:e,isLastCategory:t,children:i})=>{return Dl.default.createElement(IYe,null,!e&&Dl.default.createElement(z.Spacer,{count:2}),Dl.default.createElement(gT,{"data-test":r},r),Dl.default.createElement(pT,{"data-test":G.CategoryItemsContainer},i),!t&&Dl.default.createElement(Dl.default.Fragment,null,Dl.default.createElement(z.Spacer,{count:2}),Dl.default.createElement(fT,{full:true})))};var yfe=v(x("styled-components"));var EYe=yfe.default.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${r=>r.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${r=>r.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${r=>r.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${r=>r.theme.measurements.fontSystem.headline1.case};
  background: ${r=>r.theme.toolControlBar.background};
  color: ${r=>r.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${r=>r.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`;var bfe=EYe;var _fe=v(x("react"));var vfe=v(x("styled-components"));K();var kYe=vfe.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  overflow-y: auto;
  overflow-x: hidden;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${r=>r.theme.measurements.advancedUIToolControlBar.paddingBottom+r.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${r=>r.displayTitle?r.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${o_} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${r=>r.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${r=>r.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`;var xfe=({children:r})=>{const{config:e}=O();const t=e.config.displayToolControlBarTitle;return _fe.default.createElement(kYe,{displayTitle:t},r)};var V5=v(x("react"));var gf=v(x("styled-components"));de();W();var DYe=gf.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${r=>r.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${r=>r.theme.measurements.zIndex.toolbar};

  background-color: ${r=>r.theme.toolbar.background};
  color: ${r=>r.theme.toolbar.foreground};
  ${r=>{const e=r.theme.toolbar.border?r.theme.toolbar.border:gf.css`
          1px solid ${r.theme.toolbar.borderColor};
        `;return!r.reverse?gf.css`
          border-right: ${e};
        `:gf.css`
          border-left: ${e};
        `}}
  margin-bottom: ${r=>r.theme.measurements.advancedUIToolbar.marginBottom}px;
`;var Cfe=({reverse:r,style:e,className:t,children:i})=>{return V5.default.createElement(DYe,{reverse:r,"data-test":G.Toolbar,className:t,style:e},V5.default.createElement(On,{direction:"vertical"},i))};var j5=v(x("react"));var _p=v(x("styled-components"));de();W();var OYe=(0,_p.default)(Rn)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${Mt()?_p.css`
        background-color: transparent;
      `:_p.css`
        background-color: inherit;
      `}

  ${r=>r.isActive&&_p.css`
      background-color: ${r.theme.toolbar.activeBackground};
      color: ${r.theme.toolbar.activeForeground};

      svg {
        color: ${r.theme.toolbar.activeForeground};
      }
    `}
`;var RYe=_p.default.li.attrs({"aria-haspopup":true,"aria-hidden":true,role:"menuitem"})`
  height: ${r=>r.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`;var Sfe=r=>j5.default.createElement(RYe,null,j5.default.createElement(OYe,{...r,"data-test":G.ToolbarItem}));var wfe=v(x("styled-components"));var AYe=wfe.default.li.attrs({role:"none"})`
  height: ${r=>r.theme.measurements.advancedUIToolbar.separatorHeight}px;
  cursor: pointer;
  position: relative;
`;var Tfe=AYe;var Cp=v(x("react"));var n_=x("react");var Xtr=v(x("react"));var ki=x("react");var PYe=v(Dfe());var Ofe=BYe()?ki.useLayoutEffect:ki.useEffect;if(false){Ytr=typeof process!=="undefined"?process:{env:{NODE_ENV:"development"}},Jtr=Ytr.env;checkStyles=function r(e){if(checkedPkgs[e])return;checkedPkgs[e]=true;if(Jtr.NODE_ENV!=="test"&&parseInt(window.getComputedStyle(document.body).getPropertyValue("--reach-"+e),10)!==1){console.warn("@reach/"+e+' styles not found. If you are using a bundler like webpack or parcel include this in the entry file of your app before any of your own styles:\n\n    import "@reach/'+e+`/styles.css";

  Otherwise you'll need to include them some other way:

    <link rel="stylesheet" type="text/css" href="node_modules/@reach/`+e+'/styles.css" />\n\n  For more information visit https://ui.reach.tech/styling.\n  ')}}}var Ytr;var Jtr;var Ztr=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function BYe(){return!!(typeof window!=="undefined"&&window.document&&window.document.createElement)}if(false){useControlledSwitchWarning=function r(e,t,i){var o=(0,ki.useRef)(e!=null);var n=(0,ki.useRef)({componentName:i,controlledPropName:t});(0,ki.useEffect)(function(){n.current={componentName:i,controlledPropName:t}},[i,t]);(0,ki.useEffect)(function(){var s=o.current;var a=n.current,l=a.componentName,u=a.controlledPropName;var c=e!=null;if(s!==c){console.error("A component is changing an "+(s?"":"un")+"controlled `"+u+"` state of "+l+" to be "+(s?"un":"")+"controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled "+l+" element for the lifetime of the component.\nMore info: https://fb.me/react-controlled-components")}},[e])}}if(false){useCheckStyles=function r(e){var t=(0,ki.useRef)(e);(0,ki.useEffect)(function(){return void(t.current=e)},[e]);(0,ki.useEffect)(function(){return checkStyles(t.current)},[])}}function Rfe(){var r=(0,ki.useState)(Object.create(null)),e=r[1];return(0,ki.useCallback)(function(){e(Object.create(null))},[])}if(false){useStateLogger=function r(e,t){if(t===void 0){t=false}var i=(0,ki.useRef)(t);(0,ki.useEffect)(function(){i.current=t},[t]);(0,ki.useEffect)(function(){if(i.current){console.group("State Updated");console.log("%c"+e,"font-weight: normal; font-size: 120%; font-style: italic;");console.groupEnd()}},[e])}}var Afe=x("react-dom");var MYe=function r(e){var t=e.children,i=e.type,o=i===void 0?"reach-portal":i;var n=(0,n_.useRef)(null);var s=(0,n_.useRef)(null);var a=Rfe();Ofe(function(){if(!n.current)return;var l=n.current.ownerDocument;s.current=l===null||l===void 0?void 0:l.createElement(o);l.body.appendChild(s.current);a();return function(){if(s.current&&s.current.ownerDocument){s.current.ownerDocument.body.removeChild(s.current)}}},[o,a]);return s.current?(0,Afe.createPortal)(t,s.current):(0,n_.createElement)("span",{ref:n})};if(false){MYe.displayName="Portal"}var Ffe=MYe;function $5(r,e){if(r==null)return{};var t={};var i=Object.keys(r);var o,n;for(n=0;n<i.length;n++){o=i[n];if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function K5(r,e){r.prototype=Object.create(e.prototype);r.prototype.constructor=r;r.__proto__=e}var UYe=v(qfe());var s_=v(x("react"));var yT=v(x("react-dom"));var X5={disabled:false};var Hfe=v(x("react"));var Y5=Hfe.default.createContext(null);var a_="unmounted";var vp="exited";var xp="entering";var bf="entered";var J5="exiting";var Ol=function(r){K5(e,r);function e(i,o){var n;n=r.call(this,i,o)||this;var s=o;var a=s&&!s.isMounting?i.enter:i.appear;var l;n.appearStatus=null;if(i.in){if(a){l=vp;n.appearStatus=xp}else{l=bf}}else{if(i.unmountOnExit||i.mountOnEnter){l=a_}else{l=vp}}n.state={status:l};n.nextCallback=null;return n}e.getDerivedStateFromProps=function i(o,n){var s=o.in;if(s&&n.status===a_){return{status:vp}}return null};var t=e.prototype;t.componentDidMount=function i(){this.updateStatus(true,this.appearStatus)};t.componentDidUpdate=function i(o){var n=null;if(o!==this.props){var s=this.state.status;if(this.props.in){if(s!==xp&&s!==bf){n=xp}}else{if(s===xp||s===bf){n=J5}}}this.updateStatus(false,n)};t.componentWillUnmount=function i(){this.cancelNextCallback()};t.getTimeouts=function i(){var o=this.props.timeout;var n,s,a;n=s=a=o;if(o!=null&&typeof o!=="number"){n=o.exit;s=o.enter;a=o.appear!==void 0?o.appear:s}return{exit:n,enter:s,appear:a}};t.updateStatus=function i(o,n){if(o===void 0){o=false}if(n!==null){this.cancelNextCallback();if(n===xp){this.performEnter(o)}else{this.performExit()}}else if(this.props.unmountOnExit&&this.state.status===vp){this.setState({status:a_})}};t.performEnter=function i(o){var n=this;var s=this.props.enter;var a=this.context?this.context.isMounting:o;var l=this.props.nodeRef?[a]:[yT.default.findDOMNode(this),a],u=l[0],c=l[1];var d=this.getTimeouts();var m=a?d.appear:d.enter;if(!o&&!s||X5.disabled){this.safeSetState({status:bf},function(){n.props.onEntered(u)});return}this.props.onEnter(u,c);this.safeSetState({status:xp},function(){n.props.onEntering(u,c);n.onTransitionEnd(m,function(){n.safeSetState({status:bf},function(){n.props.onEntered(u,c)})})})};t.performExit=function i(){var o=this;var n=this.props.exit;var s=this.getTimeouts();var a=this.props.nodeRef?void 0:yT.default.findDOMNode(this);if(!n||X5.disabled){this.safeSetState({status:vp},function(){o.props.onExited(a)});return}this.props.onExit(a);this.safeSetState({status:J5},function(){o.props.onExiting(a);o.onTransitionEnd(s.exit,function(){o.safeSetState({status:vp},function(){o.props.onExited(a)})})})};t.cancelNextCallback=function i(){if(this.nextCallback!==null){this.nextCallback.cancel();this.nextCallback=null}};t.safeSetState=function i(o,n){n=this.setNextCallback(n);this.setState(o,n)};t.setNextCallback=function i(o){var n=this;var s=true;this.nextCallback=function(a){if(s){s=false;n.nextCallback=null;o(a)}};this.nextCallback.cancel=function(){s=false};return this.nextCallback};t.onTransitionEnd=function i(o,n){this.setNextCallback(n);var s=this.props.nodeRef?this.props.nodeRef.current:yT.default.findDOMNode(this);var a=o==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}if(o!=null){setTimeout(this.nextCallback,o)}};t.render=function i(){var o=this.state.status;if(o===a_){return null}var n=this.props,s=n.children,a=n.in,l=n.mountOnEnter,u=n.unmountOnExit,c=n.appear,d=n.enter,m=n.exit,h=n.timeout,f=n.addEndListener,b=n.onEnter,_=n.onEntering,y=n.onEntered,I=n.onExit,T=n.onExiting,D=n.onExited,P=n.nodeRef,k=$5(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s_.default.createElement(Y5.Provider,{value:null},typeof s==="function"?s(o,k):s_.default.cloneElement(s_.default.Children.only(s),k))};return e}(s_.default.Component);Ol.contextType=Y5;Ol.propTypes=false?{nodeRef:UYe.default.shape({current:typeof Element==="undefined"?UYe.default.any:UYe.default.instanceOf(Element)}),children:UYe.default.oneOfType([UYe.default.func.isRequired,UYe.default.element.isRequired]).isRequired,in:UYe.default.bool,mountOnEnter:UYe.default.bool,unmountOnExit:UYe.default.bool,appear:UYe.default.bool,enter:UYe.default.bool,exit:UYe.default.bool,timeout:function r(e){var t=timeoutsShape;if(!e.addEndListener)t=t.isRequired;for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++){o[n-1]=arguments[n]}return t.apply(void 0,[e].concat(o))},addEndListener:UYe.default.func,onEnter:UYe.default.func,onEntering:UYe.default.func,onEntered:UYe.default.func,onExit:UYe.default.func,onExiting:UYe.default.func,onExited:UYe.default.func}:{};function yf(){}Ol.defaultProps={in:false,mountOnEnter:false,unmountOnExit:false,appear:false,enter:true,exit:true,onEnter:yf,onEntering:yf,onEntered:yf,onExit:yf,onExiting:yf,onExited:yf};Ol.UNMOUNTED=a_;Ol.EXITED=vp;Ol.ENTERING=xp;Ol.ENTERED=bf;Ol.EXITING=J5;var Z5=Ol;var Sp=v(x("styled-components"));K();W();var NYe=Sp.default.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  font-family: '${r=>r.theme.typography.fontFamily}', sans-serif;

  ${Mt()?Sp.css`
        position: -ms-device-fixed;
      `:Sp.css`
        position: fixed;
      `}
  top: ${r=>r.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${r=>r.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${r=>r.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${r=>r.label}';
    position: absolute;
    color: ${r=>r.theme.tooltip.foreground};
    background: ${r=>r.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${r=>r.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${r=>r.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${r=>r.theme.measurements.fontSystem.label.case};
    border-radius: ${r=>r.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${r=>r.reverse&&Sp.css`
      direction: rtl;

      &:before {
        border-left: 8px solid ${r.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`;var qYe=Sp.default.span`
  display: none;
`;var Wfe=({show:r=true,reverse:e,position:t,children:i})=>{const o=(0,Cp.useRef)(null);const{config:n}=O();const{measurements:s}=n;const a=typeof i==="string"?i:"";const l=t.x+s.advancedUIToolbar.width-10;const u=t.x+s.advancedUIToolbar.width+16;const c=e?"right":"left";const d={entering:{opacity:0,[c]:`${l}px`},entered:{opacity:1,[c]:`${u}px`},exiting:{opacity:0,[c]:`${l}px`},exited:{opacity:0,[c]:`${l}px`}};return Cp.default.createElement(Z5,{nodeRef:o,in:r,timeout:{exit:500}},m=>m!=="exited"&&Cp.default.createElement(Ffe,null,Cp.default.createElement(NYe,{ref:o,style:d[m],"data-test":G.Tooltip,reverse:e,position:t,label:a},Cp.default.createElement(qYe,null,a))))};var J={Card:r_,CardContainer:pT,Toolbar:{Index:Cfe,Item:Sfe,Separator:Tfe,Tooltip:Wfe},Itemsbar:o_,BarSeparator:"",ItemsSeparator:fT,Controlsbar:mfe,ToolControlBarItems:xfe,Sidebar:{Index:dfe,Heading:bfe,SubHeading:gT,TextCategory:gfe,ExpandableContainer:pfe}};var Jt=v(x("react"));L();var Hye=v(x("styled-components"));ar();eL();tL();de();var rL=v(x("react"));L();B();K();var _f=v(x("react"));L();Ut();var bT=class extends _f.default.Component{constructor(){super(...arguments);this.renderIcon=e=>{const{tool:t,config:i}=this.props;const o=i.state.config[t];if("icon"in o){const s=o.icon;return _f.default.createElement(s,null)}const n=$C[e];return _f.default.createElement(n,null)||null};this.update=e=>{const{active:t}=this.props;t.selectTool(e)}}getToolTitle(e){const{config:t}=this.props;return t.locale[e].title}render(){const{tool:e,disabled:t,custom:i,active:o,isReverse:n}=this.props;const s=o.tool;if(e){const a=i.getAdvancedToolbarItem();if(!a){return null}return _f.default.createElement(a,{key:e,isDisabled:t,isActive:e===s,isReverse:n,icon:this.renderIcon(e),onClick:()=>this.update(e),tool:e,label:this.getToolTitle(e)})}return _f.default.createElement(J.Toolbar.Separator,null)}};bT=g([me("active","config","custom"),E],bT);var jfe=bT;var iL=E(function r(){const{custom:e,config:t,active:i}=O();const o=t.config.order==="reverse";const n=e.getAdvancedToolbar();if(!n){return null}return rL.default.createElement(n,{reverse:o},t.tools.map((s,a)=>rL.default.createElement(jfe,{key:s||a,tool:s,isReverse:o,disabled:!(i.image||s==="library"||s==="customTool")})))});var kt=v(x("react"));L();B();de();K();var c_=v(x("react"));L();K();var vf=v(x("react"));L();B();lt();K();var Rl=v(x("react"));L();B();K();var HYe=E(()=>{const{adjustmentsTool:r,custom:e}=O();const{categories:t,items:i,config:o,locale:n}=r;const s=l=>{const u=r[l.identifier];const c=r.locale.categories[l.identifier]||l.name;const d=e.getSlider();if(!d){return null}return Rl.default.createElement(d,{tool:"adjustment",identifier:l.identifier,adjust:true,key:l.identifier,label:c,value:u,onChange:m=>{r.editAdjustments({type:l.identifier,value:m})},onMouseUp:()=>r.toolSnapshot(),onTouchEnd:()=>r.toolSnapshot(),snap:0,style:{paddingBottom:"16px",width:"100%"}})};const a=(l,u)=>{const c=n.categories[l.identifier]||l.name;if(!l.items)return null;return Rl.default.createElement(J.Sidebar.TextCategory,{key:l.identifier,name:c,isFirstCategory:u===0,isLastCategory:u===t.length-1},l.items.map(s))};if(o.flattenCategories)return Rl.default.createElement(Rl.default.Fragment,null,i.map(s));return Rl.default.createElement(Rl.default.Fragment,null,t.map(a))});var $fe=()=>{return Rl.default.createElement(J.Itemsbar,null,Rl.default.createElement(HYe,null))};var Kfe=v(x("react"));L();B();K();var Xfe=E(()=>{const{adjustmentsTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return Kfe.default.createElement(i,{tool:"adjustment",label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isDirty,onClick:o})});var Yfe=E(()=>{const{adjustmentsTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"items":return vf.default.createElement($fe,{key:o});case"separator":return vf.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"removeAdjustmentButton":return vf.default.createElement(Xfe,{key:o});default:return null}}else if(typeof o==="object"){return vf.default.createElement(J.Controlsbar,{key:o.type,show:r.isDirty},o.children.map(n=>i(n)))}return null};return vf.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Jfe=E(({displayTitle:r})=>{const{adjustmentsTool:e}=O();return c_.default.createElement(c_.default.Fragment,null,r&&c_.default.createElement(J.Sidebar.Heading,null,e.locale.title),c_.default.createElement(Yfe,null))});var d_=v(x("react"));L();var uc=v(x("react"));L();B();lt();K();var oL=v(x("react"));L();B();ar();de();K();var Zfe=E(()=>{const{brushTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{colorList:i}=r;return oL.default.createElement(z.Input.Selection,{label:e.selectColor},oL.default.createElement(Wt,{tool:"brush",activeColor:r.color,colors:i,labelsColor:t,onChange:r.changeColor}))});var Qfe=v(x("react"));L();B();K();W();var ege=E(()=>{const{brushTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getSlider();if(!i){return null}return Qfe.default.createElement(i,{identifier:"brush-hardness",tool:"brush","data-test":G.BrushHardness,label:t.sliderHardness,value:r.hardness,min:0,max:1,onChange:r.changeHardness})});var tge=v(x("react"));L();B();K();W();var rge=E(()=>{const{brushTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getSlider();if(!i){return null}return tge.default.createElement(i,{identifier:"brush-size",tool:"brush","data-test":G.BrushSize,label:t.sliderSize,value:r.relativeSize,min:1,max:100,divider:1,onChange:r.changeRelativeSize})});var ige=v(x("react"));L();B();K();var oge=E(()=>{const{brushTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return ige.default.createElement(i,{tool:"brush",label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isDirty,onClick:o})});var nge=E(()=>{const{brushTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"brushColorList":return uc.default.createElement(Zfe,{key:o});case"brushHardnessSlider":return uc.default.createElement(ege,{key:o});case"brushSizeSlider":return uc.default.createElement(rge,{key:o});case"separator":return uc.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"removeBrushButton":return uc.default.createElement(oge,{key:o});default:return null}}else if(typeof o==="object"){return uc.default.createElement(J.Controlsbar,{key:o.type,show:r.isDirty},o.children.map(n=>i(n)))}return null};return uc.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var WYe=({brushTool:r,displayTitle:e})=>d_.default.createElement(d_.default.Fragment,null,e&&d_.default.createElement(J.Sidebar.Heading,null,r.locale.title),d_.default.createElement(nge,null));var sge=me("brushTool")(E(WYe));var p_=v(x("react"));B();K();var age=({displayTitle:r})=>{const{config:e}=O();const t=e.state.config["customTool"].toolControlBar;const{title:i}=e.state.locale["customTool"];return p_.default.createElement(p_.default.Fragment,null,r&&p_.default.createElement(J.Sidebar.Heading,null,i),p_.default.createElement(t,{language:e.state.locale["customTool"]}))};var m_=v(x("react"));L();K();var wp=v(x("react"));L();B();lt();K();var lge=v(x("react"));L();B();K();var uge=E(()=>{const{filterTool:r,custom:e}=O();const t=r.locale.controls;const i=r.state;const o=()=>{r.toolSnapshot()};const n=e.getSlider();if(!n){return null}return lge.default.createElement(n,{identifier:"filter-intensity",tool:"filter","aria-hidden":!r.isOptionSelected,label:t.sliderIntensity,value:i.intensity,min:0,max:1,onChange:r.changeIntensity,onMouseUp:o,onTouchEnd:o,snap:i.isDuotone?.5:null,isDisabled:!r.isOptionSelected})});var Vr=v(x("react"));L();B();de();K();W();var GYe=E(()=>{const{filterTool:r,custom:e}=O();const{categories:t,config:i,items:o,locale:n}=r;const s=e.getAdvancedItemCard();const a=e.getAdvancedCategoryCard();const l=(d,m)=>{var b;const h=n.items[d.identifier]||d.name;const f=(b=n.controls)==null?void 0:b.itemAriaLabel;if(!s){return null}return Vr.default.createElement(s,{tool:"filter",type:"medium",onClick:()=>r.selectFilter(d.identifier,d.defaultIntensity),key:d.identifier,image:d.thumbnailURI,label:h,"aria-label":f==null?void 0:f.replace(`\${label}`,h),style:{animationDelay:`${Ue(m)}s`},isActive:r.identifier===d.identifier},Vr.default.createElement(zt,{withBackground:true},h))};const u=(d,m)=>{var y;const{selectedCategoryIdentifier:h}=r;const f=h===d.identifier;const b=n.categories[d.identifier]||d.name;const _=(y=n.controls)==null?void 0:y.categoryAriaLabel;if(!d.items||!a){return null}return Vr.default.createElement("div",{key:d.identifier},Vr.default.createElement(a,{role:"button","aria-expanded":f,"aria-label":_==null?void 0:_.replace(`\${label}`,b),isActive:f,tool:"filter",type:"large",onClick:()=>r.toggleCategorySelection(d.identifier),image:d.thumbnailURI,label:b,style:{animationDelay:`${Ue(m)}s`}},Vr.default.createElement(zt,{withBackground:true,caret:true,isActive:f},b)),Vr.default.createElement(J.Sidebar.ExpandableContainer,{show:f},d.items.map(l)))};const c=(d,m)=>{const h=n.categories[d.identifier]||d.name;if(!d.items)return null;return Vr.default.createElement(J.Sidebar.TextCategory,{key:d.identifier,name:h,isFirstCategory:m===0,isLastCategory:m===t.length-1},d.items.map(l))};if(i.flattenCategories)return Vr.default.createElement(Vr.default.Fragment,null,o.map(l));if(i.categoryHeaderType==="card")return Vr.default.createElement(Vr.default.Fragment,null,t.map(u));if(i.categoryHeaderType==="text")return Vr.default.createElement(Vr.default.Fragment,null,t.map(c));return null});var cge=()=>{return Vr.default.createElement(J.Itemsbar,null,Vr.default.createElement(J.CardContainer,null,Vr.default.createElement(GYe,null)))};var dge=v(x("react"));L();B();K();var pge=E(()=>{const{filterTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return dge.default.createElement(i,{tool:"filter",label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var mge=E(()=>{const{filterTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"items":return wp.default.createElement(cge,{key:o});case"separator":return wp.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"removeFilterButton":return wp.default.createElement(pge,{key:o});case"filterIntensitySlider":return wp.default.createElement(uge,{key:o});default:return null}}else if(typeof o==="object"){return wp.default.createElement(J.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)))}return null};return wp.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var hge=E(({displayTitle:r})=>{const{filterTool:e}=O();return m_.default.createElement(m_.default.Fragment,null,r&&m_.default.createElement(J.Sidebar.Heading,null,e.locale.title),m_.default.createElement(mge,null))});var h_=v(x("react"));L();K();var Tp=v(x("react"));L();B();lt();K();var fge=v(x("react"));L();B();K();var gge=E(()=>{const{focusTool:r,custom:e}=O();const t=r.locale.controls;const i=()=>{r.toolSnapshot(t.sliderIntensity)};const o=e.getSlider();if(!o){return null}return fge.default.createElement(o,{identifier:"focus-intensity",tool:"focus","aria-hidden":!r.isOptionSelected,label:t.sliderIntensity,value:r.relativeIntensity,min:0,max:100,divider:1,onChange:r.changeRelativeIntensity,onMouseUp:i,onTouchEnd:i,isDisabled:!r.isOptionSelected})});var cc=v(x("react"));L();B();de();K();W();var VYe=E(()=>{const{focusTool:r,custom:e}=O();const{items:t,locale:i}=r;const o=(n,s)=>{var c;const a=i.items[n.identifier]||n.name;const l=(c=i.controls)==null?void 0:c.itemAriaLabel;const u=e.getAdvancedItemCard();if(!u){return null}return cc.default.createElement(u,{tool:"focus",type:"large",onClick:()=>r.selectFocus(n.identifier),key:n.identifier,image:n.thumbnailURI,label:a,"aria-label":l==null?void 0:l.replace(`\${label}`,a),style:{animationDelay:`${Ue(s)}s`},isActive:n.identifier===r.identifier},cc.default.createElement(zt,{withBackground:true},a))};return cc.default.createElement(cc.default.Fragment,null,t.map(o))});var yge=()=>{return cc.default.createElement(J.Itemsbar,null,cc.default.createElement(J.CardContainer,null,cc.default.createElement(VYe,null)))};var bge=v(x("react"));L();B();K();var _ge=E(()=>{const{focusTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return bge.default.createElement(i,{tool:"focus",label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var vge=E(()=>{const{focusTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"separator":return Tp.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"removeFocusButton":return Tp.default.createElement(_ge,{key:o});case"focusIntensitySlider":return Tp.default.createElement(gge,{key:o});case"items":return Tp.default.createElement(yge,{key:o});default:return null}}else if(typeof o==="object"){return Tp.default.createElement(J.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)))}return null};return Tp.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var xge=E(({displayTitle:r})=>{const{focusTool:e}=O();return h_.default.createElement(h_.default.Fragment,null,r&&h_.default.createElement(J.Sidebar.Heading,null,e.locale.title),h_.default.createElement(vge,null))});var g_=v(x("react"));L();K();var Al=v(x("react"));L();B();lt();K();var nL=v(x("react"));L();B();ar();de();K();var Cge=E(()=>{const{frameTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{colorList:i,tintable:o}=r;return nL.default.createElement(z.Input.Selection,{isDisabled:!o,label:e.selectColor},nL.default.createElement(Wt,{tool:"frame",activeColor:r.color,colors:i,labelsColor:t,isDisabled:!o,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var f_=v(x("react"));L();B();de();K();W();var Sge=E(()=>{const{frameTool:r,custom:e}=O();const{items:t,locale:i}=r;const o=r.state?r.state.identifier:null;const n=(s,a)=>{var d;const l=i.items[s.identifier]||s.name;const u=(d=i.controls)==null?void 0:d.itemAriaLabel;const c=e.getAdvancedItemCard();if(!c){return null}return f_.default.createElement(c,{tool:"frame",type:"medium",onClick:()=>r.selectFrame(s.identifier),key:s.identifier,image:s.thumbnailURI,label:l,"aria-label":u==null?void 0:u.replace(`\${label}`,l),style:{backgroundSize:"75%",animationDelay:`${Ue(a)}s`},isActive:s.identifier===o},f_.default.createElement(zt,{hidden:true},l))};return f_.default.createElement(J.Itemsbar,null,f_.default.createElement(J.CardContainer,null,t.map(n)))});var wge=v(x("react"));L();B();K();var Tge=E(()=>{const{frameTool:r,custom:e}=O();const t=r.locale.controls;const i=n=>{r.toolSnapshot(n)};const o=e.getSlider();if(!o){return null}return wge.default.createElement(o,{identifier:"frame-opacity",tool:"frame","aria-hidden":!r.isOptionSelected,label:t.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:()=>{i(t.sliderOpacity)},onTouchEnd:()=>{i(t.sliderOpacity)},isDisabled:!r.isOptionSelected})});var Ige=v(x("react"));L();B();K();var Ege=E(()=>{const{frameTool:r,custom:e}=O();const t=r.locale.controls;const i=n=>{r.toolSnapshot(n)};const o=e.getSlider();if(!o){return null}return Ige.default.createElement(o,{identifier:"frame-size",tool:"frame","aria-hidden":!r.isOptionSelected,label:t.sliderSize,value:r.size,min:r.minSize,max:r.maxSize,divider:1,onChange:r.changeWidth,onMouseUp:()=>{i(t.sliderSize)},onTouchEnd:()=>{i(t.sliderSize)},isDisabled:!r.isOptionSelected})});var kge=v(x("react"));L();B();K();var Dge=E(()=>{const{frameTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return kge.default.createElement(i,{tool:"frame",ariaLabel:t.buttonReset,onClick:o,isDisabled:!r.isOptionSelected,label:t.buttonReset})});var Oge=E(()=>{const{frameTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"items":return Al.default.createElement(Sge,{key:o});case"separator":return Al.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"frameOpacitySlider":return Al.default.createElement(Tge,{key:o});case"frameSizeSlider":return Al.default.createElement(Ege,{key:o});case"frameColorList":return Al.default.createElement(Cge,{key:o});case"removeFrameButton":return Al.default.createElement(Dge,{key:o});default:return null}}else if(typeof o==="object"){return Al.default.createElement(J.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)))}return null};return Al.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Rge=E(({displayTitle:r})=>{const{frameTool:e}=O();return g_.default.createElement(g_.default.Fragment,null,r&&g_.default.createElement(J.Sidebar.Heading,null,e.locale.title),g_.default.createElement(Oge,null))});var y_=v(x("react"));L();K();var Ip=v(x("react"));L();B();lt();K();var pr=v(x("react"));L();B();de();K();W();var jYe=E(()=>{const{active:r,library:e,custom:t}=O();const{query:i,config:o,selectedCategoryIdentifier:n,categories:s,items:a,locale:l}=e;const u=t.getAdvancedCategoryCard();const c=t.getAdvancedItemCard();const d=(f,b)=>{var y;const _=(y=l.controls)==null?void 0:y.itemAriaLabel;if(!c){return null}return pr.default.createElement(c,{tool:"library",type:"medium",onClick:()=>r.newImage(f.rawUrl),key:`${f.identifier}-${b}`,image:f.thumbnailURI,label:f.name,"aria-label":_==null?void 0:_.replace(`\${label}`,f.name),style:{animationDelay:`${Ue(b)}s`},authorAvatar:f.authorAvatar,authorName:f.authorName},f.authorAvatar&&pr.default.createElement(Xc,{url:f.authorAvatar}),f.authorName&&pr.default.createElement(zt,{withBackground:true},f.authorName))};const m=(f,b)=>{var I;const _=n===f.identifier;const y=(I=l.controls)==null?void 0:I.categoryAriaLabel;if(!f.items||!u){return null}return pr.default.createElement("div",{key:f.identifier},pr.default.createElement(u,{role:"button","aria-expanded":_,"aria-label":y==null?void 0:y.replace(`\${label}`,f.name),isActive:_,tool:"library",type:"large",onClick:()=>e.toggleCategorySelection(f.identifier),image:f.thumbnailURI,label:f.name,style:{animationDelay:`${Ue(b)}s`}},pr.default.createElement(zt,{withBackground:true,caret:true,isActive:_},f.name)),pr.default.createElement(J.Sidebar.ExpandableContainer,{show:_},f.items.map(d)))};const h=(f,b)=>{if(!f.items)return null;return pr.default.createElement(J.Sidebar.TextCategory,{key:f.identifier,name:f.name,isFirstCategory:b===0,isLastCategory:b===s.length-1},f.items.map(d))};if(i)return a.length?pr.default.createElement(pr.default.Fragment,null,a.map(d)):pr.default.createElement("p",{"data-test":G.NoResult},e.locale.controls.noResults);if(o.flattenCategories)return pr.default.createElement(pr.default.Fragment,null,a.map(d));if(o.categoryHeaderType==="card")return pr.default.createElement(pr.default.Fragment,null,s.map(m));if(o.categoryHeaderType==="text")return pr.default.createElement(pr.default.Fragment,null,s.map(h));return null});var Age=()=>{return pr.default.createElement(J.Itemsbar,null,pr.default.createElement(J.CardContainer,null,pr.default.createElement(jYe,null)))};var zge=v(x("react"));L();B();K();sL();var Uge=E(()=>{const{library:r,active:e}=O();const{config:t}=r;const i=r.locale.controls;const o=()=>{e.selectWebcam(true)};if(t.enableWebcam){return zge.default.createElement(vT,{tool:"library",onClick:o,label:i.buttonWebcamOpen})}return null});var Nge=v(x("react"));L();de();K();var qge=E(()=>{const{library:r}=O();const{libraryProvider:e}=r;const t=r.locale.controls;const i=o=>{r.fetchImages(o)};if(e){return Nge.default.createElement(z.Input.Search,{onChange:i,placeholder:t.placeholderSearch})}return null});var aL=v(x("react"));L();B();de();K();W();var Hge=E(()=>{const{library:r,active:e,custom:t}=O();const{config:i}=r;const o=r.locale.controls;const n=t.getButton("toolControlBarPrimaryButton");const s=l=>{const{files:u}=l.target;if(u.length){const c=new FileReader;c.onload=d=>{e.newImage(d.target.result)};c.readAsDataURL(u[0])}};const a=()=>{const l=document.getElementById("fileUpload");if(l){l.click()}};if(i.enableUpload){if(!n){return null}return aL.default.createElement(n,{"data-test":G.LibraryUploadButton,tool:"library",ariaLabel:o.buttonUpload,onClick:a,label:o.buttonUpload},aL.default.createElement(z.Input.File,{onChange:s}))}return null});var Wge=E(()=>{const{library:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{switch(o){case"items":return Ip.default.createElement(Age,{key:o});case"openWebcamButton":return Ip.default.createElement(Uge,{key:o});case"searchFieldInput":return Ip.default.createElement(qge,{key:o});case"separator":return Ip.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"uploadImageButton":return Ip.default.createElement(Hge,{key:o});default:return null}};return Ip.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Gge=E(({displayTitle:r})=>{const{library:e}=O();return y_.default.createElement(y_.default.Fragment,null,r&&y_.default.createElement(J.Sidebar.Heading,null,e.locale.title),y_.default.createElement(Wge,null))});var b_=v(x("react"));L();K();var pc=v(x("react"));L();B();lt();K();var Vge=v(x("react"));L();de();K();var jge=E(()=>{const{overlayTool:r}=O();const{allBlendModes:e,blendMode:t}=r;const i=r.locale.controls;const o=n=>{r.changeBlendMode(n)};return Vge.default.createElement(z.Input.CarouselSlider,{label:i.carouselBlendMode,defaultIdentifier:t,onSelect:o,list:e})});var dc=v(x("react"));L();B();de();K();W();var $Ye=E(()=>{const{overlayTool:r,custom:e}=O();const{items:t,locale:i,identifier:o,selectOverlay:n}=r;const s=(a,l)=>{var m;const u=i.items[a.identifier]||a.name;const c=(m=i.controls)==null?void 0:m.itemAriaLabel;const d=e.getAdvancedItemCard();if(!d){return null}return dc.default.createElement(d,{tool:"overlay",type:"medium",onClick:()=>n(a.identifier),key:a.identifier,image:a.thumbnailURI,label:u,"aria-label":c==null?void 0:c.replace(`\${label}`,u),style:{animationDelay:`${Ue(l)}s`},isActive:a.identifier===o},dc.default.createElement(zt,{withBackground:true},u))};return dc.default.createElement(dc.default.Fragment,null,t.map(s))});var $ge=()=>{return dc.default.createElement(J.Itemsbar,null,dc.default.createElement(J.CardContainer,null,dc.default.createElement($Ye,null)))};var Kge=v(x("react"));L();B();K();var Xge=E(()=>{const{overlayTool:r,custom:e}=O();const t=r.locale.controls;const i=()=>{r.toolSnapshot()};const o=e.getSlider();if(!o){return null}return Kge.default.createElement(o,{identifier:"overlay-opacity",tool:"overlay","aria-hidden":!r.isOptionSelected,label:t.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:i,onTouchEnd:i,isDisabled:!r.isOptionSelected})});var Yge=v(x("react"));L();B();K();var Jge=E(()=>{const{overlayTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return Yge.default.createElement(i,{tool:"overlay",label:t.buttonReset,ariaLabel:t.buttonReset,isDisabled:!r.isOptionSelected,onClick:o})});var Zge=E(()=>{const{overlayTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"items":return pc.default.createElement($ge,{key:o});case"separator":return pc.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"overlayBlendModeCarousel":return pc.default.createElement(jge,{key:o});case"overlayOpacitySlider":return pc.default.createElement(Xge,{key:o});case"removeOverlayButton":return pc.default.createElement(Jge,{key:o});default:return null}}else if(typeof o==="object"){return pc.default.createElement(J.Controlsbar,{key:o.type,show:r.isOptionSelected},o.children.map(n=>i(n)))}return null};return pc.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Qge=E(({displayTitle:r})=>{const{overlayTool:e}=O();return b_.default.createElement(b_.default.Fragment,null,r&&b_.default.createElement(J.Sidebar.Heading,null,e.locale.title),b_.default.createElement(Zge,null))});var __=v(x("react"));L();K();var Ep=v(x("react"));L();B();lt();K();var lL=v(x("react"));L();B();ar();de();K();var eye=E(()=>{const{stickerTool:r}=O();const{colorList:e}=r;const t=r.locale.controls;const i=r.localeColor.colorPicker;const o=!r.isStickerSelected||!r.tintable&&r.isStickerSelected;return lL.default.createElement(z.Input.Selection,{isDisabled:o,label:t.selectColor},lL.default.createElement(Wt,{tool:"sticker",activeSprite:r.id,activeColor:r.tintColor,colors:e,labelsColor:i,isDisabled:o,onChange:r.changeTintColor,onAddSnapshot:r.tintColorSnapshot}))});var jr=v(x("react"));L();B();de();K();W();var KYe=E(()=>{const{stickerTool:r,custom:e}=O();const{categories:t,selectedCategoryIdentifier:i,config:o,items:n,locale:s}=r;const a=e.getAdvancedCategoryCard();const l=e.getAdvancedItemCard();const u=(m,h)=>{var _;const f=s.items[m.identifier]||m.name;const b=(_=s.controls)==null?void 0:_.itemAriaLabel;if(!l){return null}return jr.default.createElement(l,{key:m.identifier,tool:"sticker",type:"small",onClick:()=>r.add(m.identifier),image:m.thumbnailURI,label:f,"aria-label":b==null?void 0:b.replace(`\${label}`,f),style:{backgroundSize:"75%",animationDelay:`${G0(h)}s`}},jr.default.createElement(zt,{hidden:true},f))};const c=(m,h)=>{var y;const f=i===m.identifier;const b=s.categories[m.identifier]||m.name;const _=(y=s.controls)==null?void 0:y.categoryAriaLabel;if(!m.items||!a){return null}return jr.default.createElement("div",{key:m.identifier},jr.default.createElement(a,{role:"button","aria-expanded":f,"aria-label":_==null?void 0:_.replace(`\${label}`,b),isActive:f,tool:"sticker",type:"large",onClick:()=>r.toggleCategorySelection(m.identifier),image:m.thumbnailURI,label:b,style:{animationDelay:`${Ue(h)}s`}},jr.default.createElement(zt,{withBackground:true,caret:true,isActive:f},b)),jr.default.createElement(J.Sidebar.ExpandableContainer,{show:f,key:`${m.identifier}-items`},m.items.map(u)))};const d=(m,h)=>{const f=s.categories[m.identifier]||m.name;if(!m.items)return null;return jr.default.createElement(J.Sidebar.TextCategory,{key:m.identifier,name:f,isFirstCategory:h===0,isLastCategory:h===t.length-1},m.items.map(u))};if(o.flattenCategories)return jr.default.createElement(jr.default.Fragment,null,n.map(u));if(o.categoryHeaderType==="card")return jr.default.createElement(jr.default.Fragment,null,t.map(c));if(o.categoryHeaderType==="text")return jr.default.createElement(jr.default.Fragment,null,t.map(d));return null});var tye=()=>{return jr.default.createElement(J.Itemsbar,null,jr.default.createElement(J.CardContainer,null,jr.default.createElement(KYe,null)))};var rye=v(x("react"));L();B();K();var iye=E(()=>{const{stickerTool:r,custom:e}=O();const t=r.locale.controls;const i=()=>{r.toolSnapshot()};const o=e.getSlider();if(!o){return null}return rye.default.createElement(o,{identifier:"sticker-opacity",tool:"sticker",isDisabled:!r.isStickerSelected,label:t.sliderOpacity,value:r.opacity,min:0,max:1,onChange:r.changeOpacity,onMouseUp:i,onTouchEnd:i})});var uL=v(x("react"));L();var oye=v(x("styled-components"));B();de();K();var XYe=oye.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:true})`
  ${HC.VisuallyHidden}
`;var nye=E(()=>{const{stickerTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarPrimaryButton");const o=()=>{const s=document.getElementById("fileUpload");if(s){s.value=null;s.click()}};const n=s=>{const{files:a}=s.target;r.addFiles(a)};if(r.isCustomStickerEnabled){if(!i){return null}return uL.default.createElement(i,{tool:"sticker",ariaLabel:t.buttonUpload,onClick:o,label:t.buttonUpload},uL.default.createElement(XYe,{onChange:n}))}return null});var sye=E(()=>{const{stickerTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{switch(o){case"items":return Ep.default.createElement(tye,{key:o});case"separator":return Ep.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"uploadStickerButton":return Ep.default.createElement(nye,{key:o});case"stickerColorList":return Ep.default.createElement(eye,{key:o});case"stickerOpacitySlider":return Ep.default.createElement(iye,{key:o});default:return null}};return Ep.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var aye=E(({displayTitle:r})=>{const{stickerTool:e}=O();return __.default.createElement(__.default.Fragment,null,r&&__.default.createElement(J.Sidebar.Heading,null,e.locale.title),__.default.createElement(sye,null))});var v_=v(x("react"));L();K();var Xn=v(x("react"));L();var xye=v(x("styled-components"));B();lt();var cL=v(x("react"));L();B();ar();de();K();var lye=E(()=>{const{textTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{isTextSelected:i,backgroundColorList:o}=r;return cL.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectBackgroundColor},cL.default.createElement(Wt,{tool:"text",activeSprite:r.id,activeColor:r.backgroundColor,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeBackgroundColor,onAddSnapshot:r.backgroundColorSnapshot}))});var uye=v(x("react"));L();de();lt();K();var cye=E(()=>{const{textTool:r}=O();const e=r.locale.controls;const{fontFamily:t,fontStyle:i,fontWeight:o,fontFamilies:n,isTextSelected:s}=r;const a=n.map(u=>({label:`${u.fontFamily} ${Ee.getDisplayFontStyle(u)}`,fontWeight:u.fontWeight,fontStyle:u.fontStyle,fontFamily:u.fontFamily,value:u.identifier}));const l=a.filter(({value:u})=>u===r.identifier)[0];return uye.default.createElement(z.Input.Dropdown,{isDisabled:!s,style:{fontFamily:t,fontStyle:i,fontWeight:o},itemStyle:u=>({fontFamily:u.fontFamily,fontStyle:u.fontStyle,fontWeight:u.fontWeight}),label:e.dropdownFontFamily,list:a,onSelect:r.changeFont,selectedItem:l.label})});var dye=v(x("react"));L();var pye=v(x("styled-components"));de();K();var YYe=(0,pye.default)(z.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`;var mye=E(()=>{const{textTool:r}=O();const e=r.locale.controls;const{isTextSelected:t}=r;const i=o=>{const n=o?parseFloat(o):0;r.setFontSize(Math.max(10,Math.min(690,n)))};return dye.default.createElement(YYe,{id:"photoeditorsdk-text-font-size-input",value:r.fontSize.toFixed(0),onSubmit:i,label:e.textFontSize,isDisabled:!t})});var hye=v(x("react"));L();B();K();var fye=E(()=>{const{textTool:r,custom:e}=O();const t=r.locale.controls;const{isTextSelected:i}=r;const o=()=>{r.toolSnapshot()};const n=e.getSlider();if(!n){return null}return hye.default.createElement(n,{identifier:"text-line-spacing",tool:"text",isDisabled:!i,label:t.sliderLineSpacing,value:r.lineHeight,min:.5,max:3,onChange:r.changeLineHeight,onMouseUp:o,onTouchEnd:o,snap:1,divider:1,decimal:1})});var gye=v(x("react"));L();B();K();var yye=E(()=>{const{textTool:r,custom:e}=O();const t=r.locale.controls;const i=()=>{r.add()};const o=e.getButton("toolControlBarPrimaryButton");if(!o){return null}return gye.default.createElement(o,{tool:"text",ariaLabel:t.buttonNew,onClick:i,label:t.buttonNew})});var xT=v(x("react"));L();var bye=v(x("styled-components"));de();K();Ut();W();var JYe=(0,bye.default)(z.Input.Selection)`
  width: 50%;
`;var _ye=E(()=>{const{textTool:r,custom:e}=O();const t=r.locale.controls;const{isTextSelected:i,alignment:o}=r;const n=["left","center","right"];const s=e.getButton("textAlignment");return xT.default.createElement(JYe,{isDisabled:!i,inline:true,label:t.selectAlignment,"data-test":G.TextAlignment},n.map(a=>{const l=KC[a];return xT.default.createElement(s,{tool:a,isDisabled:!i,ariaLabel:`Align ${a}`,isActive:a===o,key:a,style:{padding:"1px 3px 2px"},icon:xT.default.createElement(l,null),onClick:()=>r.changeAlignment(a)})}))});var dL=v(x("react"));L();B();ar();de();K();var vye=E(()=>{const{textTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{isTextSelected:i,colorList:o}=r;return dL.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectFontColor},dL.default.createElement(Wt,{tool:"text",activeSprite:r.id,activeColor:r.textColor,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var ZYe=xye.default.div`
  display: flex;
  justify-content: space-between;
`;var QYe=({textTool:r})=>{const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{if(typeof o==="string"){switch(o){case"newTextButton":return Xn.default.createElement(yye,{key:o});case"fontFamilyDropdown":return Xn.default.createElement(cye,{key:o});case"separator":return Xn.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"textColorList":return Xn.default.createElement(vye,{key:o});case"backgroundColorList":return Xn.default.createElement(lye,{key:o});case"lineSpacingSlider":return Xn.default.createElement(fye,{key:o});case"textAlignmentList":return Xn.default.createElement(_ye,{key:o});case"fontSizeInput":return Xn.default.createElement(mye,{key:o});default:return null}}else if(typeof o==="object"){return Xn.default.createElement(ZYe,{key:o.type},o.children.map(n=>i(n)))}return null};return Xn.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))};var Cye=me("textTool")(E(QYe));var Sye=E(({displayTitle:r})=>{const{textTool:e}=O();return v_.default.createElement(v_.default.Fragment,null,r&&v_.default.createElement(J.Sidebar.Heading,null,e.locale.title),v_.default.createElement(Cye,null))});var x_=v(x("react"));L();K();var kp=v(x("react"));L();B();lt();K();var wye=v(x("react"));L();B();K();var Tye=E(()=>{const{textDesignTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarPrimaryButton");const o=()=>{r.add()};if(!i){return null}return wye.default.createElement(i,{tool:"textdesign",ariaLabel:t.buttonNew,onClick:o,label:t.buttonNew})});var Iye=v(x("react"));L();B();K();var Eye=E(()=>{const{textDesignTool:r,custom:e}=O();const t=r.locale.controls;const{isTextDesignSelected:i}=r;const o=e.getButton("toolControlBarSecondaryButton");const n=()=>{r.changeSeed()};if(!o){return null}return Iye.default.createElement(o,{tool:"textdesign",ariaLabel:t.buttonShuffle,isDisabled:!i,onClick:n,label:t.buttonShuffle})});var pL=v(x("react"));L();B();ar();de();K();var kye=E(()=>{const{textDesignTool:r}=O();const e=r.locale.controls;const t=r.localeColor.colorPicker;const{isTextDesignSelected:i,colorList:o}=r;return pL.default.createElement(z.Input.Selection,{isDisabled:!i,label:e.selectColor},pL.default.createElement(Wt,{tool:"textdesign",activeSprite:r.id,activeColor:r.color,colors:o,labelsColor:t,isDisabled:!i,onChange:r.changeColor,onAddSnapshot:r.colorSnapshot}))});var mc=v(x("react"));L();B();de();K();W();var eJe=E(()=>{const{textDesignTool:r,custom:e}=O();const{items:t,identifier:i,locale:o}=r;const n=a=>{r.changeIdentifier(a)};const s=(a,l)=>{var d;const u=(d=o.controls)==null?void 0:d.itemAriaLabel;const c=e.getAdvancedItemCard();if(!c){return null}return mc.default.createElement(c,{key:a.identifier,tool:"textdesign",type:"medium",onClick:()=>n(a.identifier),image:a.thumbnailURI,label:a.name||"","aria-label":u==null?void 0:u.replace(`\${label}`,a.name),style:{animationDelay:`${Ue(l)}s`,backgroundSize:"60%"},isDisabled:!r.isTextDesignSelected,isActive:i===a.identifier},mc.default.createElement(zt,{hidden:true},a.name))};return mc.default.createElement(mc.default.Fragment,null,t.map(s))});var Dye=()=>{return mc.default.createElement(J.Itemsbar,null,mc.default.createElement(J.CardContainer,null,mc.default.createElement(eJe,null)))};var Oye=E(()=>{const{textDesignTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{switch(o){case"items":return kp.default.createElement(Dye,{key:o});case"separator":return kp.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"newTextDesignButton":return kp.default.createElement(Tye,{key:o});case"shuffleLayoutButton":return kp.default.createElement(Eye,{key:o});case"textDesignColorList":return kp.default.createElement(kye,{key:o});default:return null}};return kp.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Rye=E(({displayTitle:r})=>{const{textDesignTool:e}=O();return x_.default.createElement(x_.default.Fragment,null,r&&x_.default.createElement(J.Sidebar.Heading,null,e.locale.title),x_.default.createElement(Oye,null))});var C_=v(x("react"));L();K();var Dp=v(x("react"));L();B();lt();K();var Aye=v(x("react"));L();ar();K();var Fye=E(()=>{const{transformTool:r}=O();const e=r.locale.controls;const{forceDimensions:t,localOutputHeight:i,localOutputWidth:o}=r;return Aye.default.createElement(t_,{isDisabled:t,showLabel:true,valueHeight:i,valueWidth:o,onSubmitWidth:r.onPixelWidth,onSubmitHeight:r.onPixelHeight,label:e.inputCropSize,labelHeight:e.inputHeight,labelWidth:e.inputWidth,ariaLabelHeight:e.inputHeightAriaLabel,ariaLabelWidth:e.inputWidthAriaLabel})});var Pye=v(x("react"));L();B();K();var Bye=E(()=>{const{transformTool:r,custom:e}=O();const t=r.locale.controls;const{forceDimensions:i,lockResolution:o}=r;const n=e.getCheckbox();if(!n){return null}return Pye.default.createElement(n,{tool:"transform",isDisabled:i,value:o,label:t.checkboxKeepResolution,checkMarkPosition:"right",onClick:r.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}})});var Mye=v(x("react"));L();B();K();var Lye=E(()=>{const{transformTool:r,custom:e}=O();const t=r.locale.controls;const i=e.getButton("toolControlBarSecondaryButton");const o=()=>{r.reset()};if(!i){return null}return Mye.default.createElement(i,{tool:"transform",ariaLabel:t.buttonReset,onClick:o,label:t.buttonReset})});var kr=v(x("react"));L();var mL=x("react-dom/server");B();de();K();Ut();W();var tJe=E(()=>{const{transformTool:r,custom:e,editor:t}=O();const{categories:i,items:o,identifier:n,config:s,locale:a}=r;const l=e.getAdvancedItemCard();const u=e.getAdvancedCategoryCard();const c=(h,f)=>{var P;const{theme:b,measurements:_}=t.configStore;const y=a.items[h.identifier]||h.name;const I=(P=a.controls)==null?void 0:P.itemAriaLabel;let T=h.thumbnailURI||"";let D="80%";if(!r.checkIfTransformThumbnailExits(h.thumbnailURI)){const k=h.identifier.includes("imgly_transform_common");const A=it.crops[h.identifier]||it.crops.imgly_transform_common_custom;const Q=kr.default.createElement(A,{width:_.advancedUICard.medium.width-(k?42:0),height:_.advancedUICard.medium.height-(k?42:0),main:b.transform.crops.main,highlight:b.transform.crops.highlight,shadow:b.transform.crops.shadow});T=`'data:image/svg+xml,${encodeURIComponent((0,mL.renderToStaticMarkup)(Q))}'`;D=Mt()||po()?"auto":"unset"}if(!l){return null}return kr.default.createElement(l,{key:h.identifier,tool:"transform",type:"medium",onClick:()=>r.changeIdentifier(h.identifier,true),image:T,label:y,"aria-label":I==null?void 0:I.replace(`\${label}`,y),style:{backgroundSize:D,animationDelay:`${Ue(f)}s`},isActive:h.identifier===n},kr.default.createElement(zt,null,y))};const d=(h,f)=>{var P;const{theme:b,measurements:_}=t.configStore;const y=r.selectedCategoryIdentifier===h.identifier;const I=a.categories[h.identifier]||h.name;const T=(P=a.controls)==null?void 0:P.categoryAriaLabel;let D=h.thumbnailURI||"";if(!h.items||!u){return null}if(!r.checkIfTransformThumbnailExits(h.thumbnailURI)){const k=it.categories[h.identifier]||it.crops.imgly_transform_common_custom;const A=kr.default.createElement(k,{width:_.advancedUICard.large.width-42,height:_.advancedUICard.large.height-42,main:b.transform.crops.main,highlight:b.transform.crops.highlight,shadow:b.transform.crops.shadow});D=`'data:image/svg+xml,${encodeURIComponent((0,mL.renderToStaticMarkup)(A))}'`}return kr.default.createElement("div",{key:h.identifier},kr.default.createElement(u,{role:"button","aria-expanded":y,"aria-label":T==null?void 0:T.replace(`\${label}`,I),isActive:y,type:"large",onClick:()=>r.toggleCategorySelection(h.identifier),key:h.identifier,image:D,style:{animationDelay:`${Ue(f)}s`},label:h.name,tool:"transform"},kr.default.createElement(zt,{caret:true,isActive:y},I)),kr.default.createElement(J.Sidebar.ExpandableContainer,{show:y},h.items.map(c)))};const m=(h,f)=>{const b=a.categories[h.identifier]||h.name;if(!h.items)return null;return kr.default.createElement(J.Sidebar.TextCategory,{key:h.identifier,name:b,isFirstCategory:f===0,isLastCategory:f===i.length-1},h.items.map(c))};if(s.flattenCategories)return kr.default.createElement(kr.default.Fragment,null,o.map(c));if(s.categoryHeaderType==="card")return kr.default.createElement(kr.default.Fragment,null,i.map(d));if(s.categoryHeaderType==="text")return kr.default.createElement(kr.default.Fragment,null,i.map(m));return null});var zye=()=>{return kr.default.createElement(J.Itemsbar,null,kr.default.createElement(J.CardContainer,null,kr.default.createElement(tJe,null)))};var Uye=E(()=>{const{transformTool:r}=O();const{config:e}=r;const{advancedUIToolControlBarOrder:t}=e;const i=o=>{switch(o){case"items":return Dp.default.createElement(zye,{key:o});case"separator":return Dp.default.createElement(J.ItemsSeparator,{full:true,key:Ge()});case"resetTransformButton":return Dp.default.createElement(Lye,{key:o});case"keepResolutionCheckbox":return Dp.default.createElement(Bye,{key:o});case"cropSizeInput":return Dp.default.createElement(Fye,{key:o});default:return null}};return Dp.default.createElement(J.ToolControlBarItems,null,t.map(o=>i(o)))});var Nye=E(({displayTitle:r})=>{const{transformTool:e}=O();return C_.default.createElement(C_.default.Fragment,null,r&&C_.default.createElement(J.Sidebar.Heading,null,e.locale.title),C_.default.createElement(Uye,null))});var hL=E(function r(){const{active:e,config:t,custom:i}=O();const o=e.tool;const n=t.config.displayToolControlBarTitle;const s=i.getAdvancedToolControlBar();if(!s){return null}return kt.default.createElement(s,{reverse:t.config.order==="reverse",tool:o},kt.default.createElement(z.Switch.Index,{type:o},kt.default.createElement(z.Switch.Case,{value:"library"},kt.default.createElement(Gge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"filter"},kt.default.createElement(hge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"focus"},kt.default.createElement(xge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"adjustment"},kt.default.createElement(Jfe,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"overlay"},kt.default.createElement(Qge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"sticker"},kt.default.createElement(aye,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"text"},kt.default.createElement(Sye,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"textdesign"},kt.default.createElement(Rye,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"frame"},kt.default.createElement(Rge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"brush"},kt.default.createElement(sge,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"transform"},kt.default.createElement(Nye,{displayTitle:n})),kt.default.createElement(z.Switch.Case,{value:"customTool"},kt.default.createElement(age,{displayTitle:n}))))});var qye=Hye.default.div`
  position: absolute;
  height: 100%;
  width: ${r=>r.theme.measurements.advancedUIToolbar.width+r.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${r=>r.theme.webcam.backdrop};
  z-index: ${r=>r.theme.measurements.zIndex.disable};
`;var S_=class extends Jt.default.Component{static getDerivedStateFromError(e){console.error(e);return{hasError:true}}render(){const{config:e,active:t,canvas:i,custom:o}=this.props;const n=o.getWindowContainer();return e.isOrderDefault?Jt.default.createElement(z.Container,null,t.isWebcam?Jt.default.createElement(qye,{style:{left:0}}):null,Jt.default.createElement(hf,null),Jt.default.createElement(iL,null),Jt.default.createElement(hL,null),Jt.default.createElement(Iu,null,Jt.default.createElement(nf,null),n&&Jt.default.createElement(n,{tool:t.tool},Jt.default.createElement(u_,null,t.isWebcam?Jt.default.createElement(l_,null):null,t.image&&i&&Jt.default.createElement(pf,null))))):Jt.default.createElement(z.Container,null,t.isWebcam?Jt.default.createElement(qye,{style:{right:0}}):null,Jt.default.createElement(hf,null),Jt.default.createElement(Iu,null,Jt.default.createElement(nf,null),n&&Jt.default.createElement(n,{tool:t.tool},Jt.default.createElement(u_,null,t.isWebcam?Jt.default.createElement(l_,null):null,t.image&&i&&Jt.default.createElement(pf,null)))),Jt.default.createElement(hL,null),Jt.default.createElement(iL,null))}};S_=g([me("config","active","canvas","custom"),E],S_);var xf=v(x("react"));var Wye=v(x("styled-components"));var Gye=class extends xf.default.Component{constructor(e){super(e);this.ref=null;this.updatePosition=()=>{const{isReverse:e}=this.props;const t={x:0,y:0};if(this.ref.current){const{top:i,height:o,left:n,right:s}=this.ref.current.getBoundingClientRect();t.y=i+o/4;t.x=e?window.innerWidth-s:n}this.setState({tooltipPosition:t})};this.mouseOver=e=>{this.updatePosition();this.setState({hoverTool:e})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}};this.ref=xf.default.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){const{isReverse:t}=this.props;if(t!==e.isReverse){this.updatePosition()}}render(){const{tool:e,isActive:t,isReverse:i,isDisabled:o,icon:n,label:s,onClick:a,className:l,children:u}=this.props;const{hoverTool:c,tooltipPosition:d}=this.state;return xf.default.createElement(rJe,{ref:this.ref,onMouseOver:()=>this.mouseOver(e),onMouseOut:()=>this.mouseOut(),onFocus:()=>this.mouseOver(e),onBlur:()=>this.mouseOut(),className:l},xf.default.createElement(J.Toolbar.Item,{ariaLabel:s,isActive:t,isDisabled:o,onClick:()=>a(e)},n,u),xf.default.createElement(J.Toolbar.Tooltip,{position:d,reverse:i,show:c===e},s))}};var w_=Gye;var rJe=Wye.default.div`
  position: relative;
`;var CT=class extends T_.default.Component{constructor(){super(...arguments);this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:e,storeProps:t}=this.props;this.editor=e;this.storeProps=t;const i=new mf(this.editor.configStore.config.custom.components,{advancedUICategoryCard:J.Card,advancedUIItemCard:J.Card,advancedUIToolbarItem:w_,advancedUIToolbar:J.Toolbar.Index,advancedUIToolControlBar:J.Sidebar.Index});const o={getAdvancedCategoryCard:i.getAdvancedCategoryCard,getAdvancedItemCard:i.getAdvancedItemCard,getAdvancedToolbarItem:i.getAdvancedToolbarItem,getAdvancedToolbar:i.getAdvancedToolbar,getAdvancedToolControlBar:i.getAdvancedToolControlBar,getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox,getWindowContainer:i.getWindowContainer,getSlider:i.getSlider};this.storeProps.custom=o;this.forceUpdate()}render(){return this.storeProps?T_.default.createElement(qg,{...this.storeProps},T_.default.createElement(Vye.ThemeProvider,{theme:{...this.editor.configStore.theme,measurements:this.editor.configStore.measurements}},T_.default.createElement(S_,null))):null}};ut();N5();de();zR();GC();var V_=v(x("react"));var kL=v(x("react-dom"));B();lt();var ca=v(x("react"));var ZJe=ca.default.lazy(()=>Promise.resolve().then(()=>(Pxe(),Fxe)));var QJe=r=>{return{filterTool:r.filterToolStore,focusTool:r.focusToolStore,adjustmentsTool:r.adjustmentsToolStore,overlayTool:r.overlayToolStore,frameTool:r.frameToolStore,brushTool:r.brushToolStore,transformTool:r.transformToolStore,scale:r.scale,sprite:r.spriteStore,stickerTool:r.spriteStore.stickerToolStore,textTool:r.spriteStore.textToolStore,textDesignTool:r.spriteStore.textDesignToolStore,library:r.libraryStore,modal:r.modalStore,snapping:r.snappingStore,config:r.configStore,active:r.activeStore,canvas:r.canvasStore,history:r.historyStore,editor:r}};var qT=({editor:r})=>{const e=(0,ca.useMemo)(()=>{return QJe(r)},[r]);if(r.configStore.config.layout==="basic"){return ca.default.createElement(ca.Suspense,{fallback:ca.default.createElement("div",null)},ca.default.createElement(ZJe,{editor:r,storeProps:e}))}return ca.default.createElement(CT,{editor:r,storeProps:e})};var Bxe=class extends mo{constructor(e,t,i){super();this.dispose=()=>{if(this.container){kL.default.unmountComponentAtNode(this.container);this.removeAllListeners("export");this.removeAllListeners("historyUndo");this.removeAllListeners("historyRedo");this.removeAllListeners("historyChange");this.removeAllListeners("editorReady");this.removeAllListeners("errorImageLoading");this.removeAllListeners("imageLoad");this.removeAllListeners("toolEnter");this.removeAllListeners("stickerUploadAdd");this.removeAllListeners("errorWebGLContextLost");this.removeAllListeners("cropDimensionsChange");if(this.editor){this.editor.dispose()}}};this.serialize=e=>{return this.editor.serialize(e)};this.deserialize=e=>{return this.editor.deserialize(e)};this.export=e=>{return this.editor.export(e)};this.close=()=>{return this.editor.close()};this.setImage=e=>{return this.editor.setImage(e,true)};this.getImageDimensions=()=>{return this.editor.getImageDimensions()};this.getImageMimeType=()=>{return this.editor.getImageMimeType()};this.reset=()=>{this.editor.resetToolStates();this.editor.resize()};this.container=t;const o={["export"]:n=>{this.emit("export",n)},["close"]:()=>{this.emit("close");this.dispose()},["historyUndo"]:()=>{this.emit("historyUndo")},["historyRedo"]:()=>{this.emit("historyRedo")},["historyChange"]:()=>{this.emit("historyChange")},["stickerUploadAdd"]:n=>{this.emit("stickerUploadAdd",n)},["cropDimensionsChange"]:n=>{this.emit("cropDimensionsChange",n)}};if(i){Object.entries(i).forEach(([n,s])=>{o[n]=s(this)})}this.editor=new oc({...e},o)}hasChanges(){return this.editor.hasChanges()}};var Mxe=class{constructor(){this.container=null}init(e){return new Promise((t,i)=>{if(typeof window==="undefined"){t();return}this.container=typeof e.container==="string"?document.querySelector(e.container):e.container;if(this.container){this.editorApi=new Bxe(e,this.container,{["editorReady"]:o=>()=>{setTimeout(()=>{o.emit("editorReady")},0);t(o)},["errorImageLoading"]:o=>n=>{setTimeout(()=>{o.emit("errorImageLoading",n)},0);t(o)},["errorWebGLContextLost"]:o=>n=>{setTimeout(()=>{o.emit("errorWebGLContextLost",n)},0);t(o)},["imageLoad"]:o=>()=>{setTimeout(()=>{o.emit("imageLoad")},0);t(o)},["toolEnter"]:o=>n=>{setTimeout(()=>{o.emit("toolEnter",n)},0);t(o)}});kL.default.render(V_.default.createElement(eZe,{editor:this.editorApi.editor}),this.container)}else{i(new Error("Provide a container"))}})}};var eZe=({editor:r})=>{(0,V_.useEffect)(()=>{return()=>{var e;if((e=r==null?void 0:r.configStore)==null?void 0:e.events){r.configStore.events.removeAllListeners("export");r.configStore.events.removeAllListeners("close");r.configStore.events.removeAllListeners("historyUndo");r.configStore.events.removeAllListeners("historyRedo");r.configStore.events.removeAllListeners("historyChange");r.configStore.events.removeAllListeners("editorReady");r.configStore.events.removeAllListeners("errorImageLoading");r.configStore.events.removeAllListeners("imageLoad");r.configStore.events.removeAllListeners("toolEnter");r.configStore.events.removeAllListeners("stickerUploadAdd");r.configStore.events.removeAllListeners("errorWebGLContextLost");r.configStore.events.removeAllListeners("cropDimensionsChange")}}},[]);return V_.default.createElement(qT,{editor:r})};var Lxe={init:r=>{const e=new Mxe;return e.init(r)}};B();var HT=v(x("react"));B();lt();var zxe=class extends HT.default.Component{constructor(e){super(e);this.ui=new mo;this.serialize=e=>{return this.editor.serialize(e)};this.deserialize=e=>{return this.editor.deserialize(e)};this.export=e=>{return this.editor.export(e)};this.close=()=>{return this.editor.close()};this.setImage=e=>{return this.editor.setImage(e,true)};this.getImageDimensions=()=>{return this.editor.getImageDimensions()};this.dispose=()=>{this.ui.removeAllListeners("export");this.ui.removeAllListeners("historyUndo");this.ui.removeAllListeners("historyRedo");this.ui.removeAllListeners("historyChange");this.ui.removeAllListeners("editorReady");this.ui.removeAllListeners("errorImageLoading");this.ui.removeAllListeners("imageLoad");this.ui.removeAllListeners("toolEnter");this.ui.removeAllListeners("stickerUploadAdd");this.ui.removeAllListeners("errorWebGLContextLost");this.ui.removeAllListeners("cropDimensionsChange");if(this.editor){this.editor.dispose()}};this.reset=()=>{this.editor.resetToolStates();this.editor.resize()};this.editor=new oc({...e},{["export"]:t=>{this.ui.emit("export",t)},["close"]:()=>{this.componentWillUnmount();this.ui.emit("close")},["historyUndo"]:()=>{this.ui.emit("historyUndo")},["historyRedo"]:()=>{this.ui.emit("historyRedo")},["historyChange"]:()=>{this.ui.emit("historyChange")},["editorReady"]:()=>{this.ui.emit("editorReady")},["errorImageLoading"]:t=>{this.ui.emit("errorImageLoading",t)},["imageLoad"]:()=>{this.ui.emit("imageLoad")},["toolEnter"]:t=>{this.ui.emit("toolEnter",t)},["stickerUploadAdd"]:t=>{this.ui.emit("stickerUploadAdd",t)},["cropDimensionsChange"]:t=>{this.ui.emit("cropDimensionsChange",t)},["errorWebGLContextLost"]:()=>{this.ui.emit("errorWebGLContextLost")}})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return HT.default.createElement(qT,{editor:this.editor})}};var Uxe=r=>{if(typeof window==="undefined"){return null}return HT.default.createElement(zxe,{...r})};lt();K();var tZe=()=>{const{active:r}=O();return r.newImage};K();var rZe=()=>{const{active:r}=O();return r.image};K();var iZe=()=>{const r=O();return r.config.isLayoutAdvanced};Yx({isolateGlobalState:true});var{Container:oZe,Input:nZe,ColorItem:sZe,ColorItemBase:aZe,ColorItemBackground:lZe,ColorItemTiledBackground:uZe,ColorItemActiveOverlay:cZe,Dialog:dZe,DialogBase:pZe,DialogContainer:mZe,DialogBackdrop:hZe,DialogHeader:fZe,DialogBody:gZe,DialogFooter:yZe,DialogSpinner:bZe}=z;var{Search:_Ze,Label:vZe,Checkbox:xZe,CheckboxBase:CZe,CheckboxInput:SZe,CheckboxCheckMark:wZe,Dropdown:TZe,Slider:IZe,SliderBase:EZe,SliderContainer:kZe,SliderInput:DZe,SliderTrack:OZe,SliderLabel:RZe}=nZe;var AZe=r_;var FZe=r_;var PZe=_Ze;var BZe=J.Toolbar.Index;var MZe=J.Sidebar.Index;var LZe=J.Controlsbar;var zZe=N.Toolbar.Index;var UZe=N.Controlsbar;var NZe=N.Itemsbar;return ui(qZe);})();
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
