var eJ=Object.create;var Bu=Object.defineProperty;var ID=Object.getOwnPropertyDescriptor;var iJ=Object.getOwnPropertyNames;var rJ=Object.getPrototypeOf;var oJ=Object.prototype.hasOwnProperty;var nJ=(i,t,e)=>t in i?Bu(i,t,{enumerable:true,configurable:true,writable:true,value:e}):i[t]=e;var DD=i=>Bu(i,"__esModule",{value:true});var d=(i,t)=>()=>(i&&(t=i(i=0)),t);var Wt=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var ue=(i,t)=>{for(var e in t)Bu(i,e,{get:t[e],enumerable:true})};var ED=(i,t,e,r)=>{if(t&&typeof t==="object"||typeof t==="function"){for(let o of iJ(t))if(!oJ.call(i,o)&&(e||o!=="default"))Bu(i,o,{get:()=>t[o],enumerable:!(r=ID(t,o))||r.enumerable})}return i};var y=(i,t)=>{return ED(DD(Bu(i!=null?eJ(rJ(i)):{},"default",!t&&i&&i.__esModule?{get:()=>i.default,enumerable:true}:{value:i,enumerable:true})),i)};var Mi=(i=>{return(t,e)=>{return i&&i.get(t)||(e=ED(DD({}),t,1),i&&i.set(t,e),e)}})(typeof WeakMap!=="undefined"?new WeakMap:0);var f=(i,t,e,r)=>{var o=r>1?void 0:r?ID(t,e):t;for(var n=i.length-1,s;n>=0;n--)if(s=i[n])o=(r?s(t,e,o):s(o))||o;if(r&&o)Bu(t,e,o);return o};var X=(i,t,e)=>{nJ(i,typeof t!=="symbol"?t+"":t,e);return e};function Hm(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return aJ}function vr(){return++at.mobxGuid}function de(i){ma(false,i);throw"X"}function ma(i,t){if(!i)throw new Error("[mobx] "+(t||sJ))}function es(i,t){if(true)return false;if(t){return es("'"+i+"', use '"+t+"' instead.")}if(FD.indexOf(i)!==-1)return false;FD.push(i);console.error("[mobx] Deprecated: "+i);return true}function T0(i){var t=false;return function(){if(t)return;t=true;return i.apply(this,arguments)}}function lJ(i){var t=[];i.forEach(function(e){if(t.indexOf(e)===-1)t.push(e)});return t}function k0(i){return i!==null&&typeof i==="object"}function zu(i){if(i===null||typeof i!=="object")return false;var t=Object.getPrototypeOf(i);return t===Object.prototype||t===null}function cJ(i){if(Uu(i)||nn(i)){return i}else if(Array.isArray(i)){return new Map(i)}else if(zu(i)){var t=new Map;for(var e in i){t.set(e,i[e])}return t}else{return de("Cannot convert to map from '"+i+"'")}}function uJ(i,t){for(var e=0;e<t.length;e++){ss(i,t[e],i[t[e]])}}function ss(i,t,e){Object.defineProperty(i,t,{enumerable:false,writable:true,configurable:true,value:e})}function Gm(i,t,e){Object.defineProperty(i,t,{enumerable:false,writable:false,configurable:true,value:e})}function dJ(i,t){if(false)de("Cannot make property '"+t+"' observable, it is not configurable and writable in the target object")}function ya(i,t){var e="isMobX"+i;t.prototype[e]=true;return function(r){return k0(r)&&r[e]===true}}function mJ(i,t){return typeof i==="number"&&typeof t==="number"&&isNaN(i)&&isNaN(t)}function Uu(i){if(Hm().Map!==void 0&&i instanceof Hm().Map)return true;return false}function Vm(i){return i instanceof Set}function is(i){var t=[];while(true){var e=i.next();if(e.done)break;t.push(e.value)}return t}function GD(){return typeof Symbol==="function"&&Symbol.toPrimitive||"@@toPrimitive"}function VD(i){return i===null?null:typeof i==="object"?""+i:i}function OD(i,t){var e=i.next();while(!e.done){t(e.value);e=i.next()}}function jD(){return typeof Symbol==="function"&&Symbol.iterator||"@@iterator"}function I0(i,t){Gm(i,jD(),t)}function Wm(i){i[jD()]=pJ;return i}function D0(){return typeof Symbol==="function"&&Symbol.toStringTag||"@@toStringTag"}function pJ(){return this}function _g(i,t,e){if(t===void 0){t=RD}if(e===void 0){e=RD}var r=new yg(i);qJ(r,t);lE(r,e);return r}function $D(i,t){return i===t}function hJ(i,t){return L0(i,t)}function fJ(i,t){return L0(i,t,1)}function gJ(i,t){return mJ(i,t)||$D(i,t)}function KD(i,t){b0(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function y0(i,t){var e=typeof Symbol==="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),o,n=[],s;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)n.push(o.value)}catch(a){s={error:a}}finally{try{if(o&&!o.done&&(e=r["return"]))e.call(r)}finally{if(s)throw s.error}}return n}function _0(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(y0(arguments[t]));return i}function _J(i,t){var e=t?bJ:yJ;return e[i]||(e[i]={configurable:true,enumerable:t,get:function(){Al(this);return this[i]},set:function(r){Al(this);this[i]=r}})}function Al(i){if(i.__mobxDidRunLazyInitializers===true)return;var t=i.__mobxDecorators;if(t){ss(i,"__mobxDidRunLazyInitializers",true);for(var e in t){var r=t[e];r.propertyCreator(i,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function XD(i,t){return function e(){var r;var o=function n(s,a,l,c){if(c===true){t(s,a,l,s,r);return null}if(false)de("This function is a decorator, but it wasn't invoked like a decorator");if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var u=s.__mobxDecorators;ss(s,"__mobxDecorators",Ee({},u))}s.__mobxDecorators[a]={prop:a,propertyCreator:t,descriptor:l,decoratorTarget:s,decoratorArguments:r};return _J(a,i)};if(xJ(arguments)){r=dg;return o.apply(null,arguments)}else{r=Array.prototype.slice.call(arguments);return o}}}function xJ(i){return(i.length===2||i.length===3)&&typeof i[1]==="string"||i.length===4&&i[3]===true}function jm(i,t,e){if(bg(i))return i;if(Array.isArray(i))return Z.array(i,{name:e});if(zu(i))return Z.object(i,void 0,{name:e});if(Uu(i))return Z.map(i,{name:e});if(Vm(i))return Z.set(i,{name:e});return i}function vJ(i,t,e){if(i===void 0||i===null)return i;if(Pl(i)||Ll(i)||nn(i)||_a(i))return i;if(Array.isArray(i))return Z.array(i,{name:e,deep:false});if(zu(i))return Z.object(i,void 0,{name:e,deep:false});if(Uu(i))return Z.map(i,{name:e,deep:false});if(Vm(i))return Z.set(i,{name:e,deep:false});return de(false)}function xg(i){return i}function CJ(i,t,e){if(false)throw"observable.struct should not be used with observable values";if(L0(i,t))return t;return i}function vg(i){ma(i);var t=XD(true,function(r,o,n,s,a){if(false){ma(!n||!n.get,'@observable cannot be used on getter (property "'+o+'"), use @computed instead.')}var l=n?n.initializer?n.initializer.call(r):n.value:void 0;dZ(r,o,l,i)});var e=typeof process!=="undefined"&&process.env&&false?function r(){if(arguments.length<2)return de("Incorrect decorator invocation. @observable decorator doesn't expect any arguments");return t.apply(null,arguments)}:t;e.enhancer=i;return e}function Mu(i){if(i===null||i===void 0)return qD;if(typeof i==="string")return{name:i,deep:true};if(false){if(typeof i!=="object")return de("expected options object");Object.keys(i).forEach(assertValidOption)}return i}function ag(i){return i.defaultDecorator?i.defaultDecorator.enhancer:i.deep===false?xg:jm}function kJ(i,t,e){if(typeof arguments[1]==="string"){return F0.apply(null,arguments)}if(bg(i))return i;var r=zu(i)?Z.object(i,t,e):Array.isArray(i)?Z.array(i,t):Uu(i)?Z.map(i,t):Vm(i)?Z.set(i,t):i;if(r!==i)return r;de(false)}function ts(i){de("Expected one or two arguments to observable."+i+". Did you accidentally try to use observable."+i+" as decorator?")}function Nm(i){return i instanceof hg}function x0(i){switch(i.dependenciesState){case qt.UP_TO_DATE:return false;case qt.NOT_TRACKING:case qt.STALE:return true;case qt.POSSIBLY_STALE:{var t=Ml(true);var e=Nu();var r=i.observing,o=r.length;for(var n=0;n<o;n++){var s=r[n];if(Cg(s)){if(at.disableErrorBoundaries){s.get()}else{try{s.get()}catch(a){pa(e);rs(t);return true}}if(i.dependenciesState===qt.STALE){pa(e);rs(t);return true}}}ZD(i);pa(e);rs(t);return false}}}function Lu(i){var t=i.observers.length>0;if(at.computationDepth>0&&t)de(false);if(!at.allowStateChanges&&(t||at.enforceActions==="strict"))de(false)}function DJ(i){if(false){console.warn("[mobx] Observable "+i.name+" being read outside a reactive context")}}function JD(i,t,e){var r=Ml(true);ZD(i);i.newObserving=new Array(i.observing.length+100);i.unboundDepsCount=0;i.runId=++at.runId;var o=at.trackingDerivation;at.trackingDerivation=i;var n;if(at.disableErrorBoundaries===true){n=t.call(e)}else{try{n=t.call(e)}catch(s){n=new hg(s)}}at.trackingDerivation=o;FJ(i);if(i.observing.length===0){EJ(i)}rs(r);return n}function EJ(i){if(true)return;if(at.reactionRequiresObservable||i.requiresObservable){console.warn("[mobx] Derivation "+i.name+" is created/updated without reading any observable value")}}function FJ(i){var t=i.observing;var e=i.observing=i.newObserving;var r=qt.UP_TO_DATE;var o=0,n=i.unboundDepsCount;for(var s=0;s<n;s++){var a=e[s];if(a.diffValue===0){a.diffValue=1;if(o!==s)e[o]=a;o++}if(a.dependenciesState>r){r=a.dependenciesState}}e.length=o;i.newObserving=null;n=t.length;while(n--){var a=t[n];if(a.diffValue===0){iE(a,i)}a.diffValue=0}while(o--){var a=e[o];if(a.diffValue===1){a.diffValue=0;MJ(a,i)}}if(r!==qt.UP_TO_DATE){i.dependenciesState=r;i.onBecomeStale()}}function v0(i){var t=i.observing;i.observing=[];var e=t.length;while(e--)iE(t[e],i);i.dependenciesState=qt.NOT_TRACKING}function R0(i){var t=Nu();var e=i();pa(t);return e}function Nu(){var i=at.trackingDerivation;at.trackingDerivation=null;return i}function pa(i){at.trackingDerivation=i}function Ml(i){var t=at.allowStateReads;at.allowStateReads=i;return t}function rs(i){at.allowStateReads=i}function ZD(i){if(i.dependenciesState===qt.UP_TO_DATE)return;i.dependenciesState=qt.UP_TO_DATE;var t=i.observing;var e=t.length;while(e--)t[e].lowestObserverState=qt.UP_TO_DATE}function Ol(i,t){if(false){ma(typeof t==="function","`action` can only be invoked on functions");if(typeof i!=="string"||!i)de("actions should have valid names, got: '"+i+"'")}var e=function(){return QD(i,t,this,arguments)};if(false){if(ypt){Object.defineProperty(e,"name",{value:i})}}e.isMobxAction=true;return e}function QD(i,t,e,r){var o=OJ(i,e,r);try{return t.apply(e,r)}catch(n){o.error=n;throw n}finally{AJ(o)}}function OJ(i,t,e){var r=gi()&&!!i;var o=0;if(r){o=Date.now();var n=e&&e.length||0;var s=new Array(n);if(n>0)for(var a=0;a<n;a++)s[a]=e[a];xo({type:"action",name:i,object:t,arguments:s})}var l=Nu();os();var c=$m(true);var u=Ml(true);var m={prevDerivation:l,prevAllowStateChanges:c,prevAllowStateReads:u,notifySpy:r,startTime:o,actionId:RJ++,parentActionId:fg};fg=m.actionId;return m}function AJ(i){if(fg!==i.actionId){de("invalid action stack. did you forget to finish an action?")}fg=i.parentActionId;if(i.error!==void 0){at.suppressReactionErrors=true}Km(i.prevAllowStateChanges);rs(i.prevAllowStateReads);ns();pa(i.prevDerivation);if(i.notifySpy){vo({time:Date.now()-i.startTime})}at.suppressReactionErrors=false}function tE(i,t){var e=$m(i);var r;try{r=t()}finally{Km(e)}return r}function $m(i){var t=at.allowStateChanges;at.allowStateChanges=i;return t}function Km(i){at.allowStateChanges=i}function PJ(){if(at.pendingReactions.length||at.inBatch||at.isRunningReactions)de("isolateGlobalState should be called before MobX is running any reactions");eE=true;if(ug){if(--Hm().__mobxInstanceCount===0)Hm().__mobxGlobals=void 0;at=new cg}}function MJ(i,t){var e=i.observers.length;if(e){i.observersIndexes[t.__mapid]=e}i.observers[e]=t;if(i.lowestObserverState>t.dependenciesState)i.lowestObserverState=t.dependenciesState}function iE(i,t){if(i.observers.length===1){i.observers.length=0;rE(i)}else{var e=i.observers;var r=i.observersIndexes;var o=e.pop();if(o!==t){var n=r[t.__mapid]||0;if(n){r[o.__mapid]=n}else{delete r[o.__mapid]}e[n]=o}delete r[t.__mapid]}}function rE(i){if(i.isPendingUnobservation===false){i.isPendingUnobservation=true;at.pendingUnobservations.push(i)}}function os(){at.inBatch++}function ns(){if(--at.inBatch===0){aE();var i=at.pendingUnobservations;for(var t=0;t<i.length;t++){var e=i[t];e.isPendingUnobservation=false;if(e.observers.length===0){if(e.isBeingObserved){e.isBeingObserved=false;e.onBecomeUnobserved()}if(e instanceof fa){e.suspend()}}}at.pendingUnobservations=[]}}function oE(i){DJ(i);var t=at.trackingDerivation;if(t!==null){if(t.runId!==i.lastAccessedBy){i.lastAccessedBy=t.runId;t.newObserving[t.unboundDepsCount++]=i;if(!i.isBeingObserved){i.isBeingObserved=true;i.onBecomeObserved()}}return true}else if(i.observers.length===0&&at.inBatch>0){rE(i)}return false}function LJ(i){if(i.lowestObserverState===qt.STALE)return;i.lowestObserverState=qt.STALE;var t=i.observers;var e=t.length;while(e--){var r=t[e];if(r.dependenciesState===qt.UP_TO_DATE){if(r.isTracing!==_o.NONE){nE(r,i)}r.onBecomeStale()}r.dependenciesState=qt.STALE}}function zJ(i){if(i.lowestObserverState===qt.STALE)return;i.lowestObserverState=qt.STALE;var t=i.observers;var e=t.length;while(e--){var r=t[e];if(r.dependenciesState===qt.POSSIBLY_STALE)r.dependenciesState=qt.STALE;else if(r.dependenciesState===qt.UP_TO_DATE)i.lowestObserverState=qt.UP_TO_DATE}}function UJ(i){if(i.lowestObserverState!==qt.UP_TO_DATE)return;i.lowestObserverState=qt.POSSIBLY_STALE;var t=i.observers;var e=t.length;while(e--){var r=t[e];if(r.dependenciesState===qt.UP_TO_DATE){r.dependenciesState=qt.POSSIBLY_STALE;if(r.isTracing!==_o.NONE){nE(r,i)}r.onBecomeStale()}}}function nE(i,t){console.log("[mobx.trace] '"+i.name+"' is invalidated due to a change in: '"+t.name+"'");if(i.isTracing===_o.BREAK){var e=[];sE(A0(i),e,1);new Function("debugger;\n/*\nTracing '"+i.name+"'\n\nYou are entering this break point because derivation '"+i.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(i instanceof fa?i.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+e.join("\n")+"\n*/\n    ")()}}function sE(i,t,e){if(t.length>=1e3){t.push("(and many more)");return}t.push(""+new Array(e).join("	")+i.name);if(i.dependencies)i.dependencies.forEach(function(r){return sE(r,t,e+1)})}function aE(){if(at.inBatch>0||at.isRunningReactions)return;C0(NJ)}function NJ(){at.isRunningReactions=true;var i=at.pendingReactions;var t=0;while(i.length>0){if(++t===PD){console.error("Reaction doesn't converge to a stable state after "+PD+" iterations."+(" Probably there is a cycle in the reactive function: "+i[0]));i.splice(0)}var e=i.splice(0);for(var r=0,o=e.length;r<o;r++)e[r].runReaction()}at.isRunningReactions=false}function HJ(i){var t=C0;C0=function(e){return i(function(){return t(e)})}}function gi(){return!!at.spyListeners.length}function Bl(i){if(!at.spyListeners.length)return;var t=at.spyListeners;for(var e=0,r=t.length;e<r;e++)t[e](i)}function xo(i){var t=Ee(Ee({},i),{spyReportStart:true});Bl(t)}function vo(i){if(i)Bl(Ee(Ee({},i),{spyReportEnd:true}));else Bl(WJ)}function O0(i){at.spyListeners.push(i);return T0(function(){at.spyListeners=at.spyListeners.filter(function(t){return t!==i})})}function GJ(){de(false)}function MD(i){return function(t,e,r){if(r){if(false){return de("@action cannot be used with getters")}if(r.value){return{value:Ol(i,r.value),enumerable:false,configurable:true,writable:true}}var o=r.initializer;return{enumerable:false,configurable:true,writable:true,initializer:function(){return Ol(i,o.call(this))}}}return VJ(i).apply(this,arguments)}}function VJ(i){return function(t,e,r){Object.defineProperty(t,e,{configurable:true,enumerable:false,get:function(){return void 0},set:function(o){ss(this,e,v(i,o))}})}}function jJ(i,t,e,r){if(r===true){g0(i,t,e.value);return null}if(e){return{configurable:true,enumerable:false,get:function(){g0(this,t,e.value||e.initializer.call(this));return this[t]},set:GJ}}return{enumerable:false,configurable:true,set:function(o){g0(this,t,o)},get:function(){return void 0}}}function Ge(i,t){var e=typeof i==="string"?i:i.name||"<unnamed action>";var r=typeof i==="function"?i:t;if(false){ma(typeof r==="function"&&r.length===0,"`runInAction` expects a function without arguments");if(typeof e!=="string"||!e)de("actions should have valid names, got: '"+e+"'")}return QD(e,r,this,void 0)}function g0(i,t,e){ss(i,t,Ol(t,e.bind(i)))}function $J(i,t){if(t===void 0){t=WD}if(false){ma(typeof i==="function","Autorun expects a function as first argument");ma(isAction(i)===false,"Autorun does not accept actions since actions are untrackable")}var e=t&&t.name||i.name||"Autorun@"+vr();var r=!t.scheduler&&!t.delay;var o;if(r){o=new ga(e,function(){this.track(a)},t.onError,t.requiresObservable)}else{var n=XJ(t);var s=false;o=new ga(e,function(){if(!s){s=true;n(function(){s=false;if(!o.isDisposed)o.track(a)})}},t.onError,t.requiresObservable)}function a(){i(o)}o.schedule();return o.getDisposer()}function XJ(i){return i.scheduler?i.scheduler:i.delay?function(t){return setTimeout(t,i.delay)}:KJ}function qJ(i,t,e){return cE("onBecomeObserved",i,t,e)}function lE(i,t,e){return cE("onBecomeUnobserved",i,t,e)}function cE(i,t,e,r){var o=typeof r==="function"?ba(t,e):ba(t);var n=typeof r==="function"?r:e;var s=o[i];if(typeof s!=="function")return de(false);o[i]=function(){s.call(this);n.call(this)};return function(){o[i]=s}}function Sg(i){var t=i.enforceActions,e=i.computedRequiresReaction,r=i.computedConfigurable,o=i.disableErrorBoundaries,n=i.arrayBuffer,s=i.reactionScheduler,a=i.reactionRequiresObservable,l=i.observableRequiresReaction;if(i.isolateGlobalState===true){PJ()}if(t!==void 0){if(typeof t==="boolean"||t==="strict")es(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var c=void 0;switch(t){case true:case"observed":c=true;break;case false:case"never":c=false;break;case"strict":case"always":c="strict";break;default:de("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}at.enforceActions=c;at.allowStateChanges=c===true||c==="strict"?false:true}if(e!==void 0){at.computedRequiresReaction=!!e}if(a!==void 0){at.reactionRequiresObservable=!!a}if(l!==void 0){at.observableRequiresReaction=!!l;at.allowStateReads=!at.observableRequiresReaction}if(r!==void 0){at.computedConfigurable=!!r}if(o!==void 0){if(o===true)console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on.");at.disableErrorBoundaries=!!o}if(typeof n==="number"){P0(n)}if(s){HJ(s)}}function YJ(i,t,e,r){if(false){ma(arguments.length>=2&&arguments.length<=4,"'extendObservable' expected 2-4 arguments");ma(typeof i==="object","'extendObservable' expects an object as first argument");ma(!nn(i),"'extendObservable' should not be used on maps, use map.merge instead");ma(!bg(t),"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540");if(e){for(var o in e)if(!(o in t))de("Trying to declare a decorator for unspecified property '"+o+"'")}}r=Mu(r);var n=r.defaultDecorator||(r.deep===false?YD:F0);Al(i);M0(i,r.name,n.enhancer);os();try{var s=Object.getOwnPropertyNames(t);for(var a=0,l=s.length;a<l;a++){var o=s[a];var c=Object.getOwnPropertyDescriptor(t,o);if(false){if(isComputed(c.value))de("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead")}var u=e&&o in e?e[o]:c.get?pg:n;if(false)return de("Not a valid decorator for '"+o+"', got: "+u);var m=u(i,o,c,true);if(m)Object.defineProperty(i,o,m)}}finally{ns()}return i}function A0(i,t){return uE(ba(i,t))}function uE(i){var t={name:i.name};if(i.observing&&i.observing.length>0)t.dependencies=lJ(i.observing).map(uE);return t}function JJ(){this.message="FLOW_CANCELLED"}function ZJ(i,t){if(i===null||i===void 0)return false;if(t!==void 0){if(false)return de("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");if(Pl(i)){var e=i.$mobx;return e.values&&!!e.values[t]}return false}return Pl(i)||!!i.$mobx||E0(i)||gg(i)||Cg(i)}function bg(i){if(arguments.length!==1)de(false);return ZJ(i)}function QJ(i){if(Pl(i)){return i.$mobx.getKeys()}if(nn(i)){return is(i.keys())}if(_a(i)){return is(i.keys())}if(Ll(i)){return i.map(function(t,e){return e})}return de(false)}function Pu(i,t,e,r){if(r.detectCycles)i.set(t,e);return e}function da(i,t,e){if(!t.recurseEverything&&!bg(i))return i;if(typeof i!=="object")return i;if(i===null)return null;if(i instanceof Date)return i;if(BJ(i))return da(i.get(),t,e);if(bg(i))QJ(i);var r=t.detectCycles===true;if(r&&i!==null&&e.has(i)){return e.get(i)}if(Ll(i)||Array.isArray(i)){var o=Pu(e,i,[],t);var n=i.map(function(g){return da(g,t,e)});o.length=n.length;for(var s=0,a=n.length;s<a;s++)o[s]=n[s];return o}if(_a(i)||Object.getPrototypeOf(i)===Set.prototype){if(t.exportMapsAsObjects===false){var l=Pu(e,i,new Set,t);i.forEach(function(g){l.add(da(g,t,e))});return l}else{var c=Pu(e,i,[],t);i.forEach(function(g){c.push(da(g,t,e))});return c}}if(nn(i)||Object.getPrototypeOf(i)===Map.prototype){if(t.exportMapsAsObjects===false){var u=Pu(e,i,new Map,t);i.forEach(function(g,_){u.set(_,da(g,t,e))});return u}else{var m=Pu(e,i,{},t);i.forEach(function(g,_){m[_]=da(g,t,e)});return m}}var p=Pu(e,i,{},t);for(var h in i){p[h]=da(i[h],t,e)}return p}function lt(i,t){if(typeof t==="boolean")t={detectCycles:t};if(!t)t=tZ;t.detectCycles=t.detectCycles===void 0?t.recurseEverything===true:t.detectCycles===true;var e;if(t.detectCycles)e=new Map;return da(i,t,e)}function eZ(){var i=[];for(var t=0;t<arguments.length;t++){i[t]=arguments[t]}var e=false;if(typeof i[i.length-1]==="boolean")e=i.pop();var r=iZ(i);if(!r){return de(false)}if(r.isTracing===_o.NONE){console.log("[mobx.trace] '"+r.name+"' tracing enabled")}r.isTracing=e?_o.BREAK:_o.LOG}function iZ(i){switch(i.length){case 0:return at.trackingDerivation;case 1:return ba(i[0]);case 2:return ba(i[0],i[1])}}function tn(i,t){if(t===void 0){t=void 0}os();try{return i.apply(t)}finally{ns()}}function en(i){return i.interceptors!==void 0&&i.interceptors.length>0}function Xm(i,t){var e=i.interceptors||(i.interceptors=[]);e.push(t);return T0(function(){var r=e.indexOf(t);if(r!==-1)e.splice(r,1)})}function rn(i,t){var e=Nu();try{var r=i.interceptors;if(r)for(var o=0,n=r.length;o<n;o++){t=r[o](t);ma(!t||t.type,"Intercept handlers should return nothing or a change object");if(!t)break}return t}finally{pa(e)}}function Co(i){return i.changeListeners!==void 0&&i.changeListeners.length>0}function qm(i,t){var e=i.changeListeners||(i.changeListeners=[]);e.push(t);return T0(function(){var r=e.indexOf(t);if(r!==-1)e.splice(r,1)})}function So(i,t){var e=Nu();var r=i.changeListeners;if(!r)return;r=r.slice();for(var o=0,n=r.length;o<n;o++){r[o](t)}pa(e)}function nZ(i,t){if(typeof Object["setPrototypeOf"]!=="undefined"){Object["setPrototypeOf"](i.prototype,t)}else if(typeof i.prototype.__proto__!=="undefined"){i.prototype.__proto__=t}else{i["prototype"]=t}}function mE(i){return{enumerable:false,configurable:false,get:function(){return this.get(i)},set:function(t){this.set(i,t)}}}function aZ(i){Object.defineProperty(on.prototype,""+i,mE(i))}function P0(i){for(var t=S0;t<i;t++)aZ(t);S0=i}function Ll(i){return k0(i)&&lZ(i.$mobx)}function lg(i){if(i&&i.toString)return i.toString();else return new String(i).toString()}function M0(i,t,e){if(t===void 0){t=""}if(e===void 0){e=jm}var r=i.$mobx;if(r)return r;if(!zu(i))t=(i.constructor.name||"ObservableObject")+"@"+vr();if(!t)t="ObservableObject@"+vr();r=new pE(i,t,e);Gm(i,"$mobx",r);return r}function dZ(i,t,e,r){var o=M0(i);dJ(i,t);if(en(o)){var n=rn(o,{object:i,name:t,type:"add",newValue:e});if(!n)return;e=n.newValue}var s=o.values[t]=new ha(e,r,o.name+"."+t,false);e=s.value;Object.defineProperty(i,t,pZ(t));if(o.keys)o.keys.push(t);fZ(o,i,t,e)}function mZ(i,t,e){var r=M0(i);e.name=r.name+"."+t;e.context=i;r.values[t]=new fa(e);Object.defineProperty(i,t,hZ(t))}function pZ(i){return LD[i]||(LD[i]={configurable:true,enumerable:true,get:function(){return this.$mobx.read(this,i)},set:function(t){this.$mobx.write(this,i,t)}})}function UD(i){var t=i.$mobx;if(!t){Al(i);return i.$mobx}return t}function hZ(i){return zD[i]||(zD[i]={configurable:at.computedConfigurable,enumerable:false,get:function(){return UD(this).read(this,i)},set:function(t){UD(this).write(this,i,t)}})}function fZ(i,t,e,r){var o=Co(i);var n=gi();var s=o||n?{type:"add",object:t,name:e,newValue:r}:null;if(n)xo(Ee(Ee({},s),{name:i.name,key:e}));if(o)So(i,s);if(n)vo()}function Pl(i){if(k0(i)){Al(i);return gZ(i.$mobx)}return false}function ba(i,t){if(typeof i==="object"&&i!==null){if(Ll(i)){if(t!==void 0)de(false);return i.$mobx.atom}if(_a(i)){return i.$mobx}if(nn(i)){var e=i;if(t===void 0)return e._keysAtom;var r=e._data.get(t)||e._hasMap.get(t);if(!r)de(false);return r}Al(i);if(t&&!i.$mobx)i[t];if(Pl(i)){if(!t)return de(false);var r=i.$mobx.values[t];if(!r)de(false);return r}if(E0(i)||Cg(i)||gg(i)){return i}}else if(typeof i==="function"){if(gg(i.$mobx)){return i.$mobx}}return de(false)}function hE(i,t){if(!i)de("Expecting some object");if(t!==void 0)return hE(ba(i,t));if(E0(i)||Cg(i)||gg(i))return i;if(nn(i)||_a(i))return i;Al(i);if(i.$mobx)return i.$mobx;de(false)}function bZ(i,t){var e;if(t!==void 0)e=ba(i,t);else if(Pl(i)||nn(i)||_a(i))e=hE(i);else e=ba(i);return e.name}function L0(i,t,e){if(e===void 0){e=-1}return w0(i,t,e)}function w0(i,t,e,r,o){if(i===t)return i!==0||1/i===1/t;if(i==null||t==null)return false;if(i!==i)return t!==t;var n=typeof i;if(n!=="function"&&n!=="object"&&typeof t!="object")return false;i=HD(i);t=HD(t);var s=ND.call(i);if(s!==ND.call(t))return false;switch(s){case"[object RegExp]":case"[object String]":return""+i===""+t;case"[object Number]":if(+i!==+i)return+t!==+t;return+i===0?1/+i===1/t:+i===+t;case"[object Date]":case"[object Boolean]":return+i===+t;case"[object Symbol]":return typeof Symbol!=="undefined"&&Symbol.valueOf.call(i)===Symbol.valueOf.call(t)}var a=s==="[object Array]";if(!a){if(typeof i!="object"||typeof t!="object")return false;var l=i.constructor,c=t.constructor;if(l!==c&&!(typeof l==="function"&&l instanceof l&&typeof c==="function"&&c instanceof c)&&("constructor"in i&&"constructor"in t)){return false}}if(e===0){return false}else if(e<0){e=-1}r=r||[];o=o||[];var u=r.length;while(u--){if(r[u]===i)return o[u]===t}r.push(i);o.push(t);if(a){u=i.length;if(u!==t.length)return false;while(u--){if(!w0(i[u],t[u],e-1,r,o))return false}}else{var m=Object.keys(i);var p=void 0;u=m.length;if(Object.keys(t).length!==u)return false;while(u--){p=m[u];if(!(yZ(t,p)&&w0(i[p],t[p],e-1,r,o)))return false}}r.pop();o.pop();return true}function HD(i){if(Ll(i))return i.peek();if(Uu(i)||nn(i))return is(i.entries());if(Vm(i)||_a(i))return is(i.entries());return i}function yZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}var sJ,dg,WD,aJ,FD,RD,yg,E0,mg,b0,Ee,bJ,yJ,qD,SJ,F0,wJ,YD,TJ,AD,Z,pg,IJ,C,qt,_o,hg,fg,RJ,BD,ypt,ha,BJ,fa,Cg,cg,ug,eE,at,ga,PD,C0,gg,WJ,v,KJ,tZ,rZ,oZ,S0,B0,dE,on,sZ,lZ,cZ,wg,nn,uZ,Tg,_a,pE,LD,zD,gZ,ND,z0,_pt;var wt=d(()=>{sJ="An invariant failed, however the error is obfuscated because this is an production build.";dg=[];Object.freeze(dg);WD={};Object.freeze(WD);aJ={};FD=[];RD=function(){};yg=function(){function i(t){if(t===void 0){t="Atom@"+vr()}this.name=t;this.isPendingUnobservation=false;this.isBeingObserved=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.lastAccessedBy=0;this.lowestObserverState=qt.NOT_TRACKING}i.prototype.onBecomeUnobserved=function(){};i.prototype.onBecomeObserved=function(){};i.prototype.reportObserved=function(){return oE(this)};i.prototype.reportChanged=function(){os();LJ(this);ns()};i.prototype.toString=function(){return this.name};return i}();E0=ya("Atom",yg);mg={identity:$D,structural:hJ,default:gJ,shallow:fJ};b0=function(i,t){b0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)if(r.hasOwnProperty(o))e[o]=r[o]};return b0(i,t)};Ee=function(){Ee=Object.assign||function i(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}return t};return Ee.apply(this,arguments)};bJ={};yJ={};qD={deep:true,name:void 0,defaultDecorator:void 0};SJ={deep:false,name:void 0,defaultDecorator:void 0};Object.freeze(qD);Object.freeze(SJ);F0=vg(jm);wJ=vg(vJ);YD=vg(xg);TJ=vg(CJ);AD={box:function(i,t){if(arguments.length>2)ts("box");var e=Mu(t);return new ha(i,ag(e),e.name,true,e.equals)},shallowBox:function(i,t){if(arguments.length>2)ts("shallowBox");es("observable.shallowBox","observable.box(value, { deep: false })");return Z.box(i,{name:t,deep:false})},array:function(i,t){if(arguments.length>2)ts("array");var e=Mu(t);return new on(i,ag(e),e.name)},shallowArray:function(i,t){if(arguments.length>2)ts("shallowArray");es("observable.shallowArray","observable.array(values, { deep: false })");return Z.array(i,{name:t,deep:false})},map:function(i,t){if(arguments.length>2)ts("map");var e=Mu(t);return new wg(i,ag(e),e.name)},shallowMap:function(i,t){if(arguments.length>2)ts("shallowMap");es("observable.shallowMap","observable.map(values, { deep: false })");return Z.map(i,{name:t,deep:false})},set:function(i,t){if(arguments.length>2)ts("set");var e=Mu(t);return new Tg(i,ag(e),e.name)},object:function(i,t,e){if(typeof arguments[1]==="string")ts("object");var r=Mu(e);return YJ({},i,t,r)},shallowObject:function(i,t){if(typeof arguments[1]==="string")ts("shallowObject");es("observable.shallowObject","observable.object(values, {}, { deep: false })");return Z.object(i,{},{name:t,deep:false})},ref:YD,shallow:wJ,deep:F0,struct:TJ};Z=kJ;Object.keys(AD).forEach(function(i){return Z[i]=AD[i]});pg=XD(false,function(i,t,e,r,o){if(false){ma(e&&e.get,"Trying to declare a computed value for unspecified getter '"+t+"'")}var n=e.get,s=e.set;var a=o[0]||{};mZ(i,t,Ee({get:n,set:s},a))});IJ=pg({equals:mg.structural});C=function i(t,e,r){if(typeof e==="string"){return pg.apply(null,arguments)}if(t!==null&&typeof t==="object"&&arguments.length===1){return pg.apply(null,arguments)}if(false){ma(typeof t==="function","First argument to `computed` should be an expression.");ma(arguments.length<3,"Computed takes one or two arguments if used as function")}var o=typeof e==="object"?e:{};o.get=t;o.set=typeof e==="function"?e:o.set;o.name=o.name||t.name||"";return new fa(o)};C.struct=IJ;(function(i){i[i["NOT_TRACKING"]=-1]="NOT_TRACKING";i[i["UP_TO_DATE"]=0]="UP_TO_DATE";i[i["POSSIBLY_STALE"]=1]="POSSIBLY_STALE";i[i["STALE"]=2]="STALE"})(qt||(qt={}));(function(i){i[i["NONE"]=0]="NONE";i[i["LOG"]=1]="LOG";i[i["BREAK"]=2]="BREAK"})(_o||(_o={}));hg=function(){function i(t){this.cause=t}return i}();fg=0;RJ=1;BD=Object.getOwnPropertyDescriptor(function(){},"name");ypt=BD&&BD.configurable;ha=function(i){KD(t,i);function t(e,r,o,n,s){if(o===void 0){o="ObservableValue@"+vr()}if(n===void 0){n=true}if(s===void 0){s=mg.default}var a=i.call(this,o)||this;a.enhancer=r;a.name=o;a.equals=s;a.hasUnreportedChange=false;a.value=r(e,void 0,o);if(n&&gi()){Bl({type:"create",name:a.name,newValue:""+a.value})}return a}t.prototype.dehanceValue=function(e){if(this.dehancer!==void 0)return this.dehancer(e);return e};t.prototype.set=function(e){var r=this.value;e=this.prepareNewValue(e);if(e!==at.UNCHANGED){var o=gi();if(o){xo({type:"update",name:this.name,newValue:e,oldValue:r})}this.setNewValue(e);if(o)vo()}};t.prototype.prepareNewValue=function(e){Lu(this);if(en(this)){var r=rn(this,{object:this,type:"update",newValue:e});if(!r)return at.UNCHANGED;e=r.newValue}e=this.enhancer(e,this.value,this.name);return this.equals(this.value,e)?at.UNCHANGED:e};t.prototype.setNewValue=function(e){var r=this.value;this.value=e;this.reportChanged();if(Co(this)){So(this,{type:"update",object:this,newValue:e,oldValue:r})}};t.prototype.get=function(){this.reportObserved();return this.dehanceValue(this.value)};t.prototype.intercept=function(e){return Xm(this,e)};t.prototype.observe=function(e,r){if(r)e({object:this,type:"update",newValue:this.value,oldValue:void 0});return qm(this,e)};t.prototype.toJSON=function(){return this.get()};t.prototype.toString=function(){return this.name+"["+this.value+"]"};t.prototype.valueOf=function(){return VD(this.get())};return t}(yg);ha.prototype[GD()]=ha.prototype.valueOf;BJ=ya("ObservableValue",ha);fa=function(){function i(t){this.dependenciesState=qt.NOT_TRACKING;this.observing=[];this.newObserving=null;this.isBeingObserved=false;this.isPendingUnobservation=false;this.observers=[];this.observersIndexes={};this.diffValue=0;this.runId=0;this.lastAccessedBy=0;this.lowestObserverState=qt.UP_TO_DATE;this.unboundDepsCount=0;this.__mapid="#"+vr();this.value=new hg(null);this.isComputing=false;this.isRunningSetter=false;this.isTracing=_o.NONE;ma(t.get,"missing option for computed: get");this.derivation=t.get;this.name=t.name||"ComputedValue@"+vr();if(t.set)this.setter=Ol(this.name+"-setter",t.set);this.equals=t.equals||(t.compareStructural||t.struct?mg.structural:mg.default);this.scope=t.context;this.requiresReaction=!!t.requiresReaction;this.keepAlive=!!t.keepAlive}i.prototype.onBecomeStale=function(){UJ(this)};i.prototype.onBecomeUnobserved=function(){};i.prototype.onBecomeObserved=function(){};i.prototype.get=function(){if(this.isComputing)de("Cycle detected in computation "+this.name+": "+this.derivation);if(at.inBatch===0&&this.observers.length===0&&!this.keepAlive){if(x0(this)){this.warnAboutUntrackedRead();os();this.value=this.computeValue(false);ns()}}else{oE(this);if(x0(this)){if(this.trackAndCompute())zJ(this)}}var t=this.value;if(Nm(t))throw t.cause;return t};i.prototype.peek=function(){var t=this.computeValue(false);if(Nm(t))throw t.cause;return t};i.prototype.set=function(t){if(this.setter){ma(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?");this.isRunningSetter=true;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=false}}else ma(false,false)};i.prototype.trackAndCompute=function(){if(gi()){Bl({object:this.scope,type:"compute",name:this.name})}var t=this.value;var e=this.dependenciesState===qt.NOT_TRACKING;var r=this.computeValue(true);var o=e||Nm(t)||Nm(r)||!this.equals(t,r);if(o){this.value=r}return o};i.prototype.computeValue=function(t){this.isComputing=true;at.computationDepth++;var e;if(t){e=JD(this,this.derivation,this.scope)}else{if(at.disableErrorBoundaries===true){e=this.derivation.call(this.scope)}else{try{e=this.derivation.call(this.scope)}catch(r){e=new hg(r)}}}at.computationDepth--;this.isComputing=false;return e};i.prototype.suspend=function(){if(!this.keepAlive){v0(this);this.value=void 0}};i.prototype.observe=function(t,e){var r=this;var o=true;var n=void 0;return $J(function(){var s=r.get();if(!o||e){var a=Nu();t({type:"update",object:r,newValue:s,oldValue:n});pa(a)}o=false;n=s})};i.prototype.warnAboutUntrackedRead=function(){if(true)return;if(this.requiresReaction===true){de("[mobx] Computed value "+this.name+" is read outside a reactive context")}if(this.isTracing!==_o.NONE){console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute")}if(at.computedRequiresReaction){console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute")}};i.prototype.toJSON=function(){return this.get()};i.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"};i.prototype.valueOf=function(){return VD(this.get())};return i}();fa.prototype[GD()]=fa.prototype.valueOf;Cg=ya("ComputedValue",fa);cg=function(){function i(){this.version=5;this.UNCHANGED={};this.trackingDerivation=null;this.computationDepth=0;this.runId=0;this.mobxGuid=0;this.inBatch=0;this.pendingUnobservations=[];this.pendingReactions=[];this.isRunningReactions=false;this.allowStateChanges=true;this.allowStateReads=true;this.enforceActions=false;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.computedRequiresReaction=false;this.reactionRequiresObservable=false;this.observableRequiresReaction=false;this.computedConfigurable=false;this.disableErrorBoundaries=false;this.suppressReactionErrors=false}return i}();ug=true;eE=false;at=function(){var i=Hm();if(i.__mobxInstanceCount>0&&!i.__mobxGlobals)ug=false;if(i.__mobxGlobals&&i.__mobxGlobals.version!==new cg().version)ug=false;if(!ug){setTimeout(function(){if(!eE){de("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}},1);return new cg}else if(i.__mobxGlobals){i.__mobxInstanceCount+=1;if(!i.__mobxGlobals.UNCHANGED)i.__mobxGlobals.UNCHANGED={};return i.__mobxGlobals}else{i.__mobxInstanceCount=1;return i.__mobxGlobals=new cg}}();ga=function(){function i(t,e,r,o){if(t===void 0){t="Reaction@"+vr()}if(o===void 0){o=false}this.name=t;this.onInvalidate=e;this.errorHandler=r;this.requiresObservable=o;this.observing=[];this.newObserving=[];this.dependenciesState=qt.NOT_TRACKING;this.diffValue=0;this.runId=0;this.unboundDepsCount=0;this.__mapid="#"+vr();this.isDisposed=false;this._isScheduled=false;this._isTrackPending=false;this._isRunning=false;this.isTracing=_o.NONE}i.prototype.onBecomeStale=function(){this.schedule()};i.prototype.schedule=function(){if(!this._isScheduled){this._isScheduled=true;at.pendingReactions.push(this);aE()}};i.prototype.isScheduled=function(){return this._isScheduled};i.prototype.runReaction=function(){if(!this.isDisposed){os();this._isScheduled=false;if(x0(this)){this._isTrackPending=true;try{this.onInvalidate();if(this._isTrackPending&&gi()){Bl({name:this.name,type:"scheduled-reaction"})}}catch(t){this.reportExceptionInDerivation(t)}}ns()}};i.prototype.track=function(t){os();var e=gi();var r;if(e){r=Date.now();xo({name:this.name,type:"reaction"})}this._isRunning=true;var o=JD(this,t,void 0);this._isRunning=false;this._isTrackPending=false;if(this.isDisposed){v0(this)}if(Nm(o))this.reportExceptionInDerivation(o.cause);if(e){vo({time:Date.now()-r})}ns()};i.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler){this.errorHandler(t,this);return}if(at.disableErrorBoundaries)throw t;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";if(at.suppressReactionErrors){console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)")}else{console.error(r,t)}if(gi()){Bl({type:"error",name:this.name,message:r,error:""+t})}at.globalReactionErrorHandlers.forEach(function(o){return o(t,e)})};i.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;if(!this._isRunning){os();v0(this);ns()}}};i.prototype.getDisposer=function(){var t=this.dispose.bind(this);t.$mobx=this;return t};i.prototype.toString=function(){return"Reaction["+this.name+"]"};i.prototype.trace=function(t){if(t===void 0){t=false}eZ(this,t)};return i}();PD=100;C0=function(i){return i()};gg=ya("Reaction",ga);WJ={spyReportEnd:true};v=function i(t,e,r,o){if(arguments.length===1&&typeof t==="function")return Ol(t.name||"<unnamed action>",t);if(arguments.length===2&&typeof e==="function")return Ol(t,e);if(arguments.length===1&&typeof t==="string")return MD(t);if(o===true){t[e]=Ol(t.name||e,r.value)}else{return MD(e).apply(null,arguments)}};v.bound=jJ;KJ=function(i){return i()};JJ.prototype=Object.create(Error.prototype);tZ={detectCycles:true,exportMapsAsObjects:true,recurseEverything:false};rZ=1e4;oZ=function(){var i=false;var t={};Object.defineProperty(t,"0",{set:function(){i=true}});Object.create(t)["0"]=1;return i===false}();S0=0;B0=function(){function i(){}return i}();nZ(B0,Array.prototype);if(Object.isFrozen(Array)){["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(i){Object.defineProperty(B0.prototype,i,{configurable:true,writable:true,value:Array.prototype[i]})})}dE=function(){function i(t,e,r,o){this.array=r;this.owned=o;this.values=[];this.lastKnownLength=0;this.atom=new yg(t||"ObservableArray@"+vr());this.enhancer=function(n,s){return e(n,s,t+"[..]")}}i.prototype.dehanceValue=function(t){if(this.dehancer!==void 0)return this.dehancer(t);return t};i.prototype.dehanceValues=function(t){if(this.dehancer!==void 0&&t.length>0)return t.map(this.dehancer);return t};i.prototype.intercept=function(t){return Xm(this,t)};i.prototype.observe=function(t,e){if(e===void 0){e=false}if(e){t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0})}return qm(this,t)};i.prototype.getArrayLength=function(){this.atom.reportObserved();return this.values.length};i.prototype.setArrayLength=function(t){if(typeof t!=="number"||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t===e)return;else if(t>e){var r=new Array(t-e);for(var o=0;o<t-e;o++)r[o]=void 0;this.spliceWithArray(e,0,r)}else this.spliceWithArray(t,e-t)};i.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e;if(e>0&&t+e+1>S0)P0(t+e+1)};i.prototype.spliceWithArray=function(t,e,r){var o=this;Lu(this.atom);var n=this.values.length;if(t===void 0)t=0;else if(t>n)t=n;else if(t<0)t=Math.max(0,n+t);if(arguments.length===1)e=n-t;else if(e===void 0||e===null)e=0;else e=Math.max(0,Math.min(e,n-t));if(r===void 0)r=dg;if(en(this)){var s=rn(this,{object:this.array,type:"splice",index:t,removedCount:e,added:r});if(!s)return dg;e=s.removedCount;r=s.added}r=r.length===0?r:r.map(function(c){return o.enhancer(c,void 0)});var a=r.length-e;this.updateArrayLength(n,a);var l=this.spliceItemsIntoValues(t,e,r);if(e!==0||r.length!==0)this.notifyArraySplice(t,r,l);return this.dehanceValues(l)};i.prototype.spliceItemsIntoValues=function(t,e,r){var o;if(r.length<rZ){return(o=this.values).splice.apply(o,_0([t,e],r))}else{var n=this.values.slice(t,t+e);this.values=this.values.slice(0,t).concat(r,this.values.slice(t+e));return n}};i.prototype.notifyArrayChildUpdate=function(t,e,r){var o=!this.owned&&gi();var n=Co(this);var s=n||o?{object:this.array,type:"update",index:t,newValue:e,oldValue:r}:null;if(o)xo(Ee(Ee({},s),{name:this.atom.name}));this.atom.reportChanged();if(n)So(this,s);if(o)vo()};i.prototype.notifyArraySplice=function(t,e,r){var o=!this.owned&&gi();var n=Co(this);var s=n||o?{object:this.array,type:"splice",index:t,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;if(o)xo(Ee(Ee({},s),{name:this.atom.name}));this.atom.reportChanged();if(n)So(this,s);if(o)vo()};return i}();on=function(i){KD(t,i);function t(e,r,o,n){if(o===void 0){o="ObservableArray@"+vr()}if(n===void 0){n=false}var s=i.call(this)||this;var a=new dE(o,r,s,n);Gm(s,"$mobx",a);if(e&&e.length){var l=$m(true);s.spliceWithArray(0,0,e);Km(l)}if(oZ){Object.defineProperty(a.array,"0",sZ)}return s}t.prototype.intercept=function(e){return this.$mobx.intercept(e)};t.prototype.observe=function(e,r){if(r===void 0){r=false}return this.$mobx.observe(e,r)};t.prototype.clear=function(){return this.splice(0)};t.prototype.concat=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}this.$mobx.atom.reportObserved();return Array.prototype.concat.apply(this.peek(),e.map(function(o){return Ll(o)?o.peek():o}))};t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)};t.prototype.toJS=function(){return this.slice()};t.prototype.toJSON=function(){return this.toJS()};t.prototype.peek=function(){this.$mobx.atom.reportObserved();return this.$mobx.dehanceValues(this.$mobx.values)};t.prototype.find=function(e,r,o){if(o===void 0){o=0}if(arguments.length===3)es("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return n===-1?void 0:this.get(n)};t.prototype.findIndex=function(e,r,o){if(o===void 0){o=0}if(arguments.length===3)es("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");var n=this.peek(),s=n.length;for(var a=o;a<s;a++)if(e.call(r,n[a],a,this))return a;return-1};t.prototype.splice=function(e,r){var o=[];for(var n=2;n<arguments.length;n++){o[n-2]=arguments[n]}switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,r)}return this.$mobx.spliceWithArray(e,r,o)};t.prototype.spliceWithArray=function(e,r,o){return this.$mobx.spliceWithArray(e,r,o)};t.prototype.push=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var o=this.$mobx;o.spliceWithArray(o.values.length,0,e);return o.values.length};t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]};t.prototype.shift=function(){return this.splice(0,1)[0]};t.prototype.unshift=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var o=this.$mobx;o.spliceWithArray(0,0,e);return o.values.length};t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)};t.prototype.sort=function(e){var r=this.slice();return r.sort.apply(r,arguments)};t.prototype.remove=function(e){var r=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);if(r>-1){this.splice(r,1);return true}return false};t.prototype.move=function(e,r){es("observableArray.move is deprecated, use .slice() & .replace() instead");function o(a){if(a<0){throw new Error("[mobx.array] Index out of bounds: "+a+" is negative")}var l=this.$mobx.values.length;if(a>=l){throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}}o.call(this,e);o.call(this,r);if(e===r){return}var n=this.$mobx.values;var s;if(e<r){s=_0(n.slice(0,e),n.slice(e+1,r+1),[n[e]],n.slice(r+1))}else{s=_0(n.slice(0,r),[n[e]],n.slice(r,e),n.slice(e+1))}this.replace(s)};t.prototype.get=function(e){var r=this.$mobx;if(r){if(e<r.values.length){r.atom.reportObserved();return r.dehanceValue(r.values[e])}console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+r.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}return void 0};t.prototype.set=function(e,r){var o=this.$mobx;var n=o.values;if(e<n.length){Lu(o.atom);var s=n[e];if(en(o)){var a=rn(o,{type:"update",object:this,index:e,newValue:r});if(!a)return;r=a.newValue}r=o.enhancer(r,s);var l=r!==s;if(l){n[e]=r;o.notifyArrayChildUpdate(e,r,s)}}else if(e===n.length){o.spliceWithArray(e,0,[r])}else{throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+n.length)}};return t}(B0);I0(on.prototype,function(){this.$mobx.atom.reportObserved();var i=this;var t=0;return Wm({next:function(){return t<i.length?{value:i[t++],done:false}:{done:true,value:void 0}}})});Object.defineProperty(on.prototype,"length",{enumerable:false,configurable:true,get:function(){return this.$mobx.getArrayLength()},set:function(i){this.$mobx.setArrayLength(i)}});ss(on.prototype,D0(),"Array");["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(i){var t=Array.prototype[i];ma(typeof t==="function","Base function not defined on Array prototype: '"+i+"'");ss(on.prototype,i,function(){return t.apply(this.peek(),arguments)})});["every","filter","forEach","map","some"].forEach(function(i){var t=Array.prototype[i];ma(typeof t==="function","Base function not defined on Array prototype: '"+i+"'");ss(on.prototype,i,function(e,r){var o=this;var n=this.$mobx;n.atom.reportObserved();var s=n.dehanceValues(n.values);return s[i](function(a,l){return e.call(r,a,l,o)},r)})});["reduce","reduceRight"].forEach(function(i){ss(on.prototype,i,function(){var t=this;var e=this.$mobx;e.atom.reportObserved();var r=arguments[0];arguments[0]=function(o,n,s){n=e.dehanceValue(n);return r(o,n,s,t)};return e.values[i].apply(e.values,arguments)})});uJ(on.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);sZ=mE(0);P0(1e3);lZ=ya("ObservableArrayAdministration",dE);cZ={};wg=function(){function i(t,e,r){if(e===void 0){e=jm}if(r===void 0){r="ObservableMap@"+vr()}this.enhancer=e;this.name=r;this.$mobx=cZ;this._keysAtom=_g(this.name+".keys()");if(typeof Map!=="function"){throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js")}this._data=new Map;this._hasMap=new Map;this.merge(t)}i.prototype._has=function(t){return this._data.has(t)};i.prototype.has=function(t){var e=this;if(!at.trackingDerivation)return this._has(t);var r=this._hasMap.get(t);if(!r){var o=r=new ha(this._has(t),xg,this.name+"."+lg(t)+"?",false);this._hasMap.set(t,o);lE(o,function(){return e._hasMap.delete(t)})}return r.get()};i.prototype.set=function(t,e){var r=this._has(t);if(en(this)){var o=rn(this,{type:r?"update":"add",object:this,newValue:e,name:t});if(!o)return this;e=o.newValue}if(r){this._updateValue(t,e)}else{this._addValue(t,e)}return this};i.prototype.delete=function(t){var e=this;Lu(this._keysAtom);if(en(this)){var r=rn(this,{type:"delete",object:this,name:t});if(!r)return false}if(this._has(t)){var o=gi();var n=Co(this);var r=n||o?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;if(o)xo(Ee(Ee({},r),{name:this.name,key:t}));tn(function(){e._keysAtom.reportChanged();e._updateHasMapEntry(t,false);var a=e._data.get(t);a.setNewValue(void 0);e._data.delete(t)});if(n)So(this,r);if(o)vo();return true}return false};i.prototype._updateHasMapEntry=function(t,e){var r=this._hasMap.get(t);if(r){r.setNewValue(e)}};i.prototype._updateValue=function(t,e){var r=this._data.get(t);e=r.prepareNewValue(e);if(e!==at.UNCHANGED){var o=gi();var n=Co(this);var s=n||o?{type:"update",object:this,oldValue:r.value,name:t,newValue:e}:null;if(o)xo(Ee(Ee({},s),{name:this.name,key:t}));r.setNewValue(e);if(n)So(this,s);if(o)vo()}};i.prototype._addValue=function(t,e){var r=this;Lu(this._keysAtom);tn(function(){var a=new ha(e,r.enhancer,r.name+"."+lg(t),false);r._data.set(t,a);e=a.value;r._updateHasMapEntry(t,true);r._keysAtom.reportChanged()});var o=gi();var n=Co(this);var s=n||o?{type:"add",object:this,name:t,newValue:e}:null;if(o)xo(Ee(Ee({},s),{name:this.name,key:t}));if(n)So(this,s);if(o)vo()};i.prototype.get=function(t){if(this.has(t))return this.dehanceValue(this._data.get(t).get());return this.dehanceValue(void 0)};i.prototype.dehanceValue=function(t){if(this.dehancer!==void 0){return this.dehancer(t)}return t};i.prototype.keys=function(){this._keysAtom.reportObserved();return this._data.keys()};i.prototype.values=function(){var t=this;var e=this.keys();return Wm({next:function(){var r=e.next(),o=r.done,n=r.value;return{done:o,value:o?void 0:t.get(n)}}})};i.prototype.entries=function(){var t=this;var e=this.keys();return Wm({next:function(){var r=e.next(),o=r.done,n=r.value;return{done:o,value:o?void 0:[n,t.get(n)]}}})};i.prototype.forEach=function(t,e){var r=this;this._keysAtom.reportObserved();this._data.forEach(function(o,n){return t.call(e,r.get(n),n,r)})};i.prototype.merge=function(t){var e=this;if(nn(t)){t=t.toJS()}tn(function(){var r=$m(true);try{if(zu(t))Object.keys(t).forEach(function(o){return e.set(o,t[o])});else if(Array.isArray(t))t.forEach(function(o){var n=y0(o,2),s=n[0],a=n[1];return e.set(s,a)});else if(Uu(t)){if(t.constructor!==Map)de("Cannot initialize from classes that inherit from Map: "+t.constructor.name);else t.forEach(function(o,n){return e.set(n,o)})}else if(t!==null&&t!==void 0)de("Cannot initialize map from "+t)}finally{Km(r)}});return this};i.prototype.clear=function(){var t=this;tn(function(){R0(function(){t._data.forEach(function(e,r){return t.delete(r)})})})};i.prototype.replace=function(t){var e=this;tn(function(){var r=cJ(t);var o=new Map;var n=false;OD(e._data.keys(),function(u){if(!r.has(u)){var m=e.delete(u);if(m){n=true}else{var p=e._data.get(u);o.set(u,p)}}});OD(r.entries(),function(u){var m=y0(u,2),p=m[0],h=m[1];var g=e._data.has(p);e.set(p,h);if(e._data.has(p)){var _=e._data.get(p);o.set(p,_);if(!g){n=true}}});if(!n){if(e._data.size!==o.size){e._keysAtom.reportChanged()}else{var s=e._data.keys();var a=o.keys();var l=s.next();var c=a.next();while(!l.done){if(l.value!==c.value){e._keysAtom.reportChanged();break}l=s.next();c=a.next()}}}e._data=o});return this};Object.defineProperty(i.prototype,"size",{get:function(){this._keysAtom.reportObserved();return this._data.size},enumerable:true,configurable:true});i.prototype.toPOJO=function(){var t=this;var e={};this.forEach(function(r,o){return e[typeof o==="symbol"?o:lg(o)]=t.get(o)});return e};i.prototype.toJS=function(){return new Map(this)};i.prototype.toJSON=function(){return this.toPOJO()};i.prototype.toString=function(){var t=this;return this.name+"[{ "+is(this.keys()).map(function(e){return lg(e)+": "+(""+t.get(e))}).join(", ")+" }]"};i.prototype.observe=function(t,e){return qm(this,t)};i.prototype.intercept=function(t){return Xm(this,t)};return i}();I0(wg.prototype,function(){return this.entries()});Gm(wg.prototype,D0(),"Map");nn=ya("ObservableMap",wg);uZ={};Tg=function(){function i(t,e,r){if(e===void 0){e=jm}if(r===void 0){r="ObservableSet@"+vr()}this.name=r;this.$mobx=uZ;this._data=new Set;this._atom=_g(this.name);if(typeof Set!=="function"){throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js")}this.enhancer=function(o,n){return e(o,n,r)};if(t){this.replace(t)}}i.prototype.dehanceValue=function(t){if(this.dehancer!==void 0){return this.dehancer(t)}return t};i.prototype.clear=function(){var t=this;tn(function(){R0(function(){t._data.forEach(function(e){t.delete(e)})})})};i.prototype.forEach=function(t,e){var r=this;this._atom.reportObserved();this._data.forEach(function(o){t.call(e,o,o,r)})};Object.defineProperty(i.prototype,"size",{get:function(){this._atom.reportObserved();return this._data.size},enumerable:true,configurable:true});i.prototype.add=function(t){var e=this;Lu(this._atom);if(en(this)){var r=rn(this,{type:"add",object:this,newValue:t});if(!r)return this}if(!this.has(t)){tn(function(){e._data.add(e.enhancer(t,void 0));e._atom.reportChanged()});var o=gi();var n=Co(this);var r=n||o?{type:"add",object:this,newValue:t}:null;if(o&&false)xo(r);if(n)So(this,r);if(o&&false)vo()}return this};i.prototype.delete=function(t){var e=this;if(en(this)){var r=rn(this,{type:"delete",object:this,oldValue:t});if(!r)return false}if(this.has(t)){var o=gi();var n=Co(this);var r=n||o?{type:"delete",object:this,oldValue:t}:null;if(o&&false)xo(Ee(Ee({},r),{name:this.name}));tn(function(){e._atom.reportChanged();e._data.delete(t)});if(n)So(this,r);if(o&&false)vo();return true}return false};i.prototype.has=function(t){this._atom.reportObserved();return this._data.has(this.dehanceValue(t))};i.prototype.entries=function(){var t=0;var e=is(this.keys());var r=is(this.values());return Wm({next:function(){var o=t;t+=1;return o<r.length?{value:[e[o],r[o]],done:false}:{done:true}}})};i.prototype.keys=function(){return this.values()};i.prototype.values=function(){this._atom.reportObserved();var t=this;var e=0;var r;if(this._data.values!==void 0){r=is(this._data.values())}else{r=[];this._data.forEach(function(o){return r.push(o)})}return Wm({next:function(){return e<r.length?{value:t.dehanceValue(r[e++]),done:false}:{done:true}}})};i.prototype.replace=function(t){var e=this;if(_a(t)){t=t.toJS()}tn(function(){var r=$m(true);try{if(Array.isArray(t)){e.clear();t.forEach(function(o){return e.add(o)})}else if(Vm(t)){e.clear();t.forEach(function(o){return e.add(o)})}else if(t!==null&&t!==void 0){de("Cannot initialize set from "+t)}}finally{Km(r)}});return this};i.prototype.observe=function(t,e){return qm(this,t)};i.prototype.intercept=function(t){return Xm(this,t)};i.prototype.toJS=function(){return new Set(this)};i.prototype.toString=function(){return this.name+"[ "+is(this.keys()).join(", ")+" ]"};return i}();I0(Tg.prototype,function(){return this.values()});Gm(Tg.prototype,D0(),"Set");_a=ya("ObservableSet",Tg);pE=function(){function i(t,e,r){this.target=t;this.name=e;this.defaultEnhancer=r;this.values={}}i.prototype.read=function(t,e){if(this.target!==t){this.illegalAccess(t,e);if(!this.values[e])return void 0}return this.values[e].get()};i.prototype.write=function(t,e,r){var o=this.target;if(o!==t){this.illegalAccess(t,e)}var n=this.values[e];if(n instanceof fa){n.set(r);return}if(en(this)){var s=rn(this,{type:"update",object:o,name:e,newValue:r});if(!s)return;r=s.newValue}r=n.prepareNewValue(r);if(r!==at.UNCHANGED){var a=Co(this);var l=gi();var s=a||l?{type:"update",object:o,oldValue:n.value,name:e,newValue:r}:null;if(l)xo(Ee(Ee({},s),{name:this.name,key:e}));n.setNewValue(r);if(a)So(this,s);if(l)vo()}};i.prototype.remove=function(t){if(!this.values[t])return;var e=this.target;if(en(this)){var r=rn(this,{object:e,name:t,type:"remove"});if(!r)return}try{os();var o=Co(this);var n=gi();var s=this.values[t].get();if(this.keys)this.keys.remove(t);delete this.values[t];delete this.target[t];var r=o||n?{type:"remove",object:e,oldValue:s,name:t}:null;if(n)xo(Ee(Ee({},r),{name:this.name,key:t}));if(o)So(this,r);if(n)vo()}finally{ns()}};i.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")};i.prototype.observe=function(t,e){return qm(this,t)};i.prototype.intercept=function(t){return Xm(this,t)};i.prototype.getKeys=function(){var t=this;if(this.keys===void 0){this.keys=new on(Object.keys(this.values).filter(function(e){return t.values[e]instanceof ha}),xg,"keys("+this.name+")",true)}return this.keys.slice()};return i}();LD=Object.create(null);zD=Object.create(null);gZ=ya("ObservableObjectAdministration",pE);ND=Object.prototype.toString;(function(){function i(){}if(i.name!=="testCodeMinification"&&false){var t=["process","env","NODE_ENV"].join(".");console.warn("[mobx] you are running a minified build, but '"+t+"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})();z0="$mobx";if(typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="object"){__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:O0,extras:{getDebugName:bZ},$mobx:z0})}if(false){_pt=false;Object.defineProperty(module.exports,"default",{enumerable:false,get:function(){if(!_pt){_pt=true;console.warn(`The MobX package does not have a default export. Use 'import { thing } from "mobx"' (recommended) or 'import * as mobx from "mobx"' instead."`)}return void 0}});["extras","Atom","BaseAtom","asFlat","asMap","asReference","asStructure","autorunAsync","createTranformer","expr","isModifierDescriptor","isStrictModeEnabled","map","useStrict","whyRun"].forEach(function(i){Object.defineProperty(module.exports,i,{enumerable:false,get:function(){de("'"+i+"' is no longer part of the public MobX api. Please consult the changelog to find out where this functionality went")},set:function(){}})})}});var fE;var gE=d(()=>{wt();fE=require("react");if(!fE.useState){throw new Error("mobx-react-lite requires React with Hooks support")}if(!O0){throw new Error("mobx-react-lite requires mobx at least version 4 to be available")}});var U0;var bE=d(()=>{U0=require("react-dom")});function N0(){var i=_Z((0,Ym.useState)(0),2),t=i[1];var e=(0,Ym.useCallback)(function(){t(function(r){return r+1})},[]);return e}function yE(i){if(typeof Symbol==="function"){return Symbol.for(i)}return"__$mobx-react "+i+"__"}function _E(){if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}if(typeof self!=="undefined"){return self}return xZ}var Ym,_Z,xZ;var Hu=d(()=>{Ym=require("react");_Z=function(i,t){var e=typeof Symbol==="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),o,n=[],s;try{while((t===void 0||t-- >0)&&!(o=r.next()).done)n.push(o.value)}catch(a){s={error:a}}finally{try{if(o&&!o.done&&(e=r["return"]))e.call(r)}finally{if(s)throw s.error}}return n};xZ={}});function CZ(i){i()}function kg(i){if(!i){i=CZ;if(false){console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")}}Sg({reactionScheduler:i});_E()[vZ]=true}var vZ;var H0=d(()=>{wt();Hu();vZ=yE("observerBatching")});function sn(){return SZ}var SZ;var Ig=d(()=>{SZ=false});function xE(i){return A0(i)}var vE=d(()=>{wt()});function CE(i){var t={cleanAt:Date.now()+wZ,reaction:i};return t}function SE(){if(W0===void 0){W0=setTimeout(kZ,TZ)}}function wE(i){Jm.add(i);SE()}function TE(i){Jm.delete(i)}function kZ(){W0=void 0;var i=Date.now();Jm.forEach(function(t){var e=t.current;if(e){if(i>=e.cleanAt){e.reaction.dispose();t.current=null;Jm.delete(t)}}});if(Jm.size>0){SE()}}var wZ,TZ,Jm,W0;var kE=d(()=>{wZ=1e4;TZ=1e4;Jm=new Set});function G0(i){return function(){if(Dg){Eg.push(i)}else{i()}}}function V0(i){Dg=true;Eg=[];try{var t=i();Dg=false;var e=Eg.length>0?Eg:void 0;IE.default.useLayoutEffect(function(){if(e){e.forEach(function(r){return r()})}},[e]);return t}finally{Dg=false}}var IE,Dg,Eg;var j0=d(()=>{IE=y(require("react"));Dg=false;Eg=[]});function DE(i){return"observer"+i}function Wu(i,t,e){if(t===void 0){t="observed"}if(e===void 0){e=IZ}if(sn()){return i()}var r=e.useForceUpdate||N0;var o=r();var n=G0(o);var s=Fg.default.useRef(null);if(!s.current){var a=new ga(DE(t),function(){if(l.mounted){n()}else{a.dispose();s.current=null}});var l=CE(a);s.current=l;wE(s)}var c=s.current.reaction;Fg.default.useDebugValue(c,xE);Fg.default.useEffect(function(){TE(s);if(s.current){s.current.mounted=true}else{s.current={reaction:new ga(DE(t),function(){n()}),cleanAt:Infinity};n()}return function(){s.current.reaction.dispose();s.current=null}},[]);return V0(function(){var u;var m;c.track(function(){try{u=i()}catch(p){m=p}});if(m){throw m}return u})}var Fg,IZ;var Rg=d(()=>{wt();Fg=y(require("react"));vE();kE();Ig();Hu();j0();IZ={}});function K0(i,t){if(sn()){return i}var e=$0({forwardRef:false},t);var r=i.displayName||i.name;var o=function(s,a){return Wu(function(){return i(s,a)},r)};o.displayName=r;var n;if(e.forwardRef){n=(0,Zm.memo)((0,Zm.forwardRef)(o))}else{n=(0,Zm.memo)(o)}EZ(i,n);n.displayName=r;return n}function EZ(i,t){Object.keys(i).forEach(function(e){if(!DZ[e]){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}})}var Zm,$0,DZ;var EE=d(()=>{Zm=require("react");Ig();Rg();$0=function(){$0=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))i[o]=t[o]}return i};return $0.apply(this,arguments)};DZ={$$typeof:true,render:true,compare:true,type:true}});function Gu(i){var t=i.children,e=i.render;var r=t||e;if(typeof r!=="function"){return null}return Wu(r)}function FE(i,t,e,r,o){var n=t==="children"?"render":"children";var s=typeof i[t]==="function";var a=typeof i[n]==="function";if(s&&a){return new Error("MobX Observer: Do not use children and render in the same time in`"+e)}if(s||a){return null}return new Error("Invalid prop `"+o+"` of type `"+typeof i[t]+"` supplied to `"+e+"`, expected `function`.")}var RE=d(()=>{Rg();Gu.propTypes={children:FE,render:FE};Gu.displayName="Observer"});var RZ;var X0=d(()=>{wt();RZ=y(require("react"));Hu()});var OZ;var OE=d(()=>{wt();OZ=y(require("react"));X0();Hu()});var q0=d(()=>{gE();bE();H0();Ig();EE();Rg();RE();Hu();X0();OE();j0();H0();kg(U0.unstable_batchedUpdates)});function MZ(i){if(typeof Symbol==="function"){return Symbol(i)}var t="__$mobx-react "+i+" ("+AE+")";AE++;return t}function xa(i){if(!Y0[i]){Y0[i]=MZ(i)}return Y0[i]}function VE(i,t){if(BE(i,t))return true;if(typeof i!=="object"||i===null||typeof t!=="object"||t===null){return false}var e=Object.keys(i);var r=Object.keys(t);if(e.length!==r.length)return false;for(var o=0;o<e.length;o++){if(!Object.hasOwnProperty.call(t,e[o])||!BE(i[e[o]],t[e[o]])){return false}}return true}function BE(i,t){if(i===t){return i!==0||1/i===1/t}else{return i!==i&&t!==t}}function zZ(i,t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(i));Object.getOwnPropertyNames(i).forEach(function(r){if(!LZ[r]&&e.indexOf(r)===-1){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))}})}function as(i,t,e){if(!Object.hasOwnProperty.call(i,t)){Object.defineProperty(i,t,{enumerable:false,configurable:true,writable:true,value:e})}else{i[t]=e}}function UZ(i,t){var e=i[PE]=i[PE]||{};var r=e[t]=e[t]||{};r.locks=r.locks||0;r.methods=r.methods||[];return r}function ME(i,t){var e=this;for(var r=arguments.length,o=new Array(r>2?r-2:0),n=2;n<r;n++){o[n-2]=arguments[n]}t.locks++;try{var s;if(i!==void 0&&i!==null){s=i.apply(this,o)}return s}finally{t.locks--;if(t.locks===0){t.methods.forEach(function(a){a.apply(e,o)})}}}function LE(i,t){var e=function r(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++){n[s]=arguments[s]}ME.call.apply(ME,[this,i,t].concat(n))};return e}function NZ(i,t,e){var r=UZ(i,t);if(r.methods.indexOf(e)<0){r.methods.push(e)}var o=Object.getOwnPropertyDescriptor(i,t);if(o&&o[jE]){return}var n=i[t];var s=$E(i,t,o?o.enumerable:void 0,r,n);Object.defineProperty(i,t,s)}function $E(i,t,e,r,o){var n;var s=LE(o,r);return n={},n[jE]=true,n.get=function a(){return s},n.set=function a(l){if(this===i){s=LE(l,r)}else{var c=$E(this,t,e,r,l);Object.defineProperty(this,t,c)}},n.configurable=true,n.enumerable=e,n}function HZ(i){var t=i.prototype;if(i[zE]){var e=Z0(t);console.warn("The provided component class ("+e+") \n                has already been declared as an observer component.")}else{i[zE]=true}if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(i["__proto__"]!==Pe.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=UE;else if(t.shouldComponentUpdate!==UE)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}NE(t,"props");NE(t,"state");var r=t.render;t.render=function(){return WZ.call(this,r)};NZ(t,"componentWillUnmount",function(){var o;if(sn()===true)return;(o=this.render[J0])===null||o===void 0?void 0:o.dispose();this[KE]=true;if(!this.render[J0]){var n=Z0(this);console.warn("The reactive render of an observer class component ("+n+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}});return i}function Z0(i){return i.displayName||i.name||i.constructor&&(i.constructor.displayName||i.constructor.name)||"<component>"}function WZ(i){var t=this;if(sn()===true)return i.call(this);as(this,Ag,false);as(this,Og,false);var e=Z0(this);var r=i.bind(this);var o=false;var n=new ga(e+".render()",function(){if(!o){o=true;if(t[KE]!==true){var a=true;try{as(t,Og,true);if(!t[Ag])Pe.Component.prototype.forceUpdate.call(t);a=false}finally{as(t,Og,false);if(a)n.dispose()}}}});n["reactComponent"]=this;s[J0]=n;this.render=s;function s(){o=false;var a=void 0;var l=void 0;n.track(function(){try{l=tE(false,r)}catch(c){a=c}});if(a){throw a}return l}return s.call(this)}function UE(i,t){if(sn()){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==t){return true}return!VE(this.props,i)}function NE(i,t){var e=xa("reactProp_"+t+"_valueHolder");var r=xa("reactProp_"+t+"_atomHolder");function o(){if(!this[r]){as(this,r,_g("reactive "+t))}return this[r]}Object.defineProperty(i,t,{configurable:true,enumerable:true,get:function n(){var s=false;if(Ml&&rs){s=Ml(true)}o.call(this).reportObserved();if(Ml&&rs){rs(s)}return this[e]},set:function n(s){if(!this[Og]&&!VE(this[e],s)){as(this,e,s);as(this,Ag,true);o.call(this).reportChanged();as(this,Ag,false)}else{as(this,e,s)}}})}function S(i){if(i["isMobxInjector"]===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(WE&&i["$$typeof"]===WE){throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.")}if(HE&&i["$$typeof"]===HE){var t=i["render"];if(typeof t!=="function")throw new Error("render property of ForwardRef was not a function");return(0,Pe.forwardRef)(function e(){var r=arguments;return(0,Pe.createElement)(Gu,null,function(){return t.apply(void 0,r)})})}if(typeof i==="function"&&(!i.prototype||!i.prototype.render)&&!i["isReactClass"]&&!Object.prototype.isPrototypeOf.call(Pe.Component,i)){return K0(i)}return HZ(i)}function Bg(){Bg=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){i[r]=e[r]}}}return i};return Bg.apply(this,arguments)}function GZ(i,t){if(i==null)return{};var e={};var r=Object.keys(i);var o,n;for(n=0;n<r.length;n++){o=r[n];if(t.indexOf(o)>=0)continue;e[o]=i[o]}return e}function tp(i){var t=i.children,e=GZ(i,["children"]);var r=Pe.default.useContext(Qm);var o=Pe.default.useRef(Bg({},r,e));var n=o.current;if(false){var s=Bg({},n,e);if(!VE(n,s)){throw new Error("MobX Provider: The set of provided stores has changed. See: https://github.com/mobxjs/mobx-react#the-set-of-provided-stores-has-changed-error.")}}return Pe.default.createElement(Qm.Provider,{value:n},t)}function GE(i,t,e,r){var o=Pe.default.forwardRef(function(n,s){var a=Bg({},n);var l=Pe.default.useContext(Qm);Object.assign(a,i(l||{},a)||{});if(s){a.ref=s}return Pe.default.createElement(t,a)});if(r)o=S(o);o["isMobxInjector"]=true;zZ(t,o);o["wrappedComponent"]=t;o.displayName=VZ(t,e);return o}function VZ(i,t){var e;var r=i.displayName||i.name||i.constructor&&i.constructor.name||"Component";if(t)e="inject-with-"+t+"("+r+")";else e="inject("+r+")";return e}function jZ(i){return function(t,e){i.forEach(function(r){if(r in e)return;if(!(r in t))throw new Error("MobX injector: Store '"+r+"' is not available! Make sure it is provided by some Provider");e[r]=t[r]});return e}}function it(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++){t[e]=arguments[e]}if(typeof arguments[0]==="function"){var r=arguments[0];return function(o){return GE(r,o,r.name,true)}}else{return function(o){return GE(jZ(t),o,t.join("-"),false)}}}var Pe,AE,Y0,LZ,PE,jE,J0,zE,KE,Ag,Og,XE,HE,WE,Qm;var A=d(()=>{wt();Pe=y(require("react"));q0();q0();AE=0;Y0={};LZ={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};PE=xa("patchMixins");jE=xa("patchedDefinition");J0=z0||"$mobx";zE=xa("isMobXReactObserver");KE=xa("isUnmounted");Ag=xa("skipRender");Og=xa("isForcingUpdate");XE=typeof Symbol==="function"&&Symbol.for;HE=XE?Symbol.for("react.forward_ref"):typeof Pe.forwardRef==="function"&&(0,Pe.forwardRef)(function(i){return null})["$$typeof"];WE=XE?Symbol.for("react.memo"):typeof Pe.memo==="function"&&(0,Pe.memo)(function(i){return null})["$$typeof"];Qm=Pe.default.createContext({});tp.displayName="MobXProvider";if(!Pe.Component)throw new Error("mobx-react requires React to be available");if(!Z)throw new Error("mobx-react requires mobx to be available")});var qE,Pg;var Q0=d(()=>{qE=require("styled-components");Pg=qE.keyframes`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`});var YE,JE;var ZE=d(()=>{YE=require("styled-components");JE=YE.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`});var QE,Mg;var tF=d(()=>{QE=require("styled-components");Mg=QE.keyframes`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`});var tC=d(()=>{Q0();ZE();tF()});var Xr;var Vu=d(()=>{Xr=[]});var eF;var iF=d(()=>{Vu();eF=function(){return Xr.some(function(i){return i.activeTargets.length>0})}});var rF;var oF=d(()=>{Vu();rF=function(){return Xr.some(function(i){return i.skippedTargets.length>0})}});var nF,sF;var aF=d(()=>{nF="ResizeObserver loop completed with undelivered notifications.";sF=function(){var i;if(typeof ErrorEvent==="function"){i=new ErrorEvent("error",{message:nF})}else{i=document.createEvent("Event");i.initEvent("error",false,false);i.message=nF}window.dispatchEvent(i)}});var zl;var eC=d(()=>{(function(i){i["BORDER_BOX"]="border-box";i["CONTENT_BOX"]="content-box";i["DEVICE_PIXEL_CONTENT_BOX"]="device-pixel-content-box"})(zl||(zl={}))});var iC;var lF=d(()=>{iC=function(){function i(t,e,r,o){this.x=t;this.y=e;this.width=r;this.height=o;this.top=this.y;this.left=this.x;this.bottom=this.top+this.height;this.right=this.left+this.width;return Object.freeze(this)}i.prototype.toJSON=function(){var t=this,e=t.x,r=t.y,o=t.top,n=t.right,s=t.bottom,a=t.left,l=t.width,c=t.height;return{x:e,y:r,top:o,right:n,bottom:s,left:a,width:l,height:c}};i.fromRect=function(t){return new i(t.x,t.y,t.width,t.height)};return i}()});var ep,Lg,rC,cF;var ip=d(()=>{ep=function(i){return i instanceof SVGElement&&"getBBox"in i};Lg=function(i){if(ep(i)){var t=i.getBBox(),e=t.width,r=t.height;return!e&&!r}var o=i,n=o.offsetWidth,s=o.offsetHeight;return!(n||s||i.getClientRects().length)};rC=function(i){var t,e;var r=(e=(t=i)===null||t===void 0?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&i instanceof r.Element)};cF=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image"){break}case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return true}return false}});var Ul;var oC=d(()=>{Ul=typeof window!=="undefined"?window:{}});var zg,uF,$Z,KZ,an,ju,dF,nC,Ug;var Ng=d(()=>{eC();lF();ip();oC();zg=new WeakMap;uF=/auto|scroll/;$Z=/^tb|vertical/;KZ=/msie|trident/i.test(Ul.navigator&&Ul.navigator.userAgent);an=function(i){return parseFloat(i||"0")};ju=function(i,t,e){if(i===void 0){i=0}if(t===void 0){t=0}if(e===void 0){e=false}return Object.freeze({inlineSize:(e?t:i)||0,blockSize:(e?i:t)||0})};dF=Object.freeze({devicePixelContentBoxSize:ju(),borderBoxSize:ju(),contentBoxSize:ju(),contentRect:new iC(0,0,0,0)});nC=function(i,t){if(t===void 0){t=false}if(zg.has(i)&&!t){return zg.get(i)}if(Lg(i)){zg.set(i,dF);return dF}var e=getComputedStyle(i);var r=ep(i)&&i.ownerSVGElement&&i.getBBox();var o=!KZ&&e.boxSizing==="border-box";var n=$Z.test(e.writingMode||"");var s=!r&&uF.test(e.overflowY||"");var a=!r&&uF.test(e.overflowX||"");var l=r?0:an(e.paddingTop);var c=r?0:an(e.paddingRight);var u=r?0:an(e.paddingBottom);var m=r?0:an(e.paddingLeft);var p=r?0:an(e.borderTopWidth);var h=r?0:an(e.borderRightWidth);var g=r?0:an(e.borderBottomWidth);var _=r?0:an(e.borderLeftWidth);var x=m+c;var b=l+u;var w=_+h;var T=p+g;var D=!a?0:i.offsetHeight-T-i.clientHeight;var O=!s?0:i.offsetWidth-w-i.clientWidth;var k=o?x+w:0;var E=o?b+T:0;var J=r?r.width:an(e.width)-k-O;var tt=r?r.height:an(e.height)-E-D;var mt=J+x+O+w;var bt=tt+b+D+T;var gt=Object.freeze({devicePixelContentBoxSize:ju(Math.round(J*devicePixelRatio),Math.round(tt*devicePixelRatio),n),borderBoxSize:ju(mt,bt,n),contentBoxSize:ju(J,tt,n),contentRect:new iC(m,l,J,tt)});zg.set(i,gt);return gt};Ug=function(i,t,e){var r=nC(i,e),o=r.borderBoxSize,n=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case zl.DEVICE_PIXEL_CONTENT_BOX:return s;case zl.BORDER_BOX:return o;default:return n}}});var sC;var aC=d(()=>{Ng();sC=function(){function i(t){var e=nC(t);this.target=t;this.contentRect=e.contentRect;this.borderBoxSize=[e.borderBoxSize];this.contentBoxSize=[e.contentBoxSize];this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]}return i}()});var Hg;var lC=d(()=>{ip();Hg=function(i){if(Lg(i)){return Infinity}var t=0;var e=i.parentNode;while(e){t+=1;e=e.parentNode}return t}});var mF;var pF=d(()=>{Vu();aC();lC();Ng();mF=function(){var i=Infinity;var t=[];Xr.forEach(function n(s){if(s.activeTargets.length===0){return}var a=[];s.activeTargets.forEach(function l(c){var u=new sC(c.target);var m=Hg(c.target);a.push(u);c.lastReportedSize=Ug(c.target,c.observedBox);if(m<i){i=m}});t.push(function l(){s.callback.call(s.observer,a,s.observer)});s.activeTargets.splice(0,s.activeTargets.length)});for(var e=0,r=t;e<r.length;e++){var o=r[e];o()}return i}});var cC;var hF=d(()=>{Vu();lC();cC=function(i){Xr.forEach(function t(e){e.activeTargets.splice(0,e.activeTargets.length);e.skippedTargets.splice(0,e.skippedTargets.length);e.observationTargets.forEach(function r(o){if(o.isActive()){if(Hg(o.target)>i){e.activeTargets.push(o)}else{e.skippedTargets.push(o)}}})})}});var fF;var gF=d(()=>{iF();oF();aF();pF();hF();fF=function(){var i=0;cC(i);while(eF()){i=mF();cC(i)}if(rF()){sF()}return i>0}});var uC,bF,XZ,yF;var _F=d(()=>{bF=[];XZ=function(){return bF.splice(0).forEach(function(i){return i()})};yF=function(i){if(!uC){var t=0;var e=document.createTextNode("");var r={characterData:true};new MutationObserver(function(){return XZ()}).observe(e,r);uC=function(){e.textContent=""+(t?t--:t++)}}bF.push(i);uC()}});var xF;var vF=d(()=>{_F();xF=function(i){yF(function t(){requestAnimationFrame(i)})}});var Wg,qZ,YZ,JZ,CF,SF,dC,ZZ,Gg,mC;var wF=d(()=>{gF();oC();vF();Wg=0;qZ=function(){return!!Wg};YZ=250;JZ={attributes:true,characterData:true,childList:true,subtree:true};CF=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"];SF=function(i){if(i===void 0){i=0}return Date.now()+i};dC=false;ZZ=function(){function i(){var t=this;this.stopped=true;this.listener=function(){return t.schedule()}}i.prototype.run=function(t){var e=this;if(t===void 0){t=YZ}if(dC){return}dC=true;var r=SF(t);xF(function(){var o=false;try{o=fF()}finally{dC=false;t=r-SF();if(!qZ()){return}if(o){e.run(1e3)}else if(t>0){e.run(t)}else{e.start()}}})};i.prototype.schedule=function(){this.stop();this.run()};i.prototype.observe=function(){var t=this;var e=function(){return t.observer&&t.observer.observe(document.body,JZ)};document.body?e():Ul.addEventListener("DOMContentLoaded",e)};i.prototype.start=function(){var t=this;if(this.stopped){this.stopped=false;this.observer=new MutationObserver(this.listener);this.observe();CF.forEach(function(e){return Ul.addEventListener(e,t.listener,true)})}};i.prototype.stop=function(){var t=this;if(!this.stopped){this.observer&&this.observer.disconnect();CF.forEach(function(e){return Ul.removeEventListener(e,t.listener,true)});this.stopped=true}};return i}();Gg=new ZZ;mC=function(i){!Wg&&i>0&&Gg.start();Wg+=i;!Wg&&Gg.stop()}});var QZ,TF;var kF=d(()=>{eC();Ng();ip();QZ=function(i){return!ep(i)&&!cF(i)&&getComputedStyle(i).display==="inline"};TF=function(){function i(t,e){this.target=t;this.observedBox=e||zl.CONTENT_BOX;this.lastReportedSize={inlineSize:0,blockSize:0}}i.prototype.isActive=function(){var t=Ug(this.target,this.observedBox,true);if(QZ(this.target)){this.lastReportedSize=t}if(this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize){return true}return false};return i}()});var IF;var DF=d(()=>{IF=function(){function i(t,e){this.activeTargets=[];this.skippedTargets=[];this.observationTargets=[];this.observer=t;this.callback=e}return i}()});var Vg,EF,rp;var FF=d(()=>{wF();kF();DF();Vu();Vg=new WeakMap;EF=function(i,t){for(var e=0;e<i.length;e+=1){if(i[e].target===t){return e}}return-1};rp=function(){function i(){}i.connect=function(t,e){var r=new IF(t,e);Vg.set(t,r)};i.observe=function(t,e,r){var o=Vg.get(t);var n=o.observationTargets.length===0;if(EF(o.observationTargets,e)<0){n&&Xr.push(o);o.observationTargets.push(new TF(e,r&&r.box));mC(1);Gg.schedule()}};i.unobserve=function(t,e){var r=Vg.get(t);var o=EF(r.observationTargets,e);var n=r.observationTargets.length===1;if(o>=0){n&&Xr.splice(Xr.indexOf(r),1);r.observationTargets.splice(o,1);mC(-1)}};i.disconnect=function(t){var e=this;var r=Vg.get(t);r.observationTargets.slice().forEach(function(o){return e.unobserve(t,o.target)});r.activeTargets.splice(0,r.activeTargets.length)};return i}()});var Nl;var RF=d(()=>{FF();ip();Nl=function(){function i(t){if(arguments.length===0){throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.")}if(typeof t!=="function"){throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.")}rp.connect(this,t)}i.prototype.observe=function(t,e){if(arguments.length===0){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!rC(t)){throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element")}rp.observe(this,t,e)};i.prototype.unobserve=function(t){if(arguments.length===0){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.")}if(!rC(t)){throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element")}rp.unobserve(this,t)};i.prototype.disconnect=function(){rp.disconnect(this)};i.toString=function(){return"function ResizeObserver () { [polyfill code] }"};return i}()});var jg=d(()=>{RF();aC()});var $u=Wt((Tft,BF)=>{var tQ="Expected a function";var OF=0/0;var eQ="[object Symbol]";var iQ=/^\s+|\s+$/g;var rQ=/^[-+]0x[0-9a-f]+$/i;var oQ=/^0b[01]+$/i;var nQ=/^0o[0-7]+$/i;var sQ=parseInt;var aQ=typeof global=="object"&&global&&global.Object===Object&&global;var lQ=typeof self=="object"&&self&&self.Object===Object&&self;var cQ=aQ||lQ||Function("return this")();var uQ=Object.prototype;var dQ=uQ.toString;var mQ=Math.max;var pQ=Math.min;var pC=function(){return cQ.Date.now()};function hQ(i,t,e){var r,o,n,s,a,l,c=0,u=false,m=false,p=true;if(typeof i!="function"){throw new TypeError(tQ)}t=AF(t)||0;if(hC(e)){u=!!e.leading;m="maxWait"in e;n=m?mQ(AF(e.maxWait)||0,t):n;p="trailing"in e?!!e.trailing:p}function h(k){var E=r,J=o;r=o=void 0;c=k;s=i.apply(J,E);return s}function g(k){c=k;a=setTimeout(b,t);return u?h(k):s}function _(k){var E=k-l,J=k-c,tt=t-E;return m?pQ(tt,n-J):tt}function x(k){var E=k-l,J=k-c;return l===void 0||E>=t||E<0||m&&J>=n}function b(){var k=pC();if(x(k)){return w(k)}a=setTimeout(b,_(k))}function w(k){a=void 0;if(p&&r){return h(k)}r=o=void 0;return s}function T(){if(a!==void 0){clearTimeout(a)}c=0;r=l=o=a=void 0}function D(){return a===void 0?s:w(pC())}function O(){var k=pC(),E=x(k);r=arguments;o=this;l=k;if(E){if(a===void 0){return g(l)}if(m){a=setTimeout(b,t);return h(l)}}if(a===void 0){a=setTimeout(b,t)}return s}O.cancel=T;O.flush=D;return O}function hC(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function fQ(i){return!!i&&typeof i=="object"}function gQ(i){return typeof i=="symbol"||fQ(i)&&dQ.call(i)==eQ}function AF(i){if(typeof i=="number"){return i}if(gQ(i)){return OF}if(hC(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=hC(t)?t+"":t}if(typeof i!="string"){return i===0?i:+i}i=i.replace(iQ,"");var e=oQ.test(i);return e||nQ.test(i)?sQ(i.slice(2),e?2:8):rQ.test(i)?OF:+i}BF.exports=hQ});var PF,Fe;var Cr=d(()=>{PF=y(require("react"));Fe=PF.default.createContext({})});var MF=d(()=>{});var jt;var wo=d(()=>{jt=i=>{if(i){i.width=1;i.height=1;const t=i.getContext("2d");if(t){t.clearRect(0,0,1,1)}}}});var op,Sr,xe,LF,zF,UF,NF;var fC=d(()=>{wo();op=()=>{return typeof window!=="undefined"&&window.navigator&&window.navigator.userAgent||""};Sr=(i=op())=>{return i.indexOf("Edge")!==-1};xe=(i=op())=>{return!!i.match(/msie|trident/i)};LF=(i=op())=>{return!!i.match(/windows/i)};zF=(i=op())=>{return i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1};UF=(i=op())=>{return!!i.match(/iP(hone|od|ad)|AppleWebKit/)};NF=()=>{if(typeof document==="undefined"){return false}const i=document.createElement("canvas");const t=i.getContext("webgl")||i.getContext("experimental-webgl");const e=t&&t instanceof WebGLRenderingContext;jt(i);return e}});var bQ,HF;var WF=d(()=>{bQ=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g);HF=i=>i.replace(bQ,"")});var ln;var gC=d(()=>{ln=i=>{try{new URL(i);return true}catch(t){return false}}});var GF;var bC=d(()=>{GF=i=>{return i instanceof HTMLImageElement}});function yQ(i){return!Object.prototype.hasOwnProperty.call(i,"name")}function _Q(i){return!Object.prototype.hasOwnProperty.call(i,"name")}var VF=d(()=>{});var To;var np=d(()=>{To=(m=>{m["UNDO"]="undo";m["REDO"]="redo";m["DELETE"]="delete";m["BRING_TO_FRONT"]="bringtofront";m["EDIT"]="edit";m["DUPLICATE"]="duplicate";m["ADD"]="add";m["FLIP"]="flip";m["INVERT"]="invert";m["CLOSE"]="close";m["EXPORT"]="export";return m})(To||{})});var N;var yC=d(()=>{N=(p=>{p["LIBRARY"]="library";p["TRANSFORM"]="transform";p["FILTER"]="filter";p["ADJUSTMENT"]="adjustment";p["FOCUS"]="focus";p["STICKER"]="sticker";p["TEXT"]="text";p["TEXT_DESIGN"]="textdesign";p["OVERLAY"]="overlay";p["FRAME"]="frame";p["BRUSH"]="brush";p["CUSTOM"]="customTool";return p})(N||{})});var jF=d(()=>{});var $F=d(()=>{});var KF=d(()=>{});var XF=d(()=>{});var cn;var Ku=d(()=>{cn=(e=>{e["TEXT"]="text";e["CARD"]="card";return e})(cn||{})});var qF=d(()=>{});var YF=d(()=>{});var ze;var JF=d(()=>{ze=(r=>{r["LARGE"]="large";r["MEDIUM"]="medium";r["SMALL"]="small";return r})(ze||{})});var ZF=d(()=>{});var QF=d(()=>{});var tR=d(()=>{});var eR=d(()=>{});var iR=d(()=>{});var rR=d(()=>{});var oR=d(()=>{});var nR=d(()=>{});var sR=d(()=>{});var aR=d(()=>{});var lR=d(()=>{});var cR=d(()=>{});var uR=d(()=>{});var dR=d(()=>{});var un;var mR=d(()=>{un=(o=>{o["ERROR"]="error";o["WARNING"]="warning";o["INFO"]="info";o["TEXT_EDIT"]="textEdit";return o})(un||{})});var pR=d(()=>{});var hR=d(()=>{});var fR=d(()=>{});var gR=d(()=>{});var bR=d(()=>{});var Xe;var yR=d(()=>{Xe=(c=>{c["BrushSize"]="brush-size";c["BrushHardness"]="brush-hardness";c["FilterIntensity"]="filter-intensity";c["TextLineSpacing"]="text-line-spacing";c["StickerOpacity"]="sticker-opacity";c["OverlayOpacity"]="overlay-opacity";c["FrameSize"]="frame-size";c["FrameOpacity"]="frame-opacity";c["FocusIntensity"]="focus-intensity";return c})(Xe||{})});var _R=d(()=>{});var xR=d(()=>{});var vR=d(()=>{});var CR=d(()=>{});var SR=d(()=>{});var wR=d(()=>{});var TR=d(()=>{});var kR,IR,$g;var DR=d(()=>{kR=class{constructor(){this.enabled=true;this.threshold=20;this.snapToHorizontalCenter=true;this.snapToVerticalCenter=true;this.snapToLeft=.1;this.snapToRight=.1;this.snapToTop=.1;this.snapToBottom=.1}};IR=class{constructor(){this.enabled=true;this.threshold=20;this.angles=[0,45,90,135,180,225,270,315]}};$g=class{constructor(){this.position=new kR;this.rotation=new IR}}});var ER,Kg;var FR=d(()=>{ER=(n=>{n["CENTER"]="center";n["TOP_LEFT"]="top-left";n["TOP_RIGHT"]="top-right";n["BOTTOM_LEFT"]="bottom-left";n["BOTTOM_RIGHT"]="bottom-right";return n})(ER||{});Kg=class{constructor(){this.watermarkURI="";this.alignment="top-right";this.inset=.05;this.size=.2}}});var RR,OR;var AR=d(()=>{RR=(t=>{t["OBJECT"]="object";return t})(RR||{});OR=class{}});var Hl;var BR=d(()=>{Hl=(o=>{o["IMAGE"]="image";o["DATA_URL"]="data-url";o["BLOB"]="blob";o["MSBLOB"]="ms-blob";return o})(Hl||{})});var dn;var PR=d(()=>{dn=(e=>{e["PNG"]="image/png";e["JPEG"]="image/jpeg";return e})(dn||{})});var sp;var MR=d(()=>{sp=(l=>{l["BMP"]="image/bmp";l["GIF"]="image/gif";l["ICO"]="image/x-icon";l["JPEG"]="image/jpeg";l["PNG"]="image/png";l["SVG"]="image/svg+xml";l["TIFF"]="image/tiff";l["WEBP"]="image/webp";return l})(sp||{})});var LR=d(()=>{});var zR=d(()=>{});var UR=d(()=>{});var NR=d(()=>{});var HR;var WR=d(()=>{yC();HR=class{constructor(){this.order="default";this.language="en";this.theme="dark";this.assetBaseUrl="assets/";this.assetResolver={};this.displayResizeWarning=false;this.displayCloseWarning=true;this.displayDiscardChangesWarning=true;this.displayCanvasRendererWarning=true;this.displayToolControlBarTitle=true;this.displaySerializationModal=true;this.forceCrop=false;this.enableZoom=true;this.scaleImageToFit=true;this.restrictZoomOutToDefault=true;this.defaultTool="filter"}};"filter","focus","adjustment","library","overlay","sticker","text","textdesign","frame","brush","transform","customTool"});var GR=d(()=>{});var Xu,_C;var VR=d(()=>{Xu=(p=>{p["BRIGHTNESS"]="brightness";p["CONTRAST"]="contrast";p["SATURATION"]="saturation";p["CLARITY"]="clarity";p["SHADOWS"]="shadows";p["HIGHLIGHTS"]="highlights";p["EXPOSURE"]="exposure";p["GAMMA"]="gamma";p["BLACKS"]="blacks";p["WHITES"]="whites";p["TEMPERATURE"]="temperature";p["SHARPNESS"]="sharpness";return p})(Xu||{});_C=Object.values(Xu).reduce((i,t)=>{i[t]=true;return i},{})});var xC,Xg;var jR=d(()=>{xC=(o=>{o["RemoveAdjustmentButton"]="removeAdjustmentButton";o["Expandable"]="expandable";o["Separator"]="separator";o["Items"]="items";return o})(xC||{});Xg=class{constructor(){this.categories=[];this.flattenCategories=false;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeAdjustmentButton","separator"]},"items"]}}});var $R=d(()=>{});var KR=d(()=>{VR();jR();$R()});var XR;var qR=d(()=>{XR=class{}});var vC,CC,qg;var YR=d(()=>{Ku();vC=(n=>{n["RemoveFilterButton"]="removeFilterButton";n["FilterIntensitySlider"]="filterIntensitySlider";n["Expandable"]="expandable";n["Separator"]="separator";n["Items"]="items";return n})(vC||{});CC=(t=>{t["FilterIntensity"]="filterIntensity";return t})(CC||{});qg=class{constructor(){this.categories=[];this.flattenCategories=false;this.categoryHeaderType="card";this.enablePreviewThumbnails=false;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFilterButton","filterIntensitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["filterIntensity"]}}});function qu(i){return i.lightColor!==void 0}function SC(i){return i.lutURI!==void 0}var JR=d(()=>{});var ap,lp;var ZR=d(()=>{ap=(ct=>{ct["Desert"]="imgly_duotone_desert";ct["Peach"]="imgly_duotone_peach";ct["Clash"]="imgly_duotone_clash";ct["Plum"]="imgly_duotone_plum";ct["Breezy"]="imgly_duotone_breezy";ct["DeepBlue"]="imgly_duotone_deepblue";ct["Frog"]="imgly_duotone_frog";ct["Sunset"]="imgly_duotone_sunset";ct["AD1920"]="imgly_lut_ad1920";ct["Greyed"]="imgly_lut_bw";ct["Dusty"]="imgly_lut_x400";ct["Litho"]="imgly_lut_litho";ct["Sepia"]="imgly_lut_sepiahigh";ct["Weathered"]="imgly_lut_plate";ct["HardStuff"]="imgly_lut_sin";ct["Polaroid"]="imgly_lut_blues";ct["Sunny70s"]="imgly_lut_front";ct["Oldtimer"]="imgly_lut_texas";ct["Inferno"]="imgly_lut_celsius";ct["Snappy"]="imgly_lut_cool";ct["Chestnut"]="imgly_lut_chest";ct["Softy"]="imgly_lut_winter";ct["Pebble"]="imgly_lut_kdynamic";ct["Moss"]="imgly_lut_fall";ct["Lemon"]="imgly_lut_lenin";ct["GreenGap"]="imgly_lut_pola669";ct["Colla"]="imgly_lut_elder";ct["Solanus"]="imgly_lut_orchid";ct["Kalmen"]="imgly_lut_bleached";ct["Joran"]="imgly_lut_bleachedblue";ct["Levante"]="imgly_lut_breeze";ct["Zephyr"]="imgly_lut_blueshadows";ct["Golden"]="imgly_lut_sunset";ct["LowFire"]="imgly_lut_eighties";ct["Sunrise"]="imgly_lut_evening";ct["FlatBlack"]="imgly_lut_k2";ct["Pumpkin"]="imgly_lut_nogreen";ct["Ancient"]="imgly_lut_ancient";ct["Candy"]="imgly_lut_cottoncandy";ct["Classic"]="imgly_lut_classic";ct["Colorful"]="imgly_lut_colorful";ct["Creamy"]="imgly_lut_creamy";ct["Fixie"]="imgly_lut_fixie";ct["Food"]="imgly_lut_food";ct["Fridge"]="imgly_lut_fridge";ct["Glam"]="imgly_lut_glam";ct["Gobblin"]="imgly_lut_gobblin";ct["Hicon"]="imgly_lut_highcontrast";ct["HighCarb"]="imgly_lut_highcarb";ct["K1"]="imgly_lut_k1";ct["K6"]="imgly_lut_k6";ct["Keen"]="imgly_lut_keen";ct["Lomo"]="imgly_lut_lomo";ct["Lomo100"]="imgly_lut_lomo100";ct["Lucid"]="imgly_lut_lucid";ct["Mellow"]="imgly_lut_mellow";ct["Neat"]="imgly_lut_neat";ct["Pale"]="imgly_lut_pale";ct["Pitched"]="imgly_lut_pitched";ct["PolaSX"]="imgly_lut_polasx";ct["Pro400"]="imgly_lut_pro400";ct["Quozi"]="imgly_lut_quozi";ct["Settled"]="imgly_lut_settled";ct["Seventies"]="imgly_lut_seventies";ct["Soft"]="imgly_lut_soft";ct["Steel"]="imgly_lut_steel";ct["Summer"]="imgly_lut_summer";ct["Tender"]="imgly_lut_tender";ct["Twilight"]="imgly_lut_twilight";return ct})(ap||{});lp=(a=>{a["DuoTone"]="imgly_filter_category_duotone";a["BW"]="imgly_filter_category_bw";a["Vintage"]="imgly_filter_category_vintage";a["Smooth"]="imgly_filter_category_smooth";a["Cold"]="imgly_filter_category_cold";a["Warm"]="imgly_filter_category_warm";a["Legacy"]="imgly_filter_category_legacy";return a})(lp||{})});var QR=d(()=>{YR();JR();ZR()});var wC,tO,Yg;var eO=d(()=>{wC=(n=>{n["RemoveFocusButton"]="removeFocusButton";n["FocusIntensitySlider"]="focusIntensitySlider";n["Expandable"]="expandable";n["Separator"]="separator";n["Items"]="items";return n})(wC||{});tO=(t=>{t["FocusIntensity"]="focusIntensity";return t})(tO||{});Yg=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFocusButton","focusIntensitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["focusIntensity"]}}});var iO=d(()=>{});var ls;var rO=d(()=>{ls=(o=>{o["RADIAL"]="radial";o["LINEAR"]="linear";o["MIRRORED"]="mirrored";o["GAUSSIAN"]="gaussian";return o})(ls||{})});var oO=d(()=>{eO();iO();rO()});var TC,kC,Jg;var nO=d(()=>{TC=(a=>{a["RemoveFrameButton"]="removeFrameButton";a["FrameOpacitySlider"]="frameOpacitySlider";a["FrameSizeSlider"]="frameSizeSlider";a["FrameColorList"]="frameColorList";a["Separator"]="separator";a["Items"]="items";a["Expandable"]="expandable";return a})(TC||{});kC=(r=>{r["FrameSize"]="frameSize";r["FrameOpacity"]="frameOpacity";r["FrameColor"]="frameColor";return r})(kC||{});Jg=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFrameButton","frameOpacitySlider","frameSizeSlider","frameColorList","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["frameOpacity","frameSize","frameColor"]}}});var sO=d(()=>{});var aO=d(()=>{nO();sO()});var Zg;var IC=d(()=>{Zg=class{constructor(t){this.name=t.name;this.coverImageUrl=t.coverImageUrl}loadCoverImage(t="anonymous"){return new Promise((e,r)=>{const o=new Image;o.addEventListener("load",()=>{e(o)});o.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.coverImage}`))});o.crossOrigin=t;o.src=this.coverImageUrl;this.coverImage=o})}}});var Qg;var DC=d(()=>{Qg=class{constructor(t){this.title=t.title;this.category=t.category||t.title;this.thumbUrl=t.thumbUrl;this.rawUrl=t.rawUrl;this.authorName=t.authorName;this.authorAvatar=t.authorAvatar}loadThumbImage(t="anonymous"){return new Promise((e,r)=>{const o=new Image;o.addEventListener("load",()=>{e(o)});o.addEventListener("error",()=>{r(new Error(`Failed to load image at ${this.thumbUrl}`))});o.crossOrigin=t;o.src=this.thumbUrl;this.thumbImage=o})}getThumbImage(){return this.thumbUrl}}});var tb;var lO=d(()=>{tb=class{getData(t){return new Promise((e,r)=>{const o=new XMLHttpRequest;o.open("GET",t,true);o.responseType="json";o.onload=()=>{const{status:n}=o;if(n===200){e(o.response)}else{r(new Error(`HTTP Status ${n}`))}};o.send()})}}});var eb;var EC=d(()=>{lO();eb=class{loadJSON(t){const e=new tb;return e.getData(t)}getCategories(){return Promise.resolve([])}searchImages(t){return Promise.resolve([])}}});var FC;var cO=d(()=>{IC();DC();EC();FC=class extends eb{loadData(){if(this.data){return Promise.resolve(this.data)}return this.loadJSON("https://img.ly/static/libraries/unsplash/metadata.json").then(t=>{if(typeof t==="string"){t=JSON.parse(t)}this.data=t;return t})}getCategories(){return this.loadData().then(t=>{return t.categories.map(e=>{return new Zg({name:e.name,coverImageUrl:e.coverImage})})})}searchImages(t){return this.loadData().then(e=>{return e.images.filter(r=>{const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/);for(let n=0;n<o.length;n+=1){const s=o[n];const a=new RegExp(s,"i");if(!a.test(r.title)){return false}}return true}).map(r=>{return new Qg(r)})})}}});var RC,ib;var uO=d(()=>{Ku();cO();RC=(n=>{n["UploadImageButton"]="uploadImageButton";n["OpenWebcamButton"]="openWebcamButton";n["SearchFieldInput"]="searchFieldInput";n["Separator"]="separator";n["Items"]="items";return n})(RC||{});ib=class{constructor(){this.enableWebcam=false;this.enableUpload=false;this.provider=FC;this.flattenCategories=false;this.categoryHeaderType="card";this.advancedUIToolControlBarOrder=["searchFieldInput","uploadImageButton","openWebcamButton","separator","items"]}}});var dO=d(()=>{IC();DC();uO();EC()});var OC,AC,rb;var mO=d(()=>{OC=(s=>{s["RemoveOverlayButton"]="removeOverlayButton";s["OverlayOpacitySlider"]="overlayOpacitySlider";s["OverlayBlendModeCarousel"]="overlayBlendModeCarousel";s["Expandable"]="expandable";s["Separator"]="separator";s["Items"]="items";return s})(OC||{});AC=(e=>{e["OverlayOpacity"]="overlayOpacity";e["OverlayBlendMode"]="overlayBlendMode";return e})(AC||{});rb=class{constructor(){this.items=[];this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeOverlayButton","overlayBlendModeCarousel","overlayOpacitySlider","separator"]},"items"];this.basicUIToolControlBarTabsOrder=["overlayBlendMode","overlayOpacity"]}}});var pO=d(()=>{});var mn;var hO=d(()=>{mn=(c=>{c["NORMAL"]="normal";c["OVERLAY"]="overlay";c["SOFT_LIGHT"]="softLight";c["HARD_LIGHT"]="hardLight";c["MULTIPLY"]="multiply";c["DARKEN"]="darken";c["COLOR_BURN"]="colorBurn";c["SCREEN"]="screen";c["LIGHTEN"]="lighten";return c})(mn||{})});var cp;var fO=d(()=>{cp=(b=>{b["Bokeh"]="imgly_overlay_bokeh";b["Chop"]="imgly_overlay_chop";b["Clouds"]="imgly_overlay_clouds";b["Golden"]="imgly_overlay_golden";b["Grain"]="imgly_overlay_grain";b["Hearts"]="imgly_overlay_hearts";b["LightLeak1"]="imgly_overlay_lightleak1";b["LightLeak2"]="imgly_overlay_lightleak2";b["Metal"]="imgly_overlay_metal";b["Mosaic"]="imgly_overlay_mosaic";b["Painting"]="imgly_overlay_painting";b["Paper"]="imgly_overlay_paper";b["Rain"]="imgly_overlay_rain";b["Vintage"]="imgly_overlay_vintage";b["Wall1"]="imgly_overlay_wall1";b["Wall2"]="imgly_overlay_wall2";b["Wood"]="imgly_overlay_wood";return b})(cp||{})});var gO=d(()=>{mO();pO();hO();fO()});var BC,PC,ob;var bO=d(()=>{np();Ku();BC=(n=>{n["UploadStickerButton"]="uploadStickerButton";n["StickerOpacitySlider"]="stickerOpacitySlider";n["StickerColorList"]="stickerColorList";n["Separator"]="separator";n["Items"]="items";return n})(BC||{});PC=(e=>{e["StickerColor"]="stickerColor";e["StickerOpacity"]="stickerOpacity";return e})(PC||{});ob=class{constructor(){this.categories=[];this.canvasActions=["bringtofront","flip","duplicate","delete"];this.flattenCategories=false;this.categoryHeaderType="card";this.enableCustomUpload=true;this.customStickerResizeMode="keepAspect";this.customStickerTintMode="none";this.advancedUIToolControlBarOrder=["uploadStickerButton","stickerOpacitySlider","stickerColorList","separator","items"];this.basicUIToolControlBarTabsOrder=["stickerColor","stickerOpacity"]}}});var yO=d(()=>{});var _O=d(()=>{bO();yO()});var MC,LC,nb;var xO=d(()=>{np();MC=(c=>{c["NewTextButton"]="newTextButton";c["FontFamilyDropdown"]="fontFamilyDropdown";c["FontSizeInput"]="fontSizeInput";c["TextAligmentList"]="textAlignmentList";c["Separator"]="separator";c["Inline"]="inline";c["TextColorList"]="textColorList";c["BackgroundColorList"]="backgroundColorList";c["LineSpacingSlider"]="lineSpacingSlider";return c})(MC||{});LC=(n=>{n["FontSize"]="fontSize";n["TextAligment"]="textAlignment";n["TextColor"]="textColor";n["BackgroundColor"]="backgroundColor";n["LineSpacing"]="lineSpacing";return n})(LC||{});nb=class{constructor(){this.fonts=[];this.canvasActions=["edit","bringtofront","duplicate","delete"];this.allowEmojis=false;this.disableAutoScaling=false;this.addDefaultTextOnEnter=true;this.advancedUIToolControlBarOrder=["newTextButton","fontFamilyDropdown",{type:"inline",children:["fontSizeInput","textAlignmentList"]},"separator","textColorList","backgroundColorList","separator","lineSpacingSlider"];this.basicUIToolControlBarTabsOrder=["fontSize","textAlignment","textColor","backgroundColor","lineSpacing"]}}});function zC(i){return i.provider===void 0||i.provider==="file"}function UC(i){return i.provider==="google"}var vO=d(()=>{});var CO=d(()=>{});var SO=d(()=>{xO();vO();CO()});var NC,HC,sb;var wO=d(()=>{NC=(s=>{s["RemoveBrushButton"]="removeBrushButton";s["BrushColorList"]="brushColorList";s["BrushSizeSlider"]="brushSizeSlider";s["BrushHardnessSlider"]="brushHardnessSlider";s["Expandable"]="expandable";s["Separator"]="separator";return s})(NC||{});HC=(r=>{r["BrushSize"]="brushSize";r["BrushHardness"]="brushHardness";r["BrushColor"]="brushColor";return r})(HC||{});sb=class{constructor(){this.defaultSize=.05;this.defaultHardness=.5;this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeBrushButton","separator"]},"brushHardnessSlider","brushSizeSlider","brushColorList"];this.basicUIToolControlBarTabsOrder=["brushColor","brushSize","brushHardness"]}}});var TO=d(()=>{wO()});var WC,ab;var kO=d(()=>{np();WC=(n=>{n["NewTextDesignButton"]="newTextDesignButton";n["ShuffleLayoutButton"]="shuffleLayoutButton";n["TextDesignColorList"]="textDesignColorList";n["Separator"]="separator";n["Items"]="items";return n})(WC||{});ab=class{constructor(){this.items=[];this.canvasActions=["edit","bringtofront","invert","duplicate","delete"];this.allowEmojis=false;this.addDefaultTextOnEnter=true;this.advancedUIToolControlBarOrder=["newTextDesignButton","shuffleLayoutButton","textDesignColorList","separator","items"]}}});var IO=d(()=>{});var DO=d(()=>{kO();IO()});var GC,VC,lb;var EO=d(()=>{Ku();GC=(n=>{n["ResetTransformButton"]="resetTransformButton";n["KeepResolutionCheckbox"]="keepResolutionCheckbox";n["CropSizeInput"]="cropSizeInput";n["Separator"]="separator";n["Items"]="items";return n})(GC||{});VC=(r=>{r["CropSize"]="cropSize";r["FlipRotate"]="flipRotate";r["Resolution"]="resolution";return r})(VC||{});lb=class{constructor(){this.categories=[];this.enableRotation=true;this.enableFlip=true;this.flattenCategories=false;this.categoryHeaderType="text";this.advancedUIToolControlBarOrder=["resetTransformButton","keepResolutionCheckbox","cropSizeInput","separator","items"];this.basicUIToolControlBarTabsOrder=["cropSize","flipRotate","resolution"]}}});var FO=d(()=>{});var jC;var RO=d(()=>{jC=(D=>{D["CommonCategory"]="imgly_transforms_common";D["FacebookCategory"]="imgly_transforms_facebook";D["TwitterCategory"]="imgly_transforms_twitter";D["InstagramCategory"]="imgly_transforms_instagram";D["Custom"]="imgly_transform_common_custom";D["Square"]="imgly_transform_common_square";D["ThreeByFour"]="imgly_transform_common_3";D["FourByThree"]="imgly_transform_common_4";D["NineBySixteen"]="imgly_transform_common_9";D["SixteenByNine"]="imgly_transform_common_16";D["FacebookPost"]="imgly_transform_facebook_post";D["FacebookProfile"]="imgly_transform_facebook_profile";D["FacebookTitle"]="imgly_transform_facebook_title";D["InstagramLandscape"]="imgly_transform_instagram_landscape";D["InstagramPortrait"]="imgly_transform_instagram_portrait";D["InstagramSquare"]="imgly_transform_instagram_square";D["InstagramStory"]="imgly_transform_instagram_story";D["TwitterPost"]="imgly_transform_twitter_post";D["TwitterProfile"]="imgly_transform_twitter_profile";D["TwitterTitle"]="imgly_transform_twitter_title";return D})(jC||{})});var OO=d(()=>{EO();FO();RO()});var up;var AO=d(()=>{up=(p=>{p["EXPORT"]="export";p["CLOSE"]="close";p["HISTORY_UNDO"]="historyUndo";p["HISTORY_REDO"]="historyRedo";p["HISTORY_CHANGE"]="historyChange";p["EDITOR_READY"]="editorReady";p["ERROR_IMAGE_LOADING"]="errorImageLoading";p["IMAGE_LOAD"]="imageLoad";p["TOOL_ENTER"]="toolEnter";p["STICKER_UPLOAD_ADD"]="stickerUploadAdd";p["ERROR_WEBGL_CONTEXT_LOST"]="errorWebGLContextLost";p["CROP_DIMENSIONS_CHANGE"]="cropDimensionsChange";return p})(up||{})});var wr;var BO=d(()=>{wr=class{constructor(){this.events={}}addListener(t,e){const r=this.events[t]||(this.events[t]=[]);r.push(e);return this}removeListener(t,e){const r=this.events[t];if(!r){return this}const o=r.lastIndexOf(e);if(o===-1){return this}r.splice(o,1);return this}removeAllListeners(t){this.events[t]=void 0;return this}on(t,e){return this.addListener(t,e)}off(t,e){return this.removeListener(t,e)}emit(t,...e){const r=this.events[t];if(!r||!r.length){return false}r.slice(0).forEach(o=>o.apply(null,e));return true}}});var PO=d(()=>{});var MO=d(()=>{});var R=d(()=>{VF();np();yC();jF();$F();KF();XF();Ku();qF();YF();JF();ZF();QF();tR();eR();iR();rR();oR();nR();sR();aR();lR();cR();uR();dR();mR();pR();hR();fR();gR();bR();yR();_R();xR();vR();CR();SR();wR();TR();DR();FR();AR();BR();PR();MR();LR();zR();UR();NR();WR();GR();KR();qR();QR();oO();aO();dO();gO();_O();SO();TO();DO();OO();AO();BO();PO();MO()});var xQ,cb;var LO=d(()=>{R();xQ=[{identifier:"basics",name:"Basics",items:[{identifier:"brightness"},{identifier:"contrast"},{identifier:"saturation"},{identifier:"gamma"}]},{identifier:"refinements",name:"Refinements",items:[{identifier:"clarity"},{identifier:"shadows"},{identifier:"highlights"},{identifier:"exposure"},{identifier:"blacks"},{identifier:"whites"},{identifier:"temperature"},{identifier:"sharpness"}]}];cb=xQ});var vQ,ub;var zO=d(()=>{R();vQ=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}];ub=vQ});var CQ,$C;var UO=d(()=>{R();CQ=[{identifier:"radial",thumbnailURI:"./items/radial.png"},{identifier:"mirrored",thumbnailURI:"./items/mirrored.png"},{identifier:"linear",thumbnailURI:"./items/linear.png"},{identifier:"gaussian",thumbnailURI:"./items/gaussian.png"}];$C=CQ});var SQ,db;var NO=d(()=>{SQ=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_allison_regular",fontFamily:"Allison",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_allison_regular.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:890,descender:-380}},{identifier:"imgly_font_cookie_regular",fontFamily:"Cookie",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_cookie_regular.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:789,descender:-320}},{identifier:"imgly_font_lexend_bold",fontFamily:"Lexend",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_lexend_bold.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_outfit_bold",fontFamily:"Outfit",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_outfit_bold.ttf",format:"truetype",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}];db=SQ});var HO,WO;var GO=d(()=>{HO=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lexend_bold","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_outfit_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"];WO=["imgly_font_abril_fatface_regular","imgly_font_allison_regular","imgly_font_bungee_inline","imgly_font_cookie_regular","imgly_font_handycheera_regular","imgly_font_lexend_bold","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_outfit_bold","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra"]});var wQ,mb;var VO=d(()=>{wQ=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:true,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}];mb=wQ});var TQ,pb;var jO=d(()=>{R();TQ=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:"softLight",overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}];pb=TQ});var kQ,hb;var $O=d(()=>{kQ=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}];hb=kQ});var IQ,KO;var XO=d(()=>{IQ=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];KO=IQ});var DQ,qO;var YO=d(()=>{DQ=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];qO=DQ});var EQ,fb;var JO=d(()=>{EQ=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:true,lockDimensions:true}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:true,lockDimensions:true}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:true,lockDimensions:true},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:true,lockDimensions:true}]}];fb=EQ});var cs,pn;var KC=d(()=>{cs={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco",imgly_font_wolesbro:"imgly_font_cookie_regular",imgly_font_campton_bold:"imgly_font_outfit_bold",imgly_font_galano_grotesque_bold:"imgly_font_lexend_bold",imgly_font_amberlight:"imgly_font_allison_regular)"};pn=(i,t=false)=>{if(cs[i]){if(t){console.warn(`Font ${i} was deprecated. Please use ${cs[i]} instead.`)}return cs[i]}return i}});var dp={};ue(dp,{isMobile:()=>XC});function XC(){if(typeof navigator==="undefined"){return false}const i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4))}var qC=d(()=>{});function Ot(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const t=Math.random()*16|0;const e=i==="x"?t:t&3|8;return e.toString(16)})}var ZO=d(()=>{});var QO,tA;var YC=d(()=>{QO=i=>{i.preventDefault();i.stopPropagation()};tA=(...i)=>{}});var JC=d(()=>{});var i_t;var eA=d(()=>{YC();JC();i_t=typeof window!=="undefined"?window.performance.now.bind(window.performance):tA()});var mp;var ZC=d(()=>{mp=class{constructor(t){this.text=t;this.lastOffsetWidth=-1;const e="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div");this.element.setAttribute("aria-hidden","true");this.element.appendChild(document.createTextNode(t));this.collapsible=document.createElement("span");this.expandable=document.createElement("span");this.collapsibleInner=document.createElement("span");this.expandableInner=document.createElement("span");this.collapsible.style.cssText=e;this.expandable.style.cssText=e;this.expandableInner.style.cssText=e;this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.collapsible.appendChild(this.collapsibleInner);this.expandable.appendChild(this.expandableInner);this.element.appendChild(this.collapsible);this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(t){this.element.style.cssText=`max-width:none;
      min-width:20px;
      min-height:20px;
      display:inline-block;
      overflow:hidden;
      position:absolute;
      width:auto;
      margin:0;
      padding:0;
      top:-999px;
      white-space:nowrap;
      font-synthesis:none;
      font:${t};`}getWidth(){return this.element.offsetWidth}setWidth(t){this.element.style.width=`${t}px`}onResize(t){const e=()=>{this.onScroll(t)};this.collapsible.addEventListener("scroll",e);this.expandable.addEventListener("scroll",e);this.reset()}reset(){const t=this.getWidth();const e=t+100;this.expandableInner.style.width=`${e}px`;this.expandable.scrollLeft=e;this.collapsible.scrollLeft=this.collapsible.scrollWidth+100;if(this.lastOffsetWidth!==t){this.lastOffsetWidth=t;return true}return false}onScroll(t){if(this.reset()&&this.element.parentNode!==null){t(this.lastOffsetWidth)}}}});var ve,va;var iA=d(()=>{ZC();ve=class{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(ve.HAS_WEBKIT_FALLBACK_BUG===null){const t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(ve.getUserAgent());ve.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||parseInt(t[1],10)===536&&parseInt(t[2],10)<=11)}return ve.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(ve.HAS_SAFARI_10_BUG===null){if(ve.supportsNativeFontLoading()&&/Apple/.test(ve.getNavigatorVendor())){const t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(ve.getUserAgent());ve.HAS_SAFARI_10_BUG=!!t&&parseInt(t[1],10)<603}else{ve.HAS_SAFARI_10_BUG=false}}return ve.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){if(ve.SUPPORTS_NATIVE_FONT_LOADING===null){ve.SUPPORTS_NATIVE_FONT_LOADING=!!document["fonts"]}return ve.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(ve.SUPPORTS_STRETCH===null){const t=document.createElement("div");try{t.style.font="condensend 100px sans-serif"}catch(e){ve.SUPPORTS_STRETCH=false}ve.SUPPORTS_STRETCH=t.style.font!==""}return ve.SUPPORTS_STRETCH}constructor(t){this.font={fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal",...t}}load(t,e){const r="BESbswy";let o=null;const n=e||ve.DEFAULT_TIMEOUT;const s=this.getTime();return new Promise((a,l)=>{if(ve.supportsNativeFontLoading()&&!ve.hasSafari10Bug()){const c=new Promise((m,p)=>{const h=()=>{const g=this.getTime();if(g-s>=n){p(new Error(""+n+"ms timeout exceeded"))}else{document["fonts"].load(this.getStyle(`"${this.font.fontFamily}"`),r).then(_=>{if(_.length>=1){m()}else{setTimeout(h,25)}},l)}};h()});const u=new Promise((m,p)=>{o=setTimeout(()=>{p(new Error(`${n} ms timeout exceeded`))},n)});Promise.race([u,c]).then(()=>{clearTimeout(o);a(this)},l)}else{const c=new mp(r);const u=new mp(r);const m=new mp(r);let p=-1;let h=-1;let g=-1;let _=-1;let x=-1;let b=-1;const w=document.createElement("div");const T=()=>{if(w.parentNode!==null){w.parentNode.removeChild(w)}};const D=()=>{if(p!==-1&&h!==-1||p!==-1&&g!==-1||h!==-1&&g!==-1){if(p===h||p===g||h===g){if(ve.hasWebKitFallbackBug()){if(p===_&&h===_&&g===_||p===x&&h===x&&g===x||p===b&&h===b&&g===b){return}}T();clearTimeout(o);a(this)}}};w.dir="ltr";c.setFont(this.getStyle("sans-serif"));u.setFont(this.getStyle("serif"));m.setFont(this.getStyle("monospace"));w.appendChild(c.getElement());w.appendChild(u.getElement());w.appendChild(m.getElement());document.body.appendChild(w);_=c.getWidth();x=u.getWidth();b=m.getWidth();const O=()=>{const k=this.getTime();if(k-s>=n){T();l(new Error(`${n} ms timeout exceeded`))}else{const E=document.hidden;if(E===true||E===void 0){p=c.getWidth();h=u.getWidth();g=m.getWidth();D()}o=setTimeout(O,50)}};O();c.onResize(k=>{p=k;D()});c.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`));u.onResize(k=>{h=k;D()});u.setFont(this.getStyle(`"${this.font.fontFamily}",serif`));m.onResize(k=>{g=k;D()});m.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}})}getStyle(t){return[this.font.fontStyle,this.font.fontWeight,ve.supportsStretch()?this.font.fontStretch:"","100px",t].join(" ")}getTime(){return new Date().getTime()}};va=ve;va.HAS_WEBKIT_FALLBACK_BUG=null;va.HAS_SAFARI_10_BUG=null;va.SUPPORTS_STRETCH=null;va.SUPPORTS_NATIVE_FONT_LOADING=null;va.DEFAULT_TIMEOUT=6e4});var fe,F;var QC=d(()=>{fe=class{static fromSize(t){return new fe(t.width,t.height)}static distance(t,e){const r=e.x-t.x;const o=e.y-t.y;return Math.sqrt(r*r+o*o)}static dot(t,e){return t.x*e.x+t.y*e.y}static lerp(t,e,r){const o=Math.min(Math.max(r,0),1);return new fe(t.x*o+e.x*(1-o),t.y*o+e.y*(1-o))}static lerpUnclamped(t,e,r){return new fe(t.x*r+e.x*(1-r),t.y*r+e.y*(1-r))}static proportionalFit(t,e){const r=t.x/t.y;const o=e.x/e.y;if(r>o){return e.multiply(t.y/e.y)}else{return e.multiply(t.x/e.x)}}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const t=this.magnitude;return new fe(this.x/t,this.y/t)}get floored(){return new fe(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new fe(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new fe(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new fe(this.y,this.x)}constructor(t,e){if(typeof t==="number"){this.x=t;this.y=e}else{this.x=t.x;this.y=t.y}}clone(){return new fe(this.x,this.y)}add(t,e){if(typeof t==="number"){return new fe(this.x+t,this.y+e)}else{return new fe(this.x+t.x,this.y+t.y)}}subtract(t,e){if(typeof t==="number"){return new fe(this.x-t,this.y-e)}else{return new fe(this.x-t.x,this.y-t.y)}}multiply(t,e){if(typeof t==="number"){return new fe(this.x*t,this.y*(e===void 0?t:e))}else{return new fe(this.x*t.x,this.y*t.y)}}divide(t,e){if(typeof t==="number"){return new fe(this.x/t,this.y/(e===void 0?t:e))}else{return new fe(this.x/t.x,this.y/t.y)}}equals(t){return this.x===t.x&&this.y===t.y}clamp(t,e){const r=Math.max(t.x,Math.min(e.x,this.x));const o=Math.max(t.y,Math.min(e.y,this.y));return new fe(r,o)}};F=fe;F.ZERO=new fe(0,0);F.ONE=new fe(1,1);F.UP=new fe(0,1);F.DOWN=new fe(0,-1);F.RIGHT=new fe(1,0);F.LEFT=new fe(-1,0)});var tS=d(()=>{R()});var pp;var rA=d(()=>{QC();tS();qC();pp=class extends wr{constructor(t,e){super();this.image=t;this.options=e}needsResize(){const t=this.resizedDimensions();return t.x<this.image.width||t.y<this.image.height}resizedDimensions(){const{options:t}=this;const e={width:this.image.width,height:this.image.height};let r=F.fromSize(e);let o=F.fromSize(e);const{maxMegaPixels:n}=t;if(n){const l=(XC()?n.mobile:n.desktop)*1e6;const c=e.width/e.height;const u=e.height/e.width;const m=new F(Math.floor(Math.sqrt(l*c)),Math.floor(Math.sqrt(l*u)));if(m.x<=e.width&&m.y<=e.height){r=m}}const s=t.maxDimensions;if(s){if(s.height<e.height||s.width<e.width){o=new F(s.width,s.height)}}const a=new F(Math.min(r.x,o.x),Math.min(r.y,o.y));return F.proportionalFit(a,F.fromSize(e)).floored}downscaleIfNecessary(){const t=this.resizedDimensions();const e=t.x<this.image.width||t.y<this.image.height;if(!e){return this.image}this.emit("beganImageDownscaling",this.image);const r=document.createElement("canvas");r.width=t.x;r.height=t.y;const o=r.getContext("2d");const{image:n}=this;o.imageSmoothingQuality="high";o.drawImage(n,0,0,n.width,n.height,0,0,t.x,t.y);this.emit("imageDownscaled",{width:t.x,height:t.y});return r}}});var FQ,RQ,oA,nA;var sA=d(()=>{FQ=i=>i.key==="Enter";RQ=i=>i.key==="Escape";oA=i=>t=>{if(FQ(t))i(t)};nA=i=>t=>{if(RQ(t))i(t)}});var eS,lA,U,aA,h_t;var cA=d(()=>{eS=(G=>{G[G["EditorContainer"]=0]="EditorContainer";G[G["ToolControlBar"]=1]="ToolControlBar";G[G["ToolControlBarExpandableControls"]=2]="ToolControlBarExpandableControls";G[G["CanvasContainer"]=3]="CanvasContainer";G[G["Canvas"]=4]="Canvas";G[G["MainBarButtonClose"]=5]="MainBarButtonClose";G[G["MainBarButtonExport"]=6]="MainBarButtonExport";G[G["MainBarButtonUndo"]=7]="MainBarButtonUndo";G[G["MainBarButtonRedo"]=8]="MainBarButtonRedo";G[G["MainBarButtonZoom"]=9]="MainBarButtonZoom";G[G["Tooltip"]=10]="Tooltip";G[G["Cursor"]=11]="Cursor";G[G["CursorContainer"]=12]="CursorContainer";G[G["NummericInput"]=13]="NummericInput";G[G["BrushSize"]=14]="BrushSize";G[G["BrushHardness"]=15]="BrushHardness";G[G["Dialog"]=16]="Dialog";G[G["DialogBody"]=17]="DialogBody";G[G["CardContainer"]=18]="CardContainer";G[G["CategoryItemsContainer"]=19]="CategoryItemsContainer";G[G["ToolbarItem"]=20]="ToolbarItem";G[G["ColorList"]=21]="ColorList";G[G["NoResult"]=22]="NoResult";G[G["CardLabel"]=23]="CardLabel";G[G["CardAvatar"]=24]="CardAvatar";G[G["Dropdown"]=25]="Dropdown";G[G["DropdownList"]=26]="DropdownList";G[G["TextAlignment"]=27]="TextAlignment";G[G["Sprite"]=28]="Sprite";G[G["SpriteTopLeft"]=29]="SpriteTopLeft";G[G["SpriteTopRight"]=30]="SpriteTopRight";G[G["SpriteBottomLeft"]=31]="SpriteBottomLeft";G[G["SpriteBottomRight"]=32]="SpriteBottomRight";G[G["Knob"]=33]="Knob";G[G["TextWidth"]=34]="TextWidth";G[G["ToolbarWrapper"]=35]="ToolbarWrapper";G[G["MainCanvasActionBar"]=36]="MainCanvasActionBar";G[G["SpriteActions"]=37]="SpriteActions";G[G["CarouselSlider"]=38]="CarouselSlider";G[G["CropMask"]=39]="CropMask";G[G["FlipRotateControls"]=40]="FlipRotateControls";G[G["RotateSlider"]=41]="RotateSlider";G[G["CropTopRight"]=42]="CropTopRight";G[G["CropTopLeft"]=43]="CropTopLeft";G[G["CropBottomRight"]=44]="CropBottomRight";G[G["CropBottomLeft"]=45]="CropBottomLeft";G[G["Watermark"]=46]="Watermark";G[G["Toolbar"]=47]="Toolbar";G[G["CanvasBar"]=48]="CanvasBar";G[G["Checkbox"]=49]="Checkbox";G[G["Focus"]=50]="Focus";G[G["SnappingLine"]=51]="SnappingLine";G[G["LibraryUploadButton"]=52]="LibraryUploadButton";G[G["LibraryWebcamButton"]=53]="LibraryWebcamButton";G[G["ZoomLevel"]=54]="ZoomLevel";G[G["BasicToolControlBar"]=55]="BasicToolControlBar";G[G["SliderTrack"]=56]="SliderTrack";G[G["SliderLabel"]=57]="SliderLabel";return G})(eS||{});lA={};for(const i in eS){const t=eS[i];if(typeof t==="string"){lA[t]=t}}U=lA;h_t=Boolean(typeof window!=="undefined"&&((aA=window.Cypress)==null?void 0:aA.env("pesdk")))});function OQ(i,t){let e=0;for(let r=i.length-1;r>=0;r--){const o=i[r];if(o==="."){i.splice(r,1)}else if(o===".."){i.splice(r,1);e++}else if(e){i.splice(r,1);e--}}if(t){for(;e--;e){i.unshift("..")}}return i}function AQ(i){return i.charAt(0)==="/"}function BQ(i){const t=AQ(i);const e=i.substr(-1)==="/";i=OQ(i.split("/").filter(Boolean),!t).join("/");if(!i&&!t){i="."}if(i&&e){i+="/"}return(t?"/":"")+i}var hp;var uA=d(()=>{hp=(...i)=>{return BQ(i.join("/"))}});var mA=Wt((b_t,dA)=>{var PQ=typeof Element!=="undefined";var MQ=typeof Map==="function";var LQ=typeof Set==="function";var zQ=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function gb(i,t){if(i===t)return true;if(i&&t&&typeof i=="object"&&typeof t=="object"){if(i.constructor!==t.constructor)return false;var e,r,o;if(Array.isArray(i)){e=i.length;if(e!=t.length)return false;for(r=e;r--!==0;)if(!gb(i[r],t[r]))return false;return true}var n;if(MQ&&i instanceof Map&&t instanceof Map){if(i.size!==t.size)return false;n=i.entries();while(!(r=n.next()).done)if(!t.has(r.value[0]))return false;n=i.entries();while(!(r=n.next()).done)if(!gb(r.value[1],t.get(r.value[0])))return false;return true}if(LQ&&i instanceof Set&&t instanceof Set){if(i.size!==t.size)return false;n=i.entries();while(!(r=n.next()).done)if(!t.has(r.value[0]))return false;return true}if(zQ&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(t)){e=i.length;if(e!=t.length)return false;for(r=e;r--!==0;)if(i[r]!==t[r])return false;return true}if(i.constructor===RegExp)return i.source===t.source&&i.flags===t.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===t.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===t.toString();o=Object.keys(i);e=o.length;if(e!==Object.keys(t).length)return false;for(r=e;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return false;if(PQ&&i instanceof Element)return false;for(r=e;r--!==0;){if((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&i.$$typeof){continue}if(!gb(i[o[r]],t[o[r]]))return false}return true}return i!==i&&t!==t}dA.exports=function i(t,e){try{return gb(t,e)}catch(r){if((r.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw r}}});var qe,iS,ko;var pA=d(()=>{qe=y(mA());iS=(i,t,[e,r],o=0)=>{const n=i[t];if(n){if(n<e){console.error(`${t} must be greater than or equal to ${e}`);return e}if(n>r){console.error(`${t} must be less than or equal to ${r}`);return r}}return n||o};ko=(i,t,e=[1,1,1,1])=>{const r=i[t];let o=true;if(r){r.forEach(n=>{if(n<0){console.error(`${n} in ${t} must be greater than or equal to 0`);o=false}if(n>1){console.error(`${n} in ${t} must be less than or equal to 1`);o=false}})}if(!o)return e;return r||e}});var Tt,bb;var hA=d(()=>{Tt=i=>i*.08;bb=i=>i*.03});var fA,gA;var bA=d(()=>{fA=(i,t)=>{const e=i.indexOf(t);if(e===-1||!i.length)return void 0;if(e===i.length-1)return i[0];return i[e+1]};gA=(i,t)=>{const e=i.indexOf(t);if(e===-1||!i.length)return void 0;if(e===0)return i[i.length-1];return i[e-1]}});var fp,rS;var yA=d(()=>{fp={};rS=({src:i,crossOrigin:t,key:e,resolve:r,reject:o})=>{fp[e]=i;const n=new Image;n.onload=()=>{if(fp[e]===i){r(n);delete fp[e]}};n.onerror=s=>{if(fp[e]===i){o(s);delete fp[e]}};n.crossOrigin=t;n.src=i}});var Io;var _A=d(()=>{Io=class extends Error{constructor(t){super(t);this.name="AssetNotFoundError"}}});var Do;var xA=d(()=>{Do=()=>Math.max(window.devicePixelRatio||1,1)});var gp=d(()=>{KC();qC();ZO();eA();JC();iA();ZC();rA();tS();sA();cA();YC();uA();pA();hA();bA();yA();_A();xA()});var CA=Wt((G_t,vA)=>{"use strict";vA.exports=(i,t=1,e)=>{e={indent:" ",includeEmptyLines:false,...e};if(typeof i!=="string"){throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof i}\``)}if(typeof t!=="number"){throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``)}if(typeof e.indent!=="string"){throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof e.indent}\``)}if(t===0){return i}const r=e.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return i.replace(r,e.indent.repeat(t))}});var SA=Wt(()=>{});var IA=Wt(($_t,kA)=>{"use strict";var wA=SA();var TA=/\s+at.*(?:\(|\s)(.*)\)?/;var UQ=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/;var NQ=typeof wA.homedir==="undefined"?"":wA.homedir();kA.exports=(i,t)=>{t=Object.assign({pretty:false},t);return i.replace(/\\/g,"/").split("\n").filter(e=>{const r=e.match(TA);if(r===null||!r[1]){return true}const o=r[1];if(o.includes(".app/Contents/Resources/electron.asar")||o.includes(".app/Contents/Resources/default_app.asar")){return false}return!UQ.test(o)}).filter(e=>e.trim()!=="").map(e=>{if(t.pretty){return e.replace(TA,(r,o)=>r.replace(o,o.replace(NQ,"~")))}return e}).join("\n")}});var FA=Wt((K_t,EA)=>{"use strict";var HQ=CA();var WQ=IA();var GQ=i=>i.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var DA=class extends Error{constructor(t){if(!Array.isArray(t)){throw new TypeError(`Expected input to be an Array, got ${typeof t}`)}t=[...t].map(r=>{if(r instanceof Error){return r}if(r!==null&&typeof r==="object"){return Object.assign(new Error(r.message),r)}return new Error(r)});let e=t.map(r=>{return typeof r.stack==="string"?GQ(WQ(r.stack)):String(r)}).join("\n");e="\n"+HQ(e,4);super(e);this.name="AggregateError";Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors){yield t}}};EA.exports=DA});var Yu=Wt((X_t,RA)=>{"use strict";var VQ=FA();RA.exports=async(i,t,{concurrency:e=Infinity,stopOnError:r=true}={})=>{return new Promise((o,n)=>{if(typeof t!=="function"){throw new TypeError("Mapper function is required")}if(!((Number.isSafeInteger(e)||e===Infinity)&&e>=1)){throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${e}\` (${typeof e})`)}const s=[];const a=[];const l=i[Symbol.iterator]();let c=false;let u=false;let m=0;let p=0;const h=()=>{if(c){return}const g=l.next();const _=p;p++;if(g.done){u=true;if(m===0){if(!r&&a.length!==0){n(new VQ(a))}else{o(s)}}return}m++;(async()=>{try{const x=await g.value;s[_]=await t(x,_);m--;h()}catch(x){if(r){c=true;n(x)}else{a.push(x);m--;h()}}})()};for(let g=0;g<e;g++){h();if(u){break}}})}});var OA,jQ,bp;var oS=d(()=>{OA=y(Yu());R();gp();jQ={italic:"i"};bp=class{constructor(t){this.assetManager=t;this.injectedFonts={};this.loadedFonts={};this.isFontLoaded=t=>{return this.loadedFonts[t]!==void 0};this.getGoogleFamiliesString=t=>{const e=t.reduce((r,o)=>{const{fontFamily:n,fontStyle:s,fontWeight:a=400}=o;r[n]=(r[n]||[]).concat(`${a}${jQ[s]||""}`);return r},{});return Object.keys(e).map(r=>{const o=e[r].length?`:${e[r].join(",")}`:"";const n=r.replace(" ","+")+o;return n}).join("|")}}static createFontFacesCSS(t,e){return t.map(r=>{const o=e(r.fontURI);return`@font-face {
        font-family: "${r.fontFamily}";
        src: url('${o}') format('${r.format||"woff"}');
        font-weight: ${r.fontWeight||"normal"};
        font-style: ${r.fontStyle||"normal"};
      }`})}getFontWithId(t){const e=this.assetManager.getFontAsset(t);if(!e){throw new Error("The requested font does not exist as an asset.")}return e}injectAllFonts(){const t=this.assetManager.getFontAssets();this.injectFonts(t)}async loadAllFonts(){const t=this.assetManager.getFontAssets();return this.loadFonts(t)}async loadFontsWithIdentifiers(t){const e=t.map(r=>this.getFontWithId(r));return this.loadFonts(e)}async loadFonts(t){this.injectFonts(t);return(0,OA.default)(t,e=>this.loadFont(e,false),{stopOnError:false}).then(()=>void 0)}async loadFont(t,e=true){return new Promise((r,o)=>{if(this.isFontLoaded(t.identifier)){r()}if(e){this.injectFonts([t])}const n=new va(t);n.load().then(()=>{this.loadedFonts[t.identifier]=t;r()}).catch(s=>{o(t.identifier)})})}async loadFontWithIdentifier(t,e=true){const r=this.assetManager.getFontAsset(t);if(!r){throw new Error(`The requested font asset with identifier ${t} does not exist!`)}return this.loadFont(r,e)}injectFonts(t,e=this.assetManager.getPathForCategory("font")){const r=t.filter(UC);const o=t.filter(zC);if(r.length>0){this.addGoogleFontLinks(r)}if(o.length>0){this.addWebFontCSS(o,e)}}addGoogleFontLinks(t){const e=t.filter(s=>!this.injectedFonts[s.identifier]);if(e.length===0){return}const r=this.getGoogleFamiliesString(e);const o=document.createElement("link");o.rel="stylesheet";o.href=`https://fonts.googleapis.com/css?family=${r}`;const n=document.getElementsByTagName("head")[0];n.appendChild(o);t.forEach(s=>{this.injectedFonts[s.identifier]=s})}addWebFontCSS(t,e){const r=t.filter(a=>!this.injectedFonts[a.identifier]);if(r.length===0){return}const o=bp.createFontFacesCSS(r,e);const n=`
      /* Injected by PhotoEditorSDK */
      ${o.join("\n")}
    `;const s=document.createElement("style");s.innerHTML=n;document.head.appendChild(s);t.forEach(a=>{this.injectedFonts[a.identifier]=a})}}});var yp;var AA=d(()=>{R();LO();zO();UO();NO();GO();VO();jO();$O();XO();YO();JO();fC();gC();gp();oS();yp=class{constructor(t,e=false,r){this.assetResolver=r;this.basePath="assets/";this.areCustomAssetsAllowed=false;this.getAssets=t=>{switch(t){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories;default:return[]}return[]};this.getPath=(t,e)=>{const{assetResolver:r={}}=this;const o=e&&r.item?r.item(e,t):e;if(o==null?void 0:o.match(/data:image/g)){return o}if((o==null?void 0:o.match(/(ftp|http|https):\/\//))&&ln(o)){return o}if(!o&&ln(t)){return t}const n=o?hp(t,o):hp(t);let s;if(this.basePath.match(/(ftp|http|https):\/\//)){const{length:a}=this.basePath;if(this.basePath[a-1]!=="/"){this.basePath=`${this.basePath}/`}s=this.basePath+n}else{s=hp(this.basePath,n)}return r.path?r.path(s,t,o):s};this.getPathForCategory=t=>{return(...e)=>this.getPath(t,...e)};this.addCustomStickerAsset=(t,e,r)=>{t.forEach(o=>{const{thumbnailURI:n,name:s,stickerURI:a,identifier:l,tintMode:c,resizeMode:u}=o;const m=this.stickerCategories.find(h=>h.identifier===e);const p={identifier:l,name:s,thumbnailURI:n,stickerURI:a,tintMode:c,resizeMode:u};if(m){m.items.push(p);m.thumbnailURI=n}else{const h={identifier:e,name:r,thumbnailURI:n,items:[p]};this.stickerCategories=[h,...this.stickerCategories]}});this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])};this.getItemPath=(t,e,r)=>{const o=t.find(n=>n.identifier===e);return o?o[r]||o.path||"":""};this.isNonExistingFont=t=>!db.find(e=>e.identifier===t.identifier)&&!cs[t.identifier];this.replaceDeprecatedFont=t=>{if(cs[t.identifier]){return db.find(e=>e.identifier===pn(t.identifier,true))}return t};var m,p;if(t==null?void 0:t.basePath)this.basePath=t.basePath;this.areCustomAssetsAllowed=e;const o=ub.reduce(this.allOptions,[]);if(t&&t.filter){this.filterCategories=this.configuredCategory(ub,t.filter,o)}else{this.filterCategories=ub}this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>SC(h));this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter(h=>qu(h));const n=cb.reduce(this.allOptions,[]);if(t&&t.adjustment){this.adjustmentCategories=this.configuredCategory(cb,t.adjustment,n)}else{this.adjustmentCategories=cb}this.fontAssets=db.reduce(this.allOptions,[]);let s=HO.map(h=>this.getFontAsset(h));if(((p=(m=t==null?void 0:t.text)==null?void 0:m.fonts)==null?void 0:p.length)>0){s=t.text.fonts.map(g=>{if(this.isNonExistingFont(g))return g;const _=this.replaceDeprecatedFont(g);return this.getFontAsset(_.identifier)});const h=t.text.fonts.filter(this.isNonExistingFont);this.fontAssets=t.text.fonts?[...this.fontAssets,...h]:this.fontAssets}this.textToolFontAssets=s;const a=t&&t.focus&&t.focus.items&&t.focus.items.length?t.focus.items.map(h=>$C.find(g=>g.identifier===h.identifier)):$C;this.focusAssets=a;if(t&&t.overlay&&t.overlay.items){this.overlayAssets=this.configuredItem(t.overlay.items,pb,pb)}else{this.overlayAssets=pb}if(t&&t.frame&&t.frame.items){this.frameAssets=this.configuredItem(t.frame.items,mb,mb)}else{this.frameAssets=mb}const l=hb.reduce(this.allOptions,[]);if(t&&t.sticker){this.stickerCategories=this.configuredCategory(hb,t.sticker,l)}else{this.stickerCategories=hb}this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let c=KO;if(t&&t.theme==="light"){c=qO}this.textDesignAssets=t&&t.textdesign&&t.textdesign.items&&t.textdesign.items.length?t.textdesign.items.map(h=>c.find(g=>g.identifier===h.identifier)):c;this.textDesignToolFontAssets=WO.map(h=>this.getFontAsset(h));const u=fb.reduce(this.allOptions,[]);if(t&&t.transform){this.transformCategories=this.configuredCategory(fb,t.transform,u,"transform")}else{this.transformCategories=fb}this.transformAssets=this.transformCategories.reduce(this.allOptions,[]);this.fontManager=new bp(this)}getFontManager(){return this.fontManager}getAssetSource(t,e){switch(t){case"filter":const r=this.getLUTFilterAsset(e);if(r){return this.getPath(t,this.getItemPath(this.lutFilterAssets,e,"lutURI"))}break;case"overlay":return this.getPath(t,this.getItemPath(this.overlayAssets,e,"overlayURI"));case"font":return this.getPath(t,this.getItemPath(this.fontAssets,e,"fontURI"));case"sticker":const o=this.stickerAssets.find(n=>n.identifier===e);if(o){if(o.stickerURI.substr(0,10)==="data:image"){return o.stickerURI}if(e.includes("imgly_sticker")&&o.stickerURI.includes(".svg")&&xe()){const n=this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI"));const s=n.split("/");s.splice(s.length-1,0,"base");s[s.length-1]=s[s.length-1].replace(".svg",".png");return s.join("/")}return this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(hp(t,"engine"),e);case"frame":return this.getPath(t,e);default:break}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(t){return this.duoToneFilterAssets.filter(e=>e.identifier===t)[0]}getLUTFilterAsset(t){return this.lutFilterAssets.filter(e=>e.identifier===t)[0]}getOverlayAsset(t){return this.overlayAssets.filter(e=>e.identifier===t)[0]}getStickerAsset(t){return this.stickerAssets.filter(e=>e.identifier===t)[0]}getFontAsset(t){const e=this.fontAssets.filter(r=>r.identifier===t)[0];if(e){return e}console.warn(`The font asset for ${t} was not found.`);return void 0}getTextDesignAssets(t){return this.textDesignAssets.filter(e=>e.identifier===t)[0]}getFrameAsset(t){return this.frameAssets.filter(e=>e.identifier===t)[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(t,e){if(Object.prototype.hasOwnProperty.call(e,"items")){return[...t,...e.items]}return[...t,e]}configuredCategory(t,e,r,o){if(e.categories&&e.categories.length){return e.categories.reduce((n,s)=>{const a=t.find(l=>l.identifier===s.identifier);if(a){n.push({...a,...s,items:this.configuredItem(s.items,r,a.items,o).filter(Boolean)})}else if(this.areCustomAssetsAllowed||o==="transform"){n.push({...s,items:this.configuredItem(s.items,r,s.items,o).filter(Boolean)})}return n},[])}return t}configuredItem(t,e,r,o){if(t&&t.length){return t.reduce((n,s)=>{const a=e.find(l=>l.identifier===s.identifier);if(a){n.push({...a,...s})}else if(this.areCustomAssetsAllowed||o==="transform"){n.push(s)}return n},[]).filter(Boolean)}return r}}});var nS,Ve;var BA=d(()=>{nS=class{static contains(t,e){return e.x>=t.minX&&e.x<=t.maxX&&e.y>=t.minY&&e.y<=t.maxY}constructor(t,e,r,o){if(typeof t==="number"){if(typeof e==="number"&&r!==void 0&&o!==void 0){this.origin={x:t,y:e};this.size={width:r||0,height:o||0}}else{throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)")}}else{this.origin=t;if(typeof e==="number"){throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)")}this.size=e}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}};Ve=nS;Ve.ZERO=new nS({x:0,y:0},{width:0,height:0})});var us,St;var PA=d(()=>{us=class{constructor(t,e,r,o,n,s){this.a=t;this.b=e;this.c=r;this.d=o;this.tx=n;this.ty=s}static fromScale(t,e){return new us(t,0,0,e,0,0)}static fromRotation(t){const e=Math.cos(t);const r=Math.sin(t);return new us(e,-r,r,e,0,0)}static fromRotationDeg(t){const e=Math.PI*t/180;return this.fromRotation(e)}static fromTranslation(t,e){return new us(1,0,0,1,t,e)}static fromTRS(t,e,r,o,n){const s=Math.cos(r);const a=Math.sin(r);return new us(o*s,-n*a,o*a,n*s,t,e)}static multiply(t,e){const r=t.a*e.a+t.b*e.c;const o=t.a*e.b+t.b*e.d;const n=t.c*e.a+t.d*e.c;const s=t.c*e.b+t.d*e.d;const a=t.a*e.tx+t.b*e.ty+t.tx;const l=t.c*e.tx+t.d*e.ty+t.ty;return new us(r,o,n,s,a,l)}static transformPoint(t,e){return{x:t.a*e.x+t.b*e.y+t.tx,y:t.c*e.x+t.d*e.y+t.ty}}static getInverted(t){const e=t.a*t.d-t.b*t.c;if(e===0){return t}const r=1/e;const o=r*t.d;const n=-r*t.b;const s=-r*t.c;const a=r*t.a;const l=r*(t.b*t.ty-t.d*t.tx);const c=r*(t.c*t.tx-t.a*t.ty);return new us(o,n,s,a,l,c)}};St=us;St.IDENTITY=us.fromScale(1,1)});function qr(i){return typeof i==="number"}var sS,aS;var lS=d(()=>{sS=i=>i<0;aS=i=>sS(i)?-i:i});var Wl,_b,yb,MA,_p,cS,uS,dS,LA;var zA=d(()=>{lS();gp();Wl=i=>i*(Math.PI/180);_b=i=>i*(180/Math.PI);yb={[0]:Wl(0),[90]:Wl(90),[180]:Wl(180),[270]:Wl(270)};MA=Object.values(yb);_p=i=>{let t=Math.round(_b(aS(i)));if(sS(i)){if(t===270){t=90}else if(t===90){t=270}}return yb[t%360]};cS=i=>i===0?i:360-aS(i);uS=i=>fA(MA,_p(i));dS=i=>gA(MA,_p(i));LA=i=>{const t=_p(i);return t===yb[270]||t===yb[90]}});var UA=d(()=>{QC();BA();PA();lS();zA()});var ie;var NA=d(()=>{ie=class{static get IDENTITY(){return new ie({x:0,y:0})}constructor(t,e={x:1,y:1},r=0){this.position=t;this.scale=e;this.rotation=r}}});var z=d(()=>{MF();fC();WF();gC();bC();AA();oS();UA();NA();gp();wo()});var Ca,HA,WA,$Q,mS;var GA=d(()=>{Ca=y(require("react"));jg();HA=y($u());WA=y(require("styled-components"));Cr();z();$Q=WA.default.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${i=>i.theme.background};
  color: ${i=>i.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${i=>i.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${i=>i.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${i=>i.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`;mS=class extends Ca.default.Component{constructor(t){super(t);this.node=Ca.default.createRef();this.mounted=false;this.saveEditorDimensions=t=>{if(this.mounted){this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})}};var e;if((e=Ca.default)==null?void 0:e.version){const r=Number.parseInt(Ca.default.version.split(".")[0],10);const o=Number.parseInt(Ca.default.version.split(".")[1],10);if(r<16||r===16&&o<8)console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,HA.default)(this.saveEditorDimensions,100);this.resizeObserver=new Nl(([r])=>{this.saveEditorDimensions(r.target)});this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;this.mounted=true;if((t=this.node)==null?void 0:t.current){this.resizeObserver.observe(this.node.current)}}componentWillUnmount(){this.mounted=false;this.resizeObserver.disconnect()}render(){const{children:t}=this.props;const{contextValue:e}=this.state;return Ca.default.createElement($Q,{ref:this.node,"data-test":U.EditorContainer},Ca.default.createElement(Fe.Provider,{value:e},t))}}});var xb,xp,KQ,vb;var vp=d(()=>{xb=y(require("styled-components"));xp=xb.css`
  position: absolute;
  top: 0;
  left: 0;
  height: ${i=>i.theme.measurements.colorItem.size}px;
  width: ${i=>i.theme.measurements.colorItem.size}px;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};
  pointer-events: none;
`;KQ=xb.default.div.attrs(i=>({style:{background:i.color}}))`
  ${xp}
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.background};
`;vb=KQ});var Gl,Cp,XQ,pS,qQ,Cb;var hS=d(()=>{Gl=y(require("react"));Cp=y(require("styled-components"));vp();XQ=Cp.default.div`
  ${xp}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${i=>i.isActive&&Cp.css`
      border-color: ${i.theme.selectColor.activeBorderColor};
    `}
`;pS=Cp.default.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`;qQ=({isActive:i,className:t,style:e})=>{return Gl.default.createElement(XQ,{isActive:i,className:t,style:e},i&&Gl.default.createElement(Gl.default.Fragment,null,Gl.default.createElement(pS,null),Gl.default.createElement(pS,null),Gl.default.createElement(pS,null)))};Cb=qQ});var VA,ui;var jA=d(()=>{VA=require("styled-components");ui=VA.css`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${i=>i.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${i=>i.theme.focusOutlineColor};
  }
`});var $A,Ju;var KA=d(()=>{$A=require("styled-components");Ju=$A.css`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`});var Yr=d(()=>{jA();KA()});var XA,YQ,Sb;var fS=d(()=>{XA=y(require("styled-components"));Yr();YQ=XA.default.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${i=>i.theme.measurements.colorItem.size}px;
  width: ${i=>i.theme.measurements.colorItem.size}px;
  margin: ${i=>i.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${i=>i.theme.colorItem.borderRadius||`${i.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${ui}

  &:disabled {
    opacity: ${i=>i.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;Sb=YQ});var qA,JQ,wb;var gS=d(()=>{qA=y(require("styled-components"));vp();JQ=qA.default.div.attrs(i=>{const t=i.url?{backgroundImage:`url(${i.url})`}:{};return{style:t,...i.style}})`
  ${xp}
  z-index: ${i=>i.theme.measurements.zIndex.colorItem.tiledBackground};
`;wb=JQ});var Sp,ZQ,YA;var JA=d(()=>{Sp=y(require("react"));A();hS();vp();fS();gS();ZQ=({isActive:i,onClick:t,color:e,label:r,isDisabled:o,tiledBackgroundUrl:n,className:s,style:a,children:l})=>{return Sp.default.createElement(Sb,{disabled:o,onClick:t,"aria-label":r,className:s,style:a},Sp.default.createElement(wb,{url:n}),Sp.default.createElement(vb,{color:e}),Sp.default.createElement(Cb,{isActive:i}),l)};YA=it("config")(S(ZQ))});var ZA,QQ,Tb;var bS=d(()=>{ZA=y(require("styled-components"));QQ=ZA.default.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${i=>i.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${i=>i.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;Tb=QQ});var QA,kb,ttt,Ib;var yS=d(()=>{QA=y(require("react"));kb=y(require("styled-components"));ttt=kb.default.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${i=>i.isVisible&&kb.css`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`;Ib=({isVisible:i,className:t,children:e})=>{return QA.default.createElement(ttt,{isVisible:i,className:t},e)}});var tB,ett,Db;var _S=d(()=>{tB=y(require("styled-components"));ett=tB.default.div.attrs(({style:i})=>({role:"dialog","aria-hidden":false,style:i}))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${i=>i.top}px);
  left: calc(50% + ${i=>i.left}px);
  width: ${i=>i.width};
  height: ${i=>i.height};
  transform: translate(-50%, -50%);
  border-radius: ${i=>i.theme.shape.radiusLarge}px;
  background: ${i=>i.theme.modal.background};
  color: ${i=>i.theme.modal.bodyForeground};
  z-index: ${i=>i.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;Db=ett});var Eb,itt,eB;var iB=d(()=>{Eb=y(require("react"));z();bS();yS();_S();itt=({isVisible:i=false,width:t="350px",height:e="fit-content",position:r,header:o,body:n,footer:s,className:a,style:l,children:c})=>Eb.default.createElement(Ib,{isVisible:i},Eb.default.createElement(Tb,null),Eb.default.createElement(Db,{height:e,width:t,left:r.x,top:r.y,className:a,style:l,"data-test":U.Dialog},o,n,c,s));eB=itt});var rB,rtt,ds;var wp=d(()=>{rB=y(require("styled-components"));rtt=rB.default.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;ds=rtt});var oB,ott,Zu;var Fb=d(()=>{oB=y(require("styled-components"));ott=oB.default.div`
  display: flex;
  border-top: 2px solid
    ${i=>i.type==="error"?i.theme.error:i.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;Zu=ott});var nB,ntt,Qu;var Rb=d(()=>{nB=y(require("styled-components"));ntt=nB.default.h3`
  font-size: ${i=>i.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.headline2.case};
  color: ${i=>i.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;Qu=ntt});var td,Tp,stt,att,Ob,ltt,Ab;var xS=d(()=>{td=y(require("react"));Tp=y(require("styled-components"));stt=Tp.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`;att=Tp.default.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`;Ob=Tp.default.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${i=>i.theme.primary};
  border-radius: 50%;
  animation: ${stt} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${i=>i.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`;ltt=({className:i,style:t})=>{return td.default.createElement(att,{className:i,style:t},td.default.createElement(Ob,null),td.default.createElement(Ob,null),td.default.createElement(Ob,null),td.default.createElement(Ob,null))};Ab=ltt});function ctt(i){let t="";let e=true;let r;for(r=0;r<i.length;r+=1){if(e){t+=i[r].toUpperCase();e=false}else if(i[r]==="-"){e=true}else{t+=i[r]}}return t}function CS(i,t){return t?`${t}${ctt(i)}`:i}function utt(i="transform"){if(typeof window==="undefined"||typeof window.document==="undefined"){return""}const{style:t}=window.document.documentElement;if(i in t){return""}let e;for(e=0;e<vS.length;e+=1){if(CS(i,vS[e])in t){return vS[e]}}return""}var vS,sB;var aB=d(()=>{vS=["Moz","Webkit","O","ms"];sB=utt()});function Bb(i,t){for(let e=0,{length:r}=i;e<r;e+=1){if(t.apply(t,[i[e],e,i])){return i[e]}}return null}function SS(i){return typeof i==="function"||Object.prototype.toString.call(i)==="[object Function]"}function ed(i){return typeof i==="number"&&!Number.isNaN(i)}function di(i){return parseInt(i,10)}var wS=d(()=>{});function dtt(i,t){if(!Pb){Pb=Bb(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],e=>{return SS(i[e])})}if(!SS(i[Pb])){return false}return i[Pb](t)}function TS(i,t,e){let r=i;do{if(dtt(r,t)){return true}if(r===e){return false}r=r.parentNode}while(r);return false}function Mb(i,t,e){if(!i){return}if(i.attachEvent){i.attachEvent(`on${t}`,e)}else if(i.addEventListener){i.addEventListener(t,e,true)}else{i[`on${t}`]=e}}function Sa(i,t,e){if(!i){return}if(i.detachEvent){i.detachEvent(`on${t}`,e)}else if(i.removeEventListener){i.removeEventListener(t,e,true)}else{i[`on${t}`]=null}}function lB(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);t+=di(e.borderTopWidth);t+=di(e.borderBottomWidth);return t}function cB(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);t+=di(e.borderLeftWidth);t+=di(e.borderRightWidth);return t}function uB(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);t-=di(e.paddingTop);t-=di(e.paddingBottom);return t}function dB(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);t-=di(e.paddingLeft);t-=di(e.paddingRight);return t}function mB(i,t){const e=t===t.ownerDocument.body;const r=e?{left:0,top:0}:t.getBoundingClientRect();const o=i.clientX+t.scrollLeft-r.left;const n=i.clientY+t.scrollTop-r.top;return{x:o,y:n}}function pB({x:i,y:t,rotation:e}){const r=`translate(${i}px,${t}px) rotate(${e}rad)`;return{[CS("transform",sB)]:r}}function hB(i,t){let e=null;if(i.targetTouches){e=Bb(i.targetTouches,r=>t===r.identifier)}if(i.changedTouches&&!e){e=Bb(i.changedTouches,r=>t===r.identifier)}return e}function fB(i){if(i.targetTouches&&i.targetTouches[0]){return i.targetTouches[0].identifier}if(i.changedTouches&&i.changedTouches[0]){return i.changedTouches[0].identifier}return null}var Pb;var Lb=d(()=>{aB();wS();Pb=""});function kS(i){const t=i.findDOMNode();if(!t){return null}return t}function mtt(i){return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}}function gB(i,t,e){if(!i.props.bounds)return[t,e];let{bounds:r}=i.props;r=typeof r==="string"?r:mtt(r);const o=kS(i);if(!o)return[t,e];if(typeof r==="string"){const{ownerDocument:n}=o;const s=n.defaultView;let a;if(r==="parent"){a=o.parentNode}else{a=n.querySelector(r)}const l=s.getComputedStyle(o);const c=s.getComputedStyle(a);r={left:-o.offsetLeft+di(c.paddingLeft)+di(l.marginLeft),top:-o.offsetTop+di(c.paddingTop)+di(l.marginTop),right:dB(a)-cB(o)-o.offsetLeft+di(c.paddingRight)-di(l.marginRight),bottom:uB(a)-lB(o)-o.offsetTop+di(c.paddingBottom)-di(l.marginBottom)}}if(ed(r.right))t=Math.min(t,r.right);if(ed(r.bottom))e=Math.min(e,r.bottom);if(ed(r.left))t=Math.max(t,r.left);if(ed(r.top))e=Math.max(e,r.top);return[t,e]}function zb(i,t,e){const{state:r}=i;const o=!ed(r.lastX);const n=kS(i);if(o){return{node:n,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}}return{node:n,deltaX:t-r.lastX,deltaY:e-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:e}}function Ub(i,t){return{node:t.node,x:i.state.x+t.deltaX,y:i.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:i.state.x,lastY:i.state.y}}function bB(i){return i.props.axis==="both"||i.props.axis==="x"}function yB(i){return i.props.axis==="both"||i.props.axis==="y"}function Nb(i,t){const e=kS(t);if(!e)return{x:0,y:0};let{offsetParent:r}=t.props;if(!r&&e instanceof HTMLElement){r=e.offsetParent||e.ownerDocument.body}return mB(i,r)}var IS=d(()=>{Lb();wS()});var Hb,hn,Tr,DS,Vl;var ES=d(()=>{Hb=y(require("react"));Lb();IS();hn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};Tr=hn.mouse;DS={cancel:null,disabled:false,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};Vl=class extends Hb.default.Component{constructor(){super(...arguments);this.state={dragging:false,lastX:NaN,lastY:NaN,touchIdentifier:void 0};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.getTouchFromEvent=t=>{const e=fB(t);this.setState({touchIdentifier:e});return hB(t,e)};this.preventDefault=t=>{if(t.stopPropagation){t.stopPropagation()}};this.handleDragStart=t=>{const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body){throw new Error("<DraggableCore> not mounted on DragStart!")}const{ownerDocument:r}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!TS(t.target,this.props.handle,e)||this.props.cancel&&TS(t.target,this.props.cancel,e)){return false}const o=Nb(t,this);if(o==null){return false}const{x:n,y:s}=o;const a=zb(this,n,s);const l=this.props.onStart(t,a);if(l===false){return false}this.setState({dragging:true,lastX:n,lastY:s});if(Tr.move==="touchmove"){Mb(r,Tr.move,this.onTouchDrag)}else{Mb(r,Tr.move,this.onMouseDrag)}Mb(r,Tr.stop,this.handleDragStop)};this.handleDrag=t=>{const e=Nb(t,this);if(e==null){return}const{x:r,y:o}=e;const n=zb(this,r,o);const s=this.props.onDrag(t,n);if(s===false){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(a){const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.handleDragStop(l)}return}this.setState({lastX:r,lastY:o})};this.handleDragStop=t=>{if(!this.state.dragging){return}const e=Nb(t,this);if(e==null){return}const{x:r,y:o}=e;const n=zb(this,r,o);const s=this.findDOMNode();this.setState({dragging:false,lastX:NaN,lastY:NaN});this.props.onStop(t,n);if(s){if(Tr.move==="touchmove"){Sa(s.ownerDocument,Tr.move,this.onTouchDrag)}else{Sa(s.ownerDocument,Tr.move,this.onMouseDrag)}Sa(s.ownerDocument,Tr.stop,this.handleDragStop)}};this.onMouseDown=t=>{this.preventDefault(t);Tr=hn.mouse;this.props.onMouseDown(t);if(t.button&&typeof t.button==="number"&&t.button!==0){return false}return this.handleDragStart(t)};this.onMouseDrag=t=>{this.preventDefault(t);return this.handleDrag(t)};this.onMouseUp=t=>{this.preventDefault(t);Tr=hn.mouse;return this.handleDragStop(t)};this.onTouchStart=t=>{this.preventDefault(t);Tr=hn.touch;const e=this.getTouchFromEvent(t);return this.handleDragStart(e)};this.onTouchDrag=t=>{this.preventDefault(t);Tr=hn.touch;const e=this.getTouchFromEvent(t);return this.handleDrag(e)};this.onTouchEnd=t=>{this.preventDefault(t);Tr=hn.touch;const e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;Sa(e,hn.mouse.move,this.onMouseDrag);Sa(e,hn.touch.move,this.onTouchDrag);Sa(e,hn.mouse.stop,this.handleDragStop);Sa(e,hn.touch.stop,this.handleDragStop)}}render(){return Hb.default.cloneElement(Hb.default.Children.only(this.props.children),{style:{touchAction:"none",...this.props.children.props.style},onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Vl.defaultProps=DS;Vl.displayName="DraggableCore"});var kp,ptt,Wb,_B;var xB=d(()=>{kp=y(require("react"));ES();Lb();IS();ptt={...DS,axis:"both",bounds:false,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:false};Wb=class extends kp.default.Component{constructor(t){super(t);this.onDragStart=(t,e)=>{const r=this.props.onStart(t,Ub(this,e));if(r===false){return false}this.setState({dragging:true,dragged:true})};this.onDrag=(t,e)=>{const{position:r,defaultPosition:o,onDrag:n,bounds:s}=this.props;if(!this.state.dragging){return false}const a=Ub(this,e);const l=Boolean(r);const c={x:l?a.x:o.x,y:l?a.y:o.y,slackX:0,slackY:0};if(s){const{x:m,y:p}=c;c.x+=this.state.slackX;c.y+=this.state.slackY;const[h,g]=gB(this,c.x,c.y);c.x=h;c.y=g;c.slackX=this.state.slackX+(m-c.x);c.slackY=this.state.slackY+(p-c.y);a.x=c.x;a.y=c.y;a.deltaX=c.x-this.state.x;a.deltaY=c.y-this.state.y}const u=n(t,a);if(u===false){return false}this.setState(c)};this.onDragStop=(t,e)=>{if(!this.state.dragging){return false}const r=this.props.onStop(t,Ub(this,e));if(r===false){return false}const o={dragging:false,slackX:0,slackY:0,x:0,y:0};const n=Boolean(this.props.position);if(n){const{x:s,y:a}=this.props.position;o.x=s;o.y=a}this.setState(o)};this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(t==null?void 0:t.current)||null};this.state={dragging:false,dragged:false,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){const e=Boolean(this.props.position);if(e){if(this.props.updateOnPosition){if(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}else{if(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y){this.setState({x:this.props.position.x,y:this.props.position.y})}}}}componentWillUnmount(){this.setState({dragging:false})}render(){const{position:t,defaultPosition:e,rotation:r,defaultClassName:o,defaultClassNameDragging:n,defaultClassNameDragged:s,...a}=this.props;const{x:l,y:c,dragging:u,dragged:m}=this.state;let p={};const h=Boolean(t);const g=!h||u;const _=t||e;const x={x:bB(this)&&g?l:_.x,y:yB(this)&&g?c:_.y,rotation:r};p=pB(x);const b=kp.default.Children.only(this.props.children);const w=[b.props.className||"",o,u?n:"",m?s:""].join(" ").trim();const T=kp.default.cloneElement(b,{className:w,style:{...b.props.style,...p}});return kp.default.createElement(Vl,{...a,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop},T)}};Wb.defaultProps=ptt;Wb.displayName="Draggable";_B=Wb});var id=Wt((Pvt,wB)=>{var SB="Expected a function";var vB=0/0;var htt="[object Symbol]";var ftt=/^\s+|\s+$/g;var gtt=/^[-+]0x[0-9a-f]+$/i;var btt=/^0b[01]+$/i;var ytt=/^0o[0-7]+$/i;var _tt=parseInt;var xtt=typeof global=="object"&&global&&global.Object===Object&&global;var vtt=typeof self=="object"&&self&&self.Object===Object&&self;var Ctt=xtt||vtt||Function("return this")();var Stt=Object.prototype;var wtt=Stt.toString;var Ttt=Math.max;var ktt=Math.min;var FS=function(){return Ctt.Date.now()};function Itt(i,t,e){var r,o,n,s,a,l,c=0,u=false,m=false,p=true;if(typeof i!="function"){throw new TypeError(SB)}t=CB(t)||0;if(Gb(e)){u=!!e.leading;m="maxWait"in e;n=m?Ttt(CB(e.maxWait)||0,t):n;p="trailing"in e?!!e.trailing:p}function h(k){var E=r,J=o;r=o=void 0;c=k;s=i.apply(J,E);return s}function g(k){c=k;a=setTimeout(b,t);return u?h(k):s}function _(k){var E=k-l,J=k-c,tt=t-E;return m?ktt(tt,n-J):tt}function x(k){var E=k-l,J=k-c;return l===void 0||E>=t||E<0||m&&J>=n}function b(){var k=FS();if(x(k)){return w(k)}a=setTimeout(b,_(k))}function w(k){a=void 0;if(p&&r){return h(k)}r=o=void 0;return s}function T(){if(a!==void 0){clearTimeout(a)}c=0;r=l=o=a=void 0}function D(){return a===void 0?s:w(FS())}function O(){var k=FS(),E=x(k);r=arguments;o=this;l=k;if(E){if(a===void 0){return g(l)}if(m){a=setTimeout(b,t);return h(l)}}if(a===void 0){a=setTimeout(b,t)}return s}O.cancel=T;O.flush=D;return O}function Dtt(i,t,e){var r=true,o=true;if(typeof i!="function"){throw new TypeError(SB)}if(Gb(e)){r="leading"in e?!!e.leading:r;o="trailing"in e?!!e.trailing:o}return Itt(i,t,{"leading":r,"maxWait":t,"trailing":o})}function Gb(i){var t=typeof i;return!!i&&(t=="object"||t=="function")}function Ett(i){return!!i&&typeof i=="object"}function Ftt(i){return typeof i=="symbol"||Ett(i)&&wtt.call(i)==htt}function CB(i){if(typeof i=="number"){return i}if(Ftt(i)){return vB}if(Gb(i)){var t=typeof i.valueOf=="function"?i.valueOf():i;i=Gb(t)?t+"":t}if(typeof i!="string"){return i===0?i:+i}i=i.replace(ftt,"");var e=btt.test(i);return e||ytt.test(i)?_tt(i.slice(2),e?2:8):gtt.test(i)?vB:+i}wB.exports=Dtt});var rd,Vb,RS,Li,od,jb,$b;var jl=d(()=>{rd=y(require("styled-components"));Q0();Vb=rd.default.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`;RS=(0,rd.default)(Vb)``;Li=(0,rd.default)(Vb)``;od=(0,rd.default)(Vb)``;jb={display:"none",left:0,top:0};$b=(0,rd.default)(Vb)`
  display: ${({display:i})=>i};
  left: ${({left:i})=>i}px;
  top: ${({top:i})=>i}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${Pg} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`});var nd,Kb,Eo,Rtt,bi;var wa=d(()=>{nd=y(require("react"));Kb=y(require("styled-components"));Yr();jl();Eo=Kb.css`
  color: ${i=>i.theme.button.activeForeground};
  border-color: ${i=>i.theme.button.activeForeground};

  svg {
    color: ${i=>i.theme.button.activeForeground};
  }
`;Rtt=Kb.default.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  font-size: ${i=>i.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button1.case};
  font-family: ${i=>i.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${ui}

  /* Active */

  &:active {
    ${Eo}
  }

  ${({isActive:i})=>i&&Eo}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Li} {
      background-color: ${i=>i.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${od} {
      background-color: ${i=>i.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${i=>i.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${i=>i.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`;bi=class extends nd.default.Component{constructor(){super(...arguments);this.state=jb;this.timeout=null;this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const r=t.pageX-e.left;const o=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(r,o)})}else{this.setRippleState(r,o)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{isActive:t,isDisabled:e,label:r,ariaLabel:o,children:n,className:s,...a}=this.props;const{left:l,top:c,display:u}=this.state;return nd.default.createElement(Rtt,{"data-test":o,className:s,isActive:t,disabled:e,"aria-label":o,...a,onClick:this.onClick},r,n,nd.default.createElement($b,{display:u,left:l,top:c}),nd.default.createElement(Li,null),nd.default.createElement(od,null))}};bi.defaultProps={type:"button",isDisabled:false,isActive:false}});var TB,Ip,Ott,Att,zi;var Ta=d(()=>{TB=y(require("react"));Ip=y(require("styled-components"));Yr();Ott=Ip.default.label`
  ${Ju}
`;Att=Ip.default.label`
  display: block;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:i})=>i&&Ip.css`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`;zi=({id:i,"data-test":t,label:e,htmlFor:r,show:o,style:n,isDisabled:s,className:a})=>{const l=o?Att:Ott;const c=r||(e?e.replace(" ","-"):void 0);return TB.default.createElement(l,{id:i,"data-test":t,style:n,isDisabled:s,htmlFor:c,className:a},e)};zi.defaultProps={show:true}});var Jr,DB,Zr,Btt,Ptt,kB,Mtt,Ltt,ztt,Utt,IB,OS,EB;var FB=d(()=>{Jr=y(require("react"));DB=y(id());Zr=y(require("styled-components"));z();wa();Ta();Btt=Zr.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`;Ptt=(0,Zr.default)(zi)`
  align-self: flex-start;
`;kB=(0,Zr.default)(bi)`
  color: ${i=>i.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`;Mtt=Zr.default.div`
  display: flex;
  justify-content: space-between;
  width: ${i=>i.theme.measurements.advancedUIToolControlBar.width-48}px;
`;Ltt=Zr.default.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${i=>.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};
`;ztt=Zr.default.div`
  width: ${i=>.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`;Utt=Zr.default.span`
  width: ${i=>Math.round(i.length*.6*i.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${i=>i.activeIndex*.6*i.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
`;IB=Zr.default.div`
  border: solid ${i=>i.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:i})=>i==="left"?Zr.css`
          margin-left: 2px;
          transform: rotate(135deg);
        `:Zr.css`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;OS=class extends Jr.default.PureComponent{constructor(t){super(t);this.updateIndex=(t,e=false)=>{let r=t+(e?-1:1);const o=this.props.list.length-1;if(r>o){r=0}if(r<0){r=o}this.props.onSelect(this.props.list[r].identifier)};this.getActiveIndex=t=>{const{list:e}=this.props;const r=e.findIndex(o=>o.identifier===t);return r!==-1?r:0};this.throttledUpdateIndex=(0,DB.default)(this.updateIndex,600)}render(){const{list:t,label:e,showLabel:r=true}=this.props;const o=this.getActiveIndex(this.props.defaultIdentifier);const n=t.length<=1;return Jr.default.createElement(Btt,{"data-test":U.CarouselSlider},Jr.default.createElement(Ptt,{show:r,label:e}),Jr.default.createElement(Mtt,{id:`photoeditorsdk-${e.replace(" ","-")}`},Jr.default.createElement(kB,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o,true)},Jr.default.createElement(IB,{direction:"left"})),Jr.default.createElement(ztt,null,Jr.default.createElement(Utt,{activeIndex:o,length:t.length},t.map(s=>Jr.default.createElement(Ltt,{key:s.identifier},s.value)))),Jr.default.createElement(kB,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(o)},Jr.default.createElement(IB,{direction:"right"}))))}};OS.defaultProps={showLabel:true};EB=OS});var RB,Ntt,Xb;var AS=d(()=>{RB=y(require("styled-components"));Ntt=RB.default.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${i=>i.theme.measurements.inputs.checkbox.maxWidth}px;
`;Xb=Ntt});var Dp,Htt,Ep;var BS=d(()=>{Dp=y(require("styled-components"));Yr();Htt=Dp.default.div`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${i=>i.theme.checkbox.background};
  border-radius: ${i=>i.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${ui}

  &:hover {
    opacity: ${i=>i.theme.checkbox.hoverOpacity};
  }
  ${i=>i.isChecked&&Dp.css`
      background-color: ${i.theme.checkbox.activeBackground};
      &::after {
        color: ${i.theme.checkbox.activeForeground};
        border-color: ${i.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${i.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${i=>i.isDisabled&&Dp.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;Ep=Htt});var OB,Wtt,qb;var PS=d(()=>{OB=y(require("styled-components"));Yr();Wtt=OB.default.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${ui}
`;qb=Wtt});var sd,AB,BB;var PB=d(()=>{sd=y(require("react"));z();Ta();AS();BS();PS();AB=({label:i,value:t,checkMarkPosition:e,onClick:r,isDisabled:o,className:n,style:s})=>{const a=`photoeditorsdk-${i.replace(" ","-")}`;return sd.default.createElement(Xb,{"data-test":U.Checkbox,className:n,style:s},e==="left"&&sd.default.createElement(Ep,{onClick:r,isDisabled:o,isChecked:t}),sd.default.createElement(zi,{isDisabled:o,label:i,htmlFor:a}),sd.default.createElement(qb,{id:a,disabled:o,checked:t,"aria-checked":t,onChange:r}),e==="right"&&sd.default.createElement(Ep,{onClick:r,isDisabled:o,isChecked:t}))};BB=AB;AB.defaultProps={value:false,checkMarkPosition:"left"}});var MB,Yb;var MS=d(()=>{MB=y(require("styled-components"));Yb=MB.default.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${i=>i.theme.dropdown.caretColor};
  transform: rotate(${i=>i.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`});var Jb,LB,zB;var UB=d(()=>{Jb=y(require("styled-components"));LB=Jb.css`
  opacity: ${i=>i.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`;zB=Jb.default.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${LB}
  }

  ${({isDisabled:i})=>i&&LB}
`});var Zb,NB;var HB=d(()=>{Zb=y(require("styled-components"));Yr();NB=Zb.default.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${i=>i.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${i=>i.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:i})=>i&&Zb.css`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${ui}
`});var LS,fn,Gtt,Vtt,Fo;var WB=d(()=>{LS=y(require("react"));fn=y(require("styled-components"));z();Gtt=fn.default.div`
  display: flex;
  ${i=>{if(xe()||Sr()){return fn.css`
        overflow: hidden;
      `}if(i.direction==="vertical"){return fn.css`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `}return fn.css`
      overflow-y: hidden;
      overflow-x: auto;
    `}};
`;Vtt=fn.default.ul.attrs(()=>({role:"menubar","aria-label":"Tool Navigation"}))`
  display: flex;
  flex-direction: ${i=>i.direction==="vertical"?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${i=>{if(xe()||Sr()){return fn.css`
        ${()=>{if(i.direction==="vertical"){return fn.css`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `}return fn.css`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}}

        scrollbar-face-color: ${i.theme.scrollbar.handleColor};
        scrollbar-track-color: ${i.theme.toolbar.background};
        scrollbar-base-color: ${i.theme.toolbar.background};
        scrollbar-3dlight-color: ${i.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${i.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${i.theme.toolbar.background};
        scrollbar-shadow-color: ${i.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${i.theme.scrollbar.handleColor};
      `}return""}}
`;Fo=({direction:i="horizontal","data-test":t,className:e,children:r,...o})=>LS.default.createElement(Gtt,{...o,direction:i,className:e},LS.default.createElement(Vtt,{direction:i,"data-test":t},r))});var zS=d(()=>{WB()});var Fp,US;var GB=d(()=>{Fp=y(require("styled-components"));z();zS();US=(0,Fp.default)(Fo)`
  position: absolute;

  background: ${i=>i.theme.dropdown.listBackground};
  color: ${i=>i.theme.dropdown.listForeground};
  border: 1px solid ${i=>i.theme.dropdown.listBorderColor};
  box-shadow: ${i=>i.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${i=>{if(i.isOpen){return Fp.css`
        visibility: visible;
        opacity: 1;
        display: flex;
      `}return""}}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>{if(xe()){return Fp.css`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `}return""}}

  border-radius: 0 0 ${i=>i.theme.shape.radiusMedium}px
    ${i=>i.theme.shape.radiusMedium}px;
  z-index: ${i=>i.theme.measurements.zIndex.input.list};
`;US.defaultProps={direction:"vertical"}});var VB,jB;var $B=d(()=>{VB=y(require("styled-components"));Yr();jB=VB.default.div`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.dropdown.foreground};
  background-color: ${i=>i.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${i=>i.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${i=>i.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${i=>i.theme.dropdown.hoverBorderColor};
  }

  ${ui}
`});var gn,KB,jtt,NS;var XB=d(()=>{gn=y(require("react"));KB=y(require("styled-components"));z();MS();UB();HB();GB();$B();Ta();jtt=KB.default.div``;NS=class extends gn.default.PureComponent{constructor(t){super(t);this.state={isOpen:false};this.dropdownId="";this.dropdownLabelId="";this.handleOutsideClick=t=>{if(this.node&&this.node.contains(t.target)){return}this.setState({isOpen:false})};this.onSelect=t=>{const{onSelect:e}=this.props;e(t);this.setState({isOpen:false})};this.handleKeyDownItem=t=>e=>{if(e.nativeEvent.code==="Space"||e.nativeEvent.code==="Enter"){this.onSelect(t)}};this.onClick=()=>{this.setState(t=>({isOpen:!t.isOpen}))};this.listItem=t=>{const{itemStyle:e,selectedItem:r}=this.props;const{isOpen:o}=this.state;const{value:n,label:s}=t;let a={};if(typeof e==="function"){a=e(t)}else if(e!==null&&typeof e==="object"){a=e}return gn.default.createElement(NB,{role:"option","aria-hidden":!o,tabIndex:0,style:a,onClick:()=>this.onSelect(n),key:n,isActive:r===n,onKeyDown:this.handleKeyDownItem(n)},s)};this.onKeyDown=t=>{if(t.nativeEvent.code==="Space"||t.nativeEvent.code==="Enter"){this.onClick()}};this.nodeRef=e=>{this.node=e};this.dropdownId=Ot().slice(0,8);this.dropdownLabelId=`${this.dropdownId}-label`}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false)}render(){const{selectedItem:t,list:e,label:r,style:o,isDisabled:n}=this.props;const{isOpen:s}=this.state;const a=e.length>1;return gn.default.createElement(jtt,null,gn.default.createElement(zi,{id:this.dropdownLabelId,isDisabled:n,style:{paddingLeft:"0px"},label:r}),gn.default.createElement("div",{ref:this.nodeRef},gn.default.createElement(zB,{isOpen:s,isDisabled:n},gn.default.createElement(jB,{role:"combobox","aria-controls":this.dropdownId,"aria-expanded":s,"aria-labelledby":this.dropdownLabelId,"data-test":U.Dropdown,"aria-hidden":n,showList:a,style:o,onClick:a?this.onClick:void 0,onKeyDown:this.onKeyDown,tabIndex:n?-1:0},t,a&&gn.default.createElement(Yb,{rotation:s?180:0})),gn.default.createElement(US,{id:this.dropdownId,role:"listbox",tabIndex:-1,"aria-labelledby":this.dropdownLabelId,"data-test":U.DropdownList,isOpen:s},a&&e.map(this.listItem)))))}}});var qB,YB;var JB=d(()=>{qB=y(require("styled-components"));YB=qB.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`});var ZB,$tt,QB;var t5=d(()=>{ZB=y(require("react"));$tt=({children:i})=>{const t=e=>{e.preventDefault()};return ZB.default.createElement("form",{onSubmit:t},i)};QB=$tt});var e5,$l;var Qb=d(()=>{e5=require("styled-components");$l=e5.css`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${i=>i.theme.textInput.foreground};
  padding: 0;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${i=>i.theme.textInput.borderColor};
  background: ${i=>i.theme.textInput.background};
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${i=>i.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }
`});var ty,WS,Ktt,Xtt,HS,ey;var GS=d(()=>{ty=y(require("react"));WS=y(require("styled-components"));Qb();Ktt=WS.default.div`
  ${$l}
  position: relative;
  display: flex;
  align-items: center;
  height: unset;

  &:focus-within {
    border-color: ${i=>i.theme.textInput.hoverBorderColor};
  }
`;Xtt=WS.default.input`
  ${$l}
  border-bottom: none;
  &:disabled {
    opacity: ${i=>i.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`;HS=class extends ty.default.Component{constructor(){super(...arguments);this.onChange=t=>{const{onChange:e}=this.props;if(e){e(t.target.value)}}}render(){const{"aria-label":t,"aria-labeledby":e,id:r,testId:o,value:n,type:s,min:a,max:l,onBlur:c,onFocus:u,onKeyUp:m,onKeyDown:p,onMouseUp:h,onTouchEnd:g,isDisabled:_,className:x,children:b}=this.props;return ty.default.createElement(Ktt,{className:x},ty.default.createElement(Xtt,{"aria-label":t,"aria-labelledby":e,id:r,"data-test":o,"aria-hidden":_,disabled:_,value:n,type:s,min:a,max:l,onChange:this.onChange,onBlur:c,onFocus:u,onKeyUp:m,onKeyDown:p,onMouseUp:h,onTouchEnd:g}),b)}};HS.defaultProps={type:"text"};ey=HS});var ad,Op,qtt,Rp,VS,iy;var jS=d(()=>{ad=y(require("react"));Op=y(require("styled-components"));z();Ta();GS();qtt=Op.default.div`
  ${xe()?Op.css``:Op.css`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;Rp=class extends ad.default.Component{constructor(t){super(t);this.node=null;this.handleOutsideClick=t=>{if(this.node&&this.node.current&&this.node.current.contains(t.target)){return}this.onSubmit()};this.onSubmit=()=>{const{onSubmit:t}=this.props;const{value:e,isActive:r}=this.state;if(t){const o=parseFloat(Rp.cleanValue(e));if(!Number.isNaN(o)&&r){t(`${o}`)}}this.setState({isActive:false})};this.onBlur=()=>{this.onSubmit()};this.onFocus=()=>{this.setState({isActive:true})};this.onKeyDown=t=>{const{value:e}=this.state;if(t.key==="Enter"){this.onSubmit()}else if(t.key==="ArrowUp"){const r=parseFloat(Rp.cleanValue(e));if(typeof r==="number"){this.setState({value:(r+1).toString(),isActive:true})}}else if(t.key==="ArrowDown"){const r=parseFloat(Rp.cleanValue(e));if(typeof r==="number"){this.setState({value:(r-1).toString(),isActive:true})}}};this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:true})};this.state={value:this.props.value||"",isActive:false};this.node=ad.default.createRef()}static getDerivedStateFromProps({value:t},{value:e,isActive:r}){if(t!==e&&!r){return{value:t}}return null}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false)}render(){const{id:t,label:e,"aria-label":r,isDisabled:o,showLabel:n,ariaHidden:s,onMouseUp:a,onTouchEnd:l,className:c,style:u}=this.props;const{value:m}=this.state;return ad.default.createElement(qtt,{ref:this.node,"data-test":U.NummericInput,className:c,style:u},e&&n&&ad.default.createElement(zi,{htmlFor:t,label:e,show:!!e,isDisabled:o}),ad.default.createElement(ey,{id:t,value:m,isDisabled:o,"aria-hidden":s,"aria-label":!e?r:void 0,"aria-labelledby":e?t:void 0,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:a,onTouchEnd:l}))}};VS=Rp;VS.defaultProps={showLabel:true};iy=VS});var Ap,i5,Ytt,r5;var o5=d(()=>{Ap=y(require("react"));i5=y(require("styled-components"));Qb();Ytt=i5.default.input.attrs({type:"search"})`
  ${$l}
`;r5=(0,Ap.forwardRef)(({value:i,onChange:t,onKeyDown:e,placeholder:r,className:o,style:n},s)=>{const a=l=>{if(t)t(l.target.value)};return Ap.default.createElement("div",{className:o,style:n},Ap.default.createElement(Ytt,{ref:s,value:i,onChange:a,onKeyDown:e,placeholder:r,autoComplete:"off"}))})});var ry,Bp,Jtt,n5,Ztt,s5;var a5=d(()=>{ry=y(require("react"));Bp=y(require("styled-components"));Ta();Jtt=Bp.default.div``;n5=({label:i,children:t,inline:e,showLabel:r,isDisabled:o,"data-test":n})=>{const s=`photoeditorsdk-${i.replace(" ","-")}-label`;return ry.default.createElement(Jtt,{"data-test":n},ry.default.createElement(zi,{id:s,isDisabled:o,label:i,show:r}),ry.default.createElement(Ztt,{"aria-labelledby":s,inline:!!e},t))};Ztt=Bp.default.div`
  display: inline-flex;
  ${i=>!i.inline&&Bp.css`
        flex-wrap: wrap;
      `||""}
`;n5.defaultProps={showLabel:true};s5=n5});var l5,oy;var c5=d(()=>{l5=y(require("styled-components"));oy=l5.default.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`});var $S=d(()=>{c5()});var u5,ny;var d5=d(()=>{u5=y(require("styled-components"));ny=u5.default.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${i=>i.centerSlider?-56:0}px;
  width: ${i=>i.centerSlider?"calc(100% + 56px)":"100%"};
`});var KS=d(()=>{d5()});var sy,m5,Qtt,ay;var p5=d(()=>{sy=y(require("react"));m5=y(require("styled-components"));jS();Qtt=(0,m5.default)(iy)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;ay=({id:i,"aria-label":t,value:e,min:r,max:o,divider:n,suffix:s,decimal:a,isDisabled:l,"aria-hidden":c,onChange:u,onMouseUp:m,onTouchEnd:p,className:h,style:g})=>{const _=`${i}-input`;const x=`${(e*n).toFixed(a)}${s}`;const b=(0,sy.useCallback)(w=>{const T=w.replace(s,"");if(T){const D=parseFloat(T)/n;const O=Math.max(r,Math.min(o,D));if(!Number.isNaN(O)){u(O);if(m){m(O)}else if(p){p(O)}}}},[r,o,s,u,m,p]);return sy.default.createElement(Qtt,{className:h,style:g,"aria-label":t,id:_,value:x,isDisabled:l,"aria-hidden":c,onSubmit:b})}});var XS=d(()=>{p5()});var h5,ly;var f5=d(()=>{h5=y(require("styled-components"));Ta();ly=(0,h5.default)(zi)`
  padding-bottom: 2px;
`});var qS=d(()=>{f5()});var ka,ms,YS,tet,eet,cy;var g5=d(()=>{ka=y(require("react"));ms=y(require("styled-components"));Cr();z();Yr();YS=ms.css`
  ${Sr()||xe()?ms.css`
        width: 16px;
        height: 16px;
      `:ms.css`
        width: 20px;
        height: 20px;
      `}
  background: ${i=>i.theme.slider.thumbBackground};
  border: 2px solid ${i=>i.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`;tet=i=>{let t=(i.value-i.min)*100/(i.max-i.min);if(i.adjust){if(i.value>0){t=i.value*(i.max/2)*100;return`${i.theme.slider.trackColor} 0%,
      ${i.theme.slider.trackColor} 50%,
      ${i.theme.slider.activeTrackColor} 50%,
      ${i.theme.slider.activeTrackColor} ${50+t}%,
      ${i.theme.slider.trackColor} ${50+t}%,
      ${i.theme.slider.trackColor} 100%
      `}if(i.value<0){t=i.value*(i.min/2)*100;return`${i.theme.slider.trackColor} 0%,
      ${i.theme.slider.trackColor} ${50-t}%,
      ${i.theme.slider.activeTrackColor} ${50-t}%,
      ${i.theme.slider.activeTrackColor} 50%,
      ${i.theme.slider.trackColor} 50%,
      ${i.theme.slider.trackColor} 100%
      `}return`${i.theme.slider.trackColor} 0%,
    ${i.theme.slider.trackColor} 100%`}return`${i.theme.slider.activeTrackColor} 0%,
    ${i.theme.slider.activeTrackColor} ${t}%,
    ${i.theme.slider.trackColor} ${t}%,
    ${i.theme.slider.trackColor} 100%`};eet=ms.default.input.attrs(i=>({style:!Sr()&&!xe()?{background:`linear-gradient(to right, ${tet(i)})`}:{}}))`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  width: 100%;
  max-width: ${i=>i.showInput?"calc(100% - 50px)":"100%"};
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  border: none;

  ${ui}

  ${i=>{if(Sr()||xe()){return ms.css`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `}if(i.smallContainer){return ms.css`
        height: 4px;
      `}return ms.css`
      height: 2px;
    `}}

  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${i=>i.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${i=>i.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${YS}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${YS}
  }
  &::-ms-thumb {
    appearance: none;
    ${YS}
  }
  &::-ms-fill-lower {
    background: ${i=>`${i.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${i=>`${i.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
`;cy=({id:i,label:t,value:e,min:r,max:o,step:n,adjust:s,showInput:a,"aria-hidden":l,isDisabled:c,onChange:u,onMouseUp:m,onTouchEnd:p,"data-test":h,className:g,style:_})=>{const{rect:x}=(0,ka.useContext)(Fe);const b=(0,ka.useCallback)(D=>{const O=parseFloat(D.target.value);u(O)},[u]);const w=(0,ka.useCallback)(D=>{const{value:O}=D.target;const k=parseFloat(O);if(p){p(k)}},[p]);const T=(0,ka.useCallback)(D=>{const{value:O}=D.target;const k=parseFloat(O);if(m){m(k)}},[p]);return ka.default.createElement(eet,{type:"range",role:"slider","aria-valuenow":e,"aria-valuemin":r,"aria-valuemax":o,"aria-label":t,"data-test":h,id:i,name:t,tabIndex:0,value:e,min:r,max:o,step:n,style:_,className:g,adjust:s,showInput:a,disabled:c,smallContainer:!!x&&x.width<600,"aria-hidden":l,onChange:b,onKeyUp:b,onKeyDown:b,onMouseUp:T,onTouchEnd:w})}});var JS=d(()=>{g5()});var Ia,b5;var y5=d(()=>{Ia=y(require("react"));z();$S();KS();XS();qS();JS();b5=({"data-test":i,label:t,identifier:e,showLabel:r=true,showInput:o=true,centerSlider:n=false,min:s=-1,max:a=1,value:l=0,step:c=.01,decimal:u=0,divider:m=100,suffix:p="",adjust:h=false,"aria-hidden":g,isDisabled:_,onChange:x,onMouseUp:b,onTouchEnd:w,style:T,className:D})=>{const[O]=(0,Ia.useState)(`photoeditorsdk-slider-${Ot()}`);return Ia.default.createElement(oy,{className:D,"data-test":i||e||O,style:T},Ia.default.createElement(ly,{isDisabled:_,label:t,show:r}),Ia.default.createElement(ny,{centerSlider:o&&n},Ia.default.createElement(cy,{id:O,label:t,value:l,min:s,max:a,step:c,adjust:h,showInput:o,isDisabled:_,"aria-hidden":g,onChange:x,onMouseUp:b,onTouchEnd:w}),o&&Ia.default.createElement(ay,{id:O,"aria-label":t,value:l,min:s,max:a,divider:m,suffix:p,decimal:u,isDisabled:_,"aria-hidden":g,onChange:x,onMouseUp:b,onTouchEnd:w})))}});var _5=d(()=>{y5();$S();KS();XS();JS();qS()});var x5,Kl;var uy=d(()=>{x5=y(require("styled-components"));wa();jl();Kl=(0,x5.default)(bi)`
  color: ${i=>i.theme.button.textPrimaryForeground};

  svg {
    color: ${i=>i.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&Eo}

  ${Li} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`});var v5,Ro;var dy=d(()=>{v5=y(require("styled-components"));wa();jl();Ro=(0,v5.default)(bi)`
  color: ${i=>i.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&Eo}

  ${Li} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${i=>i.theme.button.textSecondaryForeground};
  }
`});var bn,ZS;var C5=d(()=>{bn=y(require("react"));z();uy();dy();wp();Fb();Rb();ZS=class extends bn.default.Component{constructor(){super(...arguments);this.onDismiss=()=>{const{handleClose:t,handleDismiss:e}=this.props;if(t)t();if(e)e()};this.onConfirm=()=>{const{handleClose:t,handleConfirm:e}=this.props;if(t)t();if(e)e()}}render(){const{headerLabel:t,bodyLabel:e,confirmLabel:r,dismissLabel:o,type:n,children:s}=this.props;const a=bn.default.Children.toArray(s)[0];if(!bn.default.isValidElement(a))throw new Error("Child is not a valid react element");return bn.default.cloneElement(a,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:bn.default.createElement(Qu,null,t),body:bn.default.createElement(ds,{"data-test":U.DialogBody},e),footer:bn.default.createElement(Zu,{type:n},o&&bn.default.createElement(Ro,{label:o,ariaLabel:o,onClick:this.onDismiss}),r&&bn.default.createElement(Kl,{label:r,ariaLabel:r,onClick:this.onConfirm}))});return null}}});var Oo,Pp,iet,ret,oet,net,QS;var S5=d(()=>{Oo=y(require("react"));Pp=y(require("styled-components"));z();wp();Rb();xS();iet=Pp.default.div`
  display: flex;
`;ret=(0,Pp.default)(Qu)`
  padding: 0;
`;oet=Pp.default.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`;net=(0,Pp.default)(ds)`
  padding: 0;
  margin: 0;
`;QS=class extends Oo.default.PureComponent{render(){const{headerLabel:t,bodyLabel:e,children:r}=this.props;const o=Oo.default.Children.toArray(r)[0];if(!Oo.default.isValidElement(o))throw new Error("Child is not a valid react element");return Oo.default.cloneElement(o,{height:"90px",body:Oo.default.createElement(ds,{"data-test":U.DialogBody},Oo.default.createElement(iet,null,Oo.default.createElement(Ab,null),Oo.default.createElement(oet,null,Oo.default.createElement(ret,null,t),Oo.default.createElement(net,null,e))))});return null}}});var kr,ld,set,aet,cet,uet,det,t1,w5;var T5=d(()=>{kr=y(require("react"));ld=y(require("styled-components"));z();uy();dy();wp();Fb();Qb();set=ld.default.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`;aet=ld.default.textarea`
  display: flex;
  caret-color: ${i=>i.theme.primary};
  ${$l}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${i=>i.theme.modal.bodyForeground};
  resize: none;
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${i=>i.theme.primary};
    color: ${i=>i.theme.foreground};
  }
`;cet=ld.default.label`
  padding: 11px 20px 8px;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  color: ${i=>i.theme.modal.headerForeground};
`;uet=(0,ld.default)(ds)`
  height: 100%;
`;det=(0,ld.default)(Zu)`
  border-top: none;
`;t1=class extends kr.default.Component{constructor(){super(...arguments);this.state={value:""};this.input=kr.default.createRef();this.handleKeydown=t=>{nA(this.handleDismiss)(t)};this.handleDismiss=()=>{const{handleDismiss:t}=this.props;if(t)t(false)};this.handleConfirm=()=>{const{handleConfirm:t}=this.props;const{value:e}=this.input.current;if(e){if(t)t(e);this.handleDismiss()}};this.onChange=t=>{const{allowEmojis:e}=this.props;const r=e?t.target.value:HF(t.target.value);this.input.current.value=r;this.setState({value:r})};this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){const{text:t,defaultText:e}=this.props;this.input.current.focus();this.input.current.value=t||e||"";this.setState({value:this.input.current.value});document.addEventListener("keydown",this.handleKeydown,false);if(t===e){this.input.current.select()}}componentDidUpdate(t){const{isVisible:e}=this.props;if(t.isVisible!==e){if(e){this.input.current.focus()}}}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,false)}render(){const{headerLabel:t,dismissLabel:e,confirmLabel:r,maxLength:o,type:n,children:s}=this.props;const{value:a}=this.state;const l=kr.default.Children.toArray(s)[0];if(!kr.default.isValidElement(l))throw new Error("Child is not a valid react element");return kr.default.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!a,height:"150px",header:kr.default.createElement(cet,{htmlFor:"photoeditorsdk-TextInput"},t),body:kr.default.createElement(uet,null,kr.default.createElement(set,{onSubmit:this.onSubmit},kr.default.createElement(aet,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:true,onChange:this.onChange,maxLength:o}))),footer:kr.default.createElement(det,{type:n},kr.default.createElement(Ro,{label:e,ariaLabel:e,onClick:this.handleDismiss}),kr.default.createElement(Kl,{label:r,ariaLabel:r,isDisabled:!a,onClick:this.handleConfirm}))});return null}};t1.defaultProps={defaultText:"Write Something",allowEmojis:false};w5=t1});var k5,e1;var I5=d(()=>{k5=y(require("styled-components"));e1=k5.default.div`
  padding-bottom: ${i=>(i.count||1)*8}px;
`;e1.defaultProps={count:1}});var Xl,i1,my,py;var D5=d(()=>{Xl=y(require("react"));i1=class extends Xl.default.Component{getChildren(){const t=[];const e=[];Xl.default.Children.forEach(this.props.children,r=>{switch(r.type.componentName){case"case":if(this.props.type===r.props.value){t.push(r)}break;case"default":e.push(r);break}});if(t.length>0){return t}return e}render(){const t=this.getChildren();return t.length===0?null:Xl.default.createElement(Xl.default.Fragment,null,t)}};my=class extends Xl.default.Component{render(){return this.props.children}};my.componentName="case";py=class extends Xl.default.Component{render(){return this.props.children}};py.componentName="default"});var cd,met,pet,E5;var F5=d(()=>{cd=y(require("styled-components"));met=cd.keyframes`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`;pet=cd.default.div`
  position: absolute;
  top: ${i=>i.position.y}px;
  left: ${i=>i.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${i=>i.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:i})=>i&&cd.css`
      visibility: visible;
      animation: ${met} 0.5s, fadeout 0.5s 2.5s;
    `}
`;E5=pet});var ud,Qr,R5,het,O5,fet,A5,get,Ao;var Mp=d(()=>{ud=y(require("react"));Qr=y(require("styled-components"));Cr();wa();R5=Qr.css`
  display: flex;
  flex: 0 0 auto;
  justify-content: center;
  align-items: center;
  padding: 4px;
`;het=(0,Qr.default)(bi)`
  ${({fullWidth:i})=>i&&Qr.css`
      width: 100%;
    `}

  ${({hasIcon:i,smallContainer:t})=>i&&t&&R5}
  ${({hasIcon:i})=>i&&Qr.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        ${R5}
      }
    `}
`;O5=Qr.css`
  display: flex;
`;fet=Qr.default.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  ${i=>i.smallContainer&&O5}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${O5}
  }
`;A5=Qr.css`
  display: none;
`;get=Qr.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:i})=>i&&Qr.css`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}

  ${({hasIcon:i,smallContainer:t})=>i&&t&&A5}
  ${({hasIcon:i})=>i&&Qr.css`
      @media all and (min-width: 0) and (max-width: 599px) {
        ${A5}
      }
    `}
`;Ao=({label:i,children:t,icon:e,fullWidth:r,isDisabled:o,...n})=>{const{rect:s}=(0,ud.useContext)(Fe);const a=!!s&&s.width<600;const l=ud.default.createElement(get,{hasIcon:!!e,isDisabled:o,smallContainer:a},i,t);return ud.default.createElement(het,{fullWidth:r,isDisabled:o,hasIcon:!!e,smallContainer:a,...n},e&&ud.default.createElement(fet,{smallContainer:a},e),(t||i)&&l)}});var B5,Lp;var P5=d(()=>{B5=y(require("styled-components"));Mp();Lp=(0,B5.default)(Ao)`
  background: ${i=>i.theme.button.outlinedPrimaryBackground};
  color: ${i=>i.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${i=>i.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${i=>i.theme.button.outlinedPrimaryForeground};
  }
`});var M5,Da;var L5=d(()=>{M5=y(require("styled-components"));wa();Mp();Da=(0,M5.default)(Ao)`
  background: ${i=>i.theme.button.outlinedSecondaryBackground};
  color: ${i=>i.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${i=>i.theme.button.outlinedBorderColor};

  svg {
    color: ${i=>i.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:i})=>i&&Eo}
`});var r1,o1,bet,yet,ps;var z5=d(()=>{r1=y(require("react"));o1=y(require("styled-components"));wa();jl();bet=(0,o1.default)(bi)`
  color: ${i=>i.theme.foreground};

  svg {
    color: ${i=>i.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:i})=>i&&Eo}

  ${Li} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`;yet=o1.default.div`
  display: flex;
  &:focus {
    outline: none;
  }
`;ps=({label:i,icon:t,children:e,...r})=>r1.default.createElement(bet,{...r},r1.default.createElement(yet,null,t))});var U5,zp;var N5=d(()=>{U5=y(require("styled-components"));Mp();zp=(0,U5.default)(Ao)`
  background: ${i=>i.theme.button.containedPrimaryBackground};
  color: ${i=>i.theme.button.containedPrimaryForeground};
  border: 1px solid ${i=>i.theme.button.containedPrimaryBackground};

  &:active {
    color: ${i=>i.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${i=>i.theme.button.containedPrimaryForeground};

    &:active {
      color: ${i=>i.theme.button.containedPrimaryForeground};
    }
  }
`});var ql,Up,_et,xet,vet,Ir;var H5=d(()=>{ql=y(require("react"));Up=y(require("styled-components"));tC();jl();Yr();_et=()=>Up.css`
    animation: ${Mg} 0.2s linear;
  `;xet=Up.css`
  border: 1px solid ${i=>i.theme.card.activeBorderColor};
  ${RS} {
    background-color: ${i=>i.theme.card.activeOverlayColor};
  }
`;vet=Up.default.button.attrs(i=>{const t={};if(i.image){t.backgroundImage=`url(${i.image})`}return{style:t,...i.style}})`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${i=>i.theme.card.background};
  color: ${i=>i.theme.card.foreground};

  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  ${_et};
  animation-fill-mode: both;
  overflow: hidden;

  ${ui}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:i})=>i&&xet}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${Li} {
      background-color: ${i=>i.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${od} {
      background-color: ${i=>i.theme.card.hoverOverlayColor};
    }
  }
`;Ir=class extends ql.default.Component{constructor(){super(...arguments);this.state=jb;this.timeout=null;this.onKeyDown=t=>{if(t.key==="Space"||t.key==="Enter"){if(this.props.onClick){this.props.onClick()}}};this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect();const r=t.pageX-e.left;const o=t.pageY-e.top;if(this.state.display==="block"){this.setState({display:"none"},()=>{this.setRippleState(r,o)})}else{this.setRippleState(r,o)}this.props.onClick(t)};this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"});this.timeout=setTimeout(()=>{this.setState({display:"none"})},1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:t,label:e,role:r,"aria-label":o,"aria-expanded":n,isActive:s,isDisabled:a,image:l,style:c,className:u}=this.props;const{left:m,top:p,display:h}=this.state;return ql.default.createElement(vet,{role:r,"aria-expanded":n,isActive:s,"aria-label":o,"data-test":e,disabled:a,image:l,onClick:this.onClick,onKeyDown:this.onKeyDown,style:c,className:u},t,ql.default.createElement($b,{display:h,left:m,top:p}),ql.default.createElement(RS,null),ql.default.createElement(Li,null),ql.default.createElement(od,null))}};Ir.defaultProps={isActive:false}});var dd,Dr,Cet,wet,Tet,ket,Iet,Ce;var W5=d(()=>{dd=y(require("react"));Dr=y(require("styled-components"));z();Yr();Cet=Dr.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  ${i=>i.withBackground?Dr.css`
          color: ${i.theme.card.labelForeground};
        `:Dr.css`
          color: ${i.theme.card.foreground};
        `}
`;wet=Dr.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${i=>i.theme.shape.radiusMedium}px;
  left: 0;
  ${i=>i.withBackground?Dr.css`
          color: ${i.theme.card.labelForeground};
          height: 40px;
          background: ${i.theme.card.labelBackground};
        `:Dr.css`
          color: ${i.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`;Tet=Dr.default.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${i=>i.theme.card.labelForeground};
  ${i=>i.withBackground?Dr.css`
          border-top-color: ${i.theme.card.labelForeground};
        `:Dr.css`
          border-top-color: ${i.theme.card.foreground};
        `}
  transform: rotate(${i=>i.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`;ket=Dr.default.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`;Iet=Dr.default.div`
  ${Ju}
`;Ce=({children:i,className:t,caret:e,isActive:r,style:o,withBackground:n,hidden:s})=>{if(s){return dd.default.createElement(Iet,null,i)}const a=()=>dd.default.createElement(ket,null,dd.default.createElement(Tet,{"aria-hidden":true,rotation:r?180:0,withBackground:n}));return dd.default.createElement(wet,{className:t,withBackground:n,style:o},dd.default.createElement(Cet,{"data-test":U.CardLabel,withBackground:n},i,e&&a()))}});var G5,Yl;var V5=d(()=>{G5=y(require("styled-components"));z();Yl=G5.default.div.attrs(i=>({"data-test":U.CardAvatar,style:{backgroundImage:`url(${i.url})`}}))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`});var j5,n1,hy,s1;var $5=d(()=>{j5=i=>{const t=[];t[0]=requestAnimationFrame(()=>{t[1]=requestAnimationFrame(()=>{i()})});return t};n1=i=>{i.forEach(t=>cancelAnimationFrame(t))};hy=i=>{return!Number.isNaN(parseFloat(i))&&Number.isFinite(i)};s1=i=>{return typeof i==="string"&&i.search("%")===i.length-1&&hy(i.substr(0,i.length-1))}});var Np,a1,l1;var K5=d(()=>{Np=y(require("react"));$5();l1=(a1=class extends Np.default.Component{constructor(i){super(i);this.contentRef=null;this.contentRef=Np.default.createRef();this.animationFrameIDs=[];let t="auto";let e="visible";if(hy(i.height)){t=i.height<0||i.height==="0"?0:i.height;e="hidden"}else if(s1(i.height)){t=i.height==="0%"?0:i.height;e="hidden"}const r=typeof window!=="undefined";if(r&&window.matchMedia){this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches}this.state={height:t,overflow:e,shouldUseTransitions:false}}componentDidMount(){const{height:i}=this.state;if(this.contentRef.current&&this.contentRef.current.style){this.hideContent(i)}}componentDidUpdate(i,t){const{height:e}=this.props;const{duration:r,delay:o}=this.getTimings();if(this.contentRef.current&&e!==i.height){this.showContent(t.height);this.contentRef.current.style.overflow="hidden";const n=this.contentRef.current.offsetHeight;this.contentRef.current.style.overflow="";const s=r+o;let a=null;const l={height:null,overflow:"hidden"};const c=t.height==="auto";if(hy(e)){a=e<0||e==="0"?0:e;l.height=a}else if(s1(e)){a=e==="0%"?0:e;l.height=a}else{a=n;l.height="auto";l.overflow=null}if(c){l.height=a;a=n}this.setState({height:a,overflow:"hidden",shouldUseTransitions:!c});clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);if(c){n1(this.animationFrameIDs);this.animationFrameIDs=j5(()=>{this.setState({height:l.height,overflow:l.overflow,shouldUseTransitions:true})});this.animationClassesTimeoutID=setTimeout(()=>{this.setState({shouldUseTransitions:false});this.hideContent(l.height)},s)}else{this.timeoutID=setTimeout(()=>{this.setState({height:l.height,overflow:"visible",shouldUseTransitions:false});if(e!=="auto"){this.hideContent(a)}},s)}}}componentWillUnmount(){n1(this.animationFrameIDs);clearTimeout(this.timeoutID);clearTimeout(this.animationClassesTimeoutID);this.timeoutID=null}getTimings(){if(this.prefersReducedMotion){return{delay:0,duration:0}}const{delay:i,duration:t}=this.props;return{delay:i,duration:t}}showContent(i){if(i===0){this.contentRef.current.style.display=""}}hideContent(i){if(i===0){this.contentRef.current.style.display="none"}}render(){const{animateOpacity:i,children:t,className:e,easing:r}=this.props;const{height:o,overflow:n,shouldUseTransitions:s}=this.state;const{duration:a,delay:l}=this.getTimings();const c={height:o,overflow:n};if(s){c.transition=`height ${a}ms ${r} ${l}ms`;c.WebkitTransition=c.transition}const u={};if(i){u.transition=`opacity ${a}ms ${r} ${l}ms`;u.WebkitTransition=u.transition;if(o===0){u.opacity=0}}return Np.default.createElement("div",{"aria-hidden":o===0,className:e,style:c},Np.default.createElement("div",{style:u,ref:this.contentRef},t))}},a1.defaultProps={animateOpacity:false,duration:250,delay:0,easing:"ease"},a1)});var X5=d(()=>{K5()});var fy,q5,B;var et=d(()=>{tC();GA();JA();hS();vp();fS();gS();iB();bS();yS();wp();_S();Fb();Rb();xS();xB();ES();FB();PB();AS();BS();PS();XB();JB();t5();Ta();jS();o5();a5();_5();GS();C5();S5();T5();I5();Yr();D5();F5();jl();wa();Mp();P5();dy();uy();L5();z5();N5();H5();W5();V5();zS();X5();fy={Focused:ui,VisuallyHidden:Ju};q5={ripple:Pg,scale:JE,slide:Mg};B={Container:mS,ColorItem:YA,ColorItemBase:Sb,ColorItemBackground:vb,ColorItemTiledBackground:wb,ColorItemActiveOverlay:Cb,Dialog:eB,DialogBase:Ib,DialogContainer:Db,DialogBackdrop:Tb,DialogHeader:Qu,DialogBody:ds,DialogFooter:Zu,DialogSpinner:Ab,TextEditModal:w5,ActionModal:ZS,InfoModal:QS,Spacer:e1,Draggable:_B,DraggableCore:Vl,Toast:E5,Input:{Label:zi,File:YB,Search:r5,Slider:b5,SliderBase:oy,SliderContainer:ny,SliderInput:ay,SliderTrack:cy,SliderLabel:ly,CarouselSlider:EB,Selection:s5,Checkbox:BB,CheckboxBase:Xb,CheckboxInput:qb,CheckboxCheckMark:Ep,Dropdown:NS,Text:ey,NumericInput:iy,Form:QB},Switch:{Index:i1,Case:my,Default:py}}});var Y5,gy;var J5=d(()=>{Y5=y(require("styled-components"));et();gy=(0,Y5.default)(Ao)`
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  color: ${i=>i.theme.button.textSecondaryForeground};

  ${Li} {
    display: none;
  }

  &:disabled {
    opacity: ${i=>i.theme.button.textInactiveOpacity};
  }
`});var c1,u1,Det,Eet,Z5;var Q5=d(()=>{c1=y(require("react"));u1=y(require("styled-components"));et();Det=(0,u1.default)(bi)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${i=>i.theme.measurements.zIndex.button.float};
  padding: 2px;
`;Eet=u1.default.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${i=>i.theme.webcam.floatButton};
`;Z5=i=>{return c1.default.createElement(Det,{...i},c1.default.createElement(Eet,null))}});var Jl,tP,yn,Hp;var eP=d(()=>{Jl=y(require("styled-components"));et();tP=Jl.default.div`
  display: inline-flex;
`;yn=(0,Jl.default)(Ao)`
  background: ${i=>i.theme.canvasActionBar.background};
  color: ${i=>i.theme.canvasActionBar.foreground};
  font-size: ${i=>i.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`;Hp=Jl.default.div`
  ${({show:i})=>i?Jl.css`
          opacity: 1;
        `:Jl.css`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${i=>i.theme.canvasActionBar.background};
  color: ${i=>i.theme.canvasActionBar.foreground};
  border-radius: ${i=>i.theme.canvasActionBar.borderRadius?i.theme.canvasActionBar.borderRadius:i.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${i=>i.theme.measurements.zIndex.buttonGroup};

  ${yn} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${i=>i.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`});var by=d(()=>{J5();Q5();eP()});function I(){return(0,iP.useContext)(Qm)}var iP;var H=d(()=>{iP=require("react");A()});var hs,Fet,rP;var oP=d(()=>{hs=y(require("react"));Fet=()=>hs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},hs.default.createElement("defs",null,hs.default.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),hs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hs.default.createElement("path",{d:"M0 0H48V48H0z"}),hs.default.createElement("mask",{fill:"currentColor"},hs.default.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),hs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));rP=Fet});var Ea,Ret,nP;var sP=d(()=>{Ea=y(require("react"));Ret=()=>Ea.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ea.default.createElement("defs",null,Ea.default.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Ea.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ea.default.createElement("mask",null,Ea.default.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Ea.default.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));nP=Ret});var fs,Oet,aP;var lP=d(()=>{fs=y(require("react"));Oet=()=>fs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},fs.default.createElement("defs",null,fs.default.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),fs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},fs.default.createElement("path",{d:"M0 0H48V48H0z"}),fs.default.createElement("mask",{fill:"currentColor"},fs.default.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),fs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));aP=Oet});var gs,Aet,cP;var uP=d(()=>{gs=y(require("react"));Aet=()=>gs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},gs.default.createElement("defs",null,gs.default.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),gs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},gs.default.createElement("path",{d:"M0 0H48V48H0z"}),gs.default.createElement("mask",{fill:"currentColor"},gs.default.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),gs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));cP=Aet});var bs,Bet,dP;var mP=d(()=>{bs=y(require("react"));Bet=()=>bs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},bs.default.createElement("defs",null,bs.default.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),bs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},bs.default.createElement("path",{d:"M0 0H48V48H0z"}),bs.default.createElement("mask",{fill:"currentColor"},bs.default.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),bs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));dP=Bet});var ys,Pet,pP;var hP=d(()=>{ys=y(require("react"));Pet=()=>ys.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ys.default.createElement("defs",null,ys.default.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),ys.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ys.default.createElement("path",{d:"M0 0H48V48H0z"}),ys.default.createElement("mask",{fill:"#fff"},ys.default.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),ys.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));pP=Pet});var _s,Met,fP;var gP=d(()=>{_s=y(require("react"));Met=()=>_s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},_s.default.createElement("defs",null,_s.default.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),_s.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_s.default.createElement("path",{d:"M0 0H48V48H0z"}),_s.default.createElement("mask",{fill:"currentColor"},_s.default.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),_s.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));fP=Met});var xs,Let,bP;var yP=d(()=>{xs=y(require("react"));Let=()=>xs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},xs.default.createElement("defs",null,xs.default.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),xs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xs.default.createElement("path",{d:"M0 0H48V48H0z"}),xs.default.createElement("mask",{fill:"currentColor"},xs.default.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),xs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));bP=Let});var vs,zet,_P;var xP=d(()=>{vs=y(require("react"));zet=()=>vs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},vs.default.createElement("defs",null,vs.default.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),vs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},vs.default.createElement("path",{d:"M0 0H48V48H0z"}),vs.default.createElement("mask",{fill:"currentColor"},vs.default.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),vs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));_P=zet});var Cs,Uet,vP;var CP=d(()=>{Cs=y(require("react"));Uet=()=>Cs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Cs.default.createElement("defs",null,Cs.default.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),Cs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Cs.default.createElement("path",{d:"M0 0H48V48H0z"}),Cs.default.createElement("mask",{fill:"currentColor"},Cs.default.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),Cs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));vP=Uet});var Ss,Net,SP;var wP=d(()=>{Ss=y(require("react"));Net=()=>Ss.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Ss.default.createElement("defs",null,Ss.default.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),Ss.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ss.default.createElement("path",{d:"M0 0H48V48H0z"}),Ss.default.createElement("mask",{fill:"currentColor"},Ss.default.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),Ss.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));SP=Net});var ws,Het,TP;var kP=d(()=>{ws=y(require("react"));Het=()=>ws.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},ws.default.createElement("defs",null,ws.default.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),ws.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ws.default.createElement("path",{d:"M0 0H48V48H0z"}),ws.default.createElement("mask",{fill:"currentColor"},ws.default.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),ws.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));TP=Het});var Fa,Wet,IP;var DP=d(()=>{Fa=y(require("react"));Wet=()=>Fa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Fa.default.createElement("defs",null,Fa.default.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Fa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Fa.default.createElement("mask",{fill:"currentColor"},Fa.default.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Fa.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));IP=Wet});function Get(){return Ra.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ra.default.createElement("defs",null,Ra.default.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Ra.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ra.default.createElement("mask",{fill:"#fff"},Ra.default.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Ra.default.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))}var Ra,EP;var FP=d(()=>{Ra=y(require("react"));EP=Get});var Oa,Vet,RP;var OP=d(()=>{Oa=y(require("react"));Vet=()=>Oa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Oa.default.createElement("defs",null,Oa.default.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Oa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Oa.default.createElement("mask",{fill:"currentColor"},Oa.default.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Oa.default.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));RP=Vet});var Aa,jet,AP;var BP=d(()=>{Aa=y(require("react"));jet=()=>Aa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Aa.default.createElement("defs",null,Aa.default.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Aa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Aa.default.createElement("mask",{fill:"currentColor"},Aa.default.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Aa.default.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));AP=jet});function $et(){return Ba.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Ba.default.createElement("defs",null,Ba.default.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ba.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ba.default.createElement("mask",{fill:"#fff"},Ba.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Ba.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}var Ba,PP;var MP=d(()=>{Ba=y(require("react"));PP=$et});var Pa,Ket,LP;var zP=d(()=>{Pa=y(require("react"));Ket=()=>{return Pa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Pa.default.createElement("defs",null,Pa.default.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Pa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Pa.default.createElement("mask",{fill:"#fff"},Pa.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Pa.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))};LP=Ket});function Xet(){return Ts.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},Ts.default.createElement("defs",null,Ts.default.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Ts.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ts.default.createElement("path",{d:"M0 0H48V48H0z"}),Ts.default.createElement("mask",{fill:"#fff"},Ts.default.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),Ts.default.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))}var Ts,UP;var NP=d(()=>{Ts=y(require("react"));UP=Xet});var yi,qet,HP;var WP=d(()=>{yi=y(require("react"));qet=()=>yi.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},yi.default.createElement("g",{fill:"none",fillRule:"evenodd"},yi.default.createElement("g",null,yi.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},yi.default.createElement("rect",{width:"48",height:"48"})),yi.default.createElement("g",{transform:"translate(12 12)"},yi.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),yi.default.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},yi.default.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),yi.default.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),yi.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),yi.default.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},yi.default.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),yi.default.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},yi.default.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),yi.default.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));HP=qet});function Yet(){return Ma.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Ma.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ma.default.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),Ma.default.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),Ma.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Ma.default.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Ma.default.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}var Ma,GP;var VP=d(()=>{Ma=y(require("react"));GP=Yet});var Bo,Jet,jP;var $P=d(()=>{Bo=y(require("react"));Jet=()=>Bo.default.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement("g",{fill:"none",fillRule:"evenodd"},Bo.default.createElement("g",null,Bo.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},Bo.default.createElement("rect",{width:"48",height:"48"})),Bo.default.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Bo.default.createElement("g",null,Bo.default.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Bo.default.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Bo.default.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));jP=Jet});var to,Zet,KP;var XP=d(()=>{to=y(require("react"));Zet=()=>to.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},to.default.createElement("g",{fill:"none",fillRule:"evenodd"},to.default.createElement("g",null,to.default.createElement("g",{fill:"#D8D8D8",opacity:"0"},to.default.createElement("rect",{width:"48",height:"48"})),to.default.createElement("g",{transform:"translate(12 12)"},to.default.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),to.default.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},to.default.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),to.default.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),to.default.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));KP=Zet});var Zl,Qet,qP;var YP=d(()=>{Zl=y(require("react"));Qet=()=>Zl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Zl.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Zl.default.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Zl.default.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Zl.default.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Zl.default.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));qP=Qet});var Er,tit,JP;var ZP=d(()=>{Er=y(require("react"));tit=()=>Er.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Er.default.createElement("g",{fill:"none",fillRule:"evenodd"},Er.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Er.default.createElement("g",null,Er.default.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),Er.default.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),Er.default.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),Er.default.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),Er.default.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),Er.default.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},Er.default.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),Er.default.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));JP=tit});var md,eit,QP;var tM=d(()=>{md=y(require("react"));eit=()=>md.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},md.default.createElement("g",{fill:"none",fillRule:"evenodd"},md.default.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},md.default.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),md.default.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));QP=eit});var _n,iit,eM;var iM=d(()=>{_n=y(require("react"));iit=()=>_n.default.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},_n.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},_n.default.createElement("g",null,_n.default.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},_n.default.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},_n.default.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),_n.default.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),_n.default.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),_n.default.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));eM=iit});var pd,rit,rM;var oM=d(()=>{pd=y(require("react"));rit=()=>{return pd.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},pd.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},pd.default.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),pd.default.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),pd.default.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))};rM=rit});var hd,oit,nM;var sM=d(()=>{hd=y(require("react"));oit=()=>{return hd.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},hd.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},hd.default.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),hd.default.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),hd.default.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))};nM=oit});function nit(){return La.default.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},La.default.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},La.default.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),La.default.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),La.default.createElement("g",{fillOpacity:"0.2"},La.default.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),La.default.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))}var La,aM;var lM=d(()=>{La=y(require("react"));aM=nit});var za,sit,cM;var uM=d(()=>{za=y(require("react"));sit=()=>za.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},za.default.createElement("defs",null,za.default.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),za.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},za.default.createElement("mask",{fill:"currentColor"},za.default.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),za.default.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));cM=sit});var d1,ait,dM;var mM=d(()=>{d1=y(require("react"));ait=()=>d1.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},d1.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));dM=ait});var m1,lit,pM;var hM=d(()=>{m1=y(require("react"));lit=()=>m1.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},m1.default.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));pM=lit});function cit(){return Ua.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ua.default.createElement("defs",null,Ua.default.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),Ua.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ua.default.createElement("mask",{fill:"currentColor"},Ua.default.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),Ua.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))}var Ua,fM;var gM=d(()=>{Ua=y(require("react"));fM=cit});var Na,uit,bM;var yM=d(()=>{Na=y(require("react"));uit=()=>Na.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Na.default.createElement("defs",null,Na.default.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Na.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Na.default.createElement("mask",{fill:"currentColor"},Na.default.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Na.default.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));bM=uit});var ks,dit,_M;var xM=d(()=>{ks=y(require("react"));dit=()=>ks.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},ks.default.createElement("defs",null,ks.default.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),ks.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},ks.default.createElement("path",{d:"M0 0H24V24H0z"}),ks.default.createElement("mask",{fill:"currentColor"},ks.default.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),ks.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));_M=dit});var Ye,mit,vM;var CM=d(()=>{Ye=y(require("react"));mit=({highlight:i="currentColor",width:t=48,height:e=48})=>Ye.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},Ye.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ye.default.createElement("g",{fill:i,transform:"translate(13 13)"},Ye.default.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),Ye.default.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),Ye.default.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),Ye.default.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),Ye.default.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),Ye.default.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),Ye.default.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),Ye.default.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),Ye.default.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),Ye.default.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),Ye.default.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),Ye.default.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),Ye.default.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),Ye.default.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),Ye.default.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),Ye.default.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));vM=mit});var yy,pit,SM;var wM=d(()=>{yy=y(require("react"));pit=({highlight:i="currentColor",width:t=48,height:e=48})=>yy.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},yy.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},yy.default.createElement("path",{fill:i,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));SM=pit});var Ql,hit,TM;var kM=d(()=>{Ql=y(require("react"));hit=({highlight:i="currentColor",width:t=48,height:e=48})=>Ql.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},Ql.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ql.default.createElement("g",{fill:i,transform:"translate(13 13)"},Ql.default.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),Ql.default.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),Ql.default.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));TM=hit});var _y,fit,IM;var DM=d(()=>{_y=y(require("react"));fit=({highlight:i="currentColor",width:t=48,height:e=48})=>_y.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,viewBox:"0 0 48 48"},_y.default.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},_y.default.createElement("path",{fill:i,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));IM=fit});var EM,git,Ui;var Ha=d(()=>{EM=y(require("styled-components"));git=EM.default.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;Ui=git});var re,bit,FM;var RM=d(()=>{re=y(require("react"));Ha();bit=({highlight:i="#565656",width:t=32,height:e=32})=>re.default.createElement(Ui,{width:t,height:e,viewBox:"0 0 32 32"},re.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},re.default.createElement("g",{fill:i,transform:"translate(-8 -8)"},re.default.createElement("g",{transform:"translate(8 8)"},re.default.createElement("g",null,re.default.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),re.default.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),re.default.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),re.default.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),re.default.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),re.default.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),re.default.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),re.default.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),re.default.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),re.default.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),re.default.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),re.default.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),re.default.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),re.default.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),re.default.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),re.default.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),re.default.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),re.default.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),re.default.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),re.default.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),re.default.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),re.default.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),re.default.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),re.default.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));FM=bit});var Wp,yit,OM;var AM=d(()=>{Wp=y(require("react"));Ha();yit=({highlight:i="#565656",width:t=32,height:e=48})=>Wp.default.createElement(Ui,{width:t,height:e,viewBox:"0 0 42 32"},Wp.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wp.default.createElement("g",{fill:i,transform:"translate(-3 -8)"},Wp.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));OM=yit});var Gp,_it,BM;var PM=d(()=>{Gp=y(require("react"));Ha();_it=({highlight:i="#565656",width:t=26,height:e=46})=>Gp.default.createElement(Ui,{width:t,height:e,viewBox:"0 0 26 46"},Gp.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Gp.default.createElement("g",{fill:i,transform:"translate(-11 -1)"},Gp.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));BM=_it});var Vp,xit,MM;var LM=d(()=>{Vp=y(require("react"));Ha();xit=({highlight:i="#565656",width:t=26,height:e=46})=>Vp.default.createElement(Ui,{width:t,height:e,viewBox:"0 0 26 46"},Vp.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Vp.default.createElement("g",{fill:i,transform:"translate(-11 -1)"},Vp.default.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));MM=xit});var xn,vit,zM;var UM=d(()=>{xn=y(require("react"));Ha();vit=({highlight:i="#565656",mask:t="#fff",width:e=32,height:r=32})=>xn.default.createElement(Ui,{width:e,height:r,viewBox:"0 0 32 32"},xn.default.createElement("defs",null,xn.default.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),xn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},xn.default.createElement("g",{transform:"translate(-8 -8)"},xn.default.createElement("g",{transform:"translate(7.08 7.293)"},xn.default.createElement("mask",{fill:t},xn.default.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),xn.default.createElement("use",{fill:i,xlinkHref:"#photoeditorsdk-square-icon"})))));zM=vit});var jp,Cit,NM;var HM=d(()=>{jp=y(require("react"));Ha();Cit=({highlight:i="#565656",width:t=32,height:e=42})=>jp.default.createElement(Ui,{width:t,height:e,viewBox:"0 0 32 42"},jp.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},jp.default.createElement("g",{fill:i,transform:"translate(-8 -3)"},jp.default.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));NM=Cit});var vn,Sit,WM;var GM=d(()=>{vn=y(require("react"));Sit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>vn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},vn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},vn.default.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),vn.default.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),vn.default.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),vn.default.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),vn.default.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:i,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),vn.default.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:i,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),vn.default.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:i,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));WM=Sit});var Cn,wit,VM;var jM=d(()=>{Cn=y(require("react"));wit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Cn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Cn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Cn.default.createElement("g",null,Cn.default.createElement("path",{fill:i,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Cn.default.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:i,rx:"1"}),Cn.default.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:i,rx:"1"}),Cn.default.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:i,rx:"1"}),Cn.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}),Cn.default.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:i,rx:"1"}))));VM=wit});var Sn,Tit,$M;var KM=d(()=>{Sn=y(require("react"));Tit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Sn.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Sn.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Sn.default.createElement("g",{transform:"translate(5 5)"},Sn.default.createElement("path",{fill:t,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Sn.default.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:i,rx:"1"}),Sn.default.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:i,rx:"1"}),Sn.default.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:i,rx:"1"}),Sn.default.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:i,rx:"1"}),Sn.default.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:i,rx:"1"}))));$M=Tit});var Is,kit,XM;var qM=d(()=>{Is=y(require("react"));kit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Is.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Is.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Is.default.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:i,rx:"1"}),Is.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),Is.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),Is.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),Is.default.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:i,rx:"1"}),Is.default.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:t,rx:"1"})));XM=kit});var Ds,Iit,YM;var JM=d(()=>{Ds=y(require("react"));Iit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Ds.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Ds.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ds.default.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:i,rx:"1"}),Ds.default.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:t,rx:"1"}),Ds.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),Ds.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),Ds.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),Ds.default.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:i,rx:"1"})));YM=Iit});var Es,Dit,ZM;var QM=d(()=>{Es=y(require("react"));Dit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Es.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Es.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Es.default.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:i,rx:"1"}),Es.default.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:t,rx:"1"}),Es.default.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:i,rx:"1"}),Es.default.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:i,rx:"1"}),Es.default.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:i,rx:"1"}),Es.default.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:i,rx:"1"})));ZM=Dit});var $p,Eit,tL;var eL=d(()=>{$p=y(require("react"));Eit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>$p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},$p.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},$p.default.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:t,rx:"1.5"}),$p.default.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:i,rx:"1"})));tL=Eit});var Ni,Fit,iL;var rL=d(()=>{Ni=y(require("react"));Fit=({main:i="#424242",highlight:t="#565656",shadow:e="#333333",width:r="48px",height:o="48px"})=>Ni.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:o,viewBox:"0 0 48 48"},Ni.default.createElement("defs",null,Ni.default.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},Ni.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),Ni.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ni.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),Ni.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),Ni.default.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:e,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),Ni.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"})));iL=Fit});var Po,Rit,oL;var nL=d(()=>{Po=y(require("react"));Rit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Po.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Po.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Po.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),Po.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));oL=Rit});var Mo,Oit,sL;var aL=d(()=>{Mo=y(require("react"));Oit=({main:i="#424242",highlight:t="#565656",width:e="48px",height:r="48px"})=>Mo.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r,viewBox:"0 0 48 48"},Mo.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Mo.default.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),Mo.default.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:i,rx:"0.5"}),Mo.default.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"})));sL=Oit});var Wa,Ait,lL;var cL=d(()=>{Wa=y(require("react"));Ait=()=>Wa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Wa.default.createElement("defs",null,Wa.default.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Wa.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Wa.default.createElement("mask",{fill:"currentColor"},Wa.default.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Wa.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));lL=Ait});var Fr,Bit,uL;var dL=d(()=>{Fr=y(require("react"));Bit=({height:i=3,width:t=102,x:e=-102,className:r,style:o})=>Fr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:i,viewBox:"0 0 102 3",className:r,style:o},Fr.default.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},Fr.default.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),Fr.default.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),Fr.default.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:-t*1.5,y:"0",width:t*4,height:"3",transform:`translate(${e}, 0)`}));uL=Bit});var Ga,Pit,mL;var pL=d(()=>{Ga=y(require("react"));Pit=()=>Ga.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Ga.default.createElement("defs",null,Ga.default.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Ga.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Ga.default.createElement("mask",{fill:"currentColor"},Ga.default.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Ga.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));mL=Pit});var p1,Mit,hL;var fL=d(()=>{p1=y(require("react"));Mit=()=>p1.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},p1.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));hL=Mit});var Fs,Lit,gL;var bL=d(()=>{Fs=y(require("react"));Lit=({className:i})=>Fs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:i},Fs.default.createElement("title",null,"Flip Horizontal"),Fs.default.createElement("defs",null,Fs.default.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Fs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Fs.default.createElement("mask",{fill:"none"},Fs.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),Fs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));gL=Lit});var Rs,zit,yL;var _L=d(()=>{Rs=y(require("react"));zit=({className:i})=>Rs.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:i},Rs.default.createElement("title",null,"Flip Vertical"),Rs.default.createElement("defs",null,Rs.default.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Rs.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Rs.default.createElement("mask",{fill:"none"},Rs.default.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),Rs.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));yL=zit});var Os,Uit,xL;var vL=d(()=>{Os=y(require("react"));Uit=({alt:i="Rotate",className:t})=>Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:t},Os.default.createElement("title",null,i),Os.default.createElement("defs",null,Os.default.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),Os.default.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},Os.default.createElement("mask",{fill:"none"},Os.default.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),Os.default.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));xL=Uit});var xy,vy,Re,Kp,Gt,CL;var Se=d(()=>{R();oP();sP();lP();uP();mP();hP();gP();yP();xP();CP();wP();kP();DP();FP();OP();BP();MP();zP();NP();WP();VP();$P();XP();YP();ZP();tM();iM();oM();sM();lM();uM();mM();hM();gM();yM();xM();CM();wM();kM();DM();Ha();RM();AM();PM();LM();UM();HM();GM();jM();KM();qM();JM();QM();eL();rL();nL();aL();cL();dL();pL();fL();bL();_L();vL();xy={["adjustment"]:HP,["filter"]:jP,["library"]:JP,["overlay"]:QP,["focus"]:KP,["sticker"]:eM,["text"]:rM,["textdesign"]:nM,["frame"]:qP,["transform"]:aM,["brush"]:GP};vy={left:LP,right:UP,center:PP};Re={addText:cM,openWebcam:dM,reset:pM,shuffle:fM,uploadImage:bM};Kp={undo:AP,redo:RP,close:IP,export:EP};Gt={categories:{["imgly_transforms_common"]:vM,["imgly_transforms_facebook"]:SM,["imgly_transforms_twitter"]:IM,["imgly_transforms_instagram"]:TM},crops:{["imgly_transform_common_custom"]:FM,["imgly_transform_common_square"]:zM,["imgly_transform_common_3"]:NM,["imgly_transform_common_4"]:OM,["imgly_transform_common_9"]:BM,["imgly_transform_common_16"]:MM,["imgly_transform_facebook_post"]:WM,["imgly_transform_facebook_profile"]:VM,["imgly_transform_facebook_title"]:$M,["imgly_transform_instagram_landscape"]:XM,["imgly_transform_instagram_portrait"]:YM,["imgly_transform_instagram_square"]:ZM,["imgly_transform_instagram_story"]:tL,["imgly_transform_twitter_post"]:iL,["imgly_transform_twitter_profile"]:oL,["imgly_transform_twitter_title"]:sL},dots:uL,duplicate:mL,edit:hL,bringToFront:_M,delete:lL,flipHorizontal:gL,flipVertical:yL,rotate:xL};CL={["brightness"]:nP,["contrast"]:cP,["saturation"]:bP,["clarity"]:aP,["shadows"]:_P,["highlights"]:fP,["exposure"]:dP,["gamma"]:pP,["blacks"]:rP,["whites"]:TP,["temperature"]:SP,["sharpness"]:vP}});var SL,wL,Nit,Va;var h1=d(()=>{SL=y(require("react"));wL=y(require("styled-components"));H();Nit=wL.default.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
  max-width: calc(100% - ${i=>i.maxWidth}px);
`;Va=({children:i})=>{const{config:t}=I();let e=0;if(t.isLayoutAdvanced){e=t.measurements.advancedUIToolbar.width+t.measurements.advancedUIToolControlBar.width}return SL.default.createElement(Nit,{maxWidth:e},i)}});var Xp,TL;var kL=d(()=>{Xp=y(require("styled-components"));z();TL=Xp.default.div.attrs(()=>({"data-test":U.MainCanvasActionBar}))`
  &&& {
    display: ${i=>i.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${i=>i.theme.measurements.mainCanvasActionBar.height}px;
    color: ${i=>i.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${i=>i.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${i=>i.theme.measurements.zIndex.canvas.bar};
    background: ${i=>i.transparentBackgound?"transparent":i.theme.mainCanvasActionBar.background};
    ${i=>i.bottom?Xp.css`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:Xp.css`
            justify-content: space-between;
          `}
  }
`});var IL,DL;var EL=d(()=>{IL=y(require("styled-components"));DL=IL.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var FL,RL;var OL=d(()=>{FL=y(require("styled-components"));RL=FL.default.div.attrs({role:"main"})`
  background-color: ${i=>i.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${i=>i.theme.measurements.canvas.marginTop}px;
`});var AL,BL;var PL=d(()=>{AL=y(require("styled-components"));BL=AL.default.div.attrs(({height:i,width:t})=>({style:{height:`${i}px`,width:`${t}px`}}))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${i=>i.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`});var ML,LL;var zL=d(()=>{ML=y(require("styled-components"));LL=ML.default.div.attrs(({radius:i})=>({style:{height:`${i*2}px`,width:`${i*2}px`}}))`
  border-radius: 50%;
  border: 2px solid ${i=>i.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`});var UL,NL;var HL=d(()=>{UL=y(require("styled-components"));NL=UL.default.div`
  position: relative;
  height: inherit;
  width: inherit;
`});var ge,Hit,Cy;var f1=d(()=>{ge=y(require("styled-components"));Hit=ge.default.div(i=>{const{desktop:t,mobile:e}=i.theme.measurements.canvasControls.corner.touchable;const r=t/4;const o=e/2;return ge.css`
    position: absolute;
    width: ${t}px;
    height: ${t}px;
    ${n=>n.vertical==="top"?ge.css`
            top: 0px;
          `:ge.css`
            bottom: 0px;
          `}
    ${n=>n.horizontal==="left"?ge.css`
            left: 0px;
          `:ge.css`
            right: 0px;
          `}
  ${n=>n.vertical==="top"?ge.css`
            margin-top: -${r}px;
          `:ge.css`
            margin-bottom: -${r}px;
          `}
  ${n=>n.horizontal==="left"?ge.css`
            margin-left: -${r}px;
          `:ge.css`
            margin-right: -${r}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${e}px;
      height: ${e}px;
      ${n=>n.vertical==="top"?ge.css`
              margin-top: -${o}px;
            `:ge.css`
              margin-bottom: -${o}px;
            `}
      ${n=>n.horizontal==="left"?ge.css`
              margin-left: -${o}px;
            `:ge.css`
              margin-right: -${o}px;
            `}
    }
  `});Cy=(0,ge.default)(Hit)(i=>{const t=i.horizontal==="right"?i.borderWidth:0;const e=i.vertical==="bottom"?i.borderWidth:0;const r=i.horizontal==="left"?i.borderWidth:0;const o=i.vertical==="top"?i.borderWidth:0;const n=`${o}px ${t}px ${e}px ${r}px`;const s=i.horizontal==="left"&&i.vertical==="bottom"||i.horizontal==="right"&&i.vertical==="top"?"nesw-resize":"nwse-resize";const a=i.theme.measurements.canvasControls.corner.touchable.desktop/4-i.borderWidth;const l=i.theme.measurements.canvasControls.corner.touchable.mobile/4+i.borderWidth;return ge.css`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      height: ${c=>c.theme.measurements.canvasControls.corner.size}px;
      z-index: ${c=>c.theme.measurements.zIndex.canvas.controls};
      border-color: ${c=>c.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${i.vertical==="top"?ge.css`
            top: ${a}px;
          `:ge.css`
            bottom: ${a}px;
          `}
      ${i.horizontal==="left"?ge.css`
            left: ${a}px;
          `:ge.css`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${i.vertical==="top"?ge.css`
              margin-top: ${l}px;
            `:ge.css`
              margin-bottom: ${l}px;
            `}
        ${i.horizontal==="left"?ge.css`
              margin-left: ${l}px;
            `:ge.css`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `})});var WL,GL;var VL=d(()=>{WL=y(require("styled-components"));z();GL=WL.default.div.attrs(()=>({"data-test":U.Knob}))`
  position: absolute;
  height: ${i=>i.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${i=>i.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${i=>i.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${i=>i.theme.measurements.canvasControls.knob.size}px;
    height: ${i=>i.theme.measurements.canvasControls.knob.size}px;
    top: ${i=>i.theme.measurements.canvasControls.knob.size/4}px;
    left: ${i=>i.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`});var jL,$L;var KL=d(()=>{jL=y(require("styled-components"));$L=jL.default.div`
  position: absolute;
  color: ${i=>i.theme.canvas.controlsOutline};
`});var XL,qL;var YL=d(()=>{XL=y(require("styled-components"));qL=XL.default.div.attrs(i=>({style:{left:`${i.x}px`}}))`
  position: absolute;
  bottom: -${i=>i.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${i=>i.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${i=>i.theme.canvas.controlsOutline};
`});var JL,ZL;var QL=d(()=>{JL=y(require("styled-components"));ZL=JL.default.div.attrs(({height:i,width:t,theme:e})=>({style:{height:`${i+e.measurements.canvasControls.sprite.controlPadding}px`,width:`${t+e.measurements.canvasControls.sprite.controlPadding}px`}}))`
  left: -${i=>i.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${i=>i.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${i=>i.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`});var t4,e4;var i4=d(()=>{t4=y(require("styled-components"));z();e4=t4.default.div.attrs(()=>({"data-test":U.TextWidth}))`
  position: absolute;
  height: ${i=>i.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.controls};
  background: ${i=>i.theme.canvas.controlsColor};
  cursor: pointer;
`});var r4,o4;var n4=d(()=>{r4=y(require("styled-components"));o4=r4.default.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${i=>i.height}px;
  width: ${i=>i.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`});var ja,Sy,s4,a4,l4,tc;var g1=d(()=>{ja=y(require("styled-components"));z();f1();Sy=zF()?ja.css`
      transition: unset;
    `:ja.css`
      transition: all 0.4s ease-in-out;
    `;s4=ja.default.div`
  position: absolute;
  background: ${i=>i.theme.canvas.cropBackdrop};
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.backdrop};
  ${Sy}
`;a4=ja.default.div.attrs({"data-test":U.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${i=>i.theme.canvas.controlsOutline};
  cursor: move;
  ${Sy}
`;l4=ja.default.div`
  position: absolute;
  background: ${i=>i.theme.canvas.controlsOutline};
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.grid};
  ${Sy}
`;tc=(0,ja.default)(Cy)`
  z-index: ${i=>i.theme.measurements.zIndex.canvas.controls};
  ${Sy};
`});var c4,u4;var d4=d(()=>{c4=y(require("styled-components"));u4=c4.default.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`});var m4,p4;var h4=d(()=>{m4=y(require("styled-components"));p4=m4.default.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`});var f4,g4;var b4=d(()=>{f4=y(require("styled-components"));g4=f4.default.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${i=>i.theme.webcam.background};
`});var dt;var je=d(()=>{by();h1();kL();EL();OL();PL();zL();HL();f1();VL();KL();YL();QL();i4();n4();g1();d4();h4();b4();dt={Index:DL,Area:Va,Bar:{Index:TL,ButtonGroup:tP},Button:{TextSecondary:gy,Float:Z5},Container:RL,Element:u4,Wrapper:g4,Webcam:p4,Controls:{Knob:GL,Circle:LL,Corner:Cy,Line:$L,Area:BL,Sprite:ZL,RotateHandle:qL,Container:NL,Wrapper:o4,SpriteActionsWrapper:Hp,SpriteActionButton:yn,Width:e4},Crop:{Mask:a4,GridLine:l4,Backdrop:s4,Control:tc}}});var er={};ue(er,{FragmentPrecision:()=>wy,ImageFormat:()=>ec,OptionType:()=>$,RenderType:()=>Rr,RendererType:()=>$e,UniformType:()=>ae});var Rr,ec,$,ae,$e,wy;var Or=d(()=>{Rr={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"};ec={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"};$=(h=>{h["NUMBER"]="number";h["VECTOR2"]="vector2";h["COLOR_MATRIX"]="color-matrix";h["COLOR"]="color";h["ARRAY"]="array";h["OBJECT"]="object";h["STRING"]="string";h["BOOLEAN"]="boolean";h["CONFIGURABLE"]="configurable";h["IMAGE"]="image";h["FUNCTION"]="function";h["TEXTURE"]="texture";h["ALL"]="*";return h})($||{});ae=(_=>{_["SAMPLER2D"]="sampler2d";_["INT"]="i";_["INT1"]="1i";_["INT2"]="2i";_["INT3"]="3i";_["INT4"]="4i";_["FLOAT"]="f";_["FLOAT1"]="1f";_["FLOAT2"]="2f";_["FLOAT_VECTOR2"]="2fv";_["FLOAT3"]="3f";_["FLOAT4"]="4f";_["MAT3"]="mat3";_["MAT3FV"]="mat3fv";_["MAT4"]="mat4";return _})(ae||{});$e=(e=>{e["WEBGL"]="webgl";e["CANVAS"]="canvas";return e})($e||{});wy=(r=>{r["High"]="highp";r["Medium"]="mediump";r["Low"]="lowp";return r})(wy||{})});var qp,y4;var _4=d(()=>{qp=()=>document.createElement("canvas");y4=(i,t)=>{const e=t||qp();e.width=i.width;e.height=i.height;const r=e.getContext("2d");if(!r){throw new Error("Cannot render context")}r.clearRect(0,0,e.width,e.height);r.drawImage(i,0,0,i.width,i.height);return e}});var fd;var b1=d(()=>{fd=class{constructor(t,e,r){this.width=t;this.height=e;this.data=r}}});var x4={};ue(x4,{glGet:()=>Ty,webUtils:()=>jit});var Ty,Wit,Git,Vit,jit;var v4=d(()=>{_4();wo();b1();Ty=i=>{const t={preserveDrawingBuffer:true};return i.getContext("webgl",t)||i.getContext("experimental-webgl",t)};Wit=()=>{const i=qp();const t=Ty(i);const e=t.getParameter(t.MAX_TEXTURE_SIZE);const r=t.getExtension("WEBGL_lose_context");if(r){r.loseContext()}jt(i);return e};Git=(i,t)=>{if(t instanceof fd){i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width,t.height,0,i.RGBA,i.UNSIGNED_BYTE,t.data)}else{const e=y4(t);i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e);jt(e)}};Vit=i=>Boolean(i.tagName&&i.tagName.toUpperCase()==="IMG");jit={isSupported:()=>Boolean(Ty(qp())),isCanvas:i=>i.constructor.name==="Canvas"||Boolean(i.tagName&&i.tagName.toUpperCase()==="CANVAS"),isImage:Vit,Image:typeof window!=="undefined"?window.Image:void 0,glMaxTexture:Wit,glGet:Ty,createCanvas:qp,glResize(i,t){return i},glTexImage:Git}});var C4,mi,gd,y1,S4;var wn=d(()=>{Or();if(true){C4=(v4(),Mi(x4)).webUtils}if(false){C4=null.serverUtils}mi=C4;gd=i=>i._type==="webgl";y1=i=>Boolean(i&&"tagName"in i&&i.tagName&&i.tagName.toUpperCase()==="CANVAS");S4=i=>Boolean("tagName"in i&&i.tagName.toUpperCase()==="IMG")});var ky,w4;var T4=d(()=>{ky=class{static head(t){return t[0]}static tail(t){return t.slice(1)}static last(t){return t[t.length-1]}static init(t){return t.slice(0,t.length-1)}static remove(t,e){return t.filter((r,o,n)=>!e(r,o,n))}static findIndex(t,e){for(let r=0;r<t.length;r++){if(e(t[r])){return r}}return-1}static find(t,e){for(let r=0;r<t.length;r++){if(e(t[r])){return t[r]}}return void 0}static flatten(t){return t.reduce(function(e,r){return e.concat(Array.isArray(r)?ky.flatten(r):r)},[])}static range(t,e){const r=[];if(e>t){for(let o=t;o<e;o++){r.push(o)}}return r}static repeat(t,e){const r=[];for(let o=0;o<e;o++){r[o]=t}return r}static zip(t,e){const r=Math.min(t.length,e.length);const o=[];for(let n=0;n<r;n++){o[n]=[t[n],e[n]]}return o}};w4=ky});var $a,$it,eo;var bd=d(()=>{$a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";$it={encode(i){let t="";let e;let r;let o;let n;let s;let a;let l;let c=0;do{e=i[c++];r=i[c++];o=i[c++];n=e>>2;s=(e&3)<<4|r>>4;a=(r&15)<<2|o>>6;l=o&63;if(isNaN(r)){a=l=64}else if(isNaN(o)){l=64}t=t+$a.charAt(n)+$a.charAt(s)+$a.charAt(a)+$a.charAt(l);e=r=o="";n=s=a=l=""}while(c<i.length);return t},decode(i){let t;let e;let r;let o;let n;let s;let a;let l=0;const c=[];const u=/[^A-Za-z0-9+/=]/g;if(u.exec(i)){throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}i=i.replace(/[^A-Za-z0-9+/=]/g,"");do{o=$a.indexOf(i.charAt(l++));n=$a.indexOf(i.charAt(l++));s=$a.indexOf(i.charAt(l++));a=$a.indexOf(i.charAt(l++));t=o<<2|n>>4;e=(n&15)<<4|s>>2;r=(s&3)<<6|a;c.push(t);if(s!==64){c.push(e)}if(a!==64){c.push(r)}t=e=r="";o=n=s=a=""}while(l<i.length);return c}};eo=$it});var ic,_1,L;var Tn=d(()=>{wn();T4();bd();ic=class{static mapRange(t,e,r){return(t-e.getMin())*r.getLength()/e.getLength()+r.getMin()}static isPlainObject(t){if(typeof t!=="object"||!t){return false}if(typeof Object.getPrototypeOf==="function"){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}return Object.prototype.toString.call(t)==="[object Object]"}static isMobile(){if(typeof navigator==="undefined")return false;const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}static isBrowser(){return typeof window!=="undefined"}static values(t){const e=[];for(const r in t){e.push(t[r])}return e}static generateUUID(){let t=new Date().getTime();if(true){if(typeof window.performance!=="undefined"&&typeof window.performance.now==="function"){t+=window.performance.now()}}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=(t+Math.random()*16)%16|0;t=Math.floor(t/16);return(e==="x"?r:r&3|8).toString(16)})}static resizeVectorToFit(t,e){const r=Math.min(e.x/t.x,e.y/t.y);const o=t.clone().multiply(r);return o}static resizeVectorToFill(t,e){const r=t.x/t.y;const o=e.x/e.y;if(r>o){return e.clone().set(e.y*r,e.y)}return e.clone().set(e.x,e.x/r)}static isExtendable(t){return typeof t!=="undefined"&&t!==null&&(typeof t==="object"||typeof t==="function")}static defaults(t,...e){const r={};for(const o in t){r[o]=t[o]}for(let o=0;o<e.length;o++){const n=e[o];for(const s in n){if(typeof r[s]==="undefined"){r[s]=n[s]}}}return r}static deepMerge(t,...e){const r=(o,n)=>{if(n===void 0){return r(null,o)}if(Array.isArray(n)){return[...n]}if(!ic.isPlainObject(n)){return n}if(!ic.isPlainObject(o)){return{...n}}const s={...o};Object.keys(n).forEach(a=>{const l=n[a];if(l===void 0){return}s[a]=r(o[a],l)});return s};return e.reduce(r,t)}static deepDefaults(t,...e){const r=[...e].reverse();return ic.deepMerge(...r,t)}static deepClone(t){const e={};for(const r in t){if(ic.isExtendable(t[r])){e[r]=ic.deepClone(t[r])}else{e[r]=t[r]}}return e}static extend(t,...e){const r={};for(const o in t){r[o]=t[o]}for(let o=0;o<e.length;o++){const n=e[o];for(const s in n){r[s]=n[s]}}return r}static clone(t){return this.extend({},t)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;const r=t==="x"?e:e&3|8;return r.toString(16)})}static createCanvas(){return mi.createCanvas()}static isPowerOfTwo(t){return(t.x&t.x-1)===0&&(t.y&t.y-1)===0}static nextLowestPOT(t){for(let e=1;e<32;e<<=1){t|=t>>e}return t-(t>>1)}static nextHighestPOT(t){t--;for(let e=1;e<32;e<<=1){t|=t>>e}return t+1}static moveArrayItem(t,e,r){if(r>=t.length){let o=r-t.length;while(o--+1){t.push(void 0)}}t.splice(r,0,t.splice(e,1)[0])}static ensureCanvasDimensions(t,e){if(t.width!==e.x||t.height!==e.y){t.width=e.x;t.height=e.y;return true}return false}static byteArrayToString(t){return t.map(e=>String.fromCharCode(e)).join("")}static clamp(t,e,r){return Math.max(e,Math.min(t,r))}static wildCardMatch(t,e){return new RegExp(`^${e.split("*").join(".*")}$`).test(t)}static flipObject(t){const e={};for(const r in t){e[t[r]]=r}return e}static ISODateString(t){function e(r){return r<10?`0${r}`:r}return`${t.getUTCFullYear()}-${e(t.getUTCMonth()+1)}-${e(t.getUTCDate())}T${e(t.getUTCHours())}:${e(t.getUTCMinutes())}:${e(t.getUTCSeconds())}Z`}static getCrossOriginValue(t){if(!t){return"anonymous"}if(t==="none"){return void 0}return t}static invariant(t,e){if(!t){const r=new Error(e);throw r}}static executePromises(t){const e=t.length;let r=0;const o=[];const n=[];return new Promise((s,a)=>{const l=()=>{r++;if(r>=e){if(n.length<=0){s(o)}else{a(n)}}};const c=m=>{o.push(m);l()};const u=m=>{n.push(m);l()};t.forEach(m=>{m.then(c).catch(u)})})}};_1=ic;X(_1,"Array",w4);L=_1});var Kit,k4,Xit,qit,I4,x1,q;var Lo=d(()=>{Tn();Kit=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}];k4=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd;Xit=()=>typeof navigator!=="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/);qit=(i,t)=>{if(true){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${i}; color: ${t}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]}if(false){const e=null;return[e.bgHex("#2D7BFF"),e.bgHex("#2B2B2B").white,e.bgHex("#2D7BFF"),e.bgHex(i).hex(t).bold,e.bgHex("#2B2B2B").white,e.bgHex("#2D7BFF")]}};I4=class{constructor(t="warn",e=Kit){this._levels=[...e];this._maxLevel=this.getLevelIndexByName(t);this._consoleFuncs={trace:(...r)=>{if(k4()){console.groupCollapsed(...r);console.trace();console.groupEnd()}else{console.trace(...r)}}};this._levels.forEach(({name:r})=>{this[r]=(o,...n)=>{this._log(r,o,...n)}})}getLevelIndexByName(t){return L.Array.findIndex(this._levels,e=>e.name===t)}getLevelObjectByName(t){return L.Array.find(this._levels,e=>e.name===t)}canLog(t){const e=this.getLevelIndexByName(t);if(e<0){return false}return e>=this._maxLevel}setLevel(t){const e=this.getLevelIndexByName(t);if(e<0){return}this._maxLevel=e}_log(t,e,...r){const o=this.getLevelObjectByName(t);if(!o||!this.canLog(t)){return}const{name:n,type:s,background:a,color:l}=o;const c=r.filter(h=>h!==void 0).map(h=>{if(h.toObject){return JSON.parse(JSON.stringify(h.toObject()))}return h});const u=this._consoleFuncs[s]||console[s]?(...h)=>console[s](...h):(...h)=>console.log(...h);const m=c.length;const p=qit(a,l);if(true){if(!Xit()){const h=c.length;if(h<=0){u(`PhotoEditorSDK | ${e} `);return}if(h===1&&typeof c[0]==="string"){u(`PhotoEditorSDK | ${e} | ${c[0]}`);return}u(`PhotoEditorSDK | ${e} | `,...c);return}if(m<=0){u(`%c  %c PhotoEditorSDK %c  %c ${e} %c %c  `,...p);return}if(m===1&&typeof c[0]==="string"){u(`%c  %c PhotoEditorSDK %c  %c ${e} %c  ${c[0]}  %c  `,...p);return}if(k4()){console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${e} %c`,...L.Array.init(p));u(...c);console.groupEnd()}else{u(`%c  %c PhotoEditorSDK %c  %c ${e} %c`,...L.Array.init(p),...c)}}if(false){const h=`${p[0](" ")} ${p[1]("PhotoEditorSDK")} ${p[2](" ")} ${p[3](e)}`;const g=`${p[5](" ")} `;if(m<=0){u(`${h} ${g}`);return}if(m===1&&typeof c[0]==="string"){u(`${h} ${p[4](c[0])} ${g}`);return}if(k4()){console.groupCollapsed(`${h} ${g}`);u(...c);console.groupEnd()}else{u(`${h} ${g}`,...c)}}}image(t="",e){if(true){let r=new window.Image;const o=()=>{const{width:n}=r;const{height:s}=r;if(t){console.log(t)}console.log(`%c+`,`
        font-size: 1px;
        padding: 0px ${Math.floor(n/2)}px;
        line-height: ${s}px;
        background: url(${r.src});
        color: transparent;
        background-repeat: no-repeat;
        background-size: ${n}px ${s}px;`)};r.onload=o;if(e instanceof window.HTMLCanvasElement){r.src=e.toDataURL()}else if(e instanceof window.Image){r=e;o()}else if(typeof e==="string"){r.src=e}else{this.log(t,e)}return r}}texture(t="",e){if(true){if(!e){this.log(t,"texture: null or undefined");return}const r=e.getBaseTexture();const o=r.getRenderers();const n=L.Array.find(o,l=>l&&l.constructor.type==="webgl");const{width:s,height:a}=r.getFrame();if(n){const l=n.getContext();const c=r.getGLTextureForRenderer(n);this.logGlTexture(l,c,s,a,t)}else{x1.image(t,r.getSource())}}}logGlTexture(t,e,r=150,o=150,n){if(true){t.bindTexture(t.TEXTURE_2D,e);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const a=new Uint8Array(r*o*4);t.readPixels(0,0,r,o,t.RGBA,t.UNSIGNED_BYTE,a);t.deleteFramebuffer(s);const l=document.createElement("canvas");l.width=r;l.height=o;const c=l.getContext("2d");const u=c.createImageData(r,o);u.data.set(a);c.putImageData(u,0,0);return x1.image(n,l)}}};x1=new I4("warn");q=x1});var Hi;var yd=d(()=>{Hi={load(i,t={cors:true,value:"anonymous"}){const e=()=>{if(true){return Promise.resolve([i,i])}if(false){if(i.substr(0,5)==="data:"){return Promise.resolve([i,i])}if(!i.match(/^(https?|ftp|file):\/\//)){return readFileAsync(i)}return loadRemoteFile(i)}};return e().then(([r,o])=>{return this._createAndLoadImage(r,o,t)})},loadImage(i,t={cors:true,value:"anonymous"}){if(true){return this._loadWithoutExif(i,t)}return this.load(i,t)},_loadWithoutExif(i,t={cors:true,value:"anonymous"}){return new Promise((e,r)=>{const o=new window.Image;o.addEventListener("load",()=>{e(o)});o.addEventListener("error",()=>{r(new Error(`Failed to load image at ${i}`))});if(t.cors){o.crossOrigin=t.value}o.src=i})},_createAndLoadImage(i,t,e={cors:true,value:"anonymous"}){return new Promise((r,o)=>{if(true){const n=this._loadWithoutExif(t,e).then(a=>r(a));const s=new Promise((a,l)=>{this._loadAsDataURL(t,e).then(c=>{const u=new window.Image;u.addEventListener("load",()=>{a(u)});u.src=c;u.rawSource=c}).catch(c=>{n.then(u=>a(u))})});if(this._stringEndsWith(t,".svg")){return n.then(a=>r(a))}return s.then(a=>r(a))}if(false){const n=null;const s=new n.Image;s.src=t;s.rawSource=t;s.filePath=i;r(s)}})},_stringEndsWith(i,t,e=i.length){if(e===void 0||e>i.length){e=i.length}return i.substring(e-t.length,e)===t},_loadAsDataURL(i,t={cors:true,value:"anonymous"}){if(true){return new Promise((e,r)=>{const o=new XMLHttpRequest;o.onload=function(){const n=new FileReader;n.onloadend=function(){if(n.error){r(n.error)}e(n.result)};n.readAsDataURL(o.response)};o.open("GET",i);o.responseType="blob";o.withCredentials=t.cors&&t.value==="use-credentials";o.send()})}return Promise.reject(new Error(`Loading images as data urls is only supported in browser environments.`))},loadXHR(i,t){return new Promise((e,r)=>{let o;if(window.XDomainRequest){o=new window.XDomainRequest;if(t)o.overrideMimeType(t);o.onload=function(){e(o)};o.onerror=function(n){r(n)}}else if(window.XMLHttpRequest){o=new window.XMLHttpRequest;if(t)o.overrideMimeType(t);o.onreadystatechange=function(n){if(o.readyState===4){if(o.status===200){e(o)}else{r(new Error(`HTTP Status ${o.status}`))}}}}o.open("GET",i,true);o.send()})}}});var E4=Wt((vkt,D4)=>{"use strict";function Yit(i,t){return Object.prototype.hasOwnProperty.call(i,t)}D4.exports=function(i,t,e,r){t=t||"&";e=e||"=";var o={};if(typeof i!=="string"||i.length===0){return o}var n=/\+/g;i=i.split(t);var s=1e3;if(r&&typeof r.maxKeys==="number"){s=r.maxKeys}var a=i.length;if(s>0&&a>s){a=s}for(var l=0;l<a;++l){var c=i[l].replace(n,"%20"),u=c.indexOf(e),m,p,h,g;if(u>=0){m=c.substr(0,u);p=c.substr(u+1)}else{m=c;p=""}h=decodeURIComponent(m);g=decodeURIComponent(p);if(!Yit(o,h)){o[h]=g}else if(Array.isArray(o[h])){o[h].push(g)}else{o[h]=[o[h],g]}}return o}});var R4=Wt((Ckt,F4)=>{"use strict";var Yp=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};F4.exports=function(i,t,e,r){t=t||"&";e=e||"=";if(i===null){i=void 0}if(typeof i==="object"){return Object.keys(i).map(function(o){var n=encodeURIComponent(Yp(o))+e;if(Array.isArray(i[o])){return i[o].map(function(s){return n+encodeURIComponent(Yp(s))}).join(t)}else{return n+encodeURIComponent(Yp(i[o]))}}).join(t)}if(!r)return"";return encodeURIComponent(Yp(r))+e+encodeURIComponent(Yp(i))}});var O4=Wt(Jp=>{"use strict";Jp.decode=Jp.parse=E4();Jp.encode=Jp.stringify=R4()});function Zp(i){typeof i=="string"&&(i=xd(i));var t=function(e,r,o){var n=e.auth,s=e.hostname,a=e.protocol||"",l=e.pathname||"",c=e.hash||"",u=e.query||"",m=false;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",e.host?m=n+e.host:s&&(m=n+(~s.indexOf(":")?"["+s+"]":s),e.port&&(m+=":"+e.port)),u&&typeof u=="object"&&(u=r.encode(u));var p=e.search||u&&"?"+u||"";return a&&a.substr(-1)!==":"&&(a+=":"),e.slashes||(!a||o.test(a))&&m!==false?(m="//"+(m||""),l&&l[0]!=="/"&&(l="/"+l)):m||(m=""),c&&c[0]!=="#"&&(c="#"+c),p&&p[0]!=="?"&&(p="?"+p),{protocol:a,host:m,pathname:l=l.replace(/[?#]/g,encodeURIComponent),search:p=p.replace("#","%23"),hash:c}}(i,T1.default,Jit);return""+t.protocol+t.host+t.pathname+t.search+t.hash}function A4(i,t){var e=typeof i=="string"?xd(i):i;i=typeof i=="object"?Zp(i):i;var r=xd(t),o="";e.protocol&&!e.slashes&&(o=e.protocol,i=i.replace(e.protocol,""),o+=t[0]==="/"||i[0]==="/"?"/":""),o&&r.protocol&&(o="",r.slashes||(o=r.protocol,t=t.replace(r.protocol,"")));var n=i.match(Zit);n&&!r.protocol&&(i=i.substr((o=n[1]+(n[2]||"")).length),/^\/\/[^/]/.test(t)&&(o=o.slice(0,-1)));var s=new URL(i,w1+"/"),a=new URL(t,s).toString().replace(w1,""),l=r.protocol||e.protocol;return l+=e.slashes||r.slashes?"//":"",!o&&l?a=a.replace(C1,l):o&&(a=a.replace(C1,"")),Qit.test(a)||~t.indexOf(".")||i.slice(-1)==="/"||t.slice(-1)==="/"||a.slice(-1)!=="/"||(a=a.slice(0,-1)),o&&(a=o+(a[0]==="/"?a.substr(1):a)),a}function _d(){}function xd(i,t,e){if(t===void 0&&(t=false),e===void 0&&(e=false),i&&typeof i=="object"&&i instanceof _d)return i;var r=(i=i.trim()).match(trt);i=r?r[1].replace(/\\/g,"/")+r[2]:i.replace(/\\/g,"/"),rrt.test(i)&&i.slice(-1)!=="/"&&(i+="/");var o=!/(^javascript)/.test(i)&&i.match(ert),n=irt.test(i),s="";o&&(v1.test(o[1])||(s=o[1].toLowerCase(),i=""+o[2]+o[3]),o[2]||(n=false,v1.test(o[1])?(s=o[1],i=""+o[3]):i="//"+o[3]),o[2].length!==3&&o[2].length!==1||(s=o[1],i="/"+o[3]));var a,l=(r?r[1]:i).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),c=l&&l[1],u=new _d,m="",p="";try{a=new URL(i)}catch(_){m=_,s||e||!/^\/\//.test(i)||/^\/\/.+[@.]/.test(i)||(p="/",i=i.substr(1));try{a=new URL(i,w1)}catch(x){return u.protocol=s,u.href=s,u}}u.slashes=n&&!p,u.host=a.host===S1?"":a.host,u.hostname=a.hostname===S1?"":a.hostname.replace(/(\[|\])/g,""),u.protocol=m?s||null:a.protocol,u.search=a.search.replace(/\\/g,"%5C"),u.hash=a.hash.replace(/\\/g,"%5C");var h=i.split("#");!u.search&&~h[0].indexOf("?")&&(u.search="?"),u.hash||h[1]!==""||(u.hash="#"),u.query=t?T1.default.decode(a.search.substr(1)):u.search.substr(1),u.pathname=p+(o?function(_){return _.replace(/['^|`]/g,function(x){return"%"+x.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(x,b){try{return decodeURIComponent(b).split("").map(function(w){var T=w.charCodeAt();return T>256||/^[a-z0-9]$/i.test(w)?w:"%"+T.toString(16).toUpperCase()}).join("")}catch(w){return b}})}(a.pathname):a.pathname),u.protocol==="about:"&&u.pathname==="blank"&&(u.protocol="",u.pathname=""),m&&i[0]!=="/"&&(u.pathname=u.pathname.substr(1)),s&&!v1.test(s)&&i.slice(-1)!=="/"&&u.pathname==="/"&&(u.pathname=""),u.path=u.pathname+u.search,u.auth=[a.username,a.password].map(decodeURIComponent).filter(Boolean).join(":"),u.port=a.port,c&&!u.host.endsWith(c)&&(u.host+=c,u.port=c.slice(1)),u.href=p?""+u.pathname+u.search+u.hash:Zp(u);var g=/^(file)/.test(u.href)?["host","hostname"]:[];return Object.keys(u).forEach(function(_){~g.indexOf(_)||(u[_]=u[_]||null)}),u}var T1,Jit,C1,S1,w1,Zit,Qit,v1,trt,ert,irt,rrt;var B4=d(()=>{T1=y(O4(),1);Jit=/https?|ftp|gopher|file/;C1="http://";S1="w.w";w1=C1+S1;Zit=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i;Qit=/https?|ftp|gopher|file/;_d.prototype.parse=xd,_d.prototype.format=Zp,_d.prototype.resolve=A4,_d.prototype.resolveObject=A4;v1=/^https?|ftp|gopher|file/;trt=/^(.*?)([#?].*)/;ert=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i;irt=/^([a-z0-9.+-]*:)?\/\/\/*/i;rrt=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i});var ort,Qp,io;var vd=d(()=>{B4();ort=5e3;Qp=typeof window!=="undefined"?window:global;io=class{constructor(t){this._url=t;this._parsedUrl=xd(this._url,true)}_isJSONPRequest(){const{query:t}=this._parsedUrl;for(const e in t){const r=t[e];if(r==="?"){return true}}return false}load(){if(this._isJSONPRequest()){return this._loadJSONP()}return this._loadJSON()}_loadJSON(){return new Promise((t,e)=>{let r;if(Qp.XDomainRequest){r=new Qp.XDomainRequest;r.onload=function(){const o=JSON.parse(r.responseText);t(o)};r.onerror=function(o){e(o)};r.open("GET",this._url,true);r.send()}else if(Qp.XMLHttpRequest){r=new XMLHttpRequest;r.onreadystatechange=function(o){if(r.readyState===4){if(r.status===200){const n=JSON.parse(r.responseText);t(n)}else{e(new Error(`HTTP Status ${r.status}`))}}};r.open("GET",this._url,true);r.send()}})}_loadJSONP(){let t=false;let e=false;const r=`pesdk${Math.round(Math.random()*99999999999999)}`;return new Promise((o,n)=>{const s=this._createJSONPNode(r);Qp[r]=a=>{this._removeJSONPNode(s);if(!t){e=true;o(a)}};Qp.setTimeout(()=>{if(!e){this._removeJSONPNode(s);t=true;n(new Error("Timeout of 5 seconds exceeded."))}},ort)})}_createJSONPNode(t){const e=this._buildJSONPUrl(t);const r=document.querySelector("head");const o=document.createElement("script");o.src=e;r.appendChild(o);return o}_removeJSONPNode(t){t.parentNode.removeChild(t)}_buildJSONPUrl(t){const{query:e}=this._parsedUrl;let r=null;for(const o in e){if(e[o]==="?"){r=o;break}}delete this._parsedUrl.search;e[r]=t;return Zp(this._parsedUrl)}}});var k1={};ue(k1,{ImageLoader:()=>Hi,JSONLoader:()=>io});var P4=d(()=>{yd();vd()});var Wi,W;var rc=d(()=>{Wi=class{constructor(t,e,r,o=1){this.r=t;this.g=e;this.b=r;this.a=o}toRGBA(){const t=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a.toFixed(2)];return`rgba(${t.join(",")})`}set(t,e,r,o=this.a){this.r=t;this.g=e;this.b=r;this.a=o;return this}toRGB(){return[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)]}toHex(){const t=[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))];return`#${t.join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){const t=Math.max(this.r,this.g,this.b);const e=Math.min(this.r,this.g,this.b);let r;let o;const n=t;const s=t-e;o=t===0?0:s/t;if(t===e){r=0}else{switch(t){case this.r:r=(this.g-this.b)/s;if(this.g<this.b){r+=6}break;case this.g:r=(this.b-this.r)/s+2;break;case this.b:r=(this.r-this.g)/s+4;break}r/=6}return[r,o,n]}fromHSV(t,e,r){this.copy(Wi.fromHSV(t,e,r));return this}static fromHSV(t,e,r,o=1){let[n,s,a]=[];const l=Math.floor(t*6);const c=t*6-l;const u=r*(1-e);const m=r*(1-c*e);const p=r*(1-(1-c)*e);switch(l%6){case 0:n=r;s=p;a=u;break;case 1:n=m;s=r;a=u;break;case 2:n=u;s=r;a=p;break;case 3:n=u;s=m;a=r;break;case 4:n=p;s=u;a=r;break;case 5:n=r;s=u;a=m;break}return new Wi(n,s,a,o)}static fromArray(t){return new Wi(t[0],t[1],t[2],t[3])}static fromHex(t){const[e,r,o]=t.match(/[0-9A-fa-f]{1,2}/g);return new Wi(parseInt(e,16)/255,parseInt(r,16)/255,parseInt(o,16)/255,1)}clone(){return new Wi(this.r,this.g,this.b,this.a)}cloneRGB(){return new Wi(this.r,this.g,this.b,1)}add(t){this.r+=t.r;this.g+=t.g;this.b+=t.b;this.a+=t.a;return this}minus(t){this.r-=t.r;this.g-=t.g;this.b-=t.b;this.a-=t.a;return this}multiplyScalar(t){this.r*=t;this.g*=t;this.b*=t;this.a*=t;return this}divideScalar(t){this.r/=t;this.g/=t;this.b/=t;this.a/=t;return this}clamp(t,e){this.r=Math.min(Math.max(this.r,t),e);this.g=Math.min(Math.max(this.g,t),e);this.b=Math.min(Math.max(this.b,t),e);this.a=Math.min(Math.max(this.a,t),e);return this}mix(t,e){this.r=(1-e)*this.r+e*t.r;this.g=(1-e)*this.g+e*t.g;this.b=(1-e)*this.b+e*t.b;this.a=(1-e)*this.a+e*t.a;return this}copy(t){this.r=t.r;this.g=t.g;this.b=t.b;this.a=t.a;return this}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}_componentToHex(t){const e=t.toString(16);return e.length===1?`0${e}`:e}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new Wi(0,0,0,0)}static get WHITE(){return new Wi(1,1,1,1)}static get BLACK(){return new Wi(0,0,0,1)}static get RED(){return new Wi(1,0,0,1)}static get BLUE(){return new Wi(0,0,1,1)}static get GREEN(){return new Wi(0,1,0,1)}};W=Wi});var nrt,M4,Gi;var Cd=d(()=>{Lo();nrt=12;M4=class{constructor(){this._maxListeners=nrt;this._events={};this._pipeDestinations=[]}pipeEvents(t){this._pipeDestinations.push(t)}unpipeEvents(t){const e=this._pipeDestinations.indexOf(t);if(e===-1){return}this._pipeDestinations.splice(e,1)}on(t,e){if(typeof t==="undefined"){throw new Error(`Invalid event type: \`${t}\``)}if(typeof e!=="function"){throw new TypeError}const r=this._events[t]||(this._events[t]=[]);if(r.indexOf(e)!==-1){return this}r.push(e);if(this._maxListeners&&r.length>this._maxListeners){q.warn("EventEmitter",`Possible memory leak detected, added ${r.length} \`${t}\` listeners (current limit is ${this._maxListeners})`);if(typeof console!=="undefined"){console.trace()}}return this}once(t,e){if(typeof t==="undefined"){throw new Error(`Invalid event type: \`${t}\``)}const r=this;function o(){r.off(t,o);e.apply(null,arguments)}return this.on(t,o)}off(t,...e){if(typeof t==="undefined"){throw new Error(`Invalid event type: \`${t}\``)}if(e.length===0){this._events[t]=null;return this}const r=e[0];if(typeof r!=="function"){throw new TypeError}const o=this._events[t];if(!o||!o.length){return this}const n=o.indexOf(r);if(n===-1){return this}o.splice(n,1);return this}emit(t,...e){if(typeof t==="undefined"){throw new Error(`Invalid event type: \`${t}\``)}this._pipeDestinations.forEach(o=>{o.emit(t,...e)});const r=this._events[t];if(!r||!r.length){return false}r.slice(0).forEach(o=>o.apply(null,e));return true}setMaxListeners(t){if(parseInt(t,10)!==t){throw new TypeError}this._maxListeners=t}};Gi=M4});var oc;var I1=d(()=>{Lo();wo();oc={checkFramebufferStatus(i,t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);const r={[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[t.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};if(e!==t.FRAMEBUFFER_COMPLETE){q.warn(i,`Framebuffer incomplete: ${r[e]}`)}},determineGPUName(i){let t=null;let e=null;if(!i){e=document.createElement("canvas");i=e.getContext("experimental-webgl")||e.getContext("webgl")}const r=i&&i.getExtension("WEBGL_debug_renderer_info");if(r){t=i.getParameter(r.UNMASKED_RENDERER_WEBGL);e&&e.remove()}jt(e);return t},isGPUBlacklisted(i,t=null){return false}}});var Iy;var L4=d(()=>{Iy=i=>typeof i==="number"});var srt,nc,Dy,rt;var As=d(()=>{L4();srt=i=>i instanceof rt;nc=(i,t)=>{if(srt(i)){return{x:i.x,y:i.y}}return{x:i,y:Iy(t)?t:i}};Dy=(i,t)=>(e,r)=>{const{x:o,y:n}=nc(e,r);i.x=t(i.x,o);i.y=t(i.y,n);return i};rt=class{constructor(t=0,e=0){this.add=Dy(this,(t,e)=>t+e);this.subtract=Dy(this,(t,e)=>t-e);this.divide=Dy(this,(t,e)=>t/e);this.multiply=Dy(this,(t,e)=>t*e);this.x=t;this.y=e}set(t,e){const{x:r,y:o}=nc(t,e);this.x=r;this.y=o;return this}clone(){return new rt(this.x,this.y)}copy(t){this.x=t.x;this.y=t.y;return this}clamp(t,e){if(Iy(t)){t=new rt(t,t)}if(Iy(e)){e=new rt(e,e)}if(t){this.x=Math.max(t.x,this.x);this.y=Math.max(t.y,this.y)}if(e){this.x=Math.min(e.x,this.x);this.y=Math.min(e.y,this.y)}return this}dot(t,e){const{x:r,y:o}=nc(t,e);return this.x*r+this.y*o}equals(t,e){const{x:r,y:o}=nc(t,e);return r===this.x&&o===this.y}flip(){const t=this.x;this.x=this.y;this.y=t;return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}floor(){this.x|=0;this.y|=0;return this}abs(){this.x=Math.abs(this.x);this.y=Math.abs(this.y);return this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(t){this.x=parseFloat(this.x.toFixed(t));this.y=parseFloat(this.y.toFixed(t));return this}asArray(t=false){if(t){return[this.y,this.x]}return[this.x,this.y]}static fromObject(t){return new rt(t.x,t.y)}static get NULL(){return new rt(0,0)}}});var ir;var D1=d(()=>{As();ir=class{constructor(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;this.reset()}multiply(t){let e;let r;let o;let n;let s;let a;e=this.a*t.a+this.b*t.c;r=this.a*t.b+this.b*t.d;o=this.c*t.a+this.d*t.c;n=this.c*t.b+this.d*t.d;s=this.tx*t.a+this.ty*t.c+t.tx;a=this.tx*t.b+this.ty*t.d+t.ty;this.a=e;this.b=r;this.c=o;this.d=n;this.tx=s;this.ty=a;return this}applyToVector(t){const{x:e,y:r}=t;t=t.clone();t.x=this.a*e+this.c*r+this.tx;t.y=this.b*e+this.d*r+this.tx;return t}applyInverseToVector(t){const e=1/(this.a*this.d+this.c*-this.b);const{x:r,y:o}=t;t=t.clone();t.x=this.d*e*r+-this.c*e*o+(this.ty*this.c-this.tx*this.d)*e;t.y=this.a*e*o+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e;return t}rectangleToCoordinates(t,e=new rt(0,0)){const r=t.width*(1-e.x);const o=t.width*-e.x;const n=t.height*(1-e.y);const s=t.height*-e.y;const a=[];a.push(new rt(this.a*o+this.c*s+this.tx,this.d*s+this.b*o+this.ty));a.push(new rt(this.a*r+this.c*s+this.tx,this.d*s+this.b*r+this.ty));a.push(new rt(this.a*r+this.c*n+this.tx,this.d*n+this.b*r+this.ty));a.push(new rt(this.a*o+this.c*n+this.tx,this.d*n+this.b*o+this.ty));return a}reset(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}toArray(){const t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];if(typeof Float32Array==="undefined"){return t}return new Float32Array(t)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new ir}}});var le;var E1=d(()=>{As();le=class{constructor(t=0,e=0,r=0,o=0){this.x=0;this.y=0;this.width=0;this.height=0;this.x=t;this.y=e;this.width=r;this.height=o}set(t,e,r,o){this.x=t;this.y=e;this.width=r;this.height=o;return this}clone(){return new le(this.x,this.y,this.width,this.height)}copy(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height;return this}equals(t,e,r,o){if(t instanceof le){return t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}return t===this.x&&e===this.y&&r===this.width&&o===this.height}translate(t,e){const{x:r,y:o}=nc(t,e);this.x+=r;this.y+=o;return this}scale(t,e){const{x:r,y:o}=nc(t,e);this.width*=r;this.height*=o;return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.width=Math.round(this.width);this.height=Math.round(this.height);return this}getPosition(){return new rt(this.x,this.y)}getSize(){return new rt(this.width,this.height)}insetBy(t,e){this.x+=t;this.y+=e;this.width-=2*t;this.height-=2*e;return this}intersects(t){const e=new rt(this.x,this.y);const r=new rt(this.x+this.width,this.y+this.height);const o=new rt(t.x,t.y);const n=new rt(t.x+t.width,t.y+t.height);if(o.x>r.x||e.x>n.x||n.y<e.y||r.y<o.y){return false}return true}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(t,e){let r=false;if(e.x-t.x<0){r=true}const o=r?e:t;const n=r?t:e;const s=n.x-o.x;const a=n.y-o.y;return new le(o.x,o.y,s,a)}}});var Sd,art,Ka;var Me=d(()=>{Lo();Or();rc();Cd();I1();D1();E1();As();Tn();Sd=2e3;art=5;Ka=art*4});var sc;var Ey=d(()=>{Me();sc=class{constructor(){this._position=new rt(0,0);this._scale=new rt(1,1);this._pivot=new rt(0,0);this._rotation=0;this._lastRotation=null;this._alpha=1;this._visible=true;this._worldTransform=new ir;this._parent=null;this._shaders=[];this._boundsNeedUpdate=true;this._bounds=new le(0,0,1,1);this._localBoundsNeedUpdate=true;this._localBounds=new le(0,0,1,1);this._filterRectangle=new le(0,0,0,0)}renderWebGL(t){q.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(t){q.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){const t=this._parent?this._parent.getWorldTransform():ir.IDENTITY;const e=this._worldTransform;const r=Math.sin(this._rotation);const o=Math.cos(this._rotation);e.a=o*this._scale.x;e.b=r*this._scale.x;e.c=-r*this._scale.y;e.d=o*this._scale.y;e.tx=this._position.x;e.ty=this._position.y;if(this._pivot.x||this._pivot.y){e.tx-=this._pivot.x*e.a+this._pivot.y*e.c;e.ty-=this._pivot.x*e.b+this._pivot.y*e.d}e.multiply(t);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}addShader(t){this._shaders.push(t)}removeShader(t){const e=this._shaders.indexOf(t);if(e!==-1){this._shaders.splice(e,1);return true}return false}removeShaderAt(t){if(!this._shaders[t]){return false}this._shaders.splice(t,1);return true}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(t,e){this._position.set(t,e);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getScale(){return this._scale}setScale(t,e){this._scale.set(t,e);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getPivot(){return this._pivot}setPivot(t,e){this._pivot.set(t,e);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getRotation(){return this._rotation}setRotation(t){this._rotation=t;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getAlpha(){return this._alpha}setAlpha(t){this._alpha=t}getWorldAlpha(){if(this._parent){return this._parent.getAlpha()*this._alpha}return this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(t){this._parent=t}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(t){this._filterRectangle.copy(t)}isVisible(){return this._visible}setVisible(t){this._visible=t}}});var kn;var Fy=d(()=>{Me();Ey();kn=class extends sc{constructor(){super();this._children=[];this._filters=[]}addFilter(t){this._filters.push(t)}removeFilter(t){const e=this._filters.indexOf(t);if(e!==-1){this._filters.splice(e,1);return true}return false}setFilters(t){this._filters=t}addChild(t){const e=t.getParent();if(e instanceof kn){e.removeChild(t)}t.setParent(this);this._children.push(t)}prependChild(t){const e=t.getParent();if(e instanceof kn){e.removeChild(t)}t.setParent(this);this._children.unshift(t)}hasChild(t){const e=this._children.indexOf(t);return e!==-1}removeChild(t){const e=this._children.indexOf(t);if(e!==-1){this._children.splice(e,1);t.setParent(null)}else{q.info(this.constructor.name,"Tried to remove a child that does not exist")}}clearChildren(){this._children=[]}renderWebGL(t){if(!this._visible){return}const e=t.getFilterManager();if(this._filters&&this._filters.length){e.pushFilters(this,this._filters)}t.getCurrentObjectRenderer().start();this._renderWebGL(t);this._children.forEach(r=>{r.renderWebGL(t)});t.getCurrentObjectRenderer().flush();if(this._filters&&this._filters.length){e.popFilters()}t.getCurrentObjectRenderer().start()}_renderWebGL(t){}renderCanvas(t){if(!this._visible){return}const e=t.getFilterManager();if(this._filters&&this._filters.length){e.pushFilters(this,this._filters)}this._renderCanvas(t);this._children.forEach(r=>{r.renderCanvas(t)});if(this._filters&&this._filters.length){e.popFilters()}}_renderCanvas(t){}updateTransform(){super.updateTransform();this._children.forEach(t=>{t.updateTransform()})}getLocalBounds(){if(this._localBoundsNeedUpdate){this._localBoundsNeedUpdate=false}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate){this._boundsNeedUpdate=false}return this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}});function N4(i,t,e,r,o,n){if(isNaN(n)||n<1){return}n|=0;var s=i.data;var a,l,c,u,m,p,h,g,_,x,b,w,T,D,O,k,E,J,tt,mt,bt,gt,pt,Zt;var fi=n+n+1;var ei=r-1;var Kr=o-1;var Ct=n+1;var he=Ct*(Ct+1)/2;var ne=new U4;var te;var Dt=ne;for(c=1;c<fi;c++){Dt=Dt.next=new U4;if(c==Ct)te=Dt}Dt.next=ne;var se=null;var ci=null;h=p=0;var Zo=lrt[n];var Qo=crt[n];for(l=0;l<o;l++){k=E=J=tt=g=_=x=b=0;w=Ct*(mt=s[p]);T=Ct*(bt=s[p+1]);D=Ct*(gt=s[p+2]);O=Ct*(pt=s[p+3]);g+=he*mt;_+=he*bt;x+=he*gt;b+=he*pt;Dt=ne;for(c=0;c<Ct;c++){Dt.r=mt;Dt.g=bt;Dt.b=gt;Dt.a=pt;Dt=Dt.next}for(c=1;c<Ct;c++){u=p+((ei<c?ei:c)<<2);g+=(Dt.r=mt=s[u])*(Zt=Ct-c);_+=(Dt.g=bt=s[u+1])*Zt;x+=(Dt.b=gt=s[u+2])*Zt;b+=(Dt.a=pt=s[u+3])*Zt;k+=mt;E+=bt;J+=gt;tt+=pt;Dt=Dt.next}se=ne;ci=te;for(a=0;a<r;a++){s[p+3]=pt=b*Zo>>Qo;if(pt!==0){pt=255/pt;s[p]=(g*Zo>>Qo)*pt;s[p+1]=(_*Zo>>Qo)*pt;s[p+2]=(x*Zo>>Qo)*pt}else{s[p]=s[p+1]=s[p+2]=0}g-=w;_-=T;x-=D;b-=O;w-=se.r;T-=se.g;D-=se.b;O-=se.a;u=h+((u=a+n+1)<ei?u:ei)<<2;k+=se.r=s[u];E+=se.g=s[u+1];J+=se.b=s[u+2];tt+=se.a=s[u+3];g+=k;_+=E;x+=J;b+=tt;se=se.next;w+=mt=ci.r;T+=bt=ci.g;D+=gt=ci.b;O+=pt=ci.a;k-=mt;E-=bt;J-=gt;tt-=pt;ci=ci.next;p+=4}h+=r}for(a=0;a<r;a++){E=J=tt=k=_=x=b=g=0;p=a<<2;w=Ct*(mt=s[p]);T=Ct*(bt=s[p+1]);D=Ct*(gt=s[p+2]);O=Ct*(pt=s[p+3]);g+=he*mt;_+=he*bt;x+=he*gt;b+=he*pt;Dt=ne;for(c=0;c<Ct;c++){Dt.r=mt;Dt.g=bt;Dt.b=gt;Dt.a=pt;Dt=Dt.next}m=r;for(c=1;c<=n;c++){p=m+a<<2;g+=(Dt.r=mt=s[p])*(Zt=Ct-c);_+=(Dt.g=bt=s[p+1])*Zt;x+=(Dt.b=gt=s[p+2])*Zt;b+=(Dt.a=pt=s[p+3])*Zt;k+=mt;E+=bt;J+=gt;tt+=pt;Dt=Dt.next;if(c<Kr){m+=r}}p=a;se=ne;ci=te;for(l=0;l<o;l++){u=p<<2;s[u+3]=pt=b*Zo>>Qo;if(pt>0){pt=255/pt;s[u]=g*Zo>>Qo;s[u+1]=_*Zo>>Qo;s[u+2]=x*Zo>>Qo}else{s[u]=s[u+1]=s[u+2]=0}g-=w;_-=T;x-=D;b-=O;w-=se.r;T-=se.g;D-=se.b;O-=se.a;u=a+((u=l+Ct)<Kr?u:Kr)*r<<2;g+=k+=se.r=s[u];_+=E+=se.g=s[u+1];x+=J+=se.b=s[u+2];b+=tt+=se.a=s[u+3];se=se.next;w+=mt=ci.r;T+=bt=ci.g;D+=gt=ci.b;O+=pt=ci.a;k-=mt;E-=bt;J-=gt;tt-=pt;ci=ci.next;p+=r}}}function U4(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var lrt,crt;var H4=d(()=>{"use strict";lrt=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];crt=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]});var In,th;var F1=d(()=>{rc();In=class{constructor(t=1,e=0,r=0,o=0,n=0,s=0,a=1,l=0,c=0,u=0,m=0,p=0,h=1,g=0,_=0,x=0,b=0,w=0,T=1,D=0){this.set(t,e,r,o,n,s,a,l,c,u,m,p,h,g,_,x,b,w,T,D)}set(t,e,r,o,n,s,a,l,c,u,m,p,h,g,_,x,b,w,T,D){this.a=t;this.b=e;this.c=r;this.d=o;this.e=n;this.f=s;this.g=a;this.h=l;this.i=c;this.j=u;this.k=m;this.l=p;this.m=h;this.n=g;this.o=_;this.p=x;this.q=b;this.r=w;this.s=T;this.t=D}reset(){this.a=1;this.b=0;this.c=0;this.d=0;this.e=0;this.f=0;this.g=1;this.h=0;this.i=0;this.j=0;this.k=0;this.l=0;this.m=1;this.n=0;this.o=0;this.p=0;this.q=0;this.r=0;this.s=1;this.t=0}apply(t){const e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e;const r=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j;const o=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o;const n=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new W(e,r,o,n)}multiply(t){let e;let r;let o;let n;let s;let a;let l;let c;let u;let m;let p;let h;let g;let _;let x;let b;let w;let T;let D;let O;const k=t;const E=this;e=k.a*E.a+k.b*E.f+k.c*E.k+k.d*E.p;r=k.a*E.b+k.b*E.g+k.c*E.l+k.d*E.q;o=k.a*E.c+k.b*E.h+k.c*E.m+k.d*E.r;n=k.a*E.d+k.b*E.i+k.c*E.n+k.d*E.s;a=k.f*E.a+k.g*E.f+k.h*E.k+k.i*E.p;l=k.f*E.b+k.g*E.g+k.h*E.l+k.i*E.q;c=k.f*E.c+k.g*E.h+k.h*E.m+k.i*E.r;u=k.f*E.d+k.g*E.i+k.h*E.n+k.i*E.s;p=k.k*E.a+k.l*E.f+k.m*E.k+k.n*E.p;h=k.k*E.b+k.l*E.g+k.m*E.l+k.n*E.q;g=k.k*E.c+k.l*E.h+k.m*E.m+k.n*E.r;_=k.k*E.d+k.l*E.i+k.m*E.n+k.n*E.s;b=k.p*E.a+k.q*E.f+k.r*E.k+k.s*E.p;w=k.p*E.b+k.q*E.g+k.r*E.l+k.s*E.q;T=k.p*E.c+k.q*E.h+k.r*E.m+k.s*E.r;D=k.p*E.d+k.q*E.i+k.r*E.n+k.s*E.s;s=k.a*E.e+k.b*E.j+k.c*E.o+k.d*E.t+k.e;m=k.f*E.e+k.g*E.j+k.h*E.o+k.i*E.t+k.j;x=k.k*E.e+k.l*E.j+k.m*E.o+k.n*E.t+k.o;O=k.p*E.e+k.q*E.j+k.r*E.o+k.s*E.t+k.t;this.a=e;this.b=r;this.c=o;this.d=n;this.e=s;this.f=a;this.g=l;this.h=c;this.i=u;this.j=m;this.k=p;this.l=h;this.m=g;this.n=_;this.o=x;this.p=b;this.q=w;this.r=T;this.s=D;this.t=O;return this}clone(){const t=new In;t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t);return t}equals(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},
      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},
      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},
      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map(t=>this[t])}static get IDENTITY(){return new In}static createBrightnessMatrix(t){const e=new In;e.e=t;e.j=t;e.o=t;return e}static createContrastMatrix(t){const e=new In;const r=(1-t)/2;e.a=e.g=e.m=t;e.e=e.j=e.o=r;return e}static createSaturationMatrix(t=1){const e=new In;const r=1-t;const o=.213*r;const n=.715*r;const s=.072*r;e.a=o+t;e.b=n;e.c=s;e.f=o;e.g=n+t;e.h=s;e.k=o;e.l=n;e.m=s+t;return e}static createExposureMatrix(t=0){const e=Math.pow(2,t);return new In(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0)}static createLinearMatrix(t=1,e=0){const r=new In;r.a=r.g=r.m=t;r.e=r.j=r.o=e;return r}};th=In});var wd,yt;var Td=d(()=>{Or();wn();rc();Cd();F1();As();Tn();wd=class extends Gi{constructor(t={},e={}){super();this.availableOptions={...Object.getPrototypeOf(this).availableOptions,...e};this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this);this._initOptions(t)}_buildConfigError(t){let e="";if(this.constructor.name){e=`${this.constructor.name}: `}e+=t;return new Error(e)}_onOptionsChange(){}validateSettings(){return new Promise((t,e)=>{for(const r in this.availableOptions){const o=this.availableOptions[r];if(o.required&&typeof this._options[r]==="undefined"){return e(this._buildConfigError(`Option \`${r}\` is required.`))}}t()})}_initOptions(t={}){this._options={};let e;let r;let o;const n=this;for(e in this.availableOptions){o=e.charAt(0).toUpperCase()+e.slice(1);r=this.availableOptions[e];if(["string","number","boolean","object","vector2","color","configurable","color-matrix","array","image","function","*"].indexOf(r.type)===-1){throw this._buildConfigError(`Unknown option type: \`${r.type}\``)}const s=function a(l){n[`set${o}`]=function(c,u,m){n.setOption(l,c,u,m)};n[`get${o}`]=function(){return n.getOption(l)}};s(e);if(r.type==="configurable"){this._options[e]=new wd(void 0,r.structure||{});this._options[e].on("update",this._onConfigurableUpdate)}if(!(e in t)||typeof t[e]==="undefined"){if(typeof r.default!=="undefined"){let a=r.default;if(typeof r.default==="function"){a=r.default()}this[`set${o}`](a,false,true)}else if(r.type!=="configurable"){this._options[e]=void 0}}}for(e in t){if(typeof this.availableOptions[e]==="undefined"){throw new Error(`Invalid option: ${e}`)}if(typeof t[e]!=="undefined"){o=e.charAt(0).toUpperCase()+e.slice(1);this[`set${o}`](t[e],false,true)}}}set(t,e=true){Object.keys(t).forEach(r=>{this.setOption(r,t[r],false)});this._onOptionsChange();if(e){this.emit("update",this,t)}}getOption(t){return this._options[t]}hasOption(t){return!!this.availableOptions[t]}getOptionDefault(t){const e=this.availableOptions[t];if(!e){throw new Error(`Invalid option: ${t}`)}return e.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){const t={};for(const e in this.availableOptions){const r=this.availableOptions[e].default;if(typeof r==="undefined")continue;t[e]=r}return t}getOptions(){return{...this._options}}equals(t){const e=t.getOptions();return this.optionsEqual(e)}optionsEqual(t){for(const e in t){const r=t[e];if(!this._optionEquals(e,r)){return false}}return true}_optionEquals(t,e){const r=this.availableOptions[t];if(typeof r==="undefined"){throw new Error(`Invalid option: ${t}`)}const o=this.availableOptions[t].type;const n=this._options[t];if(n===e)return true;if(typeof e==="undefined"||typeof n==="undefined")return false;switch(o){case"object":if(typeof n.optionsEqual==="function"){return n.optionsEqual(e._options)}return n===e;case"string":case"number":case"boolean":case"function":case"*":return n===e;case"vector2":return n.equals(e);case"color":case"color-matrix":return e.equals(n);case"configurable":return n.optionsEqual(e);case"array":return this._arrayOptionEquals(t,e);case"image":return n.src===e.src}}_arrayOptionEquals(t,e){const r=this._options[t];if(e.length!==r.length){return false}let o=true;for(let n=0;n<r.length;n++){const s=r[n];const a=e[n];if(s instanceof wd){if(typeof a==="undefined"||!s.optionsEqual(a)){o=false;break}}else if(a!==s){o=false;break}}return o}serializeOptions(t=Object.keys(this._options),e=false){const r={};t.forEach(o=>{if(typeof this.availableOptions[o]==="undefined"){return Log.warn(`Trying to serialize a key that does not exist: ${o}`)}if(this.availableOptions[o].serializable===false)return;r[o]=this.serializeOption(o,e)});return r}serializeOption(t,e=false){const r=this.availableOptions[t];const o=r.type;const n=this._options[t];if(!n)return n;if(r.serializable===false){throw new Error(`Option \`${t}\` is not serializable.`)}switch(o){case"string":case"number":case"boolean":case"object":case"function":case"*":return n;case"vector2":return e?n.toObject():n.clone();case"color":case"color-matrix":return e?n.toArray():n.clone();case"configurable":return n.serializeOptions(void 0,e);case"array":return n.slice(0);case"image":return e?n.src:n}}setOption(t,e,r=true,o=false){const n=this.availableOptions[t];if(!n){throw new Error(`Invalid option: ${t}`)}if(typeof n.setter!=="undefined"){e=n.setter.call(this,e,o)}if(typeof n.validation!=="undefined"){n.validation(e)}if(e===null||typeof e==="undefined"){if(n.required){throw this._buildConfigError(`Option \`${t}\` is required.`)}this._options[t]=e}else{switch(n.type){case"string":{if(typeof e!=="string"){throw this._buildConfigError(`Option \`${t}\` has to be a string.`)}const{available:s}=n;if(typeof s!=="undefined"&&s.indexOf(e)===-1){throw this._buildConfigError(`Invalid value for \`${t}\` (valid values are: ${n.available.join(", ")})`)}this._options[t]=e;break}case"number":if(typeof e!=="number"){throw this._buildConfigError(`Option \`${t}\` has to be a number.`)}this._options[t]=e;break;case"boolean":if(typeof e!=="boolean"){throw this._buildConfigError(`Option \`${t}\` has to be a boolean.`)}this._options[t]=e;break;case"vector2":if(!(e instanceof rt)&&!(typeof e==="object"&&"x"in e&&"y"in e)){throw this._buildConfigError(`Option \`${t}\` has to be an instance of Vector2 or an Object holding x and y values.`)}if(e instanceof rt){this._options[t]=e.clone()}else{this._options[t]=rt.fromObject(e)}break;case"color":if(!(e instanceof W)){throw this._buildConfigError(`Option \`${t}\` has to be an instance of Color.`)}this._options[t]=e;break;case"color-matrix":if(!(e instanceof th)){throw this._buildConfigError(`Option \`${t}\` has to be an instance of ColorMatrix.`)}this._options[t]=e.clone();break;case"function":if(typeof e!=="function"){throw this._buildConfigError(`Option \`${t}\` has to be a function.`)}this._options[t]=e;break;case"object":case"*":this._options[t]=e;break;case"image":{const{Image:s}=mi;if(typeof e==="string"){const a=new s;if(S4(a)){a.crossOrigin=L.getCrossOriginValue(n.crossOrigin)}a.src=e;this._options[t]=a}else if(e instanceof s||typeof HTMLCanvasElement!=="undefined"&&e instanceof HTMLCanvasElement||typeof HTMLImageElement!=="undefined"&&e instanceof HTMLImageElement){this._options[t]=e}else{throw this._buildConfigError(`Option \`${t}\` has to be an Image, Canvas or String.`)}break}case"configurable":if(e instanceof wd){this._options[t]=e}else{this._options[t].set(e)}break;case"array":if(!(e instanceof Array)){throw this._buildConfigError(`Option \`${t}\` has to be an Array.`)}this._options[t]=e.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${n.type}\``)}}if(r){this._onOptionsChange();this.emit("update",this,{[t]:e})}}_onConfigurableUpdate(...t){this.emit("update",...t)}hasChanges(){const t=this.getDefaultOptions();return!this.optionsEqual(t)}};yt=wd});var eh;var R1=d(()=>{Or();Me();Me();eh=class{constructor(t,e,r,o={},n=[]){this._program=null;this._renderer=t;this._vertexSource=e;this._fragmentSource=r;this._uniforms=o;this._uniformLocations={};this._attributes=n;this._attributeLocations={};this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._init()}_init(){this._compile();const t=this._renderer.getContext();t.useProgram(this._program);this._cacheUniformLocations();this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(t,e){const r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,t);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e);r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,false,Ka,0);r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,false,Ka,2*4);r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,true,Ka,4*4)}syncUniforms(){Object.keys(this._uniforms).forEach(t=>{this.syncUniform(t)})}syncUniform(t){const e=this._renderer.getContext();const r=this._uniforms[t];const o=this._uniformLocations[t];switch(r.type){case"sampler2d":e.uniform1i(o,r.value);break;case"i":case"1i":e.uniform1i(o,r.value);break;case"2i":e.uniform2i(o,r.value[0],r.value[1]);break;case"3i":e.uniform3i(o,r.value[0],r.value[1],r.value[2]);break;case"4i":e.uniform4i(o,r.value[0],r.value[1],r.value[2],r.value[3]);break;case"f":case"1f":e.uniform1f(o,r.value);break;case"2f":e.uniform2f(o,r.value[0],r.value[1]);break;case"3f":e.uniform3f(o,r.value[0],r.value[1],r.value[2]);break;case"4f":e.uniform4f(o,r.value[0],r.value[1],r.value[2],r.value[3]);break;case"2fv":e.uniform2fv(o,r.value);break;case"mat3":case"mat3fv":e.uniformMatrix3fv(o,false,r.value);break;case"mat4":e.uniformMatrix4fv(o,false,r.value);break;default:q.warn(this.constructor.name,`Unknown uniform type: ${r.type}`)}}_cacheAttributeLocations(){const t=this._renderer.getContext();this._attributes.forEach(e=>{if(this._program){this._attributeLocations[e]=t.getAttribLocation(this._program,e)}})}_cacheUniformLocations(){const t=this._renderer.getContext();const e=Object.keys(this._uniforms);e.forEach(r=>{if(this._program){const o=t.getUniformLocation(this._program,r);if(o){this._uniformLocations[r]=o}}})}_addPrecisionToSource(t){const e=this._renderer.getMaxFloatPrecision();let r="mediump";if(L.isMobile()&&e==="highp"){r="highp"}return`precision ${r} float;
${t}`}_compile(){const t=this._renderer.getContext();const e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;const r=this._addPrecisionToSource(this._fragmentSource);const o=this._compileShader(t.FRAGMENT_SHADER,r);this._fragmentShader=o;const n=t.createProgram();if(!n){return}t.attachShader(n,e);t.attachShader(n,o);t.linkProgram(n);const s=t.getProgramParameter(n,t.LINK_STATUS);if(!s){let a=t.getProgramInfoLog(n);if(t.isContextLost())a="WebGL context lost";t.deleteProgram(n);q.error(this.constructor.name,`WebGL program linking error: ${a}`)}else{this._program=n}}_compileShader(t,e){const r=this._renderer.getContext();const o=r.createShader(t);if(!o){throw new Error(`Cannot create shared: ${JSON.stringify(t)}`)}r.shaderSource(o,e);r.compileShader(o);const n=r.getShaderParameter(o,r.COMPILE_STATUS);if(!n){let s=r.getShaderInfoLog(o);if(r.isContextLost())s="WebGL context lost";r.deleteShader(o);q.error(this.constructor.name,`WebGL shader compilation error: ${s}`)}return o}setUniform(t,e,r=false){this._uniforms[t].value=e;if(r){this.syncUniform(t)}}setUniforms(t,e=false){Object.keys(t).forEach(r=>{this._uniforms[r].value=t[r];if(e){this.syncUniform(r)}})}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){const t=this._renderer.getContext();t.deleteProgram(this._program);t.deleteShader(this._vertexShader);t.deleteShader(this._fragmentShader);this._renderer.off("context",this._onContextChange)}}});var G4;var W4=d(()=>{G4="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"});var j4;var V4=d(()=>{j4="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"});var mrt,Bs,O1;var $4=d(()=>{Or();Me();R1();W4();V4();mrt=new ir;Bs={vertexSource:j4,fragmentSource:G4,uniforms:{u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:mrt.toArray()}},attributes:["a_position","a_texCoord","a_color"]};O1=class extends eh{constructor(t,e=Bs.vertexSource,r=Bs.fragmentSource){super(t,e,r,Bs.uniforms,Bs.attributes)}}});var A1=d(()=>{R1();$4()});var zo;var kd=d(()=>{wo();H4();Or();Td();Me();A1();wn();zo=class extends yt{constructor(t={},e={}){super(t,e);this._initOptions(t)}_initOptions(t={}){this._shaders=[];this._availableUniforms=Bs.uniforms;this._attributes=Bs.attributes;this._vertexSource=Bs.vertexSource;this._fragmentSource=Bs.fragmentSource;this._initUniforms();super._initOptions(t)}_initUniforms(){this._uniforms={};for(const t in this._availableUniforms){const e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(const t in this.availableOptions){const e=this.availableOptions[t];if(!e.uniformType){q.trace(this.constructor.name,`Option \`${t}\` is missing a \`uniformType\`!`)}else{this._uniforms[`u_${t}`]={type:e.uniformType,value:e.default||null}}}}setOption(t,e,r=true){super.setOption(t,e,r);let o=e;const n=this.availableOptions[t];if(!n.uniformType){return}const s=`u_${t}`;switch(n.type){case"color":if(n.uniformType==="4f"){o=e.toGLColor()}else if(n.uniformType==="3f"){o=e.toRGBGLColor()}break;case"vector2":o=[e.x,e.y];break;case"color-matrix":{o=[e.a,e.b,e.c,e.d,e.f,e.g,e.h,e.i,e.k,e.l,e.m,e.n,e.p,e.q,e.r,e.s];const a=[e.e,e.j,e.o,e.t];this._uniforms[`${s}_vec`]={value:a,type:"4f"}}}this.setUniform(s,o)}setUniform(t,e,r=false){this._uniforms[t].value=e}setUniforms(t,e=false){Object.entries(t).forEach(([r,o])=>{this._uniforms[r].value=o;if(e){this.syncUniform(r)}})}syncUniform(t){this._shaders.forEach(e=>{e.syncUniform(t)})}syncUniforms(){this._shaders.forEach(t=>{t.syncUniforms()})}getShaderForRenderer(t){const{id:e}=t;if(!this._shaders)this._shaders=[];let r=this._shaders[e];if(!r){r=new eh(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes);this._shaders[e]=r}return r}apply(t,e,r,o=false){if(gd(t)){this._applyWebGL(t,e,r,o)}else{this._applyCanvas(t,e,r,o)}}_applyWebGL(t,e,r,o=false){const n=t.getContext();const s=this.getShaderForRenderer(t);t.setRenderTarget(r);if(o){r.clear()}t.setShader(s);const a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",a);s.syncUniforms();n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,e.getTexture());n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=r.getContext();q.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.");s.clearRect(0,0,n.width,n.height);s.drawImage(n,0,0)}dispose(){this._shaders.forEach(t=>t.dispose());this._shaders=[]}_blurImage(t,e,r){const o=10;const n=t.getCanvas();const s=Math.min(1,o/(r*Math.min(n.width,n.height)));const a=L.createCanvas();a.width=Math.round(n.width*s);a.height=Math.round(n.height*s);const l=a.getContext("2d");l.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height);const c=r*Math.min(a.width,a.height);const u=l.getImageData(0,0,a.width,a.height);N4(u,0,0,a.width,a.height,c);l.putImageData(u,0,0);e.getContext().drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height);jt(a)}}});var X4;var K4=d(()=>{X4="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"});var Id;var q4=d(()=>{kd();K4();Id=class extends zo{constructor(){super();this._fragmentSource=X4}}});var J4;var Y4=d(()=>{J4="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"});var frt,grt,B1,Z4;var Q4=d(()=>{Me();kd();Y4();({OptionType:frt,UniformType:grt}=er);B1=class extends zo{constructor(...t){super(...t);this._fragmentSource=J4}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const{color:l}=this._options;const c=s.getImageData(0,0,n.width,n.height);const u=a.getImageData(0,0,n.width,n.height);const m=n.width*n.height;const p=new W;const h=new W;for(let g=0;g<m*4;g+=4){p.set(c.data[g]/255,c.data[g+1]/255,c.data[g+2]/255,c.data[g+3]/255);h.set(u.data[g]/255,u.data[g+1]/255,u.data[g+2]/255,u.data[g+3]/255);const _=h.r+p.a*(p.r-h.r);u.data[g]=(_+p.a*(l.r-_))*255;const x=h.g+p.a*(p.g-h.g);u.data[g+1]=(x+p.a*(l.g-x))*255;const b=h.b+p.a*(p.b-h.b);u.data[g+2]=(b+p.a*(l.b-b))*255}a.putImageData(u,0,0)}};B1.prototype.availableOptions={color:{type:frt.COLOR,default:W.WHITE,uniformType:grt.FLOAT4}};Z4=B1});var e3;var t3=d(()=>{e3="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\nconst float EPSILON = 0.0000001;\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord); // Is premultiplied.\n    color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha.\n    vec4 newColor;\n    if (u_mode == 0) {\n        newColor = vec4(color.rgb, 1.0); // We use alpha 1.0 becaue color is not premultiplied.\n        newColor *= color.a; // Premultiply the result\n    } else if (u_mode == 1) {\n        newColor = vec4(u_color.rgb, 1.0); // Use alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    } else if (u_mode == 2) {\n        float luminance = dot(color.rgb, W); // Convert to color to gray value.\n        newColor = vec4(vec3(luminance) * u_color.rgb, 1.0); // Colorize and with alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    }\n    gl_FragColor = newColor;\n}"});var i3,r3,Xa,o3;var n3=d(()=>{Me();kd();t3();({OptionType:i3,UniformType:r3}=er);Xa=class extends zo{constructor(...t){super(...t);this._fragmentSource=e3}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{mode:c,color:u}=this._options;const{r:m,g:p,b:h,a:g}=u;const _=[.2125,.7154,.0721];switch(c){case Xa.MODES.SOLID:for(let x=0;x<n.width*n.height;x++){const b=x*4;l.data[b]+=(m*255-l.data[b])*g;l.data[b+1]+=(p*255-l.data[b+1])*g;l.data[b+2]+=(h*255-l.data[b+2])*g}break;case Xa.MODES.COLORIZED:for(let x=0;x<n.width*n.height;x++){const b=x*4;const w=l.data[b]/255*_[0]+l.data[b+1]/255*_[1]+l.data[b+2]/255*_[2];const T=new W(w*m,w*p,w*h);l.data[b]+=(T.r*255-l.data[b])*g;l.data[b+1]+=(T.g*255-l.data[b+1])*g;l.data[b+2]+=(T.b*255-l.data[b+2])*g}break}a.putImageData(l,0,0)}};Xa.MODES={NONE:0,SOLID:1,COLORIZED:2};Xa.prototype.availableOptions={color:{type:i3.COLOR,default:W.WHITE,uniformType:r3.FLOAT4},mode:{type:i3.NUMBER,default:Xa.MODES.NONE,uniformType:r3.INT}};o3=Xa});var a3;var s3=d(()=>{a3="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"});var Ry,P1,M1,Vi,l3;var c3=d(()=>{Me();kd();s3();({OptionType:Ry,UniformType:P1}=er);M1=1e-6;Vi=class extends zo{constructor(...t){super(...t);this._fragmentSource=a3;this._lastImage=null}_applyCanvas(t,e,r,o=false){const n=this._options.overlayTexture.getRenderTarget().getContext();const s=e.getCanvas();const a=e.getContext();const l=r.getContext();const c=a.getImageData(0,0,s.width,s.height);const u=n.getImageData(0,0,s.width,s.height);const{blendMode:m,alpha:p}=this._options;const h=new W;const g=new W;const _=new W;for(let x=0;x<s.width*s.height*4;x+=4){h.set(c.data[x]/255,c.data[x+1]/255,c.data[x+2]/255,c.data[x+3]/255);g.set(u.data[x]/255,u.data[x+1]/255,u.data[x+2]/255,u.data[x+3]/255);let b;let w;let T;let D;let O;let k;let E;let J;let tt;switch(m){case Vi.BLEND_MODES.NORMAL:_.set(h.r+g.a*p*(g.r-h.r),h.g+g.a*p*(g.g-h.g),h.b+g.a*p*(g.b-h.b),h.a);break;case Vi.BLEND_MODES.OVERLAY:b=1-2*(1-h.r)*(1-g.r);w=2*h.r*g.r;T=b+(h.r<.5?1:0)*(w-b);D=1-2*(1-h.g)*(1-g.g);O=2*h.g*g.g;k=D+(h.g<.5?1:0)*(O-D);E=1-2*(1-h.b)*(1-g.b);J=2*h.b*g.b;tt=E+(h.b<.5?1:0)*(J-E);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.HARD_LIGHT:b=1-2*(1-g.r)*(1-h.r);w=2*g.r*h.r;T=b+(g.r<.5?1:0)*(w-b);D=1-2*(1-g.g)*(1-h.g);O=2*g.g*h.g;k=D+(g.g<.5?1:0)*(O-D);E=1-2*(1-g.b)*(1-h.b);J=2*g.b*h.b;tt=E+(g.b<.5?1:0)*(J-E);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.SOFT_LIGHT:b=2*h.r*(1-g.r)+(2*g.r-1)*Math.sqrt(h.r);w=2*h.r*g.r+h.r*h.r*(1-2*g.r);T=b+(g.r<.5?1:0)*(w-b);D=2*h.g*(1-g.g)+(2*g.g-1)*Math.sqrt(h.g);O=2*h.g*g.g+h.g*h.g*(1-2*g.g);k=D+(g.g<.5?1:0)*(O-D);E=2*h.b*(1-g.b)+(2*g.b-1)*Math.sqrt(h.b);J=2*h.b*g.b+h.b*h.b*(1-2*g.b);tt=E+(g.b<.5?1:0)*(J-E);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.MULTIPLY:T=h.r*g.r;k=h.g*g.g;tt=h.b*g.b;_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.DARKEN:T=Math.min(h.r,g.r);k=Math.min(h.g,g.g);tt=Math.min(h.b,g.b);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.LIGHTEN:T=Math.max(h.r,g.r);k=Math.max(h.g,g.g);tt=Math.max(h.b,g.b);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.SCREEN:T=1-(1-h.r)*(1-g.r);k=1-(1-h.g)*(1-g.g);tt=1-(1-h.b)*(1-g.b);_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break;case Vi.BLEND_MODES.COLOR_BURN:T=Math.max(0,Math.min(1,1-(1-h.r)/Math.max(g.r,M1)));k=Math.max(0,Math.min(1,1-(1-h.g)/Math.max(g.g,M1)));tt=Math.max(0,Math.min(1,1-(1-h.b)/Math.max(g.b,M1)));_.set(h.r+g.a*p*(T-h.r),h.g+g.a*p*(k-h.g),h.b+g.a*p*(tt-h.b),h.a);break}c.data[x]=_.r*255;c.data[x+1]=_.g*255;c.data[x+2]=_.b*255;c.data[x+3]=_.a*255}l.putImageData(c,0,0)}};Vi.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8};Vi.prototype.availableOptions={blendMode:{type:Ry.NUMBER,default:Vi.BLEND_MODES.NORMAL,uniformType:P1.INT},overlayImage:{type:Ry.NUMBER,required:true,uniformType:P1.SAMPLER2D},overlayTexture:{type:Ry.OBJECT,required:true},alpha:{type:Ry.NUMBER,default:1,uniformType:P1.FLOAT}};l3=Vi});var L1={};ue(L1,{ColorOverlayFilter:()=>Z4,OverlayFilter:()=>l3,TintFilter:()=>o3,UnpremultiplyFilter:()=>Id});var z1=d(()=>{q4();Q4();n3();c3()});var u3,Dd,Oe;var Ed=d(()=>{Me();wn();u3={[1]:"LINEAR",[0]:"NEAREST",[2]:"LINEAR_MIPMAP_NEAREST",[3]:"LINEAR_MIPMAP_LINEAR"};Dd=class extends Gi{constructor(t){super();this._renderers=[];this._glTextures={};this._dirty=true;this._mipMapping=false;this._glUnit=0;this._magFilter=Dd.DefaultMagFilter;this._minFilter=Dd.DefaultMinFilter;this._repeatX=0;this._repeatY=0;this._pixelRatio=1;this._loaded=false;this._frame=new le(0,0,100,100);this._onSourceLoaded=this._onSourceLoaded.bind(this);this._source=t;this._loadSource()}resizeTo(t){if(this._frame.width===t.x&&this._frame.height===t.y){return}this._frame.width=t.x;this._frame.height=t.y;this._dirty=true}_loadSource(){const t=this._source;if(!t)return;if(mi.isCanvas(t)){return this._onSourceLoaded()}if(t.complete){return this._onSourceLoaded()}t.addEventListener&&t.addEventListener("load",this._onSourceLoaded)}_onSourceLoaded(){this._loaded=true;this.emit("loaded");this.update()}_updateGLFilters(){if(!this._source)return;const t=new rt(this._source.width,this._source.height);if(L.isPowerOfTwo(t)){q.info(this.constructor.name,"Mip-mapping enabled");this._minFilter=Dd.TrilinearFilter;this._mipMapping=true}else{this._minFilter=Dd.LinearFilter;this._mipMapping=false}}update(){if(!this._source)return;if(this._frame.width!==this._source.width||this._frame.height!==this._source.height){this._frame=new le(0,0,this._source.width,this._source.height);this._dirty=true}this._updateGLFilters();this.emit("update")}getRenderers(){return[...this._renderers]}getGLFilter(t,e){switch(e){case"min":return t[u3[this._minFilter]];case"mag":return t[u3[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(t){this._loaded=t}getSource(){return this._source}setSource(t){this._source=t}getGLTextureForRenderer(t){return this._glTextures[t.id]}setGLTextureForRenderer(t,e){this._renderers[e.id]=e;this._glTextures[e.id]=t}getFrame(){return this._frame}setFrame(t){this._frame=t}getDimensions(){return new rt(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t}getGLUnit(){return this._glUnit}setGLUnit(t){this._glUnit=t}setMinFilter(t){this._minFilter=t}getMinFilter(){return this._minFilter}setMagFilter(t){this._magFilter=t}getMagFilter(){return this._magFilter}setRepeatX(t){this._repeatX=t}getRepeatX(){return this._repeatX}setRepeatY(t){this._repeatY=t}getRepeatY(){return this._repeatY}getGLRepeat(t,e){const r=e==="x"?this.getRepeatX():this.getRepeatY();switch(r){case 0:return t.CLAMP_TO_EDGE;case 1:return t.REPEAT;case 2:return t.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(t){this._dirty=t}disposeGLTextures(){this._renderers.forEach(t=>{if(gd(t)){this.disposeGLTexturesForRenderer(t)}})}disposeGLTexturesForRenderer(t){if(!this._glTextures[t.id])return;const e=t.getContext();e.deleteTexture(this._glTextures[t.id]);delete this._glTextures[t.id];if(!this._renderers[t.id]){delete this._renderers[t.id]}}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(t){this._mipMapping=t}dispose(){this.disposeGLTextures();this._source=void 0}};Oe=Dd;Oe.NearestFilter=0;Oe.LinearFilter=1;Oe.BilinearFilter=2;Oe.TrilinearFilter=3;Oe.DefaultMagFilter=1;Oe.DefaultMinFilter=1;Oe.Repeat=1;Oe._id=0});var Ps;var ih=d(()=>{Me();Ed();wn();Ps=class{constructor(t,e,r,o=mi.createCanvas(),n){this._width=t;this._height=e;this._pixelRatio=r;this._baseTexture=new Oe;this._canvas=o;const s=n||this._canvas.getContext("2d");if(!s){throw new Error("Cannot get canvas context")}this._context=s;this._baseTexture.setSource(this._canvas);this._canvas.width=this._width*this._pixelRatio;this._canvas.height=this._height*this._pixelRatio;this._filterStack=[{renderTarget:this,filters:[]}]}clear(){const t=this._context;t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(t){this._baseTexture.resizeTo(t);if(this._width!==t.x){this._width=t.x;this._canvas.width=this._width*this._pixelRatio}if(this._height!==t.y){this._height=t.y;this._canvas.height=this._height*this._pixelRatio}}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t}getDimensions(){return new rt(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas;delete this._context;this._baseTexture.dispose()}}});var ac;var Oy=d(()=>{Me();ih();ac=class{constructor(t){this._renderer=t;this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}];this._textures=[];this._textureFrame=new le(0,0,t.getWidth(),t.getHeight())}resizeTo(t){this._textureFrame.width=t.x;this._textureFrame.height=t.y;this._textures.forEach(e=>e.resizeTo(t))}pushFilters(t,e){this._currentFrame=t.getBounds();const r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r);this._filterStack.push({renderTarget:r,filters:e});r.clear()}popFilters(){const t=this._filterStack.pop();if(!t)return void 0;const{filters:e,renderTarget:r}=t;const o=this._filterStack[this._filterStack.length-1];const n=r;const s=o.renderTarget;if(e.length===1){const a=e[0];a.apply(this._renderer,n,s);this._textures.push(n)}else{this._applyFilters(e,n,s)}return e}_applyFilters(t,e,r){let o=e;let n=this._getOrCreateRenderTarget(true);const s=t[t.length-1];t.forEach(a=>{const l=a===s;if(!l){a.apply(this._renderer,o,n);const c=o;o=n;n=c}else{a.apply(this._renderer,o,r)}});this._textures.push(o);this._textures.push(n)}_getOrCreateRenderTarget(t=false){let e=this._textures.pop();if(!e){e=new Ps(this._textureFrame.width,this._textureFrame.height,1)}if(t){e.clear()}return e}setFilterStack(t){this._filterStack=t}dispose(){}}});var oh=Wt((d3,rh)=>{(function(){var i,t,e,r,o,n;if(typeof performance!=="undefined"&&performance!==null&&performance.now){rh.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){rh.exports=function(){return(i()-o)/1e6};t=process.hrtime;i=function(){var s;s=t();return s[0]*1e9+s[1]};r=i();n=process.uptime()*1e9;o=r-n}else if(Date.now){rh.exports=function(){return Date.now()-e};e=Date.now()}else{rh.exports=function(){return new Date().getTime()-e};e=new Date().getTime()}}).call(d3)});var m3,p3,Ay;var U1=d(()=>{Me();m3=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oh();p3=class{constructor(t){this._context=t;this._tracking=false;const e=this;for(const r in t){const o=t[r];if(typeof o==="function"){this[r]=function(...n){const s=t[r];if(!e._tracking){return s.apply(t,n)}const a=m3();const l=s.apply(t,n);const c=m3()-a;const u={functionName:r,arguments:n,duration:c};e._trackedCalls.push(u);return l}}else{this._makePropertyWrapper(r)}}}_makePropertyWrapper(t){const e=["_context","_trackedCalls","_tracking"];if(e.indexOf(t)!==-1)return;const r=this._context;this.__defineGetter__(t,()=>{return r[t]});this.__defineSetter__(t,o=>{r[t]=o})}startFrame(){this._tracking=true;this._trackedCalls=[]}endFrame(){const t="Rendering";q.log(t,"Frame rendering results:");q.log(t,`Context calls: ${this._trackedCalls.length}`);const e={};this._trackedCalls.forEach(({functionName:o,duration:n})=>{e[o]=e[o]||{totalDuration:0,calls:0};e[o].totalDuration+=n;e[o].calls++});let r=[];for(const o in e){const n=e[o];n.averageDuration=n.totalDuration/n.calls;r.push({functionName:o,data:n})}r.sort((o,n)=>n.data.totalDuration-o.data.totalDuration);r=r.slice(0,3);r.forEach(o=>{q.log(t,`${o.functionName}: ${o.data.calls} calls, ${o.data.totalDuration.toFixed(2)}ms`)})}};Ay=p3});var nh;var N1=d(()=>{Me();nh=class extends Gi{constructor(t=800,e=600,r){super();this._maxTextureSize=null;this._options={debug:false,transparent:false,clearColor:W.TRANSPARENT,...r,pixelRatio:1};this.setMaxListeners(0);this._width=t;this._height=e;this._dimensions=new rt(this._width,this._height);this._maxTextureSize=null;this._pixelRatio=this._options.pixelRatio;this._canvas=this._options.canvas;this._clearColor=this._options.transparent?W.TRANSPARENT:this._options.clearColor||W.BLACK}setCanvas(t){const e=this._canvas;this._canvas=t;if(e!==t){this._createContext();this._onBeforeContext();this._setupContext()}this.resizeTo(new rt(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(t,e=true){this._width=t.x*this._pixelRatio;this._height=t.y*this._pixelRatio;if(e&&this._canvas){this._canvas.width=this._width;this._canvas.height=this._height;if("style"in this._canvas){this._canvas.style.width=`${this._width/this._pixelRatio}px`;this._canvas.style.height=`${this._height/this._pixelRatio}px`}}this._dimensions=t.clone()}_createContext(){q.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){q.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(t){q.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t;if(this._defaultRenderTarget){this._defaultRenderTarget.setPixelRatio(t)}}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(t){this._filterManager=t}setClearColor(t){this._clearColor=t}getClearColor(){return this._clearColor}isOfType(t){return this._type===t}dispose(){q.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}});var h3,H1,Fd;var f3=d(()=>{wo();Ey();Me();Oy();ih();U1();wn();N1();({RendererType:h3}=er);H1=class extends nh{constructor(t=800,e=600,r){super(t,e,{...r});this.id=0;this.setCanvas((r==null?void 0:r.canvas)||mi.createCanvas());this._type=h3.CANVAS}_createContext(){const t=this._canvas;let e=t.getContext("2d");if(!e)return;if(this._options.debug){e=new Ay(e)}this.id=H1.contextId++;this._context=e;this.emit("context",e);return e}_setupContext(){const t=this._context;if(!("imageSmoothingEnabled"in t)){["moz","webkit","ms"].forEach(e=>{if(t[e]){t[e]=true}})}else{t.imageSmoothingEnabled=true}this._defaultRenderTarget=new Ps(this._width,this._height,this._pixelRatio,this._canvas,this._context);this.setRenderTarget(this._defaultRenderTarget);this._filterManager=new ac(this)}render(t){const e=this._renderTarget.getContext();const r=t.getParent();t.setParent(new sc);t.updateTransform();if(r){t.setParent(r)}e.setTransform(1,0,0,1,0,0);e.globalAlpha=1;const{width:o,height:n}=this._canvas;e.clearRect(0,0,o,n);if(this._clearColor.a!==0){e.save();e.fillStyle=this._clearColor.toRGBA();e.fillRect(0,0,o,n);e.restore()}this.renderDisplayObject(t,this._renderTarget)}renderDisplayObject(t,e){const r=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack());this.setRenderTarget(e);t.renderCanvas(this);this.setRenderTarget(r)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(t){this._renderTarget=t}getContext(){return this._renderTarget.getContext()}dispose(){jt(this._canvas);this._filterManager.dispose()}};Fd=H1;Fd.contextId=0;Fd.type=h3.CANVAS});var g3;var b3=d(()=>{g3=i=>{if(typeof window!=="undefined"){const{WebGLDebugUtils:t}=window;if(t){const e=(r,o)=>{console.error(`gl.${r}(${t.glFunctionArgsToString(r,o)})`)};i=t.makeDebugContext(i,null,e)}}return i}});var W1;var y3=d(()=>{W1=class{constructor(t){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.vertexBuffer=null;this.indexBuffer=null;this.gl=t;this.initBuffers();this.uploadBuffers()}map(t,e){const{x:r,y:o}=e;this.uvs[2]=e.width/t.width;this.uvs[4]=this.uvs[2];this.uvs[5]=e.height/t.height;this.uvs[7]=this.uvs[5];this.vertices[0]=r;this.vertices[1]=o;this.vertices[2]=r+e.width;this.vertices[3]=o;this.vertices[4]=this.vertices[2];this.vertices[5]=o+e.height;this.vertices[6]=r;this.vertices[7]=this.vertices[5];this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){const{gl:t}=this;this.cleanBuffer();this.vertexBuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer);t.bufferData(t.ARRAY_BUFFER,(8+8+16)*4,t.DYNAMIC_DRAW);this.indexBuffer=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)}uploadBuffers(){const{gl:t}=this;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer);t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);t.bufferSubData(t.ARRAY_BUFFER,8*4,this.uvs);t.bufferSubData(t.ARRAY_BUFFER,(8+8)*4,this.colors)}cleanBuffer(){const{gl:t}=this;t.deleteBuffer(this.vertexBuffer);t.deleteBuffer(this.indexBuffer)}}});var Ms;var sh=d(()=>{Me();Ed();Ms=class{constructor(t,e,r,o,n=false){this._renderer=t;this._gl=t.getContext();this._width=e;this._height=r;this._frame=null;this._pixelRatio=o;this._projectionMatrix=new ir;this._mipMapping=false;this._baseTexture=new Oe;const s=this._baseTexture.getFrame();s.width=e;s.height=r;this._baseTexture.setPixelRatio(o);this._baseTexture.setLoaded(true);this._framebuffer=null;this._isRoot=n;this._filterStack=[{renderTarget:this,filters:[]}];if(!n){this._initFrameBuffer()}}resizeTo(t){this._width=t.x|0;this._height=t.y|0;this._baseTexture.resizeTo(t);if(!this._isRoot){this._resizeTexture()}this._baseTexture.setMinFilter(this._getMinFilter());this._baseTexture.setMagFilter(this._getMagFilter());this._calculateProjectionMatrix()}_getMinFilter(){let t=Oe.DefaultMinFilter;if(this._mipMapping){t=Oe.TrilinearFilter}return t}_getMagFilter(){return Oe.DefaultMagFilter}_resizeTexture(){const t=this._gl;const e=this._width*this._pixelRatio;const r=this._height*this._pixelRatio;if(this._texture){t.deleteTexture(this._texture);this._texture=null}this._texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,this._texture);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0);if(this._texture){this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer)}if(this._renderer._options.debug){oc.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}const o=new rt(this._width,this._height);if(L.isPowerOfTwo(o)){q.info("WebGLRenderTarget","Mip-mapping enabled");this._mipMapping=true}else{this._mipMapping=false}this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer);this._calculateProjectionMatrix();t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio);t.disable(t.STENCIL_TEST)}clear(t=W.TRANSPARENT){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer);if(this._renderer._options.debug){oc.checkFramebufferStatus("WebGLRenderTarget#clear",e)}e.clearColor.apply(e,t.toGLColor());e.clear(e.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){const t=this._projectionMatrix;t.reset();const e=this._frame||new le(0,0,this._width,this._height);const{x:r,y:o}=e;if(!this._isRoot){t.a=1/this._width*2;t.d=1/this._height*2;t.tx=-1-r*t.a;t.ty=-1-o*t.d}else{t.a=1/this._width*2;t.d=-1/this._height*2;t.tx=-1-r*t.a;t.ty=1-o*t.d}}_initFrameBuffer(){const t=this._gl;if(this._framebuffer){t.deleteFramebuffer(this._framebuffer);this._framebuffer=null}if(this._texture){t.deleteTexture(this._texture);this._texture=null}this._framebuffer=t.createFramebuffer();this._texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,this._texture);t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0);if(this._texture){this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer)}this.resizeTo(new rt(this._width,this._height));if(this._renderer._options.debug){oc.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(t){this._frame=t}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t;if(!this._isRoot){this._resizeTexture()}}getBaseTexture(){return this._baseTexture}dispose(){const t=this._gl;this._baseTexture.dispose();if(this._framebuffer){t.deleteFramebuffer(this._framebuffer);this._framebuffer=null}if(this._texture){t.deleteTexture(this._texture);this._texture=null}}}});var ah;var G1=d(()=>{z1();Me();y3();wn();sh();ah=class{constructor(t){this._renderer=t;this._filterStack=[];this._currentFrame=null;this._renderTargets=[];this._textureFrame=new le(0,0,t.getWidth(),t.getHeight());this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._onContextChange()}resizeTo(t){this._textureFrame.width=t.x;this._textureFrame.height=t.y;this._renderTargets.forEach(e=>e.resizeTo(t))}getFilterStack(){return this._filterStack}setFilterStack(t){this._filterStack=t}_getOrCreateRenderTarget(t=false){let e=this._renderTargets.pop();if(!e){e=new Ms(this._renderer,this._textureFrame.width,this._textureFrame.height,1)}if(this._currentFrame){e.setFrame(this._currentFrame)}if(t){e.clear()}return e}pushFilters(t,e){const r=t.getBounds();this._currentFrame=r;const o=t.getFilterRectangle();if(o.width>0&&o.height>0){this._currentFrame=o}const n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n);const s=e[0]instanceof Id;if(s){n.clear(this._renderer.getClearColor())}else{n.clear()}this._filterStack.push({renderTarget:n,filters:e})}popFilters(){const t=this._filterStack.pop();if(!t)return void 0;const{filters:e,renderTarget:r}=t;const o=this._filterStack[this._filterStack.length-1];const n=r;const s=o.renderTarget;const a=n.getFrame();if(a){this._quad.map(this._textureFrame,a)}const l=e[0].getShaderForRenderer(this._renderer);const c=this._quad.getVertexBuffer();const u=this._quad.getIndexBuffer();const m=this._renderer.getContext();m.bindBuffer(m.ARRAY_BUFFER,c);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u);const p=l.getAttributeLocations();m.vertexAttribPointer(p.a_position,2,m.FLOAT,false,0,0);m.vertexAttribPointer(p.a_texCoord,2,m.FLOAT,false,0,2*4*4);m.vertexAttribPointer(p.a_color,4,m.FLOAT,false,0,4*4*4);this._renderer.updateTexture(n.getBaseTexture(),false);if(e.length===1){e[0].apply(this._renderer,n,s);this._renderTargets.push(n)}else{this._applyFilters(e,n,s)}return e}_applyFilters(t,e,r){let o=e;let n=this._getOrCreateRenderTarget(true);this._renderer.updateTexture(n.getBaseTexture(),false);const s=t[t.length-1];t.forEach(a=>{const l=a===s;if(!l){a.apply(this._renderer,o,n,true);const c=o;o=n;n=c}else{a.apply(this._renderer,o,r,true)}});this._renderTargets.push(o);this._renderTargets.push(n)}_onContextChange(){this._renderTargets.length=0;if(gd(this._renderer)){if(this._quad){this._quad.dispose()}this._quad=new W1(this._renderer.getContext())}}dispose(){this._renderer.off("context",this._onContextChange);if(this._quad){this._quad.dispose()}this._renderTargets.forEach(t=>{t.dispose()})}}});var _3=Wt((WDt,V1)=>{var lh=function(){function i(u){r.appendChild(u.dom);return u}function t(u){for(var m=0;m<r.children.length;m++)r.children[m].style.display=m===u?"block":"none";e=u}var e=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";r.addEventListener("click",function(u){u.preventDefault();t(++e%r.children.length)},false);var o=(performance||Date).now(),n=o,s=0,a=i(new lh.Panel("FPS","#0ff","#002")),l=i(new lh.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=i(new lh.Panel("MB","#f08","#201"));t(0);return{REVISION:16,dom:r,addPanel:i,showPanel:t,begin:function(){o=(performance||Date).now()},end:function(){s++;var u=(performance||Date).now();l.update(u-o,200);if(u>n+1e3&&(a.update(1e3*s/(u-n),100),n=u,s=0,c)){var m=performance.memory;c.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return u},update:function(){o=this.end()},domElement:r,setMode:t}};lh.Panel=function(i,t,e){var r=Infinity,o=0,n=Math.round,s=n(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,u=2*s,m=3*s,p=15*s,h=74*s,g=30*s,_=document.createElement("canvas");_.width=a;_.height=l;_.style.cssText="width:80px;height:48px";var x=_.getContext("2d");x.font="bold "+9*s+"px Helvetica,Arial,sans-serif";x.textBaseline="top";x.fillStyle=e;x.fillRect(0,0,a,l);x.fillStyle=t;x.fillText(i,c,u);x.fillRect(m,p,h,g);x.fillStyle=e;x.globalAlpha=.9;x.fillRect(m,p,h,g);return{dom:_,update:function(b,w){r=Math.min(r,b);o=Math.max(o,b);x.fillStyle=e;x.globalAlpha=1;x.fillRect(0,0,a,p);x.fillStyle=t;x.fillText(n(b)+" "+i+" ("+n(r)+"-"+n(o)+")",c,u);x.drawImage(_,m+s,p,h-s,g,m,p,h-s,g);x.fillRect(m+h-s,p,s,g);x.fillStyle=e;x.globalAlpha=.9;x.fillRect(m+h-s,p,s,n((1-b/w)*g))}}};typeof V1==="object"&&(V1.exports=lh)});var qa,By;var x3=d(()=>{qa=y(_3());By=class{constructor(t){this._context=t;this._domAvailable=typeof document!=="undefined";this._hookIntoContext();this._textures={};this._framebuffers={};this._programs={};this._shaders={};this._buffers={};this._boundTexture=null;this._id=0;this._enums={};this._setupStats();this._createEnumMap();this._updateMemoryStats=this._updateMemoryStats.bind(this);this._updateMemoryStats()}_createEnumMap(){for(const t in this._context){const e=this._context[t];if(typeof e==="number"){this._enums[e]=t}}}_enumValueToString(t){const e=this._enums[t];return typeof e==="undefined"?t:e}_setupStats(){if(!this._domAvailable)return;this._stats=new qa.default;this._stats.showPanel(3);this._memPanel=this._stats.addPanel(new qa.default.Panel("MB [WebGL]","#43ADEB","#282828"));this._texPanel=this._stats.addPanel(new qa.default.Panel("Textures","#43ADEB","#282828"));this._bufPanel=this._stats.addPanel(new qa.default.Panel("Buffers","#43ADEB","#282828"));this._fboPanel=this._stats.addPanel(new qa.default.Panel("FBOs","#43ADEB","#282828"));this._prgPanel=this._stats.addPanel(new qa.default.Panel("Programs","#43ADEB","#282828"));this._shdPanel=this._stats.addPanel(new qa.default.Panel("Shaders","#43ADEB","#282828"))}_updatePanel(t){if(!this._domAvailable)return;this._stats.begin();switch(t){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50);break}this._stats.end()}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;const t=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(t,400);setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let t=0;for(const e in this._textures){t+=this._textures[e].memory}for(const e in this._buffers){t+=this._buffers[e].memory}return t}_hookIntoContext(){for(const t in this._context){const e=this._context[t];if(typeof e==="function"){this[t]=function(...r){const o=this._context[t];return this._trackGLCall(o,t,r)}}else{this._makePropertyWrapper(t)}}}_makePropertyWrapper(t){const e=["_context"];if(e.indexOf(t)!==-1)return;const r=this._context;this.__defineGetter__(t,()=>{return r[t]});this.__defineSetter__(t,o=>{r[t]=o})}_trackGLCall(t,e,r){const o=["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"];let n;if(o.indexOf(e)!==-1){n=this[`_${e}`](r)}else{n=t.apply(this._context,r)}const s=this._context.getError();if(s!==0){let a=r.join(", ");if(a.length>100){a=`${a.substr(0,100)}...`}console.error(new Error(`WebGL Error ${this._enumValueToString(s)} in ${e}(${a})`))}return n}_createProgram(){const t=this._context.createProgram();t._wmmId=this._id++;this._programs[t._wmmId]=t;this._updatePanel("prg");return t}_deleteProgram([t]){if(!t||!this._programs[t._wmmId])return;delete this._programs[t._wmmId];this._context.deleteProgram(t);this._updatePanel("prg")}_createShader([t]){const e=this._context.createShader(t);e._wmmId=this._id++;this._shaders[e._wmmId]=e;this._updatePanel("shd");return e}_deleteShader([t]){if(!t||!this._shaders[t._wmmId])return;delete this._shaders[t._wmmId];this._context.deleteShader(t);this._updatePanel("shd")}_createFramebuffer(){const t=this._context.createFramebuffer();t._wmmId=this._id++;this._framebuffers[t._wmmId]=t;this._updatePanel("fbo");return t}_deleteFramebuffer([t]){if(!t||!this._framebuffers[t._wmmId])return;delete this._framebuffers[t._wmmId];this._context.deleteFramebuffer(t);this._updatePanel("fbo")}_createBuffer(){const t=this._context.createBuffer();t._wmmId=this._id++;this._buffers[t._wmmId]={buffer:t,memory:0};this._updatePanel("buf");return t}_bindBuffer([t,e]){this._context.bindBuffer(t,e);this._boundBuffer=e._wmmId}_bufferData([t,e,r]){this._context.bufferData(t,e,r);let o;if(typeof e==="number"){o=e}else if("byteLength"in e){o=e.byteLength}else if("length"in e){o=e.length}this._buffers[this._boundBuffer].memory=o}_deleteBuffer([t]){if(!t||!this._buffers[t._wmmId])return;delete this._buffers[t._wmmId];this._context.deleteBuffer(t);this._updatePanel("buf")}_createTexture(){const t=this._context.createTexture();t._wmmId=this._id++;this._textures[t._wmmId]={texture:t,memory:0};this._updatePanel("tex");return t}_deleteTexture([t]){if(!t||!this._textures[t._wmmId])return;delete this._textures[t._wmmId];this._context.deleteTexture(t);this._updatePanel("tex")}_bindTexture([t,e]){this._context.bindTexture(t,e);this._boundTexture=e._wmmId}_texImage2D(t){let[,,e,r,o,n,,,s]=t;if(typeof s==="undefined"){s=n}this._context.texImage2D.apply(this._context,t);const a=this._calculateByteCountForTexture(e,r,o,s);this._textures[this._boundTexture].memory=a}_calculateByteCountForTexture(t,e,r,o){if(o!==null){if("width"in o){e=o.width;r=o.height}else{return o.length}}let n=1;switch(t){case this._context.ALPHA:n=1;break;case this._context.RGB:n=3;break;case this._context.RGBA:n=4;break}return e*r*n}}});var ch;var j1=d(()=>{ch=class{constructor(t){this._renderer=t;this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange);delete this._renderer}}});var $1;var v3=d(()=>{Me();j1();$1=class extends ch{constructor(t){super(t);this._vertexBuffer=null;this._indexBuffer=null;this._maxBatchSize=Sd;this._vertices=new ArrayBuffer(Sd*4*Ka);this._positions=new Float32Array(this._vertices);this._colors=new Uint32Array(this._vertices);this._indices=new Uint16Array(Sd*6);for(let e=0,r=0;e<Sd*6;e+=6,r+=4){this._indices[e+0]=r+0;this._indices[e+1]=r+1;this._indices[e+2]=r+2;this._indices[e+3]=r+0;this._indices[e+4]=r+2;this._indices[e+5]=r+3}this._sprites=[];this._currentBatchSize=0;this._onContextChange()}render(t){const e=t.getTexture();if(!e)return;const r=e.getFrame();const o=e.getBaseTexture();if(this._currentBatchSize>=this._maxBatchSize){this.flush()}const n=e.getUVs();if(!n){return}const s=this._currentBatchSize*Ka;this._addVertexCoordinates(t,s,r);this._addTextureUVs(t,s,n);this._addColors(t,s);this._sprites[this._currentBatchSize]=t;this._currentBatchSize++}_addColors(t,e){const r=this._colors;const o=16777215;const n=(o>>16)+(o&65280)+((o&255)<<16)+(t.getWorldAlpha()*255<<24);r[e+4]=r[e+9]=r[e+14]=r[e+19]=n}_addTextureUVs(t,e,r){const o=this._positions;const[n,s,a,l]=r;o[e+2]=n.x;o[e+3]=n.y;o[e+7]=s.x;o[e+8]=s.y;o[e+12]=a.x;o[e+13]=a.y;o[e+17]=l.x;o[e+18]=l.y}_addVertexCoordinates(t,e,r){const o=this._positions;const n=t.getWorldTransform();const s=t.getAnchor();const a=n.rectangleToCoordinates(r,s);const l=5;for(let c=0;c<4;c++){o[e+c*l]=a[c].x;o[e+c*l+1]=a[c].y}}_onContextChange(){const t=this._renderer.getContext();this._shader=this._renderer.shaders.default;if(this._vertexBuffer){this._vertexBuffer=null}if(this._indexBuffer){this._indexBuffer=null}this._vertexBuffer=t.createBuffer();this._indexBuffer=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW);t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer);t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}start(){if(this._vertexBuffer&&this._indexBuffer){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}}flush(){var p;const t=this._renderer;const e=t.getContext();if(this._currentBatchSize===0){return}if(this._currentBatchSize>Sd*.5){e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices)}else{const h=this._positions.subarray(0,this._currentBatchSize*Ka);e.bufferSubData(e.ARRAY_BUFFER,0,h)}let r=0;let o=null;let n=null;let s=null;let a=null;let l=false;let c=false;let u=null;let m=0;for(let h=0,g=this._currentBatchSize;h<g;h++){u=this._sprites[h];n=(p=u.getTexture())==null?void 0:p.getBaseTexture();a=u.getShader()||this._shader;l=s!==a;c=o!==n;if(c||l){if(o){this._renderBatch(o,r,m)}m=h;r=0;o=n;if(l){s=a;t.setShader(s);const _=t.getCurrentRenderTarget();const x=_.getProjectionMatrix().toArray();s.setUniform("u_projMatrix",x);s.syncUniforms();e.activeTexture(e.TEXTURE0)}}r++}if(o){this._renderBatch(o,r,m)}this._currentBatchSize=0;this._sprites=[]}_renderBatch(t,e,r){if(e===0){return}const o=this._renderer;const n=o.getContext();let s=t.getGLTextureForRenderer(o);if(!s){s=o.getOrCreateGLTexture(t)}if(t.isDirty()){o.updateTexture(t);t.setDirty(false)}n.activeTexture(n.TEXTURE0+t.getGLUnit());n.bindTexture(n.TEXTURE_2D,s);const a=e*6;const l=r*6*2;n.drawElements(n.TRIANGLES,a,n.UNSIGNED_SHORT,l)}dispose(){const t=this._renderer;const e=t.getContext();this._sprites.forEach(r=>{r.dispose()});if(this._vertexBuffer){e.deleteBuffer(this._vertexBuffer);this._vertexBuffer=null}if(this._indexBuffer){e.deleteBuffer(this._indexBuffer);this._indexBuffer=null}delete this._vertices;delete this._positions;delete this._colors;delete this._indices;super.dispose()}}});var K1,Py;var C3=d(()=>{b3();wo();Or();Ey();Me();G1();A1();U1();wn();sh();x3();N1();j1();v3();K1=class extends nh{constructor(t=800,e=600,r){super(t,e,r);this.type="webgl";this.maxTextureDimensions=null;this._type="webgl";this._onContextLost=this._onContextLost.bind(this);this._onContextRestored=this._onContextRestored.bind(this);this.setCanvas(this._options.canvas||mi.createCanvas());this.shaders={default:new O1(this,void 0,void 0)};this.renderers={sprite:new $1(this)}}_onContextLost(t){t.preventDefault();q.warn(this.constructor.name,"WebGL context has been lost - trying to restore.");this.emit("context-lost")}_onContextCreationError(t){t.preventDefault();q.warn(this.constructor.name,`Failed to create WebGL context: ${t.statusMessage||"Unknown error"}`)}_onContextRestored(){q.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures.");this._createContext();this._setupContext();this.emit("context-restored")}_onBeforeContext(){if(this._filterManager){this._filterManager.dispose()}this._filterManager=new ah(this);this._currentObjectRenderer=new ch(this)}setShader(t){this._currentShader=t;this._context.useProgram(t.getProgram());this._setAttributesForShader(t)}setCanvas(t){if(this._canvas){this._removeContextEventListeners()}super.setCanvas(t);this._addContextEventListeners()}_addContextEventListeners(){if(y1(this._canvas)){this._canvas.addEventListener("webglcontextlost",this._onContextLost);this._canvas.addEventListener("webglcontextrestored",this._onContextRestored);this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}}_removeContextEventListeners(){if(y1(this._canvas)){this._canvas.removeEventListener("webglcontextlost",this._onContextLost);this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored);this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}}_setAttributesForShader(t){if(!this._canvas)return;const e=this._context;const r=t.getAttributes();const o=t.getAttributeLocations();r.forEach(n=>{const s=o[n];e.enableVertexAttribArray(s)})}_createContext(){if(!this._canvas)return;let t=mi.glGet(this._canvas);if(this._options.debug){g3(t)}if(this._options.debug){t=new Ay(t);t=new By(t)}this.id=K1.contextId++;this._context=t;this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE);this.emit("context",t);return t}_setupContext(){const t=this._context;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);t.enable(t.BLEND);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);this._defaultRenderTarget=new Ms(this,this._width,this._height,this._pixelRatio,true);this.setRenderTarget(this._defaultRenderTarget);this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){const t=this._context;const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=(e==null?void 0:e.precision)!==0?"highp":"mediump";const r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=(r==null?void 0:r.rangeMax)!==0?"highp":"lowp"}resizeTo(t,e=true){super.resizeTo(t,e);if(this._currentRenderTarget){this._currentRenderTarget.resizeTo(t)}this._context=mi.glResize(this._context,t)}setRenderTarget(t=this._defaultRenderTarget){this._currentRenderTarget=t;this._currentRenderTarget.activate()}setObjectRenderer(t){this._currentObjectRenderer.stop();this._currentObjectRenderer=t;this._currentObjectRenderer.start()}render(t){this.setRenderTarget(this._defaultRenderTarget);this._defaultRenderTarget.clear(this._clearColor);const e=t.getParent();t.setParent(new sc);t.updateTransform();if(e){t.setParent(e)}this.renderDisplayObject(t,this._defaultRenderTarget)}renderDisplayObject(t,e){this.setRenderTarget(e);this._filterManager.setFilterStack(e.getFilterStack());t.renderWebGL(this);this._currentObjectRenderer.flush()}clear(){const t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor);t.clear(t.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(t){this.setRenderTarget(t.renderTarget);this._filterManager.setFilterStack(t.filterStack);this._currentObjectRenderer=t.objectRenderer}getOrCreateGLTexture(t){const e=this._context;let r=t.getGLTextureForRenderer(this);if(!r){r=e.createTexture();t.setGLTextureForRenderer(r,this)}return r}updateTexture(t,e=true){const r=t.getSource();const o=this._context;const n=t.getGLUnit();const s=this.getOrCreateGLTexture(t);o.activeTexture(o.TEXTURE0+n);o.bindTexture(o.TEXTURE_2D,s);o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true);if(e&&r){mi.glTexImage(o,r)}if(t.isMipMappingEnabled()){o.generateMipmap(o.TEXTURE_2D)}else{o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t.getGLRepeat(o,"x"));o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t.getGLRepeat(o,"y"))}o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t.getGLFilter(o,"min"));o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t.getGLFilter(o,"mag"));o.activeTexture(o.TEXTURE0)}getMaxDimensions(){if(!this.maxTextureDimensions){this.maxTextureDimensions=mi.glMaxTexture(this._context)}return this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){if(this._canvas){jt(this._canvas)}this._filterManager.dispose();this._currentObjectRenderer.dispose();this._defaultRenderTarget.dispose();for(const r in this.shaders){this.shaders[r].dispose();delete this.shaders[r]}this._removeContextEventListeners();const t=this._context;const e=t.getExtension("WEBGL_lose_context");if(e){e.loseContext()}}};Py=K1;Py.contextId=0});var _rt,xrt,X1;var S3=d(()=>{As();_rt=()=>[new rt(0,0),new rt(1,0),new rt(1,1),new rt(0,1)];xrt=(i,t,e)=>{const[r,o,n,s]=i;r.x=t.x/e.width;r.y=t.y/e.height;o.x=(t.x+t.width)/e.width;o.y=t.y/e.height;n.x=(t.x+t.width)/e.width;n.y=(t.y+t.height)/e.height;s.x=t.x/e.width;s.y=(t.y+t.height)/e.height;return i};X1={create:_rt,updateViaFrames:xrt}});var Ya;var q1=d(()=>{S3();Me();Ed();Ya=class extends Gi{constructor(t,e){super();if(!(t instanceof Oe)){throw new Error("`baseTexture` should be an instance of BaseTexture")}this._uvs=X1.create();this._frame=e?e.clone():new le(0,0,1,1);this._frameLocked=Boolean(e);this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this);this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this);this.setBaseTexture(t)}static fromImage(t){const e=new Oe(t);return new Ya(e)}static fromCanvas(t){const e=new Oe(t);return new Ya(e)}_onBaseTextureLoaded(){if(!this._frameLocked){const t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){const{width:t,height:e}=this._baseTexture.getFrame();this._frame.width=t;this._frame.height=e;this.emit("update")}_updateUVs(){this._uvs=X1.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(t){this._baseTexture=t;if(!this._baseTexture.isLoaded()){this._baseTexture.once("loaded",this._onBaseTextureLoaded)}else{const{width:e,height:r}=t.getFrame();if(!this._frameLocked){this._frame=new le(0,0,e,r)}this._onBaseTextureLoaded()}}getFrame(){return this._frame}setFrame(t){this._frame=t;this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new rt(this._frame.width,this._frame.height)}dispose(t=true){t&&this._baseTexture.dispose()}}});var uh,dh;var Y1=d(()=>{Or();Me();Oy();G1();ih();sh();Ed();q1();uh=i=>i._type==="webgl";dh=class extends Ya{constructor(t,e=100,r=100,o=1){super(new Oe,new le(0,0,e,r));this._loaded=true;this._width=e;this._height=r;this._pixelRatio=o;this._renderer=t;this._setupFilterManager();this._setupBuffer();this.setBaseTexture(this._renderTarget.getBaseTexture());this._updateUVs()}_setupFilterManager(){if(this._filterManager){this._filterManager.dispose()}if(uh(this._renderer)){this._filterManager=new ah(this._renderer)}else{this._filterManager=new ac(this._renderer)}this._filterManager.resizeTo(new rt(this._width,this._height))}_setupBuffer(){if(this._renderTarget){this._renderTarget.dispose()}if(uh(this._renderer)){this._renderTarget=new Ms(this._renderer,this._width,this._height,this._pixelRatio)}else{this._renderTarget=new Ps(this._width,this._height,this._pixelRatio)}}clear(t){this._renderTarget.clear(t)}resizeTo(t){if(this._width===t.x&&this._height===t.y){return}this._width=t.x;this._height=t.y;this._frame.width=t.x;this._frame.height=t.y;this._renderTarget.resizeTo(t);this._filterManager.resizeTo(t)}render(t){if(uh(this._renderer)){this._renderWebGL(t)}else{this._renderCanvas(t)}}_renderWebGL(t){if(!uh(this._renderer))return;this._renderTarget.activate();t.getWorldTransform().reset();t.getChildren().forEach(r=>{r.updateTransform()});const e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(t,this._renderTarget);this._renderer.setFilterManager(e)}_renderCanvas(t){if(uh(this._renderer))return;t.getWorldTransform().reset();t.getChildren().forEach(r=>{r.updateTransform()});const e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(t,this._renderTarget);this._renderer.setFilterManager(e)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose();this._filterManager.dispose();super.dispose()}}});var Rd,Ls;var mh=d(()=>{Rd={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};Ls={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:true,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}});function K(i,t,e){if(i!=null)if(typeof i=="number")this.fromNumber(i,t,e);else if(t==null&&typeof i!="string")this.fromString(i,256);else this.fromString(i,t)}function Ut(){return new K(null)}function Crt(i,t,e,r,o,n){while(--n>=0){var s=t*this[i++]+e[r]+o;o=Math.floor(s/67108864);e[r++]=s&67108863}return o}function Srt(i,t,e,r,o,n){var s=t&32767,a=t>>15;while(--n>=0){var l=this[i]&32767;var c=this[i++]>>15;var u=a*l+c*s;l=s*l+((u&32767)<<15)+e[r]+(o&1073741823);o=(l>>>30)+(u>>>15)+a*c+(o>>>30);e[r++]=l&1073741823}return o}function wrt(i,t,e,r,o,n){var s=t&16383,a=t>>14;while(--n>=0){var l=this[i]&16383;var c=this[i++]>>14;var u=a*l+c*s;l=s*l+((u&16383)<<14)+e[r]+o;o=(l>>28)+(u>>14)+a*c;e[r++]=l&268435455}return o}function T3(i){return Trt.charAt(i)}function k3(i,t){var e=My[i.charCodeAt(t)];return e==null?-1:e}function krt(i){for(var t=this.t-1;t>=0;--t)i[t]=this[t];i.t=this.t;i.s=this.s}function Irt(i){this.t=1;this.s=i<0?-1:0;if(i>0)this[0]=i;else if(i<-1)this[0]=i+this.DV;else this.t=0}function Ja(i){var t=Ut();t.fromInt(i);return t}function Drt(i,t){var e;if(t==16)e=4;else if(t==8)e=3;else if(t==256)e=8;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else{this.fromRadix(i,t);return}this.t=0;this.s=0;var r=i.length,o=false,n=0;while(--r>=0){var s=e==8?i[r]&255:k3(i,r);if(s<0){if(i.charAt(r)=="-")o=true;continue}o=false;if(n==0)this[this.t++]=s;else if(n+e>this.DB){this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n;this[this.t++]=s>>this.DB-n}else this[this.t-1]|=s<<n;n+=e;if(n>=this.DB)n-=this.DB}if(e==8&&(i[0]&128)!=0){this.s=-1;if(n>0)this[this.t-1]|=(1<<this.DB-n)-1<<n}this.clamp();if(o)K.ZERO.subTo(this,this)}function Ert(){var i=this.s&this.DM;while(this.t>0&&this[this.t-1]==i)--this.t}function Frt(i){if(this.s<0)return"-"+this.negate().toString(i);var t;if(i==16)t=4;else if(i==8)t=3;else if(i==2)t=1;else if(i==32)t=5;else if(i==4)t=2;else return this.toRadix(i);var e=(1<<t)-1,r,o=false,n="",s=this.t;var a=this.DB-s*this.DB%t;if(s-- >0){if(a<this.DB&&(r=this[s]>>a)>0){o=true;n=T3(r)}while(s>=0){if(a<t){r=(this[s]&(1<<a)-1)<<t-a;r|=this[--s]>>(a+=this.DB-t)}else{r=this[s]>>(a-=t)&e;if(a<=0){a+=this.DB;--s}}if(r>0)o=true;if(o)n+=T3(r)}}return o?n:"0"}function Rrt(){var i=Ut();K.ZERO.subTo(this,i);return i}function Ort(){return this.s<0?this.negate():this}function Art(i){var t=this.s-i.s;if(t!=0)return t;var e=this.t;t=e-i.t;if(t!=0)return this.s<0?-t:t;while(--e>=0)if((t=this[e]-i[e])!=0)return t;return 0}function Ly(i){var t=1,e;if((e=i>>>16)!=0){i=e;t+=16}if((e=i>>8)!=0){i=e;t+=8}if((e=i>>4)!=0){i=e;t+=4}if((e=i>>2)!=0){i=e;t+=2}if((e=i>>1)!=0){i=e;t+=1}return t}function Brt(){if(this.t<=0)return 0;return this.DB*(this.t-1)+Ly(this[this.t-1]^this.s&this.DM)}function Prt(i,t){var e;for(e=this.t-1;e>=0;--e)t[e+i]=this[e];for(e=i-1;e>=0;--e)t[e]=0;t.t=this.t+i;t.s=this.s}function Mrt(i,t){for(var e=i;e<this.t;++e)t[e-i]=this[e];t.t=Math.max(this.t-i,0);t.s=this.s}function Lrt(i,t){var e=i%this.DB;var r=this.DB-e;var o=(1<<r)-1;var n=Math.floor(i/this.DB),s=this.s<<e&this.DM,a;for(a=this.t-1;a>=0;--a){t[a+n+1]=this[a]>>r|s;s=(this[a]&o)<<e}for(a=n-1;a>=0;--a)t[a]=0;t[n]=s;t.t=this.t+n+1;t.s=this.s;t.clamp()}function zrt(i,t){t.s=this.s;var e=Math.floor(i/this.DB);if(e>=this.t){t.t=0;return}var r=i%this.DB;var o=this.DB-r;var n=(1<<r)-1;t[0]=this[e]>>r;for(var s=e+1;s<this.t;++s){t[s-e-1]|=(this[s]&n)<<o;t[s-e]=this[s]>>r}if(r>0)t[this.t-e-1]|=(this.s&n)<<o;t.t=this.t-e;t.clamp()}function Urt(i,t){var e=0,r=0,o=Math.min(i.t,this.t);while(e<o){r+=this[e]-i[e];t[e++]=r&this.DM;r>>=this.DB}if(i.t<this.t){r-=i.s;while(e<this.t){r+=this[e];t[e++]=r&this.DM;r>>=this.DB}r+=this.s}else{r+=this.s;while(e<i.t){r-=i[e];t[e++]=r&this.DM;r>>=this.DB}r-=i.s}t.s=r<0?-1:0;if(r<-1)t[e++]=this.DV+r;else if(r>0)t[e++]=r;t.t=e;t.clamp()}function Nrt(i,t){var e=this.abs(),r=i.abs();var o=e.t;t.t=o+r.t;while(--o>=0)t[o]=0;for(o=0;o<r.t;++o)t[o+e.t]=e.am(0,r[o],t,o,0,e.t);t.s=0;t.clamp();if(this.s!=i.s)K.ZERO.subTo(t,t)}function Hrt(i){var t=this.abs();var e=i.t=2*t.t;while(--e>=0)i[e]=0;for(e=0;e<t.t-1;++e){var r=t.am(e,t[e],i,2*e,0,1);if((i[e+t.t]+=t.am(e+1,2*t[e],i,2*e+1,r,t.t-e-1))>=t.DV){i[e+t.t]-=t.DV;i[e+t.t+1]=1}}if(i.t>0)i[i.t-1]+=t.am(e,t[e],i,2*e,0,1);i.s=0;i.clamp()}function Wrt(i,t,e){var r=i.abs();if(r.t<=0)return;var o=this.abs();if(o.t<r.t){if(t!=null)t.fromInt(0);if(e!=null)this.copyTo(e);return}if(e==null)e=Ut();var n=Ut(),s=this.s,a=i.s;var l=this.DB-Ly(r[r.t-1]);if(l>0){r.lShiftTo(l,n);o.lShiftTo(l,e)}else{r.copyTo(n);o.copyTo(e)}var c=n.t;var u=n[c-1];if(u==0)return;var m=u*(1<<this.F1)+(c>1?n[c-2]>>this.F2:0);var p=this.FV/m,h=(1<<this.F1)/m,g=1<<this.F2;var _=e.t,x=_-c,b=t==null?Ut():t;n.dlShiftTo(x,b);if(e.compareTo(b)>=0){e[e.t++]=1;e.subTo(b,e)}K.ONE.dlShiftTo(c,b);b.subTo(n,n);while(n.t<c)n[n.t++]=0;while(--x>=0){var w=e[--_]==u?this.DM:Math.floor(e[_]*p+(e[_-1]+g)*h);if((e[_]+=n.am(0,w,e,x,0,c))<w){n.dlShiftTo(x,b);e.subTo(b,e);while(e[_]<--w)e.subTo(b,e)}}if(t!=null){e.drShiftTo(c,t);if(s!=a)K.ZERO.subTo(t,t)}e.t=c;e.clamp();if(l>0)e.rShiftTo(l,e);if(s<0)K.ZERO.subTo(e,e)}function Grt(i){var t=Ut();this.abs().divRemTo(i,null,t);if(this.s<0&&t.compareTo(K.ZERO)>0)i.subTo(t,t);return t}function lc(i){this.m=i}function Vrt(i){if(i.s<0||i.compareTo(this.m)>=0)return i.mod(this.m);else return i}function jrt(i){return i}function $rt(i){i.divRemTo(this.m,null,i)}function Krt(i,t,e){i.multiplyTo(t,e);this.reduce(e)}function Xrt(i,t){i.squareTo(t);this.reduce(t)}function qrt(){if(this.t<1)return 0;var i=this[0];if((i&1)==0)return 0;var t=i&3;t=t*(2-(i&15)*t)&15;t=t*(2-(i&255)*t)&255;t=t*(2-((i&65535)*t&65535))&65535;t=t*(2-i*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function cc(i){this.m=i;this.mp=i.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<i.DB-15)-1;this.mt2=2*i.t}function Yrt(i){var t=Ut();i.abs().dlShiftTo(this.m.t,t);t.divRemTo(this.m,null,t);if(i.s<0&&t.compareTo(K.ZERO)>0)this.m.subTo(t,t);return t}function Jrt(i){var t=Ut();i.copyTo(t);this.reduce(t);return t}function Zrt(i){while(i.t<=this.mt2)i[i.t++]=0;for(var t=0;t<this.m.t;++t){var e=i[t]&32767;var r=e*this.mpl+((e*this.mph+(i[t]>>15)*this.mpl&this.um)<<15)&i.DM;e=t+this.m.t;i[e]+=this.m.am(0,r,i,t,0,this.m.t);while(i[e]>=i.DV){i[e]-=i.DV;i[++e]++}}i.clamp();i.drShiftTo(this.m.t,i);if(i.compareTo(this.m)>=0)i.subTo(this.m,i)}function Qrt(i,t){i.squareTo(t);this.reduce(t)}function tot(i,t,e){i.multiplyTo(t,e);this.reduce(e)}function eot(){return(this.t>0?this[0]&1:this.s)==0}function iot(i,t){if(i>4294967295||i<1)return K.ONE;var e=Ut(),r=Ut(),o=t.convert(this),n=Ly(i)-1;o.copyTo(e);while(--n>=0){t.sqrTo(e,r);if((i&1<<n)>0)t.mulTo(r,o,e);else{var s=e;e=r;r=s}}return t.revert(e)}function rot(i,t){var e;if(i<256||t.isEven())e=new lc(t);else e=new cc(t);return this.exp(i,e)}function oot(){var i=Ut();this.copyTo(i);return i}function not(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function sot(){return this.t==0?this.s:this[0]<<24>>24}function aot(){return this.t==0?this.s:this[0]<<16>>16}function lot(i){return Math.floor(Math.LN2*this.DB/Math.log(i))}function cot(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function uot(i){if(i==null)i=10;if(this.signum()==0||i<2||i>36)return"0";var t=this.chunkSize(i);var e=Math.pow(i,t);var r=Ja(e),o=Ut(),n=Ut(),s="";this.divRemTo(r,o,n);while(o.signum()>0){s=(e+n.intValue()).toString(i).substr(1)+s;o.divRemTo(r,o,n)}return n.intValue().toString(i)+s}function dot(i,t){this.fromInt(0);if(t==null)t=10;var e=this.chunkSize(t);var r=Math.pow(t,e),o=false,n=0,s=0;for(var a=0;a<i.length;++a){var l=k3(i,a);if(l<0){if(i.charAt(a)=="-"&&this.signum()==0)o=true;continue}s=t*s+l;if(++n>=e){this.dMultiply(r);this.dAddOffset(s,0);n=0;s=0}}if(n>0){this.dMultiply(Math.pow(t,n));this.dAddOffset(s,0)}if(o)K.ZERO.subTo(this,this)}function mot(i,t,e){if(typeof t=="number"){if(i<2)this.fromInt(1);else{this.fromNumber(i,e);if(!this.testBit(i-1))this.bitwiseTo(K.ONE.shiftLeft(i-1),Q1,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(t)){this.dAddOffset(2,0);if(this.bitLength()>i)this.subTo(K.ONE.shiftLeft(i-1),this)}}}else{var r=new Array,o=i&7;r.length=(i>>3)+1;t.nextBytes(r);if(o>0)r[0]&=(1<<o)-1;else r[0]=0;this.fromString(r,256)}}function pot(){var i=this.t,t=new Array;t[0]=this.s;var e=this.DB-i*this.DB%8,r,o=0;if(i-- >0){if(e<this.DB&&(r=this[i]>>e)!=(this.s&this.DM)>>e)t[o++]=r|this.s<<this.DB-e;while(i>=0){if(e<8){r=(this[i]&(1<<e)-1)<<8-e;r|=this[--i]>>(e+=this.DB-8)}else{r=this[i]>>(e-=8)&255;if(e<=0){e+=this.DB;--i}}if((r&128)!=0)r|=-256;if(o==0&&(this.s&128)!=(r&128))++o;if(o>0||r!=this.s)t[o++]=r}}return t}function hot(i){return this.compareTo(i)==0}function fot(i){return this.compareTo(i)<0?this:i}function got(i){return this.compareTo(i)>0?this:i}function bot(i,t,e){var r,o,n=Math.min(i.t,this.t);for(r=0;r<n;++r)e[r]=t(this[r],i[r]);if(i.t<this.t){o=i.s&this.DM;for(r=n;r<this.t;++r)e[r]=t(this[r],o);e.t=this.t}else{o=this.s&this.DM;for(r=n;r<i.t;++r)e[r]=t(o,i[r]);e.t=i.t}e.s=t(this.s,i.s);e.clamp()}function yot(i,t){return i&t}function _ot(i){var t=Ut();this.bitwiseTo(i,yot,t);return t}function Q1(i,t){return i|t}function xot(i){var t=Ut();this.bitwiseTo(i,Q1,t);return t}function I3(i,t){return i^t}function vot(i){var t=Ut();this.bitwiseTo(i,I3,t);return t}function D3(i,t){return i&~t}function Cot(i){var t=Ut();this.bitwiseTo(i,D3,t);return t}function Sot(){var i=Ut();for(var t=0;t<this.t;++t)i[t]=this.DM&~this[t];i.t=this.t;i.s=~this.s;return i}function wot(i){var t=Ut();if(i<0)this.rShiftTo(-i,t);else this.lShiftTo(i,t);return t}function Tot(i){var t=Ut();if(i<0)this.lShiftTo(-i,t);else this.rShiftTo(i,t);return t}function kot(i){if(i==0)return-1;var t=0;if((i&65535)==0){i>>=16;t+=16}if((i&255)==0){i>>=8;t+=8}if((i&15)==0){i>>=4;t+=4}if((i&3)==0){i>>=2;t+=2}if((i&1)==0)++t;return t}function Iot(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+kot(this[i]);if(this.s<0)return this.t*this.DB;return-1}function Dot(i){var t=0;while(i!=0){i&=i-1;++t}return t}function Eot(){var i=0,t=this.s&this.DM;for(var e=0;e<this.t;++e)i+=Dot(this[e]^t);return i}function Fot(i){var t=Math.floor(i/this.DB);if(t>=this.t)return this.s!=0;return(this[t]&1<<i%this.DB)!=0}function Rot(i,t){var e=K.ONE.shiftLeft(i);this.bitwiseTo(e,t,e);return e}function Oot(i){return this.changeBit(i,Q1)}function Aot(i){return this.changeBit(i,D3)}function Bot(i){return this.changeBit(i,I3)}function Pot(i,t){var e=0,r=0,o=Math.min(i.t,this.t);while(e<o){r+=this[e]+i[e];t[e++]=r&this.DM;r>>=this.DB}if(i.t<this.t){r+=i.s;while(e<this.t){r+=this[e];t[e++]=r&this.DM;r>>=this.DB}r+=this.s}else{r+=this.s;while(e<i.t){r+=i[e];t[e++]=r&this.DM;r>>=this.DB}r+=i.s}t.s=r<0?-1:0;if(r>0)t[e++]=r;else if(r<-1)t[e++]=this.DV+r;t.t=e;t.clamp()}function Mot(i){var t=Ut();this.addTo(i,t);return t}function Lot(i){var t=Ut();this.subTo(i,t);return t}function zot(i){var t=Ut();this.multiplyTo(i,t);return t}function Uot(){var i=Ut();this.squareTo(i);return i}function Not(i){var t=Ut();this.divRemTo(i,t,null);return t}function Hot(i){var t=Ut();this.divRemTo(i,null,t);return t}function Wot(i){var t=Ut(),e=Ut();this.divRemTo(i,t,e);return new Array(t,e)}function Got(i){this[this.t]=this.am(0,i-1,this,0,0,this.t);++this.t;this.clamp()}function Vot(i,t){if(i==0)return;while(this.t<=t)this[this.t++]=0;this[t]+=i;while(this[t]>=this.DV){this[t]-=this.DV;if(++t>=this.t)this[this.t++]=0;++this[t]}}function ph(){}function E3(i){return i}function jot(i,t,e){i.multiplyTo(t,e)}function $ot(i,t){i.squareTo(t)}function Kot(i){return this.exp(i,new ph)}function Xot(i,t,e){var r=Math.min(this.t+i.t,t);e.s=0;e.t=r;while(r>0)e[--r]=0;var o;for(o=e.t-this.t;r<o;++r)e[r+this.t]=this.am(0,i[r],e,r,0,this.t);for(o=Math.min(i.t,t);r<o;++r)this.am(0,i[r],e,r,0,t-r);e.clamp()}function qot(i,t,e){--t;var r=e.t=this.t+i.t-t;e.s=0;while(--r>=0)e[r]=0;for(r=Math.max(t-this.t,0);r<i.t;++r)e[this.t+r-t]=this.am(t-r,i[r],e,0,0,this.t+r-t);e.clamp();e.drShiftTo(1,e)}function Ad(i){this.r2=Ut();this.q3=Ut();K.ONE.dlShiftTo(2*i.t,this.r2);this.mu=this.r2.divide(i);this.m=i}function Yot(i){if(i.s<0||i.t>2*this.m.t)return i.mod(this.m);else if(i.compareTo(this.m)<0)return i;else{var t=Ut();i.copyTo(t);this.reduce(t);return t}}function Jot(i){return i}function Zot(i){i.drShiftTo(this.m.t-1,this.r2);if(i.t>this.m.t+1){i.t=this.m.t+1;i.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(i.compareTo(this.r2)<0)i.dAddOffset(1,this.m.t+1);i.subTo(this.r2,i);while(i.compareTo(this.m)>=0)i.subTo(this.m,i)}function Qot(i,t){i.squareTo(t);this.reduce(t)}function tnt(i,t,e){i.multiplyTo(t,e);this.reduce(e)}function ent(i,t){var e=i.bitLength(),r,o=Ja(1),n;if(e<=0)return o;else if(e<18)r=1;else if(e<48)r=3;else if(e<144)r=4;else if(e<768)r=5;else r=6;if(e<8)n=new lc(t);else if(t.isEven())n=new Ad(t);else n=new cc(t);var s=new Array,a=3,l=r-1,c=(1<<r)-1;s[1]=n.convert(this);if(r>1){var u=Ut();n.sqrTo(s[1],u);while(a<=c){s[a]=Ut();n.mulTo(u,s[a-2],s[a]);a+=2}}var m=i.t-1,p,h=true,g=Ut(),_;e=Ly(i[m])-1;while(m>=0){if(e>=l)p=i[m]>>e-l&c;else{p=(i[m]&(1<<e+1)-1)<<l-e;if(m>0)p|=i[m-1]>>this.DB+e-l}a=r;while((p&1)==0){p>>=1;--a}if((e-=a)<0){e+=this.DB;--m}if(h){s[p].copyTo(o);h=false}else{while(a>1){n.sqrTo(o,g);n.sqrTo(g,o);a-=2}if(a>0)n.sqrTo(o,g);else{_=o;o=g;g=_}n.mulTo(g,s[p],o)}while(m>=0&&(i[m]&1<<e)==0){n.sqrTo(o,g);_=o;o=g;g=_;if(--e<0){e=this.DB-1;--m}}}return n.revert(o)}function int(i){var t=this.s<0?this.negate():this.clone();var e=i.s<0?i.negate():i.clone();if(t.compareTo(e)<0){var r=t;t=e;e=r}var o=t.getLowestSetBit(),n=e.getLowestSetBit();if(n<0)return t;if(o<n)n=o;if(n>0){t.rShiftTo(n,t);e.rShiftTo(n,e)}while(t.signum()>0){if((o=t.getLowestSetBit())>0)t.rShiftTo(o,t);if((o=e.getLowestSetBit())>0)e.rShiftTo(o,e);if(t.compareTo(e)>=0){t.subTo(e,t);t.rShiftTo(1,t)}else{e.subTo(t,e);e.rShiftTo(1,e)}}if(n>0)e.lShiftTo(n,e);return e}function rnt(i){if(i<=0)return 0;var t=this.DV%i,e=this.s<0?i-1:0;if(this.t>0)if(t==0)e=this[0]%i;else for(var r=this.t-1;r>=0;--r)e=(t*e+this[r])%i;return e}function ont(i){var t=i.isEven();if(this.isEven()&&t||i.signum()==0)return K.ZERO;var e=i.clone(),r=this.clone();var o=Ja(1),n=Ja(0),s=Ja(0),a=Ja(1);while(e.signum()!=0){while(e.isEven()){e.rShiftTo(1,e);if(t){if(!o.isEven()||!n.isEven()){o.addTo(this,o);n.subTo(i,n)}o.rShiftTo(1,o)}else if(!n.isEven())n.subTo(i,n);n.rShiftTo(1,n)}while(r.isEven()){r.rShiftTo(1,r);if(t){if(!s.isEven()||!a.isEven()){s.addTo(this,s);a.subTo(i,a)}s.rShiftTo(1,s)}else if(!a.isEven())a.subTo(i,a);a.rShiftTo(1,a)}if(e.compareTo(r)>=0){e.subTo(r,e);if(t)o.subTo(s,o);n.subTo(a,n)}else{r.subTo(e,r);if(t)s.subTo(o,s);a.subTo(n,a)}}if(r.compareTo(K.ONE)!=0)return K.ZERO;if(a.compareTo(i)>=0)return a.subtract(i);if(a.signum()<0)a.addTo(i,a);else return a;if(a.signum()<0)return a.add(i);else return a}function snt(i){var t,e=this.abs();if(e.t==1&&e[0]<=ji[ji.length-1]){for(t=0;t<ji.length;++t)if(e[0]==ji[t])return true;return false}if(e.isEven())return false;t=1;while(t<ji.length){var r=ji[t],o=t+1;while(o<ji.length&&r<nnt)r*=ji[o++];r=e.modInt(r);while(t<o)if(r%ji[t++]==0)return false}return e.millerRabin(i)}function ant(i){var t=this.subtract(K.ONE);var e=t.getLowestSetBit();if(e<=0)return false;var r=t.shiftRight(e);i=i+1>>1;if(i>ji.length)i=ji.length;var o=Ut();for(var n=0;n<i;++n){o.fromInt(ji[Math.floor(Math.random()*ji.length)]);var s=o.modPow(r,this);if(s.compareTo(K.ONE)!=0&&s.compareTo(t)!=0){var a=1;while(a++<e&&s.compareTo(t)!=0){s=s.modPowInt(2,this);if(s.compareTo(K.ONE)==0)return false}if(s.compareTo(t)!=0)return false}}return true}var J1,Za,vrt,w3,Z1,Trt,My,Od,ro,ji,nnt,F3;var R3=d(()=>{J1={};if(true){J1=typeof window!=="undefined"?window.navigator:{}}vrt=244837814094590;w3=(vrt&16777215)==15715070;if(w3&&J1.appName=="Microsoft Internet Explorer"){K.prototype.am=Srt;Za=30}else if(w3&&J1.appName!="Netscape"){K.prototype.am=Crt;Za=26}else{K.prototype.am=wrt;Za=28}K.prototype.DB=Za;K.prototype.DM=(1<<Za)-1;K.prototype.DV=1<<Za;Z1=52;K.prototype.FV=Math.pow(2,Z1);K.prototype.F1=Z1-Za;K.prototype.F2=2*Za-Z1;Trt="0123456789abcdefghijklmnopqrstuvwxyz";My=new Array;Od="0".charCodeAt(0);for(ro=0;ro<=9;++ro)My[Od++]=ro;Od="a".charCodeAt(0);for(ro=10;ro<36;++ro)My[Od++]=ro;Od="A".charCodeAt(0);for(ro=10;ro<36;++ro)My[Od++]=ro;lc.prototype.convert=Vrt;lc.prototype.revert=jrt;lc.prototype.reduce=$rt;lc.prototype.mulTo=Krt;lc.prototype.sqrTo=Xrt;cc.prototype.convert=Yrt;cc.prototype.revert=Jrt;cc.prototype.reduce=Zrt;cc.prototype.mulTo=tot;cc.prototype.sqrTo=Qrt;K.prototype.copyTo=krt;K.prototype.fromInt=Irt;K.prototype.fromString=Drt;K.prototype.clamp=Ert;K.prototype.dlShiftTo=Prt;K.prototype.drShiftTo=Mrt;K.prototype.lShiftTo=Lrt;K.prototype.rShiftTo=zrt;K.prototype.subTo=Urt;K.prototype.multiplyTo=Nrt;K.prototype.squareTo=Hrt;K.prototype.divRemTo=Wrt;K.prototype.invDigit=qrt;K.prototype.isEven=eot;K.prototype.exp=iot;K.prototype.toString=Frt;K.prototype.negate=Rrt;K.prototype.abs=Ort;K.prototype.compareTo=Art;K.prototype.bitLength=Brt;K.prototype.mod=Grt;K.prototype.modPowInt=rot;K.ZERO=Ja(0);K.ONE=Ja(1);ph.prototype.convert=E3;ph.prototype.revert=E3;ph.prototype.mulTo=jot;ph.prototype.sqrTo=$ot;Ad.prototype.convert=Yot;Ad.prototype.revert=Jot;Ad.prototype.reduce=Zot;Ad.prototype.mulTo=tnt;Ad.prototype.sqrTo=Qot;ji=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];nnt=(1<<26)/ji[ji.length-1];K.prototype.chunkSize=lot;K.prototype.toRadix=uot;K.prototype.fromRadix=dot;K.prototype.fromNumber=mot;K.prototype.bitwiseTo=bot;K.prototype.changeBit=Rot;K.prototype.addTo=Pot;K.prototype.dMultiply=Got;K.prototype.dAddOffset=Vot;K.prototype.multiplyLowerTo=Xot;K.prototype.multiplyUpperTo=qot;K.prototype.modInt=rnt;K.prototype.millerRabin=ant;K.prototype.clone=oot;K.prototype.intValue=not;K.prototype.byteValue=sot;K.prototype.shortValue=aot;K.prototype.signum=cot;K.prototype.toByteArray=pot;K.prototype.equals=hot;K.prototype.min=fot;K.prototype.max=got;K.prototype.and=_ot;K.prototype.or=xot;K.prototype.xor=vot;K.prototype.andNot=Cot;K.prototype.not=Sot;K.prototype.shiftLeft=wot;K.prototype.shiftRight=Tot;K.prototype.getLowestSetBit=Iot;K.prototype.bitCount=Eot;K.prototype.testBit=Fot;K.prototype.setBit=Oot;K.prototype.clearBit=Aot;K.prototype.flipBit=Bot;K.prototype.add=Mot;K.prototype.subtract=Lot;K.prototype.multiply=zot;K.prototype.divide=Not;K.prototype.remainder=Hot;K.prototype.divideAndRemainder=Wot;K.prototype.modPow=ent;K.prototype.modInverse=ont;K.prototype.pow=Kot;K.prototype.gcd=int;K.prototype.isProbablePrime=snt;K.prototype.square=Uot;F3=K});function O3(i){var t=8;var e=0;function r(x,b){var w=(x&65535)+(b&65535);var T=(x>>16)+(b>>16)+(w>>16);return T<<16|w&65535}function o(x,b){return x>>>b|x<<32-b}function n(x,b){return x>>>b}function s(x,b,w){return x&b^~x&w}function a(x,b,w){return x&b^x&w^b&w}function l(x){return o(x,2)^o(x,13)^o(x,22)}function c(x){return o(x,6)^o(x,11)^o(x,25)}function u(x){return o(x,7)^o(x,18)^n(x,3)}function m(x){return o(x,17)^o(x,19)^n(x,10)}function p(x,b){var w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);var T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225);var D=new Array(64);var O,k,E,J,tt,mt,bt,gt,pt,Zt;var fi,ei;x[b>>5]|=128<<24-b%32;x[(b+64>>9<<4)+15]=b;for(var pt=0;pt<x.length;pt+=16){O=T[0];k=T[1];E=T[2];J=T[3];tt=T[4];mt=T[5];bt=T[6];gt=T[7];for(var Zt=0;Zt<64;Zt++){if(Zt<16)D[Zt]=x[Zt+pt];else D[Zt]=r(r(r(m(D[Zt-2]),D[Zt-7]),u(D[Zt-15])),D[Zt-16]);fi=r(r(r(r(gt,c(tt)),s(tt,mt,bt)),w[Zt]),D[Zt]);ei=r(l(O),a(O,k,E));gt=bt;bt=mt;mt=tt;tt=r(J,fi);J=E;E=k;k=O;O=r(fi,ei)}T[0]=r(O,T[0]);T[1]=r(k,T[1]);T[2]=r(E,T[2]);T[3]=r(J,T[3]);T[4]=r(tt,T[4]);T[5]=r(mt,T[5]);T[6]=r(bt,T[6]);T[7]=r(gt,T[7])}return T}function h(x){var b=Array();var w=(1<<t)-1;for(var T=0;T<x.length*t;T+=t){b[T>>5]|=(x.charCodeAt(T/t)&w)<<24-T%32}return b}function g(x){x=x.replace(/\r\n/g,"\n");var b="";for(var w=0;w<x.length;w++){var T=x.charCodeAt(w);if(T<128){b+=String.fromCharCode(T)}else if(T>127&&T<2048){b+=String.fromCharCode(T>>6|192);b+=String.fromCharCode(T&63|128)}else{b+=String.fromCharCode(T>>12|224);b+=String.fromCharCode(T>>6&63|128);b+=String.fromCharCode(T&63|128)}}return b}function _(x){var b=e?"0123456789ABCDEF":"0123456789abcdef";var w="";for(var T=0;T<x.length*4;T++){w+=b.charAt(x[T>>2]>>(3-T%4)*8+4&15)+b.charAt(x[T>>2]>>(3-T%4)*8&15)}return w}i=g(i);return _(p(h(i),i.length*t))}var A3=d(()=>{});var lnt,cnt,uc;var B3=d(()=>{lnt=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;cnt=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;uc=class{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(t,e=false){const r=e?cnt:lnt;const o=r.exec(t);r.lastIndex=0;this._major=o[1];this._minor=o[2];this._patch=o[3]||0}equals(t){return this._major===t._major&&this._minor===t._minor&&this._patch===t._patch}isMoreRecentThan(t){if(this._major<t.major)return false;if(this._major>t.major)return true;if(this._minor<t.minor)return false;if(this._minor>t.minor)return true;if(this._patch<=t.patch)return false;if(this._patch>t.patch)return true}}});function unt(i){return i.map(t=>{return`0${(t&255).toString(16)}`.slice(-2)}).join("")}var _i,dnt,mnt,P3,pnt,M3,tw,hnt,fnt,ew,gnt,L3,iw,zy;var rw=d(()=>{vd();R3();A3();bd();B3();Tn();_i=i=>L.byteArrayToString(eo.decode(i));dnt="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=";mnt="ZW50ZXJwcmlzZV9saWNlbnNl";P3="YXBwX2lkZW50aWZpZXJz";pnt="cGxhdGZvcm0=";M3="ZmVhdHVyZXM=";tw="ZXhwaXJlc19hdA==";hnt="ZG9tYWlucw==";fnt="YXBpX3Rva2Vu";ew="c2lnbmF0dXJl";gnt="dmVyc2lvbg==";L3=class{constructor(t){this._version="2.4";this._l=typeof t==="string"?t.trim():t;this._e=this._parseBigInt("65537",10);this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10);this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch(t){this._decLic={};return false}return true}_hostnameValid(){if(typeof window==="undefined")return true;if(!this._decLic[_i(P3)].length)return true;const{hostname:t}=window.location;let e=false;this._decLic[_i(P3)].forEach(r=>{if(L.wildCardMatch(t,r)){e=true}});return e}_platformValid(){const t=this._decLic[_i(pnt)];const e=true?"HTML5":"Server";return e===t}c(){return new Promise((t,e)=>{const r=this._validateError();if(r!==null){e(r)}t()})}validate(){const t=this._validateError();if(t!==null){return false}return true}_validateError(){const t=typeof this._l;if(t!=="string"||!this._jsonValid()){const e=new Error;e.code="ELICINVFMT";return e}if(!this._sigValid()){const e=new Error;e.code="ELICINV";return e}if(!this._hostnameValid()){const e=new Error;e.code="ELICINVHOST";return e}if(!this._platformValid()){const e=new Error;e.code="ELICINVPLAT";return e}if(this.isExp()){const e=new Error;e.code="ELICEXP";return e}return null}isToolAllowed(t){return this._includesFeature(t)}isWhiteLabel(){return this._includesFeature("whitelabel",new uc("2.4",true))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new uc("2.4",true))}t(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new uc("2.4",true)))return Promise.resolve();const t=this._decLic[_i(hnt)][0]+_i(_i(dnt))+this._decLic[_i(fnt)];const e=new io(t);return e.load().catch(()=>{})}isENT(){if(!this._decLic)return false;return this._decLic[_i(mnt)]}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[_i(tw)]}dl(){return Math.ceil((this._expAt()-Date.now())/(60*60*24*1e3))}isExp(t=Date.now()){if(this._decLic[_i(tw)]===null)return false;return t>this._expAt()}_expAt(){return this._decLic[_i(tw)]*1e3}_verify(t,e){let r;let o;o=this._encodeMessage(t);r=this._decodeSignature(e);r=r.substr(-64);const n=o===r;return n}_encodeMessage(t){const e=O3(t);return e}_decodeSignature(t){let e;t=eo.decode(t);t=unt(t);t=this._parseBigInt(t,16);e=t.modPowInt(this._e,this._n);e=e.toString(16);return e}_parseBigInt(t,e){return new F3(t,e)}_parseLicense(){if(typeof this._l!=="string")return;if(!this._jsonValid())return;this._sig=this._decLic[_i(ew)]||"";delete this._decLic[_i(ew)];this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,"");this._message=this._l.replace(new RegExp(`,"${_i(ew)}":"([^"]*)"`),"")}_includesFeature(t,e=new uc("1.0",true)){const r=new uc(this._decLic[_i(gnt)],true);if(e.isMoreRecentThan(r))return true;return this._decLic[_i(M3)]&&this._decLic[_i(M3)].indexOf(t)!==-1}};iw=class{v(){return true}c(){return Promise.resolve()}isToolAllowed(t){return true}isWhiteLabel(){return false}areCustomAssetsAllowed(){return true}t(){return Promise.resolve()}isENT(){return false}exp(){return false}dl(){return 0}isExp(t=Date.now()){return false}};zy=L3});var dc,zs,Qa,z3,Uy;var U3=d(()=>{dc=typeof window==="undefined"?global:window;zs=dc.requestAnimationFrame;Qa=dc.cancelAnimationFrame;z3=0;Uy=["ms","moz","webkit","o"];for(let i=0;i<Uy.length&&!zs;++i){zs=dc[`${Uy[i]}RequestAnimationFrame`];Qa=dc[`${Uy[i]}CancelAnimationFrame`]||dc[`${Uy[i]}CancelRequestAnimationFrame`]}if(zs){zs=zs.bind(dc)}if(Qa){Qa=Qa.bind(dc)}if(!zs){zs=function(i,t){const e=new Date().getTime();const r=Math.max(0,16-(e-z3));const o=setTimeout(function(){i(e+r)},r);z3=e+r;return o}}if(!Qa){Qa=function(i){clearTimeout(i)}}});var N3,ow;var H3=d(()=>{Lo();As();N3=class{constructor(t=new rt(0,0),e=new rt(1,1),r=new rt(2,-1),o=new rt(2,0)){this._p0=t.clone();this._p1=e.clone();this._p2=r.clone();this._p3=o.clone();this._segments=[];this._length=-1;this._sample=[]}set(t=new rt(0,0),e=new rt(1,1),r=new rt(2,1),o=new rt(2,0)){this._p0=t.clone();this._p1=e.clone();this._p2=r.clone();this._p3=o.clone()}getLength(){return this._length}calculateSegments(t=100){let e=0;let r=0;const o=[];const n=1/t;let s=this._p0.clone();for(let a=1;a<=t;a++){const l=[];l.push({t:e,s:r,point:s});e+=n;e=Math.min(e,1);const c=this.evalAt(e);const u=c.clone().subtract(s);r+=u.len();l.push({t:e,s:r,point:c});o.push(l);s=c}this._segments=o;this._length=r;return r}evalAt(t){t=this.normalizeParameter(t);const e=this._p0.clone().multiply((1-t)**3);const r=this._p1.clone().multiply(3*(1-t)*(1-t)*t);const o=this._p2.clone().multiply(3*(1-t)*t*t);const n=this._p3.clone().multiply(t*t*t);return e.add(r).add(o).add(n)}isInSegment(t,e){t=this.normalizeArcLength(t);return t>=e[0].s&&t<=e[1].s}getArcLengthSegment(t){t=this.normalizeArcLength(t);for(let e=0;e<this._segments.length;e++){const r=this._segments[e];if(this.isInSegment(t,r)){return r}}return null}normalizeArcLength(t){return Math.max(Math.min(this._length,t),0)}normalizeParameter(t){return Math.max(Math.min(1,t),0)}getParameterForArcLength(t){const e=this.normalizeArcLength(t);const r=this.getArcLengthSegment(e);if(!r){q.warn("CubicBezierCurve#getParameterForArcLength","Segment not found.");return-1}const o=(e-r[1].s)/(r[0].s-r[1].s);return o*r[0].t+(1-o)*r[1].t}evalAtArcLength(t){return this.evalAt(this.getParameterForArcLength(t))}approximateAtArcLength(t){const e=this.normalizeArcLength(t);const r=this.getArcLengthSegment(e);if(!r){return-1}const o=(e-r[1].s)/(r[0].s-r[1].s);return r[0].point.clone().multiply(o).add(r[1].point.clone().multiply(1-o))}parameterSample(t=100){const e=1/t;const r=[];let o=0;for(let n=0;n<=t+1;n++){r.push(this.evalAt(o));o+=e}this._sample=r;return[...r]}arcLengthApproxSample(t=100,e=false,r=false){const o=this._length/t;const n=[];let s=0;for(let a=e?1:0;a<t+1;a++){n.push(this.approximateAtArcLength(s));s+=o}if(r){n.pop()}this._sample=n;return[...n]}};ow=N3});var W3,nw;var G3=d(()=>{W3=class{constructor(t,e){this.min=t;this.max=e}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(t){return this.min<=t&&t<=this.max}};nw=W3});var $i,sw;var V3=d(()=>{$i=class{constructor(t,e,r){this.x=t;this.y=e;this.z=r;if(typeof this.x==="undefined"){this.x=0}if(typeof this.y==="undefined"){this.y=0}if(typeof this.z==="undefined"){this.z=0}}set(t,e,r){this.x=t;this.y=e;this.z=r;return this}clone(){return new $i(this.x,this.y,this.z)}copy(t){this.x=t.x;this.y=t.y;this.z=t.z;return this}clamp(t,e){const r=t!==null&&typeof t!=="undefined";const o=e!==null&&typeof e!=="undefined";if(!(t instanceof $i)&&r){t=new $i(t,t,t)}if(!(e instanceof $i)&&o){e=new $i(e,e,e)}if(r){this.x=Math.max(t.x,this.x);this.y=Math.max(t.y,this.y);this.z=Math.max(t.z,this.z)}if(o){this.x=Math.min(e.x,this.x);this.y=Math.min(e.y,this.y);this.z=Math.min(e.z,this.z)}return this}divide(t){if(t instanceof $i){this.x/=t.x;this.y/=t.y;this.z/=t.z}else{this.x/=t;this.y/=t;this.z/=t}return this}subtract(t){if(t instanceof $i){this.x-=t.x;this.y-=t.y;this.z-=t.z}else{this.x-=t;this.y-=t;this.z-=t}return this}multiply(t){if(t instanceof $i){this.x*=t.x;this.y*=t.y;this.z*=t.z}else{this.x*=t;this.y*=t;this.z*=t}return this}add(t){if(t instanceof $i){this.x+=t.x;this.y+=t.y;this.z+=t.z}else{this.x+=t;this.y+=t;this.z+=t}return this}equals(t){if(t instanceof $i){return t.x===this.x&&t.y===this.y&&t.z===this.z}return t===this.x&&t===this.y&&t===this.z}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}fract(){this.x%=1;this.y%=1;this.z%=1;return this}toInt(){this.x|=0;this.y|=0;this.z|=0;return this}abs(){this.x=Math.abs(this.x);this.y=Math.abs(this.y);this.z=Math.abs(this.z);return this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(t){this.x=parseFloat(this.x.toFixed(t));this.y=parseFloat(this.y.toFixed(t));this.z=parseFloat(this.z.toFixed(t));return this}static fromObject(t){return new $i(t.x,t.y,t.z)}static get NULL(){return new $i(0,0,0)}};sw=$i});var Y={};ue(Y,{ColorMatrix:()=>th,CubicBezierCurve:()=>ow,Matrix:()=>ir,Range:()=>nw,Rectangle:()=>le,Vector2:()=>rt,Vector3:()=>sw});var aw=d(()=>{F1();H3();D1();G3();E1();As();V3()});var hh={};ue(hh,{Base64:()=>eo,Color:()=>W,ColorMatrix:()=>th,Configurable:()=>yt,Constants:()=>er,CubicBezierCurve:()=>ow,Engine:()=>M,EventEmitter:()=>Gi,Events:()=>Rd,FreeLicenseChecker:()=>iw,GLUtils:()=>oc,LicenseChecker:()=>zy,Log:()=>q,Matrix:()=>ir,Range:()=>nw,Rectangle:()=>le,Utils:()=>L,Vector2:()=>rt,Vector3:()=>sw,cancelAnimationFrame:()=>Qa,requestAnimationFrame:()=>zs});var mc=d(()=>{Lo();mh();Or();fh();bd();rc();Td();Cd();I1();rw();Tn();U3();aw()});var lw;var j3=d(()=>{Fy();cw();Y1();mc();lw=class{constructor(){this._container=new kn;this._sprite=new gh;this._container.addChild(this._sprite)}render(t,e,r){const o=r.getDimensions();const n=this._getNextHighestPOT(o);if(!this._renderTexture){this._renderTexture=new dh(t,n.x,n.y)}else{this._renderTexture.resizeTo(n)}const s=this._renderTexture.getDimensions();this._sprite.setTexture(r);this._sprite.updateTransform();this._renderTexture.clear();this._renderTexture.render(this._container);this._updateSprite(t,e,o,s)}_updateSprite(t,e,r,o){e.setTexture(this._renderTexture);this._renderTexture.setFrame(new le(0,0,r.x,r.y))}_getNextHighestPOT(t){return new rt(L.nextHighestPOT(t.x),L.nextHighestPOT(t.y))}getRenderTexture(){return this._renderTexture}dispose(){if(!this._renderTexture){return}this._renderTexture.dispose();delete this._renderTexture}}});var gh;var cw=d(()=>{j3();Fy();Me();gh=class extends kn{constructor(t){super();this._shader=null;this._width=0;this._height=0;this._anchor=new rt(0,0);this._canvasSmoothingEnabled=true;this._smoothDownscaling=false;this._onTextureUpdate=this._onTextureUpdate.bind(this);this.setTexture(t)}_onTextureUpdate(){this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}_renderWebGL(t){const e=t.save();if(this._smoothDownscaling){if(!this._potRenderer){this._potRenderer=new lw}if(this._texture){this._potRenderer.render(t,this,this._texture)}}t.restore(e);t.setObjectRenderer(t.renderers.sprite);t.renderers.sprite.render(this)}_renderCanvas(t){if(!this._texture)return;const e=this._worldTransform;const r=this._texture.getFrame();const{width:o,height:n}=r;const s=t.getCurrentRenderTarget().getPixelRatio();const a=this._anchor.x*-o|0;const l=this._anchor.y*-n|0;const c=t.getContext();c.setTransform(e.a,e.b,e.c,e.d,e.tx*s,e.ty*s);c.globalAlpha=this.getWorldAlpha();if(!this._texture)return;const u=this._texture.getBaseTexture();const m=u.getPixelRatio();const p=u.getSource();c.imageSmoothingEnabled=this._canvasSmoothingEnabled;if("beforeDraw"in t){t.beforeDraw(c)}c.drawImage(p,0,0,(p.naturalWidth||o)*m,(p.naturalHeight||n)*m,a*s,l*s,o*s,n*s)}isAtPosition(t){if(!this._texture)return void 0;const e=this._worldTransform.applyInverseToVector(t);const r=this._texture.getFrame();const{width:o,height:n}=r;const s=new rt(-o,-n);s.multiply(this._anchor);const a=s.clone().add(o,n);if(e.x<s.x||e.x>a.x||e.y<s.y||e.y>a.y){return false}return true}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){const t=this._localBounds;const e=this._texture.getFrame();t.x=-e.width*this._anchor.x;t.y=-e.height*this._anchor.y;t.width=e.width;t.height=e.height;this._localBoundsNeedUpdate=false}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){const t=this._bounds;const e=this._texture.getFrame();const r=this._worldTransform;const o=this._anchor;const n=r.rectangleToCoordinates(e,o);let s=n[0].x;let a=n[0].y;let l=s;let c=a;n.forEach(({x:u,y:m})=>{s=Math.min(s,u);a=Math.min(a,m);l=Math.max(l,u);c=Math.max(c,m)});t.x=s;t.width=Math.abs(l-s);t.y=a;t.height=Math.abs(c-a);this._boundsNeedUpdate=false}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(t=true){if(!this._texture){return}this._texture.off("update",this._onTextureUpdate);t&&this._texture.dispose();this._texture=null;if(this._potRenderer){t&&this._potRenderer.dispose();delete this._potRenderer}}setTexture(t){if(!t)return;if(this._texture){this._texture.off("update",this._onTextureUpdate)}if(this._potRenderer){this._potRenderer.getRenderTexture().getBaseTexture().setDirty(true)}this._texture=t;if(t.getBaseTexture().isLoaded()){this._onTextureUpdate()}t.on("update",this._onTextureUpdate)}getShader(){return this._shader}setShader(t){this._shader=t}getWidth(){return this._width}setWidth(t){if(!this._texture)return;this._scale.x=t/this._texture.getFrame().width;this._width=t;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getHeight(){return this._height}setHeight(t){if(!this._texture)return;this._scale.y=t/this._texture.getFrame().height;this._height=t;this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}getDimensions(){return new rt(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(t,e){this._anchor.set(t,e);this._boundsNeedUpdate=true;this._localBoundsNeedUpdate=true}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(t){this._smoothDownscaling=t}dispose(t=false,e=false){if(this._texture){this._texture.off("update",this._onTextureUpdate)}(t||e)&&this._texture&&this._texture.dispose(e);if(this._potRenderer){this._potRenderer.dispose()}}}});var bnt,M;var fh=d(()=>{Fy();z1();kd();Oy();f3();C3();cw();Ed();Y1();q1();ih();b1();wn();sh();bnt={CanvasFilterManager:ac,Container:kn,BaseTexture:Oe,Texture:Ya,RenderTexture:dh,WebGLRenderTarget:Ms,CanvasRenderTarget:Ps,Sprite:gh,Filter:zo,Filters:L1,PixelArrayImage:fd,autoDetectRenderer(i,t,e={}){if(mi.isSupported()){return new Py(i,t,e)}return new Fd(i,t,e)},canvasRenderer(i,t,e={}){return new Fd(i,t,e)}};M=bnt});var $3,K3;var X3=d(()=>{$3=class{static current(){return process.env.ENV}static isTest(){return process.env.ENV==="test"}static isDevelopment(){return process.env.ENV==="development"}static isProduction(){return process.env.ENV==="production"||!this.isTest()&&!this.isDevelopment()}};K3=$3});var q3,pc;var Ny=d(()=>{q3=class{constructor(t){this._head=0;this._buf=t}peekInt8(){return this._buf[this._head]}peekInt16(t=false){const e=this._buf[this._head];const r=this._buf[this._head+1];if(!t){return(e<<8)+r}return(r<<8)+e}peekInt24(t=false){const e=this._buf[this._head];const r=this._buf[this._head+1];const o=this._buf[this._head+2];if(!t){return(e<<16)+(r<<8)+o}return(o<<16)+(r<<8)+e}peekInt32(t=false){const e=this._buf[this._head];const r=this._buf[this._head+1];const o=this._buf[this._head+2];const n=this._buf[this._head+3];if(!t){return(e<<32)+(r<<16)+(o<<8)+n}return(n<<32)+(o<<16)+(r<<8)+e}writeInt8(t){this._buf[this._head]=t&255}writeInt16(t){this._buf[this._head]=t>>8;this._buf[this._head+1]=t&255}readInt8(){const t=this.peekInt8();this._head+=1;return t}readInt16(t=false){const e=this.peekInt16(t);this._head+=2;return e}readInt24(t=false){const e=this.peekInt24(t);this._head+=3;return e}readInt32(t=false){const e=this.peekInt32(t);this._head+=4;return e}readString(t){let e="";for(let r=0;r<t;r++){const o=this.readInt8();e+=String.fromCharCode(o)}return e}getHead(){return this._head}setHead(t){this._head=t}};pc=q3});var ynt,_nt,Bd;var Hy=d(()=>{ynt={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505};_nt={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};Bd={MARKERS:ynt,EXIF_TAGS:_nt}});var uw,xnt,Y3,J3,Z3;var Q3=d(()=>{Ny();Tn();Hy();({invariant:uw}=L);({MARKERS:xnt,EXIF_TAGS:Y3}=Bd);J3=class{constructor(t){this._buf=t;this._stream=new pc(this._buf);this._stream.setHead(0);this._parse();this._bigEndian=false}isValid(){this._stream.setHead(0);const t=this._stream.readInt16();if(t!==xnt.EXIF){return false}const e=this._stream.readInt16();if(!(e>0)){return false}const r=this._stream.readString(4);if(r!=="Exif"){return false}return true}_parse(){if(!this.isValid()){return}this._stream.setHead(10);const t=this._stream.getHead();this._bigEndian=false;const e=this._stream.readInt16();if(e===18761){this._bigEndian=false}else if(e===19789){this._bigEndian=true}else{uw(false,"Invalid TIFF data: No endian type found")}uw(this._stream.readInt16(!this._bigEndian)===42,"Invalid TIFF data: No 0x002A");const r=this._stream.readInt32(!this._bigEndian);uw(r>=8,"Invalid TIFF data: First IFD offset < 8");const o=t+r;const n=this._readTags(this._stream,t,o,this._bigEndian);this._tags=n.tags;this._tagData=n.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(t){if(this._tagData.Orientation){const{entryOffset:e}=this._tagData.Orientation;this._stream.setHead(e+8);this._stream.writeInt16(this._bigEndian?t:(t&255)<<8|t>>8&255)}}_readTags(t,e,r,o){t.setHead(r);const n=t.readInt16(!o);const s={};const a=[];for(let l=0;l<n;l++){const c=r+l*12+2;t.setHead(c);let u=t.readInt16(!o);let m;let p;let h;if(Y3[u]){u=Y3[u];m=t.readInt16(!o);p=t.readInt32(!o);h=t.readInt32(!o)+e;let g=null;switch(m){case 1:case 7:if(p===1){g=t.readInt8(!o)}else{g=[];for(let _=0;_<p;_++){g.push(t.readInt8(!o))}}break;case 2:t.setHead(p>4?h:c+8);g=t.readString(p);break;case 3:t.setHead(p>2?h:c+8);if(p===1){g=t.readInt16(!o)}else{g=[];for(let _=0;_<p;_++){g.push(t.readInt16(!o))}}break;case 4:case 9:t.setHead(p>1?h:c+8);if(p===1){g=t.readInt32(!o)}else{g=[];for(let _=0;_<p;_++){g.push(t.readInt32(!o))}}break;case 5:case 10:t.setHead(h);if(p===1){const _=t.readInt32(!o);const x=t.readInt32(!o);g=_/x}else{g=[];for(let _=0;_<p;_++){const x=t.readInt32(!o);const b=t.readInt32(!o);const w=x/b;g.push(w)}}break}s[u]=g;a[u]={value:g,numValues:p,entryOffset:c,valueOffset:h,type:m}}}return{tags:s,tagData:a}}getBuffer(){return this._buf}};Z3=J3});var vnt,tz,dw;var ez=d(()=>{Ny();Hy();({MARKERS:vnt}=Bd);tz=class{constructor(t){this._buf=t;this._stream=new pc(this._buf);this._stream.setHead(0)}isValid(){this._stream.setHead(0);const t=this._stream.readInt16();if(t!==vnt.APP0){return false}const e=this._stream.readInt16();if(!(e>=16)){return false}const r=this._stream.readString(4);const o=this._stream.readInt8();if(!(r==="JFIF")){return false}if(!(o===0)){return false}return true}setUnitDensity(t){this._stream.setHead(11);this._stream.writeInt8(t)}setDensityX(t){this._stream.setHead(12);this._stream.writeInt16(t)}setDensityY(t){this._stream.setHead(14);this._stream.writeInt16(t)}getUnitDensity(){this._stream.setHead(11);return this._stream.readInt8()}getDensityX(){this._stream.setHead(12);return this._stream.readInt16()}getDensityY(){this._stream.setHead(14);return this._stream.readInt16()}getBuffer(){return this._buf}};dw=tz});var jFt,bh,Wy,Cnt,Dn,yh;var mw=d(()=>{Ny();bd();Hy();Q3();ez();Tn();({invariant:jFt}=L);({MARKERS:bh}=Bd);Wy="data:image/jpeg;base64,";Cnt=new RegExp(`^${Wy}`,"i");Dn=class{constructor(t){this._buf=t;this._stream=new pc(this._buf);this._stream.setHead(0);this._segments=this._sliceIntoSegments(this._buf);this._exifData=new Z3(this._getMarkerBuffer(bh.EXIF));this._jfifData=new dw(this._getMarkerBuffer(bh.JFIF))}static toDataURL(t){return Wy+eo.encode(t)}static fromDataURL(t){const e=t.replace(Wy,"");const r=eo.decode(e);return r}restoreSegmentsInArray(t){t=this.restoreExifTagsToImageData(t);return this.restoreJfifSegmentToImageData(t)}restoreSegments(t){let e=Dn.fromDataURL(t);e=this.restoreSegmentsInArray(e);return Dn.toDataURL(e)}restoreExifTagsToImageData(t){if(!this._exifData.isValid()){return t}const e=this._sliceIntoSegments(t);const r=e[1][0];const o=t.slice(0,r);const n=t.slice(r);let s=o.concat(this._exifData.getBuffer());s=s.concat(n);return s}restoreJfifSegmentToImageData(t){if(!this._jfifData.isValid()){return t}const e=this._sliceIntoSegments(t);const r=this._findSegment(bh.JFIF,e);let o=[];if(r){const n=r[0];const s=r[1];const a=t.slice(0,n);const l=t.slice(n,s);const c=t.slice(s);const u=new dw(l);u.setDensityX(this._jfifData.getDensityX());u.setDensityY(this._jfifData.getDensityY());u.setUnitDensity(this._jfifData.getUnitDensity());o=a.concat(l).concat(c)}else{return t}return o}restoreExifTags(t){const e=Dn.fromDataURL(t);const r=this.restoreExifTagsToImageData(e);return Dn.toDataURL(r)}restoreJfifSegment(t){if(!this._jfifData.isValid()){return t}const e=Dn.fromDataURL(t);const r=this.restoreJfifSegmentToImageData(e);return Dn.toDataURL(r)}setOrientation(t){return this._exifData.setOrientation(t)}static isJPEG(t){return Cnt.test(t)}static bufferIsJPEG(t){return t[0]===255&&t[1]===216&&t[2]===255}static fromBase64String(t){const e=t.replace(Wy,"");const r=eo.decode(e);return new Dn(r)}_findSegment(t,e=this._segments){for(let r=0;r<e.length;r++){const o=e[r][0];const n=e[r][1];this._stream.setHead(o);const s=this._stream.peekInt16();if(s===t){return[o,n]}}return false}_getLastSegment(t=this._segments){return t[t.length-1]}_getMarkerBuffer(t,e=this._segments){const r=this._findSegment(t,e);if(r){const o=r[0];const n=r[1];return this._buf.slice(o,n)}return false}_sliceIntoSegments(t){const e=new pc(t);const r=[];while(e.getHead()<t.length){const o=e.readInt16();if(o===bh.SOI){continue}if(o===bh.SOS){break}if(o>=65280&&o<=65535){const n=e.readInt16();const s=e.getHead()+n-2;r.push([e.getHead()-4,s]);e.setHead(s)}else{throw new Error(`Invalid marker: 0x${o.toString(16)}`)}}this._stream.setHead(0);return r}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[];this._segments=[]}};yh=Dn});var iz,Ki;var Gy=d(()=>{if(true){iz=typeof window!=="undefined"&&window.Image}if(false){iz=null.Image}Ki=iz});var Vy,jy;var pw=d(()=>{mc();Cd();Vy=class extends Gi{constructor(t=[]){super();this._onOperationUpdate=this._onOperationUpdate.bind(this);this._cacheEnabled=true;this._stack=t;this._stack.forEach(e=>{e.on("update",this._onOperationUpdate)})}clear(){this.forEach(t=>this.remove(t));this._stack=[]}hasChanges(){return this._stack.filter(t=>!!t).some(t=>t.hasChanges())}_onOperationUpdate(t,e){this.emit(Rd.OPERATION_UPDATED,t,e)}enableCache(){this._cacheEnabled=true}disableCache(){this._cacheEnabled=false}forEach(t){return this._stack.filter(e=>!!e).forEach(t)}render(t,e){const r=e;const o=this._stack.filter(c=>!!c).filter(c=>c.getEnabled());o.reverse();const n=o.filter(c=>!c.isDirtyForRenderer(t.getRenderer()))[0];const s=o.indexOf(n);o.reverse();let a=0;if(s!==-1){a=o.length-s-1}for(let c=0;c<a;c++){q.info(this.constructor.name,`Skipping ${o[c].constructor.name}`)}let l=Promise.resolve(r);for(let c=a;c<o.length;c++){const u=o[c];let m;let p;l=l.then(h=>{return u.render(h).then(g=>{if(m&&g!==m&&!this._cacheEnabled){p.disposeRenderTextures()}m=g;p=u;return g})})}return l.then(c=>{const u=!o.some(m=>m.isDirtyForRenderer(t.getRenderer()));return{outputTexture:c,renderDone:u}})}validateSettings(){return Promise.all(this._stack.filter(t=>!!t).map(t=>t.validateSettings()))}setAllToDirty(t=false){this.forEach(e=>e.setDirty(true,t))}updateDirtinessForRenderer(t){let e=false;for(let r=0;r<this._stack.length;r++){const o=this._stack[r];if(!o)continue;if(o.isDirtyForRenderer(t)){e=true}if(e){o.setDirtyForRenderer(true,t)}}}push(t){this._stack.push(t);t.on("update",this._onOperationUpdate)}pop(){const t=this._stack.pop();if(t){t.off("update",this._onOperationUpdate);t.dispose()}}unshift(t){this._stack.unshift(t);t.on("update",this._onOperationUpdate)}clone(){return new Vy(this._stack.slice(0))}get(t){return this._stack[t]}getByIdentifier(t){return L.Array.find(this._stack,e=>e&&e.constructor.identifier===t)}getIndexByIdentifier(t){return L.Array.findIndex(this._stack,e=>e&&e.constructor.identifier===t)}moveToTop(t){const e=L.Array.findIndex(this._stack,o=>o&&o.constructor.identifier===t);if(e<0||e===this._stack.length-1){return}const r=this.getByIdentifier(t);this._stack.splice(e,1);this._stack[this._stack.length]=r}set(t,e){if(this._stack[t]){this._stack[t].off("update",this._onOperationUpdate);this._stack[t].dispose()}this._stack[t]=e;e.on("update",this._onOperationUpdate)}remove(t){const e=this._stack.indexOf(t);if(e===-1){return}if(this._stack[e]){this._stack[e].off("update",this._onOperationUpdate);this._stack[e].dispose()}this._stack.splice(e,1)}removeAt(t){if(this._stack[t]){this._stack[t].off("update",this._onOperationUpdate);this._stack[t].dispose()}delete this._stack[t]}getStack(){return this._stack}dispose(){this.forEach(t=>{t.dispose()})}};jy=Vy});var rz,oz,$y;var hw=d(()=>{mc();rz=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oh();oz=class{constructor(t,e){this._tag=t;this._name=e;this._start=rz()}stop(){const t=rz();const e=t-this._start;const r=Math.round(1e3/e);q.info(this._tag,`${this._name} took ${e.toFixed(2)}ms (${r} FPS)`)}};$y=oz});var fw,Mt;var gw=d(()=>{Lo();Or();fh();Td();hw();fw=class extends yt{constructor(t,e={}){super(e,{enabled:{type:"boolean",default:true,serializable:false}});this._sdk=t;this._cacheEnabled=false;this._dirtiness={};this._sprite=new M.Sprite;this._container=new M.Container;this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(true)}render(t){if(!this.getEnabled()){q.info(this.constructor.name,"Disabled - skipping");return Promise.resolve(t)}if(!this._renderTexture){const n=t.getDimensions().floor();this._renderTexture=new M.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}const e=this._sdk.getRenderer();let r;let o;if(q.canLog("info")){o=new $y(this.constructor.name,"Rendering")}if(this.isDirtyForRenderer(e)){this._sprite.setTexture(t);const n=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(n);this._renderTexture.clear();r=this._render(t).then((s=false)=>{this.setDirtyForRenderer(s,e);return this._renderTexture})}else{q.info(this.constructor.name,"Rendering from cache");r=Promise.resolve(this._renderTexture)}return r.then(n=>{if(o)o.stop();return n})}_render(t){let e;if(this._sdk.getRenderer().isOfType("webgl")){e=this._renderWebGL.bind(this)}else{e=this._renderCanvas.bind(this)}return e(t)}_renderWebGL(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(t){return t.clone()}onBeforeExport(){if(this.transform&&this._tempTransformChange){this.transform(this._tempTransformChange)}this._onBeforeExport()}onAfterExport(){if(this.transform&&this._tempInverseTransformChange){this.transform(this._tempInverseTransformChange)}this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(t,e){this._tempTransformChange=t;this._tempInverseTransformChange=e}reset(){this._dirty=true;this._glslPrograms={}}isDirtyForRenderer(t){const e=this._dirtiness[t.id];return typeof e==="undefined"?true:e}setDirtyForRenderer(t,e,r=false){this._dirtiness[e.id]=t}setDirty(t,e=false){for(const r in this._dirtiness){this.setDirtyForRenderer(t,{id:r},e)}}getSDK(){return this._sdk}getInputDimensions(t=true){let e=this._sdk.getInputDimensions();if(t){e.multiply(this._sdk.getZoom()).floor()}let r;this._sdk.getOperationsStack().forEach(o=>{if(r)return;if(o===this){r=true;return}e=o.getNewDimensions(e)});return e.floor()}clone(){const t=this.constructor;return new t(this._sdk,this.serializeOptions())}disposeRenderTextures(){if(this._renderTexture){this._renderTexture.dispose()}this._renderTexture=null}dispose(){this.disposeRenderTextures();this._sprite.dispose()}};fw.identifier=null;Mt=fw});var Snt,Ky,nz;var sz=d(()=>{mc();As();gw();({OptionType:Snt}=er);Ky=class extends Mt{getRotation(){let t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90;break}return t}_getFlipVertically(){const{Orientation:t}=this.getTags();return[5,7].indexOf(t)!==-1}_getFlipHorizontally(){const{Orientation:t}=this.getTags();return[2,4].indexOf(t)!==-1}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(t){const e=this._getFinalOptions();const r=e.rotation%360;const o=r*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1);this._sprite.setRotation(o);this._sprite.setAnchor(.5,.5);this._sprite.updateTransform();const n=this._sprite.getBounds();this._renderTexture.resizeTo(new rt(n.width,n.height));this._sprite.setPosition(this._renderTexture.getDimensions().divide(2));this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(t){const e=this._getFinalOptions();t=t.clone();if(e.rotation%180){t.flip()}return t}applyTo(t){const e=this._getFinalOptions();const r=L.createCanvas();if(Math.abs(e.rotation%180)===90){r.width=t.height;r.height=t.width}else{r.width=t.width;r.height=t.height}const o=r.getContext("2d");const n=e.rotation*Math.PI/180;const s=.5*(r.width-t.width);const a=.5*(r.height-t.height);o.translate(s,a);o.translate(.5*t.width,.5*t.height);o.rotate(n);o.translate(-.5*t.width,-.5*t.height);if(e.flipVertically){o.translate(0,t.height);o.scale(1,-1)}if(e.flipHorizontally){o.translate(t.width,0);o.scale(-1,1)}o.drawImage(t,0,0);return r}};Ky.identifier="exif-orientation";Ky.prototype.availableOptions={tags:{type:Snt.OBJECT,default:{}}};nz=Ky});var Pd={};ue(Pd,{ExifOrientationOperation:()=>nz});var bw=d(()=>{sz()});var yw,az;var lz=d(()=>{wo();Or();fh();rc();Td();Gy();Tn();yw=class extends yt{constructor(t,e={}){super(e);this._sdk=t}export(){const{imageFormat:t,transparent:e}=this._options;const r=o=>{if(!o.renderDone){return this._sdk.render().then(n=>{return r(n)})}return o};return this.validateSettings().then(()=>{return this._prepareSDK().then(o=>{return r(o)})}).then(o=>{const{outputTexture:n,renderDone:s}=o;const a=this._sdk.getRenderer();const l=a.getClearColor();if(t==="image/png"&&e){a.setClearColor(new W(0,0,0,0))}let c=a.getCanvas();if(a.isOfType("webgl")){c=this._createCanvasFromTexture(n)}a.setClearColor(l);return this._encodeImageFormat(c)}).then(o=>{return this._restoreExifMetadata(o,t)}).then(o=>{return this._restoreSDK().then(()=>o)})}_restoreExifMetadata(t,e,r){if(e===ec.JPEG){const o=this._sdk.getExif();if(o){if(true){if(typeof t==="string"){t=o.restoreSegments(t)}}if(false){const{renderType:n}=this._options;if(n===Rr.BUFFER){t=Buffer.from(o.restoreSegmentsInArray([...t]))}else if(n===Rr.DATAURL&&typeof t==="string"){t=o.restoreSegments(t)}}}}return Promise.resolve(t)}_encodeAsDataURL(t,e,r){if(L.isBrowser){const o=t.toDataURL(e,r);jt(t);return Promise.resolve(o)}try{const o=t.toDataURL(e,r);jt(t);return Promise.resolve(o)}catch(o){return Promise.error(o)}}_encodeAsHTMLImage(t,e,r){return this._encodeAsDataURL(t,e,r).then(o=>{const n=new Ki;n.src=o;jt(t);return Promise.resolve(n)})}_encodeAsBuffer(t,e,r){if(false){if(e===ec.JPEG){const o=t.toBuffer(e,{quality:r,progressive:true,chromaSubsampling:false});jt(t);return Promise.resolve(o)}if(e===ec.PNG){const o=t.toBuffer(e,{quality:r});jt(t);return Promise.resolve(o)}if(e===ec.RAW){const o=t.toBuffer(e);jt(o);return Promise.resolve(o)}return Promise.reject(new Error(`Unsupported imageFormat: ${e}`))}return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(t,e,r){const o=t.msToBlob();jt(t);return Promise.resolve(o)}_encodeAsBLOB(t,e,r){return new Promise((o,n)=>{t.toBlob(s=>{o(s)},e,r)})}_encodeImageFormat(t){const{imageFormat:e,quality:r}=this._options;let{renderType:o}=this._options;if(o===Rr.BLOB&&t.msToBlob&&!t.toBlob){o=Rr.MSBLOB}switch(o){case Rr.IMAGE:{return this._encodeAsHTMLImage(t,e,r)}case Rr.DATAURL:{return this._encodeAsDataURL(t,e,r)}case Rr.BUFFER:{return this._encodeAsBuffer(t,e,r)}case Rr.MSBLOB:{return this._encodeAsMSBlob(t,e,r)}case Rr.BLOB:{return this._encodeAsBLOB(t,e,r)}}return Promise.reject(new Error(`Unsupported RenderType: ${o}!`))}_prepareSDK(){const t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),rendererPixelRatio:t.getPixelRatio(),renderMode:this._sdk.getRenderMode()};this._sdk.setRenderMode("export");this._sdk.setTextureQuality(1);const e=t.isOfType("canvas");t.setPixelRatio(1);t.resizeTo(this._sdk.getFinalDimensions(),e);this._sdk.setAllOperationsToDirty(true);const r=this._sdk.getOperationsStack();r.forEach(o=>{o.disposeRenderTextures()});r.disableCache();return this._sdk.render()}_restoreSDK(){const t=this._sdk.getOperationsStack();t.enableCache();this._sdk.setRenderMode(this._sdkSettings.renderMode);const e=this._sdk.getRenderer();const r=e.isOfType("canvas");e.setPixelRatio(this._sdkSettings.rendererPixelRatio);e.resizeTo(this._sdkSettings.dimensions,r);this._sdk.setTextureQuality(this._sdkSettings.textureQuality);this._sdk.setAllOperationsToDirty(true);return this._sdk.render()}_createCanvasFromTexture(t){const e=this._sdk.getRenderer();const r=this._sdk.getFinalDimensions();const o=this._sdk.getRenderer().getContext();const n=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,n);const s=t.getBaseTexture().getGLTextureForRenderer(e);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,s,0);const a=new Uint8Array(r.x*r.y*4);o.readPixels(0,0,r.x,r.y,o.RGBA,o.UNSIGNED_BYTE,a);const l=this._checkPixelsForTransparency(a);let c;if(l){const h=new M.Sprite(t);h.setFilters([new M.Filters.UnpremultiplyFilter]);const g=new M.Container;g.addChild(h);c=new M.RenderTexture(e,r.x,r.y);c.render(g);const _=c.getBaseTexture().getGLTextureForRenderer(e);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,_,0);o.readPixels(0,0,r.x,r.y,o.RGBA,o.UNSIGNED_BYTE,a);e.setRenderTarget();c.dispose()}const u=L.createCanvas();u.width=r.x;u.height=r.y;const m=u.getContext("2d");const p=m.createImageData(r.x,r.y);p.data.set(a);m.putImageData(p,0,0);o.deleteFramebuffer(n);return u}_checkPixelsForTransparency(t){const e=this._sdk.getFinalDimensions();const r=e.x*e.y*4;let o;for(let n=3;n<r;n+=4){o=t[n];if(o!==255){return true}}return false}};yw.prototype.availableOptions={renderType:{type:"string",available:L.values(Rr),default:Rr.IMAGE},imageFormat:{type:"string",available:L.values(ec),default:ec.PNG},quality:{type:"number",default:.8},transparent:{type:"boolean",default:true}};az=yw});var wnt,Tnt,oo,uz,knt,_w,xw,Us,Int,SRt,be,Dnt,Ent,cz,dz,we;var mz=d(()=>{mc();mw();Gy();lz();pw();hw();bw();({Rectangle:wnt,Constants:Tnt,Engine:oo,Utils:uz,EventEmitter:knt,Events:_w,Vector2:xw,Log:Us,Base64:Int,Color:SRt}=hh);be=i=>uz.byteArrayToString(Int.decode(i));({RenderType:Dnt,ImageFormat:Ent,RendererType:cz}=Tnt);dz=class extends knt{constructor(t,e={}){super();X(this,"_onContextLost",()=>{this.emit("context-lost")});X(this,"_initWatermark",()=>{if(this._options.watermark&&this._options.watermark.watermarkURI){this._watermarkOperation=this.createOperation("watermark",{watermarkURI:this._options.watermark.watermarkURI,alignment:this._options.watermark.alignment,inset:this._options.watermark.inset,size:this._options.watermark.size,crossOrigin:this._options.crossOrigin})}});this._onOperationUpdate=this._onOperationUpdate.bind(this);this._onContextRestored=this._onContextRestored.bind(this);this.version="3.9.0";this[be("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=true;this._preferredRenderer=t;this._options={...e,extensions:{},renderMode:"dynamic",versionCheck:true,displayWelcomeMessage:true,image:null,canvas:null,transparent:false,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:false,smoothUpscaling:false,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:Math.max(typeof window!=="undefined"&&window.devicePixelRatio||1,1)};if(this._options.smoothUpscaling){oo.BaseTexture.DefaultMagFilter=oo.BaseTexture.LinearFilter}this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]});Us.setLevel(this._options.logLevel);this[be("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=false;if(!this[be("X29wdGlvbnM=")][be("bGljZW5zZQ==")]){this[be("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=true;this._l=new hh[be("RnJlZUxpY2Vuc2VDaGVja2Vy")]}else{const o=hh[be("TGljZW5zZUNoZWNrZXI=")];this._l=new o(this[be("X29wdGlvbnM=")][be("bGljZW5zZQ==")]);this._cv(true).then(()=>{this._ct()}).catch(n=>{Us.error(be("TGljZW5zaW5n"),n.message)})}this._defaultRenderMode=this._options.renderMode;this._renderMode=this._options.renderMode;this._textureQuality=this._options.textureQuality;this._offset=new xw;this._zoom=this._options.zoom;this._spriteScale=this._options.spriteScale;this._rotation=this._options.rotation;this._operations={};this._operationsStack=null;this.setOperationsStack(new jy);this._container=new oo.Container;this._sprite=new oo.Sprite;this._container.addChild(this._sprite);this._inputTexture=this._options.inputTexture;this._currentInputTexture=null;this._currentTexture=null;this._resizedTexture=null;this._resizedContainer=new oo.Container;this._resizedSprite=new oo.Sprite;this._resizedContainer.addChild(this._resizedSprite);this._texturesToDispose=[];this.setSmoothDownscaling(this._options.smoothDownscaling);this._registerOperations();this._initRenderer();const r=this._renderer.constructor.type;if(this._options.displayWelcomeMessage){if(false){Us.log("Version:",`${this.version} (${r}) - https://img.ly/photo-sdk`)}}if(this[be("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]){Us.log(be("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LmltZy5seS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LmltZy5seS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2ltZy5seS9kb2NzL3Blc2RrL3dlYi9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg=="))}if(this._options.image){this.setImage(this._options.image,this._options.exif)}}_ct(){if(this._l.exp()){const t=this._l.isExp();if(t){Us.error(be("TGljZW5zaW5n"),be("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg=="))}else{Us.warn(be("TGljZW5zaW5n"),be("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}}}_cv(t=false){return this._l.c().catch(e=>{this[be("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=false;let r=be("SW52YWxpZCBsaWNlbnNlLg==");if(t){if(e.code==="ELICEXP"){r=be("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg==")}else if(e.code==="ELICINVHOST"){r=be("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5pbWcubHkvbG9naW4u")}else if(e.code==="ELICINVPLAT"){r=be("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg==")}else if(e.code==="ELICINVFMT"){r=be("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license)}else if(e.code==="ELICINV"){r=be("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg==")}else{r=be("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5IHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")}}e.message=r;throw new Error(e)})}_t(){this._l.t()}_fl(){return this[be("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...t){this.emit(_w.OPERATION_UPDATED,...t)}_onContextRestored(){Us.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored.");this.setAllOperationsToDirty();this._operationsStack.forEach(t=>{t.disposeRenderTextures()});this.render()}export(t=Dnt.DATAURL,e=Ent.PNG,r=.8,o=true,n=false){return this._cv(true).then(()=>{if(this.hasChanges()&&!n){this._t()}this._operationsStack.forEach(a=>{a.onBeforeExport()});const s=new az(this,{renderType:t,imageFormat:e,quality:r,transparent:o});return s.export().then(a=>{this._operationsStack.forEach(l=>{l.onAfterExport()});return Promise.resolve(a)})})}render(t=true){if(!this._inputTexture){throw new Error("You need to set an image before calling PhotoEditorSDK#render.")}const e=this._renderer.getContext();if(e.startFrame){e.startFrame()}let r;if(Us.canLog("info")){r=new $y("\u26A1\u26A1\u26A1","Frame rendering")}Us.info("\u26A1\u26A1\u26A1","Rendering starts");const o=this._operationsStack;o.updateDirtinessForRenderer(this._renderer);return this._prepareTexture().then(n=>{if(this._renderMode==="export"){n=this._inputTexture}this._currentTexture=n;this._sprite.setTexture(n);this._container.updateTransform()}).then(()=>o.validateSettings()).then(()=>{if(this._fl()||!this[be("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]){if(!o.getByIdentifier("license-watermark")){this.createOperation("license-watermark")}else{o.moveToTop("license-watermark")}}if(!o.getByIdentifier("watermark")){this._initWatermark()}else{o.moveToTop("watermark")}return o.render(this,this._currentTexture)}).then(n=>{const{outputTexture:s}=n;this._currentTexture=s;this._sprite.setTexture(this._currentTexture);switch(this._renderMode){case"dynamic":{const a=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale());this._container.setPosition(a);this._sprite.setAnchor(.5,.5);this._sprite.setScale(this._spriteScale,this._spriteScale);this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1);this._container.setPosition(0,0);this._sprite.setAnchor(0,0);this._sprite.setPosition(0,0);this._sprite.setScale(this._spriteScale,this._spriteScale);this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1);this._container.setPosition(0,0);this._sprite.setAnchor(0,0);this._sprite.setPosition(0,0);this._sprite.setScale(1,1);this._sprite.setRotation(0);break}if(t){this._renderer.render(this._container)}return n}).then(n=>{if(r){r.stop()}if(e.endFrame){e.endFrame()}this._disposeTextures();return n})}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise((t,e)=>{const r=this.getTextureScale();if(this._textureQuality===1){return t(this._inputTexture)}const o=this.getInputDimensions().multiply(r).floor();let n;if(!this._resizedTexture){this._resizedTexture=new oo.RenderTexture(this._renderer,o.x,o.y);n=true}else if(!this._resizedTexture.getDimensions().equals(o)){this._resizedTexture.resizeTo(o);n=true}if(n){this._resizedSprite.setScale(r,r);this._resizedSprite.setTexture(this._inputTexture);this._resizedTexture.render(this._resizedContainer)}t(this._resizedTexture)})}_registerOperations(){this._operations={};for(const t in Pd){const e=Pd[t];this._operations[e.identifier]=e}this._operations={...this._operations,...this._options.extensions.operations}}registerOperations(t){t.forEach(e=>{this._operations[e.identifier]=e})}setAllOperationsToDirty(t=false){this._operationsStack.setAllToDirty(t)}createOperation(t,e={},r=true){const o=this._operations[t];if(!o){throw new Error(`No operation with identifier \`${t}\` found.`)}const n=new o(this,e);if(r){this.addOperation(n)}return n}addOperation(t){this._operationsStack.push(t)}removeOperation(t){this._operationsStack.remove(t)}getInputDimensions(){const t=this._inputTexture.getFrame();return new xw(t.width,t.height)}getFinalDimensions(t=false){let e=this.getInputDimensions();const r=this._operationsStack;r.forEach(o=>{if(!o.getEnabled())return;e=o.getNewDimensions(e)});if(t){e.multiply(this._spriteScale)}return e.floor()}getOutputDimensions(t=false){return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(t=false){const e=this.getTextureScale();let r=this.getInputDimensions().multiply(e).floor();this._operationsStack.forEach(o=>{r=o.getNewDimensions(r)});return r}getCrossOrigin(){return uz.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){const t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};let e;let r;if(this._renderMode!=="export"&&this._options.canvas){const{canvas:o}=this._options;e=o.width;r=o.height}else if(this._inputTexture){const o=this.getFinalDimensions();e=o.x;r=o.y}else{e=1;r=1}switch(this._preferredRenderer){case cz.WEBGL:this._renderer=oo.autoDetectRenderer(e,r,t);this._renderer.on("context-restored",this._onContextRestored);this._renderer.on("context-lost",this._onContextLost);break;case cz.CANVAS:this._renderer=oo.canvasRenderer(e,r,t);this._renderer.on("context-restored",this._onContextRestored);break;default:Us.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`);this._renderer=oo.autoDetectRenderer(e,r,t)}}resizeTo(t){this._renderer.resizeTo(t,true)}reset(){this._operationsStack.clear()}parseExif(t){if(!t){return}let{src:e}=t;let r=false;let o=null;if(true){r=yh.isJPEG(e);o=e}else if(t instanceof Ki&&t.rawSource){let n=t.rawSource;if(!(t.rawSource instanceof Buffer)){const s=t.rawSource.replace("data:image/jpeg;base64,","");n=Buffer.from(s,"base64");e=t.rawSource}else{e=t.rawSource.toString("base64")}r=yh.bufferIsJPEG(n);if(r){o=e}}if(r){let n=null;try{n=yh.fromBase64String(o)}catch(s){}if(!n){return}return n}}_handleExifOrientation(){const t=this._exif.getTags();if(t&&t.Orientation){const e=t.Orientation!==1&&t.Orientation!==2;const r=[2,4,5,7].indexOf(t.Orientation)!==-1;if(e||r){if(typeof navigator==="undefined"){if(!this._exifOperation){this._exifOperation=this.createOperation("exif-orientation")}this._exifOperation.setTags(t)}else{const o=window&&window.navigator&&window.navigator.userAgent||"";if(!!o.match(/msie|trident/i)||o.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){if(!this._exifOperation){this._exifOperation=this.createOperation("exif-orientation")}this._exifOperation.setTags(t)}}this._exif.setOrientation(1)}}}correctExifOrientation(t){const e=this.parseExif(t);if(!e){return t}const r=e.getTags();if(r&&r.Orientation){const o=r.Orientation!==1&&r.Orientation!==2;const n=[2,4,5,7].indexOf(r.Orientation)!==-1;if(o||n){if(typeof navigator==="undefined"){const s=this.createOperation("exif-orientation",{},false);s.setTags(r);t=s.applyTo(t)}else{const s=window&&window.navigator&&window.navigator.userAgent||"";if(!!s.match(/msie|trident/i)||s.indexOf("Edge")!==-1||!CSS.supports("image-orientation","from-image")){const a=this.createOperation("exif-orientation",{},false);a.setTags(r);t=a.applyTo(t)}}e.setOrientation(1);r.Orientation=1;return t}}return t}hasImage(){return this._image!==null&&typeof this._image!=="undefined"}getImage(){return this._image}disposeTexture(t){this._texturesToDispose.push(t)}_disposeTextures(){for(let t=0;t<this._texturesToDispose.length;t++){this._texturesToDispose[t].dispose()}this._texturesToDispose=[]}setImage(t,e=null,r=null){this._disposeTextures();if(this._exifOperation){this.removeOperation(this._exifOperation);this._exifOperation=null}this._options.image=t;this._image=t;this._exif=e||this.parseExif(t);if(this._exif){this._handleExifOrientation()}const o=new oo.BaseTexture(this._image);const n=new wnt(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);if(r){n.width=r.x;n.height=r.y}if(this._resizedTexture){this._resizedTexture.dispose()}this._resizedTexture=null;if(this._inputTexture){this.disposeTexture(this._inputTexture.getBaseTexture())}this._inputTexture=new oo.Texture(o,n);this._currentTexture=this._inputTexture;this._sprite.clearTexture(false);this._sprite.setTexture(this._inputTexture);this.emit("new-image");this.setAllOperationsToDirty(true)}setInputTexture(t){this._inputTexture=t}getCanvas(){return this._renderer.getCanvas()}setCanvas(t){this._renderer.setCanvas(t)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(t){if(this._operationsStack){this._operationsStack.off(_w.OPERATION_UPDATED,this._onOperationUpdate)}this._operationsStack=t;this._operationsStack.on(_w.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(t,e){if(t instanceof xw){this._offset.copy(t)}else{this._offset.set(t,e)}}getRenderMode(){return this._renderMode}setRenderMode(t){this._renderMode=t}getZoom(){return this._zoom}setZoom(t){this._zoom=t;this._container.setScale(this._zoom,this._zoom);this._container.updateTransform()}getTextureQuality(){if(this._renderMode==="export"){return 1}return this._textureQuality}setTextureQuality(t){if(t!==this._textureQuality){this.setAllOperationsToDirty(true)}this._textureQuality=Math.min(1,t);if(this._textureQuality===1&&this._resizedTexture){this._resizedTexture.dispose();this._resizedTexture=null}}getSpriteScale(){return this._spriteScale}setSpriteScale(t){this._spriteScale=t;this._sprite.setScale(t,t);this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(t){this._options.smoothDownscaling=t;this._sprite.setSmoothDownscaling(t);this._resizedSprite.setSmoothDownscaling(t)}setRotation(t){this._rotation=t}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose();this._renderer.dispose();if(this._exif){this._exif.dispose()}if(this._resizedTexture){this._resizedTexture.dispose()}}};we=dz});var Fnt,ht;var _h=d(()=>{Lo();P4();Or();fh();bd();rc();Td();X3();Cd();mw();Gy();rw();aw();pw();Tn();bw();gw();mz();we.version="3.9.0";we.Math=Y;we.Operations=Pd;we.Engine=M;we.Color=W;we.LicenseChecker=zy;we.Operation=Mt;we.EventEmitter=Gi;we.Utils=L;we.Env=K3;we.OperationsStack=jy;we.EXIF=yh;we.Image=Ki;we.Configurable=yt;we.Log=q;we.Loaders=k1;we.RenderType=Rr;we.ImageFormat=ec;we.OptionType=$;we.RendererType=$e;we.UniformType=ae;we.Base64=eo;Fnt={};we.UI=Fnt;ht=we});var j=d(()=>{_h();_h()});var hz;var pz=d(()=>{hz="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"});function vw(i,t,e,r,o){return(i-t)*(o-r)/(e-t)+r}var Ont,Md,Ant,Cw,Xy;var Sw=d(()=>{j();pz();({ColorMatrix:Ont}=Y);Md=1e-7;Ant=i=>{const t=Math.max(i.r,i.g,i.b);const e=Math.min(i.r,i.g,i.b);return(t+e)/2};Cw=class extends M.Filter{constructor(){super();this._fragmentSource=hz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{colorMatrix:c,gamma:u,shadows:m,highlights:p,whites:h,blacks:g}=this._options;const _=u!==1;const x=m!==0||p!==0;let b=new W(0,0,0,0);for(let w=0;w<n.width*n.height;w++){const T=w*4;b.r=l.data[T]/255;b.g=l.data[T+1]/255;b.b=l.data[T+2]/255;if(_){b.r=Math.pow(b.r,1/Math.max(u,Md));b.g=Math.pow(b.g,1/Math.max(u,Md));b.b=Math.pow(b.b,1/Math.max(u,Md))}if(x){const D=Ant(b);const O=m>=0?L.clamp(Math.pow(D,1/(m+1))+Math.pow(D,2/(m+1))*-.76-D,0,Math.max(m,1)):-L.clamp(Math.pow(D,1/(-m+1))+Math.pow(D,2/(-m+1))*-.76-D,0,Math.max(-m,1));const k=p<0?L.clamp(1-Math.pow(1-D,1/(1-p))-Math.pow(1-D,2/(1-p))*-.8-D,-1,0):-L.clamp(1-Math.pow(1-D,1/(1+p))-Math.pow(1-D,2/(1+p))*-.8-D,-1,0);const E=O*D*D;const J=O-E;const tt=D+E+k;b.r=L.clamp(tt*((b.r+J)/Math.max(D,Md)),0,1);b.g=L.clamp(tt*((b.g+J)/Math.max(D,Md)),0,1);b.b=L.clamp(tt*((b.b+J)/Math.max(D,Md)),0,1)}b=c.apply(b).clamp(0,1);b.r=vw(b.r,0,1,g/2,1+h/2);b.g=vw(b.g,0,1,g/2,1+h/2);b.b=vw(b.b,0,1,g/2,1+h/2);l.data[T]=b.r*255;l.data[T+1]=b.g*255;l.data[T+2]=b.b*255}a.putImageData(l,0,0)}};Cw.prototype.availableOptions={gamma:{type:"number",default:1,uniformType:"f"},shadows:{type:"number",default:0,uniformType:"f"},highlights:{type:"number",default:1,uniformType:"f"},whites:{type:"number",default:0,uniformType:"f"},blacks:{type:"number",default:0,uniformType:"f"},colorMatrix:{type:"color-matrix",default:new Ont,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}};Xy=Cw});var gz;var fz=d(()=>{gz="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"});var Pnt,Mnt,ww,bz;var yz=d(()=>{j();fz();({Vector2:Pnt,ColorMatrix:Mnt}=Y);ww=class extends M.Filter{constructor(){super();this._fragmentSource=gz}_applyCanvas(t,e,r,o=false){const n=r.getContext();const s=e.getCanvas();const a=e.getContext();const{clarity:l}=this._options;const{colorMatrix:c}=this._options;const u=new W(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]);const{width:m}=s;const{height:p}=s;const h=a.getImageData(0,0,m,p);const g=n.createImageData(m,p);this.canvasShader(h,g,l,c,u);n.putImageData(g,0,0)}canvasShader(t,e,r,o,n){const s=(b,w,T)=>Math.min(Math.max(b,w),T);const a=(b,w,T)=>{const D=s((T-b)/(w-b),0,1);return D*D*(3-2*D)};const l=t.width*4;const{length:c}=t.data;const u=c-1;const m=0;const p=t.data;const h=e.data;const g=new W;const _=255*9;const x=b=>{b=b<m?m:b;b=b>u?u:b;return p[b]};for(let b=0;b<c;b+=4){let w=x(b+0);let T=x(b+1);let D=x(b+2);let O=x(b+3);const k=(w+x(b-4-l+0)+x(b-4+0)+x(b-4+l+0)+x(b-l+0)+x(b+l+0)+x(b+4-l+0)+x(b+4+0)+x(b+4+l))/_;const E=(T+x(b-4-l+1)+x(b-4+1)+x(b-4+l+1)+x(b-l+1)+x(b+l+1)+x(b+4-l+1)+x(b+4+1)+x(b+4+l+1))/_;const J=(D+x(b-4-l+2)+x(b-4+2)+x(b-4+l+2)+x(b-l+2)+x(b+l+2)+x(b+4-l+2)+x(b+4+2)+x(b+4+l+2))/_;const tt=(O+x(b-4-l+3)+x(b-4+3)+x(b-4+l+3)+x(b-l+3)+x(b+l+3)+x(b+4-l+3)+x(b+4+3)+x(b+4+l+3))/_;w/=255;T/=255;D/=255;O/=255;const mt=s(w*.3+T*.59+D*.1,.111111,.999999);const bt=Math.min(a(1-mt,0,.11),a(mt,0,.11));const gt=r*3.7*bt;const pt=Math.pow(2,r*.27*bt);const Zt=s(w+s((w-k)*gt,0,10),0,1)*pt;const fi=s(T+s((T-E)*gt,0,10),0,1)*pt;const ei=s(D+s((D-J)*gt,0,10),0,1)*pt;const Kr=s(O+s((O-tt)*gt,0,10),0,1);g.set(Zt,fi,ei,Kr);const Ct=o.apply(g).clamp(0,1);h[b+0]=Ct.r*255;h[b+1]=Ct.g*255;h[b+2]=Ct.b*255;h[b+3]=Ct.a*255}}};ww.prototype.availableOptions={clarity:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new Pnt(100,100),uniformType:"2f"},colorMatrix:{type:"color-matrix",default:new Mnt,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}};bz=ww});var xz;var _z=d(()=>{xz="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"});var znt,Tw,vz;var Cz=d(()=>{j();_z();({Vector2:znt}=Y);Tw=class extends M.Filter{constructor(){super();this._fragmentSource=xz}_applyCanvas(t,e,r,o=false){const n=r.getContext();const s=e.getCanvas();const a=e.getContext();const{sharpness:l}=this._options;const{width:c}=s;const{height:u}=s;const m=a.getImageData(0,0,c,u);const p=n.createImageData(c,u);this.canvasShader(m,p,l);n.putImageData(p,0,0)}canvasShader(t,e,r){const o=(D,O,k)=>Math.min(Math.max(D,O),k);const n=1e-6;const{width:s}=t;const{height:a}=t;const l=t.data;const c=e.data;const u=(D,O,k)=>{return D*(1-k)+O*k};const m=D=>{return o(l[D]/255,0,1)};const p=(D,O)=>{const k=o(D,0,s-1);const E=o(O,0,a-1);return 4*(k+s*E)};const h=[];const g=[];const _=[-1,0,0,1];const x=[0,-1,1,0];const b=r>0?-1:.2;const w=r>0?5:.2;const T=Math.abs(r);for(let D=0;D<s;D++){for(let O=0;O<a;O++){const k=p(D,O);h[0]=m(k+0);h[1]=m(k+1);h[2]=m(k+2);h[3]=m(k+3);g[0]=w*h[0]*h[3];g[1]=w*h[1]*h[3];g[2]=w*h[2]*h[3];g[3]=w*h[3];for(let E=0;E<4;E++){const J=_[E];const tt=x[E];const mt=p(D+J,O+tt);const bt=m(mt+3);g[3]+=b*bt;for(let gt=0;gt<3;gt++){g[gt]+=b*m(mt+gt)*bt}}for(let E=0;E<3;E++){g[E]/=Math.max(g[3],n);g[E]=o(g[E],0,1)}g[3]=o(g[3],0,1);for(let E=0;E<4;E++){h[E]=o(u(h[E],g[E],T),0,1);c[k+E]=h[E]*255}}}}};Tw.prototype.availableOptions={sharpness:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new znt(100,100),uniformType:"2f"}};vz=Tw});var wz;var Sz=d(()=>{wz="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"});var nOt,kw,Tz;var kz=d(()=>{j();Sz();({Vector3:nOt}=Y);kw=class extends M.Filter{constructor(){super();this._fragmentSource=wz}_applyCanvas(t,e,r,o=false){const n=r.getContext();const s=e.getCanvas();const a=e.getContext();const{temperature:l}=this._options;const{width:c}=s;const{height:u}=s;const m=a.getImageData(0,0,c,u);const p=n.createImageData(c,u);this.canvasShader(m,p,l);n.putImageData(p,0,0)}canvasShader(t,e,r){const o=(b,w,T)=>Math.min(Math.max(b,w),T);const n=(b,w,T)=>b*(1-T)+w*T;const s=(b,w)=>{const T=b[0]*w[0]+b[3]*w[1]+b[6]*w[2];const D=b[1]*w[0]+b[4]*w[1]+b[7]*w[2];const O=b[2]*w[0]+b[5]*w[1]+b[8]*w[2];return[T,D,O]};const{length:a}=t.data;const l=a-1;const c=0;const u=t.data;const m=e.data;const p=b=>{b=b<c?c:b;b=b>l?l:b;return u[b]};const h=[.93,.54,0];const g=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311];const _=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702];const x=0;for(let b=0;b<a;b+=4){const w=p(b+0)/255;const T=p(b+1)/255;const D=p(b+2)/255;const O=p(b+3)/255;const k=[w,T,D];const E=s(g,k);E.z=o(E.z+x*.5226*.1,-.5226,.5226);const J=s(_,E);const tt=[J[0]<.5?2*J[0]*h[0]:1-2*(1-J[0])*(1-h[0]),J[1]<.5?2*J[1]*h[1]:1-2*(1-J[1])*(1-h[1]),J[2]<.5?2*J[2]*h[2]:1-2*(1-J[2])*(1-h[2])];m[b+0]=n(J[0],tt[0],r)*255;m[b+1]=n(J[1],tt[1],r)*255;m[b+2]=n(J[2],tt[2],r)*255;m[b+3]=O*255}}};kw.prototype.availableOptions={temperature:{type:"number",default:0,uniformType:"f"}};Tz=kw});var tl,xh,Iz;var Dz=d(()=>{j();Sw();yz();Cz();kz();({ColorMatrix:tl}=Y);xh=class extends Mt{constructor(...t){super(...t);this._clarityFilter=new bz;this._temperatureFilter=new Tz;this._sharpnessFilter=new vz;this._filter=new Xy;this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(t){const e=t.getDimensions();e.x=1/e.x;e.y=1/e.y;const r=new tl;r.multiply(tl.createSaturationMatrix(-.3*this._options.clarity+1));r.multiply(tl.createContrastMatrix(.1*this._options.clarity+1));this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:r,colorOffset:r.getOffsets()});this._temperatureFilter.set({temperature:this._options.temperature});this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:e});const o=new tl;o.multiply(tl.createExposureMatrix(this._options.exposure));o.multiply(tl.createSaturationMatrix(this._options.saturation+1));o.multiply(tl.createContrastMatrix((this._options.contrast>0?this._options.contrast*2:this._options.contrast)+1));o.multiply(tl.createBrightnessMatrix(this._options.brightness));this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:o,colorOffset:o.getOffsets()});const n=[];if(this._options.clarity!==0){n.push(this._clarityFilter)}if(this._options.sharpness!==0){n.push(this._sharpnessFilter)}if(this._options.temperature!==0){n.push(this._temperatureFilter)}n.push(this._filter);this._sprite.setFilters(n);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._clarityFilter.dispose();this._temperatureFilter.dispose();this._sharpnessFilter.dispose()}};xh.identifier="adjustments";xh.prototype.availableOptions={brightness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:"number",default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:"number",default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1}};ht.Operations.AdjustmentsOperation=xh;Iz=xh});var Fz;var Ez=d(()=>{Fz="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var qy,Iw,rr;var Ld=d(()=>{j();Ez();({Vector2:qy}=Y);Iw=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=Fz;this._lastBlurRadius=null;this._lastDimensions=new qy(0,0);this._blurredRenderTarget=new M.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,r,o=false,n=null){if(this._options.blurQuality==="low"){this._renderLQBlur(t,e,r,o);return}const s=e.getCanvas();const a=e.getContext();const l=r.getContext();if(this._lastBlurRadius===this._options.blurRadius){l.drawImage(s,0,0)}const c=a.getImageData(0,0,s.width,s.height);const u=l.getImageData(0,0,s.width,s.height);let m=this._options.blurRadius;const{delta:p}=this._options;const h=30;for(let g=0;g<s.width;g++){for(let _=0;_<s.height;_++){const x=g+_*s.width;const b=x*4;let w=0;let T=0;let D=0;let O=0;let k=0;if(n){m=n(g/s.width,_/s.height)}const E=this._random(g,1-_/s.height);for(let J=-h;J<=h;J++){const tt=(J+E-.5)/h;const mt=1-Math.abs(tt);const bt=p.x*tt*m;const gt=p.y*tt*m;const pt=Math.max(Math.min(g+bt,s.width-1),0);const Zt=Math.max(Math.min(_+gt,s.height-1),0);const fi=(Math.round(Zt)*s.width+Math.round(pt))*4;const ei=c.data[fi+3];const Kr=ei*c.data[fi];const Ct=ei*c.data[fi+1];const he=ei*c.data[fi+2];w+=Kr*mt;T+=Ct*mt;D+=he*mt;O+=ei*mt;k+=mt}w/=k;T/=k;D/=k;O/=k;u.data[b]=w/O;u.data[b+1]=T/O;u.data[b+2]=D/O;u.data[b+3]=O}}l.putImageData(u,0,0);this._lastDimensions.copy(new qy(s.width,s.height))}_renderLQBlur(t,e,r,o){const n=e.getDimensions();const s=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio());this._blurredRenderTarget.resizeTo(e.getDimensions());r.setPixelRatio(e.getPixelRatio());r.resizeTo(e.getDimensions());if(this._lastBlurRadius!==this._options.blurRadius||s){this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}const a=r.getContext();a.drawImage(this._blurredRenderTarget.getCanvas(),0,0);this._lastDimensions.copy(n)}_random(t,e){const r=12.9898;const o=78.233;const n=43758.5453;const s=t*r+e*o;const a=s-3.14*Math.floor(s/3.14);const l=Math.sin(a)*n;return l-Math.floor(l)}};Iw.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},delta:{type:"vector2",default:new qy(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new qy(100,100),uniformType:"2f"},blurQuality:{type:"string",default:"low"}};rr=Iw});var Rz,vh,Oz;var Az=d(()=>{j();Ld();({Vector2:Rz}=Y);vh=class extends Mt{constructor(...t){super(...t);this._lastBlurRadius=this._options.blurRadius;const e={blurQuality:{type:"string"}};this._horizontalFilter=new rr({},e);this._verticalFilter=new rr({},e);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new Rz(.5,.5));this._verticalFilter.setDelta(new Rz(-.5,.5));this._filter=new rr({},e)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){if(this._options.highQualityCanvasBlur){return this._renderBlur(t)}return this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions();const r=e.min();const{blurRadius:o}=this._options;const n={blurRadius:o*r,texSize:e,blurQuality:"high"};this._horizontalFilter.set(n);this._verticalFilter.set(n);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(t){const{blurRadius:e}=this._options;const r=t.getDimensions();this._filter.set({blurRadius:e,texSize:r,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}transform(t){const e=this.getBlurRadius();const r=t.applyToRelativeSize(e);this.set({blurRadius:r},false)}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};vh.identifier="blur";vh.prototype.availableOptions={blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};ht.Operations.BlurOperation=vh;Oz=vh});var Pz;var Bz=d(()=>{Pz="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"});var Dw,Mz,Ew;var Lz=d(()=>{j();Bz();Dw=class extends M.Filter{constructor(){super();this._fragmentSource=Pz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=r.getContext();const{filteredCanvas:a}=this._options;s.save();s.drawImage(n,0,0);s.globalAlpha=this._options.intensity;s.drawImage(a,0,0);s.restore()}};Dw.prototype.availableOptions={filteredImage:{type:"number",default:1,uniformType:"i"},filteredCanvas:{type:"object",default:null},intensity:{type:"number",default:1,uniformType:"f"}};Mz=class{constructor(t=1){this._intensity=t;this._stack=[];this._dirtiness={};this._renderTextures={};this._container=new M.Container;this._sprite=new M.Sprite;this._container.addChild(this._sprite);this._blendFilter=new Dw}push(t){this._stack.push(t)}clear(){this._stack=[]}render(t,e,r){if(this.isEmpty()){return Promise.resolve()}const o=t.getRenderer();this._sprite.setTexture(e);let n=this._renderTextures[o.id];if(!n){const l=t.getSprite().getTexture().getFrame();n=new M.RenderTexture(t.getRenderer(),l.width,l.height);this._renderTextures[o.id]=n}const s=r.getDimensions();n.resizeTo(s);const a=this.isDirtyForRenderer(o);if(a){this._stack.forEach(c=>{c.update(t)});const l=this._stack.map(c=>c.getFilter());this._sprite.setFilters(l);n.render(this._container);this.setDirtyForRenderer(false,o)}this._blendFilter.setIntensity(this._intensity);if(o.isOfType("canvas")){this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas())}else if(o.isOfType("webgl")){const l=n.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage());o.updateTexture(l,false)}this._sprite.setFilters([this._blendFilter]);r.clear(W.TRANSPARENT);r.render(this._container);if(a){this.disposeRenderTextures()}return Promise.resolve()}setIntensity(t){this._intensity=t}isEmpty(){return this._stack.length===0}isDirtyForRenderer(t){if(!(t.id in this._dirtiness)){this._dirtiness[t.id]=true}return this._dirtiness[t.id]}setDirtyForRenderer(t,e){this._dirtiness[e.id]=t}setDirty(t){for(const e in this._dirtiness){this._dirtiness[e]=t}}disposeRenderTextures(){for(const t in this._renderTextures){this._renderTextures[t].dispose();delete this._renderTextures[t]}}dispose(){this.disposeRenderTextures();this._stack.forEach(t=>t.dispose());this._stack=[];this._blendFilter.dispose();this._sprite.dispose()}};Ew=Mz});var zd,ut;var Nt=d(()=>{j();Lz();zd=class extends yt{constructor(t={},e={}){super(t,{intensity:{type:"number",default:1,setter(r){this._stack&&this._stack.setIntensity(r);return r}},dirty:{type:"boolean",default:true},...e});this._stack=new Ew(this._options.intensity)}render(t,e,r){return this._stack.render(t,e,r).then(o=>{this.setDirty(false);return o})}setDirtyForRenderer(t,e){this._stack.setDirtyForRenderer(t,e)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}};zd.identifier=null;zd.isIdentity=false;zd.displayName=null;zd.PrimitivesStack=Ew;ut=zd});var Uz;var zz=d(()=>{Uz="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"});var Nz,oe;var Ti=d(()=>{j();Nz=class extends yt{update(){}getFilter(){return this._filter}dispose(){if(this._filter){this._filter.dispose();this._filter=null}}};oe=Nz});var Yy,Fw,hc;var Hz=d(()=>{j();zz();Ti();Yy=class extends M.Filter{constructor(){super();this._fragmentSource=Uz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);let{brightness:c}=this._options;if(c===0){a.putImageData(l,0,0);return}c*=255;for(let u=0;u<n.width*n.height;u++){const m=u*4;l.data[m]+=c;l.data[m+1]+=c;l.data[m+2]+=c}a.putImageData(l,0,0)}};Yy.prototype.availableOptions={brightness:{type:"number",default:0,uniformType:"f"}};Fw=class extends oe{constructor(...t){super(...t);this._filter=new Yy}update(){this._filter.setBrightness(this._options.brightness)}};Fw.prototype.availableOptions=Yy.prototype.availableOptions;hc=Fw});var Gz;var Wz=d(()=>{Gz="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"});var Jy,Rw,or;var Vz=d(()=>{j();Wz();Ti();Jy=class extends M.Filter{constructor(){super();this._fragmentSource=Gz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{contrast:c}=this._options;if(c===1){return}for(let u=0;u<n.width*n.height;u++){const m=u*4;l.data[m]=(l.data[m]-127)*c+127;l.data[m+1]=(l.data[m+1]-127)*c+127;l.data[m+2]=(l.data[m+2]-127)*c+127}a.putImageData(l,0,0)}};Jy.prototype.availableOptions={contrast:{type:"number",default:1,uniformType:"f"}};Rw=class extends oe{constructor(...t){super(...t);this._filter=new Jy}update(){this._filter.setContrast(this._options.contrast)}};Rw.prototype.availableOptions=Jy.prototype.availableOptions;or=Rw});var $z;var jz=d(()=>{$z="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"});var jnt,Zy,Ow,Qy;var Kz=d(()=>{j();jz();Ti();({ColorMatrix:jnt}=Y);Zy=class extends M.Filter{constructor(){super();this._fragmentSource=$z}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{colorMatrix:c}=this._options;let u=new W(0,0,0,0);for(let m=0;m<n.width*n.height;m++){const p=m*4;u.r=l.data[p]/255;u.g=l.data[p+1]/255;u.b=l.data[p+2]/255;u=c.apply(u);l.data[p]=u.r*255;l.data[p+1]=u.g*255;l.data[p+2]=u.b*255}a.putImageData(l,0,0)}};Zy.prototype.availableOptions={colorMatrix:{type:"color-matrix",default:new jnt,uniformType:"mat4"},colorMatrixOffset:{type:"array",default:[],uniformType:"4f"}};Ow=class extends oe{constructor(...t){super(...t);this._filter=new Zy}update(){this._filter.setColorMatrix(this._options.colorMatrix)}};Ow.prototype.availableOptions=Zy.prototype.availableOptions;Qy=Ow});var qz;var Xz=d(()=>{qz="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"});var t_,Aw,En;var Yz=d(()=>{j();Xz();Ti();t_=class extends M.Filter{constructor(){super();this._fragmentSource=qz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const c=[.3,.59,.11];const{desaturation:u}=this._options;for(let m=0;m<n.width*n.height;m++){const p=m*4;const h=c[0]*l.data[p]/255+c[1]*l.data[p+1]/255+c[2]*l.data[p+2]/255;l.data[p]+=(h*255-l.data[p])*u;l.data[p+1]+=(h*255-l.data[p+1])*u;l.data[p+2]+=(h*255-l.data[p+2])*u}a.putImageData(l,0,0)}};t_.prototype.availableOptions={desaturation:{type:"number",default:1,uniformType:"f"}};Aw=class extends oe{constructor(...t){super(...t);this._filter=new t_}update(){this._filter.setDesaturation(this._options.desaturation)}};Aw.prototype.availableOptions=t_.prototype.availableOptions;En=Aw});var Zz;var Jz=d(()=>{Zz='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'});var e_,Bw,i_;var Qz=d(()=>{j();Jz();Ti();e_=class extends M.Filter{constructor(){super();this._fragmentSource=Zz}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{lightColor:c,darkColor:u,intensity:m}=this._options;for(let p=0;p<n.width*n.height;p++){const h=p*4;const g=l.data[h]/255;const _=l.data[h+1]/255;const x=l.data[h+2]/255;const b=l.data[h+3]/255;const w=new W(g,_,x,b);const T=this._duoToneKernel(w,c,u,m);l.data[h]=T.r*255;l.data[h+1]=T.g*255;l.data[h+2]=T.b*255;l.data[h+3]=T.a*255}a.putImageData(l,0,0)}_duoToneKernel(t,e,r,o){const n=1e-7;t.clone().clamp(0,1);if(o>0){const c=Math.max(o+1,n);t.r=1-Math.pow(1-t.r,c);t.g=1-Math.pow(1-t.g,c);t.b=1-Math.pow(1-t.b,c)}else{const c=Math.max(-o+1,n);t.r=Math.pow(t.r,c);t.g=Math.pow(t.g,c);t.b=Math.pow(t.b,c)}const s=.2126*t.r+.7152*t.g+.0722*t.b;const a=Math.min(Math.max(s,0),1);const l=r.clone().mix(e,a);l.a*=t.a;return l}};e_.prototype.availableOptions={lightColor:{type:"color",default:W.RED,uniformType:"4f"},darkColor:{type:"color",default:W.BLACK,uniformType:"4f"},intensity:{type:"number",default:.5,uniformType:"f"}};Bw=class extends oe{constructor(...t){super(...t);this._filter=new e_}update(){this._filter.setLightColor(this._options.lightColor);this._filter.setDarkColor(this._options.darkColor);const t=2*this._options.intensity-1;this._filter.setIntensity(t)}};Bw.prototype.availableOptions=e_.prototype.availableOptions;i_=Bw});var e8;var t8=d(()=>{e8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"});var r_,Pw,o_;var i8=d(()=>{j();t8();Ti();r_=class extends M.Filter{constructor(){super();this._fragmentSource=e8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{gamma:c}=this._options;const u=new Float32Array(256);for(let h=0;h<256;h++){u[h]=255*Math.pow(h/255,c.r)}const m=new Float32Array(256);for(let h=0;h<256;h++){m[h]=255*Math.pow(h/255,c.g)}const p=new Float32Array(256);for(let h=0;h<256;h++){p[h]=255*Math.pow(h/255,c.b)}for(let h=0;h<n.width*n.height;h++){const g=h*4;l.data[g]=u[l.data[g]];l.data[g+1]=m[l.data[g+1]];l.data[g+2]=p[l.data[g+2]]}a.putImageData(l,0,0)}};r_.prototype.availableOptions={gamma:{type:"color",default:W.WHITE,uniformType:"3f"}};Pw=class extends oe{constructor(...t){super(...t);this._filter=new r_}update(){this._filter.setGamma(this._options.gamma)}};Pw.prototype.availableOptions=r_.prototype.availableOptions;o_=Pw});var o8;var r8=d(()=>{o8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"});var n_,Mw,Ud;var n8=d(()=>{j();r8();Ti();n_=class extends M.Filter{constructor(){super();this._fragmentSource=o8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{color:c}=this._options;let u;for(let m=0;m<n.width;m++){for(let p=0;p<n.height;p++){const h=(n.width*p+m)*4;const g=m/n.width;const _=p/n.height;const x=(g-.5)/.75;const b=(_-.5)/.75;const w=x*x;const T=b*b;u=1-(w+T);u=Math.min(Math.max(u,.1),1);l.data[h]*=u*c.r;l.data[h+1]=l.data[h+1]*(u*c.g);l.data[h+2]=l.data[h+2]*(u*c.b);l.data[h+3]=255}}a.putImageData(l,0,0)}};n_.prototype.availableOptions={color:{type:"color",default:W.WHITE,uniformType:"3f"}};Mw=class extends oe{constructor(...t){super(...t);this._filter=new n_}update(){this._filter.setColor(this._options.color)}};Mw.prototype.availableOptions=n_.prototype.availableOptions;Ud=Mw});var a8;var s8=d(()=>{a8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"});var l8,c8,s_;var u8=d(()=>{j();s8();Ti();l8=class extends M.Filter{constructor(){super();this._fragmentSource=a8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++){for(let u=0;u<n.height;u++){const m=(n.width*u+c)*4;l.data[m+2]=l.data[m+1]*.33;l.data[m]*=.6;l.data[m+2]+=l.data[m]*.33;l.data[m+1]=l.data[m+1]*.7;l.data[m+3]=255}}a.putImageData(l,0,0)}};c8=class extends oe{constructor(...t){super(...t);this._filter=new l8}};s_=c8});var m8;var d8=d(()=>{m8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"});var p8,h8,Nd;var f8=d(()=>{j();d8();Ti();p8=class extends M.Filter{constructor(){super();this._fragmentSource=m8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++){for(let u=0;u<n.height;u++){const m=(n.width*u+c)*4;const p=l.data[m]*.2125+l.data[m+1]*.7154+l.data[m+2]*.0721;l.data[m]=p;l.data[m+1]=p;l.data[m+2]=p}}a.putImageData(l,0,0)}};h8=class extends oe{constructor(...t){super(...t);this._filter=new p8}};Nd=h8});var b8;var g8=d(()=>{b8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"});var Lw,y8,a_;var zw=d(()=>{j();g8();Ti();Lw=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=b8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const c=this._options.lookupTableData;for(let u=0;u<n.width*n.height;u++){const m=u*4;const p=l.data[m];l.data[m]=c[p*4];const h=l.data[m+1];l.data[m+1]=c[1+h*4];const g=l.data[m+2];l.data[m+2]=c[2+g*4]}a.putImageData(l,0,0)}};Lw.prototype.availableOptions={lookupTable:{type:"number",default:1,uniformType:"i"},lookupTableData:{type:"array",default:[]}};y8=class extends oe{constructor(...t){super(...t);this._filter=new Lw({lookupTable:this._options.textureGLUnit});this._textures={};this._renderers={}}update(t){const e=t.getRenderer();if(e.isOfType("webgl")){this._updateWebGLTexture(t)}else if(e.isOfType("canvas")){this._filter.setLookupTableData(this._options.data)}}_updateWebGLTexture(t){if(typeof this._options.data==="undefined"){throw new Error("LookupTable: No data specified.")}const e=new Uint8Array(this._options.data);const r=t.getRenderer();const{id:o}=r;this._renderers[o]=r;if(!this._textures[o]){this._textures[o]=new M.BaseTexture}const n=this._textures[o];const s=new M.PixelArrayImage(256,1,e);n.setSource(s);n.setGLUnit(this._options.textureGLUnit);if(r.isOfType("webgl")){r.updateTexture(n)}}dispose(){super.dispose();for(const t in this._textures){this._textures[t].dispose();delete this._textures[t]}delete this._options.data}};a_=y8});var x8;var _8=d(()=>{x8="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"});var v8,C8,Uw,Nw,l_;var S8=d(()=>{j();_8();Ti();({Vector2:v8}=Y);C8=3;Uw=class extends M.Filter{constructor(){super();this._precomputeQuads();this._fragmentSource=x8}_precomputeQuads(){this._quads=[];for(let t=0;t<256;t++){const e=t/255*63;const r=new v8;r.y=(e|0)*.125|0;r.x=(e|0)-r.y*8;this._quads.push(r)}}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=this._options.lookupTableImage;const c=this._createImageCanvas(l);const u=c.getContext("2d");const m=s.getImageData(0,0,n.width,n.height);const p=u.getImageData(0,0,l.width,l.height);const h=new v8;for(let g=0;g<n.width*n.height*4;g+=4){const _=m.data[g];const x=m.data[g+1];const b=m.data[g+2];const w=m.data[g+3]/255;const T=this._quads[b];const D=64;h.x=T.x*D;h.y=T.y*D;h.x+=Math.floor(_/4);h.y+=Math.floor(x/4);const O=(l.width*h.y+h.x)*4|0;let k=p.data[O];k=_*(1-w)+k*w;let E=p.data[O+1];E=x*(1-w)+E*w;let J=p.data[O+2];J=b*(1-w)+J*w;m.data[g]=k;m.data[g+1]=E;m.data[g+2]=J}a.putImageData(m,0,0)}_createImageCanvas(t){const e=L.createCanvas();e.width=t.width;e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0);return e}};Uw.prototype.availableOptions={lookupTable:{type:"number",default:C8,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null}};Nw=class extends oe{constructor(...t){super(...t);this._filter=new Uw;this._textures={}}update(t){const e=t.getRenderer();if(e.isOfType("webgl")){this._updateWebGLTexture(t)}else if(e.isOfType("canvas")){this._filter.setLookupTableImage(this._options.image)}}_updateWebGLTexture(t){const e=t.getRenderer();const{id:r}=e;if(!this._textures[r]){this._textures[r]=new M.BaseTexture}const o=this._textures[r];o.setSource(this._options.image);o.setGLUnit(C8);e.updateTexture(o)}dispose(){super.dispose();for(const t in this._textures){delete this._textures[t]}}};Nw.prototype.availableOptions={image:{type:"image"}};l_=Nw});var T8;var w8=d(()=>{T8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"});var c_,Hw,nr;var k8=d(()=>{j();w8();Ti();c_=class extends M.Filter{constructor(){super();this._fragmentSource=T8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);const{saturation:c}=this._options;for(let u=0;u<n.width;u++){for(let m=0;m<n.height;m++){const p=(n.width*m+u)*4;const h=l.data[p]*.2125+l.data[p+1]*.7154+l.data[p+2]*.0721;l.data[p]=h*(1-c)+l.data[p]*c;l.data[p+1]=h*(1-c)+l.data[p+1]*c;l.data[p+2]=h*(1-c)+l.data[p+2]*c}}a.putImageData(l,0,0)}};c_.prototype.availableOptions={saturation:{type:"number",default:0,uniformType:"f"}};Hw=class extends oe{constructor(...t){super(...t);this._filter=new c_}update(){this._filter.setSaturation(this._options.saturation)}};Hw.prototype.availableOptions=c_.prototype.availableOptions;nr=Hw});var D8;var I8=d(()=>{D8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"});var u_,Ww,d_;var E8=d(()=>{j();I8();Ti();u_=class extends M.Filter{constructor(){super();this._fragmentSource=D8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++){for(let u=0;u<n.height;u++){const m=(n.width*u+c)*4;l.data[m]=Math.max(this._options.color.r*255,l.data[m]);l.data[m+1]=Math.max(this._options.color.g*255,l.data[m+1]);l.data[m+2]=Math.max(this._options.color.b*255,l.data[m+2])}}a.putImageData(l,0,0)}};u_.prototype.availableOptions={color:{type:"color",default:W.WHITE,uniformType:"3f"}};Ww=class extends oe{constructor(...t){super(...t);this._filter=new u_}update(){this._filter.setColor(this._options.color)}};Ww.prototype.availableOptions=u_.prototype.availableOptions;d_=Ww});var Gw,vt;var F8=d(()=>{j();zw();Gw=class extends a_{constructor(...t){super(...t);if(!this._options.rgbControlPoints){this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}}this._updateLookupTable()}_updateLookupTable(){const t=this._calculateSplineCurve(this._options.rgbControlPoints.red);const e=this._calculateSplineCurve(this._options.rgbControlPoints.green);const r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,r)}_buildLookupTable(t,e,r){const o=[];for(let n=0;n<256;n++){o.push(Math.min(Math.max(n+t[n],0),255));o.push(Math.min(Math.max(n+e[n],0),255));o.push(Math.min(Math.max(n+r[n],0),255));o.push(255)}return o}_calculateSplineCurve(t){t=t.sort(function(s,a){return s[0]>a[0]});const e=this._getSplineCurve(t);const r=e[0];let o;if(r[0]>0){for(o=0;o<r[0];o++){e.unshift([0,0])}}const n=[];for(o=0;o<e.length;o++){const s=e[o];const a=[s[0],s[0]];let l=Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2));if(a[1]>s[1]){l=-l}n.push(l)}return n}_getSplineCurve(t){const e=this._secondDerivative(t);const r=e.length;const o=[];let n;for(n=0;n<r;n++){o[n]=e[n]}const s=[];for(n=0;n<r-1;n++){const a=t[n];const l=t[n+1];for(let c=a[0];c<l[0];c++){const u=(c-a[0])/(l[0]-a[0]);const m=1-u;const p=u;const h=l[0]-a[0];let g=m*a[1]+p*l[1]+h*h/6*((m*m*m-m)*o[n]+(p*p*p-p)*o[n+1]);if(g>255){g=255}else if(g<0){g=0}s.push([c,g])}}if(s.length===255){s.push(t[t.length-1])}return s}_secondDerivative(t){const e=t.length;if(e<=0||e===1){return null}const r=[];const o=[];let n;let s;r[0]=[0,1,0];for(n=1;n<e-1;n++){const l=t[n-1];const c=t[n];const u=t[n+1];r[n]=r[n]||[];r[n][0]=(c[0]-l[0])/6;r[n][1]=(u[0]-l[0])/3;r[n][2]=(u[0]-c[0])/6;o[n]=(u[1]-c[1])/(u[0]-c[0])-(c[1]-l[1])/(c[0]-l[0])}o[0]=0;o[e-1]=0;r[e-1]=[0,1,0];for(n=1;n<e;n++){s=r[1][0]/r[n-1][1];r[n][1]-=s*r[n-1][2];r[n][0]=0;o[n]-=s*o[n-1]}for(n=e-2;n>0;n--){s=r[n][2]/r[n+1][1];r[n][1]-=s*r[n+1][0];r[n][2]=0;o[n]-=s*o[n+1]}const a=[];for(n=0;n<e;n++){a[n]=o[n]/r[n][1]}return a}};Gw.prototype.availableOptions={rgbControlPoints:{type:"object"},controlPoints:{type:"array",default:[]},textureGLUnit:{type:"number",default:1}};vt=Gw});var O8;var R8=d(()=>{O8="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"});var A8,B8,m_;var P8=d(()=>{j();R8();Ti();A8=class extends M.Filter{constructor(){super();this._fragmentSource=O8}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=s.getImageData(0,0,n.width,n.height);for(let c=0;c<n.width;c++){for(let u=0;u<n.height;u++){const m=(n.width*u+c)*4;let p=l.data[m]/255*.3+l.data[m+1]/255*.3+l.data[m+2]/255*.3;p-=.2;p=Math.max(0,Math.min(1,p));p+=.15;p*=1.4;p*=255;l.data[m]=p;l.data[m+1]=p;l.data[m+2]=p}}a.putImageData(l,0,0)}};B8=class extends oe{constructor(...t){super(...t);this._filter=new A8}};m_=B8});var L8;var M8=d(()=>{L8="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"});var p_,z8,U8,Vw,jw,h_;var N8=d(()=>{j();M8();Ti();({Vector2:p_,Vector3:z8}=Y);U8=3;Vw=class extends M.Filter{constructor(){super();this._precomputeQuads();this._fragmentSource=L8}_precomputeQuads(){this._quads=[];for(let t=0;t<256;t++){const e=t/255*63;const r=new p_;r.y=(e|0)*.125|0;r.x=(e|0)-r.y*8;this._quads.push(r)}}_applyCanvas(t,e,r,o=false){const{resolution:n,horizontalTileCount:s,verticalTileCount:a}=this._options;const l=e.getCanvas();const c=e.getContext();const u=r.getContext();const m=this._options.lookupTableImage;const p=this._createImageCanvas(m);const h=p.getContext("2d");let g={width:128,height:128};if(n){g={width:n,height:n}}else if(m.width&&m.height){g={width:m.width,height:m.height}}const _=c.getImageData(0,0,l.width,l.height);const x=h.getImageData(0,0,g.width,g.height);const b=new z8(g.width/s-1|0,g.height/a-1|0,s*a-1|0);const w=new W;const T=new W;const D=new W;const O=new W;const k=new W;const E=new W;const J=new W;const tt=new W;const mt=new p_;const bt=new p_;const gt=(Ct,he,ne,te)=>{Ct.r=he.r*(1-te)+ne.r*te;Ct.g=he.g*(1-te)+ne.g*te;Ct.b=he.b*(1-te)+ne.b*te};const pt=(Ct,he,ne)=>{he=.5+he|0;ne=.5+ne|0;const te=(ne*g.width+he)*4;Ct.r=x.data[te]/255;Ct.g=x.data[te+1]/255;Ct.b=x.data[te+2]/255;Ct.a=x.data[te+3]/255};const Zt=new W;const fi=new W;const ei=(Ct,he,ne,te,Dt,se,ci)=>{gt(Zt,he,te,se);gt(fi,ne,Dt,se);gt(Ct,Zt,fi,ci)};const Kr=new p_(g.width,g.height).divide(s,a).floor();for(let Ct=0;Ct<l.width*l.height*4;Ct+=4){w.set(_.data[Ct]/255,_.data[Ct+1]/255,_.data[Ct+2]/255,_.data[Ct+3]/255);const he=new z8(w.r*b.x,w.g*b.y,w.b*b.z);const ne=he.clone().floor().toInt();const te=he.clone().ceil().toInt();const Dt=he.clone().fract();mt.y=ne.z/s|0;mt.x=ne.z-mt.y*s|0;bt.y=te.z/s|0;bt.x=te.z-bt.y*s|0;mt.multiply(Kr);bt.multiply(Kr);pt(k,mt.x+ne.x,mt.y+ne.y);pt(E,mt.x+ne.x,mt.y+te.y);pt(J,mt.x+te.x,mt.y+ne.y);pt(tt,mt.x+te.x,mt.y+te.y);ei(D,k,E,J,tt,Dt.x,Dt.y);pt(k,bt.x+ne.x,bt.y+ne.y);pt(E,bt.x+ne.x,bt.y+te.y);pt(J,bt.x+te.x,bt.y+ne.y);pt(tt,bt.x+te.x,bt.y+te.y);ei(O,k,E,J,tt,Dt.x,Dt.y);gt(T,D,O,Dt.z);_.data[Ct]=Math.ceil(T.r*255);_.data[Ct+1]=Math.ceil(T.g*255);_.data[Ct+2]=Math.ceil(T.b*255)}u.putImageData(_,0,0)}_createImageCanvas(t){const e=L.createCanvas();e.width=t.width;e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0);return e}};Vw.prototype.availableOptions={lookupTable:{type:"number",default:U8,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null},resolution:{type:"number",uniformType:"f"},horizontalTileCount:{type:"number",default:5,uniformType:"f"},verticalTileCount:{type:"number",default:5,uniformType:"f"}};jw=class extends oe{constructor(...t){super(...t);this._filter=new Vw;this._textures={}}update(t){const e=t.getRenderer();if(e.isOfType("webgl")){this._updateWebGLTexture(t)}else if(e.isOfType("canvas")){this._filter.setLookupTableImage(this._options.image)}const{resolution:r,verticalTileCount:o,horizontalTileCount:n,image:s}=this._options;this._filter.set({resolution:r||s.width,verticalTileCount:o,horizontalTileCount:n})}_updateWebGLTexture(t){const e=t.getRenderer();const{id:r}=e;if(!this._textures[r]){this._textures[r]=new M.BaseTexture}const o=this._textures[r];o.setSource(this._options.image);o.setGLUnit(U8);o.setMinFilter(M.BaseTexture.NearestFilter);e.updateTexture(o)}dispose(){super.dispose();for(const t in this._textures){delete this._textures[t]}}};jw.prototype.availableOptions={image:{type:"image"},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}};h_=jw});var Lt={};ue(Lt,{Brightness:()=>hc,ColorMatrixPrimitive:()=>Qy,Contrast:()=>or,Desaturation:()=>En,DuoTone:()=>i_,Gamma:()=>o_,Glow:()=>Ud,Gobblin:()=>s_,Grayscale:()=>Nd,LookupTable:()=>a_,LookupTableImage:()=>l_,Saturation:()=>nr,SoftColorOverlay:()=>d_,ThreeDLookupTableImage:()=>h_,ToneCurve:()=>vt,X400:()=>m_});var Ht=d(()=>{Hz();Vz();Kz();Yz();Qz();i8();n8();u8();f8();zw();S8();k8();E8();F8();P8();N8()});var f_,g_;var $w=d(()=>{Nt();Ht();f_=class extends ut{constructor(...t){super(...t);this._stack.push(new hc({brightness:0}))}render(t,e,r){if(this._stack.isEmpty()){this._stack.push(new hc({brightness:0}))}return super.render(t,e,r)}};f_.isIdentity=true;f_.identifier="identity";g_=f_});var Kw,H8;var W8=d(()=>{Nt();Ht();Kw=class extends ut{constructor(...t){super(...t);this._stack.push(new or({contrast:.63}));this._stack.push(new hc({brightness:.12}));this._stack.push(new vt({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}};Kw.identifier="a15";H8=Kw});var Xw,G8;var V8=d(()=>{Nt();Ht();Xw=class extends ut{constructor(...t){super(...t);this._stack.push(new En({desaturation:.5}));this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}};Xw.identifier="breeze";G8=Xw});var qw,j8;var $8=d(()=>{Nt();Ht();qw=class extends ut{constructor(...t){super(...t);this._stack.push(new Nd)}};qw.identifier="bw";j8=qw});var Yw,K8;var X8=d(()=>{Nt();Ht();Yw=class extends ut{constructor(...t){super(...t);this._stack.push(new Nd);this._stack.push(new or({contrast:1.5}))}};Yw.identifier="bwhard";K8=Yw});var Jw,q8;var Y8=d(()=>{Nt();Ht();Jw=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}};Jw.identifier="celsius";q8=Jw});var Zw,J8;var Z8=d(()=>{Nt();Ht();Zw=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}};Zw.identifier="chest";J8=Zw});var b_,Q8;var t6=d(()=>{j();Nt();Ht();b_=class extends ut{constructor(...t){super(...t,{intensity:{type:"number",default:.5,required:true,setter(e){if(this._filterPrimitive){this._filterPrimitive.setIntensity(e);this._stack.setIntensity(1)}this._dirty=true;return e}}});this._filterPrimitive=new i_({lightColor:this._options.lightColor||W.WHITE,darkColor:this._options.darkColor||W.BLACK,intensity:this._options.intensity||.5});this._stack.push(this._filterPrimitive)}};b_.prototype.availableOptions={lightColor:{type:"color",default:W.WHITE,required:true,setter(i){if(this._filterPrimitive){this._filterPrimitive.setLightColor(i)}this.setDirty&&this.setDirty(true);return i}},darkColor:{type:"color",default:W.BLACK,required:true,setter(i){if(this._filterPrimitive){this._filterPrimitive.setDarkColor(i)}this.setDirty&&this.setDirty(true);return i}},intensity:{type:"number",default:.5,required:true}};b_.identifier="duotone";Q8=b_});var Qw,e6;var i6=d(()=>{Nt();Ht();Qw=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}};Qw.identifier="fixie";e6=Qw});var tT,r6;var o6=d(()=>{Nt();Ht();tT=class extends ut{constructor(...t){super(...t);this._stack.push(new nr({saturation:1.35}));this._stack.push(new or({contrast:1.1}))}};tT.identifier="food";r6=tT});var eT,n6;var s6=d(()=>{Nt();Ht();eT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}};eT.identifier="fridge";n6=eT});var iT,a6;var l6=d(()=>{Nt();Ht();iT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}};iT.identifier="front";a6=iT});var rT,c6;var u6=d(()=>{Nt();Ht();rT=class extends ut{constructor(...t){super(...t);this._stack.push(new or({contrast:1.1}));this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}};rT.identifier="glam";c6=rT});var oT,d6;var m6=d(()=>{Nt();Ht();oT=class extends ut{constructor(...t){super(...t);this._stack.push(new s_)}};oT.identifier="gobblin";d6=oT});var nT,p6;var h6=d(()=>{Nt();Ht();nT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]}));this._stack.push(new nr({saturation:.9}))}};nT.identifier="k1";p6=nT});var sT,f6;var g6=d(()=>{j();Nt();Ht();sT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]}));this._stack.push(new d_({color:new W(40/255,40/255,40/255)}))}};sT.identifier="k2";f6=sT});var aT,b6;var y6=d(()=>{Nt();Ht();aT=class extends ut{constructor(...t){super(...t);this._stack.push(new nr({saturation:.5}))}};aT.identifier="k6";b6=aT});var lT,_6;var x6=d(()=>{Nt();Ht();lT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]}));this._stack.push(new nr({saturation:.7}))}};lT.identifier="kdynamic";_6=lT});var cT,v6;var C6=d(()=>{Nt();Ht();cT=class extends ut{constructor(...t){super(...t);this._stack.push(new En({desaturation:.4}));this._stack.push(new vt({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}};cT.identifier="lenin";v6=cT});var uT,S6;var w6=d(()=>{Nt();Ht();uT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}};uT.identifier="lomo";S6=uT});var dT,T6;var k6=d(()=>{Nt();Ht();dT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}};dT.identifier="mellow";T6=dT});var ost,mT,I6;var D6=d(()=>{j();Nt();Ht();({ColorMatrix:ost}=Y);mT=class extends ut{constructor(...t){super(...t);const e=new ost(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new Qy({colorMatrix:e}));const r=new W(.8,.6,.9);this._stack.push(new o_({gamma:r}))}};mT.identifier="metal";I6=mT});var pT,E6;var F6=d(()=>{Nt();Ht();pT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}}));this._stack.push(new Ud)}};pT.identifier="morning";E6=pT});var hT,R6;var O6=d(()=>{Nt();Ht();hT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2}));this._stack.push(new vt({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3}));this._stack.push(new En({desaturation:.65}))}};hT.identifier="orchid";R6=hT});var fT,A6;var B6=d(()=>{Nt();Ht();fT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}));this._stack.push(new nr({saturation:.8}));this._stack.push(new or({contrast:1.5}))}};fT.identifier="pola";A6=fT});var gT,P6;var M6=d(()=>{Nt();Ht();gT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}}));this._stack.push(new nr({saturation:.8}));this._stack.push(new or({contrast:1.5}))}};gT.identifier="pola669";P6=gT});var bT,L6;var z6=d(()=>{Nt();Ht();bT=class extends ut{constructor(...t){super(...t);this._stack.push(new En({desaturation:.65}));this._stack.push(new vt({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}};bT.identifier="quozi";L6=bT});var yT,U6;var N6=d(()=>{Nt();Ht();yT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}}));this._stack.push(new Ud)}};yT.identifier="semired";U6=yT});var _T,H6;var W6=d(()=>{Nt();Ht();_T=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2}));this._stack.push(new vt({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}};_T.identifier="sunny";H6=_T});var xT,G6;var V6=d(()=>{Nt();Ht();xT=class extends ut{constructor(...t){super(...t);this._stack.push(new vt({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}};xT.identifier="texas";G6=xT});var vT,j6;var $6=d(()=>{Nt();Ht();vT=class extends ut{constructor(...t){super(...t);this._stack.push(new m_)}};vT.identifier="x400";j6=vT});var y_,K6;var X6=d(()=>{j();Nt();Ht();y_=class extends ut{constructor(...t){super(...t);this._lutPrimitive=new l_({image:this._options.image});this._stack.push(this._lutPrimitive)}};y_.prototype.availableOptions={image:{type:"image",required:true,setter(i){if(this._lutPrimitive){this._lutPrimitive.setImage(i)}this.setDirty(true);return i}}};y_.identifier="lut";K6=y_});var __,q6;var Y6=d(()=>{j();Nt();Ht();__=class extends ut{constructor(...t){super(...t);const{image:e,resolution:r,verticalTileCount:o,horizontalTileCount:n}=this._options;this._lutPrimitive=new h_({image:e,resolution:r,verticalTileCount:o,horizontalTileCount:n});this._stack.push(this._lutPrimitive)}};__.prototype.availableOptions={image:{type:"image",required:true,setter(i){if(this._lutPrimitive){this._lutPrimitive.setImage(i)}this.setDirty(true);return i}},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}};__.identifier="3d-lut";q6=__});var CT={};ue(CT,{A15Filter:()=>H8,BWFilter:()=>j8,BWHardFilter:()=>K8,BreezeFilter:()=>G8,CelsiusFilter:()=>q8,ChestFilter:()=>J8,DuoToneFilter:()=>Q8,FixieFilter:()=>e6,FoodFilter:()=>r6,FridgeFilter:()=>n6,FrontFilter:()=>a6,GlamFilter:()=>c6,GobblinFilter:()=>d6,IdentityFilter:()=>g_,K1Filter:()=>p6,K2Filter:()=>f6,K6Filter:()=>b6,KDynamicFilter:()=>_6,LUTFilter:()=>K6,LeninFilter:()=>v6,LomoFilter:()=>S6,MellowFilter:()=>T6,MetalFilter:()=>I6,MorningFilter:()=>E6,OrchidFilter:()=>R6,Pola669Filter:()=>P6,PolaFilter:()=>A6,QuoziFilter:()=>L6,SemiredFilter:()=>U6,SunnyFilter:()=>H6,TexasFilter:()=>G6,ThreeDLUTFilter:()=>q6,X400Filter:()=>j6});var J6=d(()=>{$w();W8();V8();$8();X8();Y8();Z8();t6();i6();o6();s6();l6();u6();m6();h6();g6();y6();x6();C6();w6();k6();D6();F6();O6();B6();M6();z6();N6();W6();V6();$6();X6();Y6()});var el,Z6;var Q6=d(()=>{j();J6();Nt();$w();Ht();el=class extends Mt{_render(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}render(t){if(this._selectedFilter.getDirty()){this.setDirty(true)}if(!this.getEnabled()){this.setDirtyForRenderer(false,this._sdk.getRenderer());return Promise.resolve(t)}return super.render(t)}setDirtyForRenderer(t,e){super.setDirtyForRenderer(t,e);this._selectedFilter.setDirtyForRenderer(t,e)}disposeRenderTextures(){super.disposeRenderTextures();if(this._selectedFilter){this._selectedFilter.disposeRenderTextures()}}dispose(){super.dispose();if(this._selectedFilter){this._selectedFilter.dispose()}}restoreSnapshot(t){const e={...t};delete e.filter;if(t.filter){const r=t.filter.constructor;if(r.identifier==="3d-lut"){this.setFilter(new r({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()}))}else if(r.identifier==="duotone"){this.setFilter(new r({lightColor:t.filter.getLightColor(),darkColor:t.filter.getDarkColor(),intensity:t.filter.getIntensity()}))}else{this.setFilter(new r)}}this.set(e)}resetToDefaultFilterIntensity(){const t=this._selectedFilter&&this._selectedFilter.availableOptions;const e=t&&t.intensity.default;this.setIntensity(e||1)}};el.identifier="filter";el.prototype.availableOptions={identifier:{type:"string",default:"identity"},intensity:{type:"number",default:1,setter(i){this._selectedFilter&&this._selectedFilter.setIntensity(i);return i}},filter:{type:"object",default:new g_,setter(i){if(this._selectedFilter){this._selectedFilter.dispose();this._selectedFilter=null}this._selectedFilter=i;if(typeof this._options.intensity!=="undefined"){this._selectedFilter.set({intensity:this._options.intensity})}return i}}};el.FilterPrimitives=Lt;el.Filters=CT;el.Filter=ut;ht.Operations.FilterOperation=el;Z6=el});var gPt,Ch,t9;var e9=d(()=>{j();({Vector2:gPt}=Y);Ch=class extends Mt{constructor(...t){super(...t);this._flipContainer=new M.Container}_render(t){const{outputResolution:e,flipHorizontally:r,flipVertically:o}=this._options;if(r||o){const n=t.getDimensions();if(!this._flipRenderTexture){this._flipRenderTexture=new M.RenderTexture(this._sdk.getRenderer(),n.x,n.y);this._flipSprite=new M.Sprite(this._flipRenderTexture);this._flipContainer.addChild(this._flipSprite)}else{this._flipRenderTexture.resizeTo(n)}const s=r?-1:1;const a=o?-1:1;this._flipSprite.setScale(s,a);this._flipSprite.setPivot(0,0);this._flipSprite.setPosition(n.x*(1-s)*.5,n.y*(1-a)*.5);this._flipRenderTexture.clear();this._flipRenderTexture.render(this._container);this._renderTexture.render(this._flipContainer)}else{this._renderTexture.render(this._container)}return Promise.resolve()}};Ch.identifier="flip";Ch.prototype.availableOptions={flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};ht.Operations.FlipOperation=Ch;t9=Ch});var Hd,Wd,i9;var r9=d(()=>{j();({Vector2:Hd}=Y);Wd=class extends Mt{constructor(...t){super(...t);this._colorOverlayFilter=new M.Filters.ColorOverlayFilter({color:this.getTintColor()});this._frameContainer=new M.Container;this._resetSprites();if(this._options.frame){this._createSpritesForFrame(this._options.frame)}}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}};this._sprites=[];this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(t){if(!t)return this._disposeSprites();const{imageGroups:e,layoutMode:r}=t;this._layoutMode=r||"horizontal-inside";this._disposeSprites();["top","left","right","bottom"].forEach(o=>{if(typeof e[o]==="undefined")return;["start","mid","end"].forEach(n=>{if(typeof e[o][n]==="undefined")return;let s=e[o][n];if("image"in s){s=s.image}const a=M.Texture.fromImage(s);const l=new M.Sprite(a);this._spriteGroups[o][n]=l;this._sprites.push(l);this._frameContainer.addChild(l)})})}_render(t){const e=this._renderTexture.getDimensions();if(this._options.frame){this._colorOverlayFilter.setColor(this.getTintColor());this._updateSprites(t)}if(!this._frameRenderTexture){this._frameRenderTexture=new M.RenderTexture(this._sdk.getRenderer(),e.x,e.y);this._frameSprite=new M.Sprite(this._frameRenderTexture);this._container.addChild(this._frameSprite)}else{this._frameRenderTexture.resizeTo(e)}this._frameSprite.setAlpha(this._options.alpha);if(this._options.frame&&this._options.frame.tintable){this._frameSprite.setFilters([this._colorOverlayFilter])}else{this._frameSprite.setFilters([])}this._frameRenderTexture.clear();this._frameRenderTexture.render(this._frameContainer);this._renderTexture.render(this._container);return Promise.resolve()}_updateSprites(t){const e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale);this._updateHorizontalSpriteGroup(t,"top",0);this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth);this._updateVerticalSpriteGroup(t,"left",0);this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}_updateHorizontalSpriteGroup(t,e,r=0){const o=t.getDimensions();const n=this._layoutMode==="vertical-inside";const s=this._spriteGroups[e].start;const a=this._spriteGroups[e].mid;const l=this._spriteGroups[e].end;let c=0;let u=0;let m;let p;if(s){m=s.getTexture().getDimensions();p=m.y/m.x;c=Math.floor(this._frameWidth/p);const h=new Hd(0,r);h.x=n?this._frameWidth:0;s.setPosition(h);s.setHeight(this._frameWidth);s.setWidth(c)}if(l){m=l.getTexture().getDimensions();p=m.y/m.x;u=Math.floor(this._frameWidth*p);const h=new Hd(o.x-u,r);h.x-=n?this._frameWidth:0;l.setPosition(h);l.setHeight(this._frameWidth);l.setWidth(u)}if(a){m=a.getTexture().getDimensions();p=m.y/m.x;const h=new Hd(c,r);let g=o.x-c-u;if(n){h.x+=this._frameWidth;g-=this._frameWidth*2}a.setPosition(h);a.setWidth(g);a.setHeight(this._frameWidth);if(false){a._canvasSmoothingEnabled=false}if(this._options.frame.imageGroups[e].mid.mode==="repeat"){const _=this._frameWidth/p;const x=Math.ceil(g/_);let b=0;if(x!==-1){let w=Math.round(g/x);a.setWidth(w);b+=w;this._ensureRepeatSpritesExist(x-1,e,a);for(let T=0;T<x-1;T++){w=Math.round((g-b)/(x-T-1));const D=this._repeatSprites[e][T];const O=h.clone().add(b,0).floor();D.setPosition(O);D.setWidth(w);D.setHeight(this._frameWidth);b+=w}}}}}_ensureRepeatSpritesExist(t,e,r){r.getTexture().setMaxListeners(t+1);const o=this._repeatSprites[e].length;if(t>o){const n=t-o;for(let s=0;s<n;s++){const a=new M.Sprite(r.getTexture());this._repeatSprites[e].push(a);this._frameContainer.addChild(a);this._sprites.push(a)}}else if(t<o){const n=this._repeatSprites[e].splice(t);n.forEach(s=>{const a=this._sprites.indexOf(s);if(a===-1)return;this._sprites.splice(a,1);this._frameContainer.removeChild(s);s.dispose()})}}_updateVerticalSpriteGroup(t,e,r=0){const o=t.getDimensions();const n=this._layoutMode==="horizontal-inside";const s=this._spriteGroups[e].start;const a=this._spriteGroups[e].mid;const l=this._spriteGroups[e].end;let c=0;let u=0;let m;let p;if(s){m=s.getTexture().getDimensions();p=m.y/m.x;c=Math.floor(this._frameWidth*p);const h=new Hd(r,0);h.y=n?this._frameWidth:0;s.setPosition(h);s.setWidth(this._frameWidth);s.setHeight(c)}if(l){m=l.getTexture().getDimensions();p=m.y/m.x;u=Math.floor(this._frameWidth*p);const h=new Hd(r,o.y-u);h.y-=n?this._frameWidth:0;l.setPosition(h);l.setWidth(this._frameWidth);l.setHeight(u)}if(a){m=a.getTexture().getDimensions();p=m.y/m.x;const h=new Hd(r,c);let g=o.y-c-u;if(n){h.y+=this._frameWidth;g-=this._frameWidth*2}a.setPosition(h);a.setHeight(g);a.setWidth(this._frameWidth);if(false){a._canvasSmoothingEnabled=false}if(this._options.frame.imageGroups[e].mid.mode==="repeat"){const _=this._frameWidth*p;const x=Math.ceil(g/_);let b=0;if(x!==-1){let w=Math.round(g/x);a.setHeight(w);b+=w;this._ensureRepeatSpritesExist(x-1,e,a);for(let T=0;T<x-1;T++){w=Math.round((g-b)/(x-T-1));const D=this._repeatSprites[e][T];const O=h.clone().add(0,b).floor();D.setPosition(O);D.setHeight(w);D.setWidth(this._frameWidth);b+=w}}}}}_disposeSprites(){this._sprites.forEach(t=>{this._frameContainer.removeChild(t);t.getTexture().dispose();t.dispose()});this._resetSprites()}dispose(){super.dispose();this._disposeSprites();if(this._colorOverlayFilter)this._colorOverlayFilter.dispose();if(this._frameRenderTexture)this._frameRenderTexture.dispose()}static validateFrame(t){if(!t)return;const{imageGroups:e,layoutMode:r}=t;if(typeof t.identifier!=="string"){throw new Error("Frame needs a property `identifier` of type String.")}if(typeof t.imageGroups!=="object"){throw new Error("Frame needs a property `imageGroups` of type Object.")}const o=n=>{const{start:s,end:a,mid:l}=e[n];if(typeof e[n]==="undefined")return;if(typeof e[n]!=="object"){throw new Error(`Frame: \`imageGroups.${n}\` needs to be of type Object.`)}if(typeof s!=="undefined"&&!(s instanceof Ki||typeof HTMLImageElement!=="undefined"&&s instanceof HTMLImageElement)){throw new Error(`Frame: \`imageGroups.${n}.start\` needs to be of type Image.`)}if(typeof l!=="undefined"&&!(s instanceof Ki||typeof HTMLImageElement!=="undefined"&&s instanceof HTMLImageElement)&&typeof l!=="object"){throw new Error(`Frame: \`imageGroups.${n}.mid\` needs to be of type Image or Object.`)}if(typeof a!=="undefined"&&!(a instanceof Ki||typeof HTMLImageElement!=="undefined"&&a instanceof HTMLImageElement)){throw new Error(`Frame: \`imageGroups.${n}.end\` needs to be of type Image.`)}};if(typeof r!=="undefined"&&["vertical-inside","horizontal-inside"].indexOf(r)===-1){throw new Error(`Frame: \`layoutMode\` must be one of vertical-inside, horizontal-inside`)}if(typeof tintable!=="undefined"&&typeof tintable!=="boolean"){throw new Error(`Frame: \`tintable\` needs to be of type Boolean.`)}o("top");o("left");o("right");o("bottom")}};Wd.identifier="frame";Wd.prototype.availableOptions={frame:{type:"object",validation:Wd.validateFrame,setter(i,t){if(!t){this._createSpritesForFrame(i)}return i},default:null},alpha:{type:"number",default:1},tintColor:{type:"color",default:new W(1,1,1,0)},scale:{type:"number",default:.1}};ht.Operations.FrameOperation=Wd;i9=Wd});var o9;var n9=d(()=>{o9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAAAAADRE4smAAAsTElEQVR4Ae1d4bHjOM5ECAgBISgEZLDOwMrAysDMwMpAzkCTAUNQCAyBIfCr2ifI1DNh+c1tfTMg3b9udtZXC7tJdgMgCP8foJAUBIJx92eoEy5puAKkHH1jX0AchqoJcLwGlv1fDVAnyKtfQMoB1WLQKBBCyuCgVvQhvQGoF3RPb2Bs/AsgEDS6BqbGvwACaHsT+AV1AK/4W18AQy3gCxTAR2vAQxW4xHSD3/kC/qlI9NK7hqg6H8SLspiPv4C+kv0v6ouZQuUEEMfndUtcOQH6qJ9nR2sg1kD+FSdQ4GLS4MA82B+uZvJJRQXkFwT8uRp2VQl99xuGiOyTX4//+AuYqtj/BBGPiVITATjtEel4pdRFAJ/2uP08K9KBYXwPaT5OC9Vlg/kneQ0cUwHcQvz6F7BAXVuA/3GNsG8ofqBQmw3uUg7dCglcZQSgJHizvO1qy4OM3wPCH64BV1fnR8QfdkqAcWD86Q86KP9+o/EjGMfwrhVSpPPUWvy9YoMbsEIqAVrSgXBSCFC3FdK/sV+txc/Kv93OEpgrawiYfybsSWkIaMcK3SurB1P8Ufyk2OB2rNCoEKCV+BW2tGOFXG2N0RiUkkgZUfmumrFCfW0EgNOPKlxB6YtvQAcqRrix+BfFBjdjhVgnQL3xk+cyWwYQVG6FLjOs6PTjotaSCF5T8iUXJLSo3gqxT4kLPig6BKheB1/+/dvzEwGi/KParSDN+arAtMFTA/Gz3+8KTiF/tVZoaxx034zwwlAPvsc/7cifx+8U8tdqhfqwXxVihOMAgnp1sJA/lzu9Tv4KrRD7fFVki2VE+IuB3anvT0z/Y/x9KBRKexPkJ+77njv835YA3kvuaPm79z+6zDGtiP5Mv1sSObMv7gr8l5MfkMclCZaJf9sK0TUWd4U58N8b/NWnb5jo9+KPShM4EvzN4DGmPcL5p1ZIgVghhr8VNBZjuP4P8Rsr/fReGW72UyukIKDJeRYz/rQkoiAYHWkSTz+2QgrOVq657bG8xYAlHWBEQzcdf+OH43SAcPp7o3/N3un34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQV8iu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6P3wT5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvJT0y5+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1Wp5DfxAqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD5ZIL8gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mhfyaTOQKZl7e9RWg1ggnVO4D/TJ+q5UV8mstLX0Fjz/E1wW/Uo/EoGb9gu1O5vhWgTzqBGAwAER9C3RKj4SqlIO5sacEpPNfJ38OBstHAIdJlwD/vDXk3wNYPQLwFmHO/6wE9rKwPWilv2DkcRNWy9esng45olr9PhuYbQ+JtQ3Qq4VdTSo6S+FvZ5pXNSC/1+NL2ZdkpuNXDjTI42f9BNPj90ohMRh42UyYqhRuemUJ6GJ3MLMC5ECDlAaFAPG9MnEoN9IFMvCymaxUhQCjniXL0ZeXiTPR8Qqi449nNnL5ik8oCqURDb1l7RQCeM0kRX2jGIKBxP8lJgHk8XdpB1eO32F8ofV49H6+oKWXfVIkpRkCi0sgcP/qpOhn7ye2sfmlBLmKobK8FbB0RATbo037qCazx9dL4L4WtXtrCS/dzcLuN4yvbcy4bmzRMgHQv0hmDOoSEB044pMaYMvsh10I/nUqE4fCRjFazfaWWNwdXF7tu8JGgXbHdwkBgvK3DgowvQFq15WGstWLeFw0DaYn14DEf/zwn1ozNoZRKWm8//Bfb3i0JZYJIPHHN24BX5NxDfjqzdrhjQkGFCxvgaFIgHRTVsd01DR5tj7OX0D7M0CXeLiYrvneiwSQ0h0fzoK4Ku0AhhBfpbTno1kQtNh+7HZQCOA1hRToVUnU2Z/jK2BtpsFVSaLZ1ECsEECPP02kNgQGsj/NXxBUkxDOek+UA2NAjQABdZPkXX/qR68PSrG8BjYM+t+G+XLq+zEqrDGFRSFAcppE0jGBRWAqI6JmE3WQ9Unu8BS/SwewpADZB3p/eNdNqXtbHXOHt3Q9ssHwvJ6X9CYCWah7BDq+AK1YoUO4v7/j5Xpgg+FZB1Os4/cXyRo6RQWqVnCs4fdnr031jBoBJH6u4vfvo+bks5KPL2d9vPXfP/frE2rFkCWmBCVR36djeAQ7Qx4HbXKRi0VVg0s6RBysdLwspKjA6FKCoqrrjZ9+eE97XBUn5IdyXMcMCJ2dmn8gpSDIIUH5dz2F4zlxpobcXpU1AF6p/45mh9yyks0tqMChT6DUfynYnHCqXuCasOiEmLXUxhBNDrnFosWJXdEG/wIPapf/EEwOeew0AbdQcQ08VQb4cFh6OMNfC3XC97lUDInAcNfiB3IFCsSRrOV5BYEKTsg/uV5/MC7cn420O+mH4JAnPlCLv/BcQvQXNFbvVhiQrQFwL9YK3UPKEUa2NOFBYQDv7JF7md1EdrMPIYRlujDaerNSV+5Z0AwYXia4u370SwghzGNPxjL9Snsb7u4vY1B0sFW4N6a8nnK+99YrvDr/leaeZdf3zjXEj1d+a9bt9fsa8HJwmn6+mafCAa8L4fu++uHtlzgvMS1lHagwIORrgBUrZAXkc/EejvP3w/7A72zHL2p9KEhh9SS857ZHt0I2Nr+9cuHjCk73Le0xWo4faM7Fi8SnY8anNaBbIRObn3bFWU8JbfFGoEL8wRT/47a2VSnsn05CzoTwgRUyUvSKqPW9h+fhlz4JYJAzwaYO7PPgOk0KB/d9H8QkiGDXCtFccHmFzMY+umu+QmASX2AvfmVqcYnRw/CNAVnEnS0rpBe9WOV/950BfRJALAoHYZOxtJcqhSP2307CMd/ubVohWf7H/Hffyts3SgJYI/UmdeC91KWqMLqLiiz4VSSTN8j/k6YDI+KeLXNGgKHUCBjPNtNeuhRm9SnIWBSOHu2lfXX+T2qNBNJUEA4zGU376lLY6z0O3TOZ4mCc/4Uit1MIEOX/TG93MPTEmS6FWWOAeL7BzstmgkGb51AocisMgE3uDAr5jZX/dSmMGgN+fSuReDJ3zUsw61ZQYUA2KNIL+U3Bvy+FtUeR445Mgc3zX81suCIBpJDEOvkrkcLajLDu8YE41ML/U0kf9CUCxE04LDr565DCYh2VxC/FEcEWKCqxKEVujs8E2HIeevD1SOHiPvgL7H4Dig9Si9xdeCZADzoqk8JlBkQQVMN/vchL4YkAE+ioTAorDOgq4n8ijRsLFBgAevW3Vil8XP21rwOVMAsMAL32V6UUVh74a4v/uRkG/U3LOqWwMCPqN32sTz0LKjduz6MOQc/7ViqFV3RRz/tWy//0/DAC6KhZCstJeFz3qq0kJhiVza8RKSwMsL//6SUxhf8Cp2x+DUhhAS0D1IGT4mtf9vs6ZfNrRQofo9KSmIrWpDA0wf/3+30blMI6Ki6JKfxvUwq/j6q6IxW0I4W7tvgfj940b0wK+w5qRFAHeTtlvGGbUjgw6KjUB0VlvF2DUjg6bJD/vbL5tSeFp5r5T/pkOK9sfo1JYc/N8l/Z/JqSwvHcMP/vyubXkBRmhHpx3B3JoKANHdgAlO5IDQ1JYQUf/rcmhQUf/rcqhVsAxWb5r0hhT9AU3NGzNm1J4cAN8l/J+zYohaOD9tD/DZvfnyUe/3n+I8Ifg//jmx/58Oel8B/N+/Z/cu/hP7z54e2Pdx5STOEEfwzs/2zn3f3PHv7zX9B5ODj80zJs+pPzY/nPZ2Ju0CrEifEn/laBsc0cHLYXv/IN9E3m4Pp43WViTtAY8Ba3aWON5aBlbvuMz/ETNIJrfFxG4awdA7GJ6LNHqfL4Ox8RWgCG3ZNU960d4xKnlkpwgTIrSHhrxw/E7DaK6KD5a2PklhLQoXsUJZfYkB9Y8iepxAr5NmryMq81PMSvU14eqBf37QsI9O2emkeoFnilx0Ocp7AdgxhaqUjy7WF9fP9gADexAK4xzY8dcKAHA06///KAwSc7ZQ/E/nEO+tpvIsmUJd52QL/NXcKv+MOp+txHSml57IH/iBgaVkZ4qt/6+G0HjCgMWAi4bvLnfn/Y9sARoM+e5lu4kfhlB2S4xM0O9tRKE27ETQUC3pMwAIdm4pcdcPZJMEETkNKnJMBvMQn+qTrvG1OcSF7rcPtGvFC/9cOrT2m5kGTAut3LJUvlhz/N35+gpWz06Ii01H74c5CDLit94sP29YFrJn9MgnMW/yC2r3p0Pr90MmzZzlCr7dMf645Z/Czjh6ov+n67f71I6fMuJ38D5J8uX0d+v/I+rDtggMohNic697Xgs9LnIJaoWuD2sJ4YgCmLP3z54KpB4FehIwWvTqzQ15dT+eE/SLCS650yK3iv/hoe+Yji+0T2sjBhAqxXAIjyjbj6PiHAmFnhE9du/f4N8+H7vPwP6YJ1VP3hL/HTVgeQ+CO1cfh3m+85i+hZrdDYgvL14vtWLzjRGn/1RV8vJn/1PYPPHtzoK099bQl+3l++li9gEPdfd+pLCL8kwfbizFz34S+hFudwTQSC6lNfJymBtTSD4ZYEAfP4fWil4yskgcvvX8dx/Yula2XulNuXAF1sYgOA8fvYPfF9dK99A5D4w2nO4xcrTN5zI1f9PIv4391+7MOI9ccfHK6kn9+4/VkhJYaFt6CPbz8i16J888O9EP8vRS8PUAl4waf+t+Xw9ieHiJUo3/Acv89aoEnRyxGrSX255/dIhk0HRYdKwuxWS9F3F3+/i39hvVTsqkl9RVL6/4DTiHrCrKsj7RUH0OLHF59yWE3qy3dPfkiWd/fiU1xH3nfCkh90x58yD17KGR6pg+gJsypsYU5jhAx3PX4RhvHfT3FXw0VXh/IFvDf6xT0WAF7R8JAT9+hz9f4p/tAdTQbqvOXZGLj7nS9xeIpx1oLbbMIlJmdV+fot/q9N/Vv8+gEvNgFvpnXgJQ6yBZwK8/5C8nx0TYa9yEeTh/9Z6n1TfJr3h8W0FxLhI/5oeEjc+ovLiJv5WfTwAOVvQGSyIJ6sKt8t/jcFbf81lvUs8RuWwXSXXzyvf+BhxiSk9HVNhvRP2VK+nBf7jz8ldyS6/FNosugr7L2r87aVT8k1GfmUtS+A/I6582O0Q3c7/pQwYFTkowWcQj5imzJPc+GDTwmmVT4tIiYMYc74fpL4py9ZwMfk37eLiZiwBIyZ9esyT8OKpxHJkGOQazIiJuyAokg39om3+C9Rv+zRxfV37/u7XBTL5WNAm/Nt8RrD5mlo1j2NNMdF11+CXJRaFPloJf5/A172I45id5j56cQ5B7ONUlLs4vBlfk+Zp5mV/f9pKNgAbPCRenfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK88OKdURvy4Bb+uxIuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs2QjE60giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOloBkfkwhT10PUv8BD8BBL9/KtoEwbicF4GIsfKV5fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYC3zozWvbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgvhhge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSsxu/fo/7JfjRJDz0KSWULJB5DBLIYfzrybeElDxYjl8J7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxtwtxfk3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaCBw98KPvjggw8++OCDDz744IMPPvjggw8++OCDDz744IMP8NZD22APDeMaU9sEIN9w+4k81dAu8CpjdxqAPoqpVcgYcmyY/A01oOlz+Klh8rdLAJqTgNokv+AXtAH9AT5ul/zN3kAKSdDiDaQh5QjQHkLK0TfH/+YJsKQcAzSGLuWIrd6/EbRnhCntAO1hVAZWt4KYchBA2yqoPSMcWifAqXECzClHB82hS40ZYTzrGqiNPAjvosSUY2kh7xsIHnAt2WCpe11VFRQaKPru3W7fFAGk7hVIUUGxhaJvyq/dc8rhWql7hbOigmonvyB0xUSAa6bulW5YVEFYPfkFcg4244Kk7iUIVFJBVD/5BQs9H4FTE0VfwbWggromyJ+fg0vK4Nso+u6kUFe/ERbyP+EmR2DlBOh8KiMwANXvgygkBYFgbMEGu6ThCqAQoI0vIA6DToAm1sBCoYWGAPLqF9CIDR40CoTQhhHuQ3oDUC/ont7A2PgXQCBodA1MjX8BBND2JvCrmrwHvvsFVGqD+aJUw17DV5P3vcHvfAH/VCR66V1DVJ0P4kVZzMdfQF9R3tfrjlBHqMfxedUS106APurn2dEaiBUVPU6gwMWkwdVU9wov14iCCsgvCPhzNTxWJfTdbxgiqqjo637uCKeqir4RD4hSGQE47RHpYKVURwBfKHf+cA10NdzyEMwHaaHqbDD/JK+BYyqAW4hf/wIWqGsL8D+uEfYtxK9/AaGqez5ihXS4yghA6RuGHzYKhLou++pWSF0Drq7Oj4g/7JQA48D40x900P/9FuNHMI7hXSukSOeptfh73QY3YIV0ArSiA+GkEKBuK6R/Y79ai5/1f7uRJTBX1hAw/0zYk94Q0IgVuldWD6b4o/hJt8GNWKFRJ0AT8etsacQKudoaozHoJZECov5dtWGF+toIAKcfVbiC3hDQhg7UjXAb8S+6DW7DCrFCgKrjJ89ltgwgqNwKXWZlXK4QoNaSiEyL8SUXJLSo3gqxT4kLPig6BKhcB8u0mPMTAaL8o9qtIM35qsC0wVMD8bPf7wpOIX+1VmhrHHTfjPDCFc4AFkw5+XfxO4X8tVqhPuxXhRjhOICgXh0s5M/lTq+Qv04rxD5fFdliGRH+YmB36vsT0/8Yfx8KhdLeBPmJ+77nDv+3JYD3kjta/u79jy5zTCuiP9PvlkTO7Iu7Av/l5AfkcUmCZeLftkJ0jcVdYQ789wZ/9YXZZr8Vf1SawJHgbwaPsTje7n0rpEKsEMPfChqLMVz/h/iNlX56rww3+6kVUhDQ5DyLGX9aElEQjI40iacfWyEFZ1OzTTcs+LMX0RSMaGm87c9/OE4HCKe/fbK/hun34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQJ8uu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6I3xL5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvsXoSR+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1WZ4L8ygqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD4J+S0gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mjfyKTOQKZl7e9RWg1ggnVO4D/TJ+q5U18istLX0Fjz9EreCnP4E5qFm/YLuTOb5VII86ARgMAFHfAp3aI6Eo5WBu7CkB6fzXyZ+DwfIRwGHSJcA/bw359wBWjwC8RZjzP2uBvSpsD1rpLxh53ITV8jWrp0OOqFa/zwZm20NibQP0emFXkYrOUvjbmeZVDcjv9fhS9iWZ6fiVAw3y+Fk/wfT4vVJIDAZeNhOmKoWbXlsCqtgdzKwAOdAgpUEhQHyvTBzKjXSBDLxsJitVIcCoZ8ly9OVl4kx0vILo+OOZjVy+4hOKQmlEQ29ZO4UAXjNJUd8ohmAg8X+JSQB5/F3awZXjdxhfaD0evZ8vaOllnxRJaYbA4hII3L86KfrZ+4ltbH4pQa5iqCxvBSwdEcH2aNM+qsns8fUSuK9F7d5gwktxs7D7DeNrGzOuG1u0TAD0L5IZg7oERAeO+KQG2DL7YReCf53KxKGwUYxWs70lFncHl1f7rrBRoN3xXUKAoPytgwIMb4D6daWhbPUiHhdNg+nJNSDxHz/8p9aMjWFUShrvP/zXGx5tiWUCSPzxjVvA12RcA756tHh4Y4IBBctbYCgSIN2U1TEdNU2erY/zF9D+DNAlHi6ma773IgGkdMeHsyCuSjuAIcRXKe35aBYELbYfux0UAnhNIQV6VRJ19uf4ClibaXBVkmg2NRArBNDjTxOpDYGB7E/zFwTVJISz3hPlwBhQI0BA3SR515/60WuDUmyvgQ2D/rdhvpz6fowKa0xhUQiQnC6RNExgEZjKiKjbRA1kfZI7PMXv0gEsKUD2gd4f3nXT694mx9zhLV2PbDA8r+clvYlAFuoegY4vQCtW6BDu7+94uR7YYHjWwRTr+P1FsoZOVYGKFRxr+P3Za1M9o0YAiZ+r+P37qDj5vOTjy1kfb/33z/36hFoxZIkpQUnU9+kYHsHOkMdBm1zkYlHV4JIOEQcrHS8LKSowupSgqOp646cf3tMeV8UJ+aEc1zEDQmen5h9IKQhySFD+XU/heE6cqSG3V2UNgFfqv6PZIbesZHMLKnDoEyj1XwomJ5zqF7gmLDohZi21MUSTQ26xaHFiV7TBv8CD2uU/BJNDHjtNwC1UXANPlQE+HJYezvDXQp3wfS4VQyIw3LX4gVyBAnEka3leQaCCE/JPrtcfjAv3ZyPtTvohOOSJDyzErz2XEP0FbdW7FQbkawDci7VC95ByhJEtTXhQGMA7e+ReZjeR3exDCGGZLozW3qxUlHseNAOGlwnurh/9EkII89iTsUy/0t6Gu/vLGBQdbBXujSmvp5zvvfUKr85/pbln2fW9cw3x45XfmnV7/b4GvBycpp9v5qlwwOtC+L6vfnj7Jc5LTEtZByoMCPkaYMUKWQH5XLyH4/z9sD/wO9vxi1ofClJYPQnvue1RrJCZzW+vXPi4gtN9S3uMluMHmnPxIvHpmPFpDShWyMjmp15x1lNCW7wRqBB/MMX/uK1tVQr7p5OQMyF8YIWMFL0ian3v4Xn4pU8CGORMsKkD+zy4TpPCwX3fBzEJIti1QjQXXF4hs7GP7pqvEJjEFxiLX59aXGL0MHxjQBZxZ84KKUUvVvnffWdAnwQQi8JB2GQs7aVK4Yj9t5NwzLZ7o1ZIlv8x/9238vaNkgDWSL1JHXgvdakqjO6iIgt+FcnkDfL/pOnAiLhny5wRYCg1AsazzbSXLoVZfQoyFoWjR3tpX53/k1ojgTQVhMNMRtO+uhT2eo9D90ymOBjnf6HI7RQCRPk/09odTD1xpkth1hggnm+w87KZYNDmORSK3AoDYJM7g0J+Y+V/XQqjxoBf30oknsxd8xLMuhVUGJANivRCflPw70th7VHkuCNTYPP8VzMbrkgAKSSxQv56pLA2I6x7fCAOtfD/VNIHfYkAcRMOi0L+aqSwWEcl8UtxRLAFikosSpGb4zMBtpyHEnxVUri4D/4C5Ruw7IOUIncXngnQg4L6pHCZAREENfFfKfJSeCLABDoqk8IKA7qK+J9I48YCBQaAXv2tVQofV3/t60AlzAIDQK/9VSuF9Qf+GuF/boZBf9OyTikszIjaTR/7U8+Cyo3b86hD0PO+lUrhFV1U8r418z89P4wAOqqVwnISHte9KiyJCUZl82tECgsD7O9/eklM4b/AKZtfA1JYQMsAdeCk+NqX/b5O2fxakcIHqLckpqI1KQxN8P/9ft/mpLCOqktiCv/blMLvo6ruSAXtSOGuLf7HozfNG5PCvoMaEdRB3k4Zb9imFA4MCur1QVEZb9egFI4OG+R/r2x+7UnhqWb+kz4ZziubX2NS2HOz/Fc2v6akcDw3zP+7svk1JIUZoWocdEcyKGhABzYAvTtSQ0NSWMGH/61J4Q//Bc1J4YZAsU3+61LYEzQFd/SsTVtSOHCD/Ffyvg1K4eigPfTK5tcQuG3++9Y2P+Ur8Nwy/6ODhkExhRM0i7tsfu1icNgy/2eGD+zDMhAaByI0DPIB2kbfsgbDmxSiWwV7aURoErNy/aSxXNwErYKU6yetpeP5E3/bW4BvL+724le+gb7JQmwfr7ty3Kk99Ru7PBcdsDXlm2Z8jp+gBci77UNejnINpQSu2cukefydb8QPYNi9S3rfenIvcWqpDytQZgUJb+34gZhdSRYdNH9tjNxSF0LoHp1pS2zIDyz5u6RihXwbjZkytD88xK/Tn5+qFPftCwj0bViBR6gWeKXHa+ynsB2DGFppS+Pbw/r4/sEAbmIBXGOaHzvgQA8GnH7/+SmD77bLHoj94xz0tV9Hl1GbvO2Afhu+iV/xh1P1uY+U0vLYA/8RMTSsjPBUv/Xx2w4YURiwEHDd5M/9/rDtgSNAn73PvHAj8csOyHCJmx3sqZX204ibCgS8J2EADs3ELzvg7JNgaqv0KQnwW0yCf6rO+8YUJ5In29z+Nkao3/rh1ae0XEgyYN3u+bql8sOfZtnlJH7K5s+PSEvthz8HOeiy0ic+bF8fuGbyxyQ4Z/EP1ds+Qefzm8fDlu0MVds+QR/SAzGLn2UGZQstjxscwCKlz7uc/A2Qf7p8Hfn9yvuw7oABKofYnOjc14LPSp+DWKJqgdvrymIApiz+8OWDqwaBX4WOFLw6sUJfX07lh/8gwUqud8qs4L3668jkI4rvE9nLwoQJsF4BIMo3ovi+lQBjZoVPXLv1+zfMh+/z8j+kC9ZR9Ye/xE9bHUDij9TG4d9tvucsome1QmMLyteL71u94ERr/NUXfb2Y/NX3DD57da2vPPW1Jfh5P4FHvoChbvcvqS8h/JI2yLODc92Hv4RaHMY6EQiqT32dpATW0iCuWxIEzOP3oZWOr5AELh/CE8f1L5auleGjbl8CdLGJDQDG77OXxffRvfYNQOIPpzmPX6wwec+NXPXzLOJ/d/uxDyPWH39wuJJ+fuP2Z4WUGBbegj6+/Yhci/LND/dC/L8UvTxAJeAFn/rflsPbnxwiVqJ8w3P8PmuBJkUvR6wm9eWeH6UbNh0UHSoJs1stRd9d/P0u/oX1UrGrJvUVSen/A04j6gmzro60VxxAix9ffMphNakv3z35IVne3YtPcR153wlLftAdf8o8eClneKQOoifMqrCFOY0RMtz1+EUYxn8/xV0NF10dyhfw3ugX91gAeEXDQ07co8/V+6f4Q3c0Gajzlmdj4O53vsThKcZZC26zCZeYnFXl67f4vzb1b/HrB7zYBLyZ1oGXOMgWcCrM+wvJ89E1GfYiH00e/mep903xad4fFtNeSISP+KMoJbsTHmXEzfwseniA8jcgMlkQT1aV7xb/m4K2/5rNf5b4Dctgussvntc/8DBjElL6uiZD+qdsKV/Oi/3Hn5I7El3+KTRZ9BX23oXK9Oan5JqMfMraF0B+x9z5Mdqhux1/ShgwavLRAE4hf2eFMk9z4YNPCaZVPi0iJgxhzvh+kvinL1nAx+Tft4uJmLAEjJn16zJPw+JpFMmQY5BrMvbGRVMU6cY+8Rb/JeqXPbq4/u59f5eLYrl8DGhzvi1eY9g8Dc26p5HmuOj6S5CLUosmH43E/2/Ay37EUewOMz+dOOdgtlFKil0cvszvKfM0s7L/Pw0FG3L56DuwAXfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK29PKtURvy4Bb+vFSuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs+QjE40giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOl4BkfiwhT10PUv8BD8BBL9/KtoEwbicF4GIpfL15fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYCvzozevbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgrhlge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSMx2/co/7JfjRJDz0KSWULJB5DIeBSPzrybeElDyYjV8P7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxNwtxfm3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaC5w/+DDz744IMPPvjggw8++OCDDz744IMPDABvPbQN9tAwrjG1TQDyDdceZU53u8CrzFxoAPocjlYhM2ixXfK31H2gD2GmhsnfLgFoTgJqk/yCX9AMlNeXuF3yN9t+HpKgxfbzIeUI0B5CytE3x//mCbCkHAM0hi7liK02XwvaM8KUdoD2MCrTSltBTDkIoG0V1J4RDq0T4NQ4AeaUo4Pm0KXGjDCeFQ3UTB6Ed1FiyrG0kPcNBA+4lmyw1L2uqgoKLRR9d263b4oAUvcKpKig2ELRN+V3LjnlcK3UvcJZUUG1k18QumIiwDVT90o3LKogrJ78AjkHm3FBUvcSBCqpIKqf/IKFno/AqYmir+BaUEFdE+TPz8ElZfBtFH13Uqir3wgL+Z9wkyOwcgJ0PpURGID+qA/6P9HpZtdg1QgHAAAAAElFTkSuQmCC"});var a9;var s9=d(()=>{a9="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"});var x_;var l9=d(()=>{j();s9();x_=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=a9}_applyWebGL(t,e,r,o=false){const n=t.getContext();const{canvas:s}=n;const a=this.getShaderForRenderer(t);const l=e.getFrame();const c=this._watermarkCanvas;if(!c||l.width!==c.width||l.height!==c.height){this._createWatermarkCanvas(l.width,l.height)}const u=M.Texture.fromCanvas(this._watermarkCanvas);const m=u.getBaseTexture();t.updateTexture(m);m.setGLUnit(1);t.setRenderTarget(r);if(o){r.clear()}t.setShader(a);const p=t.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",p);a.syncUniforms();n.uniform1i(n.getUniformLocation(a.getProgram(),"u_watermarkTex"),1);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,e.getTexture());n.activeTexture(n.TEXTURE1);n.bindTexture(n.TEXTURE_2D,m.getGLTextureForRenderer(t));n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);u.dispose()}_createWatermarkCanvas(t,e){const r=this._options.watermarkImage;const o=L.createCanvas();o.width=t;o.height=e;const n=o.getContext("2d");const s=n.createPattern(r,"repeat");n.fillStyle=s;n.fillRect(0,0,o.width,o.height);this._watermarkCanvas=o;this._watermarkContext=n}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const l=this._options.watermarkImage;this._createWatermarkCanvas(n.width,n.height);const c=s.getImageData(0,0,n.width,n.height);const u=this._watermarkContext.getImageData(0,0,n.width,n.height);const m=new W;const p=new W;const h=new W;for(let g=0;g<n.width*n.height*4;g+=4){m.set(c.data[g]/255,c.data[g+1]/255,c.data[g+2]/255,c.data[g+3]/255);p.set(u.data[g]/255,u.data[g+1]/255,u.data[g+2]/255,u.data[g+3]/255);if(p.r>.8){h.copy(m.clone().mix(p,.3))}else{h.copy(m)}c.data[g]=h.r*255;c.data[g+1]=h.g*255;c.data[g+2]=h.b*255;c.data[g+3]=h.a*255}a.putImageData(c,0,0)}};x_.prototype.availableOptions={watermarkImage:{type:"object",required:true}}});var Sh,c9;var u9=d(()=>{j();n9();l9();Sh=class extends Mt{constructor(...t){super(...t);X(this,"_applyWatermarkFilter",()=>{if(!this._watermarkFilter){this._watermarkFilter=new x_({watermarkImage:this._watermarkImage})}this._sprite.setFilters([this._watermarkFilter]);this._renderTexture.render(this._container);return Promise.resolve()});X(this,"_loadWatermarkImage",()=>{if(!this._watermarkImage){return new Promise((t,e)=>{this._watermarkImage=new Ki;this._watermarkImage.onload=t;this._watermarkImage.src=o9})}return Promise.resolve()});this._watermarkFilter=null;this._watermarkImage=null}_render(t){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){if(this._watermarkFilter){this._watermarkFilter.dispose()}super.dispose()}};Sh.identifier="license-watermark";Sh.prototype.availableOptions={};ht.Operations.LicenseWatermarkOperation=Sh;c9=Sh});var m9;var d9=d(()=>{m9="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var Ns,ST,v_;var p9=d(()=>{j();Ld();d9();({Vector2:Ns}=Y);ST=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=m9;this._lastBlurRadius=null;this._lastControlPoint1=new Ns;this._lastControlPoint2=new Ns;this._blurFilter=new rr;this._blurredRenderTarget=new M.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new M.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,r,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(t,e,r,o);return}const n=e.getDimensions();const s=!r.getDimensions().equals(n);const a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){const l=new Ns(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);const c={blurRadius:this._options.blurRadius,texSize:n};const u=(_,x,b)=>Math.min(Math.max(_,x),b);const m=(_,x,b)=>{const w=u((b-_)/(x-_),0,1);return w*w*(3-2*w)};const p=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone());const{blurRadius:h}=this._options;const g=(_,x)=>{return m(0,1,Math.abs(u(new Ns(_,x).subtract(this._options.controlPoint1).dot(p)/p.dot(p),0,1)))*h};this._blurFilter.set(c);this._blurFilter._applyCanvas(t,e,r,o,g);this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(t,e,r,o=false){const n=e.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio());this._blurredRenderTarget.resizeTo(e.getDimensions());this._maskRenderTarget.setPixelRatio(e.getPixelRatio());this._maskRenderTarget.resizeTo(e.getDimensions());const a=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||s;const l=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastControlPoint1=this._options.controlPoint1.clone();this._lastControlPoint2=this._options.controlPoint2.clone()}if(l){this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(e,r)}_renderMask(){const t=this._maskRenderTarget.getCanvas();const e=this._maskRenderTarget.getContext();const r=new Ns(t.width,t.height);const o=this._options.controlPoint1.clone().multiply(r);const n=this._options.controlPoint2.clone().multiply(r);const s=e.createLinearGradient(o.x,o.y,n.x,n.y);s.addColorStop(0,"#FFFFFF");s.addColorStop(1,"#000000");e.fillStyle=s;e.fillRect(0,0,t.width,t.height)}_applyMask(t,e){const r=e.getContext();const o=t.getCanvas();const n=t.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const c=l.data;const u=s.getImageData(0,0,o.width,o.height).data;const m=a.getImageData(0,0,o.width,o.height).data;let p;for(let h=0;h<o.width*o.height*4;h+=4){p=m[h]/255;c[h]=p*c[h]+(1-p)*u[h];c[h+1]=p*c[h+1]+(1-p)*u[h+1];c[h+2]=p*c[h+2]+(1-p)*u[h+2]}r.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose();this._blurredRenderTarget.dispose();this._maskRenderTarget.dispose()}};ST.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},controlPoint1:{type:"vector2",default:new Ns(0,.5),uniformType:"2f"},controlPoint2:{type:"vector2",default:new Ns(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Ns(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Ns(100,100),uniformType:"2f"}};v_=ST});var C_,wh,h9;var f9=d(()=>{j();p9();({Vector2:C_}=Y);wh=class extends Mt{constructor(...t){super(...t);this._lastBlurRadius=this._options.blurRadius;this._lastControlPoint1=this._options.controlPoint1.clone();this._lastControlPoint2=this._options.controlPoint2.clone();const e={blurQuality:{type:"string"}};this._horizontalFilter=new v_({},e);this._verticalFilter=new v_({},e);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new C_(.5,.5));this._verticalFilter.setDelta(new C_(-.5,.5));this._filter=new v_({},e)}rotate(t){const{controlPoint1:e}=this._options;const{controlPoint2:r}=this._options;if(t===90){e.flip();e.x=1-e.x;r.flip();r.x=1-r.x}else if(t===-90){e.flip();e.y=1-e.y;r.flip();r.y=1-r.y}this.set({controlPoint1:e,controlPoint2:r})}flip(t){const{controlPoint1:e}=this._options;const{controlPoint2:r}=this._options;switch(t){case"horizontal":e.x=1-e.x;r.x=1-r.x;break;case"vertical":e.y=1-e.y;r.y=1-r.y;break}this.set({controlPoint1:e,controlPoint2:r})}transform(t){const e={};["controlPoint1","controlPoint2"].forEach(r=>{const o=this.getOption(r);e[r]=t.applyToRelativePoint(o)});["blurRadius"].forEach(r=>{const o=this.getOption(r);e[r]=t.applyToRelativeSize(o)});this.set(e,false)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){if(this._options.highQualityCanvasBlur){return this._renderBlur(t)}return this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions();const r=e.min();const{blurRadius:o,controlPoint1:n,controlPoint2:s}=this._options;const a={blurRadius:o*r,controlPoint1:n.clone(),controlPoint2:s.clone(),texSize:e,blurQuality:"high"};this._horizontalFilter.set(a);this._verticalFilter.set(a);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(t){const e=t.getDimensions();const{blurRadius:r,controlPoint1:o,controlPoint2:n}=this._options;this._filter.set({blurRadius:r,controlPoint1:o.clone(),controlPoint2:n.clone(),texSize:e,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};wh.identifier="linear-focus";wh.prototype.availableOptions={controlPoint1:{type:"vector2",default:new C_(0,.5)},controlPoint2:{type:"vector2",default:new C_(1,.5)},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};ht.Operations.LinearFocusOperation=wh;h9=wh});var b9;var g9=d(()=>{b9="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"});var Hs,wT,S_;var y9=d(()=>{j();Ld();g9();({Vector2:Hs}=Y);wT=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=b9;this._lastBlurRadius=null;this._lastGradientRadius=null;this._lastStart=new Hs;this._lastEnd=new Hs;this._blurFilter=new rr;this._blurredRenderTarget=new M.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new M.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,r,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(t,e,r,o);return}const n=e.getDimensions();const s=!r.getDimensions().equals(n);const a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){const l=new Hs(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);const c={blurRadius:this._options.blurRadius,texSize:n};const u=(D,O,k)=>Math.min(Math.max(D,O),k);const m=(D,O,k)=>{const E=u((k-D)/(O-D),0,1);return E*E*(3-2*E)};const{blurRadius:p,gradientSize:h,size:g,start:_,end:x,texSize:b}=this._options;const w=new Hs(_.y-x.y,x.x-_.x);w.divide(w.len());const T=(D,O)=>{return m(0,1,(Math.abs(b.clone().multiply(D,O).subtract(_).dot(w))-g)/h)*p};this._blurFilter.set(c);this._blurFilter._applyCanvas(t,e,r,o,T);this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(t,e,r,o=false){const n=e.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio());this._blurredRenderTarget.resizeTo(e.getDimensions());this._maskRenderTarget.setPixelRatio(e.getPixelRatio());this._maskRenderTarget.resizeTo(e.getDimensions());const a=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||s;const l=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastStart=this._options.start.clone();this._lastEnd=this._options.end.clone();this._lastGradientRadius=this._options.size}if(l){this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(e,r)}_renderMask(){const t=this._maskRenderTarget.getCanvas();const e=this._maskRenderTarget.getContext();const r=this._maskRenderTarget.getPixelRatio();const o=new Hs(t.width,t.height);const n=this._options.size*o.min()*r;const s=this._options.gradientSize*o.min()*r;const a=this._options.start.clone().multiply(o);const l=this._options.end.clone().multiply(o);const c=l.clone().subtract(a);const u=a.clone().add(c.clone().divide(2));const m=c.len();const p=c.clone().divide(m);const h=u.clone().add((n+s)*p.y,-(n+s)*p.x);const g=u.clone().add(-(n+s)*p.y,(n+s)*p.x);const _=e.createLinearGradient(h.x,h.y,g.x,g.y);const x=g.clone().subtract(h).len();_.addColorStop(0,"#000000");_.addColorStop(s/2/x,"#FFFFFF");_.addColorStop(1-s/2/x,"#FFFFFF");_.addColorStop(1,"#000000");e.fillStyle=_;e.fillRect(0,0,t.width,t.height)}_applyMask(t,e){const r=e.getContext();const o=t.getCanvas();const n=t.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const c=l.data;const u=s.getImageData(0,0,o.width,o.height).data;const m=a.getImageData(0,0,o.width,o.height).data;let p;for(let h=0;h<o.width*o.height*4;h+=4){p=m[h]/255;c[h]=p*c[h]+(1-p)*u[h];c[h+1]=p*c[h+1]+(1-p)*u[h+1];c[h+2]=p*c[h+2]+(1-p)*u[h+2]}r.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose()}};wT.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},size:{type:"number",default:50,uniformType:"f"},gradientSize:{type:"number",default:50,uniformType:"f"},start:{type:"vector2",default:new Hs(0,.5),uniformType:"2f"},end:{type:"vector2",default:new Hs(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Hs(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Hs(100,100),uniformType:"2f"}};S_=wT});var w_,Th,_9;var x9=d(()=>{j();y9();({Vector2:w_}=Y);Th=class extends Mt{constructor(...t){super(...t);this._lastBlurRadius=this._options.blurRadius;this._lastSize=this._options.size;this._lastGradientSize=this._options.gradientSize;const e={blurQuality:{type:"string"}};this._horizontalFilter=new S_({},e);this._verticalFilter=new S_({},e);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new w_(.5,.5));this._verticalFilter.setDelta(new w_(-.5,.5));this._filter=new S_({},e);this._renderBlur.bind(this)}rotate(t){const{start:e}=this._options;const{end:r}=this._options;if(t===90){e.flip();e.x=1-e.x;r.flip();r.x=1-r.x}else if(t===-90){e.flip();e.y=1-e.y;r.flip();r.y=1-r.y}this.set({start:e,end:r})}flip(t){const{start:e}=this._options;const{end:r}=this._options;switch(t){case"horizontal":e.x=1-e.x;r.x=1-r.x;break;case"vertical":e.y=1-e.y;r.y=1-r.y;break}this.set({start:e,end:r})}transform(t){const e={};["start","end"].forEach(r=>{const o=this.getOption(r);e[r]=t.applyToRelativePoint(o)});["blurRadius","size","gradientSize"].forEach(r=>{const o=this.getOption(r);e[r]=t.applyToRelativeSize(o)});this.set(e,false)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){if(this._options.highQualityCanvasBlur){return this._renderBlur(t)}return this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions();const r=e.min();const o=this._options.start.clone();const n=this._options.end.clone();const{blurRadius:s,size:a,gradientSize:l}=this._options;const c={blurRadius:s*r,size:a*r,gradientSize:l*r,start:o.clone().multiply(e),end:n.clone().multiply(e),texSize:e,blurQuality:"high"};this._horizontalFilter.set(c);this._verticalFilter.set(c);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(t){const e=t.getDimensions();const{blurRadius:r,size:o,gradientSize:n,start:s,end:a}=this._options;this._filter.set({blurRadius:r,gradientSize:n,size:o,start:s.clone(),end:a.clone(),texSize:e,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};Th.identifier="mirrored-focus";Th.prototype.availableOptions={start:{type:"vector2",default:new w_(0,.5)},end:{type:"vector2",default:new w_(1,.5)},blurRadius:{type:"number",default:.025},size:{type:"number",default:.1},gradientSize:{type:"number",default:.1},highQualityCanvasBlur:{type:"boolean",default:false}};ht.Operations.MirroredFocusOperation=Th;_9=Th});var lst,kh,v9;var C9=d(()=>{j();({Vector2:lst}=Y);kh=class extends Mt{_render(t){const e=this._options.rotation%360;const r=e*(Math.PI/180);const o=e===90||e===270;const n=this._options.flipHorizontally!==this._options.flipVertically;const s=o&&n?!this._options.flipVertically:this._options.flipVertically;const a=o&&n?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,s?-1:1);this._sprite.setRotation(r);this._sprite.setAnchor(.5,.5);this._sprite.updateTransform();const l=this._sprite.getBounds();this._renderTexture.resizeTo(new lst(l.width,l.height));this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round());this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(t){t=t.clone();if(this._options.rotation%180){t.flip()}return t}flip(t){const{rotation:e}=this._options;if(e===90||e===270){if(t==="vertical"){t="horizontal"}else{t="vertical"}}switch(t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally());break}}};kh.identifier="orientation";kh.prototype.availableOptions={rotation:{type:"number",default:0,validation(i){if(i%90!==0){throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")}},setter:i=>(i+360)%360},flipVertically:{type:"boolean",default:false},flipHorizontally:{type:"boolean",default:false}};ht.Operations.OrientationOperation=kh;v9=kh});var T_,Ih,S9;var w9=d(()=>{j();({Vector2:T_}=Y);Ih=class extends Mt{constructor(...t){super(...t);this._flipContainer=new M.Container}_render(t){const{position:e,rotation:r,scale:o,pivot:n,outputResolution:s}=this._options;const a=this._sdk.getTextureScale();const l=s.clone().multiply(a).ceil();this._renderTexture.resizeTo(l);this._sprite.setRotation(r);this._sprite.setPosition(e);this._sprite.setPivot(n);this._sprite.setScale(o);this._renderTexture.render(this._container);return Promise.resolve()}getNewDimensions(t){const e=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(e).ceil()}};Ih.identifier="output";Ih.prototype.availableOptions={position:{type:"vector2",default:new T_(0,0)},rotation:{type:"number",default:0},scale:{type:"vector2",default:new T_(1,1)},pivot:{type:"vector2",default:new T_(0,0)},outputResolution:{type:"vector2",default:new T_(100,100)}};ht.Operations.OutputOperation=Ih;S9=Ih});var k_,T9,cst,Gd,k9;var I9=d(()=>{j();({OverlayFilter:k_}=M.Filters);({Vector2:T9}=Y);cst=4;Gd=class extends Mt{constructor(...t){super(...t);this._overlayTexture=M.Texture.fromImage(this._options.image);this._overlayContainer=new M.Container;this._overlaySprite=new M.Sprite;this._overlaySprite.setTexture(this._overlayTexture);this._overlaySprite.setAnchor(0,0);this._overlayContainer.addChild(this._overlaySprite);this._overlayFilter=new M.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture});this._sprite.setFilters([this._overlayFilter]);this._renderedOverlaySprite=new M.Sprite;this._renderedOverlayContainer=new M.Container;this._renderedOverlayContainer.addChild(this._renderedOverlaySprite);this._overlayRendered=false;this._lastInputDimensions=new T9(0,0)}setOption(t,e){super.setOption(t,e);if(t==="image"&&e&&this._sdk){const r=this._sdk.getRenderer();const o=this._overlayTexture.getBaseTexture();o.setSource(e);if(r.isOfType("webgl")){r.updateTexture(o)}this._overlayRendered=false}}_render(t){const e=t.getDimensions();const{image:r,alpha:o,blendMode:n}=this._options;if(!r){this._sprite.setFilters([]);this._renderTexture.render(this._container);return Promise.resolve()}if(!this._overlayRendered||!this._lastInputDimensions.equals(e)){this._renderOverlayToRenderTexture(t);this._overlayRendered=true;this._lastInputDimensions.copy(e)}this._overlayFilter.set({blendMode:n,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:o});this._sprite.setFilters([this._overlayFilter]);this._renderTexture.render(this._container);return Promise.resolve()}_renderOverlayToRenderTexture(t){const e=this._sdk.getRenderer();const r=t.getDimensions();if(!this._overlayRenderTexture){this._overlayRenderTexture=new M.RenderTexture(e,r.x,r.y);this._renderedOverlaySprite.setTexture(this._overlayRenderTexture)}const{width:o,height:n}=this._options.image;const s=L.resizeVectorToFill(new T9(o,n),r);const{flipHorizontally:a,flipVertically:l}=this._options;const c=a?-1:1;const u=l?-1:1;this._overlaySprite.setWidth(s.x*c);this._overlaySprite.setHeight(s.y*u);this._overlaySprite.setPosition(r.x*(1-c)*.5,r.y*(1-u)*.5);const m=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(r);if(e.isOfType("webgl")){m.setGLUnit(cst);e.updateTexture(m,false)}this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose();if(this._overlaySprite)this._overlaySprite.dispose();if(this._overlayRenderTexture)this._renderedOverlaySprite.dispose();if(this._overlayFilter)this._overlayFilter.dispose();if(this._overlayTexture)this._overlayTexture.dispose();if(this._overlayRenderTexture)this._overlayRenderTexture.dispose();if(this._renderedOverlaySprite)this._renderedOverlaySprite.dispose()}};Gd.identifier="overlay";Gd.BLEND_MODES=k_.BLEND_MODES;Gd.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},blendMode:{type:"number",default:k_.BLEND_MODES.MULTIPLY,available:Object.keys(k_.BLEND_MODES).map(i=>k_.BLEND_MODES[i])},alpha:{type:"number",default:1},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};ht.Operations.OverlayOperation=Gd;k9=Gd});var E9;var D9=d(()=>{E9="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"});var Vd,TT,I_;var F9=d(()=>{j();Ld();D9();({Vector2:Vd}=Y);TT=class extends M.Filter{constructor(...t){super(...t);this._fragmentSource=E9;this._lastBlurRadius=null;this._lastGradientRadius=null;this._lastPosition=new Vd;this._blurFilter=new rr;this._blurredRenderTarget=new M.CanvasRenderTarget(100,100,1);this._maskRenderTarget=new M.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,r,o=false){if(this._options.blurQuality==="low"){this._renderLQBlur(t,e,r,o);return}const n=e.getDimensions();const s=!r.getDimensions().equals(n);const{blurRadius:a,position:l,texSize:c,gradientRadius:u}=this._options;const m=e.getBaseTexture().isDirty()||this._lastBlurRadius!==a||s;if(m){const p=new Vd(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(p);const h={blurRadius:a,texSize:n};const g=(b,w,T)=>Math.min(Math.max(b,w),T);const _=(b,w,T)=>{const D=g((T-b)/(w-b),0,1);return D*D*(3-2*D)};const x=(b,w)=>{return _(0,1,(Math.abs(c.clone().multiply(b,w).subtract(l).len())-this._options.radius)/(u*2))*a};this._blurFilter.set(h);this._blurFilter._applyCanvas(t,e,r,o,x);this._lastBlurRadius=a}}_renderLQBlur(t,e,r,o=false){const n=e.getDimensions();const s=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio());this._blurredRenderTarget.resizeTo(e.getDimensions());this._maskRenderTarget.setPixelRatio(e.getPixelRatio());this._maskRenderTarget.resizeTo(e.getDimensions());const a=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||s;const l=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||s;if(a){this._renderMask();this._lastPosition=this._options.position.clone();this._lastGradientRadius=this._options.gradientRadius}if(l){this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius);this._lastBlurRadius=this._options.blurRadius}this._applyMask(e,r)}_renderMask(){const t=this._maskRenderTarget.getCanvas();const e=this._maskRenderTarget.getContext();const r=new Vd(t.width,t.height);const o=this._maskRenderTarget.getPixelRatio();const n=this._options.position.clone().multiply(r);let{radius:s,gradientRadius:a}=this._options;s*=t.height;a*=t.height;const l=e.createRadialGradient(n.x,n.y,0,n.x,n.y,(s+a)*o);l.addColorStop(0,"#FFFFFF");l.addColorStop(s/(s+a),"#FFFFFF");l.addColorStop(1,"#000000");e.fillStyle=l;e.fillRect(0,0,r.x,r.y)}_applyMask(t,e){const r=e.getContext();const o=t.getCanvas();const n=t.getContext();const s=this._blurredRenderTarget.getContext();const a=this._maskRenderTarget.getContext();const l=n.getImageData(0,0,o.width,o.height);const c=l.data;const u=s.getImageData(0,0,o.width,o.height).data;const m=a.getImageData(0,0,o.width,o.height).data;let p;for(let h=0;h<o.width*o.height*4;h+=4){p=m[h]/255;c[h]=p*c[h]+(1-p)*u[h];c[h+1]=p*c[h+1]+(1-p)*u[h+1];c[h+2]=p*c[h+2]+(1-p)*u[h+2]}r.putImageData(l,0,0)}dispose(){super.dispose();this._blurFilter.dispose();this._blurredRenderTarget.dispose();this._maskRenderTarget.dispose()}};TT.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},radius:{type:"number",default:50,uniformType:"f"},gradientRadius:{type:"number",default:25,uniformType:"f"},position:{type:"vector2",default:new Vd(.5,.5),uniformType:"2f"},delta:{type:"vector2",default:new Vd(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Vd(100,100),uniformType:"2f"}};I_=TT});var kT,Dh,R9;var O9=d(()=>{j();F9();({Vector2:kT}=Y);Dh=class extends Mt{constructor(...t){super(...t);this._lastBlurRadius=this._options.blurRadius;this._lastGradientRadius=this._options.gradientRadius;const e={blurQuality:{type:"string"}};this._horizontalFilter=new I_({},e);this._verticalFilter=new I_({},e);this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new kT(.5,.5));this._verticalFilter.setDelta(new kT(-.5,.5));this._filter=new I_({},e)}rotate(t){const{position:e}=this._options;if(t===90){e.flip();e.x=1-e.x}else if(t===-90){e.flip();e.y=1-e.y}this.set({position:e})}flip(t){const{position:e}=this._options;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y;break}this.set({position:e})}transform(t){const e={};const r=this.getPosition();e.position=t.applyToRelativePoint(r);["radius","blurRadius","gradientRadius"].forEach(o=>{const n=this.getOption(o);e[o]=t.applyToRelativeSize(n)});this.set(e,false)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){if(this._options.highQualityCanvasBlur){return this._renderBlur(t)}return this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions();const r=e.min();const{position:o,blurRadius:n,radius:s,gradientRadius:a}=this._options;const l={blurRadius:n*r,radius:s*r,gradientRadius:a*r,position:o.clone().multiply(e),texSize:e,blurQuality:"high"};this._horizontalFilter.set(l);this._verticalFilter.set(l);this._renderTexture.render(this._container);return Promise.resolve()}_renderLQCanvasBlur(t){const{blurRadius:e,radius:r,gradientRadius:o,position:n}=this._options;const s=t.getDimensions();this._filter.set({blurRadius:e,radius:r,gradientRadius:o,position:n,texSize:s,blurQuality:"low"});this._sprite.setFilters([this._filter]);this._renderTexture.render(this._container);return Promise.resolve()}dispose(){super.dispose();this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose()}hasChanges(){return true}};Dh.identifier="radial-focus";Dh.prototype.availableOptions={position:{type:"vector2",default:new kT(.5,.5)},radius:{type:"number",default:.25},gradientRadius:{type:"number",default:.125},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:false}};ht.Operations.RadialFocusOperation=Dh;R9=Dh});var B9;var A9=d(()=>{B9="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"});var IT,P9;var M9=d(()=>{j();A9();IT=class extends M.Filter{constructor(){super();this._fragmentSource=B9}_applyCanvas(t,e,r,o=false){const n=e.getCanvas();const s=e.getContext();const a=r.getContext();const{maskCanvas:l,filterCanvas:c}=this._options;const u=l.getContext("2d");const m=c.getContext("2d");const p=u.getImageData(0,0,n.width,n.height).data;const h=s.getImageData(0,0,n.width,n.height);const g=h.data;const _=m.getImageData(0,0,n.width,n.height).data;let x;for(let b=0;b<n.width*n.height*4;b+=4){x=p[b]/255;g[b]=x*_[b]+(1-x)*g[b];g[b+1]=x*_[b+1]+(1-x)*g[b+1];g[b+2]=x*_[b+2]+(1-x)*g[b+2]}a.putImageData(h,0,0)}};IT.prototype.availableOptions={maskImage:{type:"number",default:1,uniformType:"i"},maskCanvas:{type:"object",default:null},filterImage:{type:"number",default:2,uniformType:"i"},filterCanvas:{type:"object",default:null}};P9=IT});var D_,L9,Fn;var jd=d(()=>{j();({Vector2:D_}=Y);L9=class extends yt{constructor(t,e){super(e);this._isDisposed=false;this._operation=t;this._dirtiness={};this.id=L.getUUID();this._renderTextures={};this._identitySprite=new M.Sprite;this._sprite=new M.Sprite;this._hitTestSprite=new M.Sprite;this._renderers=[]}applyScale(t){}applyRotation(t){const e=this._operation.getInputDimensions();let r=this.getRotation()*180/Math.PI;r+=t;this.setRotation(r*Math.PI/180);const o=(t+360)%360;const n=o*Math.PI/180;const s=Math.cos(n);const a=Math.sin(n);const l=this._options.position.clone().subtract(.5).multiply(e);const c=new D_(l.x*s-l.y*a,l.x*a+l.y*s).divide(e.clone().flip());this.setPosition(new D_(.5,.5).add(c))}applyFlip(t){const e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y;break}this.setPosition(e)}applyTransform(t){const e={};e.rotation=t.applyToRotation(this.getRotation());e.position=t.applyToRelativePoint(this.getPosition());if(this._options.dimensions){e.dimensions=t.applyToDimensions(this.getDimensions())}this.set(e,false)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(t){if(!this._renderTexture){const e=this._getTexture();this._renderTextureContainer=new M.Container;this._renderTextureSprite=new M.Sprite(e);this._renderTextureContainer.addChild(this._renderTextureSprite);this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}else{this._renderTexture.clear()}}_rendersToRenderTexture(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType("webgl")}_optionEquals(t,e){if(t==="type"){return true}return super._optionEquals(t,e)}update(t,e){if(this._isDisposed){return}if(this._rendersToRenderTexture(t)){this._prepareRenderTexture(t);this._renderToRenderTexture(t)}this._updateSprite(e)}_updateSprite(t){const e=[this._sprite,this._hitTestSprite];e.forEach(r=>{if(!r.getTexture())return;r.setAnchor(this._options.anchor);r.setPosition(this._options.position.clone().multiply(t));if(typeof this._options.alpha!=="undefined"){r.setAlpha(this._options.alpha)}let{dimensions:o}=this._options;if(o){o=o.clone().multiply(this._operation.getSDK().getTextureScale());r.setWidth(o.x);r.setHeight(o.y)}r.updateTransform();const n=r.getTexture().getFrame();const s=new D_(n.width,n.height);r.setPivot(this._options.pivot.clone().multiply(s));r.setRotation(this._options.rotation);r.updateTransform()})}_renderToRenderTexture(t){const e=this._getTexture().getDimensions();const r=this._getRenderTexture(t.getRenderer(),e);const o=e.clone();if(this._options.smoothDownscaling){o.x=L.nextHighestPOT(o.x);o.y=L.nextHighestPOT(o.y)}this._renderTexture.resizeTo(o);this._renderTexture.render(this._renderTextureContainer);if(this._options.smoothDownscaling){const n=o.clone().subtract(e.x,e.y).divide(o);const s=r.getUVs().getUVs();s[0].x=s[3].x=0;s[1].x=s[2].x=1-n.x;s[0].y=s[1].y=0;s[2].y=s[3].y=1-n.y}this._sprite.setTexture(r)}isDirtyForRenderer(t){if(!(t.id in this._dirtiness)){this._dirtiness[t.id]=true}return this._dirtiness[t.id]}setDirtyForRenderer(t,e){this._renderers[e.id]=e;this._dirtiness[e.id]=t}setDirty(t){for(const e in this._dirtiness){this.setDirtyForRenderer(t,this._renderers[e])}}_getRenderTexture(t,e=new D_(100,100)){if(!this._renderTextures[t.id]){this._renderTextures[t.id]=new M.RenderTexture(t,e.x,e.y,1)}return this._renderTextures[t.id]}dispose(){this._isDisposed=true;for(const t in this._renderTextures){this._renderTextures[t].dispose()}}canBeDuplicated(){return true}canBeDeleted(){return true}canMaskCanvas(){return false}canAdjustPadding(){return false}canBeTakenToFront(){return true}canBeFlippedHorizontally(){return true}};Fn=L9});var mst,il;var DT=d(()=>{j();({Vector2:mst}=Y);il=class extends yt{constructor(...t){super(...t);this._lastOptions={};this._lastInputDimensions=new mst(0,0);this._brush=null}getBrushImage(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions)){return this._brush}const{image:e,size:r}=this._options;e.width=e.height=Math.ceil(r*t.min());const o=L.createCanvas();o.width=e.width;o.height=e.height;const n=o.getContext("2d");n.drawImage(e,0,0,o.width,o.height);const s=this._tintImageData(n.getImageData(0,0,o.width,o.height),o.width,o.height);n.putImageData(s,0,0);this._lastOptions=this.serializeOptions(["size","color"]);this._brush=o;this._lastInputDimensions=t.clone();return o}_tintImageData(t){const{color:e}=this._options;for(let r=0;r<t.data.length;r+=4){t.data[r]+=(e.r*255-t.data[r])*e.a;t.data[r+1]+=(e.g*255-t.data[r+1])*e.a;t.data[r+2]+=(e.b*255-t.data[r+2])*e.a}return t}clone(){const t=this.constructor;return new t(this._options)}};il.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},size:{type:"number",default:.05},color:{type:"color",default:W.RED}}});var fc;var z9=d(()=>{j();DT();fc=class extends il{getBrushImage(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions)){return this._brush}let{size:e,hardness:r,color:o}=this._options;const n=L.createCanvas();n.width=n.height=Math.ceil(e*t.min());const s=n.getContext("2d");o=o.clone();o.a=1;if(n.width===1){s.fillStyle=o.toRGBA();s.fillRect(0,0,1,1)}else{const a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*r),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());const l=o.clone();l.a=0;a.addColorStop(1,l.toRGBA());s.fillStyle=a;s.fillRect(0,0,n.width,n.height)}this._lastOptions=this.serializeOptions(["size","color","hardness"]);this._brush=n;this._lastInputDimensions=t.clone();return n}};fc.identifier="imgly_brush_radial";fc.prototype.availableOptions={...il.prototype.availableOptions,hardness:{type:"number",default:1}}});var pst,hst,U9,N9;var H9=d(()=>{j();({Vector2:pst,CubicBezierCurve:hst}=Y);U9=class{constructor(t,e,r=3){this._path=t;this._drawnCanvases=[];this._position=e;this._smooth=r}getBezierCurve(t,e,r,o){if(!e){return null}let n;let s;if(!o){n=(r.x-e.x)/this._smooth;s=(r.y-e.y)/this._smooth}else{n=(o.x-e.x)/this._smooth;s=(o.y-e.y)/this._smooth}let a;let l;if(!t){a=(r.x-e.x)/this._smooth;l=(r.y-e.y)/this._smooth}else{a=(r.x-t.x)/this._smooth;l=(r.y-t.y)/this._smooth}const c=e.clone().add(a,l);const u=r.clone().subtract(n,s);return new hst(e,c,u,r)}renderToCanvas(t,e,r,o,n,s=1){if(this._drawnCanvases.indexOf(e)!==-1){return}const a=new pst(e.width,e.height);const l=e.getContext("2d");const c=this._position.clone().multiply(a);const u=o?o.getPosition().clone().multiply(a):null;const m=r?r.getPosition().clone().multiply(a):null;const p=n?n.getPosition().clone().multiply(a):null;const h=c.clone().subtract(u).len();const g=t.width/10;const _=this.getBezierCurve(m,u,c,p);let x;if(!_){x=[c]}else{_.calculateSegments(20);const b=_.getLength();x=_.arcLengthApproxSample(Math.ceil(b/g))}for(let b=0;b<x.length;b++){const w=x[b];let T=t.width*.5/(g*2);T*=1-s;T=1/(1+T);l.globalAlpha=T;l.drawImage(t,w.x-t.width/2,w.y-t.height/2,t.width,t.height)}l.globalAlpha=1;this._drawnCanvases.push(e)}setPosition(t){this._position=t}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}};N9=U9});var ET,Eh;var W9=d(()=>{j();H9();ET=class extends yt{constructor(t,e,r){super(e);this._operation=t;this._canvas=r||L.createCanvas();this._context=this._canvas.getContext("2d")}serializeOption(t,e=false){if(t==="controlPoints"){return this._options.controlPoints.map(r=>{const o=r.getPosition();return e?o.toObject():o.clone()})}return super.serializeOption(t,e)}_optionEquals(t,e){if(t==="controlPoints"){const{controlPoints:r}=this._options;for(let o=0,n=r.length;o<n;o++){if(!r[o].getPosition().equals(e[o])){return false}}return true}return super._optionEquals(t,e)}render(t){const{controlPoints:e,size:r}=this._options;if(e.length<2){return}const o=this.getBrush();const n=o&&o.getHardness?o.getHardness():1;L.ensureCanvasDimensions(this._canvas,t);if(!this._brush||this._lastBrushSize!==r||!t.equals(this._brushInputDimensions)){this._brushInputDimensions=t.clone();this._lastBrushSize=r}let s;let a;let l;let c;for(let u=0;u<e.length;u++){s=e[u-2];a=e[u-1];l=e[u];c=e[u+1];l.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,s,a,c,n)}}_createBrush(t){let{size:e,hardness:r,color:o}=this._options;const n=L.createCanvas();n.width=n.height=Math.ceil(e*t.min());const s=n.getContext("2d");o=o.clone();o.a=1;if(n.width===1){s.fillStyle=o.toRGBA();s.fillRect(0,0,1,1)}else{const a=s.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*r),n.width/2,n.height/2,n.width/2);a.addColorStop(0,o.toRGBA());const l=o.clone();l.a=0;a.addColorStop(1,l.toRGBA());s.fillStyle=a;s.fillRect(0,0,n.width,n.height)}return n}addControlPoint(t){const e=new N9(this,t);this._options.controlPoints.push(e);this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(t){this._canvas=t;this._context=t.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);this._options.controlPoints.forEach(t=>{t.setDirty()})}forEachControlPoint(t){this._options.controlPoints.forEach(t)}renderToCanvas(t){const e=t.getContext("2d");e.save();e.globalAlpha=this._options.brush.getColor().a;e.drawImage(this._canvas,0,0);e.restore()}getCanvasDimensions(){return this._canvasDimensions}};ET.prototype.availableOptions={id:{type:"string",default:()=>L.getUUID()},brush:{type:"object",required:true},controlPoints:{type:"array",default:[]},closed:{type:"boolean",default:false}};Eh=ET});var E_,gc,bc;var FT=d(()=>{j();jd();DT();z9();W9();({Vector2:E_}=Y);gc=class extends Fn{constructor(...t){super(...t);this._persistedPaths=[];this._outputCanvasDirty=true;this._outputCanvas=L.createCanvas();this._outputContext=this._outputCanvas.getContext("2d");this._persistCanvas=L.createCanvas();this._persistContext=this._persistCanvas.getContext("2d");this._nextCanvas=L.createCanvas();this._texture=M.Texture.fromCanvas(this._outputCanvas);this._sprite.setTexture(this._texture);this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(t){this._options.paths.forEach(e=>{e.forEachControlPoint(r=>{const o=r.getPosition().clone();switch(t){case"horizontal":o.x=1-o.x;break;case"vertical":o.y=1-o.y;break}r.setPosition(o)});e.setDirty(true)});this._reset()}applyRotation(t){this._options.paths.forEach(e=>{e.forEachControlPoint(r=>{const o=r.getPosition().clone();if(t===90){o.flip();o.x=1-o.x}else if(t===-90){o.flip();o.y=1-o.y}r.setPosition(o)});e.setDirty(true)});this._reset()}applyTransform(t){let e=null;this._options.paths.forEach(r=>{r.forEachControlPoint(n=>{n.setPosition(t.applyToRelativePoint(n.getPosition()))});const o=r.getBrush();if(o!==e){o.setSize(t.applyToRelativeSize(o.getSize()));e=o}r.setDirty(true)});this._reset()}clearCanvas(){if(!this._outputCanvas){return}this._outputCanvasDirty=true;const{width:t,height:e}=this._outputCanvas;this._outputContext.clearRect(0,0,t,e)}clearPersistCanvas(){if(!this._persistCanvas){return}const{width:t,height:e}=this._persistCanvas;this._persistContext.clearRect(0,0,t,e)}serializeOptions(t,e=false){const r=super.serializeOptions(t,e);if(!t)r.type="brush";return r}serializeOption(t,e=false){if(t==="paths"){return this._options.paths.map(r=>r.serializeOptions(void 0,e))}return super.serializeOption(t,e)}createPath(t){const e=new Eh(this._operation,{brush:t},this._nextCanvas);e.on("update",this._onPathUpdate);this._options.paths.push(e);this.setDirty(true);return e}_onPathUpdate(){this._operation.setDirty(true);this.setDirty(true)}_onPathPersist(t){t.renderToCanvas(this._persistCanvas);this._nextCanvas=t.getCanvas();const e=this._nextCanvas.getContext("2d");e.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height);this._persistedPaths.push(t)}_getTexture(){return this._texture}setDirtyForRenderer(t,e,r=false){super.setDirtyForRenderer(t,e,r);if(t&&r){this._persistedPaths=[];this.clearPersistCanvas();this._options.paths.forEach(o=>{o.setDirty(true)})}}setDirty(t,e=false){for(const r in this._dirtiness){this.setDirtyForRenderer(t,this._renderers[r],e)}}render(t){const e=this._operation.getSDK().getRenderer();if(!this.isDirtyForRenderer(e)){return}L.ensureCanvasDimensions(this._outputCanvas,t);L.ensureCanvasDimensions(this._persistCanvas,t);this._options.paths.forEach(r=>{r.render(t);if(r.getClosed()&&this._persistedPaths.indexOf(r)===-1){this._onPathPersist(r)}});this.clearCanvas();this._outputContext.drawImage(this._persistCanvas,0,0);this._options.paths.forEach(r=>{if(!r.getClosed()){r.renderToCanvas(this._outputCanvas)}});this.setDirtyForRenderer(false,e)}update(t,e){if(e){L.ensureCanvasDimensions(this._outputCanvas,e);L.ensureCanvasDimensions(this._persistCanvas,e);this._texture.getBaseTexture().update()}this.render(e);const r=t.getRenderer();if(r.isOfType("webgl")){r.updateTexture(this._texture.getBaseTexture())}super.update(t,e)}_reset(){this._persistedPaths=[];if(this._operation){this._operation.setDirty(true)}this.setDirty(true);this.clearCanvas();this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new fc}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose();this._texture&&this._texture.getBaseTexture().dispose()}};gc.prototype.availableOptions={id:{type:"string",default:()=>L.getUUID()},position:{type:"vector2",default:new E_(0,0)},scale:{type:"vector2",default:new E_(1,1)},anchor:{type:"vector2",default:new E_(0,0)},pivot:{type:"vector2",default:new E_(0,0)},rotation:{type:"number",default:0},paths:{type:"array",default:[],setter(i){i=i.map(t=>{if(t instanceof Eh)return t;const{brush:e,closed:r}=t;const o=new Eh(this._operation,{brush:e,closed:r},this._nextCanvas);t.controlPoints.forEach(n=>{o.addControlPoint(n)});return o});this._reset();return i}}};gc.type="brush";gc.Brush=il;gc.Path=Eh;gc.Brushes={RadialBrush:fc};bc=gc});var G9,Fh,V9;var j9=d(()=>{j();Ld();M9();FT();({Vector2:G9}=Y);Fh=class extends Mt{constructor(...t){super(...t);const e=this._sdk.getRenderer();this._lastBlurRadius=null;this._blurredRenderTexture=new M.RenderTexture(e,100,100,1);this._maskRenderTexture=new M.RenderTexture(e,100,100,1);this._brushSprite=new bc(this);this._brushSpriteContainer=new M.Container;const r=this._brushSprite.getDisplayObject();this._brushSpriteContainer.addChild(r);this._outputSprite=new M.Sprite;this._outputContainer=new M.Container;this._outputContainer.addChild(this._outputSprite);this._maskFilter=new P9;if(e.isOfType("webgl")){this._horizontalFilter=new rr;this._verticalFilter=new rr;this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]);this._horizontalFilter.setDelta(new G9(1,1));this._verticalFilter.setDelta(new G9(-1,1));let o=this._maskRenderTexture.getBaseTexture();o.setGLUnit(this._maskFilter.getMaskImage());e.updateTexture(o,false);o=this._blurredRenderTexture.getBaseTexture();o.setGLUnit(this._maskFilter.getFilterImage());e.updateTexture(o,false)}else if(e.isOfType("canvas")){this._blurFilter=new rr;this._sprite.setFilters([this._blurFilter]);this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas());this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas())}this._outputSprite.setFilters([this._maskFilter])}flip(t){this._brushSprite.applyFlip(t);this.setDirty(true,true);this._lastBlurRadius=null}rotate(t){this._brushSprite.applyRotation(t);this.setDirty(true,true);this._lastBlurRadius=null}transform(t,e){this._brushSprite.applyTransform(t,e);this.setDirty(true,true);this._lastBlurRadius=null}_render(t){this._renderBlur(t);this._renderMask(t);this._outputSprite.setTexture(t);this._renderTexture.render(this._outputContainer);return Promise.resolve()}_renderMask(t){const e=t.getDimensions();const r=this._maskRenderTexture.getDimensions();if(!r.equals(e)){this._maskRenderTexture.resizeTo(e)}this._brushSprite.update(this._sdk,e);this._maskRenderTexture.clear(W.BLACK);this._maskRenderTexture.render(this._brushSpriteContainer);const o=this._sdk.getRenderer();if(o.isOfType("webgl")){o.updateTexture(this._maskRenderTexture.getBaseTexture(),false)}}_renderBlur(t){const e=t.getDimensions();const r=this._blurredRenderTexture.getDimensions();if(!r.equals(e)){this._blurredRenderTexture.resizeTo(e)}const{blurRadius:o}=this._options;if(this._lastBlurRadius!==o||!r.equals(e)){const s=this._sdk.getRenderer();let a;if(s.isOfType("webgl")){const l=e.min();a={blurRadius:o*l,texSize:e};this._horizontalFilter.set(a);this._verticalFilter.set(a)}else if(s.isOfType("canvas")){a={blurRadius:o};this._blurFilter.set(a)}this._blurredRenderTexture.render(this._container);this._lastBlurRadius=o}const n=this._sdk.getRenderer();if(n.isOfType("webgl")){n.updateTexture(this._blurredRenderTexture.getBaseTexture(),false)}}getBrush(){return this._brushSprite}createPath(t,e=1){const r=new bc.Brushes.RadialBrush({size:t,hardness:e,color:W.WHITE});const o=this._brushSprite.createPath(r);this._options.paths.push(o);this.setDirty(true);return o}setDirtyForRenderer(t,e,r){super.setDirtyForRenderer(t,e,r);this._brushSprite.setDirtyForRenderer(t,e,r)}dispose(){super.dispose();const t=this._sdk.getRenderer();if(t.isOfType("webgl")){this._verticalFilter.dispose();this._horizontalFilter.dispose()}else{this._blurFilter.dispose()}this._brushSprite.dispose();this._maskFilter.dispose();this._blurredRenderTexture.dispose();this._maskRenderTexture.dispose()}hasChanges(){return true}};Fh.identifier="selective-blur";Fh.prototype.availableOptions={blurRadius:{type:"number",default:.05},paths:{type:"array",default:[],setter(i){if(this._brushSprite){this._brushSprite.setPaths(i)}return i}}};ht.Operations.SelectiveBlurOperation=Fh;V9=Fh});var yc,F_,R_,O_;var $9=d(()=>{j();Sw();jd();({Vector2:yc,ColorMatrix:F_}=Y);R_=class extends Fn{constructor(...t){super(...t);const{image:e}=this._options;const r=e.src||e.filePath||e.toDataUrl&&e.toDataURL();this._isSVG=r&&(!!r.match(/\w+\.svg(?=\?|$)/i)||r.match(/data:image\/svg/i));if(this._isSVG){this._canvas=L.createCanvas();this._context=this._canvas.getContext("2d");this._options.smoothDownscaling=false}if(e){this._onImageUpdate()}this._tintFilter=new M.Filters.TintFilter;this._adjustmentsFilter=new Xy;this._lastRenderedDimensions=yc.NULL;this._lastRenderedInputDimensions=yc.NULL;this._onOptionsChange=this._onOptionsChange.bind(this);this._options.adjustments.on("update",this._onOptionsChange)}applyScale(t){this.setDimensions(this.getDimensions().multiply(t))}serializeOptions(t,e=false){const r=super.serializeOptions(t,e);if(!t)r.type="sticker";return r}_rendersToRenderTexture(t){const e=this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType("webgl");return e||this._hasAdjustments()||this._options.tintMode!=="none"}_getTexture(){return this._inputTexture}update(t,e){const{dimensions:r,image:o}=this._options;if(r.equals(yc.NULL)){r.set(o.width,o.height)}this._sprite.setSmoothDownscaling(this._isSVG?false:this.getSmoothDownscaling());const n=!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==o;if(n&&this._isSVG&&t.getRenderer().isOfType("webgl")){o.width=Math.round(r.x);o.height=Math.round(r.y);const a=4096;const l=o.width/o.height;if(o.width>a){o.width=a;o.height=Math.round(o.width/l)}if(o.height>a){o.height=a;o.width=Math.round(o.height*l)}this._canvas.width=o.width;this._canvas.height=o.height;this._context.clearRect(0,0,o.width,o.height);this._context.drawImage(o,0,0,o.width,o.height);this._inputTexture.getBaseTexture().update()}if(this._rendersToRenderTexture(t)){this._prepareRenderTexture(t)}const s=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);const{adjustments:a}=this._options;const l=new F_;l.multiply(F_.createBrightnessMatrix(a.getBrightness()));l.multiply(F_.createSaturationMatrix(a.getSaturation()));l.multiply(F_.createContrastMatrix(a.getContrast()));this._adjustmentsFilter.set({colorMatrix:l})}if(this._options.tintMode&&this._options.tintMode!=="none"){s.push(this._tintFilter);this._tintFilter.set({mode:M.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor});if(this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture){this._sprite.getTexture()._baseTexture.setDirty(true)}}this._renderTextureSprite.setFilters(s)}if(this._rendersToRenderTexture(t)){this._renderToRenderTexture(t)}else{this._sprite.setTexture(this._inputTexture)}this._updateSprite(e);this._applyFlip();this._lastRenderedDimensions.copy(r);this._lastRenderedInputDimensions.copy(e);this._lastRenderedImage=o}_applyFlip(){const t=this._sprite.getScale();const{flipHorizontally:e,flipVertically:r}=this._options;if(e&&t.x>0||!e&&t.x<0){t.x*=-1}if(r&&t.y>0||!r&&t.y<0){t.y*=-1}this._sprite.setScale(t)}applyFlip(t){super.applyFlip(t);const e={rotation:this._options.rotation};const r=e.rotation/Math.PI*180;const o=r*-1;e.rotation=o*Math.PI/180;switch(t){case"horizontal":e.flipHorizontally=!this._options.flipHorizontally;this.set(e);break;case"vertical":e.flipVertically=!this._options.flipVertically;this.set(e);break}}_hasAdjustments(){const{adjustments:t}=this._options;return t.getBrightness()!==0||t.getSaturation()!==1||t.getContrast()!==1}_onImageUpdate(){let t=this._options.image;const e=this._operation.getSDK().getRenderer();if(this._isSVG&&e.isOfType("webgl")){t=this._canvas}if(this._inputTexture){this._inputTexture.dispose();this._inputTexture=null}this._inputTexture=M.Texture.fromImage(t);this._identitySprite.setTexture(this._inputTexture);this._sprite.setTexture(this._inputTexture);if(this._renderTexture){this._renderTextureSprite.setTexture(this._inputTexture);this._renderTexture.resizeTo(this._inputTexture.getDimensions())}this.setDirty(true)}scalesUniformly(){return this._options.resizeMode==="keepAspect"}setOption(t,e,r=true){super.setOption(t,e,r);if(t==="image"&&this._identitySprite){this._onImageUpdate()}}_onOptionsChange(){const t=this._dirtiness;for(const e in t){t[e]=true}}dispose(){super.dispose();if(this._inputTexture){this._inputTexture.dispose();this._inputTexture=null}this._tintFilter.dispose();this._adjustmentsFilter.dispose();this._options.adjustments.off("updated",this._onOptionsChange)}};R_.prototype.availableOptions={id:{type:"string",default:()=>L.getUUID()},identifier:{type:"string",default:""},image:{type:"image",required:true},position:{type:"vector2",default:yc.NULL},dimensions:{type:"vector2",default:yc.NULL},anchor:{type:"vector2",default:new yc(0,0)},pivot:{type:"vector2",default:new yc(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false},smoothDownscaling:{type:"boolean",default:false},tintColor:{type:"color",default:W.WHITE},tintMode:{type:"string",default:"none",available:["none","solid","colorized"]},resizeMode:{type:"string",default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:"number",default:1},adjustments:{type:"configurable",structure:{brightness:{type:"number",default:0},saturation:{type:"number",default:1},contrast:{type:"number",default:1}}}};R_.type="sticker";O_=R_});var Rn,kt;var Ar=d(()=>{Rn=class{constructor(t){this._seed=t===void 0?Rn.TimeSeed():t}seed(t){this._seed=t===void 0?Rn.TimeSeed():t}next(){let t=this._seed|0;const e=t/Rn.SEED_DIVIDER|0;const r=t%Rn.SEED_DIVIDER|0;t=Rn.SEED_LOW_MULTIPLY*r-Rn.SEED_HIGH_MULTIPLY*e;if(t<=0){t+=Rn.MAX}if(t===-1){t=Rn.MAX-1}this._seed=t;return t}nextInRange(t,e){if(e===void 0){e=t;t=0}return t+this.next()%(e-t+1)}nextBool(t=1,e=1){return this.nextInRange(t+e-1)>=t}static TimeSeed(){return Date.now()}pickNext(t){if(!Array.isArray(t)){return null}return t[this.next()%t.length]}};kt=Rn;X(kt,"MAX",2147483647);X(kt,"SEED_DIVIDER",127773);X(kt,"SEED_LOW_MULTIPLY",16807);X(kt,"SEED_HIGH_MULTIPLY",2836)});var fst,ye;var On=d(()=>{j();({Rectangle:fst}=Y);ye=class{constructor(t=0,e=0){this.width=t;this.height=e}set(t,e){this.width=t;this.height=e}aspect(){return this.width/this.height}rectangle(t,e){return new fst(t,e,this.width,this.height)}clone(){return new ye(this.width,this.height)}scale(t,e){if(e===void 0){e=t}this.width*=t;this.height*=e;return this}copy(t){this.width=t.width;this.height=t.height;return this}fitInWidthWithOther(t,e=new ye){this.copy(ye.fitTwoInWidth(t,this,e)[0]);return this}static fitTwoInWidth(t,e,r){const o=e.width*r.height+e.height*r.width;const n=r.height*t/o;const s=e.width*n;const a=e.height*n;return[new ye(s,a),new ye(t-s,a)]}}});var K9,RT,$t;var no=d(()=>{j();K9=y(Yu());RT=class extends yt{async loadImages(t){return(0,K9.default)(t,async e=>this.addImage(e.path,e.fullPath,e.image))}addImage(t,e,r,o="anonymous"){const n=this.getImages();if(!r){return new Promise((s,a)=>{r=new Ki;r.onload=()=>{n[t]={fullPath:e,image:r};s({fullPath:e,image:r})};r.crossOrigin=L.getCrossOriginValue(o);r.onerror=a;r.src=e})}n[t]={fullPath:e,image:r};return Promise.resolve({fullPath:e,image:r})}getImage(t){const e=this.getImages();const r=e[t];return r?r.image:null}getVariation(t){return this.getFonts()[t]}addFont(t,e){const r=this.getFonts();r[t]=e;return e}};RT.prototype.availableOptions={images:{type:"object",default:{}},fonts:{type:"object",default:{}}};$t=new RT});var gst,bst,X9,yst,_st,xst,vst,Cst,Xi;var $d=d(()=>{j();On();no();gst=(i,t,e,r)=>{const o=e*(r*4)+t*4;const n={r:i[o],g:i[o+1],b:i[o+2],a:i[o+3]};return n};bst=i=>i.a<=254;X9=(i,t,e)=>{let r=true;for(let o=0;o<e;o++){const n=gst(i,o,t,e);if(!bst(n)){r=false;break}}return r};yst=(i,t,e,r,o=false)=>{let n=0;for(let s=r+1;s<e;s++){if(!X9(i,s,t)){n=s-r+1}else if(o){break}}return n};_st=(i,t,e,r,o=false)=>{let n=0;for(let s=r-1;s>=0;s--){if(!X9(i,s,t)){n=r-s}else if(o){break}}return n};xst=(i,t,e,r,o)=>{i.beginPath();i.moveTo(t,e);i.lineTo(r,o);i.stroke()};vst=(i,t,e,r,o="red")=>{i.save();i.strokeStyle=o;xst(i,e,t,r,t);i.restore()};Cst=(i,t,e,r,o,n="blue")=>{i.save();i.strokeStyle=n;i.strokeRect(t,e,r,o);i.restore()};Xi=class extends yt{constructor(t){super(t);const e=$t.getVariation(this.getFontIdentifier());if(!e){q.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.set({fontVariation:e});this._metrics=null;this._canvas=L.createCanvas();this._context=this._canvas.getContext("2d");this._isDirty=true}_onOptionsChange(){this._isDirty=true}setOption(t,e,r=true,o=false){super.setOption(t,e,r,o);if(t==="fontIdentifier"&&!o){this.updateFontVariation()}}updateFontVariation(){const t=$t.getVariation(this.getFontIdentifier());if(!t){q.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.setFontVariation(t);return t}setOptions(t={}){this._options={...this._options,...t};this._isDirty=true}_applyTextOptions(t=this._context,e={}){const{fontSize:r,fontVariation:o,lineHeight:n,textColor:s,alignment:a}={...this._options,...e};const{fontStyle:l,fontWeight:c,fontFamily:u}=o.serializeOptions();if(false){t.font=`${l} ${c} ${r}px ${u}`}if(true){t.font=`${l} ${c} ${r}px / ${n} ${u}`}t.fillStyle=s;t.textBaseline="alphabetic";t.textAlign=a||"left"}getTextMetrics(){if(!this._metrics||this._isDirty){this._calculateTextMetrics()}return{...this._metrics}}getSizeValue(){if(!this._metrics||this._isDirty){this._calculateTextMetrics()}return new ye(this._metrics.width,this._metrics.height)}fitWidth(t){const e=this.getFontVariation();if(!e){q.warn("TextDesignFont#fitText: missing font variation");return}this._applyTextOptions(this._context,{fontSize:50});const r=this._context.measureText(this.getText()).width;const o=t/r;const n=Math.floor(o*50);this.setFontSize(n);this._calculateTextMetrics();return this.getTextMetrics()}fitHeight(t){const e=this.getFontVariation();if(!e){q.warn("TextDesignFont#fitText: missing font variation");return}const r=this._calculateTextMetrics({fontSize:50}).height;const o=t/r;const n=Math.floor(o*50);this.setFontSize(n);this._calculateTextMetrics();return this.getTextMetrics()}_calculateTextMetrics(t={}){const e=this._canvas;const r=this._context;const o={...this._options,...t};const n=this.getText();this._applyTextOptions(r,o);const s=Math.ceil(r.measureText(n).width);const a=Math.floor(s+o.fontSize*2);const l=Math.floor(o.fontSize*3);e.width=a;e.height=l;const c=Math.floor(o.fontSize);const u=Math.floor(l*(3/5));this._applyTextOptions(r,o);r.fillText(n,c,u);const m=r.getImageData(0,0,e.width,e.height).data;const p=_st(m,a,l,u,this._options.excludeAccents);const h=yst(m,a,l,u,this._options.excludeAccents);const g=s;const _=p+h;this._metrics={width:g,height:_,ascender:p,descender:h};this._isDirty=false;return{...this._metrics}}draw(t=this._context,e=0,r=0,o,n=false){t.save();if(!this._metrics||this._isDirty){this._calculateTextMetrics()}this._applyTextOptions(t,o);t.fillText(this.getText(),e,r+this._metrics.ascender);if(n){Cst(t,e,r,this._metrics.width,this._metrics.height);vst(t,r+this._metrics.ascender,e,e+this._metrics.width)}t.restore()}};Xi.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:false}}});var qi;var _c=d(()=>{j();qi=class extends yt{};qi.prototype.availableOptions={text:{type:"string",default:""},frame:{type:"object",default:null},font:{type:"object",default:null}}});var so;var Kd=d(()=>{j();so=class extends yt{};so.prototype.availableOptions={tintColor:{type:"color",default:W.BLACK},textColor:{type:"color",default:W.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},lineSpacing:{type:"number",default:1},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"}}});var Sst,sr;var Rh=d(()=>{j();On();Kd();({Rectangle:Sst}=Y);sr=class extends yt{constructor(t){super(t);this.setSize(new ye(this.getWidth(),0));this.serverImageSmoothingFix=false}_getFrame(){const t=this.getSize();return new Sst(0,0,t.width,t.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(t){return t.getFrame().clone()}_calculateLayoutElements(){q.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){if(this._options.elements.length<=0){this.layout()}return this.getElements()}_fontSize(t){q.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?");return 0}layout(){this.setElements(this._calculateLayoutElements());return this}textFrame(t,e){return t.getFrame().clone()}willRender(t){}didRender(t){}render(t){t.save();this._getLayoutElements().forEach(e=>{const{text:r,frame:o,font:n}=e.serializeOptions();const s=this.getAttributes();n.draw(t,o.x,o.y,{textColor:s.getTextColor().toRGBA(),alignment:s.getAlignment()})});t.restore()}};sr.prototype.availableOptions={words:{type:"object",default:null},width:{type:"number",default:100},attributes:{type:"configurable",default:new so},shearingAngle:{type:"number",default:0},elements:{type:"array",default:[]},size:{type:"object",default:null}}});var wst,Oh,Uo;var q9=d(()=>{j();$d();_c();Rh();({Rectangle:wst}=Y);Oh=class extends sr{_calculateLayoutElements(){if(this.getWords().size()<=0){return[]}const{orientation:t,width:e,size:r,relativeRowOffset:o,attributes:n}=this.serializeOptions();const{fontIdentifier:s}=n;const a=this.getWords().joined(3);const l=t===Oh.Orientations.Left?[a[0],a[1],a[2]]:[a[1],a[2],a[0]];const c=L.Array.range(0,2).map(gt=>new Xi({text:l[gt],fontIdentifier:s,fontSize:60}));const u=c.map(gt=>gt.getSizeValue());const m=u[0].width>u[1].width?0:1;const p=(m+1)%2;c[p].fitWidth(u[m].width);u[p]=c[p].getSizeValue();const h=(u[p].height+u[m].height)/(1-o);const g=new Xi({text:l[2],fontIdentifier:s});g.fitHeight(h);const _=g.getSizeValue().width;const x=u[m].width;const b=e/(_+x);const w=b*_;const T=b*x;const D=b*h;const O=o*D;r.set(e,D);const k=L.Array.range(0,3).map(gt=>new Xi({text:l[gt],fontIdentifier:s}));k[0].fitWidth(T);k[1].fitWidth(T);k[2].fitWidth(w);const E=t===Oh.Orientations.Left?0:w;const J=t===Oh.Orientations.Left?T:0;const tt=[E,E,J];const mt=[0,k[0].getSizeValue().height+O,0];const bt=k.map((gt,pt)=>new wst(tt[pt],mt[pt],gt.getSizeValue().width,gt.getSizeValue().height));return k.map((gt,pt)=>new qi({text:l[pt],font:k[pt],frame:bt[pt]}))}};Uo=Oh;X(Uo,"Orientations",{Right:"RIGHT",Left:"LEFT"});Uo.prototype.availableOptions={...sr.prototype.availableOptions,orientation:{type:"string",default:Uo.Orientations.Left,available:[Uo.Orientations.Right,Uo.Orientations.Left]},relativeRowOffset:{type:"number",default:.05}}});var Tst,xt;var Br=d(()=>{j();({Rectangle:Tst}=Y);xt=class{constructor(t=0,e=0,r=0,o=0){this.top=t;this.left=e;this.bottom=r;this.right=o}multiply(t){this.top*=t;this.left*=t;this.bottom*=t;this.right*=t}toObject(){return{...this}}equals(t,e=0){return Math.abs(t.top-this.top)<=e&&Math.abs(t.left-this.left)<=e&&Math.abs(t.bottom-this.bottom)<=e&&Math.abs(t.right-this.right)<=e}scale(t=1,e){if(e===void 0){e=t}this.top*=e;this.bottom*=e;this.left*=t;this.right*=t;return this}clone(){return new xt(this.top,this.left,this.bottom,this.right)}applyToRectangle(t){return new Tst(t.x+this.left,t.y+this.top,t.width-this.left-this.right,t.height-this.top-this.bottom)}static get ZERO(){return new xt(0,0,0,0)}}});var _e;var ao=d(()=>{j();$d();Br();_c();Rh();_e=class extends sr{_calculateLayoutElements(){const{attributes:t,imageInsets:e,size:r,width:o}=this.serializeOptions();const n=this.getWords().joined(1)[0]||"";const{fontIdentifier:s}=t;const a=new Xi({text:n,fontIdentifier:s});a.fitWidth(this._getTextFrame().width);const l=a.getTextMetrics().height+e.top+e.bottom;r.height=l;const c=this._getTextFrame();const u=new qi({text:n,frame:c,font:a});return[u]}};_e.prototype.availableOptions={...sr.prototype.availableOptions,imageInsets:{type:"object",default:new xt}}});var Ws,ki,OT,lo,A_,Xd,AT,Y9,J9,Gs;var rl=d(()=>{j();({Rectangle:Ws,Vector2:ki}=Y);OT=(i,t,e,r)=>{i.drawImage(t,e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height)};lo=(i,t,e,r="source-over",o=false)=>{i.save();i.fillStyle=e.toRGBA();i.globalCompositeOperation=r;i.fillRect(t.x,t.y,t.width,t.height);if(o){i.strokeStyle=e.toRGBA();i.strokeWith=1;i.strokeRect(t.x,t.y,t.width,t.height)}i.restore()};A_=(i,t,e,r,o="source-over",n=false)=>{i.save();i.fillStyle=r.toRGBA();i.globalCompositeOperation=o;e=Math.min(Math.max(e,0),Math.min(t.height,t.width)*.5);const s=t.x;const a=t.x+t.width;const l=t.y;const c=t.y+t.height;i.beginPath();i.moveTo(s+e,l);i.arcTo(a,l,a,c,e);i.arcTo(a,c,s,c,e);i.arcTo(s,c,s,l,e);i.arcTo(s,l,a,l,e);i.closePath();i.fill();if(n){i.stroke()}i.restore()};Xd=(i,t,e,r=4)=>{i.save();i.strokeStyle=e.toRGBA();i.lineWidth=r;i.strokeRect(t.x,t.y,t.width,t.height);i.restore()};AT=(i,t,e,r="source-over")=>{i.save();const o=t.height/2;const n=t.y+o;let s=t.x+o;const a=t.x+t.width;i.fillStyle=e.toRGBA();i.globalCompositeOperation=r;while(s<a){i.beginPath();i.arc(s,n,o,0,2*Math.PI);i.fill();s+=o*4}i.restore()};Y9=(i,t)=>{const e=t.applyToRectangle(i);const{x:r,y:o,width:n,height:s}=i;const a=[Ws.FromDiagonalPoints(new ki(0,0),new ki(e.x,e.y)),Ws.FromDiagonalPoints(new ki(0,e.y+e.height),new ki(e.x,s)),Ws.FromDiagonalPoints(new ki(e.x+e.width,e.y+e.height),new ki(n,s)),Ws.FromDiagonalPoints(new ki(e.x+e.width,0),new ki(n,e.y))].map(c=>c.translate(r,o));const l=[Ws.FromDiagonalPoints(new ki(e.x,0),new ki(e.x+e.width,e.y)),Ws.FromDiagonalPoints(new ki(0,e.y),new ki(e.x,e.y+e.height)),Ws.FromDiagonalPoints(new ki(e.x,e.y+e.height),new ki(e.x+e.width,s)),Ws.FromDiagonalPoints(new ki(e.x+e.width,e.y),new ki(n,e.y+e.height))].map(c=>c.translate(r,o));return{corners:a,bars:l,center:e}};J9=(i,t,e,r)=>{const o=t.naturalWidth||t.width;const n=t.naturalHeight||t.height;const s=Y9(new Ws(0,0,o,n),r);const a=Y9(e,r);OT(i,t,s.center,a.center);L.Array.zip(s.corners,a.corners).forEach(([l,c])=>OT(i,t,l,c));L.Array.zip(s.bars,a.bars).forEach(([l,c])=>OT(i,t,l,c))};Gs=(i,t,e,r,o="source-atop")=>{i.save();if(r){i.globalAlpha=r.a}i.drawImage(t,e.x,e.y,e.width,e.height);if(r){i.globalAlpha=1}if(r){const n=r.clone();n.a=1;lo(i,e,n,o)}i.restore()}});var Vs;var B_=d(()=>{j();rl();Br();ao();Vs=class extends _e{_getTextColor(){if(this.getAutoAdjustTextColor()&&!this.getIsMasked()){if(this.getBackgroundColor().equals(W.WHITE)){return W.BLACK}return W.WHITE}return this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(t){const e=super._getTextFrameForElement(t);const r=this.getImageInsets();if(this.getIsMasked()||this.getIsUsedInInvertedLayout()){e.y-=r.top}return e}willRender(t){if(false){if(this.serverImageSmoothingFix){t.imageSmoothingEnabled=true}}const e=this.getAttributes();e.setTextColor(this._getTextColor());const r=this.getImage();if(r){const o=this.getCapInsets();const n=this._getFrame();if(o&&!o.equals(xt.ZERO)){J9(t,r,n,o)}else{t.drawImage(r,n.x,n.y,n.width,n.height)}lo(t,n,this.getBackgroundColor(),"source-atop",true)}if((this.getIsMasked()||this.getIsUsedInInvertedLayout())&&r){t.save();t.globalCompositeOperation="destination-out"}}didRender(t){super.didRender(t);if(this.getIsMasked()||this.getIsUsedInInvertedLayout()){t.restore()}}};Vs.prototype.availableOptions={..._e.prototype.availableOptions,image:{type:"image",default:null},capInsets:{type:"object",default:new xt},backgroundColor:{type:"color",default:W.WHITE},autoAdjustTextColor:{type:"boolean",default:true},isMasked:{type:"boolean",default:true},isUsedInInvertedLayout:{type:"boolean",default:false}}});var ar;var P_=d(()=>{j();Br();ar=class extends yt{insetsForWidth(t){return this.getRelativeInsets().clone().scale(t)}static get Small(){return new ar({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_outfit_bold",relativeInsets:new xt(.05,.2,.05,.2)})}static get Rectangle(){return new ar({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_outfit_bold",relativeInsets:new xt(.05,.05,.05,.05),needsImageSmoothingFix:true})}static get Celebrate1(){return new ar({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new xt(.05,.2,.05,.2)})}static get Celebrate2(){return new ar({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new xt(.05,.2,.05,.2)})}};ar.prototype.availableOptions={image:{type:"image",default:null},imagePath:{type:"string",default:null},relativeInsets:{type:"object",default:new xt},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:"boolean",default:false}}});var M_;var Z9=d(()=>{j();Br();On();M_=class extends yt{getSize(){const t=this.getRows();const e=this.getWidth();const r=t.length-1;let o=t.reduce((s,a)=>s+a.getSize().height,0);o+=(r+1)*this.getRelativeLineSpacing()*e;const n=this.getRelativeInsets().clone().scale(e);o+=n.top+n.bottom;return new ye(e,o)}};M_.prototype.availableOptions={text:{type:"string",default:""},lines:{type:"array",default:[]},relativeInsets:{type:"object",default:new xt},relativeLineSpacing:{type:"number",default:0},rows:{type:"object",default:[]},background:{type:"object",default:null},width:{type:"number",default:0}}});var pi;var ol=d(()=>{j();pi=class{constructor(t){this.words=[];if(t){this.splitIntoWords(t)}}splitIntoWords(t){this.words=t.match(/\S+/g)||[];return[...this.words]}get(){return[...this.words]}getWord(t){return this.words[t]}set(t){this.words=[...t];return this}slice(t,e){return pi.fromWords(this.words.slice(t,e))}getLowerCase(){return this.words.map(t=>t.toLowerCase())}getUpperCase(){return this.words.map(t=>t.toUpperCase())}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce((t,e)=>t+e.length,0)}joined(t){const e=this.size();const r=Math.floor(e/t);const o=e%t;let n=0;let s=0;return L.Array.range(0,t).map(a=>{n=s;const l=r+(a<o?1:0);s=Math.min(n+l,e);return L.Array.range(n,s).reduce((c,u)=>c+(u===n?"":" ")+this.words[u],"")})}static fromWords(t){const e=new pi;e.words=[...t];return e}}});var kst,Ist,Dst,ii;var qd=d(()=>{j();Ar();Br();ao();Kd();Z9();ol();kst=10;Ist=4;Dst=.4;ii=class extends yt{constructor(t){super(t);this._relativeInsets=new xt;this._background=null;this._fontRandomizer=new kt(0);this._lineNumberRandomizer=new kt(0);this._wordsPerLineRandomizer=new kt(0);this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(t){this._seedPool.forEach(e=>e.seed(t))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return kst}getMinLineCountOfRandom(){return Ist}getRandomAdditionalLinePercentage(){return Dst}_fontForRow(t,e){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(t){return t.replace("\n"," ").replace("	"," ")}_minimumNumberOfLines(t){return Math.ceil(Math.sqrt(t.size()))}_maximumNumberOfLines(t){return t.size()}_calculatedNumberOfLines(t){let e=this._minimumNumberOfLines(t);if(t.size()>=this.getMinLineCountOfRandom()){const r=Math.floor(Math.max(1,e*this.getRandomAdditionalLinePercentage()));e+=this._lineNumberRandomizer.nextInRange(0,r)}return Math.min(e,this._maximumNumberOfLines(t))}_randomizedNumberOfWordsPerLine(t,e){if(t>e){q.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines");return e}const r=L.Array.repeat(1,t);L.Array.range(t,e).forEach(o=>{const n=this._wordsPerLineRandomizer.nextInRange(0,t-1);r[n]+=1});return r}_textLines(t){const e=new pi(t);const r=this._calculatedNumberOfLines(e);const o=this._randomizedNumberOfWordsPerLine(r,e.size());return o.reduce((n,s)=>({index:n.index+s,lines:[...n.lines,e.slice(n.index,Math.min(n.index+s,e.size()))]}),{index:0,lines:[]}).lines}_validTextLines(t){let e=this._textLines(t);let r=0;do{r=L.Array.findIndex(e,o=>o.countNumberOfCharacters()<3);if(r>=0){const o=e[r-1];const n=e[r+1];const s=o?o.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;const a=n?n.countNumberOfCharacters():Number.MAX_SAFE_INTEGER;if(s<a&&o){o.words=[...o.words,...e[r].words];e=[...e.slice(0,r),...e.slice(r+1)]}else if(n){n.words=[...e[r].words,...n.words];e=[...e.slice(0,r),...e.slice(r+1)]}}}while(r>-1&&e.length>1);return e}_modifiedLines(t){return t}_getBackground(){return this._background}generateLayoutData(t,e){const r=this._modifiedText(t);const o=this._modifiedLines(this._validTextLines(r));const n=e*(1-this._relativeInsets.left-this._relativeInsets.right);const s=this._layoutRows(o,n);return new M_({text:r,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:o,rows:s,width:e})}_layoutRows(t,e){return t.map((r,o)=>this._randomLayoutRow(r,o,e,new so({fontIdentifier:this._fontForRow(o,r)})).layout())}_randomLayoutRow(t,e,r,o){return new _e({words:t,width:r,attributes:o})}};X(ii,"defaultFontIdentifiers",[]);X(ii,"identifier","textdesign");ii.prototype.availableOptions={fontIdentifiers:{type:"array",default:[]},relativeLineSpacing:{type:"number",default:0}}});var ri;var Yd=d(()=>{j();Ar();q9();ao();B_();Kd();P_();no();qd();ri=class extends ii{constructor(...t){super(...t);X(this,"getImagePaths",()=>{const t=this.getBanderoles();return t&&t.map(e=>e.getImagePath())||[]});X(this,"onImagesLoaded",()=>{const t=this.getBanderoles();if(t){t.forEach(e=>{const r=$t.getImage(e.getImagePath());if(!r){q.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${e.getImagePath()}'`);return}e.setImage(r)})}});this._rowTypeLessThan3WordsRandomizer=new kt(0);this._rowTypeMoreThan3WordsRandomizer=new kt(0);this._banderolesRandomizer=new kt(0);this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(t){return super._modifiedText(t).toUpperCase()}generateLayoutData(t,e){this._options.hasMaskedText=false;return super.generateLayoutData(t,e)}_randomLayoutRow(t,e,r,o){if(t.size()<3){const s=this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2)===0;return this._layoutRow(t,r,o,s)}const n=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(n){case 0:return new Uo({words:t,width:r,attributes:o,orientation:Uo.Orientations.Left});case 1:return new Uo({words:t,width:r,attributes:o,orientation:Uo.Orientations.Right});case 2:return this._layoutRow(t,r,o,true);case 3:return new _e({words:t,width:r,attributes:o});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${n}.`)}}_layoutRow(t,e,r,o){if(this.getHasMaskedText()){o=false}if(o){this.setHasMaskedText(true);const n=this._banderolesRandomizer.pickNext(this.getBanderoles());const s=new Vs({words:t,width:e,attributes:new so({alignment:"left",fontIdentifier:n.getFontIdentifier()}),image:n.getImage(),imageInsets:n.insetsForWidth(e),capInsets:null,backgroundColor:W.WHITE});if(n.getNeedsImageSmoothingFix()){s.serverImageSmoothingFix=true}return s}return new _e({words:t,width:e,attributes:r})}};X(ri,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);X(ri,"identifier","imgly_text_design_blocks");X(ri,"defaultBanderoles",[ar.Rectangle,ar.Small]);ri.prototype.availableOptions={...ii.prototype.availableOptions,fontIdentifiers:{type:"array",default:ri.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},hasMaskedText:{type:"boolean",default:false},banderoles:{type:"array",default:ri.defaultBanderoles}}});var xc;var Q9=d(()=>{j();ao();Yd();xc=class extends ri{constructor(...t){super(...t);this._exclusiveFont=null}generateLayoutData(t,e){this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers());return super.generateLayoutData(t,e)}_fontForRow(t,e){return this._exclusiveFont||super._fontForRow(t,e)}_layoutRow(t,e,r,o){return new _e({words:t,width:e,attributes:r})}};X(xc,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]);X(xc,"identifier","imgly_text_design_blocks_condensed");xc.prototype.availableOptions={...ri.prototype.availableOptions,fontIdentifiers:{type:"array",default:xc.defaultFontIdentifiers}}});var Ah,nl,lr;var BT=d(()=>{j();rl();On();_c();Rh();({Rectangle:Ah}=Y);nl=class extends sr{constructor(...t){super(...t);this.setSize(new ye(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new qi({frame:this._getTextFrame()})]}render(t){const e=this._getFrame();const r=this.getType();const o=this.getAttributes();const n=o.getTextColor();const s=e.height/3;let a=new Ah(e.x,e.y,e.width,s);let l=new Ah(e.x,e.y+s*2,e.width,s);switch(r){case nl.FormType.Rect:lo(t,e,n);break;case nl.FormType.DoubleRect:lo(t,a,n);lo(t,l,n);break;case nl.FormType.DoubleRectFirstPunctuated:AT(t,a,n);lo(t,l,n);break;case nl.FormType.DoubleRectSecondPunctuated:lo(t,a,n);AT(t,l,n);break;case nl.FormType.LongLine:{const c=e.height/2;const u=new Ah(e.x,e.y,e.width,c);A_(t,u,u.height*.5,n);break}case nl.FormType.LongAndShortLine:{const c=e.height*.2;const u=c*.75;a=new Ah(e.x,e.y+c,e.width,c);const m=e.x+e.width*.25;const p=e.y+e.height-u;l=new Ah(m,p,e.width*.5,u);A_(t,a,a.height*.5,n);A_(t,l,l.height*.5,n);break}default:break}}};lr=nl;X(lr,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"});lr.prototype.availableOptions={...sr.prototype.availableOptions,height:{type:"number",default:100},type:{type:"string",default:lr.FormType.Rect,available:L.values(lr.FormType)}}});var An;var PT=d(()=>{j();ao();BT();Yd();An=class extends ri{_layoutRow(t,e,r,o){return new _e({words:t,width:e,attributes:r})}_layoutRows(t,e){const r=super._layoutRows(t,e);const o=.032*e;const n=.08*e;const s=new lr({width:e,height:o,type:lr.FormType.LongLine,shearingAngle:0}).layout();const a=new lr({width:e,height:n,type:lr.FormType.LongAndShortLine,shearingAngle:0}).layout();return[s,...r,a]}};X(An,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]);X(An,"identifier","imgly_text_design_blocks_light");An.prototype.availableOptions={...ri.prototype.availableOptions,fontIdentifiers:{type:"array",default:An.defaultFontIdentifiers}}});var vc;var tU=d(()=>{j();ao();Kd();PT();vc=class extends An{_layoutRows(t,e){return t.map((r,o)=>this._randomLayoutRow(r,o,e,new so({fontIdentifier:this._fontForRow(o,r)})).layout())}_layoutRow(t,e,r,o){return new _e({words:t,width:e,attributes:r})}};X(vc,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]);X(vc,"identifier","imgly_text_design_blocks_light-v3_1_0");vc.prototype.availableOptions={...An.prototype.availableOptions,fontIdentifiers:{type:"array",default:vc.defaultFontIdentifiers}}});var Est,L_,No;var z_=d(()=>{j();$d();rl();On();_c();ao();({Rectangle:Est}=Y);L_=class extends _e{getImageSize(){const t=this.getLeftImage();const e=this.getRightImage();const r=this.getWords();const o=this.getAttributes();const n=o.getFontIdentifier();const s=t?new ye(t.width,t.height):new ye;const a=r.joined(1)[0];if(!a){return s}const l=new Xi({text:a,fontIdentifier:n,fontSize:50});const c=l.getSizeValue();const u=e?2:1;s.scale(u,1);const m=s.clone().fitInWidthWithOther(this._getFrame().width,c);m.scale(1/u,1);return m}_getTextFrame(){const t=super._getTextFrame().clone();const e=this.getImageSize();const r=this.getRightImage();const o=this.getImagePosition();if(!r){if(o===L_.ImagePosition.Left){t.x+=e.width}}else{t.x+=e.width;t.width-=2*e.width}return t}_calculateLayoutElements(){const t=super._calculateLayoutElements();const e=this._getFrame();const r=this.getRightImage();const o=this.getImageSize();const n=this.getImagePosition();const s=this._getTextFrame();const a=this.getAttributes();const l=a.getFontIdentifier();const c=new Xi({text:"stickerClock",fontIdentifier:l});c.fitWidth(this._getTextFrame().width);const u=new Est().set(e.x,e.y,o.width,o.height);if(!r&&n===L_.ImagePosition.Right){u.x+=s.width}t.push(new qi({text:"stickerClock",frame:u,font:c}));if(r){const m=t[0];if(m){const p=u.clone();p.translate(m.getFrame().width+p.width,0);t.push(new qi({text:"stickerClock",frame:p,font:c}))}}return t}render(t){const e=this._getLayoutElements();const r=this.getAttributes();const o=r.getTextColor();const n=this.getLeftImage();const s=this.getRightImage();const a=e[0];const l=e[1];const{font:c}=a.serializeOptions();const u=this._getTextFrameForElement(a);c.draw(t,u.x,u.y,{textColor:r.getTextColor().toRGBA(),alignment:r.getAlignment()});if(n){const m=l.getFrame();t.drawImage(n,m.x,m.y,m.width,m.height);lo(t,m,o,"source-atop")}if(e.length>2){const m=e[2];const p=m.getFrame().clone();t.drawImage(s,p.x,p.y,p.width,p.height);lo(t,p,o,"source-atop")}}};No=L_;X(No,"ImagePosition",{Left:"LEFT",right:"RIGHT"});No.prototype.availableOptions={..._e.prototype.availableOptions,leftImage:{type:"image",default:null},rightImage:{type:"image",default:null},imagePosition:{type:"string",default:No.ImagePosition.Left,available:[No.ImagePosition.Left,No.ImagePosition.Right]}}});var Bh,Pr;var MT=d(()=>{j();ao();z_();P_();ol();Yd();Bh=class extends ri{_fontForRow(t,e){const r=this.getFontIdentifiers();return r[t%r.length]}_minimumNumberOfLines(t){return Math.max(Math.floor(super._minimumNumberOfLines(t)*.7),1)}_maximumNumberOfLines(t){return Math.max(Math.floor(t.countNumberOfCharacters()/5),1)}_randomLayoutRow(t,e,r,o){return this._createSingleRow(Bh.RowType.Single,t,r,o)}_createSingleRow(t,e,r,o){const n=o.getFontIdentifier();const s=n==="imgly_font_allison_regular"||n==="imgly_font_handycheera_regular"?new pi().set(e.getLowerCase()):e;switch(t){case Bh.RowType.Single:return new _e({words:s,width:r,attributes:o});case Bh.RowType.SingleImage:return new No({words:s,width:r,attributes:o});default:q.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${t}'`);return null}}};Pr=Bh;X(Pr,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]);X(Pr,"defaultBanderoles",[ar.Celebrate1,ar.Celebrate2]);X(Pr,"identifier","imgly_text_design_celebrate");X(Pr,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"});Pr.prototype.availableOptions={...ri.prototype.availableOptions,relativeLineSpacing:{type:"number",default:.01875},fontIdentifiers:{type:"array",default:Pr.defaultFontIdentifiers},banderoles:{type:"array",default:Pr.defaultBanderoles}}});var oi;var U_=d(()=>{j();$d();ol();rl();On();Kd();_c();Rh();oi=class extends sr{constructor(...t){super(...t);this.setSize(new ye(this.getWidth(),this.getHeight()))}_getImageFrame(){const t=this._getTextFrame().clone();const e=this.getImage();if(this.getDrawingModeAspectFit()&&e){const r=Math.min(t.width/e.width,t.height/e.height);const o=e.width*r;const n=e.height*r;t.x+=(t.width-o)/2;t.y+=(t.height-n)/2;t.width=o;t.height=n}return t}_calculateLayoutElements(){return[new qi({text:"",frame:this._getImageFrame(),font:new Xi})]}render(t){const e=this.getImage();const r=this._getImageFrame();const o=this.getAttributes();const n=o.getTextColor();Gs(t,e,r,n)}};X(oi,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"});oi.prototype.availableOptions={...sr.prototype.availableOptions,words:{type:"object",default:new pi},height:{type:"number",default:0},image:{type:"image",default:null},imagePath:{type:"string",default:oi.RowImages.decorative1},drawingModeAspectFit:{type:"boolean",default:false},attributes:{type:"configurable",default:new so}}});var Cc;var eU=d(()=>{j();Ar();ao();z_();U_();P_();no();ol();Yd();MT();Cc=class extends Pr{constructor(...t){super(...t);X(this,"getImagePaths",()=>{const t=this.getBanderoles();return[...t&&t.map(e=>e.getImagePath())||[],...this._celebrateTypes]});X(this,"onImagesLoaded",()=>{const t=this.getBanderoles();if(t){t.forEach(e=>{const r=$t.getImage(e.getImagePath());if(!r){q.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${e.getImagePath()}'`);return}e.setImage(r)})}});this._celebrateTypes=[oi.RowImages.celebrate1,oi.RowImages.celebrate2,oi.RowImages.celebrate3];this._exclusiveFont=null;this._typeRandomizer=new kt(0);this._useMaskedRandomizer=new kt(0);this._seedPool.push(this._typeRandomizer);this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(t,e){const r=this.getFontIdentifiers();return r[t%(r.length-1)]}_layoutRows(t,e){const r=this._typeRandomizer.pickNext(this._celebrateTypes);const o=$t.getImage(r);if(!o){q.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${r}'`)}const n=new oi({width:e,height:e*.5,drawingModeAspectFit:true,image:o}).layout();const s=super._layoutRows(t,e);return[n,...s]}_randomLayoutRow(t,e,r,o){const n=t.countNumberOfCharacters();const s=13;const a=4;if(n<a){o.setFontIdentifier("imgly_font_rasa_regular")}const l=this._useMaskedRandomizer.nextBool(2,1);if(n<s&&l&&!this.getHasMaskedText()){return this._layoutRow(t,r,o,true)}return super._randomLayoutRow(t,e,r,o)}};X(Cc,"identifier","imgly_text_design_celebrate_simple");X(Cc,"defaultFontIdentifiers",["imgly_font_allison_regular","imgly_font_rasa_regular","imgly_font_rasa_500"]);Cc.prototype.availableOptions={...Pr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Cc.defaultFontIdentifiers}}});var Sc;var LT=d(()=>{j();Sc=class extends yt{render(t,e,r,o,n){q.warn("TextDesignBackground#render: Abstract class")}};Sc.prototype.availableOptions={}});var N_,Bn;var iU=d(()=>{j();no();rl();LT();({Rectangle:N_}=Y);Bn=class extends Sc{getImagePaths(){const{topImagePath:t,bottomImagePath:e,leftImagePath:r,rightImagePath:o}=this._options;return[t,e,r,o].filter(n=>n!=="")}render(t,e,r,o,n){const s=r.clone().scale(e.width);const a=e.rectangle(0,0);const l=$t.getImage(this.getTopImagePath());const c=$t.getImage(this.getLeftImagePath());const u=$t.getImage(this.getRightImagePath());const m=$t.getImage(this.getBottomImagePath());if(l){const p=l.width/l.height;const h=s.top*this.getTopImageFillRate();const g=h*p;const _=a.width/2;const x=_-g/2;const b=new N_(x,0,g,h);Gs(t,l,b,o)}if(m){const p=m.width/m.height;const h=s.bottom*this.getBottomImageFillRate();const g=h*p;const _=a.width/2;const x=_-g/2;const b=new N_(x,a.height-h,g,h);Gs(t,m,b,o)}if(c){const p=c.width/c.height;const h=s.left*this.getLeftImageFillRate();const g=h/p;const _=a.height/2;const x=_-g/2;const b=new N_(0,x,h,g);Gs(t,c,b,o)}if(u){const p=u.width/u.height;const h=s.right*this.getRightImageFillRate();const g=h/p;const _=a.height/2;const x=_-g/2;const b=new N_(a.width-h,x,h,g);Gs(t,u,b,o)}}};Bn.prototype.availableOptions={topImagePath:{type:"string",default:""},leftImagePath:{type:"string",default:""},bottomImagePath:{type:"string",default:""},rightImagePath:{type:"string",default:""},topImageFillRate:{type:"number",default:1},leftImageFillRate:{type:"number",default:1},bottomImageFillRate:{type:"number",default:1},rightImageFillRate:{type:"number",default:1}};Bn.Backgrounds=[new Bn({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new Bn({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new Bn({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new Bn({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]});var Pn;var zT=d(()=>{j();iU();Ar();Br();ao();ol();qd();Pn=class extends ii{constructor(...t){super(...t);this._relativeInsets=new xt(.1,.1,.1,.1);this._alreadyContainsARowWithScriptFont=false;this._backgroundsRandomizer=new kt(0);this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return L.Array.flatten(Bn.Backgrounds.map(t=>t.getImagePaths()))}_getBackground(){return this._backgroundsRandomizer.pickNext(Bn.Backgrounds)}generateLayoutData(t,e){this._alreadyContainsARowWithScriptFont=false;this._background=this._getBackground();return super.generateLayoutData(t,e)}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_fontForRow(t,e){let r=super._fontForRow(t,e);if(r==="imgly_font_petit_formal_script"){if(this._alreadyContainsARowWithScriptFont){r="imgly_font_bungee_inline"}this._alreadyContainsARowWithScriptFont=true}return r}_randomLayoutRow(t,e,r,o){const n=o.getFontIdentifier()==="imgly_font_petit_formal_script";return new _e({words:n?new pi().set(t.getLowerCase()):t,width:r,attributes:o})}};X(Pn,"identifier","imgly_text_design_equal_width");X(Pn,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]);Pn.prototype.availableOptions={...ii.prototype.availableOptions,fontIdentifiers:{type:"array",default:Pn.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025}}});var wc;var rU=d(()=>{j();Br();zT();wc=class extends Pn{constructor(...t){super(...t);this._relativeInsets=new xt}_getBackground(){return null}};X(wc,"defaultFontIdentifiers",["imgly_font_ultra"]);X(wc,"identifier","imgly_text_design_equal_width_fat");wc.prototype.availableOptions={...Pn.prototype.availableOptions,fontIdentifiers:{type:"array",default:wc.defaultFontIdentifiers}}});var _t;var Jd=d(()=>{j();Br();_t=class extends yt{insetsForWidth(t){const e=this.getRelativeInsets().clone();return e.scale(t)}};_t.prototype.availableOptions={imagePath:{type:"string",default:""},minimumHeightRatio:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:true},capInsets:{type:"object",default:new xt},relativeInsets:{type:"object",default:new xt}};_t.Box=new _t({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new xt(.1,.1,.1,.1)});_t.Badge1=new _t({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new xt(.3,.18,.2,.18)});_t.Badge2=new _t({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new xt(.3,.18,.2,.18)});_t.Badge3=new _t({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new xt(.3,.18,.2,.18)});_t.Badge4=new _t({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new xt(.3,.18,.2,.18)});_t.SpeechBubble1=new _t({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new xt(.04,.07,.12,.07),capInsets:new xt(19*3,57*3,41*3,17*3)});_t.SpeechBubble2=new _t({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new xt(.04,.07,.12,.07),capInsets:new xt(2*3,35*3,29*3,5*3)});_t.SpeechBubble3=new _t({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new xt(.165664675,.2,.165664675,.2),minimumHeightRatio:.7});_t.SpeechBubble4=new _t({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new xt(.124800224,.2,.291200523,.2),minimumHeightRatio:.7});_t.SpeechBubble5=new _t({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new xt(.114892823,.27,.15984926,.27)});_t.Watercolor1=new _t({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new xt(.2,.25,.2,.25)});_t.Watercolor2=new _t({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new xt(.08,.25,.3,.25)});_t.Watercolor3=new _t({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new xt(.1,.2,.15,.2)})});var oU=Wt(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:true});H_.arabic=void 0;var Fst="\u0620-\u064A\u066E-\u066F\u0671-\u06D5\u06EE-\u06EF\u06FA-\u06FF";var Rst="\u0750-\u077F";var Ost="[".concat(Fst).concat(Rst,"]");var Ast="[\u064B-\u065F\u0670]";var Bst="".concat(Ost).concat(Ast,"*");H_.arabic=Bst});var sU=Wt(W_=>{"use strict";Object.defineProperty(W_,"__esModule",{value:true});W_.bengali=void 0;var nU="[\\u{0980}-\\u{09FF}]";var Pst="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]";var Mst="\\u{09CD}";var Lst="".concat(nU,"(").concat(Mst).concat(nU,"|").concat(Pst,")*");W_.bengali=Lst});var lU=Wt(G_=>{"use strict";Object.defineProperty(G_,"__esModule",{value:true});G_.devanagari=void 0;var aU="[\\u{0900}-\\u{097F}]";var zst="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]";var Ust="\\u{094D}";var Nst="".concat(aU,"(").concat(Ust).concat(aU,"|").concat(zst,")*");G_.devanagari=Nst});var uU=Wt(V_=>{"use strict";Object.defineProperty(V_,"__esModule",{value:true});V_.gujarati=void 0;var cU="[\\u{0A80}-\\u{0AFF}]";var Hst="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]";var Wst="\\u{0ACD}";var Gst="".concat(cU,"(").concat(Wst).concat(cU,"|").concat(Hst,")*");V_.gujarati=Gst});var dU=Wt(j_=>{"use strict";Object.defineProperty(j_,"__esModule",{value:true});j_.hebrew=void 0;var Vst="[\u05D0-\u05EA]";var jst="[\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7]";var $st="".concat(Vst).concat(jst,"*");j_.hebrew=$st});var mU=Wt($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:true});$_.japaneseKana=void 0;var Kst="[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]";var Xst="[\\u{30A0}-\\u{30FF}]";var qst="[\\u{3099}-\\u{309A}]";var Yst="[\\u{309B}-\\u{309C}]";var Jst="((".concat(Xst,"|").concat(Kst,")").concat(qst,"?|").concat(Yst,")");$_.japaneseKana=Jst});var hU=Wt(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:true});K_.kannada=void 0;var pU="[\\u{0C80}-\\u{0CFF}]";var Zst="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]";var Qst="\\u{0CCD}";var tat="".concat(pU,"(").concat(Qst).concat(pU,"|").concat(Zst,")*");K_.kannada=tat});var gU=Wt(X_=>{"use strict";Object.defineProperty(X_,"__esModule",{value:true});X_.khmer=void 0;var fU="[\\u{1780}-\\u{17FF}]";var eat="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]";var iat="\\u{17D2}";var rat="".concat(fU,"(").concat(iat).concat(fU,"|").concat(eat,")*");X_.khmer=rat});var bU=Wt(q_=>{"use strict";Object.defineProperty(q_,"__esModule",{value:true});q_.lao=void 0;var oat="[\\u{0E80}-\\u{0EFF}]";var nat="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]";var sat="".concat(oat).concat(nat,"*");q_.lao=sat});var _U=Wt(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:true});Y_.malayalam=void 0;var yU="[\\u{0D00}-\\u{0D7F}]";var aat="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]";var lat="\\u{0D4D}";var cat="".concat(yU,"(").concat(lat).concat(yU,"|").concat(aat,")*");Y_.malayalam=cat});var vU=Wt(J_=>{"use strict";Object.defineProperty(J_,"__esModule",{value:true});J_.myanmar=void 0;var xU="[\\u{1000}-\\u{109F}]";var uat=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"];var dat="[".concat(uat.join(""),"]");var mat="\\u{1039}";var pat="".concat(xU,"(").concat(mat).concat(xU,"|").concat(dat,")*");J_.myanmar=pat});var CU=Wt(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:true});Z_.tamil=void 0;var hat="[\\u{0B80}-\\u{0BFF}]";var fat="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]";var gat="".concat(hat).concat(fat,"*");Z_.tamil=gat});var wU=Wt(Q_=>{"use strict";Object.defineProperty(Q_,"__esModule",{value:true});Q_.telugu=void 0;var SU="[\\u{0C00}-\\u{0C7F}]";var bat="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]";var yat="\\u{0C4D}";var _at="".concat(SU,"(").concat(yat).concat(SU,"|").concat(bat,")*");Q_.telugu=_at});var TU=Wt(tx=>{"use strict";Object.defineProperty(tx,"__esModule",{value:true});tx.thai=void 0;var xat="[\\u0E00-\\u0E7F]";var vat="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]";var Cat="".concat(xat).concat(vat,"*");tx.thai=Cat});var kU=Wt(ex=>{"use strict";Object.defineProperty(ex,"__esModule",{value:true});ex.tibetan=void 0;var Sat="[\\u{0F00}-\\u{0FFF}]";var wat="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]";var Tat="".concat(Sat).concat(wat,"*");ex.tibetan=Tat});var DU=Wt(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:true});sl.emojiVariation=sl.keyCap=sl.countryFlag=void 0;var kat="[\\u{1F1E6}-\\u{1F1FF}]{2}";sl.countryFlag=kat;var Iat="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";sl.keyCap=Iat;var Dat=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"];var IU="(".concat(Dat.join("|"),")");var Eat="\\u{200D}";var Fat="[\\u{FE0E}\\u{FE0F}]";var Rat="[\\u{1F3FB}-\\u{1F3FF}]";var Oat="".concat(IU,"(").concat(Eat).concat(IU,"|").concat(Rat,"|").concat(Fat,")*");sl.emojiVariation=Oat});var FU=Wt((F3t,EU)=>{"use strict";var Aat=oU();var Bat=sU();var Pat=lU();var Mat=uU();var Lat=dU();var zat=mU();var Uat=hU();var Nat=gU();var Hat=bU();var Wat=_U();var Gat=vU();var Vat=CU();var jat=wU();var $at=TU();var Kat=kU();var UT=DU();var Xat=[UT.countryFlag,UT.keyCap,UT.emojiVariation,Aat.arabic,Bat.bengali,Pat.devanagari,Mat.gujarati,Lat.hebrew,zat.japaneseKana,Uat.kannada,Nat.khmer,Hat.lao,Wat.malayalam,Gat.myanmar,Vat.tamil,jat.telugu,$at.thai,Kat.tibetan,"."];var qat=new RegExp("(".concat(Xat.join("|"),")"),"gu");function Yat(i){return i.match(qat)||[]}EU.exports={splitGraphemes:Yat}});var RU,OU,ix;var NT=d(()=>{RU=y(FU());OU=class{constructor(t){this._context=t;this._lastFontStyle={}}getLines(){let t=[];let e=[];const r=this._lines.length;for(let o=0;o<r;o++){const n=this._lines[o];const s=this._buildWords(n);const a=s.length;for(let l=0;l<a;l++){const c=s[l];const u=e.concat(c).join("").replace(/\s+$/i,"");const m=this._getWidth(u);if(m>this._maxWidth){if(e.length>0){t.push(e.join(""));e=[c]}const p=c.replace(/\s+$/i,"");if(this._getWidth(p)>this._maxWidth){const h=this._splitWord(c);t=t.concat(h.lines);if(h.rest){e=[h.rest]}}}else{e.push(c)}}t.push(e.join(""));e=[]}return t.map(o=>this._trimLine(o,this._context.textAlign))}_trimLine(t,e){return t}_buildWords(t){const e=[];let r="";const o=t.length;for(let n=0;n<o;n++){const s=t[n];r+=s;if(s===" "||s==="-"||n===o-1){e.push(r);r=""}}return e}_splitWord(t){const e={lines:[],rest:null};const r=(0,RU.splitGraphemes)(t);const o=r.length;let n=[];for(let s=0;s<o;s++){const a=r[s];if(this._getWidth(n.concat(a).join(""))>this._maxWidth){if(n.length>0){e.lines.push(n.join(""))}n=[a]}else{n.push(a)}if(s===o-1&&n.length>0){e.rest=n.join("")}}return e}_fontStyleChanged(){if(this._context.font!==this._lastFontStyle){this._lastFontStyle=this._context.font;return true}return false}_getWidth(t){return this._context.measureText(t).width}setText(t){this._text=t;this._lines=t.split("\n")}setMaxWidth(t){this._maxWidth=t}};ix=OU});var HT,AU,WT;var GT=d(()=>{j();NT();({Vector2:HT}=Y);AU=class{constructor(t,e){this._text=t;this._operation=e;this._textOptions={};this.rotation=0;this._createCanvas();this._createTexture()}_createCanvas(){this._canvas=L.createCanvas();this._context=this._canvas.getContext("2d");this._textSplitter=new ix(this._context);this._finalCanvas=L.createCanvas();this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=M.Texture.fromCanvas(this._canvas);this._finalTexture=M.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(t,e){e.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${t.fontSize}px "${this._text.getFontFamily()}"`;if(this._text.getTextMetrics()){e.textBaseline="alphabetic"}else{e.textBaseline="top"}e.textAlign=this._text.getAlignment();e.fillStyle=this._text.getColor().toRGBA();e.strokeStyle=this._text.getOutlineColor().toRGBA();const r=this._text.getOutlineWidth();if(r>0){e.lineWidth=r}}_buildOutputLines(t){this._textSplitter.setText(this._text.getText());this._textSplitter.setMaxWidth(t);return this._textSplitter.getLines().map(e=>{return e.replace(/\s+$/i,"")})}_renderTextLine(t,e,r){const o=this._text.getAlignment();const n=new HT(0,e);switch(o){case"left":n.x=r;break;case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width-r;break}this._context.save();this._context.translate(n.x,n.y);this._context.fillText(t,0,0);this._context.restore();const s=this._text.getOutlineWidth();if(s>0){this._context.miterLimit=2;this._context.strokeText(t,n.x,n.y)}}update(t,e){const r=this.calculateFontStyles(t,e);if(r){const{dimensions:o,lines:n}=this._calculateText(t,r,e);this._renderText(t,o,n,r,e);this._updateFinalTexture()}}_updateFinalTexture(){const{width:t,height:e}=this._canvas;const{rotation:r}=this;const o=Math.cos(r);const n=Math.sin(r);const s=new HT(Math.abs(t*o)+Math.abs(e*n),Math.abs(t*n)+Math.abs(e*o));this._finalCanvas.width=s.x;this._finalCanvas.height=s.y;this._finalContext.save();this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2);this._finalContext.rotate(r);this._finalContext.drawImage(this._canvas,-t/2,-e/2);this._finalContext.restore()}_renderText(t,e,r,o,n){this._canvas.width=e.x;this._canvas.height=e.y;if(this._text.getMaxHeight()){this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)}this._context=this._canvas.getContext("2d");this._context.fillStyle=this._text.getBackgroundColor().toRGBA();this._context.fillRect(0,0,e.x,e.y);this._applyTextOptions(o,this._context);const s=this._padding(n);const a=this._text.getTextMetrics();const l=this._text.getFontSize()*n.y;const c=1/a.unitsPerEm*l;const u=a.ascender*c;for(let m=0;m<r.length;m++){const p=r[m];this._renderTextLine(p,o.topPadding+o.lineHeight*m+s+u,s)}}calculateFontStyles(t,e){const r=this._text.getFontFamily();const o=this._text.getFontSize()*e.y;const n=this._text.getAbsoluteTextHeight(e);const s=n*this._text.getLineHeight();const a=n*(this._text.getLineHeight()-1)/2;const l={fontFamily:r,fontSize:o,lineHeight:s,topPadding:a};if(this._textOptions.fontFamily!==r||this._textOptions.fontSize!==o||this._textOptions.lineHeight!==s){this._textOptions=l}return l}_calculateText(t,e,r){const o=this._text.getMaxWidth()*r.x;this._applyTextOptions(e,this._context);const n=new HT;let s=this._text.getText().split("\n");if(typeof o!=="undefined"){n.x=o;s=this._buildOutputLines(o)}for(let c=0;c<s.length;c++){const u=s[c];n.x=Math.max(n.x,this._context.measureText(u).width)}const{lineHeight:a}=e;n.y=s.length*a;const l=this._padding(r);n.y+=l*2;n.x+=l*2;return{dimensions:n,lines:s}}_padding(t){const e=this._text.getAbsoluteTextHeight(t);const r=.2;return e*r}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(t,e){const r=this.calculateFontStyles(t,e);const{dimensions:o}=this._calculateText(t,r,e);return o}dispose(){if(this._measurementElement){document.body.removeChild(this._measurementElement)}if(this._texture){this._texture.dispose();this._texture=null}if(this._finalTexture){this._finalTexture.dispose();this._finalTexture=null}}};WT=AU});var BU,Ph;var PU=d(()=>{j();NT();On();no();({Vector2:BU}=Y);Ph=class extends yt{constructor(t){super(t);this._textOptions={};this._createCanvas()}_createCanvas(){this._canvas=L.createCanvas();this._context=this._canvas.getContext("2d");this._textSplitter=new ix(this._context);this._finalCanvas=L.createCanvas();this._finalContext=this._finalCanvas.getContext("2d");this.updateFontVariation()}setOption(t,e,r=true,o=false){super.setOption(t,e,r,o);if(t==="fontIdentifier"&&!o){this.updateFontVariation()}}updateFontVariation(){const t=$t.getVariation(this.getFontIdentifier());if(!t){q.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`)}this.setFontVariation(t);return t}_applyTextOptions(t={},e=this._context){const{fontSize:r,fontVariation:o,lineHeight:n,textColor:s,alignment:a}={...this._options,...t};const{fontStyle:l,fontWeight:c,fontFamily:u}=o.serializeOptions();e.font=`${l} ${c} ${r}px "${u}"`;e.fillStyle=s;e.textBaseline="top";e.textAlign=a||"left"}_buildOutputLines(t){this._textSplitter.setText(this.getText());this._textSplitter.setMaxWidth(t);return this._textSplitter.getLines()}_renderTextLine(t,e){const r=this.getAlignment();const o=new BU(0,e);switch(r){case"center":o.x=this._canvas.width/2;break;case"right":o.x=this._canvas.width;break}this._context.fillText(t,o.x,o.y)}update(){const t=this.calculateFontStyles();if(t){const{dimensions:e,lines:r}=this._calculateText(t);this._dimensions=e;this._renderText(e,r,t)}}draw(t,e=0,r=0){this.update();t.drawImage(this._canvas,e,r,this._dimensions.x,this._dimensions.y)}_renderText(t,e,r){this._canvas.width=t.x;this._canvas.height=t.y;this._context=this._canvas.getContext("2d");this._applyTextOptions(r,this._context);for(let o=0;o<e.length;o++){const n=e[o];this._renderTextLine(n,r.topPadding+r.lineHeight*o)}}getFontFamily(){const t=this.getFontVariation();return t.getFontFamily()}calculateFontStyles(){const t=this.getFontFamily();const e=this.getFontSize();const r=this.getAbsoluteTextHeight();const o=r*this.getLineHeight();const n=r*(this.getLineHeight()-1)/2;const s={fontFamily:t,fontSize:e,textHeight:r,lineHeight:o,topPadding:n};this._textOptions={...s};return s}getTextMetrics(){const t=this.getFontVariation();return t.getTextMetrics()}getAbsoluteTextHeight(){const t=this.getFontSize();const e=this.getTextMetrics();if(e){const r=1/e.unitsPerEm*t;const o=e.ascender*r;const n=e.descender*r;return o+Math.abs(n)}return t*this.getLineHeight()*1.1}_calculateText(t){this._applyTextOptions(t,this._context);const e=new BU;let r=this.getText().split("\n");let o;if(typeof o!=="undefined"){e.x=o;r=this._buildOutputLines(o)}else{for(let s=0;s<r.length;s++){const a=r[s];e.x=Math.max(e.x,this._context.measureText(a).width)}}const{lineHeight:n}=t;e.y=r.length*n;return{dimensions:e,lines:r}}getDimensions(){const t=this.calculateFontStyles();const{dimensions:e}=this._calculateText(t);return e}fitMaxHeight(){this.update();const t=this.getDimensions();const e=this.getText().split("\n");const r=this.getMaxHeight()/t.y}fitMaxWidth(){const t=this.getDimensions().x;const e=this.getMaxWidth()/t;this.setFontSize(this.getFontSize()*e);this._textOptions.fontSize=this.getFontSize()}fitInFrame(t){this.setMaxWidth(t.width);this.setMaxHeight(t.height);this.fitMaxWidth();this.fitMaxHeight()}getSize(){const t=this.getDimensions();return new ye(t.x,t.y)}};Ph.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:true},maxWidth:{type:"number",default:100},maxHeight:{type:"number",default:0},alignment:{type:"string",default:"left",available:["left","center","right"]}}});var al;var rx=d(()=>{j();GT();$d();PU();_c();B_();al=class extends Vs{_calculateLayoutElements(){const t=this.getWords();const e=this._getTextFrame();const r=this.getAttributes();const o=r.getFontIdentifier();const n=this.getImageInsets();const s=new Xi({text:t.getWord(0),fontIdentifier:o});s.fitWidth(e.width);const a=new qi({text:t.getWord(0),frame:e,font:s});a.setFrame(this._getTextFrameForElement(a));const l=this.getSize();if(this.getSizeToFitContent()||l.height<=1){l.height=n.top+a.getFrame().height+n.bottom}l.height=Math.max(l.height,this.getMinimumHeight());return[a]}_getTextFrameForElement(t){const e=this.getWords();const r=e.getWord(0);const o=this.getAttributes();const n=o.getFontIdentifier();const s=this.getImageInsets();const a=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor());const l=new Ph({text:r,fontIdentifier:n,alignment:o.getAlignment(),lineHeight:1});l.fitInFrame(a);const c=l.getSize();a.height=c.height;let u=c.height*this.getRowScaleFactor();if(this.getSizeToFitContent()){u+=s.top+s.bottom}const m=this._getFrame();const p=o.getAlignment();if(this.getCenteredVertically()){a.y=m.height/2-u/2+s.top}else{switch(p){case"left":a.y=m.height-u-s.bottom;break;case"center":a.y=m.height/2-u/2+u*this.getCenterOffset();a.x=(m.width-a.width)/2;break;case"right":a.x=m.width-a.width-s.right;break;default:break}}return a}render(t){t.save();this._getLayoutElements().forEach(e=>{let{text:r,frame:o}=e.serializeOptions();const n=this.getAttributes();const s=n.getFontIdentifier();const a=new Ph({text:r,fontIdentifier:s,alignment:n.getAlignment(),lineHeight:1,textColor:n.getTextColor().toRGBA()});o=this._getTextFrameForElement(e);a.fitInFrame(o);a.draw(t,o.x,o.y)});t.restore()}};al.prototype.availableOptions={...Vs.prototype.availableOptions,centerOffset:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:false},textScaleFactor:{type:"number",default:.95},rowScaleFactor:{type:"number",default:1},minimumHeight:{type:"number",default:0},centeredVertically:{type:"boolean",default:false}}});var Zd,Te;var Tc=d(()=>{j();Jd();Ar();rx();no();ol();qd();Zd=class extends ii{constructor(...t){super(...t);this._rowType=_t.Box;this._alignmentRandomizer=new kt(0);this._isMaskedRandomizer=new kt(0);this._seedPool.push(this._alignmentRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[_t.Box.getImagePath()]}_modifiedText(t){return super._modifiedText(t).toLowerCase()}_modifiedLines(t){const e=new pi;e.set([t.reduce((r,o)=>`${r}${r===""?"":"\n"}${o.joined(1)[0]}`,"")]);return[e]}_layoutRows(t,e){const r=super._layoutRows(t,e);const o=r[0];if(o&&this.getSquareLayout()){const n=o.getSize();n.height=n.width}return r}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Zd.ValidAlignments)}_randomLayoutRow(t,e,r,o){const n=this.getAlignment();const s=this._rowType;const a=$t.getImage(s.getImagePath());o.setAlignment(n);const l=new al({words:t,width:r,attributes:o,image:a,imageInsets:s.insetsForWidth(r),capInsets:s.getCapInsets(),backgroundColor:W.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});if(this._rowType===_t.Box){l.serverImageSmoothingFix=true}const c=l.getSize();if(this.getSquareLayout()){c.height=c.width}else{c.height=Math.max(c.height,c.width*s.getMinimumHeightRatio())}return l}};Te=Zd;X(Te,"defaultFontIdentifiers",["imgly_font_lexend_bold"]);X(Te,"Alignment",{Left:"left",Center:"center",Right:"right"});X(Te,"ValidAlignments",[Zd.Alignment.Left,Zd.Alignment.Center,Zd.Alignment.Right]);X(Te,"identifier","imgly_text_design_masked");Te.prototype.availableOptions={...ii.prototype.availableOptions,fontIdentifiers:{type:"array",default:Te.defaultFontIdentifiers},squareLayout:{type:"boolean",default:true}}});var ll;var MU=d(()=>{j();Jd();Ar();Tc();ll=class extends Te{constructor(...t){super(...t);this._possibleRowTypes=[_t.Badge1,_t.Badge2,_t.Badge3,_t.Badge4];this._rowTypesRandomizer=new kt(0);this._isMaskedRandomizer=new kt(0);this._seedPool.push(this._rowTypesRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(t=>t.getImagePath())}_randomLayoutRow(t,e,r,o){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes);o.setLineSpacing(.9);const n=super._randomLayoutRow(t,e,r,o);n.set({textScaleFactor:.9});return n}};X(ll,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);X(ll,"identifier","imgly_text_design_masked_badge");X(ll,"ValidAlignments",[Te.Alignment.Center]);ll.prototype.availableOptions={...Te.prototype.availableOptions,fontIdentifiers:{type:"array",default:ll.defaultFontIdentifiers}}});var Mr;var ox=d(()=>{j();Jd();Ar();Tc();Mr=class extends Te{constructor(...t){super(...t);this._possibleRowTypes=[_t.SpeechBubble1,_t.SpeechBubble3];this._rowTypesRandomizer=new kt(0);this._isMaskedRandomizer=new kt(0);this._seedPool.push(this._rowTypesRandomizer);this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map(t=>t.getImagePath())}_rowTypes(t){return this._possibleRowTypes}_randomLayoutRow(t,e,r,o){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(t));o.setLineSpacing(.9);const n=super._randomLayoutRow(t,e,r,o);n.set({textScaleFactor:1,minimumHeight:r*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:true});return n}};X(Mr,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]);X(Mr,"identifier","imgly_text_design_masked_speech_bubble");Mr.prototype.availableOptions={...Te.prototype.availableOptions,fontIdentifiers:{type:"array",default:Mr.defaultFontIdentifiers},squareLayout:{type:"boolean",default:false},alignment:{type:"string",default:"left",available:Te.ValidAlignments}}});var kc;var LU=d(()=>{j();Jd();Tc();ox();kc=class extends Mr{constructor(...t){super(...t);this._possibleRowTypes=[_t.SpeechBubble2,_t.SpeechBubble4,_t.SpeechBubble2,_t.SpeechBubble4,_t.SpeechBubble5];this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2);this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(t){return t.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}};X(kc,"defaultFontIdentifiers",["imgly_font_permanent_marker"]);X(kc,"identifier","imgly_text_design_masked_speech_bubble_comic");kc.prototype.availableOptions={...Mr.prototype.availableOptions,fontIdentifiers:{type:"array",default:kc.defaultFontIdentifiers}}});var Ic;var zU=d(()=>{j();rx();Tc();Ic=class extends Te{_modifiedText(t){return super._modifiedText(t).toUpperCase()}_randomLayoutRow(t,e,r,o){const n=this._alignmentRandomizer.pickNext(Te.ValidAlignments);o.setAlignment(n);return new al({words:t,width:r,attributes:o,image:null,backgroundColor:W.WHITE,centerOffset:0,sizeToFitContent:true,isMasked:false,autoAdjustTextColor:false})}};X(Ic,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]);X(Ic,"identifier","imgly_text_design_multiline");Ic.prototype.availableOptions={...Te.prototype.availableOptions,fontIdentifiers:{type:"array",default:Ic.defaultFontIdentifiers}}});var Jat,nx;var UU=d(()=>{j();({Rectangle:Jat}=Y);nx=class extends yt{getContentFrame(){const t=this.getFrame().clone();const e=t.width*.1;return t.insetBy(e,e)}intersects(t){return this.getFrame().intersects(t.getFrame())}};nx.prototype.availableOptions={frame:{type:"object",default:new Jat}}});var NU,Ho;var sx=d(()=>{j();no();rl();LT();UU();({Rectangle:NU}=Y);Ho=class extends Sc{constructor(...t){super(...t);this._MAX_TRIES=1e3;this._PRECISION=1e3}render(t,e,r,o,n){const{imagePaths:s,relativeParticleSize:a}=this._options;if(s.length<=0){return}const l=e.width/e.height;const c=new NU(Math.round(r.left*this._PRECISION),Math.round(r.top*this._PRECISION*l),this._PRECISION,this._PRECISION);c.width-=c.x+Math.round(r.right*this._PRECISION);c.height-=c.y+Math.round(r.bottom*this._PRECISION*l);const u=[];let m=0;let p=0;while(m<this.getParticleCount()&&p<this._MAX_TRIES){const h=a/2;const g=Math.round(h*this._PRECISION);const _=Math.round(h*this._PRECISION*l);const x=Math.floor(this._PRECISION)-g;const b=Math.floor(this._PRECISION)-_;const w=n.nextInRange(g,x);const T=n.nextInRange(_,b);const D=new NU(w-g,T-_,2*g,2*_);if(!D.intersects(c)&&!this.hasCollision(u,D)){u.push(new nx({frame:D}));m+=1}p+=1}for(let h=0;h<u.length;h++){const g=u[h];const _=n.pickNext(s);const x=$t.getImage(_);const b=n.nextInRange(140,230)/255;const w=e.width/this._PRECISION;const T=e.height/this._PRECISION;const D=g.getContentFrame();D.x*=w;D.y*=T;D.width*=w;D.height*=T;const O=o.clone();O.a=b;Gs(t,x,D,O,"source-atop")}}hasCollision(t,e){for(let r=0;r<t.length;r++){if(e.intersects(t[r].getFrame())){return true}}return false}};Ho.prototype.availableOptions={...Sc.prototype.availableOptions,particleCount:{type:"number",default:50},relativeParticleSize:{type:"number",default:.08},imagePaths:{type:"array",default:[]}}});var Qd;var HU=d(()=>{j();sx();Qd=class extends Ho{};X(Qd,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]);Qd.prototype.availableOptions={...Ho.prototype.availableOptions,imagePaths:{type:"array",default:[...Qd.Images]},relativeParticleSize:{type:"number",default:.12}}});var tm;var WU=d(()=>{j();sx();tm=class extends Ho{};X(tm,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]);tm.prototype.availableOptions={...Ho.prototype.availableOptions,imagePaths:{type:"array",default:[...tm.Images]},relativeParticleSize:{type:"number",default:.12}}});var em;var GU=d(()=>{j();sx();em=class extends Ho{};X(em,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]);em.prototype.availableOptions={...Ho.prototype.availableOptions,imagePaths:{type:"array",default:[...em.Images]}}});var cl,xi;var ax=d(()=>{j();Ar();Br();ao();z_();U_();no();ol();qd();cl=class extends ii{constructor(...t){super(...t);this._relativeInsets=new xt(0,0,0,0);this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"];this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_cookie_regular"];this._lineCount=0;this._decorativeRowCreated=false;this._useImageRowRandomizer=new kt(0);this._rowTypeRandomizer=new kt(0);this._lineDecorativeTypeRandomizer=new kt(0);this._seedPool.push(this._useImageRowRandomizer);this._seedPool.push(this._rowTypeRandomizer);this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...cl.DecoratorImages,...cl.RowImages]}_fontForRow(t,e){const r=e.countNumberOfCharacters();let o=this.getFontIdentifiers();if(r<4){o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(n)<0)}else if(r<5){o=o.filter(n=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(n)<0)}return o[t%o.length]}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_modifiedLines(t){this._lineCount=t.length;return t}generateLayoutData(t,e){this._decorativeRowCreated=false;return super.generateLayoutData(t,e)}_randomLayoutRow(t,e,r,o){const n=o.getFontIdentifier();let s=t;switch(n){case"imgly_font_cookie_regular":s=new pi().set(t.getLowerCase());break;case"imgly_font_permanent_marker":s=new pi().set(t.getUpperCase());break;default:break}const a=this.getDecorativeRowsInTheMiddleOnly()&&(e===0||e===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||a){return new _e({words:s,width:r,attributes:o})}this._decorativeRowCreated=true;const[l,c]=this._randomDecoratorImages();return new No({words:t,width:r,attributes:o,leftImage:l,rightImage:c})}_layoutRows(t,e){const r=super._layoutRows(t,e);if(!this.getDecorationsVisible()){return r}const o=.0625*e;const n=new oi({width:e,height:o,image:$t.getImage(this._rowTypeRandomizer.pickNext(cl.RowImages))}).layout();const s=new oi({width:e,height:o,image:$t.getImage(this._rowTypeRandomizer.pickNext(cl.RowImages))}).layout();return[n,...r,s]}_randomDecoratorImages(){if(this._lineDecorativeTypeRandomizer.nextInRange(0,1)){return cl.DecoratorImages.slice(0,2).map(t=>$t.getImage(t))}return cl.DecoratorImages.slice(2).map(t=>$t.getImage(t))}};xi=cl;X(xi,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular","imgly_font_montserrat_light"]);X(xi,"identifier","imgly_text_design_sunshine");X(xi,"RowImages",[oi.RowImages.decorative1,oi.RowImages.decorative2,oi.RowImages.decorative3,oi.RowImages.decorative4]);X(xi,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]);xi.prototype.availableOptions={...ii.prototype.availableOptions,fontIdentifiers:{type:"array",default:xi.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3*4},decorationsVisible:{type:"boolean",default:true},decorativeRowsInTheMiddleOnly:{type:"boolean",default:false}}});var ul,js;var VU=d(()=>{j();HU();WU();GU();Ar();Br();no();ax();ul=class extends xi{constructor(...t){super(...t);this._relativeInsets=new xt(.3,.3,.3,.3);this._backgroundRandomizer=new kt(0);this._decoTypeRandomizer=new kt(0);this._seedPool.push(this._backgroundRandomizer);this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...xi.RowImages,...L.Array.flatten(ul.Backgrounds.map(t=>t.getImagePaths())),...ul.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(ul.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return ul.DecoratorImages.slice(0,2).map(t=>$t.getImage(t));case 1:case 2:return ul.DecoratorImages.slice(2).map(t=>$t.getImage(t));default:q.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range.");return ul.DecoratorImages.slice(2).map(t=>$t.getImage(t))}}};js=ul;X(js,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular","imgly_font_montserrat_light"]);X(js,"identifier","imgly_text_design_particles");X(js,"Backgrounds",[new Qd,new tm,new em]);X(js,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]);js.prototype.availableOptions={...xi.prototype.availableOptions,fontIdentifiers:{type:"array",default:js.defaultFontIdentifiers},decorationsVisible:{type:"boolean",default:false},decorativeRowsInTheMiddleOnly:{type:"boolean",default:true}}});var Dc;var jU=d(()=>{j();Ar();Br();BT();qd();Dc=class extends ii{constructor(...t){super(...t);this._relativeInsets=new xt(.1,0,0,0);this._rowTypeRandomizer=new kt(0);this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_randomLayoutRow(t,e,r,o){const n=super._randomLayoutRow(t,e,r,o);n.setShearingAngle(this.getShearingAngle());return n}_layoutRows(t,e){const r=super._layoutRows(t,e);const o=L.values(lr.FormType);const n=30;const s=new lr({width:e,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout();const a=new lr({width:e,height:n,type:this._rowTypeRandomizer.pickNext(o),shearingAngle:this.getShearingAngle()}).layout();return[s,...r,a]}};X(Dc,"defaultFontIdentifiers",["imgly_font_outfit_bold"]);X(Dc,"identifier","imgly_text_design_rotated");Dc.prototype.availableOptions={...ii.prototype.availableOptions,fontIdentifiers:{type:"array",default:Dc.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},shearingAngle:{type:"number",default:-.1}}});var lx;var $U=d(()=>{Br();U_();no();ax();lx=class extends xi{constructor(...t){super(...t);this._relativeInsets=new xt(0,.3,0,.3)}_layoutRows(t,e){const r=super._layoutRows(t,e);if(!this.getDecorationsVisible()){return r}const o=25;const n=new oi({width:e,height:o,image:$t.getImage(this._rowTypeRandomizer.pickNext(xi.RowImages))}).layout();const s=new oi({width:e,height:o,image:$t.getImage(this._rowTypeRandomizer.pickNext(xi.RowImages))}).layout();return[n,...r,s]}};X(lx,"identifier","imgly_text_design_sunshine-v3_1_0")});var Ec;var KU=d(()=>{j();Jd();Tc();ox();Ec=class extends Mr{constructor(...t){super(...t);this._possibleRowTypes=[_t.Watercolor1,_t.Watercolor2,_t.Watercolor3]}};X(Ec,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_cookie_regular","imgly_font_cookie_regular"]);X(Ec,"identifier","imgly_text_design_watercolor");Ec.prototype.availableOptions={...Mr.prototype.availableOptions,fontIdentifiers:{type:"array",default:Ec.defaultFontIdentifiers},alignment:{type:"string",default:Te.Alignment.Center,available:Te.ValidAlignments}}});var Zat,cx,VT;var XU=d(()=>{j();Ar();B_();rx();On();rl();({Rectangle:Zat}=Y);cx=1e3;VT=class{constructor(){this._layoutData=null;this._layout=null;this._text="";this._seed=0;this._debugMode=false;this.randomizer=new kt}createLayout(t,e,r){this._layout=t;this._text=e;this._seed=r;t.seed(r);this._layoutData=t.generateLayoutData(e,cx)}calculateAspect(){if(!this._layoutData){q.warn("TextDesignRenderer#calculateAspect: No layout data");return 1}return this._layoutData.getSize().aspect()}draw(t,e,r,o){const n=this._layoutData;if(this._layoutData){const s=new ye(cx,cx/e.aspect());const a=e.width/cx;const l=n.getRelativeInsets().clone().scale(s.width);const c=n.getRelativeLineSpacing()*s.width;let u=l.top;t.save();this.randomizer.seed(this._seed);const m=n.getBackground();if(m){m.render(t,e,n.getRelativeInsets(),o?W.WHITE:r,this.randomizer)}t.scale(a,a);n.getRows().forEach(p=>{t.save();const h=p.getAttributes();t.transform(1,p.getShearingAngle(),0,1,l.left,u);h.setTextColor(o?W.WHITE:r.clone());h.setTintColor(o?W.WHITE:r.clone());if(p instanceof Vs||p instanceof al){p.setBackgroundColor(o?W.WHITE:r.clone());p.setIsUsedInInvertedLayout(o)}if(this._debugMode){p._debugMode=true}p.willRender(t);p.render(t);p.didRender(t);if(this._debugMode){const g=p._getFrame();const _=p._getTextFrame();Xd(t,g,W.GREEN);Xd(t,_,W.BLUE);p._getLayoutElements().forEach(x=>{const b=x.getFrame();const w=p._getTextFrameForElement(x);Xd(t,b,new W(1,1,0));Xd(t,w,new W(0,1,1))})}u+=p.getSize().height+c;t.restore()});if(this._debugMode){Xd(t,new Zat(0,0,s.width,s.height),W.RED)}t.restore()}}}});var dl,im,ux;var qU=d(()=>{j();jd();Yd();Q9();PT();tU();MT();eU();zT();rU();Tc();MU();ox();LU();zU();VU();jU();ax();$U();KU();Ar();On();no();XU();({Vector2:dl}=Y);im=class extends Fn{constructor(t,e){super(t,e);this._isDisposed=false;this._renderer=new VT;this._canvas=L.createCanvas();this._context=this._canvas.getContext("2d");this._texture=M.Texture.fromCanvas(this._canvas);this._sprite.setTexture(this._texture);this._aspect=1;this._isLayoutDirty=true;if(this.getSeed()<0){this.setSeed(kt.TimeSeed())}}seed(t){this.setSeed(t||kt.TimeSeed());this._isLayoutDirty=true}_updateLayout(){const t=this.getLayout();if(!t){return null}this._renderer.createLayout(t,this.getText(),this.getSeed());this._aspect=this._renderer.calculateAspect();this._isLayoutDirty=false;return true}applyTransform(t){super.applyTransform(t);const e={};if(this._options.dimensions){e.width=t.applyToRelativeSize(this.getWidth())}this.set(e,false)}applyFlip(t){super.applyFlip(t);let{rotation:e}=this._options;switch(t){case"horizontal":e+=(Math.PI-e)*2;this.setRotation(e);break;case"vertical":e+=(Math.PI/2-e)*2;this.setRotation(e);break}}update(t,e){const r=this._isLayoutDirty;if(this._isDisposed||r&&!this._updateLayout()){return}const o=this.getWidth()*e.min()/t.getTextureScale();const n=o/this._aspect;const s=new dl(o,n);const a=new dl(Math.round(o*2),Math.round(n*2)).clamp(new dl(1,1),new dl(Infinity,Infinity));const l=t.getRenderer();const c=l.getMaxDimensions()||Infinity;if(a.x>c){a.x=c;a.y=Math.round(a.x/this._aspect)}if(a.y>c){a.y=c;a.x=Math.round(a.y*this._aspect)}const u=L.ensureCanvasDimensions(this._canvas,a);if(r||u){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);this._renderer.draw(this._context,new ye(a.x,a.y),this.getColor(),this.getInverted());this.setDimensions(s);this._texture.getBaseTexture().update();if(l.isOfType("webgl")){l.updateTexture(this._texture.getBaseTexture())}}super.update(t,e);this._applyFlip()}_applyFlip(){const t=this._sprite.getScale();const{flipHorizontally:e,flipVertically:r}=this._options;if(e&&t.x>0||!e&&t.x<0){t.x*=-1}if(r&&t.y>0||!r&&t.y<0){t.y*=-1}this._sprite.setScale(t)}_optionEquals(t,e){if(t==="layout"){const{layout:r}=this._options;if(!r&&e||!e&&r){return false}if(!e.constructor||!r.constructor){return false}if(r.constructor.identifier!==e.constructor.identifier){return false}return true}return super._optionEquals(t,e)}serializeOptions(t,e=false){if(t&&this.getPadding()<0){const o=t.indexOf("padding");if(o>-1){t.splice(o,1)}}const r=super.serializeOptions(t,e);if(!t)r.type="textdesign";return r}_getTexture(){return this._texture}canBeFlippedHorizontally(){return false}canBeDuplicated(){return true}canMaskCanvas(){return true}canAdjustPadding(){return true}dispose(){this._isDisposed=true;this._texture.dispose();this._sprite.dispose()}};im.Layouts={TextDesignBlocks:ri,TextDesignBlocksCondensed:xc,TextDesignBlocksLight:An,TextDesignCelebrate:Pr,TextDesignCelebrateSimple:Cc,TextDesignEqualWidth:Pn,TextDesignEqualWidthFat:wc,TextDesignMasked:Te,TextDesignMaskedBadge:ll,TextDesignMaskedSpeechBubble:Mr,TextDesignMaskedSpeechBubbleComic:kc,TextDesignMultiline:Ic,TextDesignWatercolor:Ec,TextDesignSunshine:xi,TextDesignParticles:js,TextDesignRotated:Dc};im.LegacyLayouts={TextDesignBlocksLightV310:vc,TextDesignSunshineV310:lx};im.AssetManager=$t;im.prototype.availableOptions={id:{type:"string",default:()=>L.getUUID()},position:{type:"vector2",default:new dl(.5,.5)},dimensions:{type:"vector2",default:dl.NULL},anchor:{type:"vector2",default:new dl(0,0)},pivot:{type:"vector2",default:new dl(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false},layout:{type:"object",default:null,setter(i){this._isLayoutDirty=true;return i}},text:{type:"string",default:"",setter(i){this._isLayoutDirty=true;return i}},color:{type:"color",default:W.BLACK,setter(i){this._isLayoutDirty=true;return i}},padding:{type:"number",default:.01,minValue:.01},width:{type:"number",default:.8},inverted:{type:"boolean",default:false,setter(i){this._isLayoutDirty=true;return i}},seed:{type:"number",default:-1}};ux=im});var jT,dx,mx;var YU=d(()=>{j();jd();GT();({Vector2:jT}=Y);dx=class extends Fn{constructor(...t){super(...t);this._textRenderer=new WT(this,this._operation);this._textRenderer.rotation=this.getRotation();this._sprite.setTexture(this._textRenderer.getFinalTexture());this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(t,e=false){const r=super.serializeOptions(t,e);if(!t)r.type="text";return r}getDOMStyle(t,e){const r=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:`${r}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:`${this.getAbsoluteTextHeight(e)*this.getLineHeight()}px`,color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(t){const e=this.getFontSize()*t.y;const r=this.getTextMetrics();if(r){const o=1/r.unitsPerEm*e;const n=r.ascender*o;const s=r.descender*o;return n+Math.abs(s)}return e*this.getLineHeight()*1.1}getDimensions(t,e){return this._textRenderer.getDimensions(t,e)}applyFlip(t){super.applyFlip(t);let{rotation:e}=this._options;switch(t){case"horizontal":e+=(Math.PI-e)*2;this.setRotation(e);break;case"vertical":e+=(Math.PI/2-e)*2;this.setRotation(e);break}}applyTransform(t){super.applyTransform(t);this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},false)}applyRotation(t){super.applyRotation(t);const e=(t+360)%360;const r=this._operation.getInputDimensions();if(e===90||e===270){this.setMaxWidth(this.getMaxWidth()/r.x*r.y);this.setFontSize(this.getFontSize()/r.y*r.x)}}setOption(t,e){const{flipHorizontally:r,flipVertically:o}=this._options;if(t==="rotation"){let n=e;if(r){n=Math.PI*2-n}if(o){n=Math.PI*2-n}this._options.rotation=n;if(this._textRenderer){this._textRenderer.rotation=n}this._rotation=n;this.emit("update");return}super.setOption(t,e)}getOption(t){if(t==="rotation"){return this._rotation}return super.getOption(t)}getHitTestDisplayObject(){return this._hitTestSprite}update(t,e){this._sprite.setVisible(this._options.visible);if(!this._options.visible)return;this._textRenderer.update(t,e);const r=this._textRenderer.getFinalTexture();const o=r.getBaseTexture();o.update();const n=t.getRenderer();if(n.isOfType("webgl")){n.updateTexture(r.getBaseTexture())}super.update(t,e);this._sprite.setRotation(0);this._textRenderer.getTexture().getBaseTexture().update();this._hitTestSprite.setRotation(this._rotation);this._hitTestSprite.updateTransform();this._applyFlip()}_applyFlip(){const t=this._sprite.getScale();const{flipHorizontally:e,flipVertically:r}=this._options;if(e&&t.x>0||!e&&t.x<0){t.x*=-1;this.setRotation(this._rotation)}if(r&&t.y>0||!r&&t.y<0){t.y*=-1;this.setRotation(this._rotation)}this._sprite.setScale(t)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose();this._textRenderer.dispose();this._hitTestSprite.dispose();this._sprite.dispose()}canBeFlippedHorizontally(){return false}canAdjustPadding(){return false}};dx.prototype.availableOptions={id:{type:"string",default:()=>L.getUUID()},fontSize:{type:"number",default:.1},characterSpacing:{type:"number",default:0},lineHeight:{type:"number",default:1.1},fontIdentifier:{type:"string"},fontFamily:{type:"string",default:"Times New Roman"},fontWeight:{type:"*",default:"normal"},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},outlineWidth:{type:"number",default:0},outlineColor:{type:"color",default:W.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},verticalAlignment:{type:"string",default:"top",available:["top","center","bottom"]},color:{type:"color",default:new W(1,0,0,1)},backgroundColor:{type:"color",default:W.TRANSPARENT},position:{type:"vector2",default:new jT(.5,.5)},anchor:{type:"vector2",default:new jT(0,0)},pivot:{type:"vector2",default:new jT(.5,.5)},rotation:{type:"number",default:0},text:{type:"string",required:true},maxWidth:{type:"number",default:.5},maxHeight:{type:"number",default:0},visible:{type:"boolean",default:true},flipHorizontally:{type:"boolean",default:false},flipVertically:{type:"boolean",default:false}};dx.type="text";mx=dx});var $T,$s,JU;var ZU=d(()=>{j();jd();FT();$9();qU();YU();({Vector2:$T}=Y);$s=class extends Mt{constructor(...t){super(...t);this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling);this._onSpriteUpdate=this._onSpriteUpdate.bind(this);this._maskCanvas=L.createCanvas();const e=this._options.sprites.slice();e.forEach(r=>{this.removeSprite(r);this.addSprite(r)})}getSpritesOfType(t){return this._options.sprites.filter(e=>e instanceof t)}rotate(t){this._options.sprites.forEach(e=>{e.applyRotation(t)})}flip(t){this._options.sprites.forEach(e=>{e.applyFlip(t)})}_onSpriteUpdate(t,e){this.emit("update",this);this.setDirty(true)}_applyRotation(t,e){this._options.sprites.forEach(r=>r.applyRotation(t,e))}transform(t){this._options.sprites.forEach(e=>e.applyTransform(t))}scale(t){this._options.sprites.forEach(e=>e.applyScale(t))}serializeOption(t,e=false){if(t==="sprites"){return this._options.sprites.map(r=>{return r.serializeOptions(void 0,e)})}return super.serializeOption(t,e)}createSticker(t){return new O_(this,t)}createText(t){return new mx(this,t)}createBrush(t){return new bc(this,t)}createTextDesign(t){return new ux(this,t)}addSprite(t){this._options.sprites.push(t);const e=this.getSmoothDownscaling();if(t.setSmoothDownscaling)t.setSmoothDownscaling(e);this._container.addChild(t.getDisplayObject());this.setDirty(true);t.on("update",this._onSpriteUpdate);this.emit("update",this,this._options.sprites)}removeSprite(t){const{sprites:e}=this._options;const r=e.indexOf(t);if(r!==-1){t.off("update",this._onSpriteUpdate);this._container.removeChild(t.getDisplayObject());e.splice(r,1);this.setDirty(true);return true}return false}_getOrientatedStageSize(){const t=this._sdk.getSprite().getTexture().getFrame();const e=this._sdk.getOperationsStack().getByIdentifier("orientation");if(e){const o=e?e.getRotation():0;const n=o===270||o===90;return n?new $T(t.height,t.width):new $T(t.width,t.height)}const r=this._sdk.getOperationsStack().getByIdentifier("output");if(r){return r.getOutputResolution()}return new $T(t.width,t.height)}_render(t){const e=this._container;const{sprites:r}=this._options;const o=t.getDimensions().clone().floor();let n=new M.Container;n.addChild(this._sprite);return Promise.all(r.map(s=>s.validateSettings())).then(()=>{r.forEach(s=>s.update(this._sdk,o))}).then(()=>{this._renderTexture.clear();r.forEach(s=>{if(s.getInverted&&s.getInverted()){this._renderTexture.render(n);this._renderTexture.render(this._renderMaskedSprite(s.getDisplayObject(),s.getColor?s.getColor():W.WHITE,s.getPadding?s.getPadding():-1));n=new M.Container}else{n.addChild(s.getDisplayObject())}});this._renderTexture.render(n);e.addChild(this._sprite);r.forEach(s=>e.addChild(s.getDisplayObject()))})}_renderMaskedSprite(t,e,r){const o=this._maskCanvas;const n=t.getWorldTransform();const s=this._getOrientatedStageSize();L.ensureCanvasDimensions(o,s);const a=o.getContext("2d");a.clearRect(0,0,o.width,o.height);a.save();a.fillStyle=e.toRGBA();if(r<0){a.fillRect(0,0,s.x,s.y)}else{const u=Math.abs(t.getWidth()/t.getScale().x);const m=Math.abs(t.getHeight()/t.getScale().y);const p=u*r;a.transform(n.a,n.b,n.c,n.d,n.tx,n.ty);a.fillRect(-p,-p,u+p*2,m+p*2)}a.restore();a.save();a.globalCompositeOperation="destination-out";t._renderCanvas({getCurrentRenderTarget:()=>{return{getPixelRatio:()=>1}},beforeDraw:u=>{const m=t.getWidth();const p=t.getHeight();const h=t.getScale();const g=h.x<0;const _=h.y<0;u.translate(m,p);u.scale(g?-1:1,_?-1:1);u.translate(-m,-p)},getContext:()=>a});a.restore();const l=new M.Container;const c=new M.Sprite(M.Texture.fromCanvas(o));l.addChild(c);return l}takeSpriteToFront(t){const{sprites:e}=this._options;const r=e.indexOf(t);if(r===-1)return;L.moveArrayItem(e,r,e.length-1);const o=t.getDisplayObject();this._container.removeChild(o);this._container.addChild(o);this.setDirty(true)}getSpritesAtPosition(t,e){const r=[];this._options.sprites.forEach(u=>u.update(this._sdk,e));const o=this._sdk.getSprite();const n=o.getWorldTransform().applyInverseToVector(t);const{width:s,height:a}=o.getTexture().getFrame();const l=o.getAnchor().clone().multiply(-s,-a);n.subtract(l);const c=this._options.sprites.slice(0).reverse();for(let u=0,m=c.length;u<m;u++){const p=c[u];if(p.getHitTestDisplayObject().isAtPosition(n)){r.push(p)}}return r}setDirtyForRenderer(t,e,r){super.setDirtyForRenderer(t,e,r);this._options.sprites.forEach(o=>{o.setDirtyForRenderer(t,e,r)})}dispose(){super.dispose();this._options.sprites.forEach(t=>{t.dispose()})}};$s.StickerSprite=O_;$s.TextSprite=mx;$s.BrushSprite=bc;$s.TextDesignSprite=ux;$s.identifier="sprite";$s.prototype.availableOptions={sprites:{type:"array",default:[],setter(i,t){i=i.map((e,r)=>{if(e instanceof Fn){return e}const o={...e};delete o.type;switch(e.type){case"text":return new mx(this,o);case"sticker":return new O_(this,o);case"brush":return new bc(this,o);case"textdesign":return new ux(this,o);default:{q.error(this.constructor.name,`Invalid sprite type: ${e.type}`);return null}}});if(!t){if(this._options.sprites){const e=this._options.sprites.slice();e.forEach(r=>{r.dispose();this.removeSprite(r)})}i.forEach(e=>{this.addSprite(e)})}return i}},smoothDownscaling:{type:"boolean",default:false}};ht.Operations.SpriteOperation=$s;JU=$s});var QU,t7,e7;var i7=d(()=>{j();({Vector2:QU}=Y);t7=class{constructor(t,e){this._options=e;this._oldOptions={start:t.getStart().clone(),end:t.getEnd().clone(),rotation:t.getRotation(),textureScale:t.getTextureScale()};this._inputDimensions=t.getInputDimensions(false);this._rotationDelta=e.rotation-t.getRotation();this._deltaCos=Math.cos(this._rotationDelta);this._deltaSin=Math.sin(this._rotationDelta);this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions);this._newAbsoluteSize=e.end.clone().subtract(e.start).multiply(this._inputDimensions);this._absoluteStartDiff=this._oldOptions.start.clone().subtract(e.start).multiply(this._inputDimensions);this._scaleRatio=t.calculateScale(e.rotation)/t.calculateScale();this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize);this._textureScaleFactor=this._options.textureScale/t.getTextureScale()}applyToRelativePoint(t){const e=this._oldOptions.start;const r=this._oldOptions.end;const o=e.clone().add(r.clone().subtract(e).divide(2));const n=o.multiply(this._inputDimensions);const s=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2));const a=n.clone().add(s);const l=a.clone().subtract(this._inputDimensions.clone().divide(2));const c=new QU(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos);const u=this._inputDimensions.clone().divide(2).add(c);const m=this._options.start.clone().multiply(this._inputDimensions);return u.clone().subtract(m).divide(this._newAbsoluteSize)}applyToRelativeSize(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(t){t=t.clone().multiply(this._scaleRatio);if(this._options.textureScale){t.multiply(this._textureScaleFactor)}return t}scaleSize(t,e="y"){return t/this._sizeFactor[e]}applyToRotation(t){return(t+this._rotationDelta)%(Math.PI*2)}invert(){const t=this._options.start.clone();const e=this._options.end.clone();const r=this._inputDimensions;const o=-this._rotationDelta;const n=Math.cos(o);const s=Math.sin(o);const a=this._oldAbsoluteSize;const l=this._newAbsoluteSize;const c=t.clone().subtract(e).multiply(r);const u=1/this._scaleRatio;const m=new QU(1/this._sizeFactor.x,1/this._sizeFactor.y);const p=1/this._textureScaleFactor;const h=this._oldOptions;this._oldOptions=this._options;this._options=h;this._inputDimensions=r;this._rotationDelta=o;this._deltaCos=n;this._deltaSin=s;this._oldAbsoluteSize=l;this._newAbsoluteSize=a;this._absoluteStartDiff=c;this._scaleRatio=u;this._sizeFactor=m;this._textureScaleFactor=p;return this}};e7=t7});var KT,rm,r7;var o7=d(()=>{j();i7();({Vector2:KT}=Y);rm=class extends Mt{_render(t){this._sprite.setRotation(0);const e=t.getDimensions();const{start:r,end:o,rotation:n,textureScale:s}=this._options;const a=o.clone().subtract(r);const l=a.clone().divide(2);const c=r.clone().add(l);const u=this.calculateScale();const m=u*s;const p=e.clone().multiply(m).multiply(l);this._sprite.setAnchor(c);this._sprite.setRotation(n);this._sprite.setScale(m,m);this._sprite.setPosition(p);this._renderTexture.render(this._container);return Promise.resolve()}calculateScale(t=this._options.rotation){const e=this.getInputDimensions(false);const r=new KT(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t)));const o=e.clone().subtract(r.clone()).divide(2).abs();let n=1;if(o.y>o.x){n=o.y*2/e.y+1}else{n=o.x*2/e.x+1}return n}getNewDimensions(t){const{start:e,end:r,textureScale:o}=this._options;const n=this.calculateScale();const s=t.clone().multiply(o*n).multiply(r.clone().subtract(e));return s.round()}flip(t){const{start:e,end:r}=this._options;const o=e.clone();if(t==="horizontal"){e.set(1-r.x,e.y);r.set(1-o.x,r.y)}else if(t==="vertical"){e.set(e.x,1-r.y);r.set(r.x,1-o.y)}}rotate(t){const{start:e,end:r}=this._options;const o=(t+360)%360;const n=Math.floor(o/90);for(let s=0;s<n;s++){const a=e.clone();e.set(1-r.y,a.x);r.set(1-a.y,r.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled();this.setEnabled(true)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,true)}};rm.identifier="transform";rm.prototype.availableOptions={start:{type:"vector2",default:new KT(0,0)},end:{type:"vector2",default:new KT(1,1)},textureScale:{type:"number",default:1},rotation:{type:"number",default:0}};rm.TransformChange=e7;ht.Operations.TransformOperation=rm;r7=rm});var Mh,n7;var s7=d(()=>{ce();j();mc();Mh=class extends Mt{constructor(...t){super(...t);this._watermarkImage=null;this._watermarkTexture=null;this._loadWatermarkImage=()=>{if(!this._watermarkImage){if(!(this._options.watermarkURI instanceof window.Image)){const t={value:this._options.crossOrigin,cors:true};return Hi.loadImage(this._options.watermarkURI,t).then(e=>{this._watermarkImage=e})}this._watermarkImage=this._options.watermarkURI}return Promise.resolve()};this._setWatermarkalignment=(t,e)=>{const r=Math.min(e.x,e.y)*L.clamp(this._options.inset,0,1);switch(this._options.alignment){case"center":this._watermarkSprite.setPosition(new rt(e.x-t.x,e.y-t.y).divide(2));break;case"top-left":this._watermarkSprite.setPosition(new rt(r,r));break;case"top-right":this._watermarkSprite.setPosition(new rt(e.x-t.x-r,r));break;case"bottom-left":this._watermarkSprite.setPosition(new rt(r,e.y-t.y-r));break;case"bottom-right":this._watermarkSprite.setPosition(new rt(e.x-t.x-r,e.y-t.y-r));break;default:this._watermarkSprite.setPosition(new rt(0,0));break}};this._watermarkSprite=new M.Sprite;this._watermarkSprite.setAnchor(0,0);this._container.addChild(this._watermarkSprite)}_render(t){const{alpha:e,size:r}=this._options;return this._loadWatermarkImage().then(()=>{if(this._watermarkImage){if(!this._watermarkTexture){this._watermarkTexture=M.Texture.fromImage(this._watermarkImage);this._watermarkSprite.setTexture(this._watermarkTexture)}const o=t.getDimensions();const{width:n,height:s}=this._watermarkImage;const a=L.resizeVectorToFit(new rt(n,s),o.clone().multiply(L.clamp(r,0,1)));this._setWatermarkalignment(a,o);this._watermarkSprite.setWidth(a.x);this._watermarkSprite.setHeight(a.y);this._watermarkSprite.setAlpha(e);if(this._renderTexture){this._renderTexture.render(this._container)}}return Promise.resolve()})}dispose(){super.dispose();this._watermarkSprite.dispose()}};Mh.identifier="watermark";Mh.prototype.availableOptions={watermarkURI:{type:"string",required:true},alignment:{type:"string",default:"top-right"},inset:{type:"number",default:"0.05"},size:{type:"number",default:"0.2"},alpha:{type:"number",default:1},crossOrigin:{type:"string",default:"anonymous"}};ht.Operations.WatermarkOperation=Mh;n7=Mh});var Qat;var a7=d(()=>{j();Dz();Az();Q6();e9();r9();u9();f9();x9();C9();w9();I9();O9();j9();ZU();o7();s7();Qat=[Iz,Oz,Z6,i9,c9,h9,_9,v9,k9,R9,V9,JU,r7,n7,S9,t9];ht.AllOperations=Qat});var Mn=d(()=>{a7();_h();_h()});var l7;var c7=d(()=>{l7=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]},{fontFamily:"Lexend",variations:[{identifier:"imgly_font_lexend_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_lexend_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Outfit",variations:[{identifier:"imgly_font_outfit_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_outfit_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}]}]});var u7;var d7=d(()=>{u7=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:true,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:true,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:true,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Allison",variations:[{identifier:"imgly_font_allison_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_allison_regular.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:890,descender:-380}}]},{fontFamily:"Cookie",variations:[{identifier:"imgly_font_cookie_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_cookie_regular.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:789,descender:-320}}]},{fontFamily:"Lexend",variations:[{identifier:"imgly_font_lexend_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_lexend_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Outfit",variations:[{identifier:"imgly_font_outfit_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_outfit_bold.ttf",default:true,textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-260}}]}]});var m7;var p7=d(()=>{m7=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:true},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:false,lockDimensions:true},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]});var h7,f7;var g7=d(()=>{Mn();c7();d7();p7();h7=[];if(typeof ht.Operations.SpriteOperation!=="undefined"){h7.push(ht.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush)}f7={TRANSFORM_RATIO_CATEGORIES:m7,FONTS:l7,TEXT_DESIGN_FONTS:u7,BRUSHES:h7}});var tlt,b7;var y7=d(()=>{mh();tlt={...Rd,LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"};b7=tlt});var me;var _7=d(()=>{g7();y7();me={EVENTS:b7,DEFAULTS:f7}});function elt(){const{userAgent:i,appVersion:t}=navigator;if(t.indexOf("MSIE")!==-1){return t.match(/MSIE\s+?([0-9]+)/i)[1]}if(i.indexOf("Trident")!==-1){return i.match(/rv:([0-9]+)/i)[1]}return false}var x7;var v7=d(()=>{x7={getIEVersion:elt}});var ilt,px,rlt,Yi;var C7=d(()=>{Mn();vd();Lo();wo();v7();ilt=ht.Utils;({Vector2:px}=ht.Math);rlt={getInnerDimensionsForElement(i){const t=new px(i.offsetWidth,i.offsetHeight);const e=window.getComputedStyle(i,null);t.x-=parseInt(e.getPropertyValue("padding-left"),10);t.x-=parseInt(e.getPropertyValue("padding-right"),10);t.y-=parseInt(e.getPropertyValue("padding-top"),10);t.y-=parseInt(e.getPropertyValue("padding-bottom"),10);return t},getEventPosition(i){let t=i.clientX;let e=i.clientY;if(i.type.indexOf("touch")!==-1){if(!i.touches.length)return;t=i.touches[0].clientX;e=i.touches[0].clientY}return new px(t,e)},createTransparentPatternCanvas(){const i=document.createElement("canvas");const t=i.getContext("2d");i.width=10;i.height=10;t.fillStyle="white";t.fillRect(0,0,i.width,i.height);t.fillStyle="#cccccc";t.fillRect(0,0,i.width/2,i.height/2);t.fillRect(i.width/2,i.height/2,i.width,i.height);return i},supportsMSBlob(){const i=document.createElement("canvas");const t=typeof i.msToBlob!=="undefined";jt(i);return t},translate(i,t,e={}){let r=this.fetch(i,t);if(!r){q.info("Utils#translate",`Unable to translate \`${t}\``);return null}for(const o in e){r=r.replace(`\${${o}}`,e[o])}return r},fetch(i,t,e){t=t.replace(/\[(\w+)]/g,".$1");t=t.replace(/^\./,"");const r=t.split(".");for(let o=0;o<r.length;o++){const n=r[o];i=i[n];if(!i){break}}if(typeof i==="undefined"){return false}return i},isMobile(){const i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4))},select(i,t,e=null){if(!e)e=o=>o;const r=[];t.forEach(o=>{i.forEach(n=>{const s=e(n);if(s===o){r.push(n)}})});return r},getJSONP(i){const t=new io(i);return t.load()},cloneCategories(i,t){return i.map(e=>{e=ilt.clone(e);e[t]=e[t].slice(0);return e})},mergeCategories(i,t,e){i=this.cloneCategories(i,e);let r=null;t.forEach(o=>{i.forEach(n=>{if(o.identifier===n.identifier){r=n}});if(!r){i.push(o)}else{r[e]=r[e].concat(o[e])}});return i},wrapFiltersInCategories(i,t){return i.map(e=>{let r=e;if(!(t in r)){r={identifier:`imgly_filters_wrapped-${e.identifier}`,displayFlat:true,[t]:[e]}}return r})},getStyleObject(i){const t=window.getComputedStyle(i);const e={};for(const r in t){const o=t.getPropertyValue(r);const n=r.replace(/-([a-z])/g,(s,a)=>a.toUpperCase());if(o!==""){e[n]=o}}return e},styleElement(i,t){for(const e in t){i.style[e]=t[e]}},debounce(i,t,e){let r;return function(...o){const n=()=>{r=null;if(!e)i.apply(this,o)};const s=e&&!r;clearTimeout(r);r=setTimeout(n,t);if(s)i.apply(this,o)}},getScrollbarWidth(){const i=document.createElement("div");i.style.visibility="hidden";i.style.width="100px";i.style.msOverflowStyle="scrollbar";document.body.appendChild(i);const t=i.offsetWidth;i.style.overflow="scroll";const e=document.createElement("div");e.style.width="100%";i.appendChild(e);const r=e.offsetWidth;i.parentNode.removeChild(i);return t-r},findIntegerFraction(i,t=100){let e=Number.MAX_VALUE;let r=0;let o=0;let n=1;let s=1;for(let a=0;a<t;a++){const l=n/s-i;if(l<0){n++}else if(l>0){s++}else{return new px(n,s)}const c=Math.abs(n/s-i);if(c<e){e=c;r=n;o=s}}return new px(r,o)},toFixed(i,t=2){const e=i.toFixed(t);return parseFloat(e)},capitalize(i){return i.charAt(0).toUpperCase()+i.slice(1)},flipObject(i){const t={};for(const e in i){t[i[e]]=e}return t},Browser:x7};Yi=rlt});var XT,zt,u9t,Lh,d9t,m9t,Yt,ml,qT,nt,p9t,It,h9t,f9t,g9t;var ce=d(()=>{Mn();mh();yd();Lo();_7();C7();({Base64:XT}=ht);({Color:zt}=ht);({ColorMatrix:u9t}=ht.Math);({EventEmitter:Lh}=ht);({EXIF:d9t}=ht);({OptionType:m9t}=ht);Yt=ht.Utils;({RenderType:ml}=ht);({ImageFormat:qT}=ht);nt=ht;({UniformType:p9t}=ht);({Vector2:It}=ht.Math);({Rectangle:h9t}=ht.Math);({Range:f9t}=ht.Math);g9t=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oh()});var om,Fc;var YT=d(()=>{ce();om=class{constructor(t,e,r=false){this._ui=t;this._options=e;this._categoriesById={};this._filtersByIdentifier={identity:nt.Operations.FilterOperation.Filters.IdentityFilter};this._categories=Yi.wrapFiltersInCategories(Ls.DEFAULTS.FILTERS.slice(0),om.CATEGORY_ITEMS_PROPERTY);this._customAssetsAllowed=r||t.getEditor().getSDK()._l.areCustomAssetsAllowed();if(this._customAssetsAllowed&&this._options.categories){this._options.categories=Yi.wrapFiltersInCategories(this._options.categories,om.CATEGORY_ITEMS_PROPERTY)}this._initCategories()}instantiateFilterWithIdentifier(t){const e={value:this._ui._options.crossOrigin,cors:true};const r=this.getFilterByIdentifier(t);if(!r){return Promise.reject(new Error(`Unknown filter with identifier \`${t}\`!`))}if(!(r.prototype instanceof nt.Operations.FilterOperation.Filter)){const{lutImage:o,resolution:n,horizontalTileCount:s,verticalTileCount:a}=r;let{lightColor:l,darkColor:c}=r;if(l&&c){l=zt.fromHex(l);c=zt.fromHex(c);return Promise.resolve(new nt.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:l,darkColor:c}))}let u;if(this._ui.getPreloader){u=this._ui.getPreloader().getAsset(o)}let m;if(u){m=Promise.resolve(u)}else{m=Hi.loadImage(this._ui.getAssetPath(o),e)}return m.then(()=>{return Hi.loadImage(this._ui.getAssetPath(o),e).then(p=>{return new nt.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:p,resolution:n,horizontalTileCount:s,verticalTileCount:a})})})}return Promise.resolve(new r)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories){if(this._options.replaceCategories){this._categories=Yi.wrapFiltersInCategories(this._options.categories,om.CATEGORY_ITEMS_PROPERTY)}else{this._categories=Yi.mergeCategories(this._categories,this._options.categories,om.CATEGORY_ITEMS_PROPERTY)}}if(this._customAssetsAllowed&&this._options.availableFilters){const e=[];this._categories.forEach(r=>{const o=r.filters.filter(n=>this._options.availableFilters.indexOf(n.identifier)!==-1);if(o.length>0){e.push({identifier:r.identifier,defaultName:r.defaultName,filters:o})}});this._categories=e}const t={identifier:"all",defaultName:"All",visible:false,filters:this._categories.length<=0?[]:this._categories.map(e=>e.filters).reduce((e,r)=>e.concat(r))};this._categories.unshift(t);this._categoriesById.all=t;this._categories.forEach(e=>{this._categoriesById[e.identifier]=e});t.filters.forEach(e=>{this._filtersByIdentifier[e.identifier]=e})}getFiltersForCategory(t){if(!this._categoriesById[t]){throw new Error(`Unknown filter category '${t}'`)}return this._categoriesById[t].filters}getItemsByCategory(t){return this.getFiltersForCategory(t)}getFilterByIdentifier(t){return this._filtersByIdentifier[t]}getCategories(){return this._categories}getCategoryByIdentifier(t){return this._categoriesById[t]}};Fc=om;X(Fc,"CATEGORY_ITEMS_PROPERTY","filters")});var zh;var S7=d(()=>{Mn();zh=class extends yt{};zh.prototype.availableOptions={fontFamily:{type:"string",required:true},variations:{type:"array",required:true}}});var olt,Rc;var JT=d(()=>{Mn();olt={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"};Rc=class extends yt{getLabel(){let t=olt[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic";break}return t}};Rc.prototype.availableOptions={identifier:{type:"string",required:true},fontFamily:{type:"string",required:true},fontWeight:{type:"*",default:400},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},provider:{type:"string",available:["google","file"]},filePath:{type:"string"},default:{type:"boolean",default:false},font:{type:"object"}}});var Ii;var pl=d(()=>{ce();S7();JT();Lo();KC();Ii=class{constructor(t,e){this._ui=t;this._options=e;this._fonts=[];this._variationsByIdentifier={};this._fontsByFontFamily={};this._initFonts()}_initFonts(){const{fonts:t,replaceFonts:e,availableVariations:r,isTextDesign:o}=this._options;let n=true;if(true){n=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed()}if(t&&n){t.forEach(({variations:l},c)=>{if(l){l.forEach((u,m)=>{if(cs[u.identifier]){const p=pn(u.identifier,true);t[c].variations[m].identifier=p;const{fontFamily:h}=me.DEFAULTS.FONTS.find(g=>g.variations.some(_=>_.identifier===p));t[c].fontFamily=h}})}})}let s=o?me.DEFAULTS.TEXT_DESIGN_FONTS:me.DEFAULTS.FONTS;if(n){if(e){s=t}else{s=s.concat(t||[])}}let a;s=s.map(l=>{const{fontFamily:c}=l;let{variations:u}=l;if(n&&r){u=u.filter(p=>r.indexOf(p.identifier)!==-1)}if(u.length===0)return null;const m=new zh({fontFamily:c});u=u.map(p=>{const h=new Rc(p);h.setFontFamily(c);h.setFont(m);if(p.default&&!a){a=h}if(h.getTextMetrics()==null){q.warn(`Missing font metrics for ${h.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`)}this._variationsByIdentifier[h.getIdentifier()]=h;return h});m.setVariations(u);this._fontsByFontFamily[c]=m;return m}).filter(l=>l);if(!a){[a]=s[0].getVariations()}this._defaultVariation=a;this._fonts=s}getFonts(){return this._fonts}getFontByFontFamily(t){return this._fontsByFontFamily[t]}getVariationByIdentifier(t){return this._variationsByIdentifier[pn(t)]}getVariationsByIdentifier(){return{...this._variationsByIdentifier}}getDefaultVariation(){return this._defaultVariation}}});var co;var nm=d(()=>{ce();co=class{constructor(t,e={}){this._ui=t;this._options=e;this._defaultLayouts=nt.Operations.SpriteOperation.TextDesignSprite.Layouts;this._legacyLayouts=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts;this._layouts=[];this._init()}_init(){const{availableLayouts:t}=this._options;const e={...this._defaultLayouts,...this._legacyLayouts};this._layouts=Object.keys(e).map(r=>({identifier:e[r].identifier,layout:e[r]}));if(t){t.push(...Object.values(this._legacyLayouts).map(r=>r.identifier));this._layouts=this._layouts.filter(r=>t.indexOf(r.identifier)>=0)}}getLayoutByIdentifier(t){const e=Yt.Array.find(this._layouts,r=>r.identifier===t);return e&&e.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}});var Oc;var ZT=d(()=>{ce();Oc=class{static downloadDataURL(t,e="photoeditorsdk-export"){const r=this.createBlobURLFromDataURL(t);const o=this.getExtensionFromDataURL(t);const n=document.createElement("a");n.download=`${e}.${o}`;n.href=r;document.body.appendChild(n);n.click();document.body.removeChild(n)}static downloadMSBlob(t,e="photoeditorsdk-export"){if(navigator.msSaveBlob){navigator.msSaveBlob(t,`${e}.png`)}}static getExtensionFromDataURL(t){const e=t.split(",")[0].split(":")[1].split(";")[0];return e.split("/").pop()}static createBlobURLFromDataURL(t){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array){return t}const e=XT.decode(t.split(",")[1]);const r=t.split(",")[0].split(":")[1].split(";")[0];const o=new ArrayBuffer(e.length);const n=new Uint8Array(o);for(let a=0;a<e.length;a++){n[a]=e[a]}const s=new window.Blob([o],{type:r});return window.URL.createObjectURL(s)}}});var hx;var w7=d(()=>{ce();ZT();hx=class{constructor(t,e,r){this._sdk=t;this._options=e;this._download=r}export(){const t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then(e=>{if(this._download){this._downloadData(t,e)}return e})}_downloadData(t,e){switch(t){case ml.DATAURL:Oc.downloadDataURL(e,this._options.fileBasename);break;case ml.MSBLOB:Oc.downloadMSBlob(e,this._options.fileBasename);break}}_getRenderType(){const t=this._options;if(t.type!==ml.IMAGE||!this._download){return t.type}if(Yi.supportsMSBlob()){return ml.MSBLOB}return ml.DATAURL}}});var fx;var T7=d(()=>{ce();fx=class{constructor(t,e,r){this._editor=t;this._sdk=e;this._mediator=r;this._available=this._sdk.getOperations();this._map={};this._stack=this._sdk.getOperationsStack();this._preferredOrder=this._editor.getOptions().editor.operationsOrder;this._fixStack()}exists(t){return!!this._map[t]}add(t){const{identifier:e}=t.constructor;t.on("update",()=>{this._mediator.emit(me.EVENTS.OPERATION_UPDATED,t)});const r=this._preferredOrder.indexOf(e);if(r===-1){throw new Error(`EditorOperations#add: \`${e}\` does not appear in \`operationsOrder\``)}this._stack.set(r,t);this._map[e]=t;this._mediator.emit(me.EVENTS.OPERATION_CREATED,t)}remove(t,e=true){const r=typeof t==="object"?t.constructor.identifier:t;const o=this._stack.getStack();t=this.get(r);delete this._map[r];const n=o.map(s=>s.constructor.identifier).indexOf(r);if(n!==-1){this._stack.removeAt(n);for(let s=n+1;s<o.length;s++){const a=o[s];if(!a)continue;a.setDirty(true)}if(e){this._mediator.emit(me.EVENTS.OPERATION_REMOVED,t)}}}get(t){return this._map[t]}getOrCreate(t,e={}){if(this._map[t]){const n=this._map[t];n.set(e,false);return n}const r=this._available[t];const o=new r(this._sdk,e);this.add(o);return o}getStack(){return this._stack}reset(){this._map={}}_fixStack(){const t=this._stack.getStack().slice();this._stack.clear();t.forEach(e=>{this.add(e)})}}});var gx;var k7=d(()=>{ce();gx=class{constructor(t,e,r){this._image=t;this._maxPixels=e;this._maxDimensions=r}needsResize(){const t=new It(this._image.width,this._image.height);const e=t.x*t.y;const r=e>this._maxPixels;const o=this._maxDimensions!==null&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return r||o}resize(){let t=null;let e=null;const r=this._maxDimensions;return new Promise((o,n)=>{window.setTimeout(()=>{const s=new It(this._image.width,this._image.height);const a=s.clone();if(a.x*a.y>this._maxPixels){a.copy(this._getDimensionsByMaxPixels());t="maxMegaPixels"}if(r!==null&&(a.x>r||a.y>r)){const l=Math.min(r/a.x,r/a.y);a.multiply(l);t="maxDimensions"}a.floor();e=this._createResizedImageCanvas(a);o({canvas:e,dimensions:a,reason:t})},1e3)})}_createResizedImageCanvas(t,e=t){const r=this._image;const o=document.createElement("canvas");o.width=t.x;o.height=t.y;const n=t.clone().subtract(e).divide(2);const s=o.getContext("2d");s.drawImage(r,0,0,r.width,r.height,n.x,n.y,e.x,e.y);return o}_getDimensionsByMaxPixels(){const t=this._image;const e=this._maxPixels;const r=t.width/t.height;const o=t.height/t.width;return new It(Math.sqrt(e*r),Math.sqrt(e*o)).floor()}}});var nlt,slt,Uh;var I7=d(()=>{JT();nlt=30;slt="abcdefghijklmnopqrstuvwxzy";Uh=class{constructor(t){this._fontVariation=t||new Rc({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"});this._createRuler()}_createRuler(){this._ruler=document.createElement("div");this._ruler.innerText=slt;document.body.appendChild(this._ruler);this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      display: inline-block;
      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} ${nlt}px ${this._fontVariation.getFontFamily()};
    `}setFontVariation(t){this._fontVariation=t;this._setRulerStyle()}getWidth(){return!this._ruler?-1:this._ruler.offsetWidth}dispose(){if(this._ruler){this._ruler.parentNode.removeChild(this._ruler);this._ruler=null}}}});var D7,alt,llt,bx;var E7=d(()=>{I7();D7=typeof window!=="undefined"&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):oh();alt=50;llt=5e3;bx=class{constructor(t){this._fontVariation=t;this._defaultFontRuler=new Uh;this._customFontRuler=new Uh(this._fontVariation)}observe(){const t=D7();return new Promise((e,r)=>{const o=window.setInterval(()=>{const n=this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth();if(n){window.clearInterval(o);return e()}if(D7()-t>=llt){const s=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);s.font=this._fontVariation;return r(s)}},alt)})}dispose(){this._defaultFontRuler.dispose();this._customFontRuler.dispose()}}});var sm;var QT=d(()=>{Mn();E7();sm=class{constructor(t){this._ui=t;this._fonts=[];this._observers=[]}add(t){this._fonts.push(t)}load(){if(this._fonts.length===0){return Promise.resolve()}this._observers=[];this._fonts.forEach(t=>{this._observers.push(new bx(t))});return L.executePromises(this._observers.map(t=>t.observe()))}dispose(){this._observers.forEach(t=>t.dispose())}}});var yx;var F7=d(()=>{QT();yx=class extends sm{load(){return Promise.resolve()}}});var clt,_x;var R7=d(()=>{QT();clt={italic:"i"};_x=class extends sm{load(){if(this._fonts.length){this._addStylesheetTag()}return super.load()}_addStylesheetTag(){const t=this._getFamiliesString();const e=document.createElement("link");e.rel="stylesheet";e.href=`https://fonts.googleapis.com/css?family=${t}`;const r=document.getElementsByTagName("head")[0];r.appendChild(e)}_getFamiliesString(){const t={};this._fonts.forEach(r=>{const o=r.getFontFamily();const n=r.getFontStyle();const s=r.getFontWeight();t[o]=t[o]||[];if(typeof s!=="undefined"){t[o].push(`${s}${clt[n]||""}`)}else{t[o].push(400)}});const e=[];for(const r in t){const o=t[r];const n=o.length?`:${o.join(",")}`:"";const s=r.replace(" ","+")+n;e.push(s)}return e.join("|")}}});var hl;var xx=d(()=>{F7();R7();hl=class{constructor(t,e){this._ui=t;this._fonts=e;this._loadedFonts=[]}setFonts(t){this._fonts=t}needsToLoad(){for(let t=0;t<this._fonts.length;t++){let e;this._fonts[t].getVariations().forEach(r=>{e=e||r.getProvider()});if(!e)continue;return true}}fontLoaded(t){const e=t.getFontFamily();return this._loadedFonts.indexOf(e)!==-1}setFontLoaded(t){if(!this.fontLoaded(t)){const e=t.getFontFamily();this._loadedFonts.push(e)}}load(){const t=this._fonts;const e={google:new _x(this._ui),file:new yx(this._ui)};const r=()=>{for(const n in e){const s=e[n];s.dispose()}};t.filter(n=>!this.fontLoaded(n)).forEach(n=>{n.getVariations().forEach(s=>{const a=s.getProvider();if(!a)return;const l=e[a];l.add(s)})});const o=[];for(const n in e){o.push(e[n].load())}return Promise.all(o).then(()=>{r();t.forEach(n=>{this.setFontLoaded(n)})}).catch(n=>{r();throw n})}}});var vx;var O7=d(()=>{ce();vx=class{constructor(t,e){this._ui=t;this._options=e;this._brushes=[];this._brushesById={};this._addBrushes(me.DEFAULTS.BRUSHES);const{brushes:r,replaceBrushes:o,availableBrushes:n}=this._options;if(this._options.brushes){this._addBrushes(r,o)}if(n){this._brushes=this._brushes.filter(s=>n.indexOf(s.identifier)!==-1)}}_addBrushes(t,e){if(e){this._brushes=[];this._brushesById={}}t.forEach(r=>{this._brushes.push(r);this._brushesById[r.identifier]=r})}getBrushByIdentifier(t){return this._brushesById[t]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}});var A7,B7;var P7=d(()=>{A7=class{constructor(){this._assetsByGroupId={}}addAsset(t,e,r=false){if(!this._assetsByGroupId[t]){this._assetsByGroupId[t]=[e]}else if(r){this._assetsByGroupId[t].unshift(e)}else{this._assetsByGroupId[t].push(e)}}setAssets(t,e){this._assetsByGroupId[t]=e}getAssets(t){this._assetsByGroupId[t]=this._assetsByGroupId[t]||[];return this._assetsByGroupId[t]}};B7=A7});var t2,fl;var Cx=d(()=>{ce();Mn();P7();mh();vd();t2="imgly_sticker_custom";fl=class{constructor(t,e,r){this._ui=t;this._options=e;this._dynamicAssetsLibrary=r||this._ui.getEditor().getDynamicAssetsLibrary()||new B7;this._categoriesById={};this._categories=[];this._stickersById={};this._customStickerCanvas=L.createCanvas();this.reload()}reload(){this._categoriesById={};this._categories=[];this._stickersById={};const t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(Ls.DEFAULTS.STICKER_CATEGORIES);const{categories:e,replaceCategories:r}=this._options;if(t&&this._options.categories){this._addCategories(e,r)}else{this._updateCategoriesMap();this._updateAllCategory()}if(t){const o=this._dynamicAssetsLibrary.getAssets("sticker");if(o.length>0){const n=this._createCustomStickerCategory(o);this._addCategories([n],false,true)}}}loadExternal(t){const e=new io(t);return e.load().then(r=>{this._addCategories(r.categories,this._options.replaceCategories)})}_addCategories(t,e=false,r=false){if(e){this._categories=t.slice(0)}else if(r){this._categories=this._mergeCategories(t,this._categories)}else{this._categories=this._mergeCategories(this._categories,t)}this._updateCategoriesMap();this._updateAllCategory()}_mergeCategories(t,e){t=Yi.cloneCategories(t,"stickers");for(const r of e){let o=false;for(const n of t){if(r.identifier===n.identifier){for(const s of r.stickers){let a=false;for(const l of n.stickers){if(s.identifier===l.identifier){Object.assign(l,s);a=true;break}}if(!a){n.stickers.push(s)}}o=true;break}}if(!o){t.push(r)}}return t}_updateCategoriesMap(){this._categoriesById={};this._categories.forEach(t=>{this._categoriesById[t.identifier]=t});this._categories.forEach(t=>{t.stickers.forEach(e=>{this._stickersById[e.identifier]=e})});if(typeof this._options.availableStickers!=="undefined"&&this._options.availableStickers!==null){this._categories.forEach(t=>{if(t.identifier!==t2){t.stickers=t.stickers.filter(e=>this._options.availableStickers.indexOf(e.identifier)!==-1)}});this._categories=this._categories.filter(t=>t.stickers.length>0)}this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(t=>t.stickers).reduce((t,e)=>t.concat(e),[])};this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(t){const e=this._customStickerCanvas;const r=e.getContext("2d");r.save();const o=62;const n=o/t.width;const s=n*t.height;e.width=o;e.height=o;r.clearRect(0,0,t.width,t.height);r.translate(0,.5*(e.height-s));r.scale(n,n);r.drawImage(t,0,0);const a=e.toDataURL("image/png");r.restore();return{data:a,width:o,height:s}}addCustomStickerFromImage(t,e,r="none"){const o=b=>{const w=this._ui.getEditor().getSDK();const T=w.getRenderer();const D=new It(b.width,b.height);const O=this._ui.getEditor().getMaxMegapixels()*1e6;let k=T.getMaxDimensions();const E=D.x*D.y>O;const J=k!==null&&(D.x>k||D.y>k);if(E){const mt=b.width/b.height;const bt=b.height/b.width;k=new It(Math.sqrt(O*mt),Math.sqrt(O*bt)).floor().max()}const tt=D.clone();if(E||J){if(D.x/D.y>1){tt.x=k;tt.y=k/D.x*D.y}else{tt.x=k/D.y*D.x;tt.y=k}}return tt};const n=(b,w)=>{const T=b.x/b.y;if(T>1){return new It(w,w/T)}return new It(w*T,w)};const s=t.src.substring(0,14)==="data:image/svg";const a=this._ui.getEditor().getSDK();t=a.correctExifOrientation(t);const l=n(new It(t.width,t.height),2048);const c=s?l:o(t);const u=this._customStickerCanvas;const m=u.getContext("2d");m.save();const p=this.renderStickerThumbnailFromImage(t);if(s){if(t.width>t.height){u.width=2048;u.height=2048/t.width*t.height}else{u.height=2048;u.width=2048/t.height*t.width}t.width=u.width;t.height=u.height}else{u.width=c.x;u.height=c.y;m.scale(c.x/t.width,c.y/t.height)}m.drawImage(t,0,0,t.width,t.height);const h=u.toDataURL();m.restore();const g={identifier:L.generateUUID(),defaultName:e||"",tintMode:r,images:{mediaThumb:{uris:[p.data],rawData:true,width:p.width,height:p.height},mediaBase:{uris:s?[h,t.src]:[h],rawData:true,isSVG:s,width:c.x,height:c.y}}};const _=this._dynamicAssetsLibrary;_.addAsset("sticker",g,true);const x=_.getAssets("sticker");if(x.length===1){const b=this._createCustomStickerCategory(x);this._addCategories([b],false,true)}else{this.getCategory(t2).stickers=x;this._updateAllCategory()}this._updateCategoriesMap()}_createCustomStickerCategory(t){return{identifier:t2,defaultName:"Custom",metaData:{backgroundImage:t[t.length-1].images.mediaBase.uris[0],rawData:true},stickers:t}}getStickersForCategory(t){if(!this._categoriesById[t]){throw new Error(`Unknown sticker category '${t}'`)}return this._categoriesById[t].stickers}getStickerByIdentifier(t){return this._stickersById[t]}getCategories(t=false){if(t){return[this._allCategory].concat(this._categories)}return this._categories}getCategory(t){return this._categoriesById[t]}static getURLForSticker(t,e="base"){const{images:r}=t;const o=e==="base"?r.mediaBase||r.mediaThumb:r.mediaThumb;const n=o.uris||[o.uri];if(true){if(!Yi.Browser.getIEVersion()){const a=n.filter(l=>/\.svg$/i.test(l));return a.length?a[0]:n[0]}}const s=n.filter(a=>!/\.svg$/i.test(a));return s.length?s[0]:n[0]}}});var M7,e2,Ac;var i2=d(()=>{ce();xx();O7();YT();pl();Cx();M7=y(Yu());if(typeof nt.Operations.SpriteOperation!=="undefined"){e2=nt.Operations.SpriteOperation.BrushSprite}Ac=class{constructor(t,e){this._editor=t;this._ui=this._editor.getUI();this._data=e;this._filterManager=new Fc(this._ui,this._getOptions("filter"));this._stickerManager=new fl(this._ui,this._getOptions("sticker"));this._brushManager=new vx(this._ui,this._getOptions("brush"));this._fontManager=new Ii(this._ui,this._getOptions("text"))}_getOptions(t){const{controls:e}=this._editor;let r={};if(e&&e.get(t)){r=e.get(t).defaultOptions}const o=this._editor.getOptions();return Yt.deepDefaults({},o.editor.controlsOptions[t]||{},r)}deserialize(){return this._validateVersion().then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_validateVersion(){if(this._data.version!==this.constructor.version){return Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`))}return Promise.resolve()}_deserializeInputImage(){return new Promise((t,e)=>{const{data:r,type:o}=this._data.inputImage;if(r&&o){const n=new window.Image;n.addEventListener("load",()=>{this._editor.setImage(n);t()});n.src=`data:${o};base64,${r}`}else{t()}})}async _deserializeOperations(){const{operations:t}=this._data;return(0,M7.default)(t,async e=>this._deserializeOperation(e))}_deserializeOperation(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}}_deserializeCropOperation(t){const{options:e}=t;let{rotation:r}=e;const o=It.fromObject(e.start);const n=It.fromObject(e.end);if(r>Math.PI){r-=Math.PI*2}const s={start:o,end:n};if(typeof r!=="undefined"){s.rotation=r}const a=this._editor.operations.getOrCreate("transform");this._editor.broadcastTransform(a,s);a.set(s);return Promise.resolve(a)}_deserializeOrientationOperation(t){const{options:e}=t;const r=this._editor.operations.getOrCreate("orientation");if(!r)return Promise.resolve();r.set(e);return Promise.resolve(r)}_deserializeFilterOperation(t){const{options:e}=t;if(!this._filterManager.getFilterByIdentifier(e.name)){q.warn("Deserializer",`Unknown filter \`${e.name}\``);return Promise.resolve()}return this._filterManager.instantiateFilterWithIdentifier(e.name).then(r=>{const o=this._editor.operations.getOrCreate("filter");o.set({identifier:e.name,filter:r,intensity:e.intensity});return o})}_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=nt.Operations;const{options:r}=t;const o=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];const n={};o.forEach(s=>{if(typeof r[s]==="undefined")return;const{minValue:a,midValue:l,maxValue:c}=e.prototype.availableOptions[s];let u=r[s];u=u<0?l+(l-a)*u:l+(c-l)*u;n[s]=u});return Promise.resolve(this._editor.operations.getOrCreate("adjustments",n))}_deserializeSpriteOperation(t){const{options:e}=t;const r=this._editor.operations.getOrCreate("sprite");if(!r)return Promise.resolve();const o=e.sprites.map(n=>{return this._deserializeSprite(r,n)}).filter(n=>n);return Promise.all(o).then(n=>{r.setSprites(n.filter(s=>s));return r})}_deserializeSprite(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(t,e)}}_deserializeSticker(t,e){const{SpriteOperation:r}=nt.Operations;const{options:o}=e;const n=this._stickerManager.getStickerByIdentifier(o.name);const s=this._stickerManager.getURLForSticker(n);if(!n){q.warn("Deserializer",`Unknown sticker '${o.name}'. Skipping sprite.`);return Promise.resolve()}return new Promise((a,l)=>{const c=new window.Image;c.addEventListener("load",()=>{const u=r.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:m,flipHorizontally:p,flipVertically:h}=o;const g={identifier:o.name,image:c,position:It.fromObject(o.position),dimensions:It.fromObject(o.dimensions),rotation:m,flipHorizontally:p,flipVertically:h,adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(_=>{if(typeof o.adjustments[_]!=="undefined"){g.adjustments[_]=o.adjustments[_]+u[_].default}})}a(t.createSticker(g))});c.crossOrigin=this._editor.getCrossOrigin();c.src=this._editor.getUI().getAssetPath(s)})}_deserializeText(t,e){const{options:r}=e;const{fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:c,maxWidth:u,color:m,backgroundColor:p}=r;const h=new hl(this._ui);let g=this._fontManager.getFontByFontFamily(s);if(!g)g=this._fontManager.getDefaultFont();h.setFonts([g]);return h.load().then(()=>{const _=t.createText({fontSize:o,lineHeight:n,fontFamily:s,fontWeight:a,alignment:l,rotation:c,maxWidth:u,text:r.text,color:zt.fromArray(m),backgroundColor:zt.fromArray(p),position:It.fromObject(r.position)});_._edited=true;return _})}_deserializeBrush(t,e){const{options:r}=e;const{paths:o}=r;const n=t.createBrush();o.forEach(s=>{this._deserializeBrushPath(n,s)});return Promise.resolve(n)}_deserializeBrushPath(t,e){const{points:r}=e;const o=this._createBrushForPath(e);const n=t.createPath(o);n.setClosed(true);r.forEach(s=>{n.addControlPoint(It.fromObject(s))})}_createBrushForPath(t){const{color:e,size:r}=t;const o=zt.fromArray(e);const n={color:o,size:r};const s=this._brushManager.getFirstBrush();if(s.prototype&&s.prototype instanceof e2){const c=s;return new c(n)}const a={...s};delete a.image;class l extends e2{}l.identifier=s.identifier;return new l({...a,...n})}_deserializeFocusOperation(t){const{options:e}=t.options;switch(t.options.type){case"radial":{const{position:r,radius:o,gradientRadius:n,blurRadius:s}=e;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:It.fromObject(r),radius:o,gradientRadius:n,blurRadius:s}))}case"linear":{const{start:r,end:o,size:n,gradientSize:s,blurRadius:a}=e;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:It.fromObject(r),end:It.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}}}_getInputDimensionsForOperation(t){let e=false;let r=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(o=>{if(o===t)e=true;if(e)return;r=o.getNewDimensions(r)});return r}};Ac.version="1.0.0"});var am,Bc;var r2=d(()=>{ce();am=Math.PI*2;Bc=class{constructor(t){this._editor=t;this._serializeOperations=this._serializeOperations.bind(this)}serialize(t={}){this._options={...t,image:true};const e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)}_serializeInputImage(t){const e=this._editor.getImage();const{width:r,height:o}=e;if(!this._options.image){t.inputImage={width:r,height:o};return Promise.resolve(t)}const n=Yt.createCanvas();n.width=e.width;n.height=e.height;const s=n.getContext("2d");s.drawImage(e,0,0);const a=n.toDataURL(qT.PNG);t.inputImage={type:qT.PNG,data:a.replace(/^data:image\/(.*?);base64,/,""),width:r,height:o};return Promise.resolve(t)}_serializeOperations(t){const e=[];const r=this._editor.operations.getStack();r.forEach(o=>{const n=this._serializeOperation(o,e);if(n){e.push(n)}});t.operations=e.filter(o=>o);return Promise.resolve(t)}_serializeOperation(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:q.warn(`Unable to serialize operation of type ${t.constructor.identifier}`)}}_serializeTransformOperation(t){const e=t.serializeOptions(["start","end","rotation"],true);e.rotation=(e.rotation+am)%am;return{type:"crop",options:e}}_serializeOrientationOperation(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],true)}}_serializeFilterOperation(t){if(t.getIdentifier()==="identity")return null;return{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}}_serializeAdjustmentsOperation(t){const{availableOptions:e}=t;const r=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"];const o={};r.forEach(n=>{const s=e[n];const a=t.getOption(n);const{minValue:l,midValue:c,maxValue:u}=s;o[n]=a<=c?(a-l)/(c-l)-1:(a-c)/(u-c)});return{type:"adjustments",options:o}}_serializeSpriteOperation(t,e){const r=e.filter(s=>s.type==="sprite");let o;let n=true;if(r.length){o=r.pop();n=false}else{o={type:"sprite",options:{sprites:[]}}}t.getSprites().forEach(s=>{let a=null;if(s instanceof t.constructor.StickerSprite){a=this._serializeSticker(t,s)}else if(s instanceof t.constructor.TextSprite){a=this._serializeText(t,s)}else if(s instanceof t.constructor.BrushSprite){a=this._serializeBrush(t,s)}else if(s instanceof t.constructor.TextDesignSprite){a=this._serializeTextDesign&&this._serializeTextDesign(t,s)}if(a){o.options.sprites.push(a)}});if(n){return o}}_serializeSticker(t,e){const r=e.getAdjustments();const o=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],true);o.name=o.identifier;delete o.identifier;o.rotation=(o.rotation+am)%am;const n=r.availableOptions;o.adjustments={brightness:r.getBrightness()-n.brightness.default,saturation:r.getSaturation()-n.saturation.default,contrast:r.getContrast()-n.contrast.default};return{type:"sticker",options:o}}_serializeText(t,e){const r=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],true);r.rotation=(r.rotation+am)%am;return{type:"text",options:r}}_serializeBrush(t,e){return{type:"brush",options:{paths:e.getPaths().map(r=>this._serializePath(r))}}}_serializePath(t){const e=t.getBrush().serializeOptions(["color","size"],true);e.points=t.getControlPoints().map(r=>r.getPosition().toObject());return e}_serializeRadialFocusOperation(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],true)}}}_serializeLinearFocusOperation(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}_getInputDimensionsForOperation(t){let e=false;let r=this._editor.getInputDimensions();this._editor.operations.getStack().forEach(o=>{if(o===t)e=true;if(e)return;r=o.getNewDimensions(r)});return r}};Bc.version="1.0.0"});var L7={};ue(L7,{default:()=>Sx});var Sx;var z7=d(()=>{i2();r2();Sx=class{constructor(t){this._editor=t}serialize(...t){const e=new Bc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Ac(this._editor,t);return e.deserialize()}};Sx.version="1.0.0"});var Pc;var o2=d(()=>{ce();i2();Pc=class extends Ac{_deserializeOperation(t){if(t.type==="selective-blur"){return this._deserializeSelectiveBlurOperation(t)}return super._deserializeOperation(t)}_deserializeCropOperation(t){const{options:e}=t;let{rotation:r}=e;const o=It.fromObject(e.start);const n=It.fromObject(e.end);const s=e.dimensions?It.fromObject(e.dimensions):null;if(n.x-o.x<=0||n.y-o.y<=0){throw new Error(`A crop should not result in negative or zero dimensions - start: ${o} - end: ${n}`)}if(r>Math.PI){r-=Math.PI*2}const a={start:o,end:n};if(typeof r!=="undefined")a.rotation=r;const l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();this._editor.broadcastTransform(l,a);l.set(a);if(s){const c=n.clone().subtract(o);const u=l.getInputDimensions(false).multiply(c);l.setTextureScale(s.x/u.x)}return Promise.resolve(l)}};Pc.version="1.0.1"});var U7,Mc;var n2=d(()=>{r2();U7=Math.PI*2;Mc=class extends Bc{_serializeTransformOperation(t){const e=t.serializeOptions(["start","end","rotation","textureScale"],true);e.rotation=(e.rotation+U7)%U7;if(e.textureScale!==1){e.dimensions=t.getNewDimensions(t.getInputDimensions(false))}delete e.textureScale;return{type:"crop",options:e}}};Mc.version="1.0.1"});var N7={};ue(N7,{default:()=>wx});var wx;var H7=d(()=>{o2();n2();wx=class{constructor(t){this._editor=t}serialize(...t){const e=new Mc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Pc(this._editor,t);return e.deserialize()}};wx.version="1.0.1"});var lm,Nh;var W7=d(()=>{yd();ce();({OptionType:lm}=nt);Nh=class extends nt.Configurable{constructor(t,e={}){super(e);this._loaded=false;this._loading=false;this._ui=t;this._frame=nt.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=true;const{imageGroups:t}=this._frame;const e=[];["top","left","right","bottom"].forEach(r=>{if(!(r in t))return;const o=t[r];["start","mid","end"].forEach(n=>{if(!(n in o))return;e.push(this._loadPart(r,n))})});return Promise.all(e).then(()=>{this._loaded=true;this._loading=false}).catch(r=>{this._loaded=false;this._loading=false})}_loadPart(t,e){const{imageGroups:r}=this._frame;const o=r[t][e];let n=o;if(typeof o!=="string"&&"image"in o){n=o.image}return Hi.load(this._ui.getAssetPath(n)).then(s=>{if(typeof o!=="string"){this._frame.imageGroups[t][e].image=s}else{this._frame.imageGroups[t][e]=s}return s})}getFrame(){return this._frame}};Nh.prototype.availableOptions={identifier:{type:lm.STRING,required:true},defaultName:{type:lm.STRING},thumbnail:{type:lm.STRING},tintable:{type:lm.BOOLEAN,default:false},layoutMode:{type:lm.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:lm.OBJECT,required:true}}});var Tx;var G7=d(()=>{ce();Tx=class{constructor(t,e){this._ui=t;this._options=e;this._categoriesById={};this._categories=[];this._framesById={};this._addCategories(Ls.DEFAULTS.FRAME_CATEGORIES);this._customAssetsAllowed=t.getEditor().getSDK()._l.areCustomAssetsAllowed();const{categories:r,replaceCategories:o}=this._options;if(this._customAssetsAllowed&&this._options.categories){this._addCategories(r,o)}else{this._updateAllCategory()}}_addCategories(t,e=false){if(e){this._categories=t.slice(0)}else{this._categories=Yi.mergeCategories(this._categories,t,"frames")}this._categoriesById={};this._categories.forEach(o=>{this._categoriesById[o.identifier]=o});const{availableFrames:r}=this._options;if(this._customAssetsAllowed&&r){this._categories.forEach(o=>{o.frames=o.frames.filter(n=>r.indexOf(n.identifier)!==-1)})}this._categories.forEach(o=>{o.frames.forEach(n=>{this._framesById[n.identifier]=n})});this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(t=>t.frames).reduce((t,e)=>t.concat(e),[])};this._categoriesById.all=this._allCategory}getFramesForCategory(t){if(!this._categoriesById[t]){throw new Error(`Unknown frame category '${t}'`)}return this._categoriesById[t].frames}getFrameByIdentifier(t){return this._framesById[t]}getCategories(){return this._categories}getCategory(t){return this._categoriesById[t]}}});var kx;var V7=d(()=>{ce();kx=class{constructor(t,e){this._ui=t;this._options=e;this._overlays=Ls.DEFAULTS.OVERLAYS.slice(0);this._overlaysByIdentifier={};const r=t.getEditor().getSDK()._l.areCustomAssetsAllowed();if(r&&e.overlays){if(e.replaceOverlays){this._overlays=e.overlays}else{this._overlays=this._overlays.concat(e.overlays)}}if(r&&e.availableOverlays){this._overlays=this._overlays.filter(o=>e.availableOverlays.indexOf(o.identifier)!==-1)}this._overlays.forEach(o=>{this._overlaysByIdentifier[o.identifier]=o})}getOverlays(){return this._overlays}getOverlayByIdentifier(t){return this._overlaysByIdentifier[t]}}});var Ks,cm;var Ix=d(()=>{ce();({OverlayFilter:Ks}=nt.Engine.Filters);cm={[Ks.BLEND_MODES.NORMAL]:"normal",[Ks.BLEND_MODES.OVERLAY]:"overlay",[Ks.BLEND_MODES.HARD_LIGHT]:"hard light",[Ks.BLEND_MODES.SOFT_LIGHT]:"soft light",[Ks.BLEND_MODES.MULTIPLY]:"multiply",[Ks.BLEND_MODES.DARKEN]:"darken",[Ks.BLEND_MODES.LIGHTEN]:"lighten",[Ks.BLEND_MODES.SCREEN]:"screen",[Ks.BLEND_MODES.COLOR_BURN]:"color burn"}});var ult,Lc;var s2=d(()=>{ce();xx();W7();yd();G7();V7();Cx();o2();Ix();ult=Yt.flipObject(cm);Lc=class extends Pc{constructor(...t){super(...t);this._frameManager=new Tx(this._ui,this._getOptions("frame"));const e=this._getOptions("overlay");if(e){this._overlayManager=new kx(this._ui,e)}}_deserializeSprite(t,e){if(e.type==="frame"){return this._deserializeFrame(t,e)}if(e.type==="overlay"){return this._deserializeOverlay(t,e)}return super._deserializeSprite(t,e)}_deserializeOperation(t){if(t.type==="transform"){return this._deserializeTransformOperation(t)}return super._deserializeOperation(t)}_deserializeOrientationOperation(t){if(this._data.meta&&this._data.meta.platform!=="html5"){return super._deserializeOrientationOperation(t)}const{rotation:e,flipHorizontally:r,flipVertically:o}=t.options;let n=e===90&&!r&&!o;n|=e===90&&r&&o;n|=e===270&&!r&&!o;n|=e===270&&r&&o;if(n){t.options.flipHorizontally=!t.options.flipHorizontally;t.options.flipVertically=!t.options.flipVertically}return super._deserializeOrientationOperation(t)}_deserializeTransformOperation(t){return super._deserializeCropOperation(t).then(e=>{if(!e)return;const r=Yt.Array.find(this._data.operations,o=>o.type==="orientation");if(r){const{options:o}=r;let{rotation:n,flipHorizontally:s,flipVertically:a}=o;if(n===90||n===270){if(!s&&a||s&&!a){s=!s;a=!a}}e.rotate(o.rotation);if(s){e.flip("horizontal");e.setRotation(e.getRotation()*-1)}if(a){e.flip("vertical");e.setRotation(e.getRotation()*-1)}}return e})}_deserializeFrame(t,e){const{identifier:r}=e.options;const o=this._frameManager.getFrameByIdentifier(r);if(!o){q.warn("Deserializer",`Unknown frame \`${r}\`. Skipping frame.`);return Promise.resolve()}const n=new Nh(this._ui,o);return n.load().then(()=>{this._editor.operations.getOrCreate("frame",{frame:n.getFrame()})})}_deserializeOverlay(t,e){const{blendMode:r,intensity:o,identifier:n}=e.options;const s=this._overlayManager.getOverlayByIdentifier(n);if(!s){q.warn("Deserializer",`Unknown overlay \`${n}\`. Skipping overlay.`);return Promise.resolve()}const a=this._editor.getUI().getAssetPath(s.image);return Hi.load(a).then(l=>{this._editor.operations.getOrCreate("overlay",{alpha:o,identifier:n,blendMode:parseInt(ult[r||s.blendMode],10),image:l})})}_createBrushForPath(t){const e=super._createBrushForPath(t);if(typeof t.hardness!=="undefined"&&e.hasOption("hardness")){e.setHardness(t.hardness)}return e}_deserializeSticker(t,e){const{SpriteOperation:r}=nt.Operations;const{options:o}=e;const n=this._stickerManager.getStickerByIdentifier(o.identifier);const s=fl.getURLForSticker(n,"base");if(!n){q.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`);return Promise.resolve()}const a=t.getInputDimensions(false);return new Promise((l,c)=>{const u=new window.Image;u.addEventListener("load",()=>{const m=r.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:p,flipHorizontally:h,flipVertically:g}=o;const _={identifier:o.identifier,image:u,position:It.fromObject(o.position),dimensions:It.fromObject(o.dimensions).multiply(a.min()),rotation:p,flipHorizontally:h,flipVertically:g,adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(x=>{if(typeof o.adjustments[x]!=="undefined"){_.adjustments[x]=o.adjustments[x]+m[x].default}})}if(typeof o.tintColor!=="undefined"&&typeof n.tintMode!=="undefined"){_.tintColor=zt.fromArray(o.tintColor);_.tintMode=n.tintMode}l(t.createSticker(_))});u.crossOrigin=this._editor.getCrossOrigin();u.src=this._editor.getUI().getAssetPath(s)})}_deserializeFilterOperation(t){const{options:e}=t;if(!this._filterManager.getFilterByIdentifier(e.identifier)){q.warn("Deserializer",`Unknown filter \`${e.identifier}\``);return Promise.resolve()}return this._filterManager.instantiateFilterWithIdentifier(e.identifier).then(r=>{const o=this._editor.operations.getOrCreate("filter");if(!o)return;o.set({identifier:e.identifier,filter:r,intensity:e.intensity});return o})}_deserializeFocusOperation(t){const{options:e,type:r}=t.options;if(r!=="radial")return super._deserializeFocusOperation(t);const o=this._editor.getImage();const n=o.width/o.height;const{start:s,end:a,gradientRadius:l,blurRadius:c}=e;const u=It.fromObject(a).subtract(It.fromObject(s)).multiply(n,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:It.fromObject(s),radius:u,gradientRadius:l,blurRadius:c}))}_deserializeText(t,e){const{options:r}=e;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:m}=r;const p=new hl(this._ui);let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultFont()}else{p.setFonts([h.getFont()])}return p.load().then(()=>{const g=t.getInputDimensions(false);const _=c*g.min()/g.x;const x=t.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:l,maxWidth:_,text:r.text,color:zt.fromArray(u),backgroundColor:zt.fromArray(m),position:It.fromObject(r.position)});x._edited=true;return x})}};Lc.version="2.0.0"});var zc;var a2=d(()=>{n2();Ix();zc=class extends Mc{_serializeSticker(t,e){const r=t.getInputDimensions(false);const o=super._serializeSticker(t,e);if(e.getTintMode()!=="none"){o.options.tintColor=e.serializeOption("tintColor",true)}o.options.dimensions=e.getDimensions().clone().divide(r.min()).toObject();o.options.identifier=o.options.name;delete o.options.name;return o}_serializePath(t){const e=super._serializePath(t);const r=t.getBrush();if(r.hasOption("hardness")){e.hardness=r.getOption("hardness")}return e}_serializeOperation(t,e){if(t.constructor.identifier==="frame"){this._serializeFrameOperation(t,e);return null}if(t.constructor.identifier==="overlay"){this._serializeOverlayOperation(t,e);return null}return super._serializeOperation(t,e)}_serializeFrameOperation(t,e){const r=e.filter(n=>n.type==="sprite");let o;if(r.length){o=r.pop()}else{o={type:"sprite",options:{sprites:[]}};e.push(o)}o.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})}_serializeOverlayOperation(t,e){if(!t.getIdentifier())return;const r=e.filter(n=>n.type==="sprite");let o;if(r.length){o=r.pop()}else{o={type:"sprite",options:{sprites:[]}};e.push(o)}o.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:cm[t.getBlendMode()]}})}_getFrameOptions(t){return{identifier:t.getFrame().identifier}}_serializeOrientationOperation(t){const e=super._serializeOrientationOperation(t);if(e.options.rotation===90||e.options.rotation===270){e.options.flipHorizontally=!e.options.flipHorizontally;e.options.flipVertically=!e.options.flipVertically}return e}_serializeTransformOperation(t){const{operations:e}=this._editor;if(e.exists("orientation")){t=t.clone();const o=e.get("orientation");t.rotate(-o.getRotation());if(o.getFlipVertically()){t.flip("vertical");t.setRotation(t.getRotation()*-1)}if(o.getFlipHorizontally()){t.flip("horizontal");t.setRotation(t.getRotation()*-1)}}const r=super._serializeTransformOperation(t);r.type="transform";return r}_serializeText(t,e){const r=super._serializeText(t,e);const o=t.getInputDimensions(false);r.options.fontIdentifier=e.getFontIdentifier();r.options.maxWidth=r.options.maxWidth*o.x/o.min();delete r.options.fontFamily;return r}_serializeFilterOperation(t){const e=super._serializeFilterOperation(t);if(!e)return null;e.options.identifier=e.options.name;delete e.options.name;return e}_serializeRadialFocusOperation(t){const e=super._serializeRadialFocusOperation(t);const r=e.options.options;r.start=r.position;delete r.position;r.end={x:r.start.x+r.radius,y:r.start.y};delete r.radius;return e}};zc.version="2.0.0"});var j7={};ue(j7,{default:()=>Dx});var Dx;var $7=d(()=>{s2();a2();Dx=class{constructor(t){this._editor=t}serialize(...t){const e=new zc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Lc(this._editor,t);return e.deserialize()}};Dx.version="2.0.0"});var l2,Uc;var c2=d(()=>{ce();yd();pl();Cx();nm();s2();if(typeof nt.Operations.SpriteOperation!=="undefined"){l2=nt.Operations.SpriteOperation.BrushSprite.Brush}Uc=class extends Lc{_deserializeSticker(t,e){const{SpriteOperation:r}=nt.Operations;const{options:o}=e;const n=this._stickerManager.getStickerByIdentifier(o.identifier);if(!n){q.warn("Deserializer",`Unknown sticker \`${o.identifier}\`. Skipping sprite.`);return Promise.resolve()}const{mediaBase:s}=n.images;const a=fl.getURLForSticker(n,"base");const l=s.rawData?s.uris[0]:this._editor.getUI().getAssetPath(a);const c=t.getInputDimensions(false);return Hi.load(l).then(u=>{const m=r.StickerSprite.prototype.availableOptions.adjustments.structure;const{rotation:p,flipHorizontally:h,flipVertically:g}=o;const _={identifier:o.identifier,image:u,position:It.fromObject(o.position),dimensions:It.fromObject(o.dimensions).multiply(c.min()),rotation:p||0,flipHorizontally:h,flipVertically:g,resizeMode:n.resizeMode||"keepAspect",adjustments:{}};if(typeof o.adjustments!=="undefined"){["brightness","contrast","saturation"].forEach(x=>{if(typeof o.adjustments[x]!=="undefined"){_.adjustments[x]=o.adjustments[x]+m[x].default}})}if(typeof o.tintMode!=="undefined"&&typeof o.tintColor!=="undefined"){_.tintColor=zt.fromArray(o.tintColor.rgba);_.tintMode=o.tintMode}else if(typeof o.tintColor!=="undefined"&&typeof n.tintMode!=="undefined"){_.tintColor=zt.fromArray(o.tintColor.rgba);_.tintMode=n.tintMode}if(typeof o.alpha!=="undefined"){_.alpha=o.alpha}return t.createSticker(_)})}_deserializeTransformOperation(t){return super._deserializeTransformOperation(t).then(e=>{if(!e)return;e._ratio=null;return e})}_deserializeInputImage(){let{data:t,type:e,uri:r}=this._data.image;if(t&&e){r=`data:${e};base64,${t}`}if(r){return Hi.load(r).then(o=>{this._editor.setImage(o)})}return Promise.resolve()}_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=nt.Operations;return super._deserializeAdjustmentsOperation(t).then(r=>{if(!r)return null;const{options:o}=t;const n=["gamma","whites","blacks","temperature"];const s={};n.forEach(a=>{if(typeof o[a]==="undefined")return;const{minValue:l,midValue:c,maxValue:u}=e.prototype.availableOptions[a];let m=o[a];m=m<0?c+(c-l)*m:c+(u-c)*m;s[a]=m});r.set(s);return r})}_deserializeFocusOperation(t){const{options:e}=t.options;switch(t.options.type){case"radial":return super._deserializeFocusOperation(t);case"linear":{const{start:r,end:o,blurRadius:n}=e;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:It.fromObject(r),controlPoint2:It.fromObject(o),blurRadius:n}))}case"mirrored":{const{start:r,end:o,size:n,gradientSize:s,blurRadius:a}=e;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:It.fromObject(r),end:It.fromObject(o),size:n,gradientSize:s,blurRadius:a}))}case"gaussian":{const{blurRadius:r}=e;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:r}))}}}_deserializeText(t,e){const{options:r}=e;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:m}=r;const p=this._ui.getFontLoader();let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultVariation()}else{p.setFonts([h.getFont()])}return p.load().then(()=>{const g=t.getInputDimensions(false);const _=c*g.min()/g.x;const x=t.createText({fontSize:o,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:_,text:r.text,color:zt.fromArray(u.rgba),backgroundColor:zt.fromArray(m.rgba),position:It.fromObject(r.position)});x._edited=true;return x})}_createBrushForPath(t){const{identifier:e,color:r,size:o,hardness:n}=t.brush;const s=zt.fromArray(r.rgba);const a={color:s,size:o};if(typeof n!=="undefined"){a.hardness=n}let l=this._brushManager.getBrushByIdentifier(e);if(!l){l=this._brushManager.getFirstBrush()}if(l.prototype&&l.prototype instanceof l2){const m=l;return new m(a)}const c={...l};delete c.image;class u extends l2{}u.identifier=l.identifier;return new u({...c,...a})}_deserializeFrame(t,e){return super._deserializeFrame(t,e).then(()=>{const r=this._editor.operations.get("frame");const{size:o,alpha:n,tintColor:s}=e.options;const a={};if(typeof o!=="undefined"){a.scale=o}if(typeof n!=="undefined"){a.alpha=n}if(typeof s!=="undefined"){a.tintColor=zt.fromArray(s.rgba)}r.set(a)})}_deserializeTextDesign(t,e){const{options:r}=e;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:m,inverted:p}=r;let{identifier:h}=r;if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const g=new co(this._ui,this._getOptions("textdesign"));const _=new Ii(this._ui,{fonts:me.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:x}=t.constructor.TextDesignSprite;const b=this._ui.getFontLoader();const w=g.getLayoutByIdentifier(h);const T=new w;b.setFonts(_.getFonts());x.setFonts({...x.getFonts(),..._.getVariationsByIdentifier()});return b.load().then(()=>{const D=T.getImagePaths().map(O=>({path:O,fullPath:this._ui.getAssetPath(O),image:null}));return x.loadImages(D).then(()=>{T.onImagesLoaded();return t.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:zt.fromArray(c.rgba),width:u,seed:m,inverted:p,layout:T})})})}};Uc.version="3.0.0"});var Nc;var u2=d(()=>{Mn();Nc=class extends yt{};Nc.prototype.availableOptions={identifier:{type:"string",required:true},defaultName:{type:"string",required:true},ratio:{type:"*",required:false,default:null},selected:{type:"boolean",required:false},dimensions:{type:"vector2",required:false},lockDimensions:{type:"boolean",required:false,default:null},forceDimensions:{type:"boolean",required:false,default:null}}});var Hc;var d2=d(()=>{ce();u2();a2();Hc=class extends zc{serialize(t={}){return super.serialize(t).then(e=>{e.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:Yt.ISODateString(new Date)};e.image=e.inputImage;delete e.inputImage;return e})}_serializeSticker(t,e){const r=super._serializeSticker(t,e);r.options.alpha=e.getAlpha();if(r.options.tintColor){r.options.tintColor={rgba:r.options.tintColor}}return r}_serializeText(t,e){const r=super._serializeText(t,e);r.options.color={rgba:r.options.color};r.options.backgroundColor={rgba:r.options.backgroundColor};r.options.flipHorizontally=false;r.options.flipVertically=false;delete r.options.fontWeight;return r}_serializePath(t){const e=super._serializePath(t);delete e.hardness;delete e.size;delete e.color;const r=t.getBrush();e.brush=r.serializeOptions(["identifier","size","color"],true);if(typeof e.brush.identifier==="undefined"){delete e.brush.identifier}e.brush.color={rgba:e.brush.color};const o=r.getOption("hardness");if(o!=="undefined"){e.brush.hardness=o}return e}_serializeFrameOperation(t,e){super._serializeFrameOperation(t,e);const r=e.filter(n=>n.type==="sprite");let o;if(r.length){o=r.pop();const n=o.options.sprites.filter(l=>l.type==="frame")[0];const s=t.getTintColor();if(!s.equals(new zt(1,1,1,0))){n.options.tintColor={rgba:t.serializeOption("tintColor",true)}}const a=t.serializeOptions(["scale","alpha"],true);n.options={...n.options,...a};n.options.size=n.options.scale;delete n.options.scale}}_serializeTransformOperation(t){const e=super._serializeTransformOperation(t);if(t._ratio){let r;if(t._ratio instanceof Nc){r=t._ratio.getIdentifier()}else{r=t._ratio.identifier}e.options.meta={identifier:r}}delete e.options.scale;return e}_serializeAdjustmentsOperation(t){const e=super._serializeAdjustmentsOperation(t);const r=["gamma","whites","blacks","temperature"];const{availableOptions:o}=t;const n={};r.forEach(s=>{const a=o[s];const l=t.getOption(s);const{minValue:c,midValue:u,maxValue:m}=a;n[s]=l<=u?(l-c)/(u-c)-1:(l-u)/(m-u)});e.options={...e.options,...n};return e}_serializeOperation(t,e){switch(t.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(t);case"linear-focus":return this._serializeLinearFocusOperation(t);case"blur":return this._serializeBlurOperation(t);default:return super._serializeOperation(t,e)}}_serializeMirroredFocusOperation(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],true)}}}_serializeLinearFocusOperation(t){const e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],true);e.start=e.controlPoint1;delete e.controlPoint1;e.end=e.controlPoint2;delete e.controlPoint2;return{type:"focus",options:{type:"linear",options:e}}}_serializeBlurOperation(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],true)}}}};Hc.version="3.0.0"});var K7={};ue(K7,{default:()=>Ex});var Ex;var X7=d(()=>{c2();d2();Ex=class{constructor(t){this._editor=t}serialize(...t){const e=new Hc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Uc(this._editor,t);return e.deserialize()}};Ex.version="3.0.0"});var Wc;var m2=d(()=>{ce();pl();nm();c2();Wc=class extends Uc{_deserializeTextDesign(t,e){const{options:r}=e;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:m,inverted:p}=r;let{identifier:h}=r;if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const g=new co(this._ui,this._getOptions("textdesign"));const _=new Ii(this._ui,{fonts:me.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:x}=t.constructor.TextDesignSprite;const b=this._ui.getFontLoader();const w=g.getLayoutByIdentifier(h);const T=new w;b.setFonts(_.getFonts());x.setFonts({...x.getFonts(),..._.getVariationsByIdentifier()});return b.load().then(()=>{const D=T.getImagePaths().map(O=>({path:O,fullPath:this._ui.getAssetPath(O),image:null}));return x.loadImages(D).then(()=>{T.onImagesLoaded();return t.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:zt.fromArray(c.rgba),width:u,seed:m,inverted:p,layout:T})})})}};Wc.version="3.1.0"});var Gc;var p2=d(()=>{ce();d2();Gc=class extends Hc{_serializeTextDesign(t,e){const r=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],true);r.color={rgba:r.color};const o=e.getLayout();if(o){r.identifier=o.constructor.identifier}return{type:"textdesign",options:r}}};Gc.version="3.1.0"});var q7={};ue(q7,{default:()=>Fx});var Fx;var Y7=d(()=>{m2();p2();Fx=class{constructor(t){this._editor=t}serialize(...t){const e=new Gc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Wc(this._editor,t);return e.deserialize()}};Fx.version="3.1.0"});var Vc;var h2=d(()=>{ce();pl();nm();m2();Vc=class extends Wc{_deserializeTextDesign(t,e){const{options:r}=e;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:m,inverted:p}=r;let{identifier:h}=r;if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier}else if(h===nt.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier){h=nt.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier}const g="padding"in r?r.padding/u:-1;const _=new co(this._ui,this._getOptions("textdesign"));const x=new Ii(this._ui,{fonts:me.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:b}=t.constructor.TextDesignSprite;const w=this._ui.getFontLoader();const T=_.getLayoutByIdentifier(h);const D=new T;w.setFonts(x.getFonts());b.setFonts({...b.getFonts(),...x.getVariationsByIdentifier()});return w.load().then(()=>{const O=D.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return b.loadImages(O).then(()=>{D.onImagesLoaded();return t.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:zt.fromArray(c.rgba),width:u,seed:m,inverted:p,layout:D,padding:g})})})}};Vc.version="3.2.0"});var jc;var f2=d(()=>{p2();jc=class extends Gc{_serializeTextDesign(t,e){const r=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],true);r.color={rgba:r.color};const o=e.getLayout();if(o){r.identifier=o.constructor.identifier}r.padding*=r.width;return{type:"textdesign",options:r}}};jc.version="3.2.0"});var J7={};ue(J7,{default:()=>Rx});var Rx;var Z7=d(()=>{h2();f2();Rx=class{constructor(t){this._editor=t}serialize(...t){const e=new jc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Vc(this._editor,t);return e.deserialize()}};Rx.version="3.2.0"});var $c;var g2=d(()=>{h2();$c=class extends Vc{_deserializeOperation(t){return super._deserializeOperation(t)}_deserializeOrientationOperation(t){const{options:e}=t;const r=this._editor.operations.getOrCreate("orientation");if(!r)return Promise.resolve();r.set(e);return Promise.resolve(r)}};$c.version="3.4.0"});var Kc;var b2=d(()=>{Ix();f2();Kc=class extends jc{_serializeOperation(t,e){switch(t.constructor.identifier){case"artfilter":return this._serializeStyle(t);default:return super._serializeOperation(t,e)}}_serializeOrientationOperation(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],true)}}_serializeStyle(t){const{identifier:e,intensity:r,blendMode:o}=t.getOptions();const{tileEdgeLength:n,overlappingFactor:s}=t.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:e,intensity:r,blendMode:cm[o],tileEdgeLength:n,overlappingFactor:s}}}};Kc.version="3.4.0"});var Q7={};ue(Q7,{default:()=>Ox});var Ox;var tN=d(()=>{g2();b2();Ox=class{constructor(t){this._editor=t}serialize(...t){const e=new Kc(this._editor);return e.serialize(...t)}deserialize(t){const e=new $c(this._editor,t);return e.deserialize()}};Ox.version="3.4.0"});var Xc;var y2=d(()=>{ce();pl();nm();g2();Xc=class extends $c{_deserializeTextDesign(t,e){const{options:r}=e;const{position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:c,width:u,seed:m,inverted:p,identifier:h}=r;const g="padding"in r?r.padding/u:-1;const _=new co(this._ui,this._getOptions("textdesign"));const x=new Ii(this._ui,{fonts:me.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true});const{AssetManager:b}=t.constructor.TextDesignSprite;const w=this._ui.getFontLoader();const T=_.getLayoutByIdentifier(h);const D=new T;w.setFonts(x.getFonts());b.setFonts({...b.getFonts(),...x.getVariationsByIdentifier()});return w.load().then(()=>{const O=D.getImagePaths().map(k=>({path:k,fullPath:this._ui.getAssetPath(k),image:null}));return b.loadImages(O).then(()=>{D.onImagesLoaded();return t.createTextDesign({position:o,rotation:n,flipHorizontally:s,flipVertically:a,text:l,color:zt.fromArray(c.rgba),width:u,seed:m,inverted:p,layout:D,padding:g})})})}};Xc.version="3.5.0"});var qc;var _2=d(()=>{b2();qc=class extends Kc{};qc.version="3.5.0"});var eN={};ue(eN,{default:()=>Ax});var Ax;var iN=d(()=>{y2();_2();Ax=class{constructor(t){this._editor=t}serialize(...t){const e=new qc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Xc(this._editor,t);return e.deserialize()}};Ax.version="3.5.0"});var Yc;var x2=d(()=>{ce();y2();Yc=class extends Xc{_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=nt.Operations;return super._deserializeAdjustmentsOperation(t).then(r=>{if(!r)return null;const{options:o}=t;const n="sharpness";const s={};if(typeof o[n]==="undefined")return;const{minValue:a,midValue:l,maxValue:c}=e.prototype.availableOptions[n];let u=o[n];u=u<0?l+(l-a)*u:l+(c-l)*u;s[n]=u;r.set(s);return r})}};Yc.version="3.6.0"});var Jc;var v2=d(()=>{_2();Jc=class extends qc{_serializeAdjustmentsOperation(t){const e=super._serializeAdjustmentsOperation(t);const r="sharpness";const{availableOptions:o}=t;const n={};const s=o[r];const a=t.getOption(r);const{minValue:l,midValue:c,maxValue:u}=s;n[r]=a<=c?(a-l)/(c-l)-1:(a-c)/(u-c);e.options={...e.options,...n};return e}};Jc.version="3.6.0"});var rN={};ue(rN,{default:()=>Bx});var Bx;var oN=d(()=>{x2();v2();Bx=class{constructor(t){this._editor=t}serialize(...t){const e=new Jc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Yc(this._editor,t);return e.deserialize()}};Bx.version="3.6.0"});var Zc;var C2=d(()=>{Mn();x2();Zc=class extends Yc{deserialize(){return this._validateVersion().then(()=>this._deserializeAssetLibrary()).then(()=>this._deserializeInputImage()).then(()=>this._deserializeOperations())}_deserializeAssetLibrary(){return new Promise((t,e)=>{const r=this._data;if(!r.assetLibrary){t();return}const{assets:o}=r.assetLibrary;const n=[];for(const s in o){n.push(this._deserializeCustomAssets(s,o[s]))}return Promise.all(n).then(()=>{t()}).catch(s=>{console.error(s);e(s)})})}_deserializeCustomAssets(t,e){switch(t){case"stickers":return this._deserializeCustomStickerAssets(e);default:return Promise.reject(new Error(`Unknown asset type: ${t}`))}}_deserializeCustomStickerAssets(t){let e="none";const r=this._editor.getOptions().editor;if(r&&r.controlsOptions&&r.controlsOptions.sticker){e=r.controlsOptions.sticker.customStickerTintMode||"none"}const o=t.map(n=>{return new Promise((s,a)=>{const{identifier:l,raster:c}=n;const u=n.svg!==void 0;let m=`data:${c.type};base64,${c.data}`;let p=new Ki;p.onload=()=>{const h=this._editor.getSDK();p=h.correctExifOrientation(p);if(p.toDataURL){m=p.toDataURL()}let g={data:"",width:1,height:1};if(true){g=this._stickerManager.renderStickerThumbnailFromImage(p)}const _={identifier:l,defaultName:n.name||"",tintMode:e,images:{mediaBase:{uris:[m],rawData:true,isSVG:u,width:p.width,height:p.height},mediaThumb:{uris:[g.data],rawData:true,width:g.width,height:g.height}}};if(u){const x=`data:image/svg+xml;base64,${n.svg.data}`;_.images.mediaBase.uris.push(x)}s(_)};p.onerror=()=>{a(new Error(`Invalid base64 data: ${m}`))};p.src=m})});return Promise.all(o).then(n=>{const s=this._editor.getDynamicAssetsLibrary();s.setAssets("sticker",n);this._stickerManager.reload()})}};Zc.version="3.7.0"});var Qc;var S2=d(()=>{v2();Qc=class extends Jc{serialize(t={}){return super.serialize(t).then(e=>{return this._serializeAssetLibrary(e).then(r=>{return r})})}_serializeAssetLibrary(t){if(!this._editor.getDynamicAssetsLibrary){return Promise.resolve(t)}const e=this._editor.getDynamicAssetsLibrary();const r=this._serializeCustomStickerAssets(t,e);if(r.length===0){return Promise.resolve(t)}t.assetLibrary={assets:{stickers:r}};return Promise.resolve(t)}_serializeCustomStickerAssets(t,e){const r=e.getAssets("sticker");if(r.length===0){return[]}const o=t.operations.filter(a=>{return a.type==="sprite"}).flatMap(a=>a.options.sprites).filter(a=>a.type==="sticker").map(a=>a.options.identifier);const n={};o.forEach(a=>{n[a]=true});const s=r.filter(a=>{return n[a.identifier]});return s.map(a=>{const{identifier:l,defaultName:c,images:u}=a;const m=u.mediaBase.uris[0];const{isSVG:p}=u.mediaBase;const h=/^data:(image\/(jpeg|png));base64,(.*)$/g;const g=h.exec(m);const _=g[1];const x=g[3];const b={identifier:l,name:c,raster:{type:_,data:x}};if(c){b.name=c}if(p){b.svg={data:u.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}}return b})}};Qc.version="3.7.0"});var nN={};ue(nN,{default:()=>Px});var Px;var sN=d(()=>{C2();S2();Px=class{constructor(t){this._editor=t}serialize(...t){const e=new Qc(this._editor);return e.serialize(...t)}deserialize(t){const e=new Zc(this._editor,t);return e.deserialize()}};Px.version="3.7.0"});var tu;var w2=d(()=>{C2();tu=class extends Zc{};tu.version="3.8.0"});var eu;var T2=d(()=>{S2();eu=class extends Qc{_serializeSticker(t,e){const r=super._serializeSticker(t,e);r.options.tintMode=e.getTintMode();return r}};eu.version="3.8.0"});var aN={};ue(aN,{default:()=>Mx});var Mx;var lN=d(()=>{w2();T2();Mx=class{constructor(t){this._editor=t}serialize(...t){const e=new eu(this._editor);return e.serialize(...t)}deserialize(t){const e=new tu(this._editor,t);return e.deserialize()}};Mx.version="3.8.0"});var iu;var k2=d(()=>{ce();w2();iu=class extends tu{_deserializeTransformOperation(t){return super._deserializeCropOperation(t).then(e=>{if(!e)return;const r=Yt.Array.find(this._data.operations,o=>o.type==="orientation");if(r){const{options:o}=r;e.rotate(o.rotation);if(o.flipHorizontally){e.flip("horizontal");e.setRotation(e.getRotation()*-1)}if(o.flipVertically){e.flip("vertical");e.setRotation(e.getRotation()*-1)}}e._ratio=null;return e})}_deserializeText(t,e){const{options:r}=e;const{fontSize:o,lineHeight:n,fontIdentifier:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:m}=r;const p=this._ui.getFontLoader();let h=this._fontManager.getVariationByIdentifier(s);if(!h){h=this._fontManager.getDefaultVariation()}else{p.setFonts([h.getFont()])}return p.load().then(()=>{const g=t.getInputDimensions(false);const _=g.min();const x=g.x;const b=g.y;const w=c*_/x;const T=o*_/b;const D=t.createText({fontSize:T,lineHeight:n,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:l,maxWidth:w,text:r.text,color:zt.fromArray(u.rgba),backgroundColor:zt.fromArray(m.rgba),position:It.fromObject(r.position)});D._edited=true;return D})}};iu.version="3.9.0"});var cN,ru;var I2=d(()=>{u2();T2();cN=Math.PI*2;ru=class extends eu{_serializeTransformOperation(t){const{operations:e}=this._editor;if(e.exists("orientation")){t=t.clone();const n=e.get("orientation");if(n.getFlipVertically()){t.flip("vertical");t.setRotation(t.getRotation()*-1)}if(n.getFlipHorizontally()){t.flip("horizontal");t.setRotation(t.getRotation()*-1)}t.rotate(-n.getRotation())}const r=t.serializeOptions(["start","end","rotation","textureScale"],true);r.rotation=(r.rotation+cN)%cN;if(r.textureScale!==1){r.dimensions=t.getNewDimensions(t.getInputDimensions(false))}delete r.textureScale;const o={type:"transform",options:r};if(t._ratio){let n;if(t._ratio instanceof Nc){n=t._ratio.getIdentifier()}else{n=t._ratio.identifier}o.options.meta={identifier:n}}delete o.options.scale;return o}_serializeText(t,e){const r=t.getInputDimensions(false);const o=super._serializeText(t,e);o.options.fontSize=o.options.fontSize*r.y/r.min();return o}};ru.version="3.9.0"});var uN={};ue(uN,{default:()=>Lx});var Lx;var dN=d(()=>{k2();I2();Lx=class{constructor(t){this._editor=t}serialize(...t){const e=new ru(this._editor);return e.serialize(...t)}deserialize(t){const e=new iu(this._editor,t);return e.deserialize()}};Lx.version="3.9.0"});var Hh;var mN=d(()=>{k2();Hh=class extends iu{};Hh.version="3.12.0"});var Wh;var pN=d(()=>{I2();Wh=class extends ru{_serializeCustomStickerAssets(t,e){const r=e.getAssets("sticker");if(r.length===0){return[]}const o=t.operations.filter(a=>{return a.type==="sprite"}).flatMap(a=>a.options.sprites).filter(a=>a.type==="sticker").map(a=>a.options.identifier);const n={};o.forEach(a=>{n[a]=true});const s=r.filter(a=>{return n[a.identifier]});return s.map(a=>{const{identifier:l,defaultName:c,images:u}=a;const m=u.mediaBase.uris[0];const{isSVG:p}=u.mediaBase;const h=/^data:(image\/(jpeg|png|gif));base64,(.*)$/g;const g=h.exec(m);const _=g[1];const x=g[3];const b={identifier:l,name:c,raster:{type:_,data:x}};if(c){b.name=c}if(p){b.svg={data:u.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}}return b})}};Wh.version="3.12.0"});var hN={};ue(hN,{default:()=>zx});var zx;var fN=d(()=>{mN();pN();zx=class{constructor(t){this._editor=t}serialize(...t){const e=new Wh(this._editor);return e.serialize(...t)}deserialize(t){const e=new Hh(this._editor,t);return e.deserialize()}};zx.version="3.12.0"});var gN,bN;var yN=d(()=>{ZT();w7();pl();wo();ce();T7();k7();gN=class extends Lh{constructor(t,e,r,o=false){super();this._ui=t;this._options=e;this._mediator=r;this._shallow=o;if(!o){this._initSDK();this.operations=new fx(this,this._sdk,this._mediator)}}_initFonts(){const t=Yt.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:false,availableVariations:null});this._fontManager=new Ii(this._ui,t);const e=this._fontManager.getFonts();const r=this._ui.getFontLoader();r.setFonts(e);r.load()}setImage(t=this._options.editor.image,e=true){if(e){this.reset()}let r=null;r=this._sdk.parseExif(t);this._setImage(t,r)}_initSDK(){const{logLevel:t,displayWelcomeMessage:e,debug:r,license:o,crossOrigin:n,watermark:s}=this._options;const{smoothDownscaling:a,smoothUpscaling:l,preferredRenderer:c,pixelRatio:u,transparent:m,clearColor:p}=this._options.editor;let h;if(Array.isArray(p)){h=zt.fromArray(p)}else if(typeof p==="string"){h=zt.fromHex(p)}else if(p instanceof zt){h=p.clone()}const g={logLevel:t,debug:r,displayWelcomeMessage:e,pixelRatio:u,smoothDownscaling:a,smoothUpscaling:l,transparent:m,crossOrigin:n,clearColor:h,license:o,watermark:s};this._sdk=new nt(c,g)}getMaxMegapixels(){const{maxMegaPixels:t}=this._options.editor;return t}getCrossOrigin(){return Yt.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(t=false){return this._sdk.getOutputDimensions(t)}getOutputTextureDimensions(t=false){return this._sdk.getOutputTextureDimensions(t)}getFinalDimensions(t=false){return this._sdk.getFinalDimensions(t)}_setImage(t=this._options.editor.image,e=null){this._sdk.setAllOperationsToDirty();this._options.editor.image=t;this._sdk.setImage(t,e)}_ensureImageIsResized(){const t=this._sdk.getImage();const e=this._sdk.getRenderer();const r=this.getMaxMegapixels();const o=r?r*1e6:null;const n=e.getMaxDimensions();const s=new gx(t,o,n);if(!this._resizedImage&&s.needsResize()){return s.resize().then(({canvas:a,dimensions:l,reason:c})=>{this._resizedImage=a;this._sdk.setImage(a);return a})}return Promise.resolve(t)}export(t=false){if(this._watermarkOperation){this._watermarkOperation.setEnabled(false)}this._sdk.setAllOperationsToDirty();return this._ensureImageIsResized().then(e=>{const r=this._options.editor.export;const o=new hx(this._sdk,r,t);return o.export().then(n=>{this.emit("export",n);this._mediator.emit(me.EVENTS.EXPORT,n,this);if(this._watermarkOperation){this._watermarkOperation.setEnabled(true);this._sdk.render()}this._sdk.setAllOperationsToDirty();return n})})}broadcastTransform(t,e){const r=new nt.Operations.TransformOperation.TransformChange(t,e);const o=["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"];o.forEach(n=>{const s=this.operations.get(n);if(!s){return}s.transform(r)})}broadcastFlip(t){const e=["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"];e.forEach(r=>{const o=this.operations.get(r);if(!o){return}o.flip(t)})}broadcastRotate(t){const e=["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"];e.forEach(r=>{const o=this.operations.get(r);if(!o){return}o.rotate(t)})}_initSerializers(){this._serializers={"1.0.0":(z7(),Mi(L7)).default,"1.0.1":(H7(),Mi(N7)).default,"2.0.0":($7(),Mi(j7)).default,"3.0.0":(X7(),Mi(K7)).default,"3.1.0":(Y7(),Mi(q7)).default,"3.2.0":(Z7(),Mi(J7)).default,"3.4.0":(tN(),Mi(Q7)).default,"3.5.0":(iN(),Mi(eN)).default,"3.6.0":(oN(),Mi(rN)).default,"3.7.0":(sN(),Mi(nN)).default,"3.8.0":(lN(),Mi(aN)).default,"3.9.0":(dN(),Mi(uN)).default,"3.12.0":(fN(),Mi(hN)).default}}serialize(t={},e="3.12.0"){const r=this._serializers[e];if(!r){return Promise.reject(new Error(`No serializer for version ${e} found.`))}const o=new r(this);return o.serialize(t)}deserialize(t){const e=this._serializers[t.version];if(!e){return Promise.reject(new Error(`No serializer for version ${t.version} found.`))}const r=new e(this);return r.deserialize(t)}save(t=false,e=false){const r=this._options.editor.save;return this.serialize({image:e}).then(o=>{const n=JSON.stringify(o,null,2);if(t){const s=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(n))}`;Oc.downloadDataURL(s,r.fileBasename)}return n})}reset(){this._sdk.reset();this.operations.reset()}dispose(){this.stop();if(this._resizedImage){jt(this._resizedImage)}this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}};bN=gN});var Xs;var _N=d(()=>{ce();vd();YT();pl();nm();yN();xx();Xs=class extends Lh{constructor(t={}){super();this._mediator=new Lh;this._fontLoader=new hl(this);this._options=t;this._initOptions();this._initEvents();this._disposed=false;this._isReady=false;this._editor=new bN(this,this._options,this._mediator);if(this._options.editor.image){this._editor.setImage(this._options.editor.image)}this._mediator.once(me.EVENTS.EDITOR_READY,()=>{this._isReady=true});q.setLevel(this._options.logLevel)}export(...t){return this._editor.export(...t)}serialize(...t){return this._editor.serialize(...t)}deserialize(t){return this._editor.deserialize(t)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(t){if(!this._isReady){this._mediator.once(me.EVENTS.EDITOR_READY,t)}else{t()}}createFilter(t){const e=new Fc(this,this._getOptions("filter"));return e.instantiateFilterWithIdentifier(t)}getTextDesignLayoutByID(t){const e=new co(this,this._getOptions("textDesign"));return new(e.getLayoutByIdentifier(t))}getTextDesignAssetManager(){return nt.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){const t=new Ii(this,{fonts:me.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:true,isTextDesign:true});return t}_getOptions(t){const e=this.getEditor();const{controls:r}=e;let o={};if(r&&r.get(t)){o=r.get(t).defaultOptions}const n=e.getOptions();return Yt.deepDefaults({},n.editor.controlsOptions[t]||{},o)}_initOptions(){this._options=Yt.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:false,preloader:true,autoRun:true});this._options.editor=Yt.defaults(this._options.editor||{},{enableZoom:true,enableDrag:true,enableExport:true,enableKeyboardControls:true,enablePositionSnapping:true,enableRotationSnapping:true,enableSave:false,enableLoad:false,pixelRatio:Math.max(typeof window!=="undefined"&&window.devicePixelRatio||1,1),preferredRenderer:"webgl",transparent:true,clearColor:[0,0,0,0],displayResizeMessage:true,maxMegaPixels:{},displayCloseButton:false,undoMode:"global",defaultControl:"filter",forceCrop:false,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame"],controlsOptions:{focus:{highQualityCanvasBlur:false}}});this._options.editor.snappingOptions=Yt.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}});this._options.editor.snappingOptions.position=Yt.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20});this._options.editor.snappingOptions.position.padding=Yt.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1});this._options.editor.snappingOptions.rotation=Yt.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20});this._options.editor.controlsOptions.focus=Yt.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:false});this._options.editor.maxMegaPixels=Yt.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10});this._options.editor.export=Yt.defaults(this._options.editor.export||{},{format:"image/png",type:ml.IMAGE,download:true,fileBasename:"photoeditorsdk-export",quality:.8});this._options.editor.save=Yt.defaults(this._options.editor.save||{},{format:"text/json",download:true,fileBasename:"photoeditorsdk-save"});this._options.extensions=Yt.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]});this._options.assets=Yt.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null});if(!(this._options.editor.image instanceof window.Image)){const t=new window.Image;if(this._options.editor.image){t.src=this._options.editor.image;this._options.editor.image=t}}}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(t){this._editor.setImage(t)}getAssetPath(t,e=false,r=false){let{baseUrl:o,resolver:n}=this._options.assets;let s=`${o}/${t}`;n=n||(u=>{return u});if(t.match(/(ftp|http|https):\/\//)){s=t}const a=t.replace(/assets\//,"").split("/");const l=a[0];let c={};switch(l){case"art-filters":c={identifier:a[1],type:a[2].split(".")[0]};return n("art-filter",c);case"filters":c={identifier:a[1].replace(/\.png$/g,"")};return n("filter",c);case"fonts":c={identifier:a[1].replace(/\.(woff|otf|ttf)$/g,"")};return n("font",c);case"frames":c={identifier:a[1],filename:a[2]};return n("frame",c);case"overlays":c={identifier:a[1].replace(/\.(png|jpg|jpeg)$/g,"")};return n("overlay",c);case"stickers":{const u=a[3].endsWith(".svg");const m=a[3]==="thumbs";c={category:a[1],identifier:(u?a[3]:a[4]).replace(/\.(png|svg)$/g,""),variant:u?"svg":m?"thumb":"base"};return n("sticker",c)}case"text-design":c={type:a[1]==="fonts"?"font":"image",identifier:a[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")};return n("text-design",c)}if(typeof n!=="undefined"&&n!==null){s=n(s)}return s}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed){throw new Error("This instance of PhotoEditorSDK is already disposed.")}this._disposed=true;this._disposeEvents()}render(t){return this.deserialize(t).then(()=>this.export())}};Xs.prototype.identifier="engine-wrapper";Xs.Constants=me;Xs.Events=me.EVENTS;Xs.Utils=Yi;Xs.JSONLoader=io;Xs.SDK=nt});var Gh=d(()=>{_N()});var st={};ue(st,{absoluteToRelativePoint:()=>ylt,absoluteToRelativeSize:()=>glt,getBaseLocalToWorldMatrix:()=>Ux,getLocalToParentMatrix:()=>vN,getLocalToWorldMatrix:()=>um,getPointInWorldSpace:()=>E2,getRotationBetweenCoordinateSpaces:()=>_lt,getScalarInWorldSpace:()=>plt,getSizeInOutputSpace:()=>hlt,getSizeInWorldSpace:()=>CN,pointFromSpaceToSpace:()=>Vh,rectTransformToAffineTransform:()=>F2,relativeToAbsolutePoint:()=>blt,relativeToAbsoluteSize:()=>flt,scalarFromSpaceToSpace:()=>D2,sizeFromSpaceToSpace:()=>mlt});function xN(i){return i.x!==void 0}function F2(i){return St.fromTRS(i.position.x,i.position.y,i.rotation,i.scale.x,i.scale.y)}function dlt(i){if(i.getBaseLocalToParentMatrix){return i.getBaseLocalToParentMatrix()}return F2(i.getTransform())}function Ux(i){const t=i.getParent();const e=dlt(i);if(t===void 0){return e}const r=Ux(t);return St.multiply(r,e)}function vN(i){if(i.getLocalToParentMatrix){return i.getLocalToParentMatrix()}return F2(i.getTransform())}function um(i){const t=i.getParent();const e=vN(i);if(t===void 0){return e}const r=um(t);return St.multiply(r,e)}function Vh(i,t,e,r=false){const o=t.type==="output"&&r?Ux(t):um(t);const n=e.type==="output"&&r?Ux(e):um(e);const s=St.getInverted(n);return St.transformPoint(s,St.transformPoint(o,i))}function D2(i,t,e){const r=new F(i,0);const o=new F(Vh(r,t,e));const n=new F(Vh(F.ZERO,t,e));return F.distance(n,o)}function mlt(i,t,e){const r=xN(i)?i.x:i.width;const o=xN(i)?i.y:i.height;const n=D2(r,t,e);const s=D2(o,t,e);return{width:n,height:s}}function E2(i,t){const e=um(t);return St.transformPoint(e,i)}function plt(i,t){const e=new F(i,0);const r=new F(E2(e,t));const o=new F(E2(F.ZERO,t));return F.distance(r,o)}function CN(i){const t=um(i);const e=i.getBounds();const r={x:e.width,y:0};const o={x:0,y:e.height};const n=new F(St.transformPoint(t,F.ZERO));const s=new F(St.transformPoint(t,r));const a=new F(St.transformPoint(t,o));const l=F.distance(n,s);const c=F.distance(n,a);return{width:l,height:c}}function hlt(i,t){const e=CN(i);const r=t.getTransform().scale;const o={x:1/r.x,y:1/r.y};const n={width:e.width*o.x,height:e.height*o.y};return n}function flt(i,t){const e=t.getBounds();return{width:i.width*e.width,height:i.height*e.height}}function glt(i,t){const e=t.getBounds();return{width:i.width/e.width,height:i.height/e.height}}function blt(i,t,e=true){const r=t.getBounds();return{x:i.x*r.width+(e?0:r.minX),y:i.y*r.height+(e?0:r.minY)}}function ylt(i,t,e=true){const r=t.getBounds();return{x:(i.x-(e?0:r.minX))/r.width,y:(i.y-(e?0:r.minY))/r.height}}function _lt(i,t){const e={x:1,y:0};const r=Vh(e,i,t,true);const o=Vh(F.ZERO,i,t,true);return Math.atan2(r.y-o.y,r.x-o.x)}var SN=d(()=>{z()});function Nx(i){return typeof i!=="string"&&!Array.isArray(i)&&i.a===void 0}function Hx(i){return typeof i!=="string"&&Array.isArray(i)&&i.length===3}function Wx(i){return typeof i!=="string"&&!Array.isArray(i)&&i.a!==void 0}function Gx(i){return typeof i!=="string"&&Array.isArray(i)&&i.length===4}function wN(i){return typeof i==="string"}var R2=d(()=>{});var TN=d(()=>{});var O2;var kN=d(()=>{z();O2=class{constructor(t,e){this.engine=e;this.transform=ie.IDENTITY;this.canvasPivot={x:0,y:0};this.previewQuality=1;this.canvas=t}get quality(){return this.previewQuality}setQuality(t){this.previewQuality=Math.min(Math.max(t,.01),1)}getTransform(){return this.transform}setTransform(t){this.transform=t}getPosition(){return this.transform.position}setPosition(t,e){let r;if(typeof t==="number"){r={x:t,y:e===void 0?t:e}}else{r=t}const{scale:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new ie(r,o,n))}getScale(){return this.transform.scale}setScale(t,e){let r;if(typeof t!=="number"){r=t}else{r={x:t,y:e===void 0?t:e}}const{position:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new ie(o,r,n))}getRotation(){return this.transform.rotation}setRotation(t){const{position:e}=this.transform;const{scale:r}=this.transform;this.setTransform(new ie(e,r,t))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(t,e){if(typeof t==="number"){this.canvasPivot={x:t,y:typeof e===void 0?t:e}}else{this.canvasPivot=t}}getCanvasBounds(){const t=this.canvasPivot;const{width:e,height:r}=this.canvas;return new Ve(-t.x*e,-t.y*r,e,r)}}});function Vx(i){return i.getTransform!==void 0}function IN(i){return i.getContainer!==void 0}var DN=d(()=>{});var EN=d(()=>{});var FN=d(()=>{});var RN=d(()=>{});var ON=d(()=>{});var AN=d(()=>{});var BN=d(()=>{});var PN=d(()=>{});var MN=d(()=>{});var LN=d(()=>{});var zN=d(()=>{});var UN=d(()=>{});var NN=d(()=>{});var HN=d(()=>{});var WN=d(()=>{});var GN=d(()=>{});var VN=d(()=>{});var A2=d(()=>{SN();R();R2();TN();kN();DN();EN();FN();RN();ON();AN();BN();PN();MN();LN();zN();UN();NN();HN();WN();GN();VN()});var B2;var jN=d(()=>{z();A2();B2=class extends wr{constructor(t){super();this.config=t}getOutputDimensions(){const t=this.getOutputContainer();if(!t){return{width:0,height:0}}return t.getResolution()}getSmallerOutputSide(){const t=this.getOutputContainer();if(!t){return 0}const e=t.getResolution();return Math.min(e.width,e.height)}convertPointFromPreviewIntoOutputSpace(t,e){const r=St.getInverted(st.rectTransformToAffineTransform(e));return St.transformPoint(r,t)}convertPointFromPreviewIntoWorldSpace(t,e,r){const o=St.getInverted(st.rectTransformToAffineTransform(e));const n=r?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix();const s=St.multiply(n,o);return St.transformPoint(s,t)}convertPointFromPreviewIntoFlippedPreviewSpace(t){const e=this.getOutputContainer().getFlipTransformMatrix();return St.transformPoint(e,t)}convertPointFromWorldIntoPreviewSpace(t,e){const r=st.rectTransformToAffineTransform(e);const o=St.getInverted(this.getOutputContainer().getLocalToParentMatrix());const n=St.multiply(r,o);return St.transformPoint(n,t)}convertPointFromOutputIntoPreviewSpace(t,e){const r=st.rectTransformToAffineTransform(e);return St.transformPoint(r,t)}getContainersAtPreviewPoint(t,e){const r=new Array;const o=this.convertPointFromPreviewIntoWorldSpace(t,e);const n=this.getRootContainers();for(const s of n){this.accumulateContainersAtWorldPointInHierarchy(o,s,r)}return r}isPreviewPointInContainer(t,e,r){const o=this.convertPointFromPreviewIntoWorldSpace(t,r);return this.isWorldPointInContainer(o,e)}isWorldPointInContainer(t,e){const r=st.getLocalToWorldMatrix(e);const o=St.getInverted(r);const n=St.transformPoint(o,t);return Ve.contains(e.getBounds(),n)}accumulateContainersAtWorldPointInHierarchy(t,e,r){if(this.isWorldPointInContainer(t,e)){r.push(e)}const o=e.getChildren();for(const n of o){if(Vx(n)){this.accumulateContainersAtWorldPointInHierarchy(t,n,r)}}}}});var cr=d(()=>{A2();jN()});var ni;var Wo=d(()=>{z();ni=class{constructor(t){this.engine=t;this.id=Ot()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){const{rootOperations:t}=this.engine;for(let e=0;e<t.length;e+=1){if(t[e].getID()===this.id){return e}}return-1}setIndexInParent(t){this.engine.moveIndex(this,t)}isValid(){return this.getIndexInParent()!==-1}}});var P2;var M2=d(()=>{Wo();P2=class extends ni{constructor(t,e,r){super(e);this.operation=r;this.type="adjustments";this.setProperties(t)}getProperties(){const t=this.operation.getOptions();const e=t.gamma-1;return{brightness:t.brightness||0,saturation:t.saturation||0,contrast:t.contrast||0,gamma:(e<0?2*e:e)||0,clarity:t.clarity||0,exposure:t.exposure||0,shadows:t.shadows*.5||0,highlights:t.highlights||0,whites:t.whites||0,blacks:t.blacks||0,temperature:t.temperature||0,sharpness:t.sharpness||0}}setProperties(t){if(t.gamma!==void 0){t.gamma=1+(t.gamma<0?.5*t.gamma:t.gamma)}if(t.shadows){t.shadows=t.shadows*2}this.operation.set(t)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}}});var ur;var dm=d(()=>{Gh();R2();ur=i=>{if(Wx(i)){return new nt.Color(i.r,i.g,i.b,i.a)}if(Gx(i)){return new nt.Color(i[0],i[1],i[2],i[3])}if(Nx(i)){return new nt.Color(i.r,i.g,i.b,1)}if(Hx(i)){return new nt.Color(i[0],i[1],i[2],1)}if(wN(i)){const[t,e,r]=i.match(/[0-9A-fa-f]{1,2}/g);return new nt.Color(parseInt(t,16)/255,parseInt(e,16)/255,parseInt(r,16)/255,1)}throw new Error("Invalid color type")}});var Vt;var gl=d(()=>{Vt=class{get x(){return this._x}get y(){return this._y}constructor(t=0,e=0){this._x=t;this._y=e}set(t,e){this._x=t;this._y=e;return this}clone(){return new Vt(this._x,this._y)}copy(t){this._x=t.x;this._y=t.y;return this}clamped(t=this,e=this){let r=typeof t==="number"?{x:t,y:t}:t;let o=typeof e==="number"?{x:e,y:e}:e;this._x=Math.max(r.x,this._x);this._y=Math.max(r.y,this._y);this._x=Math.min(o.x,this._x);this._y=Math.min(o.y,this._y);return this}divide(t,e){if(typeof t==="number"||t===null){this._x/=t;this._y/=typeof e==="undefined"?t:e}else{this._x/=t.x;this._y/=t.y}return this}subtract(t,e){if(typeof t==="number"||t===null){this._x-=t;this._y-=typeof e==="undefined"?t:e}else{this._x-=t.x;this._y-=t.y}return this}multiply(t,e){if(typeof t==="number"||t===null){this._x*=t;this._y*=typeof e==="undefined"?t:e}else{this._x*=t.x;this._y*=t.y}return this}add(t,e){if(typeof t==="number"||t===null){this._x+=t;this._y+=typeof e==="undefined"?t:e}else{this._x+=t.x;this._y+=t.y}return this}dot(t,e){if(typeof t==="number"||t===null){return this._x*t+this._y*(typeof e==="undefined"?t:e)}else{return this._x*t.x+this._y*t.y}}equals(t,e){if(typeof t==="number"||t===null){return t===this._x&&e===this._y}else{return t.x===this._x&&t.y===this._y}}flip(){let t=this._x;this._x=this._y;this._y=t;return this}round(){this._x=Math.round(this._x);this._y=Math.round(this._y);return this}ceil(){this._x=Math.ceil(this._x);this._y=Math.ceil(this._y);return this}floor(){this._x=this._x|0;this._y=this._y|0;return this}abs(){this._x=Math.abs(this._x);this._y=Math.abs(this._y);return this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(t){this._x=parseFloat(this._x.toFixed(t));this._y=parseFloat(this._y.toFixed(t));return this}asArray(t=false){if(t){return[this._y,this._x]}return[this._x,this._y]}static fromObject(t){return new Vt(t.x,t.y)}static fromSize(t){return new Vt(t.width,t.height)}static get NULL(){return new Vt(0,0)}}});var Lr;var bl=d(()=>{z();cr();gl();Lr=class{constructor(t){this.engine=t;this.id=Ot();this.transform=ie.IDENTITY;this.bounds=Ve.ZERO}getID(){return this.id}getParent(){const t=this.engine.getRootContainers();if(t.length===0||this.id===t[0].id){return void 0}return t[0]}getIndexInParent(){const{rootOperations:t}=this.engine;for(let e=0;e<t.length;e+=1){if(t[e].getID()===this.id){return e}}return-1}setIndexInParent(t){this.engine.moveIndex(this,t)}getChildren(){const t=this.engine.getRootContainers();if(t.length>0&&(this.id===t[0].id||this.id===this.engine.getOutputContainer().id)){return this.engine.rootOperations}return[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(t,e,r){if(typeof e==="number"){this.setPivotInternal(e,r);t.setPivot(new Vt(e,r))}else{this.setPivotInternal(e);t.setPivot(Vt.fromObject(e))}}setPivot(t,e){this.setPivotInternal(t,e)}getPivot(){const t=this.getBounds();return{x:-t.minX/t.width,y:-t.minY/t.height}}getTransform(){return this.transform}setTransform(t){this.transform=t}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(t,e){let r;if(typeof t==="number"){r={x:t,y:e===void 0?t:e}}else{r=t}const{scale:o}=this.transform;const{rotation:n}=this.transform;this.setTransform(new ie(r,o,n))}getScale(){return this.transform.scale}setScale(t,e){let r;if(typeof t!=="number"){r=t}else{r={x:t,y:e===void 0?t:e}}const{position:o,rotation:n}=this.transform;this.setTransform(new ie(o,r,n))}getRotation(){return this.transform.rotation}setRotation(t){const{position:e,scale:r}=this.transform;this.setTransform(new ie(e,r,t))}getSizeInWorldSpace(){return st.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return st.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(t){const e=this.getBounds();this.setScale(t.width/e.width,t.height/e.height)}setSizeInOutputSpace(t){const e=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:t.width/e.x,height:t.height/e.y})}isValid(){return this.getIndexInParent()!==-1}setPivotInternal(t,e){const r=this.getBounds();if(typeof t==="number"){this.setBoundsFromSize(r.width,r.height,{x:t,y:e})}else{this.setBoundsFromSize(r.width,r.height,t)}}setBoundsFromSize(t,e,r=this.getPivot()){this.bounds=new Ve(-r.x*t,-r.y*e,t,e)}}});var L2;var $N=d(()=>{z();cr();dm();bl();gl();L2=class extends Lr{constructor(t,e){super(e);this.type="drawing";this.drawing=t;this.operation=e.createSpriteOperation();this.sprite=this.operation.createBrush({});this.operation.addSprite(this.sprite);this.radialBrush=this.sprite._createRadialBrush();const r=e.getRootContainers()[0];const o=r.getBounds();this.bounds=new Ve(0,0,o.width,o.height);this.setTransform(ie.IDENTITY);this.operation.setDirty(true);this.setData(t)}beginStroke(t){if(this.currentStroke){throw new Error("A brush stroke has already been started but not finished.")}if(t.id!=="imgly_brush_radial"){throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.")}this.currentBrush=t;this.currentStroke={brush:t,path:{controlPoints:[]}};this.radialBrush.setColor(ur(t.color));this.radialBrush.setHardness(t.hardness);this.radialBrush.setSize(t.size);this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(t,e=true){if(!this.currentStroke||!this.currentBrush||!this.currentPath){throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"')}if(this.currentStroke.path.controlPoints.length){const l=this.currentStroke.path.controlPoints;const c=l[l.length-1];const u=this.currentBrush.size/10;const m=Math.sqrt(t.x-c.x**2+(t.y-c.y**2));if(m<u){return}}const r=this.engine.getOutputContainer();const o=this.engine.getRootContainers()[0];const n=st.pointFromSpaceToSpace(t,o,r,true);const s=st.absoluteToRelativePoint(n,r,false);const a=r.getBounds();this.currentPath.addControlPoint(Vt.fromObject(s));this.currentStroke.path.controlPoints.push(t);if(e){this.sprite.render(Vt.fromObject({x:a.width,y:a.height}))}}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush){return}if(this.currentStroke.path.controlPoints.length){this.drawing.strokes.push(this.currentStroke)}this.currentStroke=void 0;this.currentBrush=void 0;this.currentPath.setClosed(true);const t=this.engine.getOutputContainer().getBounds();this.sprite.render(Vt.fromObject({x:t.width,y:t.height}));this.currentPath=void 0}setData(t){this.drawing={...this.drawing,...t};if(this.drawing.strokes){this.drawing.strokes=[]}this.sprite.clearPersistCanvas();this.sprite.clearCanvas();this.sprite.setPaths([]);this.drawStrokes(t.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(t){t.forEach(e=>{this.beginStroke(e.brush);e.path.controlPoints.forEach(r=>{this.addPointToCurrentStroke(r,true)});this.endStroke()})}}});var z2;var U2=d(()=>{Wo();z2=class extends ni{constructor(t,e,r,o){super(o);this.filterOperation=e;this.type="duotone-filter";e.set({intensity:r.colorIntensity});e.set({filter:t});o.pesdk.setAllOperationsToDirty()}getProperties(){const t=this.filterOperation.getOptions();return{colorIntensity:t.intensity}}setProperties(t){const e=this.filterOperation.getOptions();let r=e.intensity;if(t.colorIntensity!==void 0){r=Math.min(Math.max(t.colorIntensity,0),1)}this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var N2;var KN=d(()=>{N2=class{constructor(t,e){this.engine=e;this.loaded=false;this.loading=false;this.asset={...t}}async load(){if(this.loaded){return Promise.resolve()}if(this.loading){return Promise.reject(new Error("Called Frame#load while it's already loading"))}this.loading=true;const{imageGroups:t}=this.asset;const e=[];["top","left","right","bottom"].forEach(r=>{if(!t[r]){return}const o=t[r];["start","mid","end"].forEach(n=>{if(!(n in o)){return}e.push(this.loadPart(r,n))})});return Promise.all(e).then(()=>{this.loaded=true;this.loading=false}).catch(()=>{this.loaded=false;this.loading=false})}getFrame(){return{...this.asset,defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI}}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||false}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}async loadPart(t,e){return new Promise((r,o)=>{const{imageGroups:n}=this.asset;const s=n[t][e];let a=s;if(typeof s!=="string"&&"image"in s){a=s.image}const l=new Image;l.addEventListener("load",()=>{if(typeof s!=="string"){this.asset.imageGroups[t][e].image=l}else{this.asset.imageGroups[t][e]=l}r(l)});l.addEventListener("error",()=>{o(new Error(`Failed to load image at ${l.src}`))});l.crossOrigin=this.engine.configuration.crossOrigin||"anonymus";l.src=this.engine.assetProvider.getAssetSource("frame",a)})}}});var H2;var XN=d(()=>{dm();Wo();H2=class extends ni{constructor(t,e,r){super(r);this.frameOperation=t;this.type="frame";this.setProperties(e);r.pesdk.setAllOperationsToDirty()}setProperties(t){this.props={...this.props,...t};if(typeof t.opacity==="number"){this.frameOperation.set({alpha:t.opacity})}if(t.tintColor){this.frameOperation.set({tintColor:ur(t.tintColor)})}if(t.width){const e=this.engine.getOutputContainer().getBounds();const r=Math.min(e.width,e.height);const o=t.width/r;this.frameOperation.set({scale:o})}this.frameOperation.setDirty(true)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}}});var W2;var G2=d(()=>{cr();Wo();W2=class extends ni{constructor(t,e,r){super(e);this.blurOperation=r;this.type="gaussian-blur";this.setProperties(t)}getProperties(){const t=this.engine.getOutputContainer();const e=t.getBounds();const r=Math.min(e.size.width,e.size.height);const o=st.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*r,t,this.getContainer());return{blurRadius:o}}setProperties(t){if(t.blurRadius!==void 0){const e=this.engine.pesdk.getOutputDimensions();const r=Math.min(e.x,e.y);const o=this.getContainer();const n=this.engine.getOutputContainer();const s=st.scalarFromSpaceToSpace(t.blurRadius,o,n);const a=s/r;this.blurOperation.set({blurRadius:a})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}}});var jx;var V2=d(()=>{z();cr();bl();jx=class extends Lr{constructor(t,e){super(e);this.data=t;this.type="image";this.dispose=()=>{var t;if(((t=this.data)==null?void 0:t.image)instanceof HTMLCanvasElement){jt(this.data.image)}};const r=e.configuration.downscaleOptions;if(!r){this.downscaleOptions={maxDimensions:{width:e.maxTextureDimension,height:e.maxTextureDimension}}}else{const{maxDimensions:n}=r;this.downscaleOptions={maxMegaPixels:r.maxMegaPixels,maxDimensions:{width:Math.min(e.maxTextureDimension,n?n.width:Number.MAX_VALUE),height:Math.min(e.maxTextureDimension,n?n.height:Number.MAX_VALUE)}}}this.setData(t);const{image:o}=this.data;this.bounds=new Ve(F.ZERO,{width:o.width,height:o.height})}setData(t){this.data={...this.data,...t};if(t.image){let{image:e}=t;let r;if(e instanceof HTMLImageElement){r=this.engine.pesdk.parseExif(e);if(r){const n=r.getTags();if(n&&n.Orientation){const s=n.Orientation!==1&&n.Orientation!==2;const a=[2,4,5,7].indexOf(n.Orientation)!==-1;if(s||a){if(xe()||Sr()||!CSS.supports("image-orientation","from-image")){const l=this.engine.pesdk.createOperation("exif-orientation",{},false);l.setTags(n);e=l.applyTo(e)}r.setOrientation(1);n.Orientation=1}}}}const o=new pp(e,this.downscaleOptions);o.on("imageDownscaled",({width:n,height:s})=>{this.engine.emit("imageDownscaled",{width:n,height:s})});o.on("beganImageDownscaling",()=>{this.engine.emit("beganImageDownscaling")});e=o.downscaleIfNecessary();this.data.image=e;this.engine.pesdk.setImage(e,r);this.setBoundsFromSize(e.width,e.height)}}getData(){return this.data}setPivot(t,e){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}}});var j2;var $2=d(()=>{z();cr();Wo();j2=class extends ni{constructor(t,e,r){super(e);this.props=t;this.blurOperation=r;this.type="linear-blur";this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props={...this.props,...t};const e=this.blurOperation.getOptions();const r=this.engine.getOutputContainer();const o=r.getBounds();const n=this.getContainer();const s=r.getBaseLocalToParentMatrix();const a=st.getBaseLocalToWorldMatrix(n);const l=St.multiply(St.getInverted(s),a);const c=Math.min(o.size.width,o.size.height);if(t.blurRadius!==void 0){const u=st.scalarFromSpaceToSpace(t.blurRadius,n,r);e.blurRadius=u/c}if(t.start!==void 0){const u=St.transformPoint(l,t.start);const m=st.absoluteToRelativePoint(u,r,false);e.controlPoint1=m}if(t.end!==void 0){const u=St.transformPoint(l,t.end);const m=st.absoluteToRelativePoint(u,r,false);e.controlPoint2=m}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}}});var K2;var X2=d(()=>{Wo();K2=class extends ni{constructor(t,e,r,o){super(o);this.filter=t;this.filterOperation=e;this.props=r;this.type="lut-filter";e.set({intensity:r.intensity});e.set({filter:t});o.pesdk.setAllOperationsToDirty()}getProperties(){const t=this.filterOperation.getOptions();return{intensity:t.intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(t){const e=this.filterOperation.getOptions();const r=typeof t.intensity==="number"?t.intensity:e.intensity;this.filterOperation.set({intensity:r})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}});var q2;var Y2=d(()=>{z();cr();Wo();q2=class extends ni{constructor(t,e,r){super(e);this.props=t;this.blurOperation=r;this.type="mirrored-blur";this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props={...this.props,...t};const e=this.blurOperation.getOptions();const r=this.engine.getOutputContainer();const o=r.getBounds();const n=this.getContainer();const s=r.getBaseLocalToParentMatrix();const a=st.getBaseLocalToWorldMatrix(n);const l=St.multiply(St.getInverted(s),a);const c=Math.min(o.size.width,o.size.height);if(t.blurRadius!==void 0){const u=st.scalarFromSpaceToSpace(t.blurRadius,n,r);e.blurRadius=u/c}if(t.gradientSize!==void 0){const u=st.scalarFromSpaceToSpace(t.gradientSize,n,r);const m=u/c;e.gradientSize=m}if(t.clearAreaWidth!==void 0){const u=st.scalarFromSpaceToSpace(t.clearAreaWidth,n,r);const m=u/c;e.size=m*.5}if(t.mirrorAxisOrigin!==void 0){const u=St.transformPoint(l,t.mirrorAxisOrigin);const m=st.absoluteToRelativePoint(u,r,false);e.start=m}if(t.mirrorAxisDirection!==void 0){const u=St.transformPoint(l,t.mirrorAxisDirection);const m=st.absoluteToRelativePoint(u,r,false);e.end=m}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}}});var $x;var J2=d(()=>{z();cr();bl();gl();$x=class extends Lr{constructor(t,e,r,o){super(o);this.settings=t;this.operation=e;this.flipOperation=r;this.type="output";this.flipTransform=St.IDENTITY;this.blockTransformUpdate=false;this.transformUpdateWhileBlock=false;this.bounds=new Ve({x:0,y:0},this.settings.resolution);this.setData(t)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=false;this.blockTransformUpdate=true}resumeChildrenUpdates(){this.blockTransformUpdate=false;if(this.transformUpdateWhileBlock){this.updateChildrenContainers()}}setData(t){this.settings={...this.settings,...t};if(t.resolution){this.setBoundsFromSize(t.resolution.width,t.resolution.height);this.setTransform(this.transform);this.operation.set({outputResolution:new Vt(t.resolution.width,t.resolution.height)})}if(t.flipHorizontally!==void 0){const e=t.flipHorizontally;this.updateFlipTransform();this.flipOperation.set({flipHorizontally:e})}if(t.flipVertically!==void 0){const e=t.flipVertically;this.updateFlipTransform();this.flipOperation.set({flipVertically:e})}this.operation.setDirty(true);this.flipOperation.setDirty(true)}getData(){return this.settings}setResolution(t){this.setData({resolution:t})}getResolution(){return this.getData().resolution}setTransform(t){if(this.transform.rotation!==t.rotation||this.transform.position!==t.position||this.transform.scale!==t.scale){this.transform=t;const e=this.flipTransform;this.flipTransform=St.IDENTITY;const r=this.engine.getRootContainers()[0];const o=st.pointFromSpaceToSpace({x:0,y:0},r,this);const n=-t.rotation;const s=Vt.fromObject(o).clone().subtract(Vt.fromObject(this.getBounds().origin));this.operation.set({pivot:new Vt(0,0),position:s,scale:new Vt(1/t.scale.x,1/t.scale.y),rotation:n});this.flipTransform=e;this.operation.setDirty(true);this.updateChildrenContainers()}}rotate(t,e){const r=this.getPivot();const o=this.getBounds();const n={x:o.midX,y:o.midY};const s=st.getPointInWorldSpace(n,this);this.setPivot(.5,.5);this.setPosition(s);this.setRotation(t);this.setResolution(e);const a={x:-e.width*(.5-r.x),y:-e.height*(.5-r.y)};const l=st.getPointInWorldSpace(a,this);this.setPivot(r);this.setPosition(l);this.updateChildrenContainers()}setPivot(t,e){super.setPivotInternal(t,e);this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return st.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){const t=st.rectTransformToAffineTransform(this.getTransform());return St.multiply(t,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return true}getOperation(){return this.operation}updateFlipTransform(){const{flipHorizontally:t,flipVertically:e}=this.settings;if(!t&&!e){this.flipTransform=St.IDENTITY}else{const r=this.getPivot();const o=this.getBounds();const n=t?-1:1;const s=t?-2*(r.x-.5)*o.width:0;const a=e?-1:1;const l=e?-2*(r.y-.5)*o.height:0;this.flipTransform=new St(n,0,0,a,s,l)}}updateChildrenContainers(){if(this.blockTransformUpdate){this.transformUpdateWhileBlock=true;return}this.engine.rootOperations.forEach(t=>{if(Vx(t)){t.updateTransform();if("updateData"in t){t.updateData()}}else if("updateProperties"in t){t.updateProperties()}})}}});var Kx;var Z2=d(()=>{Wo();Kx=class extends ni{constructor(t,e,r){super(r);this.overlayOperation=t;this.type="overlay";const o=e.blendMode||r.mapBlendMode(t.getBlendMode());t.set({blendMode:r.reverseMapBlendMode(o)});t.set({image:e.image});r.pesdk.setAllOperationsToDirty()}getProperties(){const t=this.overlayOperation.getOptions();return{image:t.image,blendMode:this.engine.mapBlendMode(t.blendMode),opacity:t.alpha}}setProperties(t){const e=this.overlayOperation.getOptions();if(typeof t.opacity==="number"){e.alpha=t.opacity}if(t.blendMode!==void 0){e.blendMode=this.engine.reverseMapBlendMode(t.blendMode)}this.overlayOperation.set(e);this.overlayOperation.setDirty(true)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(t){this.overlayOperation.setFlipHorizontally(t)}setFlipVertically(t){this.overlayOperation.setFlipVertically(t)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}}});var Q2;var tk=d(()=>{z();cr();Wo();Q2=class extends ni{constructor(t,e,r){super(e);this.props=t;this.blurOperation=r;this.type="radial-blur";this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props={...this.props,...t};const e=this.blurOperation.getOptions();const r=this.engine.getOutputContainer();const o=r.getBounds();const n=this.getContainer();const s=r.getBaseLocalToParentMatrix();const a=st.getBaseLocalToWorldMatrix(n);const l=St.multiply(St.getInverted(s),a);const c=Math.min(o.size.width,o.size.height);if(t.blurRadius!==void 0){const u=st.scalarFromSpaceToSpace(t.blurRadius,n,r);e.blurRadius=u/c}if(t.center!==void 0){const u=St.transformPoint(l,t.center);const m=st.absoluteToRelativePoint(u,r,false);e.position=m}if(t.radius!==void 0){const u=st.scalarFromSpaceToSpace(t.radius,n,r);const m=u/c;e.radius=m}if(t.gradientSize!==void 0){const u=st.scalarFromSpaceToSpace(t.gradientSize,n,r);const m=u/c;e.gradientRadius=m}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}}});var Xx;var qN=d(()=>{z();cr();dm();bl();gl();Xx=class extends Lr{constructor(t,e){super(e);this.data=t;this.type="sticker";let r=t.image;const o=this.engine.pesdk.parseExif(t.image);if(o){const s=o.getTags();if(s&&s.Orientation){const a=s.Orientation!==1&&s.Orientation!==2;const l=[2,4,5,7].indexOf(s.Orientation)!==-1;if(a||l){const c=this.engine.pesdk.createOperation("exif-orientation",{},false);c.setTags(s);r=c.applyTo(t.image);o.setOrientation(1);s.Orientation=1}}}const n=new pp(r,{maxMegaPixels:{desktop:10,mobile:5}});r=n.downscaleIfNecessary();this.operation=e.createSpriteOperation();this.sprite=this.operation.createSticker({identifier:"",image:r,position:new Vt(0,0),dimensions:new Vt(1,1),rotation:0,smoothDownscaling:false});this.operation.addSprite(this.sprite);this.bounds=new Ve({x:0,y:0},{width:r.width,height:r.height});this.setTransform(ie.IDENTITY);this.sprite.setPivot(new Vt(0,0));this.operation.setDirty(true);this.setData(t)}setData(t){this.data={...this.data,...t};if(t.id){this.id=t.id}if(qr(t.opacity)&&t.opacity>=0){this.sprite.setAlpha(t.opacity)}if(t.tintColor){this.sprite.setTintColor(ur(t.tintColor))}if(t.tintMode){this.sprite.setTintMode(t.tintMode)}this.operation.setDirty(true)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer();const r=this.getParent();const o={width:this.bounds.width*t.scale.x,height:this.bounds.height*t.scale.y};const n=st.sizeFromSpaceToSpace(o,r,e);this.sprite.setDimensions(Vt.fromSize(n));const s=st.pointFromSpaceToSpace(t.position,r,e,true);const a=st.absoluteToRelativePoint(s,e,false);this.sprite.setPosition(new Vt(a.x,a.y));const l=st.getRotationBetweenCoordinateSpaces(r,e);const c=t.rotation+l;this.sprite.setRotation(c);this.operation.setDirty(true)}setPivot(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)}getOperation(){return this.operation}setFlipHorizontally(t){this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}}});var mm,vlt,jh;var pm=d(()=>{mm=i=>{return 2*Math.PI-i};vlt=i=>{return-i};jh=({rotation:i,outputRotation:t=0,flipHorizontally:e,flipVertically:r})=>{let o=i;if(e){o=mm(o)}if(r){o=vlt(o)}return o+t}});function Clt(i,t){if(t){const e=1/t.unitsPerEm*i;const r=t.ascender*e;const o=t.descender*e;return r+Math.abs(o)}return i*1.1}function ou(i,t,e,r,o,n,s){i.font=`${e.fontStyle||"normal"} ${e.fontWeight||"normal"} ${r}px "${e.fontFamily}"`;const a=new qx(i);a.setText(t);a.setMaxWidth(n);const l=a.getLines().map(p=>{return p.replace(/\s+$/i,"")});const c=Clt(r,s);const u=c*o;const m=c/5;return{width:n+m*2,height:l.length*u+m*2}}var qx;var ek=d(()=>{qx=class{constructor(t){this.context=t;this.sourceLines=[];this.maxWidth=100}static buildWords(t){const e=[];let r="";const o=t.length;for(let n=0;n<o;n+=1){const s=t[n];r+=s;if(s===" "||s==="-"||n===o-1){e.push(r);r=""}}return e}getLines(){let t=[];let e=[];const r=this.sourceLines.length;for(let o=0;o<r;o+=1){const n=this.sourceLines[o];const s=qx.buildWords(n);const a=s.length;for(let l=0;l<a;l+=1){const c=s[l];const u=e.concat(c).join("").replace(/\s+$/i,"");const m=this.getWidth(u);if(m>this.maxWidth){if(e.length>0){t.push(e.join(""));e=[c]}const p=c.replace(/\s+$/i,"");if(this.getWidth(p)>this.maxWidth){const h=this.splitWord(c);t=t.concat(h.lines);if(h.rest){e=[h.rest]}}}else{e.push(c)}}t.push(e.join(""));e=[]}return t}splitWord(t){const e={lines:[],rest:null};const r=t.length;let o=[];for(let n=0;n<r;n+=1){const s=t[n];if(this.getWidth(o.concat(s).join(""))>this.maxWidth){if(o.length>0){e.lines.push(o.join(""))}o=[s]}else{o.push(s)}if(n===r-1&&o.length>0){e.rest=o.join("")}}return e}getWidth(t){return this.context.measureText(t).width}setText(t){this.sourceLines=t.split("\n")}setMaxWidth(t){this.maxWidth=t}}});var qs;var YN=d(()=>{z();pm();cr();dm();bl();ek();gl();qs=class extends Lr{constructor(t,e){super(e);this.text=t;this.type="text";if(!qs.measureContext){const l=document.createElement("canvas");qs.measureContext=l.getContext("2d")}this.operation=e.createSpriteOperation();const r=this.engine.getOutputContainer();const o=this.getParent();const n=r.getBounds();this.sprite=this.operation.createText({text:t.text,position:new Vt(0,0),rotation:0,fontSize:st.scalarFromSpaceToSpace(t.fontSize/n.height,o,r),lineHeight:t.lineHeight,fontIdentifier:t.fontIdentifier,alignment:t.alignment,color:ur(t.textColor),backgroundColor:ur(t.backgroundColor),maxWidth:st.scalarFromSpaceToSpace(t.width/n.width,o,r)});const s=e.assetProvider.getFontManager().getFontWithId(t.fontIdentifier);this.sprite.setFontFamily(s.fontFamily);this.sprite.setFontWeight(s.fontWeight||"normal");this.sprite.setFontStyle(s.fontStyle||"normal");this.sprite.setFontIdentifier(s.identifier);this.sprite.setTextMetrics(s.textMetrics);this.sprite.setPivot(new Vt(0,0));this.operation.addSprite(this.sprite);const a=ou(qs.measureContext,t.text,s,t.fontSize,t.lineHeight,t.width,s.textMetrics);this.bounds=new Ve(0,0,a.width,a.height);this.setTransform(ie.IDENTITY);this.operation.setDirty(true)}setData(t){this.text={...this.text,...t};const e=this.engine.assetProvider.getFontManager().getFontWithId(t.fontIdentifier||this.text.fontIdentifier);if(t.fontIdentifier){this.sprite.setFontFamily(e.fontFamily);this.sprite.setFontWeight(e.fontWeight||"normal");this.sprite.setFontStyle(e.fontStyle||"normal");this.sprite.setFontIdentifier(e.identifier);this.sprite.setTextMetrics(e.textMetrics)}if(t.id){this.id=t.id}if(t.text){this.sprite.setText(t.text)}if(t.fontSize){const o=this.engine.getOutputContainer();const n=this.getParent();const s=st.scalarFromSpaceToSpace(t.fontSize,n,o);const a=o.getBounds();this.sprite.setFontSize(s/a.height)}if(t.alignment){this.sprite.setAlignment(t.alignment)}if(t.lineHeight){this.sprite.setLineHeight(t.lineHeight)}if(t.textColor){this.sprite.setColor(ur(t.textColor))}if(t.backgroundColor){this.sprite.setBackgroundColor(ur(t.backgroundColor))}if(t.width){const o=this.engine.getOutputContainer();const n=this.getParent();const s=st.scalarFromSpaceToSpace(t.width,n,o);const a=o.getBounds();this.sprite.setMaxWidth(s/a.width)}const r=ou(qs.measureContext,this.text.text,e,this.text.fontSize,this.text.lineHeight,this.text.width,e.textMetrics);this.setBoundsFromSize(r.width,r.height);this.operation.setDirty(true)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer();const r=this.getParent();const o=st.pointFromSpaceToSpace(t.position,r,e,true);const n=st.absoluteToRelativePoint(o,e,false);this.sprite.setPosition(new Vt(n.x,n.y));const s=st.getRotationBetweenCoordinateSpaces(r,e);this.sprite.setRotation(t.rotation+s);this.operation.setDirty(true)}setPivot(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)}getOperation(){return this.operation}setFlipHorizontally(t){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:t}));this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setRotation(this.getFlippedRotation({flipVertically:t}));this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:t,flipHorizontally:e}){const r=t||this.getFlipVertically();const o=e||this.getFlipHorizontally();let n=this.getRotation();if(r||o){n=mm(n)}return n}}});var ik,nu;var JN=d(()=>{z();cr();dm();bl();gl();ik=1e3;nu=class extends Lr{constructor(t,e,r){super(r);this.textDesign=t;this.layout=e;this.type="text-design";this.currentLayoutSize=void 0;this.layoutID=e.identifier;this.operation=r.createSpriteOperation();const o=this.engine.getOutputContainer();const n=this.getParent();const s=o.getBounds();const a=Math.min(s.width,s.height);e.seed(t.seed);this.bounds=this.calculateBounds(this.textDesign,this.layout);const l=t.width;this.sprite=this.operation.createTextDesign({text:t.text,layout:e,inverted:t.inverted,color:ur(t.color),width:st.scalarFromSpaceToSpace(t.width/a,n,o),padding:t.padding/l,seed:t.seed});this.updatePivot();this.operation.addSprite(this.sprite);this.setTransform(ie.IDENTITY);this.operation.setDirty(true)}static stringify(t){return JSON.stringify(t,nu.serializer())}static serializer(){const t=[];const e=[];const r=(o,n)=>{if(t[0]===n)return"[Circular ~]";return`[Circular ~.${e.slice(0,t.indexOf(n)).join(".")}]`};return function o(n,s){const a=this;if(t.length>0){const l=t.indexOf(a);if(~l){t.splice(l+1);e.splice(l,Infinity,n)}else{t.push(a);e.push(n)}if(~t.indexOf(s)){s=r.call(a,n,s)}}else{t.push(s)}return s}}calculateBounds(t,e,r=true){const o=t.inverted&&r?Math.max(0,2*t.padding):0;const n=t.width/ik;if(this.currentLayoutSize===void 0){e.seed(t.seed);const s=e.generateLayoutData(t.text,ik);this.currentLayoutData=s;this.currentLayoutSize=s.getSize()}return new Ve(0,0,this.currentLayoutSize.width*n+o,this.currentLayoutSize.height*n+o)}findNextUniqueSeed(t,e,r){let o=r;const n=this.currentLayoutData?nu.stringify(this.currentLayoutData.getRows()):"";let s;for(let a=0;a<20;a+=1){e.seed(o);s=e.generateLayoutData(t.text,ik);if(n===nu.stringify(s.getRows())){o+=1}else{break}}e.seed(o);this.currentLayoutData=s;return o}setData(t){this.textDesign={...this.textDesign,...t};if(t.id){this.id=t.id}if(t.padding!==void 0){const e=this.textDesign.width;this.sprite.setPadding(t.padding/e)}else if(t.width){this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width}if(t.seed!==void 0){if(t.seed<0){t.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now());this.textDesign.seed=t.seed}this.currentLayoutSize=void 0;this.layout.seed(t.seed);this.sprite.setSeed(t.seed);this.sprite.setLayout(this.layout)}if(t.color){this.sprite.setColor(ur(t.color))}if(t.inverted!==void 0){this.sprite.setInverted(t.inverted)}if(t.text){this.currentLayoutSize=void 0;this.sprite.setText(t.text)}if(t.width){const e=this.engine.getOutputContainer();const r=this.getParent();const o=e.getBounds();const n=Math.min(o.width,o.height);const s=st.scalarFromSpaceToSpace(t.width/n,r,e);this.sprite.setWidth(s)}if(t.padding!==void 0||t.seed!==void 0||t.inverted!==void 0||t.text||t.width){const e=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(e.width,e.height);this.updatePivot()}this.operation.setDirty(true)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer();const r=this.getParent();if(t.scale.x!==1||t.scale.y!==1){throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.")}const o=st.pointFromSpaceToSpace(t.position,r,e,true);const n=st.absoluteToRelativePoint(o,e,false);this.sprite.setPosition(new Vt(n.x,n.y));const s=st.getRotationBetweenCoordinateSpaces(r,e);this.sprite.setRotation(t.rotation+s);this.operation.setDirty(true)}setPivot(t,e){if(typeof t==="number"){super.setPivot(t,e)}else{super.setPivot(t)}this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(t){this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){const t=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0;const e=new F(this.bounds.width-2*t,this.bounds.height-2*t);const r=this.getPivot();const o=new F(r.x*this.bounds.width,r.y*this.bounds.height);const n=new F(t,t);const s=o.subtract(n);const a=s.divide(e);this.sprite.setPivot(new Vt(a.x,a.y))}}});var si,Yx,hm;var ZN=d(()=>{Gh();wt();R();z();cr();M2();$N();U2();KN();XN();G2();V2();$2();X2();Y2();J2();Z2();tk();qN();YN();JN();gl();({BLEND_MODES:si}=nt.Operations.OverlayOperation);Yx="imgly_font_open_sans_bold";hm=class extends B2{constructor(t){super(t);this.previews=Array();this.rootOperationStack=[];this.deferredRenderQueue=[];this.operationStackOffset=1;this.enforceOperationOrder=()=>{this.refreshFlipIndex();this.refreshFrameIndex()};this.isSpriteTop=t=>{const e=this.rootOperationStack.findIndex(({id:o})=>t===o);let r=1;if(this.rootOperationStack.find(o=>o.type==="frame")){r+=1}return e+r===this.rootOperationStack.length};this.setWatermarkOpacity=t=>{const e=this.sdk.getOperationsStack();const r=e.getByIdentifier("watermark");if(r){r.set({alpha:t})}};var r,o;this.assetProvider=t.assetProvider||new yp;let e;if(((r=t==null?void 0:t.watermark)==null?void 0:r.watermarkURI)&&typeof t.watermark.watermarkURI==="string"&&t.watermark.watermarkURI.slice(0,5)==="data:"){e=t.watermark.watermarkURI}else if(((o=t==null?void 0:t.watermark)==null?void 0:o.watermarkURI)&&typeof t.watermark.watermarkURI==="string"&&t.watermark.watermarkURI.trim()){e=ln(t.watermark.watermarkURI)?t.watermark.watermarkURI:this.assetProvider.getPath(t.watermark.watermarkURI)}this.wrapper=new Xs({license:t.license,crossOrigin:t.crossOrigin,assets:{resolver:(n,s)=>{return this.resolveAssetForSDK(n,s)}},editor:{preferredRenderer:t.preferredRenderer,pixelRatio:1,clearColor:lt(t.backgroundColor)},watermark:{...lt(t.watermark),watermarkURI:e}});this.editor=this.wrapper.getEditor();this.sdk=this.editor.getSDK();this.sdk.setRenderMode("adapter");this.tempCanvas=document.createElement("canvas");this.sdk.setCanvas(this.tempCanvas);if(t.preferredRenderer==="webgl"){const n=document.createElement("canvas");const s=n.getContext("webgl")||n.getContext("experimental-webgl");this.maxTextureDimension=s.getParameter(s.MAX_TEXTURE_SIZE);jt(n)}else{this.maxTextureDimension=Infinity}}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){jt(this.tempCanvas);this.rootContainer.dispose();this.pesdk.dispose();this.wrapper.dispose()}render(t){return new Promise(e=>{const r=()=>{return new Promise(o=>{const{canvas:n}=t;const s=t.getTransform();const a=this.outputContainer.getPivot();const l=t.getCanvasBounds();const c=t.quality;const{tempCanvas:u}=this;this.sdk.setTextureQuality(c);const m=this.sdk.getOutputDimensions();u.width=m.x;u.height=m.y;this.sdk.getRenderer().resizeTo(new Vt(u.width,u.height));return this.sdk.render(true).then(()=>{const p=n.getContext("2d");p.clearRect(0,0,n.width,n.height);p.save();p.translate(-l.minX,-l.minY);p.translate(s.position.x,s.position.y);p.rotate(s.rotation);p.scale(s.scale.x,s.scale.y);p.translate(-a.x*u.width,-a.y*u.height);p.scale(1/t.quality,1/t.quality);p.drawImage(u,0,0);p.restore();e();this.deferredRenderQueue.shift();if(this.deferredRenderQueue.length){this.sdk.setAllOperationsToDirty();Promise.resolve(this.deferredRenderQueue[0]().then(o))}else{o()}})})};this.deferredRenderQueue.push(r);if(this.deferredRenderQueue.length===1){r()}})}createPreview(t){const e=new O2(t,this);this.previews.push(e);return e}async export(t="image",e="image/png",r=1,o=true,n=false){return new Promise(s=>{const a=()=>{return new Promise(l=>{return this.sdk.export(this.mapToRenderType(t),this.mapToImageFormat(e),r,o,n).then(c=>{s(c);this.deferredRenderQueue.shift();if(this.deferredRenderQueue.length){Promise.resolve(this.deferredRenderQueue[0]().then(l))}else{l()}})})};this.deferredRenderQueue.push(a);if(this.deferredRenderQueue.length===1){a()}})}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(t){if(t===this.rootContainer.getID()){return this.rootContainer}return this.rootOperationStack.find(e=>e.getID()===t)}findEffectByID(t){return this.rootOperationStack.find(e=>e.getID()===t)}addImage(t,e,r){if(this.rootContainer){throw new Error("A background image already exists - did you mean to use addSticker?")}const o=new jx(t,this);this.rootContainer=o;if(!this.outputContainer){const{width:n,height:s}=o.getBounds();const a={resolution:{width:n,height:s},flipHorizontally:false,flipVertically:false};const l=this.sdk.createOperation("output",{},false);const c=this.sdk.createOperation("flip",{},false);this.insertIntoOperationsStack(l,this.operationStackOffset-1);this.insertIntoOperationsStack(c,this.operationStackOffset);this.outputContainer=new $x(a,l,c,this)}return o}addSticker(t,e,r){if(!e){throw new Error("This engine does not support adding stickers as root elements.")}this.ensureContainerIsRoot(e);const o=new Xx(t,this);this.addToStackAtIndex(o,r);return o}addStickerFromAssets(t,e,r){if(!e){throw new Error("This engine does not support adding stickers as root elements.")}this.ensureContainerIsRoot(e);return new Promise((o,n)=>{const s=new Image;s.onload=()=>{const a={image:s,opacity:1};const l=new Xx(a,this);this.addToStackAtIndex(l,r);o(l)};s.onerror=a=>{n(a)};s.crossOrigin=this.config.crossOrigin||null;s.src=this.assetProvider.getAssetSource("sticker",t)})}addText(t,e,r){if(!e){throw new Error("This engine does not support adding text as root elements.")}const o=this.assetProvider.getFontManager();if(!o.isFontLoaded(t.fontIdentifier||Yx)){throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!")}this.ensureContainerIsRoot(e);const n={text:"",fontIdentifier:Yx,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100,...t};const s=new qs(n,this);this.addToStackAtIndex(s,r);return s}addTextWithFontLoading(t,e,r){if(!e){throw new Error("This engine does not support adding text as root elements.")}const o=this.assetProvider.getFontManager();const n=t.fontIdentifier||Yx;return new Promise((s,a)=>{o.loadFontWithIdentifier(n).then(()=>{this.ensureContainerIsRoot(e);const l={text:"",fontIdentifier:Yx,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100,...t};const c=new qs(l,this);this.addToStackAtIndex(c,r);s(c)}).catch(a)})}async addTextDesignAsync(t="imgly_text_design_blocks",e,r,o){if(!r){throw new Error("This engine does not support adding TextDesign as a root element.")}const n={seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:false,width:100,...e};const s=this.wrapper.getTextDesignLayoutByID(t);if(!s){throw new Error(`The layout could not be loaded for the given id: ${t}`)}const a=s.getImagePaths().map(h=>{const g=h.split("/").pop()||"";return{path:h,fullPath:this.assetProvider.getAssetSource("textdesign",g)}});const l=this.wrapper.getTextDesignAssetManager();const c=this.wrapper.getTextDesignFontManager();const u=c.getVariationsByIdentifier();l.setFonts(u);await l.loadImages(a);s.onImagesLoaded();const m=Object.keys(u);const p=this.assetProvider.getFontManager();return p.loadFontsWithIdentifiers(m).then(()=>{this.ensureContainerIsRoot(r);const h=new nu(n,s,this);this.addToStackAtIndex(h,o);return Promise.resolve(h)})}addDrawing(t,e,r){if(!e){throw new Error("This engine does not support DrawingContainers as root elements.")}this.ensureContainerIsRoot(e);const o=new L2(t,this);this.addToStackAtIndex(o,r);return o}addGaussianBlur(t,e,r){this.ensureContainerIsRoot(e);const o=new W2(t,this,this.sdk.createOperation("blur",{},false));this.addToStackAtIndex(o,r);return o}addRadialBlur(t,e,r){this.ensureContainerIsRoot(e);const o=new Q2(t,this,this.sdk.createOperation("radial-focus",{},false));this.addToStackAtIndex(o,r);return o}addMirroredBlur(t,e,r){this.ensureContainerIsRoot(e);const o=new q2(t,this,this.sdk.createOperation("mirrored-focus",{},false));this.addToStackAtIndex(o,r);return o}addLinearBlur(t,e,r){this.ensureContainerIsRoot(e);const o=new j2(t,this,this.sdk.createOperation("linear-focus",{},false));this.addToStackAtIndex(o,r);return o}addDuoToneFilter(t,e,r){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(t,e,r){this.ensureContainerIsRoot(e);const o=this.sdk.getOperationsStack();const n=o.getByIdentifier("filter");if(n&&n.getIdentifier()!==t){this.sdk.removeOperation(n)}const s=n||this.sdk.createOperation("filter",{identifier:t},false);return new Promise((a,l)=>{try{const c=this.assetProvider.getDuotoneFilterAsset(t);const u={colorIntensity:c.defaultIntensity||0};const m=new nt.Operations.FilterOperation.Filters.DuoToneFilter({intensity:u.colorIntensity,lightColor:nt.Color.fromHex(c.lightColor),darkColor:nt.Color.fromHex(c.darkColor)});const p=new z2(m,s,u,this);this.addToStackAtIndex(p,r);a(p)}catch(c){if(c){l(c)}}})}addLUTFilter(t,e,r){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(t,e,r){this.ensureContainerIsRoot(e);const o=this.sdk.getOperationsStack();const n=o.getByIdentifier("filter");if(n&&n.getIdentifier()!==t){this.sdk.removeOperation(n)}const s=n||this.sdk.createOperation("filter",{identifier:t},false);return this.getLutFilterImage(t).then(a=>{const l=this.assetProvider.getLUTFilterAsset(t);const c={horizontalTileCount:l.horizontalTileCount||5,verticalTileCount:l.verticalTileCount||5,intensity:l.defaultIntensity||1};const u=new nt.Operations.FilterOperation.Filters.ThreeDLUTFilter({...c,image:a});const m={...c,lutImage:new Image};const p=new K2(u,s,m,this);this.addToStackAtIndex(p,r);return p})}getLutFilterImage(t){return new Promise((e,r)=>{rS({src:this.assetProvider.getAssetSource("filter",t),crossOrigin:this.config.crossOrigin||null,key:"filter",resolve:e,reject:r})})}addAdjustments(t,e,r){this.ensureContainerIsRoot(e);const o=new P2(t,this,this.sdk.createOperation("adjustments",{},false));this.addToStackAtIndex(o,r);return o}addOverlay(t,e,r){this.ensureContainerIsRoot(e);const o=new Kx(this.sdk.createOperation("overlay",{},false),t,this);this.addToStackAtIndex(o,r);return o}addOverlayFromAssets(t,e,r){this.ensureContainerIsRoot(e);return new Promise((o,n)=>{rS({src:this.assetProvider.getAssetSource("overlay",t),crossOrigin:this.config.crossOrigin||null,key:"overlay",resolve:s=>{const a=this.sdk.getOperationsStack();const l=a.getByIdentifier("overlay");if(l&&l.getIdentifier()!==t){a.remove(l)}const c=l||this.sdk.createOperation("overlay",{},false);const u={image:s,opacity:1,blendMode:"normal"};const m=new Kx(c,u,this);this.addToStackAtIndex(m,r);o(m)},reject:n})})}addFrame(t,e,r){throw new Error("Not supported!")}async addFrameFromAssets(t,e,r){this.ensureContainerIsRoot(e);const o=this.assetProvider.getFrameAsset(t);if(!o){throw new Error(`The requested asset does not exist! ${t}`)}const n=new N2(o,this);await n.load();const s=this.getOutputContainer().getBounds();const a=Math.min(s.width,s.height);const l=this.sdk.createOperation("frame",{},false);l.setFrame(n.getFrame());const c={opacity:1,tintColor:[1,1,1],tintable:false,width:Math.max(1,.1*a),imageGroups:n.getFrame().imageGroups};const u=new H2(l,c,this);this.addToStackAtIndex(u,r);return Promise.resolve(u)}removeEffect(t){if(!t.isValid()){return}const e=t;const r=e.getOperation();this.sdk.removeOperation(r);this.sdk.setAllOperationsToDirty();this.rootOperationStack.splice(t.getIndexInParent(),1)}removeContainer(t){if(!t.isValid()||t.type==="output"){return}const e=t;const r=e.getOperation();this.sdk.removeOperation(r);this.sdk.setAllOperationsToDirty();this.rootOperationStack.splice(t.getIndexInParent(),1)}refreshOutputIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(t,this.operationStackOffset-1)}refreshFlipIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("flip");const e=this.sdk.getOperationsStack().getStack().length-1;if(t!==e){this.moveInOperationsStack(t,e)}}refreshFrameIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("frame");const e=this.sdk.getOperationsStack().getStack().length-1;if(t!==-1&&t!==e){this.moveInOperationsStack(t,e)}}mapToRenderType(t){switch(t){case"image":return nt.RenderType.IMAGE;case"data-url":return nt.RenderType.DATAURL;case"blob":return nt.RenderType.BLOB;case"ms-blob":return nt.RenderType.MSBLOB;default:return nt.RenderType.IMAGE}}mapToImageFormat(t){switch(t){case"image/png":return nt.ImageFormat.PNG;case"image/jpeg":return nt.ImageFormat.JPEG;default:return null}}mapBlendMode(t){switch(t){case si.NORMAL:return"normal";case si.OVERLAY:return"overlay";case si.HARD_LIGHT:return"hardLight";case si.SOFT_LIGHT:return"softLight";case si.MULTIPLY:return"multiply";case si.DARKEN:return"darken";case si.LIGHTEN:return"lighten";case si.SCREEN:return"screen";case si.COLOR_BURN:return"colorBurn";default:return"normal"}}reverseMapBlendMode(t){switch(t){case"normal":return si.NORMAL;case"overlay":return si.OVERLAY;case"hardLight":return si.HARD_LIGHT;case"softLight":return si.SOFT_LIGHT;case"multiply":return si.MULTIPLY;case"darken":return si.DARKEN;case"lighten":return si.LIGHTEN;case"screen":return si.SCREEN;case"colorBurn":return si.COLOR_BURN;default:return si.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},false)}moveIndex(t,e){const r=this.getSiblingIndex(t);if(r===-1){throw new Error("The item to be moved is not part of any stack.")}this.moveInStack(this.rootOperationStack,r,e);const o=this.operationStackOffset;this.moveInOperationsStack(r+o,e+o);this.enforceOperationOrder()}ensureContainerIsRoot(t){const e=t.getID();if(e!==this.rootContainer.getID()){throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}}addToStackAtIndex(t,e){if(e&&e<0){throw new Error(`The given index may not be negative: ${e}`)}if(e===void 0){this.rootOperationStack.push(t)}else{this.rootOperationStack.splice(e,0,t)}const r=this.rootOperationStack.length-1;let o=e!==void 0?e:r;o+=this.operationStackOffset;if(IN(t)){this.insertIntoOperationsStack(t.getOperation(),o)}else{this.insertIntoOperationsStack(t.getOperation(),o)}this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(t,e){const r=this.sdk.getOperationsStack().getStack();const o=r.length;const n=Math.max(Math.min(e,o),0);for(let s=o-1;s>=n;s-=1){const a=r[s];r[s+1]=a}r[n]=t;this.sdk.setAllOperationsToDirty();this.enforceOperationOrder()}moveInStack(t,e,r){const o=t.length;const n=Math.max(Math.min(e,o-1),0);const s=Math.max(Math.min(r,o-1),0);if(n===s){return}const a=t[n];if(n<s){for(let l=n+1;l<=s;l+=1){t[l-1]=t[l]}}else{for(let l=n-1;l>=s;l-=1){t[l+1]=t[l]}}t[s]=a}moveInOperationsStack(t,e){const r=this.sdk.getOperationsStack().getStack();const o=r.length;const n=Math.min(Math.max(0,t),o-1);const s=Math.min(Math.max(0,e),o-1);if(n===s){return}const a=r[n];if(n<s){for(let l=n+1;l<=s;l+=1){r[l-1]=r[l]}}else{for(let l=n-1;l>=s;l-=1){r[l+1]=r[l]}}r[s]=a;this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(t){return t.getIndexInParent()}resolveAssetForSDK(t,e){e=e;switch(t){case"filter":return this.assetProvider.getAssetSource("filter",e.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",e.identifier);case"font":return this.assetProvider.getAssetSource("font",e.identifier);default:return""}return""}}});var Jx;var QN=d(()=>{Gh();R();Jx=class{constructor(t){this.isEmpty=false;this.isValid=false;this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel();this.areCustomAssetsAllowed=()=>this.isEmpty||!this.isValid||this.licenseChecker.areCustomAssetsAllowed();if(t&&t.length!==0){this.licenseChecker=new nt.LicenseChecker(t);this.isValid=this.licenseChecker.validate()}else if(t===""){this.isEmpty=true}}isToolAllowed(t){if(this.licenseChecker&&this.isValid&&t!=="customTool"){return this.licenseChecker.isToolAllowed(t)}return true}}});var tH=d(()=>{ZN();bl();Wo();V2();J2();G2();tk();Y2();$2();U2();X2();M2();Z2();ek();QN()});var Ln=d(()=>{tH();cr()});var rk,eH,zn,Go,dr,ok;var mr=d(()=>{Ln();rk=i=>{let t=Number(i).toString(16);if(t.length<2){t=`0${t}`}return t};eH=(i,t,e)=>{const r=rk(i*255);const o=rk(t*255);const n=rk(e*255);return`#${r}${o}${n}`};zn=i=>{if(Gx(i)){const[t,e,r,o]=i;return`rgba(${t*255}, ${e*255}, ${r*255}, ${o})`}if(Wx(i)){const{r:t,g:e,b:r,a:o}=i;return`rgba(${t*255}, ${e*255}, ${r*255}, ${o})`}if(Hx(i)){const[t,e,r]=i;return eH(t,e,r)}if(Nx(i)){const{r:t,g:e,b:r}=i;return eH(t,e,r)}return i};Go=i=>{return i.map(t=>({identifier:t.name,color:t.color,colorString:zn(t.color)}))};dr={black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],gray:[191/255,191/255,191/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]};ok={transparent:[0/255,0/255,0/255,0],black:[0/255,0/255,0/255,1],white:[255/255,255/255,255/255,1],blue:[102/255,134/255,255/255,1],skyBlue:[102/255,204/255,255/255,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[255/255,247/255,99/255,1]}});var Zx;var nk=d(()=>{R();Zx=["library",["transform","filter","adjustment"],["focus","frame","overlay"],["text","textdesign","sticker","brush"]]});var yl;var Qx=d(()=>{R();z();nk();yl={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:["undo","redo","export","close"],displayResizeWarning:false,displayCloseWarning:true,displayCanvasRendererWarning:true,displayToolControlBarTitle:true,displaySerializationModal:true,displayDiscardChangesWarning:true,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:NF()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:true,scaleImageToFit:true,restrictZoomOutToDefault:true,forceCrop:false,assetBaseUrl:"assets/",defaultTool:"filter",tools:Zx,snapping:new $g,filter:new qg,focus:new Yg,adjustment:new Xg,library:new ib,overlay:new rb,sticker:new ob,text:new nb,textdesign:new ab,frame:new Jg,brush:new sb,transform:new lb,export:{image:{exportType:"image",format:"image/png",quality:.9,enableDownload:true,transparent:true},filename:"photoeditorsdk-export"},custom:{},watermark:new Kg}});var iH=d(()=>{});var su;var tv=d(()=>{R();su={["brightness"]:0,["saturation"]:0,["contrast"]:0,["gamma"]:0,["clarity"]:0,["exposure"]:0,["shadows"]:0,["highlights"]:0,["whites"]:0,["blacks"]:0,["temperature"]:0,["sharpness"]:0}});var Ji=d(()=>{});var Ue;var Un=d(()=>{z();Ue=class{constructor(t,e){this.assets=[];this.entityMapper=t=>{if("items"in t){return this.categoryMapper(t)}return this.itemMapper(t)};this.categoryMapper=t=>t?{...t,thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}:null;this.itemMapper=t=>{return{...t,thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")}};this.getCategoryThumbnailURI=t=>{if(t.thumbnailURI){if(ln(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}return""};this.getItemThumbnailURI=t=>{var r;if((r=t.thumbnailURI)==null?void 0:r.trim()){if(ln(t.thumbnailURI)||t.thumbnailURI.substr(0,10)==="data:image"){return t.thumbnailURI}return this.config.getAssetPath(t.thumbnailURI||"")}const e=t[this.config.itemFallbackKey];if(!e)return"";return this.config.getAssetPath(e)};this.config=e;this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce((t,e)=>{if(Ue.isCategory(e)){return[...t,e]}return void 0},[]).filter(Boolean)}get items(){return this.assets.reduce((t,e)=>{if(Ue.isCategory(e)){return[...t,...e.items]}return[...t,e]},[]).filter(Boolean)}}});var Ys;var $h=d(()=>{Ys=class{constructor(t,e){this.from=t;this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}}});var Slt,fm;var rH=d(()=>{wt();R();$h();tv();Slt=new Ys(-1,1);fm=class{constructor(t){this.editAdjustments=({type:t,value:e})=>{const r=Slt.clamp(e);this.state[t]=r};this.reset=()=>{Ge(()=>{if(this.indexInContainer===-1){Object.keys(su).forEach(t=>{this.state[t]=su[t]});this.orderHelper.removeIndex("adjustment")}})};this.setAdjustmentEffect=t=>{const e=this.orderHelper.addIndex("adjustment");if(this.effect){this.effect.setProperties(t)}else{this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e)}return this.effect.getProperties()};this.removeAdjustmentEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.engineMediator=t;this.state=su}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get orderHelper(){return this.engineMediator.orderHelper}};f([Z],fm.prototype,"state",2);f([v],fm.prototype,"editAdjustments",2);f([v],fm.prototype,"reset",2)});var Jt;var oH=d(()=>{wt();R();z();Ji();Un();tv();rH();Jt=class{constructor(t){this.dirty=Z.box(false);this.isHistoryChanged=false;this.editAdjustments=({type:t,value:e})=>{this.isHistoryChanged=!(0,qe.default)(this.state[t],e);this.pureSetAdjustment({type:t,value:e});this.editor.render()};this.toolSnapshot=()=>{if((0,qe.default)(this.state,su)){this.dirty.set(false)}else{this.dirty.set(true)}if(this.isHistoryChanged){this.addSnapshot("edit","adjustment");this.isHistoryChanged=false}};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.toggleOptionSelection=t=>{this.selectedOption=t};this.pureSetAdjustment=({type:t,value:e})=>{const r=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:r[t]})};this.pureReset=()=>{this.dirty.set(false);this.adjustmentsStore.removeAdjustmentEffect();this.adjustmentsStore.reset();this.selectedOption=""};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if((0,qe.default)(t,this.state)){return}if((0,qe.default)(t,su)){this.pureReset();return}Ge(()=>{this.dirty.set(Object.values(t).some(e=>e!==0));Object.keys(t).forEach(e=>{this.pureSetAdjustment({type:e,value:t[e]})})})};this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)};this.editor=t;this.adjustmentsStore=new fm(this.editor.engineMediator);this.selectedOption="";const e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Ue(e,{...this.config,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("adjustment")})}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const t=this.items.find(e=>e?e.identifier===this.selectedOption:false);return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["adjustment"]}get locale(){return this.editor.configStore.locale["adjustment"]}};f([Z],Jt.prototype,"selectedOption",2);f([Z],Jt.prototype,"dirty",2);f([v],Jt.prototype,"editAdjustments",2);f([v],Jt.prototype,"toggleOptionSelection",2);f([v],Jt.prototype,"pureSetAdjustment",2);f([v],Jt.prototype,"pureReset",2);f([v],Jt.prototype,"reset",2);f([v],Jt.prototype,"updateStateFromHistory",2);f([v],Jt.prototype,"updateStateFromSerialization",2);f([C],Jt.prototype,"selectedAdjustmentType",1);f([C],Jt.prototype,"isDirty",1);f([C],Jt.prototype,"state",1);f([C],Jt.prototype,"selectedOptionLabel",1);f([C],Jt.prototype,"brightness",1);f([C],Jt.prototype,"saturation",1);f([C],Jt.prototype,"contrast",1);f([C],Jt.prototype,"gamma",1);f([C],Jt.prototype,"clarity",1);f([C],Jt.prototype,"exposure",1);f([C],Jt.prototype,"shadows",1);f([C],Jt.prototype,"highlights",1);f([C],Jt.prototype,"whites",1);f([C],Jt.prototype,"blacks",1);f([C],Jt.prototype,"temperature",1);f([C],Jt.prototype,"sharpness",1);f([C],Jt.prototype,"categories",1);f([C],Jt.prototype,"items",1);f([C],Jt.prototype,"config",1);f([C],Jt.prototype,"locale",1)});var sk=d(()=>{tv();oH()});var ev;var ak=d(()=>{ev={identifier:"identity",intensity:1,isDuotone:false}});var wlt,_l;var nH=d(()=>{wt();R();$h();ak();wlt=new Ys(0,1);_l=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeIfDuotone=t=>{this.state.isDuotone=t};this.changeIntensity=t=>{const e=wlt.clamp(t);this.state.intensity=e};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=ev.identifier;this.state.intensity=ev.intensity;this.removeIndex()}};this.setFilterEffect=({identifier:t,intensity:e,isDuotone:r})=>{const o=this.state;const n=()=>{this.changeIdentifier(t);this.changeIntensity(e);this.changeIfDuotone(r)};this.removeFilterEffect();const s=this.engineMediator.orderHelper.addIndex("filter");if(r){return new Promise((a,l)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,s).then(c=>{n();this.effect=c;this.effect.setProperties({colorIntensity:e});a()}).catch(c=>{this.fallbackOnError(o);l(c)})})}return new Promise((a,l)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,s).then(c=>{n();this.effect=c;this.effect.setProperties({intensity:e});a()}).catch(c=>{this.fallbackOnError(o);l(c)})})};this.removeFilterEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);if(this.indexInContainer===-1){this.effect=void 0}}};this.setEffectProperties=({intensity:t})=>{if(this.effect){if(this.state.isDuotone){this.effect.setProperties({colorIntensity:t})}else{this.effect.setProperties({intensity:t})}return this.effect.getProperties()}return null};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("filter")};this.fallbackOnError=t=>{this.changeIdentifier(t.identifier);this.changeIntensity(t.intensity);if(t.identifier==="identity"){this.removeIndex()}};this.engineMediator=t;this.state=ev}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};f([Z],_l.prototype,"state",2);f([v],_l.prototype,"changeIdentifier",2);f([v],_l.prototype,"changeIfDuotone",2);f([v],_l.prototype,"changeIntensity",2);f([v],_l.prototype,"reset",2)});var sH,iv,Ne;var aH=d(()=>{sH=y(id());wt();R();z();Ji();Un();nH();iv="identity";Ne=class{constructor(t){this.throttledRender=(0,sH.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFilter=async(t,e=1)=>{if(t!==this.identifier){const r=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)});if(this.selectedCategory===iv){this.selectedCategory=r}this.editor.render();this.addSnapshot("add","filter")}};this.changeIntensity=t=>{const e=this.isOptionDuoTone(this.identifier);const r=this.filterStore.setEffectProperties({intensity:t});if(r){const o=e?r.colorIntensity:r.intensity;this.filterStore.changeIntensity(o);this.throttledRender()}};this.setImageAndGetPreviews=async()=>{const{image:t}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(t);await this.getAllFilterPreview()};this.getAllFilterPreview=async()=>{const t=this.entityManager.items.map(n=>({identifier:n.identifier,isDuotone:this.isOptionDuoTone(n.identifier)}));const e=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);await this.editor.wait();const{config:r}=this;const o=this.editor.configStore.assetProvider.getAssets("filter").map(n=>{return{...n,items:n.items.map(s=>({...s,thumbnailURI:e[s.identifier]}))}});this.entityManager=new Ue(o,{...r,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderIntensity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.selectedCategory=iv;this.filterStore.removeFilterEffect();this.filterStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?iv:t};this.updateStateFromSerialization=({identifier:t,intensity:e})=>{const r=this.doesFilterAssetExist(t);if(r){const o=qu(r);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:o})}throw new Io(t)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.filterStore.setFilterEffect(t)};this.doesFilterAssetExist=t=>{return this.entityManager.items.find(e=>t===e.identifier)};this.isOptionDuoTone=t=>{const e=this.doesFilterAssetExist(t);if(e){return qu(e)}return false};this.editor=t;this.selectedCategory=iv;this.filterStore=new _l(this.editor.engineMediator);const{config:e}=this;const r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Ue(r,{...e,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["filter"]}get locale(){return this.editor.configStore.locale["filter"]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};f([Z],Ne.prototype,"selectedCategory",2);f([Z],Ne.prototype,"entityManager",2);f([v],Ne.prototype,"selectFilter",2);f([v],Ne.prototype,"changeIntensity",2);f([v],Ne.prototype,"pureReset",2);f([v],Ne.prototype,"reset",2);f([v],Ne.prototype,"toggleCategorySelection",2);f([v],Ne.prototype,"updateStateFromSerialization",2);f([v],Ne.prototype,"updateStateFromHistory",2);f([C],Ne.prototype,"state",1);f([C],Ne.prototype,"identifier",1);f([C],Ne.prototype,"intensity",1);f([C],Ne.prototype,"isDuotone",1);f([C],Ne.prototype,"selectedCategoryIdentifier",1);f([C],Ne.prototype,"isOptionSelected",1);f([C],Ne.prototype,"config",1);f([C],Ne.prototype,"locale",1);f([C],Ne.prototype,"categories",1);f([C],Ne.prototype,"items",1)});var lk=d(()=>{aH();ak()});var gm;var lH=d(()=>{gm=(i,t=0,e=3)=>{const r=Math.tan(t);const o=Math.sqrt(r**2+1);return{x:i.x+e/o,y:i.y+e*r/o}}});var rv,Tlt,klt,Ilt,Dlt,au;var ov=d(()=>{rv={blurRadius:40,gradientSize:.2};Tlt={start:{x:0,y:0},end:{x:0,y:0},...rv};klt={center:{x:0,y:0},radius:0,...rv};Ilt={origin:{x:0,y:0},rotation:0,size:0,...rv};Dlt=rv;au={identifier:"identity",linear:Tlt,radial:klt,mirrored:Ilt,gaussian:Dlt}});var Di;var cH=d(()=>{wt();R();z();ov();Di=class{constructor(t){this.selectFocus=(t,e)=>{Ge(()=>{this.state.identifier=t;if(e){this.state[t].blurRadius=e}})};this.changeBlurRadius=(t,e)=>{if(t!=="identity"){this.state[t].blurRadius=e}};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=au.identifier;if(this.state.identifier!=="identity"){this.state[this.state.identifier].blurRadius=au[this.state.identifier].blurRadius}}};this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y;this.state.linear.end.x=e.x;this.state.linear.end.y=e.y};this.setLinearStart=t=>{this.state.linear.start.x=t.x;this.state.linear.start.y=t.y};this.setLinearEnd=t=>{this.state.linear.end.x=t.x;this.state.linear.end.y=t.y};this.setRadialCenter=t=>{this.state.radial.center.x=t.x;this.state.radial.center.y=t.y};this.setRadialRadius=t=>{this.state.radial.radius=t};this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x;this.state.mirrored.origin.y=t.y};this.setMirroredRotation=t=>{this.state.mirrored.rotation=t};this.setMirroredSize=t=>{this.state.mirrored.size=t};this.getEffectProperties=()=>{if(this.effect){return this.effect.getProperties()}return null};this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order);this.updateLinearState(this.effect.getProperties())};this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order);this.updateGaussianState(this.effect.getProperties())};this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order);this.updateRadialState(this.effect.getProperties())};this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order);this.updateMirroredState(this.effect.getProperties())};this.updateFromEngineState=t=>{const e=this.getEffectProperties();if(e&&t!=="identity"){switch(t){case"linear":this.updateLinearState(e);break;case"radial":this.updateRadialState(e);break;case"mirrored":this.updateMirroredState(e);break;default:break}}};this.updateGaussianState=t=>{this.changeBlurRadius("gaussian",t.blurRadius)};this.updateMirroredState=t=>{const e=this.editor.worldToPreview(t.mirrorAxisOrigin);const r=new F(this.editor.worldToPreview(t.mirrorAxisDirection));const o=r.subtract(e);const n=Math.atan2(o.y,o.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin));this.setMirroredRotation(n);this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth));this.changeBlurRadius("mirrored",t.blurRadius)};this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center));this.setRadialRadius(this.editor.worldToPreview(t.radius));this.changeBlurRadius("radial",t.blurRadius)};this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start));this.setLinearEnd(this.editor.worldToPreview(t.end));this.changeBlurRadius("linear",t.blurRadius)};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.removeFocus=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.engineMediator.orderHelper.removeIndex("focus")}};this.editor=t;this.engineMediator=this.editor.engineMediator;this.state=au}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}get order(){return this.engineMediator.orderHelper.addIndex("focus")}get imageContainer(){return this.engineMediator.image.container}};f([Z],Di.prototype,"state",2);f([v],Di.prototype,"selectFocus",2);f([v],Di.prototype,"changeBlurRadius",2);f([v],Di.prototype,"reset",2);f([v],Di.prototype,"setLinear",2);f([v],Di.prototype,"setLinearStart",2);f([v],Di.prototype,"setLinearEnd",2);f([v],Di.prototype,"setRadialCenter",2);f([v],Di.prototype,"setRadialRadius",2);f([v],Di.prototype,"setMirroredOrigin",2);f([v],Di.prototype,"setMirroredRotation",2);f([v],Di.prototype,"setMirroredSize",2);f([v],Di.prototype,"updateFromEngineState",2)});var uH,lu,At;var dH=d(()=>{uH=y(id());wt();R();z();Ji();pm();Un();lH();ov();cH();lu=class{constructor(t){this.throttledRender=(0,uH.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();const e=this.maxIntensity*.2;const{width:r}=this.editor.engine.getOutputContainer().getBounds();const o=this.editor.shortestOutputSide*.2;switch(t){case"linear":const n=this.editor.outputToWorld({x:-r/2,y:0});const s=this.editor.outputToWorld({x:r/2,y:0});this.setLinearFocus({start:n,end:s,blurRadius:e});break;case"radial":const a=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:a,radius:o,blurRadius:e});break;case"mirrored":const l=this.editor.outputToWorld({x:0,y:0});const c=o;const u=this.editor.outputToWorld(gm({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:l,clearAreaWidth:c,blurRadius:e,mirrorAxisDirection:u});break;case"gaussian":this.setGaussianFocus({blurRadius:e});break;default:break}this.focusStore.selectFocus(t,e);this.editor.render();this.addSnapshot("add","focus")}};this.changeIntensity=t=>{const e=this.focusStore.setEffectProperties({blurRadius:t});if(e){this.focusStore.changeBlurRadius(this.identifier,e.blurRadius);this.throttledRender()}};this.changeRelativeIntensity=t=>{const e=(this.maxIntensity-lu.minIntensity)*t/100+lu.minIntensity;const r=this.focusStore.setEffectProperties({blurRadius:e});if(r){this.focusStore.changeBlurRadius(this.identifier,r.blurRadius);this.throttledRender()}};this.toolSnapshot=t=>{this.addSnapshot("edit",t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.pureReset=()=>{this.focusStore.removeFocus();this.focusStore.reset()};this.reset=()=>{this.pureReset();this.editor.render();this.addSnapshot("delete",this.locale.controls.buttonReset)};this.setStart=t=>{const e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearStart(this.editor.worldToPreview(e.start));this.throttledRender()}};this.setEnd=t=>{const e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});if(e){this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end));this.throttledRender()}};this.setCenter=t=>{const e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center));this.throttledRender()}};this.setRadius=t=>{const e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});if(e){this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius));this.throttledRender()}};this.setOrigin=t=>{const e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(gm(t,this.rotation))});if(e){this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin));this.throttledRender()}};this.setSize=t=>{const e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});if(e){this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth));this.throttledRender()}};this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(gm(this.origin,t))});this.focusStore.setMirroredRotation(t);this.throttledRender()};this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();const{magnitude:r}=e;Ge(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case"linear":this.setLinearFocus({start:this.editor.previewToWorld(new F(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new F(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case"gaussian":this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case"radial":this.setRadialFocus({center:this.editor.previewToWorld(new F(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*r),blurRadius:t.radial.blurRadius});break;case"mirrored":{const o=new F(t.mirrored.origin).multiply(e);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(o),mirrorAxisDirection:this.editor.previewToWorld(gm(o,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*r),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset();break;default:break}})};this.updateStateFromSerialization=async t=>{if(lu.doesFocusIdentifierExist(t.identifier)){this.focusStore.removeFocus();Ge(()=>{this.focusStore.selectFocus(t.identifier);switch(t.identifier){case"linear":this.setLinearFocus(t.linear);break;case"gaussian":this.setGaussianFocus(t.gaussian);break;case"radial":this.setRadialFocus(t.radial);break;case"mirrored":this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:gm(t.mirrored.origin,t.mirrored.rotation)});break;default:break}})}else{throw new Io(t.identifier)}};this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)};this.getFocusStateForHistory=()=>{const t=this.editor.canvasStore.sizeVector;const{linear:e}=this.focusStore.state;const{radial:r}=this.focusStore.state;const{mirrored:o}=this.focusStore.state;const n=t;const{magnitude:s}=n;return{...this.focusStore.state,linear:{...e,start:new F(e.start).divide(n),end:new F(e.end).divide(n)},radial:{...r,center:new F(r.center).divide(n),radius:r.radius/s},mirrored:{...o,origin:new F(o.origin).divide(n),size:o.size/s},gaussian:{...this.focusStore.state.gaussian}}};this.editor=t;this.focusStore=new Di(this.editor);const e=this.editor.assetProvider.getAssets("focus");this.entityManager=new Ue(e,{...this.config,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")})}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return Object.keys(ls).map(e=>ls[e]).findIndex(e=>e===t)!==-1}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case"linear":return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case"radial":return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case"mirrored":const t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:lt(this.state.mirrored.rotation),size:t.clearAreaWidth}};case"gaussian":return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return au}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return jh({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:t,height:e}=this.editor.canvasStore.canvasSize;return Math.sqrt(t**2+e**2)*2}get identifier(){return this.state.identifier}get intensity(){if(this.identifier==="identity"){return au.gaussian.blurRadius}return this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:t}=this.identifier==="identity"?this.state.gaussian:this.state[this.identifier];return(t-lu.minIntensity)*100/(this.maxIntensity-lu.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["focus"]}get locale(){return this.editor.configStore.locale["focus"]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:r}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:r})}setRadialFocus({center:t,radius:e,blurRadius:r}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:r})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:r,mirrorAxisDirection:o}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:r,mirrorAxisDirection:o})}};At=lu;f([v],At.prototype,"selectFocus",2);f([v],At.prototype,"changeIntensity",2);f([v],At.prototype,"changeRelativeIntensity",2);f([v],At.prototype,"clickableCanvas",2);f([v],At.prototype,"pureReset",2);f([v],At.prototype,"reset",2);f([v],At.prototype,"setStart",2);f([v],At.prototype,"setEnd",2);f([v],At.prototype,"setCenter",2);f([v],At.prototype,"setRadius",2);f([v],At.prototype,"setOrigin",2);f([v],At.prototype,"setSize",2);f([v],At.prototype,"setRotation",2);f([v],At.prototype,"updateStateFromHistory",2);f([v],At.prototype,"updateStateFromSerialization",2);f([v],At.prototype,"updateCanvasControls",2);f([C],At.prototype,"state",1);f([C],At.prototype,"start",1);f([C],At.prototype,"startOnPreview",1);f([C],At.prototype,"end",1);f([C],At.prototype,"endOnPreview",1);f([C],At.prototype,"center",1);f([C],At.prototype,"radius",1);f([C],At.prototype,"origin",1);f([C],At.prototype,"rotation",1);f([C],At.prototype,"rotationOnPreview",1);f([C],At.prototype,"size",1);f([C],At.prototype,"mirroredAreaWidth",1);f([C],At.prototype,"identifier",1);f([C],At.prototype,"intensity",1);f([C],At.prototype,"relativeIntensity",1);f([C],At.prototype,"maxIntensity",1);f([C],At.prototype,"isOptionSelected",1);f([C],At.prototype,"config",1);f([C],At.prototype,"locale",1);f([C],At.prototype,"items",1)});var ck=d(()=>{dH();ov()});var Kh;var uk=d(()=>{R();Kh={identifier:"identity",opacity:1,blendMode:"lighten"}});var Elt,Js;var mH=d(()=>{wt();R();$h();uk();Elt=new Ys(0,1);Js=class{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=Elt.clamp(t);this.state.opacity=e};this.changeBlendMode=t=>{this.state.blendMode=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Kh.identifier;this.state.opacity=Kh.opacity;this.state.blendMode=Kh.blendMode;this.removeIndex()}};this.correctOverlayFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();if(this.effect){this.effect.setFlipHorizontally(t);this.effect.setFlipVertically(e)}};this.removeOverlayEffect=()=>{if(this.effect){this.engineMediator.engine.removeEffect(this.effect);this.removeIndex();this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setOverlayEffect=({identifier:t,blendMode:e,opacity:r})=>{const o={...this.state};this.removeOverlayEffect();const n=this.engineMediator.orderHelper.addIndex("overlay");return new Promise((s,a)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then(l=>{this.changeIdentifier(t);this.changeOpacity(r);this.changeBlendMode(e);this.effect=l;this.effect.setProperties({blendMode:e,opacity:r});this.correctOverlayFlip();s()}).catch(l=>{this.changeIdentifier(o.identifier);this.changeOpacity(o.opacity);this.changeBlendMode(o.blendMode);if(o.identifier==="identity"){this.removeIndex()}a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex("overlay")};this.engineMediator=t;this.editor=e;this.state=Kh}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};f([Z],Js.prototype,"state",2);f([v],Js.prototype,"changeIdentifier",2);f([v],Js.prototype,"changeOpacity",2);f([v],Js.prototype,"changeBlendMode",2);f([v],Js.prototype,"reset",2);f([v],Js.prototype,"correctOverlayFlip",2)});var pH,Je;var hH=d(()=>{pH=y(id());wt();R();z();Ji();Un();mH();Je=class{constructor(t){this.throttledRender=(0,pH.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectOverlay=async t=>{if(t!==this.identifier){const e=this.defaultBlendModeForIdentifier(t);await this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e});this.addSnapshot("add","overlay");this.editor.render()}};this.changeOpacity=t=>{const e=this.overlayStore.setEffectProperties({opacity:t});if(e){this.overlayStore.changeOpacity(e.opacity);this.throttledRender()}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.sliderOpacity)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.changeBlendMode=t=>{const e=this.overlayStore.setEffectProperties({blendMode:t});if(e){this.overlayStore.changeBlendMode(e.blendMode);this.addSnapshot("edit",this.locale.controls.carouselBlendMode);this.editor.render()}};this.pureReset=()=>{this.overlayStore.removeOverlayEffect();this.overlayStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(r=>r.identifier===t.identifier);if(e){return this.overlayStore.setOverlayEffect(t).then(()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)})}throw new Io(t.identifier)};this.updateStateFromHistory=async t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.overlayStore.setOverlayEffect(t)};this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()};this.defaultBlendModeForIdentifier=t=>{const e=this.entityManager.items.findIndex(r=>r.identifier===t);return e!==-1?this.entityManager.items[e].defaultBlendMode:"lighten"};this.editor=t;this.overlayStore=new Js(this.editor.engineMediator,t);const e=this.editor.assetProvider.getAssets("overlay");const{config:r}=this;this.entityManager=new Ue(e,{...r,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")})}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return this.identifier!=="identity"}get config(){return this.editor.configStore.config["overlay"]}get locale(){return this.editor.configStore.locale["overlay"]}get items(){return this.entityManager.items}get allBlendModes(){const t=this.locale.controls;return Object.keys(mn).map(e=>{const r=mn[e];const o=`blendMode${r.charAt(0).toUpperCase()}${r.slice(1)}`;return{identifier:r,value:t[o]}})}};f([v],Je.prototype,"selectOverlay",2);f([v],Je.prototype,"changeOpacity",2);f([v],Je.prototype,"changeBlendMode",2);f([v],Je.prototype,"pureReset",2);f([v],Je.prototype,"reset",2);f([v],Je.prototype,"updateStateFromSerialization",2);f([v],Je.prototype,"updateStateFromHistory",2);f([v],Je.prototype,"correctOverlayFlip",2);f([C],Je.prototype,"state",1);f([C],Je.prototype,"identifier",1);f([C],Je.prototype,"opacity",1);f([C],Je.prototype,"blendMode",1);f([C],Je.prototype,"isOptionSelected",1);f([C],Je.prototype,"config",1);f([C],Je.prototype,"locale",1);f([C],Je.prototype,"items",1);f([C],Je.prototype,"allBlendModes",1)});var dk=d(()=>{hH();uk()});var Flt,Ur,mk;var pk=d(()=>{mr();Flt="white";Ur={identifier:"identity",opacity:1,tintColor:dr[Flt],tintMode:"none",resizeMode:"keepAspect"};mk={}});var Nn;var bm=d(()=>{Kt();mr();Nn=()=>{return Object.keys(dr).map(i=>{const t=dr[i];return{identifier:i,color:t,colorString:zn(t)}})}});function nv(i,t=null){return new Promise((e,r)=>{const o=new Image;o.addEventListener("load",()=>{const n=document.createElement("canvas");const s=n.getContext("2d");n.width=o.width;n.height=o.height;if(t){n.width=t;n.height=t*o.height/o.width}s.drawImage(o,0,0,n.width,n.height);const a=n.toDataURL("image/png");jt(n);e(a)});o.addEventListener("error",()=>{r()});o.src=i})}var fH;var hk=d(()=>{R();z();fH=i=>{return new Promise((t,e)=>{const r=new FileReader;r.onload=async o=>{try{const{result:n}=o.target;const s=await nv(n,150);t({stickerURI:n,thumbnailURI:s,name:i.name||"",type:i.type,identifier:Ot()})}catch(n){e(n)}};r.onerror=o=>{e(o)};r.readAsDataURL(i)})}});var gH,fk,Bt;var gk=d(()=>{wt();R();z();bm();Ji();Un();hk();mr();pk();gH="identity";fk="imgly_sticker_custom";Bt=class{constructor(t){this.state=Z.map(mk);this.customStickers=[];this.colorList=Nn();this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.doesStickerAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.add=t=>{const e=this.entityManager.items.find(n=>n.identifier===t);const r=e?e.tintMode:Ur.tintMode;const o=e?e.resizeMode:Ur.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:r,tintColor:Ur.tintColor,opacity:Ur.opacity,resizeMode:o}})};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);const e=this.editor.spriteStore.getDuplicateContainerFlip(this.id);const{flipHorizontally:r,flipVertically:o}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:lt(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:r!==e.flipHorizontally,flipVertically:o!==e.flipVertically},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.flipHorizontally=()=>{if(this.id){this.editor.spriteStore.flipHorizontally(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.updateStateFromHistory=(t,e)=>{if((0,qe.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const r=this.state.get(t);if(r){if("opacity"in e){r.opacity=e.opacity}if(e.tintColor){r.tintColor=e.tintColor}if(e.tintMode){r.tintMode=e.tintMode}if(e.resizeMode){r.resizeMode=e.resizeMode}this.state.set(t,r)}else{this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:Ur.tintColor})}};this.changeOpacity=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});const r=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=r.opacity;this.state.set(this.id,e)}}};this.changeTintColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){const{tintMode:r}=this.entityManager.items.find(n=>n.identifier===this.identifier);this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:r});const o=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=o.tintColor;e.tintMode=o.tintMode||Ur.tintMode;this.state.set(this.id,e)}}};this.tintColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.addFiles=async t=>{this.editor.modalStore.showInfoModal("loading");if(t.length){let e=0;const r=[];for(e=0;e<t.length;e+=1){r.push(fH(t[e]))}try{const o=await Promise.all(r);this.addCustomStickerAsset(o);this.editor.configStore.events.onStickerUploadedAdd(o.map(({identifier:n,stickerURI:s},a)=>({identifier:n,stickerURI:s,file:t[a]})))}catch(o){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}};this.addCustomStickerAsset=async t=>{const e=[];t.forEach(({stickerURI:s,thumbnailURI:a,name:l,identifier:c,type:u})=>{e.push({stickerURI:s,thumbnailURI:a,name:l,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:c});this.customStickers.push({identifier:c,type:u,stickerURI:s,name:l})});const r=this.locale.categories[fk];this.editor.assetProvider.addCustomStickerAsset(e,fk,r);const o=this.editor.assetProvider.getAssets("sticker");const{config:n}=this;this.entityManager=new Ue(o,{...n,itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")});this.selectedCategory=fk;this.editor.modalStore.hideModal()};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.opacity)};this.addSnapshot=(t,e)=>{const r=this.editor.historyStore.getCurrentSpritesState();if((r==null?void 0:r.sticker)&&(0,qe.default)(r.sticker,lt(this.state))){return}if(this.currentSticker){this.editor.spriteStore.addSnapshot(t,e)}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?gH:t};this.pureReset=()=>{this.state=Z.map(mk)};this.dispose=()=>{this.state=null;this.selectedCategory=null;this.editor=null;this.entityManager=null};this.editor=t;this.selectedCategory=gH;const{config:e}=this;const r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Ue(r,{...e,itemFallbackKey:"stickerURI",locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("sticker")});Ur.tintColor=lt(ko(this.config,"defaultTintColor",Ur.tintColor));if(this.config.colors&&this.config.colors.length>0){this.colorList=Go(lt(this.config.colors))}}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get identifier(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t){return t.identifier}}return"none"}get id(){if(this.isStickerSelected){return this.editor.spriteStore.id}return void 0}get opacity(){if(this.currentSticker){return this.currentSticker.opacity}return Ur.opacity}get tintMode(){if(this.currentSticker){return this.currentSticker.tintMode}return Ur.tintMode}get resizeMode(){if(this.currentSticker){return this.currentSticker.resizeMode}return Ur.resizeMode}get tintable(){if(this.currentSticker){return this.currentSticker.tintMode==="solid"||this.currentSticker.tintMode==="colorized"}return false}get tintColor(){if(this.currentSticker){return this.currentSticker.tintColor}return Ur.tintColor}get config(){return this.editor.configStore.config["sticker"]}get locale(){return this.editor.configStore.locale["sticker"]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};f([Z],Bt.prototype,"selectedCategory",2);f([Z],Bt.prototype,"entityManager",2);f([v],Bt.prototype,"selectLast",2);f([v],Bt.prototype,"add",2);f([v],Bt.prototype,"duplicate",2);f([v],Bt.prototype,"bringToFront",2);f([v],Bt.prototype,"flipHorizontally",2);f([v],Bt.prototype,"delete",2);f([v],Bt.prototype,"updateStateFromHistory",2);f([v],Bt.prototype,"setState",2);f([v],Bt.prototype,"changeOpacity",2);f([v],Bt.prototype,"changeTintColor",2);f([v],Bt.prototype,"addFiles",2);f([v],Bt.prototype,"addCustomStickerAsset",2);f([v],Bt.prototype,"toggleCategorySelection",2);f([v],Bt.prototype,"pureReset",2);f([v],Bt.prototype,"dispose",2);f([C],Bt.prototype,"isStickerSelected",1);f([C],Bt.prototype,"isCustomStickerEnabled",1);f([C],Bt.prototype,"customStickerTintMode",1);f([C],Bt.prototype,"customStickerResizeMode",1);f([C],Bt.prototype,"currentSticker",1);f([C],Bt.prototype,"identifier",1);f([C],Bt.prototype,"id",1);f([C],Bt.prototype,"opacity",1);f([C],Bt.prototype,"tintMode",1);f([C],Bt.prototype,"resizeMode",1);f([C],Bt.prototype,"tintable",1);f([C],Bt.prototype,"tintColor",1);f([C],Bt.prototype,"config",1);f([C],Bt.prototype,"locale",1);f([C],Bt.prototype,"localeColor",1);f([C],Bt.prototype,"selectedCategoryIdentifier",1);f([C],Bt.prototype,"items",1);f([C],Bt.prototype,"categories",1)});var bH=d(()=>{pk();gk()});var Rlt,Qt,bk;var yk=d(()=>{mr();Rlt="imgly_font_open_sans_bold";Qt={text:"Write Something",identifier:Rlt,fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:dr.white,backgroundColor:dr.transparent||[0,0,0,0],width:0};bk={}});var yH;var _H=d(()=>{mr();yH=()=>{return Object.keys(ok).map(i=>{const t=ok[i];return{identifier:i,color:t,colorString:zn(t)}})}});var xH,ym,ft;var _k=d(()=>{wt();R();Ln();z();_H();bm();Ji();mr();yk();xH={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};ym=class{constructor(t){this.state=Z.map(bk);this.colorList=Nn();this.backgroundColorList=yH();this.fontsLoadStatus=Z.object({pending:false,loaded:false});this.doesTextAssetExist=t=>{return this.editor.assetProvider.getFontAssets().findIndex(e=>e.identifier===t)!==-1};this.validFontWithConfig=t=>{return this.fonts.find(e=>e.identifier===t)||this.fonts[0]};this.addOrselect=()=>{if(!this.state.size){this.add()}else{this.selectLast();this.loadFonts()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=async()=>{const{fontsLoadStatus:t}=this;const e=()=>{this.editor.spriteStore.addText({state:{identifier:Qt.identifier,text:Qt.text,textColor:Qt.textColor,backgroundColor:Qt.backgroundColor,lineHeight:Qt.lineHeight,alignment:Qt.alignment,fontSize:0}})};if(!t.pending&&!t.loaded){this.fontsLoadStatus.pending=true;const r=this.editor.assetProvider.getFontManager();try{await r.loadFontsWithIdentifiers([Qt.identifier]);e()}catch(o){this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:Qt.identifier})}await this.loadFonts()}else{e()}};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:lt(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:lt(this.backgroundColor),width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.changeFont=t=>{const e=this.fonts.find(r=>r.identifier===t);this.changeIdentifier(e,this.id);if(this.id){this.addSnapshot("edit",this.locale.history.fontFamily)}};this.changeIdentifier=(t,e)=>{Ge(()=>{if(t&&e){const r=this.state.get(e);if(r){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},true);const o=this.editor.spriteStore.getContainerProperties(e);r.identifier=o.fontIdentifier;r.fontFamily=t.fontFamily;r.fontStyle=t.fontStyle;r.fontWeight=t.fontWeight;r.fontSize=o.fontSize;r.width=o.width;r.defaultFontSize=r.fontSize;this.state.set(e,r)}}})};this.changeFontSize=(t,e=false)=>{if(this.id){const r=this.state.get(this.id);if(r){r.fontSize=t;if(e){r.defaultFontSize=t}this.state.set(this.id,r)}}};this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);if(t){t.defaultFontSize=t.fontSize;this.state.set(this.id,t)}}};this.changeSize=(t,e)=>{const r=this.state.get(t);if(r){r.width=e.width;r.fontSize=e.fontSize;r.defaultFontSize=e.fontSize;this.state.set(t,r)}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);let r=this.editor.spriteStore.getContainerProperties(this.id);const o=this.editor.outputContainer.getSizeInOutputSpace();const n=this.editor.spriteStore.getSize(this.id);if(!this.config.disableAutoScaling){if(n.height>o.height){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,o.height)},true)}}r=this.editor.spriteStore.getContainerProperties(this.id);e.text=r.text;e.fontSize=r.fontSize;e.defaultFontSize=r.fontSize;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.edit)}}};this.calculateFitFontSize=(t,e)=>{if(!ym.measureContext){const h=document.createElement("canvas");ym.measureContext=h.getContext("2d")}const r=this.editor.spriteStore.getContainerProperties(t);const o=this.editor.engine.assetProvider.getFontManager().getFontWithId(r.fontIdentifier);const n=this.config.minFontSizeForAutoScaling;const s=ou(ym.measureContext,r.text,o,r.fontSize,r.lineHeight,r.width,o.textMetrics);const a=Math.min(Math.floor(r.fontSize*(e/s.height)),1);const l=Math.round(r.fontSize);let c=0;let u=l-a;let m=Math.floor((l-a)*2);let p=u;while(c<=m){u=c+Math.floor((m-c)/2);const h=ou(ym.measureContext,r.text,o,u,r.lineHeight,r.width,o.textMetrics);if(e<h.height){m=u-1;p=u-1}else if(e>h.height){c=u+1;if(a+u>=l){return l}}else{p=u;break}}if(n&&p<n){return n}return p};this.changeLineHeight=t=>{if(this.id){const e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},true);const r=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=r.lineHeight;this.state.set(this.id,e)}}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const r=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=r.textColor;this.state.set(this.id,e)}}};this.changeBackgroundColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const r=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=r.backgroundColor;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.textColor)};this.backgroundColorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.backgroundColor)};this.changeAlignment=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const r=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=r.alignment;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.alignment)}}};this.toolSnapshot=()=>{this.addSnapshot("edit",this.locale.history.lineSpacing)};this.addSnapshot=(t,e)=>{const r=this.editor.historyStore.getCurrentSpritesState();if((r==null?void 0:r.text)&&(0,qe.default)(r.text,lt(this.state))){return}if(this.currentText){this.editor.spriteStore.addSnapshot(t,e)}};this.updateStateFromHistory=(t,e)=>{if((0,qe.default)(e,this.state.get(t))){return}this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)};this.setState=(t,e)=>{const r=this.state.get(t);if(r){if(e.alignment){r.alignment=e.alignment}if(e.text){r.text=e.text}if(e.lineHeight){r.lineHeight=e.lineHeight}if(e.textColor){r.textColor=e.textColor}if(e.backgroundColor){r.backgroundColor=e.backgroundColor}if(e.fontIdentifier){r.identifier=e.fontIdentifier}if(e.fontSize){r.fontSize=e.fontSize;r.defaultFontSize=e.fontSize}if(e.width){r.width=e.width}}else{const o=this.validFontWithConfig(e.fontIdentifier);if(o){this.state.set(t,{text:e.text,identifier:o.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:Qt.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:Qt.backgroundColor,fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontSize:e.fontSize,fontWeight:o.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}}};this.setFontSize=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},true);const r=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=r.fontSize;e.defaultFontSize=r.fontSize;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=Z.map(bk)};this.dispose=()=>{this.state=null;this.fontsLoadStatus=null;this.editor=null;this.backgroundColorList=null;this.colorList=null};this.editor=t;if(!this.fonts.find(e=>e.identifier===Qt.identifier)){Qt.identifier=this.fonts[0].identifier}Qt.textColor=lt(ko(this.config,"defaultColor",Qt.textColor));Qt.backgroundColor=lt(ko(this.config,"defaultBackgroundColor",Qt.backgroundColor));Qt.text=this.locale.canvasControls.placeholderText;if(this.config.colors&&this.config.colors.length>0){this.colorList=Go(lt(this.config.colors))}if(this.config.backgroundColors&&this.config.backgroundColors.length>0){this.backgroundColorList=Go(lt(this.config.backgroundColors))}}static defaultText(){return Qt.text}static getDisplayFontStyle(t){const e=t.fontWeight&&xH[t.fontWeight].toLowerCase()!=="regular"?xH[t.fontWeight]:"";const r=t.fontStyle&&t.fontStyle.toLowerCase()!=="normal"?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${r}`.trim()}async loadFonts(){const{fontsLoadStatus:t}=this;if(t.loaded)return;const e=this.editor.assetProvider.getFontManager();const r=this.editor.assetProvider.getFontAssetsForText().filter(Boolean).map(o=>o.identifier);try{await e.loadFontsWithIdentifiers(r)}catch(o){const n=r.filter(s=>!e.isFontLoaded(s)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:n})}t.loaded=true}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const t=this.state.get(this.id);if(t){return t}}return void 0}get text(){if(this.currentText){return this.currentText.text}return Qt.text}get fontSize(){if(this.currentText){return this.currentText.fontSize}return Qt.fontSize}get defaultFontSize(){if(this.currentText){return this.currentText.defaultFontSize}return Qt.defaultFontSize}get width(){if(this.currentText){return this.currentText.width}return Qt.width}get fontFamily(){if(this.currentText){return this.currentText.fontFamily}return Qt.fontFamily}get fontStyle(){if(this.currentText){return this.currentText.fontStyle}return Qt.fontStyle}get fontWeight(){if(this.currentText){return this.currentText.fontWeight}return Qt.fontWeight}get lineHeight(){if(this.currentText){return this.currentText.lineHeight}return Qt.lineHeight}get identifier(){if(this.currentText){return this.currentText.identifier}return Qt.identifier}get id(){if(this.isTextSelected){return this.editor.spriteStore.id}return void 0}get alignment(){if(this.currentText){return this.currentText.alignment}return Qt.alignment}get textColor(){if(this.currentText){return this.currentText.textColor}return Qt.textColor}get backgroundColor(){if(this.currentText){return this.currentText.backgroundColor}return Qt.backgroundColor}get config(){return this.editor.configStore.config["text"]}get locale(){return this.editor.configStore.locale["text"]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get availableOptions(){if(this.config.fonts.length){return this.config.fonts.map(t=>t.identifier)}return this.rawOptions.filter(Boolean).map(t=>t.identifier)}get fonts(){return this.rawOptions.filter(Boolean).reduce((t,e)=>{if(this.availableOptions.indexOf(e.identifier)!==-1){return[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]}return t},[])}get fontFamilies(){return[...new Set(this.fonts)]}};ft=ym;f([v],ft.prototype,"addOrselect",2);f([v],ft.prototype,"selectLast",2);f([v],ft.prototype,"add",2);f([v],ft.prototype,"duplicate",2);f([v],ft.prototype,"bringToFront",2);f([v],ft.prototype,"delete",2);f([v],ft.prototype,"setEditMode",2);f([v],ft.prototype,"changeFont",2);f([v],ft.prototype,"changeIdentifier",2);f([v],ft.prototype,"changeFontSize",2);f([v],ft.prototype,"updateDefaultFontSize",2);f([v],ft.prototype,"changeSize",2);f([v],ft.prototype,"changeWidth",2);f([v],ft.prototype,"changeText",2);f([v],ft.prototype,"changeLineHeight",2);f([v],ft.prototype,"changeColor",2);f([v],ft.prototype,"changeBackgroundColor",2);f([v],ft.prototype,"changeAlignment",2);f([v],ft.prototype,"updateStateFromHistory",2);f([v],ft.prototype,"setState",2);f([v],ft.prototype,"setFontSize",2);f([v],ft.prototype,"pureReset",2);f([v],ft.prototype,"dispose",2);f([C],ft.prototype,"isEditMode",1);f([C],ft.prototype,"isTextSelected",1);f([C],ft.prototype,"fontsLoaded",1);f([C],ft.prototype,"currentText",1);f([C],ft.prototype,"text",1);f([C],ft.prototype,"fontSize",1);f([C],ft.prototype,"defaultFontSize",1);f([C],ft.prototype,"width",1);f([C],ft.prototype,"fontFamily",1);f([C],ft.prototype,"fontStyle",1);f([C],ft.prototype,"fontWeight",1);f([C],ft.prototype,"lineHeight",1);f([C],ft.prototype,"identifier",1);f([C],ft.prototype,"id",1);f([C],ft.prototype,"alignment",1);f([C],ft.prototype,"textColor",1);f([C],ft.prototype,"backgroundColor",1);f([C],ft.prototype,"config",1);f([C],ft.prototype,"locale",1);f([C],ft.prototype,"localeColor",1);f([C],ft.prototype,"rawOptions",1);f([C],ft.prototype,"availableOptions",1);f([C],ft.prototype,"fonts",1);f([C],ft.prototype,"fontFamilies",1)});var vH=d(()=>{yk();_k()});var Olt,Ze,xk,vk;var Ck=d(()=>{mr();Olt="imgly_text_design_blocks";Ze={identifier:Olt,color:dr.white,isInverted:false,text:"Write Something With Style",seed:0,padding:0,width:0};xk={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831};vk={}});var Pt;var Sk=d(()=>{wt();R();z();bm();Ji();Un();mr();Ck();Pt=class{constructor(t){this.state=Z.map(vk);this.colorList=Nn();this.fontsLoaded=false;this.doesTextDesignAssetExist=t=>{return this.entityManager.items.findIndex(e=>e.identifier===t)!==-1};this.addOrselect=async()=>{await this.loadFonts();if(!this.state.size){this.add()}else{this.selectLast()}};this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))};this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:Ze.identifier,text:Ze.text,color:Ze.color,isInverted:Ze.isInverted,seed:xk[Ze.identifier]||Ze.seed,padding:0}})};this.updateStateFromHistory=(t,e)=>{if((0,qe.default)(e,this.state.get(t))){return}const r=this.state.get(t);if(e.identifier===r.identifier){this.setState(t,e);this.editor.spriteStore.setContainerProperties(t,e)}else{this.changeIdentifier(e.identifier,false,e.seed,t)}};this.setState=(t,e)=>{const r=this.state.get(t);if(r){if(e.inverted){r.isInverted=e.inverted}if(e.seed){r.seed=e.seed}if(e.color){r.color=e.color}if(e.padding){r.padding=e.padding}if(e.width){r.width=e.width}}else{this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:Ze.color,padding:e.padding})}};this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},true);const r=this.editor.spriteStore.getContainerProperties(this.id);e.text=r.text;this.state.set(this.id,e);this.addSnapshot("edit",this.locale.history.edit)}}};this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)};this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:lt(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}};this.bringToFront=()=>{if(this.id){this.editor.spriteStore.bringToFront(this.id)}};this.addSnapshot=(t,e)=>{const r=this.editor.historyStore.getCurrentSpritesState();if((r==null?void 0:r.textdesign)&&(0,qe.default)(r.textdesign,lt(this.state))){return}if(this.currentTextDesign){this.editor.spriteStore.addSnapshot(t,e)}};this.delete=(t=this.id)=>{if(t){this.editor.spriteStore.removeSprite(t);this.state.delete(t);this.selectLast()}};this.changeSeed=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.shuffle)}}};this.changeIdentifier=(t,e=true,r=null,o=this.id)=>{if(o&&t!==this.identifier){const n=this.state.get(o);const s=this.editor.spriteStore.getContainerTransform(o);this.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:t,text:n.text,color:lt(n.color),isInverted:n.isInverted,seed:r||xk[t]||n.seed,padding:n.padding,width:n.width},transform:s},e,true)}};this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});const r=this.editor.spriteStore.getContainerProperties(this.id);e.color=r.color;this.state.set(this.id,e)}}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.history.color)};this.invertBackground=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},true);const e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted;this.state.set(this.id,t);this.addSnapshot("edit",this.locale.history.invert)}}};this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.width=t;this.state.set(this.id,e)}}};this.changePadding=t=>{if(this.id){const e=this.state.get(this.id);if(e){e.padding=t;this.state.set(this.id,e)}}};this.pureReset=()=>{this.state=Z.map(vk)};this.dispose=()=>{this.state=null;this.fontsLoaded=null;this.editor=null;this.colorList=null};this.editor=t;const e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new Ue(e,{...this.config,flattenCategories:true,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")});if(!this.entityManager.items.find(r=>r.identifier===Ze.identifier)){Ze.identifier=this.entityManager.items[0].identifier}Ze.text=this.locale.canvasControls.placeholderText;Ze.color=lt(ko(this.config,"defaultColor",Ze.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Go(lt(this.config.colors))}}static defaultText(){return Ze.text}async loadFonts(){if(this.fontsLoaded)return;const t=this.editor.assetProvider.getFontManager();const e=this.editor.assetProvider.getFontAssetsForTextDesign().map(r=>r.identifier);try{await t.loadFontsWithIdentifiers(e)}catch(r){const o=e.filter(n=>!t.isFontLoaded(n)).join(", ");this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:o})}this.fontsLoaded=true}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const t=this.state.get(this.id);if(t){return t}}return void 0}get id(){if(this.isTextDesignSelected){return this.editor.spriteStore.id}return void 0}get text(){if(this.currentTextDesign){return this.currentTextDesign.text}return Ze.text}get seed(){if(this.currentTextDesign){return this.currentTextDesign.seed}return Ze.seed}get padding(){if(this.currentTextDesign){return this.currentTextDesign.padding}return Ze.padding}get width(){if(this.currentTextDesign){return this.currentTextDesign.width}return Ze.width}get identifier(){if(this.currentTextDesign){return this.currentTextDesign.identifier}return null}get isInverted(){if(this.currentTextDesign){return this.currentTextDesign.isInverted}return Ze.isInverted}get color(){if(this.currentTextDesign){return this.currentTextDesign.color}return Ze.color}get config(){return this.editor.configStore.config["textdesign"]}get locale(){return this.editor.configStore.locale["textdesign"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};f([v],Pt.prototype,"addOrselect",2);f([v],Pt.prototype,"selectLast",2);f([v],Pt.prototype,"add",2);f([v],Pt.prototype,"updateStateFromHistory",2);f([v],Pt.prototype,"setState",2);f([v],Pt.prototype,"changeText",2);f([v],Pt.prototype,"setEditMode",2);f([v],Pt.prototype,"duplicate",2);f([v],Pt.prototype,"bringToFront",2);f([v],Pt.prototype,"delete",2);f([v],Pt.prototype,"changeSeed",2);f([v],Pt.prototype,"changeIdentifier",2);f([v],Pt.prototype,"changeColor",2);f([v],Pt.prototype,"invertBackground",2);f([v],Pt.prototype,"changeWidth",2);f([v],Pt.prototype,"changePadding",2);f([v],Pt.prototype,"pureReset",2);f([v],Pt.prototype,"dispose",2);f([C],Pt.prototype,"isTextDesignSelected",1);f([C],Pt.prototype,"isEditMode",1);f([C],Pt.prototype,"currentTextDesign",1);f([C],Pt.prototype,"id",1);f([C],Pt.prototype,"text",1);f([C],Pt.prototype,"seed",1);f([C],Pt.prototype,"padding",1);f([C],Pt.prototype,"width",1);f([C],Pt.prototype,"identifier",1);f([C],Pt.prototype,"isInverted",1);f([C],Pt.prototype,"color",1);f([C],Pt.prototype,"config",1);f([C],Pt.prototype,"locale",1);f([C],Pt.prototype,"localeColor",1);f([C],Pt.prototype,"items",1)});var CH=d(()=>{Ck();Sk()});var Hn;var sv=d(()=>{mr();Hn={identifier:"identity",opacity:1,width:0,color:dr.white}});var Alt,Zs;var SH=d(()=>{wt();$h();sv();Alt=new Ys(0,1);Zs=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t};this.changeOpacity=t=>{const e=Alt.clamp(t);this.state.opacity=e};this.changeWidth=t=>{this.state.width=t};this.changeColor=t=>{this.state.color=t};this.reset=()=>{if(this.indexInContainer===-1){this.state.identifier=Hn.identifier;this.state.opacity=Hn.opacity;this.state.width=Hn.width;this.state.color=Hn.color;this.removeIndex()}};this.removeFrameEffect=()=>{if(this.effect){this.engine.removeEffect(this.effect);this.effect=void 0}};this.setEffectProperties=t=>{if(this.effect){this.removeIndex();this.effect.setProperties(t);return this.effect.getProperties()}return null};this.setFrameEffect=({identifier:t,width:e,opacity:r,color:o})=>{const n={...this.state};this.changeIdentifier(t);this.changeWidth(e);this.changeOpacity(r);this.changeColor(o);this.removeFrameEffect();return new Promise((s,a)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container).then(l=>{this.effect=l;this.effect.setProperties({tintColor:o,opacity:r,width:e});s()}).catch(l=>{this.changeIdentifier(n.identifier);this.changeOpacity(n.opacity);this.changeWidth(n.width);this.changeColor(n.color);if(n.identifier==="identity"){this.removeIndex()}a(l)})})};this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)};this.engineMediator=t;this.state=Hn}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){if(this.effect){return this.effect.getIndexInParent()}return-1}};f([Z],Zs.prototype,"state",2);f([v],Zs.prototype,"changeIdentifier",2);f([v],Zs.prototype,"changeOpacity",2);f([v],Zs.prototype,"changeWidth",2);f([v],Zs.prototype,"changeColor",2);f([v],Zs.prototype,"reset",2)});var wH,Ae;var TH=d(()=>{wH=y(id());wt();R();z();bm();Ji();Un();mr();sv();SH();Ae=class{constructor(t){this.colorList=Nn();this.throttledRender=(0,wH.default)(()=>{if(this.editor){this.editor.render()}},10,{trailing:true});this.selectFrame=async t=>{if(t!==this.identifier){const e=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:Hn.color});this.editor.render();this.addSnapshot("add","frame")}};this.changeOpacity=t=>{const e=this.frameStore.setEffectProperties({opacity:t});if(e){this.frameStore.changeOpacity(e.opacity);this.throttledRender()}};this.changeWidth=t=>{const e=this.frameStore.setEffectProperties({width:t});if(e){this.frameStore.changeWidth(e.width);this.throttledRender()}};this.changeColor=t=>{const e=this.frameStore.setEffectProperties({tintColor:t});if(e){this.frameStore.changeColor(e.tintColor);this.throttledRender()}};this.colorSnapshot=()=>{this.addSnapshot("edit",this.locale.controls.selectColor)};this.toolSnapshot=t=>{this.addSnapshot("edit",t)};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.pureReset=()=>{this.frameStore.removeFrameEffect();this.frameStore.reset()};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.updateStateFromHistory=t=>{if(t.identifier==="identity"){this.pureReset();return new Promise(e=>{e()})}return this.frameStore.setFrameEffect(t)};this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find(r=>r.identifier===t.identifier);if(e){return this.frameStore.setFrameEffect(t).then(()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)})}return new Promise((r,o)=>{o(new Error(`Frame Asset doesn't exist`))})};this.editor=t;this.frameStore=new Zs(this.editor.engineMediator);const e=this.editor.assetProvider.getAssets("frame");const{config:r}=this;this.entityManager=new Ue(e,{...r,flattenCategories:true,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")});Hn.color=lt(ko(this.config,"defaultColor",Hn.color));if(this.config.colors&&this.config.colors.length>0){this.colorList=Go(lt(this.config.colors))}}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const t=this.entityManager.items.find(e=>e.identifier===this.identifier);return t&&t.tintable||false}get opacity(){return this.state.opacity}get minSize(){return this.editor.shortestOutputSide*.05}get maxSize(){return this.editor.shortestOutputSide*.3}get config(){return this.editor.configStore.config["frame"]}get locale(){return this.editor.configStore.locale["frame"]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return this.identifier!=="identity"}};f([v],Ae.prototype,"selectFrame",2);f([v],Ae.prototype,"changeOpacity",2);f([v],Ae.prototype,"changeWidth",2);f([v],Ae.prototype,"changeColor",2);f([v],Ae.prototype,"pureReset",2);f([v],Ae.prototype,"reset",2);f([v],Ae.prototype,"updateStateFromHistory",2);f([v],Ae.prototype,"updateStateFromSerialization",2);f([C],Ae.prototype,"state",1);f([C],Ae.prototype,"identifier",1);f([C],Ae.prototype,"color",1);f([C],Ae.prototype,"size",1);f([C],Ae.prototype,"tintable",1);f([C],Ae.prototype,"opacity",1);f([C],Ae.prototype,"minSize",1);f([C],Ae.prototype,"maxSize",1);f([C],Ae.prototype,"config",1);f([C],Ae.prototype,"locale",1);f([C],Ae.prototype,"localeColor",1);f([C],Ae.prototype,"items",1);f([C],Ae.prototype,"isOptionSelected",1)});var wk=d(()=>{sv();TH()});var Xh;var Tk=d(()=>{mr();Xh={size:0,color:dr.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0}});var ke;var kk=d(()=>{wt();R();z();bm();Ji();mr();Tk();ke=class{constructor(t){this.strokes={strokes:[]};this.colorList=Nn();this.dirty=Z.box(false);this.id="";this.containerId=()=>{return this.id};this.initSize=()=>{const{minimumSize:t,maximumSize:e}=this.state;const{size:r}=this;if(r===0){this.changeSize(iS(this.config,"defaultSize",[t,e]))}};this.changeColor=t=>{this.state.color=t};this.changeSize=t=>{this.state.size=t};this.changeRelativeSize=t=>{const{maximumSize:e,minimumSize:r}=this.state;this.state.size=(e-r)*t/100+r};this.changeHardness=t=>{this.state.hardness=t};this.reset=()=>{this.pureReset();this.addSnapshot("delete",this.locale.controls.buttonReset);this.editor.render()};this.editor=t;this.state={...Xh,hardness:iS(this.config,"defaultHardness",[Xh.minimumHardness,Xh.maximumHardness]),color:lt(ko(this.config,"defaultColor",Xh.color))};if(this.config.colors&&this.config.colors.length>0){this.colorList=Go(lt(this.config.colors))}}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){const e=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID();this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:lt(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){const e=this.editor.previewToWorld(t,false);this.drawingContainer.addPointToCurrentStroke(e);this.editor.render()}}endStroke(){if(this.drawingContainer){this.drawingContainer.endStroke();this.editor.render();this.strokes=this.drawingContainer.getData();this.addSnapshot("edit",this.locale.history.brushStroke);this.dirty.set(true)}}updateStateFromHistory(t){if((0,qe.default)(t,this.strokes)){return}if((0,qe.default)(t,{strokes:[]})||!t){this.pureReset();return}if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length){this.dirty.set(false);return}this.strokes=t;this.drawingContainer.setData(this.strokes)}else{const e=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e);this.strokes=this.drawingContainer.getData()}this.dirty.set(this.strokes.strokes.length!==0);this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(false);this.strokes={strokes:[]};if(this.drawingContainer){this.editor.engine.removeContainer(this.drawingContainer);this.drawingContainer=void 0}}get config(){return this.editor.configStore.config["brush"]}get locale(){return this.editor.configStore.locale["brush"]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:t,maximumSize:e,minimumSize:r}=this.state;return(t-r)*100/(e-r)}get sizeOnScreenSpace(){const t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};f([Z],ke.prototype,"state",2);f([Z],ke.prototype,"dirty",2);f([v],ke.prototype,"initSize",2);f([v],ke.prototype,"changeColor",2);f([v],ke.prototype,"changeSize",2);f([v],ke.prototype,"changeRelativeSize",2);f([v],ke.prototype,"changeHardness",2);f([v],ke.prototype,"clickableCanvas",1);f([v],ke.prototype,"beginStroke",1);f([v],ke.prototype,"strokePosition",1);f([v],ke.prototype,"endStroke",1);f([v],ke.prototype,"updateStateFromHistory",1);f([v],ke.prototype,"reset",2);f([C],ke.prototype,"config",1);f([C],ke.prototype,"locale",1);f([C],ke.prototype,"localeColor",1);f([C],ke.prototype,"color",1);f([C],ke.prototype,"size",1);f([C],ke.prototype,"relativeSize",1);f([C],ke.prototype,"sizeOnScreenSpace",1);f([C],ke.prototype,"hardness",1);f([C],ke.prototype,"isDirty",1)});var kH=d(()=>{Tk();kk()});var Vo;var Ik=d(()=>{Vo={position:{x:0,y:0},size:{height:0,width:0},lockResolution:false,forceDimensions:false,ratio:"*"}});function Dk(i){const t=i&&typeof i==="object";return t&&!Plt(i)&&!Llt(i)&&!Mlt(i)}function zlt(i){return Array.isArray(i)?[]:{}}function Ek(i,t){const e=t&&t.clone===true;return e&&Dk(i)?Fk(zlt(i),i,t):i}function Ult(i,t,e){const r={};if(Dk(i)){Object.keys(i).forEach(o=>{r[o]=Ek(i[o],e)})}Object.keys(t).forEach(o=>{const n=Dk(t[o])&&i[o];r[o]=n?Fk(i[o],t[o],e):Ek(t[o],e)});return r}function Fk(i,t,e){const r=Array.isArray(t);if(r){return Array.isArray(i)?t:Ek(t,e)}return Ult(i,t,e)}function Ei(i,t=null){if(!Array.isArray(i)||i.length<2){throw new Error("first argument should be an array with at least two elements")}return i.reduce((e,r)=>{return Fk(e,r,t)})}var Blt,Plt,Mlt,Llt;var xl=d(()=>{Blt=typeof Symbol==="function"&&Symbol.for;Plt=i=>{return Object.prototype.toString.call(i)==="[object RegExp]"||Object.prototype.toString.call(i)==="[object Date]"||Object.prototype.toString.call(i).includes("HTML")||Object.prototype.toString.call(i)==="[object Array]"};Mlt=i=>{if(Blt&&Object.hasOwnProperty.call(i,"$$typeof")){return i.$$typeof===Symbol.for("react.element")||i.$$typeof===Symbol.for("react.forward_ref")}return false};Llt=i=>{return Object.hasOwnProperty.call(i,"__ngContext__")}});var Rk;var Ok=d(()=>{R();Rk=class extends wr{constructor(){super(...arguments);this.prevDimensions={width:0,height:0}}onExport(t){this.emit("export",t)}onClose(){this.emit("close")}onUndo(){this.emit("historyUndo")}onRedo(){this.emit("historyRedo")}onHistoryChange(){this.emit("historyChange")}onEditorReady(){this.emit("editorReady")}onErrorImageLoading(t){this.emit("errorImageLoading",t)}onImageLoaded(){this.emit("imageLoad")}onStickerUploadedAdd(t){this.emit("stickerUploadAdd",t)}onToolChanged(t){this.emit("toolEnter",t)}onErrorWebGLContextLost(){this.emit("errorWebGLContextLost")}onCropDimensionsChanged(t){if(this.prevDimensions.width!==t.width||this.prevDimensions.height!==t.height){this.emit("cropDimensionsChange",t);this.prevDimensions=t}}}});var Ak;var IH=d(()=>{xl();Qx();Ak=Ei([yl,{layout:"basic",defaultTool:null}])});var DH=d(()=>{Qx();IH()});var Bk;var EH=d(()=>{R();Bk={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xFCckg\xE4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xDFen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xFCnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xFCtzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xDFen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xDFen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xDFen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xDFen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xFCbersteigt die maximale Gr\xF6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"\xC4nderungen verwerfen",buttonNo:"\xC4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xC4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xDFen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xF6nnten anders aussehen",buttonYes:"\xC4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xFChren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xD6ffnen",buttonWebcamClose:"Webcam Schlie\xDFen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse",itemAriaLabel:"Bild mit ${label} ersetzen"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Filter Intensit\xE4t",itemAriaLabel:"${label} Filter hinzuf\xFCgen"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xFCcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xE4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xE4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xDF",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xFCcksetzen",sliderIntensity:"Focus Intensit\xE4t",itemAriaLabel:"${label} Fokus hinzuf\xFCgen"},items:{radial:"Kreisf\xF6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xDFsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xF6\xDFe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xDCberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus",itemAriaLabel:"Overlay ${label} hinzuf\xFCgen"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz",itemAriaLabel:"Sticker ${label} hinzuf\xFCgen"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xF6\xDFe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xF6he",tabFontSize:"Schriftgr\xF6\xDFe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle",itemAriaLabel:"Text Design ${label} hinzuf\xFCgen"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xF6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xFCcksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke",itemAriaLabel:"Rahmen ${label} hinzuf\xFCgen"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xFCcksetzen",sliderSize:"Dicke",sliderHardness:"H\xE4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xE4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xFCcksetzen",checkboxKeepResolution:"Fixiere Aufl\xF6sung",inputCropSize:"Bildgr\xF6\xDFe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xF6sung",tabCropSize:"Bildgr\xF6\xDFe",itemAriaLabel:"Zuschneiden ${label}",inputHeightAriaLabel:"H\xF6he",inputWidthAriaLabel:"Breite"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},["customTool"]:{title:"Benutzerdefiniert"}}});var cu;var FH=d(()=>{R();cu={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results",itemAriaLabel:"Replace image with ${label}"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity",itemAriaLabel:"Add ${label} filter"},categories:{["imgly_filter_category_duotone"]:"DuoTone",["imgly_filter_category_bw"]:"B & W",["imgly_filter_category_vintage"]:"Vintage",["imgly_filter_category_smooth"]:"Smooth",["imgly_filter_category_cold"]:"Cold",["imgly_filter_category_warm"]:"Warm",["imgly_filter_category_legacy"]:"Legacy"},items:{["imgly_lut_celsius"]:"Inferno",["imgly_lut_chest"]:"Chestnut",["imgly_lut_fixie"]:"Fixie",["imgly_lut_fridge"]:"Fridge",["imgly_lut_front"]:"Sunny 70s",["imgly_lut_k2"]:"Flat Black",["imgly_lut_mellow"]:"Mellow",["imgly_lut_sin"]:"Hard Stuff",["imgly_lut_texas"]:"Oldtimer",["imgly_lut_ad1920"]:"1920 A.D.",["imgly_lut_ancient"]:"Ancient",["imgly_lut_bleached"]:"Kalmen",["imgly_lut_bleachedblue"]:"Joran",["imgly_lut_blues"]:"Polaroid",["imgly_lut_blueshadows"]:"Zephyr",["imgly_lut_breeze"]:"Levante",["imgly_lut_bw"]:"Greyed",["imgly_lut_classic"]:"Classic",["imgly_lut_colorful"]:"Colorful",["imgly_lut_cool"]:"Snappy",["imgly_lut_cottoncandy"]:"Candy",["imgly_lut_creamy"]:"Creamy",["imgly_lut_eighties"]:"Low Fire",["imgly_lut_elder"]:"Colla",["imgly_lut_evening"]:"Sunrise",["imgly_lut_fall"]:"Moss",["imgly_lut_food"]:"Food",["imgly_lut_glam"]:"Glam",["imgly_lut_gobblin"]:"Gobblin",["imgly_lut_highcarb"]:"High Carb",["imgly_lut_highcontrast"]:"Hicon",["imgly_lut_k1"]:"K1",["imgly_lut_k6"]:"K6",["imgly_lut_kdynamic"]:"Pebble",["imgly_lut_keen"]:"Keen",["imgly_lut_lenin"]:"Lemon",["imgly_lut_litho"]:"Litho",["imgly_lut_lomo"]:"Lomo",["imgly_lut_lomo100"]:"Lomo 100",["imgly_lut_lucid"]:"Lucid",["imgly_lut_neat"]:"Neat",["imgly_lut_nogreen"]:"Pumpkin",["imgly_lut_orchid"]:"Solanus",["imgly_lut_pale"]:"Pale",["imgly_lut_pitched"]:"Pitched",["imgly_lut_plate"]:"Weathered",["imgly_lut_pola669"]:"Green Gap",["imgly_lut_polasx"]:"Pola SX",["imgly_lut_pro400"]:"Pro 400",["imgly_lut_quozi"]:"Quozi",["imgly_lut_sepiahigh"]:"Sepia",["imgly_lut_settled"]:"Settled",["imgly_lut_seventies"]:"Seventies",["imgly_lut_soft"]:"Soft",["imgly_lut_steel"]:"Steel",["imgly_lut_summer"]:"Summer",["imgly_lut_sunset"]:"Golden",["imgly_lut_tender"]:"Tender",["imgly_lut_twilight"]:"Twilight",["imgly_lut_winter"]:"Softy",["imgly_lut_x400"]:"Dusty",["imgly_duotone_desert"]:"Desert",["imgly_duotone_peach"]:"Peach",["imgly_duotone_clash"]:"Clash",["imgly_duotone_plum"]:"Plum",["imgly_duotone_breezy"]:"Breezy",["imgly_duotone_deepblue"]:"Deep Blue",["imgly_duotone_frog"]:"Frog",["imgly_duotone_sunset"]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity",itemAriaLabel:"Add ${label} focus"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode",itemAriaLabel:"Add ${name} overlay"},items:{["imgly_overlay_bokeh"]:"Bokeh",["imgly_overlay_chop"]:"Chop",["imgly_overlay_clouds"]:"Clouds",["imgly_overlay_golden"]:"Golden",["imgly_overlay_grain"]:"Grain",["imgly_overlay_hearts"]:"Hearts",["imgly_overlay_lightleak1"]:"Light Leak 1",["imgly_overlay_lightleak2"]:"Light Leak 2",["imgly_overlay_metal"]:"Metal",["imgly_overlay_mosaic"]:"Mosaic",["imgly_overlay_painting"]:"Painting",["imgly_overlay_paper"]:"Paper",["imgly_overlay_rain"]:"Rain",["imgly_overlay_vintage"]:"Vintage",["imgly_overlay_wall1"]:"Wall",["imgly_overlay_wall2"]:"Wall 2",["imgly_overlay_wood"]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity",itemAriaLabel:"Add ${label} sticker"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle",itemAriaLabel:"Add ${label} text design"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xDFen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size",itemAriaLabel:"Add ${label} frame"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size",itemAriaLabel:"Apply ${label} crop",inputHeightAriaLabel:"crop height",inputWidthAriaLabel:"crop width"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},["customTool"]:{title:"Custom"}}});var qh=d(()=>{EH();FH()});var RH,OH;var AH=d(()=>{xl();qh();RH=i=>{if(i==="de"){return Bk}return cu};OH=(i,t)=>{if(t&&t[i]){return Ei([RH(i),t[i]])}return RH(i)||cu}});var Hlt,Wlt,Pk,av;var Yh=d(()=>{xl();Hlt={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}};Wlt={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}};Pk=(i,t=8)=>{const e=i;const r=3*t;const o=e-2*r;const n=(o-2*t)/3;const s=(o-t)/2;return{advancedUIToolControlBar:{width:e,paddingTop:2*t,paddingBottom:2*t,paddingLeft:r,paddingRight:r,marginBottom:0,controls:{gutter:2*t}},advancedUICard:{small:{height:n,width:n},medium:{height:s,width:s},large:{height:86,width:o}},advancedUISpacer:t,inputs:{cropSize:{maxWidth:e},checkbox:{maxWidth:e}}}};av=()=>{const i=Pk(230);const t={advancedUIToolbar:{width:55,itemHeight:48,separatorHeight:20,marginBottom:0},basicCanvasOffset:40+76-88,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:72+40+4,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:Hlt,zIndex:Wlt};return Ei([i,t])}});var Glt,lv;var BH=d(()=>{Glt=({primary:i="#365afc",background:t="#0B0B0B",foreground:e="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const r="rgba(255, 255, 255, 0.90)";const o="rgba(255, 255, 255, 0.60)";const n="rgba(255, 255, 255, 0.38)";const s="#424242";const a="#333333";const l="#242424";const c="#171717";const u="#0B0B0B";const m="rgba(255, 255, 255, 0.08)";const p="rgba(0, 0, 0, 0.3)";const h="rgba(89, 121, 252, 0.20)";const g="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:i,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:i,containedPrimaryBackground:i,containedPrimaryForeground:r,outlinedPrimaryBackground:l,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:i,textSecondaryForeground:o,outlinedInactiveOverlayColor:p,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:a,foreground:e,activeForeground:e,activeBackground:i,inactiveOpacity:g,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:r,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:r,activeBorderColor:i,activeOverlayColor:h,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:r,inactiveOverlayColor:p,hoverOverlayColor:m},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:i,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:o,borderColor:a,caretColor:n,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:o,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,inactiveOpacity:g},textInput:{foreground:r,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:g},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:i,thumbBackground:c,thumbBorderColor:i,inactiveOpacity:g,hoverOpacity:"0.7"},selectColor:{activeBorderColor:i,inactiveOpacity:g},toolbar:{foreground:r,background:l,activeBackground:"transparent",activeForeground:i,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:g},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:`0 12px 17px 2px rgba(0,0,0,0.14),
        0 5px 22px 4px rgba(0,0,0,0.12),
        0 7px 8px -4px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};lv=Glt});var Vlt,Mk;var PH=d(()=>{Vlt=({primary:i="#1e47fb",background:t="#FBFBFB",foreground:e="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const r="rgba(0, 0, 0, 0.90)";const o="rgba(0, 0, 0, 0.60)";const n="rgba(0, 0, 0, 0.38)";const s="#CCCCCC";const a="#D4D4D4";const l="#E6E6E6";const c="#EEEEEE";const u="#FBFBFB";const m="rgba(125, 125, 125, 0.12)";const p="rgba(30, 71, 251, 0.2)";const h="rgba(0, 0, 0, 0.1)";const g="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:t,foreground:e,primary:i,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:i,containedPrimaryBackground:i,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:o,textPrimaryForeground:i,textSecondaryForeground:o,outlinedInactiveOverlayColor:h,textInactiveOpacity:"0.5",hoverOverlayColor:m},checkbox:{background:a,foreground:e,activeForeground:e,activeBackground:i,inactiveOpacity:g,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:r,headerForeground:o,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:r,activeBorderColor:i,activeOverlayColor:p,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:h,hoverOverlayColor:m},tabTitle:{foreground:o,background:"transparent",activeBackground:"transparent",activeBorderColor:i,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:o,borderColor:a,listBackground:a,caretColor:n,listForeground:o,listBorderColor:a,listItemHoverBackground:s,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,inactiveOpacity:g},textInput:{foreground:r,hoverBorderColor:r,background:"transparent",borderColor:a,inactiveOpacity:g},slider:{trackColor:s,activeTrackColor:i,thumbBackground:c,thumbBorderColor:i,inactiveOpacity:g,hoverOpacity:"0.7"},selectColor:{activeBorderColor:i,inactiveOpacity:g},toolbar:{foreground:r,background:a,activeBackground:"transparent",activeForeground:i,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:o,inputLabelForeground:o,inputLabelInactiveOpacity:g},mainCanvasActionBar:{background:"transparent",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:n},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:`0 8px 10px 1px rgba(0,0,0,0.14),
        0 3px 14px 2px rgba(0,0,0,0.12),
        0 5px 5px -3px rgba(0,0,0,0.20)`,controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:e,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};Mk=Vlt});var Jh,cv,Nr;var Zh=d(()=>{Yh();BH();PH();Jh=lv();cv=av();Nr={...Jh,measurements:cv}});var $lt,MH;var LH=d(()=>{xl();Zh();$lt=i=>{if(i==="light"){return Mk}return lv};MH=(i,t)=>{const e=$lt(i);if(t&&t[i]){const{primary:r,background:o,foreground:n}=t[i];const s={primary:r,background:o,foreground:n};const a=Object.keys(s).reduce((l,c)=>{if(s[c]){return{...l,[c]:s[c]}}return l},{});return Ei([e(a),t[i]])}return e()||Jh}});var Klt,zH;var UH=d(()=>{xl();Yh();Klt=["canvas","advancedUIToolbar","advancedUIToolControlBar","advancedUICard","advancedUISpacer","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","inputs","colorItem","fontSystem"];zH=i=>{const t=av();if(i){const e={};Object.keys(i).forEach(r=>{if(Klt.indexOf(r)!==-1){e[r]=i[r]}});return Ei([t,e])}return t}});var NH=d(()=>{AH();LH();UH()});var Xlt,Zi;var uv=d(()=>{wt();R();Ln();z();xl();Ok();DH();nk();qh();NH();Zh();Xlt={config:yl,locale:cu,theme:Jh,measurements:cv,initialMeasurements:cv};Zi=class{constructor(){this.dispose=()=>{this.state=null;this.events=null;this.assetProvider=null};this.checkDefaultToolAvailability=(t,e)=>{return e.indexOf(t)!==-1};this.state=Z(Xlt);this.events=new Rk;this.licenseChecker=null}saveConfig(t){if(t.mainCanvasActions&&t.mainCanvasActions.length!==4){t.mainCanvasActions.length=4}const e=t.layout&&t.layout==="basic"?Ak:yl;const r=Ei([e,t],{clone:true});this.licenseChecker=new Jx(r.license);if(!this.licenseChecker.areCustomAssetsAllowed()){r.sticker.enableCustomUpload=false}const o=OH(r.language,r.custom.languages);const n=MH(r.theme,r.custom.themes);const s=zH(r.custom.measurements);const{provider:a}=r.library;const l=[];r.adjustment.categories=r.adjustment.categories.reduce((m,p)=>{m.push({...p,items:p.items.filter(h=>{if(!_C[h.identifier]){l.push(h.identifier);return false}return true})});return m},[]);if(l.length!==0){console.error(`The following identifier are incorrect for the adjustment tool: ${l.join(", ")}`)}delete r.language;delete r.custom.languages;delete r.custom.themes;delete r.library.provider;let c=r.tools.reduce((m,p)=>{if(typeof p==="object"){return[...m,...p]}return[...m,p]},[]);if(!c.length){console.error(`Empty list input for tools`);c=Zx.reduce((m,p)=>{if(typeof p==="object"){return[...m,...p]}return[...m,p]},[])}c=c.filter(m=>this.licenseChecker.isToolAllowed(m));if(r.defaultTool){const m=this.checkDefaultToolAvailability(r.defaultTool,c);if(!m){[r.defaultTool]=c}}r.tools=c;this.state.config=r;this.state.locale=o;this.state.theme=n;this.state.measurements=s;this.state.initialMeasurements=s;const u=this.buildCustomAssetsConfig();this.assetProvider=new yp(u,this.licenseChecker.areCustomAssetsAllowed(),r.assetResolver);this.loadThemeFont();return a}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get initialMeasurements(){return this.state.initialMeasurements}get tools(){return this.config.tools.reduce((t,e)=>{if(typeof e==="string"){return[...t,e]}return[...t,"",...e]},[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return this.config.order==="default"}get isLayoutAdvanced(){return this.config.layout==="advanced"}get displayCloseButton(){return this.config.mainCanvasActions.indexOf("close")!==-1}loadThemeFont(){const{typography:t}=this.theme;if(!t.skipLoading){this.assetProvider.getFontManager().injectFonts([t])}}buildCustomAssetsConfig(){const t=this.tools;const e=lt(this.state.config);const r=this.state.config.assetBaseUrl;const{theme:o}=this.state;const n=t.indexOf("filter")!==-1?e["filter"]:void 0;const s=t.indexOf("focus")!==-1?e["focus"]:void 0;const a=t.indexOf("adjustment")!==-1?e["adjustment"]:void 0;const l=t.indexOf("sticker")!==-1?e["sticker"]:void 0;const c=t.indexOf("frame")!==-1?e["frame"]:void 0;const u=t.indexOf("overlay")!==-1?e["overlay"]:void 0;const m=t.indexOf("transform")!==-1?e["transform"]:void 0;const p=t.indexOf("text")!==-1?e["text"]:void 0;const h=t.indexOf("textdesign")!==-1?e["textdesign"]:void 0;return{basePath:r,theme:o,filter:n,focus:s,sticker:l,frame:c,overlay:u,transform:m,text:p,adjustment:a,textdesign:h}}};f([v],Zi.prototype,"saveConfig",1);f([v],Zi.prototype,"dispose",2);f([C],Zi.prototype,"config",1);f([C],Zi.prototype,"locale",1);f([C],Zi.prototype,"theme",1);f([C],Zi.prototype,"measurements",1);f([C],Zi.prototype,"initialMeasurements",1);f([C],Zi.prototype,"tools",1);f([C],Zi.prototype,"defaultTool",1);f([C],Zi.prototype,"isOrderDefault",1);f([C],Zi.prototype,"isLayoutAdvanced",1);f([C],Zi.prototype,"displayCloseButton",1)});var Lk;var zk=d(()=>{R();bC();Lk=class{constructor(t){this.editor=t}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,originalImage:t,blendMode:"normal",opacity:1})}else{this.container.setData({image:t,originalImage:t})}}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise((t,e)=>{const{image:r}=this.editor.activeStore;if(GF(r)){this.setBackgroundImage(r);t()}else{const o=this.editor.libraryStore.getRawUrl(r);this.getImageElement(o).then(n=>{this.setBackgroundImage(n);t()}).catch(n=>{e({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,r)=>{const o=new Image;o.addEventListener("load",()=>{e(o)});o.addEventListener("error",n=>{r(n)});o.crossOrigin=this.editor.configStore.config.engine.crossOrigin;o.src=t})}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}});var Uk;var Nk=d(()=>{z();Uk=class{constructor(t){this.applyNewImageTransform=()=>{const{size:t,width:e,height:r}=this.editor.engineMediator.image.container.getBounds();const o=this.container;o.setTransform(ie.IDENTITY);o.setResolution(t);o.setPivot(.5,.5);o.setPosition({x:e/2,y:r/2})};this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}});function Qh(i,t){const e=i.width/i.height;const r=t.width/t.height;if(e>r){return i.height/t.height}return i.width/t.width}var HH=d(()=>{});var qlt,Qs;var Hk=d(()=>{wt();z();HH();qlt={transform:ie.IDENTITY};Qs=class{constructor(t){this.initialTransform=ie.IDENTITY;this.editor=t;this.state=Z(qlt)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=true){const r=this.calculateTransform(t);if(r.scale.x){if(e){this.saveInitialTransform(r)}else{this.savePreviewTransform(r)}this.container.setTransform(this.state.transform);return true}return false}saveInitialTransform(t){this.initialTransform=t;this.savePreviewTransform(t)}savePreviewTransform(t){Ge(()=>{this.state.transform.position=t.position;this.state.transform.scale=t.scale;this.state.transform.rotation=t.rotation;const e=Do();const r=new F(t.scale).divide(e);this.previewTransformWithoutDpr={position:new F(t.position).divide(e),scale:r,rotation:t.rotation}})}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){const e=Do();const{scaleImageToFit:r}=this.editor.configStore.config;const{width:o,height:n}=this.editor.canvasStore.canvasSize;const s=this.editor.engine.getOutputDimensions();const a=Qh({width:o,height:n},s);let l=r?a:Math.min(1,a);const c=n-s.height*l;const u=this.editor.configStore.measurements.mainCanvasActionBar.height*2;if(c<u){l=Qh({width:o,height:n-u},s)}const m=.95;if(s.height*l>n*m){l=Qh({width:o,height:n*m},s)}if(s.width*l>o*m){l=Qh({width:o*m,height:n},s)}l*=e;const p={x:o*e/2,y:n*e/2};const h={x:l,y:l};return new ie(p,h,t)}};f([v],Qs.prototype,"updateTransform",1);f([v],Qs.prototype,"savePreviewTransform",1);f([C],Qs.prototype,"transform",1);f([C],Qs.prototype,"position",1);f([C],Qs.prototype,"scale",1);f([C],Qs.prototype,"rotation",1)});var vl,dv;var Wk=d(()=>{R();vl=class{constructor(){this.imageContainerOrder=[];this.spriteContainerOrder=[]}static checkTool(t){if(["sticker","text","textdesign","brush"].indexOf(t)!==-1){throw new Error("addIndex is used for non sprites, for sprites use addSprite")}}static remove(t,e){const r=e.findIndex(o=>o===t);if(r!==-1){e.splice(r,1)}return void 0}static indexForOrder(t,e,r){const o=t[r];const n=e.findIndex(a=>a===r);if(n!==-1){return{index:n,order:e}}const{length:s}=e;if(s){let a;for(a=0;a<s;a+=1){const l=e[a];const c=t[l];if(o<c){e=[...e.slice(0,a),r,...e.slice(a)];return{index:a,order:e}}}}e.push(r);return{index:e.length-1,order:e}}addIndex(t){vl.checkTool(t);const{index:e,order:r}=vl.indexForOrder(vl.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);this.imageContainerOrder=r;return e}removeIndex(t){vl.checkTool(t);vl.remove(t,this.imageContainerOrder)}addSprite(t){this.spriteContainerOrder.push(t);return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){vl.remove(t,this.spriteContainerOrder)}renameSprite(t,e){const r=this.spriteContainerOrder.findIndex(o=>o===t);if(r!==-1){this.spriteContainerOrder[r]=e}}bringToFront(t){const e=this.spriteContainerOrder.findIndex(r=>r===t);if(e!==-1){this.spriteContainerOrder.splice(e,1);this.spriteContainerOrder.push(t)}return this.getLastSpriteIndex()}getLastSpriteId(){const{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){const e=this.spriteContainerOrder.findIndex(r=>r===t);return e+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}};dv=vl;dv.IMAGE_CONTAINER_INDEX={["filter"]:0,["adjustment"]:1,["focus"]:2,["overlay"]:3}});var Gk;var Vk=d(()=>{Ln();z();zk();Nk();Hk();Wk();Gk=class{constructor(t){this.orderHelper=new dv;this.init=()=>{const t=this.editor.configStore.config.engine;this.engine=new hm({...t,license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark});this.image=new Lk(this.editor);this.output=new Uk(this.editor);this.preview=new Qs(this.editor)};this.dispose=()=>{if(this.engine){this.engine.dispose();this.engine=null}this.image=null;this.output=null;this.preview=null};this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){const r=this.preview.previewTransformWithoutDpr;if(qr(t)){const o=this.editor.engine.convertPointFromPreviewIntoWorldSpace(F.ZERO,r,e);const n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},r,e);return F.distance(new F(o),new F(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,r,e)}worldSpaceToPreviewSpace(t){const e=this.preview.previewTransformWithoutDpr;if(qr(t)){const r=this.editor.engine.convertPointFromWorldIntoPreviewSpace(F.ZERO,e);const o=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return F.distance(new F(r),new F(o))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){if(qr(t)){return st.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer())}return st.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){const e=this.preview.previewTransformWithoutDpr;if(qr(t)){const r=this.editor.engine.convertPointFromPreviewIntoOutputSpace(F.ZERO,e);const o=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return F.distance(new F(r),new F(o))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}}});var _m;var WH=d(()=>{wt();_m=class{constructor(){this.snapshots=[];this.observeIndex=Z.box(-1)}addSnapshot(t){if(this.index===this.snapshots.length-1){this.snapshots=this.snapshots.concat(JSON.stringify(t))}else{this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)]}this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[];this.observeIndex.set(-1)}undo(){if(this.canUndo){this.observeIndex.set(this.index-1);return JSON.parse(this.getCurrentState())}return null}redo(){if(this.canRedo){this.observeIndex.set(this.index+1);return JSON.parse(this.getCurrentState())}return null}discardSnapshotsfromIndex(t){if(t>0&&t<this.snapshots.length-1){this.snapshots=this.snapshots.slice(0,t);this.observeIndex.set(this.snapshots.length-1)}}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};f([C],_m.prototype,"index",1);f([C],_m.prototype,"canUndo",1);f([C],_m.prototype,"canRedo",1)});var uu;var mv=d(()=>{wt();R();WH();Ji();uu=class{constructor(t){this.awaitHistoryChange=false;this.isDirtySinceSave=false;this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo();this.awaitHistoryChange=true;const t=this.appHistoryManager.undo();await this.applyState(t);this.awaitHistoryChange=false;if(!this.canUndo){this.isDirtySinceSave=false}}};this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo();this.awaitHistoryChange=true;const t=this.appHistoryManager.redo();await this.applyState(t);this.awaitHistoryChange=false}};this.editor=t;this.appHistoryManager=new _m}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const t=lt(this.editor.adjustmentsToolStore.state);const e=lt(this.editor.filterToolStore.state);const r=this.editor.focusToolStore.getFocusStateForHistory();const o=lt(this.editor.overlayToolStore.state);const n=lt(this.editor.frameToolStore.state);const{strokes:s}=this.editor.brushToolStore;const a=this.editor.spriteStore.getSpriteHistoryState();const l=this.editor.transformToolStore.serializableState;return{["adjustment"]:t,["filter"]:e,["focus"]:r,["overlay"]:o,["frame"]:n,["brush"]:s,sprite:a,["transform"]:l}}addInitialSnapshot(){const t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:"add",description:"Initial State"})}addSnapshot(t,e,r){let o;if(!t){o=this.getHistoryState()}else if(t.sprite||t.transform){o={...this.getHistoryState(),...t}}else{o=t}this.appHistoryManager.addSnapshot({state:o,type:e,description:r});this.editor.configStore.events.onHistoryChange();if(!this.isDirtySinceSave){this.isDirtySinceSave=true}}async applyState({state:t}){try{if(t){const e=Object.keys(t);for(const r of e){switch(r){case"filter":await this.editor.filterToolStore.updateStateFromHistory(t[r]);break;case"adjustment":await this.editor.adjustmentsToolStore.updateStateFromHistory(t[r]);break;case"overlay":await this.editor.overlayToolStore.updateStateFromHistory(t[r]);break;case"frame":await this.editor.frameToolStore.updateStateFromHistory(t[r]);break;case"focus":await this.editor.focusToolStore.updateStateFromHistory(t[r],this.editor.canvasStore.sizeVector);break;case"brush":await this.editor.brushToolStore.updateStateFromHistory(t[r]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(t[r]);break;case"transform":this.editor.outputContainer.pauseChildrenUpdates();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.updateStateFromSerialization(t[r]);this.editor.transformToolStore.onLeave();this.editor.transformToolStore.onEnter();this.editor.transformToolStore.onLeave();this.editor.outputContainer.resumeChildrenUpdates();await this.editor.wait();break;default:break}}await this.editor.renderPromise()}}catch(e){console.error(e);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:e,handleConfirm:()=>{this.applyState({state:t})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset();this.isDirtySinceSave=false}getCurrentSpritesState(){var t,e;return(e=(t=JSON.parse(this.appHistoryManager.getCurrentState()))==null?void 0:t.state)==null?void 0:e.sprite}};f([v],uu.prototype,"undo",2);f([v],uu.prototype,"redo",2);f([C],uu.prototype,"canUndo",1);f([C],uu.prototype,"canRedo",1)});var Ylt,GH,Jlt,jk;var VH=d(()=>{Ylt=(i,t)=>new Promise((e,r)=>{const o=new XMLHttpRequest;o.onload=()=>{const n=new FileReader;n.onloadend=()=>{if(typeof n.result==="string"&&n.result.substr(0,10)==="data:image"){e(n.result)}else{r(new Error(`The image could not be loaded from ${i}`))}};n.onerror=s=>{r(s)};n.readAsDataURL(o.response)};o.open("GET",i);o.responseType="blob";o.withCredentials=t==="use-credentials";o.send()});GH=(i,t)=>{return new Promise((e,r)=>{const o=new Image;o.onload=()=>{e(o)};o.onerror=()=>{r(new Error(`Failed to load image with src:${i}`))};o.crossOrigin=t;o.src=i})};Jlt=(i,t)=>new Promise((e,r)=>{Ylt(i,t).then(o=>{const n=new Image;n.addEventListener("load",()=>{e(n)});n.src=o}).catch(()=>{GH(i,t).then(o=>e(o)).catch(o=>{r(o)})})});jk=async({url:i,image:t,crossOrigin:e="anonymous"})=>{try{if(t&&t.src&&t.src.substr(0,5)==="data:"||t&&t.src&&t.src.includes(".svg")){return t}if(typeof i==="string"&&i.substr(0,5)==="data:"||typeof i==="string"&&i.includes(".svg")){return GH(i,e)}return Jlt(i||t.src,e)}catch(r){throw new Error(r)}}});var Zlt,pr;var pv=d(()=>{wt();R();z();VH();Zlt={tool:null,isWebcam:false,image:"",imageLoadedToEngine:false};pr=class{constructor(t){this.setImage=async t=>{try{const{crossOrigin:e}=this.editor.configStore.config.engine;if(typeof t==="string"&&!t.trim()||t===void 0||t===null){this.state.image=null}else if(typeof t==="string"){this.state.image=await jk({url:ln(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})}else if(t instanceof HTMLImageElement){this.state.image=await jk({image:t,crossOrigin:e})}if(this.isWebcam){this.state.isWebcam=false}}catch(e){throw new Error(e)}};this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t};this.newImage=t=>{this.editor.init(t)};this.dispose=()=>{this.state=null;this.editor=null};this.editor=t;this.state=Z(Zlt)}selectTool(t){var r,o,n;const{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(e==null?void 0:e.isToolAllowed(t))&&(this.image||t==="library"||t==="customTool")){if(this.editor.configStore.isLayoutAdvanced){const s=(n=(o=(r=this.editor.configStore.state.config["customTool"])==null?void 0:r.measurements)==null?void 0:o.advancedUIToolControlBar)==null?void 0:n.width;if(s){if(t==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=s}else if(this.state.tool==="customTool"){this.editor.configStore.measurements.advancedUIToolControlBar.width=this.editor.configStore.initialMeasurements.advancedUIToolControlBar.width}}}this.editor.onToolChange(this.state.tool,t);this.state.tool=t;this.editor.configStore.events.onToolChanged(t);switch(t){case"text":if(this.editor.configStore.config.text.addDefaultTextOnEnter){this.editor.spriteStore.textToolStore.addOrselect()}else{this.editor.spriteStore.textToolStore.loadFonts()}break;case"textdesign":if(this.editor.configStore.config.textdesign.addDefaultTextOnEnter){this.editor.spriteStore.textDesignToolStore.addOrselect()}break;case"brush":{this.editor.brushToolStore.initSize();break}case"transform":this.editor.transformToolStore.applyDefaultCrop();break;default:break}}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};f([v],pr.prototype,"selectTool",1);f([v],pr.prototype,"selectWebcam",1);f([v],pr.prototype,"setImage",2);f([v],pr.prototype,"setImageLoadedToEngine",2);f([v],pr.prototype,"newImage",2);f([v],pr.prototype,"dispose",2);f([C],pr.prototype,"webcamLabel",1);f([C],pr.prototype,"tool",1);f([C],pr.prototype,"isWebcam",1);f([C],pr.prototype,"image",1);f([C],pr.prototype,"imageLoadedToEngine",1)});var Qlt,$k,Kk,Fi;var hv=d(()=>{wt();R();z();Qlt={height:150,width:150};$k={height:0,width:0};Kk=class{constructor(t){this.canvasClickDisabled=Z.box(false);this.resizeCanvas=(t=null)=>{const e=this.editor.activeStore.tool;const r=t==="transform"||!t&&e==="transform";const{isLayoutAdvanced:o,measurements:n}=this.editor.configStore;const{storedSize:s}=this.editor.canvasStore;let a=0;if(!o&&r){a=n.basicUIToolControlBar.controlsBarHeight*-1;if(t==="transform"&&e==="brush"){a-=n.basicUIToolControlBar.itemsBarHeight+4}}this.setCanvasSize({width:s.width,height:s.height+a})};this.setCanvasSize=t=>{this.state.canvasSize=t};this.dispose=()=>{this.state=null;this.canvas=null;this.canvasClickDisabled=null;this.editor=null};this.editor=t;this.state=Z(Kk.initialState)}setCanvasElement(t){this.canvas=t;this.editor.engineMediator.preview.createPreview(t);if(this.editor.activeStore.image){this.editor.init(this.editor.activeStore.image)}}saveDimensions({height:t,width:e,render:r}){const{imageLoadedToEngine:o}=this.editor.activeStore;if(t>$k.height&&e>$k.width){this.state.storedSize={width:e,height:t};if(this.state.canvasSize.height===0){this.state.canvasSize={width:e,height:t}}if(r&&o){this.editor.resize()}}}disableCanvasClick(){this.canvasClickDisabled.set(true)}enableCanvasClick(){this.canvasClickDisabled.set(false)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return F.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){const e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map(r=>r.getID()).filter(r=>r!==this.editor.engineMediator.image.getImgageContainerId());this.editor.spriteStore.onCanvasClick(e)}};Fi=Kk;Fi.initialState={canvasSize:$k,storedSize:Qlt};f([v],Fi.prototype,"setCanvasElement",1);f([v],Fi.prototype,"saveDimensions",1);f([v],Fi.prototype,"resizeCanvas",2);f([v],Fi.prototype,"disableCanvasClick",1);f([v],Fi.prototype,"enableCanvasClick",1);f([v],Fi.prototype,"setCanvasSize",2);f([v],Fi.prototype,"dispose",2);f([C],Fi.prototype,"isCanvasClickable",1);f([C],Fi.prototype,"canvasSize",1);f([C],Fi.prototype,"storedSize",1);f([C],Fi.prototype,"sizeVector",1);f([C],Fi.prototype,"sizeVectorMagnitude",1)});var tct,Hr;var fv=d(()=>{wt();R();tct={type:null,identifier:null,isVisible:false,error:""};Hr=class{constructor(t){this.showActionModal=({type:t,identifier:e,error:r,handleConfirm:o,handleDismiss:n})=>{this.resetHandlers();this.state.isVisible=true;this.state.identifier=e;this.state.type=t;this.state.error=r||"";this.handleConfirm=o;this.handleDismiss=n};this.hideModal=()=>{this.state.isVisible=false;this.state.type=null;this.state.error="";this.state.identifier=null;this.resetHandlers()};this.dispose=()=>{this.state=null;this.configStore=null};this.resetHandlers=()=>{this.handleConfirm=null;this.handleDismiss=null};this.configStore=t.configStore;this.state=Z(tct)}showInfoModal(t){this.resetHandlers();this.state.isVisible=true;this.state.type="info";this.state.identifier=t;this.state.error=""}showTextEditModal(){this.resetHandlers();this.state.isVisible=true;this.state.type="textEdit";this.state.identifier="inputText";this.state.error=""}get modalProps(){const{isVisible:t}=this.state;const e=this.getModalLocale();if(e){const{bodyLabel:r,headerLabel:o,buttonYes:n,buttonNo:s}=e;return{headerLabel:o,bodyLabel:r,confirmLabel:n,dismissLabel:s,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:false}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:r,advancedUIToolbar:o},isOrderDefault:n}=this.configStore;const s=(r.width+o.width)*(!n?-1:1);const a=e;return t?{x:s/2,y:0}:{x:0,y:-a}}getModalLocale(){const{identifier:t,error:e,type:r}=this.state;const{locale:o}=this.configStore;if(!r||!t||r==="textEdit")return null;if(r&&t&&o[`${r}Modals`]&&o[`${r}Modals`][t]){const n=o[`${r}Modals`][t];let{body:s}=n;if(s&&typeof e==="object"){Object.keys(e).forEach(l=>{s=s.replace(`\${${l}}`,e[l])})}else if(s){s=s.replace("${error}",e)}let a=n.heading;if(r==="error"||r==="warning"){const l={error:o.common.error,warning:o.common.warning};const c=r==="error"?l.error:l.warning;a=`${c}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:s,headerLabel:a,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};f([v],Hr.prototype,"showActionModal",2);f([v],Hr.prototype,"showInfoModal",1);f([v],Hr.prototype,"showTextEditModal",1);f([v],Hr.prototype,"hideModal",2);f([v],Hr.prototype,"dispose",2);f([C],Hr.prototype,"modalProps",1);f([C],Hr.prototype,"isVisible",1);f([C],Hr.prototype,"type",1);f([C],Hr.prototype,"identifier",1);f([C],Hr.prototype,"positionOffset",1)});var Qe;var gv=d(()=>{wt();z();Qe=class{constructor(t){this.defaultScale=1;this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map(t=>t/100);this.state={position:{x:0,y:0},scaleIndex:-1};this.offset={x:0,y:0};this.in=()=>{if(this.canZoomIn){this.state.scaleIndex+=1;this.scaleRender()}};this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:t,maxOffsetY:e}=this.checkOffset({x:0,y:0});if(this.state.scaleIndex===this.defaultIndex){this.offset.y=e}if(this.state.scaleIndex===this.defaultIndex){this.offset.x=t}this.savePosition();this.scaleRender()}};this.setOffset=t=>{const{canDragX:e,canDragY:r}=this.checkOffset(t);if(e){this.offset.x=t.x}if(r){this.offset.y=t.y}this.scaleRender()};this.editor=t}setInitialTransform(t=0){const e=Do();const{scaleImageToFit:r}=this.editor.configStore.config;const{transform:o}=this.editor.engineMediator.preview;Ge(()=>{const n=Math.abs(t||o.scale.x);this.setDefaultScale(r?n:Math.min(1*e,n));this.setPosition(o.position)})}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x;this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset());this.offset={x:0,y:0}}setDefaultScale(t){if(this.defaultScale!==1){const r=this.SCALE_LEVELS.findIndex(o=>o===this.defaultScale);if(r!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),...this.SCALE_LEVELS.slice(r+1)]}}const e=this.SCALE_LEVELS.findIndex(r=>r===t);if(e!==-1){this.state.scaleIndex=e}else{const r=this.SCALE_LEVELS.findIndex((o,n)=>{if(n===0){return t<o}return this.SCALE_LEVELS[n-1]<t&&t<o});if(r!==-1){this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,r),t,...this.SCALE_LEVELS.slice(r)];this.state.scaleIndex=r}else{this.SCALE_LEVELS=[...this.SCALE_LEVELS,t];this.state.scaleIndex=this.SCALE_LEVELS.length-1}}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){const e=Do();const{scaledSize:r}=this;const{previewSize:o}=this;const n=this.editor.engineMediator.preview.initialTransform.position;const s=this.getPositionWithOffset(t);const a=(r.width-o.width)*e/2;const l=(r.height-o.height)*e/2;const c=n.x-s.x;const u=n.y-s.y;const m=Math.abs(c);const p=Math.abs(u);const h=c>0;const g=u>0;const _=m-a;const x=p-l;return{canDragX:_<0,canDragY:x<0,maxOffsetX:h?-_:_,maxOffsetY:g?-x:x}}calculateScale(t=0,e=this.previewSize,r=this.defaultScale){const{width:o,height:n}=e;const s=new F({x:o,y:n});const a=new F(Math.abs(s.x*Math.cos(t))+Math.abs(s.y*Math.sin(t)),Math.abs(s.x*Math.sin(t))+Math.abs(s.y*Math.cos(t)));const l=s.subtract(a).divide(2).multiply(r).abs;if(l.y>l.x){return l.y*2/s.y+r}return l.x*2/s.x+r}get defaultIndex(){return this.SCALE_LEVELS.findIndex(t=>t===this.defaultScale)}getPositionWithOffset(t=this.offset){const{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=false){const e=this.editor.scale.getPositionWithOffset();const r=t?this.defaultScale:this.scale;const o={x:r,y:r};this.editor.engineMediator.preview.container.setScale(o);this.editor.engineMediator.preview.container.setPosition(e);this.editor.engineMediator.preview.savePreviewTransform({scale:o,position:e,rotation:0});if(!t){this.editor.render()}}get scale(){const t=this.state.scaleIndex;return t!==-1?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){const t=Do();return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:t}=this.editor.configStore.config;if(t){return this.state.scaleIndex>this.defaultIndex}return this.state.scaleIndex!==0}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const t=this.state.scaleIndex;const e=t!==-1?this.SCALE_LEVELS[t]:this.defaultScale;const{previewSize:r}=this;return{width:r.width*e/this.defaultScale,height:r.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};f([Z],Qe.prototype,"state",2);f([v],Qe.prototype,"in",2);f([v],Qe.prototype,"out",2);f([v],Qe.prototype,"setInitialTransform",1);f([v],Qe.prototype,"resetScale",1);f([v],Qe.prototype,"resetPosition",1);f([v],Qe.prototype,"setPosition",1);f([v],Qe.prototype,"savePosition",1);f([v],Qe.prototype,"setDefaultScale",1);f([v],Qe.prototype,"setScaleToDefault",1);f([C],Qe.prototype,"scale",1);f([C],Qe.prototype,"zoomLevel",1);f([C],Qe.prototype,"canDrag",1);f([C],Qe.prototype,"canZoomOut",1);f([C],Qe.prototype,"canZoomIn",1);f([C],Qe.prototype,"position",1);f([C],Qe.prototype,"scaledSize",1)});var jH,ect,Wn,Le;var Xk=d(()=>{wt();z();jH=[[0,0],[0,1],[1,0],[1,1]];ect=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];Wn=class{constructor(t,e,r="center",o=true,n=false){this.considerRotation=true;this.considerFlip=true;this.store=e;this.m=r==="center"?Wn.movePivotTo([.5,.5]):jH;this.considerRotation=o;this.considerFlip=n;this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,r){return ect[(e?1:0)+(r?2:0)][t]}static movePivotTo(t){return jH.map(e=>[e[0]-t[0],e[1]-t[1]])}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return this.considerFlip?this.store.isFlippedHorizontal:false}get flipVertically(){return this.considerFlip?this.store.isFlippedVertical:false}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,r){const o=Wn.getFlippedEdgeIndex(t,e,r);const n=this.m[o][0]*this.size.width;const s=this.m[o][1]*this.size.height;return{width:n,height:s}}get leftTop(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(0,e,r);return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(1,e,r);return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(2,e,r);return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(3,e,r);return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(1,e,r);o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:r}=this;const o=this.handleOrigin(3,e,r);o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height;return Wn.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){const t=new F(this.leftTop);const e=new F(this.leftBottom);return t.add(e).divide(2)}get rightMid(){const t=new F(this.rightTop);const e=new F(this.rightBottom);return t.add(e).divide(2)}};Le=Wn;Le.coordinatesWithRotation=({width:t,height:e},r,o,n,s,a)=>{let l=t*Math.cos(r)-e*Math.sin(r)+a.x;let c=t*Math.sin(r)+e*Math.cos(r)+a.y;if(o){l=s.x*2-l}if(n){c=s.y*2-c}return new F({x:l,y:c}).rounded};f([C],Le.prototype,"position",1);f([C],Le.prototype,"size",1);f([C],Le.prototype,"rotation",1);f([C],Le.prototype,"flipHorizontally",1);f([C],Le.prototype,"flipVertically",1);f([C],Le.prototype,"flipCenter",1);f([C],Le.prototype,"leftTop",1);f([C],Le.prototype,"leftBottom",1);f([C],Le.prototype,"rightTop",1);f([C],Le.prototype,"rightBottom",1);f([C],Le.prototype,"leftBottomHandle",1);f([C],Le.prototype,"rightBottomHandle",1);f([C],Le.prototype,"leftMid",1);f([C],Le.prototype,"rightMid",1)});var qk=d(()=>{uv();qh();Zh();Yh();Vk();Wk();zk();Nk();Hk();mv();pv();hv();fv();gv();Xk()});var Et;var $H=d(()=>{wt();z();Ik();Et=class{constructor(t,e){this.minCropSize=0;this.id="";this.dispose=()=>{this.state=null;this.defaults=null;this.configStore=null};this.state={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:false,flipVertically:false,cropState:Z.map({})};this.configStore=t.configStore;this.id=Ot();this.minCropSize=this.configStore.measurements.crop.minSize;this.defaults=e}changeIdentifier(t){this.state.identifier=t;const e=this.state.cropState.get(`${this.id}-${t}`);if(!e){this.state.cropState.set(`${this.id}-${t}`,{...Vo})}}changeRatio(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){this.state.cropState.set(`${this.id}-${this.identifier}`,{...e,ratio:t})}}changeSize(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t.width&&t.width>0){e.size.width=Math.round(t.width)}if(t.height&&t.height>0){e.size.height=Math.round(t.height)}this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}changeHeight(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t){e.size.height=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}}changeWidth(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){if(t){e.size.width=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}}changePositionX(t,e){const r=this.state.cropState.get(`${this.id}-${this.identifier}`);if(r&&t<=e-this.minCropSize&&t>=0){r.position.x=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,r);return true}return false}changePositionY(t,e){const r=this.state.cropState.get(`${this.id}-${this.identifier}`);if(r&&t<=e-this.minCropSize&&t>=0){r.position.y=Math.round(t);this.state.cropState.set(`${this.id}-${this.identifier}`,r);return true}return false}changePosition(t,e){const r=this.state.cropState.get(`${this.id}-${this.identifier}`);if(r){if(t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0){r.position.x=Math.round(t.x);r.position.y=Math.round(t.y);this.state.cropState.set(`${this.id}-${this.identifier}`,r);return true}}return false}changeLockResolution(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){e.lockResolution=t!==void 0?t:!e.lockResolution;this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}changeForceDimensions(t){const e=this.state.cropState.get(`${this.id}-${this.identifier}`);if(e){e.forceDimensions=t;this.state.cropState.set(`${this.id}-${this.identifier}`,e)}}clearState(){this.state.cropState.forEach((t,e)=>e.startsWith(this.id)&&this.state.cropState.delete(e))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=false;this.state.flipVertically=false}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t;this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:t,height:e}=this.defaults.maxCropMaskSize;return new F(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:Vo.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:Vo.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:Vo.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:Vo.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:Vo.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:Vo.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:Vo.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:Vo.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:Vo.forceDimensions}get selectedCrop(){return this.state.cropState.get(`${this.id}-${this.identifier}`)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};f([Z],Et.prototype,"state",2);f([v],Et.prototype,"changeIdentifier",1);f([v],Et.prototype,"changeRatio",1);f([v],Et.prototype,"changeSize",1);f([v],Et.prototype,"changeHeight",1);f([v],Et.prototype,"changeWidth",1);f([v],Et.prototype,"changePositionX",1);f([v],Et.prototype,"changePositionY",1);f([v],Et.prototype,"changePosition",1);f([v],Et.prototype,"changeLockResolution",1);f([v],Et.prototype,"changeForceDimensions",1);f([v],Et.prototype,"clearState",1);f([v],Et.prototype,"setRotation",1);f([v],Et.prototype,"resetRotation",1);f([v],Et.prototype,"resetOutputRotation",1);f([v],Et.prototype,"resetFlip",1);f([v],Et.prototype,"updateFlip",1);f([v],Et.prototype,"setOutputRotation",1);f([v],Et.prototype,"flipHorizontally",1);f([v],Et.prototype,"flipVertically",1);f([v],Et.prototype,"dispose",2);f([C],Et.prototype,"flipCenter",1);f([C],Et.prototype,"isFlippedHorizontal",1);f([C],Et.prototype,"isFlippedVertical",1);f([C],Et.prototype,"identifier",1);f([C],Et.prototype,"height",1);f([C],Et.prototype,"width",1);f([C],Et.prototype,"position",1);f([C],Et.prototype,"ratio",1);f([C],Et.prototype,"size",1);f([C],Et.prototype,"x",1);f([C],Et.prototype,"y",1);f([C],Et.prototype,"lockResolution",1);f([C],Et.prototype,"forceDimensions",1);f([C],Et.prototype,"selectedCrop",1);f([C],Et.prototype,"rotationInDegrees",1);f([C],Et.prototype,"outputRotation",1)});var Yk;var KH=d(()=>{wt();z();pm();Yk=class{constructor(t){this.transforms={output:JSON.stringify(ie.IDENTITY),preview:JSON.stringify(ie.IDENTITY)};this.setFrameOpacity=t=>{this.frameOpacity=t;if(this.entered&&this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(0)}};this.setOverlayOpacity=t=>{this.overlayOpacity=t;if(this.entered&&this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(0)}};this.editor=t;this.overlayOpacity=0;this.frameOpacity=0;this.entered=false}onLeave(){const{flipHorizontally:t,flipVertically:e,rotation:r,outputRotation:o}=this.transformToolStore.rotateFlipState;this.entered=false;if(this.editor.overlayToolStore.identifier!=="identity"){this.editor.overlayToolStore.changeOpacity(this.overlayOpacity)}if(this.editor.frameToolStore.identifier!=="identity"){this.editor.frameToolStore.changeOpacity(this.frameOpacity)}this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new F(this.transformToolStore.leftTopRespectFlip).add(new F(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new F(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),true);const s=this.engineMediator.preview.container;const{outputContainer:a}=this.editor;a.setResolution(lt(this.transformToolStore.localOutputImageSize));a.setData({flipVertically:e,flipHorizontally:t});const l=s.getScale();this.editor.overlayToolStore.correctOverlayFlip();this.saveTransforms();let c=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:g,defaultImageSize:_}=this.transformToolStore;const x=this.transformToolStore.maxCropMaskSize;const b={height:g.height*_.height/x.height,width:g.width*_.width/x.width};c=b.width/this.transformToolStore.localOutputImageSize.width}const u=Math.abs(l.x);const m=c/(u/this.transformToolStore.defaultScale);const p={x:m,y:m};const h=-(r-o);a.setTransform({scale:p,position:n,rotation:h});this.editor.engineMediator.preview.updateTransform(0,false);this.editor.scale.setInitialTransform();this.editor.spriteStore.updateCanvasControls();this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=true;if(this.editor.overlayToolStore.identifier!=="identity"){this.overlayOpacity=this.editor.overlayToolStore.opacity;this.editor.overlayToolStore.changeOpacity(0)}if(this.editor.frameToolStore.identifier!=="identity"){this.frameOpacity=this.editor.frameToolStore.opacity;this.editor.frameToolStore.changeOpacity(0)}this.editor.engine.setWatermarkOpacity(0);this.editor.scale.setScaleToDefault();const t=this.engineMediator.preview.container;const{outputContainer:e}=this.editor;const r=JSON.parse(this.transforms.preview);e.setResolution(lt(this.transformToolStore.defaultImageSize));t.setTransform(r);e.setTransform(JSON.parse(this.transforms.output));const o=r.scale;e.setData({flipVertically:false,flipHorizontally:false});this.transformToolStore.transformStore.updateFlip({flipVertically:o.y<0,flipHorizontally:o.x<0});this.engineMediator.preview.savePreviewTransform(r);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,e=true){const{width:r,height:o}=this.editor.engineMediator.image.container.getBounds();const n=LA(t)?{width:o,height:r}:{width:r,height:o};this.editor.outputContainer.rotate(t,n);this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:s}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(s);Ge(()=>{this.editor.scale.setInitialTransform();const a=this.getScaleWithFlip(s);this.engineMediator.preview.container.setScale(a);this.transformToolStore.setCropDefaults(true);this.transformToolStore.updateCropMask()});if(e){this.editor.render()}}applyPreviewTransform(){const{rotation:t,flipHorizontally:e,flipVertically:r}=this.transformToolStore.rotateFlipState;const o=this.editor.scale.getPositionWithOffset();const n=this.getScaleWithFlip();let s=t;if(e){s=mm(s)}if(r){s=mm(s)}const a={position:o,rotation:s,scale:n};this.engineMediator.preview.savePreviewTransform(a);this.engineMediator.preview.container.setTransform(a)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:e,flipVertically:r}=this.transformToolStore.rotateFlipState;const o=e?-1:1;const n=r?-1:1;const s=this.editor.scale.calculateScale(t);return{x:s*o,y:s*n}}saveTransforms(){const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){const t=this.engineMediator.preview.container.getTransform();const{scale:e}=t;const{flipVertically:r,flipHorizontally:o}=this.editor.outputContainer.getData();const n=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify({...t,scale:{x:o?-e.x:e.x,y:r?-e.y:e.y}}),output:n}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}});var Jk;var XH=d(()=>{z();Jk=class{constructor(t){this.store=t;this.initialState={};this.state={};this.dispose=()=>{this.initialState=null;this.state=null}}init(){this.initialState=this.store.serializableState;this.state={...this.initialState}}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,qe.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}}});var qH,du,Q;var Zk=d(()=>{wt();R();z();qk();Ji();Un();$H();KH();XH();qH="identity";du=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1};this.defaultAngle=0;this.dragMode=Z.box(false);this.minCropSize=0;this.transformHistory=new Jk(this);this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1};this.localOutputSize={width:0,height:0};this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return false;let e=this.editor.configStore.config.assetBaseUrl;const{length:r}=e;if(e[r-1]!=="/"){e+="/"}if(`${e}transform`===t){return false}const o=new Image;try{o.src=t;return true}catch(n){return false}};this.reset=()=>{this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.resetCrop();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);const t=this.editor.outputContainer.getRotation();if(t!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();this.editor.render();this.trackChanges()};this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height);this.localOutputSize.width=Math.round(t.width);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(t.width),height:Math.round(t.height)})};this.changeDefaultScale=t=>{this.defaults.scale=t};this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)};this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)};this.changeLockResolution=()=>{this.transformStore.changeLockResolution();this.trackChanges()};this.rotateClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?uS:dS;this.rotateOutputContainer(e(t))};this.rotateAntiClockwise=()=>{const t=this.editor.outputContainer.getRotation();const e=this.isFlippedVertical?dS:uS;this.rotateOutputContainer(e(t))};this.flipHorizontally=(t=true)=>{this.transformStore.flipHorizontally();this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal);this.transformRender(t);if(t){this.trackChanges()}};this.flipVertically=(t=true)=>{this.transformStore.flipVertically();this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical);this.transformRender(t);if(t){this.trackChanges()}};this.applyDefaultCrop=(t=false)=>{if(this.identifier==="identity"){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}};this.updateCropMask=()=>{this.changeIdentifier(this.identifier,true)};this.onLeftTop=({x:t,y:e})=>{const r=this.getRatio();const o=this.rightBottom;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.min(Math.max(0,t),o.x-n.width);const l=Math.min(Math.max(0,e),o.y-n.height);const c=o.x-a;const u=o.y-l;const m={width:Math.max(this.minCropSize,Math.min(c,s.width-a)),height:Math.max(this.minCropSize,Math.min(u,s.height-l))};if(r==="*"){if(this.changePosition({x:a,y:l})){this.changeCropAndOutputSize(m)}}else{const p=this.proportionalSize(r,m);const h=new F(o).subtract({x:p.width,y:p.height});if(this.changePosition(h)){this.changeCropAndOutputSize(p,r)}}};this.onLeftBottom=({x:t,y:e})=>{const r=this.getRatio();const o=this.rightTop;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.min(Math.max(0,t),o.x-n.width);const l=Math.max(0,e,o.y+n.height);const c=o.x-a;const u=l-o.y;const m={width:Math.max(1,Math.min(c,s.width-a)),height:Math.max(1,Math.min(u,s.height-o.y))};if(r==="*"){if(this.changePositionX(a)){this.changeCropAndOutputSize(m)}}else{const p=this.proportionalSize(r,m);if(this.changePositionX(o.x-p.width)){this.changeCropAndOutputSize(p,r)}}};this.onRightTop=({x:t,y:e})=>{const r=this.getRatio();const o=this.leftBottom;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.max(0,t,o.x+n.width);const l=Math.min(Math.max(0,e),o.y-n.height);const c=a-o.x;const u=o.y-l;const m={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(u,s.height-l))};if(r==="*"){if(this.changePositionY(l)){this.changeCropAndOutputSize(m)}}else{const p=this.proportionalSize(r,m);if(this.changePositionY(o.y-p.height)){this.changeCropAndOutputSize(p,r)}}};this.onRightBottom=({x:t,y:e})=>{const r=this.getRatio();const o=this.leftTop;const{minCropMaskSize:n,maxCropMaskSize:s}=this;const a=Math.max(0,t,o.x+n.width);const l=Math.max(0,e,o.y+n.height);const c=a-o.x;const u=l-o.y;const m={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(u,s.height-o.y))};if(r==="*"){this.changeCropAndOutputSize(m)}else{const p=this.proportionalSize(r,m);this.changeCropAndOutputSize(p,r)}};this.onPixelWidth=t=>{const e=JSON.stringify(lt(this.localOutputSize));const r=this.entityManager.items.find(n=>n.identifier===this.identifier);const o=this.defaults.imageSize;if(r&&r.ratio){let n=t;let s=this.localOutputSize.height;let{ratio:a}=r;if(a==="*"&&this.lockResolution){a=this.localOutputSize.width/this.localOutputSize.height}if(a==="*"&&!this.lockResolution){n=Math.max(Math.min(t,o.width),this.minCropSize);this.changeLocalOutputWidth(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(s)})}else{const l=du.placeCropMask(a,o);n=Math.max(Math.min(n,l.width),this.minCropSize);s=n/a;this.changeLocalOutputSize({height:s,width:n})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.onPixelHeight=t=>{const e=JSON.stringify(lt(this.localOutputSize));const r=this.entityManager.items.find(n=>n.identifier===this.identifier);const o=this.defaults.imageSize;if(r&&r.ratio){let n=t;let s=this.localOutputSize.width;let{ratio:a}=r;if(a==="*"&&this.lockResolution){a=this.localOutputSize.width/this.localOutputSize.height}if(a==="*"&&!this.lockResolution){n=Math.max(Math.min(t,o.height),this.minCropSize);this.changeLocalOutputHeight(n);this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(s),height:Math.round(n)})}else{const l=du.placeCropMask(a,o);n=Math.max(Math.min(n,l.height),this.minCropSize);s=n*a;this.changeLocalOutputSize({height:n,width:s})}if(!this.lockResolution){this.updatePreviewSizeWRTImageSize()}this.checkAndAddSnapshot(JSON.parse(e));return Math.round(n)}return t};this.dispose=()=>{if(this.transformStore){this.transformStore.dispose();this.transformStore=null}if(this.transformHistory){this.transformHistory.dispose();this.transformHistory=null}this.editor=null;this.dragMode=null;this.selectedCategory=null;this.defaults=null;this.localOutputSize=null;this.rect=null;this.transformations=null;this.entityManager=null};this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)};this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)};this.closestRatioReducer=t=>(e,r)=>{if(r===null)return-1;return Math.abs(t-e.ratio)<Math.abs(t-r.ratio)?-1:1};this.closestDimensionsReducer=t=>(e,r)=>{if(r===null)return-1;const o=Math.abs(e.dimensions.x/e.dimensions.y);const n=Math.abs(r.dimensions.x/r.dimensions.y);if(o===n){return e.dimensions.x*e.dimensions.y>r.dimensions.x*r.dimensions.y?-1:1}return Math.abs(t-o)<Math.abs(t-n)?-1:1};this.getMatchingItem=()=>{const t=this.entityManager.items.findIndex(l=>l.identifier==="imgly_transform_common_custom");if(t!==-1)return this.entityManager.items[t];const e=this.entityManager.items.findIndex(l=>l.ratio==="*");if(e!==-1)return this.entityManager.items[e];const r=lt(this.editor.outputContainer.getResolution());const o=Math.abs(r.width/r.height);const[n]=this.entityManager.items.filter(l=>l.ratio&&typeof l.ratio==="number").sort(this.closestRatioReducer(o));const[s]=this.entityManager.items.filter(l=>l.dimensions&&!l.ratio).sort(this.closestDimensionsReducer(o));if(!n||!s||!n.ratio&&!s.dimensions){return this.entityManager.items[0]}if(!s||!s.dimensions)return n;if(!n||!n.ratio)return s;const a=Math.abs(s.dimensions.x/s.dimensions.y);if(a===n.ratio)return n;return Math.abs(o-n.ratio)<Math.abs(o-a)?n:s};this.getTransform=t=>{let e=this.entityManager.items.find(r=>r.identifier===t);if(!e){e=this.getMatchingItem()}return e};this.editor=t;this.selectedCategory=qH;this.transformStore=new Et(t,this.defaults);this.transformations=new Yk(t);const{enableRotation:e,enableFlip:r,...o}=this.config;const n=this.editor.assetProvider.getAssets("transform");this.entityManager=new Ue(n,{...o,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("transform")});this.rect=new Le(this.editor,this.transformStore,"topLeft",false,false);this.rectForUi=new Le(this.editor,this.transformStore,"topLeft",false,true);this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width){const o=e.width/t;return{height:o,width:e.width,yChanged:true}}const r=e.height*t;return{height:e.height,width:r,yChanged:false}}changeIdentifier(t,e=false){this.transformStore.changeIdentifier(t);const r=this.getCropMask(t,this.defaults.imageSize);if(r){this.transformStore.changeRatio(r.ratio);this.changeLocalOutputSize(r);this.updatePreviewSizeWRTImageSize();if(r.yChanged!==void 0){this.updateInitialCropMaskPosition(r.yChanged)}if(r.dimensions){this.changeLocalOutputSize({width:r.dimensions.x,height:r.dimensions.y})}if(e){this.trackChanges()}}}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){const r=this.getTransform(t);if(r){const{ratio:o,forceDimensions:n,lockDimensions:s,dimensions:a=null}=r;if(n){this.transformStore.changeForceDimensions(n)}if(s){this.transformStore.changeLockResolution(s)}if(o){switch(o){case"*":this.changePosition({x:0,y:0});return{...e,yChanged:void 0,ratio:"*",dimensions:a};default:return{...du.placeCropMask(r.ratio,e),ratio:r.ratio,dimensions:a}}}else{const{x:l,y:c}=r.dimensions;return{...du.placeCropMask(l/c,e),ratio:null,dimensions:a}}}return null}setCropDefaults(t=false){const e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);const r=this.editor.getPreviewSize();const{position:o}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(r);this.setDefaultCropPosition({x:o.x-r.width/2,y:o.y-r.height/2});this.changeDefaultScale(this.editor.scale.defaultScale);if(!t){this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition;this.unRotatedDefaults.scale=this.defaultScale}}setDefaultImageSize(t){this.defaults.imageSize={...lt(t)};if(!this.lockResolution){this.localOutputSize={...lt(t)}}}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height;this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x;this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.transformStore.clearState();this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?qH:t}pureReset(){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.editor.spriteStore.correctTextFlip();this.editor.overlayToolStore.correctOverlayFlip();this.setDefaultAngle(0);this.engineMediator.output.applyNewImageTransform();this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const t=JSON.stringify(this.engineMediator.preview.container.getTransform());const e=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:e})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:e},r,o=true){this.transformStore.changeWidth(t);this.transformStore.changeHeight(e);if(!this.lockResolution){const{height:n,width:s}=this.defaults.maxCropMaskSize;const{height:a,width:l}=this.defaults.imageSize;let c=a/n*e;const u=l/s*t;if(r){c=u/r}if(o){this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(u),height:Math.round(c)})}if(e>=this.minCropSize){this.changeLocalOutputHeight(c)}if(t>=this.minCropSize){this.changeLocalOutputWidth(u)}}}transformRender(t=true){this.transformations.applyPreviewTransform();if(t){this.editor.render()}}addSnapshot(){if(this.transformHistory.isEqual())return;this.editor.addSnapshot({["transform"]:this.serializableState},"edit","Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:t,flipVertically:e}=this.rotateFlipState;const{identifier:r,rotationInDegrees:o}=this;const n=Wl(o);const s=cS(_b(this.editor.engineMediator.output.container.getRotation())+o);const{start:a,end:l}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:t,flipVertically:e,rotation:n,start:a,end:l,identifier:r,outputRotation:s}}getStartEndForOperation(t){const{leftTop:e,rightBottom:r,maxCropMaskSize:o}=this;const n=e.y;const s=e.x;const a=r.x;const l=r.y;switch(t){case 270:return{leftTop:{x:o.height-l,y:s},rightBottom:{x:o.height-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 90:return{leftTop:{x:n,y:o.width-a},rightBottom:{x:l,y:o.width-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}getStartEndForUI(t,e,r){const{maxCropMaskSize:o}=this;const n=e.y;const s=e.x;const a=r.x;const l=r.y;switch(t){case 90:return{leftTop:{x:o.width-l,y:s},rightBottom:{x:o.width-n,y:a}};case 180:return{leftTop:{x:o.width-a,y:o.height-l},rightBottom:{x:o.width-s,y:o.height-n}};case 270:return{leftTop:{x:n,y:o.height-a},rightBottom:{x:l,y:o.height-s}};default:return{leftTop:{x:s,y:n},rightBottom:{x:a,y:l}}}}convertOperationOptionsToUI({start:t,end:e,rotation:r,outputRotation:o}){const n=o===90||o===270;const s=n?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const a=Math.cos(r);const l=Math.sin(r);const c=this.calculateScale(r);const u=new F(Math.min(t.x,e.x),Math.min(t.y,e.y));const m=new F(Math.max(t.x,e.x),Math.max(t.y,e.y));const p=m.subtract(u).divide(2);const h=u.add(p).multiply(s);const g=h.subtract(s.multiply(.5));const _=new F(g.x*a-g.y*l,g.x*l+g.y*a).multiply(c);const x=s.multiply(.5).add(_);const b=x.divide(s);const w=b.subtract(p.multiply(c));const T=b.add(p.multiply(c));const D=n?F.fromSize(this.maxCropMaskSize).swapped:F.fromSize(this.maxCropMaskSize);const O=w.multiply(D);const k=T.multiply(D);const{leftTop:E,rightBottom:J}=this.getStartEndForUI(o,O,k);return{start:new F(E),end:new F(J)}}convertUIToOperationOptions(t,e){const r=e===90||e===270;const o=r?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const n=r?F.fromSize(this.maxCropMaskSize).swapped:F.fromSize(this.maxCropMaskSize);const s=Math.cos(-t);const a=Math.sin(-t);const l=this.calculateScale(t,r);const{leftTop:c,rightBottom:u}=this.getStartEndForOperation(e);const m=new F(c).divide(n);const p=new F(u).divide(n);const h=p.subtract(m).divide(2);const g=m.add(h).multiply(o);const _=g.subtract(o.multiply(.5));const x=new F(_.x*s-_.y*a,_.x*a+_.y*s).divide(l);const b=o.multiply(.5).add(x);const w=b.divide(o);const T=w.subtract(h.divide(l));const D=w.add(h.divide(l));return{start:T,end:D}}calculateScale(t,e=false){const r=e?F.fromSize(this.defaultImageSize).swapped:F.fromSize(this.defaultImageSize);const o=new F(Math.abs(r.x*Math.cos(t))+Math.abs(r.y*Math.sin(t)),Math.abs(r.x*Math.sin(t))+Math.abs(r.y*Math.cos(t)));const n=r.subtract(o.clone()).divide(2).abs;return n.y>n.x?n.y*2/r.y+1:n.x*2/r.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation();this.transformStore.resetOutputRotation();this.transformStore.resetFlip();this.setDefaultAngle(0);if(this.editor.outputContainer.getRotation()!==0){this.engineMediator.output.applyNewImageTransform()}this.engineMediator.output.container.setData({flipHorizontally:false,flipVertically:false});this.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.setCropDefaults();this.applyInitialCrop();const e=Math.round(_b(t.rotation));this.transformStore.setRotation(e>180?e-360:e);this.transformations.rotateOutputContainer(Wl(cS(t.outputRotation||0)));if(t.identifier){this.transformStore.changeIdentifier(t.identifier)}if(t.start&&t.end){if(t.end.x===0||t.end.y===0){t.end.x=1;t.end.y=1}const{start:r,end:o}=this.convertOperationOptionsToUI({start:new F(t.start),end:new F(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(r.x);this.changePositionY(r.y);const n=o.x-r.x;const s=o.y-r.y;this.transformStore.changeSize({width:n,height:s});const{maxCropMaskSize:a,imageSize:l}=this.defaults;const c={height:s*l.height/a.height,width:n*l.width/a.width};this.changeLocalOutputSize(c)}if(t.flipHorizontally){this.flipHorizontally(false)}if(t.flipVertically){this.flipVertically(false)}this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){const e=lt(this.cropMaskPosition);const r=lt(this.cropMaskSize);const o=lt(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:o.height*r.height/t.height,width:o.width*r.width/t.width},void 0,false);this.changePosition({y:o.height*e.y/t.height,x:o.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter();this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t);this.transformRender()}async rotateOutputContainer(t,e=true){this.setDragMode(true);this.transformations.rotateOutputContainer(t,e);await this.editor.wait();this.setDragMode(false)}applyInitialCrop(){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,false)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,r=this.defaults.maxCropMaskSize,o=this.minCropSize){let n=e.height*t;let{height:s}=e;if(n>r.width||n<o||s<o){n=e.width;s=e.width/t}return{width:Math.round(n),height:Math.round(s)}}checkAndAddSnapshot(t){const e=lt(this.localOutputSize);if(t.width!==e.width||t.height!==e.height){this.trackChanges()}}updateInitialCropMaskPosition(t){const{cropMaskSize:e}=this;const r=this.defaults.maxCropMaskSize;if(t){this.changePosition({x:0,y:Math.abs(r.height-e.height)/2})}else{this.changePosition({x:Math.abs(r.width-e.width)/2,y:0})}}updatePreviewSizeWRTImageSize(){const t=lt(this.localOutputSize);const e=lt(this.defaults.imageSize);const r=lt(this.defaults.maxCropMaskSize);const o={height:r.height*t.height/e.height,width:r.width*t.width/e.width};this.transformStore.changeSize(o)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:t,flipVertically:e,rotationInDegrees:r,outputRotation:o}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:du.inRadians(r),outputRotation:o}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config["transform"]}get locale(){return this.editor.configStore.locale["transform"]}get isOptionSelected(){return this.identifier!=="identity"}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const t=this.getRatio();if(t==="*"||t===1){return{width:this.minCropSize,height:this.minCropSize}}if(t>1){return{width:this.minCropSize*t,height:this.minCropSize}}return{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio")){if(this.lockResolution){return this.localOutputWidth/this.localOutputHeight}return t.ratio}const{x:e,y:r}=t.dimensions;return e/r}return"*"}};Q=du;f([Z],Q.prototype,"selectedCategory",2);f([Z],Q.prototype,"defaults",2);f([Z],Q.prototype,"localOutputSize",2);f([v],Q.prototype,"changeIdentifier",1);f([v],Q.prototype,"setDragMode",1);f([v],Q.prototype,"setCropDefaults",1);f([v],Q.prototype,"setDefaultImageSize",1);f([v],Q.prototype,"setMaxCropSize",1);f([v],Q.prototype,"setDefaultCropPosition",1);f([v],Q.prototype,"resetCrop",1);f([v],Q.prototype,"toggleCategorySelection",1);f([v],Q.prototype,"pureReset",1);f([v],Q.prototype,"reset",2);f([v],Q.prototype,"changePosition",1);f([v],Q.prototype,"changePositionX",1);f([v],Q.prototype,"changePositionY",1);f([v],Q.prototype,"changeCropAndOutputSize",1);f([v],Q.prototype,"onLeave",1);f([v],Q.prototype,"onEnter",1);f([v],Q.prototype,"changeLocalOutputSize",2);f([v],Q.prototype,"changeDefaultScale",2);f([v],Q.prototype,"changeLocalOutputHeight",2);f([v],Q.prototype,"changeLocalOutputWidth",2);f([v],Q.prototype,"changeLockResolution",2);f([v],Q.prototype,"setRotation",1);f([v],Q.prototype,"rotateClockwise",2);f([v],Q.prototype,"rotateAntiClockwise",2);f([v],Q.prototype,"rotateOutputContainer",1);f([v],Q.prototype,"flipHorizontally",2);f([v],Q.prototype,"flipVertically",2);f([v],Q.prototype,"applyDefaultCrop",2);f([v],Q.prototype,"applyInitialCrop",1);f([v],Q.prototype,"updateCropMask",2);f([v],Q.prototype,"clickableCanvas",1);f([v],Q.prototype,"onLeftTop",2);f([v],Q.prototype,"onLeftBottom",2);f([v],Q.prototype,"onRightTop",2);f([v],Q.prototype,"onRightBottom",2);f([v],Q.prototype,"proportionalSize",1);f([v],Q.prototype,"onPixelWidth",2);f([v],Q.prototype,"onPixelHeight",2);f([v],Q.prototype,"updateInitialCropMaskPosition",1);f([v],Q.prototype,"updatePreviewSizeWRTImageSize",1);f([v],Q.prototype,"dispose",2);f([C],Q.prototype,"cropState",1);f([C],Q.prototype,"identifier",1);f([C],Q.prototype,"ratio",1);f([C],Q.prototype,"height",1);f([C],Q.prototype,"width",1);f([C],Q.prototype,"localOutputImageSize",1);f([C],Q.prototype,"localOutputHeight",1);f([C],Q.prototype,"localOutputWidth",1);f([C],Q.prototype,"lockResolution",1);f([C],Q.prototype,"forceDimensions",1);f([C],Q.prototype,"rotationInDegrees",1);f([C],Q.prototype,"outputRotation",1);f([C],Q.prototype,"isDragMode",1);f([C],Q.prototype,"rotateFlipState",1);f([C],Q.prototype,"selectedCategoryIdentifier",1);f([C],Q.prototype,"categories",1);f([C],Q.prototype,"items",1);f([C],Q.prototype,"config",1);f([C],Q.prototype,"locale",1);f([C],Q.prototype,"isOptionSelected",1);f([C],Q.prototype,"leftTop",1);f([C],Q.prototype,"leftBottom",1);f([C],Q.prototype,"rightTop",1);f([C],Q.prototype,"rightBottom",1);f([C],Q.prototype,"isFlippedHorizontal",1);f([C],Q.prototype,"isFlippedVertical",1);f([C],Q.prototype,"leftTopRespectFlip",1);f([C],Q.prototype,"leftBottomRespectFlip",1);f([C],Q.prototype,"rightTopRespectFlip",1);f([C],Q.prototype,"rightBottomRespectFlip",1);f([C],Q.prototype,"cropMaskPosition",1);f([C],Q.prototype,"cropMaskSize",1);f([C],Q.prototype,"state",1);f([C],Q.prototype,"defaultImageSize",1);f([C],Q.prototype,"maxCropMaskSize",1);f([C],Q.prototype,"minCropMaskSize",1);f([C],Q.prototype,"defaultCropMaskPosition",1);f([C],Q.prototype,"defaultScale",1)});var YH=d(()=>{Ik();Zk()});var JH,ict,Qk,rct,tf,ot;var tI=d(()=>{wt();JH=y(Yu());R();z();Ji();Xk();pm();hk();gk();_k();Sk();ict={};Qk="none";rct={position:{x:0,y:0},rotation:0};tf=class{constructor(t){this.state=Z.map(ict);this.selectedId=Z.box(Qk);this.editMode=Z.box(false);this.dragMode=Z.box(false);this.minLength=0;this.counter=0;this.addSticker=async(t,e=true)=>{await this.addStickerAsync(t,e)};this.addStickerAsync=async({spriteId:t,state:e,transform:r},o=true)=>{return new Promise((n,s)=>{r=this.getInitialTransform(r);const{identifier:a}=e;const l=this.editor.orderHelper.addSprite(a);this.editor.engine.addStickerFromAssets(a,this.editor.engineMediator.image.container,l).then(async c=>{if(t){c.setData({id:t})}const u=c.getID();this.container[u]=c;this.editor.orderHelper.renameSprite(a,u);const m=this.getSize(u);m.width*=c.getScale().x;m.height*=c.getScale().y;c.setPivot(.5,.5);let p;if(r.scale){p=r.scale}else if(r.size){p={x:r.size.width/m.width,y:r.size.height/m.height}}else{const x=this.editor.shortestOutputSide*.4;const b=tf.magnitude(x)/tf.sizeMagnitude(c.getSizeInWorldSpace());p={x:b,y:b}}const{flipHorizontally:h,flipVertically:g}=this.editor.outputContainer.getData();c.setFlipHorizontally(h);c.setFlipVertically(g);c.setTransform({position:r.position,scale:p,rotation:r.rotation});if(e.flipHorizontally!==void 0){c.setFlipHorizontally(e.flipHorizontally!==h)}if(e.flipVertically!==void 0){c.setFlipVertically(e.flipVertically!==g)}this.setContainerProperties(u,{...e});const _=c.getData();this.setInitialSpriteState(u,"sticker");this.stickerToolStore.setState(u,{..._,identifier:a});await this.editor.renderPromise();if(o){this.setId(u);this.addSnapshot("add",this.stickerLocale.add)}n()}).catch(c=>{console.error(c);s()})})};this.addText=async(t,e=true)=>{await this.addTextAsync(t,e)};this.addTextAsync=({spriteId:t,state:e,transform:r},o=true)=>{return new Promise((n,s)=>{r=this.getInitialTransform(r);const a=this.editor.orderHelper.addSprite(e.identifier);const l=this.editor.shortestOutputSide;const c={fontIdentifier:e.identifier,text:e.text,width:e.width||l*.6,fontSize:e.fontSize||l*.1,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,a).then(async u=>{if(t){u.setData({id:t})}const m=u.getID();this.container[m]=u;this.editor.orderHelper.renameSprite(e.identifier,m);const{flipHorizontally:p,flipVertically:h}=this.editor.outputContainer.getData();u.setFlipHorizontally(p);u.setFlipVertically(h);u.setPivot(.5,.5);u.setPosition(r.position);u.setRotation(r.rotation);this.setInitialSpriteState(m,"text");const g=u.getData();this.textToolStore.setState(m,{...g});await this.editor.renderPromise();if(o){this.setId(m);this.addSnapshot("add",this.textLocale.add)}n()}).catch(u=>{console.error(u);s()})})};this.addTextDesign=async(t,e=true,r=false)=>{try{await this.addTextDesignAsync(t,e,r)}catch(o){console.warn(o)}};this.addTextDesignAsync=({spriteId:t,state:e,transform:r},o=true,n=false)=>{return new Promise((s,a)=>{r=this.getInitialTransform(r);const l=this.editor.orderHelper.addSprite(e.identifier);const c=this.editor.shortestOutputSide;const u={width:e.width||c*.6,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,u,this.editor.engineMediator.image.container,l).then(async m=>{if(t){if(n){this.pureRemoveSprite(t);this.textDesignToolStore.state.delete(t)}m.setData({id:t})}const p=m.getID();this.container[p]=m;this.editor.orderHelper.renameSprite(e.identifier,p);const{flipHorizontally:h,flipVertically:g}=this.editor.outputContainer.getData();m.setFlipHorizontally(h);m.setFlipVertically(g);m.setPivot(.5,.5);m.setPosition(r.position);m.setRotation(r.rotation);this.setInitialSpriteState(p,"textdesign");const _=m.getData();this.textDesignToolStore.setState(p,{..._,identifier:e.identifier});await this.editor.renderPromise();if(o){this.setId(p);this.addSnapshot("add",this.textDesignLocale.add)}s()}).catch(m=>{a(m)})})};this.spriteLocalTransform=()=>{return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}};this.clickableCanvas=t=>{this.editor.clickableCanvas(t)};this.setContainerProperties=(t,e,r=false)=>{this.container[t].setData(e);if(r){this.updatePositionAndSize()}this.editor.render()};this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)};this.pureRemoveSprite=t=>{this.editor.engine.removeContainer(this.container[t]);const e=this.container[t].getIndexInParent();if(e===-1){delete this.container[t];this.state.delete(t);this.editor.orderHelper.removeSprite(t);return true}return false};this.deleteSprite=(t=this.id)=>{const e=this.state.get(t);if(e.tool==="sticker"){this.stickerToolStore.delete()}else if(e.tool==="text"){this.textToolStore.delete()}else if(e.tool==="textdesign"){this.textDesignToolStore.delete()}};this.removeSprite=t=>{const e=this.pureRemoveSprite(t);if(e){this.selectLast();this.spriteSnapshot("delete");this.editor.render()}};this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)};this.spriteSnapshot=t=>{this.addSnapshot("edit",this.historyLocale[t])};this.addNewText=async(t,e)=>{if(this.textToolStore.doesTextAssetExist(e.identifier)){await this.addTextAsync({...t,state:e},false)}else{throw new Io(e.identifier)}};this.addNewTextDesign=async(t,e)=>{if(this.textDesignToolStore.doesTextDesignAssetExist(e.identifier)){await this.addTextDesignAsync({...t,state:e},false)}else{throw new Io(e.identifier)}};this.addNewSticker=async(t,e)=>{if(this.stickerToolStore.doesStickerAssetExist(e.identifier)){await this.addStickerAsync({...t,state:e},false)}else{throw new Io(e.identifier)}};this.getSpriteHistoryState=()=>{const t=lt(this.textToolStore.state);const e=lt(this.textDesignToolStore.state);const r={common:lt(this.state),["sticker"]:lt(this.stickerToolStore.state),["text"]:t,["textdesign"]:e,spriteIdList:Object.keys(this.container)};Object.keys(r.common).forEach(o=>{r.common[o].size=this.container[o].getSizeInWorldSpace();r.common[o].position=this.container[o].getPosition();r.common[o].order=this.container[o].getIndexInParent()});return r};this.updateStateFromSerialization=async(t,e,r)=>{if(e&&e.length){try{const o=await Promise.all(e.map(async({svg:n,raster:s,name:a,identifier:l})=>{const c=(n==null?void 0:n.data)?"image/svg+xml":s.type;const u=`data:${c};base64,${(n==null?void 0:n.data)||s.data}`;const m=await nv(u,150);return{stickerURI:u,thumbnailURI:m,name:a,type:c,identifier:l}}));await this.stickerToolStore.addCustomStickerAsset(o)}catch(o){this.editor.modalStore.hideModal();this.editor.modalStore.showInfoModal("stickerLoading")}}if(t.text){await this.textToolStore.loadFonts()}if(t.textdesign){await this.textDesignToolStore.loadFonts()}await this.updateStateByHistoryState(t.spriteIdList,t,r)};this.updateStateFromHistory=async t=>{const e=Object.keys(this.container);const r=e.filter(o=>t.spriteIdList.indexOf(o)===-1);r.forEach(o=>{this.pureRemoveSprite(o)});await this.updateStateByHistoryState(t.spriteIdList,t,0)};this.serializableState=async()=>{const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach(r=>{const{flipHorizontally:o,flipVertically:n}=this.editor.outputContainer.getData();const s=this.editor.outputContainer.getRotation();const a=n!==o?-t.common[r].rotation:t.common[r].rotation;t.common[r].rotation=n!==o?a+s:a-s});const e=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map(async({identifier:r,type:o,stickerURI:n,name:s})=>{const a={identifier:r,name:s,raster:{data:"",type:"image/jpeg"}};if(o==="image/svg+xml"){a.svg={data:n.split(",")[1]}}if(o==="image/jpeg"||o==="image/png"||o==="image/gif"){[,a.raster.data]=n.split(",");a.raster.type=o}else{const l=await nv(n);[,a.raster.data]=l.split(",");a.raster.type="image/png"}return a}));return{sprite:t,customStickers:e}};this.updateCanvasControls=()=>{Object.keys(this.container).forEach(t=>{this.updatePositionAndSize(t,true);const e=this.state.get(t);if(e){if(e.tool==="text"){const r=this.getContainerProperties(t);this.textToolStore.changeSize(t,r)}else if(e.tool==="textdesign"){const r=this.getContainerProperties(t);this.textToolStore.changeWidth(r.width)}}})};this.setEditMode=t=>{if(this.currentSprite){if(["text","textdesign"].indexOf(this.tool)!==-1){if(t){this.editor.modalStore.showTextEditModal()}else{this.editor.modalStore.hideModal()}this.editMode.set(t)}}};this.setDragMode=t=>{this.dragMode.set(t)};this.setPosition=t=>{const e=this.currentSprite;const r=this.container[this.id];if(e&&r){r.setPosition(this.editor.previewToWorld(t));const{position:o}=this.getSizePositionFromContainer();e.position.x=o.x;e.position.y=o.y;this.state.set(this.id,e);this.editor.render()}};this.setSize=t=>{const e=this.currentSprite;if(e){e.size.width=t.width;e.size.height=t.height;this.state.set(this.id,e)}};this.setRotation=t=>{const e=this.currentSprite;if(e){const{flipHorizontally:r,flipVertically:o}=this.editor.outputContainer.getData();const n=this.editor.outputContainer.getRotation();const s=jh({rotation:t,outputRotation:n,flipHorizontally:r,flipVertically:o});this.container[this.id].setRotation(s);e.rotation=this.container[this.id].getRotation();this.state.set(this.id,e);this.editor.render()}};this.onCanvasClick=t=>{if(!this.isEditMode){this.selectHighestOrderSprite(t)}};this.select=t=>{const e=this.state.get(t);if(e){const r=this.editor.activeStore.tool;if(r!==e.tool){this.editor.activeStore.selectTool(e.tool)}this.setId(t)}};this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();if(t){this.select(t)}};this.selectNext=()=>{if(this.currentSprite){const t=this.container[this.id];const e=t.getIndexInParent();if(e){const r=Object.keys(this.container).find(o=>this.container[o].getIndexInParent()===e-1);if(r){this.select(r)}}}};this.deselect=()=>{this.setId(Qk)};this.bringToFront=async t=>{const e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e);this.spriteSnapshot("order");await this.editor.render();this.counter+=1};this.flipHorizontally=t=>{const e=this.state.get(t);const r=this.container[t];r.setFlipHorizontally(!r.getFlipHorizontally());e.flipHorizontally=r.getFlipHorizontally();this.spriteSnapshot("flip");this.state.set(t,e);this.editor.render()};this.pureReset=()=>{this.deselect();Array.from(this.state.keys()).forEach(t=>{this.pureRemoveSprite(t)});this.stickerToolStore.pureReset();this.textToolStore.pureReset();this.textDesignToolStore.pureReset()};this.selectHighestOrderSprite=t=>{const e=this.editor.brushToolStore.containerId();t=t.filter(n=>n!==e);if(t.length<1){this.deselect();return}let r="";let o=0;t.forEach(n=>{const s=this.container[n];const a=s&&s.getIndexInParent()||0;if(a>=o){o=a;r=n}});this.select(r)};this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){const r=new F(this.currentSprite.position);const o=new F(t,e);const n=o.subtract(r).magnitude;const s=this.getSize();const a=n*2/tf.sizeMagnitude(s);if(n>this.minLength){if(this.isSpriteSticker){if(this.stickerToolStore.resizeMode!=="unrestricted"){this.setStickerSize({width:s.width*a,height:s.height*a})}else{const l=this.rotationWRTOutputRotation;const c=o.subtract(r);const u=Math.cos(l);const m=Math.sin(l);const p=Math.max(Math.abs(c.x*u*2+c.y*m*2),this.minLength);const h=Math.max(Math.abs(c.x*-m*2+c.y*u*2),this.minLength);this.setStickerSize({width:p,height:h})}}else if(this.isSpriteText){this.setTextSize(s.width*a)}else if(this.isSpriteTextDesign){this.setTextDesignScale(a)}}this.editor.render()}};this.onWidthDrag=({x:t,y:e})=>{const r=new F(this.currentSprite.position);const o=new F(t,e);const n=o.subtract(r).magnitude;const s=this.editor.previewToWorld(2*n);if(s>this.minLength){this.setContainerProperties(this.id,{width:s},true);if(this.isSpriteText){const a=this.getContainerProperties(this.id);this.textToolStore.changeWidth(a.width)}}};this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let r=this.getContainerProperties(this.id);const o=new F(this.currentSprite.position);const n=new F(t,e);const s=n.subtract(o).magnitude;const a=Math.max(this.editor.previewToWorld(s)-r.width/2,0);this.setContainerProperties(this.id,{padding:a},true);if(this.isSpriteTextDesign){r=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(r.padding)}}};this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach(r=>{if(r.type==="text"||r.type==="text-design"){r.setFlipHorizontally(t);r.setFlipVertically(e)}})};this.reverseTextHorizontally=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipHorizontally(t)}})};this.reverseTextVertically=t=>{Object.values(this.container).forEach(e=>{if(e.type==="text"||e.type==="text-design"){e.setFlipVertically(t)}})};this.dispose=()=>{this.state=null;if(this.stickerToolStore){this.stickerToolStore.dispose();this.stickerToolStore=null}if(this.textToolStore){this.textToolStore.dispose();this.textToolStore=null}if(this.textDesignToolStore){this.textDesignToolStore.dispose();this.textDesignToolStore=null}this.selectedId=null;this.editMode=null;this.dragMode=null;this.editor=null;this.rect=null};this.getOutputProperties=()=>{return this.editor.outputContainer.getData()};this.getContainerProperties=t=>{return this.container[t].getData()};this.getContainerTransform=t=>{return this.container[t].getTransform()};this.getDuplicateContainerTransform=t=>{const e=this.container[t].getTransform();const r=this.editor.shortestOutputSide*.1;const o=new F(e.position).add(new F(r,r));return{...e,position:o}};this.getDuplicateContainerFlip=t=>{const e=this.container[t].getFlipHorizontally();const r=this.container[t].getFlipVertically();return{flipHorizontally:e,flipVertically:r}};this.updatePositionAndSize=(t=this.id,e=false)=>{const{position:r,size:o}=this.getSizePositionFromContainer(t);const n=this.state.get(t);if(n){n.position.x=r.x;n.position.y=r.y;n.size.width=o.width;n.size.height=o.height;if(e){const s=this.container[t].getRotation();this.container[t].setRotation(s);n.rotation=this.container[t].getRotation()}this.state.set(t,n)}};this.getInitialTransform=t=>{const e=this.editor.outputToWorld(rct.position);if(!t){const r=this.editor.outputContainer.getRotation();return{rotation:r,position:e}}return{position:e,...t}};this.setInitialSpriteState=(t,e)=>{const r=this.container[t];const{position:o,size:n}=this.getSizePositionFromContainer(t);const s=r.getRotation();const a=e!=="sticker"?false:r.getFlipHorizontally();const l=e!=="sticker"?false:r.getFlipVertically();this.state.set(t,{tool:e,position:o,rotation:s,size:n,flipHorizontally:a,flipVertically:l})};this.setStickerSize=t=>{const e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const r=this.currentSprite;if(r){r.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());this.state.set(this.id,r)}};this.setTextSize=t=>{let e=this.getContainerProperties(this.id);const r={width:this.editor.previewToWorld(t)};const o=r.width/e.width;const n={fontSize:Math.round(e.fontSize*o)};const s=this.isSpriteText?{...r,...n}:r;if(r.width>this.minLength&&n.fontSize){this.setContainerProperties(this.id,s,true);e=this.getContainerProperties(this.id);this.textToolStore.changeFontSize(e.fontSize,true);this.textToolStore.changeWidth(e.width)}};this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id);const r=e.width*t;if(r>this.minLength){this.setContainerProperties(this.id,{width:r},true);const{width:o}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(o);e=this.getContainerProperties(this.id);this.textDesignToolStore.changePadding(e.padding)}};this.getSizePositionFromContainer=(t=this.id)=>{const e=this.container[t];if(e){const r=this.editor.worldToPreview(e.getPosition());const o=this.editor.worldSizeToPreview(e.getSizeInWorldSpace());return{position:r,size:o}}return{position:{x:0,y:0},size:{height:1,width:1}}};this.getSize=(t=this.id)=>{const e=this.container[t];if(e){return this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}return{width:0,height:0}};this.editor=t;this.container={};this.stickerToolStore=new Bt(t);this.textToolStore=new ft(t);this.textDesignToolStore=new Pt(t);this.rect=new Le(this.editor,this);this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new F(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}async updateStateByHistoryState(t,e,r){await(0,JH.default)(t,async o=>{const n=e.common[o];if(!n)return;if(this.state.get(o)){this.updateExistingItem(o,e)}else{await this.addNewItem(o,e)}});t.forEach(o=>{const n=e.common[o];const s=this.container[o];if(!n||!s)return;s.setIndexInParent(n.order+r)});this.counter+=1}async addNewItem(t,e){const r=e.common[t];const o=r.size?{width:this.editor.worldToPreview(r.size.width),height:this.editor.worldToPreview(r.size.height)}:void 0;const{flipHorizontally:n,flipVertically:s}=this.editor.outputContainer.getData();const a=this.editor.outputContainer.getRotation();const l=s!==n?r.rotation-a:r.rotation+a;const c=s!==n?-l:l;const u={spriteId:t,transform:{size:o,position:new F(r.position),rotation:c}};if(e.text[t]){const m=e.text[t];const p=this.textToolStore.validFontWithConfig(m.identifier);m.identifier=p==null?void 0:p.identifier;await this.addNewText(u,m);return}if(e.textdesign[t]){await this.addNewTextDesign(u,e.textdesign[t]);return}if(e.sticker[t]){const m=this.stickerToolStore.items.find(p=>p.identifier===e.sticker[t].identifier);await this.addNewSticker(u,{...e.sticker[t],flipHorizontally:r.flipHorizontally,flipVertically:r.flipVertically,resizeMode:e.sticker[t].resizeMode||(m==null?void 0:m.resizeMode)||"keepAspect"})}}updateExistingItem(t,e){const r=e.common[t];const o=this.state.get(t);this.state.set(t,o);const n=this.container[t];n.setPosition(new F(r.position));n.setRotation(r.rotation);o.rotation=n.getRotation();if(r.flipHorizontally!==void 0){n.setFlipHorizontally(r.flipHorizontally)}if(r.flipVertically!==void 0){n.setFlipVertically(r.flipVertically)}if(e.text[t]){const s=e.text[t];this.textToolStore.updateStateFromHistory(t,{...s,fontIdentifier:s.identifier})}if(e.textdesign[t]){const s=e.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,{...s,inverted:s.isInverted})}if(e.sticker[t]){n.setSizeInWorldSpace(r.size);this.stickerToolStore.updateStateFromHistory(t,e.sticker[t])}this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected){return this.state.get(this.id)}return void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==Qk}get position(){if(this.currentSprite){return this.currentSprite.position}return void 0}get tool(){if(this.currentSprite){return this.currentSprite.tool}return void 0}get size(){if(this.currentSprite){return this.currentSprite.size}return void 0}get rotation(){if(this.currentSprite){return this.currentSprite.rotation}return void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();const r=this.editor.outputContainer.getRotation();return jh({rotation:this.currentSprite.rotation-r,flipHorizontally:t,flipVertically:e})}return void 0}get flipHorizontal(){if(this.currentSprite){return this.currentSprite.flipHorizontally}return void 0}get isSpriteSticker(){return this.tool==="sticker"}get isSpriteText(){return this.tool==="text"}get isSpriteTextDesign(){return this.tool==="textdesign"}get isOnTop(){const t=this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:t,y:e}=this.currentSprite.position;const{height:r,width:o}=this.currentSprite.size;return{x:Math.round(t-o/2),y:Math.round(e-r/2)}}return void 0}get currentRect(){if(this.currentSprite){return this.rect}return void 0}get leftTopPosition(){if(this.currentSprite){return this.rect.leftTop}return void 0}get leftBottomPosition(){if(this.currentSprite){return this.rect.leftBottom}return void 0}get leftMidPosition(){if(this.currentSprite){return this.rect.leftMid}return void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get rightTopPosition(){if(this.currentSprite){return this.rect.rightTop}return void 0}get rightBottomPosition(){if(this.currentSprite){return this.rect.rightBottom}return void 0}get rightMidPosition(){if(this.currentSprite){return this.rect.rightMid}return void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}return void 0}get leftBottomHandlePosition(){if(this.currentSprite){return this.rect.leftBottomHandle}return void 0}get rightBottomHandlePosition(){if(this.currentSprite){return this.rect.rightBottomHandle}return void 0}get historyLocale(){if(this.isSpriteSticker){return this.stickerLocale}if(this.isSpriteText){return this.textDesignLocale}return this.textLocale}get stickerLocale(){return this.editor.configStore.locale["sticker"].history}get textLocale(){return this.editor.configStore.locale["text"].history}get textDesignLocale(){return this.editor.configStore.locale["textdesign"].history}setId(t){this.selectedId.set(t)}};ot=tf;f([Z],ot.prototype,"counter",2);f([v],ot.prototype,"addSticker",2);f([v],ot.prototype,"addStickerAsync",2);f([v],ot.prototype,"addText",2);f([v],ot.prototype,"addTextAsync",2);f([v],ot.prototype,"addTextDesign",2);f([v],ot.prototype,"addTextDesignAsync",2);f([v],ot.prototype,"clickableCanvas",2);f([v],ot.prototype,"setContainerProperties",2);f([v],ot.prototype,"setContainerPosition",2);f([v],ot.prototype,"pureRemoveSprite",2);f([v],ot.prototype,"deleteSprite",2);f([v],ot.prototype,"removeSprite",2);f([v],ot.prototype,"addSnapshot",2);f([v],ot.prototype,"addNewText",2);f([v],ot.prototype,"addNewTextDesign",2);f([v],ot.prototype,"addNewSticker",2);f([v],ot.prototype,"updateStateFromSerialization",2);f([v],ot.prototype,"updateStateFromHistory",2);f([v],ot.prototype,"updateCanvasControls",2);f([v],ot.prototype,"setEditMode",2);f([v],ot.prototype,"setDragMode",2);f([v],ot.prototype,"setPosition",2);f([v],ot.prototype,"setSize",2);f([v],ot.prototype,"setRotation",2);f([v],ot.prototype,"onCanvasClick",2);f([v],ot.prototype,"select",2);f([v],ot.prototype,"selectLast",2);f([v],ot.prototype,"selectNext",2);f([v],ot.prototype,"deselect",2);f([v],ot.prototype,"bringToFront",2);f([v],ot.prototype,"flipHorizontally",2);f([v],ot.prototype,"pureReset",2);f([v],ot.prototype,"onCornerDrag",2);f([v],ot.prototype,"onWidthDrag",2);f([v],ot.prototype,"onPaddingDrag",2);f([v],ot.prototype,"correctTextFlip",2);f([v],ot.prototype,"reverseTextHorizontally",2);f([v],ot.prototype,"reverseTextVertically",2);f([v],ot.prototype,"dispose",2);f([C],ot.prototype,"currentSprite",1);f([C],ot.prototype,"padding",1);f([C],ot.prototype,"isEditMode",1);f([C],ot.prototype,"isDragMode",1);f([C],ot.prototype,"id",1);f([C],ot.prototype,"isSpriteSelected",1);f([C],ot.prototype,"position",1);f([C],ot.prototype,"tool",1);f([C],ot.prototype,"size",1);f([C],ot.prototype,"rotation",1);f([C],ot.prototype,"rotationWRTOutputRotation",1);f([C],ot.prototype,"flipHorizontal",1);f([C],ot.prototype,"isSpriteSticker",1);f([C],ot.prototype,"isSpriteText",1);f([C],ot.prototype,"isSpriteTextDesign",1);f([C],ot.prototype,"isOnTop",1);f([C],ot.prototype,"spritePosition",1);f([C],ot.prototype,"currentRect",1);f([C],ot.prototype,"leftTopPosition",1);f([C],ot.prototype,"leftBottomPosition",1);f([C],ot.prototype,"leftMidPosition",1);f([C],ot.prototype,"leftMidPadPosition",1);f([C],ot.prototype,"rightTopPosition",1);f([C],ot.prototype,"rightBottomPosition",1);f([C],ot.prototype,"rightMidPosition",1);f([C],ot.prototype,"rightMidPadPosition",1);f([C],ot.prototype,"leftBottomHandlePosition",1);f([C],ot.prototype,"rightBottomHandlePosition",1);f([C],ot.prototype,"historyLocale",1);f([C],ot.prototype,"stickerLocale",1);f([C],ot.prototype,"textLocale",1);f([C],ot.prototype,"textDesignLocale",1)});var ZH=d(()=>{tI()});var oct,hr;var eI=d(()=>{wt();R();oct={categories:[],query:""};hr=class{constructor(t){this.initProvider=t=>{if(t){this.libraryProvider=new t}};this.fetchImages=async(t="")=>{if(this.libraryProvider){let e=null;try{const r=await this.libraryProvider.getCategories();const o=await this.libraryProvider.searchImages(t);e=r.map((n,s)=>{const a=o.filter(l=>l.category===n.name);return{identifier:n.name,name:n.name,thumbnailURI:n.coverImageUrl,items:a.map(l=>({name:l.title||`image${s}`,identifier:`${n.name}-${l.title}-${s}`,thumbnailURI:l.thumbUrl,rawUrl:l.rawUrl,authorName:l.authorName,authorAvatar:l.authorAvatar}))}}).filter(n=>n.items.length)}catch(r){console.log(r)}Ge(()=>{this.state.query=t;this.state.categories=e})}};this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""};this.dispose=()=>{this.state=null;this.configStore=null;this.libraryProvider=null;this.selectedCategory=null};this.getRawUrl=t=>{const e=this.items.findIndex(r=>r.identifier===t);if(e!==-1){return this.items[e].rawUrl}return t};this.configStore=t.configStore;this.state=Z(oct);this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map(t=>t.items).reduce((t,e)=>[...t,...e],[])}get query(){return this.state.query}get config(){return this.configStore.config["library"]}get locale(){return this.configStore.locale["library"]}};f([Z],hr.prototype,"selectedCategory",2);f([v],hr.prototype,"initProvider",2);f([v],hr.prototype,"fetchImages",2);f([v],hr.prototype,"toggleCategorySelection",2);f([v],hr.prototype,"dispose",2);f([C],hr.prototype,"selectedCategoryIdentifier",1);f([C],hr.prototype,"categories",1);f([C],hr.prototype,"items",1);f([C],hr.prototype,"query",1);f([C],hr.prototype,"config",1);f([C],hr.prototype,"locale",1)});var QH=d(()=>{eI()});var tW,Ri;var eW=d(()=>{R();Ln();z();tW=(i="image/png")=>`data:${i};base64,`;Ri=class{constructor(t){this.version="3.12.0";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=t=>{const e=st.relativeToAbsolutePoint(t,this.cropSpace,false);return st.pointFromSpaceToSpace(e,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=t=>{return t*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=t=>{return t*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=t}static deserializeFilter(t){return{intensity:t.intensity,identifier:t.identifier}}static deserializeAdjustments(t){return{...t}}static deserializeOverlay(t){return{identifier:t.identifier,opacity:t.intensity,blendMode:t.blendMode.replace(/([ _][a-z])/g,e=>e.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(t){if(t){if(t.rgba){return t.rgba}}return[0,0,0,0]}validateVersion(t){return this.version===t}static checkIfPlatformHTML(t){return t==="html5"}static deserializeStickers(t){return{identifier:t.identifier,opacity:t.alpha||0,tintMode:t.tintMode||"none",tintColor:Ri.deserialzeColor(t.tintColor)}}checkIsSerialisationValid(t){if(typeof t!=="string"&&this.validateVersion(t.version))return true;if(typeof t==="string"){throw new Error("Invalid input of type string, please provide an object")}return false}deserializeImage(t){const e={};if(t.image){e.image={width:t.image.width,height:t.image.height,data:t.image.data?t.image.data.replace(tW(),""):""};e.image.data=e.image.data?tW()+e.image.data:""}return e}deserializeTransformation(t){const e={};const r=t.operations.find(s=>s.type==="orientation");const o=t.operations.find(s=>s.type==="transform");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;e.transform=Ri.initializeEmptyTransform();if(r!=null){e.transform.outputRotation=r.options.rotation;e.transform.flipHorizontally=r.options.flipHorizontally||false;e.transform.flipVertically=r.options.flipVertically||false}if(o){e.transform.start=o.options.start;e.transform.end=o.options.end;e.transform.rotation=o.options.rotation||0;e.transform.identifier=o.options.meta?o.options.meta.identifier:""}return e}deserialize(t){var n,s;const e={};if(t.meta?!Ri.checkIfPlatformHTML(t.meta.platform):false){console.warn("Read serialisation from another Platform")}const r=this.editor.engineMediator.output.container.getResolution();const{size:o}=this.editor.engineMediator.image.container.getBounds();this.outputSize=r;this.imageSize=o;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();t.operations.forEach(a=>{switch(a.type){case"filter":e.filter=Ri.deserializeFilter(a.options);break;case"adjustments":e.adjustment=Ri.deserializeAdjustments(a.options);break;case"focus":e.focus=this.deserializeFocus(a.options);break;case"sprite":const{sprites:l}=a.options;l.forEach(c=>{switch(c.type){case"frame":e.frame=this.deserializeFrame(c.options);break;case"overlay":e.overlay=Ri.deserializeOverlay(c.options);break;case"brush":if(!e.brush){e.brush=this.deserializeBrush(c.options)}else{e.brush.strokes.push(...this.deserializeBrush(c.options).strokes)}break;case"sticker":case"text":case"textdesign":if(!e.sprite){e.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const u=Ot();e.sprite.spriteIdList.push(u);e.sprite.common[u]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(c.options.position),tool:"sticker",rotation:c.options.rotation||0,flipHorizontally:c.options.flipHorizontally,flipVertically:c.options.flipVertically};this.spriteOrder+=1;if(c.type==="sticker"){e.sprite.common[u].tool="sticker";e.sprite.common[u].size={width:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.y)};e.sprite.sticker[u]=Ri.deserializeStickers(c.options)}else if(c.type==="text"){e.sprite.common[u].tool="text";e.sprite.text[u]=this.deserializeTexts(c.options)}else if(c.type==="textdesign"){e.sprite.common[u].tool="textdesign";e.sprite.textdesign[u]=this.deserializeTextDesign(c.options)}break;default:break}});break;default:break}});if(t.assetLibrary){e.customStickers=((s=(n=t.assetLibrary)==null?void 0:n.assets)==null?void 0:s.stickers)||[]}return e}deserializeFrame(t){return{identifier:t.identifier,opacity:t.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(t.size),color:Ri.deserialzeColor(t.tintColor)}}deserializeFocus(t){switch(t.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(t.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(t.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(t.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(t.options)};default:break}return void 0}deserializeRadialFocus(t){return{center:this.mapRelativeCropPointToImageSpace(t.start),radius:new F(this.mapRelativeCropPointToImageSpace(t.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(t.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeLinearFocus(t){return{start:this.mapRelativeCropPointToImageSpace(t.start),end:this.mapRelativeCropPointToImageSpace(t.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeGaussianFocus(t){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeMirroredFocus(t){const e=new F(this.mapRelativeCropPointToImageSpace(t.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(t.end)));return{origin:new F(this.mapRelativeCropPointToImageSpace(t.start)).add(new F(this.mapRelativeCropPointToImageSpace(t.end))).divide(2),rotation:Math.atan2(e.y,e.x),size:this.mapRelativeCropSizeToScaledImageSize(t.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeTexts(t){return{identifier:pn(t.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(t.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(t.maxWidth),alignment:t.alignment,textColor:Ri.deserialzeColor(t.color),backgroundColor:Ri.deserialzeColor(t.backgroundColor),lineHeight:t.lineHeight,text:t.text}}deserializeTextDesign(t){return{identifier:t.identifier,width:this.mapRelativeCropSizeToScaledImageSize(t.width),padding:this.mapRelativeCropSizeToScaledImageSize(t.padding),color:Ri.deserialzeColor(t.color),seed:t.seed,text:t.text,isInverted:t.inverted}}deserializeBrush(t){return{strokes:t.paths.map(e=>{return{path:{controlPoints:e.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:Ri.deserialzeColor(e.brush.color),size:e.brush.size,hardness:e.brush.hardness}}})}}}});var iW,Oi;var rW=d(()=>{R();Ln();z();iW=(i="image/png")=>`data:${i};base64,`;Oi=class{constructor(t){this.version="3.9.0";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=t=>{const e=st.relativeToAbsolutePoint(t,this.cropSpace,false);return st.pointFromSpaceToSpace(e,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=t=>{return t*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=t=>{return t*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=t}static deserializeFilter(t){return{intensity:t.intensity,identifier:t.identifier}}static deserializeAdjustments(t){return{...t}}static deserializeOverlay(t){return{identifier:t.identifier,opacity:t.intensity,blendMode:t.blendMode.replace(/([ _][a-z])/g,e=>e.toUpperCase().replace(" ","").replace("_",""))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(t){if(t){if(t.rgba){return t.rgba}}return[0,0,0,0]}validateVersion(t){return this.version===t}static checkIfPlatformHTML(t){return t==="html5"}static deserializeStickers(t){return{identifier:t.identifier,opacity:t.alpha||0,tintMode:t.tintMode||"none",tintColor:Oi.deserialzeColor(t.tintColor)}}checkIsSerialisationValid(t){if(typeof t!=="string"&&this.validateVersion(t.version))return true;if(typeof t==="string"){throw new Error("Invalid input of type string, please provide an object")}return false}deserializeImage(t){const e={};if(t.image){e.image={width:t.image.width,height:t.image.height,data:t.image.data?t.image.data.replace(iW(),""):""};e.image.data=e.image.data?iW()+e.image.data:""}return e}deserializeTransformation(t){const e={};const r=t.operations.find(s=>s.type==="orientation");const o=t.operations.find(s=>s.type==="transform");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;e.transform=Oi.initializeEmptyTransform();if(r!=null){e.transform.outputRotation=r.options.rotation;e.transform.flipHorizontally=r.options.flipHorizontally||false;e.transform.flipVertically=r.options.flipVertically||false}if(o){e.transform.start=o.options.start;e.transform.end=o.options.end;e.transform.rotation=o.options.rotation||0;e.transform.identifier=o.options.meta?o.options.meta.identifier:""}return e}deserialize(t){var n,s;const e={};if(t.meta?!Oi.checkIfPlatformHTML(t.meta.platform):false){console.warn("Read serialisation from another Platform")}const r=this.editor.engineMediator.output.container.getResolution();const{size:o}=this.editor.engineMediator.image.container.getBounds();this.outputSize=r;this.imageSize=o;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();t.operations.forEach(a=>{switch(a.type){case"filter":e.filter=Oi.deserializeFilter(a.options);break;case"adjustments":e.adjustment=Oi.deserializeAdjustments(a.options);break;case"focus":e.focus=this.deserializeFocus(a.options);break;case"sprite":const{sprites:l}=a.options;l.forEach(c=>{switch(c.type){case"frame":e.frame=this.deserializeFrame(c.options);break;case"overlay":e.overlay=Oi.deserializeOverlay(c.options);break;case"brush":if(!e.brush){e.brush=this.deserializeBrush(c.options)}else{e.brush.strokes.push(...this.deserializeBrush(c.options).strokes)}break;case"sticker":case"text":case"textdesign":if(!e.sprite){e.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const u=Ot();e.sprite.spriteIdList.push(u);e.sprite.common[u]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(c.options.position),tool:"sticker",rotation:c.options.rotation||0,flipHorizontally:c.options.flipHorizontally,flipVertically:c.options.flipVertically};this.spriteOrder+=1;if(c.type==="sticker"){e.sprite.common[u].tool="sticker";e.sprite.common[u].size={width:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(c.options.dimensions.y)};e.sprite.sticker[u]=Oi.deserializeStickers(c.options)}else if(c.type==="text"){e.sprite.common[u].tool="text";e.sprite.text[u]=this.deserializeTexts(c.options)}else if(c.type==="textdesign"){e.sprite.common[u].tool="textdesign";e.sprite.textdesign[u]=this.deserializeTextDesign(c.options)}break;default:break}});break;default:break}});if(t.assetLibrary){e.customStickers=((s=(n=t.assetLibrary)==null?void 0:n.assets)==null?void 0:s.stickers)||[]}return e}deserializeFrame(t){return{identifier:t.identifier,opacity:t.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(t.size),color:Oi.deserialzeColor(t.tintColor)}}deserializeFocus(t){switch(t.type){case"linear":return{identifier:"linear",linear:this.deserializeLinearFocus(t.options)};case"gaussian":return{identifier:"gaussian",gaussian:this.deserializeGaussianFocus(t.options)};case"radial":return{identifier:"radial",radial:this.deserializeRadialFocus(t.options)};case"mirrored":return{identifier:"mirrored",mirrored:this.deserializeMirroredFocus(t.options)};default:return void 0}}deserializeRadialFocus(t){return{center:this.mapRelativeCropPointToImageSpace(t.start),radius:new F(this.mapRelativeCropPointToImageSpace(t.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(t.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeLinearFocus(t){return{start:this.mapRelativeCropPointToImageSpace(t.start),end:this.mapRelativeCropPointToImageSpace(t.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeGaussianFocus(t){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeMirroredFocus(t){const e=new F(this.mapRelativeCropPointToImageSpace(t.start)).subtract(new F(this.mapRelativeCropPointToImageSpace(t.end)));return{origin:new F(this.mapRelativeCropPointToImageSpace(t.start)).add(new F(this.mapRelativeCropPointToImageSpace(t.end))).divide(2),rotation:Math.atan2(e.y,e.x),size:this.mapRelativeCropSizeToScaledImageSize(t.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(t.blurRadius)}}deserializeTexts(t){return{identifier:pn(t.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(t.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(t.maxWidth),alignment:t.alignment,textColor:Oi.deserialzeColor(t.color),backgroundColor:Oi.deserialzeColor(t.backgroundColor),lineHeight:t.lineHeight,text:t.text}}deserializeTextDesign(t){return{identifier:t.identifier,width:this.mapRelativeCropSizeToScaledImageSize(t.width),padding:this.mapRelativeCropSizeToScaledImageSize(t.padding),color:Oi.deserialzeColor(t.color),seed:t.seed,text:t.text,isInverted:t.inverted}}deserializeBrush(t){return{strokes:t.paths.map(e=>{return{path:{controlPoints:e.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:"imgly_brush_radial",color:Oi.deserialzeColor(e.brush.color),size:e.brush.size,hardness:e.brush.hardness}}})}}}});var nct,sct,act,lct,cct,uct,dct,mct,pct,hct,fct,gct,bct,yct,_ct,nW;var oW=d(()=>{nct="@photoeditorsdk/root";sct="5.19.0";act="The most comprehensive photo editor SDK for HTML5";lct="http://github.com/imgly/pesdk-html5";cct="PhotoEditorSDK (img.ly GmbH) <contact@img.ly>";uct="SEE LICENSE IN LICENSE.md";dct=true;mct={};pct={start:"yarn workspace @example/react start",build:"yarn sdk-script build","build:rollup":"yarn sdk-script build rollup","package:release":"cd dist/photoeditorsdk && npm publish","package:pre-release":"cd dist/photoeditorsdk && npm publish --tag next","lint:css":"stylelint './packages/**/*.tsx'","lint:ts":"eslint ./packages/**/*.{ts,tsx}","lint:ts-engine":"eslint ./engine/**/*.ts","lint:types":"tsc --noEmit -p tsconfig.json --skipLibCheck","lint:types-engine":"tsc --noEmit -p engine/tsconfig.json --skipLibCheck",lint:"run-p lint:*",test:"$(npm bin)/jest",e2e:"cypress open","e2e:server":"sdk-script ui -P 3000 -D build","e2e:ci":"CYPRESS_RETRIES=2 cypress run --browser chrome --headed",deploy:"yarn workspace examp run deploy:pages",docs:"rm -rf ./docs && typedoc",postinstall:"yarn sdk-script server:build"};hct={"@elv1n/cypress-plugin-snapshots":"1.4.4","@types/jest":"^24.0.11","@types/pixelmatch":"^5.2.2","@types/pngjs":"^3.4.2","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"4.4.0","@typescript-eslint/eslint-plugin":"4.6.0","@typescript-eslint/parser":"4.6.0",autoprefixer:"^9.7.4","cross-env":"^7.0.2",cypress:"6.6.0",eslint:"7.10.0","eslint-config-airbnb":"18.2.0","eslint-config-prettier":"6.12.0","eslint-import-resolver-typescript":"^2.3.0","eslint-plugin-cypress":"^2.11.2","eslint-plugin-import":"2.22.1","eslint-plugin-jsx-a11y":"6.3.1","eslint-plugin-no-only-tests":"^2.4.0","eslint-plugin-prettier":"3.1.4","eslint-plugin-react":"7.21.3",husky:"4.3.0",jest:"24.9.0",jsdoc:"^3.6.3","lint-staged":"10.4.0","lodash.defaults":"^4.2.0","mobx-react-devtools":"^6.1.1","native-url":"0.3.4","npm-run-all":"^4.1.5",prettier:"^2.0.5",react:"16.8.6","react-dom":"16.8.6","start-server-and-test":"1.11.5","styled-components":"4.4.1",stylelint:"^13.7.2","stylelint-config-recommended":"^3.0.0","stylelint-config-standard":"^20.0.0","stylelint-config-styled-components":"^0.1.1","stylelint-processor-styled-components":"^1.10.0","ts-jest":"24.3.0",typedoc:"^0.17.8",typescript:"3.8.3","utility-types":"^3.10.0"};fct={"@juggle/resize-observer":"3.2.0","@reach/portal":"^0.13.0","can-use-dom":"0.1.0","lodash.debounce":"4.0.8","lodash.memoize":"4.1.2","lodash.throttle":"4.1.1",mobx:"4.15.7","mobx-react":"6.3.1",photoeditorsdk:"1.0.0","react-app-polyfill":"1.0.6","react-transition-group":"^4.4.1"};gct={node:"10.x || 11.x || 12.x || 13.x || 14.x || 15.x"};bct={eslint:"7.10.0"};yct=["examples/server","examples/material-ui","examples/ssr","examples/react","packages/*","!packages/ui","packages/ui/*","!packages/ui/components","packages/ui/components/*","engine/*","test/*","scripts"];_ct={hooks:{"pre-commit":"lint-staged","pre-push":"true"}};nW={name:nct,version:sct,description:act,repository:lct,author:cct,license:uct,private:dct,bin:mct,scripts:pct,devDependencies:hct,dependencies:fct,devEngines:gct,resolutions:bct,workspaces:yct,husky:_ct}});var mu;var sW=d(()=>{R();Ln();oW();mu=class{constructor(t,e,r,o,n,s){this.version="3.12.0";this.mapImagePointToRelativeCropPoint=t=>{const e=st.pointFromSpaceToSpace(t,this.imageSpace,this.cropSpace,false);return st.absoluteToRelativePoint(e,this.cropSpace,false)};this.mapSizeToRelativeUnscaledCropSize=t=>{return t/Math.min(this.outputSize.height,this.outputSize.width)};this.mapSizeToRelativeScaledCropSize=t=>{return t/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.getPointInDirection=(t,e=0,r=3)=>{const o=Math.tan(e);const n=Math.sqrt(o**2+1);return{x:t.x+r/n,y:t.y+r*o/n}};this.previewPosition=t;this.previewSize=e;this.outputSize=r;this.imageSize=o;this.imageSpace=n;this.cropSpace=s;this.outputScale=s.getScale()}static serializeFilters(t){return{type:"filter",options:{intensity:t.intensity,identifier:t.identifier}}}static serializeAdjustments(t){return{type:"adjustments",options:t}}static serializeOverlay(t){return{type:"overlay",options:{identifier:t.identifier,intensity:t.opacity,blendMode:t.blendMode.replace(/[A-Z]/g,e=>` ${e.toLowerCase()}`)}}}static serializeMetaData(){return{platform:"html5",version:nW.version,createdAt:new Date().toISOString()}}serialise(t,e,r){const o=mu.serializeMetaData();const n={width:this.imageSize.width,height:this.imageSize.height};if(e){n.type=r;n.data=e}const s=[];const a=[];const{adjustment:l}=t;if(Object.keys(l).map(_=>l[_]).filter(Boolean).length){s.push(mu.serializeAdjustments(l))}const{filter:c}=t;if(c.identifier!=="identity"){s.push(mu.serializeFilters(c))}const{overlay:u}=t;if(u.identifier!=="identity"){a.push(mu.serializeOverlay(u))}if(t.transform){const{transform:_,orientation:x}=this.serializeTransform(t.transform);const b=[_.options.start.x!==0,_.options.start.y!==0,_.options.end.x!==1,_.options.end.y!==1,_.options.rotation!==0];const w=[x.options.rotation!==0,x.options.flipVertically!==false,x.options.flipHorizontally!==false];if(b.some(T=>T)){s.push(_)}if(w.some(T=>T)){s.push(x)}}const{frame:m}=t;if(m.identifier!=="identity"){a.push(this.serialzeFrame(m))}const{focus:p}=t;if(p.identifier!=="identity"){s.push(this.serializeFocus(p))}if(t.sprite){t.sprite.spriteIdList.forEach(_=>{const x=t.sprite.common[_];switch(x.tool){case"sticker":const b=t.sprite.sticker[_];a.push(this.serializeSticker(b,x,t.transform));break;case"text":const w=t.sprite.text[_];a.push(this.serializeText(w,x));break;case"textdesign":const T=t.sprite.textdesign[_];a.push(this.serializeTextDesign(T,x));break;default:break}})}if(t.brush.strokes.length){a.push({type:"brush",options:{paths:t.brush.strokes.map(_=>{return{points:_.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:_.brush.color},size:_.brush.size,hardness:_.brush.hardness}}})}})}if(a.length){const _={type:"sprite",options:{sprites:a}};s.push(_)}const h=t.customStickers;const g={assets:{stickers:h}};return{version:this.version,meta:o,image:n,operations:s,assetLibrary:g}}serialzeFrame(t){return{type:"frame",options:{identifier:t.identifier,alpha:t.opacity,tintColor:{rgba:t.color},size:this.mapSizeToRelativeUnscaledCropSize(t.width)}}}serializeFocus(t){const e=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(t.identifier){case"linear":return{type:"focus",options:{type:"linear",options:{start:this.mapImagePointToRelativeCropPoint(t.linear.start),end:this.mapImagePointToRelativeCropPoint(t.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(t.linear.blurRadius)}}};case"radial":return{type:"focus",options:{type:"radial",options:{start:this.mapImagePointToRelativeCropPoint(t.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(t.radial.center,0,t.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(t.radial.blurRadius),gradientRadius:.1}}};case"mirrored":const{mirrored:r}=t;return{type:"focus",options:{type:"mirrored",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,e/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(r.origin,r.rotation,-e/2)),size:this.mapSizeToRelativeScaledCropSize(t.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(t.mirrored.blurRadius),gradientSize:.1}}};default:return{type:"focus",options:{type:"gaussian",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(t.gaussian.blurRadius)}}}}}serializeSticker(t,e,r){return{type:"sticker",options:{position:this.mapImagePointToRelativeCropPoint(e.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(e.size.width),y:this.mapSizeToRelativeScaledCropSize(e.size.height)},rotation:e.rotation,flipVertically:(e.flipVertically||false)!==(r.flipVertically||false),flipHorizontally:(e.flipHorizontally||false)!==(r.flipHorizontally||false),identifier:t.identifier,alpha:t.opacity,tintColor:{rgba:t.tintColor},tintMode:t.tintMode}}}serializeText(t,e){return{type:"text",options:{position:this.mapImagePointToRelativeCropPoint(e.position),rotation:e.rotation,flipVertically:false,flipHorizontally:false,fontIdentifier:t.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(t.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(t.width),text:t.text,lineHeight:t.lineHeight,color:{rgba:t.textColor},backgroundColor:{rgba:t.backgroundColor},alignment:t.alignment}}}serializeTextDesign(t,e){return{type:"textdesign",options:{position:this.mapImagePointToRelativeCropPoint(e.position),rotation:e.rotation,flipVertically:false,flipHorizontally:false,identifier:t.identifier,inverted:t.isInverted,text:t.text,seed:t.seed,width:this.mapSizeToRelativeScaledCropSize(t.width),padding:this.mapSizeToRelativeScaledCropSize(t.padding),color:{rgba:t.color}}}}serializeTransform(t){const{start:e,end:r}=t;const o={type:"transform",options:{start:e,end:r,rotation:t.rotation,meta:{identifier:t.identifier}}};const n={type:"orientation",options:{rotation:t.outputRotation,flipHorizontally:t.flipHorizontally,flipVertically:t.flipVertically}};return{transform:o,orientation:n}}}});var iI={};ue(iI,{Deserializers:()=>xct,Serializer:()=>mu});var xct;var rI=d(()=>{eW();rW();sW();xct={"3.9.0":Oi,"3.12.0":Ri}});var aW,vct,Cct,Sct,ef;var lW=d(()=>{wt();R();z();aW=/^data:image\/(.+?);base64,/;vct=i=>aW.test(i);Cct=i=>i.match(/^data:([^;]+)/)[1];Sct=i=>i.replace(aW,"");ef=class{constructor(t){this.applySerialization=async(t,e,r,o)=>{this.editor.resetToolStates();const n=this.editor.activeStore.tool==="transform";if(!n){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.reset();if(!n){this.editor.transformToolStore.onLeave()}const s="Unexpected error occured";const a=e.deserializeImage(t);if(a.image&&a.image.data){const u=a.image.data;await this.editor.setImage(u);this.editor.scale.defaultScale=1;this.editor.scale.resetOffset();this.editor.transformToolStore.reset();this.editor.activeStore.setImage(u);await this.editor.engineMediator.image.addImageToContainer();this.editor.engineMediator.output.applyNewImageTransform();this.editor.engineMediator.preview.updateTransform();this.editor.scale.setInitialTransform();this.editor.transformToolStore.setCropDefaults();this.editor.historyStore.addInitialSnapshot();this.editor.transformToolStore.saveTransforms()}const l=e.deserializeTransformation(t);if(!l){o(s);return}await this.applyStateOnUI(l);const c=e.deserialize(t);if(!c){o(s);return}await this.applyStateOnUI(c);this.editor.historyStore.addInitialSnapshot();if(n){this.editor.transformToolStore.onEnter()}await this.editor.render();if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}r()};this.editor=t}serialize({image:t}={image:false}){const e=this.editor.activeStore.tool==="transform";const{displaySerializationModal:r}=this.editor.configStore.config;if(r){this.editor.modalStore.showInfoModal("saving")}return new Promise((o,n)=>{Promise.resolve().then(()=>(rI(),iI)).then(async({Serializer:s})=>{try{if(e){this.editor.transformToolStore.onLeave()}await this.editor.wait();this.editor.transformToolStore.applyDefaultCrop(false);const{originalImage:a}=this.editor.imageContainer.getData();const l=this.editor.engineMediator.output.container.getResolution();const c={width:a.width,height:a.height};const u=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,l,c,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer());const m={["adjustment"]:lt(this.editor.adjustmentsToolStore.state),["filter"]:lt(this.editor.filterToolStore.state),["focus"]:lt(this.editor.focusToolStore.serializableState),["overlay"]:lt(this.editor.overlayToolStore.state),["frame"]:lt(this.editor.frameToolStore.state),["brush"]:this.editor.brushToolStore.strokes||{strokes:[]}};const{sprite:p,customStickers:h}=await this.editor.spriteStore.serializableState();p.spriteIdList=p.spriteIdList.sort((x,b)=>{const w=p.common[x].order;const T=p.common[b].order;return w-T});m.sprite=p;m.customStickers=h;m.transform=this.editor.transformToolStore.serializableState;let g;let _;if(t){const x=ef.getDataURL(a);_=Cct(x);g=Sct(x)}if(r){this.editor.modalStore.hideModal()}o(u.serialise(m,g,_));if(e){this.editor.transformToolStore.onEnter()}}catch(a){if(r){this.editor.modalStore.hideModal()}n(a)}})})}deserialize(t){this.editor.modalStore.showInfoModal("loading");return new Promise((e,r)=>{try{Promise.resolve().then(()=>(rI(),iI)).then(({Deserializers:o})=>{const n=t.version.match(/[0-3].[0-8].[0-9]/i);let s=null;if(n&&o["3.9.0"]){s=new o["3.9.0"](this.editor)}else if(o[t.version]){s=new o[t.version](this.editor)}else{s=new o["3.12.0"](this.editor)}if(n){this.editor.modalStore.hideModal();this.editor.modalStore.showActionModal({type:"warning",identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,s,e,r)})}else{this.applySerialization(t,s,e,r)}})}catch(o){if(this.editor.modalStore.identifier==="loading"){this.editor.modalStore.hideModal()}r(o)}})}static getDataURL(t){if(t instanceof HTMLImageElement){const{src:n}=t;if(vct(n)){return n}}if(t instanceof HTMLCanvasElement){return t.toDataURL("image/png")}const e=document.createElement("canvas");e.width=t.width;e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0);const o=e.toDataURL("image/png");jt(e);return o}async applyStateOnUI(t){const e=this.editor.activeStore.tool==="transform";try{if(t.transform){if(!e){this.editor.transformToolStore.onEnter()}this.editor.transformToolStore.updateStateFromSerialization(t.transform);await this.editor.wait();this.editor.transformToolStore.onLeave();if(!e){this.editor.transformToolStore.onEnter();await this.editor.wait();this.editor.transformToolStore.onLeave()}}if(t.filter){await this.editor.filterToolStore.updateStateFromSerialization(t.filter)}if(t.adjustment){this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment)}if(t.focus){await this.editor.focusToolStore.updateStateFromSerialization(t.focus)}if(t.overlay){await this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)}if(t.sprite){let r=Object.keys(t).length-1;if(t.customStickers){r-=1}t.sprite.spriteIdList=t.sprite.spriteIdList.sort((o,n)=>{const s=t.sprite.common[o].order;const a=t.sprite.common[n].order;return s-a});await this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers,Math.max(0,r))}if(t.brush){this.editor.brushToolStore.updateStateFromHistory(t.brush)}if(t.frame){await this.editor.frameToolStore.updateStateFromSerialization(t.frame)}this.editor.outputContainer.updateChildrenContainers()}catch(r){if(r.name==="AssetNotFoundError"){console.error(r)}else{console.error(r);this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:r.message,handleConfirm:()=>{this.applyStateOnUI(t)}})}}}}});var wct,oI;var cW=d(()=>{wct=i=>{const t=atob(i.split(",")[1]);const e=i.split(",")[0].split(":")[1].split(";")[0];const r=new ArrayBuffer(t.length);const o=new Uint8Array(r);for(let n=0;n<t.length;n+=1){o[n]=t.charCodeAt(n)}return new Blob([r],{type:e})};oI=wct});var uW,dW;var mW=d(()=>{R();uW=i=>i.split(",")[0].split(":")[1].split(";")[0];dW=i=>{if(typeof i==="string"){return uW(i)}if(i.src.includes(".svg")){return"image/svg+xml"}if(i.src){return uW(i.src)}return"image/jpeg"}});var bv,rf;var pW=d(()=>{Gh();bv=y(Yu());R();Ln();rf=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:r,backgroundColor:o}){this.crossOrigin=r;this.engine=new hm({license:t,crossOrigin:r,assetProvider:e,downscaleOptions:{maxDimensions:{width:174,height:174}},backgroundColor:o})}getAllFilterPreviewThumbnails(t){return new Promise((e,r)=>{const o=[];const n=[];t.forEach(s=>{if(s.isDuotone)o.push(s.identifier);else n.push(s.identifier)});this.getAllDuotonePreview(o).then(s=>{this.getAllLutPreview(n).then(a=>{e(Object.assign(s,a))}).catch(a=>{r(a)})}).catch(s=>{r(s)})})}async getAllDuotonePreview(t){const e={};if(!t.length)return e;const r=await this.engine.addDuoToneFilterFromAssets(t[0],this.container);await(0,bv.default)(t,async o=>{const n=this.engine.assetProvider.getDuotoneFilterAsset(o);const s=r.filterOperation.getFilter();s.set({intensity:.5,lightColor:nt.Color.fromHex(n.lightColor),darkColor:nt.Color.fromHex(n.darkColor)});const a=await this.engine.export("data-url","image/jpeg",.8,false,true);e[o]=a},{concurrency:1});this.engine.removeEffect(r);return e}async loadLutAssets(t){const e={};await(0,bv.default)(t,async r=>{e[r]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",r))});return e}async getAllLutPreview(t){const e={};if(!t.length)return e;const r=await this.loadLutAssets(t);const o=await this.engine.addLUTFilterFromAssets(t[0],this.container);await(0,bv.default)(t,async n=>{const s=this.engine.assetProvider.getLUTFilterAsset(n);const a=o.filterOperation.getFilter();const l={horizontalTileCount:s.horizontalTileCount||5,verticalTileCount:s.verticalTileCount||5,image:r[n]};a.set({...l,intensity:s.defaultIntensity||1});o.setProperties({intensity:1});a._lutPrimitive.set(l);const c=await this.engine.export("data-url","image/jpeg",.8,false,true);e[n]=c},{concurrency:1});this.engine.removeEffect(o);return e}addImageToContainer(t){return new Promise((e,r)=>{let o;if(rf.isImageElement(t)){o=t;this.setBackgroundImage(o);e()}else{this.getImageElement(t).then(n=>{o=n;this.setBackgroundImage(o);e()}).catch(n=>{r({identifier:"imageLoading",message:n.message})})}})}getImageElement(t){return new Promise((e,r)=>{const o=new Image;o.addEventListener("load",()=>{e(o)});o.addEventListener("error",n=>{r(n)});o.crossOrigin=this.crossOrigin;o.src=t})}setBackgroundImage(t){if(!this.container){this.container=this.engine.addImage({image:t,blendMode:"normal",opacity:1})}else{this.container.setData({image:t})}const{size:e}=this.container.getBounds();const r=this.engine.getOutputContainer();r.setResolution(e)}}});var Tct,jo;var nI=d(()=>{wt();z();Tct={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};jo=class{constructor(t){this.previewTopLeftPosition={x:0,y:0};this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig();this.state.rotationGuides=this.getRotationGuidesFromConfig()};this.getGuideValue=(t,e)=>{const{height:r,width:o}=this.editor.getPreviewSize();const{snapToLeft:n,snapToRight:s,snapToTop:a,snapToBottom:l}=this.configStore.config.snapping.position;const c=Math.min(r,o);let u=0;if(e==="bottom"){u=Math.round(r-c*l)}else if(e==="top"){u=Math.round(c*a)}else if(e==="right"){u=Math.round(o-c*s)}else if(e==="left"){u=Math.round(c*n)}else if(t==="vertical"&&e==="center"){u=Math.round(o/2)}else if(t==="horizontal"&&e==="center"){u=Math.round(r/2)}return u};this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:e,snapToRight:r}=this.configStore.config.snapping.position;const o=[];if(t){o.push({value:this.getGuideValue("vertical","center"),edge:"center",isVisible:false,direction:"vertical"})}if(e){o.push({value:this.getGuideValue("vertical","left"),edge:"leading",isVisible:false,direction:"vertical"})}if(r){o.push({value:this.getGuideValue("vertical","right"),edge:"trailing",isVisible:false,direction:"vertical"})}return o};this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:r}=this.configStore.config.snapping.position;const o=[];if(t){o.push({value:this.getGuideValue("horizontal","center"),edge:"center",isVisible:false,direction:"horizontal"})}if(e){o.push({value:this.getGuideValue("horizontal","top"),edge:"leading",isVisible:false,direction:"horizontal"})}if(r){o.push({value:this.getGuideValue("horizontal","bottom"),edge:"trailing",isVisible:false,direction:"horizontal"})}return o};this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation;const e=[];t.forEach(o=>{e.push(o);e.push(o+360);e.push(o-360)});const r=e.filter((o,n)=>e.indexOf(o)===n);return r.map(o=>({value:o*Math.PI/180,edge:"center",isVisible:false,position:{x:0,y:0}}))};this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:r,rightBottom:o})=>{const n=Math.min(t.y,r.y,e.y,o.y);const s=Math.max(t.y,r.y,e.y,o.y);const a=Math.min(t.x,r.x,e.x,o.x);const l=Math.max(t.x,r.x,e.x,o.x);return{height:Math.round(s-n),width:Math.round(l-a)}};this.mapRange=({value:t,fromMin:e,fromLength:r,toMin:o,toLength:n})=>{return(t-e)*n/r+o};this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig();this.state.verticalGuides=this.getVerticalGuidesFromConfig()};this.mapToSnapSystem=(t,e,r,o)=>{if(e.length===0){return t}if(e[0]>t){return t-r}for(let n=0;n<e.length-1;n+=1){const s=e[n];const a=e[n+1];let l=s+r;let c=a-r;let u=0;if(o){u=n*r*2;l+=u;c+=u+r*2}const m=1e-5;if(s<=t&&t<=a){if(t<=s+m){return s+u}if(t>=a-m){return a+u+(o?r*2:0)}return this.mapRange({value:t,fromMin:s,fromLength:a-s,toMin:l,toLength:c-l})}}if(o){return t+(e.length-1)*r*2+r}return t};this.mapFromSnapSystem=(t,e,r,o)=>{if(e.length===0){return t}if(e[0]>t){if(t>=e[0]-r){return e[0]}return t+r}let n=t;for(let a=0;a<e.length-1;a+=1){const l=e[a];const c=e[a+1];const u=l+r;let m=c-r;let p=c;if(o){m+=r*2;p+=r*2;n=t-a*r*2}if(l<=n&&n<=p){if(u<=n&&n<=m){return this.mapRange({value:n,fromMin:u,fromLength:m-u,toMin:l,toLength:c-l})}if(n<u){return l}return c}}n-=r*3;const s=e[e.length-1];if(n<=s){return s}return n};this.centerSnapValue=(t,e)=>{const r=e*.5;const{value:o,edge:n}=t;let s=o;if(n==="leading"){s+=r}else if(n==="trailing"){s-=r}return s};this.mapSnappingGuidesToCenter=(t,e)=>{const r=[];t.forEach(o=>{r.push(this.centerSnapValue(o,e))});return r};this.calcSnapThresholdInRadians=(t,e)=>{if(t===0){return 0}return e/t};this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition();const e=this.editor.getPreviewSize();const r=Do();this.previewTopLeftPosition={x:t.x/r-e.width/2,y:t.y/r-e.height/2}};this.snapToRotation=(t,e,r)=>{const{rotationGuides:o}=this.state;const{enabled:n,threshold:s}=this.configStore.config.snapping.rotation;const{x:a,y:l}=this.previewTopLeftPosition;const{width:c}=this.editor.getPreviewSize();let u=(t+Math.PI*2)%(Math.PI*2);if(n){const m=new F(e).magnitude;const p=o.map(_=>_.value).sort((_,x)=>_-x);const h=this.calcSnapThresholdInRadians(m,s);if(!this.rotationOffset){const _=this.mapToSnapSystem(t,p,h,false);this.rotationOffset=_-u}u=this.mapFromSnapSystem(u+this.rotationOffset,p,h,false);const g={x:r.position.x-a-c,y:r.position.y-l};o.forEach(_=>{_.isVisible=_.value===u;_.position=g});return u}return t};this.snapToPosition=(t,e)=>{const{horizontalGuides:r,verticalGuides:o}=this.state;const{enabled:n,threshold:s}=this.configStore.config.snapping.position;const a=new F(this.previewTopLeftPosition);const{height:l,width:c}=this.getSpriteDimensions(e);const{x:u,y:m}=new F(t).subtract(a);if(n){const p=this.mapSnappingGuidesToCenter(r,l).sort((x,b)=>x-b);const h=this.mapSnappingGuidesToCenter(o,c).sort((x,b)=>x-b);if(!this.positionOffset){const x=this.mapToSnapSystem(u,h,s,true);const b=this.mapToSnapSystem(m,p,s,true);this.positionOffset=new F(x,b).subtract(new F(u,m))}let g=this.mapFromSnapSystem(u+this.positionOffset.x,h,s,true);let _=this.mapFromSnapSystem(m+this.positionOffset.y,p,s,true);g=Math.round(g);_=Math.round(_);r.forEach(x=>{const b=Math.round(this.centerSnapValue(x,l));x.isVisible=b===_});o.forEach(x=>{const b=Math.round(this.centerSnapValue(x,c));x.isVisible=b===g});return new F(g,_).add(a)}return{x:u,y:m}};this.dispose=()=>{this.state=null;this.editor=null;this.configStore=null};this.editor=t;this.configStore=t.configStore;this.state=Z(Tct);this.rotationOffset=null;this.positionOffset=null}hidePositionGuides(){this.positionOffset=null;this.state.verticalGuides=this.state.verticalGuides.map(t=>({...t,isVisible:false}));this.state.horizontalGuides=this.state.horizontalGuides.map(t=>({...t,isVisible:false}))}hideRotationGuides(){this.rotationOffset=null;this.state.rotationGuides=this.state.rotationGuides.map(t=>({...t,isVisible:false}))}get positionGuides(){const{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}};f([Z],jo.prototype,"state",2);f([v],jo.prototype,"snapToRotation",2);f([v],jo.prototype,"snapToPosition",2);f([v],jo.prototype,"hidePositionGuides",1);f([v],jo.prototype,"hideRotationGuides",1);f([v],jo.prototype,"dispose",2);f([C],jo.prototype,"positionGuides",1);f([C],jo.prototype,"rotationGuides",1)});var Cl;var hW=d(()=>{wt();R();Ln();z();pv();hv();uv();Vk();mv();fv();gv();lW();sk();lk();ck();wk();eI();dk();cW();mW();pW();kk();nI();tI();Zk();Cl=class{constructor(t,e){this.initWithImage=async t=>{try{this.modalStore.showInfoModal("loading");this.engineMediator.init();this.snappingStore.init();await this.activeStore.setImage(t);if(this.configStore.config.displayResizeWarning){this.checkImageResize()}if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){const e=this.configStore.config.engine;this.previewThumbnails=new rf({...e,license:this.configStore.config.license,assetProvider:this.configStore.assetProvider})}if(this.engine){this.engine.pesdk.on("context-lost",()=>{this.configStore.events.onErrorWebGLContextLost()})}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:e.identifier?e.identifier:"rendering",error:e,handleConfirm:()=>{this.initWithImage(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.checkImageResize=()=>{this.engine.on("beganImageDownscaling",()=>{this.modalStore.showInfoModal("resizing")});this.engine.on("imageDownscaled",({width:t,height:e})=>{const{maxMegaPixels:r}=this.configStore.config.engine.downscaleOptions;const o=dp.isMobile()?r.mobile:r.desktop;this.modalStore.hideModal();this.modalStore.showActionModal({type:"warning",identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${o}`,width:`${t}`,height:`${e}`}})})};this.init=t=>{var o,n;if(!((o=this.activeStore)==null?void 0:o.image)){this.initWithImage(t);return}if(!this.historyStore||!((n=this.configStore)==null?void 0:n.config)){return}const e=this.historyStore.isDirty();const{displayDiscardChangesWarning:r}=this.configStore.config;if(e&&r){this.modalStore.showActionModal({type:"warning",identifier:"discardChanges",handleConfirm:()=>{this.setImage(t);this.resetToolStates()},handleDismiss:()=>{this.setImage(t,true)}});return}if(e&&!r){this.setImage(t,true);return}this.historyStore.reset();this.setImage(t,true).then(()=>{if(this.modalStore.identifier!=="imageResized"){this.modalStore.hideModal()}const{engine:s,displayCanvasRendererWarning:a}=this.configStore.config;if(s.preferredRenderer==="canvas"&&a){this.modalStore.showActionModal({type:"warning",identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})}}).catch(()=>{return null})};this.setImage=async(t,e=false)=>{try{if(!this.activeStore.image){this.initWithImage(t)}else{this.activeStore.setImageLoadedToEngine(false);this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading");this.scale.defaultScale=1;this.scale.resetOffset();await this.activeStore.setImage(t);await this.engineMediator.image.addImageToContainer();this.canvasStore.resizeCanvas();this.engineMediator.output.applyNewImageTransform();this.engineMediator.preview.updateTransform();this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();const{flipHorizontally:r,flipVertically:o,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:o,flipHorizontally:r});await this.transformToolStore.rotateOutputContainer(_p(n),false);if(e){this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();this.transformToolStore.resetCrop();this.transformToolStore.applyDefaultCrop();this.transformToolStore.saveTransforms();this.transformToolStore.onEnter();this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees);this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}else{this.transformToolStore.saveTransforms()}this.snappingStore.calculatePreviewTopLeftPosition();this.historyStore.addInitialSnapshot();await this.renderPromise();if(this.configStore.config.filter.enablePreviewThumbnails&&this.configStore.config.engine.preferredRenderer==="webgl"){this.filterToolStore.setImageAndGetPreviews()}const s=this.activeStore.tool;if(!s){this.onReady()}else{this.configStore.events.onImageLoaded()}if(!(this.modalStore.identifier==="imageResized")){this.modalStore.hideModal()}this.activeStore.setImageLoadedToEngine(true);this.resize()}}catch(r){this.configStore.events.onErrorImageLoading(r);this.modalStore.hideModal();this.modalStore.showActionModal({type:"error",identifier:r.identifier?r.identifier:"rendering",error:r,handleConfirm:()=>{this.setImage(t,e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}});throw new Error(r)}};this.onToolChange=(t,e=null,r=true)=>{var o,n;if(t===e){return}if((n=(o=this.engineMediator)==null?void 0:o.preview)==null?void 0:n.container){if([t,e].indexOf("transform")!==-1){if(t==="transform"){this.transformToolStore.onLeave();this.transformToolStore.addSnapshot();this.snappingStore.calculatePreviewTopLeftPosition()}else if(e==="transform"){this.transformToolStore.onEnter()}this.resize(e)}else{this.scale.resetOffset();this.scale.resetPosition();this.scale.setScaleToDefault();this.scale.scaleRender(true)}if(r){this.render()}}};this.resize=(t=null)=>{if(!this.engineMediator)return;try{const e=this.activeStore.tool;const r=t==="transform"||!t&&e==="transform";this.canvasStore.resizeCanvas(t);this.transformToolStore.applyDefaultCrop();const o=lt(this.transformToolStore.maxCropMaskSize);if(!r){this.transformToolStore.onEnter()}const n=this.engineMediator.preview.container.getRotation();const s=this.engineMediator.preview.updateTransform(n);if(s){this.scale.setInitialTransform();this.transformToolStore.setCropDefaults();this.transformToolStore.updateCanvasControls(o);this.focusToolStore.updateCanvasControls();this.spriteStore.updateCanvasControls();const a=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(a);if(!r){this.transformToolStore.onLeave();this.transformToolStore.onEnter();this.transformToolStore.onLeave()}this.snappingStore.calculatePreviewTopLeftPosition();this.render()}}catch(e){this.configStore.events.onErrorImageLoading(e);this.modalStore.showActionModal({type:"error",identifier:"rendering",handleConfirm:()=>{this.resize(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}};this.export=async({preventExportEvent:t,...e}={})=>{const r=this.activeStore.tool==="transform";try{this.modalStore.showInfoModal("exporting");if(r){this.transformToolStore.onLeave()}const{config:o}=this.configStore;const n={...o.export.image,...e};const{exportType:s,format:a,quality:l,enableDownload:c,transparent:u}=n;const m=await this.engineMediator.engine.export(s,a,l,u);if(r&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}if(this.historyStore){this.historyStore.isDirtySinceSave=false}if(this.modalStore){this.modalStore.hideModal()}if(c){this.triggerFileDownload(o.export.filename,a,s,m)}if(!t){this.configStore.events.onExport(m)}return m}catch(o){if(this.modalStore){this.modalStore.hideModal()}if(r&&this.transformToolStore){this.transformToolStore.onEnter();await this.render()}throw new Error(o)}};this.serialize=({image:t}={image:true})=>{if(this.serializationMediator){return this.serializationMediator.serialize({image:t})}return Promise.resolve({})};this.deserialize=t=>{if(this.serializationMediator){return this.serializationMediator.deserialize(t)}return Promise.resolve()};this.close=()=>{var t,e,r,o,n,s;if((((t=this.historyStore)==null?void 0:t.isDirtySinceSave)||((r=(e=this.transformToolStore)==null?void 0:e.transformHistory)==null?void 0:r.hasChanges()))&&((n=(o=this.configStore)==null?void 0:o.config)==null?void 0:n.displayCloseWarning)&&this.modalStore){this.modalStore.showActionModal({type:"warning",identifier:"unsavedChanges",handleConfirm:()=>{var a;if((a=this.configStore)==null?void 0:a.events){this.configStore.events.onClose()}}})}else if((s=this.configStore)==null?void 0:s.events){this.configStore.events.onClose()}};this.hasChanges=()=>{if(this.historyStore){return this.historyStore.isDirtySinceSave}return false};this.getImageDimensions=()=>{if(this.engine){const{width:t,height:e}=this.engine.getOutputDimensions();return{width:t,height:e}}return{width:0,height:0}};this.wait=(t=0)=>new Promise(e=>setTimeout(e,t));this.clickableCanvas=async t=>{if(t){await new Promise(e=>setTimeout(e,0));this.canvasStore.enableCanvasClick()}else{this.canvasStore.disableCanvasClick()}};this.onReady=async()=>{const{forceCrop:t}=this.configStore.config;this.activeStore.selectTool(this.configStore.defaultTool);if(t){const e=this.transformToolStore.localOutputImageSize;const r=e.width/e.height;const o=this.transformToolStore.entityManager.items.map(n=>{if(n.ratio){return n.ratio}return n.dimensions.x/n.dimensions.y});if(o.indexOf("*")!==-1){console.error('ForceCrop will not work if "*" is one of the ratios')}else if(o.indexOf(parseFloat(r.toFixed(2)))===-1){this.activeStore.selectTool("transform")}}this.configStore.events.onEditorReady()};this.addSnapshot=(t,e,r)=>{this.historyStore.addSnapshot(t,e,r)};this.resetToolStates=()=>{this.transformToolStore.pureReset();this.filterToolStore.pureReset();this.focusToolStore.pureReset();this.adjustmentsToolStore.pureReset();this.overlayToolStore.pureReset();this.frameToolStore.pureReset();this.brushToolStore.pureReset();this.spriteStore.pureReset();this.historyStore.reset();this.render()};this.getAssetPath=t=>this.assetProvider.getPathForCategory(t);this.render=async()=>{await this.renderPromise()};this.applyFlipToPreview=t=>{if(!this.engineMediator)return{x:0,y:0};return this.engineMediator.previewSpaceToFlippedPreviewSpace(t)};this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:t,height:e}=this.engine.getOutputDimensions();if(t&&e){return{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}}return{height:e,width:t}};this.getImageMimeType=()=>{return dW(this.activeStore.image)};this.cleanUpCanvasMemory=()=>{var t,e,r;(r=(e=(t=this.engineMediator)==null?void 0:t.image)==null?void 0:e.container)==null?void 0:r.dispose()};this.dispose=()=>{if(this.engineMediator){this.engineMediator.dispose();this.engineMediator=null}this.serializationMediator=null;if(this.spriteStore){this.spriteStore.dispose();this.spriteStore=null}this.scale=null;this.filterToolStore=null;this.adjustmentsToolStore=null;this.focusToolStore=null;this.overlayToolStore=null;this.frameToolStore=null;this.brushToolStore=null;if(this.transformToolStore){this.transformToolStore.dispose();this.transformToolStore=null}if(this.libraryStore){this.libraryStore.dispose();this.libraryStore=null}if(this.modalStore){this.modalStore.dispose();this.modalStore=null}if(this.snappingStore){this.snappingStore.dispose();this.snappingStore=null}if(this.activeStore){this.activeStore.dispose();this.activeStore=null}if(this.canvasStore){this.canvasStore.dispose();this.canvasStore=null}this.historyStore=null;if(this.configStore){this.configStore.dispose();this.configStore=null}};this.triggerFileDownload=(t,e,r,o)=>{const n=e==="image/jpeg"&&r!=="ms-blob"?".jpeg":".png";const s=t+n;const a=this.blobFromExportData(o);this.triggerBlobDownload(s,a)};this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob){navigator.msSaveBlob(e,t)}else{const r=document.createElement("a");const o=URL.createObjectURL(e);r.href=o;r.download=t;document.body.appendChild(r);r.click();document.body.removeChild(r);if(!UF()){URL.revokeObjectURL(o)}}};this.blobFromExportData=t=>{if(typeof t==="string"){return oI(t)}if(t instanceof HTMLImageElement){return oI(t.src)}return t};this.configStore=new Zi;if(e){Object.entries(e).forEach(([o,n])=>{this.configStore.events.on(o,n)})}const r=this.configStore.saveConfig(t);this.engineMediator=new Gk(this);this.serializationMediator=new ef(this);this.spriteStore=new ot(this);this.scale=new Qe(this);this.filterToolStore=new Ne(this);this.adjustmentsToolStore=new Jt(this);this.focusToolStore=new At(this);this.overlayToolStore=new Je(this);this.frameToolStore=new Ae(this);this.brushToolStore=new ke(this);this.transformToolStore=new Q(this);this.libraryStore=new hr(this);this.modalStore=new Hr(this);this.snappingStore=new jo(this);this.activeStore=new pr(this);this.canvasStore=new Fi(this);this.historyStore=new uu(this);this.libraryStore.initProvider(r);this.libraryStore.fetchImages();if(this.configStore.config.image){this.initWithImage(this.configStore.config.image)}else{this.configStore.events.onEditorReady();if(this.configStore.defaultTool==="library"||this.configStore.defaultTool==="customTool"){this.activeStore.selectTool(this.configStore.defaultTool)}}}get shortestOutputSide(){const t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){if(!this.engineMediator)return null;return this.engineMediator.engine}get imageContainer(){if(!this.engineMediator)return null;return this.engineMediator.image.container}get orderHelper(){if(!this.engineMediator)return null;return this.engineMediator.orderHelper}renderPromise(){if(!this.engineMediator)return null;return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,e){if(!this.engineMediator)return{x:0,y:0};if(qr(t)){return this.engineMediator.previewSpaceToWorldSpace(t,e)}return this.engineMediator.previewSpaceToWorldSpace(t,e)}worldToPreview(t){if(!this.engineMediator)return{x:0,y:0};if(qr(t)){return this.engineMediator.worldSpaceToPreviewSpace(t)}return this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,e){if(!this.engineMediator)return{width:0,height:0};return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}}outputToWorld(t){if(!this.engineMediator)return{x:0,y:0};if(qr(t)){return this.engineMediator.outputSpaceToWorldSpace(t)}return this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){if(!this.engineMediator)return{x:0,y:0};if(qr(t)){return this.engineMediator.previewSpaceToOutputSpace(t)}return this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}};f([v],Cl.prototype,"resize",2);f([v],Cl.prototype,"export",2);f([v],Cl.prototype,"clickableCanvas",2)});var Kt=d(()=>{z();mr();Qx();iH();sk();lk();ck();dk();bH();vH();CH();wk();kH();YH();ZH();QH();gv();mv();hW();Ok();uv();pv();hv();fv();nI();qh();Zh();Yh();xl();Un();pm()});var of,nf,fW,gW,kct,Ict,bW;var yW=d(()=>{of=y(require("react"));A();nf=y(require("styled-components"));R();Kt();z();je();fW=dt.Button.TextSecondary;gW=nf.default.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${i=>i.theme.canvasActionBar.foreground};
  letter-spacing: ${i=>i.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`;kct=nf.default.div`
  display: inline-flex;
  ${i=>i.isDisabled&&nf.css`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;Ict=({isDisabled:i,scale:t,active:e})=>{const{canZoomIn:r}=t;const{canZoomOut:o}=t;const{zoomLevel:n}=t;const s=["transform","brush","focus","sticker","text","textdesign"].indexOf(e.tool)!==-1;return!s?of.default.createElement(kct,{isDisabled:i},of.default.createElement(fW,{"data-test":U.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!o,onClick:t.out},"-"),of.default.createElement(gW,{"data-test":U.ZoomLevel},n," %"),of.default.createElement(fW,{ariaLabel:"Zoom in",isDisabled:!r,onClick:t.in},"+")):null};bW=it("scale","active")(S(Ict));gW.defaultProps={theme:Nr}});var Wr,xW,_W,xm;var vW=d(()=>{Wr=y(require("react"));A();xW=y(require("styled-components"));R();H();Se();z();je();yW();_W=(0,xW.default)(dt.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`;xm=S(function i(){const{config:t,editor:e,history:r,custom:o,active:n}=I();const s=t.locale.mainCanvasActions;const{canUndo:a}=r;const{canRedo:l}=r;const c=t.config.mainCanvasActions;const u=()=>{e.export()};const m=()=>{if(e.activeStore.tool==="transform"){return null}const x=o.getButton("mainCanvasActionUndo");return Wr.default.createElement(x,{key:"mainCanvasActionUndo","data-test":U.MainBarButtonUndo,onClick:r.undo,isDisabled:!a||!n.image,label:s.buttonUndo,ariaLabel:s.buttonUndo,icon:Wr.default.createElement(Kp.undo,null)})};const p=()=>{if(e.activeStore.tool==="transform"){return null}const x=o.getButton("mainCanvasActionRedo");return Wr.default.createElement(x,{key:"mainCanvasActionRedo","data-test":U.MainBarButtonRedo,onClick:r.redo,isDisabled:!l||!n.image,label:s.buttonRedo,ariaLabel:s.buttonRedo,icon:Wr.default.createElement(Kp.redo,null)})};const h=()=>{const x=o.getButton("mainCanvasActionExport");return Wr.default.createElement(x,{key:"mainCanvasActionExport","data-test":U.MainBarButtonExport,onClick:u,isDisabled:!n.image,label:s.buttonExport,ariaLabel:s.buttonExport,icon:Wr.default.createElement(Kp.export,null)})};const g=()=>{if(!t.displayCloseButton){return null}const x=o.getButton("mainCanvasActionClose");return Wr.default.createElement(x,{key:"mainCanvasActionClose","data-test":U.MainBarButtonClose,onClick:e.close,isDisabled:!n.image,label:s.buttonClose,ariaLabel:s.buttonClose,icon:Wr.default.createElement(Kp.close,null)})};const _=c.map(x=>{switch(x){case"undo":return m;case"redo":return p;case"export":return h;case"close":return g;default:return null}});return Wr.default.createElement(dt.Bar.Index,null,Wr.default.createElement(_W,null,_[0]&&_[0]()||null,_[1]&&_[1]()||null),t.config.enableZoom?Wr.default.createElement(bW,{isDisabled:!n.image}):null,Wr.default.createElement(_W,null,_[2]&&_[2]()||null,_[3]&&_[3]()||null))})});function Dct(i){return typeof i==="string"&&i.includes("%")}function Ect(i){return typeof i==="string"&&i.includes(".")&&parseFloat(i)===1}function ai(i,t){if(Ect(i)){i="100%"}const e=Dct(i);i=t===360?i:Math.min(t,Math.max(0,parseFloat(i)));if(e){i=parseInt(String(i*t),10)/100}if(Math.abs(i-t)<1e-6){return 1}if(t===360){i=(i<0?i%t+t:i%t)/parseFloat(String(t))}else{i=i%t/parseFloat(String(t))}return i}function yv(i){i=parseFloat(i);if(Number.isNaN(i)||i<0||i>1){i=1}return i}function sf(i){if(i<=1){return`${Number(i)*100}%`}return i}function Sl(i){return i.length===1?`0${i}`:String(i)}var _v=d(()=>{});function sI(i,t,e){return{r:ai(i,255)*255,g:ai(t,255)*255,b:ai(e,255)*255}}function aI(i,t,e){i=ai(i,255);t=ai(t,255);e=ai(e,255);const r=Math.max(i,t,e);const o=Math.min(i,t,e);let n=0;let s=0;const a=(r+o)/2;if(r===o){s=0;n=0}else{const l=r-o;s=a>.5?l/(2-r-o):l/(r+o);switch(r){case i:n=(t-e)/l+(t<e?6:0);break;case t:n=(e-i)/l+2;break;case e:n=(i-t)/l+4;break;default:break}n/=6}return{h:n,s,l:a}}function CW(i,t,e){let r;let o;let n;i=ai(i,360);t=ai(t,100);e=ai(e,100);function s(a,l,c){if(c<0){c+=1}if(c>1){c-=1}if(c<1/6){return a+(l-a)*(6*c)}if(c<1/2){return l}if(c<2/3){return a+(l-a)*(2/3-c)*6}return a}if(t===0){o=e;n=e;r=e}else{const a=e<.5?e*(1+t):e+t-e*t;const l=2*e-a;r=s(l,a,i+1/3);o=s(l,a,i);n=s(l,a,i-1/3)}return{r:r*255,g:o*255,b:n*255}}function lI(i,t,e){i=ai(i,255);t=ai(t,255);e=ai(e,255);const r=Math.max(i,t,e);const o=Math.min(i,t,e);let n=0;const s=r;const a=r-o;const l=r===0?0:a/r;if(r===o){n=0}else{switch(r){case i:n=(t-e)/a+(t<e?6:0);break;case t:n=(e-i)/a+2;break;case e:n=(i-t)/a+4;break;default:break}n/=6}return{h:n,s:l,v:s}}function SW(i,t,e){i=ai(i,360)*6;t=ai(t,100);e=ai(e,100);const r=Math.floor(i);const o=i-r;const n=e*(1-t);const s=e*(1-o*t);const a=e*(1-(1-o)*t);const l=r%6;const c=[e,s,n,n,a,e][l];const u=[a,e,e,s,n,n][l];const m=[n,n,a,e,e,s][l];return{r:c*255,g:u*255,b:m*255}}function cI(i,t,e,r){const o=[Sl(Math.round(i).toString(16)),Sl(Math.round(t).toString(16)),Sl(Math.round(e).toString(16))];if(r&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)){return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)}return o.join("")}function Fct(i){return Math.round(parseFloat(i)*255).toString(16)}function fr(i){return parseInt(i,16)}function uI(i){return fr(i)/255}function wW(i,t,e,r,o){const n=[Sl(Math.round(i).toString(16)),Sl(Math.round(t).toString(16)),Sl(Math.round(e).toString(16)),Sl(Fct(r))];if(o&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0)}return n.join("")}var dI=d(()=>{_v()});var vm;var mI=d(()=>{vm={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}});function uo(i){return Boolean($o.CSS_UNIT.exec(String(i)))}function Act(i){i=i.trim().toLowerCase();if(i.length===0){return false}let t=false;if(vm[i]){i=vm[i];t=true}else if(i==="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}let e=$o.rgb.exec(i);if(e){return{r:e[1],g:e[2],b:e[3]}}e=$o.rgba.exec(i);if(e){return{r:e[1],g:e[2],b:e[3],a:e[4]}}e=$o.hsl.exec(i);if(e){return{h:e[1],s:e[2],l:e[3]}}e=$o.hsla.exec(i);if(e){return{h:e[1],s:e[2],l:e[3],a:e[4]}}e=$o.hsv.exec(i);if(e){return{h:e[1],s:e[2],v:e[3]}}e=$o.hsva.exec(i);if(e){return{h:e[1],s:e[2],v:e[3],a:e[4]}}e=$o.hex8.exec(i);if(e){return{r:fr(e[1]),g:fr(e[2]),b:fr(e[3]),a:uI(e[4]),format:t?"name":"hex8"}}e=$o.hex6.exec(i);if(e){return{r:fr(e[1]),g:fr(e[2]),b:fr(e[3]),format:t?"name":"hex"}}e=$o.hex4.exec(i);if(e){return{r:fr(e[1]+e[1]),g:fr(e[2]+e[2]),b:fr(e[3]+e[3]),a:uI(e[4]+e[4]),format:t?"name":"hex8"}}e=$o.hex3.exec(i);if(e){return{r:fr(e[1]+e[1]),g:fr(e[2]+e[2]),b:fr(e[3]+e[3]),format:t?"name":"hex"}}return false}function TW(i){let t={r:0,g:0,b:0};let e=1;let r=null;let o=null;let n=null;let s=false;let a=false;if(typeof i==="string"){i=Act(i)}if(Array.isArray(i)){const[l,c,u]=i;if(uo(l)&&uo(c)&&uo(u)){t=sI(l*255,c*255,u*255);s=true;a="rgb"}if(i.length===4){e=i[3]}}if(typeof i==="object"){if(uo(i.r)&&uo(i.g)&&uo(i.b)){t=sI(i.r,i.g,i.b);s=true;a=String(i.r).substr(-1)==="%"?"prgb":"rgb"}else if(uo(i.h)&&uo(i.s)&&uo(i.v)){r=sf(i.s);o=sf(i.v);t=SW(i.h,r,o);s=true;a="hsv"}else if(uo(i.h)&&uo(i.s)&&uo(i.l)){r=sf(i.s);n=sf(i.l);t=CW(i.h,r,n);s=true;a="hsl"}if(Object.prototype.hasOwnProperty.call(i,"a")){e=i.a}}e=yv(e);return{ok:s,format:i.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var Rct,Oct,wl,pI,hI,$o;var kW=d(()=>{dI();mI();_v();Rct="[-\\+]?\\d+%?";Oct="[-\\+]?\\d*\\.\\d+%?";wl=`(?:${Oct})|(?:${Rct})`;pI=`[\\s|\\(]+(${wl})[,|\\s]+(${wl})[,|\\s]+(${wl})\\s*\\)?`;hI=`[\\s|\\(]+(${wl})[,|\\s]+(${wl})[,|\\s]+(${wl})[,|\\s]+(${wl})\\s*\\)?`;$o={CSS_UNIT:new RegExp(wl),rgb:new RegExp(`rgb${pI}`),rgba:new RegExp(`rgba${hI}`),hsl:new RegExp(`hsl${pI}`),hsla:new RegExp(`hsla${hI}`),hsv:new RegExp(`hsv${pI}`),hsva:new RegExp(`hsva${hI}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}});var Gr;var fI=d(()=>{dI();mI();kW();_v();Gr=class{constructor(t="",e={}){if(t instanceof Gr){return t}this.originalInput=t;const r=TW(t);this.originalInput=t;this.r=r.r;this.g=r.g;this.b=r.b;this.a=r.a;this.roundA=Math.round(100*this.a)/100;this.format=e.format||r.format;this.gradientType=e.gradientType;if(this.r<1){this.r=Math.round(this.r)}if(this.g<1){this.g=Math.round(this.g)}if(this.b<1){this.b=Math.round(this.b)}this.isValid=r.ok}getAlpha(){return this.a}setAlpha(t){this.a=yv(t);this.roundA=Math.round(100*this.a)/100;return this}toHsv(){const t=lI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=lI(this.r,this.g,this.b);const e=Math.round(t.h*360);const r=Math.round(t.s*100);const o=Math.round(t.v*100);return this.a===1?`hsv(${e}, ${r}%, ${o}%)`:`hsva(${e}, ${r}%, ${o}%, ${this.roundA})`}toHsl(){const t=aI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){const t=aI(this.r,this.g,this.b);const e=Math.round(t.h*360);const r=Math.round(t.s*100);const o=Math.round(t.l*100);return this.a===1?`hsl(${e}, ${r}%, ${o}%)`:`hsla(${e}, ${r}%, ${o}%, ${this.roundA})`}toHex(t=false){return cI(this.r,this.g,this.b,t)}toHexString(t=false){return`#${this.toHex(t)}`}toHex8(t=false){return wW(this.r,this.g,this.b,this.a,t)}toHex8String(t=false){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){const t=Math.round(this.r);const e=Math.round(this.g);const r=Math.round(this.b);return`rgba(${t}, ${e}, ${r}, ${this.roundA})`}toPercentageRgb(){const t=e=>`${Math.round(ai(e,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=e=>Math.round(ai(e,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(this.a===0){return"transparent"}if(this.a<1){return false}const t=`#${cI(this.r,this.g,this.b,false)}`;for(const e of Object.keys(vm)){if(vm[e]===t){return e}}return false}toString(t){const e=Boolean(t);t=t||this.format;const r=this.a<1&&this.a>=0;const o=!e&&r&&t&&(t.startsWith("hex")||t==="name");if(o){if(t==="name"&&this.a===0){return this.toName()}return this.toRgbString()}switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":return this.toHexString();case"hex3":return this.toHexString(true);case"hex4":return this.toHex8String(true);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName();default:return this.toHexString()}}clone(){return new Gr(this.toString())}}});var pu,Bct,IW;var DW=d(()=>{pu=y(require("styled-components"));Bct=pu.default.div`
  position: absolute;
  width: ${i=>i.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${i=>i.direction==="bottom"?pu.css`
          bottom: 100%;
        `:pu.css`
          top: 100%;
        `}
  left: ${i=>i.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${i=>i.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${i=>i.direction==="bottom"?pu.css`
            transform: translate(-50%, 50%) rotate(45deg);
          `:pu.css`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${i=>i.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`;IW=Bct});var xv,gI,Pct,Mct,Lct,vv;var EW=d(()=>{xv=y(require("react"));gI=y(require("styled-components"));et();Pct=gI.default.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`;Mct=(0,gI.default)(B.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${i=>i.theme.colorPicker.inputBorderColor};
  }
`;Lct=({value:i,label:t,onChange:e})=>xv.default.createElement(Pct,null,xv.default.createElement(B.Input.Label,{label:t}),xv.default.createElement(Mct,{min:0,max:255,value:i,onChange:e}));vv=Lct});var Cv,bI,zct,Uct,Nct,FW;var RW=d(()=>{Cv=y(require("react"));bI=y(require("styled-components"));et();zct=bI.default.div`
  text-align: left;
  width: 62px;
`;Uct=(0,bI.default)(B.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${i=>i.theme.colorPicker.inputBorderColor};
  }
`;Nct=({value:i,label:t,onChange:e})=>Cv.default.createElement(zct,null,Cv.default.createElement(B.Input.Label,{label:t}),Cv.default.createElement(Uct,{value:i.toUpperCase(),onChange:e}));FW=Nct});var OW,hu;var Sv=d(()=>{OW=y(require("styled-components"));Kt();hu=OW.default.div.attrs(i=>({style:{left:i.position[0]||`${0}px`,top:i.position[1]||`${0}px`}}))`
  &&& {
    position: absolute;
    height: ${i=>i.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${i=>i.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${i=>i.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;hu.defaultProps={theme:Nr}});var Vr,AW,BW,Hct,Wct,Cm;var wv=d(()=>{Vr=y(require("react"));AW=y($u());BW=y(require("styled-components"));et();H();Hct=BW.default.div`
  position: relative;
  height: 14px;
  width: 100%;
`;Wct=i=>{return t=>{i.forEach(e=>{if(typeof e==="function"){e(t)}else if(e!=null){e.current=t}})}};Cm=(0,Vr.forwardRef)(({surface:i,onChange:t,className:e,children:r},o)=>{const n=(0,Vr.useRef)(null);const s=(0,Vr.useRef)(null);const{config:a}=I();const[l,c]=(0,Vr.useState)(false);const u=g=>{const _=a.measurements.color.colorPicker.thumb.size/2;const x=a.measurements.color.colorPicker.thumb.size;let b=0;let w=0;b=g.clientX;w=g.clientY;const{top:T,left:D,width:O,height:k}=n.current.getBoundingClientRect();let E=b-D-_;let J=w-T-_;E=Math.max(0,Math.min(O-x,E));J=Math.max(0,Math.min(k-x,J));if(t){t([E,J])}};const m=g=>{c(true);u(g)};const p=(0,Vr.useCallback)((0,AW.default)(g=>{if(l){u(g)}},10),[l]);const h=()=>{if(l){c(false)}};return Vr.default.createElement(Hct,{ref:Wct([n,o]),className:e},Vr.default.createElement(B.DraggableCore,{nodeRef:s,onStart:m,onDrag:p,onStop:h},Vr.default.createElement("div",{ref:s},i)),r)})});var PW,Gct,fu;var Tv=d(()=>{PW=require("styled-components");Gct=PW.css`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`;fu=Gct});var Gn,MW,Vct,LW;var zW=d(()=>{Gn=y(require("react"));MW=y(require("styled-components"));H();Sv();wv();Tv();Vct=MW.default.div`
  ${fu}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`;LW=({hue:i,onChange:t})=>{const[e,r]=(0,Gn.useState)(0);const o=(0,Gn.useRef)(null);const{config:n}=I();const s=a=>{if(o.current){const[l]=a;const{offsetWidth:c}=o.current;const u=c-n.measurements.color.colorPicker.thumb.size;const m=l*c/u;const p=Math.max(0,Math.min(360,m/c*360));t(p);r(l)}};(0,Gn.useEffect)(()=>{if(o.current){const{offsetWidth:a}=o.current;let l=0;const c=a-n.measurements.color.colorPicker.thumb.size;l=i*a/360;r(l*c/a)}},[i]);return Gn.default.createElement(Cm,{surface:Gn.default.createElement(Vct,null),ref:o,onChange:s},Gn.default.createElement(hu,{position:[e,0]}))}});var Ko,yI,jct,$ct,UW;var NW=d(()=>{Ko=y(require("react"));yI=y(require("styled-components"));H();Sv();wv();Tv();jct=yI.default.div.attrs(i=>({style:{background:`linear-gradient(to left, ${i.transparentColor} 0%, ${i.opaqueColor} 100%)`}}))`
  ${fu}
  z-index: 1;
`;$ct=yI.default.div.attrs(i=>({style:{backgroundImage:`url(${i.url})`}}))`
  ${fu}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`;UW=({color:i,opaqueColor:t,transparentColor:e,onChange:r})=>{const{config:o}=I();const[n,s]=(0,Ko.useState)(0);const a=(0,Ko.useRef)(null);const l=o.assetProvider.getPath("controls","/tiled-background.png");const c=u=>{if(a.current){const{offsetWidth:m}=a.current;const[p]=u;const h=m-o.measurements.color.colorPicker.thumb.size;const g=p*m/h;const _=(m-g)/m;const x=Math.round((_+Number.EPSILON)*100)/100;const b=Math.min(1,Math.max(0,x));r(b);s(p)}};(0,Ko.useEffect)(()=>{if(a.current){const{offsetWidth:u}=a.current;let m=0;const p=u-o.measurements.color.colorPicker.thumb.size;m=(1-i.toHsv().a)*u;s(m*p/u)}},[i.toString()]);return Ko.default.createElement(Cm,{ref:a,surface:Ko.default.createElement(jct,{opaqueColor:t,transparentColor:e}),onChange:c},Ko.default.createElement($ct,{url:l}),Ko.default.createElement(hu,{position:[n,0]}))}});var Vn,_I,Kct,Xct,HW;var WW=d(()=>{Vn=y(require("react"));_I=y(require("styled-components"));H();Sv();wv();Tv();Kct=_I.default.div.attrs(i=>({style:{backgroundColor:`hsl(${i.hue}, 100%, 50%)`}}))`
  ${fu}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${i=>i.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`;Xct=(0,_I.default)(Cm)`
  height: ${i=>i.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`;HW=({color:i,hue:t,onChange:e})=>{const[r,o]=(0,Vn.useState)([0,0]);const n=(0,Vn.useRef)(null);const{config:s}=I();(0,Vn.useEffect)(()=>{const{s:l,v:c}=i.toHsv();if(n.current){const{offsetWidth:u,offsetHeight:m}=n.current;const p=u-s.measurements.color.colorPicker.thumb.size;const h=m-s.measurements.color.colorPicker.thumb.size;const g=l*u;const _=(1-c)*m;o([g*p/u,_*h/m])}},[i.toString()]);const a=l=>{if(n.current){const[c,u]=l;const{offsetHeight:m,offsetWidth:p}=n.current;const h=p-s.measurements.color.colorPicker.thumb.size;const g=m-s.measurements.color.colorPicker.thumb.size;const _=c*p/h;const x=u*m/g;const b=Math.min(1,Math.max(0,_/p));const w=Math.min(1,Math.max(0,(m-x)/m));e(b,w);o([c,u])}};return Vn.default.createElement(Xct,{ref:n,surface:Vn.default.createElement(Kct,{hue:t}),onChange:a},Vn.default.createElement(hu,{position:r}))}});var ti,jn,qct,GW,Yct,Jct,Zct,Qct,af;var VW=d(()=>{ti=y(require("react"));jn=y(require("styled-components"));et();Kt();fI();DW();EW();RW();zW();NW();WW();qct=jn.default.div`
  position: absolute;
  left: ${i=>i.leftOffset}px;
  top: ${i=>i.topOffset}px;
  z-index: ${i=>i.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${i=>i.show&&jn.css`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`;GW=jn.default.div`
  &&& {
    position: absolute;
    ${i=>i.direction==="top"&&jn.css`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${i=>i.theme.colorPicker.listShadow};
    background: ${i=>i.theme.colorPicker.listBackground};
    border-radius: ${i=>i.theme.shape.radiusMedium}px;
    width: ${i=>i.theme.measurements.color.colorPicker.width}px;
    height: ${i=>i.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`;Yct=(0,jn.default)(LW)`
  margin-top: 8px;
`;Jct=(0,jn.default)(UW)`
  margin-top: 8px;
`;Zct=jn.default.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`;Qct=jn.default.div`
  display: flex;
`;af=class extends ti.default.Component{constructor(t){super(t);this.node=ti.default.createRef();this.checkId=(t,e,r)=>{let o=t;let n=0;while(o.parentElement&&n<r){o=o.parentElement;n+=1;if(o.id===e){return true}}return false};this.handleOutsideClick=t=>{var s;const{onRequestClose:e,onAddSnapshot:r,show:o}=this.props;const{color:n}=this.state;if(o){if((s=this.node.current)==null?void 0:s.contains(t.target)){return}this.setState({hexInputValue:n.toHexString()});if(e){e()}if(r){r()}}};this.onChange=t=>{const{onChange:e}=this.props;e({color:t.toRgbArray(),colorString:t.toRgbString()})};this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const e=new Gr(t);this.onChange(e);this.setState({color:e,hue:e.toHsl().h})}this.setState({hexInputValue:t})};this.onAlphaChange=t=>{const{color:e}=this.state;const r=e.setAlpha(t);this.onChange(r);this.setState({color:r,hexInputValue:r.toHexString()})};this.onHueChange=t=>{const{color:e}=this.state;const{s:r,v:o,a:n}=e.toHsv();const s=new Gr({h:t,s:r,v:o,a:n});this.onChange(s);this.setState({color:s,hexInputValue:s.toHexString(),hue:t})};this.onSaturationBrightnessChange=(t,e)=>{const{color:r,hue:o}=this.state;const{a:n}=r.toHsv();const s=new Gr({h:o,s:t,v:e,a:n});this.onChange(s);this.setState({color:s,hexInputValue:s.toHexString()})};this.onInputChange=t=>e=>{const{color:r}=this.state;if(e.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!e.trim()){const o=r.toRgb();o[t]=parseInt(e,10)||0;const n=new Gr(o);this.onChange(n);this.setState({color:n,hexInputValue:n.toHexString(),hue:n.toHsl().h})}};const{color:e}=this.props;const r=new Gr(e);this.state={color:r,hue:r.toHsl().h,hexInputValue:r.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,false);document.addEventListener("touchstart",this.handleOutsideClick,false);document.addEventListener("keydown",this.handleOutsideClick,false)}componentDidUpdate(t){const{color:e,show:r}=this.props;if(r&&!t.show){const o=new Gr(e);this.setState({color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,false);document.removeEventListener("touchstart",this.handleOutsideClick,false);document.removeEventListener("keydown",this.handleOutsideClick,false)}render(){const{show:t,showArrow:e,direction:r,arrowOffset:o,topOffset:n,leftOffset:s,labelHex:a,labelR:l,labelG:c,labelB:u,labelSliderHue:m,labelSliderOpacity:p}=this.props;const{color:h,hexInputValue:g,hue:_}=this.state;const{r:x,g:b,b:w}=h.toRgb();const T=h.clone().setAlpha(1).toRgbString();const D=h.clone().setAlpha(0).toRgbString();return ti.default.createElement("div",{ref:this.node},ti.default.createElement(qct,{show:t,direction:r,leftOffset:s,topOffset:n},ti.default.createElement(GW,{direction:r},e&&ti.default.createElement(IW,{direction:r,arrowOffset:o}),ti.default.createElement(HW,{color:h,hue:_,onChange:this.onSaturationBrightnessChange}),ti.default.createElement(B.Spacer,{count:2}),ti.default.createElement(B.Input.Label,{label:m}),ti.default.createElement(Yct,{hue:_,onChange:this.onHueChange}),ti.default.createElement(B.Spacer,{count:2}),ti.default.createElement(B.Input.Label,{label:p}),ti.default.createElement(Jct,{color:h,opaqueColor:T,transparentColor:D,onChange:this.onAlphaChange}),ti.default.createElement(Zct,null,ti.default.createElement(FW,{value:g,label:a,onChange:this.onHexValueChange}),ti.default.createElement(Qct,null,ti.default.createElement(vv,{value:x,label:l,onChange:this.onInputChange("r")}),ti.default.createElement(vv,{value:b,label:c,onChange:this.onInputChange("g")}),ti.default.createElement(vv,{value:w,label:u,onChange:this.onInputChange("b")}))))))}};af.defaultProps={direction:"bottom",showArrow:true};GW.defaultProps={theme:Nr}});var jW=d(()=>{fI();VW()});var Sm,$W,tut,xI,KW;var XW=d(()=>{Sm=y(require("react"));wt();A();$W=y(require("styled-components"));jW();Kt();z();tut=$W.default.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`;xI=class extends Sm.default.Component{constructor(t){super(t);this.containerRef=null;this.onClick=t=>e=>{const{onAddSnapshot:r,config:o,onChange:n,colorPickerDirection:s,rect:a}=this.props;const{activeIdentifier:l,showColorPicker:c,colorList:u}=this.state;const m=u.find(p=>p.identifier===t);if(l===m.identifier&&!c){const{left:p,width:h,top:g,height:_}=e.currentTarget.getBoundingClientRect();const{left:x,top:b}=this.containerRef.current.getBoundingClientRect();const{colorPicker:w}=o.measurements.color;const T=w.arrow.width/2;let D=p-x+h/2-2;let O=s==="bottom"?g-b+_+T:g-b-T;let k=-24;const E=w.width-w.arrow.width-12;if(D>E){k+=D-E;D-=k}let J=true;if(s==="bottom"&&a){const tt=a.height;const mt=a.top;const bt=g-mt;const gt=tt-(bt+_);const pt=o.measurements.color.colorPicker.height+T;if(gt<pt){O=gt-pt}if(bt+O<bt+_/2){O+=T;J=false}}this.setState({showColorPicker:true,showColorPickerArrow:J,arrowOffset:D,topOffset:O,leftOffset:k})}else if(c){this.setState({showColorPicker:false})}else{n(m.color);this.setState({activeIdentifier:t});if(r){r()}}};this.onChange=({color:t,colorString:e})=>{const{onChange:r}=this.props;const{activeIdentifier:o,colorList:n}=this.state;const s=n.findIndex(a=>a.identifier===o);if(s!==-1){const a=[...n];a[s]={identifier:n[s].identifier,colorString:e,color:t};this.setState({colorList:a})}r(t)};this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})};this.closeColorPicker=()=>{this.setState({showColorPicker:false})};this.getColorPicker=()=>{const{activeColor:t,labelsColor:e,colorPickerDirection:r,onAddSnapshot:o}=this.props;const{showColorPicker:n,showColorPickerArrow:s,arrowOffset:a,leftOffset:l,topOffset:c}=this.state;return Sm.default.createElement(af,{color:lt(t),show:n,showArrow:s,direction:r,arrowOffset:a,leftOffset:l,topOffset:c,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:o})};const{colors:e}=this.props;this.containerRef=Sm.default.createRef();this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:false,showColorPickerArrow:false,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:r,colorList:o}){if(t!==r||!t){const n=zn(lt(e));const s=o.find(({colorString:a})=>a===n);return{activeSprite:t,activeIdentifier:s?s.identifier:""}}return null}render(){const{tool:t,isDisabled:e,custom:r,config:o,className:n}=this.props;const{activeIdentifier:s,colorList:a}=this.state;const l=r.getColorItem();const c=o.assetProvider.getPath("controls","/tiled-background.png");const u=a.map(m=>{if(!l){return null}return Sm.default.createElement(l,{tool:t,key:`${m.colorString}-item-${m.identifier}`,isActive:m.identifier===s,isDisabled:e,onClick:this.onClick(m.identifier),color:m.colorString,label:m.identifier,tiledBackgroundUrl:c})});return Sm.default.createElement(tut,{className:n,"data-test":U.ColorList,ref:this.containerRef},u,this.getColorPicker())}};xI.defaultProps={colorPickerDirection:"bottom",isDisabled:false};KW=it("config","custom")(S(xI))});var vI,Ie;var qW=d(()=>{vI=y(require("react"));Cr();XW();Ie=i=>vI.default.createElement(Fe.Consumer,null,({rect:t})=>vI.default.createElement(KW,{...i,rect:t}))});var lf,CI,eut,iut,YW,JW;var ZW=d(()=>{lf=y(require("react"));A();CI=y(require("styled-components"));Kt();z();je();eut=(0,CI.default)(dt.Controls.Container)`
  cursor: none;
`;iut=CI.default.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${i=>i.theme.foreground};
`;YW=class extends lf.default.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDrawing:false};this.containerElementRef=null;this.getCursorCoordinates=t=>{let e=0;let r=0;if(t.type.indexOf("touch")!==-1){const a=t;if(!a.touches.length){return{...this.INITIAL_POSITION,height:0,width:0}}e=a.touches[0].clientX;r=a.touches[0].clientY}else{const a=t;e=a.clientX;r=a.clientY}const o=this.containerElementRef.current.getBoundingClientRect();const n=e-o.left;const s=r-o.top;return{x:n,y:s,height:o.height,width:o.width}};this.draw=t=>{t.preventDefault();t.stopPropagation();this.touchDraw(t)};this.touchDraw=t=>{const{x:e,y:r}=this.getCursorCoordinates(t);if(e!==void 0&&r!==void 0){this.setState({x:e,y:r});if(this.state.isDrawing){this.brushTool.strokePosition({x:e,y:r})}}};this.touchStart=()=>{this.brushTool.clickableCanvas(false);this.setState({isDrawing:true});this.brushTool.beginStroke()};this.start=t=>{if(t.button===0){this.touchStart()}else{this.stop(t)}};this.stop=t=>{if(this.state.isDrawing){t.preventDefault();t.stopPropagation();this.setState({isDrawing:false});this.brushTool.endStroke();this.brushTool.clickableCanvas(true)}};this.setInitialPosition=()=>{this.setState({...this.INITIAL_POSITION})};this.mouseOut=t=>{const{config:e}=this.props;t.preventDefault();t.stopPropagation();const r=this.brushTool.sizeOnScreenSpace/2;const{x:o,y:n,height:s,width:a}=this.getCursorCoordinates(t);if(o&&n){if(o<0||n<0||o>a-r||n>s-r||n<e.measurements.mainCanvasActionBar.height){this.setInitialPosition()}}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:r}=this.state;if(e&&r){this.setInitialPosition()}};this.getCursor=()=>{const{x:t,y:e}=this.state;if(t&&e){const r=zn(this.brushTool.color);const o=`${this.brushTool.sizeOnScreenSpace}px`;const n={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:r,height:o,width:o};return lf.default.createElement(iut,{style:n,"data-test":U.Cursor})}return null};this.containerElementRef=lf.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:false})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get brushTool(){return this.props.brushTool}render(){return lf.default.createElement(eut,{ref:this.containerElementRef,"data-test":U.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}};JW=it("brushTool","config")(S(YW))});var mo;var kv=d(()=>{mo=(i,t)=>{return i!==void 0&&t!==void 0&&!Number.isNaN(i)&&!Number.isNaN(t)}});var po,QW,SI,rut,tG,eG;var iG=d(()=>{po=y(require("react"));A();QW=y(require("styled-components"));et();Kt();je();kv();SI=(0,QW.default)(dt.Controls.Knob)`
  margin-top: -${i=>i.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${i=>i.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`;({Container:rut}=dt.Controls);tG=class extends po.default.Component{constructor(t){super(t);this.start=(t,{x:e,y:r})=>{if(mo(e,r)){this.focusTool.setStart({x:e,y:r})}};this.end=(t,{x:e,y:r})=>{if(mo(e,r)){this.focusTool.setEnd({x:e,y:r})}};this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.start(t,e)};this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.start(t,e);this.focusTool.clickableCanvas(true)};this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(false);this.end(t,e)};this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition);this.end(t,e);this.focusTool.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},r)=>{if(mo(t,e)){this.focusTool.toolSnapshot(r)}};this.getLine=()=>{const{height:t,width:e}=this.props.canvas.canvasSize;const r=this.focusTool.startOnPreview;const o=this.focusTool.endOnPreview;return po.default.createElement("svg",{focusable:"false",height:t,width:e},po.default.createElement("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))};this.startRef=po.default.createRef();this.endRef=po.default.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return po.default.createElement(rut,null,po.default.createElement(dt.Controls.Line,null,this.getLine()),po.default.createElement(B.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},po.default.createElement(SI,{ref:this.startRef})),po.default.createElement(B.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},po.default.createElement(SI,{ref:this.endRef})))}};SI.defaultProps={theme:Nr};eG=it("canvas","focusTool")(S(tG))});var ta,cf;var rG=d(()=>{ta=y(require("react"));A();et();Kt();z();je();kv();cf=class extends ta.default.Component{constructor(t){super(t);this.getKnobPosition=()=>{const{focusTool:t}=this.props;const{origin:e,size:r}=t;const o=r/2;const n=Math.PI/2+t.rotation;return{x:e.x+o*Math.cos(n),y:e.y+o*Math.sin(n)}};this.onArea=(t,{x:e,y:r})=>{const{editor:o}=this.props;const n=o.configStore.measurements.canvasControls.knob.size;if(mo(e,r)){const{canvas:s,focusTool:a}=this.props;const{size:l,mirroredAreaWidth:c}=a;const u=e+c/2;const m=r+l/2;const p=new F(this.getKnobPosition());const h=new F({x:e,y:r});const g=h.subtract(new F(this.areaPosition));const _=p.add(g);if(_.x>n&&_.x<s.canvasSize.width-n){if(_.y>n&&_.y<s.canvasSize.height-n){a.setOrigin({x:u,y:m})}}}};this.onKnob=(t,{x:e,y:r})=>{const{focusTool:o}=this.props;if(mo(e,r)){o.clickableCanvas(false);const n=new F(o.origin);const s=new F(e,r);const a=n.subtract(s);const l=a.magnitude;const c=Math.PI/2+Math.atan2(a.y,a.x);o.setSize(l*2);o.setRotation(c)}};this.onAreaDragStop=(t,e)=>{const{focusTool:r}=this.props;this.addSnapshot(e,r.locale.history.focusPosition);this.onArea(t,e);r.clickableCanvas(true)};this.onKnobDragStop=(t,e)=>{const{focusTool:r}=this.props;this.addSnapshot(e,r.locale.history.focusSize);this.onKnob(t,e);r.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},r)=>{const{focusTool:o}=this.props;if(mo(t,e)){o.toolSnapshot(r)}};this.knobRef=ta.default.createRef();this.areaRef=ta.default.createRef()}get areaPosition(){const{focusTool:t}=this.props;const{origin:e,size:r,mirroredAreaWidth:o}=t;return{x:e.x-o/2,y:e.y-r/2}}render(){const{x:t,y:e}=this.areaPosition;const{focusTool:r}=this.props;return ta.default.createElement(dt.Controls.Container,null,ta.default.createElement(B.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},ta.default.createElement(dt.Controls.Knob,{ref:this.knobRef})),ta.default.createElement(B.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:r.rotation},ta.default.createElement(dt.Controls.Area,{ref:this.areaRef,"data-test":U.Focus,height:r.size,width:r.mirroredAreaWidth})))}};cf=f([it("focusTool","canvas","editor"),S],cf)});var ea,uf;var oG=d(()=>{ea=y(require("react"));A();et();Kt();z();je();kv();uf=class extends ea.default.Component{constructor(t){super(t);this.state={knobAngle:2.35};this.onCircle=(t,{x:e,y:r})=>{if(mo(e,r)){const{focusTool:o}=this.props;o.setCenter({x:e+o.radius,y:r+o.radius})}};this.onKnob=(t,{x:e,y:r})=>{if(mo(e,r)){const{focusTool:o}=this.props;const n=new F(e,r);const s=new F(o.center.x,o.center.y);const a=s.subtract(n);const l=a.magnitude;const c=-Math.atan2(a.y,a.x);this.setState({knobAngle:c});o.setRadius(l)}};this.onCircleDragStart=(t,e)=>{const{focusTool:r}=this.props;r.clickableCanvas(false);this.onCircle(t,e)};this.onCircleDragStop=(t,e)=>{const{focusTool:r}=this.props;this.addSnapshot(e,r.locale.history.focusPosition);this.onCircle(t,e);r.clickableCanvas(true)};this.onKnobDragStart=(t,e)=>{const{focusTool:r}=this.props;r.clickableCanvas(false);this.onKnob(t,e)};this.onKnobDragStop=(t,e)=>{const{focusTool:r}=this.props;this.addSnapshot(e,r.locale.history.focusSize);this.onKnob(t,e);r.clickableCanvas(true)};this.addSnapshot=({x:t,y:e},r)=>{const{focusTool:o}=this.props;if(mo(t,e)){o.toolSnapshot(r)}};this.knobRef=ea.default.createRef();this.circleRef=ea.default.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:t}=this.props;const{knobAngle:e}=this.state;const{center:r,radius:o}=t;const n={x:r.x-o,y:r.y-o};const s=Math.PI-e;const a={x:r.x+o*Math.cos(s),y:r.y+o*Math.sin(s)};return ea.default.createElement(dt.Controls.Container,null,ea.default.createElement(B.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:a},ea.default.createElement(dt.Controls.Knob,{ref:this.knobRef})),ea.default.createElement(B.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:n},ea.default.createElement(dt.Controls.Circle,{ref:this.circleRef,"data-test":U.Focus,radius:o})))}};uf=f([it("focusTool","canvas"),S],uf)});var nG,sG;var aG=d(()=>{nG=y(require("react"));A();R();H();iG();rG();oG();sG=S(()=>{const{focusTool:i}=I();const{state:t}=i;const e=()=>{switch(t.identifier){case"linear":return eG;case"radial":return uf;case"mirrored":return cf;default:return null}};const r=e();return i.isOptionSelected&&r?nG.default.createElement(r,null):null})});var lG,cG;var uG=d(()=>{lG=y(require("react"));H();cG=({customButtonKey:i,onClick:t,label:e,icon:r,disabled:o})=>{const{custom:n}=I();const s=n.getButton(i);if(!s){return null}return lG.default.createElement(s,{onClick:t,label:e,ariaLabel:e,icon:r,isDisabled:o})}});var dG=d(()=>{uG()});var wI,wm;var mG=d(()=>{wI=y(require("react"));z();je();dG();wm=({availableKeys:i,actions:t})=>{return wI.default.createElement(dt.Bar.ButtonGroup,{onClick:QO},i.map(e=>{const r=t[e];if(r){return wI.default.createElement(cG,{key:e,...r})}return null}))}});var Iv=d(()=>{mG()});var Tm,out,pG;var hG=d(()=>{Tm=y(require("react"));A();R();Se();Iv();out=({sprite:i,stickerTool:t})=>{const e=t.locale.canvasActions;const r={["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:Tm.default.createElement(Gt.bringToFront,null),disabled:i.isOnTop},["flip"]:{customButtonKey:"canvasActionFlip",onClick:t.flipHorizontally,label:e.buttonFlipHorizontal,icon:Tm.default.createElement(Gt.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:e.buttonDuplicate,icon:Tm.default.createElement(Gt.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:e.buttonDelete,icon:Tm.default.createElement(Gt.delete,null)}};if(!t.isStickerSelected){return null}return Tm.default.createElement(wm,{availableKeys:t.config.canvasActions,actions:r})};pG=it("sprite","stickerTool")(S(out))});var km,nut,fG;var gG=d(()=>{km=y(require("react"));A();R();Se();Iv();nut=({textTool:i,sprite:t})=>{const e=i.locale.canvasActions;const r={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>i.setEditMode(true),label:e.buttonEdit,icon:km.default.createElement(Gt.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:i.bringToFront,label:e.buttonBringToFront,icon:km.default.createElement(Gt.bringToFront,null),disabled:t.isOnTop},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:i.duplicate,label:e.buttonDuplicate,icon:km.default.createElement(Gt.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:i.delete,label:e.buttonDelete,icon:km.default.createElement(Gt.delete,null)}};if(!t.isSpriteText){return null}return km.default.createElement(wm,{availableKeys:i.config.canvasActions,actions:r})};fG=it("textTool","sprite")(S(nut))});var gu,sut,bG;var yG=d(()=>{gu=y(require("react"));A();R();Se();Iv();sut=({sprite:i,textDesignTool:t})=>{const e=t.locale.canvasActions;const r={["edit"]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(true),label:e.buttonEdit,icon:gu.default.createElement(Gt.edit,null)},["bringtofront"]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:e.buttonBringToFront,icon:gu.default.createElement(Gt.bringToFront,null),disabled:i.isOnTop},["invert"]:{customButtonKey:"canvasActionInvert",onClick:t.invertBackground,label:e.buttonInvert,icon:gu.default.createElement(Gt.flipHorizontal,null)},["duplicate"]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:e.buttonDuplicate,icon:gu.default.createElement(Gt.duplicate,null)},["delete"]:{customButtonKey:"canvasActionDelete",onClick:()=>t.delete(),label:e.buttonDelete,icon:gu.default.createElement(Gt.delete,null)}};if(!t.isTextDesignSelected){return null}return gu.default.createElement(wm,{availableKeys:t.config.canvasActions,actions:r})};bG=it("sprite","textDesignTool")(S(sut))});var bu,df;var _G=d(()=>{bu=y(require("react"));A();R();z();je();hG();gG();yG();df=class extends bu.default.Component{constructor(t){super(t);this.actionsRef=null;this.spriteControlPosition=()=>{const{config:t,sprite:e,canvas:{canvasSize:r}}=this.props;const{controlPadding:o,controlOffset:n}=t.measurements.canvasControls.sprite;const{x:s,y:a}=e.position;const{height:l,width:c}=e.currentSprite.size;const u=e.rotationWRTOutputRotation;const m=this.actionsRef.current;let p=new F(0,0);if(m){const _=m.getBoundingClientRect();p=new F(_.width/2+n,_.height+n)}const h=Math.abs(c*Math.sin(u))+Math.abs(l*Math.cos(u));const g=new F(s,a-h/2-o-n).clamp(p,new F(r.width,r.height).subtract(p));return{left:g.x,top:g.y}};this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case"text":return bu.default.createElement(fG,null);case"textdesign":return bu.default.createElement(bG,null);case"sticker":return bu.default.createElement(pG,null);default:return null}};this.actionsRef=bu.default.createRef();this.state={isMounted:false}}componentDidMount(){this.setState({isMounted:true})}render(){const{sprite:t}=this.props;const{isMounted:e}=this.state;const r=!t.isDragMode&&!t.isEditMode;const o=this.spriteControlPosition();return bu.default.createElement(dt.Controls.SpriteActionsWrapper,{"data-test":U.SpriteActions,ref:this.actionsRef,show:r&&e,style:{...o}},this.getSpriteControls())}};df=f([it("sprite","config","editor","canvas"),S],df)});var Bi,Dv,Ev,TI,kI,xG;var vG=d(()=>{Bi=y(require("react"));A();et();Kt();H();z();je();({Corner:Dv}=dt.Controls);({Draggable:Ev}=B);TI=new F(0,0);kI=new F(0,0);xG=S(()=>{const i=(0,Bi.useRef)(null);const t=(0,Bi.useRef)(null);const e=(0,Bi.useRef)(null);const r=(0,Bi.useRef)(null);const{config:o,sprite:n}=I();const{leftTopPosition:s,leftBottomPosition:a,rightTopPosition:l,rightBottomPosition:c}=n;const{borderWidth:u}=o.measurements.canvasControls.corner;const m=({clientX:_,clientY:x})=>{if(_!==void 0&&x!==void 0){n.onCornerDrag(kI.subtract(TI.subtract(new F(_,x))))}};const p=_=>{switch(_){case"leftTop":return s;case"leftBottom":return a;case"rightTop":return l;case"rightBottom":return c;default:return s}};const h=(_,x)=>{const{clientX:b,clientY:w}=_;TI=new F(b,w);kI=new F(p(x));n.clickableCanvas(false);n.setDragMode(true)};const g=()=>{n.clickableCanvas(true);n.setDragMode(false);n.spriteSnapshot("size");TI=new F(0,0);kI=new F(0,0)};return Bi.default.createElement(Bi.default.Fragment,null,Bi.default.createElement(Ev,{nodeRef:i,onStop:g,onDrag:m,onStart:_=>h(_,"leftTop")},Bi.default.createElement(Dv,{ref:i,"data-test":U.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:u})),Bi.default.createElement(Ev,{nodeRef:e,onStop:g,onDrag:m,onStart:_=>h(_,"leftBottom")},Bi.default.createElement(Dv,{ref:e,"data-test":U.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:u})),Bi.default.createElement(Ev,{nodeRef:t,onStop:g,onDrag:m,onStart:_=>h(_,"rightTop")},Bi.default.createElement(Dv,{ref:t,"data-test":U.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:u})),Bi.default.createElement(Ev,{nodeRef:r,onStop:g,onDrag:m,onStart:_=>h(_,"rightBottom")},Bi.default.createElement(Dv,{ref:r,"data-test":U.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:u})))})});var $n,EI,aut,lut,II,DI,cut,CG;var SG=d(()=>{$n=y(require("react"));A();EI=y(require("styled-components"));et();Kt();Ji();aut=EI.default.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;lut=EI.default.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;II=new F(0,0);DI=new F(0,0);cut=({sprite:i,config:t})=>{const e=(0,$n.useRef)(null);const r=(0,$n.useRef)(null);const o=i.leftMidPosition;const n=i.rightMidPosition;const s=t.assetProvider.getPath("controls","/arrow-left.png");const a=t.assetProvider.getPath("controls","/arrow-right.png");const l=(m,p)=>{i.setDragMode(true);i.clickableCanvas(false);const{clientX:h,clientY:g}=m;II=new F(h,g);DI=new F(p==="left"?o:n)};const c=()=>{i.clickableCanvas(true);i.setDragMode(false);i.addSnapshot("edit",i.textDesignLocale.padding);II=new F(0,0);DI=new F(0,0)};const u=({clientX:m,clientY:p})=>{if(m!==void 0&&p!==void 0){const h=DI.subtract(II.subtract(new F(m,p)));i.onPaddingDrag(h)}};return $n.default.createElement($n.default.Fragment,null,$n.default.createElement(B.Draggable,{nodeRef:e,onStart:m=>l(m,"left"),onDrag:u,onStop:c},$n.default.createElement(aut,{ref:e,src:s})),$n.default.createElement(B.Draggable,{nodeRef:r,onStart:m=>l(m,"right"),onDrag:u,onStop:c},$n.default.createElement(lut,{ref:r,src:a})))};CG=it("sprite","config")(S(cut))});var mf,wG,TG,FI,RI,uut,kG;var IG=d(()=>{mf=y(require("react"));A();wG=y(require("styled-components"));et();Kt();z();je();TG=(0,wG.default)(dt.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${i=>i.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${i=>i.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;FI=new F(0,0);RI=new F(0,0);uut=({config:i,sprite:t,snapping:e})=>{const r=(0,mf.useRef)(null);const o=t.rightBottomHandlePosition;const n=t.leftBottomHandlePosition;const s={x:(o.x+n.x)/2,y:(o.y+n.y)/2};const a=({clientX:p,clientY:h})=>{FI=new F(p,h);RI=new F(s);t.setDragMode(true);t.clickableCanvas(false)};const l=()=>{t.clickableCanvas(true);t.setDragMode(false);t.spriteSnapshot("rotation");e.hideRotationGuides();FI=new F(0,0);RI=new F(0,0)};const c=({clientX:p,clientY:h})=>{if(p!==void 0&&h!==void 0){const g=RI.subtract(FI.subtract(new F(p,h)));const _=t.position;const x=new F(_.x,_.y);const b=g.subtract(x);const w=Math.atan2(b.y,b.x)-Math.PI/2;const T=e.snapToRotation(w,b,t.currentRect);t.setRotation(T)}};const u=p=>{c(p)};const m=i.assetProvider.getPath("controls",`/${LF()?"rotate-windows":"rotate-osx"}.png`);return mf.default.createElement(B.Draggable,{nodeRef:r,onStart:a,onDrag:u,onStop:l},mf.default.createElement(TG,{ref:r,url:m}))};TG.defaultProps={theme:Nr};kG=it("sprite","snapping","config")(S(uut))});var Kn,Fv,DG,EG,FG,OI,AI,dut,RG;var OG=d(()=>{Kn=y(require("react"));A();Fv=y(require("styled-components"));et();Kt();Ji();je();DG=(0,Fv.default)(dt.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`;EG=(0,Fv.default)(DG)`
  left: -3px;
  top: calc(
    50% - ${i=>i.theme.measurements.canvasControls.width.size/2}px
  );
`;FG=(0,Fv.default)(DG)`
  right: -3px;
  top: calc(
    50% - ${i=>i.theme.measurements.canvasControls.width.size/2}px
  );
`;OI=new F(0,0);AI=new F(0,0);dut=({sprite:i,textTool:t})=>{const e=(0,Kn.useRef)(null);const r=(0,Kn.useRef)(null);const o=i.leftMidPadPosition;const n=i.rightMidPadPosition;const s=(c,u)=>{i.setDragMode(true);i.clickableCanvas(false);const{clientX:m,clientY:p}=c;OI=new F(m,p);AI=new F(u==="left"?o:n)};const a=()=>{i.clickableCanvas(true);i.setDragMode(false);i.addSnapshot("edit",i.textLocale.width);t.updateDefaultFontSize();OI=new F(0,0);AI=new F(0,0)};const l=({clientX:c,clientY:u})=>{if(c!==void 0&&u!==void 0){const m=AI.subtract(OI.subtract(new F(c,u)));i.onWidthDrag(m)}};return Kn.default.createElement(Kn.default.Fragment,null,Kn.default.createElement(B.Draggable,{nodeRef:e,onStart:c=>s(c,"left"),onDrag:l,onStop:a},Kn.default.createElement(EG,{ref:e})),Kn.default.createElement(B.Draggable,{nodeRef:r,onStart:c=>s(c,"right"),onDrag:l,onStop:a},Kn.default.createElement(FG,{ref:r})))};EG.defaultProps={theme:Nr};FG.defaultProps={theme:Nr};RG=it("sprite","textTool")(S(dut))});var ho,mut,Rv,BI,AG;var BG=d(()=>{ho=y(require("react"));A();et();Kt();H();z();je();_G();vG();SG();IG();OG();({Draggable:mut}=B);Rv=new F(0,0);BI=new F(0,0);AG=S(()=>{const i=(0,ho.useRef)();const{active:t,config:e,snapping:r,sprite:o}=I();const n=({clientX:b,clientY:w})=>{const T=BI.subtract(Rv.subtract(new F(b,w)));const{x:D,y:O}=r.snapToPosition({x:T.x,y:T.y},o.currentRect);o.setPosition({x:D,y:O})};const s=b=>{const{clientX:w,clientY:T}=b;Rv=new F(w,T);BI=new F(o.position);o.setDragMode(true);r.updateGuides()};const a=b=>{const{clientX:w,clientY:T}=b;const{x:D,y:O}=Rv;Rv=new F(0,0);BI=new F(0,0);o.setDragMode(false);if(D!==w&&O!==T){o.spriteSnapshot("position")}r.hidePositionGuides()};const l=b=>{b.preventDefault();b.stopPropagation();o.setEditMode(true)};const c=()=>{const b=t.tool;const w=o.tool;return o.isSpriteSelected&&b===w};if(!c()){return null}const{isSpriteText:u}=o;const m=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted;const{height:p,width:h}=o.size;const g=o.spritePosition;const _=o.rotationWRTOutputRotation;const{controlPadding:x}=e.measurements.canvasControls.sprite;return ho.default.createElement(dt.Controls.Container,null,ho.default.createElement(mut,{nodeRef:i,onStart:s,onDrag:n,onStop:a,rotation:_,position:g},ho.default.createElement(dt.Controls.Sprite,{ref:i,"data-test":U.Sprite,onDoubleClick:l,height:p,width:h},u&&ho.default.createElement(RG,null)||null,m&&ho.default.createElement(CG,null)||null,ho.default.createElement(xG,null),ho.default.createElement(dt.Controls.RotateHandle,{x:h/2+x/2},ho.default.createElement(kG,null)))),ho.default.createElement(df,null))})});var He,ia,Ov,put,pf,Tl,hut,fut,gut,but,yut,PG;var MG=d(()=>{He=y(require("react"));A();ia=y(require("styled-components"));et();z();qk();je();g1();({GridLine:Ov}=dt.Crop);put=dt.Crop.Mask;({Draggable:pf}=B);Tl=3;hut=(0,ia.default)(tc)`
  left: ${Tl}px;
  top: ${Tl}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`;fut=(0,ia.default)(tc)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return ia.css`
    left: ${e-t}px;
    top: ${Tl}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `});gut=(0,ia.default)(tc)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return ia.css`
    left: ${e-t}px;
    top: ${e-t}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `});but=(0,ia.default)(tc)(i=>{const{desktop:t}=i.theme.measurements.canvasControls.corner.touchable;const e=t/4-i.borderWidth;return ia.css`
    top: ${e-t}px;
    left: ${Tl}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `});yut=({transformTool:i})=>{const t=(0,He.useRef)(null);const e=(0,He.useRef)(null);const r=(0,He.useRef)(null);const o=(0,He.useRef)(null);const n=(0,He.useRef)(null);const{leftTopRespectFlip:s,leftBottomRespectFlip:a,rightTopRespectFlip:l,rightBottomRespectFlip:c}=i;const{height:u,width:m}=i.cropMaskSize;const{maxCropMaskSize:p,defaultCropMaskPosition:h}=i;const{isFlippedHorizontal:g,isFlippedVertical:_}=i;const x=p.width/2;const b=p.height/2;const w={...p,left:h.x,top:h.y};const T={height:u,width:m};const D=i.isDragMode?{transition:"unset"}:{};const O=ee=>{return g?x*2-ee:ee};const k=ee=>{return _?b*2-ee:ee};const E=(ee,Ft,Rt)=>{const Au=O(ee);const sg=k(Ft);switch(Le.getFlippedEdgeIndex(Rt,g,_)){case 0:i.onLeftTop({x:Au,y:sg});break;case 1:i.onLeftBottom({x:Au,y:sg});break;case 2:i.onRightTop({x:Au,y:sg});break;case 3:i.onRightBottom({x:Au,y:sg});break;default:break}};const J=(ee,Ft,Rt)=>{i.setDragMode(true);i.clickableCanvas(false);E(ee,Ft,Rt)};const tt=(ee,Ft,Rt)=>{E(ee,Ft,Rt)};const mt=(ee,Ft,Rt)=>{i.setDragMode(false);E(ee,Ft,Rt);i.clickableCanvas(true);i.trackChanges()};const bt=(ee,{x:Ft,y:Rt})=>{J(Ft,Rt,0)};const gt=(ee,{x:Ft,y:Rt})=>{tt(Ft,Rt,0)};const pt=(ee,{x:Ft,y:Rt})=>{mt(Ft,Rt,0)};const Zt=(ee,{x:Ft,y:Rt})=>{J(Ft,Rt,1)};const fi=(ee,{x:Ft,y:Rt})=>{tt(Ft,Rt,1)};const ei=(ee,{x:Ft,y:Rt})=>{mt(Ft,Rt,1)};const Kr=(ee,{x:Ft,y:Rt})=>{J(Ft,Rt,2)};const Ct=(ee,{x:Ft,y:Rt})=>{tt(Ft,Rt,2)};const he=(ee,{x:Ft,y:Rt})=>{mt(Ft,Rt,2)};const ne=(ee,{x:Ft,y:Rt})=>{J(Ft,Rt,3)};const te=(ee,{x:Ft,y:Rt})=>{tt(Ft,Rt,3)};const Dt=(ee,{x:Ft,y:Rt})=>{mt(Ft,Rt,3)};const se=(ee,Ft)=>{const Rt=O(ee+m/2)-m/2;const Au=k(Ft+u/2)-u/2;i.changePosition({x:Rt,y:Au})};const ci=(ee,{x:Ft,y:Rt})=>{i.setDragMode(true);i.clickableCanvas(false);se(Ft,Rt)};const Zo=(ee,{x:Ft,y:Rt})=>{se(Ft,Rt)};const Qo=(ee,{x:Ft,y:Rt})=>{i.setDragMode(false);se(Ft,Rt);i.clickableCanvas(true);i.trackChanges()};return He.default.createElement("div",{style:{...w,position:"absolute"}},He.default.createElement(pf,{nodeRef:n,bounds:"parent",position:s,onStart:ci,onDrag:Zo,onStop:Qo},He.default.createElement(put,{ref:n,style:{...T,...D}})),He.default.createElement(Ov,{style:{left:s.x+m/3,top:s.y,height:u,width:1,...D}}),He.default.createElement(Ov,{style:{left:s.x+m/3*2,top:s.y,height:u,width:1,...D}}),He.default.createElement(Ov,{style:{left:s.x,top:s.y+u/3,height:1,width:m,...D}}),He.default.createElement(Ov,{style:{left:s.x,top:s.y+u/3*2,height:1,width:m,...D}}),He.default.createElement(pf,{nodeRef:t,bounds:"parent",position:{...s},onStart:bt,onDrag:gt,onStop:pt},He.default.createElement(hut,{ref:t,"data-test":U.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:Tl,style:D})),He.default.createElement(pf,{nodeRef:r,bounds:"parent",position:a,onStart:Zt,onDrag:fi,onStop:ei},He.default.createElement(but,{ref:r,"data-test":U.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:Tl,style:D})),He.default.createElement(pf,{nodeRef:e,bounds:"parent",position:l,onStart:Kr,onDrag:Ct,onStop:he},He.default.createElement(fut,{ref:e,"data-test":U.CropTopRight,vertical:"top",horizontal:"right",borderWidth:Tl,style:D})),He.default.createElement(pf,{nodeRef:o,bounds:"parent",position:c,onStart:ne,onDrag:te,onStop:Dt},He.default.createElement(gut,{ref:o,"data-test":U.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:Tl,style:D})))};PG=it("transformTool")(S(yut))});var Xo,kl,LG,_ut,xut,vut,zG,UG;var NG=d(()=>{Xo=y(require("react"));A();kl=y(require("styled-components"));et();Se();z();LG=kl.default.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${i=>i.isVisible&&kl.css`
      display: inline-block;
    `}

  svg {
    color: ${i=>i.theme.foreground};
  }
`;_ut=kl.default.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`;xut=kl.default.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${i=>i.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${i=>i.isVisible&&kl.css`
      display: inline-block;
    `}
`;vut=kl.default.div`
  transform: translate(0, 0) !important;
`;zG=class extends Xo.default.Component{constructor(t){super(t);this.SLIDER_WIDTH=213;this.MAX_ROTATION=45;this.DEGREES_PER_PIXEL=this.MAX_ROTATION*2/this.SLIDER_WIDTH;this.drag=(t,{x:e})=>{const{flipHorizontally:r,flipVertically:o}=this.transformTool.rotateFlipState;if(r!==o){e*=-1}const n=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL;const s=Math.min(this.MAX_ROTATION,Math.max(n,this.MAX_ROTATION*-1));this.transformTool.setRotation(parseInt(`${s}`,10))};this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees);this.transformTool.trackChanges()};this.rotateRef=Xo.default.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:t,canvasWidth:e,transformTool:r,className:o}=this.props;const{flipHorizontally:n,flipVertically:s}=this.transformTool.rotateFlipState;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth;const l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth;const c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle;const u=n===s?c*-1:c;const m=n!==s?r.rotationInDegrees*-1:r.rotationInDegrees;return Xo.default.createElement(_ut,{"data-test":U.RotateSlider,className:o},Xo.default.createElement(B.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:true,disabled:!a},Xo.default.createElement(vut,{ref:this.rotateRef},Xo.default.createElement(LG,{isVisible:a},Xo.default.createElement(Gt.dots,{width:90,height:15,x:u})),Xo.default.createElement(xut,{isVisible:l},m,"\xB0"),Xo.default.createElement(LG,{isVisible:a},Xo.default.createElement(Gt.dots,{width:90,height:15,x:u})))))}};UG=it("transformTool","config")(S(zG))});var fo,gr,HG,Cut,WG,Sut,GG,wut,Tut,kut,Iut,Dut,VG,Eut,Fut,hf;var PI=d(()=>{fo=y(require("react"));A();gr=y(require("styled-components"));Cr();Se();z();NG();HG=gr.css`
  grid-column-start: span 2;
`;Cut=(0,gr.default)(UG)`
  ${i=>i.smallContainer&&HG}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${HG}
  }
`;WG=gr.css`
  grid-column-start: 1;
  grid-row-start: 2;
`;Sut=gr.default.div`
  display: flex;
  gap: 5px;
  ${i=>i.smallContainer&&WG}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${WG}
  }
`;GG=gr.css`
  justify-content: flex-end;
  grid-column-start: 2;
  grid-row-start: 2;
`;wut=gr.default.div`
  display: flex;
  gap: 5px;
  ${i=>i.smallContainer&&GG}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${GG}
  }
`;Tut=(0,gr.default)(Gt.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`;kut=(0,gr.default)(Gt.rotate)`
  height: 16px;
  width: 16px;
`;Iut=(0,gr.default)(Gt.flipHorizontal)`
  height: 16px;
  width: 16px;
`;Dut=(0,gr.default)(Gt.flipVertical)`
  height: 16px;
  width: 16px;
`;VG=gr.css`
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  margin-bottom: 0.5rem;
`;Eut=gr.default.div`
  display: inline-flex;
  gap: 5px;

  svg {
    color: ${i=>i.theme.foreground};
  }

  ${i=>i.smallContainer&&VG}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${VG}
  }
`;Fut=({transformTool:i,config:t,custom:e,canvas:r})=>{const{rect:o}=(0,fo.useContext)(Fe);const n=i.locale.transformActions;const s=r.canvasSize.width;const a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&s>t.measurements.canvas.transform.minFlipWidth;const l=({customButtonKey:_,onClick:x,label:b,icon:w})=>{const T=e.getButton(_);return fo.default.createElement(T,{key:b,onClick:x,label:b,ariaLabel:b,icon:w})};const c=l({label:n.buttonFlipHorizontal,icon:fo.default.createElement(Iut,null),onClick:()=>{i.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"});const u=l({label:n.buttonFlipVertical,icon:fo.default.createElement(Dut,null),onClick:()=>{i.flipVertically()},customButtonKey:"transformActionFlipVertical"});const m=l({label:n.buttonRotateClockwise,icon:fo.default.createElement(Tut,null),onClick:i.rotateClockwise,customButtonKey:"transformActionRotateClockwise"});const p=l({label:n.buttonRotateAntiClockwise,icon:fo.default.createElement(kut,null),onClick:i.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"});const h=!!o&&o.width<600;const g=t.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return fo.default.createElement(Eut,{style:g,"data-test":U.FlipRotateControls,smallContainer:h},i.config.enableFlip&&a&&fo.default.createElement(Sut,{smallContainer:h},c,u),i.config.enableRotation&&fo.default.createElement(Cut,{canvasWidth:s,smallContainer:h}),i.config.enableRotation&&fo.default.createElement(wut,{smallContainer:h},p,m))};hf=it("transformTool","config","custom","canvas")(S(Fut))});var ra,Rut,Av,Out,jG;var $G=d(()=>{ra=y(require("react"));A();je();MG();PI();Rut=dt.Bar.Index;({Backdrop:Av}=dt.Crop);Out=({transformTool:i,canvas:t,config:e})=>{const{leftTopRespectFlip:r,leftBottomRespectFlip:o,rightTopRespectFlip:n}=i;const{height:s}=i.cropMaskSize;const{height:a,width:l}=t.canvasSize;const{defaultCropMaskPosition:c}=i;const u=i.isDragMode?{transition:"unset"}:{};return ra.default.createElement(dt.Controls.Container,null,ra.default.createElement(Av,{style:{left:0,top:0,width:l,height:r.y+c.y,...u}}),ra.default.createElement(Av,{style:{left:0,top:r.y+c.y,width:c.x+r.x,height:s,...u}}),ra.default.createElement(Av,{style:{left:n.x+c.x,top:n.y+c.y,width:l-n.x-c.x,height:s,...u}}),ra.default.createElement(Av,{style:{left:0,top:o.y+c.y,width:l,height:a-o.y-c.y+e.measurements.basicUIToolControlBar.controlsBarHeight,...u}}),ra.default.createElement(PG,null),e.isLayoutAdvanced?ra.default.createElement(Rut,{bottom:true},ra.default.createElement(hf,null)):null)};jG=it("transformTool","canvas","config")(S(Out))});var Bv,Pv,Aut,KG,XG;var qG=d(()=>{Bv=y(require("react"));A();Pv=y(require("styled-components"));je();Aut=(0,Pv.default)(dt.Controls.Container)`
  ${i=>i.activeCursor?Pv.css`
          cursor: move;
        `:""}
  z-index: ${i=>i.theme.measurements.zIndex.canvas.crop.dragImage};
`;KG=class extends Bv.default.Component{constructor(t){super(t);this.INITIAL_POSITION={x:void 0,y:void 0};this.state={...this.INITIAL_POSITION,isDragging:false};this.containerRef=null;this.getCursorCoordinates=t=>{let e=0;let r=0;if(t.type.indexOf("touch")!==-1){const a=t;if(!a.touches.length){return this.INITIAL_POSITION}e=a.touches[0].clientX;r=a.touches[0].clientY}else{const a=t;e=a.clientX;r=a.clientY}const o=this.containerRef.current.getBoundingClientRect();const n=e-o.left;const s=r-o.top;return{x:n,y:s}};this.move=t=>{if(this.scale.canDrag){const{x:e,y:r}=this.getCursorCoordinates(t);if(e!==void 0&&r!==void 0){if(this.state.isDragging){const o={x:this.state.x-e,y:this.state.y-r};this.scale.setOffset(o)}}}};this.touchDrag=t=>{if(this.scale.canDrag){const{x:e,y:r}=this.getCursorCoordinates(t);if(e!==void 0&&r!==void 0){this.setState({x:e,y:r,isDragging:true})}}};this.drag=t=>{t.preventDefault();this.touchDrag(t)};this.stop=()=>{if(this.scale.canDrag){this.scale.savePosition();this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.touchEnd=t=>{t.preventDefault();t.stopPropagation();const{x:e,y:r}=this.state;if(e&&r){this.setState({...this.INITIAL_POSITION,isDragging:false})}};this.containerRef=Bv.default.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,false);document.addEventListener("touchend",this.stop,{passive:true})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,false);document.removeEventListener("touchend",this.stop,false)}get scale(){return this.props.scale}render(){return Bv.default.createElement(Aut,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}};XG=it("scale")(S(KG))});var Xn,YG;var JG=d(()=>{Xn=y(require("react"));A();R();H();ZW();je();aG();BG();$G();qG();YG=S(({children:i})=>{const t=(0,Xn.useRef)(null);const{active:e,sprite:r,canvas:o}=I();const n=()=>{switch(e.tool){case"focus":return Xn.default.createElement(sG,null);case"text":case"textdesign":case"sticker":return Xn.default.createElement(AG,null);case"brush":return Xn.default.createElement(JW,null);case"transform":return Xn.default.createElement(jG,null);default:return Xn.default.createElement(dt.Controls.Container,null,Xn.default.createElement(XG,null))}};const s=c=>{c.preventDefault();c.stopPropagation();if(o==null?void 0:o.isCanvasClickable){let{clientX:u}=c;let{clientY:m}=c;if(c.type.indexOf("touch")!==-1){const _=c;if(!_.touches.length){return}u=_.touches[0].clientX;m=_.touches[0].clientY}const p=t.current.getBoundingClientRect();const h=u-p.left;const g=m-p.top;o.getContainersAtPreviewPoint({x:h,y:g})}};const a=c=>{if(c.code==="Tab"){r.selectLast()}};const{canvasSize:l}=o;return Xn.default.createElement(dt.Controls.Wrapper,{"aria-hidden":true,ref:t,onClick:s,onKeyDown:a,height:l.height,width:l.width},i,n())})});var ZG,QG,But,Put,MI;var tV=d(()=>{ZG=y(require("react"));QG=y(require("styled-components"));But=QG.default.div`
  display: ${({isVisible:i})=>i?"block":"none"};
  position: absolute;
  z-index: ${i=>i.theme.measurements.zIndex.canvas.snappingGuide};
`;Put=({isVisible:i,className:t})=>{return ZG.default.createElement(But,{isVisible:i,className:t})};MI=Put});var Mv,yu,Mut,Lut,zut,Uut,eV;var iV=d(()=>{Mv=y(require("react"));A();yu=y(require("styled-components"));z();tV();Mut=(0,yu.default)(MI)`
  background: ${i=>i.theme.snapping.positionGuideColor};
  ${i=>{if(i.direction==="horizontal"){return yu.css`
        width: 100%;
        height: 2px;
        top: ${()=>i.position}px;
      `}return yu.css`
      width: 2px;
      height: 100%;
      left: ${()=>i.position}px;
    `}}
`;Lut=(0,yu.default)(MI)`
  border: none;
  border-top: 2px dashed ${i=>i.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:i})=>i.x}px;
  top: ${({position:i})=>i.y}px;
  transform: rotate(${({rotation:i})=>i}rad);
  width: 200%;
`;zut=yu.default.div`
  position: absolute;
  width: ${({width:i})=>i}px;
  height: ${({height:i})=>i}px;
  top: ${({top:i})=>i}px;
  left: ${({left:i})=>i}px;
  overflow: hidden;
`;Uut=({snapping:i,editor:t})=>{const{width:e,height:r}=t.getPreviewSize();const{x:o,y:n}=i.previewTopLeftPosition;const s=i.positionGuides.map(({direction:l,value:c,isVisible:u},m)=>Mv.default.createElement(Mut,{key:`positionGuide-${m}`,direction:l,position:c,isVisible:u}));const a=i.rotationGuides.find(({isVisible:l})=>l);return Mv.default.createElement(zut,{"data-test":U.SnappingLine,width:e,height:r,left:o,top:n},s,Mv.default.createElement(Lut,{key:"rotationGuide",rotation:a?a.value:0,position:a?a.position:{x:0,y:0},isVisible:!!a}))};eV=it("snapping","editor")(S(Uut))});var rV,oV,Nut,nV;var sV=d(()=>{rV=y(require("react"));oV=y(require("styled-components"));z();Nut=oV.default.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`;nV=()=>rV.default.createElement(Nut,{alt:"watermark","data-test":U.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="})});var jr,aV,Im;var lV=d(()=>{jr=y(require("react"));jg();aV=y($u());A();H();z();je();JG();iV();sV();Im=S(function i(){const t=(0,jr.useRef)(null);const{canvas:e,config:r}=I();const o=(a=true)=>{if(t==null?void 0:t.current){const{clientWidth:l,clientHeight:c}=t.current;const u=Do();t.current.width=l*u;t.current.height=c*u;e.saveDimensions({width:l,height:c,render:a})}};const n=new Nl((0,aV.default)(()=>o(),100,{trailing:true}));(0,jr.useEffect)(()=>{const a=t.current;e.setCanvasElement(a);return()=>{n.disconnect()}},[]);(0,jr.useLayoutEffect)(()=>{o(false);n.observe(t.current)});const{licenseChecker:s}=r;return jr.default.createElement(jr.default.Fragment,null,s&&s.isWhiteLabel()?null:jr.default.createElement(nV,null),jr.default.createElement(dt.Element,{ref:t,"aria-label":"Canvas","data-test":U.Canvas}),jr.default.createElement(YG,null,jr.default.createElement(eV,null)))})});var LI,Lv;var cV=d(()=>{LI=y(require("react"));Lv=({children:i})=>LI.default.createElement(LI.default.Fragment,null,i)});var zI=d(()=>{cV()});var Dm;var uV=d(()=>{et();Kt();je();zI();Dm=class{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>{return this.components.advancedUICategoryCard};this.getAdvancedItemCard=()=>{return this.components.advancedUIItemCard};this.getAdvancedToolbarItem=()=>{return this.components.advancedUIToolbarItem};this.getAdvancedToolbar=()=>{return this.components.advancedUIToolbar};this.getAdvancedToolControlBar=()=>{return this.components.advancedUIToolControlBar};this.getBasicToolbar=()=>{return this.components.basicUIToolbar};this.getBasicToolControlBar=()=>{return this.components.basicUIToolControlBar};this.getBasicToolItemsBar=()=>{return this.components.basicUIToolItemsBar};this.getDialog=()=>{return this.components.dialog};this.getButton=t=>{return this.components.buttons[t]};this.getColorItem=()=>{return this.components.colorItem};this.getCheckbox=()=>{return this.components.checkbox};this.getWindowContainer=()=>{return this.components.windowContainer};this.getSlider=()=>{return this.components.slider};const r={dialog:B.Dialog,colorItem:B.ColorItem,checkbox:B.Input.Checkbox,slider:B.Input.Slider,buttons:{mainCanvasActionUndo:dt.Button.TextSecondary,mainCanvasActionRedo:dt.Button.TextSecondary,mainCanvasActionExport:zp,mainCanvasActionClose:Da,canvasActionEdit:dt.Controls.SpriteActionButton,canvasActionBringToFront:dt.Controls.SpriteActionButton,canvasActionDuplicate:dt.Controls.SpriteActionButton,canvasActionDelete:dt.Controls.SpriteActionButton,canvasActionInvert:dt.Controls.SpriteActionButton,canvasActionFlip:dt.Controls.SpriteActionButton,transformActionFlipHorizontal:ps,transformActionFlipVertical:ps,transformActionRotateClockwise:ps,transformActionRotateAntiClockwise:ps,textAlignment:ps,toolControlBarPrimaryButton:Lp,toolControlBarSecondaryButton:Da},windowContainer:Lv};this.components=Ei([r,e,t])}}});var oa,Hut,Em;var dV=d(()=>{oa=y(require("react"));A();R();et();Kt();Hut=({modal:i,textTool:t,textDesignTool:e,custom:r})=>{const{type:o,identifier:n,isVisible:s,modalProps:a,positionOffset:l}=i;const{headerLabel:c,bodyLabel:u,confirmLabel:m,dismissLabel:p,handleClose:h,handleConfirm:g,handleDismiss:_}=a;const x=r.getDialog();if(o==="info"){return oa.default.createElement(B.InfoModal,{headerLabel:c,bodyLabel:u},oa.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,headerLabel:c,bodyLabel:u}))}if(o==="textEdit"){const{buttonSave:b,buttonClose:w}=t.locale.canvasControls;const T={type:o,isVisible:i.isVisible,confirmLabel:b,dismissLabel:w,headerLabel:t.locale.canvasControls.inputText};if(t.isTextSelected){return oa.default.createElement(B.TextEditModal,{...T,defaultText:ft.defaultText(),handleConfirm:t.changeText,handleDismiss:t.setEditMode,text:t.text,maxLength:t.config.maxCharacterLimit,allowEmojis:t.config.allowEmojis},oa.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:b,dismissLabel:w,headerLabel:t.locale.canvasControls.inputText}))}if(e.isTextDesignSelected){return oa.default.createElement(B.TextEditModal,{...T,defaultText:Pt.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis},oa.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,handleClose:h,confirmLabel:b,dismissLabel:w,headerLabel:t.locale.canvasControls.inputText}))}}return oa.default.createElement(B.ActionModal,{type:o,headerLabel:c,bodyLabel:u,confirmLabel:m,dismissLabel:p,handleClose:h,handleConfirm:g,handleDismiss:_},oa.default.createElement(x,{type:o,isVisible:s,identifier:n,position:l,confirmLabel:m,dismissLabel:p,headerLabel:c,bodyLabel:u,handleClose:h}))};Em=it("textTool","textDesignTool","modal","custom")(S(Hut))});var zv,mV,Wut,pV,UI;var hV=d(()=>{zv=y(require("react"));mV=y(require("styled-components"));et();z();Wut=(0,mV.default)(B.Input.Label)`
  padding: 0;
  padding-left: 4px;
`;pV=class extends zv.default.Component{constructor(t){super(t);this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:false})};this.onSubmit=()=>{const{getCorrectValue:t}=this.props;const{isSubmitted:e,value:r}=this.state;if(!e){this.setState({value:t(parseInt(r,10)||0).toString(),isSubmitted:true})}};this.state={isSubmitted:false,value:t.value.toString()}}componentDidUpdate(t){const{value:e}=this.props;if(t.value!==e){this.setState({value:e.toString()})}}render(){const{id:t,isDisabled:e,label:r,"aria-label":o}=this.props;const{value:n}=this.state;return zv.default.createElement(B.Input.Text,{id:t,"aria-label":o,value:n,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:oA(this.onSubmit)},zv.default.createElement(Wut,{label:r,htmlFor:t}))}};UI=pV});var _u,NI,Gut,Vut,jut,$ut,Kut,ff;var fV=d(()=>{_u=y(require("react"));NI=y(require("styled-components"));et();hV();Gut=NI.default.div`
  display: grid;
  grid-template-columns: 1fr min-content 1fr;
  gap: 1rem;
  align-items: center;
  max-width: ${i=>i.theme.measurements.inputs.cropSize.maxWidth}px;
`;Vut=NI.default.span`
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.body.case};
  color: ${i=>i.theme.textInput.foreground};
`;jut="photoeditorsdk-transformScaleWidth";$ut="photoeditorsdk-transformScaleHeight";Kut=({showLabel:i=true,label:t,isDisabled:e,valueHeight:r,valueWidth:o,labelWidth:n,labelHeight:s,ariaLabelWidth:a,ariaLabelHeight:l,onSubmitWidth:c,onSubmitHeight:u})=>{return _u.default.createElement("div",null,_u.default.createElement(B.Input.Label,{id:"photoeditorsdk-crop-size-label",label:t,show:i}),_u.default.createElement(Gut,{"aria-labelledby":"photoeditorsdk-crop-size-label"},_u.default.createElement(UI,{id:jut,value:o,getCorrectValue:c,label:n,"aria-label":a,isDisabled:e}),_u.default.createElement(Vut,null,"x"),_u.default.createElement(UI,{id:$ut,value:r,getCorrectValue:u,label:s,"aria-label":l,isDisabled:e})))};ff=Kut});var We=d(()=>{by();vW();qW();h1();lV();uV();dV();PI();fV()});var VV=Wt((sne,GV)=>{"use strict";var ldt=false;var WV=function(){};if(ldt){HV=function i(t,e){var r=arguments.length;e=new Array(r>1?r-1:0);for(var o=1;o<r;o++){e[o-1]=arguments[o]}var n=0;var s="Warning: "+t.replace(/%s/g,function(){return e[n++]});if(typeof console!=="undefined"){console.error(s)}try{throw new Error(s)}catch(a){}};WV=function(i,t,e){var r=arguments.length;e=new Array(r>2?r-2:0);for(var o=2;o<r;o++){e[o-2]=arguments[o]}if(t===void 0){throw new Error("`warning(condition, format, ...args)` requires a warning message argument")}if(!i){HV.apply(null,[t].concat(e))}}}var HV;GV.exports=WV});var YV=Wt((gne,qV)=>{"use strict";var mdt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";qV.exports=mdt});var tj=Wt((bne,QV)=>{"use strict";var pdt=YV();function JV(){}function ZV(){}ZV.resetWarningCache=JV;QV.exports=function(){function i(r,o,n,s,a,l){if(l===pdt){return}var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");c.name="Invariant Violation";throw c};i.isRequired=i;function t(){return i};var e={array:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:t,element:i,elementType:i,instanceOf:t,node:i,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ZV,resetWarningCache:JV};e.PropTypes=e;return e}});var ij=Wt((xne,ej)=>{if(false){yne=null;_ne=true;ej.exports=null(yne.isElement,_ne)}else{ej.exports=tj()()}var yne;var _ne});var vi,nj,JI,Cf;var ZI=d(()=>{vi=y(require("react"));jg();nj=y($u());A();R();et();H();z();je();JI=24;Cf=S(function i(){const{active:t,modal:e,editor:r}=I();const o=(0,vi.useRef)(null);const n=(0,vi.useRef)(null);const[s,a]=(0,vi.useState)(0);const[l,c]=(0,vi.useState)(null);const[u,m]=(0,vi.useState)(0);const[p,h]=(0,vi.useState)(0);(0,vi.useLayoutEffect)(()=>{const b=()=>{const{measurements:D}=r.configStore;const{height:O,width:k}=n.current.getBoundingClientRect();const E=O*.95;const J=k*.95;const tt=(O-E)/2;a(tt<JI+D.buttons.float.size?O-JI*2-D.buttons.float.size/2:O-tt+JI);m(E);h(J)};const w=new Nl((0,nj.default)(()=>b(),100,{trailing:true}));if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(D=>{o.current.srcObject=D}).catch(()=>{e.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})})}else{e.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(false)}})}b();w.observe(n.current);const T=document.createElement("canvas");c(T);return()=>{jt(T);w.disconnect()}},[r,e,t]);const g=()=>{const b=o.current.srcObject;const w=b.getTracks();w.forEach(T=>{T.stop()});o.current.srcObject=null;t.selectWebcam(false)};const _=()=>{if(l){l.width=o.current.videoWidth;l.height=o.current.videoHeight;l.getContext("2d").drawImage(o.current,0,0);t.newImage(l.toDataURL("image/webp"));g()}};const x=t.webcamLabel;return vi.default.createElement(dt.Wrapper,{ref:n},vi.default.createElement(dt.Bar.Index,{transparentBackgound:true,style:{justifyContent:"flex-end"}},vi.default.createElement(dt.Bar.ButtonGroup,null,vi.default.createElement(Da,{ariaLabel:x,onClick:g},x))),vi.default.createElement(dt.Webcam,{style:{height:u,width:p},autoPlay:true,ref:o}),vi.default.createElement(dt.Button.Float,{ariaLabel:"Click and Save",style:{top:s},onClick:_}))})});var sj,Sf;var QI=d(()=>{sj=y(require("react"));z();je();Sf=({children:i})=>{return sj.default.createElement(dt.Container,{"data-test":U.CanvasContainer},i)}});var $v,Xj;var qj=d(()=>{$v=require("react");Xj=()=>{const[i,t]=(0,$v.useState)([]);(0,$v.useEffect)(()=>{var e;if(typeof window!==void 0&&((e=window.navigator)==null?void 0:e.mediaDevices)){let r=true;const o=()=>{window.navigator.mediaDevices.enumerateDevices().then(n=>{if(r){t(n.map(({deviceId:s,groupId:a,kind:l,label:c})=>({deviceId:s,groupId:a,kind:l,label:c})))}}).catch(()=>null)};window.navigator.mediaDevices.addEventListener("devicechange",o);o();return()=>{r=false;window.navigator.mediaDevices.removeEventListener("devicechange",o)}}return null},[]);return i}});var Yj,Kv;var Jj=d(()=>{Yj=y(require("react"));A();qj();H();z();Kv=S(({tool:i,fullWidth:t=false,icon:e,label:r,onClick:o})=>{const{custom:n}=I();const s=Xj();if(!s.some(({kind:l})=>l==="videoinput")){return null}const a=n.getButton("toolControlBarSecondaryButton");if(!a){return null}return Yj.default.createElement(a,{"data-test":U.LibraryWebcamButton,tool:i,label:r,ariaLabel:r,onClick:o,fullWidth:t,icon:e})})});var Zj=d(()=>{Jj()});var oD=d(()=>{Zj()});var aK,lK;var cK=d(()=>{aK=y(require("styled-components"));et();lK=(0,aK.default)(Ir)`
  margin: 2px;
  min-width: ${i=>i.theme.measurements.basicCard.large.width}px;
  height: ${i=>i.theme.measurements.basicCard.large.height}px;
  color: ${i=>i.theme.card.foreground};
`});var uK,dK;var mK=d(()=>{uK=y(require("styled-components"));et();dK=(0,uK.default)(Ir)`
  margin: 2px;
  min-width: ${i=>i.theme.measurements.basicCard.medium.width}px;
  height: ${i=>i.theme.measurements.basicCard.medium.height}px;
  color: ${i=>i.theme.card.foreground};
`});var pK,hK;var fK=d(()=>{pK=y(require("react"));R();cK();mK();hK=({type:i="medium",...t})=>{const e=i==="large";let r=dK;if(e){r=lK}return pK.default.createElement(r,{type:i,...t})}});var gK,bK;var yK=d(()=>{gK=y(require("styled-components"));et();z();bK=(0,gK.default)(Fo).attrs(()=>({"data-test":U.CardContainer}))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${i=>i.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`});var _K,xK;var vK=d(()=>{_K=y(require("styled-components"));et();xK=(0,_K.default)(Ce)`
  &&& {
    min-height: 32px;
    font-size: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${i=>i.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`});var CK=d(()=>{fK();yK();vK()});var SK,wK;var TK=d(()=>{SK=y(require("styled-components"));wK=SK.default.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`});var Nf,kK,IK;var DK=d(()=>{Nf=y(require("styled-components"));z();kK=Nf.default.div.attrs(()=>({"data-test":U.BasicToolControlBar}))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${i=>i.show?Nf.css`
          max-height: 80px;
        `:Nf.css`
          max-height: 0px;
        `}
`;IK=kK;kK.defaultProps={show:true}});var Yv,Jv,EK,Odt,FK;var RK=d(()=>{Yv=y(require("react"));Jv=y(require("styled-components"));Cr();EK=Jv.css`
  width: 100%;
`;Odt=Jv.default.div`
  position: relative;

  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  align-self: flex-end;

  height: auto;
  box-shadow: ${i=>i.theme.toolControlBar.shadow};

  ${i=>i.smallContainer&&EK}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${EK}
  }
`;FK=({children:i,...t})=>{const{rect:e}=(0,Yv.useContext)(Fe);return Yv.default.createElement(Odt,{...t,smallContainer:!!e&&e.width<600},i)}});var Hf,Ru,OK,Adt,AK,Bdt,BK;var PK=d(()=>{Hf=y(require("react"));Ru=y(require("styled-components"));Cr();z();OK=Ru.css`
  padding: 0 1rem;
  height: unset;
  min-height: ${i=>i.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
`;Adt=Ru.default.div`
  display: flex;
  box-sizing: border-box;
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 100%;
  height: ${i=>i.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${i=>i.theme.measurements.zIndex.controlsBar};
  background: ${i=>i.theme.toolControlBar.background};
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};

  ${({show:i})=>i&&Ru.css`
      transform: translateY(-100%) scaleY(1);
    `}

  ${i=>i.smallContainer&&OK}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${OK}
  }
`;AK=Ru.css`
  gap: 0 0.5rem;
`;Bdt=Ru.default.div`
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;

  gap: 0 10vw;

  ${i=>i.smallContainer&&AK}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${AK}
  }
`;BK=({children:i,...t})=>{const{rect:e}=(0,Hf.useContext)(Fe);return Hf.default.createElement(Adt,{...t,"data-test":U.ToolControlBarExpandableControls,smallContainer:!!e&&e.width<600},Hf.default.createElement(Bdt,{smallContainer:!!e&&e.width<600},i))}});var MK,LK,Pdt,Mdt,ca;var zK=d(()=>{MK=y(require("react"));LK=y(require("styled-components"));Pdt=LK.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;Mdt=({label:i,className:t,children:e})=>MK.default.createElement(Pdt,{"aria-label":i,className:t},e);ca=Mdt});var Zv,Qv,UK,Ldt,NK;var HK=d(()=>{Zv=y(require("react"));Qv=y(require("styled-components"));et();Cr();UK=Qv.css`
  min-width: unset;
  height: unset;
  min-height: 40px;
`;Ldt=Qv.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${q5.scale} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;

  ${i=>i.smallContainer&&UK}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${UK}
  }
`;NK=({children:i,...t})=>{const{rect:e}=(0,Zv.useContext)(Fe);return Zv.default.createElement(Ldt,{...t,smallContainer:!!e&&e.width<600},i)}});var pD,t0,WK,zdt,e0;var GK=d(()=>{pD=y(require("react"));t0=y(require("styled-components"));We();WK=t0.css`
  background: ${i=>i.theme.tabTitle.activeBackground};
  color: ${i=>i.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${i=>i.theme.tabTitle.activeBorderColor};
`;zdt=(0,t0.default)(yn)`
  display: inline-flex;
  align-items: center;
  font-size: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${i=>i.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${i=>i.theme.tabTitle.background};

  ${({isActive:i})=>i&&WK}

  &:active {
    ${WK}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`;e0=class extends pD.default.Component{constructor(){super(...arguments);this.onClick=()=>{const{label:t,onClick:e}=this.props;e(t)}}render(){const{activeTab:t,label:e}=this.props;return pD.default.createElement(zdt,{ariaLabel:e,isActive:t===e,onClick:this.onClick},e)}}});var wi,Lm,Udt,Ndt,VK,Hdt,Wf;var jK=d(()=>{wi=y(require("react"));Lm=y(require("styled-components"));We();et();Cr();HK();GK();Udt=Lm.default.div``;Ndt=(0,Lm.default)(Ro)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`;VK=Lm.css`
  left: 0;
  right: 0;
  transform: translateY(-120%);
  background: transparent;
  button {
    &:first-child {
      border-bottom-right-radius: 0;
      border-top-right-radius: 0;
    }
    &:last-child {
      border-bottom-left-radius: 0;
      border-top-left-radius: 0;
    }
    &:not(:first-child):not(:last-child) {
      border-radius: 0;
    }
  }
`;Hdt=(0,Lm.default)(Hp)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);

  ${i=>i.smallContainer&&VK}
  @media all and (min-width: 0) and (max-width: 499px) {
    ${VK}
  }
`;Wf=({length:i,children:t})=>{const e=wi.default.Children.toArray(t);const r=wi.default.Children.count(t);const[o,n]=(0,wi.useState)((0,wi.isValidElement)(e[0])&&e[0].props.label||"");const[s,a]=(0,wi.useState)(false);const{rect:l}=(0,wi.useContext)(Fe);const c=g=>{n(g);a(false)};const u=()=>{a(g=>!g)};const m=()=>{const g=e.slice(i,r);return wi.default.createElement(Hdt,{show:s,smallContainer:!!l&&l.width<500},g.map(_=>{const x=_.props.label||"";return wi.default.createElement(yn,{onClick:()=>c(x),key:x,ariaLabel:"More Options"},x)}))};const p=e.slice(0,i);const h=r>i;return wi.default.createElement(Udt,null,p.map(g=>{if(g){const _=g.props.label||"";return wi.default.createElement(e0,{activeTab:o,key:_,label:_,onClick:c})}return null}),h&&wi.default.createElement(Ndt,{onClick:u,ariaLabel:"Select Next"},"..."),s&&m(),wi.default.Children.map(t,g=>{if(!g||g.props&&g.props.label!==o){return null}return wi.default.createElement(NK,{key:g.props.label},g.props.children)}))}});var i0=d(()=>{zK();jK()});var Yo,KK,XK,$K,Wdt,qK;var YK=d(()=>{Yo=y(require("react"));KK=y($u());XK=y(require("styled-components"));Cr();i0();$K=100;Wdt=XK.default.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  flex-direction: column;
  transition: all 0.2s linear;
`;qK=({children:i})=>{const[t,e]=(0,Yo.useState)(Yo.default.Children.count(i));const{rect:r}=(0,Yo.useContext)(Fe);(0,Yo.useEffect)(()=>{window.addEventListener("resize",o);o();return()=>{window.removeEventListener("resize",o)}},[r]);const o=(0,KK.default)(()=>{const n=(r==null?void 0:r.width)||0;const s=Yo.default.Children.count(i);const a=n-32-64-s*$K;if(a<0){const l=Math.round(Math.abs(a/$K));e(s-l)}else{e(s)}},100);if(!t){return null}return Yo.default.createElement(Wdt,null,Yo.default.createElement(Wf,{length:t},i))}});var r0,Gdt,JK;var ZK=d(()=>{r0=y(require("styled-components"));Gdt=r0.default.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${i=>i.full?r0.css`
            left: -24px;
            width: calc(100% + 48px);
          `:`
      left: 24px;
      width: calc(100% - 48px);
    `}
    border-bottom: 1px solid ${i=>i.theme.toolControlBar.separatorColor};
  }
`;JK=Gdt});var Gf,o0,QK,Vdt,tX;var eX=d(()=>{Gf=y(require("react"));o0=y(require("styled-components"));Cr();H();QK=o0.css`
  width: 100%;
`;Vdt=o0.default.div`
  display: flex;
  justify-content: center;
  width: 100%;

  > div {
    position: relative;
    width: 224px;

    ${i=>i.smallContainer&&QK}
    @media all and (min-width: 0) and (max-width: 599px) {
      ${QK}
    }
  }
`;tX=({children:i,...t})=>{const{custom:e}=I();const{rect:r}=(0,Gf.useContext)(Fe);const o=e.getSlider();if(!o){return null}return Gf.default.createElement(Vdt,{smallContainer:!!r&&r.width<600},Gf.default.createElement(o,{centerSlider:true,...t},i))}});var n0,jdt,iX;var rX=d(()=>{n0=y(require("styled-components"));z();jdt=n0.default.div.attrs(()=>({"data-test":U.CategoryItemsContainer}))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:i})=>i&&n0.css`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`;iX=jdt});var Vf,hD;var oX=d(()=>{Vf=y(require("styled-components"));z();hD=Vf.default.div.attrs(()=>({"data-test":U.ToolControlBar}))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${i=>i.theme.measurements.zIndex.toolControlBar};

  ${i=>i.show?Vf.css`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${i.theme.toolControlBar.background};
          color: ${i.theme.toolControlBar.inputLabelForeground};
        `:Vf.css`
          max-height: 0px;
        `}
`;hD.defaultProps={show:true}});var nX,$dt,sX;var aX=d(()=>{nX=y(require("styled-components"));$dt=nX.default.div`
  height: ${i=>i.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${i=>i.theme.toolControlBar.separatorColor};
  }
`;sX=$dt});var ua,cX,lX,s0,uX,a0;var fD=d(()=>{ua=y(require("styled-components"));et();cX=ua.default.span`
  display: flex;
  cursor: pointer;
  z-index: ${i=>i.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${i=>i.theme.toolbar.foreground};
  letter-spacing: ${i=>i.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${i=>i.theme.measurements.fontSystem.body.size}px;

  ${({isActive:i})=>i&&ua.css`
      color: ${t=>t.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${i=>i.theme.toolbar.activeForeground};
  }
`;lX=ua.css`
  background-color: ${i=>i.theme.toolbar.activeBackground};
  color: ${i=>i.theme.toolbar.activeForeground};

  svg {
    color: ${i=>i.theme.toolbar.activeForeground};
  }
`;s0=(0,ua.default)(bi)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${i=>i.theme.toolbar.foreground};
  background-color: ${i=>i.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;

  ${({isActive:i})=>i&&lX}
  ${({isDisabled:i})=>i&&ua.css`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${t=>t.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${lX}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`;uX=ua.default.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${i=>i.theme.toolbar.foreground};
  }
`;a0=ua.default.div.attrs({role:"none"})`
  display: flex;
  height: ${i=>i.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`});var gD,jf,Kdt,dX;var mX=d(()=>{gD=y(require("react"));jf=y(require("styled-components"));et();z();fD();Kdt=jf.default.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${i=>i.theme.toolbar.background};
  color: ${i=>i.theme.toolbar.foreground};
  z-index: ${i=>i.theme.measurements.zIndex.toolbar};

  ${i=>i.show?jf.css`
          height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
          ${s0} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${a0} {
            height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:jf.css`
          height: ${i.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`;dX=({show:i=false,className:t,style:e,children:r})=>gD.default.createElement(Kdt,{"data-test":U.Toolbar,show:i,className:t,style:e},gD.default.createElement(Fo,null,r))});var $f,pX;var hX=d(()=>{$f=y(require("react"));z();fD();pX=({children:i,label:t,isActive:e,isDisabled:r,onClick:o})=>$f.default.createElement(a0,{"aria-haspopup":true,"aria-expanded":e},$f.default.createElement(s0,{"data-test":U.ToolbarItem,ariaLabel:t,onClick:o,isActive:e,isDisabled:r},$f.default.createElement(uX,null,i,$f.default.createElement(cX,{isActive:e},t))))});var Kf,Xdt,fX;var gX=d(()=>{Kf=y(require("styled-components"));Xdt=Kf.default.li.attrs({role:"none"})`
  ${i=>!i.active?Kf.css`
          height: ${i.theme.measurements.basicUIToolbar.openHeight}px;
        `:Kf.css`
          height: ${i.theme.measurements.basicUIToolbar.closeHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${i=>i.theme.toolControlBar.separatorColor};
  }
`;fX=Xdt});var P;var Xt=d(()=>{et();CK();TK();DK();RK();PK();YK();ZK();eX();i0();rX();oX();aX();mX();hX();gX();P={CardContainer:bK,ExpandableContainer:iX,CategoryContainer:wK,Card:hK,CardAvatar:Yl,CardLabel:xK,Toolbar:{Index:dX,Item:pX,Separator:fX},BarSeparator:JK,ItemsSeparator:sX,Itemsbar:hD,Controlsbar:IK,ControlsbarContainer:BK,ResponsiveTabWrapper:qK,Slider:tX,TabWrapper:Wf,Tab:ca,Other:{ControlsWrapper:FK}}});var zm,bX;var yX=d(()=>{zm=y(require("react"));A();R();H();Se();Xt();bX=S(function i(){const{config:t,active:e,custom:r}=I();const{tools:o}=t;const n=e.tool;const s=u=>{const m=t.state.config[u];if("icon"in m){const h=m.icon;return zm.default.createElement(h,null)}const p=xy[u];return zm.default.createElement(p,null)||null};const a=u=>{return t.locale[u].title};const l=(u,m)=>u&&zm.default.createElement(P.Toolbar.Item,{onClick:()=>e.selectTool(u),key:u,label:a(u),isActive:n===u,isDisabled:!(e.image||u==="library"||u==="customTool")},s(u))||zm.default.createElement(P.Toolbar.Separator,{key:u+m,active:!!n});const c=r.getBasicToolbar();if(!c){return null}return zm.default.createElement(c,{show:!!n},o.map(l))})});var qn,_X,qdt,Ydt,xX;var vX=d(()=>{qn=y(require("react"));A();_X=y(require("styled-components"));R();et();Se();Xt();qdt=(0,_X.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;Ydt=({adjustmentsTool:i,custom:t})=>{const e=i.selectedAdjustmentType.toLowerCase();const r=i[e];const o=t.getButton("toolControlBarSecondaryButton");return qn.default.createElement(qdt,{show:Boolean(e)},o&&qn.default.createElement("div",null,qn.default.createElement(o,{tool:"adjustment",ariaLabel:i.locale.controls.buttonReset,onClick:i.reset,icon:qn.default.createElement(Re.reset,null),label:i.locale.controls.buttonReset})),qn.default.createElement(P.Other.ControlsWrapper,null,qn.default.createElement(B.Spacer,{count:2}),qn.default.createElement(P.Slider,{identifier:i.selectedAdjustmentType,tool:"adjustment","aria-hidden":!e,adjust:true,label:i.selectedOptionLabel,value:r,onChange:n=>{i.editAdjustments({type:e,value:n})},onMouseUp:()=>i.toolSnapshot(),onTouchEnd:()=>i.toolSnapshot(),snap:0}),qn.default.createElement(B.Spacer,{count:2})),qn.default.createElement(P.BarSeparator,null))};xX=it("adjustmentsTool","custom")(S(Ydt))});var Xf,CX;var SX=d(()=>{Xf=y(require("react"));A();R();We();et();H();CX=S(()=>{const{brushTool:i}=I();const{colorList:t,locale:e,localeColor:r}=i;const o=e.controls;const n=r.colorPicker;return Xf.default.createElement(Xf.default.Fragment,null,Xf.default.createElement(B.Input.Selection,{showLabel:false,label:o.selectColor},Xf.default.createElement(Ie,{tool:"brush",activeColor:i.color,colors:t,labelsColor:n,colorPickerDirection:"top",onChange:i.changeColor})))})});var wX=d(()=>{SX()});var TX,kX;var IX=d(()=>{TX=y(require("react"));A();R();H();z();Xt();kX=S(()=>{const{brushTool:i}=I();const{locale:t}=i;const e=t.controls;return TX.default.createElement(P.Slider,{identifier:"brush-hardness",tool:"brush","data-test":U.BrushHardness,showLabel:false,label:e.sliderHardness,value:i.hardness,min:0,max:1,onChange:i.changeHardness})})});var DX=d(()=>{IX()});var EX,FX;var RX=d(()=>{EX=y(require("react"));A();R();H();z();Xt();FX=S(()=>{const{brushTool:i}=I();const{locale:t}=i;const e=t.controls;return EX.default.createElement(P.Slider,{identifier:"brush-size",tool:"brush","data-test":U.BrushSize,showLabel:false,label:e.sliderSize,value:i.relativeSize,min:1,max:100,divider:1,onChange:i.changeRelativeSize})})});var OX=d(()=>{RX()});var br,AX,Jdt,bD,Zdt,BX;var PX=d(()=>{br=y(require("react"));A();AX=y(require("styled-components"));R();et();H();Se();Xt();wX();DX();OX();Jdt=P.ResponsiveTabWrapper;({Tab:bD}=P);Zdt=(0,AX.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;BX=S(()=>{const{brushTool:i,custom:t}=I();const{locale:e,config:r}=i;const{basicUIToolControlBarTabsOrder:o}=r;const n=e.controls;const s=t.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"brushColor":return br.default.createElement(bD,{key:l,label:n.tabColor},br.default.createElement(CX,null));case"brushSize":return br.default.createElement(bD,{key:l,label:n.tabSize},br.default.createElement(FX,null));case"brushHardness":return br.default.createElement(bD,{key:l,label:n.tabHardness},br.default.createElement(kX,null));default:return null}};return br.default.createElement(Zdt,{style:{justifyContent:"center"},show:true},s&&br.default.createElement("div",null,br.default.createElement(s,{tool:"brush",ariaLabel:n.buttonReset,onClick:i.reset,icon:br.default.createElement(Re.reset,null),isDisabled:!i.isDirty,label:n.buttonReset})),br.default.createElement(P.Other.ControlsWrapper,null,br.default.createElement(B.Input.Form,null,br.default.createElement(Jdt,null,o.map(l=>a(l))))))})});var qf,MX;var LX=d(()=>{qf=y(require("react"));A();R();et();H();Xt();MX=S(()=>{const{filterTool:i}=I();const{state:t}=i;const e=i.locale.controls;const r=()=>{i.toolSnapshot()};return qf.default.createElement(P.Other.ControlsWrapper,null,qf.default.createElement(B.Spacer,{count:2}),qf.default.createElement(P.Slider,{identifier:"filter-intensity",tool:"filter","aria-hidden":!i.isOptionSelected,label:e.sliderIntensity,value:t.intensity,min:0,max:1,onMouseUp:r,onTouchEnd:r,onChange:i.changeIntensity,snap:t.isDuotone?.5:null}),qf.default.createElement(B.Spacer,{count:2}))})});var zX=d(()=>{LX()});var Ou,UX,Qdt,NX;var HX=d(()=>{Ou=y(require("react"));A();UX=y(require("styled-components"));R();H();Se();Xt();zX();Qdt=(0,UX.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;NX=S(()=>{const{filterTool:i,custom:t}=I();const{config:e}=i;const{basicUIToolControlBarTabsOrder:r}=e;const o=t.getButton("toolControlBarSecondaryButton");const n=s=>{switch(s){case"filterIntensity":return Ou.default.createElement(MX,{key:s});default:return null}};return Ou.default.createElement(Qdt,{show:i.isOptionSelected},o&&Ou.default.createElement("div",null,Ou.default.createElement(o,{tool:"filter",ariaLabel:i.locale.controls.buttonReset,onClick:i.reset,icon:Ou.default.createElement(Re.reset,null),label:i.locale.controls.buttonReset})),r.map(s=>n(s)),Ou.default.createElement(P.BarSeparator,null))})});var Yn,WX,tmt,GX;var VX=d(()=>{Yn=y(require("react"));A();WX=y(require("styled-components"));R();et();H();Se();Xt();tmt=(0,WX.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;GX=S(()=>{const{focusTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.toolSnapshot(e.sliderIntensity)};return Yn.default.createElement(tmt,{show:i.isOptionSelected},r&&Yn.default.createElement("div",null,Yn.default.createElement(r,{tool:"focus",ariaLabel:e.buttonReset,onClick:i.reset,icon:Yn.default.createElement(Re.reset,null),label:e.buttonReset})),Yn.default.createElement(P.Other.ControlsWrapper,null,Yn.default.createElement(B.Spacer,{count:2}),Yn.default.createElement(P.Slider,{identifier:"focus-intensity",tool:"focus","aria-hidden":!i.isOptionSelected,label:e.sliderIntensity,value:i.relativeIntensity,min:0,max:100,divider:1,onChange:i.changeRelativeIntensity,onMouseUp:o,onTouchEnd:o}),Yn.default.createElement(B.Spacer,{count:2})),Yn.default.createElement(P.BarSeparator,null))})});var yD,jX;var $X=d(()=>{yD=y(require("react"));A();R();We();et();H();jX=S(()=>{const{frameTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{colorList:r}=i;return yD.default.createElement(B.Input.Selection,{label:t.selectColor,showLabel:false},yD.default.createElement(Ie,{tool:"frame",activeColor:i.color,colors:r,labelsColor:e,colorPickerDirection:"top",onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))})});var KX=d(()=>{$X()});var XX,qX;var YX=d(()=>{XX=y(require("react"));A();R();H();Xt();qX=S(()=>{const{frameTool:i}=I();const t=i.locale.controls;const e=()=>{i.toolSnapshot(t.sliderOpacity)};return XX.default.createElement(P.Slider,{identifier:"frame-opacity",tool:"frame","aria-hidden":!i.isOptionSelected,showLabel:false,label:t.sliderOpacity,value:i.opacity,min:0,max:1,onChange:i.changeOpacity,onMouseUp:e,onTouchEnd:e})})});var JX=d(()=>{YX()});var ZX,QX;var tq=d(()=>{ZX=y(require("react"));A();R();H();Xt();QX=S(()=>{const{frameTool:i}=I();const t=i.locale.controls;const e=()=>{i.toolSnapshot(t.sliderSize)};return ZX.default.createElement(P.Slider,{identifier:"frame-size",tool:"frame","aria-hidden":!i.isOptionSelected,showLabel:false,label:t.sliderSize,value:i.size,min:i.minSize,max:i.maxSize,divider:1,onChange:i.changeWidth,onMouseUp:e,onTouchEnd:e})})});var eq=d(()=>{tq()});var yr,iq,emt,_D,imt,rq;var oq=d(()=>{yr=y(require("react"));A();iq=y(require("styled-components"));R();H();Se();Xt();KX();JX();eq();emt=P.TabWrapper;({Tab:_D}=P);imt=(0,iq.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;rq=S(()=>{const{frameTool:i,custom:t}=I();const e=i.locale.controls;const{tintable:r,config:o}=i;const{basicUIToolControlBarTabsOrder:n}=o;const s=t.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"frameOpacity":return yr.default.createElement(_D,{key:l,label:e.tabOpacity},yr.default.createElement(qX,null));case"frameSize":return yr.default.createElement(_D,{key:l,label:e.tabSize},yr.default.createElement(QX,null));case"frameColor":return r&&yr.default.createElement(_D,{key:l,label:e.tabColor},yr.default.createElement(jX,null));default:return null}};return yr.default.createElement(imt,{show:i.isOptionSelected},s&&yr.default.createElement("div",null,yr.default.createElement(s,{tool:"frame",ariaLabel:e.buttonReset,onClick:i.reset,icon:yr.default.createElement(Re.reset,null),label:e.buttonReset})),yr.default.createElement(P.Other.ControlsWrapper,null,yr.default.createElement(emt,null,n.map(l=>a(l)))),yr.default.createElement(P.BarSeparator,null))})});var go,Yf,rmt,omt,nmt,nq;var sq=d(()=>{go=y(require("react"));A();Yf=y(require("styled-components"));R();et();Se();z();oD();Xt();rmt=(0,Yf.default)(P.ControlsbarContainer)`
  ${i=>i.firstChildMargin&&Yf.css`
      > :first-child {
        margin-right: 16px;
      }
    `}
`;omt=(0,Yf.default)(P.Other.ControlsWrapper)`
  grid-column-start: 2;
  align-self: center;
`;nmt=({library:i,active:t,custom:e})=>{const r=i.locale.controls.placeholderSearch;const{config:o}=i;const n=e.getButton("toolControlBarPrimaryButton");const s=u=>{i.fetchImages(u)};const a=u=>{const{files:m}=u.target;if(m.length){const p=new FileReader;p.onload=h=>{t.newImage(h.target.result)};p.readAsDataURL(m[0])}};const l=()=>{t.selectWebcam(true)};const c=()=>{const u=document.getElementById("fileUpload");if(u){u.click()}};return go.default.createElement(rmt,{firstChildMargin:o.enableWebcam&&!i.libraryProvider,show:true},o.enableUpload&&n&&go.default.createElement("div",null,go.default.createElement(n,{tool:"library","data-test":U.LibraryUploadButton,ariaLabel:i.locale.controls.buttonUpload,onClick:c,icon:go.default.createElement(Re.uploadImage,null),label:i.locale.controls.buttonUpload},go.default.createElement(B.Input.File,{onChange:a}))),i.libraryProvider&&go.default.createElement(omt,null,go.default.createElement(B.Input.Search,{onChange:s,placeholder:r})),o.enableWebcam&&go.default.createElement("div",null,go.default.createElement(Kv,{tool:"library",onClick:l,icon:go.default.createElement(Re.openWebcam,null),label:i.locale.controls.buttonWebcamOpen})),go.default.createElement(P.BarSeparator,null))};nq=it("library","active","custom")(S(nmt))});var aq,lq;var cq=d(()=>{aq=y(require("react"));A();et();H();lq=S(()=>{const{overlayTool:i}=I();const t=i.locale.controls;const{blendMode:e,allBlendModes:r}=i;const o=n=>{i.changeBlendMode(n)};return aq.default.createElement(B.Input.CarouselSlider,{showLabel:false,label:t.carouselBlendMode,defaultIdentifier:e,onSelect:o,list:r})})});var uq=d(()=>{cq()});var dq,mq;var pq=d(()=>{dq=y(require("react"));A();R();H();Xt();mq=S(()=>{const{overlayTool:i}=I();const t=i.locale.controls;const{state:e}=i;const r=()=>{i.toolSnapshot()};return dq.default.createElement(P.Slider,{identifier:"overlay-opacity",tool:"overlay","aria-hidden":!i.isOptionSelected,showLabel:false,label:t.sliderOpacity,value:e.opacity,min:0,max:1,onChange:i.changeOpacity,onMouseUp:r,onTouchEnd:r})})});var hq=d(()=>{pq()});var bo,smt,fq,gq;var bq=d(()=>{bo=y(require("react"));A();R();H();Se();Xt();uq();hq();smt=P.TabWrapper;({Tab:fq}=P);gq=S(()=>{const{overlayTool:i,custom:t}=I();const{config:e}=i;const{basicUIToolControlBarTabsOrder:r}=e;const o=i.locale.controls;const n=t.getButton("toolControlBarSecondaryButton");const s=a=>{switch(a){case"overlayBlendMode":return bo.default.createElement(fq,{key:a,label:o.tabBlendMode},bo.default.createElement(lq,null));case"overlayOpacity":return bo.default.createElement(fq,{key:a,label:o.tabOpacity},bo.default.createElement(mq,null));default:return null}};return bo.default.createElement(P.ControlsbarContainer,{show:i.isOptionSelected},n&&bo.default.createElement("div",null,bo.default.createElement(n,{tool:"overlay",ariaLabel:o.buttonReset,onClick:i.reset,icon:bo.default.createElement(Re.reset,null),label:o.buttonReset})),bo.default.createElement(P.Other.ControlsWrapper,null,bo.default.createElement(smt,null,r.map(a=>s(a)))),bo.default.createElement(P.BarSeparator,null))})});var Jf,yq;var _q=d(()=>{Jf=y(require("react"));A();R();We();et();H();yq=S(()=>{const{stickerTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{colorList:r}=i;return Jf.default.createElement(Jf.default.Fragment,null,Jf.default.createElement(B.Input.Selection,{isDisabled:!i.isStickerSelected,showLabel:false,label:t.selectColor},Jf.default.createElement(Ie,{tool:"sticker",activeSprite:i.id,activeColor:i.tintColor,colors:r,labelsColor:e,isDisabled:!i.isStickerSelected,colorPickerDirection:"top",onChange:i.changeTintColor,onAddSnapshot:i.tintColorSnapshot})))})});var xq=d(()=>{_q()});var vq,Cq;var Sq=d(()=>{vq=y(require("react"));A();R();H();Xt();Cq=S(()=>{const{stickerTool:i}=I();const t=i.locale.controls;const e=()=>{i.toolSnapshot()};return vq.default.createElement(P.Slider,{identifier:"sticker-opacity",tool:"sticker",isDisabled:!i.isStickerSelected,showLabel:false,label:t.sliderOpacity,value:i.opacity,min:0,max:1,onMouseUp:e,onTouchEnd:e,onChange:i.changeOpacity})})});var wq=d(()=>{Sq()});var $r,xD,amt,Tq,lmt,cmt,kq;var Iq=d(()=>{$r=y(require("react"));A();xD=y(require("styled-components"));R();et();H();Se();Xt();xq();wq();amt=P.TabWrapper;({Tab:Tq}=P);lmt=xD.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:true})`
  ${fy.VisuallyHidden}
`;cmt=(0,xD.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;kq=S(()=>{const{stickerTool:i,custom:t}=I();const{config:e}=i;const{basicUIToolControlBarTabsOrder:r}=e;const o=i.locale.controls;const n=t.getButton("toolControlBarPrimaryButton");const s=()=>{const u=document.getElementById("fileUpload");if(u){u.value=null;u.click()}};const a=u=>{const{files:m}=u.target;i.addFiles(m)};const l=u=>{switch(u){case"stickerColor":if(!i.tintable)return null;return $r.default.createElement(Tq,{key:u,label:o.tabColor},$r.default.createElement(yq,null));case"stickerOpacity":return $r.default.createElement(Tq,{key:u,label:o.tabOpacity},$r.default.createElement(Cq,null));default:return null}};const c=()=>{if(i.isCustomStickerEnabled&&n){return $r.default.createElement("div",null,$r.default.createElement(n,{tool:"sticker",ariaLabel:o.buttonUpload,onClick:s,icon:$r.default.createElement(Re.uploadImage,null),label:o.buttonUpload},$r.default.createElement(lmt,{onChange:a})))}return null};return $r.default.createElement(cmt,{show:true},c(),$r.default.createElement(P.Other.ControlsWrapper,null,$r.default.createElement(amt,null,r.map(u=>l(u)))),$r.default.createElement(P.BarSeparator,null))})});var vD,Dq;var Eq=d(()=>{vD=y(require("react"));A();R();We();et();H();Dq=S(()=>{const{textTool:i}=I();const{backgroundColorList:t}=i;const e=i.locale.controls;const r=i.localeColor.colorPicker;return vD.default.createElement(B.Input.Selection,{isDisabled:!i.isTextSelected,showLabel:false,label:e.selectBackgroundColor},vD.default.createElement(Ie,{tool:"text",activeSprite:i.id,activeColor:i.backgroundColor,colors:t,labelsColor:r,colorPickerDirection:"top",isDisabled:!i.isTextSelected,onChange:i.changeBackgroundColor,onAddSnapshot:i.backgroundColorSnapshot}))})});var Fq=d(()=>{Eq()});var Rq,Oq,umt,Aq;var Bq=d(()=>{Rq=y(require("react"));A();Oq=y(require("styled-components"));et();H();umt=(0,Oq.default)(B.Input.NumericInput)`
  max-width: 55px;
  > div > input {
    text-align: center;
  }
`;Aq=S(()=>{var r;const{textTool:i}=I();const{locale:t}=i;const e=o=>{const n=o?parseFloat(o):0;i.setFontSize(Math.max(10,Math.min(690,n)))};return Rq.default.createElement(umt,{id:"photoeditorsdk-text-font-size-input",value:i.fontSize.toFixed(0),onSubmit:e,isDisabled:!i.isTextSelected,label:(r=t.controls)==null?void 0:r.textFontSize,showLabel:false})})});var Pq=d(()=>{Bq()});var Mq,Lq;var zq=d(()=>{Mq=y(require("react"));A();R();H();Xt();Lq=S(()=>{const{textTool:i}=I();const t=i.locale.controls;const e=()=>{i.toolSnapshot()};return Mq.default.createElement(P.Slider,{identifier:"text-line-spacing",tool:"text",isDisabled:!i.isTextSelected,showLabel:false,label:t.sliderLineSpacing,value:i.lineHeight,min:.5,max:3,onChange:i.changeLineHeight,onMouseUp:e,onTouchEnd:e,snap:1,divider:1,decimal:1})})});var Uq=d(()=>{zq()});var l0,Nq;var Hq=d(()=>{l0=y(require("react"));A();et();H();Se();z();Nq=S(()=>{const{textTool:i,custom:t}=I();const e=i.locale.controls;const r=["left","center","right"];const o=t.getButton("textAlignment");return l0.default.createElement(B.Input.Selection,{isDisabled:!i.isTextSelected,showLabel:false,label:e.selectAlignment,"data-test":U.TextAlignment},r.map(n=>{const s=vy[n];return l0.default.createElement(o,{tool:n,isDisabled:!i.isTextSelected,ariaLabel:`Align ${n}`,isActive:n===i.alignment,key:n,icon:l0.default.createElement(s,null),onClick:()=>i.changeAlignment(n)})}))})});var Wq=d(()=>{Hq()});var CD,Gq;var Vq=d(()=>{CD=y(require("react"));A();R();We();et();H();Gq=S(()=>{const{textTool:i}=I();const{colorList:t}=i;const e=i.locale.controls;const r=i.localeColor.colorPicker;return CD.default.createElement(B.Input.Selection,{isDisabled:!i.isTextSelected,showLabel:false,label:e.selectFontColor},CD.default.createElement(Ie,{tool:"text",activeSprite:i.id,activeColor:i.textColor,colors:t,labelsColor:r,colorPickerDirection:"top",isDisabled:!i.isTextSelected,onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))})});var jq=d(()=>{Vq()});var hi,$q,dmt,mmt,Kq;var Xq=d(()=>{hi=y(require("react"));A();$q=y(require("styled-components"));R();H();Se();Xt();i0();Fq();Pq();Uq();Wq();jq();dmt=P.ResponsiveTabWrapper;mmt=(0,$q.default)(P.ControlsbarContainer)`
  > div {
    grid-template-columns: 1fr 5fr minmax(56px, 1fr);
  }
`;Kq=S(()=>{const{textTool:i,custom:t}=I();const{config:e}=i;const{basicUIToolControlBarTabsOrder:r}=e;const o=i.locale.controls;const n=t.getButton("toolControlBarPrimaryButton");const s=a=>{switch(a){case"fontSize":return hi.default.createElement(ca,{key:a,label:o.tabFontSize},hi.default.createElement(Aq,null));case"textAlignment":return hi.default.createElement(ca,{key:a,label:o.tabAlignment},hi.default.createElement(Nq,null));case"textColor":return hi.default.createElement(ca,{key:a,label:o.tabColor},hi.default.createElement(Gq,null));case"backgroundColor":return hi.default.createElement(ca,{key:a,label:o.tabBgColor},hi.default.createElement(Dq,null));case"lineSpacing":return hi.default.createElement(ca,{key:a,label:o.tabLineHeight},hi.default.createElement(Lq,null));default:return null}};return hi.default.createElement(mmt,{show:true},hi.default.createElement("div",null,hi.default.createElement(n,{tool:"text",ariaLabel:o.buttonNew,onClick:i.add,icon:hi.default.createElement(Re.addText,null),label:o.buttonNew})),hi.default.createElement(P.Other.ControlsWrapper,null,hi.default.createElement(dmt,null,r.map(a=>s(a)))),hi.default.createElement(P.BarSeparator,null))})});var yo,qq,pmt,hmt,Yq;var Jq=d(()=>{yo=y(require("react"));A();qq=y(require("styled-components"));R();We();et();Se();Xt();pmt=(0,qq.default)(Ie)`
  height: 40px;
`;hmt=({textDesignTool:i,custom:t})=>{const e=i.locale.controls;const r=i.localeColor.colorPicker;const{colorList:o}=i;const n=t.getButton("toolControlBarSecondaryButton");const s=t.getButton("toolControlBarPrimaryButton");return yo.default.createElement(P.ControlsbarContainer,{show:true},s&&yo.default.createElement("div",null,yo.default.createElement(s,{tool:"textdesign",ariaLabel:e.buttonNew,onClick:i.add,icon:yo.default.createElement(Re.addText,null),label:e.buttonNew})),yo.default.createElement(P.Other.ControlsWrapper,null,yo.default.createElement(B.Input.Selection,{isDisabled:!i.isTextDesignSelected,label:e.selectColor},yo.default.createElement(pmt,{tool:"textdesign",activeSprite:i.id,activeColor:i.color,colors:o,labelsColor:r,colorPickerDirection:"top",isDisabled:!i.isTextDesignSelected,onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))),n&&yo.default.createElement("div",null,yo.default.createElement(n,{tool:"textdesign",ariaLabel:e.buttonShuffle,onClick:i.changeSeed,icon:yo.default.createElement(Re.shuffle,null),label:e.buttonShuffle})),yo.default.createElement(P.BarSeparator,null))};Yq=it("textDesignTool","custom")(S(hmt))});var Zq,Qq;var tY=d(()=>{Zq=y(require("react"));A();We();H();Qq=S(()=>{const{transformTool:i}=I();const t=i.locale.controls;const{forceDimensions:e}=i;return Zq.default.createElement(ff,{isDisabled:e,showLabel:false,valueHeight:i.localOutputHeight,valueWidth:i.localOutputWidth,onSubmitWidth:i.onPixelWidth,onSubmitHeight:i.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth,ariaLabelHeight:t.inputHeightAriaLabel,ariaLabelWidth:t.inputWidthAriaLabel})})});var eY=d(()=>{tY()});var iY,rY;var oY=d(()=>{iY=y(require("react"));We();rY=()=>iY.default.createElement(hf,null)});var nY=d(()=>{oY()});var sY,aY;var lY=d(()=>{sY=y(require("react"));A();R();H();aY=S(()=>{const{transformTool:i,custom:t}=I();const e=i.locale.controls;const{forceDimensions:r}=i;const o=t.getCheckbox();if(!o){return null}return sY.default.createElement(o,{tool:"transform",isDisabled:r,style:{paddingTop:"5px",justifyContent:"center"},value:i.lockResolution,checkMarkPosition:"left",label:e.checkboxKeepResolution,onClick:i.changeLockResolution})})});var cY=d(()=>{lY()});var Pi,c0,fmt,SD,uY,gmt,dY;var mY=d(()=>{Pi=y(require("react"));A();c0=y(require("styled-components"));R();Cr();H();Se();Xt();eY();nY();cY();fmt=P.ResponsiveTabWrapper;({Tab:SD}=P);uY=c0.css`
  min-width: unset;
`;gmt=(0,c0.default)(P.Other.ControlsWrapper)`
  min-width: 365px;

  ${i=>i.smallContainer&&uY}
  @media all and (min-width: 0) and (max-width: 599px) {
    ${uY}
  }
`;dY=S(()=>{const{transformTool:i,custom:t}=I();const{rect:e}=(0,Pi.useContext)(Fe);const{config:r}=i;const{basicUIToolControlBarTabsOrder:o}=r;const n=i.locale.controls;const s=t.getButton("toolControlBarSecondaryButton");const a=l=>{switch(l){case"flipRotate":return Pi.default.createElement(SD,{key:l,label:n.tabFlipAndRotate},Pi.default.createElement(rY,null));case"resolution":return Pi.default.createElement(SD,{key:l,label:n.tabResolution},Pi.default.createElement(aY,null));case"cropSize":return Pi.default.createElement(SD,{key:l,label:n.tabCropSize},Pi.default.createElement(Qq,null));default:return null}};return Pi.default.createElement(P.ControlsbarContainer,{show:true},s&&Pi.default.createElement("div",null,Pi.default.createElement(s,{tool:"transform",ariaLabel:i.locale.controls.buttonReset,onClick:i.reset,icon:Pi.default.createElement(Re.reset,null),label:i.locale.controls.buttonReset})),Pi.default.createElement(gmt,{smallContainer:!!e&&e.width<600},Pi.default.createElement(fmt,null,o.map(l=>a(l)))),Pi.default.createElement(P.BarSeparator,null))})});var De,pY;var hY=d(()=>{De=y(require("react"));A();R();et();H();vX();PX();HX();VX();oq();sq();bq();Iq();Xq();Jq();mY();pY=S(function i(){const{active:t,custom:e}=I();const r=t.tool;const o=e.getBasicToolControlBar();if(!o){return null}return De.default.createElement(o,{show:!!r,tool:r},De.default.createElement(B.Switch.Index,{type:r},De.default.createElement(B.Switch.Case,{value:"filter"},De.default.createElement(NX,null)),De.default.createElement(B.Switch.Case,{value:"focus"},De.default.createElement(GX,null)),De.default.createElement(B.Switch.Case,{value:"adjustment"},De.default.createElement(xX,null)),De.default.createElement(B.Switch.Case,{value:"overlay"},De.default.createElement(gq,null)),De.default.createElement(B.Switch.Case,{value:"sticker"},De.default.createElement(kq,null)),De.default.createElement(B.Switch.Case,{value:"text"},De.default.createElement(Kq,null)),De.default.createElement(B.Switch.Case,{value:"textdesign"},De.default.createElement(Yq,null)),De.default.createElement(B.Switch.Case,{value:"library"},De.default.createElement(nq,null)),De.default.createElement(B.Switch.Case,{value:"frame"},De.default.createElement(rq,null)),De.default.createElement(B.Switch.Case,{value:"brush"},De.default.createElement(BX,null)),De.default.createElement(B.Switch.Case,{value:"transform"},De.default.createElement(dY,null))))})});var Um,fY,bmt,ymt,gY;var bY=d(()=>{Um=y(require("react"));A();fY=y(require("styled-components"));R();Se();z();Xt();bmt=fY.default.div`
  position: relative;
  top: -8px;
  color: ${i=>i.theme.card.foreground};
`;ymt=({adjustmentsTool:i})=>{const t=(e,r)=>{const o=CL[e.identifier];return Um.default.createElement(P.Card,{"data-test":e.identifier,tool:"adjustment",type:"medium",onClick:()=>i.toggleOptionSelection(e.identifier),isActive:e.identifier===i.selectedAdjustmentType,key:`${e.identifier}-${r}`,label:e.name,style:{animationDelay:`${Tt(r)}s`}},Um.default.createElement(bmt,null,Um.default.createElement(o,null)),Um.default.createElement(P.CardLabel,null,i.locale.items[e.identifier]||e.name))};return Um.default.createElement(P.CardContainer,null,i.items.map(t))};gY=it("adjustmentsTool")(S(ymt))});var yY,_Y;var xY=d(()=>{yY=y(require("react"));R();H();_Y=()=>{const{config:i}=I();const t=i.state.config["customTool"].toolControlBar;return yY.default.createElement(t,{language:i.state.locale["customTool"]})}});var vY=d(()=>{xY()});var Jn,Zf;var CY=d(()=>{Jn=y(require("react"));A();R();z();Xt();Zf=class extends Jn.default.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{filterTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{var n,s;const{filterTool:r}=this.props;const o=(s=(n=r.locale)==null?void 0:n.controls)==null?void 0:s.itemAriaLabel;return Jn.default.createElement(P.Card,{tool:"filter",type:"medium",onClick:()=>r.selectFilter(t.identifier,t.defaultIntensity),isActive:r.identifier===t.identifier,key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,"aria-label":o==null?void 0:o.replace(`\${label}`,t.name),style:{animationDelay:`${Tt(e)}s`}},Jn.default.createElement(P.CardLabel,{withBackground:true},r.locale.categories[t.identifier]||r.locale.items[t.identifier]||t.name))};this.renderCategory=(t,e)=>{var l;const{filterTool:r}=this.props;const{selectedCategoryIdentifier:o,locale:n}=r;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===t.identifier;if(!t.items)return null;return Jn.default.createElement(P.CategoryContainer,{key:t.identifier},Jn.default.createElement(P.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,t.name),tool:"filter",type:"large",onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${Tt(e)}s`}},Jn.default.createElement(P.CardLabel,{withBackground:true},t.name)),Jn.default.createElement(P.ExpandableContainer,{show:a},t.items.map(this.renderItem)))}}render(){const{filterTool:t}=this.props;const{categories:e,config:r,items:o}=t;if(r.flattenCategories)return Jn.default.createElement(P.CardContainer,null,o.map(this.renderItem));return Jn.default.createElement(P.CardContainer,null,e.map(this.renderCategory))}};Zf=f([it("filterTool","active"),S],Zf)});var u0,_mt,SY;var wY=d(()=>{u0=y(require("react"));A();R();z();Xt();_mt=({focusTool:i})=>{var o,n;const t=(n=(o=i.locale)==null?void 0:o.controls)==null?void 0:n.itemAriaLabel;const e=s=>{i.selectFocus(s)};const r=(s,a)=>u0.default.createElement(P.Card,{isActive:s.identifier===i.identifier,tool:"focus",type:"medium",onClick:()=>e(s.identifier),key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,"aria-label":t==null?void 0:t.replace(`\${label}`,s.name),style:{animationDelay:`${Tt(a)}s`}},u0.default.createElement(P.CardLabel,{withBackground:true},i.locale.items[s.identifier]||s.name));return u0.default.createElement(P.CardContainer,null,i.items.map(r))};SY=it("focusTool")(S(_mt))});var d0,xmt,TY;var kY=d(()=>{d0=y(require("react"));A();R();z();Xt();xmt=({frameTool:i})=>{var o,n;const t=i.identifier;const e=(n=(o=i.locale)==null?void 0:o.controls)==null?void 0:n.itemAriaLabel;const r=(s,a)=>d0.default.createElement(P.Card,{tool:"frame",type:"medium",onClick:()=>i.selectFrame(s.identifier),isActive:s.identifier===t,key:`${s.identifier}-${a}`,image:s.thumbnailURI,label:s.name,"aria-label":e==null?void 0:e.replace(`\${label}`,s.name),style:{animationDelay:`${Tt(a)}s`,backgroundSize:"60%"}}," ",d0.default.createElement(P.CardLabel,{hidden:true},i.locale.items[s.identifier]||s.name));return d0.default.createElement(P.CardContainer,null,i.items.map(r))};TY=it("frameTool")(S(xmt))});var IY,DY;var EY=d(()=>{IY=y(require("styled-components"));DY=IY.default.p`
  height: ${i=>i.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`});var FY=d(()=>{EY()});var Jo,Qf;var RY=d(()=>{Jo=y(require("react"));A();R();z();Xt();FY();Qf=class extends Jo.default.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{library:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{var s,a;const{active:r,library:o}=this.props;const n=(a=(s=o.locale)==null?void 0:s.controls)==null?void 0:a.itemAriaLabel;return Jo.default.createElement(P.Card,{tool:"library",type:"medium",onClick:()=>r.newImage(t.rawUrl),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,"aria-label":n==null?void 0:n.replace(`\${label}`,t.name),style:{animationDelay:`${Tt(e)}s`}})};this.renderCategory=(t,e)=>{var l;const{library:r}=this.props;const{selectedCategoryIdentifier:o,locale:n}=r;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===t.identifier;if(!t.items)return null;return Jo.default.createElement(P.CategoryContainer,{key:t.identifier},Jo.default.createElement(P.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,t.name),tool:"library",type:"large",onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${Tt(e)}s`}},Jo.default.createElement(P.CardLabel,{withBackground:true},t.name)),Jo.default.createElement(P.ExpandableContainer,{show:a},t.items.map(this.renderItem)))}}render(){const{library:t}=this.props;const{query:e,categories:r,items:o,locale:n,config:s}=t;if(e){return o.length?Jo.default.createElement(P.CardContainer,null,o.map(this.renderItem)):Jo.default.createElement(DY,{"data-test":U.NoResult},n.controls.noResults)}if(s.flattenCategories)return Jo.default.createElement(P.CardContainer,null,o.map(this.renderItem));return Jo.default.createElement(P.CardContainer,null,r.map(this.renderCategory))}};Qf=f([it("library","active"),S],Qf)});var m0,vmt,OY;var AY=d(()=>{m0=y(require("react"));A();R();z();Xt();vmt=({overlayTool:i})=>{var a;const{identifier:t,items:e,selectOverlay:r,locale:o}=i;const n=(a=o.controls)==null?void 0:a.itemAriaLabel;const s=(l,c)=>m0.default.createElement(P.Card,{tool:"overlay",type:"medium",onClick:()=>r(l.identifier),isActive:l.identifier===t,key:`${l.identifier}-${c}`,image:l.thumbnailURI,label:l.name,"aria-label":n==null?void 0:n.replace(`\${label}`,l.name),style:{animationDelay:`${Tt(c)}s`}},m0.default.createElement(P.CardLabel,{withBackground:true},o.items[l.identifier]||l.name));return m0.default.createElement(P.CardContainer,null,e.map(s))};OY=it("overlayTool")(S(vmt))});var Zn,tg;var BY=d(()=>{Zn=y(require("react"));A();R();z();Xt();tg=class extends Zn.default.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{stickerTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{var n,s;const{stickerTool:r}=this.props;const o=(s=(n=r.locale)==null?void 0:n.controls)==null?void 0:s.itemAriaLabel;return Zn.default.createElement(P.Card,{tool:"sticker",type:"medium",onClick:()=>r.add(t.identifier),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,"aria-label":o==null?void 0:o.replace(`\${label}`,t.name),style:{backgroundSize:"55%",animationDelay:`${bb(e)}s`}},Zn.default.createElement(P.CardLabel,{hidden:true},r.locale.items[t.identifier]||t.name))};this.renderCategory=(t,e)=>{var l;const{stickerTool:r}=this.props;const{selectedCategoryIdentifier:o,locale:n}=r;const s=(l=n.controls)==null?void 0:l.categoryAriaLabel;const a=o===t.identifier;if(!t.items)return null;return Zn.default.createElement(P.CategoryContainer,{key:t.identifier},Zn.default.createElement(P.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,t.name),tool:"sticker",type:"large",onClick:()=>this.onCategoryClick(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${Tt(e)}s`}},Zn.default.createElement(P.CardLabel,{withBackground:true},n.categories[t.identifier]||t.name)),Zn.default.createElement(P.ExpandableContainer,{show:a},t.items.map(this.renderItem)))}}render(){const{stickerTool:t}=this.props;const{categories:e,items:r,config:o}=t;if(o.flattenCategories)return Zn.default.createElement(P.CardContainer,null,r.map(this.renderItem));return Zn.default.createElement(P.CardContainer,null,e.map(this.renderCategory))}};tg=f([it("stickerTool","active"),S],tg)});var eg,PY,Cmt,MY,LY;var zY=d(()=>{eg=y(require("react"));A();PY=y(require("styled-components"));R();Kt();z();Xt();Cmt=PY.default.div`
  font-size: 20px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: left top;
`;MY=class extends eg.default.Component{constructor(){super(...arguments);this.getWidth=({fontFamily:t,fontStyle:e,fontWeight:r},o)=>{const n=document.createElement("canvas");const s=n.getContext("2d");s.font=`${e} ${r} 20px ${t}`;s.fillText(o,0,0);return s.measureText(o).width};this.renderItem=(t,e)=>{const{config:r,textTool:o}=this.props;const{fontFamily:n,fontWeight:s,fontStyle:a,identifier:l}=t;const c=`${t.fontFamily} ${ft.getDisplayFontStyle(t)}`;const u=this.getWidth(t,c);const m=(r.measurements.basicCard.medium.width-20)/u;return eg.default.createElement(P.Card,{tool:"text",type:"medium",onClick:()=>o.changeFont(l),isDisabled:!this.textTool.isTextSelected,isActive:o.identifier===l,key:`${t.identifier}-${e}`,label:c,style:{animationDelay:`${Tt(e)}s`}},eg.default.createElement(Cmt,{style:{transform:`scale(${m}) translate(-50%, -50%)`,fontFamily:n,fontStyle:a,fontWeight:s}},c))}}get textTool(){return this.props.textTool}render(){const{textTool:t}=this.props;const{fontsLoaded:e,fontFamilies:r}=t;if(!e)return null;return eg.default.createElement(P.CardContainer,null,r.map(this.renderItem))}};LY=it("textTool","config")(S(MY))});var p0,Smt,UY;var NY=d(()=>{p0=y(require("react"));A();R();z();Xt();Smt=({textDesignTool:i})=>{var l;const{items:t,changeIdentifier:e,isTextDesignSelected:r,identifier:o,locale:n}=i;const s=(l=n.controls)==null?void 0:l.itemAriaLabel;const a=(c,u)=>{return p0.default.createElement(P.Card,{tool:"textdesign",type:"medium",onClick:()=>e(c.identifier),isDisabled:!r,isActive:o===c.identifier,key:`${c.identifier}-${u}`,image:c.thumbnailURI,label:c.name,"aria-label":s==null?void 0:s.replace(`\${label}`,c.name),style:{animationDelay:`${Tt(u)}s`,backgroundSize:"60%"}},p0.default.createElement(P.CardLabel,{hidden:true},c.name))};return p0.default.createElement(P.CardContainer,null,t.map(a))};UY=it("textDesignTool")(S(Smt))});var _r,wD,wmt,Tmt,ig;var HY=d(()=>{_r=y(require("react"));A();wD=y(require("styled-components"));R();Se();z();Xt();wmt=wD.default.div`
  svg {
    margin-bottom: 12px;
  }
`;Tmt=wD.default.div`
  svg {
    width: ${i=>i.theme.measurements.basicCard.medium.height}px;
    height: ${i=>i.theme.measurements.basicCard.medium.height}px;
  }

  ${Ui} {
    width: ${i=>i.theme.measurements.basicCard.medium.width-32}px;
    height: ${i=>i.theme.measurements.basicCard.medium.height-32}px;
    padding: 6px 0px 24px;
  }
`;ig=class extends _r.default.Component{constructor(){super(...arguments);this.onCategoryClick=t=>{const{transformTool:e}=this.props;e.toggleCategorySelection(t)};this.renderItem=(t,e)=>{var p;const{transformTool:r,config:o}=this.props;const{locale:n,identifier:s}=r;const a=(p=n.controls)==null?void 0:p.itemAriaLabel;const l=r.checkIfTransformThumbnailExits(t.thumbnailURI);const c=Gt.crops[t.identifier]||Gt.crops.imgly_transform_common_custom;const u=_r.default.createElement(P.CardLabel,null,n.items[t.identifier]||t.name);const m=l?u:_r.default.createElement(Tmt,null,_r.default.createElement(c,{main:o.theme.transform.crops.main,highlight:o.theme.transform.crops.highlight,shadow:o.theme.transform.crops.shadow}),u);return _r.default.createElement(P.Card,{tool:"transform",type:"medium",onClick:()=>r.changeIdentifier(t.identifier,true),key:`${t.identifier}-${e}`,image:t.thumbnailURI,label:t.name,"aria-label":a==null?void 0:a.replace(`\${label}`,t.name),isActive:t.identifier===s,style:{backgroundSize:"55%",animationDelay:`${Tt(e)}s`}},m)};this.renderCategory=(t,e)=>{var m;const{transformTool:r}=this.props;const{selectedCategoryIdentifier:o,locale:n}=r;const s=(m=n.controls)==null?void 0:m.categoryAriaLabel;const a=o===t.identifier;if(!t.items)return null;const l=r.checkIfTransformThumbnailExits(t.thumbnailURI);const c=_r.default.createElement(P.CardLabel,null,n.categories[t.identifier]||t.name);const u=l?c:_r.default.createElement(wmt,null,Gt.categories[t.identifier]&&_r.default.createElement(Gt.categories[t.identifier]),c);return _r.default.createElement(P.CategoryContainer,{key:t.identifier},_r.default.createElement(P.Card,{role:"button","aria-expanded":a,"aria-label":s==null?void 0:s.replace(`\${label}`,t.name),tool:"transform",type:"large",onClick:()=>this.onCategoryClick(t.identifier),image:l?t.thumbnailURI:"",label:t.name,style:{animationDelay:`${Tt(e)}s`}},u),_r.default.createElement(P.ExpandableContainer,{show:a},t.items.map(this.renderItem)))}}render(){const{transformTool:t}=this.props;const{categories:e,config:r,items:o}=t;if(r.flattenCategories)return _r.default.createElement(P.CardContainer,null,o.map(this.renderItem));return _r.default.createElement(P.CardContainer,null,e.map(this.renderCategory))}};ig=f([it("transformTool","config"),S],ig)});var tr,WY;var GY=d(()=>{tr=y(require("react"));A();R();H();bY();vY();CY();wY();kY();RY();AY();BY();zY();NY();HY();WY=S(function i(){const{active:t,library:e,custom:r}=I();const o=t.tool;const n=(0,tr.useMemo)(()=>{switch(o){case"library":return tr.default.createElement(Qf,null);case"filter":return tr.default.createElement(Zf,null);case"focus":return tr.default.createElement(SY,null);case"adjustment":return tr.default.createElement(gY,null);case"overlay":return tr.default.createElement(OY,null);case"sticker":return tr.default.createElement(tg,null);case"text":return tr.default.createElement(LY,null);case"textdesign":return tr.default.createElement(UY,null);case"frame":return tr.default.createElement(TY,null);case"transform":return tr.default.createElement(ig,null);case"customTool":return tr.default.createElement(_Y,null);default:return null}},[o]);const s=r.getBasicToolItemsBar();if(!s||o==="brush"||o==="library"&&!e.libraryProvider){return null}return tr.default.createElement(s,{show:!!o},n)})});var xr,VY,kmt,rg;var jY=d(()=>{xr=y(require("react"));A();VY=y(require("styled-components"));We();ZI();QI();et();z();yX();hY();GY();kmt=VY.default.div`
  position: absolute;
  width: 100%;
  height: ${i=>i.theme.measurements.basicUIToolControlBar.maxHeight}px;
  bottom: 0;
  left: 0;
  background: ${i=>i.theme.webcam.backdrop};
  z-index: ${i=>i.theme.measurements.zIndex.disable};
`;rg=class extends xr.default.Component{static getDerivedStateFromError(t){console.error(t);return{hasError:true}}render(){const{active:t,custom:e}=this.props;const r=e.getWindowContainer();return xr.default.createElement(B.Container,{"data-test":U.EditorContainer},t.isWebcam?xr.default.createElement(kmt,null):null,xr.default.createElement(Em,null),xr.default.createElement(Va,null,xr.default.createElement(xm,null),r&&xr.default.createElement(r,{tool:t.tool},xr.default.createElement(Sf,null,t.isWebcam?xr.default.createElement(Cf,null):null,t.image&&xr.default.createElement(Im,null))),xr.default.createElement(pY,null),xr.default.createElement(WY,null),xr.default.createElement(bX,null)))}};rg=f([it("active","custom"),S],rg)});var og,$Y,TD;var KY=d(()=>{og=y(require("react"));A();$Y=require("styled-components");We();Xt();jY();TD=class extends og.default.Component{constructor(){super(...arguments);this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:t,storeProps:e}=this.props;this.editor=t;this.storeProps=e;const r=new Dm(this.editor.configStore.config.custom.components,{basicUIToolbar:P.Toolbar.Index,basicUIToolControlBar:P.Controlsbar,basicUIToolItemsBar:P.Itemsbar});const o={getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox,getSlider:r.getSlider,getBasicToolbar:r.getBasicToolbar,getBasicToolControlBar:r.getBasicToolControlBar,getBasicToolItemsBar:r.getBasicToolItemsBar,getWindowContainer:r.getWindowContainer};this.storeProps.custom=o;this.forceUpdate()}render(){return this.storeProps?og.default.createElement(tp,{...this.storeProps},og.default.createElement($Y.ThemeProvider,{theme:{...this.editor.configStore.theme,measurements:this.editor.configStore.measurements}},og.default.createElement(rg,null))):null}}});var XY={};ue(XY,{default:()=>TD});var qY=d(()=>{KY()});var gpt={};ue(gpt,{AdjustmentConfiguration:()=>Xg,AdjustmentIdentifier:()=>Xu,AdjustmentIdentifierKeys:()=>_C,AdvancedAdjustmentControlBarItem:()=>xC,AdvancedBrushControlBarItem:()=>NC,AdvancedFilterControlBarItem:()=>vC,AdvancedFocusControlBarItem:()=>wC,AdvancedFrameControlBarItem:()=>TC,AdvancedLibraryControlBarItem:()=>RC,AdvancedOverlayControlBarItem:()=>OC,AdvancedStickerControlBarItem:()=>BC,AdvancedTextControlBarItem:()=>MC,AdvancedTextDesignControlBarItem:()=>WC,AdvancedTransformControlBarItem:()=>GC,AdvancedUICardLabel:()=>Ce,AdvancedUICategoryCard:()=>apt,AdvancedUIControlsBarSection:()=>mpt,AdvancedUIItemCard:()=>lpt,AdvancedUIToolControlBar:()=>dpt,AdvancedUIToolbar:()=>upt,AdvancedUIToolbarItem:()=>zf,AlignmentMode:()=>ER,BasicBrushControlBarTabs:()=>HC,BasicFilterControlBarTabs:()=>CC,BasicFocusControlBarTabs:()=>tO,BasicFrameControlBarTabs:()=>kC,BasicOverlayControlBarTabs:()=>AC,BasicStickerControlBarTabs:()=>PC,BasicTextControlBarTabs:()=>LC,BasicTransformControlBarTabs:()=>VC,BasicUIToolControlBar:()=>hpt,BasicUIToolItemsBar:()=>fpt,BasicUIToolbar:()=>ppt,BlendMode:()=>mn,BrushConfiguration:()=>sb,CanvasAction:()=>To,CanvasBarTextSecondaryButton:()=>gy,CardAvatar:()=>Yl,CardType:()=>ze,CategoryHeaderType:()=>cn,Checkbox:()=>Ymt,CheckboxBase:()=>Jmt,CheckboxCheckMark:()=>Qmt,CheckboxInput:()=>Zmt,ColorItem:()=>Pmt,ColorItemActiveOverlay:()=>Umt,ColorItemBackground:()=>Lmt,ColorItemBase:()=>Mmt,ColorItemTiledBackground:()=>zmt,Configuration:()=>HR,ContainedPrimaryButton:()=>zp,Container:()=>Amt,CustomToolConfiguration:()=>XR,Dialog:()=>Nmt,DialogBackdrop:()=>Gmt,DialogBase:()=>Hmt,DialogBody:()=>jmt,DialogContainer:()=>Wmt,DialogFooter:()=>$mt,DialogHeader:()=>Vmt,DialogSpinner:()=>Kmt,Dropdown:()=>tpt,DropdownCaret:()=>Yb,EventEmitter:()=>wr,ExportConfiguration:()=>OR,ExportFormat:()=>Hl,FilterCategoryIdentifier:()=>lp,FilterConfiguration:()=>qg,FilterIdentifier:()=>ap,FocusConfiguration:()=>Yg,FocusIdentifier:()=>ls,FrameConfiguration:()=>Jg,IconButton:()=>ps,ImageFormat:()=>dn,ImageMimeType:()=>sp,Label:()=>qmt,LibraryCategory:()=>Zg,LibraryConfiguration:()=>ib,LibraryImage:()=>Qg,LibraryProvider:()=>eb,ModalType:()=>un,OutlinedPrimaryButton:()=>Lp,OutlinedSecondaryButton:()=>Da,OverlayConfiguration:()=>rb,OverlayIdentifier:()=>cp,PhotoEditorSDKUI:()=>ZY,PhotoEditorSDKUIComponent:()=>tJ,SearchField:()=>cpt,SerializationExportType:()=>RR,Slider:()=>ept,SliderBase:()=>ipt,SliderContainer:()=>rpt,SliderIdentifier:()=>Xe,SliderInput:()=>opt,SliderLabel:()=>spt,SliderTrack:()=>npt,SnappingConfiguration:()=>$g,SpriteActionButton:()=>yn,StickerConfiguration:()=>ob,TextConfiguration:()=>nb,TextDesignConfiguration:()=>ab,TextPrimaryButton:()=>Kl,TextSecondaryButton:()=>Ro,Tool:()=>N,TransformConfiguration:()=>lb,TransformIdentifier:()=>jC,UIEvent:()=>up,WatermarkConfiguration:()=>Kg,WindowContainer:()=>Lv,calculateAdvancedUIToolControlBarMeasurements:()=>Pk,deepmergeAll:()=>Ei,defaultConfig:()=>yl,isDuoToneFilterAsset:()=>qu,isExistingCategory:()=>_Q,isExistingItem:()=>yQ,isGoogleFontAsset:()=>UC,isLUTFilterAsset:()=>SC,isWebFontAsset:()=>zC,useGetImage:()=>Rmt,useIsLayoutAdvanced:()=>Omt,useSetImage:()=>Fmt});wt();var Uf=y(require("react"));A();var sK=require("styled-components");We();var SV=y(require("react"));R();var gV=y(require("react"));var bV=y(require("styled-components"));et();var Xut=(0,bV.default)(Ir)`
  width: ${i=>i.theme.measurements.advancedUICard.large.width}px;
  height: ${i=>i.theme.measurements.advancedUICard.large.height}px;
  margin-bottom: ${i=>i.theme.measurements.advancedUISpacer}px;
  color: ${i=>i.theme.card.foreground};
`;var qut=({isActive:i,...t})=>{return gV.default.createElement(Xut,{...t})};var yV=qut;var _V=y(require("styled-components"));et();var xV=(0,_V.default)(Ir)`
  width: ${i=>i.theme.measurements.advancedUICard.medium.width}px;
  height: ${i=>i.theme.measurements.advancedUICard.medium.height}px;
  margin-bottom: ${i=>i.theme.measurements.advancedUISpacer}px;
  color: ${i=>i.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${i=>i.theme.measurements.advancedUISpacer}px;
  }
`;var vV=y(require("styled-components"));et();var CV=(0,vV.default)(Ir)`
  width: ${i=>i.theme.measurements.advancedUICard.small.width}px;
  height: ${i=>i.theme.measurements.advancedUICard.small.height}px;
  margin-bottom: ${i=>i.theme.measurements.advancedUISpacer}px;
  color: ${i=>i.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${i=>i.theme.measurements.advancedUISpacer}px;
  }
`;var gf=({type:i,...t})=>{const e=i==="large";const r=i==="small";let o=xV;if(e){o=yV}else if(r){o=CV}return SV.default.createElement(o,{type:i,...t})};var wV=y(require("styled-components"));z();var Uv=wV.default.div.attrs(i=>({"data-test":i["data-test"]||U.CardContainer}))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${i=>i.theme.measurements.advancedUIToolControlBar.width-48}px;
`;var TV=y(require("react"));var bf=y(require("styled-components"));z();var Yut=bf.default.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${i=>i.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${i=>i.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${i=>i.theme.measurements.zIndex.toolControlBar};

  background: ${i=>i.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${i=>!i.reverse?bf.css`
          border-right: 1px solid ${i.theme.toolControlBar.borderColor};
        `:bf.css`
          border-left: 1px solid ${i.theme.toolControlBar.borderColor};
        `}
`;var kV=({reverse:i=false,style:t,className:e,children:r})=>TV.default.createElement(Yut,{"data-test":U.ToolControlBar,reverse:i,className:e,style:t},r);var Fm=y(require("styled-components"));z();var IV=Fm.default.div.attrs(()=>({"data-test":U.CategoryItemsContainer}))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${i=>i.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:i})=>i&&Fm.css`
      opacity: 1;
      visibility: visible;
      ${xe()?Fm.css`
            display: block;
          `:Fm.css`
            display: flex;
          `}
    `}
`;var HI=y(require("react"));var WI=y(require("styled-components"));et();z();var Jut=(0,WI.default)(l1)`
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};

  /* the padding and margin should only be applied to the children */
  margin: 0 !important;
  padding: 0 !important;
`;var Zut=WI.default.div`
  display: flex;
  flex-direction: column;

  > * {
    margin-left: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingRight}px;
    margin-bottom: ${i=>i.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`;var DV=({show:i,children:t})=>{return HI.default.createElement(Jut,{duration:300,height:i?"auto":0,easing:"ease-in-out",animateOpacity:true},HI.default.createElement(Zut,{"data-test":U.ToolControlBarExpandableControls},t))};var Nv=y(require("styled-components"));et();z();var yf=(0,Nv.default)(Fo)`
  position: relative;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  color: ${i=>i.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>{if(xe()||Sr()){return Nv.css`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `}return""}}
`;yf.defaultProps={direction:"vertical"};var Hv=y(require("styled-components"));var Qut=Hv.default.div`
  position: relative;
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${i=>i.full?Hv.css`
            left: -${3*i.theme.measurements.advancedUISpacer/2}px;
            width: calc(
              100% + ${3*i.theme.measurements.advancedUISpacer}px
            );
          `:`
      left: ${3*i.theme.measurements.advancedUISpacer/2}px;
      width: calc(100% - ${3*i.theme.measurements.advancedUISpacer}px);
    `}
    border-bottom: 2px solid ${i=>i.theme.toolControlBar.separatorColor};
  }
`;var Wv=Qut;var EV=y(require("styled-components"));var tdt=EV.default.h2`
  color: ${i=>i.theme.toolControlBar.titleForeground};
  font-size: ${i=>i.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${i=>2*i.theme.measurements.advancedUISpacer}px;
  margin-top: 0;
`;var Gv=tdt;var na=y(require("react"));var FV=y(require("styled-components"));et();z();var edt=FV.default.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`;var RV=({name:i,isFirstCategory:t,isLastCategory:e,children:r})=>{return na.default.createElement(edt,null,!t&&na.default.createElement(B.Spacer,{count:2}),na.default.createElement(Gv,{"data-test":i},i),na.default.createElement(Uv,{"data-test":U.CategoryItemsContainer},r),!e&&na.default.createElement(na.default.Fragment,null,na.default.createElement(B.Spacer,{count:2}),na.default.createElement(Wv,{full:true})))};var OV=y(require("styled-components"));var idt=OV.default.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${i=>i.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${i=>i.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${i=>i.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${i=>i.theme.measurements.fontSystem.headline1.case};
  background: ${i=>i.theme.toolControlBar.background};
  color: ${i=>i.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${i=>i.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
  /* prevent the padding from leaving the width of the parent  */
  box-sizing: border-box;
`;var AV=idt;var BV=y(require("react"));var PV=y(require("styled-components"));H();var rdt=PV.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;

  overflow-y: auto;
  overflow-x: hidden;

  /* calculate the max-height based on the padding and if the heading is used */
  max-height: calc(
    100% -
      ${i=>i.theme.measurements.advancedUIToolControlBar.paddingBottom+i.theme.measurements.advancedUIToolControlBar.paddingTop}px -
      ${i=>i.displayTitle?i.theme.measurements.mainCanvasActionBar.height-2:"0"}px
  );

  padding-top: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingTop}px;
  padding-bottom: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingBottom}px;

  > * {
    margin-left: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    margin-right: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  /* The scrollable content needs a padding for the scrollbar position */
  > ${yf} {
    margin-left: 0px;
    margin-right: 0px;
    padding-left: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingLeft}px;
    padding-right: ${i=>i.theme.measurements.advancedUIToolControlBar.paddingRight}px;
  }

  > :not(:last-child) {
    margin-bottom: ${i=>i.theme.measurements.advancedUIToolControlBar.controls.gutter}px;
  }
`;var MV=({children:i})=>{const{config:t}=I();const e=t.config.displayToolControlBarTitle;return BV.default.createElement(rdt,{displayTitle:e},i)};var GI=y(require("react"));var Rm=y(require("styled-components"));et();z();var odt=Rm.default.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${i=>i.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${i=>i.theme.measurements.zIndex.toolbar};

  background-color: ${i=>i.theme.toolbar.background};
  color: ${i=>i.theme.toolbar.foreground};
  ${i=>{const t=i.theme.toolbar.border?i.theme.toolbar.border:Rm.css`
          1px solid ${i.theme.toolbar.borderColor};
        `;return!i.reverse?Rm.css`
          border-right: ${t};
        `:Rm.css`
          border-left: ${t};
        `}}
  margin-bottom: ${i=>i.theme.measurements.advancedUIToolbar.marginBottom}px;
`;var LV=({reverse:i,style:t,className:e,children:r})=>{return GI.default.createElement(odt,{reverse:i,"data-test":U.Toolbar,className:e,style:t},GI.default.createElement(Fo,{direction:"vertical"},r))};var VI=y(require("react"));var xu=y(require("styled-components"));et();z();var ndt=(0,xu.default)(Ro)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${xe()?xu.css`
        background-color: transparent;
      `:xu.css`
        background-color: inherit;
      `}

  ${i=>i.isActive&&xu.css`
      background-color: ${i.theme.toolbar.activeBackground};
      color: ${i.theme.toolbar.activeForeground};

      svg {
        color: ${i.theme.toolbar.activeForeground};
      }
    `}
`;var sdt=xu.default.li.attrs({"aria-haspopup":true,"aria-hidden":true,role:"menuitem"})`
  height: ${i=>i.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`;var zV=i=>VI.default.createElement(sdt,null,VI.default.createElement(ndt,{...i,"data-test":U.ToolbarItem}));var UV=y(require("styled-components"));var adt=UV.default.li.attrs({role:"none"})`
  height: ${i=>i.theme.measurements.advancedUIToolbar.separatorHeight}px;
  cursor: pointer;
  position: relative;
`;var NV=adt;var Su=y(require("react"));var _f=require("react");var ane=y(require("react"));var Qi=require("react");var cdt=y(VV());var jV=udt()?Qi.useLayoutEffect:Qi.useEffect;if(false){lne=typeof process!=="undefined"?process:{env:{NODE_ENV:"development"}},cne=lne.env;checkStyles=function i(t){if(checkedPkgs[t])return;checkedPkgs[t]=true;if(cne.NODE_ENV!=="test"&&parseInt(window.getComputedStyle(document.body).getPropertyValue("--reach-"+t),10)!==1){console.warn("@reach/"+t+' styles not found. If you are using a bundler like webpack or parcel include this in the entry file of your app before any of your own styles:\n\n    import "@reach/'+t+`/styles.css";

  Otherwise you'll need to include them some other way:

    <link rel="stylesheet" type="text/css" href="node_modules/@reach/`+t+'/styles.css" />\n\n  For more information visit https://ui.reach.tech/styling.\n  ')}}}var lne;var cne;var une=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();function udt(){return!!(typeof window!=="undefined"&&window.document&&window.document.createElement)}if(false){useControlledSwitchWarning=function i(t,e,r){var o=(0,Qi.useRef)(t!=null);var n=(0,Qi.useRef)({componentName:r,controlledPropName:e});(0,Qi.useEffect)(function(){n.current={componentName:r,controlledPropName:e}},[r,e]);(0,Qi.useEffect)(function(){var s=o.current;var a=n.current,l=a.componentName,c=a.controlledPropName;var u=t!=null;if(s!==u){console.error("A component is changing an "+(s?"":"un")+"controlled `"+c+"` state of "+l+" to be "+(s?"un":"")+"controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled "+l+" element for the lifetime of the component.\nMore info: https://fb.me/react-controlled-components")}},[t])}}if(false){useCheckStyles=function i(t){var e=(0,Qi.useRef)(t);(0,Qi.useEffect)(function(){return void(e.current=t)},[t]);(0,Qi.useEffect)(function(){return checkStyles(e.current)},[])}}function $V(){var i=(0,Qi.useState)(Object.create(null)),t=i[1];return(0,Qi.useCallback)(function(){t(Object.create(null))},[])}if(false){useStateLogger=function i(t,e){if(e===void 0){e=false}var r=(0,Qi.useRef)(e);(0,Qi.useEffect)(function(){r.current=e},[e]);(0,Qi.useEffect)(function(){if(r.current){console.group("State Updated");console.log("%c"+t,"font-weight: normal; font-size: 120%; font-style: italic;");console.groupEnd()}},[t])}}var KV=require("react-dom");var ddt=function i(t){var e=t.children,r=t.type,o=r===void 0?"reach-portal":r;var n=(0,_f.useRef)(null);var s=(0,_f.useRef)(null);var a=$V();jV(function(){if(!n.current)return;var l=n.current.ownerDocument;s.current=l===null||l===void 0?void 0:l.createElement(o);l.body.appendChild(s.current);a();return function(){if(s.current&&s.current.ownerDocument){s.current.ownerDocument.body.removeChild(s.current)}}},[o,a]);return s.current?(0,KV.createPortal)(e,s.current):(0,_f.createElement)("span",{ref:n})};if(false){ddt.displayName="Portal"}var XV=ddt;function jI(i,t){if(i==null)return{};var e={};var r=Object.keys(i);var o,n;for(n=0;n<r.length;n++){o=r[n];if(t.indexOf(o)>=0)continue;e[o]=i[o]}return e}function $I(i,t){i.prototype=Object.create(t.prototype);i.prototype.constructor=i;i.__proto__=t}var hdt=y(ij());var xf=y(require("react"));var Vv=y(require("react-dom"));var KI={disabled:false};var rj=y(require("react"));var XI=rj.default.createContext(null);var vf="unmounted";var vu="exited";var Cu="entering";var Am="entered";var qI="exiting";var sa=function(i){$I(t,i);function t(r,o){var n;n=i.call(this,r,o)||this;var s=o;var a=s&&!s.isMounting?r.enter:r.appear;var l;n.appearStatus=null;if(r.in){if(a){l=vu;n.appearStatus=Cu}else{l=Am}}else{if(r.unmountOnExit||r.mountOnEnter){l=vf}else{l=vu}}n.state={status:l};n.nextCallback=null;return n}t.getDerivedStateFromProps=function r(o,n){var s=o.in;if(s&&n.status===vf){return{status:vu}}return null};var e=t.prototype;e.componentDidMount=function r(){this.updateStatus(true,this.appearStatus)};e.componentDidUpdate=function r(o){var n=null;if(o!==this.props){var s=this.state.status;if(this.props.in){if(s!==Cu&&s!==Am){n=Cu}}else{if(s===Cu||s===Am){n=qI}}}this.updateStatus(false,n)};e.componentWillUnmount=function r(){this.cancelNextCallback()};e.getTimeouts=function r(){var o=this.props.timeout;var n,s,a;n=s=a=o;if(o!=null&&typeof o!=="number"){n=o.exit;s=o.enter;a=o.appear!==void 0?o.appear:s}return{exit:n,enter:s,appear:a}};e.updateStatus=function r(o,n){if(o===void 0){o=false}if(n!==null){this.cancelNextCallback();if(n===Cu){this.performEnter(o)}else{this.performExit()}}else if(this.props.unmountOnExit&&this.state.status===vu){this.setState({status:vf})}};e.performEnter=function r(o){var n=this;var s=this.props.enter;var a=this.context?this.context.isMounting:o;var l=this.props.nodeRef?[a]:[Vv.default.findDOMNode(this),a],c=l[0],u=l[1];var m=this.getTimeouts();var p=a?m.appear:m.enter;if(!o&&!s||KI.disabled){this.safeSetState({status:Am},function(){n.props.onEntered(c)});return}this.props.onEnter(c,u);this.safeSetState({status:Cu},function(){n.props.onEntering(c,u);n.onTransitionEnd(p,function(){n.safeSetState({status:Am},function(){n.props.onEntered(c,u)})})})};e.performExit=function r(){var o=this;var n=this.props.exit;var s=this.getTimeouts();var a=this.props.nodeRef?void 0:Vv.default.findDOMNode(this);if(!n||KI.disabled){this.safeSetState({status:vu},function(){o.props.onExited(a)});return}this.props.onExit(a);this.safeSetState({status:qI},function(){o.props.onExiting(a);o.onTransitionEnd(s.exit,function(){o.safeSetState({status:vu},function(){o.props.onExited(a)})})})};e.cancelNextCallback=function r(){if(this.nextCallback!==null){this.nextCallback.cancel();this.nextCallback=null}};e.safeSetState=function r(o,n){n=this.setNextCallback(n);this.setState(o,n)};e.setNextCallback=function r(o){var n=this;var s=true;this.nextCallback=function(a){if(s){s=false;n.nextCallback=null;o(a)}};this.nextCallback.cancel=function(){s=false};return this.nextCallback};e.onTransitionEnd=function r(o,n){this.setNextCallback(n);var s=this.props.nodeRef?this.props.nodeRef.current:Vv.default.findDOMNode(this);var a=o==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}if(o!=null){setTimeout(this.nextCallback,o)}};e.render=function r(){var o=this.state.status;if(o===vf){return null}var n=this.props,s=n.children,a=n.in,l=n.mountOnEnter,c=n.unmountOnExit,u=n.appear,m=n.enter,p=n.exit,h=n.timeout,g=n.addEndListener,_=n.onEnter,x=n.onEntering,b=n.onEntered,w=n.onExit,T=n.onExiting,D=n.onExited,O=n.nodeRef,k=jI(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return xf.default.createElement(XI.Provider,{value:null},typeof s==="function"?s(o,k):xf.default.cloneElement(xf.default.Children.only(s),k))};return t}(xf.default.Component);sa.contextType=XI;sa.propTypes=false?{nodeRef:hdt.default.shape({current:typeof Element==="undefined"?hdt.default.any:hdt.default.instanceOf(Element)}),children:hdt.default.oneOfType([hdt.default.func.isRequired,hdt.default.element.isRequired]).isRequired,in:hdt.default.bool,mountOnEnter:hdt.default.bool,unmountOnExit:hdt.default.bool,appear:hdt.default.bool,enter:hdt.default.bool,exit:hdt.default.bool,timeout:function i(t){var e=timeoutsShape;if(!t.addEndListener)e=e.isRequired;for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++){o[n-1]=arguments[n]}return e.apply(void 0,[t].concat(o))},addEndListener:hdt.default.func,onEnter:hdt.default.func,onEntering:hdt.default.func,onEntered:hdt.default.func,onExit:hdt.default.func,onExiting:hdt.default.func,onExited:hdt.default.func}:{};function Om(){}sa.defaultProps={in:false,mountOnEnter:false,unmountOnExit:false,appear:false,enter:true,exit:true,onEnter:Om,onEntering:Om,onEntered:Om,onExit:Om,onExiting:Om,onExited:Om};sa.UNMOUNTED=vf;sa.EXITED=vu;sa.ENTERING=Cu;sa.ENTERED=Am;sa.EXITING=qI;var YI=sa;var wu=y(require("styled-components"));H();z();var fdt=wu.default.div`
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* added line-height reset from appContainer */
  font-family: '${i=>i.theme.typography.fontFamily}', sans-serif;

  ${xe()?wu.css`
        position: -ms-device-fixed;
      `:wu.css`
        position: fixed;
      `}
  top: ${i=>i.position.y-5}px;
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out;
  z-index: ${i=>i.theme.measurements.zIndex.toolbar};
  pointer-events: none;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${i=>i.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${i=>i.label}';
    position: absolute;
    color: ${i=>i.theme.tooltip.foreground};
    background: ${i=>i.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${i=>i.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${i=>i.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${i=>i.theme.measurements.fontSystem.label.case};
    border-radius: ${i=>i.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${i=>i.reverse&&wu.css`
      direction: rtl;

      &:before {
        border-left: 8px solid ${i.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}
`;var gdt=wu.default.span`
  display: none;
`;var oj=({show:i=true,reverse:t,position:e,children:r})=>{const o=(0,Su.useRef)(null);const{config:n}=I();const{measurements:s}=n;const a=typeof r==="string"?r:"";const l=e.x+s.advancedUIToolbar.width-10;const c=e.x+s.advancedUIToolbar.width+16;const u=t?"right":"left";const m={entering:{opacity:0,[u]:`${l}px`},entered:{opacity:1,[u]:`${c}px`},exiting:{opacity:0,[u]:`${l}px`},exited:{opacity:0,[u]:`${l}px`}};return Su.default.createElement(YI,{nodeRef:o,in:i,timeout:{exit:500}},p=>p!=="exited"&&Su.default.createElement(XV,null,Su.default.createElement(fdt,{ref:o,style:m[p],"data-test":U.Tooltip,reverse:t,position:e,label:a},Su.default.createElement(gdt,null,a))))};var V={Card:gf,CardContainer:Uv,Toolbar:{Index:LV,Item:zV,Separator:NV,Tooltip:oj},Itemsbar:yf,BarSeparator:"",ItemsSeparator:Wv,Controlsbar:DV,ToolControlBarItems:MV,Sidebar:{Index:kV,Heading:AV,SubHeading:Gv,TextCategory:RV,ExpandableContainer:IV}};var Be=y(require("react"));A();var rK=y(require("styled-components"));We();ZI();QI();et();var tD=y(require("react"));A();R();H();var Bm=y(require("react"));A();Se();var jv=class extends Bm.default.Component{constructor(){super(...arguments);this.renderIcon=t=>{const{tool:e,config:r}=this.props;const o=r.state.config[e];if("icon"in o){const s=o.icon;return Bm.default.createElement(s,null)}const n=xy[t];return Bm.default.createElement(n,null)||null};this.update=t=>{const{active:e}=this.props;e.selectTool(t)}}getToolTitle(t){const{config:e}=this.props;return e.locale[t].title}render(){const{tool:t,disabled:e,custom:r,active:o,isReverse:n}=this.props;const s=o.tool;if(t){const a=r.getAdvancedToolbarItem();if(!a){return null}return Bm.default.createElement(a,{key:t,isDisabled:e,isActive:t===s,isReverse:n,icon:this.renderIcon(t),onClick:()=>this.update(t),tool:t,label:this.getToolTitle(t)})}return Bm.default.createElement(V.Toolbar.Separator,null)}};jv=f([it("active","config","custom"),S],jv);var aj=jv;var eD=S(function i(){const{custom:t,config:e,active:r}=I();const o=e.config.order==="reverse";const n=t.getAdvancedToolbar();if(!n){return null}return tD.default.createElement(n,{reverse:o},e.tools.map((s,a)=>tD.default.createElement(aj,{key:s||a,tool:s,isReverse:o,disabled:!(r.image||s==="library"||s==="customTool")})))});var pe=y(require("react"));A();R();et();H();var wf=y(require("react"));A();H();var Pm=y(require("react"));A();R();Kt();H();var aa=y(require("react"));A();R();H();var bdt=S(()=>{const{adjustmentsTool:i,custom:t}=I();const{categories:e,items:r,config:o,locale:n}=i;const s=l=>{const c=i[l.identifier];const u=i.locale.categories[l.identifier]||l.name;const m=t.getSlider();if(!m){return null}return aa.default.createElement(m,{tool:"adjustment",identifier:l.identifier,adjust:true,key:l.identifier,label:u,value:c,onChange:p=>{i.editAdjustments({type:l.identifier,value:p})},onMouseUp:()=>i.toolSnapshot(),onTouchEnd:()=>i.toolSnapshot(),snap:0,style:{paddingBottom:"16px",width:"100%"}})};const a=(l,c)=>{const u=n.categories[l.identifier]||l.name;if(!l.items)return null;return aa.default.createElement(V.Sidebar.TextCategory,{key:l.identifier,name:u,isFirstCategory:c===0,isLastCategory:c===e.length-1},l.items.map(s))};if(o.flattenCategories)return aa.default.createElement(aa.default.Fragment,null,r.map(s));return aa.default.createElement(aa.default.Fragment,null,e.map(a))});var lj=()=>{return aa.default.createElement(V.Itemsbar,null,aa.default.createElement(bdt,null))};var cj=y(require("react"));A();R();H();var uj=S(()=>{const{adjustmentsTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return cj.default.createElement(r,{tool:"adjustment",label:e.buttonReset,ariaLabel:e.buttonReset,isDisabled:!i.isDirty,onClick:o})});var dj=S(()=>{const{adjustmentsTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"items":return Pm.default.createElement(lj,{key:o});case"separator":return Pm.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"removeAdjustmentButton":return Pm.default.createElement(uj,{key:o});default:return null}}else if(typeof o==="object"){return Pm.default.createElement(V.Controlsbar,{key:o.type,show:i.isDirty},o.children.map(n=>r(n)))}return null};return Pm.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var mj=S(({displayTitle:i})=>{const{adjustmentsTool:t}=I();return wf.default.createElement(wf.default.Fragment,null,i&&wf.default.createElement(V.Sidebar.Heading,null,t.locale.title),wf.default.createElement(dj,null))});var Tf=y(require("react"));A();var Il=y(require("react"));A();R();Kt();H();var iD=y(require("react"));A();R();We();et();H();var pj=S(()=>{const{brushTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{colorList:r}=i;return iD.default.createElement(B.Input.Selection,{label:t.selectColor},iD.default.createElement(Ie,{tool:"brush",activeColor:i.color,colors:r,labelsColor:e,onChange:i.changeColor}))});var hj=y(require("react"));A();R();H();z();var fj=S(()=>{const{brushTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getSlider();if(!r){return null}return hj.default.createElement(r,{identifier:"brush-hardness",tool:"brush","data-test":U.BrushHardness,label:e.sliderHardness,value:i.hardness,min:0,max:1,onChange:i.changeHardness})});var gj=y(require("react"));A();R();H();z();var bj=S(()=>{const{brushTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getSlider();if(!r){return null}return gj.default.createElement(r,{identifier:"brush-size",tool:"brush","data-test":U.BrushSize,label:e.sliderSize,value:i.relativeSize,min:1,max:100,divider:1,onChange:i.changeRelativeSize})});var yj=y(require("react"));A();R();H();var _j=S(()=>{const{brushTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return yj.default.createElement(r,{tool:"brush",label:e.buttonReset,ariaLabel:e.buttonReset,isDisabled:!i.isDirty,onClick:o})});var xj=S(()=>{const{brushTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"brushColorList":return Il.default.createElement(pj,{key:o});case"brushHardnessSlider":return Il.default.createElement(fj,{key:o});case"brushSizeSlider":return Il.default.createElement(bj,{key:o});case"separator":return Il.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"removeBrushButton":return Il.default.createElement(_j,{key:o});default:return null}}else if(typeof o==="object"){return Il.default.createElement(V.Controlsbar,{key:o.type,show:i.isDirty},o.children.map(n=>r(n)))}return null};return Il.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var ydt=({brushTool:i,displayTitle:t})=>Tf.default.createElement(Tf.default.Fragment,null,t&&Tf.default.createElement(V.Sidebar.Heading,null,i.locale.title),Tf.default.createElement(xj,null));var vj=it("brushTool")(S(ydt));var kf=y(require("react"));R();H();var Cj=({displayTitle:i})=>{const{config:t}=I();const e=t.state.config["customTool"].toolControlBar;const{title:r}=t.state.locale["customTool"];return kf.default.createElement(kf.default.Fragment,null,i&&kf.default.createElement(V.Sidebar.Heading,null,r),kf.default.createElement(e,{language:t.state.locale["customTool"]}))};var If=y(require("react"));A();H();var Tu=y(require("react"));A();R();Kt();H();var Sj=y(require("react"));A();R();H();var wj=S(()=>{const{filterTool:i,custom:t}=I();const e=i.locale.controls;const r=i.state;const o=()=>{i.toolSnapshot()};const n=t.getSlider();if(!n){return null}return Sj.default.createElement(n,{identifier:"filter-intensity",tool:"filter","aria-hidden":!i.isOptionSelected,label:e.sliderIntensity,value:r.intensity,min:0,max:1,onChange:i.changeIntensity,onMouseUp:o,onTouchEnd:o,snap:r.isDuotone?.5:null,isDisabled:!i.isOptionSelected})});var Ci=y(require("react"));A();R();et();H();z();var _dt=S(()=>{const{filterTool:i,custom:t}=I();const{categories:e,config:r,items:o,locale:n}=i;const s=t.getAdvancedItemCard();const a=t.getAdvancedCategoryCard();const l=(m,p)=>{var _;const h=n.items[m.identifier]||m.name;const g=(_=n.controls)==null?void 0:_.itemAriaLabel;if(!s){return null}return Ci.default.createElement(s,{tool:"filter",type:"medium",onClick:()=>i.selectFilter(m.identifier,m.defaultIntensity),key:m.identifier,image:m.thumbnailURI,label:h,"aria-label":g==null?void 0:g.replace(`\${label}`,h),style:{animationDelay:`${Tt(p)}s`},isActive:i.identifier===m.identifier},Ci.default.createElement(Ce,{withBackground:true},h))};const c=(m,p)=>{var b;const{selectedCategoryIdentifier:h}=i;const g=h===m.identifier;const _=n.categories[m.identifier]||m.name;const x=(b=n.controls)==null?void 0:b.categoryAriaLabel;if(!m.items||!a){return null}return Ci.default.createElement("div",{key:m.identifier},Ci.default.createElement(a,{role:"button","aria-expanded":g,"aria-label":x==null?void 0:x.replace(`\${label}`,_),isActive:g,tool:"filter",type:"large",onClick:()=>i.toggleCategorySelection(m.identifier),image:m.thumbnailURI,label:_,style:{animationDelay:`${Tt(p)}s`}},Ci.default.createElement(Ce,{withBackground:true,caret:true,isActive:g},_)),Ci.default.createElement(V.Sidebar.ExpandableContainer,{show:g},m.items.map(l)))};const u=(m,p)=>{const h=n.categories[m.identifier]||m.name;if(!m.items)return null;return Ci.default.createElement(V.Sidebar.TextCategory,{key:m.identifier,name:h,isFirstCategory:p===0,isLastCategory:p===e.length-1},m.items.map(l))};if(r.flattenCategories)return Ci.default.createElement(Ci.default.Fragment,null,o.map(l));if(r.categoryHeaderType==="card")return Ci.default.createElement(Ci.default.Fragment,null,e.map(c));if(r.categoryHeaderType==="text")return Ci.default.createElement(Ci.default.Fragment,null,e.map(u));return null});var Tj=()=>{return Ci.default.createElement(V.Itemsbar,null,Ci.default.createElement(V.CardContainer,null,Ci.default.createElement(_dt,null)))};var kj=y(require("react"));A();R();H();var Ij=S(()=>{const{filterTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return kj.default.createElement(r,{tool:"filter",label:e.buttonReset,ariaLabel:e.buttonReset,isDisabled:!i.isOptionSelected,onClick:o})});var Dj=S(()=>{const{filterTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"items":return Tu.default.createElement(Tj,{key:o});case"separator":return Tu.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"removeFilterButton":return Tu.default.createElement(Ij,{key:o});case"filterIntensitySlider":return Tu.default.createElement(wj,{key:o});default:return null}}else if(typeof o==="object"){return Tu.default.createElement(V.Controlsbar,{key:o.type,show:i.isOptionSelected},o.children.map(n=>r(n)))}return null};return Tu.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var Ej=S(({displayTitle:i})=>{const{filterTool:t}=I();return If.default.createElement(If.default.Fragment,null,i&&If.default.createElement(V.Sidebar.Heading,null,t.locale.title),If.default.createElement(Dj,null))});var Df=y(require("react"));A();H();var ku=y(require("react"));A();R();Kt();H();var Fj=y(require("react"));A();R();H();var Rj=S(()=>{const{focusTool:i,custom:t}=I();const e=i.locale.controls;const r=()=>{i.toolSnapshot(e.sliderIntensity)};const o=t.getSlider();if(!o){return null}return Fj.default.createElement(o,{identifier:"focus-intensity",tool:"focus","aria-hidden":!i.isOptionSelected,label:e.sliderIntensity,value:i.relativeIntensity,min:0,max:100,divider:1,onChange:i.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r,isDisabled:!i.isOptionSelected})});var Dl=y(require("react"));A();R();et();H();z();var xdt=S(()=>{const{focusTool:i,custom:t}=I();const{items:e,locale:r}=i;const o=(n,s)=>{var u;const a=r.items[n.identifier]||n.name;const l=(u=r.controls)==null?void 0:u.itemAriaLabel;const c=t.getAdvancedItemCard();if(!c){return null}return Dl.default.createElement(c,{tool:"focus",type:"large",onClick:()=>i.selectFocus(n.identifier),key:n.identifier,image:n.thumbnailURI,label:a,"aria-label":l==null?void 0:l.replace(`\${label}`,a),style:{animationDelay:`${Tt(s)}s`},isActive:n.identifier===i.identifier},Dl.default.createElement(Ce,{withBackground:true},a))};return Dl.default.createElement(Dl.default.Fragment,null,e.map(o))});var Oj=()=>{return Dl.default.createElement(V.Itemsbar,null,Dl.default.createElement(V.CardContainer,null,Dl.default.createElement(xdt,null)))};var Aj=y(require("react"));A();R();H();var Bj=S(()=>{const{focusTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return Aj.default.createElement(r,{tool:"focus",label:e.buttonReset,ariaLabel:e.buttonReset,isDisabled:!i.isOptionSelected,onClick:o})});var Pj=S(()=>{const{focusTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"separator":return ku.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"removeFocusButton":return ku.default.createElement(Bj,{key:o});case"focusIntensitySlider":return ku.default.createElement(Rj,{key:o});case"items":return ku.default.createElement(Oj,{key:o});default:return null}}else if(typeof o==="object"){return ku.default.createElement(V.Controlsbar,{key:o.type,show:i.isOptionSelected},o.children.map(n=>r(n)))}return null};return ku.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var Mj=S(({displayTitle:i})=>{const{focusTool:t}=I();return Df.default.createElement(Df.default.Fragment,null,i&&Df.default.createElement(V.Sidebar.Heading,null,t.locale.title),Df.default.createElement(Pj,null))});var Ff=y(require("react"));A();H();var la=y(require("react"));A();R();Kt();H();var rD=y(require("react"));A();R();We();et();H();var Lj=S(()=>{const{frameTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{colorList:r,tintable:o}=i;return rD.default.createElement(B.Input.Selection,{isDisabled:!o,label:t.selectColor},rD.default.createElement(Ie,{tool:"frame",activeColor:i.color,colors:r,labelsColor:e,isDisabled:!o,onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))});var Ef=y(require("react"));A();R();et();H();z();var zj=S(()=>{const{frameTool:i,custom:t}=I();const{items:e,locale:r}=i;const o=i.state?i.state.identifier:null;const n=(s,a)=>{var m;const l=r.items[s.identifier]||s.name;const c=(m=r.controls)==null?void 0:m.itemAriaLabel;const u=t.getAdvancedItemCard();if(!u){return null}return Ef.default.createElement(u,{tool:"frame",type:"medium",onClick:()=>i.selectFrame(s.identifier),key:s.identifier,image:s.thumbnailURI,label:l,"aria-label":c==null?void 0:c.replace(`\${label}`,l),style:{backgroundSize:"75%",animationDelay:`${Tt(a)}s`},isActive:s.identifier===o},Ef.default.createElement(Ce,{hidden:true},l))};return Ef.default.createElement(V.Itemsbar,null,Ef.default.createElement(V.CardContainer,null,e.map(n)))});var Uj=y(require("react"));A();R();H();var Nj=S(()=>{const{frameTool:i,custom:t}=I();const e=i.locale.controls;const r=n=>{i.toolSnapshot(n)};const o=t.getSlider();if(!o){return null}return Uj.default.createElement(o,{identifier:"frame-opacity",tool:"frame","aria-hidden":!i.isOptionSelected,label:e.sliderOpacity,value:i.opacity,min:0,max:1,onChange:i.changeOpacity,onMouseUp:()=>{r(e.sliderOpacity)},onTouchEnd:()=>{r(e.sliderOpacity)},isDisabled:!i.isOptionSelected})});var Hj=y(require("react"));A();R();H();var Wj=S(()=>{const{frameTool:i,custom:t}=I();const e=i.locale.controls;const r=n=>{i.toolSnapshot(n)};const o=t.getSlider();if(!o){return null}return Hj.default.createElement(o,{identifier:"frame-size",tool:"frame","aria-hidden":!i.isOptionSelected,label:e.sliderSize,value:i.size,min:i.minSize,max:i.maxSize,divider:1,onChange:i.changeWidth,onMouseUp:()=>{r(e.sliderSize)},onTouchEnd:()=>{r(e.sliderSize)},isDisabled:!i.isOptionSelected})});var Gj=y(require("react"));A();R();H();var Vj=S(()=>{const{frameTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return Gj.default.createElement(r,{tool:"frame",ariaLabel:e.buttonReset,onClick:o,isDisabled:!i.isOptionSelected,label:e.buttonReset})});var jj=S(()=>{const{frameTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"items":return la.default.createElement(zj,{key:o});case"separator":return la.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"frameOpacitySlider":return la.default.createElement(Nj,{key:o});case"frameSizeSlider":return la.default.createElement(Wj,{key:o});case"frameColorList":return la.default.createElement(Lj,{key:o});case"removeFrameButton":return la.default.createElement(Vj,{key:o});default:return null}}else if(typeof o==="object"){return la.default.createElement(V.Controlsbar,{key:o.type,show:i.isOptionSelected},o.children.map(n=>r(n)))}return null};return la.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var $j=S(({displayTitle:i})=>{const{frameTool:t}=I();return Ff.default.createElement(Ff.default.Fragment,null,i&&Ff.default.createElement(V.Sidebar.Heading,null,t.locale.title),Ff.default.createElement(jj,null))});var Rf=y(require("react"));A();H();var Iu=y(require("react"));A();R();Kt();H();var Ke=y(require("react"));A();R();et();H();z();var vdt=S(()=>{const{active:i,library:t,custom:e}=I();const{query:r,config:o,selectedCategoryIdentifier:n,categories:s,items:a,locale:l}=t;const c=e.getAdvancedCategoryCard();const u=e.getAdvancedItemCard();const m=(g,_)=>{var b;const x=(b=l.controls)==null?void 0:b.itemAriaLabel;if(!u){return null}return Ke.default.createElement(u,{tool:"library",type:"medium",onClick:()=>i.newImage(g.rawUrl),key:`${g.identifier}-${_}`,image:g.thumbnailURI,label:g.name,"aria-label":x==null?void 0:x.replace(`\${label}`,g.name),style:{animationDelay:`${Tt(_)}s`},authorAvatar:g.authorAvatar,authorName:g.authorName},g.authorAvatar&&Ke.default.createElement(Yl,{url:g.authorAvatar}),g.authorName&&Ke.default.createElement(Ce,{withBackground:true},g.authorName))};const p=(g,_)=>{var w;const x=n===g.identifier;const b=(w=l.controls)==null?void 0:w.categoryAriaLabel;if(!g.items||!c){return null}return Ke.default.createElement("div",{key:g.identifier},Ke.default.createElement(c,{role:"button","aria-expanded":x,"aria-label":b==null?void 0:b.replace(`\${label}`,g.name),isActive:x,tool:"library",type:"large",onClick:()=>t.toggleCategorySelection(g.identifier),image:g.thumbnailURI,label:g.name,style:{animationDelay:`${Tt(_)}s`}},Ke.default.createElement(Ce,{withBackground:true,caret:true,isActive:x},g.name)),Ke.default.createElement(V.Sidebar.ExpandableContainer,{show:x},g.items.map(m)))};const h=(g,_)=>{if(!g.items)return null;return Ke.default.createElement(V.Sidebar.TextCategory,{key:g.identifier,name:g.name,isFirstCategory:_===0,isLastCategory:_===s.length-1},g.items.map(m))};if(r)return a.length?Ke.default.createElement(Ke.default.Fragment,null,a.map(m)):Ke.default.createElement("p",{"data-test":U.NoResult},t.locale.controls.noResults);if(o.flattenCategories)return Ke.default.createElement(Ke.default.Fragment,null,a.map(m));if(o.categoryHeaderType==="card")return Ke.default.createElement(Ke.default.Fragment,null,s.map(p));if(o.categoryHeaderType==="text")return Ke.default.createElement(Ke.default.Fragment,null,s.map(h));return null});var Kj=()=>{return Ke.default.createElement(V.Itemsbar,null,Ke.default.createElement(V.CardContainer,null,Ke.default.createElement(vdt,null)))};var Qj=y(require("react"));A();R();H();oD();var t$=S(()=>{const{library:i,active:t}=I();const{config:e}=i;const r=i.locale.controls;const o=()=>{t.selectWebcam(true)};if(e.enableWebcam){return Qj.default.createElement(Kv,{tool:"library",onClick:o,label:r.buttonWebcamOpen})}return null});var e$=y(require("react"));A();et();H();var i$=S(()=>{const{library:i}=I();const{libraryProvider:t}=i;const e=i.locale.controls;const r=o=>{i.fetchImages(o)};if(t){return e$.default.createElement(B.Input.Search,{onChange:r,placeholder:e.placeholderSearch})}return null});var nD=y(require("react"));A();R();et();H();z();var r$=S(()=>{const{library:i,active:t,custom:e}=I();const{config:r}=i;const o=i.locale.controls;const n=e.getButton("toolControlBarPrimaryButton");const s=l=>{const{files:c}=l.target;if(c.length){const u=new FileReader;u.onload=m=>{t.newImage(m.target.result)};u.readAsDataURL(c[0])}};const a=()=>{const l=document.getElementById("fileUpload");if(l){l.click()}};if(r.enableUpload){if(!n){return null}return nD.default.createElement(n,{"data-test":U.LibraryUploadButton,tool:"library",ariaLabel:o.buttonUpload,onClick:a,label:o.buttonUpload},nD.default.createElement(B.Input.File,{onChange:s}))}return null});var o$=S(()=>{const{library:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{switch(o){case"items":return Iu.default.createElement(Kj,{key:o});case"openWebcamButton":return Iu.default.createElement(t$,{key:o});case"searchFieldInput":return Iu.default.createElement(i$,{key:o});case"separator":return Iu.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"uploadImageButton":return Iu.default.createElement(r$,{key:o});default:return null}};return Iu.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var n$=S(({displayTitle:i})=>{const{library:t}=I();return Rf.default.createElement(Rf.default.Fragment,null,i&&Rf.default.createElement(V.Sidebar.Heading,null,t.locale.title),Rf.default.createElement(o$,null))});var Of=y(require("react"));A();H();var Fl=y(require("react"));A();R();Kt();H();var s$=y(require("react"));A();et();H();var a$=S(()=>{const{overlayTool:i}=I();const{allBlendModes:t,blendMode:e}=i;const r=i.locale.controls;const o=n=>{i.changeBlendMode(n)};return s$.default.createElement(B.Input.CarouselSlider,{label:r.carouselBlendMode,defaultIdentifier:e,onSelect:o,list:t})});var El=y(require("react"));A();R();et();H();z();var Cdt=S(()=>{const{overlayTool:i,custom:t}=I();const{items:e,locale:r,identifier:o,selectOverlay:n}=i;const s=(a,l)=>{var p;const c=r.items[a.identifier]||a.name;const u=(p=r.controls)==null?void 0:p.itemAriaLabel;const m=t.getAdvancedItemCard();if(!m){return null}return El.default.createElement(m,{tool:"overlay",type:"medium",onClick:()=>n(a.identifier),key:a.identifier,image:a.thumbnailURI,label:c,"aria-label":u==null?void 0:u.replace(`\${label}`,c),style:{animationDelay:`${Tt(l)}s`},isActive:a.identifier===o},El.default.createElement(Ce,{withBackground:true},c))};return El.default.createElement(El.default.Fragment,null,e.map(s))});var l$=()=>{return El.default.createElement(V.Itemsbar,null,El.default.createElement(V.CardContainer,null,El.default.createElement(Cdt,null)))};var c$=y(require("react"));A();R();H();var u$=S(()=>{const{overlayTool:i,custom:t}=I();const e=i.locale.controls;const r=()=>{i.toolSnapshot()};const o=t.getSlider();if(!o){return null}return c$.default.createElement(o,{identifier:"overlay-opacity",tool:"overlay","aria-hidden":!i.isOptionSelected,label:e.sliderOpacity,value:i.opacity,min:0,max:1,onChange:i.changeOpacity,onMouseUp:r,onTouchEnd:r,isDisabled:!i.isOptionSelected})});var d$=y(require("react"));A();R();H();var m$=S(()=>{const{overlayTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return d$.default.createElement(r,{tool:"overlay",label:e.buttonReset,ariaLabel:e.buttonReset,isDisabled:!i.isOptionSelected,onClick:o})});var p$=S(()=>{const{overlayTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"items":return Fl.default.createElement(l$,{key:o});case"separator":return Fl.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"overlayBlendModeCarousel":return Fl.default.createElement(a$,{key:o});case"overlayOpacitySlider":return Fl.default.createElement(u$,{key:o});case"removeOverlayButton":return Fl.default.createElement(m$,{key:o});default:return null}}else if(typeof o==="object"){return Fl.default.createElement(V.Controlsbar,{key:o.type,show:i.isOptionSelected},o.children.map(n=>r(n)))}return null};return Fl.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var h$=S(({displayTitle:i})=>{const{overlayTool:t}=I();return Of.default.createElement(Of.default.Fragment,null,i&&Of.default.createElement(V.Sidebar.Heading,null,t.locale.title),Of.default.createElement(p$,null))});var Af=y(require("react"));A();H();var Du=y(require("react"));A();R();Kt();H();var sD=y(require("react"));A();R();We();et();H();var f$=S(()=>{const{stickerTool:i}=I();const{colorList:t}=i;const e=i.locale.controls;const r=i.localeColor.colorPicker;const o=!i.isStickerSelected||!i.tintable&&i.isStickerSelected;return sD.default.createElement(B.Input.Selection,{isDisabled:o,label:e.selectColor},sD.default.createElement(Ie,{tool:"sticker",activeSprite:i.id,activeColor:i.tintColor,colors:t,labelsColor:r,isDisabled:o,onChange:i.changeTintColor,onAddSnapshot:i.tintColorSnapshot}))});var Si=y(require("react"));A();R();et();H();z();var Sdt=S(()=>{const{stickerTool:i,custom:t}=I();const{categories:e,selectedCategoryIdentifier:r,config:o,items:n,locale:s}=i;const a=t.getAdvancedCategoryCard();const l=t.getAdvancedItemCard();const c=(p,h)=>{var x;const g=s.items[p.identifier]||p.name;const _=(x=s.controls)==null?void 0:x.itemAriaLabel;if(!l){return null}return Si.default.createElement(l,{key:p.identifier,tool:"sticker",type:"small",onClick:()=>i.add(p.identifier),image:p.thumbnailURI,label:g,"aria-label":_==null?void 0:_.replace(`\${label}`,g),style:{backgroundSize:"75%",animationDelay:`${bb(h)}s`}},Si.default.createElement(Ce,{hidden:true},g))};const u=(p,h)=>{var b;const g=r===p.identifier;const _=s.categories[p.identifier]||p.name;const x=(b=s.controls)==null?void 0:b.categoryAriaLabel;if(!p.items||!a){return null}return Si.default.createElement("div",{key:p.identifier},Si.default.createElement(a,{role:"button","aria-expanded":g,"aria-label":x==null?void 0:x.replace(`\${label}`,_),isActive:g,tool:"sticker",type:"large",onClick:()=>i.toggleCategorySelection(p.identifier),image:p.thumbnailURI,label:_,style:{animationDelay:`${Tt(h)}s`}},Si.default.createElement(Ce,{withBackground:true,caret:true,isActive:g},_)),Si.default.createElement(V.Sidebar.ExpandableContainer,{show:g,key:`${p.identifier}-items`},p.items.map(c)))};const m=(p,h)=>{const g=s.categories[p.identifier]||p.name;if(!p.items)return null;return Si.default.createElement(V.Sidebar.TextCategory,{key:p.identifier,name:g,isFirstCategory:h===0,isLastCategory:h===e.length-1},p.items.map(c))};if(o.flattenCategories)return Si.default.createElement(Si.default.Fragment,null,n.map(c));if(o.categoryHeaderType==="card")return Si.default.createElement(Si.default.Fragment,null,e.map(u));if(o.categoryHeaderType==="text")return Si.default.createElement(Si.default.Fragment,null,e.map(m));return null});var g$=()=>{return Si.default.createElement(V.Itemsbar,null,Si.default.createElement(V.CardContainer,null,Si.default.createElement(Sdt,null)))};var b$=y(require("react"));A();R();H();var y$=S(()=>{const{stickerTool:i,custom:t}=I();const e=i.locale.controls;const r=()=>{i.toolSnapshot()};const o=t.getSlider();if(!o){return null}return b$.default.createElement(o,{identifier:"sticker-opacity",tool:"sticker",isDisabled:!i.isStickerSelected,label:e.sliderOpacity,value:i.opacity,min:0,max:1,onChange:i.changeOpacity,onMouseUp:r,onTouchEnd:r})});var aD=y(require("react"));A();var _$=y(require("styled-components"));R();et();H();var wdt=_$.default.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:true})`
  ${fy.VisuallyHidden}
`;var x$=S(()=>{const{stickerTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarPrimaryButton");const o=()=>{const s=document.getElementById("fileUpload");if(s){s.value=null;s.click()}};const n=s=>{const{files:a}=s.target;i.addFiles(a)};if(i.isCustomStickerEnabled){if(!r){return null}return aD.default.createElement(r,{tool:"sticker",ariaLabel:e.buttonUpload,onClick:o,label:e.buttonUpload},aD.default.createElement(wdt,{onChange:n}))}return null});var v$=S(()=>{const{stickerTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{switch(o){case"items":return Du.default.createElement(g$,{key:o});case"separator":return Du.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"uploadStickerButton":return Du.default.createElement(x$,{key:o});case"stickerColorList":return Du.default.createElement(f$,{key:o});case"stickerOpacitySlider":return Du.default.createElement(y$,{key:o});default:return null}};return Du.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var C$=S(({displayTitle:i})=>{const{stickerTool:t}=I();return Af.default.createElement(Af.default.Fragment,null,i&&Af.default.createElement(V.Sidebar.Heading,null,t.locale.title),Af.default.createElement(v$,null))});var Bf=y(require("react"));A();H();var qo=y(require("react"));A();var M$=y(require("styled-components"));R();Kt();var lD=y(require("react"));A();R();We();et();H();var S$=S(()=>{const{textTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{isTextSelected:r,backgroundColorList:o}=i;return lD.default.createElement(B.Input.Selection,{isDisabled:!r,label:t.selectBackgroundColor},lD.default.createElement(Ie,{tool:"text",activeSprite:i.id,activeColor:i.backgroundColor,colors:o,labelsColor:e,isDisabled:!r,onChange:i.changeBackgroundColor,onAddSnapshot:i.backgroundColorSnapshot}))});var w$=y(require("react"));A();et();Kt();H();var T$=S(()=>{const{textTool:i}=I();const t=i.locale.controls;const{fontFamily:e,fontStyle:r,fontWeight:o,fontFamilies:n,isTextSelected:s}=i;const a=n.map(c=>({label:`${c.fontFamily} ${ft.getDisplayFontStyle(c)}`,fontWeight:c.fontWeight,fontStyle:c.fontStyle,fontFamily:c.fontFamily,value:c.identifier}));const l=a.filter(({value:c})=>c===i.identifier)[0];return w$.default.createElement(B.Input.Dropdown,{isDisabled:!s,style:{fontFamily:e,fontStyle:r,fontWeight:o},itemStyle:c=>({fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight}),label:t.dropdownFontFamily,list:a,onSelect:i.changeFont,selectedItem:l.label})});var k$=y(require("react"));A();var I$=y(require("styled-components"));et();H();var Tdt=(0,I$.default)(B.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`;var D$=S(()=>{const{textTool:i}=I();const t=i.locale.controls;const{isTextSelected:e}=i;const r=o=>{const n=o?parseFloat(o):0;i.setFontSize(Math.max(10,Math.min(690,n)))};return k$.default.createElement(Tdt,{id:"photoeditorsdk-text-font-size-input",value:i.fontSize.toFixed(0),onSubmit:r,label:t.textFontSize,isDisabled:!e})});var E$=y(require("react"));A();R();H();var F$=S(()=>{const{textTool:i,custom:t}=I();const e=i.locale.controls;const{isTextSelected:r}=i;const o=()=>{i.toolSnapshot()};const n=t.getSlider();if(!n){return null}return E$.default.createElement(n,{identifier:"text-line-spacing",tool:"text",isDisabled:!r,label:e.sliderLineSpacing,value:i.lineHeight,min:.5,max:3,onChange:i.changeLineHeight,onMouseUp:o,onTouchEnd:o,snap:1,divider:1,decimal:1})});var R$=y(require("react"));A();R();H();var O$=S(()=>{const{textTool:i,custom:t}=I();const e=i.locale.controls;const r=()=>{i.add()};const o=t.getButton("toolControlBarPrimaryButton");if(!o){return null}return R$.default.createElement(o,{tool:"text",ariaLabel:e.buttonNew,onClick:r,label:e.buttonNew})});var Xv=y(require("react"));A();var A$=y(require("styled-components"));et();H();Se();z();var kdt=(0,A$.default)(B.Input.Selection)`
  width: 50%;
`;var B$=S(()=>{const{textTool:i,custom:t}=I();const e=i.locale.controls;const{isTextSelected:r,alignment:o}=i;const n=["left","center","right"];const s=t.getButton("textAlignment");return Xv.default.createElement(kdt,{isDisabled:!r,inline:true,label:e.selectAlignment,"data-test":U.TextAlignment},n.map(a=>{const l=vy[a];return Xv.default.createElement(s,{tool:a,isDisabled:!r,ariaLabel:`Align ${a}`,isActive:a===o,key:a,style:{padding:"1px 3px 2px"},icon:Xv.default.createElement(l,null),onClick:()=>i.changeAlignment(a)})}))});var cD=y(require("react"));A();R();We();et();H();var P$=S(()=>{const{textTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{isTextSelected:r,colorList:o}=i;return cD.default.createElement(B.Input.Selection,{isDisabled:!r,label:t.selectFontColor},cD.default.createElement(Ie,{tool:"text",activeSprite:i.id,activeColor:i.textColor,colors:o,labelsColor:e,isDisabled:!r,onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))});var Idt=M$.default.div`
  display: flex;
  justify-content: space-between;
`;var Ddt=({textTool:i})=>{const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{if(typeof o==="string"){switch(o){case"newTextButton":return qo.default.createElement(O$,{key:o});case"fontFamilyDropdown":return qo.default.createElement(T$,{key:o});case"separator":return qo.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"textColorList":return qo.default.createElement(P$,{key:o});case"backgroundColorList":return qo.default.createElement(S$,{key:o});case"lineSpacingSlider":return qo.default.createElement(F$,{key:o});case"textAlignmentList":return qo.default.createElement(B$,{key:o});case"fontSizeInput":return qo.default.createElement(D$,{key:o});default:return null}}else if(typeof o==="object"){return qo.default.createElement(Idt,{key:o.type},o.children.map(n=>r(n)))}return null};return qo.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))};var L$=it("textTool")(S(Ddt));var z$=S(({displayTitle:i})=>{const{textTool:t}=I();return Bf.default.createElement(Bf.default.Fragment,null,i&&Bf.default.createElement(V.Sidebar.Heading,null,t.locale.title),Bf.default.createElement(L$,null))});var Pf=y(require("react"));A();H();var Eu=y(require("react"));A();R();Kt();H();var U$=y(require("react"));A();R();H();var N$=S(()=>{const{textDesignTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarPrimaryButton");const o=()=>{i.add()};if(!r){return null}return U$.default.createElement(r,{tool:"textdesign",ariaLabel:e.buttonNew,onClick:o,label:e.buttonNew})});var H$=y(require("react"));A();R();H();var W$=S(()=>{const{textDesignTool:i,custom:t}=I();const e=i.locale.controls;const{isTextDesignSelected:r}=i;const o=t.getButton("toolControlBarSecondaryButton");const n=()=>{i.changeSeed()};if(!o){return null}return H$.default.createElement(o,{tool:"textdesign",ariaLabel:e.buttonShuffle,isDisabled:!r,onClick:n,label:e.buttonShuffle})});var uD=y(require("react"));A();R();We();et();H();var G$=S(()=>{const{textDesignTool:i}=I();const t=i.locale.controls;const e=i.localeColor.colorPicker;const{isTextDesignSelected:r,colorList:o}=i;return uD.default.createElement(B.Input.Selection,{isDisabled:!r,label:t.selectColor},uD.default.createElement(Ie,{tool:"textdesign",activeSprite:i.id,activeColor:i.color,colors:o,labelsColor:e,isDisabled:!r,onChange:i.changeColor,onAddSnapshot:i.colorSnapshot}))});var Rl=y(require("react"));A();R();et();H();z();var Edt=S(()=>{const{textDesignTool:i,custom:t}=I();const{items:e,identifier:r,locale:o}=i;const n=a=>{i.changeIdentifier(a)};const s=(a,l)=>{var m;const c=(m=o.controls)==null?void 0:m.itemAriaLabel;const u=t.getAdvancedItemCard();if(!u){return null}return Rl.default.createElement(u,{key:a.identifier,tool:"textdesign",type:"medium",onClick:()=>n(a.identifier),image:a.thumbnailURI,label:a.name||"","aria-label":c==null?void 0:c.replace(`\${label}`,a.name),style:{animationDelay:`${Tt(l)}s`,backgroundSize:"60%"},isDisabled:!i.isTextDesignSelected,isActive:r===a.identifier},Rl.default.createElement(Ce,{hidden:true},a.name))};return Rl.default.createElement(Rl.default.Fragment,null,e.map(s))});var V$=()=>{return Rl.default.createElement(V.Itemsbar,null,Rl.default.createElement(V.CardContainer,null,Rl.default.createElement(Edt,null)))};var j$=S(()=>{const{textDesignTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{switch(o){case"items":return Eu.default.createElement(V$,{key:o});case"separator":return Eu.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"newTextDesignButton":return Eu.default.createElement(N$,{key:o});case"shuffleLayoutButton":return Eu.default.createElement(W$,{key:o});case"textDesignColorList":return Eu.default.createElement(G$,{key:o});default:return null}};return Eu.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var $$=S(({displayTitle:i})=>{const{textDesignTool:t}=I();return Pf.default.createElement(Pf.default.Fragment,null,i&&Pf.default.createElement(V.Sidebar.Heading,null,t.locale.title),Pf.default.createElement(j$,null))});var Mf=y(require("react"));A();H();var Fu=y(require("react"));A();R();Kt();H();var K$=y(require("react"));A();We();H();var X$=S(()=>{const{transformTool:i}=I();const t=i.locale.controls;const{forceDimensions:e,localOutputHeight:r,localOutputWidth:o}=i;return K$.default.createElement(ff,{isDisabled:e,showLabel:true,valueHeight:r,valueWidth:o,onSubmitWidth:i.onPixelWidth,onSubmitHeight:i.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth,ariaLabelHeight:t.inputHeightAriaLabel,ariaLabelWidth:t.inputWidthAriaLabel})});var q$=y(require("react"));A();R();H();var Y$=S(()=>{const{transformTool:i,custom:t}=I();const e=i.locale.controls;const{forceDimensions:r,lockResolution:o}=i;const n=t.getCheckbox();if(!n){return null}return q$.default.createElement(n,{tool:"transform",isDisabled:r,value:o,label:e.checkboxKeepResolution,checkMarkPosition:"right",onClick:i.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}})});var J$=y(require("react"));A();R();H();var Z$=S(()=>{const{transformTool:i,custom:t}=I();const e=i.locale.controls;const r=t.getButton("toolControlBarSecondaryButton");const o=()=>{i.reset()};if(!r){return null}return J$.default.createElement(r,{tool:"transform",ariaLabel:e.buttonReset,onClick:o,label:e.buttonReset})});var li=y(require("react"));A();var dD=require("react-dom/server");R();et();H();Se();z();var Fdt=S(()=>{const{transformTool:i,custom:t,editor:e}=I();const{categories:r,items:o,identifier:n,config:s,locale:a}=i;const l=t.getAdvancedItemCard();const c=t.getAdvancedCategoryCard();const u=(h,g)=>{var O;const{theme:_,measurements:x}=e.configStore;const b=a.items[h.identifier]||h.name;const w=(O=a.controls)==null?void 0:O.itemAriaLabel;let T=h.thumbnailURI||"";let D="80%";if(!i.checkIfTransformThumbnailExits(h.thumbnailURI)){const k=h.identifier.includes("imgly_transform_common");const E=Gt.crops[h.identifier]||Gt.crops.imgly_transform_common_custom;const J=li.default.createElement(E,{width:x.advancedUICard.medium.width-(k?42:0),height:x.advancedUICard.medium.height-(k?42:0),main:_.transform.crops.main,highlight:_.transform.crops.highlight,shadow:_.transform.crops.shadow});T=`'data:image/svg+xml,${encodeURIComponent((0,dD.renderToStaticMarkup)(J))}'`;D=xe()||Sr()?"auto":"unset"}if(!l){return null}return li.default.createElement(l,{key:h.identifier,tool:"transform",type:"medium",onClick:()=>i.changeIdentifier(h.identifier,true),image:T,label:b,"aria-label":w==null?void 0:w.replace(`\${label}`,b),style:{backgroundSize:D,animationDelay:`${Tt(g)}s`},isActive:h.identifier===n},li.default.createElement(Ce,null,b))};const m=(h,g)=>{var O;const{theme:_,measurements:x}=e.configStore;const b=i.selectedCategoryIdentifier===h.identifier;const w=a.categories[h.identifier]||h.name;const T=(O=a.controls)==null?void 0:O.categoryAriaLabel;let D=h.thumbnailURI||"";if(!h.items||!c){return null}if(!i.checkIfTransformThumbnailExits(h.thumbnailURI)){const k=Gt.categories[h.identifier]||Gt.crops.imgly_transform_common_custom;const E=li.default.createElement(k,{width:x.advancedUICard.large.width-42,height:x.advancedUICard.large.height-42,main:_.transform.crops.main,highlight:_.transform.crops.highlight,shadow:_.transform.crops.shadow});D=`'data:image/svg+xml,${encodeURIComponent((0,dD.renderToStaticMarkup)(E))}'`}return li.default.createElement("div",{key:h.identifier},li.default.createElement(c,{role:"button","aria-expanded":b,"aria-label":T==null?void 0:T.replace(`\${label}`,w),isActive:b,type:"large",onClick:()=>i.toggleCategorySelection(h.identifier),key:h.identifier,image:D,style:{animationDelay:`${Tt(g)}s`},label:h.name,tool:"transform"},li.default.createElement(Ce,{caret:true,isActive:b},w)),li.default.createElement(V.Sidebar.ExpandableContainer,{show:b},h.items.map(u)))};const p=(h,g)=>{const _=a.categories[h.identifier]||h.name;if(!h.items)return null;return li.default.createElement(V.Sidebar.TextCategory,{key:h.identifier,name:_,isFirstCategory:g===0,isLastCategory:g===r.length-1},h.items.map(u))};if(s.flattenCategories)return li.default.createElement(li.default.Fragment,null,o.map(u));if(s.categoryHeaderType==="card")return li.default.createElement(li.default.Fragment,null,r.map(m));if(s.categoryHeaderType==="text")return li.default.createElement(li.default.Fragment,null,r.map(p));return null});var Q$=()=>{return li.default.createElement(V.Itemsbar,null,li.default.createElement(V.CardContainer,null,li.default.createElement(Fdt,null)))};var tK=S(()=>{const{transformTool:i}=I();const{config:t}=i;const{advancedUIToolControlBarOrder:e}=t;const r=o=>{switch(o){case"items":return Fu.default.createElement(Q$,{key:o});case"separator":return Fu.default.createElement(V.ItemsSeparator,{full:true,key:Ot()});case"resetTransformButton":return Fu.default.createElement(Z$,{key:o});case"keepResolutionCheckbox":return Fu.default.createElement(Y$,{key:o});case"cropSizeInput":return Fu.default.createElement(X$,{key:o});default:return null}};return Fu.default.createElement(V.ToolControlBarItems,null,e.map(o=>r(o)))});var eK=S(({displayTitle:i})=>{const{transformTool:t}=I();return Mf.default.createElement(Mf.default.Fragment,null,i&&Mf.default.createElement(V.Sidebar.Heading,null,t.locale.title),Mf.default.createElement(tK,null))});var mD=S(function i(){const{active:t,config:e,custom:r}=I();const o=t.tool;const n=e.config.displayToolControlBarTitle;const s=r.getAdvancedToolControlBar();if(!s){return null}return pe.default.createElement(s,{reverse:e.config.order==="reverse",tool:o},pe.default.createElement(B.Switch.Index,{type:o},pe.default.createElement(B.Switch.Case,{value:"library"},pe.default.createElement(n$,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"filter"},pe.default.createElement(Ej,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"focus"},pe.default.createElement(Mj,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"adjustment"},pe.default.createElement(mj,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"overlay"},pe.default.createElement(h$,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"sticker"},pe.default.createElement(C$,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"text"},pe.default.createElement(z$,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"textdesign"},pe.default.createElement($$,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"frame"},pe.default.createElement($j,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"brush"},pe.default.createElement(vj,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"transform"},pe.default.createElement(eK,{displayTitle:n})),pe.default.createElement(B.Switch.Case,{value:"customTool"},pe.default.createElement(Cj,{displayTitle:n}))))});var iK=rK.default.div`
  position: absolute;
  height: 100%;
  width: ${i=>i.theme.measurements.advancedUIToolbar.width+i.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${i=>i.theme.webcam.backdrop};
  z-index: ${i=>i.theme.measurements.zIndex.disable};
`;var Lf=class extends Be.default.Component{static getDerivedStateFromError(t){console.error(t);return{hasError:true}}render(){const{config:t,active:e,canvas:r,custom:o}=this.props;const n=o.getWindowContainer();return t.isOrderDefault?Be.default.createElement(B.Container,null,e.isWebcam?Be.default.createElement(iK,{style:{left:0}}):null,Be.default.createElement(Em,null),Be.default.createElement(eD,null),Be.default.createElement(mD,null),Be.default.createElement(Va,null,Be.default.createElement(xm,null),n&&Be.default.createElement(n,{tool:e.tool},Be.default.createElement(Sf,null,e.isWebcam?Be.default.createElement(Cf,null):null,e.image&&r&&Be.default.createElement(Im,null))))):Be.default.createElement(B.Container,null,e.isWebcam?Be.default.createElement(iK,{style:{right:0}}):null,Be.default.createElement(Em,null),Be.default.createElement(Va,null,Be.default.createElement(xm,null),n&&Be.default.createElement(n,{tool:e.tool},Be.default.createElement(Sf,null,e.isWebcam?Be.default.createElement(Cf,null):null,e.image&&r&&Be.default.createElement(Im,null)))),Be.default.createElement(mD,null),Be.default.createElement(eD,null))}};Lf=f([it("config","active","canvas","custom"),S],Lf);var Mm=y(require("react"));var oK=y(require("styled-components"));var nK=class extends Mm.default.Component{constructor(t){super(t);this.ref=null;this.updatePosition=()=>{const{isReverse:t}=this.props;const e={x:0,y:0};if(this.ref.current){const{top:r,height:o,left:n,right:s}=this.ref.current.getBoundingClientRect();e.y=r+o/4;e.x=t?window.innerWidth-s:n}this.setState({tooltipPosition:e})};this.mouseOver=t=>{this.updatePosition();this.setState({hoverTool:t})};this.mouseOut=()=>{this.setState({hoverTool:null})};this.state={hoverTool:null,tooltipPosition:{x:0,y:0}};this.ref=Mm.default.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(t){const{isReverse:e}=this.props;if(e!==t.isReverse){this.updatePosition()}}render(){const{tool:t,isActive:e,isReverse:r,isDisabled:o,icon:n,label:s,onClick:a,className:l,children:c}=this.props;const{hoverTool:u,tooltipPosition:m}=this.state;return Mm.default.createElement(Rdt,{ref:this.ref,onMouseOver:()=>this.mouseOver(t),onMouseOut:()=>this.mouseOut(),onFocus:()=>this.mouseOver(t),onBlur:()=>this.mouseOut(),className:l},Mm.default.createElement(V.Toolbar.Item,{ariaLabel:s,isActive:e,isDisabled:o,onClick:()=>a(t)},n,c),Mm.default.createElement(V.Toolbar.Tooltip,{position:m,reverse:r,show:u===t},s))}};var zf=nK;var Rdt=oK.default.div`
  position: relative;
`;var qv=class extends Uf.default.Component{constructor(){super(...arguments);this.componentWillUnmount=()=>{this.editor.cleanUpCanvasMemory()}}componentDidMount(){const{editor:t,storeProps:e}=this.props;this.editor=t;this.storeProps=e;const r=new Dm(this.editor.configStore.config.custom.components,{advancedUICategoryCard:V.Card,advancedUIItemCard:V.Card,advancedUIToolbarItem:zf,advancedUIToolbar:V.Toolbar.Index,advancedUIToolControlBar:V.Sidebar.Index});const o={getAdvancedCategoryCard:r.getAdvancedCategoryCard,getAdvancedItemCard:r.getAdvancedItemCard,getAdvancedToolbarItem:r.getAdvancedToolbarItem,getAdvancedToolbar:r.getAdvancedToolbar,getAdvancedToolControlBar:r.getAdvancedToolControlBar,getDialog:r.getDialog,getButton:r.getButton,getColorItem:r.getColorItem,getCheckbox:r.getCheckbox,getWindowContainer:r.getWindowContainer,getSlider:r.getSlider};this.storeProps.custom=o;this.forceUpdate()}render(){return this.storeProps?Uf.default.createElement(tp,{...this.storeProps},Uf.default.createElement(sK.ThemeProvider,{theme:{...this.editor.configStore.theme,measurements:this.editor.configStore.measurements}},Uf.default.createElement(Lf,null))):null}};Xt();zI();et();MS();by();var ng=y(require("react"));var kD=y(require("react-dom"));R();Kt();var Qn=y(require("react"));var Imt=Qn.default.lazy(()=>Promise.resolve().then(()=>(qY(),XY)));var Dmt=i=>{return{filterTool:i.filterToolStore,focusTool:i.focusToolStore,adjustmentsTool:i.adjustmentsToolStore,overlayTool:i.overlayToolStore,frameTool:i.frameToolStore,brushTool:i.brushToolStore,transformTool:i.transformToolStore,scale:i.scale,sprite:i.spriteStore,stickerTool:i.spriteStore.stickerToolStore,textTool:i.spriteStore.textToolStore,textDesignTool:i.spriteStore.textDesignToolStore,library:i.libraryStore,modal:i.modalStore,snapping:i.snappingStore,config:i.configStore,active:i.activeStore,canvas:i.canvasStore,history:i.historyStore,editor:i}};var h0=({editor:i})=>{const t=(0,Qn.useMemo)(()=>{return Dmt(i)},[i]);if(i.configStore.config.layout==="basic"){return Qn.default.createElement(Qn.Suspense,{fallback:Qn.default.createElement("div",null)},Qn.default.createElement(Imt,{editor:i,storeProps:t}))}return Qn.default.createElement(qv,{editor:i,storeProps:t})};var YY=class extends wr{constructor(t,e,r){super();this.dispose=()=>{if(this.container){kD.default.unmountComponentAtNode(this.container);this.removeAllListeners("export");this.removeAllListeners("historyUndo");this.removeAllListeners("historyRedo");this.removeAllListeners("historyChange");this.removeAllListeners("editorReady");this.removeAllListeners("errorImageLoading");this.removeAllListeners("imageLoad");this.removeAllListeners("toolEnter");this.removeAllListeners("stickerUploadAdd");this.removeAllListeners("errorWebGLContextLost");this.removeAllListeners("cropDimensionsChange");if(this.editor){this.editor.dispose()}}};this.serialize=t=>{return this.editor.serialize(t)};this.deserialize=t=>{return this.editor.deserialize(t)};this.export=t=>{return this.editor.export(t)};this.close=()=>{return this.editor.close()};this.setImage=t=>{return this.editor.setImage(t,true)};this.getImageDimensions=()=>{return this.editor.getImageDimensions()};this.getImageMimeType=()=>{return this.editor.getImageMimeType()};this.reset=()=>{this.editor.resetToolStates();this.editor.resize()};this.container=e;const o={["export"]:n=>{this.emit("export",n)},["close"]:()=>{this.emit("close");this.dispose()},["historyUndo"]:()=>{this.emit("historyUndo")},["historyRedo"]:()=>{this.emit("historyRedo")},["historyChange"]:()=>{this.emit("historyChange")},["stickerUploadAdd"]:n=>{this.emit("stickerUploadAdd",n)},["cropDimensionsChange"]:n=>{this.emit("cropDimensionsChange",n)}};if(r){Object.entries(r).forEach(([n,s])=>{o[n]=s(this)})}this.editor=new Cl({...t},o)}hasChanges(){return this.editor.hasChanges()}};var JY=class{constructor(){this.container=null}init(t){return new Promise((e,r)=>{if(typeof window==="undefined"){e();return}this.container=typeof t.container==="string"?document.querySelector(t.container):t.container;if(this.container){this.editorApi=new YY(t,this.container,{["editorReady"]:o=>()=>{setTimeout(()=>{o.emit("editorReady")},0);e(o)},["errorImageLoading"]:o=>n=>{setTimeout(()=>{o.emit("errorImageLoading",n)},0);e(o)},["errorWebGLContextLost"]:o=>n=>{setTimeout(()=>{o.emit("errorWebGLContextLost",n)},0);e(o)},["imageLoad"]:o=>()=>{setTimeout(()=>{o.emit("imageLoad")},0);e(o)},["toolEnter"]:o=>n=>{setTimeout(()=>{o.emit("toolEnter",n)},0);e(o)}});kD.default.render(ng.default.createElement(Emt,{editor:this.editorApi.editor}),this.container)}else{r(new Error("Provide a container"))}})}};var Emt=({editor:i})=>{(0,ng.useEffect)(()=>{return()=>{var t;if((t=i==null?void 0:i.configStore)==null?void 0:t.events){i.configStore.events.removeAllListeners("export");i.configStore.events.removeAllListeners("close");i.configStore.events.removeAllListeners("historyUndo");i.configStore.events.removeAllListeners("historyRedo");i.configStore.events.removeAllListeners("historyChange");i.configStore.events.removeAllListeners("editorReady");i.configStore.events.removeAllListeners("errorImageLoading");i.configStore.events.removeAllListeners("imageLoad");i.configStore.events.removeAllListeners("toolEnter");i.configStore.events.removeAllListeners("stickerUploadAdd");i.configStore.events.removeAllListeners("errorWebGLContextLost");i.configStore.events.removeAllListeners("cropDimensionsChange")}}},[]);return ng.default.createElement(h0,{editor:i})};var ZY={init:i=>{const t=new JY;return t.init(i)}};R();var f0=y(require("react"));R();Kt();var QY=class extends f0.default.Component{constructor(t){super(t);this.ui=new wr;this.serialize=t=>{return this.editor.serialize(t)};this.deserialize=t=>{return this.editor.deserialize(t)};this.export=t=>{return this.editor.export(t)};this.close=()=>{return this.editor.close()};this.setImage=t=>{return this.editor.setImage(t,true)};this.getImageDimensions=()=>{return this.editor.getImageDimensions()};this.dispose=()=>{this.ui.removeAllListeners("export");this.ui.removeAllListeners("historyUndo");this.ui.removeAllListeners("historyRedo");this.ui.removeAllListeners("historyChange");this.ui.removeAllListeners("editorReady");this.ui.removeAllListeners("errorImageLoading");this.ui.removeAllListeners("imageLoad");this.ui.removeAllListeners("toolEnter");this.ui.removeAllListeners("stickerUploadAdd");this.ui.removeAllListeners("errorWebGLContextLost");this.ui.removeAllListeners("cropDimensionsChange");if(this.editor){this.editor.dispose()}};this.reset=()=>{this.editor.resetToolStates();this.editor.resize()};this.editor=new Cl({...t},{["export"]:e=>{this.ui.emit("export",e)},["close"]:()=>{this.componentWillUnmount();this.ui.emit("close")},["historyUndo"]:()=>{this.ui.emit("historyUndo")},["historyRedo"]:()=>{this.ui.emit("historyRedo")},["historyChange"]:()=>{this.ui.emit("historyChange")},["editorReady"]:()=>{this.ui.emit("editorReady")},["errorImageLoading"]:e=>{this.ui.emit("errorImageLoading",e)},["imageLoad"]:()=>{this.ui.emit("imageLoad")},["toolEnter"]:e=>{this.ui.emit("toolEnter",e)},["stickerUploadAdd"]:e=>{this.ui.emit("stickerUploadAdd",e)},["cropDimensionsChange"]:e=>{this.ui.emit("cropDimensionsChange",e)},["errorWebGLContextLost"]:()=>{this.ui.emit("errorWebGLContextLost")}})}componentWillUnmount(){this.dispose()}hasChanges(){return this.editor.hasChanges()}render(){return f0.default.createElement(h0,{editor:this.editor})}};var tJ=i=>{if(typeof window==="undefined"){return null}return f0.default.createElement(QY,{...i})};Kt();H();var Fmt=()=>{const{active:i}=I();return i.newImage};H();var Rmt=()=>{const{active:i}=I();return i.image};H();var Omt=()=>{const i=I();return i.config.isLayoutAdvanced};Sg({isolateGlobalState:true});var{Container:Amt,Input:Bmt,ColorItem:Pmt,ColorItemBase:Mmt,ColorItemBackground:Lmt,ColorItemTiledBackground:zmt,ColorItemActiveOverlay:Umt,Dialog:Nmt,DialogBase:Hmt,DialogContainer:Wmt,DialogBackdrop:Gmt,DialogHeader:Vmt,DialogBody:jmt,DialogFooter:$mt,DialogSpinner:Kmt}=B;var{Search:Xmt,Label:qmt,Checkbox:Ymt,CheckboxBase:Jmt,CheckboxInput:Zmt,CheckboxCheckMark:Qmt,Dropdown:tpt,Slider:ept,SliderBase:ipt,SliderContainer:rpt,SliderInput:opt,SliderTrack:npt,SliderLabel:spt}=Bmt;var apt=gf;var lpt=gf;var cpt=Xmt;var upt=V.Toolbar.Index;var dpt=V.Sidebar.Index;var mpt=V.Controlsbar;var ppt=P.Toolbar.Index;var hpt=P.Controlsbar;var fpt=P.Itemsbar;module.exports=Mi(gpt);
/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
